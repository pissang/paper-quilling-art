/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 124);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NvbG9ycy5qcz85ZDE4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNwZWNpZmllcikge1xuICB2YXIgbiA9IHNwZWNpZmllci5sZW5ndGggLyA2IHwgMCwgY29sb3JzID0gbmV3IEFycmF5KG4pLCBpID0gMDtcbiAgd2hpbGUgKGkgPCBuKSBjb2xvcnNbaV0gPSBcIiNcIiArIHNwZWNpZmllci5zbGljZShpICogNiwgKytpICogNik7XG4gIHJldHVybiBjb2xvcnM7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NvbG9ycy5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mixin_extend__ = __webpack_require__(73);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mixin_notifier__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__util__ = __webpack_require__(11);\n\n\n\n\n/**\n * Base class of all objects\n * @constructor\n * @alias clay.core.Base\n * @mixes clay.core.mixin.notifier\n */\nvar Base = function () {\n    /**\n     * @type {number}\n     */\n    this.__uid__ = __WEBPACK_IMPORTED_MODULE_2__util__[\"a\" /* default */].genGUID();\n};\n\nBase.__initializers__ = [\n    function (opts) {\n        __WEBPACK_IMPORTED_MODULE_2__util__[\"a\" /* default */].extend(this, opts);\n    }\n];\n\n__WEBPACK_IMPORTED_MODULE_2__util__[\"a\" /* default */].extend(Base, __WEBPACK_IMPORTED_MODULE_0__mixin_extend__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_2__util__[\"a\" /* default */].extend(Base.prototype, __WEBPACK_IMPORTED_MODULE_1__mixin_notifier__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Base);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2NvcmUvQmFzZS5qcz81YzhiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHRlbmRNaXhpbiBmcm9tICcuL21peGluL2V4dGVuZCc7XG5pbXBvcnQgbm90aWZpZXJNaXhpbiBmcm9tICcuL21peGluL25vdGlmaWVyJztcbmltcG9ydCB1dGlsIGZyb20gJy4vdXRpbCc7XG5cbi8qKlxuICogQmFzZSBjbGFzcyBvZiBhbGwgb2JqZWN0c1xuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5jb3JlLkJhc2VcbiAqIEBtaXhlcyBjbGF5LmNvcmUubWl4aW4ubm90aWZpZXJcbiAqL1xudmFyIEJhc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLl9fdWlkX18gPSB1dGlsLmdlbkdVSUQoKTtcbn07XG5cbkJhc2UuX19pbml0aWFsaXplcnNfXyA9IFtcbiAgICBmdW5jdGlvbiAob3B0cykge1xuICAgICAgICB1dGlsLmV4dGVuZCh0aGlzLCBvcHRzKTtcbiAgICB9XG5dO1xuXG51dGlsLmV4dGVuZChCYXNlLCBleHRlbmRNaXhpbik7XG51dGlsLmV4dGVuZChCYXNlLnByb3RvdHlwZSwgbm90aWZpZXJNaXhpbik7XG5cbmV4cG9ydCBkZWZhdWx0IEJhc2U7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2NvcmUvQmFzZS5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_interpolate__ = __webpack_require__(65);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(scheme) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0_d3_interpolate__[\"b\" /* interpolateRgbBasis */])(scheme[scheme.length - 1]);\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL3JhbXAuanM/ODEwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2ludGVycG9sYXRlUmdiQmFzaXN9IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzY2hlbWUpIHtcbiAgcmV0dXJuIGludGVycG9sYXRlUmdiQmFzaXMoc2NoZW1lW3NjaGVtZS5sZW5ndGggLSAxXSk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL3JhbXAuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__ = __webpack_require__(5);\n\n\n/**\n * @constructor\n * @alias clay.Vector3\n * @param {number} x\n * @param {number} y\n * @param {number} z\n */\nvar Vector3 = function(x, y, z) {\n\n    x = x || 0;\n    y = y || 0;\n    z = z || 0;\n\n    /**\n     * Storage of Vector3, read and write of x, y, z will change the values in array\n     * All methods also operate on the array instead of x, y, z components\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Vector3#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].fromValues(x, y, z);\n\n    /**\n     * Dirty flag is used by the Node to determine\n     * if the matrix is updated to latest\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Vector3#\n     */\n    this._dirty = true;\n};\n\nVector3.prototype = {\n\n    constructor: Vector3,\n\n    /**\n     * Add b to self\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    add: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].add(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x, y and z components\n     * @param  {number}  x\n     * @param  {number}  y\n     * @param  {number}  z\n     * @return {clay.Vector3}\n     */\n    set: function (x, y, z) {\n        this.array[0] = x;\n        this.array[1] = y;\n        this.array[2] = z;\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x, y and z components from array\n     * @param  {Float32Array|number[]} arr\n     * @return {clay.Vector3}\n     */\n    setArray: function (arr) {\n        this.array[0] = arr[0];\n        this.array[1] = arr[1];\n        this.array[2] = arr[2];\n\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Clone a new Vector3\n     * @return {clay.Vector3}\n     */\n    clone: function () {\n        return new Vector3(this.x, this.y, this.z);\n    },\n\n    /**\n     * Copy from b\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    copy: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].copy(this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Cross product of self and b, written to a Vector3 out\n     * @param  {clay.Vector3} a\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    cross: function (a, b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].cross(this.array, a.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for distance\n     * @param  {clay.Vector3} b\n     * @return {number}\n     */\n    dist: function (b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].dist(this.array, b.array);\n    },\n\n    /**\n     * Distance between self and b\n     * @param  {clay.Vector3} b\n     * @return {number}\n     */\n    distance: function (b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].distance(this.array, b.array);\n    },\n\n    /**\n     * Alias for divide\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    div: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].div(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Divide self by b\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    divide: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].divide(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Dot product of self and b\n     * @param  {clay.Vector3} b\n     * @return {number}\n     */\n    dot: function (b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].dot(this.array, b.array);\n    },\n\n    /**\n     * Alias of length\n     * @return {number}\n     */\n    len: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].len(this.array);\n    },\n\n    /**\n     * Calculate the length\n     * @return {number}\n     */\n    length: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].length(this.array);\n    },\n    /**\n     * Linear interpolation between a and b\n     * @param  {clay.Vector3} a\n     * @param  {clay.Vector3} b\n     * @param  {number}  t\n     * @return {clay.Vector3}\n     */\n    lerp: function (a, b, t) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].lerp(this.array, a.array, b.array, t);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Minimum of self and b\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    min: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].min(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Maximum of self and b\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    max: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].max(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiply\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    mul: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Mutiply self and b\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    multiply: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Negate self\n     * @return {clay.Vector3}\n     */\n    negate: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].negate(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Normalize self\n     * @return {clay.Vector3}\n     */\n    normalize: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].normalize(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Generate random x, y, z components with a given scale\n     * @param  {number} scale\n     * @return {clay.Vector3}\n     */\n    random: function (scale) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].random(this.array, scale);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale self\n     * @param  {number}  scale\n     * @return {clay.Vector3}\n     */\n    scale: function (s) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].scale(this.array, this.array, s);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale b and add to self\n     * @param  {clay.Vector3} b\n     * @param  {number}  scale\n     * @return {clay.Vector3}\n     */\n    scaleAndAdd: function (b, s) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(this.array, this.array, b.array, s);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for squaredDistance\n     * @param  {clay.Vector3} b\n     * @return {number}\n     */\n    sqrDist: function (b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].sqrDist(this.array, b.array);\n    },\n\n    /**\n     * Squared distance between self and b\n     * @param  {clay.Vector3} b\n     * @return {number}\n     */\n    squaredDistance: function (b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].squaredDistance(this.array, b.array);\n    },\n\n    /**\n     * Alias for squaredLength\n     * @return {number}\n     */\n    sqrLen: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].sqrLen(this.array);\n    },\n\n    /**\n     * Squared length of self\n     * @return {number}\n     */\n    squaredLength: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].squaredLength(this.array);\n    },\n\n    /**\n     * Alias for subtract\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    sub: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].sub(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Subtract b from self\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    subtract: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].subtract(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Matrix3 m\n     * @param  {clay.Matrix3} m\n     * @return {clay.Vector3}\n     */\n    transformMat3: function (m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].transformMat3(this.array, this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Matrix4 m\n     * @param  {clay.Matrix4} m\n     * @return {clay.Vector3}\n     */\n    transformMat4: function (m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].transformMat4(this.array, this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Transform self with a Quaternion q\n     * @param  {clay.Quaternion} q\n     * @return {clay.Vector3}\n     */\n    transformQuat: function (q) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].transformQuat(this.array, this.array, q.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Trasnform self into projection space with m\n     * @param  {clay.Matrix4} m\n     * @return {clay.Vector3}\n     */\n    applyProjection: function (m) {\n        var v = this.array;\n        m = m.array;\n\n        // Perspective projection\n        if (m[15] === 0) {\n            var w = -1 / v[2];\n            v[0] = m[0] * v[0] * w;\n            v[1] = m[5] * v[1] * w;\n            v[2] = (m[10] * v[2] + m[14]) * w;\n        }\n        else {\n            v[0] = m[0] * v[0] + m[12];\n            v[1] = m[5] * v[1] + m[13];\n            v[2] = m[10] * v[2] + m[14];\n        }\n        this._dirty = true;\n\n        return this;\n    },\n\n    eulerFromQuat: function(q, order) {\n        Vector3.eulerFromQuat(this, q, order);\n    },\n\n    eulerFromMat3: function (m, order) {\n        Vector3.eulerFromMat3(this, m, order);\n    },\n\n    toString: function() {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n\nvar defineProperty = Object.defineProperty;\n// Getter and Setter\nif (defineProperty) {\n\n    var proto = Vector3.prototype;\n    /**\n     * @name x\n     * @type {number}\n     * @memberOf clay.Vector3\n     * @instance\n     */\n    defineProperty(proto, 'x', {\n        get: function () {\n            return this.array[0];\n        },\n        set: function (value) {\n            this.array[0] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name y\n     * @type {number}\n     * @memberOf clay.Vector3\n     * @instance\n     */\n    defineProperty(proto, 'y', {\n        get: function () {\n            return this.array[1];\n        },\n        set: function (value) {\n            this.array[1] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name z\n     * @type {number}\n     * @memberOf clay.Vector3\n     * @instance\n     */\n    defineProperty(proto, 'z', {\n        get: function () {\n            return this.array[2];\n        },\n        set: function (value) {\n            this.array[2] = value;\n            this._dirty = true;\n        }\n    });\n}\n\n\n// Supply methods that are not in place\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.add = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].add(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector3} out\n * @param  {number}  x\n * @param  {number}  y\n * @param  {number}  z\n * @return {clay.Vector3}\n */\nVector3.set = function(out, x, y, z) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].set(out.array, x, y, z);\n    out._dirty = true;\n};\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.copy = function(out, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].copy(out.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.cross = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].cross(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {number}\n */\nVector3.dist = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].distance(a.array, b.array);\n};\n\n/**\n * @function\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {number}\n */\nVector3.distance = Vector3.dist;\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.div = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].divide(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.divide = Vector3.div;\n\n/**\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {number}\n */\nVector3.dot = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].dot(a.array, b.array);\n};\n\n/**\n * @param  {clay.Vector3} a\n * @return {number}\n */\nVector3.len = function(b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].length(b.array);\n};\n\n// Vector3.length = Vector3.len;\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @param  {number}  t\n * @return {clay.Vector3}\n */\nVector3.lerp = function(out, a, b, t) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].lerp(out.array, a.array, b.array, t);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.min = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].min(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.max = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].max(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.mul = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].multiply(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @function\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.multiply = Vector3.mul;\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @return {clay.Vector3}\n */\nVector3.negate = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].negate(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @return {clay.Vector3}\n */\nVector3.normalize = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].normalize(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} out\n * @param  {number}  scale\n * @return {clay.Vector3}\n */\nVector3.random = function(out, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].random(out.array, scale);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {number}  scale\n * @return {clay.Vector3}\n */\nVector3.scale = function(out, a, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].scale(out.array, a.array, scale);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @param  {number}  scale\n * @return {clay.Vector3}\n */\nVector3.scaleAndAdd = function(out, a, b, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, a.array, b.array, scale);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {number}\n */\nVector3.sqrDist = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].sqrDist(a.array, b.array);\n};\n/**\n * @function\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {number}\n */\nVector3.squaredDistance = Vector3.sqrDist;\n/**\n * @param  {clay.Vector3} a\n * @return {number}\n */\nVector3.sqrLen = function(a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].sqrLen(a.array);\n};\n/**\n * @function\n * @param  {clay.Vector3} a\n * @return {number}\n */\nVector3.squaredLength = Vector3.sqrLen;\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.sub = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].subtract(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @function\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.subtract = Vector3.sub;\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {Matrix3} m\n * @return {clay.Vector3}\n */\nVector3.transformMat3 = function(out, a, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].transformMat3(out.array, a.array, m.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Matrix4} m\n * @return {clay.Vector3}\n */\nVector3.transformMat4 = function(out, a, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].transformMat4(out.array, a.array, m.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Quaternion} q\n * @return {clay.Vector3}\n */\nVector3.transformQuat = function(out, a, q) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].transformQuat(out.array, a.array, q.array);\n    out._dirty = true;\n    return out;\n};\n\nfunction clamp(val, min, max) {\n    return val < min ? min : (val > max ? max : val);\n}\nvar atan2 = Math.atan2;\nvar asin = Math.asin;\nvar abs = Math.abs;\n/**\n * Convert quaternion to euler angle\n * Quaternion must be normalized\n * From three.js\n */\nVector3.eulerFromQuat = function (out, q, order) {\n    out._dirty = true;\n    q = q.array;\n\n    var target = out.array;\n    var x = q[0], y = q[1], z = q[2], w = q[3];\n    var x2 = x * x;\n    var y2 = y * y;\n    var z2 = z * z;\n    var w2 = w * w;\n\n    var order = (order || 'XYZ').toUpperCase();\n\n    switch (order) {\n        case 'XYZ':\n            target[0] = atan2(2 * (x * w - y * z), (w2 - x2 - y2 + z2));\n            target[1] = asin(clamp(2 * (x * z + y * w), - 1, 1));\n            target[2] = atan2(2 * (z * w - x * y), (w2 + x2 - y2 - z2));\n            break;\n        case 'YXZ':\n            target[0] = asin(clamp(2 * (x * w - y * z), - 1, 1));\n            target[1] = atan2(2 * (x * z + y * w), (w2 - x2 - y2 + z2));\n            target[2] = atan2(2 * (x * y + z * w), (w2 - x2 + y2 - z2));\n            break;\n        case 'ZXY':\n            target[0] = asin(clamp(2 * (x * w + y * z), - 1, 1));\n            target[1] = atan2(2 * (y * w - z * x), (w2 - x2 - y2 + z2));\n            target[2] = atan2(2 * (z * w - x * y), (w2 - x2 + y2 - z2));\n            break;\n        case 'ZYX':\n            target[0] = atan2(2 * (x * w + z * y), (w2 - x2 - y2 + z2));\n            target[1] = asin(clamp(2 * (y * w - x * z), - 1, 1));\n            target[2] = atan2(2 * (x * y + z * w), (w2 + x2 - y2 - z2));\n            break;\n        case 'YZX':\n            target[0] = atan2(2 * (x * w - z * y), (w2 - x2 + y2 - z2));\n            target[1] = atan2(2 * (y * w - x * z), (w2 + x2 - y2 - z2));\n            target[2] = asin(clamp(2 * (x * y + z * w), - 1, 1));\n            break;\n        case 'XZY':\n            target[0] = atan2(2 * (x * w + y * z), (w2 - x2 + y2 - z2));\n            target[1] = atan2(2 * (x * z + y * w), (w2 + x2 - y2 - z2));\n            target[2] = asin(clamp(2 * (z * w - x * y), - 1, 1));\n            break;\n        default:\n            console.warn('Unkown order: ' + order);\n    }\n    return out;\n};\n\n/**\n * Convert rotation matrix to euler angle\n * from three.js\n */\nVector3.eulerFromMat3 = function (out, m, order) {\n    // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n    var te = m.array;\n    var m11 = te[0], m12 = te[3], m13 = te[6];\n    var m21 = te[1], m22 = te[4], m23 = te[7];\n    var m31 = te[2], m32 = te[5], m33 = te[8];\n    var target = out.array;\n\n    var order = (order || 'XYZ').toUpperCase();\n\n    switch (order) {\n        case 'XYZ':\n            target[1] = asin(clamp(m13, -1, 1));\n            if (abs(m13) < 0.99999) {\n                target[0] = atan2(-m23, m33);\n                target[2] = atan2(-m12, m11);\n            }\n            else {\n                target[0] = atan2(m32, m22);\n                target[2] = 0;\n            }\n            break;\n        case 'YXZ':\n            target[0] = asin(-clamp(m23, -1, 1));\n            if (abs(m23) < 0.99999) {\n                target[1] = atan2(m13, m33);\n                target[2] = atan2(m21, m22);\n            }\n            else {\n                target[1] = atan2(-m31, m11);\n                target[2] = 0;\n            }\n            break;\n        case 'ZXY':\n            target[0] = asin(clamp(m32, -1, 1));\n            if (abs(m32) < 0.99999) {\n                target[1] = atan2(-m31, m33);\n                target[2] = atan2(-m12, m22);\n            }\n            else {\n                target[1] = 0;\n                target[2] = atan2(m21, m11);\n            }\n            break;\n        case 'ZYX':\n            target[1] = asin(-clamp(m31, -1, 1));\n            if (abs(m31) < 0.99999) {\n                target[0] = atan2(m32, m33);\n                target[2] = atan2(m21, m11);\n            }\n            else {\n                target[0] = 0;\n                target[2] = atan2(-m12, m22);\n            }\n            break;\n        case 'YZX':\n            target[2] = asin(clamp(m21, -1, 1));\n            if (abs(m21) < 0.99999) {\n                target[0] = atan2(-m23, m22);\n                target[1] = atan2(-m31, m11);\n            }\n            else {\n                target[0] = 0;\n                target[1] = atan2(m13, m33);\n            }\n            break;\n        case 'XZY':\n            target[2] = asin(-clamp(m12, -1, 1));\n            if (abs(m12) < 0.99999) {\n                target[0] = atan2(m32, m22);\n                target[1] = atan2(m13, m11);\n            }\n            else {\n                target[0] = atan2(-m23, m33);\n                target[1] = 0;\n            }\n            break;\n        default:\n            console.warn('Unkown order: ' + order);\n    }\n    out._dirty = true;\n\n    return out;\n};\n\nObject.defineProperties(Vector3, {\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     * @memberOf clay.Vector3\n     */\n    POSITIVE_X: {\n        get: function () {\n            return new Vector3(1, 0, 0);\n        }\n    },\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     * @memberOf clay.Vector3\n     */\n    NEGATIVE_X: {\n        get: function () {\n            return new Vector3(-1, 0, 0);\n        }\n    },\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     * @memberOf clay.Vector3\n     */\n    POSITIVE_Y: {\n        get: function () {\n            return new Vector3(0, 1, 0);\n        }\n    },\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     * @memberOf clay.Vector3\n     */\n    NEGATIVE_Y: {\n        get: function () {\n            return new Vector3(0, -1, 0);\n        }\n    },\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     * @memberOf clay.Vector3\n     */\n    POSITIVE_Z: {\n        get: function () {\n            return new Vector3(0, 0, 1);\n        }\n    },\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     */\n    NEGATIVE_Z: {\n        get: function () {\n            return new Vector3(0, 0, -1);\n        }\n    },\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     * @memberOf clay.Vector3\n     */\n    UP: {\n        get: function () {\n            return new Vector3(0, 1, 0);\n        }\n    },\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     * @memberOf clay.Vector3\n     */\n    ZERO: {\n        get: function () {\n            return new Vector3();\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Vector3);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL21hdGgvVmVjdG9yMy5qcz9iZDAyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB2ZWMzIGZyb20gJy4uL2dsbWF0cml4L3ZlYzMnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuVmVjdG9yM1xuICogQHBhcmFtIHtudW1iZXJ9IHhcbiAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gKiBAcGFyYW0ge251bWJlcn0gelxuICovXG52YXIgVmVjdG9yMyA9IGZ1bmN0aW9uKHgsIHksIHopIHtcblxuICAgIHggPSB4IHx8IDA7XG4gICAgeSA9IHkgfHwgMDtcbiAgICB6ID0geiB8fCAwO1xuXG4gICAgLyoqXG4gICAgICogU3RvcmFnZSBvZiBWZWN0b3IzLCByZWFkIGFuZCB3cml0ZSBvZiB4LCB5LCB6IHdpbGwgY2hhbmdlIHRoZSB2YWx1ZXMgaW4gYXJyYXlcbiAgICAgKiBBbGwgbWV0aG9kcyBhbHNvIG9wZXJhdGUgb24gdGhlIGFycmF5IGluc3RlYWQgb2YgeCwgeSwgeiBjb21wb25lbnRzXG4gICAgICogQG5hbWUgYXJyYXlcbiAgICAgKiBAdHlwZSB7RmxvYXQzMkFycmF5fVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjMjXG4gICAgICovXG4gICAgdGhpcy5hcnJheSA9IHZlYzMuZnJvbVZhbHVlcyh4LCB5LCB6KTtcblxuICAgIC8qKlxuICAgICAqIERpcnR5IGZsYWcgaXMgdXNlZCBieSB0aGUgTm9kZSB0byBkZXRlcm1pbmVcbiAgICAgKiBpZiB0aGUgbWF0cml4IGlzIHVwZGF0ZWQgdG8gbGF0ZXN0XG4gICAgICogQG5hbWUgX2RpcnR5XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQG1lbWJlck9mIGNsYXkuVmVjdG9yMyNcbiAgICAgKi9cbiAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG59O1xuXG5WZWN0b3IzLnByb3RvdHlwZSA9IHtcblxuICAgIGNvbnN0cnVjdG9yOiBWZWN0b3IzLFxuXG4gICAgLyoqXG4gICAgICogQWRkIGIgdG8gc2VsZlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBhZGQ6IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHZlYzMuYWRkKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgeCwgeSBhbmQgeiBjb21wb25lbnRzXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgeFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHlcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB6XG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24gKHgsIHksIHopIHtcbiAgICAgICAgdGhpcy5hcnJheVswXSA9IHg7XG4gICAgICAgIHRoaXMuYXJyYXlbMV0gPSB5O1xuICAgICAgICB0aGlzLmFycmF5WzJdID0gejtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHgsIHkgYW5kIHogY29tcG9uZW50cyBmcm9tIGFycmF5XG4gICAgICogQHBhcmFtICB7RmxvYXQzMkFycmF5fG51bWJlcltdfSBhcnJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgc2V0QXJyYXk6IGZ1bmN0aW9uIChhcnIpIHtcbiAgICAgICAgdGhpcy5hcnJheVswXSA9IGFyclswXTtcbiAgICAgICAgdGhpcy5hcnJheVsxXSA9IGFyclsxXTtcbiAgICAgICAgdGhpcy5hcnJheVsyXSA9IGFyclsyXTtcblxuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSBhIG5ldyBWZWN0b3IzXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIGNsb25lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMyh0aGlzLngsIHRoaXMueSwgdGhpcy56KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ29weSBmcm9tIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgY29weTogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgdmVjMy5jb3B5KHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDcm9zcyBwcm9kdWN0IG9mIHNlbGYgYW5kIGIsIHdyaXR0ZW4gdG8gYSBWZWN0b3IzIG91dFxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBjcm9zczogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgdmVjMy5jcm9zcyh0aGlzLmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIGRpc3RhbmNlXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGRpc3Q6IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHJldHVybiB2ZWMzLmRpc3QodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERpc3RhbmNlIGJldHdlZW4gc2VsZiBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBkaXN0YW5jZTogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgcmV0dXJuIHZlYzMuZGlzdGFuY2UodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBkaXZpZGVcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgZGl2OiBmdW5jdGlvbiAoYikge1xuICAgICAgICB2ZWMzLmRpdih0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGl2aWRlIHNlbGYgYnkgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBkaXZpZGU6IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHZlYzMuZGl2aWRlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEb3QgcHJvZHVjdCBvZiBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGRvdDogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgcmV0dXJuIHZlYzMuZG90KHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBvZiBsZW5ndGhcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgbGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB2ZWMzLmxlbih0aGlzLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBsZW5ndGhcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgbGVuZ3RoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB2ZWMzLmxlbmd0aCh0aGlzLmFycmF5KTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIExpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gYSBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHRcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgbGVycDogZnVuY3Rpb24gKGEsIGIsIHQpIHtcbiAgICAgICAgdmVjMy5sZXJwKHRoaXMuYXJyYXksIGEuYXJyYXksIGIuYXJyYXksIHQpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNaW5pbXVtIG9mIHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgbWluOiBmdW5jdGlvbiAoYikge1xuICAgICAgICB2ZWMzLm1pbih0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTWF4aW11bSBvZiBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIG1heDogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgdmVjMy5tYXgodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBtdWx0aXBseVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBtdWw6IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHZlYzMubXVsKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNdXRpcGx5IHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgbXVsdGlwbHk6IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHZlYzMubXVsdGlwbHkodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE5lZ2F0ZSBzZWxmXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIG5lZ2F0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2ZWMzLm5lZ2F0ZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTm9ybWFsaXplIHNlbGZcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgbm9ybWFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZlYzMubm9ybWFsaXplKHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSByYW5kb20geCwgeSwgeiBjb21wb25lbnRzIHdpdGggYSBnaXZlbiBzY2FsZVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gc2NhbGVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgcmFuZG9tOiBmdW5jdGlvbiAoc2NhbGUpIHtcbiAgICAgICAgdmVjMy5yYW5kb20odGhpcy5hcnJheSwgc2NhbGUpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTY2FsZSBzZWxmXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgc2NhbGU6IGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHZlYzMuc2NhbGUodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgcyk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNjYWxlIGIgYW5kIGFkZCB0byBzZWxmXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgc2NhbGVBbmRBZGQ6IGZ1bmN0aW9uIChiLCBzKSB7XG4gICAgICAgIHZlYzMuc2NhbGVBbmRBZGQodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSwgcyk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBzcXVhcmVkRGlzdGFuY2VcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3FyRGlzdDogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgcmV0dXJuIHZlYzMuc3FyRGlzdCh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3F1YXJlZERpc3RhbmNlOiBmdW5jdGlvbiAoYikge1xuICAgICAgICByZXR1cm4gdmVjMy5zcXVhcmVkRGlzdGFuY2UodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBzcXVhcmVkTGVuZ3RoXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNxckxlbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdmVjMy5zcXJMZW4odGhpcy5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNxdWFyZWQgbGVuZ3RoIG9mIHNlbGZcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3F1YXJlZExlbmd0aDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdmVjMy5zcXVhcmVkTGVuZ3RoKHRoaXMuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3Igc3VidHJhY3RcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgc3ViOiBmdW5jdGlvbiAoYikge1xuICAgICAgICB2ZWMzLnN1Yih0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3VidHJhY3QgYiBmcm9tIHNlbGZcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgc3VidHJhY3Q6IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHZlYzMuc3VidHJhY3QodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBzZWxmIHdpdGggYSBNYXRyaXgzIG1cbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IG1cbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgdHJhbnNmb3JtTWF0MzogZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgdmVjMy50cmFuc2Zvcm1NYXQzKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIG0uYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gc2VsZiB3aXRoIGEgTWF0cml4NCBtXG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBtXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIHRyYW5zZm9ybU1hdDQ6IGZ1bmN0aW9uIChtKSB7XG4gICAgICAgIHZlYzMudHJhbnNmb3JtTWF0NCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBtLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBzZWxmIHdpdGggYSBRdWF0ZXJuaW9uIHFcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IHFcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgdHJhbnNmb3JtUXVhdDogZnVuY3Rpb24gKHEpIHtcbiAgICAgICAgdmVjMy50cmFuc2Zvcm1RdWF0KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHEuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUcmFzbmZvcm0gc2VsZiBpbnRvIHByb2plY3Rpb24gc3BhY2Ugd2l0aCBtXG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBtXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIGFwcGx5UHJvamVjdGlvbjogZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgdmFyIHYgPSB0aGlzLmFycmF5O1xuICAgICAgICBtID0gbS5hcnJheTtcblxuICAgICAgICAvLyBQZXJzcGVjdGl2ZSBwcm9qZWN0aW9uXG4gICAgICAgIGlmIChtWzE1XSA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIHcgPSAtMSAvIHZbMl07XG4gICAgICAgICAgICB2WzBdID0gbVswXSAqIHZbMF0gKiB3O1xuICAgICAgICAgICAgdlsxXSA9IG1bNV0gKiB2WzFdICogdztcbiAgICAgICAgICAgIHZbMl0gPSAobVsxMF0gKiB2WzJdICsgbVsxNF0pICogdztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZbMF0gPSBtWzBdICogdlswXSArIG1bMTJdO1xuICAgICAgICAgICAgdlsxXSA9IG1bNV0gKiB2WzFdICsgbVsxM107XG4gICAgICAgICAgICB2WzJdID0gbVsxMF0gKiB2WzJdICsgbVsxNF07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBldWxlckZyb21RdWF0OiBmdW5jdGlvbihxLCBvcmRlcikge1xuICAgICAgICBWZWN0b3IzLmV1bGVyRnJvbVF1YXQodGhpcywgcSwgb3JkZXIpO1xuICAgIH0sXG5cbiAgICBldWxlckZyb21NYXQzOiBmdW5jdGlvbiAobSwgb3JkZXIpIHtcbiAgICAgICAgVmVjdG9yMy5ldWxlckZyb21NYXQzKHRoaXMsIG0sIG9yZGVyKTtcbiAgICB9LFxuXG4gICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJ1snICsgQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbCh0aGlzLmFycmF5LCAnLCcpICsgJ10nO1xuICAgIH0sXG5cbiAgICB0b0FycmF5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLmFycmF5KTtcbiAgICB9XG59O1xuXG52YXIgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG4vLyBHZXR0ZXIgYW5kIFNldHRlclxuaWYgKGRlZmluZVByb3BlcnR5KSB7XG5cbiAgICB2YXIgcHJvdG8gPSBWZWN0b3IzLnByb3RvdHlwZTtcbiAgICAvKipcbiAgICAgKiBAbmFtZSB4XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3IzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICd4Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5WzBdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hcnJheVswXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSB5XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3IzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICd5Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5WzFdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hcnJheVsxXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSB6XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3IzXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICd6Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5WzJdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hcnJheVsyXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cblxuLy8gU3VwcGx5IG1ldGhvZHMgdGhhdCBhcmUgbm90IGluIHBsYWNlXG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMuYWRkID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjMy5hZGQob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7bnVtYmVyfSAgeFxuICogQHBhcmFtICB7bnVtYmVyfSAgeVxuICogQHBhcmFtICB7bnVtYmVyfSAgelxuICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICovXG5WZWN0b3IzLnNldCA9IGZ1bmN0aW9uKG91dCwgeCwgeSwgeikge1xuICAgIHZlYzMuc2V0KG91dC5hcnJheSwgeCwgeSwgeik7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAqL1xuVmVjdG9yMy5jb3B5ID0gZnVuY3Rpb24ob3V0LCBiKSB7XG4gICAgdmVjMy5jb3B5KG91dC5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMuY3Jvc3MgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2ZWMzLmNyb3NzKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMy5kaXN0ID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiB2ZWMzLmRpc3RhbmNlKGEuYXJyYXksIGIuYXJyYXkpO1xufTtcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjMuZGlzdGFuY2UgPSBWZWN0b3IzLmRpc3Q7XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMuZGl2ID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjMy5kaXZpZGUob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICovXG5WZWN0b3IzLmRpdmlkZSA9IFZlY3RvcjMuZGl2O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjMuZG90ID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiB2ZWMzLmRvdChhLmFycmF5LCBiLmFycmF5KTtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjMubGVuID0gZnVuY3Rpb24oYikge1xuICAgIHJldHVybiB2ZWMzLmxlbmd0aChiLmFycmF5KTtcbn07XG5cbi8vIFZlY3RvcjMubGVuZ3RoID0gVmVjdG9yMy5sZW47XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICB0XG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMubGVycCA9IGZ1bmN0aW9uKG91dCwgYSwgYiwgdCkge1xuICAgIHZlYzMubGVycChvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXksIHQpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAqL1xuVmVjdG9yMy5taW4gPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2ZWMzLm1pbihvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICovXG5WZWN0b3IzLm1heCA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIHZlYzMubWF4KG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICovXG5WZWN0b3IzLm11bCA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIHZlYzMubXVsdGlwbHkob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAqL1xuVmVjdG9yMy5tdWx0aXBseSA9IFZlY3RvcjMubXVsO1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMubmVnYXRlID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgdmVjMy5uZWdhdGUob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICovXG5WZWN0b3IzLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIHZlYzMubm9ybWFsaXplKG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsZVxuICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICovXG5WZWN0b3IzLnJhbmRvbSA9IGZ1bmN0aW9uKG91dCwgc2NhbGUpIHtcbiAgICB2ZWMzLnJhbmRvbShvdXQuYXJyYXksIHNjYWxlKTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGVcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAqL1xuVmVjdG9yMy5zY2FsZSA9IGZ1bmN0aW9uKG91dCwgYSwgc2NhbGUpIHtcbiAgICB2ZWMzLnNjYWxlKG91dC5hcnJheSwgYS5hcnJheSwgc2NhbGUpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAqIEBwYXJhbSAge251bWJlcn0gIHNjYWxlXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMuc2NhbGVBbmRBZGQgPSBmdW5jdGlvbihvdXQsIGEsIGIsIHNjYWxlKSB7XG4gICAgdmVjMy5zY2FsZUFuZEFkZChvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXksIHNjYWxlKTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMy5zcXJEaXN0ID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiB2ZWMzLnNxckRpc3QoYS5hcnJheSwgYi5hcnJheSk7XG59O1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjMuc3F1YXJlZERpc3RhbmNlID0gVmVjdG9yMy5zcXJEaXN0O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMy5zcXJMZW4gPSBmdW5jdGlvbihhKSB7XG4gICAgcmV0dXJuIHZlYzMuc3FyTGVuKGEuYXJyYXkpO1xufTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMy5zcXVhcmVkTGVuZ3RoID0gVmVjdG9yMy5zcXJMZW47XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMuc3ViID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjMy5zdWJ0cmFjdChvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICovXG5WZWN0b3IzLnN1YnRyYWN0ID0gVmVjdG9yMy5zdWI7XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7TWF0cml4M30gbVxuICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICovXG5WZWN0b3IzLnRyYW5zZm9ybU1hdDMgPSBmdW5jdGlvbihvdXQsIGEsIG0pIHtcbiAgICB2ZWMzLnRyYW5zZm9ybU1hdDMob3V0LmFycmF5LCBhLmFycmF5LCBtLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG1cbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAqL1xuVmVjdG9yMy50cmFuc2Zvcm1NYXQ0ID0gZnVuY3Rpb24ob3V0LCBhLCBtKSB7XG4gICAgdmVjMy50cmFuc2Zvcm1NYXQ0KG91dC5hcnJheSwgYS5hcnJheSwgbS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gcVxuICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICovXG5WZWN0b3IzLnRyYW5zZm9ybVF1YXQgPSBmdW5jdGlvbihvdXQsIGEsIHEpIHtcbiAgICB2ZWMzLnRyYW5zZm9ybVF1YXQob3V0LmFycmF5LCBhLmFycmF5LCBxLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuZnVuY3Rpb24gY2xhbXAodmFsLCBtaW4sIG1heCkge1xuICAgIHJldHVybiB2YWwgPCBtaW4gPyBtaW4gOiAodmFsID4gbWF4ID8gbWF4IDogdmFsKTtcbn1cbnZhciBhdGFuMiA9IE1hdGguYXRhbjI7XG52YXIgYXNpbiA9IE1hdGguYXNpbjtcbnZhciBhYnMgPSBNYXRoLmFicztcbi8qKlxuICogQ29udmVydCBxdWF0ZXJuaW9uIHRvIGV1bGVyIGFuZ2xlXG4gKiBRdWF0ZXJuaW9uIG11c3QgYmUgbm9ybWFsaXplZFxuICogRnJvbSB0aHJlZS5qc1xuICovXG5WZWN0b3IzLmV1bGVyRnJvbVF1YXQgPSBmdW5jdGlvbiAob3V0LCBxLCBvcmRlcikge1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHEgPSBxLmFycmF5O1xuXG4gICAgdmFyIHRhcmdldCA9IG91dC5hcnJheTtcbiAgICB2YXIgeCA9IHFbMF0sIHkgPSBxWzFdLCB6ID0gcVsyXSwgdyA9IHFbM107XG4gICAgdmFyIHgyID0geCAqIHg7XG4gICAgdmFyIHkyID0geSAqIHk7XG4gICAgdmFyIHoyID0geiAqIHo7XG4gICAgdmFyIHcyID0gdyAqIHc7XG5cbiAgICB2YXIgb3JkZXIgPSAob3JkZXIgfHwgJ1hZWicpLnRvVXBwZXJDYXNlKCk7XG5cbiAgICBzd2l0Y2ggKG9yZGVyKSB7XG4gICAgICAgIGNhc2UgJ1hZWic6XG4gICAgICAgICAgICB0YXJnZXRbMF0gPSBhdGFuMigyICogKHggKiB3IC0geSAqIHopLCAodzIgLSB4MiAtIHkyICsgejIpKTtcbiAgICAgICAgICAgIHRhcmdldFsxXSA9IGFzaW4oY2xhbXAoMiAqICh4ICogeiArIHkgKiB3KSwgLSAxLCAxKSk7XG4gICAgICAgICAgICB0YXJnZXRbMl0gPSBhdGFuMigyICogKHogKiB3IC0geCAqIHkpLCAodzIgKyB4MiAtIHkyIC0gejIpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdZWFonOlxuICAgICAgICAgICAgdGFyZ2V0WzBdID0gYXNpbihjbGFtcCgyICogKHggKiB3IC0geSAqIHopLCAtIDEsIDEpKTtcbiAgICAgICAgICAgIHRhcmdldFsxXSA9IGF0YW4yKDIgKiAoeCAqIHogKyB5ICogdyksICh3MiAtIHgyIC0geTIgKyB6MikpO1xuICAgICAgICAgICAgdGFyZ2V0WzJdID0gYXRhbjIoMiAqICh4ICogeSArIHogKiB3KSwgKHcyIC0geDIgKyB5MiAtIHoyKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnWlhZJzpcbiAgICAgICAgICAgIHRhcmdldFswXSA9IGFzaW4oY2xhbXAoMiAqICh4ICogdyArIHkgKiB6KSwgLSAxLCAxKSk7XG4gICAgICAgICAgICB0YXJnZXRbMV0gPSBhdGFuMigyICogKHkgKiB3IC0geiAqIHgpLCAodzIgLSB4MiAtIHkyICsgejIpKTtcbiAgICAgICAgICAgIHRhcmdldFsyXSA9IGF0YW4yKDIgKiAoeiAqIHcgLSB4ICogeSksICh3MiAtIHgyICsgeTIgLSB6MikpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1pZWCc6XG4gICAgICAgICAgICB0YXJnZXRbMF0gPSBhdGFuMigyICogKHggKiB3ICsgeiAqIHkpLCAodzIgLSB4MiAtIHkyICsgejIpKTtcbiAgICAgICAgICAgIHRhcmdldFsxXSA9IGFzaW4oY2xhbXAoMiAqICh5ICogdyAtIHggKiB6KSwgLSAxLCAxKSk7XG4gICAgICAgICAgICB0YXJnZXRbMl0gPSBhdGFuMigyICogKHggKiB5ICsgeiAqIHcpLCAodzIgKyB4MiAtIHkyIC0gejIpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdZWlgnOlxuICAgICAgICAgICAgdGFyZ2V0WzBdID0gYXRhbjIoMiAqICh4ICogdyAtIHogKiB5KSwgKHcyIC0geDIgKyB5MiAtIHoyKSk7XG4gICAgICAgICAgICB0YXJnZXRbMV0gPSBhdGFuMigyICogKHkgKiB3IC0geCAqIHopLCAodzIgKyB4MiAtIHkyIC0gejIpKTtcbiAgICAgICAgICAgIHRhcmdldFsyXSA9IGFzaW4oY2xhbXAoMiAqICh4ICogeSArIHogKiB3KSwgLSAxLCAxKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnWFpZJzpcbiAgICAgICAgICAgIHRhcmdldFswXSA9IGF0YW4yKDIgKiAoeCAqIHcgKyB5ICogeiksICh3MiAtIHgyICsgeTIgLSB6MikpO1xuICAgICAgICAgICAgdGFyZ2V0WzFdID0gYXRhbjIoMiAqICh4ICogeiArIHkgKiB3KSwgKHcyICsgeDIgLSB5MiAtIHoyKSk7XG4gICAgICAgICAgICB0YXJnZXRbMl0gPSBhc2luKGNsYW1wKDIgKiAoeiAqIHcgLSB4ICogeSksIC0gMSwgMSkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1Vua293biBvcmRlcjogJyArIG9yZGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ29udmVydCByb3RhdGlvbiBtYXRyaXggdG8gZXVsZXIgYW5nbGVcbiAqIGZyb20gdGhyZWUuanNcbiAqL1xuVmVjdG9yMy5ldWxlckZyb21NYXQzID0gZnVuY3Rpb24gKG91dCwgbSwgb3JkZXIpIHtcbiAgICAvLyBhc3N1bWVzIHRoZSB1cHBlciAzeDMgb2YgbSBpcyBhIHB1cmUgcm90YXRpb24gbWF0cml4IChpLmUsIHVuc2NhbGVkKVxuICAgIHZhciB0ZSA9IG0uYXJyYXk7XG4gICAgdmFyIG0xMSA9IHRlWzBdLCBtMTIgPSB0ZVszXSwgbTEzID0gdGVbNl07XG4gICAgdmFyIG0yMSA9IHRlWzFdLCBtMjIgPSB0ZVs0XSwgbTIzID0gdGVbN107XG4gICAgdmFyIG0zMSA9IHRlWzJdLCBtMzIgPSB0ZVs1XSwgbTMzID0gdGVbOF07XG4gICAgdmFyIHRhcmdldCA9IG91dC5hcnJheTtcblxuICAgIHZhciBvcmRlciA9IChvcmRlciB8fCAnWFlaJykudG9VcHBlckNhc2UoKTtcblxuICAgIHN3aXRjaCAob3JkZXIpIHtcbiAgICAgICAgY2FzZSAnWFlaJzpcbiAgICAgICAgICAgIHRhcmdldFsxXSA9IGFzaW4oY2xhbXAobTEzLCAtMSwgMSkpO1xuICAgICAgICAgICAgaWYgKGFicyhtMTMpIDwgMC45OTk5OSkge1xuICAgICAgICAgICAgICAgIHRhcmdldFswXSA9IGF0YW4yKC1tMjMsIG0zMyk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzJdID0gYXRhbjIoLW0xMiwgbTExKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhcmdldFswXSA9IGF0YW4yKG0zMiwgbTIyKTtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMl0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1lYWic6XG4gICAgICAgICAgICB0YXJnZXRbMF0gPSBhc2luKC1jbGFtcChtMjMsIC0xLCAxKSk7XG4gICAgICAgICAgICBpZiAoYWJzKG0yMykgPCAwLjk5OTk5KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzFdID0gYXRhbjIobTEzLCBtMzMpO1xuICAgICAgICAgICAgICAgIHRhcmdldFsyXSA9IGF0YW4yKG0yMSwgbTIyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhcmdldFsxXSA9IGF0YW4yKC1tMzEsIG0xMSk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzJdID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdaWFknOlxuICAgICAgICAgICAgdGFyZ2V0WzBdID0gYXNpbihjbGFtcChtMzIsIC0xLCAxKSk7XG4gICAgICAgICAgICBpZiAoYWJzKG0zMikgPCAwLjk5OTk5KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzFdID0gYXRhbjIoLW0zMSwgbTMzKTtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMl0gPSBhdGFuMigtbTEyLCBtMjIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzFdID0gMDtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMl0gPSBhdGFuMihtMjEsIG0xMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnWllYJzpcbiAgICAgICAgICAgIHRhcmdldFsxXSA9IGFzaW4oLWNsYW1wKG0zMSwgLTEsIDEpKTtcbiAgICAgICAgICAgIGlmIChhYnMobTMxKSA8IDAuOTk5OTkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMF0gPSBhdGFuMihtMzIsIG0zMyk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzJdID0gYXRhbjIobTIxLCBtMTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzBdID0gMDtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMl0gPSBhdGFuMigtbTEyLCBtMjIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1laWCc6XG4gICAgICAgICAgICB0YXJnZXRbMl0gPSBhc2luKGNsYW1wKG0yMSwgLTEsIDEpKTtcbiAgICAgICAgICAgIGlmIChhYnMobTIxKSA8IDAuOTk5OTkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMF0gPSBhdGFuMigtbTIzLCBtMjIpO1xuICAgICAgICAgICAgICAgIHRhcmdldFsxXSA9IGF0YW4yKC1tMzEsIG0xMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMF0gPSAwO1xuICAgICAgICAgICAgICAgIHRhcmdldFsxXSA9IGF0YW4yKG0xMywgbTMzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdYWlknOlxuICAgICAgICAgICAgdGFyZ2V0WzJdID0gYXNpbigtY2xhbXAobTEyLCAtMSwgMSkpO1xuICAgICAgICAgICAgaWYgKGFicyhtMTIpIDwgMC45OTk5OSkge1xuICAgICAgICAgICAgICAgIHRhcmdldFswXSA9IGF0YW4yKG0zMiwgbTIyKTtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMV0gPSBhdGFuMihtMTMsIG0xMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMF0gPSBhdGFuMigtbTIzLCBtMzMpO1xuICAgICAgICAgICAgICAgIHRhcmdldFsxXSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVW5rb3duIG9yZGVyOiAnICsgb3JkZXIpO1xuICAgIH1cbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcblxuICAgIHJldHVybiBvdXQ7XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhWZWN0b3IzLCB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3IzXG4gICAgICovXG4gICAgUE9TSVRJVkVfWDoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yMygxLCAwLCAwKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3IzXG4gICAgICovXG4gICAgTkVHQVRJVkVfWDoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yMygtMSwgMCwgMCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQG1lbWJlck9mIGNsYXkuVmVjdG9yM1xuICAgICAqL1xuICAgIFBPU0lUSVZFX1k6IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjMoMCwgMSwgMCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQG1lbWJlck9mIGNsYXkuVmVjdG9yM1xuICAgICAqL1xuICAgIE5FR0FUSVZFX1k6IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjMoMCwgLTEsIDApO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqIEByZWFkT25seVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjNcbiAgICAgKi9cbiAgICBQT1NJVElWRV9aOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKDAsIDAsIDEpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqIEByZWFkT25seVxuICAgICAqL1xuICAgIE5FR0FUSVZFX1o6IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjMoMCwgMCwgLTEpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqIEByZWFkT25seVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjNcbiAgICAgKi9cbiAgICBVUDoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yMygwLCAxLCAwKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3IzXG4gICAgICovXG4gICAgWkVSTzoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yMygpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFZlY3RvcjM7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL21hdGgvVmVjdG9yMy5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__request__ = __webpack_require__(75);\n\n\nvar supportWebGL;\n\nvar vendor = {};\n\n/**\n * If support WebGL\n * @return {boolean}\n */\nvendor.supportWebGL = function () {\n    if (supportWebGL == null) {\n        try {\n            var canvas = document.createElement('canvas');\n            var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n            if (!gl) {\n                throw new Error();\n            }\n        }\n        catch (e) {\n            supportWebGL = false;\n        }\n\n    }\n    return supportWebGL;\n};\n\nvendor.Int8Array = typeof Int8Array === 'undefined' ? Array : Int8Array;\n\nvendor.Uint8Array = typeof Uint8Array === 'undefined' ? Array : Uint8Array;\n\nvendor.Uint16Array = typeof Uint16Array === 'undefined' ? Array : Uint16Array;\n\nvendor.Uint32Array = typeof Uint32Array === 'undefined' ? Array : Uint32Array;\n\nvendor.Int16Array = typeof Int16Array === 'undefined' ? Array : Int16Array;\n\nvendor.Float32Array = typeof Float32Array === 'undefined' ? Array : Float32Array;\n\nvendor.Float64Array = typeof Float64Array === 'undefined' ? Array : Float64Array;\n\nvar g = {};\nif (typeof window !== 'undefined') {\n    g = window;\n}\nelse if (typeof global !== 'undefined') {\n    g = global;\n}\n\n\nvendor.requestAnimationFrame = g.requestAnimationFrame\n    || g.msRequestAnimationFrame\n    || g.mozRequestAnimationFrame\n    || g.webkitRequestAnimationFrame\n    || function (func){ setTimeout(func, 16); };\n\nvendor.createCanvas = function () {\n    return document.createElement('canvas');\n};\n\nvendor.createImage = function () {\n    return new g.Image();\n};\n\nvendor.request = {\n    get: __WEBPACK_IMPORTED_MODULE_0__request__[\"a\" /* default */].get\n};\n\nvendor.addEventListener = function (dom, type, func, useCapture) {\n    dom.addEventListener(type, func, useCapture);\n};\n\nvendor.removeEventListener = function (dom, type, func) {\n    dom.removeEventListener(type, func);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (vendor);\n\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(74)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2NvcmUvdmVuZG9yLmpzPzdmN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJlcXVlc3QgZnJvbSAnLi9yZXF1ZXN0JztcblxudmFyIHN1cHBvcnRXZWJHTDtcblxudmFyIHZlbmRvciA9IHt9O1xuXG4vKipcbiAqIElmIHN1cHBvcnQgV2ViR0xcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbnZlbmRvci5zdXBwb3J0V2ViR0wgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHN1cHBvcnRXZWJHTCA9PSBudWxsKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICB2YXIgZ2wgPSBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnKSB8fCBjYW52YXMuZ2V0Q29udGV4dCgnZXhwZXJpbWVudGFsLXdlYmdsJyk7XG4gICAgICAgICAgICBpZiAoIWdsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHN1cHBvcnRXZWJHTCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICB9XG4gICAgcmV0dXJuIHN1cHBvcnRXZWJHTDtcbn07XG5cbnZlbmRvci5JbnQ4QXJyYXkgPSB0eXBlb2YgSW50OEFycmF5ID09PSAndW5kZWZpbmVkJyA/IEFycmF5IDogSW50OEFycmF5O1xuXG52ZW5kb3IuVWludDhBcnJheSA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJyA/IEFycmF5IDogVWludDhBcnJheTtcblxudmVuZG9yLlVpbnQxNkFycmF5ID0gdHlwZW9mIFVpbnQxNkFycmF5ID09PSAndW5kZWZpbmVkJyA/IEFycmF5IDogVWludDE2QXJyYXk7XG5cbnZlbmRvci5VaW50MzJBcnJheSA9IHR5cGVvZiBVaW50MzJBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyBBcnJheSA6IFVpbnQzMkFycmF5O1xuXG52ZW5kb3IuSW50MTZBcnJheSA9IHR5cGVvZiBJbnQxNkFycmF5ID09PSAndW5kZWZpbmVkJyA/IEFycmF5IDogSW50MTZBcnJheTtcblxudmVuZG9yLkZsb2F0MzJBcnJheSA9IHR5cGVvZiBGbG9hdDMyQXJyYXkgPT09ICd1bmRlZmluZWQnID8gQXJyYXkgOiBGbG9hdDMyQXJyYXk7XG5cbnZlbmRvci5GbG9hdDY0QXJyYXkgPSB0eXBlb2YgRmxvYXQ2NEFycmF5ID09PSAndW5kZWZpbmVkJyA/IEFycmF5IDogRmxvYXQ2NEFycmF5O1xuXG52YXIgZyA9IHt9O1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZyA9IHdpbmRvdztcbn1cbmVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZyA9IGdsb2JhbDtcbn1cblxuXG52ZW5kb3IucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICB8fCBnLm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gICAgfHwgZy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICB8fCBnLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgIHx8IGZ1bmN0aW9uIChmdW5jKXsgc2V0VGltZW91dChmdW5jLCAxNik7IH07XG5cbnZlbmRvci5jcmVhdGVDYW52YXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xufTtcblxudmVuZG9yLmNyZWF0ZUltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgZy5JbWFnZSgpO1xufTtcblxudmVuZG9yLnJlcXVlc3QgPSB7XG4gICAgZ2V0OiByZXF1ZXN0LmdldFxufTtcblxudmVuZG9yLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZG9tLCB0eXBlLCBmdW5jLCB1c2VDYXB0dXJlKSB7XG4gICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuYywgdXNlQ2FwdHVyZSk7XG59O1xuXG52ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIGZ1bmMpIHtcbiAgICBkb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmdW5jKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHZlbmRvcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvY29yZS92ZW5kb3IuanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n/**\n * @class 3 Dimensional Vector\n * @name vec3\n */\n\nvar vec3 = {};\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nvec3.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](3);\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    return out;\n};\n\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {vec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nvec3.clone = function(a) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](3);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n};\n\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nvec3.fromValues = function(x, y, z) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](3);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n};\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the source vector\n * @returns {vec3} out\n */\nvec3.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n};\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nvec3.set = function(out, x, y, z) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n};\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.add = function(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    return out;\n};\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.subtract = function(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\nvec3.sub = vec3.subtract;\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.multiply = function(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\nvec3.mul = vec3.multiply;\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.divide = function(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\nvec3.div = vec3.divide;\n\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.min = function(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    return out;\n};\n\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.max = function(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    return out;\n};\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nvec3.scale = function(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    return out;\n};\n\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nvec3.scaleAndAdd = function(out, a, b, scale) {\n    out[0] = a[0] + (b[0] * scale);\n    out[1] = a[1] + (b[1] * scale);\n    out[2] = a[2] + (b[2] * scale);\n    return out;\n};\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} distance between a and b\n */\nvec3.distance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2];\n    return Math.sqrt(x*x + y*y + z*z);\n};\n\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\nvec3.dist = vec3.distance;\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nvec3.squaredDistance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2];\n    return x*x + y*y + z*z;\n};\n\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\nvec3.sqrDist = vec3.squaredDistance;\n\n/**\n * Calculates the length of a vec3\n *\n * @param {vec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nvec3.length = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    return Math.sqrt(x*x + y*y + z*z);\n};\n\n/**\n * Alias for {@link vec3.length}\n * @function\n */\nvec3.len = vec3.length;\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {vec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nvec3.squaredLength = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    return x*x + y*y + z*z;\n};\n\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\nvec3.sqrLen = vec3.squaredLength;\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to negate\n * @returns {vec3} out\n */\nvec3.negate = function(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    return out;\n};\n\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to invert\n * @returns {vec3} out\n */\nvec3.inverse = function(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n};\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to normalize\n * @returns {vec3} out\n */\nvec3.normalize = function(out, a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    var len = x*x + y*y + z*z;\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n        out[0] = a[0] * len;\n        out[1] = a[1] * len;\n        out[2] = a[2] * len;\n    }\n    return out;\n};\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nvec3.dot = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n};\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.cross = function(out, a, b) {\n    var ax = a[0], ay = a[1], az = a[2],\n        bx = b[0], by = b[1], bz = b[2];\n\n    out[0] = ay * bz - az * by;\n    out[1] = az * bx - ax * bz;\n    out[2] = ax * by - ay * bx;\n    return out;\n};\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nvec3.lerp = function (out, a, b, t) {\n    var ax = a[0],\n        ay = a[1],\n        az = a[2];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    return out;\n};\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\nvec3.random = function (out, scale) {\n    scale = scale || 1.0;\n\n    var r = Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"c\" /* GLMAT_RANDOM */])() * 2.0 * Math.PI;\n    var z = (Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"c\" /* GLMAT_RANDOM */])() * 2.0) - 1.0;\n    var zScale = Math.sqrt(1.0-z*z) * scale;\n\n    out[0] = Math.cos(r) * zScale;\n    out[1] = Math.sin(r) * zScale;\n    out[2] = z * scale;\n    return out;\n};\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec3} out\n */\nvec3.transformMat4 = function(out, a, m) {\n    var x = a[0], y = a[1], z = a[2],\n        w = m[3] * x + m[7] * y + m[11] * z + m[15];\n    w = w || 1.0;\n    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n    return out;\n};\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nvec3.transformMat3 = function(out, a, m) {\n    var x = a[0], y = a[1], z = a[2];\n    out[0] = x * m[0] + y * m[3] + z * m[6];\n    out[1] = x * m[1] + y * m[4] + z * m[7];\n    out[2] = x * m[2] + y * m[5] + z * m[8];\n    return out;\n};\n\n/**\n * Transforms the vec3 with a quat\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec3} out\n */\nvec3.transformQuat = function(out, a, q) {\n    // benchmarks: http://jsperf.com/quaternion-transform-vec3-implementations\n\n    var x = a[0], y = a[1], z = a[2],\n        qx = q[0], qy = q[1], qz = q[2], qw = q[3],\n\n        // calculate quat * vec\n        ix = qw * x + qy * z - qz * y,\n        iy = qw * y + qz * x - qx * z,\n        iz = qw * z + qx * y - qy * x,\n        iw = -qx * x - qy * y - qz * z;\n\n    // calculate result * inverse quat\n    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return out;\n};\n\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nvec3.rotateX = function(out, a, b, c){\n   var p = [], r=[];\n      //Translate point to the origin\n      p[0] = a[0] - b[0];\n      p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n\n      //perform rotation\n      r[0] = p[0];\n      r[1] = p[1]*Math.cos(c) - p[2]*Math.sin(c);\n      r[2] = p[1]*Math.sin(c) + p[2]*Math.cos(c);\n\n      //translate to correct position\n      out[0] = r[0] + b[0];\n      out[1] = r[1] + b[1];\n      out[2] = r[2] + b[2];\n\n    return out;\n};\n\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nvec3.rotateY = function(out, a, b, c){\n    var p = [], r=[];\n    //Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n\n    //perform rotation\n    r[0] = p[2]*Math.sin(c) + p[0]*Math.cos(c);\n    r[1] = p[1];\n    r[2] = p[2]*Math.cos(c) - p[0]*Math.sin(c);\n\n    //translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n\n    return out;\n};\n\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nvec3.rotateZ = function(out, a, b, c){\n    var p = [], r=[];\n    //Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n\n    //perform rotation\n    r[0] = p[0]*Math.cos(c) - p[1]*Math.sin(c);\n    r[1] = p[0]*Math.sin(c) + p[1]*Math.cos(c);\n    r[2] = p[2];\n\n    //translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n\n    return out;\n};\n\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nvec3.forEach = (function() {\n    var vec = vec3.create();\n\n    return function(a, stride, offset, count, fn, arg) {\n        var i, l;\n        if(!stride) {\n            stride = 3;\n        }\n\n        if(!offset) {\n            offset = 0;\n        }\n\n        if(count) {\n            l = Math.min((count * stride) + offset, a.length);\n        } else {\n            l = a.length;\n        }\n\n        for(i = offset; i < l; i += stride) {\n            vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2];\n            fn(vec, vec, arg);\n            a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2];\n        }\n\n        return a;\n    };\n})();\n\n/**\n * Get the angle between two 3D vectors\n * @param {vec3} a The first operand\n * @param {vec3} b The second operand\n * @returns {Number} The angle in radians\n */\nvec3.angle = function(a, b) {\n\n    var tempA = vec3.fromValues(a[0], a[1], a[2]);\n    var tempB = vec3.fromValues(b[0], b[1], b[2]);\n\n    vec3.normalize(tempA, tempA);\n    vec3.normalize(tempB, tempB);\n\n    var cosine = vec3.dot(tempA, tempB);\n\n    if(cosine > 1.0){\n        return 0;\n    } else {\n        return Math.acos(cosine);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (vec3);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2dsbWF0cml4L3ZlYzMuanM/Y2ZlNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qIENvcHlyaWdodCAoYykgMjAxMywgQnJhbmRvbiBKb25lcywgQ29saW4gTWFjS2VuemllIElWLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5SZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuXG4gICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gICAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAgICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXG5BTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1JcbkFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xuKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xuTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OXG5BTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcblNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLiAqL1xuXG5pbXBvcnQgeyBHTE1BVF9SQU5ET00sIEdMTUFUX0FSUkFZX1RZUEUgfSBmcm9tICcuL2NvbW1vbic7XG5cbi8qKlxuICogQGNsYXNzIDMgRGltZW5zaW9uYWwgVmVjdG9yXG4gKiBAbmFtZSB2ZWMzXG4gKi9cblxudmFyIHZlYzMgPSB7fTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3LCBlbXB0eSB2ZWMzXG4gKlxuICogQHJldHVybnMge3ZlYzN9IGEgbmV3IDNEIHZlY3RvclxuICovXG52ZWMzLmNyZWF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvdXQgPSBuZXcgR0xNQVRfQVJSQVlfVFlQRSgzKTtcbiAgICBvdXRbMF0gPSAwO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzMgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IGEgdmVjdG9yIHRvIGNsb25lXG4gKiBAcmV0dXJucyB7dmVjM30gYSBuZXcgM0QgdmVjdG9yXG4gKi9cbnZlYzMuY2xvbmUgPSBmdW5jdGlvbihhKSB7XG4gICAgdmFyIG91dCA9IG5ldyBHTE1BVF9BUlJBWV9UWVBFKDMpO1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICBvdXRbMl0gPSBhWzJdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjMyBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjM30gYSBuZXcgM0QgdmVjdG9yXG4gKi9cbnZlYzMuZnJvbVZhbHVlcyA9IGZ1bmN0aW9uKHgsIHksIHopIHtcbiAgICB2YXIgb3V0ID0gbmV3IEdMTUFUX0FSUkFZX1RZUEUoMyk7XG4gICAgb3V0WzBdID0geDtcbiAgICBvdXRbMV0gPSB5O1xuICAgIG91dFsyXSA9IHo7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIHZlYzMgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzN9IGEgdGhlIHNvdXJjZSB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xudmVjMy5jb3B5ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzFdO1xuICAgIG91dFsyXSA9IGFbMl07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBjb21wb25lbnRzIG9mIGEgdmVjMyB0byB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xudmVjMy5zZXQgPSBmdW5jdGlvbihvdXQsIHgsIHksIHopIHtcbiAgICBvdXRbMF0gPSB4O1xuICAgIG91dFsxXSA9IHk7XG4gICAgb3V0WzJdID0gejtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBBZGRzIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMuYWRkID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgb3V0WzBdID0gYVswXSArIGJbMF07XG4gICAgb3V0WzFdID0gYVsxXSArIGJbMV07XG4gICAgb3V0WzJdID0gYVsyXSArIGJbMl07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogU3VidHJhY3RzIHZlY3RvciBiIGZyb20gdmVjdG9yIGFcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMuc3VidHJhY3QgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBhWzBdIC0gYlswXTtcbiAgICBvdXRbMV0gPSBhWzFdIC0gYlsxXTtcbiAgICBvdXRbMl0gPSBhWzJdIC0gYlsyXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMuc3VidHJhY3R9XG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjMy5zdWIgPSB2ZWMzLnN1YnRyYWN0O1xuXG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xudmVjMy5tdWx0aXBseSA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIG91dFswXSA9IGFbMF0gKiBiWzBdO1xuICAgIG91dFsxXSA9IGFbMV0gKiBiWzFdO1xuICAgIG91dFsyXSA9IGFbMl0gKiBiWzJdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG52ZWMzLm11bCA9IHZlYzMubXVsdGlwbHk7XG5cbi8qKlxuICogRGl2aWRlcyB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG52ZWMzLmRpdmlkZSA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIG91dFswXSA9IGFbMF0gLyBiWzBdO1xuICAgIG91dFsxXSA9IGFbMV0gLyBiWzFdO1xuICAgIG91dFsyXSA9IGFbMl0gLyBiWzJdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5kaXZpZGV9XG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjMy5kaXYgPSB2ZWMzLmRpdmlkZTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtaW5pbXVtIG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMubWluID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgb3V0WzBdID0gTWF0aC5taW4oYVswXSwgYlswXSk7XG4gICAgb3V0WzFdID0gTWF0aC5taW4oYVsxXSwgYlsxXSk7XG4gICAgb3V0WzJdID0gTWF0aC5taW4oYVsyXSwgYlsyXSk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbWF4aW11bSBvZiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG52ZWMzLm1heCA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIG91dFswXSA9IE1hdGgubWF4KGFbMF0sIGJbMF0pO1xuICAgIG91dFsxXSA9IE1hdGgubWF4KGFbMV0sIGJbMV0pO1xuICAgIG91dFsyXSA9IE1hdGgubWF4KGFbMl0sIGJbMl0pO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFNjYWxlcyBhIHZlYzMgYnkgYSBzY2FsYXIgbnVtYmVyXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjM30gYSB0aGUgdmVjdG9yIHRvIHNjYWxlXG4gKiBAcGFyYW0ge051bWJlcn0gYiBhbW91bnQgdG8gc2NhbGUgdGhlIHZlY3RvciBieVxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG52ZWMzLnNjYWxlID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgb3V0WzBdID0gYVswXSAqIGI7XG4gICAgb3V0WzFdID0gYVsxXSAqIGI7XG4gICAgb3V0WzJdID0gYVsyXSAqIGI7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWRkcyB0d28gdmVjMydzIGFmdGVyIHNjYWxpbmcgdGhlIHNlY29uZCBvcGVyYW5kIGJ5IGEgc2NhbGFyIHZhbHVlXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHNjYWxlIHRoZSBhbW91bnQgdG8gc2NhbGUgYiBieSBiZWZvcmUgYWRkaW5nXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMuc2NhbGVBbmRBZGQgPSBmdW5jdGlvbihvdXQsIGEsIGIsIHNjYWxlKSB7XG4gICAgb3V0WzBdID0gYVswXSArIChiWzBdICogc2NhbGUpO1xuICAgIG91dFsxXSA9IGFbMV0gKyAoYlsxXSAqIHNjYWxlKTtcbiAgICBvdXRbMl0gPSBhWzJdICsgKGJbMl0gKiBzY2FsZSk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cbnZlYzMuZGlzdGFuY2UgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgdmFyIHggPSBiWzBdIC0gYVswXSxcbiAgICAgICAgeSA9IGJbMV0gLSBhWzFdLFxuICAgICAgICB6ID0gYlsyXSAtIGFbMl07XG4gICAgcmV0dXJuIE1hdGguc3FydCh4KnggKyB5KnkgKyB6KnopO1xufTtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMuZGlzdGFuY2V9XG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjMy5kaXN0ID0gdmVjMy5kaXN0YW5jZTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGV1Y2xpZGlhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cbnZlYzMuc3F1YXJlZERpc3RhbmNlID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHZhciB4ID0gYlswXSAtIGFbMF0sXG4gICAgICAgIHkgPSBiWzFdIC0gYVsxXSxcbiAgICAgICAgeiA9IGJbMl0gLSBhWzJdO1xuICAgIHJldHVybiB4KnggKyB5KnkgKyB6Kno7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5zcXVhcmVkRGlzdGFuY2V9XG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjMy5zcXJEaXN0ID0gdmVjMy5zcXVhcmVkRGlzdGFuY2U7XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gbGVuZ3RoIG9mIGFcbiAqL1xudmVjMy5sZW5ndGggPSBmdW5jdGlvbiAoYSkge1xuICAgIHZhciB4ID0gYVswXSxcbiAgICAgICAgeSA9IGFbMV0sXG4gICAgICAgIHogPSBhWzJdO1xuICAgIHJldHVybiBNYXRoLnNxcnQoeCp4ICsgeSp5ICsgeip6KTtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLmxlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG52ZWMzLmxlbiA9IHZlYzMubGVuZ3RoO1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgbGVuZ3RoIG9mIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIHNxdWFyZWQgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGxlbmd0aCBvZiBhXG4gKi9cbnZlYzMuc3F1YXJlZExlbmd0aCA9IGZ1bmN0aW9uIChhKSB7XG4gICAgdmFyIHggPSBhWzBdLFxuICAgICAgICB5ID0gYVsxXSxcbiAgICAgICAgeiA9IGFbMl07XG4gICAgcmV0dXJuIHgqeCArIHkqeSArIHoqejtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLnNxdWFyZWRMZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjMy5zcXJMZW4gPSB2ZWMzLnNxdWFyZWRMZW5ndGg7XG5cbi8qKlxuICogTmVnYXRlcyB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMzfSBhIHZlY3RvciB0byBuZWdhdGVcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xudmVjMy5uZWdhdGUgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICBvdXRbMF0gPSAtYVswXTtcbiAgICBvdXRbMV0gPSAtYVsxXTtcbiAgICBvdXRbMl0gPSAtYVsyXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbnZlcnNlIG9mIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzN9IGEgdmVjdG9yIHRvIGludmVydFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG52ZWMzLmludmVyc2UgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgb3V0WzBdID0gMS4wIC8gYVswXTtcbiAgb3V0WzFdID0gMS4wIC8gYVsxXTtcbiAgb3V0WzJdID0gMS4wIC8gYVsyXTtcbiAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogTm9ybWFsaXplIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzN9IGEgdmVjdG9yIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG52ZWMzLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIHZhciB4ID0gYVswXSxcbiAgICAgICAgeSA9IGFbMV0sXG4gICAgICAgIHogPSBhWzJdO1xuICAgIHZhciBsZW4gPSB4KnggKyB5KnkgKyB6Kno7XG4gICAgaWYgKGxlbiA+IDApIHtcbiAgICAgICAgLy9UT0RPOiBldmFsdWF0ZSB1c2Ugb2YgZ2xtX2ludnNxcnQgaGVyZT9cbiAgICAgICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pO1xuICAgICAgICBvdXRbMF0gPSBhWzBdICogbGVuO1xuICAgICAgICBvdXRbMV0gPSBhWzFdICogbGVuO1xuICAgICAgICBvdXRbMl0gPSBhWzJdICogbGVuO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKi9cbnZlYzMuZG90ID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYVswXSAqIGJbMF0gKyBhWzFdICogYlsxXSArIGFbMl0gKiBiWzJdO1xufTtcblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG52ZWMzLmNyb3NzID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmFyIGF4ID0gYVswXSwgYXkgPSBhWzFdLCBheiA9IGFbMl0sXG4gICAgICAgIGJ4ID0gYlswXSwgYnkgPSBiWzFdLCBieiA9IGJbMl07XG5cbiAgICBvdXRbMF0gPSBheSAqIGJ6IC0gYXogKiBieTtcbiAgICBvdXRbMV0gPSBheiAqIGJ4IC0gYXggKiBiejtcbiAgICBvdXRbMl0gPSBheCAqIGJ5IC0gYXkgKiBieDtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50IGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xudmVjMy5sZXJwID0gZnVuY3Rpb24gKG91dCwgYSwgYiwgdCkge1xuICAgIHZhciBheCA9IGFbMF0sXG4gICAgICAgIGF5ID0gYVsxXSxcbiAgICAgICAgYXogPSBhWzJdO1xuICAgIG91dFswXSA9IGF4ICsgdCAqIChiWzBdIC0gYXgpO1xuICAgIG91dFsxXSA9IGF5ICsgdCAqIChiWzFdIC0gYXkpO1xuICAgIG91dFsyXSA9IGF6ICsgdCAqIChiWzJdIC0gYXopO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSB2ZWN0b3Igd2l0aCB0aGUgZ2l2ZW4gc2NhbGVcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtOdW1iZXJ9IFtzY2FsZV0gTGVuZ3RoIG9mIHRoZSByZXN1bHRpbmcgdmVjdG9yLiBJZiBvbW1pdHRlZCwgYSB1bml0IHZlY3RvciB3aWxsIGJlIHJldHVybmVkXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMucmFuZG9tID0gZnVuY3Rpb24gKG91dCwgc2NhbGUpIHtcbiAgICBzY2FsZSA9IHNjYWxlIHx8IDEuMDtcblxuICAgIHZhciByID0gR0xNQVRfUkFORE9NKCkgKiAyLjAgKiBNYXRoLlBJO1xuICAgIHZhciB6ID0gKEdMTUFUX1JBTkRPTSgpICogMi4wKSAtIDEuMDtcbiAgICB2YXIgelNjYWxlID0gTWF0aC5zcXJ0KDEuMC16KnopICogc2NhbGU7XG5cbiAgICBvdXRbMF0gPSBNYXRoLmNvcyhyKSAqIHpTY2FsZTtcbiAgICBvdXRbMV0gPSBNYXRoLnNpbihyKSAqIHpTY2FsZTtcbiAgICBvdXRbMl0gPSB6ICogc2NhbGU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjMyB3aXRoIGEgbWF0NC5cbiAqIDR0aCB2ZWN0b3IgY29tcG9uZW50IGlzIGltcGxpY2l0bHkgJzEnXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjM30gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHttYXQ0fSBtIG1hdHJpeCB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG52ZWMzLnRyYW5zZm9ybU1hdDQgPSBmdW5jdGlvbihvdXQsIGEsIG0pIHtcbiAgICB2YXIgeCA9IGFbMF0sIHkgPSBhWzFdLCB6ID0gYVsyXSxcbiAgICAgICAgdyA9IG1bM10gKiB4ICsgbVs3XSAqIHkgKyBtWzExXSAqIHogKyBtWzE1XTtcbiAgICB3ID0gdyB8fCAxLjA7XG4gICAgb3V0WzBdID0gKG1bMF0gKiB4ICsgbVs0XSAqIHkgKyBtWzhdICogeiArIG1bMTJdKSAvIHc7XG4gICAgb3V0WzFdID0gKG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzldICogeiArIG1bMTNdKSAvIHc7XG4gICAgb3V0WzJdID0gKG1bMl0gKiB4ICsgbVs2XSAqIHkgKyBtWzEwXSAqIHogKyBtWzE0XSkgLyB3O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzMgd2l0aCBhIG1hdDMuXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjM30gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHttYXQ0fSBtIHRoZSAzeDMgbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMudHJhbnNmb3JtTWF0MyA9IGZ1bmN0aW9uKG91dCwgYSwgbSkge1xuICAgIHZhciB4ID0gYVswXSwgeSA9IGFbMV0sIHogPSBhWzJdO1xuICAgIG91dFswXSA9IHggKiBtWzBdICsgeSAqIG1bM10gKyB6ICogbVs2XTtcbiAgICBvdXRbMV0gPSB4ICogbVsxXSArIHkgKiBtWzRdICsgeiAqIG1bN107XG4gICAgb3V0WzJdID0geCAqIG1bMl0gKyB5ICogbVs1XSArIHogKiBtWzhdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzMgd2l0aCBhIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMzfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge3F1YXR9IHEgcXVhdGVybmlvbiB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG52ZWMzLnRyYW5zZm9ybVF1YXQgPSBmdW5jdGlvbihvdXQsIGEsIHEpIHtcbiAgICAvLyBiZW5jaG1hcmtzOiBodHRwOi8vanNwZXJmLmNvbS9xdWF0ZXJuaW9uLXRyYW5zZm9ybS12ZWMzLWltcGxlbWVudGF0aW9uc1xuXG4gICAgdmFyIHggPSBhWzBdLCB5ID0gYVsxXSwgeiA9IGFbMl0sXG4gICAgICAgIHF4ID0gcVswXSwgcXkgPSBxWzFdLCBxeiA9IHFbMl0sIHF3ID0gcVszXSxcblxuICAgICAgICAvLyBjYWxjdWxhdGUgcXVhdCAqIHZlY1xuICAgICAgICBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeSxcbiAgICAgICAgaXkgPSBxdyAqIHkgKyBxeiAqIHggLSBxeCAqIHosXG4gICAgICAgIGl6ID0gcXcgKiB6ICsgcXggKiB5IC0gcXkgKiB4LFxuICAgICAgICBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7XG5cbiAgICAvLyBjYWxjdWxhdGUgcmVzdWx0ICogaW52ZXJzZSBxdWF0XG4gICAgb3V0WzBdID0gaXggKiBxdyArIGl3ICogLXF4ICsgaXkgKiAtcXogLSBpeiAqIC1xeTtcbiAgICBvdXRbMV0gPSBpeSAqIHF3ICsgaXcgKiAtcXkgKyBpeiAqIC1xeCAtIGl4ICogLXF6O1xuICAgIG91dFsyXSA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUm90YXRlIGEgM0QgdmVjdG9yIGFyb3VuZCB0aGUgeC1heGlzXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCBUaGUgcmVjZWl2aW5nIHZlYzNcbiAqIEBwYXJhbSB7dmVjM30gYSBUaGUgdmVjMyBwb2ludCB0byByb3RhdGVcbiAqIEBwYXJhbSB7dmVjM30gYiBUaGUgb3JpZ2luIG9mIHRoZSByb3RhdGlvblxuICogQHBhcmFtIHtOdW1iZXJ9IGMgVGhlIGFuZ2xlIG9mIHJvdGF0aW9uXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMucm90YXRlWCA9IGZ1bmN0aW9uKG91dCwgYSwgYiwgYyl7XG4gICB2YXIgcCA9IFtdLCByPVtdO1xuICAgICAgLy9UcmFuc2xhdGUgcG9pbnQgdG8gdGhlIG9yaWdpblxuICAgICAgcFswXSA9IGFbMF0gLSBiWzBdO1xuICAgICAgcFsxXSA9IGFbMV0gLSBiWzFdO1xuICAgIHBbMl0gPSBhWzJdIC0gYlsyXTtcblxuICAgICAgLy9wZXJmb3JtIHJvdGF0aW9uXG4gICAgICByWzBdID0gcFswXTtcbiAgICAgIHJbMV0gPSBwWzFdKk1hdGguY29zKGMpIC0gcFsyXSpNYXRoLnNpbihjKTtcbiAgICAgIHJbMl0gPSBwWzFdKk1hdGguc2luKGMpICsgcFsyXSpNYXRoLmNvcyhjKTtcblxuICAgICAgLy90cmFuc2xhdGUgdG8gY29ycmVjdCBwb3NpdGlvblxuICAgICAgb3V0WzBdID0gclswXSArIGJbMF07XG4gICAgICBvdXRbMV0gPSByWzFdICsgYlsxXTtcbiAgICAgIG91dFsyXSA9IHJbMl0gKyBiWzJdO1xuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUm90YXRlIGEgM0QgdmVjdG9yIGFyb3VuZCB0aGUgeS1heGlzXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCBUaGUgcmVjZWl2aW5nIHZlYzNcbiAqIEBwYXJhbSB7dmVjM30gYSBUaGUgdmVjMyBwb2ludCB0byByb3RhdGVcbiAqIEBwYXJhbSB7dmVjM30gYiBUaGUgb3JpZ2luIG9mIHRoZSByb3RhdGlvblxuICogQHBhcmFtIHtOdW1iZXJ9IGMgVGhlIGFuZ2xlIG9mIHJvdGF0aW9uXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMucm90YXRlWSA9IGZ1bmN0aW9uKG91dCwgYSwgYiwgYyl7XG4gICAgdmFyIHAgPSBbXSwgcj1bXTtcbiAgICAvL1RyYW5zbGF0ZSBwb2ludCB0byB0aGUgb3JpZ2luXG4gICAgcFswXSA9IGFbMF0gLSBiWzBdO1xuICAgIHBbMV0gPSBhWzFdIC0gYlsxXTtcbiAgICBwWzJdID0gYVsyXSAtIGJbMl07XG5cbiAgICAvL3BlcmZvcm0gcm90YXRpb25cbiAgICByWzBdID0gcFsyXSpNYXRoLnNpbihjKSArIHBbMF0qTWF0aC5jb3MoYyk7XG4gICAgclsxXSA9IHBbMV07XG4gICAgclsyXSA9IHBbMl0qTWF0aC5jb3MoYykgLSBwWzBdKk1hdGguc2luKGMpO1xuXG4gICAgLy90cmFuc2xhdGUgdG8gY29ycmVjdCBwb3NpdGlvblxuICAgIG91dFswXSA9IHJbMF0gKyBiWzBdO1xuICAgIG91dFsxXSA9IHJbMV0gKyBiWzFdO1xuICAgIG91dFsyXSA9IHJbMl0gKyBiWzJdO1xuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUm90YXRlIGEgM0QgdmVjdG9yIGFyb3VuZCB0aGUgei1heGlzXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCBUaGUgcmVjZWl2aW5nIHZlYzNcbiAqIEBwYXJhbSB7dmVjM30gYSBUaGUgdmVjMyBwb2ludCB0byByb3RhdGVcbiAqIEBwYXJhbSB7dmVjM30gYiBUaGUgb3JpZ2luIG9mIHRoZSByb3RhdGlvblxuICogQHBhcmFtIHtOdW1iZXJ9IGMgVGhlIGFuZ2xlIG9mIHJvdGF0aW9uXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMucm90YXRlWiA9IGZ1bmN0aW9uKG91dCwgYSwgYiwgYyl7XG4gICAgdmFyIHAgPSBbXSwgcj1bXTtcbiAgICAvL1RyYW5zbGF0ZSBwb2ludCB0byB0aGUgb3JpZ2luXG4gICAgcFswXSA9IGFbMF0gLSBiWzBdO1xuICAgIHBbMV0gPSBhWzFdIC0gYlsxXTtcbiAgICBwWzJdID0gYVsyXSAtIGJbMl07XG5cbiAgICAvL3BlcmZvcm0gcm90YXRpb25cbiAgICByWzBdID0gcFswXSpNYXRoLmNvcyhjKSAtIHBbMV0qTWF0aC5zaW4oYyk7XG4gICAgclsxXSA9IHBbMF0qTWF0aC5zaW4oYykgKyBwWzFdKk1hdGguY29zKGMpO1xuICAgIHJbMl0gPSBwWzJdO1xuXG4gICAgLy90cmFuc2xhdGUgdG8gY29ycmVjdCBwb3NpdGlvblxuICAgIG91dFswXSA9IHJbMF0gKyBiWzBdO1xuICAgIG91dFsxXSA9IHJbMV0gKyBiWzFdO1xuICAgIG91dFsyXSA9IHJbMl0gKyBiWzJdO1xuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvdmVyIGFuIGFycmF5IG9mIHZlYzNzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGEgdGhlIGFycmF5IG9mIHZlY3RvcnMgdG8gaXRlcmF0ZSBvdmVyXG4gKiBAcGFyYW0ge051bWJlcn0gc3RyaWRlIE51bWJlciBvZiBlbGVtZW50cyBiZXR3ZWVuIHRoZSBzdGFydCBvZiBlYWNoIHZlYzMuIElmIDAgYXNzdW1lcyB0aWdodGx5IHBhY2tlZFxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiB2ZWMzcyB0byBpdGVyYXRlIG92ZXIuIElmIDAgaXRlcmF0ZXMgb3ZlciBlbnRpcmUgYXJyYXlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggdmVjdG9yIGluIHRoZSBhcnJheVxuICogQHBhcmFtIHtPYmplY3R9IFthcmddIGFkZGl0aW9uYWwgYXJndW1lbnQgdG8gcGFzcyB0byBmblxuICogQHJldHVybnMge0FycmF5fSBhXG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjMy5mb3JFYWNoID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ZWMgPSB2ZWMzLmNyZWF0ZSgpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGEsIHN0cmlkZSwgb2Zmc2V0LCBjb3VudCwgZm4sIGFyZykge1xuICAgICAgICB2YXIgaSwgbDtcbiAgICAgICAgaWYoIXN0cmlkZSkge1xuICAgICAgICAgICAgc3RyaWRlID0gMztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFvZmZzZXQpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZihjb3VudCkge1xuICAgICAgICAgICAgbCA9IE1hdGgubWluKChjb3VudCAqIHN0cmlkZSkgKyBvZmZzZXQsIGEubGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGwgPSBhLmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcihpID0gb2Zmc2V0OyBpIDwgbDsgaSArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHZlY1swXSA9IGFbaV07IHZlY1sxXSA9IGFbaSsxXTsgdmVjWzJdID0gYVtpKzJdO1xuICAgICAgICAgICAgZm4odmVjLCB2ZWMsIGFyZyk7XG4gICAgICAgICAgICBhW2ldID0gdmVjWzBdOyBhW2krMV0gPSB2ZWNbMV07IGFbaSsyXSA9IHZlY1syXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhO1xuICAgIH07XG59KSgpO1xuXG4vKipcbiAqIEdldCB0aGUgYW5nbGUgYmV0d2VlbiB0d28gM0QgdmVjdG9yc1xuICogQHBhcmFtIHt2ZWMzfSBhIFRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzN9IGIgVGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgYW5nbGUgaW4gcmFkaWFuc1xuICovXG52ZWMzLmFuZ2xlID0gZnVuY3Rpb24oYSwgYikge1xuXG4gICAgdmFyIHRlbXBBID0gdmVjMy5mcm9tVmFsdWVzKGFbMF0sIGFbMV0sIGFbMl0pO1xuICAgIHZhciB0ZW1wQiA9IHZlYzMuZnJvbVZhbHVlcyhiWzBdLCBiWzFdLCBiWzJdKTtcblxuICAgIHZlYzMubm9ybWFsaXplKHRlbXBBLCB0ZW1wQSk7XG4gICAgdmVjMy5ub3JtYWxpemUodGVtcEIsIHRlbXBCKTtcblxuICAgIHZhciBjb3NpbmUgPSB2ZWMzLmRvdCh0ZW1wQSwgdGVtcEIpO1xuXG4gICAgaWYoY29zaW5lID4gMS4wKXtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIE1hdGguYWNvcyhjb3NpbmUpO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHZlYzM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nbG1hdHJpeC92ZWMzLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_vendor__ = __webpack_require__(4);\n/**\n * Mainly do the parse and compile of shader string\n * Support shader code chunk import and export\n * Support shader semantics\n * http://www.nvidia.com/object/using_sas.html\n * https://github.com/KhronosGroup/collada2json/issues/45\n */\n\n\n\nvar uniformRegex = /uniform\\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\\s+([\\s\\S]*?);/g;\nvar attributeRegex = /attribute\\s+(float|int|vec2|vec3|vec4)\\s+([\\s\\S]*?);/g;\n// Only parse number define.\nvar defineRegex = /#define\\s+(\\w+)?(\\s+[\\d-.]+)?\\s*;?\\s*\\n/g;\n\nvar uniformTypeMap = {\n    'bool': '1i',\n    'int': '1i',\n    'sampler2D': 't',\n    'samplerCube': 't',\n    'float': '1f',\n    'vec2': '2f',\n    'vec3': '3f',\n    'vec4': '4f',\n    'ivec2': '2i',\n    'ivec3': '3i',\n    'ivec4': '4i',\n    'mat2': 'm2',\n    'mat3': 'm3',\n    'mat4': 'm4'\n};\n\nfunction createZeroArray(len) {\n    var arr = [];\n    for (var i = 0; i < len; i++) {\n        arr[i] = 0;\n    }\n    return arr;\n}\n\nvar uniformValueConstructor = {\n    'bool': function () { return true; },\n    'int': function () { return 0; },\n    'float': function () { return 0; },\n    'sampler2D': function () { return null; },\n    'samplerCube': function () { return null; },\n\n    'vec2': function () { return createZeroArray(2); },\n    'vec3': function () { return createZeroArray(3); },\n    'vec4': function () { return createZeroArray(4); },\n\n    'ivec2': function () { return createZeroArray(2); },\n    'ivec3': function () { return createZeroArray(3); },\n    'ivec4': function () { return createZeroArray(4); },\n\n    'mat2': function () { return createZeroArray(4); },\n    'mat3': function () { return createZeroArray(9); },\n    'mat4': function () { return createZeroArray(16); },\n\n    'array': function () { return []; }\n};\n\nvar attributeSemantics = [\n    'POSITION',\n    'NORMAL',\n    'BINORMAL',\n    'TANGENT',\n    'TEXCOORD',\n    'TEXCOORD_0',\n    'TEXCOORD_1',\n    'COLOR',\n    // Skinning\n    // https://github.com/KhronosGroup/glTF/blob/master/specification/README.md#semantics\n    'JOINT',\n    'WEIGHT'\n];\nvar uniformSemantics = [\n    'SKIN_MATRIX',\n    // Information about viewport\n    'VIEWPORT_SIZE',\n    'VIEWPORT',\n    'DEVICEPIXELRATIO',\n    // Window size for window relative coordinate\n    // https://www.opengl.org/sdk/docs/man/html/gl_FragCoord.xhtml\n    'WINDOW_SIZE',\n    // Infomation about camera\n    'NEAR',\n    'FAR',\n    // Time\n    'TIME',\n    // Log depth buffer\n    'LOG_DEPTH_BUFFER_FC'\n];\nvar matrixSemantics = [\n    'WORLD',\n    'VIEW',\n    'PROJECTION',\n    'WORLDVIEW',\n    'VIEWPROJECTION',\n    'WORLDVIEWPROJECTION',\n    'WORLDINVERSE',\n    'VIEWINVERSE',\n    'PROJECTIONINVERSE',\n    'WORLDVIEWINVERSE',\n    'VIEWPROJECTIONINVERSE',\n    'WORLDVIEWPROJECTIONINVERSE',\n    'WORLDTRANSPOSE',\n    'VIEWTRANSPOSE',\n    'PROJECTIONTRANSPOSE',\n    'WORLDVIEWTRANSPOSE',\n    'VIEWPROJECTIONTRANSPOSE',\n    'WORLDVIEWPROJECTIONTRANSPOSE',\n    'WORLDINVERSETRANSPOSE',\n    'VIEWINVERSETRANSPOSE',\n    'PROJECTIONINVERSETRANSPOSE',\n    'WORLDVIEWINVERSETRANSPOSE',\n    'VIEWPROJECTIONINVERSETRANSPOSE',\n    'WORLDVIEWPROJECTIONINVERSETRANSPOSE'\n];\n\nvar attributeSizeMap = {\n    // WebGL does not support integer attributes\n    'vec4': 4,\n    'vec3': 3,\n    'vec2': 2,\n    'float': 1\n};\n\n\nvar shaderIDCache = {};\nvar shaderCodeCache = {};\n\nfunction getShaderID(vertex, fragment) {\n    var key = 'vertex:' + vertex + 'fragment:' + fragment;\n    if (shaderIDCache[key]) {\n        return shaderIDCache[key];\n    }\n    var id = __WEBPACK_IMPORTED_MODULE_0__core_util__[\"a\" /* default */].genGUID();\n    shaderIDCache[key] = id;\n\n    shaderCodeCache[id] = {\n        vertex: vertex,\n        fragment: fragment\n    };\n\n    return id;\n}\n\nfunction removeComment(code) {\n    return code.replace(/[ \\t]*\\/\\/.*\\n/g, '' )   // remove //\n        .replace(/[ \\t]*\\/\\*[\\s\\S]*?\\*\\//g, '' ); // remove /* */\n}\n\nfunction logSyntaxError() {\n    console.error('Wrong uniform/attributes syntax');\n}\n\nfunction parseDeclarations(type, line) {\n    var speratorsRegexp = /[,=\\(\\):]/;\n    var tokens = line\n        // Convert `symbol: [1,2,3]` to `symbol: vec3(1,2,3)`\n        .replace(/:\\s*\\[\\s*(.*)\\s*\\]/g, '=' + type + '($1)')\n        .replace(/\\s+/g, '')\n        .split(/(?=[,=\\(\\):])/g);\n\n    var newTokens = [];\n    for (var i = 0; i < tokens.length; i++) {\n        if (tokens[i].match(speratorsRegexp)) {\n            newTokens.push(\n                tokens[i].charAt(0),\n                tokens[i].slice(1)\n            );\n        }\n        else {\n            newTokens.push(tokens[i]);\n        }\n    }\n    tokens = newTokens;\n\n    var TYPE_SYMBOL = 0;\n    var TYPE_ASSIGN = 1;\n    var TYPE_VEC = 2;\n    var TYPE_ARR = 3;\n    var TYPE_SEMANTIC = 4;\n    var TYPE_NORMAL = 5;\n\n    var opType = TYPE_SYMBOL;\n    var declarations = {};\n    var declarationValue = null;\n    var currentDeclaration;\n\n    addSymbol(tokens[0]);\n\n    function addSymbol(symbol) {\n        if (!symbol) {\n            logSyntaxError();\n        }\n        var arrResult = symbol.match(/\\[(.*?)\\]/);\n        currentDeclaration = symbol.replace(/\\[(.*?)\\]/, '');\n        declarations[currentDeclaration] = {};\n        if (arrResult) {\n            declarations[currentDeclaration].isArray = true;\n            declarations[currentDeclaration].arraySize = arrResult[1];\n        }\n    }\n\n    for (var i = 1; i < tokens.length; i++) {\n        var token = tokens[i];\n        if (!token) {   // Empty token;\n            continue;\n        }\n        if (token === '=') {\n            if (opType !== TYPE_SYMBOL\n            && opType !== TYPE_ARR) {\n                logSyntaxError();\n                break;\n            }\n            opType = TYPE_ASSIGN;\n\n            continue;\n        }\n        else if (token === ':') {\n            opType = TYPE_SEMANTIC;\n\n            continue;\n        }\n        else if (token === ',') {\n            if (opType === TYPE_VEC) {\n                if (!(declarationValue instanceof Array)) {\n                    logSyntaxError();\n                    break;\n                }\n                declarationValue.push(+tokens[++i]);\n            }\n            else {\n                opType = TYPE_NORMAL;\n            }\n\n            continue;\n        }\n        else if (token === ')') {\n            declarations[currentDeclaration].value = new __WEBPACK_IMPORTED_MODULE_1__core_vendor__[\"a\" /* default */].Float32Array(declarationValue);\n            declarationValue = null;\n            opType = TYPE_NORMAL;\n            continue;\n        }\n        else if (token === '(') {\n            if (opType !== TYPE_VEC) {\n                logSyntaxError();\n                break;\n            }\n            if (!(declarationValue instanceof Array)) {\n                logSyntaxError();\n                break;\n            }\n            declarationValue.push(+tokens[++i]);\n            continue;\n        }\n        else if (token.indexOf('vec') >= 0) {\n            if (opType !== TYPE_ASSIGN\n            // Compatitable with old syntax `symbol: [1,2,3]`\n            && opType !== TYPE_SEMANTIC) {\n                logSyntaxError();\n                break;\n            }\n            opType = TYPE_VEC;\n            declarationValue = [];\n            continue;\n        }\n        else if (opType === TYPE_ASSIGN) {\n            if (type === 'bool') {\n                declarations[currentDeclaration].value = token === 'true';\n            }\n            else {\n                declarations[currentDeclaration].value = parseFloat(token);\n            }\n            declarationValue = null;\n            continue;\n        }\n        else if (opType === TYPE_SEMANTIC) {\n            var semantic = token;\n            if (attributeSemantics.indexOf(semantic) >= 0\n                || uniformSemantics.indexOf(semantic) >= 0\n                || matrixSemantics.indexOf(semantic) >= 0\n            ) {\n                declarations[currentDeclaration].semantic = semantic;\n            }\n            else if (semantic === 'ignore' || semantic === 'unconfigurable') {\n                declarations[currentDeclaration].ignore = true;\n            }\n            else {\n                // Try to parse as a default tvalue.\n                if (type === 'bool') {\n                    declarations[currentDeclaration].value = semantic === 'true';\n                }\n                else {\n                    declarations[currentDeclaration].value = parseFloat(semantic);\n                }\n            }\n            continue;\n        }\n\n        // treat as symbol.\n        addSymbol(token);\n        opType = TYPE_SYMBOL;\n    }\n\n    return declarations;\n}\n\n\n/**\n * @constructor\n * @extends clay.core.Base\n * @alias clay.Shader\n * @param {string} vertex\n * @param {string} fragment\n * @example\n * // Create a phong shader\n * var shader = new clay.Shader(\n *      clay.Shader.source('clay.standard.vertex'),\n *      clay.Shader.source('clay.standard.fragment')\n * );\n */\nfunction Shader(vertex, fragment) {\n    // First argument can be { vertex, fragment }\n    if (typeof vertex === 'object') {\n        fragment = vertex.fragment;\n        vertex = vertex.vertex;\n    }\n\n    vertex = removeComment(vertex);\n    fragment = removeComment(fragment);\n\n    this._shaderID = getShaderID(vertex, fragment);\n\n    this._vertexCode = Shader.parseImport(vertex);\n    this._fragmentCode = Shader.parseImport(fragment);\n\n    /**\n     * @readOnly\n     */\n    this.attributeSemantics = {};\n    /**\n     * @readOnly\n     */\n    this.matrixSemantics = {};\n    /**\n     * @readOnly\n     */\n    this.uniformSemantics = {};\n    /**\n     * @readOnly\n     */\n    this.matrixSemanticKeys = [];\n    /**\n     * @readOnly\n     */\n    this.uniformTemplates = {};\n    /**\n     * @readOnly\n     */\n    this.attributes = {};\n    /**\n     * @readOnly\n     */\n    this.textures = {};\n    /**\n     * @readOnly\n     */\n    this.vertexDefines = {};\n    /**\n     * @readOnly\n     */\n    this.fragmentDefines = {};\n\n    this._parseAttributes();\n    this._parseUniforms();\n    this._parseDefines();\n}\n\nShader.prototype = {\n\n    constructor: Shader,\n\n    // Create a new uniform instance for material\n    createUniforms: function () {\n        var uniforms = {};\n\n        for (var symbol in this.uniformTemplates){\n            var uniformTpl = this.uniformTemplates[symbol];\n            uniforms[symbol] = {\n                type: uniformTpl.type,\n                value: uniformTpl.value()\n            };\n        }\n\n        return uniforms;\n    },\n\n    _parseImport: function () {\n        this._vertexCode = Shader.parseImport(this.vertex);\n        this._fragmentCode = Shader.parseImport(this.fragment);\n    },\n\n    _addSemanticUniform: function (symbol, uniformType, semantic) {\n        // This case is only for SKIN_MATRIX\n        // TODO\n        if (attributeSemantics.indexOf(semantic) >= 0) {\n            this.attributeSemantics[semantic] = {\n                symbol: symbol,\n                type: uniformType\n            };\n        }\n        else if (matrixSemantics.indexOf(semantic) >= 0) {\n            var isTranspose = false;\n            var semanticNoTranspose = semantic;\n            if (semantic.match(/TRANSPOSE$/)) {\n                isTranspose = true;\n                semanticNoTranspose = semantic.slice(0, -9);\n            }\n            this.matrixSemantics[semantic] = {\n                symbol: symbol,\n                type: uniformType,\n                isTranspose: isTranspose,\n                semanticNoTranspose: semanticNoTranspose\n            };\n        }\n        else if (uniformSemantics.indexOf(semantic) >= 0) {\n            this.uniformSemantics[semantic] = {\n                symbol: symbol,\n                type: uniformType\n            };\n        }\n    },\n\n    _addMaterialUniform: function (symbol, type, uniformType, defaultValueFunc, isArray, materialUniforms) {\n        materialUniforms[symbol] = {\n            type: uniformType,\n            value: isArray ? uniformValueConstructor['array'] : (defaultValueFunc || uniformValueConstructor[type]),\n            semantic: null\n        };\n    },\n\n    _parseUniforms: function () {\n        var uniforms = {};\n        var self = this;\n        var shaderType = 'vertex';\n        this._uniformList = [];\n\n        this._vertexCode = this._vertexCode.replace(uniformRegex, _uniformParser);\n        shaderType = 'fragment';\n        this._fragmentCode = this._fragmentCode.replace(uniformRegex, _uniformParser);\n\n        self.matrixSemanticKeys = Object.keys(this.matrixSemantics);\n\n        function makeDefaultValueFunc(value) {\n            return value != null ? function () { return value; } : null;\n        }\n\n        function _uniformParser(str, type, content) {\n            var declaredUniforms = parseDeclarations(type, content);\n            var uniformMainStr = [];\n            for (var symbol in declaredUniforms) {\n\n                var uniformInfo = declaredUniforms[symbol];\n                var semantic = uniformInfo.semantic;\n                var tmpStr = symbol;\n                var uniformType = uniformTypeMap[type];\n                var defaultValueFunc = makeDefaultValueFunc(declaredUniforms[symbol].value);\n                if (declaredUniforms[symbol].isArray) {\n                    tmpStr += '[' + declaredUniforms[symbol].arraySize + ']';\n                    uniformType += 'v';\n                }\n\n                uniformMainStr.push(tmpStr);\n\n                self._uniformList.push(symbol);\n\n                if (!uniformInfo.ignore) {\n                    if (type === 'sampler2D' || type === 'samplerCube') {\n                        // Texture is default disabled\n                        self.textures[symbol] = {\n                            shaderType: shaderType,\n                            type: type\n                        };\n                    }\n\n                    if (semantic) {\n                        // TODO Should not declare multiple symbols if have semantic.\n                        self._addSemanticUniform(symbol, uniformType, semantic);\n                    }\n                    else {\n                        self._addMaterialUniform(\n                            symbol, type, uniformType, defaultValueFunc,\n                            declaredUniforms[symbol].isArray, uniforms\n                        );\n                    }\n                }\n            }\n            return uniformMainStr.length > 0\n                ? 'uniform ' + type + ' ' + uniformMainStr.join(',') + ';\\n' : '';\n        }\n\n        this.uniformTemplates = uniforms;\n    },\n\n    _parseAttributes: function () {\n        var attributes = {};\n        var self = this;\n        this._vertexCode = this._vertexCode.replace(attributeRegex, _attributeParser);\n\n        function _attributeParser(str, type, content) {\n            var declaredAttributes = parseDeclarations(type, content);\n\n            var size = attributeSizeMap[type] || 1;\n            var attributeMainStr = [];\n            for (var symbol in declaredAttributes) {\n                var semantic = declaredAttributes[symbol].semantic;\n                attributes[symbol] = {\n                    // TODO Can only be float\n                    type: 'float',\n                    size: size,\n                    semantic: semantic || null\n                };\n                // TODO Should not declare multiple symbols if have semantic.\n                if (semantic) {\n                    if (attributeSemantics.indexOf(semantic) < 0) {\n                        throw new Error('Unkown semantic \"' + semantic + '\"');\n                    }\n                    else {\n                        self.attributeSemantics[semantic] = {\n                            symbol: symbol,\n                            type: type\n                        };\n                    }\n                }\n                attributeMainStr.push(symbol);\n            }\n\n            return 'attribute ' + type + ' ' + attributeMainStr.join(',') + ';\\n';\n        }\n\n        this.attributes = attributes;\n    },\n\n    _parseDefines: function () {\n        var self = this;\n        var shaderType = 'vertex';\n        this._vertexCode = this._vertexCode.replace(defineRegex, _defineParser);\n        shaderType = 'fragment';\n        this._fragmentCode = this._fragmentCode.replace(defineRegex, _defineParser);\n\n        function _defineParser(str, symbol, value) {\n            var defines = shaderType === 'vertex' ? self.vertexDefines : self.fragmentDefines;\n            if (!defines[symbol]) { // Haven't been defined by user\n                if (value === 'false') {\n                    defines[symbol] = false;\n                }\n                else if (value === 'true') {\n                    defines[symbol] = true;\n                }\n                else {\n                    defines[symbol] = value\n                        // If can parse to float\n                        ? (isNaN(parseFloat(value)) ? value.trim() : parseFloat(value))\n                        : null;\n                }\n            }\n            return '';\n        }\n    },\n\n    /**\n     * Clone a new shader\n     * @return {clay.Shader}\n     */\n    clone: function () {\n        var code = shaderCodeCache[this._shaderID];\n        var shader = new Shader(code.vertex, code.fragment);\n        return shader;\n    }\n};\n\nif (Object.defineProperty) {\n    Object.defineProperty(Shader.prototype, 'shaderID', {\n        get: function () {\n            return this._shaderID;\n        }\n    });\n    Object.defineProperty(Shader.prototype, 'vertex', {\n        get: function () {\n            return this._vertexCode;\n        }\n    });\n    Object.defineProperty(Shader.prototype, 'fragment', {\n        get: function () {\n            return this._fragmentCode;\n        }\n    });\n    Object.defineProperty(Shader.prototype, 'uniforms', {\n        get: function () {\n            return this._uniformList;\n        }\n    });\n}\n\nvar importRegex = /(@import)\\s*([0-9a-zA-Z_\\-\\.]*)/g;\nShader.parseImport = function (shaderStr) {\n    shaderStr = shaderStr.replace(importRegex, function (str, importSymbol, importName) {\n        var str = Shader.source(importName);\n        if (str) {\n            // Recursively parse\n            return Shader.parseImport(str);\n        }\n        else {\n            console.error('Shader chunk \"' + importName + '\" not existed in library');\n            return '';\n        }\n    });\n    return shaderStr;\n};\n\nvar exportRegex = /(@export)\\s*([0-9a-zA-Z_\\-\\.]*)\\s*\\n([\\s\\S]*?)@end/g;\n\n/**\n * Import shader source\n * @param  {string} shaderStr\n * @memberOf clay.Shader\n */\nShader['import'] = function (shaderStr) {\n    shaderStr.replace(exportRegex, function (str, exportSymbol, exportName, code) {\n        var code = code.replace(/(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+\\x24)/g, '');\n        if (code) {\n            var parts = exportName.split('.');\n            var obj = Shader.codes;\n            var i = 0;\n            var key;\n            while (i < parts.length - 1) {\n                key = parts[i++];\n                if (!obj[key]) {\n                    obj[key] = {};\n                }\n                obj = obj[key];\n            }\n            key = parts[i];\n            obj[key] = code;\n        }\n        return code;\n    });\n};\n\n/**\n * Library to store all the loaded shader codes\n * @type {Object}\n * @readOnly\n * @memberOf clay.Shader\n */\nShader.codes = {};\n\n/**\n * Get shader source\n * @param  {string} name\n * @return {string}\n */\nShader.source = function (name) {\n    var parts = name.split('.');\n    var obj = Shader.codes;\n    var i = 0;\n    while (obj && i < parts.length) {\n        var key = parts[i++];\n        obj = obj[key];\n    }\n    if (typeof obj !== 'string') {\n        // FIXME Use default instead\n        console.error('Shader \"' + name + '\" not existed in library');\n        return '';\n    }\n    return obj;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Shader);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL1NoYWRlci5qcz9iYmUwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTWFpbmx5IGRvIHRoZSBwYXJzZSBhbmQgY29tcGlsZSBvZiBzaGFkZXIgc3RyaW5nXG4gKiBTdXBwb3J0IHNoYWRlciBjb2RlIGNodW5rIGltcG9ydCBhbmQgZXhwb3J0XG4gKiBTdXBwb3J0IHNoYWRlciBzZW1hbnRpY3NcbiAqIGh0dHA6Ly93d3cubnZpZGlhLmNvbS9vYmplY3QvdXNpbmdfc2FzLmh0bWxcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvY29sbGFkYTJqc29uL2lzc3Vlcy80NVxuICovXG5pbXBvcnQgdXRpbCBmcm9tICcuL2NvcmUvdXRpbCc7XG5pbXBvcnQgdmVuZG9yIGZyb20gJy4vY29yZS92ZW5kb3InO1xuXG52YXIgdW5pZm9ybVJlZ2V4ID0gL3VuaWZvcm1cXHMrKGJvb2x8ZmxvYXR8aW50fHZlYzJ8dmVjM3x2ZWM0fGl2ZWMyfGl2ZWMzfGl2ZWM0fG1hdDJ8bWF0M3xtYXQ0fHNhbXBsZXIyRHxzYW1wbGVyQ3ViZSlcXHMrKFtcXHNcXFNdKj8pOy9nO1xudmFyIGF0dHJpYnV0ZVJlZ2V4ID0gL2F0dHJpYnV0ZVxccysoZmxvYXR8aW50fHZlYzJ8dmVjM3x2ZWM0KVxccysoW1xcc1xcU10qPyk7L2c7XG4vLyBPbmx5IHBhcnNlIG51bWJlciBkZWZpbmUuXG52YXIgZGVmaW5lUmVnZXggPSAvI2RlZmluZVxccysoXFx3Kyk/KFxccytbXFxkLS5dKyk/XFxzKjs/XFxzKlxcbi9nO1xuXG52YXIgdW5pZm9ybVR5cGVNYXAgPSB7XG4gICAgJ2Jvb2wnOiAnMWknLFxuICAgICdpbnQnOiAnMWknLFxuICAgICdzYW1wbGVyMkQnOiAndCcsXG4gICAgJ3NhbXBsZXJDdWJlJzogJ3QnLFxuICAgICdmbG9hdCc6ICcxZicsXG4gICAgJ3ZlYzInOiAnMmYnLFxuICAgICd2ZWMzJzogJzNmJyxcbiAgICAndmVjNCc6ICc0ZicsXG4gICAgJ2l2ZWMyJzogJzJpJyxcbiAgICAnaXZlYzMnOiAnM2knLFxuICAgICdpdmVjNCc6ICc0aScsXG4gICAgJ21hdDInOiAnbTInLFxuICAgICdtYXQzJzogJ20zJyxcbiAgICAnbWF0NCc6ICdtNCdcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZVplcm9BcnJheShsZW4pIHtcbiAgICB2YXIgYXJyID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBhcnJbaV0gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xufVxuXG52YXIgdW5pZm9ybVZhbHVlQ29uc3RydWN0b3IgPSB7XG4gICAgJ2Jvb2wnOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9LFxuICAgICdpbnQnOiBmdW5jdGlvbiAoKSB7IHJldHVybiAwOyB9LFxuICAgICdmbG9hdCc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDA7IH0sXG4gICAgJ3NhbXBsZXIyRCc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgJ3NhbXBsZXJDdWJlJzogZnVuY3Rpb24gKCkgeyByZXR1cm4gbnVsbDsgfSxcblxuICAgICd2ZWMyJzogZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlWmVyb0FycmF5KDIpOyB9LFxuICAgICd2ZWMzJzogZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlWmVyb0FycmF5KDMpOyB9LFxuICAgICd2ZWM0JzogZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlWmVyb0FycmF5KDQpOyB9LFxuXG4gICAgJ2l2ZWMyJzogZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlWmVyb0FycmF5KDIpOyB9LFxuICAgICdpdmVjMyc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVplcm9BcnJheSgzKTsgfSxcbiAgICAnaXZlYzQnOiBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVaZXJvQXJyYXkoNCk7IH0sXG5cbiAgICAnbWF0Mic6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVplcm9BcnJheSg0KTsgfSxcbiAgICAnbWF0Myc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVplcm9BcnJheSg5KTsgfSxcbiAgICAnbWF0NCc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVplcm9BcnJheSgxNik7IH0sXG5cbiAgICAnYXJyYXknOiBmdW5jdGlvbiAoKSB7IHJldHVybiBbXTsgfVxufTtcblxudmFyIGF0dHJpYnV0ZVNlbWFudGljcyA9IFtcbiAgICAnUE9TSVRJT04nLFxuICAgICdOT1JNQUwnLFxuICAgICdCSU5PUk1BTCcsXG4gICAgJ1RBTkdFTlQnLFxuICAgICdURVhDT09SRCcsXG4gICAgJ1RFWENPT1JEXzAnLFxuICAgICdURVhDT09SRF8xJyxcbiAgICAnQ09MT1InLFxuICAgIC8vIFNraW5uaW5nXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vUkVBRE1FLm1kI3NlbWFudGljc1xuICAgICdKT0lOVCcsXG4gICAgJ1dFSUdIVCdcbl07XG52YXIgdW5pZm9ybVNlbWFudGljcyA9IFtcbiAgICAnU0tJTl9NQVRSSVgnLFxuICAgIC8vIEluZm9ybWF0aW9uIGFib3V0IHZpZXdwb3J0XG4gICAgJ1ZJRVdQT1JUX1NJWkUnLFxuICAgICdWSUVXUE9SVCcsXG4gICAgJ0RFVklDRVBJWEVMUkFUSU8nLFxuICAgIC8vIFdpbmRvdyBzaXplIGZvciB3aW5kb3cgcmVsYXRpdmUgY29vcmRpbmF0ZVxuICAgIC8vIGh0dHBzOi8vd3d3Lm9wZW5nbC5vcmcvc2RrL2RvY3MvbWFuL2h0bWwvZ2xfRnJhZ0Nvb3JkLnhodG1sXG4gICAgJ1dJTkRPV19TSVpFJyxcbiAgICAvLyBJbmZvbWF0aW9uIGFib3V0IGNhbWVyYVxuICAgICdORUFSJyxcbiAgICAnRkFSJyxcbiAgICAvLyBUaW1lXG4gICAgJ1RJTUUnLFxuICAgIC8vIExvZyBkZXB0aCBidWZmZXJcbiAgICAnTE9HX0RFUFRIX0JVRkZFUl9GQydcbl07XG52YXIgbWF0cml4U2VtYW50aWNzID0gW1xuICAgICdXT1JMRCcsXG4gICAgJ1ZJRVcnLFxuICAgICdQUk9KRUNUSU9OJyxcbiAgICAnV09STERWSUVXJyxcbiAgICAnVklFV1BST0pFQ1RJT04nLFxuICAgICdXT1JMRFZJRVdQUk9KRUNUSU9OJyxcbiAgICAnV09STERJTlZFUlNFJyxcbiAgICAnVklFV0lOVkVSU0UnLFxuICAgICdQUk9KRUNUSU9OSU5WRVJTRScsXG4gICAgJ1dPUkxEVklFV0lOVkVSU0UnLFxuICAgICdWSUVXUFJPSkVDVElPTklOVkVSU0UnLFxuICAgICdXT1JMRFZJRVdQUk9KRUNUSU9OSU5WRVJTRScsXG4gICAgJ1dPUkxEVFJBTlNQT1NFJyxcbiAgICAnVklFV1RSQU5TUE9TRScsXG4gICAgJ1BST0pFQ1RJT05UUkFOU1BPU0UnLFxuICAgICdXT1JMRFZJRVdUUkFOU1BPU0UnLFxuICAgICdWSUVXUFJPSkVDVElPTlRSQU5TUE9TRScsXG4gICAgJ1dPUkxEVklFV1BST0pFQ1RJT05UUkFOU1BPU0UnLFxuICAgICdXT1JMRElOVkVSU0VUUkFOU1BPU0UnLFxuICAgICdWSUVXSU5WRVJTRVRSQU5TUE9TRScsXG4gICAgJ1BST0pFQ1RJT05JTlZFUlNFVFJBTlNQT1NFJyxcbiAgICAnV09STERWSUVXSU5WRVJTRVRSQU5TUE9TRScsXG4gICAgJ1ZJRVdQUk9KRUNUSU9OSU5WRVJTRVRSQU5TUE9TRScsXG4gICAgJ1dPUkxEVklFV1BST0pFQ1RJT05JTlZFUlNFVFJBTlNQT1NFJ1xuXTtcblxudmFyIGF0dHJpYnV0ZVNpemVNYXAgPSB7XG4gICAgLy8gV2ViR0wgZG9lcyBub3Qgc3VwcG9ydCBpbnRlZ2VyIGF0dHJpYnV0ZXNcbiAgICAndmVjNCc6IDQsXG4gICAgJ3ZlYzMnOiAzLFxuICAgICd2ZWMyJzogMixcbiAgICAnZmxvYXQnOiAxXG59O1xuXG5cbnZhciBzaGFkZXJJRENhY2hlID0ge307XG52YXIgc2hhZGVyQ29kZUNhY2hlID0ge307XG5cbmZ1bmN0aW9uIGdldFNoYWRlcklEKHZlcnRleCwgZnJhZ21lbnQpIHtcbiAgICB2YXIga2V5ID0gJ3ZlcnRleDonICsgdmVydGV4ICsgJ2ZyYWdtZW50OicgKyBmcmFnbWVudDtcbiAgICBpZiAoc2hhZGVySURDYWNoZVtrZXldKSB7XG4gICAgICAgIHJldHVybiBzaGFkZXJJRENhY2hlW2tleV07XG4gICAgfVxuICAgIHZhciBpZCA9IHV0aWwuZ2VuR1VJRCgpO1xuICAgIHNoYWRlcklEQ2FjaGVba2V5XSA9IGlkO1xuXG4gICAgc2hhZGVyQ29kZUNhY2hlW2lkXSA9IHtcbiAgICAgICAgdmVydGV4OiB2ZXJ0ZXgsXG4gICAgICAgIGZyYWdtZW50OiBmcmFnbWVudFxuICAgIH07XG5cbiAgICByZXR1cm4gaWQ7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUNvbW1lbnQoY29kZSkge1xuICAgIHJldHVybiBjb2RlLnJlcGxhY2UoL1sgXFx0XSpcXC9cXC8uKlxcbi9nLCAnJyApICAgLy8gcmVtb3ZlIC8vXG4gICAgICAgIC5yZXBsYWNlKC9bIFxcdF0qXFwvXFwqW1xcc1xcU10qP1xcKlxcLy9nLCAnJyApOyAvLyByZW1vdmUgLyogKi9cbn1cblxuZnVuY3Rpb24gbG9nU3ludGF4RXJyb3IoKSB7XG4gICAgY29uc29sZS5lcnJvcignV3JvbmcgdW5pZm9ybS9hdHRyaWJ1dGVzIHN5bnRheCcpO1xufVxuXG5mdW5jdGlvbiBwYXJzZURlY2xhcmF0aW9ucyh0eXBlLCBsaW5lKSB7XG4gICAgdmFyIHNwZXJhdG9yc1JlZ2V4cCA9IC9bLD1cXChcXCk6XS87XG4gICAgdmFyIHRva2VucyA9IGxpbmVcbiAgICAgICAgLy8gQ29udmVydCBgc3ltYm9sOiBbMSwyLDNdYCB0byBgc3ltYm9sOiB2ZWMzKDEsMiwzKWBcbiAgICAgICAgLnJlcGxhY2UoLzpcXHMqXFxbXFxzKiguKilcXHMqXFxdL2csICc9JyArIHR5cGUgKyAnKCQxKScpXG4gICAgICAgIC5yZXBsYWNlKC9cXHMrL2csICcnKVxuICAgICAgICAuc3BsaXQoLyg/PVssPVxcKFxcKTpdKS9nKTtcblxuICAgIHZhciBuZXdUb2tlbnMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodG9rZW5zW2ldLm1hdGNoKHNwZXJhdG9yc1JlZ2V4cCkpIHtcbiAgICAgICAgICAgIG5ld1Rva2Vucy5wdXNoKFxuICAgICAgICAgICAgICAgIHRva2Vuc1tpXS5jaGFyQXQoMCksXG4gICAgICAgICAgICAgICAgdG9rZW5zW2ldLnNsaWNlKDEpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbmV3VG9rZW5zLnB1c2godG9rZW5zW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b2tlbnMgPSBuZXdUb2tlbnM7XG5cbiAgICB2YXIgVFlQRV9TWU1CT0wgPSAwO1xuICAgIHZhciBUWVBFX0FTU0lHTiA9IDE7XG4gICAgdmFyIFRZUEVfVkVDID0gMjtcbiAgICB2YXIgVFlQRV9BUlIgPSAzO1xuICAgIHZhciBUWVBFX1NFTUFOVElDID0gNDtcbiAgICB2YXIgVFlQRV9OT1JNQUwgPSA1O1xuXG4gICAgdmFyIG9wVHlwZSA9IFRZUEVfU1lNQk9MO1xuICAgIHZhciBkZWNsYXJhdGlvbnMgPSB7fTtcbiAgICB2YXIgZGVjbGFyYXRpb25WYWx1ZSA9IG51bGw7XG4gICAgdmFyIGN1cnJlbnREZWNsYXJhdGlvbjtcblxuICAgIGFkZFN5bWJvbCh0b2tlbnNbMF0pO1xuXG4gICAgZnVuY3Rpb24gYWRkU3ltYm9sKHN5bWJvbCkge1xuICAgICAgICBpZiAoIXN5bWJvbCkge1xuICAgICAgICAgICAgbG9nU3ludGF4RXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXJyUmVzdWx0ID0gc3ltYm9sLm1hdGNoKC9cXFsoLio/KVxcXS8pO1xuICAgICAgICBjdXJyZW50RGVjbGFyYXRpb24gPSBzeW1ib2wucmVwbGFjZSgvXFxbKC4qPylcXF0vLCAnJyk7XG4gICAgICAgIGRlY2xhcmF0aW9uc1tjdXJyZW50RGVjbGFyYXRpb25dID0ge307XG4gICAgICAgIGlmIChhcnJSZXN1bHQpIHtcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uc1tjdXJyZW50RGVjbGFyYXRpb25dLmlzQXJyYXkgPSB0cnVlO1xuICAgICAgICAgICAgZGVjbGFyYXRpb25zW2N1cnJlbnREZWNsYXJhdGlvbl0uYXJyYXlTaXplID0gYXJyUmVzdWx0WzFdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgICBpZiAoIXRva2VuKSB7ICAgLy8gRW1wdHkgdG9rZW47XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9rZW4gPT09ICc9Jykge1xuICAgICAgICAgICAgaWYgKG9wVHlwZSAhPT0gVFlQRV9TWU1CT0xcbiAgICAgICAgICAgICYmIG9wVHlwZSAhPT0gVFlQRV9BUlIpIHtcbiAgICAgICAgICAgICAgICBsb2dTeW50YXhFcnJvcigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3BUeXBlID0gVFlQRV9BU1NJR047XG5cbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRva2VuID09PSAnOicpIHtcbiAgICAgICAgICAgIG9wVHlwZSA9IFRZUEVfU0VNQU5USUM7XG5cbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRva2VuID09PSAnLCcpIHtcbiAgICAgICAgICAgIGlmIChvcFR5cGUgPT09IFRZUEVfVkVDKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoZGVjbGFyYXRpb25WYWx1ZSBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dTeW50YXhFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25WYWx1ZS5wdXNoKCt0b2tlbnNbKytpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcFR5cGUgPSBUWVBFX05PUk1BTDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodG9rZW4gPT09ICcpJykge1xuICAgICAgICAgICAgZGVjbGFyYXRpb25zW2N1cnJlbnREZWNsYXJhdGlvbl0udmFsdWUgPSBuZXcgdmVuZG9yLkZsb2F0MzJBcnJheShkZWNsYXJhdGlvblZhbHVlKTtcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uVmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgb3BUeXBlID0gVFlQRV9OT1JNQUw7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0b2tlbiA9PT0gJygnKSB7XG4gICAgICAgICAgICBpZiAob3BUeXBlICE9PSBUWVBFX1ZFQykge1xuICAgICAgICAgICAgICAgIGxvZ1N5bnRheEVycm9yKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIShkZWNsYXJhdGlvblZhbHVlIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgbG9nU3ludGF4RXJyb3IoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlY2xhcmF0aW9uVmFsdWUucHVzaCgrdG9rZW5zWysraV0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodG9rZW4uaW5kZXhPZigndmVjJykgPj0gMCkge1xuICAgICAgICAgICAgaWYgKG9wVHlwZSAhPT0gVFlQRV9BU1NJR05cbiAgICAgICAgICAgIC8vIENvbXBhdGl0YWJsZSB3aXRoIG9sZCBzeW50YXggYHN5bWJvbDogWzEsMiwzXWBcbiAgICAgICAgICAgICYmIG9wVHlwZSAhPT0gVFlQRV9TRU1BTlRJQykge1xuICAgICAgICAgICAgICAgIGxvZ1N5bnRheEVycm9yKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcFR5cGUgPSBUWVBFX1ZFQztcbiAgICAgICAgICAgIGRlY2xhcmF0aW9uVmFsdWUgPSBbXTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wVHlwZSA9PT0gVFlQRV9BU1NJR04pIHtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnYm9vbCcpIHtcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnNbY3VycmVudERlY2xhcmF0aW9uXS52YWx1ZSA9IHRva2VuID09PSAndHJ1ZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnNbY3VycmVudERlY2xhcmF0aW9uXS52YWx1ZSA9IHBhcnNlRmxvYXQodG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVjbGFyYXRpb25WYWx1ZSA9IG51bGw7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcFR5cGUgPT09IFRZUEVfU0VNQU5USUMpIHtcbiAgICAgICAgICAgIHZhciBzZW1hbnRpYyA9IHRva2VuO1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZVNlbWFudGljcy5pbmRleE9mKHNlbWFudGljKSA+PSAwXG4gICAgICAgICAgICAgICAgfHwgdW5pZm9ybVNlbWFudGljcy5pbmRleE9mKHNlbWFudGljKSA+PSAwXG4gICAgICAgICAgICAgICAgfHwgbWF0cml4U2VtYW50aWNzLmluZGV4T2Yoc2VtYW50aWMpID49IDBcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uc1tjdXJyZW50RGVjbGFyYXRpb25dLnNlbWFudGljID0gc2VtYW50aWM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzZW1hbnRpYyA9PT0gJ2lnbm9yZScgfHwgc2VtYW50aWMgPT09ICd1bmNvbmZpZ3VyYWJsZScpIHtcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnNbY3VycmVudERlY2xhcmF0aW9uXS5pZ25vcmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gVHJ5IHRvIHBhcnNlIGFzIGEgZGVmYXVsdCB0dmFsdWUuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdib29sJykge1xuICAgICAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnNbY3VycmVudERlY2xhcmF0aW9uXS52YWx1ZSA9IHNlbWFudGljID09PSAndHJ1ZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnNbY3VycmVudERlY2xhcmF0aW9uXS52YWx1ZSA9IHBhcnNlRmxvYXQoc2VtYW50aWMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdHJlYXQgYXMgc3ltYm9sLlxuICAgICAgICBhZGRTeW1ib2wodG9rZW4pO1xuICAgICAgICBvcFR5cGUgPSBUWVBFX1NZTUJPTDtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVjbGFyYXRpb25zO1xufVxuXG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBjbGF5LmNvcmUuQmFzZVxuICogQGFsaWFzIGNsYXkuU2hhZGVyXG4gKiBAcGFyYW0ge3N0cmluZ30gdmVydGV4XG4gKiBAcGFyYW0ge3N0cmluZ30gZnJhZ21lbnRcbiAqIEBleGFtcGxlXG4gKiAvLyBDcmVhdGUgYSBwaG9uZyBzaGFkZXJcbiAqIHZhciBzaGFkZXIgPSBuZXcgY2xheS5TaGFkZXIoXG4gKiAgICAgIGNsYXkuU2hhZGVyLnNvdXJjZSgnY2xheS5zdGFuZGFyZC52ZXJ0ZXgnKSxcbiAqICAgICAgY2xheS5TaGFkZXIuc291cmNlKCdjbGF5LnN0YW5kYXJkLmZyYWdtZW50JylcbiAqICk7XG4gKi9cbmZ1bmN0aW9uIFNoYWRlcih2ZXJ0ZXgsIGZyYWdtZW50KSB7XG4gICAgLy8gRmlyc3QgYXJndW1lbnQgY2FuIGJlIHsgdmVydGV4LCBmcmFnbWVudCB9XG4gICAgaWYgKHR5cGVvZiB2ZXJ0ZXggPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGZyYWdtZW50ID0gdmVydGV4LmZyYWdtZW50O1xuICAgICAgICB2ZXJ0ZXggPSB2ZXJ0ZXgudmVydGV4O1xuICAgIH1cblxuICAgIHZlcnRleCA9IHJlbW92ZUNvbW1lbnQodmVydGV4KTtcbiAgICBmcmFnbWVudCA9IHJlbW92ZUNvbW1lbnQoZnJhZ21lbnQpO1xuXG4gICAgdGhpcy5fc2hhZGVySUQgPSBnZXRTaGFkZXJJRCh2ZXJ0ZXgsIGZyYWdtZW50KTtcblxuICAgIHRoaXMuX3ZlcnRleENvZGUgPSBTaGFkZXIucGFyc2VJbXBvcnQodmVydGV4KTtcbiAgICB0aGlzLl9mcmFnbWVudENvZGUgPSBTaGFkZXIucGFyc2VJbXBvcnQoZnJhZ21lbnQpO1xuXG4gICAgLyoqXG4gICAgICogQHJlYWRPbmx5XG4gICAgICovXG4gICAgdGhpcy5hdHRyaWJ1dGVTZW1hbnRpY3MgPSB7fTtcbiAgICAvKipcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKi9cbiAgICB0aGlzLm1hdHJpeFNlbWFudGljcyA9IHt9O1xuICAgIC8qKlxuICAgICAqIEByZWFkT25seVxuICAgICAqL1xuICAgIHRoaXMudW5pZm9ybVNlbWFudGljcyA9IHt9O1xuICAgIC8qKlxuICAgICAqIEByZWFkT25seVxuICAgICAqL1xuICAgIHRoaXMubWF0cml4U2VtYW50aWNLZXlzID0gW107XG4gICAgLyoqXG4gICAgICogQHJlYWRPbmx5XG4gICAgICovXG4gICAgdGhpcy51bmlmb3JtVGVtcGxhdGVzID0ge307XG4gICAgLyoqXG4gICAgICogQHJlYWRPbmx5XG4gICAgICovXG4gICAgdGhpcy5hdHRyaWJ1dGVzID0ge307XG4gICAgLyoqXG4gICAgICogQHJlYWRPbmx5XG4gICAgICovXG4gICAgdGhpcy50ZXh0dXJlcyA9IHt9O1xuICAgIC8qKlxuICAgICAqIEByZWFkT25seVxuICAgICAqL1xuICAgIHRoaXMudmVydGV4RGVmaW5lcyA9IHt9O1xuICAgIC8qKlxuICAgICAqIEByZWFkT25seVxuICAgICAqL1xuICAgIHRoaXMuZnJhZ21lbnREZWZpbmVzID0ge307XG5cbiAgICB0aGlzLl9wYXJzZUF0dHJpYnV0ZXMoKTtcbiAgICB0aGlzLl9wYXJzZVVuaWZvcm1zKCk7XG4gICAgdGhpcy5fcGFyc2VEZWZpbmVzKCk7XG59XG5cblNoYWRlci5wcm90b3R5cGUgPSB7XG5cbiAgICBjb25zdHJ1Y3RvcjogU2hhZGVyLFxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHVuaWZvcm0gaW5zdGFuY2UgZm9yIG1hdGVyaWFsXG4gICAgY3JlYXRlVW5pZm9ybXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHVuaWZvcm1zID0ge307XG5cbiAgICAgICAgZm9yICh2YXIgc3ltYm9sIGluIHRoaXMudW5pZm9ybVRlbXBsYXRlcyl7XG4gICAgICAgICAgICB2YXIgdW5pZm9ybVRwbCA9IHRoaXMudW5pZm9ybVRlbXBsYXRlc1tzeW1ib2xdO1xuICAgICAgICAgICAgdW5pZm9ybXNbc3ltYm9sXSA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiB1bmlmb3JtVHBsLnR5cGUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHVuaWZvcm1UcGwudmFsdWUoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmlmb3JtcztcbiAgICB9LFxuXG4gICAgX3BhcnNlSW1wb3J0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3ZlcnRleENvZGUgPSBTaGFkZXIucGFyc2VJbXBvcnQodGhpcy52ZXJ0ZXgpO1xuICAgICAgICB0aGlzLl9mcmFnbWVudENvZGUgPSBTaGFkZXIucGFyc2VJbXBvcnQodGhpcy5mcmFnbWVudCk7XG4gICAgfSxcblxuICAgIF9hZGRTZW1hbnRpY1VuaWZvcm06IGZ1bmN0aW9uIChzeW1ib2wsIHVuaWZvcm1UeXBlLCBzZW1hbnRpYykge1xuICAgICAgICAvLyBUaGlzIGNhc2UgaXMgb25seSBmb3IgU0tJTl9NQVRSSVhcbiAgICAgICAgLy8gVE9ET1xuICAgICAgICBpZiAoYXR0cmlidXRlU2VtYW50aWNzLmluZGV4T2Yoc2VtYW50aWMpID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlU2VtYW50aWNzW3NlbWFudGljXSA9IHtcbiAgICAgICAgICAgICAgICBzeW1ib2w6IHN5bWJvbCxcbiAgICAgICAgICAgICAgICB0eXBlOiB1bmlmb3JtVHlwZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtYXRyaXhTZW1hbnRpY3MuaW5kZXhPZihzZW1hbnRpYykgPj0gMCkge1xuICAgICAgICAgICAgdmFyIGlzVHJhbnNwb3NlID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgc2VtYW50aWNOb1RyYW5zcG9zZSA9IHNlbWFudGljO1xuICAgICAgICAgICAgaWYgKHNlbWFudGljLm1hdGNoKC9UUkFOU1BPU0UkLykpIHtcbiAgICAgICAgICAgICAgICBpc1RyYW5zcG9zZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2VtYW50aWNOb1RyYW5zcG9zZSA9IHNlbWFudGljLnNsaWNlKDAsIC05KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWF0cml4U2VtYW50aWNzW3NlbWFudGljXSA9IHtcbiAgICAgICAgICAgICAgICBzeW1ib2w6IHN5bWJvbCxcbiAgICAgICAgICAgICAgICB0eXBlOiB1bmlmb3JtVHlwZSxcbiAgICAgICAgICAgICAgICBpc1RyYW5zcG9zZTogaXNUcmFuc3Bvc2UsXG4gICAgICAgICAgICAgICAgc2VtYW50aWNOb1RyYW5zcG9zZTogc2VtYW50aWNOb1RyYW5zcG9zZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1bmlmb3JtU2VtYW50aWNzLmluZGV4T2Yoc2VtYW50aWMpID49IDApIHtcbiAgICAgICAgICAgIHRoaXMudW5pZm9ybVNlbWFudGljc1tzZW1hbnRpY10gPSB7XG4gICAgICAgICAgICAgICAgc3ltYm9sOiBzeW1ib2wsXG4gICAgICAgICAgICAgICAgdHlwZTogdW5pZm9ybVR5cGVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX2FkZE1hdGVyaWFsVW5pZm9ybTogZnVuY3Rpb24gKHN5bWJvbCwgdHlwZSwgdW5pZm9ybVR5cGUsIGRlZmF1bHRWYWx1ZUZ1bmMsIGlzQXJyYXksIG1hdGVyaWFsVW5pZm9ybXMpIHtcbiAgICAgICAgbWF0ZXJpYWxVbmlmb3Jtc1tzeW1ib2xdID0ge1xuICAgICAgICAgICAgdHlwZTogdW5pZm9ybVR5cGUsXG4gICAgICAgICAgICB2YWx1ZTogaXNBcnJheSA/IHVuaWZvcm1WYWx1ZUNvbnN0cnVjdG9yWydhcnJheSddIDogKGRlZmF1bHRWYWx1ZUZ1bmMgfHwgdW5pZm9ybVZhbHVlQ29uc3RydWN0b3JbdHlwZV0pLFxuICAgICAgICAgICAgc2VtYW50aWM6IG51bGxcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgX3BhcnNlVW5pZm9ybXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHVuaWZvcm1zID0ge307XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHNoYWRlclR5cGUgPSAndmVydGV4JztcbiAgICAgICAgdGhpcy5fdW5pZm9ybUxpc3QgPSBbXTtcblxuICAgICAgICB0aGlzLl92ZXJ0ZXhDb2RlID0gdGhpcy5fdmVydGV4Q29kZS5yZXBsYWNlKHVuaWZvcm1SZWdleCwgX3VuaWZvcm1QYXJzZXIpO1xuICAgICAgICBzaGFkZXJUeXBlID0gJ2ZyYWdtZW50JztcbiAgICAgICAgdGhpcy5fZnJhZ21lbnRDb2RlID0gdGhpcy5fZnJhZ21lbnRDb2RlLnJlcGxhY2UodW5pZm9ybVJlZ2V4LCBfdW5pZm9ybVBhcnNlcik7XG5cbiAgICAgICAgc2VsZi5tYXRyaXhTZW1hbnRpY0tleXMgPSBPYmplY3Qua2V5cyh0aGlzLm1hdHJpeFNlbWFudGljcyk7XG5cbiAgICAgICAgZnVuY3Rpb24gbWFrZURlZmF1bHRWYWx1ZUZ1bmModmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gZnVuY3Rpb24gKCkgeyByZXR1cm4gdmFsdWU7IH0gOiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX3VuaWZvcm1QYXJzZXIoc3RyLCB0eXBlLCBjb250ZW50KSB7XG4gICAgICAgICAgICB2YXIgZGVjbGFyZWRVbmlmb3JtcyA9IHBhcnNlRGVjbGFyYXRpb25zKHR5cGUsIGNvbnRlbnQpO1xuICAgICAgICAgICAgdmFyIHVuaWZvcm1NYWluU3RyID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBzeW1ib2wgaW4gZGVjbGFyZWRVbmlmb3Jtcykge1xuXG4gICAgICAgICAgICAgICAgdmFyIHVuaWZvcm1JbmZvID0gZGVjbGFyZWRVbmlmb3Jtc1tzeW1ib2xdO1xuICAgICAgICAgICAgICAgIHZhciBzZW1hbnRpYyA9IHVuaWZvcm1JbmZvLnNlbWFudGljO1xuICAgICAgICAgICAgICAgIHZhciB0bXBTdHIgPSBzeW1ib2w7XG4gICAgICAgICAgICAgICAgdmFyIHVuaWZvcm1UeXBlID0gdW5pZm9ybVR5cGVNYXBbdHlwZV07XG4gICAgICAgICAgICAgICAgdmFyIGRlZmF1bHRWYWx1ZUZ1bmMgPSBtYWtlRGVmYXVsdFZhbHVlRnVuYyhkZWNsYXJlZFVuaWZvcm1zW3N5bWJvbF0udmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChkZWNsYXJlZFVuaWZvcm1zW3N5bWJvbF0uaXNBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICB0bXBTdHIgKz0gJ1snICsgZGVjbGFyZWRVbmlmb3Jtc1tzeW1ib2xdLmFycmF5U2l6ZSArICddJztcbiAgICAgICAgICAgICAgICAgICAgdW5pZm9ybVR5cGUgKz0gJ3YnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHVuaWZvcm1NYWluU3RyLnB1c2godG1wU3RyKTtcblxuICAgICAgICAgICAgICAgIHNlbGYuX3VuaWZvcm1MaXN0LnB1c2goc3ltYm9sKTtcblxuICAgICAgICAgICAgICAgIGlmICghdW5pZm9ybUluZm8uaWdub3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnc2FtcGxlcjJEJyB8fCB0eXBlID09PSAnc2FtcGxlckN1YmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUZXh0dXJlIGlzIGRlZmF1bHQgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGV4dHVyZXNbc3ltYm9sXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkZXJUeXBlOiBzaGFkZXJUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VtYW50aWMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gU2hvdWxkIG5vdCBkZWNsYXJlIG11bHRpcGxlIHN5bWJvbHMgaWYgaGF2ZSBzZW1hbnRpYy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2FkZFNlbWFudGljVW5pZm9ybShzeW1ib2wsIHVuaWZvcm1UeXBlLCBzZW1hbnRpYyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9hZGRNYXRlcmlhbFVuaWZvcm0oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sLCB0eXBlLCB1bmlmb3JtVHlwZSwgZGVmYXVsdFZhbHVlRnVuYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNsYXJlZFVuaWZvcm1zW3N5bWJvbF0uaXNBcnJheSwgdW5pZm9ybXNcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5pZm9ybU1haW5TdHIubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgID8gJ3VuaWZvcm0gJyArIHR5cGUgKyAnICcgKyB1bmlmb3JtTWFpblN0ci5qb2luKCcsJykgKyAnO1xcbicgOiAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudW5pZm9ybVRlbXBsYXRlcyA9IHVuaWZvcm1zO1xuICAgIH0sXG5cbiAgICBfcGFyc2VBdHRyaWJ1dGVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0ge307XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5fdmVydGV4Q29kZSA9IHRoaXMuX3ZlcnRleENvZGUucmVwbGFjZShhdHRyaWJ1dGVSZWdleCwgX2F0dHJpYnV0ZVBhcnNlcik7XG5cbiAgICAgICAgZnVuY3Rpb24gX2F0dHJpYnV0ZVBhcnNlcihzdHIsIHR5cGUsIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBkZWNsYXJlZEF0dHJpYnV0ZXMgPSBwYXJzZURlY2xhcmF0aW9ucyh0eXBlLCBjb250ZW50KTtcblxuICAgICAgICAgICAgdmFyIHNpemUgPSBhdHRyaWJ1dGVTaXplTWFwW3R5cGVdIHx8IDE7XG4gICAgICAgICAgICB2YXIgYXR0cmlidXRlTWFpblN0ciA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgc3ltYm9sIGluIGRlY2xhcmVkQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIHZhciBzZW1hbnRpYyA9IGRlY2xhcmVkQXR0cmlidXRlc1tzeW1ib2xdLnNlbWFudGljO1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbc3ltYm9sXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyBDYW4gb25seSBiZSBmbG9hdFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmxvYXQnLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBzaXplLFxuICAgICAgICAgICAgICAgICAgICBzZW1hbnRpYzogc2VtYW50aWMgfHwgbnVsbFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gVE9ETyBTaG91bGQgbm90IGRlY2xhcmUgbXVsdGlwbGUgc3ltYm9scyBpZiBoYXZlIHNlbWFudGljLlxuICAgICAgICAgICAgICAgIGlmIChzZW1hbnRpYykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlU2VtYW50aWNzLmluZGV4T2Yoc2VtYW50aWMpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtvd24gc2VtYW50aWMgXCInICsgc2VtYW50aWMgKyAnXCInKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXR0cmlidXRlU2VtYW50aWNzW3NlbWFudGljXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2w6IHN5bWJvbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU1haW5TdHIucHVzaChzeW1ib2wpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gJ2F0dHJpYnV0ZSAnICsgdHlwZSArICcgJyArIGF0dHJpYnV0ZU1haW5TdHIuam9pbignLCcpICsgJztcXG4nO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgICB9LFxuXG4gICAgX3BhcnNlRGVmaW5lczogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBzaGFkZXJUeXBlID0gJ3ZlcnRleCc7XG4gICAgICAgIHRoaXMuX3ZlcnRleENvZGUgPSB0aGlzLl92ZXJ0ZXhDb2RlLnJlcGxhY2UoZGVmaW5lUmVnZXgsIF9kZWZpbmVQYXJzZXIpO1xuICAgICAgICBzaGFkZXJUeXBlID0gJ2ZyYWdtZW50JztcbiAgICAgICAgdGhpcy5fZnJhZ21lbnRDb2RlID0gdGhpcy5fZnJhZ21lbnRDb2RlLnJlcGxhY2UoZGVmaW5lUmVnZXgsIF9kZWZpbmVQYXJzZXIpO1xuXG4gICAgICAgIGZ1bmN0aW9uIF9kZWZpbmVQYXJzZXIoc3RyLCBzeW1ib2wsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZGVmaW5lcyA9IHNoYWRlclR5cGUgPT09ICd2ZXJ0ZXgnID8gc2VsZi52ZXJ0ZXhEZWZpbmVzIDogc2VsZi5mcmFnbWVudERlZmluZXM7XG4gICAgICAgICAgICBpZiAoIWRlZmluZXNbc3ltYm9sXSkgeyAvLyBIYXZlbid0IGJlZW4gZGVmaW5lZCBieSB1c2VyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmluZXNbc3ltYm9sXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmluZXNbc3ltYm9sXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWZpbmVzW3N5bWJvbF0gPSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgY2FuIHBhcnNlIHRvIGZsb2F0XG4gICAgICAgICAgICAgICAgICAgICAgICA/IChpc05hTihwYXJzZUZsb2F0KHZhbHVlKSkgPyB2YWx1ZS50cmltKCkgOiBwYXJzZUZsb2F0KHZhbHVlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xvbmUgYSBuZXcgc2hhZGVyXG4gICAgICogQHJldHVybiB7Y2xheS5TaGFkZXJ9XG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvZGUgPSBzaGFkZXJDb2RlQ2FjaGVbdGhpcy5fc2hhZGVySURdO1xuICAgICAgICB2YXIgc2hhZGVyID0gbmV3IFNoYWRlcihjb2RlLnZlcnRleCwgY29kZS5mcmFnbWVudCk7XG4gICAgICAgIHJldHVybiBzaGFkZXI7XG4gICAgfVxufTtcblxuaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTaGFkZXIucHJvdG90eXBlLCAnc2hhZGVySUQnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NoYWRlcklEO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNoYWRlci5wcm90b3R5cGUsICd2ZXJ0ZXgnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZlcnRleENvZGU7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2hhZGVyLnByb3RvdHlwZSwgJ2ZyYWdtZW50Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9mcmFnbWVudENvZGU7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2hhZGVyLnByb3RvdHlwZSwgJ3VuaWZvcm1zJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91bmlmb3JtTGlzdDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG52YXIgaW1wb3J0UmVnZXggPSAvKEBpbXBvcnQpXFxzKihbMC05YS16QS1aX1xcLVxcLl0qKS9nO1xuU2hhZGVyLnBhcnNlSW1wb3J0ID0gZnVuY3Rpb24gKHNoYWRlclN0cikge1xuICAgIHNoYWRlclN0ciA9IHNoYWRlclN0ci5yZXBsYWNlKGltcG9ydFJlZ2V4LCBmdW5jdGlvbiAoc3RyLCBpbXBvcnRTeW1ib2wsIGltcG9ydE5hbWUpIHtcbiAgICAgICAgdmFyIHN0ciA9IFNoYWRlci5zb3VyY2UoaW1wb3J0TmFtZSk7XG4gICAgICAgIGlmIChzdHIpIHtcbiAgICAgICAgICAgIC8vIFJlY3Vyc2l2ZWx5IHBhcnNlXG4gICAgICAgICAgICByZXR1cm4gU2hhZGVyLnBhcnNlSW1wb3J0KHN0cik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdTaGFkZXIgY2h1bmsgXCInICsgaW1wb3J0TmFtZSArICdcIiBub3QgZXhpc3RlZCBpbiBsaWJyYXJ5Jyk7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc2hhZGVyU3RyO1xufTtcblxudmFyIGV4cG9ydFJlZ2V4ID0gLyhAZXhwb3J0KVxccyooWzAtOWEtekEtWl9cXC1cXC5dKilcXHMqXFxuKFtcXHNcXFNdKj8pQGVuZC9nO1xuXG4vKipcbiAqIEltcG9ydCBzaGFkZXIgc291cmNlXG4gKiBAcGFyYW0gIHtzdHJpbmd9IHNoYWRlclN0clxuICogQG1lbWJlck9mIGNsYXkuU2hhZGVyXG4gKi9cblNoYWRlclsnaW1wb3J0J10gPSBmdW5jdGlvbiAoc2hhZGVyU3RyKSB7XG4gICAgc2hhZGVyU3RyLnJlcGxhY2UoZXhwb3J0UmVnZXgsIGZ1bmN0aW9uIChzdHIsIGV4cG9ydFN5bWJvbCwgZXhwb3J0TmFtZSwgY29kZSkge1xuICAgICAgICB2YXIgY29kZSA9IGNvZGUucmVwbGFjZSgvKF5bXFxzXFx0XFx4YTBcXHUzMDAwXSspfChbXFx1MzAwMFxceGEwXFxzXFx0XStcXHgyNCkvZywgJycpO1xuICAgICAgICBpZiAoY29kZSkge1xuICAgICAgICAgICAgdmFyIHBhcnRzID0gZXhwb3J0TmFtZS5zcGxpdCgnLicpO1xuICAgICAgICAgICAgdmFyIG9iaiA9IFNoYWRlci5jb2RlcztcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIHZhciBrZXk7XG4gICAgICAgICAgICB3aGlsZSAoaSA8IHBhcnRzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBwYXJ0c1tpKytdO1xuICAgICAgICAgICAgICAgIGlmICghb2JqW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqW2tleV0gPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2JqID0gb2JqW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBrZXkgPSBwYXJ0c1tpXTtcbiAgICAgICAgICAgIG9ialtrZXldID0gY29kZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29kZTtcbiAgICB9KTtcbn07XG5cbi8qKlxuICogTGlicmFyeSB0byBzdG9yZSBhbGwgdGhlIGxvYWRlZCBzaGFkZXIgY29kZXNcbiAqIEB0eXBlIHtPYmplY3R9XG4gKiBAcmVhZE9ubHlcbiAqIEBtZW1iZXJPZiBjbGF5LlNoYWRlclxuICovXG5TaGFkZXIuY29kZXMgPSB7fTtcblxuLyoqXG4gKiBHZXQgc2hhZGVyIHNvdXJjZVxuICogQHBhcmFtICB7c3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cblNoYWRlci5zb3VyY2UgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHZhciBwYXJ0cyA9IG5hbWUuc3BsaXQoJy4nKTtcbiAgICB2YXIgb2JqID0gU2hhZGVyLmNvZGVzO1xuICAgIHZhciBpID0gMDtcbiAgICB3aGlsZSAob2JqICYmIGkgPCBwYXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IHBhcnRzW2krK107XG4gICAgICAgIG9iaiA9IG9ialtrZXldO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy8gRklYTUUgVXNlIGRlZmF1bHQgaW5zdGVhZFxuICAgICAgICBjb25zb2xlLmVycm9yKCdTaGFkZXIgXCInICsgbmFtZSArICdcIiBub3QgZXhpc3RlZCBpbiBsaWJyYXJ5Jyk7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNoYWRlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvU2hhZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_Cache__ = __webpack_require__(33);\n/**\n * Base class for all textures like compressed texture, texture2d, texturecube\n * TODO mapping\n */\n\n\n\n\n/**\n * @constructor\n * @alias clay.Texture\n * @extends clay.core.Base\n */\nvar Texture = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend( /** @lends clay.Texture# */ {\n    /**\n     * Texture width, readonly when the texture source is image\n     * @type {number}\n     */\n    width: 512,\n    /**\n     * Texture height, readonly when the texture source is image\n     * @type {number}\n     */\n    height: 512,\n    /**\n     * Texel data type.\n     * Possible values:\n     *  + {@link clay.Texture.UNSIGNED_BYTE}\n     *  + {@link clay.Texture.HALF_FLOAT}\n     *  + {@link clay.Texture.FLOAT}\n     *  + {@link clay.Texture.UNSIGNED_INT_24_8_WEBGL}\n     *  + {@link clay.Texture.UNSIGNED_INT}\n     * @type {number}\n     */\n    type: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].UNSIGNED_BYTE,\n    /**\n     * Format of texel data\n     * Possible values:\n     *  + {@link clay.Texture.RGBA}\n     *  + {@link clay.Texture.DEPTH_COMPONENT}\n     *  + {@link clay.Texture.DEPTH_STENCIL}\n     * @type {number}\n     */\n    format: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].RGBA,\n    /**\n     * Texture wrap. Default to be REPEAT.\n     * Possible values:\n     *  + {@link clay.Texture.CLAMP_TO_EDGE}\n     *  + {@link clay.Texture.REPEAT}\n     *  + {@link clay.Texture.MIRRORED_REPEAT}\n     * @type {number}\n     */\n    wrapS: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].REPEAT,\n    /**\n     * Texture wrap. Default to be REPEAT.\n     * Possible values:\n     *  + {@link clay.Texture.CLAMP_TO_EDGE}\n     *  + {@link clay.Texture.REPEAT}\n     *  + {@link clay.Texture.MIRRORED_REPEAT}\n     * @type {number}\n     */\n    wrapT: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].REPEAT,\n    /**\n     * Possible values:\n     *  + {@link clay.Texture.NEAREST}\n     *  + {@link clay.Texture.LINEAR}\n     *  + {@link clay.Texture.NEAREST_MIPMAP_NEAREST}\n     *  + {@link clay.Texture.LINEAR_MIPMAP_NEAREST}\n     *  + {@link clay.Texture.NEAREST_MIPMAP_LINEAR}\n     *  + {@link clay.Texture.LINEAR_MIPMAP_LINEAR}\n     * @type {number}\n     */\n    minFilter: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_LINEAR,\n    /**\n     * Possible values:\n     *  + {@link clay.Texture.NEAREST}\n     *  + {@link clay.Texture.LINEAR}\n     * @type {number}\n     */\n    magFilter: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR,\n    /**\n     * If enable mimap.\n     * @type {boolean}\n     */\n    useMipmap: true,\n\n    /**\n     * Anisotropic filtering, enabled if value is larger than 1\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EXT_texture_filter_anisotropic\n     * @type {number}\n     */\n    anisotropic: 1,\n    // pixelStorei parameters, not available when texture is used as render target\n    // http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml\n    /**\n     * If flip in y axis for given image source\n     * @type {boolean}\n     * @default true\n     */\n    flipY: true,\n\n    /**\n     * A flag to indicate if texture source is sRGB\n     */\n    sRGB: true,\n    /**\n     * @type {number}\n     * @default 4\n     */\n    unpackAlignment: 4,\n    /**\n     * @type {boolean}\n     * @default false\n     */\n    premultiplyAlpha: false,\n\n    /**\n     * Dynamic option for texture like video\n     * @type {boolean}\n     */\n    dynamic: false,\n\n    NPOT: false,\n\n    // PENDING\n    // Init it here to avoid deoptimization when it's assigned in application dynamically\n    __used: 0\n\n}, function () {\n    this._cache = new __WEBPACK_IMPORTED_MODULE_2__core_Cache__[\"a\" /* default */]();\n},\n/** @lends clay.Texture.prototype */\n{\n\n    getWebGLTexture: function (renderer) {\n        var _gl = renderer.gl;\n        var cache = this._cache;\n        cache.use(renderer.__uid__);\n\n        if (cache.miss('webgl_texture')) {\n            // In a new gl context, create new texture and set dirty true\n            cache.put('webgl_texture', _gl.createTexture());\n        }\n        if (this.dynamic) {\n            this.update(renderer);\n        }\n        else if (cache.isDirty()) {\n            this.update(renderer);\n            cache.fresh();\n        }\n\n        return cache.get('webgl_texture');\n    },\n\n    bind: function () {},\n    unbind: function () {},\n\n    /**\n     * Mark texture is dirty and update in the next frame\n     */\n    dirty: function () {\n        if (this._cache) {\n            this._cache.dirtyAll();\n        }\n    },\n\n    update: function (renderer) {},\n\n    // Update the common parameters of texture\n    updateCommon: function (renderer) {\n        var _gl = renderer.gl;\n        _gl.pixelStorei(_gl.UNPACK_FLIP_Y_WEBGL, this.flipY);\n        _gl.pixelStorei(_gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha);\n        _gl.pixelStorei(_gl.UNPACK_ALIGNMENT, this.unpackAlignment);\n\n        // Use of none-power of two texture\n        // http://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences\n        if (this.format === __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].DEPTH_COMPONENT) {\n            this.useMipmap = false;\n        }\n\n        var sRGBExt = renderer.getGLExtension('EXT_sRGB');\n        // Fallback\n        if (this.format === Texture.SRGB && !sRGBExt) {\n            this.format = Texture.RGB;\n        }\n        if (this.format === Texture.SRGB_ALPHA && !sRGBExt) {\n            this.format = Texture.RGBA;\n        }\n\n        this.NPOT = !this.isPowerOfTwo();\n    },\n\n    getAvailableWrapS: function () {\n        if (this.NPOT) {\n            return __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CLAMP_TO_EDGE;\n        }\n        return this.wrapS;\n    },\n    getAvailableWrapT: function () {\n        if (this.NPOT) {\n            return __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CLAMP_TO_EDGE;\n        }\n        return this.wrapT;\n    },\n    getAvailableMinFilter: function () {\n        var minFilter = this.minFilter;\n        if (this.NPOT || !this.useMipmap) {\n            if (minFilter === __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST_MIPMAP_NEAREST ||\n                minFilter === __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST_MIPMAP_LINEAR\n            ) {\n                return __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST;\n            }\n            else if (minFilter === __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_LINEAR ||\n                minFilter === __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_NEAREST\n            ) {\n                return __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR;\n            }\n            else {\n                return minFilter;\n            }\n        }\n        else {\n            return minFilter;\n        }\n    },\n    getAvailableMagFilter: function () {\n        return this.magFilter;\n    },\n\n    nextHighestPowerOfTwo: function (x) {\n        --x;\n        for (var i = 1; i < 32; i <<= 1) {\n            x = x | x >> i;\n        }\n        return x + 1;\n    },\n    /**\n     * @param  {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n\n        var cache = this._cache;\n\n        cache.use(renderer.__uid__);\n\n        var webglTexture = cache.get('webgl_texture');\n        if (webglTexture){\n            renderer.gl.deleteTexture(webglTexture);\n        }\n        cache.deleteContext(renderer.__uid__);\n\n    },\n    /**\n     * Test if image of texture is valid and loaded.\n     * @return {boolean}\n     */\n    isRenderable: function () {},\n\n    /**\n     * Test if texture size is power of two\n     * @return {boolean}\n     */\n    isPowerOfTwo: function () {}\n});\n\nObject.defineProperty(Texture.prototype, 'width', {\n    get: function () {\n        return this._width;\n    },\n    set: function (value) {\n        this._width = value;\n    }\n});\nObject.defineProperty(Texture.prototype, 'height', {\n    get: function () {\n        return this._height;\n    },\n    set: function (value) {\n        this._height = value;\n    }\n});\n\n/* DataType */\n\n/**\n * @type {number}\n */\nTexture.BYTE = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].BYTE;\n/**\n * @type {number}\n */\nTexture.UNSIGNED_BYTE = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].UNSIGNED_BYTE;\n/**\n * @type {number}\n */\nTexture.SHORT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].SHORT;\n/**\n * @type {number}\n */\nTexture.UNSIGNED_SHORT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].UNSIGNED_SHORT;\n/**\n * @type {number}\n */\nTexture.INT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].INT;\n/**\n * @type {number}\n */\nTexture.UNSIGNED_INT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].UNSIGNED_INT;\n/**\n * @type {number}\n */\nTexture.FLOAT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].FLOAT;\n/**\n * @type {number}\n */\nTexture.HALF_FLOAT = 0x8D61;\n\n/**\n * UNSIGNED_INT_24_8_WEBGL for WEBGL_depth_texture extension\n * @type {number}\n */\nTexture.UNSIGNED_INT_24_8_WEBGL = 34042;\n\n/* PixelFormat */\n/**\n * @type {number}\n */\nTexture.DEPTH_COMPONENT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].DEPTH_COMPONENT;\n/**\n * @type {number}\n */\nTexture.DEPTH_STENCIL = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].DEPTH_STENCIL;\n/**\n * @type {number}\n */\nTexture.ALPHA = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].ALPHA;\n/**\n * @type {number}\n */\nTexture.RGB = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].RGB;\n/**\n * @type {number}\n */\nTexture.RGBA = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].RGBA;\n/**\n * @type {number}\n */\nTexture.LUMINANCE = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LUMINANCE;\n/**\n * @type {number}\n */\nTexture.LUMINANCE_ALPHA = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LUMINANCE_ALPHA;\n\n/**\n * @see https://www.khronos.org/registry/webgl/extensions/EXT_sRGB/\n * @type {number}\n */\nTexture.SRGB = 0x8C40;\n/**\n * @see https://www.khronos.org/registry/webgl/extensions/EXT_sRGB/\n * @type {number}\n */\nTexture.SRGB_ALPHA = 0x8C42;\n\n/* Compressed Texture */\n// https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL_API/Constants\n// s3tc\nTexture.COMPRESSED_RGB_S3TC_DXT1_EXT = 0x83F0;\nTexture.COMPRESSED_RGBA_S3TC_DXT1_EXT = 0x83F1;\nTexture.COMPRESSED_RGBA_S3TC_DXT3_EXT = 0x83F2;\nTexture.COMPRESSED_RGBA_S3TC_DXT5_EXT = 0x83F3;\n\n// etc\nTexture.COMPRESSED_RGB_ETC1_WEBGL = 0x8D64;\n\n// pvrtc\nTexture.COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 0x8C00;\nTexture.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 0x8C02;\nTexture.COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 0x8C01;\nTexture.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 0x8C03;\n\n// atc\nTexture.COMPRESSED_RGB_ATC_WEBGL = 0x8C92;\nTexture.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 0x8C93;\nTexture.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 0x87EE;\n\n/* TextureMagFilter */\n/**\n * @type {number}\n */\nTexture.NEAREST = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST;\n/**\n * @type {number}\n */\nTexture.LINEAR = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR;\n\n/* TextureMinFilter */\n/**\n * @type {number}\n */\nTexture.NEAREST_MIPMAP_NEAREST = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST_MIPMAP_NEAREST;\n/**\n * @type {number}\n */\nTexture.LINEAR_MIPMAP_NEAREST = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_NEAREST;\n/**\n * @type {number}\n */\nTexture.NEAREST_MIPMAP_LINEAR = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST_MIPMAP_LINEAR;\n/**\n * @type {number}\n */\nTexture.LINEAR_MIPMAP_LINEAR = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_LINEAR;\n\n/* TextureWrapMode */\n/**\n * @type {number}\n */\nTexture.REPEAT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].REPEAT;\n/**\n * @type {number}\n */\nTexture.CLAMP_TO_EDGE = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CLAMP_TO_EDGE;\n/**\n * @type {number}\n */\nTexture.MIRRORED_REPEAT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].MIRRORED_REPEAT;\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Texture);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL1RleHR1cmUuanM/NzU2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCB0ZXh0dXJlcyBsaWtlIGNvbXByZXNzZWQgdGV4dHVyZSwgdGV4dHVyZTJkLCB0ZXh0dXJlY3ViZVxuICogVE9ETyBtYXBwaW5nXG4gKi9cbmltcG9ydCBCYXNlIGZyb20gJy4vY29yZS9CYXNlJztcbmltcG9ydCBnbGVudW0gZnJvbSAnLi9jb3JlL2dsZW51bSc7XG5pbXBvcnQgQ2FjaGUgZnJvbSAnLi9jb3JlL0NhY2hlJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LlRleHR1cmVcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKi9cbnZhciBUZXh0dXJlID0gQmFzZS5leHRlbmQoIC8qKiBAbGVuZHMgY2xheS5UZXh0dXJlIyAqLyB7XG4gICAgLyoqXG4gICAgICogVGV4dHVyZSB3aWR0aCwgcmVhZG9ubHkgd2hlbiB0aGUgdGV4dHVyZSBzb3VyY2UgaXMgaW1hZ2VcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHdpZHRoOiA1MTIsXG4gICAgLyoqXG4gICAgICogVGV4dHVyZSBoZWlnaHQsIHJlYWRvbmx5IHdoZW4gdGhlIHRleHR1cmUgc291cmNlIGlzIGltYWdlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBoZWlnaHQ6IDUxMixcbiAgICAvKipcbiAgICAgKiBUZXhlbCBkYXRhIHR5cGUuXG4gICAgICogUG9zc2libGUgdmFsdWVzOlxuICAgICAqICArIHtAbGluayBjbGF5LlRleHR1cmUuVU5TSUdORURfQllURX1cbiAgICAgKiAgKyB7QGxpbmsgY2xheS5UZXh0dXJlLkhBTEZfRkxPQVR9XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5GTE9BVH1cbiAgICAgKiAgKyB7QGxpbmsgY2xheS5UZXh0dXJlLlVOU0lHTkVEX0lOVF8yNF84X1dFQkdMfVxuICAgICAqICArIHtAbGluayBjbGF5LlRleHR1cmUuVU5TSUdORURfSU5UfVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdHlwZTogZ2xlbnVtLlVOU0lHTkVEX0JZVEUsXG4gICAgLyoqXG4gICAgICogRm9ybWF0IG9mIHRleGVsIGRhdGFcbiAgICAgKiBQb3NzaWJsZSB2YWx1ZXM6XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5SR0JBfVxuICAgICAqICArIHtAbGluayBjbGF5LlRleHR1cmUuREVQVEhfQ09NUE9ORU5UfVxuICAgICAqICArIHtAbGluayBjbGF5LlRleHR1cmUuREVQVEhfU1RFTkNJTH1cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGZvcm1hdDogZ2xlbnVtLlJHQkEsXG4gICAgLyoqXG4gICAgICogVGV4dHVyZSB3cmFwLiBEZWZhdWx0IHRvIGJlIFJFUEVBVC5cbiAgICAgKiBQb3NzaWJsZSB2YWx1ZXM6XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5DTEFNUF9UT19FREdFfVxuICAgICAqICArIHtAbGluayBjbGF5LlRleHR1cmUuUkVQRUFUfVxuICAgICAqICArIHtAbGluayBjbGF5LlRleHR1cmUuTUlSUk9SRURfUkVQRUFUfVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgd3JhcFM6IGdsZW51bS5SRVBFQVQsXG4gICAgLyoqXG4gICAgICogVGV4dHVyZSB3cmFwLiBEZWZhdWx0IHRvIGJlIFJFUEVBVC5cbiAgICAgKiBQb3NzaWJsZSB2YWx1ZXM6XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5DTEFNUF9UT19FREdFfVxuICAgICAqICArIHtAbGluayBjbGF5LlRleHR1cmUuUkVQRUFUfVxuICAgICAqICArIHtAbGluayBjbGF5LlRleHR1cmUuTUlSUk9SRURfUkVQRUFUfVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgd3JhcFQ6IGdsZW51bS5SRVBFQVQsXG4gICAgLyoqXG4gICAgICogUG9zc2libGUgdmFsdWVzOlxuICAgICAqICArIHtAbGluayBjbGF5LlRleHR1cmUuTkVBUkVTVH1cbiAgICAgKiAgKyB7QGxpbmsgY2xheS5UZXh0dXJlLkxJTkVBUn1cbiAgICAgKiAgKyB7QGxpbmsgY2xheS5UZXh0dXJlLk5FQVJFU1RfTUlQTUFQX05FQVJFU1R9XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5MSU5FQVJfTUlQTUFQX05FQVJFU1R9XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5ORUFSRVNUX01JUE1BUF9MSU5FQVJ9XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5MSU5FQVJfTUlQTUFQX0xJTkVBUn1cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIG1pbkZpbHRlcjogZ2xlbnVtLkxJTkVBUl9NSVBNQVBfTElORUFSLFxuICAgIC8qKlxuICAgICAqIFBvc3NpYmxlIHZhbHVlczpcbiAgICAgKiAgKyB7QGxpbmsgY2xheS5UZXh0dXJlLk5FQVJFU1R9XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5MSU5FQVJ9XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBtYWdGaWx0ZXI6IGdsZW51bS5MSU5FQVIsXG4gICAgLyoqXG4gICAgICogSWYgZW5hYmxlIG1pbWFwLlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHVzZU1pcG1hcDogdHJ1ZSxcblxuICAgIC8qKlxuICAgICAqIEFuaXNvdHJvcGljIGZpbHRlcmluZywgZW5hYmxlZCBpZiB2YWx1ZSBpcyBsYXJnZXIgdGhhbiAxXG4gICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBhbmlzb3Ryb3BpYzogMSxcbiAgICAvLyBwaXhlbFN0b3JlaSBwYXJhbWV0ZXJzLCBub3QgYXZhaWxhYmxlIHdoZW4gdGV4dHVyZSBpcyB1c2VkIGFzIHJlbmRlciB0YXJnZXRcbiAgICAvLyBodHRwOi8vd3d3Lmtocm9ub3Mub3JnL29wZW5nbGVzL3Nkay9kb2NzL21hbi94aHRtbC9nbFBpeGVsU3RvcmVpLnhtbFxuICAgIC8qKlxuICAgICAqIElmIGZsaXAgaW4geSBheGlzIGZvciBnaXZlbiBpbWFnZSBzb3VyY2VcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAZGVmYXVsdCB0cnVlXG4gICAgICovXG4gICAgZmxpcFk6IHRydWUsXG5cbiAgICAvKipcbiAgICAgKiBBIGZsYWcgdG8gaW5kaWNhdGUgaWYgdGV4dHVyZSBzb3VyY2UgaXMgc1JHQlxuICAgICAqL1xuICAgIHNSR0I6IHRydWUsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAZGVmYXVsdCA0XG4gICAgICovXG4gICAgdW5wYWNrQWxpZ25tZW50OiA0LFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgcHJlbXVsdGlwbHlBbHBoYTogZmFsc2UsXG5cbiAgICAvKipcbiAgICAgKiBEeW5hbWljIG9wdGlvbiBmb3IgdGV4dHVyZSBsaWtlIHZpZGVvXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgZHluYW1pYzogZmFsc2UsXG5cbiAgICBOUE9UOiBmYWxzZSxcblxuICAgIC8vIFBFTkRJTkdcbiAgICAvLyBJbml0IGl0IGhlcmUgdG8gYXZvaWQgZGVvcHRpbWl6YXRpb24gd2hlbiBpdCdzIGFzc2lnbmVkIGluIGFwcGxpY2F0aW9uIGR5bmFtaWNhbGx5XG4gICAgX191c2VkOiAwXG5cbn0sIGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9jYWNoZSA9IG5ldyBDYWNoZSgpO1xufSxcbi8qKiBAbGVuZHMgY2xheS5UZXh0dXJlLnByb3RvdHlwZSAqL1xue1xuXG4gICAgZ2V0V2ViR0xUZXh0dXJlOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLl9jYWNoZTtcbiAgICAgICAgY2FjaGUudXNlKHJlbmRlcmVyLl9fdWlkX18pO1xuXG4gICAgICAgIGlmIChjYWNoZS5taXNzKCd3ZWJnbF90ZXh0dXJlJykpIHtcbiAgICAgICAgICAgIC8vIEluIGEgbmV3IGdsIGNvbnRleHQsIGNyZWF0ZSBuZXcgdGV4dHVyZSBhbmQgc2V0IGRpcnR5IHRydWVcbiAgICAgICAgICAgIGNhY2hlLnB1dCgnd2ViZ2xfdGV4dHVyZScsIF9nbC5jcmVhdGVUZXh0dXJlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmR5bmFtaWMpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHJlbmRlcmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjYWNoZS5pc0RpcnR5KCkpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHJlbmRlcmVyKTtcbiAgICAgICAgICAgIGNhY2hlLmZyZXNoKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2FjaGUuZ2V0KCd3ZWJnbF90ZXh0dXJlJyk7XG4gICAgfSxcblxuICAgIGJpbmQ6IGZ1bmN0aW9uICgpIHt9LFxuICAgIHVuYmluZDogZnVuY3Rpb24gKCkge30sXG5cbiAgICAvKipcbiAgICAgKiBNYXJrIHRleHR1cmUgaXMgZGlydHkgYW5kIHVwZGF0ZSBpbiB0aGUgbmV4dCBmcmFtZVxuICAgICAqL1xuICAgIGRpcnR5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUuZGlydHlBbGwoKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB1cGRhdGU6IGZ1bmN0aW9uIChyZW5kZXJlcikge30sXG5cbiAgICAvLyBVcGRhdGUgdGhlIGNvbW1vbiBwYXJhbWV0ZXJzIG9mIHRleHR1cmVcbiAgICB1cGRhdGVDb21tb246IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgIF9nbC5waXhlbFN0b3JlaShfZ2wuVU5QQUNLX0ZMSVBfWV9XRUJHTCwgdGhpcy5mbGlwWSk7XG4gICAgICAgIF9nbC5waXhlbFN0b3JlaShfZ2wuVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMLCB0aGlzLnByZW11bHRpcGx5QWxwaGEpO1xuICAgICAgICBfZ2wucGl4ZWxTdG9yZWkoX2dsLlVOUEFDS19BTElHTk1FTlQsIHRoaXMudW5wYWNrQWxpZ25tZW50KTtcblxuICAgICAgICAvLyBVc2Ugb2Ygbm9uZS1wb3dlciBvZiB0d28gdGV4dHVyZVxuICAgICAgICAvLyBodHRwOi8vd3d3Lmtocm9ub3Mub3JnL3dlYmdsL3dpa2kvV2ViR0xfYW5kX09wZW5HTF9EaWZmZXJlbmNlc1xuICAgICAgICBpZiAodGhpcy5mb3JtYXQgPT09IGdsZW51bS5ERVBUSF9DT01QT05FTlQpIHtcbiAgICAgICAgICAgIHRoaXMudXNlTWlwbWFwID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc1JHQkV4dCA9IHJlbmRlcmVyLmdldEdMRXh0ZW5zaW9uKCdFWFRfc1JHQicpO1xuICAgICAgICAvLyBGYWxsYmFja1xuICAgICAgICBpZiAodGhpcy5mb3JtYXQgPT09IFRleHR1cmUuU1JHQiAmJiAhc1JHQkV4dCkge1xuICAgICAgICAgICAgdGhpcy5mb3JtYXQgPSBUZXh0dXJlLlJHQjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mb3JtYXQgPT09IFRleHR1cmUuU1JHQl9BTFBIQSAmJiAhc1JHQkV4dCkge1xuICAgICAgICAgICAgdGhpcy5mb3JtYXQgPSBUZXh0dXJlLlJHQkE7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLk5QT1QgPSAhdGhpcy5pc1Bvd2VyT2ZUd28oKTtcbiAgICB9LFxuXG4gICAgZ2V0QXZhaWxhYmxlV3JhcFM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuTlBPVCkge1xuICAgICAgICAgICAgcmV0dXJuIGdsZW51bS5DTEFNUF9UT19FREdFO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBTO1xuICAgIH0sXG4gICAgZ2V0QXZhaWxhYmxlV3JhcFQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuTlBPVCkge1xuICAgICAgICAgICAgcmV0dXJuIGdsZW51bS5DTEFNUF9UT19FREdFO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBUO1xuICAgIH0sXG4gICAgZ2V0QXZhaWxhYmxlTWluRmlsdGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtaW5GaWx0ZXIgPSB0aGlzLm1pbkZpbHRlcjtcbiAgICAgICAgaWYgKHRoaXMuTlBPVCB8fCAhdGhpcy51c2VNaXBtYXApIHtcbiAgICAgICAgICAgIGlmIChtaW5GaWx0ZXIgPT09IGdsZW51bS5ORUFSRVNUX01JUE1BUF9ORUFSRVNUIHx8XG4gICAgICAgICAgICAgICAgbWluRmlsdGVyID09PSBnbGVudW0uTkVBUkVTVF9NSVBNQVBfTElORUFSXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2xlbnVtLk5FQVJFU1Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtaW5GaWx0ZXIgPT09IGdsZW51bS5MSU5FQVJfTUlQTUFQX0xJTkVBUiB8fFxuICAgICAgICAgICAgICAgIG1pbkZpbHRlciA9PT0gZ2xlbnVtLkxJTkVBUl9NSVBNQVBfTkVBUkVTVFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdsZW51bS5MSU5FQVI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWluRmlsdGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1pbkZpbHRlcjtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZ2V0QXZhaWxhYmxlTWFnRmlsdGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hZ0ZpbHRlcjtcbiAgICB9LFxuXG4gICAgbmV4dEhpZ2hlc3RQb3dlck9mVHdvOiBmdW5jdGlvbiAoeCkge1xuICAgICAgICAtLXg7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgMzI7IGkgPDw9IDEpIHtcbiAgICAgICAgICAgIHggPSB4IHwgeCA+PiBpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB4ICsgMTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICovXG4gICAgZGlzcG9zZTogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG5cbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5fY2FjaGU7XG5cbiAgICAgICAgY2FjaGUudXNlKHJlbmRlcmVyLl9fdWlkX18pO1xuXG4gICAgICAgIHZhciB3ZWJnbFRleHR1cmUgPSBjYWNoZS5nZXQoJ3dlYmdsX3RleHR1cmUnKTtcbiAgICAgICAgaWYgKHdlYmdsVGV4dHVyZSl7XG4gICAgICAgICAgICByZW5kZXJlci5nbC5kZWxldGVUZXh0dXJlKHdlYmdsVGV4dHVyZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2FjaGUuZGVsZXRlQ29udGV4dChyZW5kZXJlci5fX3VpZF9fKTtcblxuICAgIH0sXG4gICAgLyoqXG4gICAgICogVGVzdCBpZiBpbWFnZSBvZiB0ZXh0dXJlIGlzIHZhbGlkIGFuZCBsb2FkZWQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpc1JlbmRlcmFibGU6IGZ1bmN0aW9uICgpIHt9LFxuXG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB0ZXh0dXJlIHNpemUgaXMgcG93ZXIgb2YgdHdvXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpc1Bvd2VyT2ZUd286IGZ1bmN0aW9uICgpIHt9XG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHR1cmUucHJvdG90eXBlLCAnd2lkdGgnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl93aWR0aDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3dpZHRoID0gdmFsdWU7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dHVyZS5wcm90b3R5cGUsICdoZWlnaHQnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9oZWlnaHQgPSB2YWx1ZTtcbiAgICB9XG59KTtcblxuLyogRGF0YVR5cGUgKi9cblxuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLkJZVEUgPSBnbGVudW0uQllURTtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5VTlNJR05FRF9CWVRFID0gZ2xlbnVtLlVOU0lHTkVEX0JZVEU7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuU0hPUlQgPSBnbGVudW0uU0hPUlQ7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuVU5TSUdORURfU0hPUlQgPSBnbGVudW0uVU5TSUdORURfU0hPUlQ7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuSU5UID0gZ2xlbnVtLklOVDtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5VTlNJR05FRF9JTlQgPSBnbGVudW0uVU5TSUdORURfSU5UO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLkZMT0FUID0gZ2xlbnVtLkZMT0FUO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLkhBTEZfRkxPQVQgPSAweDhENjE7XG5cbi8qKlxuICogVU5TSUdORURfSU5UXzI0XzhfV0VCR0wgZm9yIFdFQkdMX2RlcHRoX3RleHR1cmUgZXh0ZW5zaW9uXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLlVOU0lHTkVEX0lOVF8yNF84X1dFQkdMID0gMzQwNDI7XG5cbi8qIFBpeGVsRm9ybWF0ICovXG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuREVQVEhfQ09NUE9ORU5UID0gZ2xlbnVtLkRFUFRIX0NPTVBPTkVOVDtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5ERVBUSF9TVEVOQ0lMID0gZ2xlbnVtLkRFUFRIX1NURU5DSUw7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuQUxQSEEgPSBnbGVudW0uQUxQSEE7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuUkdCID0gZ2xlbnVtLlJHQjtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5SR0JBID0gZ2xlbnVtLlJHQkE7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuTFVNSU5BTkNFID0gZ2xlbnVtLkxVTUlOQU5DRTtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5MVU1JTkFOQ0VfQUxQSEEgPSBnbGVudW0uTFVNSU5BTkNFX0FMUEhBO1xuXG4vKipcbiAqIEBzZWUgaHR0cHM6Ly93d3cua2hyb25vcy5vcmcvcmVnaXN0cnkvd2ViZ2wvZXh0ZW5zaW9ucy9FWFRfc1JHQi9cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuU1JHQiA9IDB4OEM0MDtcbi8qKlxuICogQHNlZSBodHRwczovL3d3dy5raHJvbm9zLm9yZy9yZWdpc3RyeS93ZWJnbC9leHRlbnNpb25zL0VYVF9zUkdCL1xuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5TUkdCX0FMUEhBID0gMHg4QzQyO1xuXG4vKiBDb21wcmVzc2VkIFRleHR1cmUgKi9cbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL3poLUNOL2RvY3MvV2ViL0FQSS9XZWJHTF9BUEkvQ29uc3RhbnRzXG4vLyBzM3RjXG5UZXh0dXJlLkNPTVBSRVNTRURfUkdCX1MzVENfRFhUMV9FWFQgPSAweDgzRjA7XG5UZXh0dXJlLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDFfRVhUID0gMHg4M0YxO1xuVGV4dHVyZS5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQzX0VYVCA9IDB4ODNGMjtcblRleHR1cmUuQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUNV9FWFQgPSAweDgzRjM7XG5cbi8vIGV0Y1xuVGV4dHVyZS5DT01QUkVTU0VEX1JHQl9FVEMxX1dFQkdMID0gMHg4RDY0O1xuXG4vLyBwdnJ0Y1xuVGV4dHVyZS5DT01QUkVTU0VEX1JHQl9QVlJUQ180QlBQVjFfSU1HID0gMHg4QzAwO1xuVGV4dHVyZS5DT01QUkVTU0VEX1JHQkFfUFZSVENfNEJQUFYxX0lNRyA9IDB4OEMwMjtcblRleHR1cmUuQ09NUFJFU1NFRF9SR0JfUFZSVENfMkJQUFYxX0lNRyA9IDB4OEMwMTtcblRleHR1cmUuQ09NUFJFU1NFRF9SR0JBX1BWUlRDXzJCUFBWMV9JTUcgPSAweDhDMDM7XG5cbi8vIGF0Y1xuVGV4dHVyZS5DT01QUkVTU0VEX1JHQl9BVENfV0VCR0wgPSAweDhDOTI7XG5UZXh0dXJlLkNPTVBSRVNTRURfUkdCQV9BVENfRVhQTElDSVRfQUxQSEFfV0VCR0wgPSAweDhDOTM7XG5UZXh0dXJlLkNPTVBSRVNTRURfUkdCQV9BVENfSU5URVJQT0xBVEVEX0FMUEhBX1dFQkdMID0gMHg4N0VFO1xuXG4vKiBUZXh0dXJlTWFnRmlsdGVyICovXG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuTkVBUkVTVCA9IGdsZW51bS5ORUFSRVNUO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLkxJTkVBUiA9IGdsZW51bS5MSU5FQVI7XG5cbi8qIFRleHR1cmVNaW5GaWx0ZXIgKi9cbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5ORUFSRVNUX01JUE1BUF9ORUFSRVNUID0gZ2xlbnVtLk5FQVJFU1RfTUlQTUFQX05FQVJFU1Q7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuTElORUFSX01JUE1BUF9ORUFSRVNUID0gZ2xlbnVtLkxJTkVBUl9NSVBNQVBfTkVBUkVTVDtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5ORUFSRVNUX01JUE1BUF9MSU5FQVIgPSBnbGVudW0uTkVBUkVTVF9NSVBNQVBfTElORUFSO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLkxJTkVBUl9NSVBNQVBfTElORUFSID0gZ2xlbnVtLkxJTkVBUl9NSVBNQVBfTElORUFSO1xuXG4vKiBUZXh0dXJlV3JhcE1vZGUgKi9cbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5SRVBFQVQgPSBnbGVudW0uUkVQRUFUO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLkNMQU1QX1RPX0VER0UgPSBnbGVudW0uQ0xBTVBfVE9fRURHRTtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5NSVJST1JFRF9SRVBFQVQgPSBnbGVudW0uTUlSUk9SRURfUkVQRUFUO1xuXG5cbmV4cG9ydCBkZWZhdWx0IFRleHR1cmU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL1RleHR1cmUuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/**\n * @namespace clay.core.glenum\n * @see http://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    /* ClearBufferMask */\n    DEPTH_BUFFER_BIT               : 0x00000100,\n    STENCIL_BUFFER_BIT             : 0x00000400,\n    COLOR_BUFFER_BIT               : 0x00004000,\n\n    /* BeginMode */\n    POINTS                         : 0x0000,\n    LINES                          : 0x0001,\n    LINE_LOOP                      : 0x0002,\n    LINE_STRIP                     : 0x0003,\n    TRIANGLES                      : 0x0004,\n    TRIANGLE_STRIP                 : 0x0005,\n    TRIANGLE_FAN                   : 0x0006,\n\n    /* AlphaFunction (not supported in ES20) */\n    /*      NEVER */\n    /*      LESS */\n    /*      EQUAL */\n    /*      LEQUAL */\n    /*      GREATER */\n    /*      NOTEQUAL */\n    /*      GEQUAL */\n    /*      ALWAYS */\n\n    /* BlendingFactorDest */\n    ZERO                           : 0,\n    ONE                            : 1,\n    SRC_COLOR                      : 0x0300,\n    ONE_MINUS_SRC_COLOR            : 0x0301,\n    SRC_ALPHA                      : 0x0302,\n    ONE_MINUS_SRC_ALPHA            : 0x0303,\n    DST_ALPHA                      : 0x0304,\n    ONE_MINUS_DST_ALPHA            : 0x0305,\n\n    /* BlendingFactorSrc */\n    /*      ZERO */\n    /*      ONE */\n    DST_COLOR                      : 0x0306,\n    ONE_MINUS_DST_COLOR            : 0x0307,\n    SRC_ALPHA_SATURATE             : 0x0308,\n    /*      SRC_ALPHA */\n    /*      ONE_MINUS_SRC_ALPHA */\n    /*      DST_ALPHA */\n    /*      ONE_MINUS_DST_ALPHA */\n\n    /* BlendEquationSeparate */\n    FUNC_ADD                       : 0x8006,\n    BLEND_EQUATION                 : 0x8009,\n    BLEND_EQUATION_RGB             : 0x8009, /* same as BLEND_EQUATION */\n    BLEND_EQUATION_ALPHA           : 0x883D,\n\n    /* BlendSubtract */\n    FUNC_SUBTRACT                  : 0x800A,\n    FUNC_REVERSE_SUBTRACT          : 0x800B,\n\n    /* Separate Blend Functions */\n    BLEND_DST_RGB                  : 0x80C8,\n    BLEND_SRC_RGB                  : 0x80C9,\n    BLEND_DST_ALPHA                : 0x80CA,\n    BLEND_SRC_ALPHA                : 0x80CB,\n    CONSTANT_COLOR                 : 0x8001,\n    ONE_MINUS_CONSTANT_COLOR       : 0x8002,\n    CONSTANT_ALPHA                 : 0x8003,\n    ONE_MINUS_CONSTANT_ALPHA       : 0x8004,\n    BLEND_COLOR                    : 0x8005,\n\n    /* Buffer Objects */\n    ARRAY_BUFFER                   : 0x8892,\n    ELEMENT_ARRAY_BUFFER           : 0x8893,\n    ARRAY_BUFFER_BINDING           : 0x8894,\n    ELEMENT_ARRAY_BUFFER_BINDING   : 0x8895,\n\n    STREAM_DRAW                    : 0x88E0,\n    STATIC_DRAW                    : 0x88E4,\n    DYNAMIC_DRAW                   : 0x88E8,\n\n    BUFFER_SIZE                    : 0x8764,\n    BUFFER_USAGE                   : 0x8765,\n\n    CURRENT_VERTEX_ATTRIB          : 0x8626,\n\n    /* CullFaceMode */\n    FRONT                          : 0x0404,\n    BACK                           : 0x0405,\n    FRONT_AND_BACK                 : 0x0408,\n\n    /* DepthFunction */\n    /*      NEVER */\n    /*      LESS */\n    /*      EQUAL */\n    /*      LEQUAL */\n    /*      GREATER */\n    /*      NOTEQUAL */\n    /*      GEQUAL */\n    /*      ALWAYS */\n\n    /* EnableCap */\n    /* TEXTURE_2D */\n    CULL_FACE                      : 0x0B44,\n    BLEND                          : 0x0BE2,\n    DITHER                         : 0x0BD0,\n    STENCIL_TEST                   : 0x0B90,\n    DEPTH_TEST                     : 0x0B71,\n    SCISSOR_TEST                   : 0x0C11,\n    POLYGON_OFFSET_FILL            : 0x8037,\n    SAMPLE_ALPHA_TO_COVERAGE       : 0x809E,\n    SAMPLE_COVERAGE                : 0x80A0,\n\n    /* ErrorCode */\n    NO_ERROR                       : 0,\n    INVALID_ENUM                   : 0x0500,\n    INVALID_VALUE                  : 0x0501,\n    INVALID_OPERATION              : 0x0502,\n    OUT_OF_MEMORY                  : 0x0505,\n\n    /* FrontFaceDirection */\n    CW                             : 0x0900,\n    CCW                            : 0x0901,\n\n    /* GetPName */\n    LINE_WIDTH                     : 0x0B21,\n    ALIASED_POINT_SIZE_RANGE       : 0x846D,\n    ALIASED_LINE_WIDTH_RANGE       : 0x846E,\n    CULL_FACE_MODE                 : 0x0B45,\n    FRONT_FACE                     : 0x0B46,\n    DEPTH_RANGE                    : 0x0B70,\n    DEPTH_WRITEMASK                : 0x0B72,\n    DEPTH_CLEAR_VALUE              : 0x0B73,\n    DEPTH_FUNC                     : 0x0B74,\n    STENCIL_CLEAR_VALUE            : 0x0B91,\n    STENCIL_FUNC                   : 0x0B92,\n    STENCIL_FAIL                   : 0x0B94,\n    STENCIL_PASS_DEPTH_FAIL        : 0x0B95,\n    STENCIL_PASS_DEPTH_PASS        : 0x0B96,\n    STENCIL_REF                    : 0x0B97,\n    STENCIL_VALUE_MASK             : 0x0B93,\n    STENCIL_WRITEMASK              : 0x0B98,\n    STENCIL_BACK_FUNC              : 0x8800,\n    STENCIL_BACK_FAIL              : 0x8801,\n    STENCIL_BACK_PASS_DEPTH_FAIL   : 0x8802,\n    STENCIL_BACK_PASS_DEPTH_PASS   : 0x8803,\n    STENCIL_BACK_REF               : 0x8CA3,\n    STENCIL_BACK_VALUE_MASK        : 0x8CA4,\n    STENCIL_BACK_WRITEMASK         : 0x8CA5,\n    VIEWPORT                       : 0x0BA2,\n    SCISSOR_BOX                    : 0x0C10,\n    /*      SCISSOR_TEST */\n    COLOR_CLEAR_VALUE              : 0x0C22,\n    COLOR_WRITEMASK                : 0x0C23,\n    UNPACK_ALIGNMENT               : 0x0CF5,\n    PACK_ALIGNMENT                 : 0x0D05,\n    MAX_TEXTURE_SIZE               : 0x0D33,\n    MAX_VIEWPORT_DIMS              : 0x0D3A,\n    SUBPIXEL_BITS                  : 0x0D50,\n    RED_BITS                       : 0x0D52,\n    GREEN_BITS                     : 0x0D53,\n    BLUE_BITS                      : 0x0D54,\n    ALPHA_BITS                     : 0x0D55,\n    DEPTH_BITS                     : 0x0D56,\n    STENCIL_BITS                   : 0x0D57,\n    POLYGON_OFFSET_UNITS           : 0x2A00,\n    /*      POLYGON_OFFSET_FILL */\n    POLYGON_OFFSET_FACTOR          : 0x8038,\n    TEXTURE_BINDING_2D             : 0x8069,\n    SAMPLE_BUFFERS                 : 0x80A8,\n    SAMPLES                        : 0x80A9,\n    SAMPLE_COVERAGE_VALUE          : 0x80AA,\n    SAMPLE_COVERAGE_INVERT         : 0x80AB,\n\n    /* GetTextureParameter */\n    /*      TEXTURE_MAG_FILTER */\n    /*      TEXTURE_MIN_FILTER */\n    /*      TEXTURE_WRAP_S */\n    /*      TEXTURE_WRAP_T */\n\n    COMPRESSED_TEXTURE_FORMATS     : 0x86A3,\n\n    /* HintMode */\n    DONT_CARE                      : 0x1100,\n    FASTEST                        : 0x1101,\n    NICEST                         : 0x1102,\n\n    /* HintTarget */\n    GENERATE_MIPMAP_HINT            : 0x8192,\n\n    /* DataType */\n    BYTE                           : 0x1400,\n    UNSIGNED_BYTE                  : 0x1401,\n    SHORT                          : 0x1402,\n    UNSIGNED_SHORT                 : 0x1403,\n    INT                            : 0x1404,\n    UNSIGNED_INT                   : 0x1405,\n    FLOAT                          : 0x1406,\n\n    /* PixelFormat */\n    DEPTH_COMPONENT                : 0x1902,\n    ALPHA                          : 0x1906,\n    RGB                            : 0x1907,\n    RGBA                           : 0x1908,\n    LUMINANCE                      : 0x1909,\n    LUMINANCE_ALPHA                : 0x190A,\n\n    /* PixelType */\n    /*      UNSIGNED_BYTE */\n    UNSIGNED_SHORT_4_4_4_4         : 0x8033,\n    UNSIGNED_SHORT_5_5_5_1         : 0x8034,\n    UNSIGNED_SHORT_5_6_5           : 0x8363,\n\n    /* Shaders */\n    FRAGMENT_SHADER                  : 0x8B30,\n    VERTEX_SHADER                    : 0x8B31,\n    MAX_VERTEX_ATTRIBS               : 0x8869,\n    MAX_VERTEX_UNIFORM_VECTORS       : 0x8DFB,\n    MAX_VARYING_VECTORS              : 0x8DFC,\n    MAX_COMBINED_TEXTURE_IMAGE_UNITS : 0x8B4D,\n    MAX_VERTEX_TEXTURE_IMAGE_UNITS   : 0x8B4C,\n    MAX_TEXTURE_IMAGE_UNITS          : 0x8872,\n    MAX_FRAGMENT_UNIFORM_VECTORS     : 0x8DFD,\n    SHADER_TYPE                      : 0x8B4F,\n    DELETE_STATUS                    : 0x8B80,\n    LINK_STATUS                      : 0x8B82,\n    VALIDATE_STATUS                  : 0x8B83,\n    ATTACHED_SHADERS                 : 0x8B85,\n    ACTIVE_UNIFORMS                  : 0x8B86,\n    ACTIVE_ATTRIBUTES                : 0x8B89,\n    SHADING_LANGUAGE_VERSION         : 0x8B8C,\n    CURRENT_PROGRAM                  : 0x8B8D,\n\n    /* StencilFunction */\n    NEVER                          : 0x0200,\n    LESS                           : 0x0201,\n    EQUAL                          : 0x0202,\n    LEQUAL                         : 0x0203,\n    GREATER                        : 0x0204,\n    NOTEQUAL                       : 0x0205,\n    GEQUAL                         : 0x0206,\n    ALWAYS                         : 0x0207,\n\n    /* StencilOp */\n    /*      ZERO */\n    KEEP                           : 0x1E00,\n    REPLACE                        : 0x1E01,\n    INCR                           : 0x1E02,\n    DECR                           : 0x1E03,\n    INVERT                         : 0x150A,\n    INCR_WRAP                      : 0x8507,\n    DECR_WRAP                      : 0x8508,\n\n    /* StringName */\n    VENDOR                         : 0x1F00,\n    RENDERER                       : 0x1F01,\n    VERSION                        : 0x1F02,\n\n    /* TextureMagFilter */\n    NEAREST                        : 0x2600,\n    LINEAR                         : 0x2601,\n\n    /* TextureMinFilter */\n    /*      NEAREST */\n    /*      LINEAR */\n    NEAREST_MIPMAP_NEAREST         : 0x2700,\n    LINEAR_MIPMAP_NEAREST          : 0x2701,\n    NEAREST_MIPMAP_LINEAR          : 0x2702,\n    LINEAR_MIPMAP_LINEAR           : 0x2703,\n\n    /* TextureParameterName */\n    TEXTURE_MAG_FILTER             : 0x2800,\n    TEXTURE_MIN_FILTER             : 0x2801,\n    TEXTURE_WRAP_S                 : 0x2802,\n    TEXTURE_WRAP_T                 : 0x2803,\n\n    /* TextureTarget */\n    TEXTURE_2D                     : 0x0DE1,\n    TEXTURE                        : 0x1702,\n\n    TEXTURE_CUBE_MAP               : 0x8513,\n    TEXTURE_BINDING_CUBE_MAP       : 0x8514,\n    TEXTURE_CUBE_MAP_POSITIVE_X    : 0x8515,\n    TEXTURE_CUBE_MAP_NEGATIVE_X    : 0x8516,\n    TEXTURE_CUBE_MAP_POSITIVE_Y    : 0x8517,\n    TEXTURE_CUBE_MAP_NEGATIVE_Y    : 0x8518,\n    TEXTURE_CUBE_MAP_POSITIVE_Z    : 0x8519,\n    TEXTURE_CUBE_MAP_NEGATIVE_Z    : 0x851A,\n    MAX_CUBE_MAP_TEXTURE_SIZE      : 0x851C,\n\n    /* TextureUnit */\n    TEXTURE0                       : 0x84C0,\n    TEXTURE1                       : 0x84C1,\n    TEXTURE2                       : 0x84C2,\n    TEXTURE3                       : 0x84C3,\n    TEXTURE4                       : 0x84C4,\n    TEXTURE5                       : 0x84C5,\n    TEXTURE6                       : 0x84C6,\n    TEXTURE7                       : 0x84C7,\n    TEXTURE8                       : 0x84C8,\n    TEXTURE9                       : 0x84C9,\n    TEXTURE10                      : 0x84CA,\n    TEXTURE11                      : 0x84CB,\n    TEXTURE12                      : 0x84CC,\n    TEXTURE13                      : 0x84CD,\n    TEXTURE14                      : 0x84CE,\n    TEXTURE15                      : 0x84CF,\n    TEXTURE16                      : 0x84D0,\n    TEXTURE17                      : 0x84D1,\n    TEXTURE18                      : 0x84D2,\n    TEXTURE19                      : 0x84D3,\n    TEXTURE20                      : 0x84D4,\n    TEXTURE21                      : 0x84D5,\n    TEXTURE22                      : 0x84D6,\n    TEXTURE23                      : 0x84D7,\n    TEXTURE24                      : 0x84D8,\n    TEXTURE25                      : 0x84D9,\n    TEXTURE26                      : 0x84DA,\n    TEXTURE27                      : 0x84DB,\n    TEXTURE28                      : 0x84DC,\n    TEXTURE29                      : 0x84DD,\n    TEXTURE30                      : 0x84DE,\n    TEXTURE31                      : 0x84DF,\n    ACTIVE_TEXTURE                 : 0x84E0,\n\n    /* TextureWrapMode */\n    REPEAT                         : 0x2901,\n    CLAMP_TO_EDGE                  : 0x812F,\n    MIRRORED_REPEAT                : 0x8370,\n\n    /* Uniform Types */\n    FLOAT_VEC2                     : 0x8B50,\n    FLOAT_VEC3                     : 0x8B51,\n    FLOAT_VEC4                     : 0x8B52,\n    INT_VEC2                       : 0x8B53,\n    INT_VEC3                       : 0x8B54,\n    INT_VEC4                       : 0x8B55,\n    BOOL                           : 0x8B56,\n    BOOL_VEC2                      : 0x8B57,\n    BOOL_VEC3                      : 0x8B58,\n    BOOL_VEC4                      : 0x8B59,\n    FLOAT_MAT2                     : 0x8B5A,\n    FLOAT_MAT3                     : 0x8B5B,\n    FLOAT_MAT4                     : 0x8B5C,\n    SAMPLER_2D                     : 0x8B5E,\n    SAMPLER_CUBE                   : 0x8B60,\n\n    /* Vertex Arrays */\n    VERTEX_ATTRIB_ARRAY_ENABLED        : 0x8622,\n    VERTEX_ATTRIB_ARRAY_SIZE           : 0x8623,\n    VERTEX_ATTRIB_ARRAY_STRIDE         : 0x8624,\n    VERTEX_ATTRIB_ARRAY_TYPE           : 0x8625,\n    VERTEX_ATTRIB_ARRAY_NORMALIZED     : 0x886A,\n    VERTEX_ATTRIB_ARRAY_POINTER        : 0x8645,\n    VERTEX_ATTRIB_ARRAY_BUFFER_BINDING : 0x889F,\n\n    /* Shader Source */\n    COMPILE_STATUS                 : 0x8B81,\n\n    /* Shader Precision-Specified Types */\n    LOW_FLOAT                      : 0x8DF0,\n    MEDIUM_FLOAT                   : 0x8DF1,\n    HIGH_FLOAT                     : 0x8DF2,\n    LOW_INT                        : 0x8DF3,\n    MEDIUM_INT                     : 0x8DF4,\n    HIGH_INT                       : 0x8DF5,\n\n    /* Framebuffer Object. */\n    FRAMEBUFFER                    : 0x8D40,\n    RENDERBUFFER                   : 0x8D41,\n\n    RGBA4                          : 0x8056,\n    RGB5_A1                        : 0x8057,\n    RGB565                         : 0x8D62,\n    DEPTH_COMPONENT16              : 0x81A5,\n    STENCIL_INDEX                  : 0x1901,\n    STENCIL_INDEX8                 : 0x8D48,\n    DEPTH_STENCIL                  : 0x84F9,\n\n    RENDERBUFFER_WIDTH             : 0x8D42,\n    RENDERBUFFER_HEIGHT            : 0x8D43,\n    RENDERBUFFER_INTERNAL_FORMAT   : 0x8D44,\n    RENDERBUFFER_RED_SIZE          : 0x8D50,\n    RENDERBUFFER_GREEN_SIZE        : 0x8D51,\n    RENDERBUFFER_BLUE_SIZE         : 0x8D52,\n    RENDERBUFFER_ALPHA_SIZE        : 0x8D53,\n    RENDERBUFFER_DEPTH_SIZE        : 0x8D54,\n    RENDERBUFFER_STENCIL_SIZE      : 0x8D55,\n\n    FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE           : 0x8CD0,\n    FRAMEBUFFER_ATTACHMENT_OBJECT_NAME           : 0x8CD1,\n    FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL         : 0x8CD2,\n    FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE : 0x8CD3,\n\n    COLOR_ATTACHMENT0              : 0x8CE0,\n    DEPTH_ATTACHMENT               : 0x8D00,\n    STENCIL_ATTACHMENT             : 0x8D20,\n    DEPTH_STENCIL_ATTACHMENT       : 0x821A,\n\n    NONE                           : 0,\n\n    FRAMEBUFFER_COMPLETE                      : 0x8CD5,\n    FRAMEBUFFER_INCOMPLETE_ATTACHMENT         : 0x8CD6,\n    FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT : 0x8CD7,\n    FRAMEBUFFER_INCOMPLETE_DIMENSIONS         : 0x8CD9,\n    FRAMEBUFFER_UNSUPPORTED                   : 0x8CDD,\n\n    FRAMEBUFFER_BINDING            : 0x8CA6,\n    RENDERBUFFER_BINDING           : 0x8CA7,\n    MAX_RENDERBUFFER_SIZE          : 0x84E8,\n\n    INVALID_FRAMEBUFFER_OPERATION  : 0x0506,\n\n    /* WebGL-specific enums */\n    UNPACK_FLIP_Y_WEBGL            : 0x9240,\n    UNPACK_PREMULTIPLY_ALPHA_WEBGL : 0x9241,\n    CONTEXT_LOST_WEBGL             : 0x9242,\n    UNPACK_COLORSPACE_CONVERSION_WEBGL : 0x9243,\n    BROWSER_DEFAULT_WEBGL          : 0x9244,\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2NvcmUvZ2xlbnVtLmpzPzRjYjUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbmFtZXNwYWNlIGNsYXkuY29yZS5nbGVudW1cbiAqIEBzZWUgaHR0cDovL3d3dy5raHJvbm9zLm9yZy9yZWdpc3RyeS93ZWJnbC9zcGVjcy9sYXRlc3QvMS4wLyM1LjE0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKiBDbGVhckJ1ZmZlck1hc2sgKi9cbiAgICBERVBUSF9CVUZGRVJfQklUICAgICAgICAgICAgICAgOiAweDAwMDAwMTAwLFxuICAgIFNURU5DSUxfQlVGRkVSX0JJVCAgICAgICAgICAgICA6IDB4MDAwMDA0MDAsXG4gICAgQ09MT1JfQlVGRkVSX0JJVCAgICAgICAgICAgICAgIDogMHgwMDAwNDAwMCxcblxuICAgIC8qIEJlZ2luTW9kZSAqL1xuICAgIFBPSU5UUyAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MDAwMCxcbiAgICBMSU5FUyAgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDAwMDEsXG4gICAgTElORV9MT09QICAgICAgICAgICAgICAgICAgICAgIDogMHgwMDAyLFxuICAgIExJTkVfU1RSSVAgICAgICAgICAgICAgICAgICAgICA6IDB4MDAwMyxcbiAgICBUUklBTkdMRVMgICAgICAgICAgICAgICAgICAgICAgOiAweDAwMDQsXG4gICAgVFJJQU5HTEVfU1RSSVAgICAgICAgICAgICAgICAgIDogMHgwMDA1LFxuICAgIFRSSUFOR0xFX0ZBTiAgICAgICAgICAgICAgICAgICA6IDB4MDAwNixcblxuICAgIC8qIEFscGhhRnVuY3Rpb24gKG5vdCBzdXBwb3J0ZWQgaW4gRVMyMCkgKi9cbiAgICAvKiAgICAgIE5FVkVSICovXG4gICAgLyogICAgICBMRVNTICovXG4gICAgLyogICAgICBFUVVBTCAqL1xuICAgIC8qICAgICAgTEVRVUFMICovXG4gICAgLyogICAgICBHUkVBVEVSICovXG4gICAgLyogICAgICBOT1RFUVVBTCAqL1xuICAgIC8qICAgICAgR0VRVUFMICovXG4gICAgLyogICAgICBBTFdBWVMgKi9cblxuICAgIC8qIEJsZW5kaW5nRmFjdG9yRGVzdCAqL1xuICAgIFpFUk8gICAgICAgICAgICAgICAgICAgICAgICAgICA6IDAsXG4gICAgT05FICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMSxcbiAgICBTUkNfQ09MT1IgICAgICAgICAgICAgICAgICAgICAgOiAweDAzMDAsXG4gICAgT05FX01JTlVTX1NSQ19DT0xPUiAgICAgICAgICAgIDogMHgwMzAxLFxuICAgIFNSQ19BTFBIQSAgICAgICAgICAgICAgICAgICAgICA6IDB4MDMwMixcbiAgICBPTkVfTUlOVVNfU1JDX0FMUEhBICAgICAgICAgICAgOiAweDAzMDMsXG4gICAgRFNUX0FMUEhBICAgICAgICAgICAgICAgICAgICAgIDogMHgwMzA0LFxuICAgIE9ORV9NSU5VU19EU1RfQUxQSEEgICAgICAgICAgICA6IDB4MDMwNSxcblxuICAgIC8qIEJsZW5kaW5nRmFjdG9yU3JjICovXG4gICAgLyogICAgICBaRVJPICovXG4gICAgLyogICAgICBPTkUgKi9cbiAgICBEU1RfQ09MT1IgICAgICAgICAgICAgICAgICAgICAgOiAweDAzMDYsXG4gICAgT05FX01JTlVTX0RTVF9DT0xPUiAgICAgICAgICAgIDogMHgwMzA3LFxuICAgIFNSQ19BTFBIQV9TQVRVUkFURSAgICAgICAgICAgICA6IDB4MDMwOCxcbiAgICAvKiAgICAgIFNSQ19BTFBIQSAqL1xuICAgIC8qICAgICAgT05FX01JTlVTX1NSQ19BTFBIQSAqL1xuICAgIC8qICAgICAgRFNUX0FMUEhBICovXG4gICAgLyogICAgICBPTkVfTUlOVVNfRFNUX0FMUEhBICovXG5cbiAgICAvKiBCbGVuZEVxdWF0aW9uU2VwYXJhdGUgKi9cbiAgICBGVU5DX0FERCAgICAgICAgICAgICAgICAgICAgICAgOiAweDgwMDYsXG4gICAgQkxFTkRfRVFVQVRJT04gICAgICAgICAgICAgICAgIDogMHg4MDA5LFxuICAgIEJMRU5EX0VRVUFUSU9OX1JHQiAgICAgICAgICAgICA6IDB4ODAwOSwgLyogc2FtZSBhcyBCTEVORF9FUVVBVElPTiAqL1xuICAgIEJMRU5EX0VRVUFUSU9OX0FMUEhBICAgICAgICAgICA6IDB4ODgzRCxcblxuICAgIC8qIEJsZW5kU3VidHJhY3QgKi9cbiAgICBGVU5DX1NVQlRSQUNUICAgICAgICAgICAgICAgICAgOiAweDgwMEEsXG4gICAgRlVOQ19SRVZFUlNFX1NVQlRSQUNUICAgICAgICAgIDogMHg4MDBCLFxuXG4gICAgLyogU2VwYXJhdGUgQmxlbmQgRnVuY3Rpb25zICovXG4gICAgQkxFTkRfRFNUX1JHQiAgICAgICAgICAgICAgICAgIDogMHg4MEM4LFxuICAgIEJMRU5EX1NSQ19SR0IgICAgICAgICAgICAgICAgICA6IDB4ODBDOSxcbiAgICBCTEVORF9EU1RfQUxQSEEgICAgICAgICAgICAgICAgOiAweDgwQ0EsXG4gICAgQkxFTkRfU1JDX0FMUEhBICAgICAgICAgICAgICAgIDogMHg4MENCLFxuICAgIENPTlNUQU5UX0NPTE9SICAgICAgICAgICAgICAgICA6IDB4ODAwMSxcbiAgICBPTkVfTUlOVVNfQ09OU1RBTlRfQ09MT1IgICAgICAgOiAweDgwMDIsXG4gICAgQ09OU1RBTlRfQUxQSEEgICAgICAgICAgICAgICAgIDogMHg4MDAzLFxuICAgIE9ORV9NSU5VU19DT05TVEFOVF9BTFBIQSAgICAgICA6IDB4ODAwNCxcbiAgICBCTEVORF9DT0xPUiAgICAgICAgICAgICAgICAgICAgOiAweDgwMDUsXG5cbiAgICAvKiBCdWZmZXIgT2JqZWN0cyAqL1xuICAgIEFSUkFZX0JVRkZFUiAgICAgICAgICAgICAgICAgICA6IDB4ODg5MixcbiAgICBFTEVNRU5UX0FSUkFZX0JVRkZFUiAgICAgICAgICAgOiAweDg4OTMsXG4gICAgQVJSQVlfQlVGRkVSX0JJTkRJTkcgICAgICAgICAgIDogMHg4ODk0LFxuICAgIEVMRU1FTlRfQVJSQVlfQlVGRkVSX0JJTkRJTkcgICA6IDB4ODg5NSxcblxuICAgIFNUUkVBTV9EUkFXICAgICAgICAgICAgICAgICAgICA6IDB4ODhFMCxcbiAgICBTVEFUSUNfRFJBVyAgICAgICAgICAgICAgICAgICAgOiAweDg4RTQsXG4gICAgRFlOQU1JQ19EUkFXICAgICAgICAgICAgICAgICAgIDogMHg4OEU4LFxuXG4gICAgQlVGRkVSX1NJWkUgICAgICAgICAgICAgICAgICAgIDogMHg4NzY0LFxuICAgIEJVRkZFUl9VU0FHRSAgICAgICAgICAgICAgICAgICA6IDB4ODc2NSxcblxuICAgIENVUlJFTlRfVkVSVEVYX0FUVFJJQiAgICAgICAgICA6IDB4ODYyNixcblxuICAgIC8qIEN1bGxGYWNlTW9kZSAqL1xuICAgIEZST05UICAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MDQwNCxcbiAgICBCQUNLICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDA0MDUsXG4gICAgRlJPTlRfQU5EX0JBQ0sgICAgICAgICAgICAgICAgIDogMHgwNDA4LFxuXG4gICAgLyogRGVwdGhGdW5jdGlvbiAqL1xuICAgIC8qICAgICAgTkVWRVIgKi9cbiAgICAvKiAgICAgIExFU1MgKi9cbiAgICAvKiAgICAgIEVRVUFMICovXG4gICAgLyogICAgICBMRVFVQUwgKi9cbiAgICAvKiAgICAgIEdSRUFURVIgKi9cbiAgICAvKiAgICAgIE5PVEVRVUFMICovXG4gICAgLyogICAgICBHRVFVQUwgKi9cbiAgICAvKiAgICAgIEFMV0FZUyAqL1xuXG4gICAgLyogRW5hYmxlQ2FwICovXG4gICAgLyogVEVYVFVSRV8yRCAqL1xuICAgIENVTExfRkFDRSAgICAgICAgICAgICAgICAgICAgICA6IDB4MEI0NCxcbiAgICBCTEVORCAgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDBCRTIsXG4gICAgRElUSEVSICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgwQkQwLFxuICAgIFNURU5DSUxfVEVTVCAgICAgICAgICAgICAgICAgICA6IDB4MEI5MCxcbiAgICBERVBUSF9URVNUICAgICAgICAgICAgICAgICAgICAgOiAweDBCNzEsXG4gICAgU0NJU1NPUl9URVNUICAgICAgICAgICAgICAgICAgIDogMHgwQzExLFxuICAgIFBPTFlHT05fT0ZGU0VUX0ZJTEwgICAgICAgICAgICA6IDB4ODAzNyxcbiAgICBTQU1QTEVfQUxQSEFfVE9fQ09WRVJBR0UgICAgICAgOiAweDgwOUUsXG4gICAgU0FNUExFX0NPVkVSQUdFICAgICAgICAgICAgICAgIDogMHg4MEEwLFxuXG4gICAgLyogRXJyb3JDb2RlICovXG4gICAgTk9fRVJST1IgICAgICAgICAgICAgICAgICAgICAgIDogMCxcbiAgICBJTlZBTElEX0VOVU0gICAgICAgICAgICAgICAgICAgOiAweDA1MDAsXG4gICAgSU5WQUxJRF9WQUxVRSAgICAgICAgICAgICAgICAgIDogMHgwNTAxLFxuICAgIElOVkFMSURfT1BFUkFUSU9OICAgICAgICAgICAgICA6IDB4MDUwMixcbiAgICBPVVRfT0ZfTUVNT1JZICAgICAgICAgICAgICAgICAgOiAweDA1MDUsXG5cbiAgICAvKiBGcm9udEZhY2VEaXJlY3Rpb24gKi9cbiAgICBDVyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDA5MDAsXG4gICAgQ0NXICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgwOTAxLFxuXG4gICAgLyogR2V0UE5hbWUgKi9cbiAgICBMSU5FX1dJRFRIICAgICAgICAgICAgICAgICAgICAgOiAweDBCMjEsXG4gICAgQUxJQVNFRF9QT0lOVF9TSVpFX1JBTkdFICAgICAgIDogMHg4NDZELFxuICAgIEFMSUFTRURfTElORV9XSURUSF9SQU5HRSAgICAgICA6IDB4ODQ2RSxcbiAgICBDVUxMX0ZBQ0VfTU9ERSAgICAgICAgICAgICAgICAgOiAweDBCNDUsXG4gICAgRlJPTlRfRkFDRSAgICAgICAgICAgICAgICAgICAgIDogMHgwQjQ2LFxuICAgIERFUFRIX1JBTkdFICAgICAgICAgICAgICAgICAgICA6IDB4MEI3MCxcbiAgICBERVBUSF9XUklURU1BU0sgICAgICAgICAgICAgICAgOiAweDBCNzIsXG4gICAgREVQVEhfQ0xFQVJfVkFMVUUgICAgICAgICAgICAgIDogMHgwQjczLFxuICAgIERFUFRIX0ZVTkMgICAgICAgICAgICAgICAgICAgICA6IDB4MEI3NCxcbiAgICBTVEVOQ0lMX0NMRUFSX1ZBTFVFICAgICAgICAgICAgOiAweDBCOTEsXG4gICAgU1RFTkNJTF9GVU5DICAgICAgICAgICAgICAgICAgIDogMHgwQjkyLFxuICAgIFNURU5DSUxfRkFJTCAgICAgICAgICAgICAgICAgICA6IDB4MEI5NCxcbiAgICBTVEVOQ0lMX1BBU1NfREVQVEhfRkFJTCAgICAgICAgOiAweDBCOTUsXG4gICAgU1RFTkNJTF9QQVNTX0RFUFRIX1BBU1MgICAgICAgIDogMHgwQjk2LFxuICAgIFNURU5DSUxfUkVGICAgICAgICAgICAgICAgICAgICA6IDB4MEI5NyxcbiAgICBTVEVOQ0lMX1ZBTFVFX01BU0sgICAgICAgICAgICAgOiAweDBCOTMsXG4gICAgU1RFTkNJTF9XUklURU1BU0sgICAgICAgICAgICAgIDogMHgwQjk4LFxuICAgIFNURU5DSUxfQkFDS19GVU5DICAgICAgICAgICAgICA6IDB4ODgwMCxcbiAgICBTVEVOQ0lMX0JBQ0tfRkFJTCAgICAgICAgICAgICAgOiAweDg4MDEsXG4gICAgU1RFTkNJTF9CQUNLX1BBU1NfREVQVEhfRkFJTCAgIDogMHg4ODAyLFxuICAgIFNURU5DSUxfQkFDS19QQVNTX0RFUFRIX1BBU1MgICA6IDB4ODgwMyxcbiAgICBTVEVOQ0lMX0JBQ0tfUkVGICAgICAgICAgICAgICAgOiAweDhDQTMsXG4gICAgU1RFTkNJTF9CQUNLX1ZBTFVFX01BU0sgICAgICAgIDogMHg4Q0E0LFxuICAgIFNURU5DSUxfQkFDS19XUklURU1BU0sgICAgICAgICA6IDB4OENBNSxcbiAgICBWSUVXUE9SVCAgICAgICAgICAgICAgICAgICAgICAgOiAweDBCQTIsXG4gICAgU0NJU1NPUl9CT1ggICAgICAgICAgICAgICAgICAgIDogMHgwQzEwLFxuICAgIC8qICAgICAgU0NJU1NPUl9URVNUICovXG4gICAgQ09MT1JfQ0xFQVJfVkFMVUUgICAgICAgICAgICAgIDogMHgwQzIyLFxuICAgIENPTE9SX1dSSVRFTUFTSyAgICAgICAgICAgICAgICA6IDB4MEMyMyxcbiAgICBVTlBBQ0tfQUxJR05NRU5UICAgICAgICAgICAgICAgOiAweDBDRjUsXG4gICAgUEFDS19BTElHTk1FTlQgICAgICAgICAgICAgICAgIDogMHgwRDA1LFxuICAgIE1BWF9URVhUVVJFX1NJWkUgICAgICAgICAgICAgICA6IDB4MEQzMyxcbiAgICBNQVhfVklFV1BPUlRfRElNUyAgICAgICAgICAgICAgOiAweDBEM0EsXG4gICAgU1VCUElYRUxfQklUUyAgICAgICAgICAgICAgICAgIDogMHgwRDUwLFxuICAgIFJFRF9CSVRTICAgICAgICAgICAgICAgICAgICAgICA6IDB4MEQ1MixcbiAgICBHUkVFTl9CSVRTICAgICAgICAgICAgICAgICAgICAgOiAweDBENTMsXG4gICAgQkxVRV9CSVRTICAgICAgICAgICAgICAgICAgICAgIDogMHgwRDU0LFxuICAgIEFMUEhBX0JJVFMgICAgICAgICAgICAgICAgICAgICA6IDB4MEQ1NSxcbiAgICBERVBUSF9CSVRTICAgICAgICAgICAgICAgICAgICAgOiAweDBENTYsXG4gICAgU1RFTkNJTF9CSVRTICAgICAgICAgICAgICAgICAgIDogMHgwRDU3LFxuICAgIFBPTFlHT05fT0ZGU0VUX1VOSVRTICAgICAgICAgICA6IDB4MkEwMCxcbiAgICAvKiAgICAgIFBPTFlHT05fT0ZGU0VUX0ZJTEwgKi9cbiAgICBQT0xZR09OX09GRlNFVF9GQUNUT1IgICAgICAgICAgOiAweDgwMzgsXG4gICAgVEVYVFVSRV9CSU5ESU5HXzJEICAgICAgICAgICAgIDogMHg4MDY5LFxuICAgIFNBTVBMRV9CVUZGRVJTICAgICAgICAgICAgICAgICA6IDB4ODBBOCxcbiAgICBTQU1QTEVTICAgICAgICAgICAgICAgICAgICAgICAgOiAweDgwQTksXG4gICAgU0FNUExFX0NPVkVSQUdFX1ZBTFVFICAgICAgICAgIDogMHg4MEFBLFxuICAgIFNBTVBMRV9DT1ZFUkFHRV9JTlZFUlQgICAgICAgICA6IDB4ODBBQixcblxuICAgIC8qIEdldFRleHR1cmVQYXJhbWV0ZXIgKi9cbiAgICAvKiAgICAgIFRFWFRVUkVfTUFHX0ZJTFRFUiAqL1xuICAgIC8qICAgICAgVEVYVFVSRV9NSU5fRklMVEVSICovXG4gICAgLyogICAgICBURVhUVVJFX1dSQVBfUyAqL1xuICAgIC8qICAgICAgVEVYVFVSRV9XUkFQX1QgKi9cblxuICAgIENPTVBSRVNTRURfVEVYVFVSRV9GT1JNQVRTICAgICA6IDB4ODZBMyxcblxuICAgIC8qIEhpbnRNb2RlICovXG4gICAgRE9OVF9DQVJFICAgICAgICAgICAgICAgICAgICAgIDogMHgxMTAwLFxuICAgIEZBU1RFU1QgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MTEwMSxcbiAgICBOSUNFU1QgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDExMDIsXG5cbiAgICAvKiBIaW50VGFyZ2V0ICovXG4gICAgR0VORVJBVEVfTUlQTUFQX0hJTlQgICAgICAgICAgICA6IDB4ODE5MixcblxuICAgIC8qIERhdGFUeXBlICovXG4gICAgQllURSAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgxNDAwLFxuICAgIFVOU0lHTkVEX0JZVEUgICAgICAgICAgICAgICAgICA6IDB4MTQwMSxcbiAgICBTSE9SVCAgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDE0MDIsXG4gICAgVU5TSUdORURfU0hPUlQgICAgICAgICAgICAgICAgIDogMHgxNDAzLFxuICAgIElOVCAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MTQwNCxcbiAgICBVTlNJR05FRF9JTlQgICAgICAgICAgICAgICAgICAgOiAweDE0MDUsXG4gICAgRkxPQVQgICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgxNDA2LFxuXG4gICAgLyogUGl4ZWxGb3JtYXQgKi9cbiAgICBERVBUSF9DT01QT05FTlQgICAgICAgICAgICAgICAgOiAweDE5MDIsXG4gICAgQUxQSEEgICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgxOTA2LFxuICAgIFJHQiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MTkwNyxcbiAgICBSR0JBICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDE5MDgsXG4gICAgTFVNSU5BTkNFICAgICAgICAgICAgICAgICAgICAgIDogMHgxOTA5LFxuICAgIExVTUlOQU5DRV9BTFBIQSAgICAgICAgICAgICAgICA6IDB4MTkwQSxcblxuICAgIC8qIFBpeGVsVHlwZSAqL1xuICAgIC8qICAgICAgVU5TSUdORURfQllURSAqL1xuICAgIFVOU0lHTkVEX1NIT1JUXzRfNF80XzQgICAgICAgICA6IDB4ODAzMyxcbiAgICBVTlNJR05FRF9TSE9SVF81XzVfNV8xICAgICAgICAgOiAweDgwMzQsXG4gICAgVU5TSUdORURfU0hPUlRfNV82XzUgICAgICAgICAgIDogMHg4MzYzLFxuXG4gICAgLyogU2hhZGVycyAqL1xuICAgIEZSQUdNRU5UX1NIQURFUiAgICAgICAgICAgICAgICAgIDogMHg4QjMwLFxuICAgIFZFUlRFWF9TSEFERVIgICAgICAgICAgICAgICAgICAgIDogMHg4QjMxLFxuICAgIE1BWF9WRVJURVhfQVRUUklCUyAgICAgICAgICAgICAgIDogMHg4ODY5LFxuICAgIE1BWF9WRVJURVhfVU5JRk9STV9WRUNUT1JTICAgICAgIDogMHg4REZCLFxuICAgIE1BWF9WQVJZSU5HX1ZFQ1RPUlMgICAgICAgICAgICAgIDogMHg4REZDLFxuICAgIE1BWF9DT01CSU5FRF9URVhUVVJFX0lNQUdFX1VOSVRTIDogMHg4QjRELFxuICAgIE1BWF9WRVJURVhfVEVYVFVSRV9JTUFHRV9VTklUUyAgIDogMHg4QjRDLFxuICAgIE1BWF9URVhUVVJFX0lNQUdFX1VOSVRTICAgICAgICAgIDogMHg4ODcyLFxuICAgIE1BWF9GUkFHTUVOVF9VTklGT1JNX1ZFQ1RPUlMgICAgIDogMHg4REZELFxuICAgIFNIQURFUl9UWVBFICAgICAgICAgICAgICAgICAgICAgIDogMHg4QjRGLFxuICAgIERFTEVURV9TVEFUVVMgICAgICAgICAgICAgICAgICAgIDogMHg4QjgwLFxuICAgIExJTktfU1RBVFVTICAgICAgICAgICAgICAgICAgICAgIDogMHg4QjgyLFxuICAgIFZBTElEQVRFX1NUQVRVUyAgICAgICAgICAgICAgICAgIDogMHg4QjgzLFxuICAgIEFUVEFDSEVEX1NIQURFUlMgICAgICAgICAgICAgICAgIDogMHg4Qjg1LFxuICAgIEFDVElWRV9VTklGT1JNUyAgICAgICAgICAgICAgICAgIDogMHg4Qjg2LFxuICAgIEFDVElWRV9BVFRSSUJVVEVTICAgICAgICAgICAgICAgIDogMHg4Qjg5LFxuICAgIFNIQURJTkdfTEFOR1VBR0VfVkVSU0lPTiAgICAgICAgIDogMHg4QjhDLFxuICAgIENVUlJFTlRfUFJPR1JBTSAgICAgICAgICAgICAgICAgIDogMHg4QjhELFxuXG4gICAgLyogU3RlbmNpbEZ1bmN0aW9uICovXG4gICAgTkVWRVIgICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgwMjAwLFxuICAgIExFU1MgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MDIwMSxcbiAgICBFUVVBTCAgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDAyMDIsXG4gICAgTEVRVUFMICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgwMjAzLFxuICAgIEdSRUFURVIgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MDIwNCxcbiAgICBOT1RFUVVBTCAgICAgICAgICAgICAgICAgICAgICAgOiAweDAyMDUsXG4gICAgR0VRVUFMICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgwMjA2LFxuICAgIEFMV0FZUyAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MDIwNyxcblxuICAgIC8qIFN0ZW5jaWxPcCAqL1xuICAgIC8qICAgICAgWkVSTyAqL1xuICAgIEtFRVAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MUUwMCxcbiAgICBSRVBMQUNFICAgICAgICAgICAgICAgICAgICAgICAgOiAweDFFMDEsXG4gICAgSU5DUiAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgxRTAyLFxuICAgIERFQ1IgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MUUwMyxcbiAgICBJTlZFUlQgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDE1MEEsXG4gICAgSU5DUl9XUkFQICAgICAgICAgICAgICAgICAgICAgIDogMHg4NTA3LFxuICAgIERFQ1JfV1JBUCAgICAgICAgICAgICAgICAgICAgICA6IDB4ODUwOCxcblxuICAgIC8qIFN0cmluZ05hbWUgKi9cbiAgICBWRU5ET1IgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDFGMDAsXG4gICAgUkVOREVSRVIgICAgICAgICAgICAgICAgICAgICAgIDogMHgxRjAxLFxuICAgIFZFUlNJT04gICAgICAgICAgICAgICAgICAgICAgICA6IDB4MUYwMixcblxuICAgIC8qIFRleHR1cmVNYWdGaWx0ZXIgKi9cbiAgICBORUFSRVNUICAgICAgICAgICAgICAgICAgICAgICAgOiAweDI2MDAsXG4gICAgTElORUFSICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgyNjAxLFxuXG4gICAgLyogVGV4dHVyZU1pbkZpbHRlciAqL1xuICAgIC8qICAgICAgTkVBUkVTVCAqL1xuICAgIC8qICAgICAgTElORUFSICovXG4gICAgTkVBUkVTVF9NSVBNQVBfTkVBUkVTVCAgICAgICAgIDogMHgyNzAwLFxuICAgIExJTkVBUl9NSVBNQVBfTkVBUkVTVCAgICAgICAgICA6IDB4MjcwMSxcbiAgICBORUFSRVNUX01JUE1BUF9MSU5FQVIgICAgICAgICAgOiAweDI3MDIsXG4gICAgTElORUFSX01JUE1BUF9MSU5FQVIgICAgICAgICAgIDogMHgyNzAzLFxuXG4gICAgLyogVGV4dHVyZVBhcmFtZXRlck5hbWUgKi9cbiAgICBURVhUVVJFX01BR19GSUxURVIgICAgICAgICAgICAgOiAweDI4MDAsXG4gICAgVEVYVFVSRV9NSU5fRklMVEVSICAgICAgICAgICAgIDogMHgyODAxLFxuICAgIFRFWFRVUkVfV1JBUF9TICAgICAgICAgICAgICAgICA6IDB4MjgwMixcbiAgICBURVhUVVJFX1dSQVBfVCAgICAgICAgICAgICAgICAgOiAweDI4MDMsXG5cbiAgICAvKiBUZXh0dXJlVGFyZ2V0ICovXG4gICAgVEVYVFVSRV8yRCAgICAgICAgICAgICAgICAgICAgIDogMHgwREUxLFxuICAgIFRFWFRVUkUgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MTcwMixcblxuICAgIFRFWFRVUkVfQ1VCRV9NQVAgICAgICAgICAgICAgICA6IDB4ODUxMyxcbiAgICBURVhUVVJFX0JJTkRJTkdfQ1VCRV9NQVAgICAgICAgOiAweDg1MTQsXG4gICAgVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YICAgIDogMHg4NTE1LFxuICAgIFRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWCAgICA6IDB4ODUxNixcbiAgICBURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1kgICAgOiAweDg1MTcsXG4gICAgVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9ZICAgIDogMHg4NTE4LFxuICAgIFRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWiAgICA6IDB4ODUxOSxcbiAgICBURVhUVVJFX0NVQkVfTUFQX05FR0FUSVZFX1ogICAgOiAweDg1MUEsXG4gICAgTUFYX0NVQkVfTUFQX1RFWFRVUkVfU0laRSAgICAgIDogMHg4NTFDLFxuXG4gICAgLyogVGV4dHVyZVVuaXQgKi9cbiAgICBURVhUVVJFMCAgICAgICAgICAgICAgICAgICAgICAgOiAweDg0QzAsXG4gICAgVEVYVFVSRTEgICAgICAgICAgICAgICAgICAgICAgIDogMHg4NEMxLFxuICAgIFRFWFRVUkUyICAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRDMixcbiAgICBURVhUVVJFMyAgICAgICAgICAgICAgICAgICAgICAgOiAweDg0QzMsXG4gICAgVEVYVFVSRTQgICAgICAgICAgICAgICAgICAgICAgIDogMHg4NEM0LFxuICAgIFRFWFRVUkU1ICAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRDNSxcbiAgICBURVhUVVJFNiAgICAgICAgICAgICAgICAgICAgICAgOiAweDg0QzYsXG4gICAgVEVYVFVSRTcgICAgICAgICAgICAgICAgICAgICAgIDogMHg4NEM3LFxuICAgIFRFWFRVUkU4ICAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRDOCxcbiAgICBURVhUVVJFOSAgICAgICAgICAgICAgICAgICAgICAgOiAweDg0QzksXG4gICAgVEVYVFVSRTEwICAgICAgICAgICAgICAgICAgICAgIDogMHg4NENBLFxuICAgIFRFWFRVUkUxMSAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRDQixcbiAgICBURVhUVVJFMTIgICAgICAgICAgICAgICAgICAgICAgOiAweDg0Q0MsXG4gICAgVEVYVFVSRTEzICAgICAgICAgICAgICAgICAgICAgIDogMHg4NENELFxuICAgIFRFWFRVUkUxNCAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRDRSxcbiAgICBURVhUVVJFMTUgICAgICAgICAgICAgICAgICAgICAgOiAweDg0Q0YsXG4gICAgVEVYVFVSRTE2ICAgICAgICAgICAgICAgICAgICAgIDogMHg4NEQwLFxuICAgIFRFWFRVUkUxNyAgICAgICAgICAgICAgICAgICAgICA6IDB4ODREMSxcbiAgICBURVhUVVJFMTggICAgICAgICAgICAgICAgICAgICAgOiAweDg0RDIsXG4gICAgVEVYVFVSRTE5ICAgICAgICAgICAgICAgICAgICAgIDogMHg4NEQzLFxuICAgIFRFWFRVUkUyMCAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRENCxcbiAgICBURVhUVVJFMjEgICAgICAgICAgICAgICAgICAgICAgOiAweDg0RDUsXG4gICAgVEVYVFVSRTIyICAgICAgICAgICAgICAgICAgICAgIDogMHg4NEQ2LFxuICAgIFRFWFRVUkUyMyAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRENyxcbiAgICBURVhUVVJFMjQgICAgICAgICAgICAgICAgICAgICAgOiAweDg0RDgsXG4gICAgVEVYVFVSRTI1ICAgICAgICAgICAgICAgICAgICAgIDogMHg4NEQ5LFxuICAgIFRFWFRVUkUyNiAgICAgICAgICAgICAgICAgICAgICA6IDB4ODREQSxcbiAgICBURVhUVVJFMjcgICAgICAgICAgICAgICAgICAgICAgOiAweDg0REIsXG4gICAgVEVYVFVSRTI4ICAgICAgICAgICAgICAgICAgICAgIDogMHg4NERDLFxuICAgIFRFWFRVUkUyOSAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRERCxcbiAgICBURVhUVVJFMzAgICAgICAgICAgICAgICAgICAgICAgOiAweDg0REUsXG4gICAgVEVYVFVSRTMxICAgICAgICAgICAgICAgICAgICAgIDogMHg4NERGLFxuICAgIEFDVElWRV9URVhUVVJFICAgICAgICAgICAgICAgICA6IDB4ODRFMCxcblxuICAgIC8qIFRleHR1cmVXcmFwTW9kZSAqL1xuICAgIFJFUEVBVCAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MjkwMSxcbiAgICBDTEFNUF9UT19FREdFICAgICAgICAgICAgICAgICAgOiAweDgxMkYsXG4gICAgTUlSUk9SRURfUkVQRUFUICAgICAgICAgICAgICAgIDogMHg4MzcwLFxuXG4gICAgLyogVW5pZm9ybSBUeXBlcyAqL1xuICAgIEZMT0FUX1ZFQzIgICAgICAgICAgICAgICAgICAgICA6IDB4OEI1MCxcbiAgICBGTE9BVF9WRUMzICAgICAgICAgICAgICAgICAgICAgOiAweDhCNTEsXG4gICAgRkxPQVRfVkVDNCAgICAgICAgICAgICAgICAgICAgIDogMHg4QjUyLFxuICAgIElOVF9WRUMyICAgICAgICAgICAgICAgICAgICAgICA6IDB4OEI1MyxcbiAgICBJTlRfVkVDMyAgICAgICAgICAgICAgICAgICAgICAgOiAweDhCNTQsXG4gICAgSU5UX1ZFQzQgICAgICAgICAgICAgICAgICAgICAgIDogMHg4QjU1LFxuICAgIEJPT0wgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4OEI1NixcbiAgICBCT09MX1ZFQzIgICAgICAgICAgICAgICAgICAgICAgOiAweDhCNTcsXG4gICAgQk9PTF9WRUMzICAgICAgICAgICAgICAgICAgICAgIDogMHg4QjU4LFxuICAgIEJPT0xfVkVDNCAgICAgICAgICAgICAgICAgICAgICA6IDB4OEI1OSxcbiAgICBGTE9BVF9NQVQyICAgICAgICAgICAgICAgICAgICAgOiAweDhCNUEsXG4gICAgRkxPQVRfTUFUMyAgICAgICAgICAgICAgICAgICAgIDogMHg4QjVCLFxuICAgIEZMT0FUX01BVDQgICAgICAgICAgICAgICAgICAgICA6IDB4OEI1QyxcbiAgICBTQU1QTEVSXzJEICAgICAgICAgICAgICAgICAgICAgOiAweDhCNUUsXG4gICAgU0FNUExFUl9DVUJFICAgICAgICAgICAgICAgICAgIDogMHg4QjYwLFxuXG4gICAgLyogVmVydGV4IEFycmF5cyAqL1xuICAgIFZFUlRFWF9BVFRSSUJfQVJSQVlfRU5BQkxFRCAgICAgICAgOiAweDg2MjIsXG4gICAgVkVSVEVYX0FUVFJJQl9BUlJBWV9TSVpFICAgICAgICAgICA6IDB4ODYyMyxcbiAgICBWRVJURVhfQVRUUklCX0FSUkFZX1NUUklERSAgICAgICAgIDogMHg4NjI0LFxuICAgIFZFUlRFWF9BVFRSSUJfQVJSQVlfVFlQRSAgICAgICAgICAgOiAweDg2MjUsXG4gICAgVkVSVEVYX0FUVFJJQl9BUlJBWV9OT1JNQUxJWkVEICAgICA6IDB4ODg2QSxcbiAgICBWRVJURVhfQVRUUklCX0FSUkFZX1BPSU5URVIgICAgICAgIDogMHg4NjQ1LFxuICAgIFZFUlRFWF9BVFRSSUJfQVJSQVlfQlVGRkVSX0JJTkRJTkcgOiAweDg4OUYsXG5cbiAgICAvKiBTaGFkZXIgU291cmNlICovXG4gICAgQ09NUElMRV9TVEFUVVMgICAgICAgICAgICAgICAgIDogMHg4QjgxLFxuXG4gICAgLyogU2hhZGVyIFByZWNpc2lvbi1TcGVjaWZpZWQgVHlwZXMgKi9cbiAgICBMT1dfRkxPQVQgICAgICAgICAgICAgICAgICAgICAgOiAweDhERjAsXG4gICAgTUVESVVNX0ZMT0FUICAgICAgICAgICAgICAgICAgIDogMHg4REYxLFxuICAgIEhJR0hfRkxPQVQgICAgICAgICAgICAgICAgICAgICA6IDB4OERGMixcbiAgICBMT1dfSU5UICAgICAgICAgICAgICAgICAgICAgICAgOiAweDhERjMsXG4gICAgTUVESVVNX0lOVCAgICAgICAgICAgICAgICAgICAgIDogMHg4REY0LFxuICAgIEhJR0hfSU5UICAgICAgICAgICAgICAgICAgICAgICA6IDB4OERGNSxcblxuICAgIC8qIEZyYW1lYnVmZmVyIE9iamVjdC4gKi9cbiAgICBGUkFNRUJVRkZFUiAgICAgICAgICAgICAgICAgICAgOiAweDhENDAsXG4gICAgUkVOREVSQlVGRkVSICAgICAgICAgICAgICAgICAgIDogMHg4RDQxLFxuXG4gICAgUkdCQTQgICAgICAgICAgICAgICAgICAgICAgICAgIDogMHg4MDU2LFxuICAgIFJHQjVfQTEgICAgICAgICAgICAgICAgICAgICAgICA6IDB4ODA1NyxcbiAgICBSR0I1NjUgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDhENjIsXG4gICAgREVQVEhfQ09NUE9ORU5UMTYgICAgICAgICAgICAgIDogMHg4MUE1LFxuICAgIFNURU5DSUxfSU5ERVggICAgICAgICAgICAgICAgICA6IDB4MTkwMSxcbiAgICBTVEVOQ0lMX0lOREVYOCAgICAgICAgICAgICAgICAgOiAweDhENDgsXG4gICAgREVQVEhfU1RFTkNJTCAgICAgICAgICAgICAgICAgIDogMHg4NEY5LFxuXG4gICAgUkVOREVSQlVGRkVSX1dJRFRIICAgICAgICAgICAgIDogMHg4RDQyLFxuICAgIFJFTkRFUkJVRkZFUl9IRUlHSFQgICAgICAgICAgICA6IDB4OEQ0MyxcbiAgICBSRU5ERVJCVUZGRVJfSU5URVJOQUxfRk9STUFUICAgOiAweDhENDQsXG4gICAgUkVOREVSQlVGRkVSX1JFRF9TSVpFICAgICAgICAgIDogMHg4RDUwLFxuICAgIFJFTkRFUkJVRkZFUl9HUkVFTl9TSVpFICAgICAgICA6IDB4OEQ1MSxcbiAgICBSRU5ERVJCVUZGRVJfQkxVRV9TSVpFICAgICAgICAgOiAweDhENTIsXG4gICAgUkVOREVSQlVGRkVSX0FMUEhBX1NJWkUgICAgICAgIDogMHg4RDUzLFxuICAgIFJFTkRFUkJVRkZFUl9ERVBUSF9TSVpFICAgICAgICA6IDB4OEQ1NCxcbiAgICBSRU5ERVJCVUZGRVJfU1RFTkNJTF9TSVpFICAgICAgOiAweDhENTUsXG5cbiAgICBGUkFNRUJVRkZFUl9BVFRBQ0hNRU5UX09CSkVDVF9UWVBFICAgICAgICAgICA6IDB4OENEMCxcbiAgICBGUkFNRUJVRkZFUl9BVFRBQ0hNRU5UX09CSkVDVF9OQU1FICAgICAgICAgICA6IDB4OENEMSxcbiAgICBGUkFNRUJVRkZFUl9BVFRBQ0hNRU5UX1RFWFRVUkVfTEVWRUwgICAgICAgICA6IDB4OENEMixcbiAgICBGUkFNRUJVRkZFUl9BVFRBQ0hNRU5UX1RFWFRVUkVfQ1VCRV9NQVBfRkFDRSA6IDB4OENEMyxcblxuICAgIENPTE9SX0FUVEFDSE1FTlQwICAgICAgICAgICAgICA6IDB4OENFMCxcbiAgICBERVBUSF9BVFRBQ0hNRU5UICAgICAgICAgICAgICAgOiAweDhEMDAsXG4gICAgU1RFTkNJTF9BVFRBQ0hNRU5UICAgICAgICAgICAgIDogMHg4RDIwLFxuICAgIERFUFRIX1NURU5DSUxfQVRUQUNITUVOVCAgICAgICA6IDB4ODIxQSxcblxuICAgIE5PTkUgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDAsXG5cbiAgICBGUkFNRUJVRkZFUl9DT01QTEVURSAgICAgICAgICAgICAgICAgICAgICA6IDB4OENENSxcbiAgICBGUkFNRUJVRkZFUl9JTkNPTVBMRVRFX0FUVEFDSE1FTlQgICAgICAgICA6IDB4OENENixcbiAgICBGUkFNRUJVRkZFUl9JTkNPTVBMRVRFX01JU1NJTkdfQVRUQUNITUVOVCA6IDB4OENENyxcbiAgICBGUkFNRUJVRkZFUl9JTkNPTVBMRVRFX0RJTUVOU0lPTlMgICAgICAgICA6IDB4OENEOSxcbiAgICBGUkFNRUJVRkZFUl9VTlNVUFBPUlRFRCAgICAgICAgICAgICAgICAgICA6IDB4OENERCxcblxuICAgIEZSQU1FQlVGRkVSX0JJTkRJTkcgICAgICAgICAgICA6IDB4OENBNixcbiAgICBSRU5ERVJCVUZGRVJfQklORElORyAgICAgICAgICAgOiAweDhDQTcsXG4gICAgTUFYX1JFTkRFUkJVRkZFUl9TSVpFICAgICAgICAgIDogMHg4NEU4LFxuXG4gICAgSU5WQUxJRF9GUkFNRUJVRkZFUl9PUEVSQVRJT04gIDogMHgwNTA2LFxuXG4gICAgLyogV2ViR0wtc3BlY2lmaWMgZW51bXMgKi9cbiAgICBVTlBBQ0tfRkxJUF9ZX1dFQkdMICAgICAgICAgICAgOiAweDkyNDAsXG4gICAgVU5QQUNLX1BSRU1VTFRJUExZX0FMUEhBX1dFQkdMIDogMHg5MjQxLFxuICAgIENPTlRFWFRfTE9TVF9XRUJHTCAgICAgICAgICAgICA6IDB4OTI0MixcbiAgICBVTlBBQ0tfQ09MT1JTUEFDRV9DT05WRVJTSU9OX1dFQkdMIDogMHg5MjQzLFxuICAgIEJST1dTRVJfREVGQVVMVF9XRUJHTCAgICAgICAgICA6IDB4OTI0NCxcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2NvcmUvZ2xlbnVtLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n");

/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\nvar vec3Set = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].set;\nvar vec3Copy = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].copy;\n\n/**\n * Axis aligned bounding box\n * @constructor\n * @alias clay.BoundingBox\n * @param {clay.Vector3} [min]\n * @param {clay.Vector3} [max]\n */\nvar BoundingBox = function (min, max) {\n\n    /**\n     * Minimum coords of bounding box\n     * @type {clay.Vector3}\n     */\n    this.min = min || new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */](Infinity, Infinity, Infinity);\n\n    /**\n     * Maximum coords of bounding box\n     * @type {clay.Vector3}\n     */\n    this.max = max || new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */](-Infinity, -Infinity, -Infinity);\n\n    this.vertices = null;\n};\n\nBoundingBox.prototype = {\n\n    constructor: BoundingBox,\n    /**\n     * Update min and max coords from a vertices array\n     * @param  {array} vertices\n     */\n    updateFromVertices: function (vertices) {\n        if (vertices.length > 0) {\n            var min = this.min;\n            var max = this.max;\n            var minArr = min.array;\n            var maxArr = max.array;\n            vec3Copy(minArr, vertices[0]);\n            vec3Copy(maxArr, vertices[0]);\n            for (var i = 1; i < vertices.length; i++) {\n                var vertex = vertices[i];\n\n                if (vertex[0] < minArr[0]) { minArr[0] = vertex[0]; }\n                if (vertex[1] < minArr[1]) { minArr[1] = vertex[1]; }\n                if (vertex[2] < minArr[2]) { minArr[2] = vertex[2]; }\n\n                if (vertex[0] > maxArr[0]) { maxArr[0] = vertex[0]; }\n                if (vertex[1] > maxArr[1]) { maxArr[1] = vertex[1]; }\n                if (vertex[2] > maxArr[2]) { maxArr[2] = vertex[2]; }\n            }\n            min._dirty = true;\n            max._dirty = true;\n        }\n    },\n\n    /**\n     * Union operation with another bounding box\n     * @param  {clay.BoundingBox} bbox\n     */\n    union: function (bbox) {\n        var min = this.min;\n        var max = this.max;\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].min(min.array, min.array, bbox.min.array);\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].max(max.array, max.array, bbox.max.array);\n        min._dirty = true;\n        max._dirty = true;\n        return this;\n    },\n\n    /**\n     * Intersection operation with another bounding box\n     * @param  {clay.BoundingBox} bbox\n     */\n    intersection: function (bbox) {\n        var min = this.min;\n        var max = this.max;\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].max(min.array, min.array, bbox.min.array);\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].min(max.array, max.array, bbox.max.array);\n        min._dirty = true;\n        max._dirty = true;\n        return this;\n    },\n\n    /**\n     * If intersect with another bounding box\n     * @param  {clay.BoundingBox} bbox\n     * @return {boolean}\n     */\n    intersectBoundingBox: function (bbox) {\n        var _min = this.min.array;\n        var _max = this.max.array;\n\n        var _min2 = bbox.min.array;\n        var _max2 = bbox.max.array;\n\n        return ! (_min[0] > _max2[0] || _min[1] > _max2[1] || _min[2] > _max2[2]\n            || _max[0] < _min2[0] || _max[1] < _min2[1] || _max[2] < _min2[2]);\n    },\n\n    /**\n     * If contain another bounding box entirely\n     * @param  {clay.BoundingBox} bbox\n     * @return {boolean}\n     */\n    containBoundingBox: function (bbox) {\n\n        var _min = this.min.array;\n        var _max = this.max.array;\n\n        var _min2 = bbox.min.array;\n        var _max2 = bbox.max.array;\n\n        return _min[0] <= _min2[0] && _min[1] <= _min2[1] && _min[2] <= _min2[2]\n            && _max[0] >= _max2[0] && _max[1] >= _max2[1] && _max[2] >= _max2[2];\n    },\n\n    /**\n     * If contain point entirely\n     * @param  {clay.Vector3} point\n     * @return {boolean}\n     */\n    containPoint: function (p) {\n        var _min = this.min.array;\n        var _max = this.max.array;\n\n        var _p = p.array;\n\n        return _min[0] <= _p[0] && _min[1] <= _p[1] && _min[2] <= _p[2]\n            && _max[0] >= _p[0] && _max[1] >= _p[1] && _max[2] >= _p[2];\n    },\n\n    /**\n     * If bounding box is finite\n     */\n    isFinite: function () {\n        var _min = this.min.array;\n        var _max = this.max.array;\n        return isFinite(_min[0]) && isFinite(_min[1]) && isFinite(_min[2])\n            && isFinite(_max[0]) && isFinite(_max[1]) && isFinite(_max[2]);\n    },\n\n    /**\n     * Apply an affine transform matrix to the bounding box\n     * @param  {clay.Matrix4} matrix\n     */\n    applyTransform: function (matrix) {\n        this.transformFrom(this, matrix);\n    },\n\n    /**\n     * Get from another bounding box and an affine transform matrix.\n     * @param {clay.BoundingBox} source\n     * @param {clay.Matrix4} matrix\n     */\n    transformFrom: (function () {\n        // http://dev.theomader.com/transform-bounding-boxes/\n        var xa = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var xb = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var ya = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var yb = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var za = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var zb = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n\n        return function (source, matrix) {\n            var min = source.min.array;\n            var max = source.max.array;\n\n            var m = matrix.array;\n\n            xa[0] = m[0] * min[0]; xa[1] = m[1] * min[0]; xa[2] = m[2] * min[0];\n            xb[0] = m[0] * max[0]; xb[1] = m[1] * max[0]; xb[2] = m[2] * max[0];\n\n            ya[0] = m[4] * min[1]; ya[1] = m[5] * min[1]; ya[2] = m[6] * min[1];\n            yb[0] = m[4] * max[1]; yb[1] = m[5] * max[1]; yb[2] = m[6] * max[1];\n\n            za[0] = m[8] * min[2]; za[1] = m[9] * min[2]; za[2] = m[10] * min[2];\n            zb[0] = m[8] * max[2]; zb[1] = m[9] * max[2]; zb[2] = m[10] * max[2];\n\n            min = this.min.array;\n            max = this.max.array;\n            min[0] = Math.min(xa[0], xb[0]) + Math.min(ya[0], yb[0]) + Math.min(za[0], zb[0]) + m[12];\n            min[1] = Math.min(xa[1], xb[1]) + Math.min(ya[1], yb[1]) + Math.min(za[1], zb[1]) + m[13];\n            min[2] = Math.min(xa[2], xb[2]) + Math.min(ya[2], yb[2]) + Math.min(za[2], zb[2]) + m[14];\n\n            max[0] = Math.max(xa[0], xb[0]) + Math.max(ya[0], yb[0]) + Math.max(za[0], zb[0]) + m[12];\n            max[1] = Math.max(xa[1], xb[1]) + Math.max(ya[1], yb[1]) + Math.max(za[1], zb[1]) + m[13];\n            max[2] = Math.max(xa[2], xb[2]) + Math.max(ya[2], yb[2]) + Math.max(za[2], zb[2]) + m[14];\n\n            this.min._dirty = true;\n            this.max._dirty = true;\n\n            return this;\n        };\n    })(),\n\n    /**\n     * Apply a projection matrix to the bounding box\n     * @param  {clay.Matrix4} matrix\n     */\n    applyProjection: function (matrix) {\n        var min = this.min.array;\n        var max = this.max.array;\n\n        var m = matrix.array;\n        // min in min z\n        var v10 = min[0];\n        var v11 = min[1];\n        var v12 = min[2];\n        // max in min z\n        var v20 = max[0];\n        var v21 = max[1];\n        var v22 = min[2];\n        // max in max z\n        var v30 = max[0];\n        var v31 = max[1];\n        var v32 = max[2];\n\n        if (m[15] === 1) {  // Orthographic projection\n            min[0] = m[0] * v10 + m[12];\n            min[1] = m[5] * v11 + m[13];\n            max[2] = m[10] * v12 + m[14];\n\n            max[0] = m[0] * v30 + m[12];\n            max[1] = m[5] * v31 + m[13];\n            min[2] = m[10] * v32 + m[14];\n        }\n        else {\n            var w = -1 / v12;\n            min[0] = m[0] * v10 * w;\n            min[1] = m[5] * v11 * w;\n            max[2] = (m[10] * v12 + m[14]) * w;\n\n            w = -1 / v22;\n            max[0] = m[0] * v20 * w;\n            max[1] = m[5] * v21 * w;\n\n            w = -1 / v32;\n            min[2] = (m[10] * v32 + m[14]) * w;\n        }\n        this.min._dirty = true;\n        this.max._dirty = true;\n\n        return this;\n    },\n\n    updateVertices: function () {\n        var vertices = this.vertices;\n        if (!vertices) {\n            // Cube vertices\n            vertices = [];\n            for (var i = 0; i < 8; i++) {\n                vertices[i] = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].fromValues(0, 0, 0);\n            }\n\n            /**\n             * Eight coords of bounding box\n             * @type {Float32Array[]}\n             */\n            this.vertices = vertices;\n        }\n        var min = this.min.array;\n        var max = this.max.array;\n        //--- min z\n        // min x\n        vec3Set(vertices[0], min[0], min[1], min[2]);\n        vec3Set(vertices[1], min[0], max[1], min[2]);\n        // max x\n        vec3Set(vertices[2], max[0], min[1], min[2]);\n        vec3Set(vertices[3], max[0], max[1], min[2]);\n\n        //-- max z\n        vec3Set(vertices[4], min[0], min[1], max[2]);\n        vec3Set(vertices[5], min[0], max[1], max[2]);\n        vec3Set(vertices[6], max[0], min[1], max[2]);\n        vec3Set(vertices[7], max[0], max[1], max[2]);\n\n        return this;\n    },\n    /**\n     * Copy values from another bounding box\n     * @param  {clay.BoundingBox} bbox\n     */\n    copy: function (bbox) {\n        var min = this.min;\n        var max = this.max;\n        vec3Copy(min.array, bbox.min.array);\n        vec3Copy(max.array, bbox.max.array);\n        min._dirty = true;\n        max._dirty = true;\n        return this;\n    },\n\n    /**\n     * Clone a new bounding box\n     * @return {clay.BoundingBox}\n     */\n    clone: function () {\n        var boundingBox = new BoundingBox();\n        boundingBox.copy(this);\n        return boundingBox;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (BoundingBox);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL21hdGgvQm91bmRpbmdCb3guanM/NzczZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVmVjdG9yMyBmcm9tICcuL1ZlY3RvcjMnO1xuaW1wb3J0IHZlYzMgZnJvbSAnLi4vZ2xtYXRyaXgvdmVjMyc7XG5cbnZhciB2ZWMzU2V0ID0gdmVjMy5zZXQ7XG52YXIgdmVjM0NvcHkgPSB2ZWMzLmNvcHk7XG5cbi8qKlxuICogQXhpcyBhbGlnbmVkIGJvdW5kaW5nIGJveFxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5Cb3VuZGluZ0JveFxuICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IFttaW5dXG4gKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gW21heF1cbiAqL1xudmFyIEJvdW5kaW5nQm94ID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XG5cbiAgICAvKipcbiAgICAgKiBNaW5pbXVtIGNvb3JkcyBvZiBib3VuZGluZyBib3hcbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIHRoaXMubWluID0gbWluIHx8IG5ldyBWZWN0b3IzKEluZmluaXR5LCBJbmZpbml0eSwgSW5maW5pdHkpO1xuXG4gICAgLyoqXG4gICAgICogTWF4aW11bSBjb29yZHMgb2YgYm91bmRpbmcgYm94XG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICB0aGlzLm1heCA9IG1heCB8fCBuZXcgVmVjdG9yMygtSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5KTtcblxuICAgIHRoaXMudmVydGljZXMgPSBudWxsO1xufTtcblxuQm91bmRpbmdCb3gucHJvdG90eXBlID0ge1xuXG4gICAgY29uc3RydWN0b3I6IEJvdW5kaW5nQm94LFxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBtaW4gYW5kIG1heCBjb29yZHMgZnJvbSBhIHZlcnRpY2VzIGFycmF5XG4gICAgICogQHBhcmFtICB7YXJyYXl9IHZlcnRpY2VzXG4gICAgICovXG4gICAgdXBkYXRlRnJvbVZlcnRpY2VzOiBmdW5jdGlvbiAodmVydGljZXMpIHtcbiAgICAgICAgaWYgKHZlcnRpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBtaW4gPSB0aGlzLm1pbjtcbiAgICAgICAgICAgIHZhciBtYXggPSB0aGlzLm1heDtcbiAgICAgICAgICAgIHZhciBtaW5BcnIgPSBtaW4uYXJyYXk7XG4gICAgICAgICAgICB2YXIgbWF4QXJyID0gbWF4LmFycmF5O1xuICAgICAgICAgICAgdmVjM0NvcHkobWluQXJyLCB2ZXJ0aWNlc1swXSk7XG4gICAgICAgICAgICB2ZWMzQ29weShtYXhBcnIsIHZlcnRpY2VzWzBdKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgdmVydGV4ID0gdmVydGljZXNbaV07XG5cbiAgICAgICAgICAgICAgICBpZiAodmVydGV4WzBdIDwgbWluQXJyWzBdKSB7IG1pbkFyclswXSA9IHZlcnRleFswXTsgfVxuICAgICAgICAgICAgICAgIGlmICh2ZXJ0ZXhbMV0gPCBtaW5BcnJbMV0pIHsgbWluQXJyWzFdID0gdmVydGV4WzFdOyB9XG4gICAgICAgICAgICAgICAgaWYgKHZlcnRleFsyXSA8IG1pbkFyclsyXSkgeyBtaW5BcnJbMl0gPSB2ZXJ0ZXhbMl07IH1cblxuICAgICAgICAgICAgICAgIGlmICh2ZXJ0ZXhbMF0gPiBtYXhBcnJbMF0pIHsgbWF4QXJyWzBdID0gdmVydGV4WzBdOyB9XG4gICAgICAgICAgICAgICAgaWYgKHZlcnRleFsxXSA+IG1heEFyclsxXSkgeyBtYXhBcnJbMV0gPSB2ZXJ0ZXhbMV07IH1cbiAgICAgICAgICAgICAgICBpZiAodmVydGV4WzJdID4gbWF4QXJyWzJdKSB7IG1heEFyclsyXSA9IHZlcnRleFsyXTsgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWluLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICBtYXguX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbmlvbiBvcGVyYXRpb24gd2l0aCBhbm90aGVyIGJvdW5kaW5nIGJveFxuICAgICAqIEBwYXJhbSAge2NsYXkuQm91bmRpbmdCb3h9IGJib3hcbiAgICAgKi9cbiAgICB1bmlvbjogZnVuY3Rpb24gKGJib3gpIHtcbiAgICAgICAgdmFyIG1pbiA9IHRoaXMubWluO1xuICAgICAgICB2YXIgbWF4ID0gdGhpcy5tYXg7XG4gICAgICAgIHZlYzMubWluKG1pbi5hcnJheSwgbWluLmFycmF5LCBiYm94Lm1pbi5hcnJheSk7XG4gICAgICAgIHZlYzMubWF4KG1heC5hcnJheSwgbWF4LmFycmF5LCBiYm94Lm1heC5hcnJheSk7XG4gICAgICAgIG1pbi5fZGlydHkgPSB0cnVlO1xuICAgICAgICBtYXguX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEludGVyc2VjdGlvbiBvcGVyYXRpb24gd2l0aCBhbm90aGVyIGJvdW5kaW5nIGJveFxuICAgICAqIEBwYXJhbSAge2NsYXkuQm91bmRpbmdCb3h9IGJib3hcbiAgICAgKi9cbiAgICBpbnRlcnNlY3Rpb246IGZ1bmN0aW9uIChiYm94KSB7XG4gICAgICAgIHZhciBtaW4gPSB0aGlzLm1pbjtcbiAgICAgICAgdmFyIG1heCA9IHRoaXMubWF4O1xuICAgICAgICB2ZWMzLm1heChtaW4uYXJyYXksIG1pbi5hcnJheSwgYmJveC5taW4uYXJyYXkpO1xuICAgICAgICB2ZWMzLm1pbihtYXguYXJyYXksIG1heC5hcnJheSwgYmJveC5tYXguYXJyYXkpO1xuICAgICAgICBtaW4uX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgbWF4Ll9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJZiBpbnRlcnNlY3Qgd2l0aCBhbm90aGVyIGJvdW5kaW5nIGJveFxuICAgICAqIEBwYXJhbSAge2NsYXkuQm91bmRpbmdCb3h9IGJib3hcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGludGVyc2VjdEJvdW5kaW5nQm94OiBmdW5jdGlvbiAoYmJveCkge1xuICAgICAgICB2YXIgX21pbiA9IHRoaXMubWluLmFycmF5O1xuICAgICAgICB2YXIgX21heCA9IHRoaXMubWF4LmFycmF5O1xuXG4gICAgICAgIHZhciBfbWluMiA9IGJib3gubWluLmFycmF5O1xuICAgICAgICB2YXIgX21heDIgPSBiYm94Lm1heC5hcnJheTtcblxuICAgICAgICByZXR1cm4gISAoX21pblswXSA+IF9tYXgyWzBdIHx8IF9taW5bMV0gPiBfbWF4MlsxXSB8fCBfbWluWzJdID4gX21heDJbMl1cbiAgICAgICAgICAgIHx8IF9tYXhbMF0gPCBfbWluMlswXSB8fCBfbWF4WzFdIDwgX21pbjJbMV0gfHwgX21heFsyXSA8IF9taW4yWzJdKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSWYgY29udGFpbiBhbm90aGVyIGJvdW5kaW5nIGJveCBlbnRpcmVseVxuICAgICAqIEBwYXJhbSAge2NsYXkuQm91bmRpbmdCb3h9IGJib3hcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGNvbnRhaW5Cb3VuZGluZ0JveDogZnVuY3Rpb24gKGJib3gpIHtcblxuICAgICAgICB2YXIgX21pbiA9IHRoaXMubWluLmFycmF5O1xuICAgICAgICB2YXIgX21heCA9IHRoaXMubWF4LmFycmF5O1xuXG4gICAgICAgIHZhciBfbWluMiA9IGJib3gubWluLmFycmF5O1xuICAgICAgICB2YXIgX21heDIgPSBiYm94Lm1heC5hcnJheTtcblxuICAgICAgICByZXR1cm4gX21pblswXSA8PSBfbWluMlswXSAmJiBfbWluWzFdIDw9IF9taW4yWzFdICYmIF9taW5bMl0gPD0gX21pbjJbMl1cbiAgICAgICAgICAgICYmIF9tYXhbMF0gPj0gX21heDJbMF0gJiYgX21heFsxXSA+PSBfbWF4MlsxXSAmJiBfbWF4WzJdID49IF9tYXgyWzJdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJZiBjb250YWluIHBvaW50IGVudGlyZWx5XG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBwb2ludFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgY29udGFpblBvaW50OiBmdW5jdGlvbiAocCkge1xuICAgICAgICB2YXIgX21pbiA9IHRoaXMubWluLmFycmF5O1xuICAgICAgICB2YXIgX21heCA9IHRoaXMubWF4LmFycmF5O1xuXG4gICAgICAgIHZhciBfcCA9IHAuYXJyYXk7XG5cbiAgICAgICAgcmV0dXJuIF9taW5bMF0gPD0gX3BbMF0gJiYgX21pblsxXSA8PSBfcFsxXSAmJiBfbWluWzJdIDw9IF9wWzJdXG4gICAgICAgICAgICAmJiBfbWF4WzBdID49IF9wWzBdICYmIF9tYXhbMV0gPj0gX3BbMV0gJiYgX21heFsyXSA+PSBfcFsyXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSWYgYm91bmRpbmcgYm94IGlzIGZpbml0ZVxuICAgICAqL1xuICAgIGlzRmluaXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfbWluID0gdGhpcy5taW4uYXJyYXk7XG4gICAgICAgIHZhciBfbWF4ID0gdGhpcy5tYXguYXJyYXk7XG4gICAgICAgIHJldHVybiBpc0Zpbml0ZShfbWluWzBdKSAmJiBpc0Zpbml0ZShfbWluWzFdKSAmJiBpc0Zpbml0ZShfbWluWzJdKVxuICAgICAgICAgICAgJiYgaXNGaW5pdGUoX21heFswXSkgJiYgaXNGaW5pdGUoX21heFsxXSkgJiYgaXNGaW5pdGUoX21heFsyXSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFwcGx5IGFuIGFmZmluZSB0cmFuc2Zvcm0gbWF0cml4IHRvIHRoZSBib3VuZGluZyBib3hcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG1hdHJpeFxuICAgICAqL1xuICAgIGFwcGx5VHJhbnNmb3JtOiBmdW5jdGlvbiAobWF0cml4KSB7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtRnJvbSh0aGlzLCBtYXRyaXgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgZnJvbSBhbm90aGVyIGJvdW5kaW5nIGJveCBhbmQgYW4gYWZmaW5lIHRyYW5zZm9ybSBtYXRyaXguXG4gICAgICogQHBhcmFtIHtjbGF5LkJvdW5kaW5nQm94fSBzb3VyY2VcbiAgICAgKiBAcGFyYW0ge2NsYXkuTWF0cml4NH0gbWF0cml4XG4gICAgICovXG4gICAgdHJhbnNmb3JtRnJvbTogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gaHR0cDovL2Rldi50aGVvbWFkZXIuY29tL3RyYW5zZm9ybS1ib3VuZGluZy1ib3hlcy9cbiAgICAgICAgdmFyIHhhID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdmFyIHhiID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdmFyIHlhID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdmFyIHliID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdmFyIHphID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdmFyIHpiID0gdmVjMy5jcmVhdGUoKTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSwgbWF0cml4KSB7XG4gICAgICAgICAgICB2YXIgbWluID0gc291cmNlLm1pbi5hcnJheTtcbiAgICAgICAgICAgIHZhciBtYXggPSBzb3VyY2UubWF4LmFycmF5O1xuXG4gICAgICAgICAgICB2YXIgbSA9IG1hdHJpeC5hcnJheTtcblxuICAgICAgICAgICAgeGFbMF0gPSBtWzBdICogbWluWzBdOyB4YVsxXSA9IG1bMV0gKiBtaW5bMF07IHhhWzJdID0gbVsyXSAqIG1pblswXTtcbiAgICAgICAgICAgIHhiWzBdID0gbVswXSAqIG1heFswXTsgeGJbMV0gPSBtWzFdICogbWF4WzBdOyB4YlsyXSA9IG1bMl0gKiBtYXhbMF07XG5cbiAgICAgICAgICAgIHlhWzBdID0gbVs0XSAqIG1pblsxXTsgeWFbMV0gPSBtWzVdICogbWluWzFdOyB5YVsyXSA9IG1bNl0gKiBtaW5bMV07XG4gICAgICAgICAgICB5YlswXSA9IG1bNF0gKiBtYXhbMV07IHliWzFdID0gbVs1XSAqIG1heFsxXTsgeWJbMl0gPSBtWzZdICogbWF4WzFdO1xuXG4gICAgICAgICAgICB6YVswXSA9IG1bOF0gKiBtaW5bMl07IHphWzFdID0gbVs5XSAqIG1pblsyXTsgemFbMl0gPSBtWzEwXSAqIG1pblsyXTtcbiAgICAgICAgICAgIHpiWzBdID0gbVs4XSAqIG1heFsyXTsgemJbMV0gPSBtWzldICogbWF4WzJdOyB6YlsyXSA9IG1bMTBdICogbWF4WzJdO1xuXG4gICAgICAgICAgICBtaW4gPSB0aGlzLm1pbi5hcnJheTtcbiAgICAgICAgICAgIG1heCA9IHRoaXMubWF4LmFycmF5O1xuICAgICAgICAgICAgbWluWzBdID0gTWF0aC5taW4oeGFbMF0sIHhiWzBdKSArIE1hdGgubWluKHlhWzBdLCB5YlswXSkgKyBNYXRoLm1pbih6YVswXSwgemJbMF0pICsgbVsxMl07XG4gICAgICAgICAgICBtaW5bMV0gPSBNYXRoLm1pbih4YVsxXSwgeGJbMV0pICsgTWF0aC5taW4oeWFbMV0sIHliWzFdKSArIE1hdGgubWluKHphWzFdLCB6YlsxXSkgKyBtWzEzXTtcbiAgICAgICAgICAgIG1pblsyXSA9IE1hdGgubWluKHhhWzJdLCB4YlsyXSkgKyBNYXRoLm1pbih5YVsyXSwgeWJbMl0pICsgTWF0aC5taW4oemFbMl0sIHpiWzJdKSArIG1bMTRdO1xuXG4gICAgICAgICAgICBtYXhbMF0gPSBNYXRoLm1heCh4YVswXSwgeGJbMF0pICsgTWF0aC5tYXgoeWFbMF0sIHliWzBdKSArIE1hdGgubWF4KHphWzBdLCB6YlswXSkgKyBtWzEyXTtcbiAgICAgICAgICAgIG1heFsxXSA9IE1hdGgubWF4KHhhWzFdLCB4YlsxXSkgKyBNYXRoLm1heCh5YVsxXSwgeWJbMV0pICsgTWF0aC5tYXgoemFbMV0sIHpiWzFdKSArIG1bMTNdO1xuICAgICAgICAgICAgbWF4WzJdID0gTWF0aC5tYXgoeGFbMl0sIHhiWzJdKSArIE1hdGgubWF4KHlhWzJdLCB5YlsyXSkgKyBNYXRoLm1heCh6YVsyXSwgemJbMl0pICsgbVsxNF07XG5cbiAgICAgICAgICAgIHRoaXMubWluLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm1heC5fZGlydHkgPSB0cnVlO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICB9KSgpLFxuXG4gICAgLyoqXG4gICAgICogQXBwbHkgYSBwcm9qZWN0aW9uIG1hdHJpeCB0byB0aGUgYm91bmRpbmcgYm94XG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBtYXRyaXhcbiAgICAgKi9cbiAgICBhcHBseVByb2plY3Rpb246IGZ1bmN0aW9uIChtYXRyaXgpIHtcbiAgICAgICAgdmFyIG1pbiA9IHRoaXMubWluLmFycmF5O1xuICAgICAgICB2YXIgbWF4ID0gdGhpcy5tYXguYXJyYXk7XG5cbiAgICAgICAgdmFyIG0gPSBtYXRyaXguYXJyYXk7XG4gICAgICAgIC8vIG1pbiBpbiBtaW4gelxuICAgICAgICB2YXIgdjEwID0gbWluWzBdO1xuICAgICAgICB2YXIgdjExID0gbWluWzFdO1xuICAgICAgICB2YXIgdjEyID0gbWluWzJdO1xuICAgICAgICAvLyBtYXggaW4gbWluIHpcbiAgICAgICAgdmFyIHYyMCA9IG1heFswXTtcbiAgICAgICAgdmFyIHYyMSA9IG1heFsxXTtcbiAgICAgICAgdmFyIHYyMiA9IG1pblsyXTtcbiAgICAgICAgLy8gbWF4IGluIG1heCB6XG4gICAgICAgIHZhciB2MzAgPSBtYXhbMF07XG4gICAgICAgIHZhciB2MzEgPSBtYXhbMV07XG4gICAgICAgIHZhciB2MzIgPSBtYXhbMl07XG5cbiAgICAgICAgaWYgKG1bMTVdID09PSAxKSB7ICAvLyBPcnRob2dyYXBoaWMgcHJvamVjdGlvblxuICAgICAgICAgICAgbWluWzBdID0gbVswXSAqIHYxMCArIG1bMTJdO1xuICAgICAgICAgICAgbWluWzFdID0gbVs1XSAqIHYxMSArIG1bMTNdO1xuICAgICAgICAgICAgbWF4WzJdID0gbVsxMF0gKiB2MTIgKyBtWzE0XTtcblxuICAgICAgICAgICAgbWF4WzBdID0gbVswXSAqIHYzMCArIG1bMTJdO1xuICAgICAgICAgICAgbWF4WzFdID0gbVs1XSAqIHYzMSArIG1bMTNdO1xuICAgICAgICAgICAgbWluWzJdID0gbVsxMF0gKiB2MzIgKyBtWzE0XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB3ID0gLTEgLyB2MTI7XG4gICAgICAgICAgICBtaW5bMF0gPSBtWzBdICogdjEwICogdztcbiAgICAgICAgICAgIG1pblsxXSA9IG1bNV0gKiB2MTEgKiB3O1xuICAgICAgICAgICAgbWF4WzJdID0gKG1bMTBdICogdjEyICsgbVsxNF0pICogdztcblxuICAgICAgICAgICAgdyA9IC0xIC8gdjIyO1xuICAgICAgICAgICAgbWF4WzBdID0gbVswXSAqIHYyMCAqIHc7XG4gICAgICAgICAgICBtYXhbMV0gPSBtWzVdICogdjIxICogdztcblxuICAgICAgICAgICAgdyA9IC0xIC8gdjMyO1xuICAgICAgICAgICAgbWluWzJdID0gKG1bMTBdICogdjMyICsgbVsxNF0pICogdztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1pbi5fZGlydHkgPSB0cnVlO1xuICAgICAgICB0aGlzLm1heC5fZGlydHkgPSB0cnVlO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICB1cGRhdGVWZXJ0aWNlczogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuICAgICAgICBpZiAoIXZlcnRpY2VzKSB7XG4gICAgICAgICAgICAvLyBDdWJlIHZlcnRpY2VzXG4gICAgICAgICAgICB2ZXJ0aWNlcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlc1tpXSA9IHZlYzMuZnJvbVZhbHVlcygwLCAwLCAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFaWdodCBjb29yZHMgb2YgYm91bmRpbmcgYm94XG4gICAgICAgICAgICAgKiBAdHlwZSB7RmxvYXQzMkFycmF5W119XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMudmVydGljZXMgPSB2ZXJ0aWNlcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWluID0gdGhpcy5taW4uYXJyYXk7XG4gICAgICAgIHZhciBtYXggPSB0aGlzLm1heC5hcnJheTtcbiAgICAgICAgLy8tLS0gbWluIHpcbiAgICAgICAgLy8gbWluIHhcbiAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1swXSwgbWluWzBdLCBtaW5bMV0sIG1pblsyXSk7XG4gICAgICAgIHZlYzNTZXQodmVydGljZXNbMV0sIG1pblswXSwgbWF4WzFdLCBtaW5bMl0pO1xuICAgICAgICAvLyBtYXggeFxuICAgICAgICB2ZWMzU2V0KHZlcnRpY2VzWzJdLCBtYXhbMF0sIG1pblsxXSwgbWluWzJdKTtcbiAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1szXSwgbWF4WzBdLCBtYXhbMV0sIG1pblsyXSk7XG5cbiAgICAgICAgLy8tLSBtYXggelxuICAgICAgICB2ZWMzU2V0KHZlcnRpY2VzWzRdLCBtaW5bMF0sIG1pblsxXSwgbWF4WzJdKTtcbiAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1s1XSwgbWluWzBdLCBtYXhbMV0sIG1heFsyXSk7XG4gICAgICAgIHZlYzNTZXQodmVydGljZXNbNl0sIG1heFswXSwgbWluWzFdLCBtYXhbMl0pO1xuICAgICAgICB2ZWMzU2V0KHZlcnRpY2VzWzddLCBtYXhbMF0sIG1heFsxXSwgbWF4WzJdKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENvcHkgdmFsdWVzIGZyb20gYW5vdGhlciBib3VuZGluZyBib3hcbiAgICAgKiBAcGFyYW0gIHtjbGF5LkJvdW5kaW5nQm94fSBiYm94XG4gICAgICovXG4gICAgY29weTogZnVuY3Rpb24gKGJib3gpIHtcbiAgICAgICAgdmFyIG1pbiA9IHRoaXMubWluO1xuICAgICAgICB2YXIgbWF4ID0gdGhpcy5tYXg7XG4gICAgICAgIHZlYzNDb3B5KG1pbi5hcnJheSwgYmJveC5taW4uYXJyYXkpO1xuICAgICAgICB2ZWMzQ29weShtYXguYXJyYXksIGJib3gubWF4LmFycmF5KTtcbiAgICAgICAgbWluLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIG1heC5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xvbmUgYSBuZXcgYm91bmRpbmcgYm94XG4gICAgICogQHJldHVybiB7Y2xheS5Cb3VuZGluZ0JveH1cbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgICAgYm91bmRpbmdCb3guY29weSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGJvdW5kaW5nQm94O1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IEJvdW5kaW5nQm94O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL0JvdW5kaW5nQm94LmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_util__ = __webpack_require__(56);\n\n\n\n\nvar isPowerOfTwo = __WEBPACK_IMPORTED_MODULE_3__math_util__[\"a\" /* default */].isPowerOfTwo;\n\nfunction nearestPowerOfTwo(val) {\n    return Math.pow(2, Math.round(Math.log(val) / Math.LN2));\n}\nfunction convertTextureToPowerOfTwo(texture, canvas) {\n    // var canvas = document.createElement('canvas');\n    var width = nearestPowerOfTwo(texture.width);\n    var height = nearestPowerOfTwo(texture.height);\n    canvas = canvas || document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    var ctx = canvas.getContext('2d');\n    ctx.drawImage(texture.image, 0, 0, width, height);\n\n    return canvas;\n}\n\n/**\n * @constructor clay.Texture2D\n * @extends clay.Texture\n *\n * @example\n *     ...\n *     var mat = new clay.Material({\n *         shader: clay.shader.library.get('clay.phong', 'diffuseMap')\n *     });\n *     var diffuseMap = new clay.Texture2D();\n *     diffuseMap.load('assets/textures/diffuse.jpg');\n *     mat.set('diffuseMap', diffuseMap);\n *     ...\n *     diffuseMap.success(function () {\n *         // Wait for the diffuse texture loaded\n *         animation.on('frame', function (frameTime) {\n *             renderer.render(scene, camera);\n *         });\n *     });\n */\nvar Texture2D = __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Texture2D# */ {\n        /**\n         * @type {?HTMLImageElement|HTMLCanvasElemnet}\n         */\n        // TODO mark dirty when assigned.\n        image: null,\n        /**\n         * Pixels data. Will be ignored if image is set.\n         * @type {?Uint8Array|Float32Array}\n         */\n        pixels: null,\n        /**\n         * @type {Array.<Object>}\n         * @example\n         *     [{\n         *         image: mipmap0,\n         *         pixels: null\n         *     }, {\n         *         image: mipmap1,\n         *         pixels: null\n         *     }, ....]\n         */\n        mipmaps: [],\n\n        /**\n         * If convert texture to power-of-two\n         * @type {boolean}\n         */\n        convertToPOT: false\n    };\n}, {\n\n    textureType: 'texture2D',\n\n    update: function (renderer) {\n\n        var _gl = renderer.gl;\n        _gl.bindTexture(_gl.TEXTURE_2D, this._cache.get('webgl_texture'));\n\n        this.updateCommon(renderer);\n\n        var glFormat = this.format;\n        var glType = this.type;\n\n        // Convert to pot is only available when using image/canvas/video element.\n        var convertToPOT = !!(this.convertToPOT\n            && !this.mipmaps.length && this.image\n            && (this.wrapS === __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].REPEAT || this.wrapT === __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].REPEAT)\n            && this.NPOT\n        );\n\n        _gl.texParameteri(_gl.TEXTURE_2D, _gl.TEXTURE_WRAP_S, convertToPOT ? this.wrapS : this.getAvailableWrapS());\n        _gl.texParameteri(_gl.TEXTURE_2D, _gl.TEXTURE_WRAP_T, convertToPOT ? this.wrapT : this.getAvailableWrapT());\n\n        _gl.texParameteri(_gl.TEXTURE_2D, _gl.TEXTURE_MAG_FILTER, convertToPOT ? this.magFilter : this.getAvailableMagFilter());\n        _gl.texParameteri(_gl.TEXTURE_2D, _gl.TEXTURE_MIN_FILTER, convertToPOT ? this.minFilter : this.getAvailableMinFilter());\n\n        var anisotropicExt = renderer.getGLExtension('EXT_texture_filter_anisotropic');\n        if (anisotropicExt && this.anisotropic > 1) {\n            _gl.texParameterf(_gl.TEXTURE_2D, anisotropicExt.TEXTURE_MAX_ANISOTROPY_EXT, this.anisotropic);\n        }\n\n        // Fallback to float type if browser don't have half float extension\n        if (glType === 36193) {\n            var halfFloatExt = renderer.getGLExtension('OES_texture_half_float');\n            if (!halfFloatExt) {\n                glType = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].FLOAT;\n            }\n        }\n\n        if (this.mipmaps.length) {\n            var width = this.width;\n            var height = this.height;\n            for (var i = 0; i < this.mipmaps.length; i++) {\n                var mipmap = this.mipmaps[i];\n                this._updateTextureData(_gl, mipmap, i, width, height, glFormat, glType, false);\n                width /= 2;\n                height /= 2;\n            }\n        }\n        else {\n            this._updateTextureData(_gl, this, 0, this.width, this.height, glFormat, glType, convertToPOT);\n\n            if (this.useMipmap && (!this.NPOT || convertToPOT)) {\n                _gl.generateMipmap(_gl.TEXTURE_2D);\n            }\n        }\n\n        _gl.bindTexture(_gl.TEXTURE_2D, null);\n    },\n\n    _updateTextureData: function (_gl, data, level, width, height, glFormat, glType, convertToPOT) {\n        if (data.image) {\n            var imgData = data.image;\n            if (convertToPOT) {\n                this._potCanvas = convertTextureToPowerOfTwo(this, this._potCanvas);\n                imgData = this._potCanvas;\n            }\n            _gl.texImage2D(_gl.TEXTURE_2D, level, glFormat, glFormat, glType, imgData);\n        }\n        else {\n            // Can be used as a blank texture when writing render to texture(RTT)\n            if (\n                // S3TC\n                (glFormat <= __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGBA_S3TC_DXT5_EXT\n                    && glFormat >= __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGB_S3TC_DXT1_EXT)\n                // ETC\n                || glFormat === __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGB_ETC1_WEBGL\n                // PVRTC\n                || (glFormat >= __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGB_PVRTC_4BPPV1_IMG\n                    && glFormat <= __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGBA_PVRTC_2BPPV1_IMG)\n                // ATC\n                || (glFormat === __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGB_ATC_WEBGL\n                    && glFormat === __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL\n                    && glFormat === __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL)\n            ) {\n                _gl.compressedTexImage2D(_gl.TEXTURE_2D, level, glFormat, width, height, 0, data.pixels);\n            }\n            else {\n                // Is a render target if pixels is null\n                _gl.texImage2D(_gl.TEXTURE_2D, level, glFormat, width, height, 0, glFormat, glType, data.pixels);\n            }\n        }\n    },\n\n    /**\n     * @param  {clay.Renderer} renderer\n     * @memberOf clay.Texture2D.prototype\n     */\n    generateMipmap: function (renderer) {\n        var _gl = renderer.gl;\n        if (this.useMipmap && !this.NPOT) {\n            _gl.bindTexture(_gl.TEXTURE_2D, this._cache.get('webgl_texture'));\n            _gl.generateMipmap(_gl.TEXTURE_2D);\n        }\n    },\n\n    isPowerOfTwo: function () {\n        return isPowerOfTwo(this.width) && isPowerOfTwo(this.height);\n    },\n\n    isRenderable: function () {\n        if (this.image) {\n            return this.image.width > 0 && this.image.height > 0;\n        }\n        else {\n            return !!(this.width && this.height);\n        }\n    },\n\n    bind: function (renderer) {\n        renderer.gl.bindTexture(renderer.gl.TEXTURE_2D, this.getWebGLTexture(renderer));\n    },\n\n    unbind: function (renderer) {\n        renderer.gl.bindTexture(renderer.gl.TEXTURE_2D, null);\n    },\n\n    load: function (src, crossOrigin) {\n        var image = __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].createImage();\n        if (crossOrigin) {\n            image.crossOrigin = crossOrigin;\n        }\n        var self = this;\n        image.onload = function () {\n            self.dirty();\n            self.trigger('success', self);\n        };\n        image.onerror = function () {\n            self.trigger('error', self);\n        };\n\n        image.src = src;\n        this.image = image;\n\n        return this;\n    }\n});\n\nObject.defineProperty(Texture2D.prototype, 'width', {\n    get: function () {\n        if (this.image) {\n            return this.image.width;\n        }\n        return this._width;\n    },\n    set: function (value) {\n        if (this.image) {\n            console.warn('Texture from image can\\'t set width');\n        }\n        else {\n            if (this._width !== value) {\n                this.dirty();\n            }\n            this._width = value;\n        }\n    }\n});\nObject.defineProperty(Texture2D.prototype, 'height', {\n    get: function () {\n        if (this.image) {\n            return this.image.height;\n        }\n        return this._height;\n    },\n    set: function (value) {\n        if (this.image) {\n            console.warn('Texture from image can\\'t set height');\n        }\n        else {\n            if (this._height !== value) {\n                this.dirty();\n            }\n            this._height = value;\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Texture2D);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9UZXh0dXJlMkQuanM/NTJiMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVGV4dHVyZSBmcm9tICcuL1RleHR1cmUnO1xuaW1wb3J0IGdsZW51bSBmcm9tICcuL2NvcmUvZ2xlbnVtJztcbmltcG9ydCB2ZW5kb3IgZnJvbSAnLi9jb3JlL3ZlbmRvcic7XG5pbXBvcnQgbWF0aFV0aWwgZnJvbSAnLi9tYXRoL3V0aWwnO1xudmFyIGlzUG93ZXJPZlR3byA9IG1hdGhVdGlsLmlzUG93ZXJPZlR3bztcblxuZnVuY3Rpb24gbmVhcmVzdFBvd2VyT2ZUd28odmFsKSB7XG4gICAgcmV0dXJuIE1hdGgucG93KDIsIE1hdGgucm91bmQoTWF0aC5sb2codmFsKSAvIE1hdGguTE4yKSk7XG59XG5mdW5jdGlvbiBjb252ZXJ0VGV4dHVyZVRvUG93ZXJPZlR3byh0ZXh0dXJlLCBjYW52YXMpIHtcbiAgICAvLyB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdmFyIHdpZHRoID0gbmVhcmVzdFBvd2VyT2ZUd28odGV4dHVyZS53aWR0aCk7XG4gICAgdmFyIGhlaWdodCA9IG5lYXJlc3RQb3dlck9mVHdvKHRleHR1cmUuaGVpZ2h0KTtcbiAgICBjYW52YXMgPSBjYW52YXMgfHwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgY3R4LmRyYXdJbWFnZSh0ZXh0dXJlLmltYWdlLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgIHJldHVybiBjYW52YXM7XG59XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuVGV4dHVyZTJEXG4gKiBAZXh0ZW5kcyBjbGF5LlRleHR1cmVcbiAqXG4gKiBAZXhhbXBsZVxuICogICAgIC4uLlxuICogICAgIHZhciBtYXQgPSBuZXcgY2xheS5NYXRlcmlhbCh7XG4gKiAgICAgICAgIHNoYWRlcjogY2xheS5zaGFkZXIubGlicmFyeS5nZXQoJ2NsYXkucGhvbmcnLCAnZGlmZnVzZU1hcCcpXG4gKiAgICAgfSk7XG4gKiAgICAgdmFyIGRpZmZ1c2VNYXAgPSBuZXcgY2xheS5UZXh0dXJlMkQoKTtcbiAqICAgICBkaWZmdXNlTWFwLmxvYWQoJ2Fzc2V0cy90ZXh0dXJlcy9kaWZmdXNlLmpwZycpO1xuICogICAgIG1hdC5zZXQoJ2RpZmZ1c2VNYXAnLCBkaWZmdXNlTWFwKTtcbiAqICAgICAuLi5cbiAqICAgICBkaWZmdXNlTWFwLnN1Y2Nlc3MoZnVuY3Rpb24gKCkge1xuICogICAgICAgICAvLyBXYWl0IGZvciB0aGUgZGlmZnVzZSB0ZXh0dXJlIGxvYWRlZFxuICogICAgICAgICBhbmltYXRpb24ub24oJ2ZyYW1lJywgZnVuY3Rpb24gKGZyYW1lVGltZSkge1xuICogICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICogICAgICAgICB9KTtcbiAqICAgICB9KTtcbiAqL1xudmFyIFRleHR1cmUyRCA9IFRleHR1cmUuZXh0ZW5kKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5LlRleHR1cmUyRCMgKi8ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgez9IVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtbmV0fVxuICAgICAgICAgKi9cbiAgICAgICAgLy8gVE9ETyBtYXJrIGRpcnR5IHdoZW4gYXNzaWduZWQuXG4gICAgICAgIGltYWdlOiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgICogUGl4ZWxzIGRhdGEuIFdpbGwgYmUgaWdub3JlZCBpZiBpbWFnZSBpcyBzZXQuXG4gICAgICAgICAqIEB0eXBlIHs/VWludDhBcnJheXxGbG9hdDMyQXJyYXl9XG4gICAgICAgICAqL1xuICAgICAgICBwaXhlbHM6IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXkuPE9iamVjdD59XG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqICAgICBbe1xuICAgICAgICAgKiAgICAgICAgIGltYWdlOiBtaXBtYXAwLFxuICAgICAgICAgKiAgICAgICAgIHBpeGVsczogbnVsbFxuICAgICAgICAgKiAgICAgfSwge1xuICAgICAgICAgKiAgICAgICAgIGltYWdlOiBtaXBtYXAxLFxuICAgICAgICAgKiAgICAgICAgIHBpeGVsczogbnVsbFxuICAgICAgICAgKiAgICAgfSwgLi4uLl1cbiAgICAgICAgICovXG4gICAgICAgIG1pcG1hcHM6IFtdLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBjb252ZXJ0IHRleHR1cmUgdG8gcG93ZXItb2YtdHdvXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgY29udmVydFRvUE9UOiBmYWxzZVxuICAgIH07XG59LCB7XG5cbiAgICB0ZXh0dXJlVHlwZTogJ3RleHR1cmUyRCcsXG5cbiAgICB1cGRhdGU6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuXG4gICAgICAgIHZhciBfZ2wgPSByZW5kZXJlci5nbDtcbiAgICAgICAgX2dsLmJpbmRUZXh0dXJlKF9nbC5URVhUVVJFXzJELCB0aGlzLl9jYWNoZS5nZXQoJ3dlYmdsX3RleHR1cmUnKSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVDb21tb24ocmVuZGVyZXIpO1xuXG4gICAgICAgIHZhciBnbEZvcm1hdCA9IHRoaXMuZm9ybWF0O1xuICAgICAgICB2YXIgZ2xUeXBlID0gdGhpcy50eXBlO1xuXG4gICAgICAgIC8vIENvbnZlcnQgdG8gcG90IGlzIG9ubHkgYXZhaWxhYmxlIHdoZW4gdXNpbmcgaW1hZ2UvY2FudmFzL3ZpZGVvIGVsZW1lbnQuXG4gICAgICAgIHZhciBjb252ZXJ0VG9QT1QgPSAhISh0aGlzLmNvbnZlcnRUb1BPVFxuICAgICAgICAgICAgJiYgIXRoaXMubWlwbWFwcy5sZW5ndGggJiYgdGhpcy5pbWFnZVxuICAgICAgICAgICAgJiYgKHRoaXMud3JhcFMgPT09IFRleHR1cmUuUkVQRUFUIHx8IHRoaXMud3JhcFQgPT09IFRleHR1cmUuUkVQRUFUKVxuICAgICAgICAgICAgJiYgdGhpcy5OUE9UXG4gICAgICAgICk7XG5cbiAgICAgICAgX2dsLnRleFBhcmFtZXRlcmkoX2dsLlRFWFRVUkVfMkQsIF9nbC5URVhUVVJFX1dSQVBfUywgY29udmVydFRvUE9UID8gdGhpcy53cmFwUyA6IHRoaXMuZ2V0QXZhaWxhYmxlV3JhcFMoKSk7XG4gICAgICAgIF9nbC50ZXhQYXJhbWV0ZXJpKF9nbC5URVhUVVJFXzJELCBfZ2wuVEVYVFVSRV9XUkFQX1QsIGNvbnZlcnRUb1BPVCA/IHRoaXMud3JhcFQgOiB0aGlzLmdldEF2YWlsYWJsZVdyYXBUKCkpO1xuXG4gICAgICAgIF9nbC50ZXhQYXJhbWV0ZXJpKF9nbC5URVhUVVJFXzJELCBfZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBjb252ZXJ0VG9QT1QgPyB0aGlzLm1hZ0ZpbHRlciA6IHRoaXMuZ2V0QXZhaWxhYmxlTWFnRmlsdGVyKCkpO1xuICAgICAgICBfZ2wudGV4UGFyYW1ldGVyaShfZ2wuVEVYVFVSRV8yRCwgX2dsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgY29udmVydFRvUE9UID8gdGhpcy5taW5GaWx0ZXIgOiB0aGlzLmdldEF2YWlsYWJsZU1pbkZpbHRlcigpKTtcblxuICAgICAgICB2YXIgYW5pc290cm9waWNFeHQgPSByZW5kZXJlci5nZXRHTEV4dGVuc2lvbignRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJyk7XG4gICAgICAgIGlmIChhbmlzb3Ryb3BpY0V4dCAmJiB0aGlzLmFuaXNvdHJvcGljID4gMSkge1xuICAgICAgICAgICAgX2dsLnRleFBhcmFtZXRlcmYoX2dsLlRFWFRVUkVfMkQsIGFuaXNvdHJvcGljRXh0LlRFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhULCB0aGlzLmFuaXNvdHJvcGljKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIGZsb2F0IHR5cGUgaWYgYnJvd3NlciBkb24ndCBoYXZlIGhhbGYgZmxvYXQgZXh0ZW5zaW9uXG4gICAgICAgIGlmIChnbFR5cGUgPT09IDM2MTkzKSB7XG4gICAgICAgICAgICB2YXIgaGFsZkZsb2F0RXh0ID0gcmVuZGVyZXIuZ2V0R0xFeHRlbnNpb24oJ09FU190ZXh0dXJlX2hhbGZfZmxvYXQnKTtcbiAgICAgICAgICAgIGlmICghaGFsZkZsb2F0RXh0KSB7XG4gICAgICAgICAgICAgICAgZ2xUeXBlID0gZ2xlbnVtLkZMT0FUO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubWlwbWFwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMud2lkdGg7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubWlwbWFwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBtaXBtYXAgPSB0aGlzLm1pcG1hcHNbaV07XG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVGV4dHVyZURhdGEoX2dsLCBtaXBtYXAsIGksIHdpZHRoLCBoZWlnaHQsIGdsRm9ybWF0LCBnbFR5cGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB3aWR0aCAvPSAyO1xuICAgICAgICAgICAgICAgIGhlaWdodCAvPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlVGV4dHVyZURhdGEoX2dsLCB0aGlzLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCwgZ2xGb3JtYXQsIGdsVHlwZSwgY29udmVydFRvUE9UKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMudXNlTWlwbWFwICYmICghdGhpcy5OUE9UIHx8IGNvbnZlcnRUb1BPVCkpIHtcbiAgICAgICAgICAgICAgICBfZ2wuZ2VuZXJhdGVNaXBtYXAoX2dsLlRFWFRVUkVfMkQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgX2dsLmJpbmRUZXh0dXJlKF9nbC5URVhUVVJFXzJELCBudWxsKTtcbiAgICB9LFxuXG4gICAgX3VwZGF0ZVRleHR1cmVEYXRhOiBmdW5jdGlvbiAoX2dsLCBkYXRhLCBsZXZlbCwgd2lkdGgsIGhlaWdodCwgZ2xGb3JtYXQsIGdsVHlwZSwgY29udmVydFRvUE9UKSB7XG4gICAgICAgIGlmIChkYXRhLmltYWdlKSB7XG4gICAgICAgICAgICB2YXIgaW1nRGF0YSA9IGRhdGEuaW1hZ2U7XG4gICAgICAgICAgICBpZiAoY29udmVydFRvUE9UKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcG90Q2FudmFzID0gY29udmVydFRleHR1cmVUb1Bvd2VyT2ZUd28odGhpcywgdGhpcy5fcG90Q2FudmFzKTtcbiAgICAgICAgICAgICAgICBpbWdEYXRhID0gdGhpcy5fcG90Q2FudmFzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2dsLnRleEltYWdlMkQoX2dsLlRFWFRVUkVfMkQsIGxldmVsLCBnbEZvcm1hdCwgZ2xGb3JtYXQsIGdsVHlwZSwgaW1nRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBDYW4gYmUgdXNlZCBhcyBhIGJsYW5rIHRleHR1cmUgd2hlbiB3cml0aW5nIHJlbmRlciB0byB0ZXh0dXJlKFJUVClcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAvLyBTM1RDXG4gICAgICAgICAgICAgICAgKGdsRm9ybWF0IDw9IFRleHR1cmUuQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUNV9FWFRcbiAgICAgICAgICAgICAgICAgICAgJiYgZ2xGb3JtYXQgPj0gVGV4dHVyZS5DT01QUkVTU0VEX1JHQl9TM1RDX0RYVDFfRVhUKVxuICAgICAgICAgICAgICAgIC8vIEVUQ1xuICAgICAgICAgICAgICAgIHx8IGdsRm9ybWF0ID09PSBUZXh0dXJlLkNPTVBSRVNTRURfUkdCX0VUQzFfV0VCR0xcbiAgICAgICAgICAgICAgICAvLyBQVlJUQ1xuICAgICAgICAgICAgICAgIHx8IChnbEZvcm1hdCA+PSBUZXh0dXJlLkNPTVBSRVNTRURfUkdCX1BWUlRDXzRCUFBWMV9JTUdcbiAgICAgICAgICAgICAgICAgICAgJiYgZ2xGb3JtYXQgPD0gVGV4dHVyZS5DT01QUkVTU0VEX1JHQkFfUFZSVENfMkJQUFYxX0lNRylcbiAgICAgICAgICAgICAgICAvLyBBVENcbiAgICAgICAgICAgICAgICB8fCAoZ2xGb3JtYXQgPT09IFRleHR1cmUuQ09NUFJFU1NFRF9SR0JfQVRDX1dFQkdMXG4gICAgICAgICAgICAgICAgICAgICYmIGdsRm9ybWF0ID09PSBUZXh0dXJlLkNPTVBSRVNTRURfUkdCQV9BVENfRVhQTElDSVRfQUxQSEFfV0VCR0xcbiAgICAgICAgICAgICAgICAgICAgJiYgZ2xGb3JtYXQgPT09IFRleHR1cmUuQ09NUFJFU1NFRF9SR0JBX0FUQ19JTlRFUlBPTEFURURfQUxQSEFfV0VCR0wpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBfZ2wuY29tcHJlc3NlZFRleEltYWdlMkQoX2dsLlRFWFRVUkVfMkQsIGxldmVsLCBnbEZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMCwgZGF0YS5waXhlbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSXMgYSByZW5kZXIgdGFyZ2V0IGlmIHBpeGVscyBpcyBudWxsXG4gICAgICAgICAgICAgICAgX2dsLnRleEltYWdlMkQoX2dsLlRFWFRVUkVfMkQsIGxldmVsLCBnbEZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMCwgZ2xGb3JtYXQsIGdsVHlwZSwgZGF0YS5waXhlbHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICogQG1lbWJlck9mIGNsYXkuVGV4dHVyZTJELnByb3RvdHlwZVxuICAgICAqL1xuICAgIGdlbmVyYXRlTWlwbWFwOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuICAgICAgICBpZiAodGhpcy51c2VNaXBtYXAgJiYgIXRoaXMuTlBPVCkge1xuICAgICAgICAgICAgX2dsLmJpbmRUZXh0dXJlKF9nbC5URVhUVVJFXzJELCB0aGlzLl9jYWNoZS5nZXQoJ3dlYmdsX3RleHR1cmUnKSk7XG4gICAgICAgICAgICBfZ2wuZ2VuZXJhdGVNaXBtYXAoX2dsLlRFWFRVUkVfMkQpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGlzUG93ZXJPZlR3bzogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaXNQb3dlck9mVHdvKHRoaXMud2lkdGgpICYmIGlzUG93ZXJPZlR3byh0aGlzLmhlaWdodCk7XG4gICAgfSxcblxuICAgIGlzUmVuZGVyYWJsZTogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pbWFnZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2Uud2lkdGggPiAwICYmIHRoaXMuaW1hZ2UuaGVpZ2h0ID4gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAhISh0aGlzLndpZHRoICYmIHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBiaW5kOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgcmVuZGVyZXIuZ2wuYmluZFRleHR1cmUocmVuZGVyZXIuZ2wuVEVYVFVSRV8yRCwgdGhpcy5nZXRXZWJHTFRleHR1cmUocmVuZGVyZXIpKTtcbiAgICB9LFxuXG4gICAgdW5iaW5kOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgcmVuZGVyZXIuZ2wuYmluZFRleHR1cmUocmVuZGVyZXIuZ2wuVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgfSxcblxuICAgIGxvYWQ6IGZ1bmN0aW9uIChzcmMsIGNyb3NzT3JpZ2luKSB7XG4gICAgICAgIHZhciBpbWFnZSA9IHZlbmRvci5jcmVhdGVJbWFnZSgpO1xuICAgICAgICBpZiAoY3Jvc3NPcmlnaW4pIHtcbiAgICAgICAgICAgIGltYWdlLmNyb3NzT3JpZ2luID0gY3Jvc3NPcmlnaW47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLmRpcnR5KCk7XG4gICAgICAgICAgICBzZWxmLnRyaWdnZXIoJ3N1Y2Nlc3MnLCBzZWxmKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1hZ2Uub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYudHJpZ2dlcignZXJyb3InLCBzZWxmKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpbWFnZS5zcmMgPSBzcmM7XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHR1cmUyRC5wcm90b3R5cGUsICd3aWR0aCcsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmltYWdlLndpZHRoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl93aWR0aDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmltYWdlKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RleHR1cmUgZnJvbSBpbWFnZSBjYW5cXCd0IHNldCB3aWR0aCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3dpZHRoICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3dpZHRoID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZXh0dXJlMkQucHJvdG90eXBlLCAnaGVpZ2h0Jywge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pbWFnZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2UuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5pbWFnZSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUZXh0dXJlIGZyb20gaW1hZ2UgY2FuXFwndCBzZXQgaGVpZ2h0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faGVpZ2h0ICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2hlaWdodCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFRleHR1cmUyRDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvVGV4dHVyZTJELmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("var guid = 0;\n\nvar ArrayProto = Array.prototype;\nvar nativeForEach = ArrayProto.forEach;\n\n/**\n * Util functions\n * @namespace clay.core.util\n */\nvar util = {\n\n    /**\n     * Generate GUID\n     * @return {number}\n     * @memberOf clay.core.util\n     */\n    genGUID: function () {\n        return ++guid;\n    },\n    /**\n     * Relative path to absolute path\n     * @param  {string} path\n     * @param  {string} basePath\n     * @return {string}\n     * @memberOf clay.core.util\n     */\n    relative2absolute: function (path, basePath) {\n        if (!basePath || path.match(/^\\//)) {\n            return path;\n        }\n        var pathParts = path.split('/');\n        var basePathParts = basePath.split('/');\n\n        var item = pathParts[0];\n        while(item === '.' || item === '..') {\n            if (item === '..') {\n                basePathParts.pop();\n            }\n            pathParts.shift();\n            item = pathParts[0];\n        }\n        return basePathParts.join('/') + '/' + pathParts.join('/');\n    },\n\n    /**\n     * Extend target with source\n     * @param  {Object} target\n     * @param  {Object} source\n     * @return {Object}\n     * @memberOf clay.core.util\n     */\n    extend: function (target, source) {\n        if (source) {\n            for (var name in source) {\n                if (source.hasOwnProperty(name)) {\n                    target[name] = source[name];\n                }\n            }\n        }\n        return target;\n    },\n\n    /**\n     * Extend properties to target if not exist.\n     * @param  {Object} target\n     * @param  {Object} source\n     * @return {Object}\n     * @memberOf clay.core.util\n     */\n    defaults: function (target, source) {\n        if (source) {\n            for (var propName in source) {\n                if (target[propName] === undefined) {\n                    target[propName] = source[propName];\n                }\n            }\n        }\n        return target;\n    },\n    /**\n     * Extend properties with a given property list to avoid for..in.. iteration.\n     * @param  {Object} target\n     * @param  {Object} source\n     * @param  {Array.<string>} propList\n     * @return {Object}\n     * @memberOf clay.core.util\n     */\n    extendWithPropList: function (target, source, propList) {\n        if (source) {\n            for (var i = 0; i < propList.length; i++) {\n                var propName = propList[i];\n                target[propName] = source[propName];\n            }\n        }\n        return target;\n    },\n    /**\n     * Extend properties to target if not exist. With a given property list avoid for..in.. iteration.\n     * @param  {Object} target\n     * @param  {Object} source\n     * @param  {Array.<string>} propList\n     * @return {Object}\n     * @memberOf clay.core.util\n     */\n    defaultsWithPropList: function (target, source, propList) {\n        if (source) {\n            for (var i = 0; i < propList.length; i++) {\n                var propName = propList[i];\n                if (target[propName] == null) {\n                    target[propName] = source[propName];\n                }\n            }\n        }\n        return target;\n    },\n    /**\n     * @param  {Object|Array} obj\n     * @param  {Function} iterator\n     * @param  {Object} [context]\n     * @memberOf clay.core.util\n     */\n    each: function (obj, iterator, context) {\n        if (!(obj && iterator)) {\n            return;\n        }\n        if (obj.forEach && obj.forEach === nativeForEach) {\n            obj.forEach(iterator, context);\n        }\n        else if (obj.length === + obj.length) {\n            for (var i = 0, len = obj.length; i < len; i++) {\n                iterator.call(context, obj[i], i, obj);\n            }\n        }\n        else {\n            for (var key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    iterator.call(context, obj[key], key, obj);\n                }\n            }\n        }\n    },\n\n    /**\n     * Is object\n     * @param  {}  obj\n     * @return {boolean}\n     * @memberOf clay.core.util\n     */\n    isObject: function (obj) {\n        return obj === Object(obj);\n    },\n\n    /**\n     * Is array ?\n     * @param  {}  obj\n     * @return {boolean}\n     * @memberOf clay.core.util\n     */\n    isArray: function (obj) {\n        return Array.isArray(obj);\n    },\n\n    /**\n     * Is array like, which have a length property\n     * @param  {}  obj\n     * @return {boolean}\n     * @memberOf clay.core.util\n     */\n    isArrayLike: function (obj) {\n        if (!obj) {\n            return false;\n        }\n        else {\n            return obj.length === + obj.length;\n        }\n    },\n\n    /**\n     * @param  {} obj\n     * @return {}\n     * @memberOf clay.core.util\n     */\n    clone: function (obj) {\n        if (!util.isObject(obj)) {\n            return obj;\n        }\n        else if (util.isArray(obj)) {\n            return obj.slice();\n        }\n        else if (util.isArrayLike(obj)) { // is typed array\n            var ret = new obj.constructor(obj.length);\n            for (var i = 0; i < obj.length; i++) {\n                ret[i] = obj[i];\n            }\n            return ret;\n        }\n        else {\n            return util.extend({}, obj);\n        }\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (util);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb3JlL3V0aWwuanM/ZWZmOCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZ3VpZCA9IDA7XG5cbnZhciBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xudmFyIG5hdGl2ZUZvckVhY2ggPSBBcnJheVByb3RvLmZvckVhY2g7XG5cbi8qKlxuICogVXRpbCBmdW5jdGlvbnNcbiAqIEBuYW1lc3BhY2UgY2xheS5jb3JlLnV0aWxcbiAqL1xudmFyIHV0aWwgPSB7XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBHVUlEXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmNvcmUudXRpbFxuICAgICAqL1xuICAgIGdlbkdVSUQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICsrZ3VpZDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFJlbGF0aXZlIHBhdGggdG8gYWJzb2x1dGUgcGF0aFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gcGF0aFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gYmFzZVBhdGhcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICogQG1lbWJlck9mIGNsYXkuY29yZS51dGlsXG4gICAgICovXG4gICAgcmVsYXRpdmUyYWJzb2x1dGU6IGZ1bmN0aW9uIChwYXRoLCBiYXNlUGF0aCkge1xuICAgICAgICBpZiAoIWJhc2VQYXRoIHx8IHBhdGgubWF0Y2goL15cXC8vKSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhdGhQYXJ0cyA9IHBhdGguc3BsaXQoJy8nKTtcbiAgICAgICAgdmFyIGJhc2VQYXRoUGFydHMgPSBiYXNlUGF0aC5zcGxpdCgnLycpO1xuXG4gICAgICAgIHZhciBpdGVtID0gcGF0aFBhcnRzWzBdO1xuICAgICAgICB3aGlsZShpdGVtID09PSAnLicgfHwgaXRlbSA9PT0gJy4uJykge1xuICAgICAgICAgICAgaWYgKGl0ZW0gPT09ICcuLicpIHtcbiAgICAgICAgICAgICAgICBiYXNlUGF0aFBhcnRzLnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGF0aFBhcnRzLnNoaWZ0KCk7XG4gICAgICAgICAgICBpdGVtID0gcGF0aFBhcnRzWzBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYXNlUGF0aFBhcnRzLmpvaW4oJy8nKSArICcvJyArIHBhdGhQYXJ0cy5qb2luKCcvJyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEV4dGVuZCB0YXJnZXQgd2l0aCBzb3VyY2VcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHRhcmdldFxuICAgICAqIEBwYXJhbSAge09iamVjdH0gc291cmNlXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmNvcmUudXRpbFxuICAgICAqL1xuICAgIGV4dGVuZDogZnVuY3Rpb24gKHRhcmdldCwgc291cmNlKSB7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gc291cmNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRbbmFtZV0gPSBzb3VyY2VbbmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEV4dGVuZCBwcm9wZXJ0aWVzIHRvIHRhcmdldCBpZiBub3QgZXhpc3QuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSB0YXJnZXRcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHNvdXJjZVxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5jb3JlLnV0aWxcbiAgICAgKi9cbiAgICBkZWZhdWx0czogZnVuY3Rpb24gKHRhcmdldCwgc291cmNlKSB7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHByb3BOYW1lIGluIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRbcHJvcE5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BOYW1lXSA9IHNvdXJjZVtwcm9wTmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBFeHRlbmQgcHJvcGVydGllcyB3aXRoIGEgZ2l2ZW4gcHJvcGVydHkgbGlzdCB0byBhdm9pZCBmb3IuLmluLi4gaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gdGFyZ2V0XG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBzb3VyY2VcbiAgICAgKiBAcGFyYW0gIHtBcnJheS48c3RyaW5nPn0gcHJvcExpc3RcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQG1lbWJlck9mIGNsYXkuY29yZS51dGlsXG4gICAgICovXG4gICAgZXh0ZW5kV2l0aFByb3BMaXN0OiBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UsIHByb3BMaXN0KSB7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcE5hbWUgPSBwcm9wTGlzdFtpXTtcbiAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcE5hbWVdID0gc291cmNlW3Byb3BOYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogRXh0ZW5kIHByb3BlcnRpZXMgdG8gdGFyZ2V0IGlmIG5vdCBleGlzdC4gV2l0aCBhIGdpdmVuIHByb3BlcnR5IGxpc3QgYXZvaWQgZm9yLi5pbi4uIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHRhcmdldFxuICAgICAqIEBwYXJhbSAge09iamVjdH0gc291cmNlXG4gICAgICogQHBhcmFtICB7QXJyYXkuPHN0cmluZz59IHByb3BMaXN0XG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmNvcmUudXRpbFxuICAgICAqL1xuICAgIGRlZmF1bHRzV2l0aFByb3BMaXN0OiBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UsIHByb3BMaXN0KSB7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcE5hbWUgPSBwcm9wTGlzdFtpXTtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0W3Byb3BOYW1lXSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wTmFtZV0gPSBzb3VyY2VbcHJvcE5hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7T2JqZWN0fEFycmF5fSBvYmpcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gaXRlcmF0b3JcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFtjb250ZXh0XVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmNvcmUudXRpbFxuICAgICAqL1xuICAgIGVhY2g6IGZ1bmN0aW9uIChvYmosIGl0ZXJhdG9yLCBjb250ZXh0KSB7XG4gICAgICAgIGlmICghKG9iaiAmJiBpdGVyYXRvcikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2JqLmZvckVhY2ggJiYgb2JqLmZvckVhY2ggPT09IG5hdGl2ZUZvckVhY2gpIHtcbiAgICAgICAgICAgIG9iai5mb3JFYWNoKGl0ZXJhdG9yLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvYmoubGVuZ3RoID09PSArIG9iai5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBvYmoubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtpXSwgaSwgb2JqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3IuY2FsbChjb250ZXh0LCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJcyBvYmplY3RcbiAgICAgKiBAcGFyYW0gIHt9ICBvYmpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmNvcmUudXRpbFxuICAgICAqL1xuICAgIGlzT2JqZWN0OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogPT09IE9iamVjdChvYmopO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJcyBhcnJheSA/XG4gICAgICogQHBhcmFtICB7fSAgb2JqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5jb3JlLnV0aWxcbiAgICAgKi9cbiAgICBpc0FycmF5OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KG9iaik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIElzIGFycmF5IGxpa2UsIHdoaWNoIGhhdmUgYSBsZW5ndGggcHJvcGVydHlcbiAgICAgKiBAcGFyYW0gIHt9ICBvYmpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmNvcmUudXRpbFxuICAgICAqL1xuICAgIGlzQXJyYXlMaWtlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGlmICghb2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqLmxlbmd0aCA9PT0gKyBvYmoubGVuZ3RoO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge30gb2JqXG4gICAgICogQHJldHVybiB7fVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmNvcmUudXRpbFxuICAgICAqL1xuICAgIGNsb25lOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGlmICghdXRpbC5pc09iamVjdChvYmopKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHV0aWwuaXNBcnJheShvYmopKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqLnNsaWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodXRpbC5pc0FycmF5TGlrZShvYmopKSB7IC8vIGlzIHR5cGVkIGFycmF5XG4gICAgICAgICAgICB2YXIgcmV0ID0gbmV3IG9iai5jb25zdHJ1Y3RvcihvYmoubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmV0W2ldID0gb2JqW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsLmV4dGVuZCh7fSwgb2JqKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHV0aWw7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2NvcmUvdXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_color__ = __webpack_require__(49);\n\n\n\nvar parseColor = __WEBPACK_IMPORTED_MODULE_2__core_color__[\"a\" /* default */].parseToFloat;\n\nvar programKeyCache = {};\n\nfunction getDefineCode(defines) {\n    var defineKeys = Object.keys(defines);\n    defineKeys.sort();\n    var defineStr = [];\n    // Custom Defines\n    for (var i = 0; i < defineKeys.length; i++) {\n        var key = defineKeys[i];\n        var value = defines[key];\n        if (value === null) {\n            defineStr.push(key);\n        }\n        else{\n            defineStr.push(key + ' ' + value.toString());\n        }\n    }\n    return defineStr.join('\\n');\n}\n\nfunction getProgramKey(vertexDefines, fragmentDefines, enabledTextures) {\n    enabledTextures.sort();\n    var defineStr = [];\n    for (var i = 0; i < enabledTextures.length; i++) {\n        var symbol = enabledTextures[i];\n        defineStr.push(symbol);\n    }\n    var key = getDefineCode(vertexDefines) + '\\n'\n        + getDefineCode(fragmentDefines) + '\\n'\n        + defineStr.join('\\n');\n\n    if (programKeyCache[key]) {\n        return programKeyCache[key];\n    }\n\n    var id = __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].genGUID();\n    programKeyCache[key] = id;\n    return id;\n}\n\n/**\n * Material defines the appearance of mesh surface, like `color`, `roughness`, `metalness`, etc.\n * It contains a {@link clay.Shader} and corresponding uniforms.\n *\n * Here is a basic example to create a standard material\n```js\nvar material = new clay.Material({\n    shader: new clay.Shader(\n        clay.Shader.source('clay.vertex'),\n        clay.Shader.source('clay.fragment')\n    )\n});\n```\n * @constructor clay.Material\n * @extends clay.core.Base\n */\nvar Material = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Material# */ {\n        /**\n         * @type {string}\n         */\n        name: '',\n\n        /**\n         * @type {Object}\n         */\n        // uniforms: null,\n\n        /**\n         * @type {clay.Shader}\n         */\n        // shader: null,\n\n        /**\n         * @type {boolean}\n         */\n        depthTest: true,\n\n        /**\n         * @type {boolean}\n         */\n        depthMask: true,\n\n        /**\n         * @type {boolean}\n         */\n        transparent: false,\n        /**\n         * Blend func is a callback function when the material\n         * have custom blending\n         * The gl context will be the only argument passed in tho the\n         * blend function\n         * Detail of blend function in WebGL:\n         * http://www.khronos.org/registry/gles/specs/2.0/es_full_spec_2.0.25.pdf\n         *\n         * Example :\n         * function(_gl) {\n         *  _gl.blendEquation(_gl.FUNC_ADD);\n         *  _gl.blendFunc(_gl.SRC_ALPHA, _gl.ONE_MINUS_SRC_ALPHA);\n         * }\n         */\n        blend: null,\n\n        /**\n         * If update texture status automatically.\n         */\n        autoUpdateTextureStatus: true,\n\n        uniforms: {},\n        vertexDefines: {},\n        fragmentDefines: {},\n        _textureStatus: {},\n\n        // shadowTransparentMap : null\n\n        // PENDING enable the uniform that only used in shader.\n        _enabledUniforms: null,\n    };\n}, function () {\n    if (!this.name) {\n        this.name = 'MATERIAL_' + this.__uid__;\n    }\n\n    if (this.shader) {\n        // Keep status, mainly preset uniforms, vertexDefines and fragmentDefines\n        this.attachShader(this.shader, true);\n    }\n},\n/** @lends clay.Material.prototype */\n{\n    precision: 'highp',\n\n    /**\n     * Set material uniform\n     * @example\n     *  mat.setUniform('color', [1, 1, 1, 1]);\n     * @param {string} symbol\n     * @param {number|array|clay.Texture|ArrayBufferView} value\n     */\n    setUniform: function (symbol, value) {\n        if (value === undefined) {\n            console.warn('Uniform value \"' + symbol + '\" is undefined');\n        }\n        var uniform = this.uniforms[symbol];\n        if (uniform) {\n\n            if (typeof value === 'string') {\n                // Try to parse as a color. Invalid color string will return null.\n                value = parseColor(value) || value;\n            }\n\n            uniform.value = value;\n\n            if (this.autoUpdateTextureStatus && uniform.type === 't') {\n                if (value) {\n                    this.enableTexture(symbol);\n                }\n                else {\n                    this.disableTexture(symbol);\n                }\n            }\n        }\n    },\n\n    /**\n     * @param {Object} obj\n     */\n    setUniforms: function(obj) {\n        for (var key in obj) {\n            var val = obj[key];\n            this.setUniform(key, val);\n        }\n    },\n\n    /**\n     * @param  {string}  symbol\n     * @return {boolean}\n     */\n    isUniformEnabled: function (symbol) {\n        return this._enabledUniforms.indexOf(symbol) >= 0;\n    },\n\n    getEnabledUniforms: function () {\n        return this._enabledUniforms;\n    },\n    getTextureUniforms: function () {\n        return this._textureUniforms;\n    },\n\n    /**\n     * Alias of setUniform and setUniforms\n     * @param {object|string} symbol\n     * @param {number|array|clay.Texture|ArrayBufferView} [value]\n     */\n    set: function (symbol, value) {\n        if (typeof(symbol) === 'object') {\n            for (var key in symbol) {\n                var val = symbol[key];\n                this.setUniform(key, val);\n            }\n        }\n        else {\n            this.setUniform(symbol, value);\n        }\n    },\n    /**\n     * Get uniform value\n     * @param  {string} symbol\n     * @return {number|array|clay.Texture|ArrayBufferView}\n     */\n    get: function (symbol) {\n        var uniform = this.uniforms[symbol];\n        if (uniform) {\n            return uniform.value;\n        }\n    },\n    /**\n     * Attach a shader instance\n     * @param  {clay.Shader} shader\n     * @param  {boolean} keepStatus If try to keep uniform and texture\n     */\n    attachShader: function(shader, keepStatus) {\n        var originalUniforms = this.uniforms;\n\n        // Ignore if uniform can use in shader.\n        this.uniforms = shader.createUniforms();\n        this.shader = shader;\n\n        var uniforms = this.uniforms;\n        this._enabledUniforms = Object.keys(uniforms);\n        // Make sure uniforms are set in same order to avoid texture slot wrong\n        this._enabledUniforms.sort();\n        this._textureUniforms = this._enabledUniforms.filter(function (uniformName) {\n            var type = this.uniforms[uniformName].type;\n            return type === 't' || type === 'tv';\n        }, this);\n\n        var originalVertexDefines = this.vertexDefines;\n        var originalFragmentDefines = this.fragmentDefines;\n\n        this.vertexDefines = __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].clone(shader.vertexDefines);\n        this.fragmentDefines = __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].clone(shader.fragmentDefines);\n\n        if (keepStatus) {\n            for (var symbol in originalUniforms) {\n                if (uniforms[symbol]) {\n                    uniforms[symbol].value = originalUniforms[symbol].value;\n                }\n            }\n\n            __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].defaults(this.vertexDefines, originalVertexDefines);\n            __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].defaults(this.fragmentDefines, originalFragmentDefines);\n        }\n\n        var textureStatus = {};\n        for (var key in shader.textures) {\n            textureStatus[key] = {\n                shaderType: shader.textures[key].shaderType,\n                type: shader.textures[key].type,\n                enabled: (keepStatus && this._textureStatus[key]) ? this._textureStatus[key].enabled : false\n            };\n        }\n\n        this._textureStatus = textureStatus;\n\n        this._programKey = '';\n    },\n\n    /**\n     * Clone a new material and keep uniforms, shader will not be cloned\n     * @return {clay.Material}\n     */\n    clone: function () {\n        var material = new this.constructor({\n            name: this.name,\n            shader: this.shader\n        });\n        for (var symbol in this.uniforms) {\n            material.uniforms[symbol].value = this.uniforms[symbol].value;\n        }\n        material.depthTest = this.depthTest;\n        material.depthMask = this.depthMask;\n        material.transparent = this.transparent;\n        material.blend = this.blend;\n\n        material.vertexDefines = __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].clone(this.vertexDefines);\n        material.fragmentDefines = __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].clone(this.fragmentDefines);\n        material.enableTexture(this.getEnabledTextures());\n        material.precision = this.precision;\n\n        return material;\n    },\n\n    /**\n     * Add a #define macro in shader code\n     * @param  {string} shaderType Can be vertex, fragment or both\n     * @param  {string} symbol\n     * @param  {number} [val]\n     */\n    define: function (shaderType, symbol, val) {\n        var vertexDefines = this.vertexDefines;\n        var fragmentDefines = this.fragmentDefines;\n        if (shaderType !== 'vertex' && shaderType !== 'fragment' && shaderType !== 'both'\n            && arguments.length < 3\n        ) {\n            // shaderType default to be 'both'\n            val = symbol;\n            symbol = shaderType;\n            shaderType = 'both';\n        }\n        val = val != null ? val : null;\n        if (shaderType === 'vertex' || shaderType === 'both') {\n            if (vertexDefines[symbol] !== val) {\n                vertexDefines[symbol] = val;\n                // Mark as dirty\n                this._programKey = '';\n            }\n        }\n        if (shaderType === 'fragment' || shaderType === 'both') {\n            if (fragmentDefines[symbol] !== val) {\n                fragmentDefines[symbol] = val;\n                if (shaderType !== 'both') {\n                    this._programKey = '';\n                }\n            }\n        }\n    },\n\n    /**\n     * Remove a #define macro in shader code\n     * @param  {string} shaderType Can be vertex, fragment or both\n     * @param  {string} symbol\n     */\n    undefine: function (shaderType, symbol) {\n        if (shaderType !== 'vertex' && shaderType !== 'fragment' && shaderType !== 'both'\n            && arguments.length < 2\n        ) {\n            // shaderType default to be 'both'\n            symbol = shaderType;\n            shaderType = 'both';\n        }\n        if (shaderType === 'vertex' || shaderType === 'both') {\n            if (this.isDefined('vertex', symbol)) {\n                delete this.vertexDefines[symbol];\n                // Mark as dirty\n                this._programKey = '';\n            }\n        }\n        if (shaderType === 'fragment' || shaderType === 'both') {\n            if (this.isDefined('fragment', symbol)) {\n                delete this.fragmentDefines[symbol];\n                if (shaderType !== 'both') {\n                    this._programKey = '';\n                }\n            }\n        }\n    },\n\n    /**\n     * If macro is defined in shader.\n     * @param  {string} shaderType Can be vertex, fragment or both\n     * @param  {string} symbol\n     */\n    isDefined: function (shaderType, symbol) {\n        // PENDING hasOwnProperty ?\n        switch (shaderType) {\n            case 'vertex':\n                return this.vertexDefines[symbol] !== undefined;\n            case 'fragment':\n                return this.fragmentDefines[symbol] !== undefined;\n        }\n    },\n    /**\n     * Get macro value defined in shader.\n     * @param  {string} shaderType Can be vertex, fragment or both\n     * @param  {string} symbol\n     */\n    getDefine: function (shaderType, symbol) {\n        switch(shaderType) {\n            case 'vertex':\n                return this.vertexDefines[symbol];\n            case 'fragment':\n                return this.fragmentDefines[symbol];\n        }\n    },\n    /**\n     * Enable a texture, actually it will add a #define macro in the shader code\n     * For example, if texture symbol is diffuseMap, it will add a line `#define DIFFUSEMAP_ENABLED` in the shader code\n     * @param  {string} symbol\n     */\n    enableTexture: function (symbol) {\n        if (Array.isArray(symbol)) {\n            for (var i = 0; i < symbol.length; i++) {\n                this.enableTexture(symbol[i]);\n            }\n            return;\n        }\n\n        var status = this._textureStatus[symbol];\n        if (status) {\n            var isEnabled = status.enabled;\n            if (!isEnabled) {\n                status.enabled = true;\n                this._programKey = '';\n            }\n        }\n    },\n    /**\n     * Enable all textures used in the shader\n     */\n    enableTexturesAll: function () {\n        var textureStatus = this._textureStatus;\n        for (var symbol in textureStatus) {\n            textureStatus[symbol].enabled = true;\n        }\n\n        this._programKey = '';\n    },\n    /**\n     * Disable a texture, it remove a #define macro in the shader\n     * @param  {string} symbol\n     */\n    disableTexture: function (symbol) {\n        if (Array.isArray(symbol)) {\n            for (var i = 0; i < symbol.length; i++) {\n                this.disableTexture(symbol[i]);\n            }\n            return;\n        }\n\n        var status = this._textureStatus[symbol];\n        if (status) {\n            var isDisabled = ! status.enabled;\n            if (!isDisabled) {\n                status.enabled = false;\n                this._programKey = '';\n            }\n        }\n    },\n    /**\n     * Disable all textures used in the shader\n     */\n    disableTexturesAll: function () {\n        var textureStatus = this._textureStatus;\n        for (var symbol in textureStatus) {\n            textureStatus[symbol].enabled = false;\n        }\n\n        this._programKey = '';\n    },\n    /**\n     * If texture of given type is enabled.\n     * @param  {string}  symbol\n     * @return {boolean}\n     */\n    isTextureEnabled: function (symbol) {\n        var textureStatus = this._textureStatus;\n        return !!textureStatus[symbol]\n            && textureStatus[symbol].enabled;\n    },\n\n    /**\n     * Get all enabled textures\n     * @return {string[]}\n     */\n    getEnabledTextures: function () {\n        var enabledTextures = [];\n        var textureStatus = this._textureStatus;\n        for (var symbol in textureStatus) {\n            if (textureStatus[symbol].enabled) {\n                enabledTextures.push(symbol);\n            }\n        }\n        return enabledTextures;\n    },\n\n    /**\n     * Mark defines are updated.\n     */\n    dirtyDefines: function () {\n        this._programKey = '';\n    },\n\n    getProgramKey: function () {\n        if (!this._programKey) {\n            this._programKey = getProgramKey(\n                this.vertexDefines, this.fragmentDefines, this.getEnabledTextures()\n            );\n        }\n        return this._programKey;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Material);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9NYXRlcmlhbC5qcz9kNWIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4vY29yZS9CYXNlJztcbmltcG9ydCB1dGlsIGZyb20gJy4vY29yZS91dGlsJztcbmltcG9ydCBjb2xvclV0aWwgZnJvbSAnLi9jb3JlL2NvbG9yJztcbnZhciBwYXJzZUNvbG9yID0gY29sb3JVdGlsLnBhcnNlVG9GbG9hdDtcblxudmFyIHByb2dyYW1LZXlDYWNoZSA9IHt9O1xuXG5mdW5jdGlvbiBnZXREZWZpbmVDb2RlKGRlZmluZXMpIHtcbiAgICB2YXIgZGVmaW5lS2V5cyA9IE9iamVjdC5rZXlzKGRlZmluZXMpO1xuICAgIGRlZmluZUtleXMuc29ydCgpO1xuICAgIHZhciBkZWZpbmVTdHIgPSBbXTtcbiAgICAvLyBDdXN0b20gRGVmaW5lc1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVmaW5lS2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIga2V5ID0gZGVmaW5lS2V5c1tpXTtcbiAgICAgICAgdmFyIHZhbHVlID0gZGVmaW5lc1trZXldO1xuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGRlZmluZVN0ci5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIGRlZmluZVN0ci5wdXNoKGtleSArICcgJyArIHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkZWZpbmVTdHIuam9pbignXFxuJyk7XG59XG5cbmZ1bmN0aW9uIGdldFByb2dyYW1LZXkodmVydGV4RGVmaW5lcywgZnJhZ21lbnREZWZpbmVzLCBlbmFibGVkVGV4dHVyZXMpIHtcbiAgICBlbmFibGVkVGV4dHVyZXMuc29ydCgpO1xuICAgIHZhciBkZWZpbmVTdHIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVuYWJsZWRUZXh0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc3ltYm9sID0gZW5hYmxlZFRleHR1cmVzW2ldO1xuICAgICAgICBkZWZpbmVTdHIucHVzaChzeW1ib2wpO1xuICAgIH1cbiAgICB2YXIga2V5ID0gZ2V0RGVmaW5lQ29kZSh2ZXJ0ZXhEZWZpbmVzKSArICdcXG4nXG4gICAgICAgICsgZ2V0RGVmaW5lQ29kZShmcmFnbWVudERlZmluZXMpICsgJ1xcbidcbiAgICAgICAgKyBkZWZpbmVTdHIuam9pbignXFxuJyk7XG5cbiAgICBpZiAocHJvZ3JhbUtleUNhY2hlW2tleV0pIHtcbiAgICAgICAgcmV0dXJuIHByb2dyYW1LZXlDYWNoZVtrZXldO1xuICAgIH1cblxuICAgIHZhciBpZCA9IHV0aWwuZ2VuR1VJRCgpO1xuICAgIHByb2dyYW1LZXlDYWNoZVtrZXldID0gaWQ7XG4gICAgcmV0dXJuIGlkO1xufVxuXG4vKipcbiAqIE1hdGVyaWFsIGRlZmluZXMgdGhlIGFwcGVhcmFuY2Ugb2YgbWVzaCBzdXJmYWNlLCBsaWtlIGBjb2xvcmAsIGByb3VnaG5lc3NgLCBgbWV0YWxuZXNzYCwgZXRjLlxuICogSXQgY29udGFpbnMgYSB7QGxpbmsgY2xheS5TaGFkZXJ9IGFuZCBjb3JyZXNwb25kaW5nIHVuaWZvcm1zLlxuICpcbiAqIEhlcmUgaXMgYSBiYXNpYyBleGFtcGxlIHRvIGNyZWF0ZSBhIHN0YW5kYXJkIG1hdGVyaWFsXG5gYGBqc1xudmFyIG1hdGVyaWFsID0gbmV3IGNsYXkuTWF0ZXJpYWwoe1xuICAgIHNoYWRlcjogbmV3IGNsYXkuU2hhZGVyKFxuICAgICAgICBjbGF5LlNoYWRlci5zb3VyY2UoJ2NsYXkudmVydGV4JyksXG4gICAgICAgIGNsYXkuU2hhZGVyLnNvdXJjZSgnY2xheS5mcmFnbWVudCcpXG4gICAgKVxufSk7XG5gYGBcbiAqIEBjb25zdHJ1Y3RvciBjbGF5Lk1hdGVyaWFsXG4gKiBAZXh0ZW5kcyBjbGF5LmNvcmUuQmFzZVxuICovXG52YXIgTWF0ZXJpYWwgPSBCYXNlLmV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIC8qKiBAbGVuZHMgY2xheS5NYXRlcmlhbCMgKi8ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIG5hbWU6ICcnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgLy8gdW5pZm9ybXM6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlNoYWRlcn1cbiAgICAgICAgICovXG4gICAgICAgIC8vIHNoYWRlcjogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBkZXB0aFRlc3Q6IHRydWUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZGVwdGhNYXNrOiB0cnVlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRyYW5zcGFyZW50OiBmYWxzZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJsZW5kIGZ1bmMgaXMgYSBjYWxsYmFjayBmdW5jdGlvbiB3aGVuIHRoZSBtYXRlcmlhbFxuICAgICAgICAgKiBoYXZlIGN1c3RvbSBibGVuZGluZ1xuICAgICAgICAgKiBUaGUgZ2wgY29udGV4dCB3aWxsIGJlIHRoZSBvbmx5IGFyZ3VtZW50IHBhc3NlZCBpbiB0aG8gdGhlXG4gICAgICAgICAqIGJsZW5kIGZ1bmN0aW9uXG4gICAgICAgICAqIERldGFpbCBvZiBibGVuZCBmdW5jdGlvbiBpbiBXZWJHTDpcbiAgICAgICAgICogaHR0cDovL3d3dy5raHJvbm9zLm9yZy9yZWdpc3RyeS9nbGVzL3NwZWNzLzIuMC9lc19mdWxsX3NwZWNfMi4wLjI1LnBkZlxuICAgICAgICAgKlxuICAgICAgICAgKiBFeGFtcGxlIDpcbiAgICAgICAgICogZnVuY3Rpb24oX2dsKSB7XG4gICAgICAgICAqICBfZ2wuYmxlbmRFcXVhdGlvbihfZ2wuRlVOQ19BREQpO1xuICAgICAgICAgKiAgX2dsLmJsZW5kRnVuYyhfZ2wuU1JDX0FMUEhBLCBfZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7XG4gICAgICAgICAqIH1cbiAgICAgICAgICovXG4gICAgICAgIGJsZW5kOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB1cGRhdGUgdGV4dHVyZSBzdGF0dXMgYXV0b21hdGljYWxseS5cbiAgICAgICAgICovXG4gICAgICAgIGF1dG9VcGRhdGVUZXh0dXJlU3RhdHVzOiB0cnVlLFxuXG4gICAgICAgIHVuaWZvcm1zOiB7fSxcbiAgICAgICAgdmVydGV4RGVmaW5lczoge30sXG4gICAgICAgIGZyYWdtZW50RGVmaW5lczoge30sXG4gICAgICAgIF90ZXh0dXJlU3RhdHVzOiB7fSxcblxuICAgICAgICAvLyBzaGFkb3dUcmFuc3BhcmVudE1hcCA6IG51bGxcblxuICAgICAgICAvLyBQRU5ESU5HIGVuYWJsZSB0aGUgdW5pZm9ybSB0aGF0IG9ubHkgdXNlZCBpbiBzaGFkZXIuXG4gICAgICAgIF9lbmFibGVkVW5pZm9ybXM6IG51bGwsXG4gICAgfTtcbn0sIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMubmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSAnTUFURVJJQUxfJyArIHRoaXMuX191aWRfXztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zaGFkZXIpIHtcbiAgICAgICAgLy8gS2VlcCBzdGF0dXMsIG1haW5seSBwcmVzZXQgdW5pZm9ybXMsIHZlcnRleERlZmluZXMgYW5kIGZyYWdtZW50RGVmaW5lc1xuICAgICAgICB0aGlzLmF0dGFjaFNoYWRlcih0aGlzLnNoYWRlciwgdHJ1ZSk7XG4gICAgfVxufSxcbi8qKiBAbGVuZHMgY2xheS5NYXRlcmlhbC5wcm90b3R5cGUgKi9cbntcbiAgICBwcmVjaXNpb246ICdoaWdocCcsXG5cbiAgICAvKipcbiAgICAgKiBTZXQgbWF0ZXJpYWwgdW5pZm9ybVxuICAgICAqIEBleGFtcGxlXG4gICAgICogIG1hdC5zZXRVbmlmb3JtKCdjb2xvcicsIFsxLCAxLCAxLCAxXSk7XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHN5bWJvbFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfGFycmF5fGNsYXkuVGV4dHVyZXxBcnJheUJ1ZmZlclZpZXd9IHZhbHVlXG4gICAgICovXG4gICAgc2V0VW5pZm9ybTogZnVuY3Rpb24gKHN5bWJvbCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVW5pZm9ybSB2YWx1ZSBcIicgKyBzeW1ib2wgKyAnXCIgaXMgdW5kZWZpbmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVuaWZvcm0gPSB0aGlzLnVuaWZvcm1zW3N5bWJvbF07XG4gICAgICAgIGlmICh1bmlmb3JtKSB7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgLy8gVHJ5IHRvIHBhcnNlIGFzIGEgY29sb3IuIEludmFsaWQgY29sb3Igc3RyaW5nIHdpbGwgcmV0dXJuIG51bGwuXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZUNvbG9yKHZhbHVlKSB8fCB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdW5pZm9ybS52YWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvVXBkYXRlVGV4dHVyZVN0YXR1cyAmJiB1bmlmb3JtLnR5cGUgPT09ICd0Jykge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVRleHR1cmUoc3ltYm9sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZVRleHR1cmUoc3ltYm9sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgICAqL1xuICAgIHNldFVuaWZvcm1zOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICAgICAgdmFyIHZhbCA9IG9ialtrZXldO1xuICAgICAgICAgICAgdGhpcy5zZXRVbmlmb3JtKGtleSwgdmFsKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICBzeW1ib2xcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGlzVW5pZm9ybUVuYWJsZWQ6IGZ1bmN0aW9uIChzeW1ib2wpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuYWJsZWRVbmlmb3Jtcy5pbmRleE9mKHN5bWJvbCkgPj0gMDtcbiAgICB9LFxuXG4gICAgZ2V0RW5hYmxlZFVuaWZvcm1zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmFibGVkVW5pZm9ybXM7XG4gICAgfSxcbiAgICBnZXRUZXh0dXJlVW5pZm9ybXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RleHR1cmVVbmlmb3JtcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2Ygc2V0VW5pZm9ybSBhbmQgc2V0VW5pZm9ybXNcbiAgICAgKiBAcGFyYW0ge29iamVjdHxzdHJpbmd9IHN5bWJvbFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfGFycmF5fGNsYXkuVGV4dHVyZXxBcnJheUJ1ZmZlclZpZXd9IFt2YWx1ZV1cbiAgICAgKi9cbiAgICBzZXQ6IGZ1bmN0aW9uIChzeW1ib2wsIHZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlb2Yoc3ltYm9sKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzeW1ib2wpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gc3ltYm9sW2tleV07XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRVbmlmb3JtKGtleSwgdmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VW5pZm9ybShzeW1ib2wsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogR2V0IHVuaWZvcm0gdmFsdWVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHN5bWJvbFxuICAgICAqIEByZXR1cm4ge251bWJlcnxhcnJheXxjbGF5LlRleHR1cmV8QXJyYXlCdWZmZXJWaWV3fVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gKHN5bWJvbCkge1xuICAgICAgICB2YXIgdW5pZm9ybSA9IHRoaXMudW5pZm9ybXNbc3ltYm9sXTtcbiAgICAgICAgaWYgKHVuaWZvcm0pIHtcbiAgICAgICAgICAgIHJldHVybiB1bmlmb3JtLnZhbHVlO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBBdHRhY2ggYSBzaGFkZXIgaW5zdGFuY2VcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlNoYWRlcn0gc2hhZGVyXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0ga2VlcFN0YXR1cyBJZiB0cnkgdG8ga2VlcCB1bmlmb3JtIGFuZCB0ZXh0dXJlXG4gICAgICovXG4gICAgYXR0YWNoU2hhZGVyOiBmdW5jdGlvbihzaGFkZXIsIGtlZXBTdGF0dXMpIHtcbiAgICAgICAgdmFyIG9yaWdpbmFsVW5pZm9ybXMgPSB0aGlzLnVuaWZvcm1zO1xuXG4gICAgICAgIC8vIElnbm9yZSBpZiB1bmlmb3JtIGNhbiB1c2UgaW4gc2hhZGVyLlxuICAgICAgICB0aGlzLnVuaWZvcm1zID0gc2hhZGVyLmNyZWF0ZVVuaWZvcm1zKCk7XG4gICAgICAgIHRoaXMuc2hhZGVyID0gc2hhZGVyO1xuXG4gICAgICAgIHZhciB1bmlmb3JtcyA9IHRoaXMudW5pZm9ybXM7XG4gICAgICAgIHRoaXMuX2VuYWJsZWRVbmlmb3JtcyA9IE9iamVjdC5rZXlzKHVuaWZvcm1zKTtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHVuaWZvcm1zIGFyZSBzZXQgaW4gc2FtZSBvcmRlciB0byBhdm9pZCB0ZXh0dXJlIHNsb3Qgd3JvbmdcbiAgICAgICAgdGhpcy5fZW5hYmxlZFVuaWZvcm1zLnNvcnQoKTtcbiAgICAgICAgdGhpcy5fdGV4dHVyZVVuaWZvcm1zID0gdGhpcy5fZW5hYmxlZFVuaWZvcm1zLmZpbHRlcihmdW5jdGlvbiAodW5pZm9ybU5hbWUpIHtcbiAgICAgICAgICAgIHZhciB0eXBlID0gdGhpcy51bmlmb3Jtc1t1bmlmb3JtTmFtZV0udHlwZTtcbiAgICAgICAgICAgIHJldHVybiB0eXBlID09PSAndCcgfHwgdHlwZSA9PT0gJ3R2JztcbiAgICAgICAgfSwgdGhpcyk7XG5cbiAgICAgICAgdmFyIG9yaWdpbmFsVmVydGV4RGVmaW5lcyA9IHRoaXMudmVydGV4RGVmaW5lcztcbiAgICAgICAgdmFyIG9yaWdpbmFsRnJhZ21lbnREZWZpbmVzID0gdGhpcy5mcmFnbWVudERlZmluZXM7XG5cbiAgICAgICAgdGhpcy52ZXJ0ZXhEZWZpbmVzID0gdXRpbC5jbG9uZShzaGFkZXIudmVydGV4RGVmaW5lcyk7XG4gICAgICAgIHRoaXMuZnJhZ21lbnREZWZpbmVzID0gdXRpbC5jbG9uZShzaGFkZXIuZnJhZ21lbnREZWZpbmVzKTtcblxuICAgICAgICBpZiAoa2VlcFN0YXR1cykge1xuICAgICAgICAgICAgZm9yICh2YXIgc3ltYm9sIGluIG9yaWdpbmFsVW5pZm9ybXMpIHtcbiAgICAgICAgICAgICAgICBpZiAodW5pZm9ybXNbc3ltYm9sXSkge1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3Jtc1tzeW1ib2xdLnZhbHVlID0gb3JpZ2luYWxVbmlmb3Jtc1tzeW1ib2xdLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXRpbC5kZWZhdWx0cyh0aGlzLnZlcnRleERlZmluZXMsIG9yaWdpbmFsVmVydGV4RGVmaW5lcyk7XG4gICAgICAgICAgICB1dGlsLmRlZmF1bHRzKHRoaXMuZnJhZ21lbnREZWZpbmVzLCBvcmlnaW5hbEZyYWdtZW50RGVmaW5lcyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdGV4dHVyZVN0YXR1cyA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gc2hhZGVyLnRleHR1cmVzKSB7XG4gICAgICAgICAgICB0ZXh0dXJlU3RhdHVzW2tleV0gPSB7XG4gICAgICAgICAgICAgICAgc2hhZGVyVHlwZTogc2hhZGVyLnRleHR1cmVzW2tleV0uc2hhZGVyVHlwZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBzaGFkZXIudGV4dHVyZXNba2V5XS50eXBlLFxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IChrZWVwU3RhdHVzICYmIHRoaXMuX3RleHR1cmVTdGF0dXNba2V5XSkgPyB0aGlzLl90ZXh0dXJlU3RhdHVzW2tleV0uZW5hYmxlZCA6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdGV4dHVyZVN0YXR1cyA9IHRleHR1cmVTdGF0dXM7XG5cbiAgICAgICAgdGhpcy5fcHJvZ3JhbUtleSA9ICcnO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSBhIG5ldyBtYXRlcmlhbCBhbmQga2VlcCB1bmlmb3Jtcywgc2hhZGVyIHdpbGwgbm90IGJlIGNsb25lZFxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0ZXJpYWx9XG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1hdGVyaWFsID0gbmV3IHRoaXMuY29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgc2hhZGVyOiB0aGlzLnNoYWRlclxuICAgICAgICB9KTtcbiAgICAgICAgZm9yICh2YXIgc3ltYm9sIGluIHRoaXMudW5pZm9ybXMpIHtcbiAgICAgICAgICAgIG1hdGVyaWFsLnVuaWZvcm1zW3N5bWJvbF0udmFsdWUgPSB0aGlzLnVuaWZvcm1zW3N5bWJvbF0udmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgbWF0ZXJpYWwuZGVwdGhUZXN0ID0gdGhpcy5kZXB0aFRlc3Q7XG4gICAgICAgIG1hdGVyaWFsLmRlcHRoTWFzayA9IHRoaXMuZGVwdGhNYXNrO1xuICAgICAgICBtYXRlcmlhbC50cmFuc3BhcmVudCA9IHRoaXMudHJhbnNwYXJlbnQ7XG4gICAgICAgIG1hdGVyaWFsLmJsZW5kID0gdGhpcy5ibGVuZDtcblxuICAgICAgICBtYXRlcmlhbC52ZXJ0ZXhEZWZpbmVzID0gdXRpbC5jbG9uZSh0aGlzLnZlcnRleERlZmluZXMpO1xuICAgICAgICBtYXRlcmlhbC5mcmFnbWVudERlZmluZXMgPSB1dGlsLmNsb25lKHRoaXMuZnJhZ21lbnREZWZpbmVzKTtcbiAgICAgICAgbWF0ZXJpYWwuZW5hYmxlVGV4dHVyZSh0aGlzLmdldEVuYWJsZWRUZXh0dXJlcygpKTtcbiAgICAgICAgbWF0ZXJpYWwucHJlY2lzaW9uID0gdGhpcy5wcmVjaXNpb247XG5cbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSAjZGVmaW5lIG1hY3JvIGluIHNoYWRlciBjb2RlXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBzaGFkZXJUeXBlIENhbiBiZSB2ZXJ0ZXgsIGZyYWdtZW50IG9yIGJvdGhcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHN5bWJvbFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gW3ZhbF1cbiAgICAgKi9cbiAgICBkZWZpbmU6IGZ1bmN0aW9uIChzaGFkZXJUeXBlLCBzeW1ib2wsIHZhbCkge1xuICAgICAgICB2YXIgdmVydGV4RGVmaW5lcyA9IHRoaXMudmVydGV4RGVmaW5lcztcbiAgICAgICAgdmFyIGZyYWdtZW50RGVmaW5lcyA9IHRoaXMuZnJhZ21lbnREZWZpbmVzO1xuICAgICAgICBpZiAoc2hhZGVyVHlwZSAhPT0gJ3ZlcnRleCcgJiYgc2hhZGVyVHlwZSAhPT0gJ2ZyYWdtZW50JyAmJiBzaGFkZXJUeXBlICE9PSAnYm90aCdcbiAgICAgICAgICAgICYmIGFyZ3VtZW50cy5sZW5ndGggPCAzXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gc2hhZGVyVHlwZSBkZWZhdWx0IHRvIGJlICdib3RoJ1xuICAgICAgICAgICAgdmFsID0gc3ltYm9sO1xuICAgICAgICAgICAgc3ltYm9sID0gc2hhZGVyVHlwZTtcbiAgICAgICAgICAgIHNoYWRlclR5cGUgPSAnYm90aCc7XG4gICAgICAgIH1cbiAgICAgICAgdmFsID0gdmFsICE9IG51bGwgPyB2YWwgOiBudWxsO1xuICAgICAgICBpZiAoc2hhZGVyVHlwZSA9PT0gJ3ZlcnRleCcgfHwgc2hhZGVyVHlwZSA9PT0gJ2JvdGgnKSB7XG4gICAgICAgICAgICBpZiAodmVydGV4RGVmaW5lc1tzeW1ib2xdICE9PSB2YWwpIHtcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhEZWZpbmVzW3N5bWJvbF0gPSB2YWw7XG4gICAgICAgICAgICAgICAgLy8gTWFyayBhcyBkaXJ0eVxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2dyYW1LZXkgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hhZGVyVHlwZSA9PT0gJ2ZyYWdtZW50JyB8fCBzaGFkZXJUeXBlID09PSAnYm90aCcpIHtcbiAgICAgICAgICAgIGlmIChmcmFnbWVudERlZmluZXNbc3ltYm9sXSAhPT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgZnJhZ21lbnREZWZpbmVzW3N5bWJvbF0gPSB2YWw7XG4gICAgICAgICAgICAgICAgaWYgKHNoYWRlclR5cGUgIT09ICdib3RoJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9ncmFtS2V5ID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhICNkZWZpbmUgbWFjcm8gaW4gc2hhZGVyIGNvZGVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHNoYWRlclR5cGUgQ2FuIGJlIHZlcnRleCwgZnJhZ21lbnQgb3IgYm90aFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gc3ltYm9sXG4gICAgICovXG4gICAgdW5kZWZpbmU6IGZ1bmN0aW9uIChzaGFkZXJUeXBlLCBzeW1ib2wpIHtcbiAgICAgICAgaWYgKHNoYWRlclR5cGUgIT09ICd2ZXJ0ZXgnICYmIHNoYWRlclR5cGUgIT09ICdmcmFnbWVudCcgJiYgc2hhZGVyVHlwZSAhPT0gJ2JvdGgnXG4gICAgICAgICAgICAmJiBhcmd1bWVudHMubGVuZ3RoIDwgMlxuICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIHNoYWRlclR5cGUgZGVmYXVsdCB0byBiZSAnYm90aCdcbiAgICAgICAgICAgIHN5bWJvbCA9IHNoYWRlclR5cGU7XG4gICAgICAgICAgICBzaGFkZXJUeXBlID0gJ2JvdGgnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaGFkZXJUeXBlID09PSAndmVydGV4JyB8fCBzaGFkZXJUeXBlID09PSAnYm90aCcpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRGVmaW5lZCgndmVydGV4Jywgc3ltYm9sKSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnZlcnRleERlZmluZXNbc3ltYm9sXTtcbiAgICAgICAgICAgICAgICAvLyBNYXJrIGFzIGRpcnR5XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbUtleSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzaGFkZXJUeXBlID09PSAnZnJhZ21lbnQnIHx8IHNoYWRlclR5cGUgPT09ICdib3RoJykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEZWZpbmVkKCdmcmFnbWVudCcsIHN5bWJvbCkpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5mcmFnbWVudERlZmluZXNbc3ltYm9sXTtcbiAgICAgICAgICAgICAgICBpZiAoc2hhZGVyVHlwZSAhPT0gJ2JvdGgnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb2dyYW1LZXkgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSWYgbWFjcm8gaXMgZGVmaW5lZCBpbiBzaGFkZXIuXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBzaGFkZXJUeXBlIENhbiBiZSB2ZXJ0ZXgsIGZyYWdtZW50IG9yIGJvdGhcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHN5bWJvbFxuICAgICAqL1xuICAgIGlzRGVmaW5lZDogZnVuY3Rpb24gKHNoYWRlclR5cGUsIHN5bWJvbCkge1xuICAgICAgICAvLyBQRU5ESU5HIGhhc093blByb3BlcnR5ID9cbiAgICAgICAgc3dpdGNoIChzaGFkZXJUeXBlKSB7XG4gICAgICAgICAgICBjYXNlICd2ZXJ0ZXgnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZlcnRleERlZmluZXNbc3ltYm9sXSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY2FzZSAnZnJhZ21lbnQnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyYWdtZW50RGVmaW5lc1tzeW1ib2xdICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEdldCBtYWNybyB2YWx1ZSBkZWZpbmVkIGluIHNoYWRlci5cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHNoYWRlclR5cGUgQ2FuIGJlIHZlcnRleCwgZnJhZ21lbnQgb3IgYm90aFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gc3ltYm9sXG4gICAgICovXG4gICAgZ2V0RGVmaW5lOiBmdW5jdGlvbiAoc2hhZGVyVHlwZSwgc3ltYm9sKSB7XG4gICAgICAgIHN3aXRjaChzaGFkZXJUeXBlKSB7XG4gICAgICAgICAgICBjYXNlICd2ZXJ0ZXgnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZlcnRleERlZmluZXNbc3ltYm9sXTtcbiAgICAgICAgICAgIGNhc2UgJ2ZyYWdtZW50JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mcmFnbWVudERlZmluZXNbc3ltYm9sXTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogRW5hYmxlIGEgdGV4dHVyZSwgYWN0dWFsbHkgaXQgd2lsbCBhZGQgYSAjZGVmaW5lIG1hY3JvIGluIHRoZSBzaGFkZXIgY29kZVxuICAgICAqIEZvciBleGFtcGxlLCBpZiB0ZXh0dXJlIHN5bWJvbCBpcyBkaWZmdXNlTWFwLCBpdCB3aWxsIGFkZCBhIGxpbmUgYCNkZWZpbmUgRElGRlVTRU1BUF9FTkFCTEVEYCBpbiB0aGUgc2hhZGVyIGNvZGVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHN5bWJvbFxuICAgICAqL1xuICAgIGVuYWJsZVRleHR1cmU6IGZ1bmN0aW9uIChzeW1ib2wpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3ltYm9sKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2wubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVRleHR1cmUoc3ltYm9sW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdGF0dXMgPSB0aGlzLl90ZXh0dXJlU3RhdHVzW3N5bWJvbF07XG4gICAgICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgICAgIHZhciBpc0VuYWJsZWQgPSBzdGF0dXMuZW5hYmxlZDtcbiAgICAgICAgICAgIGlmICghaXNFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Byb2dyYW1LZXkgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogRW5hYmxlIGFsbCB0ZXh0dXJlcyB1c2VkIGluIHRoZSBzaGFkZXJcbiAgICAgKi9cbiAgICBlbmFibGVUZXh0dXJlc0FsbDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGV4dHVyZVN0YXR1cyA9IHRoaXMuX3RleHR1cmVTdGF0dXM7XG4gICAgICAgIGZvciAodmFyIHN5bWJvbCBpbiB0ZXh0dXJlU3RhdHVzKSB7XG4gICAgICAgICAgICB0ZXh0dXJlU3RhdHVzW3N5bWJvbF0uZW5hYmxlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wcm9ncmFtS2V5ID0gJyc7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBEaXNhYmxlIGEgdGV4dHVyZSwgaXQgcmVtb3ZlIGEgI2RlZmluZSBtYWNybyBpbiB0aGUgc2hhZGVyXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBzeW1ib2xcbiAgICAgKi9cbiAgICBkaXNhYmxlVGV4dHVyZTogZnVuY3Rpb24gKHN5bWJvbCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzeW1ib2wpKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN5bWJvbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZVRleHR1cmUoc3ltYm9sW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdGF0dXMgPSB0aGlzLl90ZXh0dXJlU3RhdHVzW3N5bWJvbF07XG4gICAgICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgICAgIHZhciBpc0Rpc2FibGVkID0gISBzdGF0dXMuZW5hYmxlZDtcbiAgICAgICAgICAgIGlmICghaXNEaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIHN0YXR1cy5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbUtleSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBEaXNhYmxlIGFsbCB0ZXh0dXJlcyB1c2VkIGluIHRoZSBzaGFkZXJcbiAgICAgKi9cbiAgICBkaXNhYmxlVGV4dHVyZXNBbGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRleHR1cmVTdGF0dXMgPSB0aGlzLl90ZXh0dXJlU3RhdHVzO1xuICAgICAgICBmb3IgKHZhciBzeW1ib2wgaW4gdGV4dHVyZVN0YXR1cykge1xuICAgICAgICAgICAgdGV4dHVyZVN0YXR1c1tzeW1ib2xdLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3Byb2dyYW1LZXkgPSAnJztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIElmIHRleHR1cmUgb2YgZ2l2ZW4gdHlwZSBpcyBlbmFibGVkLlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gIHN5bWJvbFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgaXNUZXh0dXJlRW5hYmxlZDogZnVuY3Rpb24gKHN5bWJvbCkge1xuICAgICAgICB2YXIgdGV4dHVyZVN0YXR1cyA9IHRoaXMuX3RleHR1cmVTdGF0dXM7XG4gICAgICAgIHJldHVybiAhIXRleHR1cmVTdGF0dXNbc3ltYm9sXVxuICAgICAgICAgICAgJiYgdGV4dHVyZVN0YXR1c1tzeW1ib2xdLmVuYWJsZWQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgZW5hYmxlZCB0ZXh0dXJlc1xuICAgICAqIEByZXR1cm4ge3N0cmluZ1tdfVxuICAgICAqL1xuICAgIGdldEVuYWJsZWRUZXh0dXJlczogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZW5hYmxlZFRleHR1cmVzID0gW107XG4gICAgICAgIHZhciB0ZXh0dXJlU3RhdHVzID0gdGhpcy5fdGV4dHVyZVN0YXR1cztcbiAgICAgICAgZm9yICh2YXIgc3ltYm9sIGluIHRleHR1cmVTdGF0dXMpIHtcbiAgICAgICAgICAgIGlmICh0ZXh0dXJlU3RhdHVzW3N5bWJvbF0uZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIGVuYWJsZWRUZXh0dXJlcy5wdXNoKHN5bWJvbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuYWJsZWRUZXh0dXJlcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTWFyayBkZWZpbmVzIGFyZSB1cGRhdGVkLlxuICAgICAqL1xuICAgIGRpcnR5RGVmaW5lczogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9wcm9ncmFtS2V5ID0gJyc7XG4gICAgfSxcblxuICAgIGdldFByb2dyYW1LZXk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9wcm9ncmFtS2V5KSB7XG4gICAgICAgICAgICB0aGlzLl9wcm9ncmFtS2V5ID0gZ2V0UHJvZ3JhbUtleShcbiAgICAgICAgICAgICAgICB0aGlzLnZlcnRleERlZmluZXMsIHRoaXMuZnJhZ21lbnREZWZpbmVzLCB0aGlzLmdldEVuYWJsZWRUZXh0dXJlcygpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9ncmFtS2V5O1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBNYXRlcmlhbDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvTWF0ZXJpYWwuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__GeometryBase__ = __webpack_require__(80);\n\n\n\n\n\n\nvar vec3Create = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create;\nvar vec3Add = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].add;\nvar vec3Set = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].set;\n\nvar Attribute = __WEBPACK_IMPORTED_MODULE_4__GeometryBase__[\"a\" /* default */].Attribute;\n\n/**\n * Geometry in ClayGL contains vertex attributes of mesh. These vertex attributes will be finally provided to the {@link clay.Shader}.\n * Different {@link clay.Shader} needs different attributes. Here is a list of attributes used in the builtin shaders.\n *\n * + position: `clay.basic`, `clay.lambert`, `clay.standard`\n * + texcoord0: `clay.basic`, `clay.lambert`, `clay.standard`\n * + color: `clay.basic`, `clay.lambert`, `clay.standard`\n * + weight: `clay.basic`, `clay.lambert`, `clay.standard`\n * + joint: `clay.basic`, `clay.lambert`, `clay.standard`\n * + normal: `clay.lambert`, `clay.standard`\n * + tangent: `clay.standard`\n *\n * #### Create a procedural geometry\n *\n * ClayGL provides a couple of builtin procedural geometries. Inlcuding:\n *\n *  + {@link clay.geometry.Cube}\n *  + {@link clay.geometry.Sphere}\n *  + {@link clay.geometry.Plane}\n *  + {@link clay.geometry.Cylinder}\n *  + {@link clay.geometry.Cone}\n *  + {@link clay.geometry.ParametricSurface}\n *\n * It's simple to create a basic geometry with these classes.\n *\n```js\nvar sphere = new clay.geometry.Sphere({\n    radius: 2\n});\n```\n *\n * #### Create the geometry data by yourself\n *\n * Usually the vertex attributes data are created by the {@link clay.loader.GLTF} or procedural geometries like {@link clay.geometry.Sphere}.\n * Besides these, you can create the data manually. Here is a simple example to create a triangle.\n```js\nvar TRIANGLE_POSITIONS = [\n    [-0.5, -0.5, 0],\n    [0.5, -0.5, 0],\n    [0, 0.5, 0]\n];\nvar geometry = new clay.StaticGeometryBase();\n// Add triangle vertices to position attribute.\ngeometry.attributes.position.fromArray(TRIANGLE_POSITIONS);\n```\n * Then you can use the utility methods like `generateVertexNormals`, `generateTangents` to create the remaining necessary attributes.\n *\n *\n * #### Use with custom shaders\n *\n * If you wan't to write custom shaders. Don't forget to add SEMANTICS to these attributes. For example\n *\n ```glsl\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\nuniform mat4 world : WORLD;\n\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 normal : NORMAL;\n```\n * These `POSITION`, `TEXCOORD_0`, `NORMAL` are SEMANTICS which will map the attributes in shader to the attributes in the GeometryBase\n *\n * Available attributes SEMANTICS includes `POSITION`, `TEXCOORD_0`, `TEXCOORD_1` `NORMAL`, `TANGENT`, `COLOR`, `WEIGHT`, `JOINT`.\n *\n *\n * @constructor clay.Geometry\n * @extends clay.GeometryBase\n */\nvar Geometry = __WEBPACK_IMPORTED_MODULE_4__GeometryBase__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Geometry# */ {\n        /**\n         * Attributes of geometry. Including:\n         *  + `position`\n         *  + `texcoord0`\n         *  + `texcoord1`\n         *  + `normal`\n         *  + `tangent`\n         *  + `color`\n         *  + `weight`\n         *  + `joint`\n         *  + `barycentric`\n         *\n         * @type {Object.<string, clay.Geometry.Attribute>}\n         */\n        attributes: {\n            position: new Attribute('position', 'float', 3, 'POSITION'),\n            texcoord0: new Attribute('texcoord0', 'float', 2, 'TEXCOORD_0'),\n            texcoord1: new Attribute('texcoord1', 'float', 2, 'TEXCOORD_1'),\n            normal: new Attribute('normal', 'float', 3, 'NORMAL'),\n            tangent: new Attribute('tangent', 'float', 4, 'TANGENT'),\n            color: new Attribute('color', 'float', 4, 'COLOR'),\n            // Skinning attributes\n            // Each vertex can be bind to 4 bones, because the\n            // sum of weights is 1, so the weights is stored in vec3 and the last\n            // can be calculated by 1-w.x-w.y-w.z\n            weight: new Attribute('weight', 'float', 3, 'WEIGHT'),\n            joint: new Attribute('joint', 'float', 4, 'JOINT'),\n            // For wireframe display\n            // http://codeflow.org/entries/2012/aug/02/easy-wireframe-display-with-barycentric-coordinates/\n            barycentric: new Attribute('barycentric', 'float', 3, null),\n        },\n        /**\n         * Calculated bounding box of geometry.\n         * @type {clay.BoundingBox}\n         */\n        boundingBox: null\n    };\n},\n/** @lends clay.Geometry.prototype */\n{\n\n    mainAttribute: 'position',\n\n    /**\n     * Update boundingBox of Geometry\n     */\n    updateBoundingBox: function () {\n        var bbox = this.boundingBox;\n        if (!bbox) {\n            bbox = this.boundingBox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n        }\n        var posArr = this.attributes.position.value;\n        if (posArr && posArr.length) {\n            var min = bbox.min;\n            var max = bbox.max;\n            var minArr = min.array;\n            var maxArr = max.array;\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].set(minArr, posArr[0], posArr[1], posArr[2]);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].set(maxArr, posArr[0], posArr[1], posArr[2]);\n            for (var i = 3; i < posArr.length;) {\n                var x = posArr[i++];\n                var y = posArr[i++];\n                var z = posArr[i++];\n                if (x < minArr[0]) { minArr[0] = x; }\n                if (y < minArr[1]) { minArr[1] = y; }\n                if (z < minArr[2]) { minArr[2] = z; }\n\n                if (x > maxArr[0]) { maxArr[0] = x; }\n                if (y > maxArr[1]) { maxArr[1] = y; }\n                if (z > maxArr[2]) { maxArr[2] = z; }\n            }\n            min._dirty = true;\n            max._dirty = true;\n        }\n    },\n\n    /**\n     * Generate normals per vertex.\n     */\n    generateVertexNormals: function () {\n        if (!this.vertexCount) {\n            return;\n        }\n\n        var indices = this.indices;\n        var attributes = this.attributes;\n        var positions = attributes.position.value;\n        var normals = attributes.normal.value;\n\n        if (!normals || normals.length !== positions.length) {\n            normals = attributes.normal.value = new __WEBPACK_IMPORTED_MODULE_0__core_vendor__[\"a\" /* default */].Float32Array(positions.length);\n        }\n        else {\n            // Reset\n            for (var i = 0; i < normals.length; i++) {\n                normals[i] = 0;\n            }\n        }\n\n        var p1 = vec3Create();\n        var p2 = vec3Create();\n        var p3 = vec3Create();\n\n        var v21 = vec3Create();\n        var v32 = vec3Create();\n\n        var n = vec3Create();\n\n        var len = indices ? indices.length : this.vertexCount;\n        var i1, i2, i3;\n        for (var f = 0; f < len;) {\n            if (indices) {\n                i1 = indices[f++];\n                i2 = indices[f++];\n                i3 = indices[f++];\n            }\n            else {\n                i1 = f++;\n                i2 = f++;\n                i3 = f++;\n            }\n\n            vec3Set(p1, positions[i1*3], positions[i1*3+1], positions[i1*3+2]);\n            vec3Set(p2, positions[i2*3], positions[i2*3+1], positions[i2*3+2]);\n            vec3Set(p3, positions[i3*3], positions[i3*3+1], positions[i3*3+2]);\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(v21, p1, p2);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(v32, p2, p3);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].cross(n, v21, v32);\n            // Already be weighted by the triangle area\n            for (var i = 0; i < 3; i++) {\n                normals[i1*3+i] = normals[i1*3+i] + n[i];\n                normals[i2*3+i] = normals[i2*3+i] + n[i];\n                normals[i3*3+i] = normals[i3*3+i] + n[i];\n            }\n        }\n\n        for (var i = 0; i < normals.length;) {\n            vec3Set(n, normals[i], normals[i+1], normals[i+2]);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].normalize(n, n);\n            normals[i++] = n[0];\n            normals[i++] = n[1];\n            normals[i++] = n[2];\n        }\n        this.dirty();\n    },\n\n    /**\n     * Generate normals per face.\n     */\n    generateFaceNormals: function () {\n        if (!this.vertexCount) {\n            return;\n        }\n\n        if (!this.isUniqueVertex()) {\n            this.generateUniqueVertex();\n        }\n\n        var indices = this.indices;\n        var attributes = this.attributes;\n        var positions = attributes.position.value;\n        var normals = attributes.normal.value;\n\n        var p1 = vec3Create();\n        var p2 = vec3Create();\n        var p3 = vec3Create();\n\n        var v21 = vec3Create();\n        var v32 = vec3Create();\n        var n = vec3Create();\n\n        if (!normals) {\n            normals = attributes.normal.value = new Float32Array(positions.length);\n        }\n        var len = indices ? indices.length : this.vertexCount;\n        var i1, i2, i3;\n        for (var f = 0; f < len;) {\n            if (indices) {\n                i1 = indices[f++];\n                i2 = indices[f++];\n                i3 = indices[f++];\n            }\n            else {\n                i1 = f++;\n                i2 = f++;\n                i3 = f++;\n            }\n\n            vec3Set(p1, positions[i1*3], positions[i1*3+1], positions[i1*3+2]);\n            vec3Set(p2, positions[i2*3], positions[i2*3+1], positions[i2*3+2]);\n            vec3Set(p3, positions[i3*3], positions[i3*3+1], positions[i3*3+2]);\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(v21, p1, p2);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(v32, p2, p3);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].cross(n, v21, v32);\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].normalize(n, n);\n\n            for (var i = 0; i < 3; i++) {\n                normals[i1*3 + i] = n[i];\n                normals[i2*3 + i] = n[i];\n                normals[i3*3 + i] = n[i];\n            }\n        }\n        this.dirty();\n    },\n\n    /**\n     * Generate tangents attributes.\n     */\n    generateTangents: function () {\n        if (!this.vertexCount) {\n            return;\n        }\n\n        var nVertex = this.vertexCount;\n        var attributes = this.attributes;\n        if (!attributes.tangent.value) {\n            attributes.tangent.value = new Float32Array(nVertex * 4);\n        }\n        var texcoords = attributes.texcoord0.value;\n        var positions = attributes.position.value;\n        var tangents = attributes.tangent.value;\n        var normals = attributes.normal.value;\n\n        if (!texcoords) {\n            console.warn('Geometry without texcoords can\\'t generate tangents.');\n            return;\n        }\n\n        var tan1 = [];\n        var tan2 = [];\n        for (var i = 0; i < nVertex; i++) {\n            tan1[i] = [0.0, 0.0, 0.0];\n            tan2[i] = [0.0, 0.0, 0.0];\n        }\n\n        var sdir = [0.0, 0.0, 0.0];\n        var tdir = [0.0, 0.0, 0.0];\n        var indices = this.indices;\n\n        var len = indices ? indices.length : this.vertexCount;\n        var i1, i2, i3;\n        for (var i = 0; i < len;) {\n            if (indices) {\n                i1 = indices[i++];\n                i2 = indices[i++];\n                i3 = indices[i++];\n            }\n            else {\n                i1 = i++;\n                i2 = i++;\n                i3 = i++;\n            }\n\n            var st1s = texcoords[i1 * 2],\n                st2s = texcoords[i2 * 2],\n                st3s = texcoords[i3 * 2],\n                st1t = texcoords[i1 * 2 + 1],\n                st2t = texcoords[i2 * 2 + 1],\n                st3t = texcoords[i3 * 2 + 1],\n\n                p1x = positions[i1 * 3],\n                p2x = positions[i2 * 3],\n                p3x = positions[i3 * 3],\n                p1y = positions[i1 * 3 + 1],\n                p2y = positions[i2 * 3 + 1],\n                p3y = positions[i3 * 3 + 1],\n                p1z = positions[i1 * 3 + 2],\n                p2z = positions[i2 * 3 + 2],\n                p3z = positions[i3 * 3 + 2];\n\n            var x1 = p2x - p1x,\n                x2 = p3x - p1x,\n                y1 = p2y - p1y,\n                y2 = p3y - p1y,\n                z1 = p2z - p1z,\n                z2 = p3z - p1z;\n\n            var s1 = st2s - st1s,\n                s2 = st3s - st1s,\n                t1 = st2t - st1t,\n                t2 = st3t - st1t;\n\n            var r = 1.0 / (s1 * t2 - t1 * s2);\n            sdir[0] = (t2 * x1 - t1 * x2) * r;\n            sdir[1] = (t2 * y1 - t1 * y2) * r;\n            sdir[2] = (t2 * z1 - t1 * z2) * r;\n\n            tdir[0] = (s1 * x2 - s2 * x1) * r;\n            tdir[1] = (s1 * y2 - s2 * y1) * r;\n            tdir[2] = (s1 * z2 - s2 * z1) * r;\n\n            vec3Add(tan1[i1], tan1[i1], sdir);\n            vec3Add(tan1[i2], tan1[i2], sdir);\n            vec3Add(tan1[i3], tan1[i3], sdir);\n            vec3Add(tan2[i1], tan2[i1], tdir);\n            vec3Add(tan2[i2], tan2[i2], tdir);\n            vec3Add(tan2[i3], tan2[i3], tdir);\n        }\n        var tmp = vec3Create();\n        var nCrossT = vec3Create();\n        var n = vec3Create();\n        for (var i = 0; i < nVertex; i++) {\n            n[0] = normals[i * 3];\n            n[1] = normals[i * 3 + 1];\n            n[2] = normals[i * 3 + 2];\n            var t = tan1[i];\n\n            // Gram-Schmidt orthogonalize\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scale(tmp, n, __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(n, t));\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(tmp, t, tmp);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].normalize(tmp, tmp);\n            // Calculate handedness.\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].cross(nCrossT, n, t);\n            tangents[i * 4] = tmp[0];\n            tangents[i * 4 + 1] = tmp[1];\n            tangents[i * 4 + 2] = tmp[2];\n            // PENDING can config ?\n            tangents[i * 4 + 3] = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(nCrossT, tan2[i]) < 0.0 ? -1.0 : 1.0;\n        }\n        this.dirty();\n    },\n\n    /**\n     * If vertices are not shared by different indices.\n     */\n    isUniqueVertex: function () {\n        if (this.isUseIndices()) {\n            return this.vertexCount === this.indices.length;\n        }\n        else {\n            return true;\n        }\n    },\n    /**\n     * Create a unique vertex for each index.\n     */\n    generateUniqueVertex: function () {\n        if (!this.vertexCount || !this.indices) {\n            return;\n        }\n\n        if (this.indices.length > 0xffff) {\n            this.indices = new __WEBPACK_IMPORTED_MODULE_0__core_vendor__[\"a\" /* default */].Uint32Array(this.indices);\n        }\n\n        var attributes = this.attributes;\n        var indices = this.indices;\n\n        var attributeNameList = this.getEnabledAttributes();\n\n        var oldAttrValues = {};\n        for (var a = 0; a < attributeNameList.length; a++) {\n            var name = attributeNameList[a];\n            oldAttrValues[name] = attributes[name].value;\n            attributes[name].init(this.indices.length);\n        }\n\n        var cursor = 0;\n        for (var i = 0; i < indices.length; i++) {\n            var ii = indices[i];\n            for (var a = 0; a < attributeNameList.length; a++) {\n                var name = attributeNameList[a];\n                var array = attributes[name].value;\n                var size = attributes[name].size;\n\n                for (var k = 0; k < size; k++) {\n                    array[cursor * size + k] = oldAttrValues[name][ii * size + k];\n                }\n            }\n            indices[i] = cursor;\n            cursor++;\n        }\n\n        this.dirty();\n    },\n\n    /**\n     * Generate barycentric coordinates for wireframe draw.\n     */\n    generateBarycentric: function () {\n        if (!this.vertexCount) {\n            return;\n        }\n\n        if (!this.isUniqueVertex()) {\n            this.generateUniqueVertex();\n        }\n\n        var attributes = this.attributes;\n        var array = attributes.barycentric.value;\n        var indices = this.indices;\n        // Already existed;\n        if (array && array.length === indices.length * 3) {\n            return;\n        }\n        array = attributes.barycentric.value = new Float32Array(indices.length * 3);\n\n        for (var i = 0; i < (indices ? indices.length : this.vertexCount / 3);) {\n            for (var j = 0; j < 3; j++) {\n                var ii = indices ? indices[i++] : (i * 3 + j);\n                array[ii * 3 + j] = 1;\n            }\n        }\n        this.dirty();\n    },\n\n    /**\n     * Apply transform to geometry attributes.\n     * @param {clay.Matrix4} matrix\n     */\n    applyTransform: function (matrix) {\n\n        var attributes = this.attributes;\n        var positions = attributes.position.value;\n        var normals = attributes.normal.value;\n        var tangents = attributes.tangent.value;\n\n        matrix = matrix.array;\n        // Normal Matrix\n        var inverseTransposeMatrix = __WEBPACK_IMPORTED_MODULE_2__glmatrix_mat4__[\"a\" /* default */].create();\n        __WEBPACK_IMPORTED_MODULE_2__glmatrix_mat4__[\"a\" /* default */].invert(inverseTransposeMatrix, matrix);\n        __WEBPACK_IMPORTED_MODULE_2__glmatrix_mat4__[\"a\" /* default */].transpose(inverseTransposeMatrix, inverseTransposeMatrix);\n\n        var vec3TransformMat4 = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].transformMat4;\n        var vec3ForEach = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].forEach;\n        vec3ForEach(positions, 3, 0, null, vec3TransformMat4, matrix);\n        if (normals) {\n            vec3ForEach(normals, 3, 0, null, vec3TransformMat4, inverseTransposeMatrix);\n        }\n        if (tangents) {\n            vec3ForEach(tangents, 4, 0, null, vec3TransformMat4, inverseTransposeMatrix);\n        }\n\n        if (this.boundingBox) {\n            this.updateBoundingBox();\n        }\n    },\n    /**\n     * Dispose geometry data in GL context.\n     * @param {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n\n        var cache = this._cache;\n\n        cache.use(renderer.__uid__);\n        var chunks = cache.get('chunks');\n        if (chunks) {\n            for (var c = 0; c < chunks.length; c++) {\n                var chunk = chunks[c];\n\n                for (var k = 0; k < chunk.attributeBuffers.length; k++) {\n                    var attribs = chunk.attributeBuffers[k];\n                    renderer.gl.deleteBuffer(attribs.buffer);\n                }\n\n                if (chunk.indicesBuffer) {\n                    renderer.gl.deleteBuffer(chunk.indicesBuffer.buffer);\n                }\n            }\n        }\n        if (this.__vaoCache) {\n            var vaoExt = renderer.getGLExtension('OES_vertex_array_object');\n            for (var id in this.__vaoCache) {\n                var vao = this.__vaoCache[id].vao;\n                if (vao) {\n                    vaoExt.deleteVertexArrayOES(vao);\n                }\n            }\n        }\n        this.__vaoCache = {};\n        cache.deleteContext(renderer.__uid__);\n    }\n\n});\n\nGeometry.STATIC_DRAW = __WEBPACK_IMPORTED_MODULE_4__GeometryBase__[\"a\" /* default */].STATIC_DRAW;\nGeometry.DYNAMIC_DRAW = __WEBPACK_IMPORTED_MODULE_4__GeometryBase__[\"a\" /* default */].DYNAMIC_DRAW;\nGeometry.STREAM_DRAW = __WEBPACK_IMPORTED_MODULE_4__GeometryBase__[\"a\" /* default */].STREAM_DRAW;\n\nGeometry.AttributeBuffer = __WEBPACK_IMPORTED_MODULE_4__GeometryBase__[\"a\" /* default */].AttributeBuffer;\nGeometry.IndicesBuffer = __WEBPACK_IMPORTED_MODULE_4__GeometryBase__[\"a\" /* default */].IndicesBuffer;\n\nGeometry.Attribute = Attribute;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Geometry);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9HZW9tZXRyeS5qcz9kNjNlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB2ZW5kb3IgZnJvbSAnLi9jb3JlL3ZlbmRvcic7XG5pbXBvcnQgdmVjMyBmcm9tICcuL2dsbWF0cml4L3ZlYzMnO1xuaW1wb3J0IG1hdDQgZnJvbSAnLi9nbG1hdHJpeC9tYXQ0JztcbmltcG9ydCBCb3VuZGluZ0JveCBmcm9tICcuL21hdGgvQm91bmRpbmdCb3gnO1xuaW1wb3J0IEdlb21ldHJ5QmFzZSBmcm9tICcuL0dlb21ldHJ5QmFzZSc7XG5cbnZhciB2ZWMzQ3JlYXRlID0gdmVjMy5jcmVhdGU7XG52YXIgdmVjM0FkZCA9IHZlYzMuYWRkO1xudmFyIHZlYzNTZXQgPSB2ZWMzLnNldDtcblxudmFyIEF0dHJpYnV0ZSA9IEdlb21ldHJ5QmFzZS5BdHRyaWJ1dGU7XG5cbi8qKlxuICogR2VvbWV0cnkgaW4gQ2xheUdMIGNvbnRhaW5zIHZlcnRleCBhdHRyaWJ1dGVzIG9mIG1lc2guIFRoZXNlIHZlcnRleCBhdHRyaWJ1dGVzIHdpbGwgYmUgZmluYWxseSBwcm92aWRlZCB0byB0aGUge0BsaW5rIGNsYXkuU2hhZGVyfS5cbiAqIERpZmZlcmVudCB7QGxpbmsgY2xheS5TaGFkZXJ9IG5lZWRzIGRpZmZlcmVudCBhdHRyaWJ1dGVzLiBIZXJlIGlzIGEgbGlzdCBvZiBhdHRyaWJ1dGVzIHVzZWQgaW4gdGhlIGJ1aWx0aW4gc2hhZGVycy5cbiAqXG4gKiArIHBvc2l0aW9uOiBgY2xheS5iYXNpY2AsIGBjbGF5LmxhbWJlcnRgLCBgY2xheS5zdGFuZGFyZGBcbiAqICsgdGV4Y29vcmQwOiBgY2xheS5iYXNpY2AsIGBjbGF5LmxhbWJlcnRgLCBgY2xheS5zdGFuZGFyZGBcbiAqICsgY29sb3I6IGBjbGF5LmJhc2ljYCwgYGNsYXkubGFtYmVydGAsIGBjbGF5LnN0YW5kYXJkYFxuICogKyB3ZWlnaHQ6IGBjbGF5LmJhc2ljYCwgYGNsYXkubGFtYmVydGAsIGBjbGF5LnN0YW5kYXJkYFxuICogKyBqb2ludDogYGNsYXkuYmFzaWNgLCBgY2xheS5sYW1iZXJ0YCwgYGNsYXkuc3RhbmRhcmRgXG4gKiArIG5vcm1hbDogYGNsYXkubGFtYmVydGAsIGBjbGF5LnN0YW5kYXJkYFxuICogKyB0YW5nZW50OiBgY2xheS5zdGFuZGFyZGBcbiAqXG4gKiAjIyMjIENyZWF0ZSBhIHByb2NlZHVyYWwgZ2VvbWV0cnlcbiAqXG4gKiBDbGF5R0wgcHJvdmlkZXMgYSBjb3VwbGUgb2YgYnVpbHRpbiBwcm9jZWR1cmFsIGdlb21ldHJpZXMuIElubGN1ZGluZzpcbiAqXG4gKiAgKyB7QGxpbmsgY2xheS5nZW9tZXRyeS5DdWJlfVxuICogICsge0BsaW5rIGNsYXkuZ2VvbWV0cnkuU3BoZXJlfVxuICogICsge0BsaW5rIGNsYXkuZ2VvbWV0cnkuUGxhbmV9XG4gKiAgKyB7QGxpbmsgY2xheS5nZW9tZXRyeS5DeWxpbmRlcn1cbiAqICArIHtAbGluayBjbGF5Lmdlb21ldHJ5LkNvbmV9XG4gKiAgKyB7QGxpbmsgY2xheS5nZW9tZXRyeS5QYXJhbWV0cmljU3VyZmFjZX1cbiAqXG4gKiBJdCdzIHNpbXBsZSB0byBjcmVhdGUgYSBiYXNpYyBnZW9tZXRyeSB3aXRoIHRoZXNlIGNsYXNzZXMuXG4gKlxuYGBganNcbnZhciBzcGhlcmUgPSBuZXcgY2xheS5nZW9tZXRyeS5TcGhlcmUoe1xuICAgIHJhZGl1czogMlxufSk7XG5gYGBcbiAqXG4gKiAjIyMjIENyZWF0ZSB0aGUgZ2VvbWV0cnkgZGF0YSBieSB5b3Vyc2VsZlxuICpcbiAqIFVzdWFsbHkgdGhlIHZlcnRleCBhdHRyaWJ1dGVzIGRhdGEgYXJlIGNyZWF0ZWQgYnkgdGhlIHtAbGluayBjbGF5LmxvYWRlci5HTFRGfSBvciBwcm9jZWR1cmFsIGdlb21ldHJpZXMgbGlrZSB7QGxpbmsgY2xheS5nZW9tZXRyeS5TcGhlcmV9LlxuICogQmVzaWRlcyB0aGVzZSwgeW91IGNhbiBjcmVhdGUgdGhlIGRhdGEgbWFudWFsbHkuIEhlcmUgaXMgYSBzaW1wbGUgZXhhbXBsZSB0byBjcmVhdGUgYSB0cmlhbmdsZS5cbmBgYGpzXG52YXIgVFJJQU5HTEVfUE9TSVRJT05TID0gW1xuICAgIFstMC41LCAtMC41LCAwXSxcbiAgICBbMC41LCAtMC41LCAwXSxcbiAgICBbMCwgMC41LCAwXVxuXTtcbnZhciBnZW9tZXRyeSA9IG5ldyBjbGF5LlN0YXRpY0dlb21ldHJ5QmFzZSgpO1xuLy8gQWRkIHRyaWFuZ2xlIHZlcnRpY2VzIHRvIHBvc2l0aW9uIGF0dHJpYnV0ZS5cbmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24uZnJvbUFycmF5KFRSSUFOR0xFX1BPU0lUSU9OUyk7XG5gYGBcbiAqIFRoZW4geW91IGNhbiB1c2UgdGhlIHV0aWxpdHkgbWV0aG9kcyBsaWtlIGBnZW5lcmF0ZVZlcnRleE5vcm1hbHNgLCBgZ2VuZXJhdGVUYW5nZW50c2AgdG8gY3JlYXRlIHRoZSByZW1haW5pbmcgbmVjZXNzYXJ5IGF0dHJpYnV0ZXMuXG4gKlxuICpcbiAqICMjIyMgVXNlIHdpdGggY3VzdG9tIHNoYWRlcnNcbiAqXG4gKiBJZiB5b3Ugd2FuJ3QgdG8gd3JpdGUgY3VzdG9tIHNoYWRlcnMuIERvbid0IGZvcmdldCB0byBhZGQgU0VNQU5USUNTIHRvIHRoZXNlIGF0dHJpYnV0ZXMuIEZvciBleGFtcGxlXG4gKlxuIGBgYGdsc2xcbnVuaWZvcm0gbWF0NCB3b3JsZFZpZXdQcm9qZWN0aW9uIDogV09STERWSUVXUFJPSkVDVElPTjtcbnVuaWZvcm0gbWF0NCB3b3JsZEludmVyc2VUcmFuc3Bvc2UgOiBXT1JMRElOVkVSU0VUUkFOU1BPU0U7XG51bmlmb3JtIG1hdDQgd29ybGQgOiBXT1JMRDtcblxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb24gOiBQT1NJVElPTjtcbmF0dHJpYnV0ZSB2ZWMyIHRleGNvb3JkIDogVEVYQ09PUkRfMDtcbmF0dHJpYnV0ZSB2ZWMzIG5vcm1hbCA6IE5PUk1BTDtcbmBgYFxuICogVGhlc2UgYFBPU0lUSU9OYCwgYFRFWENPT1JEXzBgLCBgTk9STUFMYCBhcmUgU0VNQU5USUNTIHdoaWNoIHdpbGwgbWFwIHRoZSBhdHRyaWJ1dGVzIGluIHNoYWRlciB0byB0aGUgYXR0cmlidXRlcyBpbiB0aGUgR2VvbWV0cnlCYXNlXG4gKlxuICogQXZhaWxhYmxlIGF0dHJpYnV0ZXMgU0VNQU5USUNTIGluY2x1ZGVzIGBQT1NJVElPTmAsIGBURVhDT09SRF8wYCwgYFRFWENPT1JEXzFgIGBOT1JNQUxgLCBgVEFOR0VOVGAsIGBDT0xPUmAsIGBXRUlHSFRgLCBgSk9JTlRgLlxuICpcbiAqXG4gKiBAY29uc3RydWN0b3IgY2xheS5HZW9tZXRyeVxuICogQGV4dGVuZHMgY2xheS5HZW9tZXRyeUJhc2VcbiAqL1xudmFyIEdlb21ldHJ5ID0gR2VvbWV0cnlCYXNlLmV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIC8qKiBAbGVuZHMgY2xheS5HZW9tZXRyeSMgKi8ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQXR0cmlidXRlcyBvZiBnZW9tZXRyeS4gSW5jbHVkaW5nOlxuICAgICAgICAgKiAgKyBgcG9zaXRpb25gXG4gICAgICAgICAqICArIGB0ZXhjb29yZDBgXG4gICAgICAgICAqICArIGB0ZXhjb29yZDFgXG4gICAgICAgICAqICArIGBub3JtYWxgXG4gICAgICAgICAqICArIGB0YW5nZW50YFxuICAgICAgICAgKiAgKyBgY29sb3JgXG4gICAgICAgICAqICArIGB3ZWlnaHRgXG4gICAgICAgICAqICArIGBqb2ludGBcbiAgICAgICAgICogICsgYGJhcnljZW50cmljYFxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0LjxzdHJpbmcsIGNsYXkuR2VvbWV0cnkuQXR0cmlidXRlPn1cbiAgICAgICAgICovXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgQXR0cmlidXRlKCdwb3NpdGlvbicsICdmbG9hdCcsIDMsICdQT1NJVElPTicpLFxuICAgICAgICAgICAgdGV4Y29vcmQwOiBuZXcgQXR0cmlidXRlKCd0ZXhjb29yZDAnLCAnZmxvYXQnLCAyLCAnVEVYQ09PUkRfMCcpLFxuICAgICAgICAgICAgdGV4Y29vcmQxOiBuZXcgQXR0cmlidXRlKCd0ZXhjb29yZDEnLCAnZmxvYXQnLCAyLCAnVEVYQ09PUkRfMScpLFxuICAgICAgICAgICAgbm9ybWFsOiBuZXcgQXR0cmlidXRlKCdub3JtYWwnLCAnZmxvYXQnLCAzLCAnTk9STUFMJyksXG4gICAgICAgICAgICB0YW5nZW50OiBuZXcgQXR0cmlidXRlKCd0YW5nZW50JywgJ2Zsb2F0JywgNCwgJ1RBTkdFTlQnKSxcbiAgICAgICAgICAgIGNvbG9yOiBuZXcgQXR0cmlidXRlKCdjb2xvcicsICdmbG9hdCcsIDQsICdDT0xPUicpLFxuICAgICAgICAgICAgLy8gU2tpbm5pbmcgYXR0cmlidXRlc1xuICAgICAgICAgICAgLy8gRWFjaCB2ZXJ0ZXggY2FuIGJlIGJpbmQgdG8gNCBib25lcywgYmVjYXVzZSB0aGVcbiAgICAgICAgICAgIC8vIHN1bSBvZiB3ZWlnaHRzIGlzIDEsIHNvIHRoZSB3ZWlnaHRzIGlzIHN0b3JlZCBpbiB2ZWMzIGFuZCB0aGUgbGFzdFxuICAgICAgICAgICAgLy8gY2FuIGJlIGNhbGN1bGF0ZWQgYnkgMS13Lngtdy55LXcuelxuICAgICAgICAgICAgd2VpZ2h0OiBuZXcgQXR0cmlidXRlKCd3ZWlnaHQnLCAnZmxvYXQnLCAzLCAnV0VJR0hUJyksXG4gICAgICAgICAgICBqb2ludDogbmV3IEF0dHJpYnV0ZSgnam9pbnQnLCAnZmxvYXQnLCA0LCAnSk9JTlQnKSxcbiAgICAgICAgICAgIC8vIEZvciB3aXJlZnJhbWUgZGlzcGxheVxuICAgICAgICAgICAgLy8gaHR0cDovL2NvZGVmbG93Lm9yZy9lbnRyaWVzLzIwMTIvYXVnLzAyL2Vhc3ktd2lyZWZyYW1lLWRpc3BsYXktd2l0aC1iYXJ5Y2VudHJpYy1jb29yZGluYXRlcy9cbiAgICAgICAgICAgIGJhcnljZW50cmljOiBuZXcgQXR0cmlidXRlKCdiYXJ5Y2VudHJpYycsICdmbG9hdCcsIDMsIG51bGwpLFxuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsY3VsYXRlZCBib3VuZGluZyBib3ggb2YgZ2VvbWV0cnkuXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LkJvdW5kaW5nQm94fVxuICAgICAgICAgKi9cbiAgICAgICAgYm91bmRpbmdCb3g6IG51bGxcbiAgICB9O1xufSxcbi8qKiBAbGVuZHMgY2xheS5HZW9tZXRyeS5wcm90b3R5cGUgKi9cbntcblxuICAgIG1haW5BdHRyaWJ1dGU6ICdwb3NpdGlvbicsXG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYm91bmRpbmdCb3ggb2YgR2VvbWV0cnlcbiAgICAgKi9cbiAgICB1cGRhdGVCb3VuZGluZ0JveDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYmJveCA9IHRoaXMuYm91bmRpbmdCb3g7XG4gICAgICAgIGlmICghYmJveCkge1xuICAgICAgICAgICAgYmJveCA9IHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcG9zQXJyID0gdGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uLnZhbHVlO1xuICAgICAgICBpZiAocG9zQXJyICYmIHBvc0Fyci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBtaW4gPSBiYm94Lm1pbjtcbiAgICAgICAgICAgIHZhciBtYXggPSBiYm94Lm1heDtcbiAgICAgICAgICAgIHZhciBtaW5BcnIgPSBtaW4uYXJyYXk7XG4gICAgICAgICAgICB2YXIgbWF4QXJyID0gbWF4LmFycmF5O1xuICAgICAgICAgICAgdmVjMy5zZXQobWluQXJyLCBwb3NBcnJbMF0sIHBvc0FyclsxXSwgcG9zQXJyWzJdKTtcbiAgICAgICAgICAgIHZlYzMuc2V0KG1heEFyciwgcG9zQXJyWzBdLCBwb3NBcnJbMV0sIHBvc0FyclsyXSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMzsgaSA8IHBvc0Fyci5sZW5ndGg7KSB7XG4gICAgICAgICAgICAgICAgdmFyIHggPSBwb3NBcnJbaSsrXTtcbiAgICAgICAgICAgICAgICB2YXIgeSA9IHBvc0FycltpKytdO1xuICAgICAgICAgICAgICAgIHZhciB6ID0gcG9zQXJyW2krK107XG4gICAgICAgICAgICAgICAgaWYgKHggPCBtaW5BcnJbMF0pIHsgbWluQXJyWzBdID0geDsgfVxuICAgICAgICAgICAgICAgIGlmICh5IDwgbWluQXJyWzFdKSB7IG1pbkFyclsxXSA9IHk7IH1cbiAgICAgICAgICAgICAgICBpZiAoeiA8IG1pbkFyclsyXSkgeyBtaW5BcnJbMl0gPSB6OyB9XG5cbiAgICAgICAgICAgICAgICBpZiAoeCA+IG1heEFyclswXSkgeyBtYXhBcnJbMF0gPSB4OyB9XG4gICAgICAgICAgICAgICAgaWYgKHkgPiBtYXhBcnJbMV0pIHsgbWF4QXJyWzFdID0geTsgfVxuICAgICAgICAgICAgICAgIGlmICh6ID4gbWF4QXJyWzJdKSB7IG1heEFyclsyXSA9IHo7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1pbi5fZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgbWF4Ll9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgbm9ybWFscyBwZXIgdmVydGV4LlxuICAgICAqL1xuICAgIGdlbmVyYXRlVmVydGV4Tm9ybWFsczogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMudmVydGV4Q291bnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpbmRpY2VzID0gdGhpcy5pbmRpY2VzO1xuICAgICAgICB2YXIgYXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcztcbiAgICAgICAgdmFyIHBvc2l0aW9ucyA9IGF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWU7XG4gICAgICAgIHZhciBub3JtYWxzID0gYXR0cmlidXRlcy5ub3JtYWwudmFsdWU7XG5cbiAgICAgICAgaWYgKCFub3JtYWxzIHx8IG5vcm1hbHMubGVuZ3RoICE9PSBwb3NpdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBub3JtYWxzID0gYXR0cmlidXRlcy5ub3JtYWwudmFsdWUgPSBuZXcgdmVuZG9yLkZsb2F0MzJBcnJheShwb3NpdGlvbnMubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFJlc2V0XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vcm1hbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBub3JtYWxzW2ldID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwMSA9IHZlYzNDcmVhdGUoKTtcbiAgICAgICAgdmFyIHAyID0gdmVjM0NyZWF0ZSgpO1xuICAgICAgICB2YXIgcDMgPSB2ZWMzQ3JlYXRlKCk7XG5cbiAgICAgICAgdmFyIHYyMSA9IHZlYzNDcmVhdGUoKTtcbiAgICAgICAgdmFyIHYzMiA9IHZlYzNDcmVhdGUoKTtcblxuICAgICAgICB2YXIgbiA9IHZlYzNDcmVhdGUoKTtcblxuICAgICAgICB2YXIgbGVuID0gaW5kaWNlcyA/IGluZGljZXMubGVuZ3RoIDogdGhpcy52ZXJ0ZXhDb3VudDtcbiAgICAgICAgdmFyIGkxLCBpMiwgaTM7XG4gICAgICAgIGZvciAodmFyIGYgPSAwOyBmIDwgbGVuOykge1xuICAgICAgICAgICAgaWYgKGluZGljZXMpIHtcbiAgICAgICAgICAgICAgICBpMSA9IGluZGljZXNbZisrXTtcbiAgICAgICAgICAgICAgICBpMiA9IGluZGljZXNbZisrXTtcbiAgICAgICAgICAgICAgICBpMyA9IGluZGljZXNbZisrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGkxID0gZisrO1xuICAgICAgICAgICAgICAgIGkyID0gZisrO1xuICAgICAgICAgICAgICAgIGkzID0gZisrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2ZWMzU2V0KHAxLCBwb3NpdGlvbnNbaTEqM10sIHBvc2l0aW9uc1tpMSozKzFdLCBwb3NpdGlvbnNbaTEqMysyXSk7XG4gICAgICAgICAgICB2ZWMzU2V0KHAyLCBwb3NpdGlvbnNbaTIqM10sIHBvc2l0aW9uc1tpMiozKzFdLCBwb3NpdGlvbnNbaTIqMysyXSk7XG4gICAgICAgICAgICB2ZWMzU2V0KHAzLCBwb3NpdGlvbnNbaTMqM10sIHBvc2l0aW9uc1tpMyozKzFdLCBwb3NpdGlvbnNbaTMqMysyXSk7XG5cbiAgICAgICAgICAgIHZlYzMuc3ViKHYyMSwgcDEsIHAyKTtcbiAgICAgICAgICAgIHZlYzMuc3ViKHYzMiwgcDIsIHAzKTtcbiAgICAgICAgICAgIHZlYzMuY3Jvc3MobiwgdjIxLCB2MzIpO1xuICAgICAgICAgICAgLy8gQWxyZWFkeSBiZSB3ZWlnaHRlZCBieSB0aGUgdHJpYW5nbGUgYXJlYVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBub3JtYWxzW2kxKjMraV0gPSBub3JtYWxzW2kxKjMraV0gKyBuW2ldO1xuICAgICAgICAgICAgICAgIG5vcm1hbHNbaTIqMytpXSA9IG5vcm1hbHNbaTIqMytpXSArIG5baV07XG4gICAgICAgICAgICAgICAgbm9ybWFsc1tpMyozK2ldID0gbm9ybWFsc1tpMyozK2ldICsgbltpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9ybWFscy5sZW5ndGg7KSB7XG4gICAgICAgICAgICB2ZWMzU2V0KG4sIG5vcm1hbHNbaV0sIG5vcm1hbHNbaSsxXSwgbm9ybWFsc1tpKzJdKTtcbiAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKG4sIG4pO1xuICAgICAgICAgICAgbm9ybWFsc1tpKytdID0gblswXTtcbiAgICAgICAgICAgIG5vcm1hbHNbaSsrXSA9IG5bMV07XG4gICAgICAgICAgICBub3JtYWxzW2krK10gPSBuWzJdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlydHkoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgbm9ybWFscyBwZXIgZmFjZS5cbiAgICAgKi9cbiAgICBnZW5lcmF0ZUZhY2VOb3JtYWxzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy52ZXJ0ZXhDb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzVW5pcXVlVmVydGV4KCkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVVbmlxdWVWZXJ0ZXgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpbmRpY2VzID0gdGhpcy5pbmRpY2VzO1xuICAgICAgICB2YXIgYXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcztcbiAgICAgICAgdmFyIHBvc2l0aW9ucyA9IGF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWU7XG4gICAgICAgIHZhciBub3JtYWxzID0gYXR0cmlidXRlcy5ub3JtYWwudmFsdWU7XG5cbiAgICAgICAgdmFyIHAxID0gdmVjM0NyZWF0ZSgpO1xuICAgICAgICB2YXIgcDIgPSB2ZWMzQ3JlYXRlKCk7XG4gICAgICAgIHZhciBwMyA9IHZlYzNDcmVhdGUoKTtcblxuICAgICAgICB2YXIgdjIxID0gdmVjM0NyZWF0ZSgpO1xuICAgICAgICB2YXIgdjMyID0gdmVjM0NyZWF0ZSgpO1xuICAgICAgICB2YXIgbiA9IHZlYzNDcmVhdGUoKTtcblxuICAgICAgICBpZiAoIW5vcm1hbHMpIHtcbiAgICAgICAgICAgIG5vcm1hbHMgPSBhdHRyaWJ1dGVzLm5vcm1hbC52YWx1ZSA9IG5ldyBGbG9hdDMyQXJyYXkocG9zaXRpb25zLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxlbiA9IGluZGljZXMgPyBpbmRpY2VzLmxlbmd0aCA6IHRoaXMudmVydGV4Q291bnQ7XG4gICAgICAgIHZhciBpMSwgaTIsIGkzO1xuICAgICAgICBmb3IgKHZhciBmID0gMDsgZiA8IGxlbjspIHtcbiAgICAgICAgICAgIGlmIChpbmRpY2VzKSB7XG4gICAgICAgICAgICAgICAgaTEgPSBpbmRpY2VzW2YrK107XG4gICAgICAgICAgICAgICAgaTIgPSBpbmRpY2VzW2YrK107XG4gICAgICAgICAgICAgICAgaTMgPSBpbmRpY2VzW2YrK107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpMSA9IGYrKztcbiAgICAgICAgICAgICAgICBpMiA9IGYrKztcbiAgICAgICAgICAgICAgICBpMyA9IGYrKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmVjM1NldChwMSwgcG9zaXRpb25zW2kxKjNdLCBwb3NpdGlvbnNbaTEqMysxXSwgcG9zaXRpb25zW2kxKjMrMl0pO1xuICAgICAgICAgICAgdmVjM1NldChwMiwgcG9zaXRpb25zW2kyKjNdLCBwb3NpdGlvbnNbaTIqMysxXSwgcG9zaXRpb25zW2kyKjMrMl0pO1xuICAgICAgICAgICAgdmVjM1NldChwMywgcG9zaXRpb25zW2kzKjNdLCBwb3NpdGlvbnNbaTMqMysxXSwgcG9zaXRpb25zW2kzKjMrMl0pO1xuXG4gICAgICAgICAgICB2ZWMzLnN1Yih2MjEsIHAxLCBwMik7XG4gICAgICAgICAgICB2ZWMzLnN1Yih2MzIsIHAyLCBwMyk7XG4gICAgICAgICAgICB2ZWMzLmNyb3NzKG4sIHYyMSwgdjMyKTtcblxuICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUobiwgbik7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbm9ybWFsc1tpMSozICsgaV0gPSBuW2ldO1xuICAgICAgICAgICAgICAgIG5vcm1hbHNbaTIqMyArIGldID0gbltpXTtcbiAgICAgICAgICAgICAgICBub3JtYWxzW2kzKjMgKyBpXSA9IG5baV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXJ0eSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSB0YW5nZW50cyBhdHRyaWJ1dGVzLlxuICAgICAqL1xuICAgIGdlbmVyYXRlVGFuZ2VudHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZlcnRleENvdW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgblZlcnRleCA9IHRoaXMudmVydGV4Q291bnQ7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzO1xuICAgICAgICBpZiAoIWF0dHJpYnV0ZXMudGFuZ2VudC52YWx1ZSkge1xuICAgICAgICAgICAgYXR0cmlidXRlcy50YW5nZW50LnZhbHVlID0gbmV3IEZsb2F0MzJBcnJheShuVmVydGV4ICogNCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRleGNvb3JkcyA9IGF0dHJpYnV0ZXMudGV4Y29vcmQwLnZhbHVlO1xuICAgICAgICB2YXIgcG9zaXRpb25zID0gYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZTtcbiAgICAgICAgdmFyIHRhbmdlbnRzID0gYXR0cmlidXRlcy50YW5nZW50LnZhbHVlO1xuICAgICAgICB2YXIgbm9ybWFscyA9IGF0dHJpYnV0ZXMubm9ybWFsLnZhbHVlO1xuXG4gICAgICAgIGlmICghdGV4Y29vcmRzKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0dlb21ldHJ5IHdpdGhvdXQgdGV4Y29vcmRzIGNhblxcJ3QgZ2VuZXJhdGUgdGFuZ2VudHMuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdGFuMSA9IFtdO1xuICAgICAgICB2YXIgdGFuMiA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5WZXJ0ZXg7IGkrKykge1xuICAgICAgICAgICAgdGFuMVtpXSA9IFswLjAsIDAuMCwgMC4wXTtcbiAgICAgICAgICAgIHRhbjJbaV0gPSBbMC4wLCAwLjAsIDAuMF07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2RpciA9IFswLjAsIDAuMCwgMC4wXTtcbiAgICAgICAgdmFyIHRkaXIgPSBbMC4wLCAwLjAsIDAuMF07XG4gICAgICAgIHZhciBpbmRpY2VzID0gdGhpcy5pbmRpY2VzO1xuXG4gICAgICAgIHZhciBsZW4gPSBpbmRpY2VzID8gaW5kaWNlcy5sZW5ndGggOiB0aGlzLnZlcnRleENvdW50O1xuICAgICAgICB2YXIgaTEsIGkyLCBpMztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47KSB7XG4gICAgICAgICAgICBpZiAoaW5kaWNlcykge1xuICAgICAgICAgICAgICAgIGkxID0gaW5kaWNlc1tpKytdO1xuICAgICAgICAgICAgICAgIGkyID0gaW5kaWNlc1tpKytdO1xuICAgICAgICAgICAgICAgIGkzID0gaW5kaWNlc1tpKytdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaTEgPSBpKys7XG4gICAgICAgICAgICAgICAgaTIgPSBpKys7XG4gICAgICAgICAgICAgICAgaTMgPSBpKys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzdDFzID0gdGV4Y29vcmRzW2kxICogMl0sXG4gICAgICAgICAgICAgICAgc3QycyA9IHRleGNvb3Jkc1tpMiAqIDJdLFxuICAgICAgICAgICAgICAgIHN0M3MgPSB0ZXhjb29yZHNbaTMgKiAyXSxcbiAgICAgICAgICAgICAgICBzdDF0ID0gdGV4Y29vcmRzW2kxICogMiArIDFdLFxuICAgICAgICAgICAgICAgIHN0MnQgPSB0ZXhjb29yZHNbaTIgKiAyICsgMV0sXG4gICAgICAgICAgICAgICAgc3QzdCA9IHRleGNvb3Jkc1tpMyAqIDIgKyAxXSxcblxuICAgICAgICAgICAgICAgIHAxeCA9IHBvc2l0aW9uc1tpMSAqIDNdLFxuICAgICAgICAgICAgICAgIHAyeCA9IHBvc2l0aW9uc1tpMiAqIDNdLFxuICAgICAgICAgICAgICAgIHAzeCA9IHBvc2l0aW9uc1tpMyAqIDNdLFxuICAgICAgICAgICAgICAgIHAxeSA9IHBvc2l0aW9uc1tpMSAqIDMgKyAxXSxcbiAgICAgICAgICAgICAgICBwMnkgPSBwb3NpdGlvbnNbaTIgKiAzICsgMV0sXG4gICAgICAgICAgICAgICAgcDN5ID0gcG9zaXRpb25zW2kzICogMyArIDFdLFxuICAgICAgICAgICAgICAgIHAxeiA9IHBvc2l0aW9uc1tpMSAqIDMgKyAyXSxcbiAgICAgICAgICAgICAgICBwMnogPSBwb3NpdGlvbnNbaTIgKiAzICsgMl0sXG4gICAgICAgICAgICAgICAgcDN6ID0gcG9zaXRpb25zW2kzICogMyArIDJdO1xuXG4gICAgICAgICAgICB2YXIgeDEgPSBwMnggLSBwMXgsXG4gICAgICAgICAgICAgICAgeDIgPSBwM3ggLSBwMXgsXG4gICAgICAgICAgICAgICAgeTEgPSBwMnkgLSBwMXksXG4gICAgICAgICAgICAgICAgeTIgPSBwM3kgLSBwMXksXG4gICAgICAgICAgICAgICAgejEgPSBwMnogLSBwMXosXG4gICAgICAgICAgICAgICAgejIgPSBwM3ogLSBwMXo7XG5cbiAgICAgICAgICAgIHZhciBzMSA9IHN0MnMgLSBzdDFzLFxuICAgICAgICAgICAgICAgIHMyID0gc3QzcyAtIHN0MXMsXG4gICAgICAgICAgICAgICAgdDEgPSBzdDJ0IC0gc3QxdCxcbiAgICAgICAgICAgICAgICB0MiA9IHN0M3QgLSBzdDF0O1xuXG4gICAgICAgICAgICB2YXIgciA9IDEuMCAvIChzMSAqIHQyIC0gdDEgKiBzMik7XG4gICAgICAgICAgICBzZGlyWzBdID0gKHQyICogeDEgLSB0MSAqIHgyKSAqIHI7XG4gICAgICAgICAgICBzZGlyWzFdID0gKHQyICogeTEgLSB0MSAqIHkyKSAqIHI7XG4gICAgICAgICAgICBzZGlyWzJdID0gKHQyICogejEgLSB0MSAqIHoyKSAqIHI7XG5cbiAgICAgICAgICAgIHRkaXJbMF0gPSAoczEgKiB4MiAtIHMyICogeDEpICogcjtcbiAgICAgICAgICAgIHRkaXJbMV0gPSAoczEgKiB5MiAtIHMyICogeTEpICogcjtcbiAgICAgICAgICAgIHRkaXJbMl0gPSAoczEgKiB6MiAtIHMyICogejEpICogcjtcblxuICAgICAgICAgICAgdmVjM0FkZCh0YW4xW2kxXSwgdGFuMVtpMV0sIHNkaXIpO1xuICAgICAgICAgICAgdmVjM0FkZCh0YW4xW2kyXSwgdGFuMVtpMl0sIHNkaXIpO1xuICAgICAgICAgICAgdmVjM0FkZCh0YW4xW2kzXSwgdGFuMVtpM10sIHNkaXIpO1xuICAgICAgICAgICAgdmVjM0FkZCh0YW4yW2kxXSwgdGFuMltpMV0sIHRkaXIpO1xuICAgICAgICAgICAgdmVjM0FkZCh0YW4yW2kyXSwgdGFuMltpMl0sIHRkaXIpO1xuICAgICAgICAgICAgdmVjM0FkZCh0YW4yW2kzXSwgdGFuMltpM10sIHRkaXIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0bXAgPSB2ZWMzQ3JlYXRlKCk7XG4gICAgICAgIHZhciBuQ3Jvc3NUID0gdmVjM0NyZWF0ZSgpO1xuICAgICAgICB2YXIgbiA9IHZlYzNDcmVhdGUoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuVmVydGV4OyBpKyspIHtcbiAgICAgICAgICAgIG5bMF0gPSBub3JtYWxzW2kgKiAzXTtcbiAgICAgICAgICAgIG5bMV0gPSBub3JtYWxzW2kgKiAzICsgMV07XG4gICAgICAgICAgICBuWzJdID0gbm9ybWFsc1tpICogMyArIDJdO1xuICAgICAgICAgICAgdmFyIHQgPSB0YW4xW2ldO1xuXG4gICAgICAgICAgICAvLyBHcmFtLVNjaG1pZHQgb3J0aG9nb25hbGl6ZVxuICAgICAgICAgICAgdmVjMy5zY2FsZSh0bXAsIG4sIHZlYzMuZG90KG4sIHQpKTtcbiAgICAgICAgICAgIHZlYzMuc3ViKHRtcCwgdCwgdG1wKTtcbiAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKHRtcCwgdG1wKTtcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBoYW5kZWRuZXNzLlxuICAgICAgICAgICAgdmVjMy5jcm9zcyhuQ3Jvc3NULCBuLCB0KTtcbiAgICAgICAgICAgIHRhbmdlbnRzW2kgKiA0XSA9IHRtcFswXTtcbiAgICAgICAgICAgIHRhbmdlbnRzW2kgKiA0ICsgMV0gPSB0bXBbMV07XG4gICAgICAgICAgICB0YW5nZW50c1tpICogNCArIDJdID0gdG1wWzJdO1xuICAgICAgICAgICAgLy8gUEVORElORyBjYW4gY29uZmlnID9cbiAgICAgICAgICAgIHRhbmdlbnRzW2kgKiA0ICsgM10gPSB2ZWMzLmRvdChuQ3Jvc3NULCB0YW4yW2ldKSA8IDAuMCA/IC0xLjAgOiAxLjA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXJ0eSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJZiB2ZXJ0aWNlcyBhcmUgbm90IHNoYXJlZCBieSBkaWZmZXJlbnQgaW5kaWNlcy5cbiAgICAgKi9cbiAgICBpc1VuaXF1ZVZlcnRleDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc1VzZUluZGljZXMoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmVydGV4Q291bnQgPT09IHRoaXMuaW5kaWNlcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgdW5pcXVlIHZlcnRleCBmb3IgZWFjaCBpbmRleC5cbiAgICAgKi9cbiAgICBnZW5lcmF0ZVVuaXF1ZVZlcnRleDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMudmVydGV4Q291bnQgfHwgIXRoaXMuaW5kaWNlcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaW5kaWNlcy5sZW5ndGggPiAweGZmZmYpIHtcbiAgICAgICAgICAgIHRoaXMuaW5kaWNlcyA9IG5ldyB2ZW5kb3IuVWludDMyQXJyYXkodGhpcy5pbmRpY2VzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzO1xuICAgICAgICB2YXIgaW5kaWNlcyA9IHRoaXMuaW5kaWNlcztcblxuICAgICAgICB2YXIgYXR0cmlidXRlTmFtZUxpc3QgPSB0aGlzLmdldEVuYWJsZWRBdHRyaWJ1dGVzKCk7XG5cbiAgICAgICAgdmFyIG9sZEF0dHJWYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBhdHRyaWJ1dGVOYW1lTGlzdC5sZW5ndGg7IGErKykge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBhdHRyaWJ1dGVOYW1lTGlzdFthXTtcbiAgICAgICAgICAgIG9sZEF0dHJWYWx1ZXNbbmFtZV0gPSBhdHRyaWJ1dGVzW25hbWVdLnZhbHVlO1xuICAgICAgICAgICAgYXR0cmlidXRlc1tuYW1lXS5pbml0KHRoaXMuaW5kaWNlcy5sZW5ndGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGN1cnNvciA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kaWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGlpID0gaW5kaWNlc1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgYXR0cmlidXRlTmFtZUxpc3QubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGF0dHJpYnV0ZU5hbWVMaXN0W2FdO1xuICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IGF0dHJpYnV0ZXNbbmFtZV0udmFsdWU7XG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSBhdHRyaWJ1dGVzW25hbWVdLnNpemU7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHNpemU7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICBhcnJheVtjdXJzb3IgKiBzaXplICsga10gPSBvbGRBdHRyVmFsdWVzW25hbWVdW2lpICogc2l6ZSArIGtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGljZXNbaV0gPSBjdXJzb3I7XG4gICAgICAgICAgICBjdXJzb3IrKztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGlydHkoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgYmFyeWNlbnRyaWMgY29vcmRpbmF0ZXMgZm9yIHdpcmVmcmFtZSBkcmF3LlxuICAgICAqL1xuICAgIGdlbmVyYXRlQmFyeWNlbnRyaWM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZlcnRleENvdW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuaXNVbmlxdWVWZXJ0ZXgoKSkge1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVVuaXF1ZVZlcnRleCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSB0aGlzLmF0dHJpYnV0ZXM7XG4gICAgICAgIHZhciBhcnJheSA9IGF0dHJpYnV0ZXMuYmFyeWNlbnRyaWMudmFsdWU7XG4gICAgICAgIHZhciBpbmRpY2VzID0gdGhpcy5pbmRpY2VzO1xuICAgICAgICAvLyBBbHJlYWR5IGV4aXN0ZWQ7XG4gICAgICAgIGlmIChhcnJheSAmJiBhcnJheS5sZW5ndGggPT09IGluZGljZXMubGVuZ3RoICogMykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFycmF5ID0gYXR0cmlidXRlcy5iYXJ5Y2VudHJpYy52YWx1ZSA9IG5ldyBGbG9hdDMyQXJyYXkoaW5kaWNlcy5sZW5ndGggKiAzKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IChpbmRpY2VzID8gaW5kaWNlcy5sZW5ndGggOiB0aGlzLnZlcnRleENvdW50IC8gMyk7KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDM7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciBpaSA9IGluZGljZXMgPyBpbmRpY2VzW2krK10gOiAoaSAqIDMgKyBqKTtcbiAgICAgICAgICAgICAgICBhcnJheVtpaSAqIDMgKyBqXSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXJ0eSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBcHBseSB0cmFuc2Zvcm0gdG8gZ2VvbWV0cnkgYXR0cmlidXRlcy5cbiAgICAgKiBAcGFyYW0ge2NsYXkuTWF0cml4NH0gbWF0cml4XG4gICAgICovXG4gICAgYXBwbHlUcmFuc2Zvcm06IGZ1bmN0aW9uIChtYXRyaXgpIHtcblxuICAgICAgICB2YXIgYXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcztcbiAgICAgICAgdmFyIHBvc2l0aW9ucyA9IGF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWU7XG4gICAgICAgIHZhciBub3JtYWxzID0gYXR0cmlidXRlcy5ub3JtYWwudmFsdWU7XG4gICAgICAgIHZhciB0YW5nZW50cyA9IGF0dHJpYnV0ZXMudGFuZ2VudC52YWx1ZTtcblxuICAgICAgICBtYXRyaXggPSBtYXRyaXguYXJyYXk7XG4gICAgICAgIC8vIE5vcm1hbCBNYXRyaXhcbiAgICAgICAgdmFyIGludmVyc2VUcmFuc3Bvc2VNYXRyaXggPSBtYXQ0LmNyZWF0ZSgpO1xuICAgICAgICBtYXQ0LmludmVydChpbnZlcnNlVHJhbnNwb3NlTWF0cml4LCBtYXRyaXgpO1xuICAgICAgICBtYXQ0LnRyYW5zcG9zZShpbnZlcnNlVHJhbnNwb3NlTWF0cml4LCBpbnZlcnNlVHJhbnNwb3NlTWF0cml4KTtcblxuICAgICAgICB2YXIgdmVjM1RyYW5zZm9ybU1hdDQgPSB2ZWMzLnRyYW5zZm9ybU1hdDQ7XG4gICAgICAgIHZhciB2ZWMzRm9yRWFjaCA9IHZlYzMuZm9yRWFjaDtcbiAgICAgICAgdmVjM0ZvckVhY2gocG9zaXRpb25zLCAzLCAwLCBudWxsLCB2ZWMzVHJhbnNmb3JtTWF0NCwgbWF0cml4KTtcbiAgICAgICAgaWYgKG5vcm1hbHMpIHtcbiAgICAgICAgICAgIHZlYzNGb3JFYWNoKG5vcm1hbHMsIDMsIDAsIG51bGwsIHZlYzNUcmFuc2Zvcm1NYXQ0LCBpbnZlcnNlVHJhbnNwb3NlTWF0cml4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFuZ2VudHMpIHtcbiAgICAgICAgICAgIHZlYzNGb3JFYWNoKHRhbmdlbnRzLCA0LCAwLCBudWxsLCB2ZWMzVHJhbnNmb3JtTWF0NCwgaW52ZXJzZVRyYW5zcG9zZU1hdHJpeCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5ib3VuZGluZ0JveCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ0JveCgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIGdlb21ldHJ5IGRhdGEgaW4gR0wgY29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICovXG4gICAgZGlzcG9zZTogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG5cbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5fY2FjaGU7XG5cbiAgICAgICAgY2FjaGUudXNlKHJlbmRlcmVyLl9fdWlkX18pO1xuICAgICAgICB2YXIgY2h1bmtzID0gY2FjaGUuZ2V0KCdjaHVua3MnKTtcbiAgICAgICAgaWYgKGNodW5rcykge1xuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBjaHVua3MubGVuZ3RoOyBjKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY2h1bmsgPSBjaHVua3NbY107XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNodW5rLmF0dHJpYnV0ZUJ1ZmZlcnMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJpYnMgPSBjaHVuay5hdHRyaWJ1dGVCdWZmZXJzW2tdO1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5nbC5kZWxldGVCdWZmZXIoYXR0cmlicy5idWZmZXIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjaHVuay5pbmRpY2VzQnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLmdsLmRlbGV0ZUJ1ZmZlcihjaHVuay5pbmRpY2VzQnVmZmVyLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9fdmFvQ2FjaGUpIHtcbiAgICAgICAgICAgIHZhciB2YW9FeHQgPSByZW5kZXJlci5nZXRHTEV4dGVuc2lvbignT0VTX3ZlcnRleF9hcnJheV9vYmplY3QnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGlkIGluIHRoaXMuX192YW9DYWNoZSkge1xuICAgICAgICAgICAgICAgIHZhciB2YW8gPSB0aGlzLl9fdmFvQ2FjaGVbaWRdLnZhbztcbiAgICAgICAgICAgICAgICBpZiAodmFvKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhb0V4dC5kZWxldGVWZXJ0ZXhBcnJheU9FUyh2YW8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9fdmFvQ2FjaGUgPSB7fTtcbiAgICAgICAgY2FjaGUuZGVsZXRlQ29udGV4dChyZW5kZXJlci5fX3VpZF9fKTtcbiAgICB9XG5cbn0pO1xuXG5HZW9tZXRyeS5TVEFUSUNfRFJBVyA9IEdlb21ldHJ5QmFzZS5TVEFUSUNfRFJBVztcbkdlb21ldHJ5LkRZTkFNSUNfRFJBVyA9IEdlb21ldHJ5QmFzZS5EWU5BTUlDX0RSQVc7XG5HZW9tZXRyeS5TVFJFQU1fRFJBVyA9IEdlb21ldHJ5QmFzZS5TVFJFQU1fRFJBVztcblxuR2VvbWV0cnkuQXR0cmlidXRlQnVmZmVyID0gR2VvbWV0cnlCYXNlLkF0dHJpYnV0ZUJ1ZmZlcjtcbkdlb21ldHJ5LkluZGljZXNCdWZmZXIgPSBHZW9tZXRyeUJhc2UuSW5kaWNlc0J1ZmZlcjtcblxuR2VvbWV0cnkuQXR0cmlidXRlID0gQXR0cmlidXRlO1xuXG5leHBvcnQgZGVmYXVsdCBHZW9tZXRyeTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvR2VvbWV0cnkuanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///13\n");

/***/ }),
/* 14 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glmatrix_quat__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__glmatrix_mat3__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Vector3__ = __webpack_require__(3);\n\n\n\n\n\n\n/**\n * @constructor\n * @alias clay.Matrix4\n */\nvar Matrix4 = function() {\n\n    this._axisX = new __WEBPACK_IMPORTED_MODULE_4__Vector3__[\"a\" /* default */]();\n    this._axisY = new __WEBPACK_IMPORTED_MODULE_4__Vector3__[\"a\" /* default */]();\n    this._axisZ = new __WEBPACK_IMPORTED_MODULE_4__Vector3__[\"a\" /* default */]();\n\n    /**\n     * Storage of Matrix4\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Matrix4#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].create();\n\n    /**\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Matrix4#\n     */\n    this._dirty = true;\n};\n\nMatrix4.prototype = {\n\n    constructor: Matrix4,\n\n    /**\n     * Set components from array\n     * @param  {Float32Array|number[]} arr\n     */\n    setArray: function (arr) {\n        for (var i = 0; i < this.array.length; i++) {\n            this.array[i] = arr[i];\n        }\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Calculate the adjugate of self, in-place\n     * @return {clay.Matrix4}\n     */\n    adjoint: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].adjoint(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Clone a new Matrix4\n     * @return {clay.Matrix4}\n     */\n    clone: function() {\n        return (new Matrix4()).copy(this);\n    },\n\n    /**\n     * Copy from b\n     * @param  {clay.Matrix4} b\n     * @return {clay.Matrix4}\n     */\n    copy: function(a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].copy(this.array, a.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Calculate matrix determinant\n     * @return {number}\n     */\n    determinant: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].determinant(this.array);\n    },\n\n    /**\n     * Set upper 3x3 part from quaternion\n     * @param  {clay.Quaternion} q\n     * @return {clay.Matrix4}\n     */\n    fromQuat: function(q) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].fromQuat(this.array, q.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set from a quaternion rotation and a vector translation\n     * @param  {clay.Quaternion} q\n     * @param  {clay.Vector3} v\n     * @return {clay.Matrix4}\n     */\n    fromRotationTranslation: function(q, v) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].fromRotationTranslation(this.array, q.array, v.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set from Matrix2d, it is used when converting a 2d shape to 3d space.\n     * In 3d space it is equivalent to ranslate on xy plane and rotate about z axis\n     * @param  {clay.Matrix2d} m2d\n     * @return {clay.Matrix4}\n     */\n    fromMat2d: function(m2d) {\n        Matrix4.fromMat2d(this, m2d);\n        return this;\n    },\n\n    /**\n     * Set from frustum bounds\n     * @param  {number} left\n     * @param  {number} right\n     * @param  {number} bottom\n     * @param  {number} top\n     * @param  {number} near\n     * @param  {number} far\n     * @return {clay.Matrix4}\n     */\n    frustum: function (left, right, bottom, top, near, far) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].frustum(this.array, left, right, bottom, top, near, far);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set to a identity matrix\n     * @return {clay.Matrix4}\n     */\n    identity: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].identity(this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Invert self\n     * @return {clay.Matrix4}\n     */\n    invert: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].invert(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set as a matrix with the given eye position, focal point, and up axis\n     * @param  {clay.Vector3} eye\n     * @param  {clay.Vector3} center\n     * @param  {clay.Vector3} up\n     * @return {clay.Matrix4}\n     */\n    lookAt: function(eye, center, up) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].lookAt(this.array, eye.array, center.array, up.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for mutiply\n     * @param  {clay.Matrix4} b\n     * @return {clay.Matrix4}\n     */\n    mul: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiplyLeft\n     * @param  {clay.Matrix4} a\n     * @return {clay.Matrix4}\n     */\n    mulLeft: function(a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].mul(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply self and b\n     * @param  {clay.Matrix4} b\n     * @return {clay.Matrix4}\n     */\n    multiply: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply a and self, a is on the left\n     * @param  {clay.Matrix3} a\n     * @return {clay.Matrix3}\n     */\n    multiplyLeft: function(a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].multiply(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set as a orthographic projection matrix\n     * @param  {number} left\n     * @param  {number} right\n     * @param  {number} bottom\n     * @param  {number} top\n     * @param  {number} near\n     * @param  {number} far\n     * @return {clay.Matrix4}\n     */\n    ortho: function(left, right, bottom, top, near, far) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].ortho(this.array, left, right, bottom, top, near, far);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Set as a perspective projection matrix\n     * @param  {number} fovy\n     * @param  {number} aspect\n     * @param  {number} near\n     * @param  {number} far\n     * @return {clay.Matrix4}\n     */\n    perspective: function(fovy, aspect, near, far) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].perspective(this.array, fovy, aspect, near, far);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by rad about axis.\n     * Equal to right-multiply a rotaion matrix\n     * @param  {number}   rad\n     * @param  {clay.Vector3} axis\n     * @return {clay.Matrix4}\n     */\n    rotate: function(rad, axis) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotate(this.array, this.array, rad, axis.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian about X axis.\n     * Equal to right-multiply a rotaion matrix\n     * @param {number} rad\n     * @return {clay.Matrix4}\n     */\n    rotateX: function(rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotateX(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian about Y axis.\n     * Equal to right-multiply a rotaion matrix\n     * @param {number} rad\n     * @return {clay.Matrix4}\n     */\n    rotateY: function(rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotateY(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian about Z axis.\n     * Equal to right-multiply a rotaion matrix\n     * @param {number} rad\n     * @return {clay.Matrix4}\n     */\n    rotateZ: function(rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotateZ(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale self by s\n     * Equal to right-multiply a scale matrix\n     * @param  {clay.Vector3}  s\n     * @return {clay.Matrix4}\n     */\n    scale: function(v) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].scale(this.array, this.array, v.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Translate self by v.\n     * Equal to right-multiply a translate matrix\n     * @param  {clay.Vector3}  v\n     * @return {clay.Matrix4}\n     */\n    translate: function(v) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].translate(this.array, this.array, v.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transpose self, in-place.\n     * @return {clay.Matrix2}\n     */\n    transpose: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].transpose(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Decompose a matrix to SRT\n     * @param {clay.Vector3} [scale]\n     * @param {clay.Quaternion} rotation\n     * @param {clay.Vector} position\n     * @see http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.matrix.decompose.aspx\n     */\n    decomposeMatrix: (function() {\n\n        var x = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var y = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var z = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n\n        var m3 = __WEBPACK_IMPORTED_MODULE_3__glmatrix_mat3__[\"a\" /* default */].create();\n\n        return function(scale, rotation, position) {\n\n            var el = this.array;\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].set(x, el[0], el[1], el[2]);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].set(y, el[4], el[5], el[6]);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].set(z, el[8], el[9], el[10]);\n\n            var sx = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].length(x);\n            var sy = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].length(y);\n            var sz = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].length(z);\n\n            // if determine is negative, we need to invert one scale\n            var det = this.determinant();\n            if (det < 0) {\n                sx = -sx;\n            }\n\n            if (scale) {\n                scale.set(sx, sy, sz);\n            }\n\n            position.set(el[12], el[13], el[14]);\n\n            __WEBPACK_IMPORTED_MODULE_3__glmatrix_mat3__[\"a\" /* default */].fromMat4(m3, el);\n            // Not like mat4, mat3 in glmatrix seems to be row-based\n            // Seems fixed in gl-matrix 2.2.2\n            // https://github.com/toji/gl-matrix/issues/114\n            // mat3.transpose(m3, m3);\n\n            m3[0] /= sx;\n            m3[1] /= sx;\n            m3[2] /= sx;\n\n            m3[3] /= sy;\n            m3[4] /= sy;\n            m3[5] /= sy;\n\n            m3[6] /= sz;\n            m3[7] /= sz;\n            m3[8] /= sz;\n\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_quat__[\"a\" /* default */].fromMat3(rotation.array, m3);\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_quat__[\"a\" /* default */].normalize(rotation.array, rotation.array);\n\n            rotation._dirty = true;\n            position._dirty = true;\n        };\n    })(),\n\n    toString: function() {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n\nvar defineProperty = Object.defineProperty;\n\nif (defineProperty) {\n    var proto = Matrix4.prototype;\n    /**\n     * Z Axis of local transform\n     * @name z\n     * @type {clay.Vector3}\n     * @memberOf clay.Matrix4\n     * @instance\n     */\n    defineProperty(proto, 'z', {\n        get: function () {\n            var el = this.array;\n            this._axisZ.set(el[8], el[9], el[10]);\n            return this._axisZ;\n        },\n        set: function (v) {\n            // TODO Here has a problem\n            // If only set an item of vector will not work\n            var el = this.array;\n            v = v.array;\n            el[8] = v[0];\n            el[9] = v[1];\n            el[10] = v[2];\n\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * Y Axis of local transform\n     * @name y\n     * @type {clay.Vector3}\n     * @memberOf clay.Matrix4\n     * @instance\n     */\n    defineProperty(proto, 'y', {\n        get: function () {\n            var el = this.array;\n            this._axisY.set(el[4], el[5], el[6]);\n            return this._axisY;\n        },\n        set: function (v) {\n            var el = this.array;\n            v = v.array;\n            el[4] = v[0];\n            el[5] = v[1];\n            el[6] = v[2];\n\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * X Axis of local transform\n     * @name x\n     * @type {clay.Vector3}\n     * @memberOf clay.Matrix4\n     * @instance\n     */\n    defineProperty(proto, 'x', {\n        get: function () {\n            var el = this.array;\n            this._axisX.set(el[0], el[1], el[2]);\n            return this._axisX;\n        },\n        set: function (v) {\n            var el = this.array;\n            v = v.array;\n            el[0] = v[0];\n            el[1] = v[1];\n            el[2] = v[2];\n\n            this._dirty = true;\n        }\n    })\n}\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @return {clay.Matrix4}\n */\nMatrix4.adjoint = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].adjoint(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @return {clay.Matrix4}\n */\nMatrix4.copy = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].copy(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} a\n * @return {number}\n */\nMatrix4.determinant = function(a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].determinant(a.array);\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @return {clay.Matrix4}\n */\nMatrix4.identity = function(out) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].identity(out.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {number}  left\n * @param  {number}  right\n * @param  {number}  bottom\n * @param  {number}  top\n * @param  {number}  near\n * @param  {number}  far\n * @return {clay.Matrix4}\n */\nMatrix4.ortho = function(out, left, right, bottom, top, near, far) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].ortho(out.array, left, right, bottom, top, near, far);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {number}  fovy\n * @param  {number}  aspect\n * @param  {number}  near\n * @param  {number}  far\n * @return {clay.Matrix4}\n */\nMatrix4.perspective = function(out, fovy, aspect, near, far) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].perspective(out.array, fovy, aspect, near, far);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Vector3} eye\n * @param  {clay.Vector3} center\n * @param  {clay.Vector3} up\n * @return {clay.Matrix4}\n */\nMatrix4.lookAt = function(out, eye, center, up) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].lookAt(out.array, eye.array, center.array, up.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @return {clay.Matrix4}\n */\nMatrix4.invert = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].invert(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {clay.Matrix4} b\n * @return {clay.Matrix4}\n */\nMatrix4.mul = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].mul(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {clay.Matrix4} b\n * @return {clay.Matrix4}\n */\nMatrix4.multiply = Matrix4.mul;\n\n/**\n * @param  {clay.Matrix4}    out\n * @param  {clay.Quaternion} q\n * @return {clay.Matrix4}\n */\nMatrix4.fromQuat = function(out, q) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].fromQuat(out.array, q.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4}    out\n * @param  {clay.Quaternion} q\n * @param  {clay.Vector3}    v\n * @return {clay.Matrix4}\n */\nMatrix4.fromRotationTranslation = function(out, q, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].fromRotationTranslation(out.array, q.array, v.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} m4\n * @param  {clay.Matrix2d} m2d\n * @return {clay.Matrix4}\n */\nMatrix4.fromMat2d = function(m4, m2d) {\n    m4._dirty = true;\n    var m2d = m2d.array;\n    var m4 = m4.array;\n\n    m4[0] = m2d[0];\n    m4[4] = m2d[2];\n    m4[12] = m2d[4];\n\n    m4[1] = m2d[1];\n    m4[5] = m2d[3];\n    m4[13] = m2d[5];\n\n    return m4;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {number}  rad\n * @param  {clay.Vector3} axis\n * @return {clay.Matrix4}\n */\nMatrix4.rotate = function(out, a, rad, axis) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotate(out.array, a.array, rad, axis.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {number}  rad\n * @return {clay.Matrix4}\n */\nMatrix4.rotateX = function(out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotateX(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {number}  rad\n * @return {clay.Matrix4}\n */\nMatrix4.rotateY = function(out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotateY(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {number}  rad\n * @return {clay.Matrix4}\n */\nMatrix4.rotateZ = function(out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotateZ(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {clay.Vector3} v\n * @return {clay.Matrix4}\n */\nMatrix4.scale = function(out, a, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].scale(out.array, a.array, v.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @return {clay.Matrix4}\n */\nMatrix4.transpose = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].transpose(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {clay.Vector3} v\n * @return {clay.Matrix4}\n */\nMatrix4.translate = function(out, a, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].translate(out.array, a.array, v.array);\n    out._dirty = true;\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Matrix4);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL01hdHJpeDQuanM/YjdjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbWF0NCBmcm9tICcuLi9nbG1hdHJpeC9tYXQ0JztcbmltcG9ydCB2ZWMzIGZyb20gJy4uL2dsbWF0cml4L3ZlYzMnO1xuaW1wb3J0IHF1YXQgZnJvbSAnLi4vZ2xtYXRyaXgvcXVhdCc7XG5pbXBvcnQgbWF0MyBmcm9tICcuLi9nbG1hdHJpeC9tYXQzJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4vVmVjdG9yMyc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5NYXRyaXg0XG4gKi9cbnZhciBNYXRyaXg0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICB0aGlzLl9heGlzWCA9IG5ldyBWZWN0b3IzKCk7XG4gICAgdGhpcy5fYXhpc1kgPSBuZXcgVmVjdG9yMygpO1xuICAgIHRoaXMuX2F4aXNaID0gbmV3IFZlY3RvcjMoKTtcblxuICAgIC8qKlxuICAgICAqIFN0b3JhZ2Ugb2YgTWF0cml4NFxuICAgICAqIEBuYW1lIGFycmF5XG4gICAgICogQHR5cGUge0Zsb2F0MzJBcnJheX1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5NYXRyaXg0I1xuICAgICAqL1xuICAgIHRoaXMuYXJyYXkgPSBtYXQ0LmNyZWF0ZSgpO1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgX2RpcnR5XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQG1lbWJlck9mIGNsYXkuTWF0cml4NCNcbiAgICAgKi9cbiAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG59O1xuXG5NYXRyaXg0LnByb3RvdHlwZSA9IHtcblxuICAgIGNvbnN0cnVjdG9yOiBNYXRyaXg0LFxuXG4gICAgLyoqXG4gICAgICogU2V0IGNvbXBvbmVudHMgZnJvbSBhcnJheVxuICAgICAqIEBwYXJhbSAge0Zsb2F0MzJBcnJheXxudW1iZXJbXX0gYXJyXG4gICAgICovXG4gICAgc2V0QXJyYXk6IGZ1bmN0aW9uIChhcnIpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5W2ldID0gYXJyW2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIGFkanVnYXRlIG9mIHNlbGYsIGluLXBsYWNlXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIGFkam9pbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBtYXQ0LmFkam9pbnQodGhpcy5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENsb25lIGEgbmV3IE1hdHJpeDRcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBNYXRyaXg0KCkpLmNvcHkodGhpcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENvcHkgZnJvbSBiXG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBiXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIGNvcHk6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgbWF0NC5jb3B5KHRoaXMuYXJyYXksIGEuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgbWF0cml4IGRldGVybWluYW50XG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGRldGVybWluYW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG1hdDQuZGV0ZXJtaW5hbnQodGhpcy5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB1cHBlciAzeDMgcGFydCBmcm9tIHF1YXRlcm5pb25cbiAgICAgKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IHFcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gICAgICovXG4gICAgZnJvbVF1YXQ6IGZ1bmN0aW9uKHEpIHtcbiAgICAgICAgbWF0NC5mcm9tUXVhdCh0aGlzLmFycmF5LCBxLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IGZyb20gYSBxdWF0ZXJuaW9uIHJvdGF0aW9uIGFuZCBhIHZlY3RvciB0cmFuc2xhdGlvblxuICAgICAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gcVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gdlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICBmcm9tUm90YXRpb25UcmFuc2xhdGlvbjogZnVuY3Rpb24ocSwgdikge1xuICAgICAgICBtYXQ0LmZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKHRoaXMuYXJyYXksIHEuYXJyYXksIHYuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgZnJvbSBNYXRyaXgyZCwgaXQgaXMgdXNlZCB3aGVuIGNvbnZlcnRpbmcgYSAyZCBzaGFwZSB0byAzZCBzcGFjZS5cbiAgICAgKiBJbiAzZCBzcGFjZSBpdCBpcyBlcXVpdmFsZW50IHRvIHJhbnNsYXRlIG9uIHh5IHBsYW5lIGFuZCByb3RhdGUgYWJvdXQgeiBheGlzXG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gbTJkXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIGZyb21NYXQyZDogZnVuY3Rpb24obTJkKSB7XG4gICAgICAgIE1hdHJpeDQuZnJvbU1hdDJkKHRoaXMsIG0yZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgZnJvbSBmcnVzdHVtIGJvdW5kc1xuICAgICAqIEBwYXJhbSAge251bWJlcn0gbGVmdFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gcmlnaHRcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGJvdHRvbVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gdG9wXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBuZWFyXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBmYXJcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gICAgICovXG4gICAgZnJ1c3R1bTogZnVuY3Rpb24gKGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSB7XG4gICAgICAgIG1hdDQuZnJ1c3R1bSh0aGlzLmFycmF5LCBsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsIG5lYXIsIGZhcik7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB0byBhIGlkZW50aXR5IG1hdHJpeFxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICBpZGVudGl0eTogZnVuY3Rpb24oKSB7XG4gICAgICAgIG1hdDQuaWRlbnRpdHkodGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEludmVydCBzZWxmXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIGludmVydDogZnVuY3Rpb24oKSB7XG4gICAgICAgIG1hdDQuaW52ZXJ0KHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgYXMgYSBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gZXllIHBvc2l0aW9uLCBmb2NhbCBwb2ludCwgYW5kIHVwIGF4aXNcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGV5ZVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gY2VudGVyXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSB1cFxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICBsb29rQXQ6IGZ1bmN0aW9uKGV5ZSwgY2VudGVyLCB1cCkge1xuICAgICAgICBtYXQ0Lmxvb2tBdCh0aGlzLmFycmF5LCBleWUuYXJyYXksIGNlbnRlci5hcnJheSwgdXAuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgbXV0aXBseVxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICBtdWw6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgbWF0NC5tdWwodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBtdWx0aXBseUxlZnRcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGFcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gICAgICovXG4gICAgbXVsTGVmdDogZnVuY3Rpb24oYSkge1xuICAgICAgICBtYXQ0Lm11bCh0aGlzLmFycmF5LCBhLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgc2VsZiBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICBtdWx0aXBseTogZnVuY3Rpb24oYikge1xuICAgICAgICBtYXQ0Lm11bHRpcGx5KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSBhIGFuZCBzZWxmLCBhIGlzIG9uIHRoZSBsZWZ0XG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBhXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICAgICAqL1xuICAgIG11bHRpcGx5TGVmdDogZnVuY3Rpb24oYSkge1xuICAgICAgICBtYXQ0Lm11bHRpcGx5KHRoaXMuYXJyYXksIGEuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgYXMgYSBvcnRob2dyYXBoaWMgcHJvamVjdGlvbiBtYXRyaXhcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGxlZnRcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHJpZ2h0XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBib3R0b21cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHRvcFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gbmVhclxuICAgICAqIEBwYXJhbSAge251bWJlcn0gZmFyXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIG9ydGhvOiBmdW5jdGlvbihsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsIG5lYXIsIGZhcikge1xuICAgICAgICBtYXQ0Lm9ydGhvKHRoaXMuYXJyYXksIGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFNldCBhcyBhIHBlcnNwZWN0aXZlIHByb2plY3Rpb24gbWF0cml4XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBmb3Z5XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBhc3BlY3RcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IG5lYXJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGZhclxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICBwZXJzcGVjdGl2ZTogZnVuY3Rpb24oZm92eSwgYXNwZWN0LCBuZWFyLCBmYXIpIHtcbiAgICAgICAgbWF0NC5wZXJzcGVjdGl2ZSh0aGlzLmFycmF5LCBmb3Z5LCBhc3BlY3QsIG5lYXIsIGZhcik7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBzZWxmIGJ5IHJhZCBhYm91dCBheGlzLlxuICAgICAqIEVxdWFsIHRvIHJpZ2h0LW11bHRpcGx5IGEgcm90YWlvbiBtYXRyaXhcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICAgcmFkXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBheGlzXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIHJvdGF0ZTogZnVuY3Rpb24ocmFkLCBheGlzKSB7XG4gICAgICAgIG1hdDQucm90YXRlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHJhZCwgYXhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBzZWxmIGJ5IGEgZ2l2ZW4gcmFkaWFuIGFib3V0IFggYXhpcy5cbiAgICAgKiBFcXVhbCB0byByaWdodC1tdWx0aXBseSBhIHJvdGFpb24gbWF0cml4XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhZFxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICByb3RhdGVYOiBmdW5jdGlvbihyYWQpIHtcbiAgICAgICAgbWF0NC5yb3RhdGVYKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHJhZCk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBzZWxmIGJ5IGEgZ2l2ZW4gcmFkaWFuIGFib3V0IFkgYXhpcy5cbiAgICAgKiBFcXVhbCB0byByaWdodC1tdWx0aXBseSBhIHJvdGFpb24gbWF0cml4XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhZFxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICByb3RhdGVZOiBmdW5jdGlvbihyYWQpIHtcbiAgICAgICAgbWF0NC5yb3RhdGVZKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHJhZCk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBzZWxmIGJ5IGEgZ2l2ZW4gcmFkaWFuIGFib3V0IFogYXhpcy5cbiAgICAgKiBFcXVhbCB0byByaWdodC1tdWx0aXBseSBhIHJvdGFpb24gbWF0cml4XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhZFxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICByb3RhdGVaOiBmdW5jdGlvbihyYWQpIHtcbiAgICAgICAgbWF0NC5yb3RhdGVaKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHJhZCk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNjYWxlIHNlbGYgYnkgc1xuICAgICAqIEVxdWFsIHRvIHJpZ2h0LW11bHRpcGx5IGEgc2NhbGUgbWF0cml4XG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSAgc1xuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICBzY2FsZTogZnVuY3Rpb24odikge1xuICAgICAgICBtYXQ0LnNjYWxlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHYuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGUgc2VsZiBieSB2LlxuICAgICAqIEVxdWFsIHRvIHJpZ2h0LW11bHRpcGx5IGEgdHJhbnNsYXRlIG1hdHJpeFxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gIHZcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gICAgICovXG4gICAgdHJhbnNsYXRlOiBmdW5jdGlvbih2KSB7XG4gICAgICAgIG1hdDQudHJhbnNsYXRlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHYuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUcmFuc3Bvc2Ugc2VsZiwgaW4tcGxhY2UuXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyfVxuICAgICAqL1xuICAgIHRyYW5zcG9zZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIG1hdDQudHJhbnNwb3NlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEZWNvbXBvc2UgYSBtYXRyaXggdG8gU1JUXG4gICAgICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IFtzY2FsZV1cbiAgICAgKiBAcGFyYW0ge2NsYXkuUXVhdGVybmlvbn0gcm90YXRpb25cbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yfSBwb3NpdGlvblxuICAgICAqIEBzZWUgaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L21pY3Jvc29mdC54bmEuZnJhbWV3b3JrLm1hdHJpeC5kZWNvbXBvc2UuYXNweFxuICAgICAqL1xuICAgIGRlY29tcG9zZU1hdHJpeDogKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciB4ID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdmFyIHkgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB2YXIgeiA9IHZlYzMuY3JlYXRlKCk7XG5cbiAgICAgICAgdmFyIG0zID0gbWF0My5jcmVhdGUoKTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2NhbGUsIHJvdGF0aW9uLCBwb3NpdGlvbikge1xuXG4gICAgICAgICAgICB2YXIgZWwgPSB0aGlzLmFycmF5O1xuICAgICAgICAgICAgdmVjMy5zZXQoeCwgZWxbMF0sIGVsWzFdLCBlbFsyXSk7XG4gICAgICAgICAgICB2ZWMzLnNldCh5LCBlbFs0XSwgZWxbNV0sIGVsWzZdKTtcbiAgICAgICAgICAgIHZlYzMuc2V0KHosIGVsWzhdLCBlbFs5XSwgZWxbMTBdKTtcblxuICAgICAgICAgICAgdmFyIHN4ID0gdmVjMy5sZW5ndGgoeCk7XG4gICAgICAgICAgICB2YXIgc3kgPSB2ZWMzLmxlbmd0aCh5KTtcbiAgICAgICAgICAgIHZhciBzeiA9IHZlYzMubGVuZ3RoKHopO1xuXG4gICAgICAgICAgICAvLyBpZiBkZXRlcm1pbmUgaXMgbmVnYXRpdmUsIHdlIG5lZWQgdG8gaW52ZXJ0IG9uZSBzY2FsZVxuICAgICAgICAgICAgdmFyIGRldCA9IHRoaXMuZGV0ZXJtaW5hbnQoKTtcbiAgICAgICAgICAgIGlmIChkZXQgPCAwKSB7XG4gICAgICAgICAgICAgICAgc3ggPSAtc3g7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzY2FsZSkge1xuICAgICAgICAgICAgICAgIHNjYWxlLnNldChzeCwgc3ksIHN6KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcG9zaXRpb24uc2V0KGVsWzEyXSwgZWxbMTNdLCBlbFsxNF0pO1xuXG4gICAgICAgICAgICBtYXQzLmZyb21NYXQ0KG0zLCBlbCk7XG4gICAgICAgICAgICAvLyBOb3QgbGlrZSBtYXQ0LCBtYXQzIGluIGdsbWF0cml4IHNlZW1zIHRvIGJlIHJvdy1iYXNlZFxuICAgICAgICAgICAgLy8gU2VlbXMgZml4ZWQgaW4gZ2wtbWF0cml4IDIuMi4yXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdG9qaS9nbC1tYXRyaXgvaXNzdWVzLzExNFxuICAgICAgICAgICAgLy8gbWF0My50cmFuc3Bvc2UobTMsIG0zKTtcblxuICAgICAgICAgICAgbTNbMF0gLz0gc3g7XG4gICAgICAgICAgICBtM1sxXSAvPSBzeDtcbiAgICAgICAgICAgIG0zWzJdIC89IHN4O1xuXG4gICAgICAgICAgICBtM1szXSAvPSBzeTtcbiAgICAgICAgICAgIG0zWzRdIC89IHN5O1xuICAgICAgICAgICAgbTNbNV0gLz0gc3k7XG5cbiAgICAgICAgICAgIG0zWzZdIC89IHN6O1xuICAgICAgICAgICAgbTNbN10gLz0gc3o7XG4gICAgICAgICAgICBtM1s4XSAvPSBzejtcblxuICAgICAgICAgICAgcXVhdC5mcm9tTWF0Myhyb3RhdGlvbi5hcnJheSwgbTMpO1xuICAgICAgICAgICAgcXVhdC5ub3JtYWxpemUocm90YXRpb24uYXJyYXksIHJvdGF0aW9uLmFycmF5KTtcblxuICAgICAgICAgICAgcm90YXRpb24uX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHBvc2l0aW9uLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH07XG4gICAgfSkoKSxcblxuICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICdbJyArIEFycmF5LnByb3RvdHlwZS5qb2luLmNhbGwodGhpcy5hcnJheSwgJywnKSArICddJztcbiAgICB9LFxuXG4gICAgdG9BcnJheTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5hcnJheSk7XG4gICAgfVxufTtcblxudmFyIGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xuXG5pZiAoZGVmaW5lUHJvcGVydHkpIHtcbiAgICB2YXIgcHJvdG8gPSBNYXRyaXg0LnByb3RvdHlwZTtcbiAgICAvKipcbiAgICAgKiBaIEF4aXMgb2YgbG9jYWwgdHJhbnNmb3JtXG4gICAgICogQG5hbWUgelxuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICogQG1lbWJlck9mIGNsYXkuTWF0cml4NFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIGRlZmluZVByb3BlcnR5KHByb3RvLCAneicsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWwgPSB0aGlzLmFycmF5O1xuICAgICAgICAgICAgdGhpcy5fYXhpc1ouc2V0KGVsWzhdLCBlbFs5XSwgZWxbMTBdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9heGlzWjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgLy8gVE9ETyBIZXJlIGhhcyBhIHByb2JsZW1cbiAgICAgICAgICAgIC8vIElmIG9ubHkgc2V0IGFuIGl0ZW0gb2YgdmVjdG9yIHdpbGwgbm90IHdvcmtcbiAgICAgICAgICAgIHZhciBlbCA9IHRoaXMuYXJyYXk7XG4gICAgICAgICAgICB2ID0gdi5hcnJheTtcbiAgICAgICAgICAgIGVsWzhdID0gdlswXTtcbiAgICAgICAgICAgIGVsWzldID0gdlsxXTtcbiAgICAgICAgICAgIGVsWzEwXSA9IHZbMl07XG5cbiAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogWSBBeGlzIG9mIGxvY2FsIHRyYW5zZm9ybVxuICAgICAqIEBuYW1lIHlcbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5Lk1hdHJpeDRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ3knLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsID0gdGhpcy5hcnJheTtcbiAgICAgICAgICAgIHRoaXMuX2F4aXNZLnNldChlbFs0XSwgZWxbNV0sIGVsWzZdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9heGlzWTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgdmFyIGVsID0gdGhpcy5hcnJheTtcbiAgICAgICAgICAgIHYgPSB2LmFycmF5O1xuICAgICAgICAgICAgZWxbNF0gPSB2WzBdO1xuICAgICAgICAgICAgZWxbNV0gPSB2WzFdO1xuICAgICAgICAgICAgZWxbNl0gPSB2WzJdO1xuXG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFggQXhpcyBvZiBsb2NhbCB0cmFuc2Zvcm1cbiAgICAgKiBAbmFtZSB4XG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5NYXRyaXg0XG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICd4Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbCA9IHRoaXMuYXJyYXk7XG4gICAgICAgICAgICB0aGlzLl9heGlzWC5zZXQoZWxbMF0sIGVsWzFdLCBlbFsyXSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXhpc1g7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIHZhciBlbCA9IHRoaXMuYXJyYXk7XG4gICAgICAgICAgICB2ID0gdi5hcnJheTtcbiAgICAgICAgICAgIGVsWzBdID0gdlswXTtcbiAgICAgICAgICAgIGVsWzFdID0gdlsxXTtcbiAgICAgICAgICAgIGVsWzJdID0gdlsyXTtcblxuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSlcbn1cblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBhXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gKi9cbk1hdHJpeDQuYWRqb2ludCA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIG1hdDQuYWRqb2ludChvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGFcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5jb3B5ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgbWF0NC5jb3B5KG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbk1hdHJpeDQuZGV0ZXJtaW5hbnQgPSBmdW5jdGlvbihhKSB7XG4gICAgcmV0dXJuIG1hdDQuZGV0ZXJtaW5hbnQoYS5hcnJheSk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gb3V0XG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gKi9cbk1hdHJpeDQuaWRlbnRpdHkgPSBmdW5jdGlvbihvdXQpIHtcbiAgICBtYXQ0LmlkZW50aXR5KG91dC5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBvdXRcbiAqIEBwYXJhbSAge251bWJlcn0gIGxlZnRcbiAqIEBwYXJhbSAge251bWJlcn0gIHJpZ2h0XG4gKiBAcGFyYW0gIHtudW1iZXJ9ICBib3R0b21cbiAqIEBwYXJhbSAge251bWJlcn0gIHRvcFxuICogQHBhcmFtICB7bnVtYmVyfSAgbmVhclxuICogQHBhcmFtICB7bnVtYmVyfSAgZmFyXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gKi9cbk1hdHJpeDQub3J0aG8gPSBmdW5jdGlvbihvdXQsIGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSB7XG4gICAgbWF0NC5vcnRobyhvdXQuYXJyYXksIGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG91dFxuICogQHBhcmFtICB7bnVtYmVyfSAgZm92eVxuICogQHBhcmFtICB7bnVtYmVyfSAgYXNwZWN0XG4gKiBAcGFyYW0gIHtudW1iZXJ9ICBuZWFyXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICBmYXJcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5wZXJzcGVjdGl2ZSA9IGZ1bmN0aW9uKG91dCwgZm92eSwgYXNwZWN0LCBuZWFyLCBmYXIpIHtcbiAgICBtYXQ0LnBlcnNwZWN0aXZlKG91dC5hcnJheSwgZm92eSwgYXNwZWN0LCBuZWFyLCBmYXIpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGV5ZVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBjZW50ZXJcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gdXBcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5sb29rQXQgPSBmdW5jdGlvbihvdXQsIGV5ZSwgY2VudGVyLCB1cCkge1xuICAgIG1hdDQubG9va0F0KG91dC5hcnJheSwgZXllLmFycmF5LCBjZW50ZXIuYXJyYXksIHVwLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBhXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gKi9cbk1hdHJpeDQuaW52ZXJ0ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgbWF0NC5pbnZlcnQob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBhXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGJcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5tdWwgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBtYXQ0Lm11bChvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gYVxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBiXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gKi9cbk1hdHJpeDQubXVsdGlwbHkgPSBNYXRyaXg0Lm11bDtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9ICAgIG91dFxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBxXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gKi9cbk1hdHJpeDQuZnJvbVF1YXQgPSBmdW5jdGlvbihvdXQsIHEpIHtcbiAgICBtYXQ0LmZyb21RdWF0KG91dC5hcnJheSwgcS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSAgICBvdXRcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gcVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSAgICB2XG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gKi9cbk1hdHJpeDQuZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24gPSBmdW5jdGlvbihvdXQsIHEsIHYpIHtcbiAgICBtYXQ0LmZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKG91dC5hcnJheSwgcS5hcnJheSwgdi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBtNFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gbTJkXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gKi9cbk1hdHJpeDQuZnJvbU1hdDJkID0gZnVuY3Rpb24obTQsIG0yZCkge1xuICAgIG00Ll9kaXJ0eSA9IHRydWU7XG4gICAgdmFyIG0yZCA9IG0yZC5hcnJheTtcbiAgICB2YXIgbTQgPSBtNC5hcnJheTtcblxuICAgIG00WzBdID0gbTJkWzBdO1xuICAgIG00WzRdID0gbTJkWzJdO1xuICAgIG00WzEyXSA9IG0yZFs0XTtcblxuICAgIG00WzFdID0gbTJkWzFdO1xuICAgIG00WzVdID0gbTJkWzNdO1xuICAgIG00WzEzXSA9IG0yZFs1XTtcblxuICAgIHJldHVybiBtNDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gYVxuICogQHBhcmFtICB7bnVtYmVyfSAgcmFkXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGF4aXNcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5yb3RhdGUgPSBmdW5jdGlvbihvdXQsIGEsIHJhZCwgYXhpcykge1xuICAgIG1hdDQucm90YXRlKG91dC5hcnJheSwgYS5hcnJheSwgcmFkLCBheGlzLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBhXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICByYWRcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5yb3RhdGVYID0gZnVuY3Rpb24ob3V0LCBhLCByYWQpIHtcbiAgICBtYXQ0LnJvdGF0ZVgob3V0LmFycmF5LCBhLmFycmF5LCByYWQpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGFcbiAqIEBwYXJhbSAge251bWJlcn0gIHJhZFxuICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICovXG5NYXRyaXg0LnJvdGF0ZVkgPSBmdW5jdGlvbihvdXQsIGEsIHJhZCkge1xuICAgIG1hdDQucm90YXRlWShvdXQuYXJyYXksIGEuYXJyYXksIHJhZCk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gYVxuICogQHBhcmFtICB7bnVtYmVyfSAgcmFkXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gKi9cbk1hdHJpeDQucm90YXRlWiA9IGZ1bmN0aW9uKG91dCwgYSwgcmFkKSB7XG4gICAgbWF0NC5yb3RhdGVaKG91dC5hcnJheSwgYS5hcnJheSwgcmFkKTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IHZcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5zY2FsZSA9IGZ1bmN0aW9uKG91dCwgYSwgdikge1xuICAgIG1hdDQuc2NhbGUob3V0LmFycmF5LCBhLmFycmF5LCB2LmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBhXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gKi9cbk1hdHJpeDQudHJhbnNwb3NlID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgbWF0NC50cmFuc3Bvc2Uob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IHZcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC50cmFuc2xhdGUgPSBmdW5jdGlvbihvdXQsIGEsIHYpIHtcbiAgICBtYXQ0LnRyYW5zbGF0ZShvdXQuYXJyYXksIGEuYXJyYXksIHYuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBNYXRyaXg0O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL01hdHJpeDQuanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///14\n");

/***/ }),
/* 15 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n/**\n * @class 4x4 Matrix\n * @name mat4\n */\n\nvar mat4 = {};\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nmat4.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {mat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\nmat4.clone = function(a) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](16);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nmat4.identity = function(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.transpose = function(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1], a02 = a[2], a03 = a[3],\n            a12 = a[6], a13 = a[7],\n            a23 = a[11];\n\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n\n    return out;\n};\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.invert = function(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        // Calculate the determinant\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n};\n\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.adjoint = function(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    out[0]  =  (a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22));\n    out[1]  = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n    out[2]  =  (a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12));\n    out[3]  = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n    out[4]  = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n    out[5]  =  (a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22));\n    out[6]  = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n    out[7]  =  (a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12));\n    out[8]  =  (a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21));\n    out[9]  = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n    out[10] =  (a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11));\n    out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n    out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n    out[13] =  (a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21));\n    out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n    out[15] =  (a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11));\n    return out;\n};\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {mat4} a the source matrix\n * @returns {Number} determinant of a\n */\nmat4.determinant = function (a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32;\n\n    // Calculate the determinant\n    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n};\n\n/**\n * Multiplies two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nmat4.multiply = function (out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    var b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n    out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n    out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n    out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n    out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n    return out;\n};\n\n/**\n * Multiplies two affine mat4's\n * Add by https://github.com/pissang\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nmat4.multiplyAffine = function (out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2],\n        a10 = a[4], a11 = a[5], a12 = a[6],\n        a20 = a[8], a21 = a[9], a22 = a[10],\n        a30 = a[12], a31 = a[13], a32 = a[14];\n\n    // Cache only the current line of the second matrix\n    var b0  = b[0], b1 = b[1], b2 = b[2];\n    out[0] = b0*a00 + b1*a10 + b2*a20;\n    out[1] = b0*a01 + b1*a11 + b2*a21;\n    out[2] = b0*a02 + b1*a12 + b2*a22;\n    // out[3] = 0;\n\n    b0 = b[4]; b1 = b[5]; b2 = b[6];\n    out[4] = b0*a00 + b1*a10 + b2*a20;\n    out[5] = b0*a01 + b1*a11 + b2*a21;\n    out[6] = b0*a02 + b1*a12 + b2*a22;\n    // out[7] = 0;\n\n    b0 = b[8]; b1 = b[9]; b2 = b[10];\n    out[8] = b0*a00 + b1*a10 + b2*a20;\n    out[9] = b0*a01 + b1*a11 + b2*a21;\n    out[10] = b0*a02 + b1*a12 + b2*a22;\n    // out[11] = 0;\n\n    b0 = b[12]; b1 = b[13]; b2 = b[14];\n    out[12] = b0*a00 + b1*a10 + b2*a20 + a30;\n    out[13] = b0*a01 + b1*a11 + b2*a21 + a31;\n    out[14] = b0*a02 + b1*a12 + b2*a22 + a32;\n    // out[15] = 1;\n    return out;\n};\n\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\nmat4.mul = mat4.multiply;\n\n/**\n * Alias for {@link mat4.multiplyAffine}\n * @function\n */\nmat4.mulAffine = mat4.multiplyAffine;\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to translate\n * @param {vec3} v vector to translate by\n * @returns {mat4} out\n */\nmat4.translate = function (out, a, v) {\n    var x = v[0], y = v[1], z = v[2],\n        a00, a01, a02, a03,\n        a10, a11, a12, a13,\n        a20, a21, a22, a23;\n\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n        a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n        a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n        a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n        out[0] = a00; out[1] = a01; out[2] = a02; out[3] = a03;\n        out[4] = a10; out[5] = a11; out[6] = a12; out[7] = a13;\n        out[8] = a20; out[9] = a21; out[10] = a22; out[11] = a23;\n\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n\n    return out;\n};\n\n/**\n * Scales the mat4 by the dimensions in the given vec3\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {vec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nmat4.scale = function(out, a, v) {\n    var x = v[0], y = v[1], z = v[2];\n\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n/**\n * Rotates a mat4 by the given angle\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nmat4.rotate = function (out, a, rad, axis) {\n    var x = axis[0], y = axis[1], z = axis[2],\n        len = Math.sqrt(x * x + y * y + z * z),\n        s, c, t,\n        a00, a01, a02, a03,\n        a10, a11, a12, a13,\n        a20, a21, a22, a23,\n        b00, b01, b02,\n        b10, b11, b12,\n        b20, b21, b22;\n\n    if (Math.abs(len) < __WEBPACK_IMPORTED_MODULE_0__common__[\"b\" /* GLMAT_EPSILON */]) { return null; }\n\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n\n    a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n    a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n    a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n    // Construct the elements of the rotation matrix\n    b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\n\n    // Perform rotation-specific matrix multiplication\n    out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n    out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n    out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.rotateX = function (out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\n        out[0]  = a[0];\n        out[1]  = a[1];\n        out[2]  = a[2];\n        out[3]  = a[3];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[4] = a10 * c + a20 * s;\n    out[5] = a11 * c + a21 * s;\n    out[6] = a12 * c + a22 * s;\n    out[7] = a13 * c + a23 * s;\n    out[8] = a20 * c - a10 * s;\n    out[9] = a21 * c - a11 * s;\n    out[10] = a22 * c - a12 * s;\n    out[11] = a23 * c - a13 * s;\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.rotateY = function (out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\n        out[4]  = a[4];\n        out[5]  = a[5];\n        out[6]  = a[6];\n        out[7]  = a[7];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c - a20 * s;\n    out[1] = a01 * c - a21 * s;\n    out[2] = a02 * c - a22 * s;\n    out[3] = a03 * c - a23 * s;\n    out[8] = a00 * s + a20 * c;\n    out[9] = a01 * s + a21 * c;\n    out[10] = a02 * s + a22 * c;\n    out[11] = a03 * s + a23 * c;\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.rotateZ = function (out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\n        out[8]  = a[8];\n        out[9]  = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c + a10 * s;\n    out[1] = a01 * c + a11 * s;\n    out[2] = a02 * c + a12 * s;\n    out[3] = a03 * c + a13 * s;\n    out[4] = a10 * c - a00 * s;\n    out[5] = a11 * c - a01 * s;\n    out[6] = a12 * c - a02 * s;\n    out[7] = a13 * c - a03 * s;\n    return out;\n};\n\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     var quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nmat4.fromRotationTranslation = function (out, q, v) {\n    // Quaternion math\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n\n    return out;\n};\n\nmat4.fromQuat = function (out, q) {\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        yx = y * x2,\n        yy = y * y2,\n        zx = z * x2,\n        zy = z * y2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - yy - zz;\n    out[1] = yx + wz;\n    out[2] = zx - wy;\n    out[3] = 0;\n\n    out[4] = yx - wz;\n    out[5] = 1 - xx - zz;\n    out[6] = zy + wx;\n    out[7] = 0;\n\n    out[8] = zx + wy;\n    out[9] = zy - wx;\n    out[10] = 1 - xx - yy;\n    out[11] = 0;\n\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n\n    return out;\n};\n\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\nmat4.frustum = function (out, left, right, bottom, top, near, far) {\n    var rl = 1 / (right - left),\n        tb = 1 / (top - bottom),\n        nf = 1 / (near - far);\n    out[0] = (near * 2) * rl;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = (near * 2) * tb;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = (right + left) * rl;\n    out[9] = (top + bottom) * tb;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (far * near * 2) * nf;\n    out[15] = 0;\n    return out;\n};\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nmat4.perspective = function (out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (2 * far * near) * nf;\n    out[15] = 0;\n    return out;\n};\n\n/**\n * Generates a orthogonal projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nmat4.ortho = function (out, left, right, bottom, top, near, far) {\n    var lr = 1 / (left - right),\n        bt = 1 / (bottom - top),\n        nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {vec3} eye Position of the viewer\n * @param {vec3} center Point the viewer is looking at\n * @param {vec3} up vec3 pointing up\n * @returns {mat4} out\n */\nmat4.lookAt = function (out, eye, center, up) {\n    var x0, x1, x2, y0, y1, y2, z0, z1, z2, len,\n        eyex = eye[0],\n        eyey = eye[1],\n        eyez = eye[2],\n        upx = up[0],\n        upy = up[1],\n        upz = up[2],\n        centerx = center[0],\n        centery = center[1],\n        centerz = center[2];\n\n    if (Math.abs(eyex - centerx) < __WEBPACK_IMPORTED_MODULE_0__common__[\"b\" /* GLMAT_EPSILON */] &&\n        Math.abs(eyey - centery) < __WEBPACK_IMPORTED_MODULE_0__common__[\"b\" /* GLMAT_EPSILON */] &&\n        Math.abs(eyez - centerz) < __WEBPACK_IMPORTED_MODULE_0__common__[\"b\" /* GLMAT_EPSILON */]) {\n        return mat4.identity(out);\n    }\n\n    z0 = eyex - centerx;\n    z1 = eyey - centery;\n    z2 = eyez - centerz;\n\n    len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n\n    x0 = upy * z2 - upz * z1;\n    x1 = upz * z0 - upx * z2;\n    x2 = upx * z1 - upy * z0;\n    len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n    if (!len) {\n        x0 = 0;\n        x1 = 0;\n        x2 = 0;\n    } else {\n        len = 1 / len;\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n\n    y0 = z1 * x2 - z2 * x1;\n    y1 = z2 * x0 - z0 * x2;\n    y2 = z0 * x1 - z1 * x0;\n\n    len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n    if (!len) {\n        y0 = 0;\n        y1 = 0;\n        y2 = 0;\n    } else {\n        len = 1 / len;\n        y0 *= len;\n        y1 *= len;\n        y2 *= len;\n    }\n\n    out[0] = x0;\n    out[1] = y0;\n    out[2] = z0;\n    out[3] = 0;\n    out[4] = x1;\n    out[5] = y1;\n    out[6] = z1;\n    out[7] = 0;\n    out[8] = x2;\n    out[9] = y2;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n    out[15] = 1;\n\n    return out;\n};\n\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {mat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nmat4.frob = function (a) {\n    return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2) ))\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (mat4);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nbG1hdHJpeC9tYXQ0LmpzPzE1OTIiXSwic291cmNlc0NvbnRlbnQiOlsiXG4vKiBDb3B5cmlnaHQgKGMpIDIwMTMsIEJyYW5kb24gSm9uZXMsIENvbGluIE1hY0tlbnppZSBJVi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0IG1vZGlmaWNhdGlvbixcbmFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcblxuICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpc1xuICAgIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORFxuQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRURcbldBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SXG5BTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVNcbihJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUztcbkxPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTlxuQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcbihJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTXG5TT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4gKi9cblxuaW1wb3J0IHtHTE1BVF9FUFNJTE9OLCBHTE1BVF9BUlJBWV9UWVBFIH0gZnJvbSAnLi9jb21tb24nO1xuXG4vKipcbiAqIEBjbGFzcyA0eDQgTWF0cml4XG4gKiBAbmFtZSBtYXQ0XG4gKi9cblxudmFyIG1hdDQgPSB7fTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IG1hdDRcbiAqXG4gKiBAcmV0dXJucyB7bWF0NH0gYSBuZXcgNHg0IG1hdHJpeFxuICovXG5tYXQ0LmNyZWF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvdXQgPSBuZXcgR0xNQVRfQVJSQVlfVFlQRSgxNik7XG4gICAgb3V0WzBdID0gMTtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgICBvdXRbNF0gPSAwO1xuICAgIG91dFs1XSA9IDE7XG4gICAgb3V0WzZdID0gMDtcbiAgICBvdXRbN10gPSAwO1xuICAgIG91dFs4XSA9IDA7XG4gICAgb3V0WzldID0gMDtcbiAgICBvdXRbMTBdID0gMTtcbiAgICBvdXRbMTFdID0gMDtcbiAgICBvdXRbMTJdID0gMDtcbiAgICBvdXRbMTNdID0gMDtcbiAgICBvdXRbMTRdID0gMDtcbiAgICBvdXRbMTVdID0gMTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1hdDQgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge21hdDR9IGEgbWF0cml4IHRvIGNsb25lXG4gKiBAcmV0dXJucyB7bWF0NH0gYSBuZXcgNHg0IG1hdHJpeFxuICovXG5tYXQ0LmNsb25lID0gZnVuY3Rpb24oYSkge1xuICAgIHZhciBvdXQgPSBuZXcgR0xNQVRfQVJSQVlfVFlQRSgxNik7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzFdO1xuICAgIG91dFsyXSA9IGFbMl07XG4gICAgb3V0WzNdID0gYVszXTtcbiAgICBvdXRbNF0gPSBhWzRdO1xuICAgIG91dFs1XSA9IGFbNV07XG4gICAgb3V0WzZdID0gYVs2XTtcbiAgICBvdXRbN10gPSBhWzddO1xuICAgIG91dFs4XSA9IGFbOF07XG4gICAgb3V0WzldID0gYVs5XTtcbiAgICBvdXRbMTBdID0gYVsxMF07XG4gICAgb3V0WzExXSA9IGFbMTFdO1xuICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgbWF0NCB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5tYXQ0LmNvcHkgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbMV07XG4gICAgb3V0WzJdID0gYVsyXTtcbiAgICBvdXRbM10gPSBhWzNdO1xuICAgIG91dFs0XSA9IGFbNF07XG4gICAgb3V0WzVdID0gYVs1XTtcbiAgICBvdXRbNl0gPSBhWzZdO1xuICAgIG91dFs3XSA9IGFbN107XG4gICAgb3V0WzhdID0gYVs4XTtcbiAgICBvdXRbOV0gPSBhWzldO1xuICAgIG91dFsxMF0gPSBhWzEwXTtcbiAgICBvdXRbMTFdID0gYVsxMV07XG4gICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgb3V0WzE1XSA9IGFbMTVdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFNldCBhIG1hdDQgdG8gdGhlIGlkZW50aXR5IG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cbm1hdDQuaWRlbnRpdHkgPSBmdW5jdGlvbihvdXQpIHtcbiAgICBvdXRbMF0gPSAxO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICAgIG91dFs0XSA9IDA7XG4gICAgb3V0WzVdID0gMTtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gICAgb3V0WzhdID0gMDtcbiAgICBvdXRbOV0gPSAwO1xuICAgIG91dFsxMF0gPSAxO1xuICAgIG91dFsxMV0gPSAwO1xuICAgIG91dFsxMl0gPSAwO1xuICAgIG91dFsxM10gPSAwO1xuICAgIG91dFsxNF0gPSAwO1xuICAgIG91dFsxNV0gPSAxO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFRyYW5zcG9zZSB0aGUgdmFsdWVzIG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDR9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xubWF0NC50cmFuc3Bvc2UgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICAvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzXG4gICAgaWYgKG91dCA9PT0gYSkge1xuICAgICAgICB2YXIgYTAxID0gYVsxXSwgYTAyID0gYVsyXSwgYTAzID0gYVszXSxcbiAgICAgICAgICAgIGExMiA9IGFbNl0sIGExMyA9IGFbN10sXG4gICAgICAgICAgICBhMjMgPSBhWzExXTtcblxuICAgICAgICBvdXRbMV0gPSBhWzRdO1xuICAgICAgICBvdXRbMl0gPSBhWzhdO1xuICAgICAgICBvdXRbM10gPSBhWzEyXTtcbiAgICAgICAgb3V0WzRdID0gYTAxO1xuICAgICAgICBvdXRbNl0gPSBhWzldO1xuICAgICAgICBvdXRbN10gPSBhWzEzXTtcbiAgICAgICAgb3V0WzhdID0gYTAyO1xuICAgICAgICBvdXRbOV0gPSBhMTI7XG4gICAgICAgIG91dFsxMV0gPSBhWzE0XTtcbiAgICAgICAgb3V0WzEyXSA9IGEwMztcbiAgICAgICAgb3V0WzEzXSA9IGExMztcbiAgICAgICAgb3V0WzE0XSA9IGEyMztcbiAgICB9IGVsc2Uge1xuICAgICAgICBvdXRbMF0gPSBhWzBdO1xuICAgICAgICBvdXRbMV0gPSBhWzRdO1xuICAgICAgICBvdXRbMl0gPSBhWzhdO1xuICAgICAgICBvdXRbM10gPSBhWzEyXTtcbiAgICAgICAgb3V0WzRdID0gYVsxXTtcbiAgICAgICAgb3V0WzVdID0gYVs1XTtcbiAgICAgICAgb3V0WzZdID0gYVs5XTtcbiAgICAgICAgb3V0WzddID0gYVsxM107XG4gICAgICAgIG91dFs4XSA9IGFbMl07XG4gICAgICAgIG91dFs5XSA9IGFbNl07XG4gICAgICAgIG91dFsxMF0gPSBhWzEwXTtcbiAgICAgICAgb3V0WzExXSA9IGFbMTRdO1xuICAgICAgICBvdXRbMTJdID0gYVszXTtcbiAgICAgICAgb3V0WzEzXSA9IGFbN107XG4gICAgICAgIG91dFsxNF0gPSBhWzExXTtcbiAgICAgICAgb3V0WzE1XSA9IGFbMTVdO1xuICAgIH1cblxuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEludmVydHMgYSBtYXQ0XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5tYXQ0LmludmVydCA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIHZhciBhMDAgPSBhWzBdLCBhMDEgPSBhWzFdLCBhMDIgPSBhWzJdLCBhMDMgPSBhWzNdLFxuICAgICAgICBhMTAgPSBhWzRdLCBhMTEgPSBhWzVdLCBhMTIgPSBhWzZdLCBhMTMgPSBhWzddLFxuICAgICAgICBhMjAgPSBhWzhdLCBhMjEgPSBhWzldLCBhMjIgPSBhWzEwXSwgYTIzID0gYVsxMV0sXG4gICAgICAgIGEzMCA9IGFbMTJdLCBhMzEgPSBhWzEzXSwgYTMyID0gYVsxNF0sIGEzMyA9IGFbMTVdLFxuXG4gICAgICAgIGIwMCA9IGEwMCAqIGExMSAtIGEwMSAqIGExMCxcbiAgICAgICAgYjAxID0gYTAwICogYTEyIC0gYTAyICogYTEwLFxuICAgICAgICBiMDIgPSBhMDAgKiBhMTMgLSBhMDMgKiBhMTAsXG4gICAgICAgIGIwMyA9IGEwMSAqIGExMiAtIGEwMiAqIGExMSxcbiAgICAgICAgYjA0ID0gYTAxICogYTEzIC0gYTAzICogYTExLFxuICAgICAgICBiMDUgPSBhMDIgKiBhMTMgLSBhMDMgKiBhMTIsXG4gICAgICAgIGIwNiA9IGEyMCAqIGEzMSAtIGEyMSAqIGEzMCxcbiAgICAgICAgYjA3ID0gYTIwICogYTMyIC0gYTIyICogYTMwLFxuICAgICAgICBiMDggPSBhMjAgKiBhMzMgLSBhMjMgKiBhMzAsXG4gICAgICAgIGIwOSA9IGEyMSAqIGEzMiAtIGEyMiAqIGEzMSxcbiAgICAgICAgYjEwID0gYTIxICogYTMzIC0gYTIzICogYTMxLFxuICAgICAgICBiMTEgPSBhMjIgKiBhMzMgLSBhMjMgKiBhMzIsXG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBkZXRlcm1pbmFudFxuICAgICAgICBkZXQgPSBiMDAgKiBiMTEgLSBiMDEgKiBiMTAgKyBiMDIgKiBiMDkgKyBiMDMgKiBiMDggLSBiMDQgKiBiMDcgKyBiMDUgKiBiMDY7XG5cbiAgICBpZiAoIWRldCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZGV0ID0gMS4wIC8gZGV0O1xuXG4gICAgb3V0WzBdID0gKGExMSAqIGIxMSAtIGExMiAqIGIxMCArIGExMyAqIGIwOSkgKiBkZXQ7XG4gICAgb3V0WzFdID0gKGEwMiAqIGIxMCAtIGEwMSAqIGIxMSAtIGEwMyAqIGIwOSkgKiBkZXQ7XG4gICAgb3V0WzJdID0gKGEzMSAqIGIwNSAtIGEzMiAqIGIwNCArIGEzMyAqIGIwMykgKiBkZXQ7XG4gICAgb3V0WzNdID0gKGEyMiAqIGIwNCAtIGEyMSAqIGIwNSAtIGEyMyAqIGIwMykgKiBkZXQ7XG4gICAgb3V0WzRdID0gKGExMiAqIGIwOCAtIGExMCAqIGIxMSAtIGExMyAqIGIwNykgKiBkZXQ7XG4gICAgb3V0WzVdID0gKGEwMCAqIGIxMSAtIGEwMiAqIGIwOCArIGEwMyAqIGIwNykgKiBkZXQ7XG4gICAgb3V0WzZdID0gKGEzMiAqIGIwMiAtIGEzMCAqIGIwNSAtIGEzMyAqIGIwMSkgKiBkZXQ7XG4gICAgb3V0WzddID0gKGEyMCAqIGIwNSAtIGEyMiAqIGIwMiArIGEyMyAqIGIwMSkgKiBkZXQ7XG4gICAgb3V0WzhdID0gKGExMCAqIGIxMCAtIGExMSAqIGIwOCArIGExMyAqIGIwNikgKiBkZXQ7XG4gICAgb3V0WzldID0gKGEwMSAqIGIwOCAtIGEwMCAqIGIxMCAtIGEwMyAqIGIwNikgKiBkZXQ7XG4gICAgb3V0WzEwXSA9IChhMzAgKiBiMDQgLSBhMzEgKiBiMDIgKyBhMzMgKiBiMDApICogZGV0O1xuICAgIG91dFsxMV0gPSAoYTIxICogYjAyIC0gYTIwICogYjA0IC0gYTIzICogYjAwKSAqIGRldDtcbiAgICBvdXRbMTJdID0gKGExMSAqIGIwNyAtIGExMCAqIGIwOSAtIGExMiAqIGIwNikgKiBkZXQ7XG4gICAgb3V0WzEzXSA9IChhMDAgKiBiMDkgLSBhMDEgKiBiMDcgKyBhMDIgKiBiMDYpICogZGV0O1xuICAgIG91dFsxNF0gPSAoYTMxICogYjAxIC0gYTMwICogYjAzIC0gYTMyICogYjAwKSAqIGRldDtcbiAgICBvdXRbMTVdID0gKGEyMCAqIGIwMyAtIGEyMSAqIGIwMSArIGEyMiAqIGIwMCkgKiBkZXQ7XG5cbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBhZGp1Z2F0ZSBvZiBhIG1hdDRcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cbm1hdDQuYWRqb2ludCA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIHZhciBhMDAgPSBhWzBdLCBhMDEgPSBhWzFdLCBhMDIgPSBhWzJdLCBhMDMgPSBhWzNdLFxuICAgICAgICBhMTAgPSBhWzRdLCBhMTEgPSBhWzVdLCBhMTIgPSBhWzZdLCBhMTMgPSBhWzddLFxuICAgICAgICBhMjAgPSBhWzhdLCBhMjEgPSBhWzldLCBhMjIgPSBhWzEwXSwgYTIzID0gYVsxMV0sXG4gICAgICAgIGEzMCA9IGFbMTJdLCBhMzEgPSBhWzEzXSwgYTMyID0gYVsxNF0sIGEzMyA9IGFbMTVdO1xuXG4gICAgb3V0WzBdICA9ICAoYTExICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjEgKiAoYTEyICogYTMzIC0gYTEzICogYTMyKSArIGEzMSAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpKTtcbiAgICBvdXRbMV0gID0gLShhMDEgKiAoYTIyICogYTMzIC0gYTIzICogYTMyKSAtIGEyMSAqIChhMDIgKiBhMzMgLSBhMDMgKiBhMzIpICsgYTMxICogKGEwMiAqIGEyMyAtIGEwMyAqIGEyMikpO1xuICAgIG91dFsyXSAgPSAgKGEwMSAqIChhMTIgKiBhMzMgLSBhMTMgKiBhMzIpIC0gYTExICogKGEwMiAqIGEzMyAtIGEwMyAqIGEzMikgKyBhMzEgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKSk7XG4gICAgb3V0WzNdICA9IC0oYTAxICogKGExMiAqIGEyMyAtIGExMyAqIGEyMikgLSBhMTEgKiAoYTAyICogYTIzIC0gYTAzICogYTIyKSArIGEyMSAqIChhMDIgKiBhMTMgLSBhMDMgKiBhMTIpKTtcbiAgICBvdXRbNF0gID0gLShhMTAgKiAoYTIyICogYTMzIC0gYTIzICogYTMyKSAtIGEyMCAqIChhMTIgKiBhMzMgLSBhMTMgKiBhMzIpICsgYTMwICogKGExMiAqIGEyMyAtIGExMyAqIGEyMikpO1xuICAgIG91dFs1XSAgPSAgKGEwMCAqIChhMjIgKiBhMzMgLSBhMjMgKiBhMzIpIC0gYTIwICogKGEwMiAqIGEzMyAtIGEwMyAqIGEzMikgKyBhMzAgKiAoYTAyICogYTIzIC0gYTAzICogYTIyKSk7XG4gICAgb3V0WzZdICA9IC0oYTAwICogKGExMiAqIGEzMyAtIGExMyAqIGEzMikgLSBhMTAgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMCAqIChhMDIgKiBhMTMgLSBhMDMgKiBhMTIpKTtcbiAgICBvdXRbN10gID0gIChhMDAgKiAoYTEyICogYTIzIC0gYTEzICogYTIyKSAtIGExMCAqIChhMDIgKiBhMjMgLSBhMDMgKiBhMjIpICsgYTIwICogKGEwMiAqIGExMyAtIGEwMyAqIGExMikpO1xuICAgIG91dFs4XSAgPSAgKGExMCAqIChhMjEgKiBhMzMgLSBhMjMgKiBhMzEpIC0gYTIwICogKGExMSAqIGEzMyAtIGExMyAqIGEzMSkgKyBhMzAgKiAoYTExICogYTIzIC0gYTEzICogYTIxKSk7XG4gICAgb3V0WzldICA9IC0oYTAwICogKGEyMSAqIGEzMyAtIGEyMyAqIGEzMSkgLSBhMjAgKiAoYTAxICogYTMzIC0gYTAzICogYTMxKSArIGEzMCAqIChhMDEgKiBhMjMgLSBhMDMgKiBhMjEpKTtcbiAgICBvdXRbMTBdID0gIChhMDAgKiAoYTExICogYTMzIC0gYTEzICogYTMxKSAtIGExMCAqIChhMDEgKiBhMzMgLSBhMDMgKiBhMzEpICsgYTMwICogKGEwMSAqIGExMyAtIGEwMyAqIGExMSkpO1xuICAgIG91dFsxMV0gPSAtKGEwMCAqIChhMTEgKiBhMjMgLSBhMTMgKiBhMjEpIC0gYTEwICogKGEwMSAqIGEyMyAtIGEwMyAqIGEyMSkgKyBhMjAgKiAoYTAxICogYTEzIC0gYTAzICogYTExKSk7XG4gICAgb3V0WzEyXSA9IC0oYTEwICogKGEyMSAqIGEzMiAtIGEyMiAqIGEzMSkgLSBhMjAgKiAoYTExICogYTMyIC0gYTEyICogYTMxKSArIGEzMCAqIChhMTEgKiBhMjIgLSBhMTIgKiBhMjEpKTtcbiAgICBvdXRbMTNdID0gIChhMDAgKiAoYTIxICogYTMyIC0gYTIyICogYTMxKSAtIGEyMCAqIChhMDEgKiBhMzIgLSBhMDIgKiBhMzEpICsgYTMwICogKGEwMSAqIGEyMiAtIGEwMiAqIGEyMSkpO1xuICAgIG91dFsxNF0gPSAtKGEwMCAqIChhMTEgKiBhMzIgLSBhMTIgKiBhMzEpIC0gYTEwICogKGEwMSAqIGEzMiAtIGEwMiAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTEyIC0gYTAyICogYTExKSk7XG4gICAgb3V0WzE1XSA9ICAoYTAwICogKGExMSAqIGEyMiAtIGExMiAqIGEyMSkgLSBhMTAgKiAoYTAxICogYTIyIC0gYTAyICogYTIxKSArIGEyMCAqIChhMDEgKiBhMTIgLSBhMDIgKiBhMTEpKTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkZXRlcm1pbmFudCBvZiBhIG1hdDRcbiAqXG4gKiBAcGFyYW0ge21hdDR9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRldGVybWluYW50IG9mIGFcbiAqL1xubWF0NC5kZXRlcm1pbmFudCA9IGZ1bmN0aW9uIChhKSB7XG4gICAgdmFyIGEwMCA9IGFbMF0sIGEwMSA9IGFbMV0sIGEwMiA9IGFbMl0sIGEwMyA9IGFbM10sXG4gICAgICAgIGExMCA9IGFbNF0sIGExMSA9IGFbNV0sIGExMiA9IGFbNl0sIGExMyA9IGFbN10sXG4gICAgICAgIGEyMCA9IGFbOF0sIGEyMSA9IGFbOV0sIGEyMiA9IGFbMTBdLCBhMjMgPSBhWzExXSxcbiAgICAgICAgYTMwID0gYVsxMl0sIGEzMSA9IGFbMTNdLCBhMzIgPSBhWzE0XSwgYTMzID0gYVsxNV0sXG5cbiAgICAgICAgYjAwID0gYTAwICogYTExIC0gYTAxICogYTEwLFxuICAgICAgICBiMDEgPSBhMDAgKiBhMTIgLSBhMDIgKiBhMTAsXG4gICAgICAgIGIwMiA9IGEwMCAqIGExMyAtIGEwMyAqIGExMCxcbiAgICAgICAgYjAzID0gYTAxICogYTEyIC0gYTAyICogYTExLFxuICAgICAgICBiMDQgPSBhMDEgKiBhMTMgLSBhMDMgKiBhMTEsXG4gICAgICAgIGIwNSA9IGEwMiAqIGExMyAtIGEwMyAqIGExMixcbiAgICAgICAgYjA2ID0gYTIwICogYTMxIC0gYTIxICogYTMwLFxuICAgICAgICBiMDcgPSBhMjAgKiBhMzIgLSBhMjIgKiBhMzAsXG4gICAgICAgIGIwOCA9IGEyMCAqIGEzMyAtIGEyMyAqIGEzMCxcbiAgICAgICAgYjA5ID0gYTIxICogYTMyIC0gYTIyICogYTMxLFxuICAgICAgICBiMTAgPSBhMjEgKiBhMzMgLSBhMjMgKiBhMzEsXG4gICAgICAgIGIxMSA9IGEyMiAqIGEzMyAtIGEyMyAqIGEzMjtcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcbiAgICByZXR1cm4gYjAwICogYjExIC0gYjAxICogYjEwICsgYjAyICogYjA5ICsgYjAzICogYjA4IC0gYjA0ICogYjA3ICsgYjA1ICogYjA2O1xufTtcblxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBtYXQ0J3NcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge21hdDR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cbm1hdDQubXVsdGlwbHkgPSBmdW5jdGlvbiAob3V0LCBhLCBiKSB7XG4gICAgdmFyIGEwMCA9IGFbMF0sIGEwMSA9IGFbMV0sIGEwMiA9IGFbMl0sIGEwMyA9IGFbM10sXG4gICAgICAgIGExMCA9IGFbNF0sIGExMSA9IGFbNV0sIGExMiA9IGFbNl0sIGExMyA9IGFbN10sXG4gICAgICAgIGEyMCA9IGFbOF0sIGEyMSA9IGFbOV0sIGEyMiA9IGFbMTBdLCBhMjMgPSBhWzExXSxcbiAgICAgICAgYTMwID0gYVsxMl0sIGEzMSA9IGFbMTNdLCBhMzIgPSBhWzE0XSwgYTMzID0gYVsxNV07XG5cbiAgICAvLyBDYWNoZSBvbmx5IHRoZSBjdXJyZW50IGxpbmUgb2YgdGhlIHNlY29uZCBtYXRyaXhcbiAgICB2YXIgYjAgID0gYlswXSwgYjEgPSBiWzFdLCBiMiA9IGJbMl0sIGIzID0gYlszXTtcbiAgICBvdXRbMF0gPSBiMCphMDAgKyBiMSphMTAgKyBiMiphMjAgKyBiMyphMzA7XG4gICAgb3V0WzFdID0gYjAqYTAxICsgYjEqYTExICsgYjIqYTIxICsgYjMqYTMxO1xuICAgIG91dFsyXSA9IGIwKmEwMiArIGIxKmExMiArIGIyKmEyMiArIGIzKmEzMjtcbiAgICBvdXRbM10gPSBiMCphMDMgKyBiMSphMTMgKyBiMiphMjMgKyBiMyphMzM7XG5cbiAgICBiMCA9IGJbNF07IGIxID0gYls1XTsgYjIgPSBiWzZdOyBiMyA9IGJbN107XG4gICAgb3V0WzRdID0gYjAqYTAwICsgYjEqYTEwICsgYjIqYTIwICsgYjMqYTMwO1xuICAgIG91dFs1XSA9IGIwKmEwMSArIGIxKmExMSArIGIyKmEyMSArIGIzKmEzMTtcbiAgICBvdXRbNl0gPSBiMCphMDIgKyBiMSphMTIgKyBiMiphMjIgKyBiMyphMzI7XG4gICAgb3V0WzddID0gYjAqYTAzICsgYjEqYTEzICsgYjIqYTIzICsgYjMqYTMzO1xuXG4gICAgYjAgPSBiWzhdOyBiMSA9IGJbOV07IGIyID0gYlsxMF07IGIzID0gYlsxMV07XG4gICAgb3V0WzhdID0gYjAqYTAwICsgYjEqYTEwICsgYjIqYTIwICsgYjMqYTMwO1xuICAgIG91dFs5XSA9IGIwKmEwMSArIGIxKmExMSArIGIyKmEyMSArIGIzKmEzMTtcbiAgICBvdXRbMTBdID0gYjAqYTAyICsgYjEqYTEyICsgYjIqYTIyICsgYjMqYTMyO1xuICAgIG91dFsxMV0gPSBiMCphMDMgKyBiMSphMTMgKyBiMiphMjMgKyBiMyphMzM7XG5cbiAgICBiMCA9IGJbMTJdOyBiMSA9IGJbMTNdOyBiMiA9IGJbMTRdOyBiMyA9IGJbMTVdO1xuICAgIG91dFsxMl0gPSBiMCphMDAgKyBiMSphMTAgKyBiMiphMjAgKyBiMyphMzA7XG4gICAgb3V0WzEzXSA9IGIwKmEwMSArIGIxKmExMSArIGIyKmEyMSArIGIzKmEzMTtcbiAgICBvdXRbMTRdID0gYjAqYTAyICsgYjEqYTEyICsgYjIqYTIyICsgYjMqYTMyO1xuICAgIG91dFsxNV0gPSBiMCphMDMgKyBiMSphMTMgKyBiMiphMjMgKyBiMyphMzM7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogTXVsdGlwbGllcyB0d28gYWZmaW5lIG1hdDQnc1xuICogQWRkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9waXNzYW5nXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQ0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge21hdDR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cbm1hdDQubXVsdGlwbHlBZmZpbmUgPSBmdW5jdGlvbiAob3V0LCBhLCBiKSB7XG4gICAgdmFyIGEwMCA9IGFbMF0sIGEwMSA9IGFbMV0sIGEwMiA9IGFbMl0sXG4gICAgICAgIGExMCA9IGFbNF0sIGExMSA9IGFbNV0sIGExMiA9IGFbNl0sXG4gICAgICAgIGEyMCA9IGFbOF0sIGEyMSA9IGFbOV0sIGEyMiA9IGFbMTBdLFxuICAgICAgICBhMzAgPSBhWzEyXSwgYTMxID0gYVsxM10sIGEzMiA9IGFbMTRdO1xuXG4gICAgLy8gQ2FjaGUgb25seSB0aGUgY3VycmVudCBsaW5lIG9mIHRoZSBzZWNvbmQgbWF0cml4XG4gICAgdmFyIGIwICA9IGJbMF0sIGIxID0gYlsxXSwgYjIgPSBiWzJdO1xuICAgIG91dFswXSA9IGIwKmEwMCArIGIxKmExMCArIGIyKmEyMDtcbiAgICBvdXRbMV0gPSBiMCphMDEgKyBiMSphMTEgKyBiMiphMjE7XG4gICAgb3V0WzJdID0gYjAqYTAyICsgYjEqYTEyICsgYjIqYTIyO1xuICAgIC8vIG91dFszXSA9IDA7XG5cbiAgICBiMCA9IGJbNF07IGIxID0gYls1XTsgYjIgPSBiWzZdO1xuICAgIG91dFs0XSA9IGIwKmEwMCArIGIxKmExMCArIGIyKmEyMDtcbiAgICBvdXRbNV0gPSBiMCphMDEgKyBiMSphMTEgKyBiMiphMjE7XG4gICAgb3V0WzZdID0gYjAqYTAyICsgYjEqYTEyICsgYjIqYTIyO1xuICAgIC8vIG91dFs3XSA9IDA7XG5cbiAgICBiMCA9IGJbOF07IGIxID0gYls5XTsgYjIgPSBiWzEwXTtcbiAgICBvdXRbOF0gPSBiMCphMDAgKyBiMSphMTAgKyBiMiphMjA7XG4gICAgb3V0WzldID0gYjAqYTAxICsgYjEqYTExICsgYjIqYTIxO1xuICAgIG91dFsxMF0gPSBiMCphMDIgKyBiMSphMTIgKyBiMiphMjI7XG4gICAgLy8gb3V0WzExXSA9IDA7XG5cbiAgICBiMCA9IGJbMTJdOyBiMSA9IGJbMTNdOyBiMiA9IGJbMTRdO1xuICAgIG91dFsxMl0gPSBiMCphMDAgKyBiMSphMTAgKyBiMiphMjAgKyBhMzA7XG4gICAgb3V0WzEzXSA9IGIwKmEwMSArIGIxKmExMSArIGIyKmEyMSArIGEzMTtcbiAgICBvdXRbMTRdID0gYjAqYTAyICsgYjEqYTEyICsgYjIqYTIyICsgYTMyO1xuICAgIC8vIG91dFsxNV0gPSAxO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0NC5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5tYXQ0Lm11bCA9IG1hdDQubXVsdGlwbHk7XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQ0Lm11bHRpcGx5QWZmaW5lfVxuICogQGZ1bmN0aW9uXG4gKi9cbm1hdDQubXVsQWZmaW5lID0gbWF0NC5tdWx0aXBseUFmZmluZTtcbi8qKlxuICogVHJhbnNsYXRlIGEgbWF0NCBieSB0aGUgZ2l2ZW4gdmVjdG9yXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0NH0gYSB0aGUgbWF0cml4IHRvIHRyYW5zbGF0ZVxuICogQHBhcmFtIHt2ZWMzfSB2IHZlY3RvciB0byB0cmFuc2xhdGUgYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xubWF0NC50cmFuc2xhdGUgPSBmdW5jdGlvbiAob3V0LCBhLCB2KSB7XG4gICAgdmFyIHggPSB2WzBdLCB5ID0gdlsxXSwgeiA9IHZbMl0sXG4gICAgICAgIGEwMCwgYTAxLCBhMDIsIGEwMyxcbiAgICAgICAgYTEwLCBhMTEsIGExMiwgYTEzLFxuICAgICAgICBhMjAsIGEyMSwgYTIyLCBhMjM7XG5cbiAgICBpZiAoYSA9PT0gb3V0KSB7XG4gICAgICAgIG91dFsxMl0gPSBhWzBdICogeCArIGFbNF0gKiB5ICsgYVs4XSAqIHogKyBhWzEyXTtcbiAgICAgICAgb3V0WzEzXSA9IGFbMV0gKiB4ICsgYVs1XSAqIHkgKyBhWzldICogeiArIGFbMTNdO1xuICAgICAgICBvdXRbMTRdID0gYVsyXSAqIHggKyBhWzZdICogeSArIGFbMTBdICogeiArIGFbMTRdO1xuICAgICAgICBvdXRbMTVdID0gYVszXSAqIHggKyBhWzddICogeSArIGFbMTFdICogeiArIGFbMTVdO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGEwMCA9IGFbMF07IGEwMSA9IGFbMV07IGEwMiA9IGFbMl07IGEwMyA9IGFbM107XG4gICAgICAgIGExMCA9IGFbNF07IGExMSA9IGFbNV07IGExMiA9IGFbNl07IGExMyA9IGFbN107XG4gICAgICAgIGEyMCA9IGFbOF07IGEyMSA9IGFbOV07IGEyMiA9IGFbMTBdOyBhMjMgPSBhWzExXTtcblxuICAgICAgICBvdXRbMF0gPSBhMDA7IG91dFsxXSA9IGEwMTsgb3V0WzJdID0gYTAyOyBvdXRbM10gPSBhMDM7XG4gICAgICAgIG91dFs0XSA9IGExMDsgb3V0WzVdID0gYTExOyBvdXRbNl0gPSBhMTI7IG91dFs3XSA9IGExMztcbiAgICAgICAgb3V0WzhdID0gYTIwOyBvdXRbOV0gPSBhMjE7IG91dFsxMF0gPSBhMjI7IG91dFsxMV0gPSBhMjM7XG5cbiAgICAgICAgb3V0WzEyXSA9IGEwMCAqIHggKyBhMTAgKiB5ICsgYTIwICogeiArIGFbMTJdO1xuICAgICAgICBvdXRbMTNdID0gYTAxICogeCArIGExMSAqIHkgKyBhMjEgKiB6ICsgYVsxM107XG4gICAgICAgIG91dFsxNF0gPSBhMDIgKiB4ICsgYTEyICogeSArIGEyMiAqIHogKyBhWzE0XTtcbiAgICAgICAgb3V0WzE1XSA9IGEwMyAqIHggKyBhMTMgKiB5ICsgYTIzICogeiArIGFbMTVdO1xuICAgIH1cblxuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFNjYWxlcyB0aGUgbWF0NCBieSB0aGUgZGltZW5zaW9ucyBpbiB0aGUgZ2l2ZW4gdmVjM1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDR9IGEgdGhlIG1hdHJpeCB0byBzY2FsZVxuICogQHBhcmFtIHt2ZWMzfSB2IHRoZSB2ZWMzIHRvIHNjYWxlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqKi9cbm1hdDQuc2NhbGUgPSBmdW5jdGlvbihvdXQsIGEsIHYpIHtcbiAgICB2YXIgeCA9IHZbMF0sIHkgPSB2WzFdLCB6ID0gdlsyXTtcblxuICAgIG91dFswXSA9IGFbMF0gKiB4O1xuICAgIG91dFsxXSA9IGFbMV0gKiB4O1xuICAgIG91dFsyXSA9IGFbMl0gKiB4O1xuICAgIG91dFszXSA9IGFbM10gKiB4O1xuICAgIG91dFs0XSA9IGFbNF0gKiB5O1xuICAgIG91dFs1XSA9IGFbNV0gKiB5O1xuICAgIG91dFs2XSA9IGFbNl0gKiB5O1xuICAgIG91dFs3XSA9IGFbN10gKiB5O1xuICAgIG91dFs4XSA9IGFbOF0gKiB6O1xuICAgIG91dFs5XSA9IGFbOV0gKiB6O1xuICAgIG91dFsxMF0gPSBhWzEwXSAqIHo7XG4gICAgb3V0WzExXSA9IGFbMTFdICogejtcbiAgICBvdXRbMTJdID0gYVsxMl07XG4gICAgb3V0WzEzXSA9IGFbMTNdO1xuICAgIG91dFsxNF0gPSBhWzE0XTtcbiAgICBvdXRbMTVdID0gYVsxNV07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUm90YXRlcyBhIG1hdDQgYnkgdGhlIGdpdmVuIGFuZ2xlXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0NH0gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEBwYXJhbSB7dmVjM30gYXhpcyB0aGUgYXhpcyB0byByb3RhdGUgYXJvdW5kXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cbm1hdDQucm90YXRlID0gZnVuY3Rpb24gKG91dCwgYSwgcmFkLCBheGlzKSB7XG4gICAgdmFyIHggPSBheGlzWzBdLCB5ID0gYXhpc1sxXSwgeiA9IGF4aXNbMl0sXG4gICAgICAgIGxlbiA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopLFxuICAgICAgICBzLCBjLCB0LFxuICAgICAgICBhMDAsIGEwMSwgYTAyLCBhMDMsXG4gICAgICAgIGExMCwgYTExLCBhMTIsIGExMyxcbiAgICAgICAgYTIwLCBhMjEsIGEyMiwgYTIzLFxuICAgICAgICBiMDAsIGIwMSwgYjAyLFxuICAgICAgICBiMTAsIGIxMSwgYjEyLFxuICAgICAgICBiMjAsIGIyMSwgYjIyO1xuXG4gICAgaWYgKE1hdGguYWJzKGxlbikgPCBHTE1BVF9FUFNJTE9OKSB7IHJldHVybiBudWxsOyB9XG5cbiAgICBsZW4gPSAxIC8gbGVuO1xuICAgIHggKj0gbGVuO1xuICAgIHkgKj0gbGVuO1xuICAgIHogKj0gbGVuO1xuXG4gICAgcyA9IE1hdGguc2luKHJhZCk7XG4gICAgYyA9IE1hdGguY29zKHJhZCk7XG4gICAgdCA9IDEgLSBjO1xuXG4gICAgYTAwID0gYVswXTsgYTAxID0gYVsxXTsgYTAyID0gYVsyXTsgYTAzID0gYVszXTtcbiAgICBhMTAgPSBhWzRdOyBhMTEgPSBhWzVdOyBhMTIgPSBhWzZdOyBhMTMgPSBhWzddO1xuICAgIGEyMCA9IGFbOF07IGEyMSA9IGFbOV07IGEyMiA9IGFbMTBdOyBhMjMgPSBhWzExXTtcblxuICAgIC8vIENvbnN0cnVjdCB0aGUgZWxlbWVudHMgb2YgdGhlIHJvdGF0aW9uIG1hdHJpeFxuICAgIGIwMCA9IHggKiB4ICogdCArIGM7IGIwMSA9IHkgKiB4ICogdCArIHogKiBzOyBiMDIgPSB6ICogeCAqIHQgLSB5ICogcztcbiAgICBiMTAgPSB4ICogeSAqIHQgLSB6ICogczsgYjExID0geSAqIHkgKiB0ICsgYzsgYjEyID0geiAqIHkgKiB0ICsgeCAqIHM7XG4gICAgYjIwID0geCAqIHogKiB0ICsgeSAqIHM7IGIyMSA9IHkgKiB6ICogdCAtIHggKiBzOyBiMjIgPSB6ICogeiAqIHQgKyBjO1xuXG4gICAgLy8gUGVyZm9ybSByb3RhdGlvbi1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cbiAgICBvdXRbMF0gPSBhMDAgKiBiMDAgKyBhMTAgKiBiMDEgKyBhMjAgKiBiMDI7XG4gICAgb3V0WzFdID0gYTAxICogYjAwICsgYTExICogYjAxICsgYTIxICogYjAyO1xuICAgIG91dFsyXSA9IGEwMiAqIGIwMCArIGExMiAqIGIwMSArIGEyMiAqIGIwMjtcbiAgICBvdXRbM10gPSBhMDMgKiBiMDAgKyBhMTMgKiBiMDEgKyBhMjMgKiBiMDI7XG4gICAgb3V0WzRdID0gYTAwICogYjEwICsgYTEwICogYjExICsgYTIwICogYjEyO1xuICAgIG91dFs1XSA9IGEwMSAqIGIxMCArIGExMSAqIGIxMSArIGEyMSAqIGIxMjtcbiAgICBvdXRbNl0gPSBhMDIgKiBiMTAgKyBhMTIgKiBiMTEgKyBhMjIgKiBiMTI7XG4gICAgb3V0WzddID0gYTAzICogYjEwICsgYTEzICogYjExICsgYTIzICogYjEyO1xuICAgIG91dFs4XSA9IGEwMCAqIGIyMCArIGExMCAqIGIyMSArIGEyMCAqIGIyMjtcbiAgICBvdXRbOV0gPSBhMDEgKiBiMjAgKyBhMTEgKiBiMjEgKyBhMjEgKiBiMjI7XG4gICAgb3V0WzEwXSA9IGEwMiAqIGIyMCArIGExMiAqIGIyMSArIGEyMiAqIGIyMjtcbiAgICBvdXRbMTFdID0gYTAzICogYjIwICsgYTEzICogYjIxICsgYTIzICogYjIyO1xuXG4gICAgaWYgKGEgIT09IG91dCkgeyAvLyBJZiB0aGUgc291cmNlIGFuZCBkZXN0aW5hdGlvbiBkaWZmZXIsIGNvcHkgdGhlIHVuY2hhbmdlZCBsYXN0IHJvd1xuICAgICAgICBvdXRbMTJdID0gYVsxMl07XG4gICAgICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICAgICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgICAgICBvdXRbMTVdID0gYVsxNV07XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFJvdGF0ZXMgYSBtYXRyaXggYnkgdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWCBheGlzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0NH0gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xubWF0NC5yb3RhdGVYID0gZnVuY3Rpb24gKG91dCwgYSwgcmFkKSB7XG4gICAgdmFyIHMgPSBNYXRoLnNpbihyYWQpLFxuICAgICAgICBjID0gTWF0aC5jb3MocmFkKSxcbiAgICAgICAgYTEwID0gYVs0XSxcbiAgICAgICAgYTExID0gYVs1XSxcbiAgICAgICAgYTEyID0gYVs2XSxcbiAgICAgICAgYTEzID0gYVs3XSxcbiAgICAgICAgYTIwID0gYVs4XSxcbiAgICAgICAgYTIxID0gYVs5XSxcbiAgICAgICAgYTIyID0gYVsxMF0sXG4gICAgICAgIGEyMyA9IGFbMTFdO1xuXG4gICAgaWYgKGEgIT09IG91dCkgeyAvLyBJZiB0aGUgc291cmNlIGFuZCBkZXN0aW5hdGlvbiBkaWZmZXIsIGNvcHkgdGhlIHVuY2hhbmdlZCByb3dzXG4gICAgICAgIG91dFswXSAgPSBhWzBdO1xuICAgICAgICBvdXRbMV0gID0gYVsxXTtcbiAgICAgICAgb3V0WzJdICA9IGFbMl07XG4gICAgICAgIG91dFszXSAgPSBhWzNdO1xuICAgICAgICBvdXRbMTJdID0gYVsxMl07XG4gICAgICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICAgICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgICAgICBvdXRbMTVdID0gYVsxNV07XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuICAgIG91dFs0XSA9IGExMCAqIGMgKyBhMjAgKiBzO1xuICAgIG91dFs1XSA9IGExMSAqIGMgKyBhMjEgKiBzO1xuICAgIG91dFs2XSA9IGExMiAqIGMgKyBhMjIgKiBzO1xuICAgIG91dFs3XSA9IGExMyAqIGMgKyBhMjMgKiBzO1xuICAgIG91dFs4XSA9IGEyMCAqIGMgLSBhMTAgKiBzO1xuICAgIG91dFs5XSA9IGEyMSAqIGMgLSBhMTEgKiBzO1xuICAgIG91dFsxMF0gPSBhMjIgKiBjIC0gYTEyICogcztcbiAgICBvdXRbMTFdID0gYTIzICogYyAtIGExMyAqIHM7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUm90YXRlcyBhIG1hdHJpeCBieSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBZIGF4aXNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQ0fSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5tYXQ0LnJvdGF0ZVkgPSBmdW5jdGlvbiAob3V0LCBhLCByYWQpIHtcbiAgICB2YXIgcyA9IE1hdGguc2luKHJhZCksXG4gICAgICAgIGMgPSBNYXRoLmNvcyhyYWQpLFxuICAgICAgICBhMDAgPSBhWzBdLFxuICAgICAgICBhMDEgPSBhWzFdLFxuICAgICAgICBhMDIgPSBhWzJdLFxuICAgICAgICBhMDMgPSBhWzNdLFxuICAgICAgICBhMjAgPSBhWzhdLFxuICAgICAgICBhMjEgPSBhWzldLFxuICAgICAgICBhMjIgPSBhWzEwXSxcbiAgICAgICAgYTIzID0gYVsxMV07XG5cbiAgICBpZiAoYSAhPT0gb3V0KSB7IC8vIElmIHRoZSBzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGRpZmZlciwgY29weSB0aGUgdW5jaGFuZ2VkIHJvd3NcbiAgICAgICAgb3V0WzRdICA9IGFbNF07XG4gICAgICAgIG91dFs1XSAgPSBhWzVdO1xuICAgICAgICBvdXRbNl0gID0gYVs2XTtcbiAgICAgICAgb3V0WzddICA9IGFbN107XG4gICAgICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICAgICAgb3V0WzEzXSA9IGFbMTNdO1xuICAgICAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG4gICAgb3V0WzBdID0gYTAwICogYyAtIGEyMCAqIHM7XG4gICAgb3V0WzFdID0gYTAxICogYyAtIGEyMSAqIHM7XG4gICAgb3V0WzJdID0gYTAyICogYyAtIGEyMiAqIHM7XG4gICAgb3V0WzNdID0gYTAzICogYyAtIGEyMyAqIHM7XG4gICAgb3V0WzhdID0gYTAwICogcyArIGEyMCAqIGM7XG4gICAgb3V0WzldID0gYTAxICogcyArIGEyMSAqIGM7XG4gICAgb3V0WzEwXSA9IGEwMiAqIHMgKyBhMjIgKiBjO1xuICAgIG91dFsxMV0gPSBhMDMgKiBzICsgYTIzICogYztcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSb3RhdGVzIGEgbWF0cml4IGJ5IHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFogYXhpc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDR9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cbm1hdDQucm90YXRlWiA9IGZ1bmN0aW9uIChvdXQsIGEsIHJhZCkge1xuICAgIHZhciBzID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgICAgYyA9IE1hdGguY29zKHJhZCksXG4gICAgICAgIGEwMCA9IGFbMF0sXG4gICAgICAgIGEwMSA9IGFbMV0sXG4gICAgICAgIGEwMiA9IGFbMl0sXG4gICAgICAgIGEwMyA9IGFbM10sXG4gICAgICAgIGExMCA9IGFbNF0sXG4gICAgICAgIGExMSA9IGFbNV0sXG4gICAgICAgIGExMiA9IGFbNl0sXG4gICAgICAgIGExMyA9IGFbN107XG5cbiAgICBpZiAoYSAhPT0gb3V0KSB7IC8vIElmIHRoZSBzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGRpZmZlciwgY29weSB0aGUgdW5jaGFuZ2VkIGxhc3Qgcm93XG4gICAgICAgIG91dFs4XSAgPSBhWzhdO1xuICAgICAgICBvdXRbOV0gID0gYVs5XTtcbiAgICAgICAgb3V0WzEwXSA9IGFbMTBdO1xuICAgICAgICBvdXRbMTFdID0gYVsxMV07XG4gICAgICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICAgICAgb3V0WzEzXSA9IGFbMTNdO1xuICAgICAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG4gICAgb3V0WzBdID0gYTAwICogYyArIGExMCAqIHM7XG4gICAgb3V0WzFdID0gYTAxICogYyArIGExMSAqIHM7XG4gICAgb3V0WzJdID0gYTAyICogYyArIGExMiAqIHM7XG4gICAgb3V0WzNdID0gYTAzICogYyArIGExMyAqIHM7XG4gICAgb3V0WzRdID0gYTEwICogYyAtIGEwMCAqIHM7XG4gICAgb3V0WzVdID0gYTExICogYyAtIGEwMSAqIHM7XG4gICAgb3V0WzZdID0gYTEyICogYyAtIGEwMiAqIHM7XG4gICAgb3V0WzddID0gYTEzICogYyAtIGEwMyAqIHM7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIGEgcXVhdGVybmlvbiByb3RhdGlvbiBhbmQgdmVjdG9yIHRyYW5zbGF0aW9uXG4gKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKTpcbiAqXG4gKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTtcbiAqICAgICBtYXQ0LnRyYW5zbGF0ZShkZXN0LCB2ZWMpO1xuICogICAgIHZhciBxdWF0TWF0ID0gbWF0NC5jcmVhdGUoKTtcbiAqICAgICBxdWF0NC50b01hdDQocXVhdCwgcXVhdE1hdCk7XG4gKiAgICAgbWF0NC5tdWx0aXBseShkZXN0LCBxdWF0TWF0KTtcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge3F1YXQ0fSBxIFJvdGF0aW9uIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7dmVjM30gdiBUcmFuc2xhdGlvbiB2ZWN0b3JcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xubWF0NC5mcm9tUm90YXRpb25UcmFuc2xhdGlvbiA9IGZ1bmN0aW9uIChvdXQsIHEsIHYpIHtcbiAgICAvLyBRdWF0ZXJuaW9uIG1hdGhcbiAgICB2YXIgeCA9IHFbMF0sIHkgPSBxWzFdLCB6ID0gcVsyXSwgdyA9IHFbM10sXG4gICAgICAgIHgyID0geCArIHgsXG4gICAgICAgIHkyID0geSArIHksXG4gICAgICAgIHoyID0geiArIHosXG5cbiAgICAgICAgeHggPSB4ICogeDIsXG4gICAgICAgIHh5ID0geCAqIHkyLFxuICAgICAgICB4eiA9IHggKiB6MixcbiAgICAgICAgeXkgPSB5ICogeTIsXG4gICAgICAgIHl6ID0geSAqIHoyLFxuICAgICAgICB6eiA9IHogKiB6MixcbiAgICAgICAgd3ggPSB3ICogeDIsXG4gICAgICAgIHd5ID0gdyAqIHkyLFxuICAgICAgICB3eiA9IHcgKiB6MjtcblxuICAgIG91dFswXSA9IDEgLSAoeXkgKyB6eik7XG4gICAgb3V0WzFdID0geHkgKyB3ejtcbiAgICBvdXRbMl0gPSB4eiAtIHd5O1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzRdID0geHkgLSB3ejtcbiAgICBvdXRbNV0gPSAxIC0gKHh4ICsgenopO1xuICAgIG91dFs2XSA9IHl6ICsgd3g7XG4gICAgb3V0WzddID0gMDtcbiAgICBvdXRbOF0gPSB4eiArIHd5O1xuICAgIG91dFs5XSA9IHl6IC0gd3g7XG4gICAgb3V0WzEwXSA9IDEgLSAoeHggKyB5eSk7XG4gICAgb3V0WzExXSA9IDA7XG4gICAgb3V0WzEyXSA9IHZbMF07XG4gICAgb3V0WzEzXSA9IHZbMV07XG4gICAgb3V0WzE0XSA9IHZbMl07XG4gICAgb3V0WzE1XSA9IDE7XG5cbiAgICByZXR1cm4gb3V0O1xufTtcblxubWF0NC5mcm9tUXVhdCA9IGZ1bmN0aW9uIChvdXQsIHEpIHtcbiAgICB2YXIgeCA9IHFbMF0sIHkgPSBxWzFdLCB6ID0gcVsyXSwgdyA9IHFbM10sXG4gICAgICAgIHgyID0geCArIHgsXG4gICAgICAgIHkyID0geSArIHksXG4gICAgICAgIHoyID0geiArIHosXG5cbiAgICAgICAgeHggPSB4ICogeDIsXG4gICAgICAgIHl4ID0geSAqIHgyLFxuICAgICAgICB5eSA9IHkgKiB5MixcbiAgICAgICAgenggPSB6ICogeDIsXG4gICAgICAgIHp5ID0geiAqIHkyLFxuICAgICAgICB6eiA9IHogKiB6MixcbiAgICAgICAgd3ggPSB3ICogeDIsXG4gICAgICAgIHd5ID0gdyAqIHkyLFxuICAgICAgICB3eiA9IHcgKiB6MjtcblxuICAgIG91dFswXSA9IDEgLSB5eSAtIHp6O1xuICAgIG91dFsxXSA9IHl4ICsgd3o7XG4gICAgb3V0WzJdID0genggLSB3eTtcbiAgICBvdXRbM10gPSAwO1xuXG4gICAgb3V0WzRdID0geXggLSB3ejtcbiAgICBvdXRbNV0gPSAxIC0geHggLSB6ejtcbiAgICBvdXRbNl0gPSB6eSArIHd4O1xuICAgIG91dFs3XSA9IDA7XG5cbiAgICBvdXRbOF0gPSB6eCArIHd5O1xuICAgIG91dFs5XSA9IHp5IC0gd3g7XG4gICAgb3V0WzEwXSA9IDEgLSB4eCAtIHl5O1xuICAgIG91dFsxMV0gPSAwO1xuXG4gICAgb3V0WzEyXSA9IDA7XG4gICAgb3V0WzEzXSA9IDA7XG4gICAgb3V0WzE0XSA9IDA7XG4gICAgb3V0WzE1XSA9IDE7XG5cbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBmcnVzdHVtIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBib3VuZHNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge051bWJlcn0gbGVmdCBMZWZ0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge051bWJlcn0gcmlnaHQgUmlnaHQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7TnVtYmVyfSBib3R0b20gQm90dG9tIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge051bWJlcn0gdG9wIFRvcCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtOdW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtOdW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xubWF0NC5mcnVzdHVtID0gZnVuY3Rpb24gKG91dCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHtcbiAgICB2YXIgcmwgPSAxIC8gKHJpZ2h0IC0gbGVmdCksXG4gICAgICAgIHRiID0gMSAvICh0b3AgLSBib3R0b20pLFxuICAgICAgICBuZiA9IDEgLyAobmVhciAtIGZhcik7XG4gICAgb3V0WzBdID0gKG5lYXIgKiAyKSAqIHJsO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICAgIG91dFs0XSA9IDA7XG4gICAgb3V0WzVdID0gKG5lYXIgKiAyKSAqIHRiO1xuICAgIG91dFs2XSA9IDA7XG4gICAgb3V0WzddID0gMDtcbiAgICBvdXRbOF0gPSAocmlnaHQgKyBsZWZ0KSAqIHJsO1xuICAgIG91dFs5XSA9ICh0b3AgKyBib3R0b20pICogdGI7XG4gICAgb3V0WzEwXSA9IChmYXIgKyBuZWFyKSAqIG5mO1xuICAgIG91dFsxMV0gPSAtMTtcbiAgICBvdXRbMTJdID0gMDtcbiAgICBvdXRbMTNdID0gMDtcbiAgICBvdXRbMTRdID0gKGZhciAqIG5lYXIgKiAyKSAqIG5mO1xuICAgIG91dFsxNV0gPSAwO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHBlcnNwZWN0aXZlIHByb2plY3Rpb24gbWF0cml4IHdpdGggdGhlIGdpdmVuIGJvdW5kc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBmb3Z5IFZlcnRpY2FsIGZpZWxkIG9mIHZpZXcgaW4gcmFkaWFuc1xuICogQHBhcmFtIHtudW1iZXJ9IGFzcGVjdCBBc3BlY3QgcmF0aW8uIHR5cGljYWxseSB2aWV3cG9ydCB3aWR0aC9oZWlnaHRcbiAqIEBwYXJhbSB7bnVtYmVyfSBuZWFyIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBmYXIgRmFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cbm1hdDQucGVyc3BlY3RpdmUgPSBmdW5jdGlvbiAob3V0LCBmb3Z5LCBhc3BlY3QsIG5lYXIsIGZhcikge1xuICAgIHZhciBmID0gMS4wIC8gTWF0aC50YW4oZm92eSAvIDIpLFxuICAgICAgICBuZiA9IDEgLyAobmVhciAtIGZhcik7XG4gICAgb3V0WzBdID0gZiAvIGFzcGVjdDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgICBvdXRbNF0gPSAwO1xuICAgIG91dFs1XSA9IGY7XG4gICAgb3V0WzZdID0gMDtcbiAgICBvdXRbN10gPSAwO1xuICAgIG91dFs4XSA9IDA7XG4gICAgb3V0WzldID0gMDtcbiAgICBvdXRbMTBdID0gKGZhciArIG5lYXIpICogbmY7XG4gICAgb3V0WzExXSA9IC0xO1xuICAgIG91dFsxMl0gPSAwO1xuICAgIG91dFsxM10gPSAwO1xuICAgIG91dFsxNF0gPSAoMiAqIGZhciAqIG5lYXIpICogbmY7XG4gICAgb3V0WzE1XSA9IDA7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgb3J0aG9nb25hbCBwcm9qZWN0aW9uIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBib3VuZHNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge251bWJlcn0gbGVmdCBMZWZ0IGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gcmlnaHQgUmlnaHQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSBib3R0b20gQm90dG9tIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gdG9wIFRvcCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xubWF0NC5vcnRobyA9IGZ1bmN0aW9uIChvdXQsIGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSB7XG4gICAgdmFyIGxyID0gMSAvIChsZWZ0IC0gcmlnaHQpLFxuICAgICAgICBidCA9IDEgLyAoYm90dG9tIC0gdG9wKSxcbiAgICAgICAgbmYgPSAxIC8gKG5lYXIgLSBmYXIpO1xuICAgIG91dFswXSA9IC0yICogbHI7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzRdID0gMDtcbiAgICBvdXRbNV0gPSAtMiAqIGJ0O1xuICAgIG91dFs2XSA9IDA7XG4gICAgb3V0WzddID0gMDtcbiAgICBvdXRbOF0gPSAwO1xuICAgIG91dFs5XSA9IDA7XG4gICAgb3V0WzEwXSA9IDIgKiBuZjtcbiAgICBvdXRbMTFdID0gMDtcbiAgICBvdXRbMTJdID0gKGxlZnQgKyByaWdodCkgKiBscjtcbiAgICBvdXRbMTNdID0gKHRvcCArIGJvdHRvbSkgKiBidDtcbiAgICBvdXRbMTRdID0gKGZhciArIG5lYXIpICogbmY7XG4gICAgb3V0WzE1XSA9IDE7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgbG9vay1hdCBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gZXllIHBvc2l0aW9uLCBmb2NhbCBwb2ludCwgYW5kIHVwIGF4aXNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCBtYXQ0IGZydXN0dW0gbWF0cml4IHdpbGwgYmUgd3JpdHRlbiBpbnRvXG4gKiBAcGFyYW0ge3ZlYzN9IGV5ZSBQb3NpdGlvbiBvZiB0aGUgdmlld2VyXG4gKiBAcGFyYW0ge3ZlYzN9IGNlbnRlciBQb2ludCB0aGUgdmlld2VyIGlzIGxvb2tpbmcgYXRcbiAqIEBwYXJhbSB7dmVjM30gdXAgdmVjMyBwb2ludGluZyB1cFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5tYXQ0Lmxvb2tBdCA9IGZ1bmN0aW9uIChvdXQsIGV5ZSwgY2VudGVyLCB1cCkge1xuICAgIHZhciB4MCwgeDEsIHgyLCB5MCwgeTEsIHkyLCB6MCwgejEsIHoyLCBsZW4sXG4gICAgICAgIGV5ZXggPSBleWVbMF0sXG4gICAgICAgIGV5ZXkgPSBleWVbMV0sXG4gICAgICAgIGV5ZXogPSBleWVbMl0sXG4gICAgICAgIHVweCA9IHVwWzBdLFxuICAgICAgICB1cHkgPSB1cFsxXSxcbiAgICAgICAgdXB6ID0gdXBbMl0sXG4gICAgICAgIGNlbnRlcnggPSBjZW50ZXJbMF0sXG4gICAgICAgIGNlbnRlcnkgPSBjZW50ZXJbMV0sXG4gICAgICAgIGNlbnRlcnogPSBjZW50ZXJbMl07XG5cbiAgICBpZiAoTWF0aC5hYnMoZXlleCAtIGNlbnRlcngpIDwgR0xNQVRfRVBTSUxPTiAmJlxuICAgICAgICBNYXRoLmFicyhleWV5IC0gY2VudGVyeSkgPCBHTE1BVF9FUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGV5ZXogLSBjZW50ZXJ6KSA8IEdMTUFUX0VQU0lMT04pIHtcbiAgICAgICAgcmV0dXJuIG1hdDQuaWRlbnRpdHkob3V0KTtcbiAgICB9XG5cbiAgICB6MCA9IGV5ZXggLSBjZW50ZXJ4O1xuICAgIHoxID0gZXlleSAtIGNlbnRlcnk7XG4gICAgejIgPSBleWV6IC0gY2VudGVyejtcblxuICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQoejAgKiB6MCArIHoxICogejEgKyB6MiAqIHoyKTtcbiAgICB6MCAqPSBsZW47XG4gICAgejEgKj0gbGVuO1xuICAgIHoyICo9IGxlbjtcblxuICAgIHgwID0gdXB5ICogejIgLSB1cHogKiB6MTtcbiAgICB4MSA9IHVweiAqIHowIC0gdXB4ICogejI7XG4gICAgeDIgPSB1cHggKiB6MSAtIHVweSAqIHowO1xuICAgIGxlbiA9IE1hdGguc3FydCh4MCAqIHgwICsgeDEgKiB4MSArIHgyICogeDIpO1xuICAgIGlmICghbGVuKSB7XG4gICAgICAgIHgwID0gMDtcbiAgICAgICAgeDEgPSAwO1xuICAgICAgICB4MiA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGVuID0gMSAvIGxlbjtcbiAgICAgICAgeDAgKj0gbGVuO1xuICAgICAgICB4MSAqPSBsZW47XG4gICAgICAgIHgyICo9IGxlbjtcbiAgICB9XG5cbiAgICB5MCA9IHoxICogeDIgLSB6MiAqIHgxO1xuICAgIHkxID0gejIgKiB4MCAtIHowICogeDI7XG4gICAgeTIgPSB6MCAqIHgxIC0gejEgKiB4MDtcblxuICAgIGxlbiA9IE1hdGguc3FydCh5MCAqIHkwICsgeTEgKiB5MSArIHkyICogeTIpO1xuICAgIGlmICghbGVuKSB7XG4gICAgICAgIHkwID0gMDtcbiAgICAgICAgeTEgPSAwO1xuICAgICAgICB5MiA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbGVuID0gMSAvIGxlbjtcbiAgICAgICAgeTAgKj0gbGVuO1xuICAgICAgICB5MSAqPSBsZW47XG4gICAgICAgIHkyICo9IGxlbjtcbiAgICB9XG5cbiAgICBvdXRbMF0gPSB4MDtcbiAgICBvdXRbMV0gPSB5MDtcbiAgICBvdXRbMl0gPSB6MDtcbiAgICBvdXRbM10gPSAwO1xuICAgIG91dFs0XSA9IHgxO1xuICAgIG91dFs1XSA9IHkxO1xuICAgIG91dFs2XSA9IHoxO1xuICAgIG91dFs3XSA9IDA7XG4gICAgb3V0WzhdID0geDI7XG4gICAgb3V0WzldID0geTI7XG4gICAgb3V0WzEwXSA9IHoyO1xuICAgIG91dFsxMV0gPSAwO1xuICAgIG91dFsxMl0gPSAtKHgwICogZXlleCArIHgxICogZXlleSArIHgyICogZXlleik7XG4gICAgb3V0WzEzXSA9IC0oeTAgKiBleWV4ICsgeTEgKiBleWV5ICsgeTIgKiBleWV6KTtcbiAgICBvdXRbMTRdID0gLSh6MCAqIGV5ZXggKyB6MSAqIGV5ZXkgKyB6MiAqIGV5ZXopO1xuICAgIG91dFsxNV0gPSAxO1xuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUmV0dXJucyBGcm9iZW5pdXMgbm9ybSBvZiBhIG1hdDRcbiAqXG4gKiBAcGFyYW0ge21hdDR9IGEgdGhlIG1hdHJpeCB0byBjYWxjdWxhdGUgRnJvYmVuaXVzIG5vcm0gb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IEZyb2Jlbml1cyBub3JtXG4gKi9cbm1hdDQuZnJvYiA9IGZ1bmN0aW9uIChhKSB7XG4gICAgcmV0dXJuKE1hdGguc3FydChNYXRoLnBvdyhhWzBdLCAyKSArIE1hdGgucG93KGFbMV0sIDIpICsgTWF0aC5wb3coYVsyXSwgMikgKyBNYXRoLnBvdyhhWzNdLCAyKSArIE1hdGgucG93KGFbNF0sIDIpICsgTWF0aC5wb3coYVs1XSwgMikgKyBNYXRoLnBvdyhhWzZdLCAyKSArIE1hdGgucG93KGFbN10sIDIpICsgTWF0aC5wb3coYVs4XSwgMikgKyBNYXRoLnBvdyhhWzldLCAyKSArIE1hdGgucG93KGFbMTBdLCAyKSArIE1hdGgucG93KGFbMTFdLCAyKSArIE1hdGgucG93KGFbMTJdLCAyKSArIE1hdGgucG93KGFbMTNdLCAyKSArIE1hdGgucG93KGFbMTRdLCAyKSArIE1hdGgucG93KGFbMTVdLCAyKSApKVxufTtcblxuZXhwb3J0IGRlZmF1bHQgbWF0NDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2dsbWF0cml4L21hdDQuanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///15\n");

/***/ }),
/* 16 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__shader_source_header_light__ = __webpack_require__(51);\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_2__shader_source_header_light__[\"a\" /* default */]);\n\n/**\n * @constructor clay.Light\n * @extends clay.Node\n */\nvar Light = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].extend(function(){\n    return /** @lends clay.Light# */ {\n        /**\n         * Light RGB color\n         * @type {number[]}\n         */\n        color: [1, 1, 1],\n\n        /**\n         * Light intensity\n         * @type {number}\n         */\n        intensity: 1.0,\n\n        // Config for shadow map\n        /**\n         * If light cast shadow\n         * @type {boolean}\n         */\n        castShadow: true,\n\n        /**\n         * Shadow map size\n         * @type {number}\n         */\n        shadowResolution: 512,\n\n        /**\n         * Light group, shader with same `lightGroup` will be affected\n         *\n         * Only useful in forward rendering\n         * @type {number}\n         */\n        group: 0\n    };\n},\n/** @lends clay.Light.prototype. */\n{\n    /**\n     * Light type\n     * @type {string}\n     * @memberOf clay.Light#\n     */\n    type: '',\n\n    /**\n     * @return {clay.Light}\n     * @memberOf clay.Light.prototype\n     */\n    clone: function() {\n        var light = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].prototype.clone.call(this);\n        light.color = Array.prototype.slice.call(this.color);\n        light.intensity = this.intensity;\n        light.castShadow = this.castShadow;\n        light.shadowResolution = this.shadowResolution;\n\n        return light;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Light);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9MaWdodC5qcz9lYjVlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOb2RlIGZyb20gJy4vTm9kZSc7XG5pbXBvcnQgU2hhZGVyIGZyb20gJy4vU2hhZGVyJztcblxuaW1wb3J0IGxpZ2h0U2hhZGVyIGZyb20gJy4vc2hhZGVyL3NvdXJjZS9oZWFkZXIvbGlnaHQnO1xuU2hhZGVyWydpbXBvcnQnXShsaWdodFNoYWRlcik7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuTGlnaHRcbiAqIEBleHRlbmRzIGNsYXkuTm9kZVxuICovXG52YXIgTGlnaHQgPSBOb2RlLmV4dGVuZChmdW5jdGlvbigpe1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuTGlnaHQjICovIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIExpZ2h0IFJHQiBjb2xvclxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyW119XG4gICAgICAgICAqL1xuICAgICAgICBjb2xvcjogWzEsIDEsIDFdLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMaWdodCBpbnRlbnNpdHlcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIGludGVuc2l0eTogMS4wLFxuXG4gICAgICAgIC8vIENvbmZpZyBmb3Igc2hhZG93IG1hcFxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgbGlnaHQgY2FzdCBzaGFkb3dcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBjYXN0U2hhZG93OiB0cnVlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaGFkb3cgbWFwIHNpemVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHNoYWRvd1Jlc29sdXRpb246IDUxMixcblxuICAgICAgICAvKipcbiAgICAgICAgICogTGlnaHQgZ3JvdXAsIHNoYWRlciB3aXRoIHNhbWUgYGxpZ2h0R3JvdXBgIHdpbGwgYmUgYWZmZWN0ZWRcbiAgICAgICAgICpcbiAgICAgICAgICogT25seSB1c2VmdWwgaW4gZm9yd2FyZCByZW5kZXJpbmdcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIGdyb3VwOiAwXG4gICAgfTtcbn0sXG4vKiogQGxlbmRzIGNsYXkuTGlnaHQucHJvdG90eXBlLiAqL1xue1xuICAgIC8qKlxuICAgICAqIExpZ2h0IHR5cGVcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LkxpZ2h0I1xuICAgICAqL1xuICAgIHR5cGU6ICcnLFxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Y2xheS5MaWdodH1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5MaWdodC5wcm90b3R5cGVcbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsaWdodCA9IE5vZGUucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7XG4gICAgICAgIGxpZ2h0LmNvbG9yID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5jb2xvcik7XG4gICAgICAgIGxpZ2h0LmludGVuc2l0eSA9IHRoaXMuaW50ZW5zaXR5O1xuICAgICAgICBsaWdodC5jYXN0U2hhZG93ID0gdGhpcy5jYXN0U2hhZG93O1xuICAgICAgICBsaWdodC5zaGFkb3dSZXNvbHV0aW9uID0gdGhpcy5zaGFkb3dSZXNvbHV0aW9uO1xuXG4gICAgICAgIHJldHVybiBsaWdodDtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgTGlnaHQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL0xpZ2h0LmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///16\n");

/***/ }),
/* 17 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Renderable__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n\n\n\n/**\n * @constructor clay.Mesh\n * @extends clay.Renderable\n */\nvar Mesh = __WEBPACK_IMPORTED_MODULE_0__Renderable__[\"a\" /* default */].extend(/** @lends clay.Mesh# */ {\n    /**\n     * Used when it is a skinned mesh\n     * @type {clay.Skeleton}\n     */\n    skeleton: null,\n    /**\n     * Joints indices Meshes can share the one skeleton instance and each mesh can use one part of joints. Joints indices indicate the index of joint in the skeleton instance\n     * @type {number[]}\n     */\n    joints: null\n\n}, function () {\n    if (!this.joints) {\n        this.joints = [];\n    }\n}, {\n\n    /**\n     * Offset matrix used for multiple skinned mesh clone sharing one skeleton\n     * @type {clay.Matrix4}\n     */\n    offsetMatrix: null,\n\n    isInstancedMesh: function () { return false; },\n\n    isSkinnedMesh: function () {\n        return !!(this.skeleton && this.joints && this.joints.length > 0);\n    },\n\n    clone: function () {\n        var mesh = __WEBPACK_IMPORTED_MODULE_0__Renderable__[\"a\" /* default */].prototype.clone.call(this);\n        mesh.skeleton = this.skeleton;\n        if (this.joints) {\n            mesh.joints = this.joints.slice();\n        }\n        return mesh;\n    }\n});\n\n// Enums\nMesh.POINTS = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].POINTS;\nMesh.LINES = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINES;\nMesh.LINE_LOOP = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINE_LOOP;\nMesh.LINE_STRIP = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINE_STRIP;\nMesh.TRIANGLES = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].TRIANGLES;\nMesh.TRIANGLE_STRIP = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].TRIANGLE_STRIP;\nMesh.TRIANGLE_FAN = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].TRIANGLE_FAN;\n\nMesh.BACK = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].BACK;\nMesh.FRONT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].FRONT;\nMesh.FRONT_AND_BACK = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].FRONT_AND_BACK;\nMesh.CW = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CW;\nMesh.CCW = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CCW;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Mesh);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9NZXNoLmpzP2I0MjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlbmRlcmFibGUgZnJvbSAnLi9SZW5kZXJhYmxlJztcbmltcG9ydCBnbGVudW0gZnJvbSAnLi9jb3JlL2dsZW51bSc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuTWVzaFxuICogQGV4dGVuZHMgY2xheS5SZW5kZXJhYmxlXG4gKi9cbnZhciBNZXNoID0gUmVuZGVyYWJsZS5leHRlbmQoLyoqIEBsZW5kcyBjbGF5Lk1lc2gjICovIHtcbiAgICAvKipcbiAgICAgKiBVc2VkIHdoZW4gaXQgaXMgYSBza2lubmVkIG1lc2hcbiAgICAgKiBAdHlwZSB7Y2xheS5Ta2VsZXRvbn1cbiAgICAgKi9cbiAgICBza2VsZXRvbjogbnVsbCxcbiAgICAvKipcbiAgICAgKiBKb2ludHMgaW5kaWNlcyBNZXNoZXMgY2FuIHNoYXJlIHRoZSBvbmUgc2tlbGV0b24gaW5zdGFuY2UgYW5kIGVhY2ggbWVzaCBjYW4gdXNlIG9uZSBwYXJ0IG9mIGpvaW50cy4gSm9pbnRzIGluZGljZXMgaW5kaWNhdGUgdGhlIGluZGV4IG9mIGpvaW50IGluIHRoZSBza2VsZXRvbiBpbnN0YW5jZVxuICAgICAqIEB0eXBlIHtudW1iZXJbXX1cbiAgICAgKi9cbiAgICBqb2ludHM6IG51bGxcblxufSwgZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5qb2ludHMpIHtcbiAgICAgICAgdGhpcy5qb2ludHMgPSBbXTtcbiAgICB9XG59LCB7XG5cbiAgICAvKipcbiAgICAgKiBPZmZzZXQgbWF0cml4IHVzZWQgZm9yIG11bHRpcGxlIHNraW5uZWQgbWVzaCBjbG9uZSBzaGFyaW5nIG9uZSBza2VsZXRvblxuICAgICAqIEB0eXBlIHtjbGF5Lk1hdHJpeDR9XG4gICAgICovXG4gICAgb2Zmc2V0TWF0cml4OiBudWxsLFxuXG4gICAgaXNJbnN0YW5jZWRNZXNoOiBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfSxcblxuICAgIGlzU2tpbm5lZE1lc2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhKHRoaXMuc2tlbGV0b24gJiYgdGhpcy5qb2ludHMgJiYgdGhpcy5qb2ludHMubGVuZ3RoID4gMCk7XG4gICAgfSxcblxuICAgIGNsb25lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtZXNoID0gUmVuZGVyYWJsZS5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTtcbiAgICAgICAgbWVzaC5za2VsZXRvbiA9IHRoaXMuc2tlbGV0b247XG4gICAgICAgIGlmICh0aGlzLmpvaW50cykge1xuICAgICAgICAgICAgbWVzaC5qb2ludHMgPSB0aGlzLmpvaW50cy5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNoO1xuICAgIH1cbn0pO1xuXG4vLyBFbnVtc1xuTWVzaC5QT0lOVFMgPSBnbGVudW0uUE9JTlRTO1xuTWVzaC5MSU5FUyA9IGdsZW51bS5MSU5FUztcbk1lc2guTElORV9MT09QID0gZ2xlbnVtLkxJTkVfTE9PUDtcbk1lc2guTElORV9TVFJJUCA9IGdsZW51bS5MSU5FX1NUUklQO1xuTWVzaC5UUklBTkdMRVMgPSBnbGVudW0uVFJJQU5HTEVTO1xuTWVzaC5UUklBTkdMRV9TVFJJUCA9IGdsZW51bS5UUklBTkdMRV9TVFJJUDtcbk1lc2guVFJJQU5HTEVfRkFOID0gZ2xlbnVtLlRSSUFOR0xFX0ZBTjtcblxuTWVzaC5CQUNLID0gZ2xlbnVtLkJBQ0s7XG5NZXNoLkZST05UID0gZ2xlbnVtLkZST05UO1xuTWVzaC5GUk9OVF9BTkRfQkFDSyA9IGdsZW51bS5GUk9OVF9BTkRfQkFDSztcbk1lc2guQ1cgPSBnbGVudW0uQ1c7XG5NZXNoLkNDVyA9IGdsZW51bS5DQ1c7XG5cbmV4cG9ydCBkZWZhdWx0IE1lc2g7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL01lc2guanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///17\n");

/***/ }),
/* 18 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__TextureCube__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_Cache__ = __webpack_require__(33);\n\n\n\n\n\n\nvar KEY_FRAMEBUFFER = 'framebuffer';\nvar KEY_RENDERBUFFER = 'renderbuffer';\nvar KEY_RENDERBUFFER_WIDTH = KEY_RENDERBUFFER + '_width';\nvar KEY_RENDERBUFFER_HEIGHT = KEY_RENDERBUFFER + '_height';\nvar KEY_RENDERBUFFER_ATTACHED = KEY_RENDERBUFFER + '_attached';\nvar KEY_DEPTHTEXTURE_ATTACHED = 'depthtexture_attached';\n\nvar GL_FRAMEBUFFER = __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].FRAMEBUFFER;\nvar GL_RENDERBUFFER = __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].RENDERBUFFER;\nvar GL_DEPTH_ATTACHMENT = __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].DEPTH_ATTACHMENT;\nvar GL_COLOR_ATTACHMENT0 = __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].COLOR_ATTACHMENT0;\n/**\n * @constructor clay.FrameBuffer\n * @extends clay.core.Base\n */\nvar FrameBuffer = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(\n/** @lends clay.FrameBuffer# */\n{\n    /**\n     * If use depth buffer\n     * @type {boolean}\n     */\n    depthBuffer: true,\n\n    /**\n     * @type {Object}\n     */\n    viewport: null,\n\n    _width: 0,\n    _height: 0,\n\n    _textures: null,\n\n    _boundRenderer: null,\n}, function () {\n    // Use cache\n    this._cache = new __WEBPACK_IMPORTED_MODULE_4__core_Cache__[\"a\" /* default */]();\n\n    this._textures = {};\n},\n\n/**@lends clay.FrameBuffer.prototype. */\n{\n    /**\n     * Get attached texture width\n     * {number}\n     */\n    // FIXME Can't use before #bind\n    getTextureWidth: function () {\n        return this._width;\n    },\n\n    /**\n     * Get attached texture height\n     * {number}\n     */\n    getTextureHeight: function () {\n        return this._height;\n    },\n\n    /**\n     * Bind the framebuffer to given renderer before rendering\n     * @param  {clay.Renderer} renderer\n     */\n    bind: function (renderer) {\n\n        if (renderer.__currentFrameBuffer) {\n            // Already bound\n            if (renderer.__currentFrameBuffer === this) {\n                return;\n            }\n\n            console.warn('Renderer already bound with another framebuffer. Unbind it first');\n        }\n        renderer.__currentFrameBuffer = this;\n\n        var _gl = renderer.gl;\n\n        _gl.bindFramebuffer(GL_FRAMEBUFFER, this._getFrameBufferGL(renderer));\n        this._boundRenderer = renderer;\n        var cache = this._cache;\n\n        cache.put('viewport', renderer.viewport);\n\n        var hasTextureAttached = false;\n        var width;\n        var height;\n        for (var attachment in this._textures) {\n            hasTextureAttached = true;\n            var obj = this._textures[attachment];\n            if (obj) {\n                // TODO Do width, height checking, make sure size are same\n                width = obj.texture.width;\n                height = obj.texture.height;\n                // Attach textures\n                this._doAttach(renderer, obj.texture, attachment, obj.target);\n            }\n        }\n\n        this._width = width;\n        this._height = height;\n\n        if (!hasTextureAttached && this.depthBuffer) {\n            console.error('Must attach texture before bind, or renderbuffer may have incorrect width and height.')\n        }\n\n        if (this.viewport) {\n            renderer.setViewport(this.viewport);\n        }\n        else {\n            renderer.setViewport(0, 0, width, height, 1);\n        }\n\n        var attachedTextures = cache.get('attached_textures');\n        if (attachedTextures) {\n            for (var attachment in attachedTextures) {\n                if (!this._textures[attachment]) {\n                    var target = attachedTextures[attachment];\n                    this._doDetach(_gl, attachment, target);\n                }\n            }\n        }\n        if (!cache.get(KEY_DEPTHTEXTURE_ATTACHED) && this.depthBuffer) {\n            // Create a new render buffer\n            if (cache.miss(KEY_RENDERBUFFER)) {\n                cache.put(KEY_RENDERBUFFER, _gl.createRenderbuffer());\n            }\n            var renderbuffer = cache.get(KEY_RENDERBUFFER);\n\n            if (width !== cache.get(KEY_RENDERBUFFER_WIDTH)\n                    || height !== cache.get(KEY_RENDERBUFFER_HEIGHT)) {\n                _gl.bindRenderbuffer(GL_RENDERBUFFER, renderbuffer);\n                _gl.renderbufferStorage(GL_RENDERBUFFER, _gl.DEPTH_COMPONENT16, width, height);\n                cache.put(KEY_RENDERBUFFER_WIDTH, width);\n                cache.put(KEY_RENDERBUFFER_HEIGHT, height);\n                _gl.bindRenderbuffer(GL_RENDERBUFFER, null);\n            }\n            if (!cache.get(KEY_RENDERBUFFER_ATTACHED)) {\n                _gl.framebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, renderbuffer);\n                cache.put(KEY_RENDERBUFFER_ATTACHED, true);\n            }\n        }\n    },\n\n    /**\n     * Unbind the frame buffer after rendering\n     * @param  {clay.Renderer} renderer\n     */\n    unbind: function (renderer) {\n        // Remove status record on renderer\n        renderer.__currentFrameBuffer = null;\n\n        var _gl = renderer.gl;\n\n        _gl.bindFramebuffer(GL_FRAMEBUFFER, null);\n        this._boundRenderer = null;\n\n        this._cache.use(renderer.__uid__);\n        var viewport = this._cache.get('viewport');\n        // Reset viewport;\n        if (viewport) {\n            renderer.setViewport(viewport);\n        }\n\n        this.updateMipmap(renderer);\n    },\n\n    // Because the data of texture is changed over time,\n    // Here update the mipmaps of texture each time after rendered;\n    updateMipmap: function (renderer) {\n        var _gl = renderer.gl;\n        for (var attachment in this._textures) {\n            var obj = this._textures[attachment];\n            if (obj) {\n                var texture = obj.texture;\n                // FIXME some texture format can't generate mipmap\n                if (!texture.NPOT && texture.useMipmap\n                    && texture.minFilter === __WEBPACK_IMPORTED_MODULE_1__Texture__[\"a\" /* default */].LINEAR_MIPMAP_LINEAR) {\n                    var target = texture.textureType === 'textureCube' ? __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].TEXTURE_CUBE_MAP : __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].TEXTURE_2D;\n                    _gl.bindTexture(target, texture.getWebGLTexture(renderer));\n                    _gl.generateMipmap(target);\n                    _gl.bindTexture(target, null);\n                }\n            }\n        }\n    },\n\n\n    // 0x8CD5, 36053, FRAMEBUFFER_COMPLETE\n    // 0x8CD6, 36054, FRAMEBUFFER_INCOMPLETE_ATTACHMENT\n    // 0x8CD7, 36055, FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT\n    // 0x8CD9, 36057, FRAMEBUFFER_INCOMPLETE_DIMENSIONS\n    // 0x8CDD, 36061, FRAMEBUFFER_UNSUPPORTED\n    checkStatus: function (_gl) {\n        return _gl.checkFramebufferStatus(GL_FRAMEBUFFER);\n    },\n\n    _getFrameBufferGL: function (renderer) {\n        var cache = this._cache;\n        cache.use(renderer.__uid__);\n\n        if (cache.miss(KEY_FRAMEBUFFER)) {\n            cache.put(KEY_FRAMEBUFFER, renderer.gl.createFramebuffer());\n        }\n\n        return cache.get(KEY_FRAMEBUFFER);\n    },\n\n    /**\n     * Attach a texture(RTT) to the framebuffer\n     * @param  {clay.Texture} texture\n     * @param  {number} [attachment=gl.COLOR_ATTACHMENT0]\n     * @param  {number} [target=gl.TEXTURE_2D]\n     */\n    attach: function (texture, attachment, target) {\n\n        if (!texture.width) {\n            throw new Error('The texture attached to color buffer is not a valid.');\n        }\n        // TODO width and height check\n\n        // If the depth_texture extension is enabled, developers\n        // Can attach a depth texture to the depth buffer\n        // http://blog.tojicode.com/2012/07/using-webgldepthtexture.html\n        attachment = attachment || GL_COLOR_ATTACHMENT0;\n        target = target || __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].TEXTURE_2D;\n\n        var boundRenderer = this._boundRenderer;\n        var _gl = boundRenderer && boundRenderer.gl;\n        var attachedTextures;\n\n        if (_gl) {\n            var cache = this._cache;\n            cache.use(boundRenderer.__uid__);\n            attachedTextures = cache.get('attached_textures');\n        }\n\n        // Check if texture attached\n        var previous = this._textures[attachment];\n        if (previous && previous.target === target\n            && previous.texture === texture\n            && (attachedTextures && attachedTextures[attachment] != null)\n        ) {\n            return;\n        }\n\n        var canAttach = true;\n        if (boundRenderer) {\n            canAttach = this._doAttach(boundRenderer, texture, attachment, target);\n            // Set viewport again incase attached to different size textures.\n            if (!this.viewport) {\n                boundRenderer.setViewport(0, 0, texture.width, texture.height, 1);\n            }\n        }\n\n        if (canAttach) {\n            this._textures[attachment] = this._textures[attachment] || {};\n            this._textures[attachment].texture = texture;\n            this._textures[attachment].target = target;\n        }\n    },\n\n    _doAttach: function (renderer, texture, attachment, target) {\n        var _gl = renderer.gl;\n        // Make sure texture is always updated\n        // Because texture width or height may be changed and in this we can't be notified\n        // FIXME awkward;\n        var webglTexture = texture.getWebGLTexture(renderer);\n        // Assume cache has been used.\n        var attachedTextures = this._cache.get('attached_textures');\n        if (attachedTextures && attachedTextures[attachment]) {\n            var obj = attachedTextures[attachment];\n            // Check if texture and target not changed\n            if (obj.texture === texture && obj.target === target) {\n                return;\n            }\n        }\n        attachment = +attachment;\n\n        var canAttach = true;\n        if (attachment === GL_DEPTH_ATTACHMENT || attachment === __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].DEPTH_STENCIL_ATTACHMENT) {\n            var extension = renderer.getGLExtension('WEBGL_depth_texture');\n\n            if (!extension) {\n                console.error('Depth texture is not supported by the browser');\n                canAttach = false;\n            }\n            if (texture.format !== __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].DEPTH_COMPONENT\n                && texture.format !== __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].DEPTH_STENCIL\n            ) {\n                console.error('The texture attached to depth buffer is not a valid.');\n                canAttach = false;\n            }\n\n            // Dispose render buffer created previous\n            if (canAttach) {\n                var renderbuffer = this._cache.get(KEY_RENDERBUFFER);\n                if (renderbuffer) {\n                    _gl.framebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, null);\n                    _gl.deleteRenderbuffer(renderbuffer);\n                    this._cache.put(KEY_RENDERBUFFER, false);\n                }\n\n                this._cache.put(KEY_RENDERBUFFER_ATTACHED, false);\n                this._cache.put(KEY_DEPTHTEXTURE_ATTACHED, true);\n            }\n        }\n\n        // Mipmap level can only be 0\n        _gl.framebufferTexture2D(GL_FRAMEBUFFER, attachment, target, webglTexture, 0);\n\n        if (!attachedTextures) {\n            attachedTextures = {};\n            this._cache.put('attached_textures', attachedTextures);\n        }\n        attachedTextures[attachment] = attachedTextures[attachment] || {};\n        attachedTextures[attachment].texture = texture;\n        attachedTextures[attachment].target = target;\n\n        return canAttach;\n    },\n\n    _doDetach: function (_gl, attachment, target) {\n        // Detach a texture from framebuffer\n        // https://github.com/KhronosGroup/WebGL/blob/master/conformance-suites/1.0.0/conformance/framebuffer-test.html#L145\n        _gl.framebufferTexture2D(GL_FRAMEBUFFER, attachment, target, null, 0);\n\n        // Assume cache has been used.\n        var attachedTextures = this._cache.get('attached_textures');\n        if (attachedTextures && attachedTextures[attachment]) {\n            attachedTextures[attachment] = null;\n        }\n\n        if (attachment === GL_DEPTH_ATTACHMENT || attachment === __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].DEPTH_STENCIL_ATTACHMENT) {\n            this._cache.put(KEY_DEPTHTEXTURE_ATTACHED, false);\n        }\n    },\n\n    /**\n     * Detach a texture\n     * @param  {number} [attachment=gl.COLOR_ATTACHMENT0]\n     * @param  {number} [target=gl.TEXTURE_2D]\n     */\n    detach: function (attachment, target) {\n        // TODO depth extension check ?\n        this._textures[attachment] = null;\n        if (this._boundRenderer) {\n            var cache = this._cache;\n            cache.use(this._boundRenderer.__uid__);\n            this._doDetach(this._boundRenderer.gl, attachment, target);\n        }\n    },\n    /**\n     * Dispose\n     * @param  {WebGLRenderingContext} _gl\n     */\n    dispose: function (renderer) {\n\n        var _gl = renderer.gl;\n        var cache = this._cache;\n\n        cache.use(renderer.__uid__);\n\n        var renderBuffer = cache.get(KEY_RENDERBUFFER);\n        if (renderBuffer) {\n            _gl.deleteRenderbuffer(renderBuffer);\n        }\n        var frameBuffer = cache.get(KEY_FRAMEBUFFER);\n        if (frameBuffer) {\n            _gl.deleteFramebuffer(frameBuffer);\n        }\n        cache.deleteContext(renderer.__uid__);\n\n        // Clear cache for reusing\n        this._textures = {};\n\n    }\n});\n\nFrameBuffer.DEPTH_ATTACHMENT = GL_DEPTH_ATTACHMENT;\nFrameBuffer.COLOR_ATTACHMENT0 = GL_COLOR_ATTACHMENT0;\nFrameBuffer.STENCIL_ATTACHMENT = __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].STENCIL_ATTACHMENT;\nFrameBuffer.DEPTH_STENCIL_ATTACHMENT = __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].DEPTH_STENCIL_ATTACHMENT;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (FrameBuffer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9GcmFtZUJ1ZmZlci5qcz81ZWZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4vY29yZS9CYXNlJztcbmltcG9ydCBUZXh0dXJlIGZyb20gJy4vVGV4dHVyZSc7XG5pbXBvcnQgVGV4dHVyZUN1YmUgZnJvbSAnLi9UZXh0dXJlQ3ViZSc7XG5pbXBvcnQgZ2xlbnVtIGZyb20gJy4vY29yZS9nbGVudW0nO1xuaW1wb3J0IENhY2hlIGZyb20gJy4vY29yZS9DYWNoZSc7XG5cbnZhciBLRVlfRlJBTUVCVUZGRVIgPSAnZnJhbWVidWZmZXInO1xudmFyIEtFWV9SRU5ERVJCVUZGRVIgPSAncmVuZGVyYnVmZmVyJztcbnZhciBLRVlfUkVOREVSQlVGRkVSX1dJRFRIID0gS0VZX1JFTkRFUkJVRkZFUiArICdfd2lkdGgnO1xudmFyIEtFWV9SRU5ERVJCVUZGRVJfSEVJR0hUID0gS0VZX1JFTkRFUkJVRkZFUiArICdfaGVpZ2h0JztcbnZhciBLRVlfUkVOREVSQlVGRkVSX0FUVEFDSEVEID0gS0VZX1JFTkRFUkJVRkZFUiArICdfYXR0YWNoZWQnO1xudmFyIEtFWV9ERVBUSFRFWFRVUkVfQVRUQUNIRUQgPSAnZGVwdGh0ZXh0dXJlX2F0dGFjaGVkJztcblxudmFyIEdMX0ZSQU1FQlVGRkVSID0gZ2xlbnVtLkZSQU1FQlVGRkVSO1xudmFyIEdMX1JFTkRFUkJVRkZFUiA9IGdsZW51bS5SRU5ERVJCVUZGRVI7XG52YXIgR0xfREVQVEhfQVRUQUNITUVOVCA9IGdsZW51bS5ERVBUSF9BVFRBQ0hNRU5UO1xudmFyIEdMX0NPTE9SX0FUVEFDSE1FTlQwID0gZ2xlbnVtLkNPTE9SX0FUVEFDSE1FTlQwO1xuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5GcmFtZUJ1ZmZlclxuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqL1xudmFyIEZyYW1lQnVmZmVyID0gQmFzZS5leHRlbmQoXG4vKiogQGxlbmRzIGNsYXkuRnJhbWVCdWZmZXIjICovXG57XG4gICAgLyoqXG4gICAgICogSWYgdXNlIGRlcHRoIGJ1ZmZlclxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGRlcHRoQnVmZmVyOiB0cnVlLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICB2aWV3cG9ydDogbnVsbCxcblxuICAgIF93aWR0aDogMCxcbiAgICBfaGVpZ2h0OiAwLFxuXG4gICAgX3RleHR1cmVzOiBudWxsLFxuXG4gICAgX2JvdW5kUmVuZGVyZXI6IG51bGwsXG59LCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gVXNlIGNhY2hlXG4gICAgdGhpcy5fY2FjaGUgPSBuZXcgQ2FjaGUoKTtcblxuICAgIHRoaXMuX3RleHR1cmVzID0ge307XG59LFxuXG4vKipAbGVuZHMgY2xheS5GcmFtZUJ1ZmZlci5wcm90b3R5cGUuICovXG57XG4gICAgLyoqXG4gICAgICogR2V0IGF0dGFjaGVkIHRleHR1cmUgd2lkdGhcbiAgICAgKiB7bnVtYmVyfVxuICAgICAqL1xuICAgIC8vIEZJWE1FIENhbid0IHVzZSBiZWZvcmUgI2JpbmRcbiAgICBnZXRUZXh0dXJlV2lkdGg6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpZHRoO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYXR0YWNoZWQgdGV4dHVyZSBoZWlnaHRcbiAgICAgKiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldFRleHR1cmVIZWlnaHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQmluZCB0aGUgZnJhbWVidWZmZXIgdG8gZ2l2ZW4gcmVuZGVyZXIgYmVmb3JlIHJlbmRlcmluZ1xuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICovXG4gICAgYmluZDogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG5cbiAgICAgICAgaWYgKHJlbmRlcmVyLl9fY3VycmVudEZyYW1lQnVmZmVyKSB7XG4gICAgICAgICAgICAvLyBBbHJlYWR5IGJvdW5kXG4gICAgICAgICAgICBpZiAocmVuZGVyZXIuX19jdXJyZW50RnJhbWVCdWZmZXIgPT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnNvbGUud2FybignUmVuZGVyZXIgYWxyZWFkeSBib3VuZCB3aXRoIGFub3RoZXIgZnJhbWVidWZmZXIuIFVuYmluZCBpdCBmaXJzdCcpO1xuICAgICAgICB9XG4gICAgICAgIHJlbmRlcmVyLl9fY3VycmVudEZyYW1lQnVmZmVyID0gdGhpcztcblxuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2w7XG5cbiAgICAgICAgX2dsLmJpbmRGcmFtZWJ1ZmZlcihHTF9GUkFNRUJVRkZFUiwgdGhpcy5fZ2V0RnJhbWVCdWZmZXJHTChyZW5kZXJlcikpO1xuICAgICAgICB0aGlzLl9ib3VuZFJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHZhciBjYWNoZSA9IHRoaXMuX2NhY2hlO1xuXG4gICAgICAgIGNhY2hlLnB1dCgndmlld3BvcnQnLCByZW5kZXJlci52aWV3cG9ydCk7XG5cbiAgICAgICAgdmFyIGhhc1RleHR1cmVBdHRhY2hlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgd2lkdGg7XG4gICAgICAgIHZhciBoZWlnaHQ7XG4gICAgICAgIGZvciAodmFyIGF0dGFjaG1lbnQgaW4gdGhpcy5fdGV4dHVyZXMpIHtcbiAgICAgICAgICAgIGhhc1RleHR1cmVBdHRhY2hlZCA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2JqID0gdGhpcy5fdGV4dHVyZXNbYXR0YWNobWVudF07XG4gICAgICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyBEbyB3aWR0aCwgaGVpZ2h0IGNoZWNraW5nLCBtYWtlIHN1cmUgc2l6ZSBhcmUgc2FtZVxuICAgICAgICAgICAgICAgIHdpZHRoID0gb2JqLnRleHR1cmUud2lkdGg7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gb2JqLnRleHR1cmUuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIC8vIEF0dGFjaCB0ZXh0dXJlc1xuICAgICAgICAgICAgICAgIHRoaXMuX2RvQXR0YWNoKHJlbmRlcmVyLCBvYmoudGV4dHVyZSwgYXR0YWNobWVudCwgb2JqLnRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgICAgaWYgKCFoYXNUZXh0dXJlQXR0YWNoZWQgJiYgdGhpcy5kZXB0aEJ1ZmZlcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTXVzdCBhdHRhY2ggdGV4dHVyZSBiZWZvcmUgYmluZCwgb3IgcmVuZGVyYnVmZmVyIG1heSBoYXZlIGluY29ycmVjdCB3aWR0aCBhbmQgaGVpZ2h0LicpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy52aWV3cG9ydCkge1xuICAgICAgICAgICAgcmVuZGVyZXIuc2V0Vmlld3BvcnQodGhpcy52aWV3cG9ydCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZW5kZXJlci5zZXRWaWV3cG9ydCgwLCAwLCB3aWR0aCwgaGVpZ2h0LCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhdHRhY2hlZFRleHR1cmVzID0gY2FjaGUuZ2V0KCdhdHRhY2hlZF90ZXh0dXJlcycpO1xuICAgICAgICBpZiAoYXR0YWNoZWRUZXh0dXJlcykge1xuICAgICAgICAgICAgZm9yICh2YXIgYXR0YWNobWVudCBpbiBhdHRhY2hlZFRleHR1cmVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl90ZXh0dXJlc1thdHRhY2htZW50XSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gYXR0YWNoZWRUZXh0dXJlc1thdHRhY2htZW50XTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZG9EZXRhY2goX2dsLCBhdHRhY2htZW50LCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNhY2hlLmdldChLRVlfREVQVEhURVhUVVJFX0FUVEFDSEVEKSAmJiB0aGlzLmRlcHRoQnVmZmVyKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcmVuZGVyIGJ1ZmZlclxuICAgICAgICAgICAgaWYgKGNhY2hlLm1pc3MoS0VZX1JFTkRFUkJVRkZFUikpIHtcbiAgICAgICAgICAgICAgICBjYWNoZS5wdXQoS0VZX1JFTkRFUkJVRkZFUiwgX2dsLmNyZWF0ZVJlbmRlcmJ1ZmZlcigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZW5kZXJidWZmZXIgPSBjYWNoZS5nZXQoS0VZX1JFTkRFUkJVRkZFUik7XG5cbiAgICAgICAgICAgIGlmICh3aWR0aCAhPT0gY2FjaGUuZ2V0KEtFWV9SRU5ERVJCVUZGRVJfV0lEVEgpXG4gICAgICAgICAgICAgICAgICAgIHx8IGhlaWdodCAhPT0gY2FjaGUuZ2V0KEtFWV9SRU5ERVJCVUZGRVJfSEVJR0hUKSkge1xuICAgICAgICAgICAgICAgIF9nbC5iaW5kUmVuZGVyYnVmZmVyKEdMX1JFTkRFUkJVRkZFUiwgcmVuZGVyYnVmZmVyKTtcbiAgICAgICAgICAgICAgICBfZ2wucmVuZGVyYnVmZmVyU3RvcmFnZShHTF9SRU5ERVJCVUZGRVIsIF9nbC5ERVBUSF9DT01QT05FTlQxNiwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgY2FjaGUucHV0KEtFWV9SRU5ERVJCVUZGRVJfV0lEVEgsIHdpZHRoKTtcbiAgICAgICAgICAgICAgICBjYWNoZS5wdXQoS0VZX1JFTkRFUkJVRkZFUl9IRUlHSFQsIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgX2dsLmJpbmRSZW5kZXJidWZmZXIoR0xfUkVOREVSQlVGRkVSLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY2FjaGUuZ2V0KEtFWV9SRU5ERVJCVUZGRVJfQVRUQUNIRUQpKSB7XG4gICAgICAgICAgICAgICAgX2dsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKEdMX0ZSQU1FQlVGRkVSLCBHTF9ERVBUSF9BVFRBQ0hNRU5ULCBHTF9SRU5ERVJCVUZGRVIsIHJlbmRlcmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgY2FjaGUucHV0KEtFWV9SRU5ERVJCVUZGRVJfQVRUQUNIRUQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVuYmluZCB0aGUgZnJhbWUgYnVmZmVyIGFmdGVyIHJlbmRlcmluZ1xuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICovXG4gICAgdW5iaW5kOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHN0YXR1cyByZWNvcmQgb24gcmVuZGVyZXJcbiAgICAgICAgcmVuZGVyZXIuX19jdXJyZW50RnJhbWVCdWZmZXIgPSBudWxsO1xuXG4gICAgICAgIHZhciBfZ2wgPSByZW5kZXJlci5nbDtcblxuICAgICAgICBfZ2wuYmluZEZyYW1lYnVmZmVyKEdMX0ZSQU1FQlVGRkVSLCBudWxsKTtcbiAgICAgICAgdGhpcy5fYm91bmRSZW5kZXJlciA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fY2FjaGUudXNlKHJlbmRlcmVyLl9fdWlkX18pO1xuICAgICAgICB2YXIgdmlld3BvcnQgPSB0aGlzLl9jYWNoZS5nZXQoJ3ZpZXdwb3J0Jyk7XG4gICAgICAgIC8vIFJlc2V0IHZpZXdwb3J0O1xuICAgICAgICBpZiAodmlld3BvcnQpIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLnNldFZpZXdwb3J0KHZpZXdwb3J0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXBkYXRlTWlwbWFwKHJlbmRlcmVyKTtcbiAgICB9LFxuXG4gICAgLy8gQmVjYXVzZSB0aGUgZGF0YSBvZiB0ZXh0dXJlIGlzIGNoYW5nZWQgb3ZlciB0aW1lLFxuICAgIC8vIEhlcmUgdXBkYXRlIHRoZSBtaXBtYXBzIG9mIHRleHR1cmUgZWFjaCB0aW1lIGFmdGVyIHJlbmRlcmVkO1xuICAgIHVwZGF0ZU1pcG1hcDogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBfZ2wgPSByZW5kZXJlci5nbDtcbiAgICAgICAgZm9yICh2YXIgYXR0YWNobWVudCBpbiB0aGlzLl90ZXh0dXJlcykge1xuICAgICAgICAgICAgdmFyIG9iaiA9IHRoaXMuX3RleHR1cmVzW2F0dGFjaG1lbnRdO1xuICAgICAgICAgICAgaWYgKG9iaikge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gb2JqLnRleHR1cmU7XG4gICAgICAgICAgICAgICAgLy8gRklYTUUgc29tZSB0ZXh0dXJlIGZvcm1hdCBjYW4ndCBnZW5lcmF0ZSBtaXBtYXBcbiAgICAgICAgICAgICAgICBpZiAoIXRleHR1cmUuTlBPVCAmJiB0ZXh0dXJlLnVzZU1pcG1hcFxuICAgICAgICAgICAgICAgICAgICAmJiB0ZXh0dXJlLm1pbkZpbHRlciA9PT0gVGV4dHVyZS5MSU5FQVJfTUlQTUFQX0xJTkVBUikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGV4dHVyZS50ZXh0dXJlVHlwZSA9PT0gJ3RleHR1cmVDdWJlJyA/IGdsZW51bS5URVhUVVJFX0NVQkVfTUFQIDogZ2xlbnVtLlRFWFRVUkVfMkQ7XG4gICAgICAgICAgICAgICAgICAgIF9nbC5iaW5kVGV4dHVyZSh0YXJnZXQsIHRleHR1cmUuZ2V0V2ViR0xUZXh0dXJlKHJlbmRlcmVyKSk7XG4gICAgICAgICAgICAgICAgICAgIF9nbC5nZW5lcmF0ZU1pcG1hcCh0YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICBfZ2wuYmluZFRleHR1cmUodGFyZ2V0LCBudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG5cbiAgICAvLyAweDhDRDUsIDM2MDUzLCBGUkFNRUJVRkZFUl9DT01QTEVURVxuICAgIC8vIDB4OENENiwgMzYwNTQsIEZSQU1FQlVGRkVSX0lOQ09NUExFVEVfQVRUQUNITUVOVFxuICAgIC8vIDB4OENENywgMzYwNTUsIEZSQU1FQlVGRkVSX0lOQ09NUExFVEVfTUlTU0lOR19BVFRBQ0hNRU5UXG4gICAgLy8gMHg4Q0Q5LCAzNjA1NywgRlJBTUVCVUZGRVJfSU5DT01QTEVURV9ESU1FTlNJT05TXG4gICAgLy8gMHg4Q0RELCAzNjA2MSwgRlJBTUVCVUZGRVJfVU5TVVBQT1JURURcbiAgICBjaGVja1N0YXR1czogZnVuY3Rpb24gKF9nbCkge1xuICAgICAgICByZXR1cm4gX2dsLmNoZWNrRnJhbWVidWZmZXJTdGF0dXMoR0xfRlJBTUVCVUZGRVIpO1xuICAgIH0sXG5cbiAgICBfZ2V0RnJhbWVCdWZmZXJHTDogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBjYWNoZSA9IHRoaXMuX2NhY2hlO1xuICAgICAgICBjYWNoZS51c2UocmVuZGVyZXIuX191aWRfXyk7XG5cbiAgICAgICAgaWYgKGNhY2hlLm1pc3MoS0VZX0ZSQU1FQlVGRkVSKSkge1xuICAgICAgICAgICAgY2FjaGUucHV0KEtFWV9GUkFNRUJVRkZFUiwgcmVuZGVyZXIuZ2wuY3JlYXRlRnJhbWVidWZmZXIoKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2FjaGUuZ2V0KEtFWV9GUkFNRUJVRkZFUik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEF0dGFjaCBhIHRleHR1cmUoUlRUKSB0byB0aGUgZnJhbWVidWZmZXJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlRleHR1cmV9IHRleHR1cmVcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IFthdHRhY2htZW50PWdsLkNPTE9SX0FUVEFDSE1FTlQwXVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gW3RhcmdldD1nbC5URVhUVVJFXzJEXVxuICAgICAqL1xuICAgIGF0dGFjaDogZnVuY3Rpb24gKHRleHR1cmUsIGF0dGFjaG1lbnQsIHRhcmdldCkge1xuXG4gICAgICAgIGlmICghdGV4dHVyZS53aWR0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgdGV4dHVyZSBhdHRhY2hlZCB0byBjb2xvciBidWZmZXIgaXMgbm90IGEgdmFsaWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETyB3aWR0aCBhbmQgaGVpZ2h0IGNoZWNrXG5cbiAgICAgICAgLy8gSWYgdGhlIGRlcHRoX3RleHR1cmUgZXh0ZW5zaW9uIGlzIGVuYWJsZWQsIGRldmVsb3BlcnNcbiAgICAgICAgLy8gQ2FuIGF0dGFjaCBhIGRlcHRoIHRleHR1cmUgdG8gdGhlIGRlcHRoIGJ1ZmZlclxuICAgICAgICAvLyBodHRwOi8vYmxvZy50b2ppY29kZS5jb20vMjAxMi8wNy91c2luZy13ZWJnbGRlcHRodGV4dHVyZS5odG1sXG4gICAgICAgIGF0dGFjaG1lbnQgPSBhdHRhY2htZW50IHx8IEdMX0NPTE9SX0FUVEFDSE1FTlQwO1xuICAgICAgICB0YXJnZXQgPSB0YXJnZXQgfHwgZ2xlbnVtLlRFWFRVUkVfMkQ7XG5cbiAgICAgICAgdmFyIGJvdW5kUmVuZGVyZXIgPSB0aGlzLl9ib3VuZFJlbmRlcmVyO1xuICAgICAgICB2YXIgX2dsID0gYm91bmRSZW5kZXJlciAmJiBib3VuZFJlbmRlcmVyLmdsO1xuICAgICAgICB2YXIgYXR0YWNoZWRUZXh0dXJlcztcblxuICAgICAgICBpZiAoX2dsKSB7XG4gICAgICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLl9jYWNoZTtcbiAgICAgICAgICAgIGNhY2hlLnVzZShib3VuZFJlbmRlcmVyLl9fdWlkX18pO1xuICAgICAgICAgICAgYXR0YWNoZWRUZXh0dXJlcyA9IGNhY2hlLmdldCgnYXR0YWNoZWRfdGV4dHVyZXMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRleHR1cmUgYXR0YWNoZWRcbiAgICAgICAgdmFyIHByZXZpb3VzID0gdGhpcy5fdGV4dHVyZXNbYXR0YWNobWVudF07XG4gICAgICAgIGlmIChwcmV2aW91cyAmJiBwcmV2aW91cy50YXJnZXQgPT09IHRhcmdldFxuICAgICAgICAgICAgJiYgcHJldmlvdXMudGV4dHVyZSA9PT0gdGV4dHVyZVxuICAgICAgICAgICAgJiYgKGF0dGFjaGVkVGV4dHVyZXMgJiYgYXR0YWNoZWRUZXh0dXJlc1thdHRhY2htZW50XSAhPSBudWxsKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjYW5BdHRhY2ggPSB0cnVlO1xuICAgICAgICBpZiAoYm91bmRSZW5kZXJlcikge1xuICAgICAgICAgICAgY2FuQXR0YWNoID0gdGhpcy5fZG9BdHRhY2goYm91bmRSZW5kZXJlciwgdGV4dHVyZSwgYXR0YWNobWVudCwgdGFyZ2V0KTtcbiAgICAgICAgICAgIC8vIFNldCB2aWV3cG9ydCBhZ2FpbiBpbmNhc2UgYXR0YWNoZWQgdG8gZGlmZmVyZW50IHNpemUgdGV4dHVyZXMuXG4gICAgICAgICAgICBpZiAoIXRoaXMudmlld3BvcnQpIHtcbiAgICAgICAgICAgICAgICBib3VuZFJlbmRlcmVyLnNldFZpZXdwb3J0KDAsIDAsIHRleHR1cmUud2lkdGgsIHRleHR1cmUuaGVpZ2h0LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjYW5BdHRhY2gpIHtcbiAgICAgICAgICAgIHRoaXMuX3RleHR1cmVzW2F0dGFjaG1lbnRdID0gdGhpcy5fdGV4dHVyZXNbYXR0YWNobWVudF0gfHwge307XG4gICAgICAgICAgICB0aGlzLl90ZXh0dXJlc1thdHRhY2htZW50XS50ZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgICAgIHRoaXMuX3RleHR1cmVzW2F0dGFjaG1lbnRdLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfZG9BdHRhY2g6IGZ1bmN0aW9uIChyZW5kZXJlciwgdGV4dHVyZSwgYXR0YWNobWVudCwgdGFyZ2V0KSB7XG4gICAgICAgIHZhciBfZ2wgPSByZW5kZXJlci5nbDtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRleHR1cmUgaXMgYWx3YXlzIHVwZGF0ZWRcbiAgICAgICAgLy8gQmVjYXVzZSB0ZXh0dXJlIHdpZHRoIG9yIGhlaWdodCBtYXkgYmUgY2hhbmdlZCBhbmQgaW4gdGhpcyB3ZSBjYW4ndCBiZSBub3RpZmllZFxuICAgICAgICAvLyBGSVhNRSBhd2t3YXJkO1xuICAgICAgICB2YXIgd2ViZ2xUZXh0dXJlID0gdGV4dHVyZS5nZXRXZWJHTFRleHR1cmUocmVuZGVyZXIpO1xuICAgICAgICAvLyBBc3N1bWUgY2FjaGUgaGFzIGJlZW4gdXNlZC5cbiAgICAgICAgdmFyIGF0dGFjaGVkVGV4dHVyZXMgPSB0aGlzLl9jYWNoZS5nZXQoJ2F0dGFjaGVkX3RleHR1cmVzJyk7XG4gICAgICAgIGlmIChhdHRhY2hlZFRleHR1cmVzICYmIGF0dGFjaGVkVGV4dHVyZXNbYXR0YWNobWVudF0pIHtcbiAgICAgICAgICAgIHZhciBvYmogPSBhdHRhY2hlZFRleHR1cmVzW2F0dGFjaG1lbnRdO1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGV4dHVyZSBhbmQgdGFyZ2V0IG5vdCBjaGFuZ2VkXG4gICAgICAgICAgICBpZiAob2JqLnRleHR1cmUgPT09IHRleHR1cmUgJiYgb2JqLnRhcmdldCA9PT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF0dGFjaG1lbnQgPSArYXR0YWNobWVudDtcblxuICAgICAgICB2YXIgY2FuQXR0YWNoID0gdHJ1ZTtcbiAgICAgICAgaWYgKGF0dGFjaG1lbnQgPT09IEdMX0RFUFRIX0FUVEFDSE1FTlQgfHwgYXR0YWNobWVudCA9PT0gZ2xlbnVtLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCkge1xuICAgICAgICAgICAgdmFyIGV4dGVuc2lvbiA9IHJlbmRlcmVyLmdldEdMRXh0ZW5zaW9uKCdXRUJHTF9kZXB0aF90ZXh0dXJlJyk7XG5cbiAgICAgICAgICAgIGlmICghZXh0ZW5zaW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRGVwdGggdGV4dHVyZSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyJyk7XG4gICAgICAgICAgICAgICAgY2FuQXR0YWNoID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGV4dHVyZS5mb3JtYXQgIT09IGdsZW51bS5ERVBUSF9DT01QT05FTlRcbiAgICAgICAgICAgICAgICAmJiB0ZXh0dXJlLmZvcm1hdCAhPT0gZ2xlbnVtLkRFUFRIX1NURU5DSUxcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoZSB0ZXh0dXJlIGF0dGFjaGVkIHRvIGRlcHRoIGJ1ZmZlciBpcyBub3QgYSB2YWxpZC4nKTtcbiAgICAgICAgICAgICAgICBjYW5BdHRhY2ggPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRGlzcG9zZSByZW5kZXIgYnVmZmVyIGNyZWF0ZWQgcHJldmlvdXNcbiAgICAgICAgICAgIGlmIChjYW5BdHRhY2gpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVuZGVyYnVmZmVyID0gdGhpcy5fY2FjaGUuZ2V0KEtFWV9SRU5ERVJCVUZGRVIpO1xuICAgICAgICAgICAgICAgIGlmIChyZW5kZXJidWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgX2dsLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKEdMX0ZSQU1FQlVGRkVSLCBHTF9ERVBUSF9BVFRBQ0hNRU5ULCBHTF9SRU5ERVJCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBfZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKHJlbmRlcmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlLnB1dChLRVlfUkVOREVSQlVGRkVSLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGUucHV0KEtFWV9SRU5ERVJCVUZGRVJfQVRUQUNIRUQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZS5wdXQoS0VZX0RFUFRIVEVYVFVSRV9BVFRBQ0hFRCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNaXBtYXAgbGV2ZWwgY2FuIG9ubHkgYmUgMFxuICAgICAgICBfZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoR0xfRlJBTUVCVUZGRVIsIGF0dGFjaG1lbnQsIHRhcmdldCwgd2ViZ2xUZXh0dXJlLCAwKTtcblxuICAgICAgICBpZiAoIWF0dGFjaGVkVGV4dHVyZXMpIHtcbiAgICAgICAgICAgIGF0dGFjaGVkVGV4dHVyZXMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlLnB1dCgnYXR0YWNoZWRfdGV4dHVyZXMnLCBhdHRhY2hlZFRleHR1cmVzKTtcbiAgICAgICAgfVxuICAgICAgICBhdHRhY2hlZFRleHR1cmVzW2F0dGFjaG1lbnRdID0gYXR0YWNoZWRUZXh0dXJlc1thdHRhY2htZW50XSB8fCB7fTtcbiAgICAgICAgYXR0YWNoZWRUZXh0dXJlc1thdHRhY2htZW50XS50ZXh0dXJlID0gdGV4dHVyZTtcbiAgICAgICAgYXR0YWNoZWRUZXh0dXJlc1thdHRhY2htZW50XS50YXJnZXQgPSB0YXJnZXQ7XG5cbiAgICAgICAgcmV0dXJuIGNhbkF0dGFjaDtcbiAgICB9LFxuXG4gICAgX2RvRGV0YWNoOiBmdW5jdGlvbiAoX2dsLCBhdHRhY2htZW50LCB0YXJnZXQpIHtcbiAgICAgICAgLy8gRGV0YWNoIGEgdGV4dHVyZSBmcm9tIGZyYW1lYnVmZmVyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvV2ViR0wvYmxvYi9tYXN0ZXIvY29uZm9ybWFuY2Utc3VpdGVzLzEuMC4wL2NvbmZvcm1hbmNlL2ZyYW1lYnVmZmVyLXRlc3QuaHRtbCNMMTQ1XG4gICAgICAgIF9nbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChHTF9GUkFNRUJVRkZFUiwgYXR0YWNobWVudCwgdGFyZ2V0LCBudWxsLCAwKTtcblxuICAgICAgICAvLyBBc3N1bWUgY2FjaGUgaGFzIGJlZW4gdXNlZC5cbiAgICAgICAgdmFyIGF0dGFjaGVkVGV4dHVyZXMgPSB0aGlzLl9jYWNoZS5nZXQoJ2F0dGFjaGVkX3RleHR1cmVzJyk7XG4gICAgICAgIGlmIChhdHRhY2hlZFRleHR1cmVzICYmIGF0dGFjaGVkVGV4dHVyZXNbYXR0YWNobWVudF0pIHtcbiAgICAgICAgICAgIGF0dGFjaGVkVGV4dHVyZXNbYXR0YWNobWVudF0gPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGF0dGFjaG1lbnQgPT09IEdMX0RFUFRIX0FUVEFDSE1FTlQgfHwgYXR0YWNobWVudCA9PT0gZ2xlbnVtLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUucHV0KEtFWV9ERVBUSFRFWFRVUkVfQVRUQUNIRUQsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEZXRhY2ggYSB0ZXh0dXJlXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBbYXR0YWNobWVudD1nbC5DT0xPUl9BVFRBQ0hNRU5UMF1cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IFt0YXJnZXQ9Z2wuVEVYVFVSRV8yRF1cbiAgICAgKi9cbiAgICBkZXRhY2g6IGZ1bmN0aW9uIChhdHRhY2htZW50LCB0YXJnZXQpIHtcbiAgICAgICAgLy8gVE9ETyBkZXB0aCBleHRlbnNpb24gY2hlY2sgP1xuICAgICAgICB0aGlzLl90ZXh0dXJlc1thdHRhY2htZW50XSA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLl9ib3VuZFJlbmRlcmVyKSB7XG4gICAgICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLl9jYWNoZTtcbiAgICAgICAgICAgIGNhY2hlLnVzZSh0aGlzLl9ib3VuZFJlbmRlcmVyLl9fdWlkX18pO1xuICAgICAgICAgICAgdGhpcy5fZG9EZXRhY2godGhpcy5fYm91bmRSZW5kZXJlci5nbCwgYXR0YWNobWVudCwgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogRGlzcG9zZVxuICAgICAqIEBwYXJhbSAge1dlYkdMUmVuZGVyaW5nQ29udGV4dH0gX2dsXG4gICAgICovXG4gICAgZGlzcG9zZTogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG5cbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLl9jYWNoZTtcblxuICAgICAgICBjYWNoZS51c2UocmVuZGVyZXIuX191aWRfXyk7XG5cbiAgICAgICAgdmFyIHJlbmRlckJ1ZmZlciA9IGNhY2hlLmdldChLRVlfUkVOREVSQlVGRkVSKTtcbiAgICAgICAgaWYgKHJlbmRlckJ1ZmZlcikge1xuICAgICAgICAgICAgX2dsLmRlbGV0ZVJlbmRlcmJ1ZmZlcihyZW5kZXJCdWZmZXIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmcmFtZUJ1ZmZlciA9IGNhY2hlLmdldChLRVlfRlJBTUVCVUZGRVIpO1xuICAgICAgICBpZiAoZnJhbWVCdWZmZXIpIHtcbiAgICAgICAgICAgIF9nbC5kZWxldGVGcmFtZWJ1ZmZlcihmcmFtZUJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgY2FjaGUuZGVsZXRlQ29udGV4dChyZW5kZXJlci5fX3VpZF9fKTtcblxuICAgICAgICAvLyBDbGVhciBjYWNoZSBmb3IgcmV1c2luZ1xuICAgICAgICB0aGlzLl90ZXh0dXJlcyA9IHt9O1xuXG4gICAgfVxufSk7XG5cbkZyYW1lQnVmZmVyLkRFUFRIX0FUVEFDSE1FTlQgPSBHTF9ERVBUSF9BVFRBQ0hNRU5UO1xuRnJhbWVCdWZmZXIuQ09MT1JfQVRUQUNITUVOVDAgPSBHTF9DT0xPUl9BVFRBQ0hNRU5UMDtcbkZyYW1lQnVmZmVyLlNURU5DSUxfQVRUQUNITUVOVCA9IGdsZW51bS5TVEVOQ0lMX0FUVEFDSE1FTlQ7XG5GcmFtZUJ1ZmZlci5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQgPSBnbGVudW0uREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5UO1xuXG5leHBvcnQgZGVmYXVsdCBGcmFtZUJ1ZmZlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvRnJhbWVCdWZmZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///18\n");

/***/ }),
/* 19 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Quaternion__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__math_BoundingBox__ = __webpack_require__(9);\n\n\n\n\n\n\n\nvar nameId = 0;\n\n/**\n * @constructor clay.Node\n * @extends clay.core.Base\n */\nvar Node = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(/** @lends clay.Node# */{\n    /**\n     * Scene node name\n     * @type {string}\n     */\n    name: '',\n\n    /**\n     * Position relative to its parent node. aka translation.\n     * @type {clay.Vector3}\n     */\n    position: null,\n\n    /**\n     * Rotation relative to its parent node. Represented by a quaternion\n     * @type {clay.Quaternion}\n     */\n    rotation: null,\n\n    /**\n     * Scale relative to its parent node\n     * @type {clay.Vector3}\n     */\n    scale: null,\n\n    /**\n     * Affine transform matrix relative to its root scene.\n     * @type {clay.Matrix4}\n     */\n    worldTransform: null,\n\n    /**\n     * Affine transform matrix relative to its parent node.\n     * Composited with position, rotation and scale.\n     * @type {clay.Matrix4}\n     */\n    localTransform: null,\n\n    /**\n     * If the local transform is update from SRT(scale, rotation, translation, which is position here) each frame\n     * @type {boolean}\n     */\n    autoUpdateLocalTransform: true,\n\n    /**\n     * Parent of current scene node\n     * @type {?clay.Node}\n     * @private\n     */\n    _parent: null,\n    /**\n     * The root scene mounted. Null if it is a isolated node\n     * @type {?clay.Scene}\n     * @private\n     */\n    _scene: null,\n    /**\n     * @type {boolean}\n     * @private\n     */\n    _needsUpdateWorldTransform: true,\n    /**\n     * @type {boolean}\n     * @private\n     */\n    _inIterating: false,\n\n    // Depth for transparent list sorting\n    __depth: 0\n\n}, function () {\n\n    if (!this.name) {\n        this.name = (this.type || 'NODE') + '_' + (nameId++);\n    }\n\n    if (!this.position) {\n        this.position = new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]();\n    }\n    if (!this.rotation) {\n        this.rotation = new __WEBPACK_IMPORTED_MODULE_2__math_Quaternion__[\"a\" /* default */]();\n    }\n    if (!this.scale) {\n        this.scale = new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */](1, 1, 1);\n    }\n\n    this.worldTransform = new __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */]();\n    this.localTransform = new __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */]();\n\n    this._children = [];\n\n},\n/**@lends clay.Node.prototype. */\n{\n\n    /**\n     * @type {?clay.Vector3}\n     * @instance\n     */\n    target: null,\n    /**\n     * If node and its chilren invisible\n     * @type {boolean}\n     * @instance\n     */\n    invisible: false,\n\n    /**\n     * If Node is a skinned mesh\n     * @return {boolean}\n     */\n    isSkinnedMesh: function () {\n        return false;\n    },\n    /**\n     * Return true if it is a renderable scene node, like Mesh and ParticleSystem\n     * @return {boolean}\n     */\n    isRenderable: function () {\n        return false;\n    },\n\n    /**\n     * Set the name of the scene node\n     * @param {string} name\n     */\n    setName: function (name) {\n        var scene = this._scene;\n        if (scene) {\n            var nodeRepository = scene._nodeRepository;\n            delete nodeRepository[this.name];\n            nodeRepository[name] = this;\n        }\n        this.name = name;\n    },\n\n    /**\n     * Add a child node\n     * @param {clay.Node} node\n     */\n    add: function (node) {\n        var originalParent = node._parent;\n        if (originalParent === this) {\n            return;\n        }\n        if (originalParent) {\n            originalParent.remove(node);\n        }\n        node._parent = this;\n        this._children.push(node);\n\n        var scene = this._scene;\n        if (scene && scene !== node.scene) {\n            node.traverse(this._addSelfToScene, this);\n        }\n        // Mark children needs update transform\n        // In case child are remove and added again after parent moved\n        node._needsUpdateWorldTransform = true;\n    },\n\n    /**\n     * Remove the given child scene node\n     * @param {clay.Node} node\n     */\n    remove: function (node) {\n        var children = this._children;\n        var idx = children.indexOf(node);\n        if (idx < 0) {\n            return;\n        }\n\n        children.splice(idx, 1);\n        node._parent = null;\n\n        if (this._scene) {\n            node.traverse(this._removeSelfFromScene, this);\n        }\n    },\n\n    /**\n     * Remove all children\n     */\n    removeAll: function () {\n        var children = this._children;\n\n        for (var idx = 0; idx < children.length; idx++) {\n            children[idx]._parent = null;\n\n            if (this._scene) {\n                children[idx].traverse(this._removeSelfFromScene, this);\n            }\n        }\n\n        this._children = [];\n    },\n\n    /**\n     * Get the scene mounted\n     * @return {clay.Scene}\n     */\n    getScene: function () {\n        return this._scene;\n    },\n\n    /**\n     * Get parent node\n     * @return {clay.Scene}\n     */\n    getParent: function () {\n        return this._parent;\n    },\n\n    _removeSelfFromScene: function (descendant) {\n        descendant._scene.removeFromScene(descendant);\n        descendant._scene = null;\n    },\n\n    _addSelfToScene: function (descendant) {\n        this._scene.addToScene(descendant);\n        descendant._scene = this._scene;\n    },\n\n    /**\n     * Return true if it is ancestor of the given scene node\n     * @param {clay.Node} node\n     */\n    isAncestor: function (node) {\n        var parent = node._parent;\n        while(parent) {\n            if (parent === this) {\n                return true;\n            }\n            parent = parent._parent;\n        }\n        return false;\n    },\n\n    /**\n     * Get a new created array of all children nodes\n     * @return {clay.Node[]}\n     */\n    children: function () {\n        return this._children.slice();\n    },\n\n    /**\n     * Get child scene node at given index.\n     * @param {number} idx\n     * @return {clay.Node}\n     */\n    childAt: function (idx) {\n        return this._children[idx];\n    },\n\n    /**\n     * Get first child with the given name\n     * @param {string} name\n     * @return {clay.Node}\n     */\n    getChildByName: function (name) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].name === name) {\n                return children[i];\n            }\n        }\n    },\n\n    /**\n     * Get first descendant have the given name\n     * @param {string} name\n     * @return {clay.Node}\n     */\n    getDescendantByName: function (name) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (child.name === name) {\n                return child;\n            } else {\n                var res = child.getDescendantByName(name);\n                if (res) {\n                    return res;\n                }\n            }\n        }\n    },\n\n    /**\n     * Query descendant node by path\n     * @param {string} path\n     * @return {clay.Node}\n     * @example\n     *  node.queryNode('root/parent/child');\n     */\n    queryNode: function (path) {\n        if (!path) {\n            return;\n        }\n        // TODO Name have slash ?\n        var pathArr = path.split('/');\n        var current = this;\n        for (var i = 0; i < pathArr.length; i++) {\n            var name = pathArr[i];\n            // Skip empty\n            if (!name) {\n                continue;\n            }\n            var found = false;\n            var children = current._children;\n            for (var j = 0; j < children.length; j++) {\n                var child = children[j];\n                if (child.name === name) {\n                    current = child;\n                    found = true;\n                    break;\n                }\n            }\n            // Early return if not found\n            if (!found) {\n                return;\n            }\n        }\n\n        return current;\n    },\n\n    /**\n     * Get query path, relative to rootNode(default is scene)\n     * @param {clay.Node} [rootNode]\n     * @return {string}\n     */\n    getPath: function (rootNode) {\n        if (!this._parent) {\n            return '/';\n        }\n\n        var current = this._parent;\n        var path = this.name;\n        while (current._parent) {\n            path = current.name + '/' + path;\n            if (current._parent == rootNode) {\n                break;\n            }\n            current = current._parent;\n        }\n        if (!current._parent && rootNode) {\n            return null;\n        }\n        return path;\n    },\n\n    /**\n     * Depth first traverse all its descendant scene nodes.\n     *\n     * **WARN** Don't do `add`, `remove` operation in the callback during traverse.\n     * @param {Function} callback\n     * @param {Node} [context]\n     */\n    traverse: function (callback, context) {\n        callback.call(context, this);\n        var _children = this._children;\n        for(var i = 0, len = _children.length; i < len; i++) {\n            _children[i].traverse(callback, context);\n        }\n    },\n\n    /**\n     * Traverse all children nodes.\n     *\n     * **WARN** DON'T do `add`, `remove` operation in the callback during iteration.\n     *\n     * @param {Function} callback\n     * @param {Node} [context]\n     */\n    eachChild: function (callback, context) {\n        var _children = this._children;\n        for(var i = 0, len = _children.length; i < len; i++) {\n            var child = _children[i];\n            callback.call(context, child, i);\n        }\n    },\n\n    /**\n     * Set the local transform and decompose to SRT\n     * @param {clay.Matrix4} matrix\n     */\n    setLocalTransform: function (matrix) {\n        __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].copy(this.localTransform.array, matrix.array);\n        this.decomposeLocalTransform();\n    },\n\n    /**\n     * Decompose the local transform to SRT\n     */\n    decomposeLocalTransform: function (keepScale) {\n        var scale = !keepScale ? this.scale: null;\n        this.localTransform.decomposeMatrix(scale, this.rotation, this.position);\n    },\n\n    /**\n     * Set the world transform and decompose to SRT\n     * @param {clay.Matrix4} matrix\n     */\n    setWorldTransform: function (matrix) {\n        __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].copy(this.worldTransform.array, matrix.array);\n        this.decomposeWorldTransform();\n    },\n\n    /**\n     * Decompose the world transform to SRT\n     * @function\n     */\n    decomposeWorldTransform: (function () {\n\n        var tmp = __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].create();\n\n        return function (keepScale) {\n            var localTransform = this.localTransform;\n            var worldTransform = this.worldTransform;\n            // Assume world transform is updated\n            if (this._parent) {\n                __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].invert(tmp, this._parent.worldTransform.array);\n                __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].multiply(localTransform.array, tmp, worldTransform.array);\n            } else {\n                __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].copy(localTransform.array, worldTransform.array);\n            }\n            var scale = !keepScale ? this.scale: null;\n            localTransform.decomposeMatrix(scale, this.rotation, this.position);\n        };\n    })(),\n\n    transformNeedsUpdate: function () {\n        return this.position._dirty\n            || this.rotation._dirty\n            || this.scale._dirty;\n    },\n\n    /**\n     * Update local transform from SRT\n     * Notice that local transform will not be updated if _dirty mark of position, rotation, scale is all false\n     */\n    updateLocalTransform: function () {\n        var position = this.position;\n        var rotation = this.rotation;\n        var scale = this.scale;\n\n        if (this.transformNeedsUpdate()) {\n            var m = this.localTransform.array;\n\n            // Transform order, scale->rotation->position\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].fromRotationTranslation(m, rotation.array, position.array);\n\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].scale(m, m, scale.array);\n\n            rotation._dirty = false;\n            scale._dirty = false;\n            position._dirty = false;\n\n            this._needsUpdateWorldTransform = true;\n        }\n    },\n\n    /**\n     * Update world transform, assume its parent world transform have been updated\n     * @private\n     */\n    _updateWorldTransformTopDown: function () {\n        var localTransform = this.localTransform.array;\n        var worldTransform = this.worldTransform.array;\n        if (this._parent) {\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].multiplyAffine(\n                worldTransform,\n                this._parent.worldTransform.array,\n                localTransform\n            );\n        }\n        else {\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].copy(worldTransform, localTransform);\n        }\n    },\n\n    /**\n     * Update world transform before whole scene is updated.\n     */\n    updateWorldTransform: function () {\n        // Find the root node which transform needs update;\n        var rootNodeIsDirty = this;\n        while (rootNodeIsDirty && rootNodeIsDirty.getParent()\n            && rootNodeIsDirty.getParent().transformNeedsUpdate()\n        ) {\n            rootNodeIsDirty = rootNodeIsDirty.getParent();\n        }\n        rootNodeIsDirty.update();\n    },\n\n    /**\n     * Update local transform and world transform recursively\n     * @param {boolean} forceUpdateWorld\n     */\n    update: function (forceUpdateWorld) {\n        if (this.autoUpdateLocalTransform) {\n            this.updateLocalTransform();\n        }\n        else {\n            // Transform is manually setted\n            forceUpdateWorld = true;\n        }\n\n        if (forceUpdateWorld || this._needsUpdateWorldTransform) {\n            this._updateWorldTransformTopDown();\n            forceUpdateWorld = true;\n            this._needsUpdateWorldTransform = false;\n        }\n\n        var children = this._children;\n        for(var i = 0, len = children.length; i < len; i++) {\n            children[i].update(forceUpdateWorld);\n        }\n    },\n\n    /**\n     * Get bounding box of node\n     * @param  {Function} [filter]\n     * @param  {clay.BoundingBox} [out]\n     * @return {clay.BoundingBox}\n     */\n    // TODO Skinning\n    getBoundingBox: (function () {\n        function defaultFilter (el) {\n            return !el.invisible && el.geometry;\n        }\n        var tmpBBox = new __WEBPACK_IMPORTED_MODULE_5__math_BoundingBox__[\"a\" /* default */]();\n        var tmpMat4 = new __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */]();\n        var invWorldTransform = new __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */]();\n        return function (filter, out) {\n            out = out || new __WEBPACK_IMPORTED_MODULE_5__math_BoundingBox__[\"a\" /* default */]();\n            filter = filter || defaultFilter;\n\n            if (this._parent) {\n                __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */].invert(invWorldTransform, this._parent.worldTransform);\n            }\n            else {\n                __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */].identity(invWorldTransform);\n            }\n\n            this.traverse(function (mesh) {\n                if (mesh.geometry && mesh.geometry.boundingBox) {\n                    tmpBBox.copy(mesh.geometry.boundingBox);\n                    __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */].multiply(tmpMat4, invWorldTransform, mesh.worldTransform);\n                    tmpBBox.applyTransform(tmpMat4);\n                    out.union(tmpBBox);\n                }\n            }, this, defaultFilter);\n\n            return out;\n        };\n    })(),\n\n    /**\n     * Get world position, extracted from world transform\n     * @param  {clay.Vector3} [out]\n     * @return {clay.Vector3}\n     */\n    getWorldPosition: function (out) {\n        // PENDING\n        if (this.transformNeedsUpdate()) {\n            this.updateWorldTransform();\n        }\n        var m = this.worldTransform.array;\n        if (out) {\n            var arr = out.array;\n            arr[0] = m[12];\n            arr[1] = m[13];\n            arr[2] = m[14];\n            return out;\n        }\n        else {\n            return new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */](m[12], m[13], m[14]);\n        }\n    },\n\n    /**\n     * Clone a new node\n     * @return {Node}\n     */\n    clone: function () {\n        var node = new this.constructor();\n\n        var children = this._children;\n\n        node.setName(this.name);\n        node.position.copy(this.position);\n        node.rotation.copy(this.rotation);\n        node.scale.copy(this.scale);\n\n        for (var i = 0; i < children.length; i++) {\n            node.add(children[i].clone());\n        }\n\n        return node;\n    },\n\n    /**\n     * Rotate the node around a axis by angle degrees, axis passes through point\n     * @param {clay.Vector3} point Center point\n     * @param {clay.Vector3} axis  Center axis\n     * @param {number}       angle Rotation angle\n     * @see http://docs.unity3d.com/Documentation/ScriptReference/Transform.RotateAround.html\n     * @function\n     */\n    rotateAround: (function () {\n        var v = new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]();\n        var RTMatrix = new __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */]();\n\n        // TODO improve performance\n        return function (point, axis, angle) {\n\n            v.copy(this.position).subtract(point);\n\n            var localTransform = this.localTransform;\n            localTransform.identity();\n            // parent node\n            localTransform.translate(point);\n            localTransform.rotate(angle, axis);\n\n            RTMatrix.fromRotationTranslation(this.rotation, v);\n            localTransform.multiply(RTMatrix);\n            localTransform.scale(this.scale);\n\n            this.decomposeLocalTransform();\n            this._needsUpdateWorldTransform = true;\n        };\n    })(),\n\n    /**\n     * @param {clay.Vector3} target\n     * @param {clay.Vector3} [up]\n     * @see http://www.opengl.org/sdk/docs/man2/xhtml/gluLookAt.xml\n     * @function\n     */\n    lookAt: (function () {\n        var m = new __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */]();\n        return function (target, up) {\n            m.lookAt(this.position, target, up || this.localTransform.y).invert();\n            this.setLocalTransform(m);\n\n            this.target = target;\n        };\n    })()\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Node);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9Ob2RlLmpzP2Y2N2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi9tYXRoL1ZlY3RvcjMnO1xuaW1wb3J0IFF1YXRlcm5pb24gZnJvbSAnLi9tYXRoL1F1YXRlcm5pb24nO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSAnLi9tYXRoL01hdHJpeDQnO1xuaW1wb3J0IG1hdDQgZnJvbSAnLi9nbG1hdHJpeC9tYXQ0JztcbmltcG9ydCBCb3VuZGluZ0JveCBmcm9tICcuL21hdGgvQm91bmRpbmdCb3gnO1xuXG52YXIgbmFtZUlkID0gMDtcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5Ob2RlXG4gKiBAZXh0ZW5kcyBjbGF5LmNvcmUuQmFzZVxuICovXG52YXIgTm9kZSA9IEJhc2UuZXh0ZW5kKC8qKiBAbGVuZHMgY2xheS5Ob2RlIyAqL3tcbiAgICAvKipcbiAgICAgKiBTY2VuZSBub2RlIG5hbWVcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIG5hbWU6ICcnLFxuXG4gICAgLyoqXG4gICAgICogUG9zaXRpb24gcmVsYXRpdmUgdG8gaXRzIHBhcmVudCBub2RlLiBha2EgdHJhbnNsYXRpb24uXG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBwb3NpdGlvbjogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIFJvdGF0aW9uIHJlbGF0aXZlIHRvIGl0cyBwYXJlbnQgbm9kZS4gUmVwcmVzZW50ZWQgYnkgYSBxdWF0ZXJuaW9uXG4gICAgICogQHR5cGUge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICByb3RhdGlvbjogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIFNjYWxlIHJlbGF0aXZlIHRvIGl0cyBwYXJlbnQgbm9kZVxuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgc2NhbGU6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBBZmZpbmUgdHJhbnNmb3JtIG1hdHJpeCByZWxhdGl2ZSB0byBpdHMgcm9vdCBzY2VuZS5cbiAgICAgKiBAdHlwZSB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIHdvcmxkVHJhbnNmb3JtOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogQWZmaW5lIHRyYW5zZm9ybSBtYXRyaXggcmVsYXRpdmUgdG8gaXRzIHBhcmVudCBub2RlLlxuICAgICAqIENvbXBvc2l0ZWQgd2l0aCBwb3NpdGlvbiwgcm90YXRpb24gYW5kIHNjYWxlLlxuICAgICAqIEB0eXBlIHtjbGF5Lk1hdHJpeDR9XG4gICAgICovXG4gICAgbG9jYWxUcmFuc2Zvcm06IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgbG9jYWwgdHJhbnNmb3JtIGlzIHVwZGF0ZSBmcm9tIFNSVChzY2FsZSwgcm90YXRpb24sIHRyYW5zbGF0aW9uLCB3aGljaCBpcyBwb3NpdGlvbiBoZXJlKSBlYWNoIGZyYW1lXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgYXV0b1VwZGF0ZUxvY2FsVHJhbnNmb3JtOiB0cnVlLFxuXG4gICAgLyoqXG4gICAgICogUGFyZW50IG9mIGN1cnJlbnQgc2NlbmUgbm9kZVxuICAgICAqIEB0eXBlIHs/Y2xheS5Ob2RlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3BhcmVudDogbnVsbCxcbiAgICAvKipcbiAgICAgKiBUaGUgcm9vdCBzY2VuZSBtb3VudGVkLiBOdWxsIGlmIGl0IGlzIGEgaXNvbGF0ZWQgbm9kZVxuICAgICAqIEB0eXBlIHs/Y2xheS5TY2VuZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9zY2VuZTogbnVsbCxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9uZWVkc1VwZGF0ZVdvcmxkVHJhbnNmb3JtOiB0cnVlLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2luSXRlcmF0aW5nOiBmYWxzZSxcblxuICAgIC8vIERlcHRoIGZvciB0cmFuc3BhcmVudCBsaXN0IHNvcnRpbmdcbiAgICBfX2RlcHRoOiAwXG5cbn0sIGZ1bmN0aW9uICgpIHtcblxuICAgIGlmICghdGhpcy5uYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9ICh0aGlzLnR5cGUgfHwgJ05PREUnKSArICdfJyArIChuYW1lSWQrKyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjdG9yMygpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMucm90YXRpb24pIHtcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgfVxuICAgIGlmICghdGhpcy5zY2FsZSkge1xuICAgICAgICB0aGlzLnNjYWxlID0gbmV3IFZlY3RvcjMoMSwgMSwgMSk7XG4gICAgfVxuXG4gICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IG5ldyBNYXRyaXg0KCk7XG4gICAgdGhpcy5sb2NhbFRyYW5zZm9ybSA9IG5ldyBNYXRyaXg0KCk7XG5cbiAgICB0aGlzLl9jaGlsZHJlbiA9IFtdO1xuXG59LFxuLyoqQGxlbmRzIGNsYXkuTm9kZS5wcm90b3R5cGUuICovXG57XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7P2NsYXkuVmVjdG9yM31cbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICB0YXJnZXQ6IG51bGwsXG4gICAgLyoqXG4gICAgICogSWYgbm9kZSBhbmQgaXRzIGNoaWxyZW4gaW52aXNpYmxlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgaW52aXNpYmxlOiBmYWxzZSxcblxuICAgIC8qKlxuICAgICAqIElmIE5vZGUgaXMgYSBza2lubmVkIG1lc2hcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGlzU2tpbm5lZE1lc2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRydWUgaWYgaXQgaXMgYSByZW5kZXJhYmxlIHNjZW5lIG5vZGUsIGxpa2UgTWVzaCBhbmQgUGFydGljbGVTeXN0ZW1cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGlzUmVuZGVyYWJsZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbmFtZSBvZiB0aGUgc2NlbmUgbm9kZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICovXG4gICAgc2V0TmFtZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIHNjZW5lID0gdGhpcy5fc2NlbmU7XG4gICAgICAgIGlmIChzY2VuZSkge1xuICAgICAgICAgICAgdmFyIG5vZGVSZXBvc2l0b3J5ID0gc2NlbmUuX25vZGVSZXBvc2l0b3J5O1xuICAgICAgICAgICAgZGVsZXRlIG5vZGVSZXBvc2l0b3J5W3RoaXMubmFtZV07XG4gICAgICAgICAgICBub2RlUmVwb3NpdG9yeVtuYW1lXSA9IHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWRkIGEgY2hpbGQgbm9kZVxuICAgICAqIEBwYXJhbSB7Y2xheS5Ob2RlfSBub2RlXG4gICAgICovXG4gICAgYWRkOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICB2YXIgb3JpZ2luYWxQYXJlbnQgPSBub2RlLl9wYXJlbnQ7XG4gICAgICAgIGlmIChvcmlnaW5hbFBhcmVudCA9PT0gdGhpcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcmlnaW5hbFBhcmVudCkge1xuICAgICAgICAgICAgb3JpZ2luYWxQYXJlbnQucmVtb3ZlKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUuX3BhcmVudCA9IHRoaXM7XG4gICAgICAgIHRoaXMuX2NoaWxkcmVuLnB1c2gobm9kZSk7XG5cbiAgICAgICAgdmFyIHNjZW5lID0gdGhpcy5fc2NlbmU7XG4gICAgICAgIGlmIChzY2VuZSAmJiBzY2VuZSAhPT0gbm9kZS5zY2VuZSkge1xuICAgICAgICAgICAgbm9kZS50cmF2ZXJzZSh0aGlzLl9hZGRTZWxmVG9TY2VuZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFyayBjaGlsZHJlbiBuZWVkcyB1cGRhdGUgdHJhbnNmb3JtXG4gICAgICAgIC8vIEluIGNhc2UgY2hpbGQgYXJlIHJlbW92ZSBhbmQgYWRkZWQgYWdhaW4gYWZ0ZXIgcGFyZW50IG1vdmVkXG4gICAgICAgIG5vZGUuX25lZWRzVXBkYXRlV29ybGRUcmFuc2Zvcm0gPSB0cnVlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNoaWxkIHNjZW5lIG5vZGVcbiAgICAgKiBAcGFyYW0ge2NsYXkuTm9kZX0gbm9kZVxuICAgICAqL1xuICAgIHJlbW92ZTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5fY2hpbGRyZW47XG4gICAgICAgIHZhciBpZHggPSBjaGlsZHJlbi5pbmRleE9mKG5vZGUpO1xuICAgICAgICBpZiAoaWR4IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hpbGRyZW4uc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIG5vZGUuX3BhcmVudCA9IG51bGw7XG5cbiAgICAgICAgaWYgKHRoaXMuX3NjZW5lKSB7XG4gICAgICAgICAgICBub2RlLnRyYXZlcnNlKHRoaXMuX3JlbW92ZVNlbGZGcm9tU2NlbmUsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbGwgY2hpbGRyZW5cbiAgICAgKi9cbiAgICByZW1vdmVBbGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5fY2hpbGRyZW47XG5cbiAgICAgICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgY2hpbGRyZW4ubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICAgICAgY2hpbGRyZW5baWR4XS5fcGFyZW50ID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX3NjZW5lKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW5baWR4XS50cmF2ZXJzZSh0aGlzLl9yZW1vdmVTZWxmRnJvbVNjZW5lLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2NoaWxkcmVuID0gW107XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc2NlbmUgbW91bnRlZFxuICAgICAqIEByZXR1cm4ge2NsYXkuU2NlbmV9XG4gICAgICovXG4gICAgZ2V0U2NlbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgcGFyZW50IG5vZGVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlNjZW5lfVxuICAgICAqL1xuICAgIGdldFBhcmVudDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50O1xuICAgIH0sXG5cbiAgICBfcmVtb3ZlU2VsZkZyb21TY2VuZTogZnVuY3Rpb24gKGRlc2NlbmRhbnQpIHtcbiAgICAgICAgZGVzY2VuZGFudC5fc2NlbmUucmVtb3ZlRnJvbVNjZW5lKGRlc2NlbmRhbnQpO1xuICAgICAgICBkZXNjZW5kYW50Ll9zY2VuZSA9IG51bGw7XG4gICAgfSxcblxuICAgIF9hZGRTZWxmVG9TY2VuZTogZnVuY3Rpb24gKGRlc2NlbmRhbnQpIHtcbiAgICAgICAgdGhpcy5fc2NlbmUuYWRkVG9TY2VuZShkZXNjZW5kYW50KTtcbiAgICAgICAgZGVzY2VuZGFudC5fc2NlbmUgPSB0aGlzLl9zY2VuZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRydWUgaWYgaXQgaXMgYW5jZXN0b3Igb2YgdGhlIGdpdmVuIHNjZW5lIG5vZGVcbiAgICAgKiBAcGFyYW0ge2NsYXkuTm9kZX0gbm9kZVxuICAgICAqL1xuICAgIGlzQW5jZXN0b3I6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSBub2RlLl9wYXJlbnQ7XG4gICAgICAgIHdoaWxlKHBhcmVudCkge1xuICAgICAgICAgICAgaWYgKHBhcmVudCA9PT0gdGhpcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50Ll9wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYSBuZXcgY3JlYXRlZCBhcnJheSBvZiBhbGwgY2hpbGRyZW4gbm9kZXNcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk5vZGVbXX1cbiAgICAgKi9cbiAgICBjaGlsZHJlbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW4uc2xpY2UoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGNoaWxkIHNjZW5lIG5vZGUgYXQgZ2l2ZW4gaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGlkeFxuICAgICAqIEByZXR1cm4ge2NsYXkuTm9kZX1cbiAgICAgKi9cbiAgICBjaGlsZEF0OiBmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbltpZHhdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgZmlyc3QgY2hpbGQgd2l0aCB0aGUgZ2l2ZW4gbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHJldHVybiB7Y2xheS5Ob2RlfVxuICAgICAqL1xuICAgIGdldENoaWxkQnlOYW1lOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLl9jaGlsZHJlbjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGNoaWxkcmVuW2ldLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGRyZW5baV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGZpcnN0IGRlc2NlbmRhbnQgaGF2ZSB0aGUgZ2l2ZW4gbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHJldHVybiB7Y2xheS5Ob2RlfVxuICAgICAqL1xuICAgIGdldERlc2NlbmRhbnRCeU5hbWU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuX2NoaWxkcmVuO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzID0gY2hpbGQuZ2V0RGVzY2VuZGFudEJ5TmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFF1ZXJ5IGRlc2NlbmRhbnQgbm9kZSBieSBwYXRoXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk5vZGV9XG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgbm9kZS5xdWVyeU5vZGUoJ3Jvb3QvcGFyZW50L2NoaWxkJyk7XG4gICAgICovXG4gICAgcXVlcnlOb2RlOiBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICBpZiAoIXBhdGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPIE5hbWUgaGF2ZSBzbGFzaCA/XG4gICAgICAgIHZhciBwYXRoQXJyID0gcGF0aC5zcGxpdCgnLycpO1xuICAgICAgICB2YXIgY3VycmVudCA9IHRoaXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aEFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBwYXRoQXJyW2ldO1xuICAgICAgICAgICAgLy8gU2tpcCBlbXB0eVxuICAgICAgICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IGN1cnJlbnQuX2NoaWxkcmVuO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjaGlsZHJlbi5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2pdO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBFYXJseSByZXR1cm4gaWYgbm90IGZvdW5kXG4gICAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBxdWVyeSBwYXRoLCByZWxhdGl2ZSB0byByb290Tm9kZShkZWZhdWx0IGlzIHNjZW5lKVxuICAgICAqIEBwYXJhbSB7Y2xheS5Ob2RlfSBbcm9vdE5vZGVdXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIGdldFBhdGg6IGZ1bmN0aW9uIChyb290Tm9kZSkge1xuICAgICAgICBpZiAoIXRoaXMuX3BhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuICcvJztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5fcGFyZW50O1xuICAgICAgICB2YXIgcGF0aCA9IHRoaXMubmFtZTtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQuX3BhcmVudCkge1xuICAgICAgICAgICAgcGF0aCA9IGN1cnJlbnQubmFtZSArICcvJyArIHBhdGg7XG4gICAgICAgICAgICBpZiAoY3VycmVudC5fcGFyZW50ID09IHJvb3ROb2RlKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5fcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmICghY3VycmVudC5fcGFyZW50ICYmIHJvb3ROb2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGVwdGggZmlyc3QgdHJhdmVyc2UgYWxsIGl0cyBkZXNjZW5kYW50IHNjZW5lIG5vZGVzLlxuICAgICAqXG4gICAgICogKipXQVJOKiogRG9uJ3QgZG8gYGFkZGAsIGByZW1vdmVgIG9wZXJhdGlvbiBpbiB0aGUgY2FsbGJhY2sgZHVyaW5nIHRyYXZlcnNlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICogQHBhcmFtIHtOb2RlfSBbY29udGV4dF1cbiAgICAgKi9cbiAgICB0cmF2ZXJzZTogZnVuY3Rpb24gKGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgICAgIGNhbGxiYWNrLmNhbGwoY29udGV4dCwgdGhpcyk7XG4gICAgICAgIHZhciBfY2hpbGRyZW4gPSB0aGlzLl9jaGlsZHJlbjtcbiAgICAgICAgZm9yKHZhciBpID0gMCwgbGVuID0gX2NoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBfY2hpbGRyZW5baV0udHJhdmVyc2UoY2FsbGJhY2ssIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRyYXZlcnNlIGFsbCBjaGlsZHJlbiBub2Rlcy5cbiAgICAgKlxuICAgICAqICoqV0FSTioqIERPTidUIGRvIGBhZGRgLCBgcmVtb3ZlYCBvcGVyYXRpb24gaW4gdGhlIGNhbGxiYWNrIGR1cmluZyBpdGVyYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAqIEBwYXJhbSB7Tm9kZX0gW2NvbnRleHRdXG4gICAgICovXG4gICAgZWFjaENoaWxkOiBmdW5jdGlvbiAoY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICAgICAgdmFyIF9jaGlsZHJlbiA9IHRoaXMuX2NoaWxkcmVuO1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBfY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IF9jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY29udGV4dCwgY2hpbGQsIGkpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbG9jYWwgdHJhbnNmb3JtIGFuZCBkZWNvbXBvc2UgdG8gU1JUXG4gICAgICogQHBhcmFtIHtjbGF5Lk1hdHJpeDR9IG1hdHJpeFxuICAgICAqL1xuICAgIHNldExvY2FsVHJhbnNmb3JtOiBmdW5jdGlvbiAobWF0cml4KSB7XG4gICAgICAgIG1hdDQuY29weSh0aGlzLmxvY2FsVHJhbnNmb3JtLmFycmF5LCBtYXRyaXguYXJyYXkpO1xuICAgICAgICB0aGlzLmRlY29tcG9zZUxvY2FsVHJhbnNmb3JtKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERlY29tcG9zZSB0aGUgbG9jYWwgdHJhbnNmb3JtIHRvIFNSVFxuICAgICAqL1xuICAgIGRlY29tcG9zZUxvY2FsVHJhbnNmb3JtOiBmdW5jdGlvbiAoa2VlcFNjYWxlKSB7XG4gICAgICAgIHZhciBzY2FsZSA9ICFrZWVwU2NhbGUgPyB0aGlzLnNjYWxlOiBudWxsO1xuICAgICAgICB0aGlzLmxvY2FsVHJhbnNmb3JtLmRlY29tcG9zZU1hdHJpeChzY2FsZSwgdGhpcy5yb3RhdGlvbiwgdGhpcy5wb3NpdGlvbik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgd29ybGQgdHJhbnNmb3JtIGFuZCBkZWNvbXBvc2UgdG8gU1JUXG4gICAgICogQHBhcmFtIHtjbGF5Lk1hdHJpeDR9IG1hdHJpeFxuICAgICAqL1xuICAgIHNldFdvcmxkVHJhbnNmb3JtOiBmdW5jdGlvbiAobWF0cml4KSB7XG4gICAgICAgIG1hdDQuY29weSh0aGlzLndvcmxkVHJhbnNmb3JtLmFycmF5LCBtYXRyaXguYXJyYXkpO1xuICAgICAgICB0aGlzLmRlY29tcG9zZVdvcmxkVHJhbnNmb3JtKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERlY29tcG9zZSB0aGUgd29ybGQgdHJhbnNmb3JtIHRvIFNSVFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqL1xuICAgIGRlY29tcG9zZVdvcmxkVHJhbnNmb3JtOiAoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciB0bXAgPSBtYXQ0LmNyZWF0ZSgpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoa2VlcFNjYWxlKSB7XG4gICAgICAgICAgICB2YXIgbG9jYWxUcmFuc2Zvcm0gPSB0aGlzLmxvY2FsVHJhbnNmb3JtO1xuICAgICAgICAgICAgdmFyIHdvcmxkVHJhbnNmb3JtID0gdGhpcy53b3JsZFRyYW5zZm9ybTtcbiAgICAgICAgICAgIC8vIEFzc3VtZSB3b3JsZCB0cmFuc2Zvcm0gaXMgdXBkYXRlZFxuICAgICAgICAgICAgaWYgKHRoaXMuX3BhcmVudCkge1xuICAgICAgICAgICAgICAgIG1hdDQuaW52ZXJ0KHRtcCwgdGhpcy5fcGFyZW50LndvcmxkVHJhbnNmb3JtLmFycmF5KTtcbiAgICAgICAgICAgICAgICBtYXQ0Lm11bHRpcGx5KGxvY2FsVHJhbnNmb3JtLmFycmF5LCB0bXAsIHdvcmxkVHJhbnNmb3JtLmFycmF5KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWF0NC5jb3B5KGxvY2FsVHJhbnNmb3JtLmFycmF5LCB3b3JsZFRyYW5zZm9ybS5hcnJheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc2NhbGUgPSAha2VlcFNjYWxlID8gdGhpcy5zY2FsZTogbnVsbDtcbiAgICAgICAgICAgIGxvY2FsVHJhbnNmb3JtLmRlY29tcG9zZU1hdHJpeChzY2FsZSwgdGhpcy5yb3RhdGlvbiwgdGhpcy5wb3NpdGlvbik7XG4gICAgICAgIH07XG4gICAgfSkoKSxcblxuICAgIHRyYW5zZm9ybU5lZWRzVXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLl9kaXJ0eVxuICAgICAgICAgICAgfHwgdGhpcy5yb3RhdGlvbi5fZGlydHlcbiAgICAgICAgICAgIHx8IHRoaXMuc2NhbGUuX2RpcnR5O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgbG9jYWwgdHJhbnNmb3JtIGZyb20gU1JUXG4gICAgICogTm90aWNlIHRoYXQgbG9jYWwgdHJhbnNmb3JtIHdpbGwgbm90IGJlIHVwZGF0ZWQgaWYgX2RpcnR5IG1hcmsgb2YgcG9zaXRpb24sIHJvdGF0aW9uLCBzY2FsZSBpcyBhbGwgZmFsc2VcbiAgICAgKi9cbiAgICB1cGRhdGVMb2NhbFRyYW5zZm9ybTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uO1xuICAgICAgICB2YXIgcm90YXRpb24gPSB0aGlzLnJvdGF0aW9uO1xuICAgICAgICB2YXIgc2NhbGUgPSB0aGlzLnNjYWxlO1xuXG4gICAgICAgIGlmICh0aGlzLnRyYW5zZm9ybU5lZWRzVXBkYXRlKCkpIHtcbiAgICAgICAgICAgIHZhciBtID0gdGhpcy5sb2NhbFRyYW5zZm9ybS5hcnJheTtcblxuICAgICAgICAgICAgLy8gVHJhbnNmb3JtIG9yZGVyLCBzY2FsZS0+cm90YXRpb24tPnBvc2l0aW9uXG4gICAgICAgICAgICBtYXQ0LmZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKG0sIHJvdGF0aW9uLmFycmF5LCBwb3NpdGlvbi5hcnJheSk7XG5cbiAgICAgICAgICAgIG1hdDQuc2NhbGUobSwgbSwgc2NhbGUuYXJyYXkpO1xuXG4gICAgICAgICAgICByb3RhdGlvbi5fZGlydHkgPSBmYWxzZTtcbiAgICAgICAgICAgIHNjYWxlLl9kaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgICAgcG9zaXRpb24uX2RpcnR5ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuX25lZWRzVXBkYXRlV29ybGRUcmFuc2Zvcm0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB3b3JsZCB0cmFuc2Zvcm0sIGFzc3VtZSBpdHMgcGFyZW50IHdvcmxkIHRyYW5zZm9ybSBoYXZlIGJlZW4gdXBkYXRlZFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3VwZGF0ZVdvcmxkVHJhbnNmb3JtVG9wRG93bjogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbG9jYWxUcmFuc2Zvcm0gPSB0aGlzLmxvY2FsVHJhbnNmb3JtLmFycmF5O1xuICAgICAgICB2YXIgd29ybGRUcmFuc2Zvcm0gPSB0aGlzLndvcmxkVHJhbnNmb3JtLmFycmF5O1xuICAgICAgICBpZiAodGhpcy5fcGFyZW50KSB7XG4gICAgICAgICAgICBtYXQ0Lm11bHRpcGx5QWZmaW5lKFxuICAgICAgICAgICAgICAgIHdvcmxkVHJhbnNmb3JtLFxuICAgICAgICAgICAgICAgIHRoaXMuX3BhcmVudC53b3JsZFRyYW5zZm9ybS5hcnJheSxcbiAgICAgICAgICAgICAgICBsb2NhbFRyYW5zZm9ybVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1hdDQuY29weSh3b3JsZFRyYW5zZm9ybSwgbG9jYWxUcmFuc2Zvcm0pO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB3b3JsZCB0cmFuc2Zvcm0gYmVmb3JlIHdob2xlIHNjZW5lIGlzIHVwZGF0ZWQuXG4gICAgICovXG4gICAgdXBkYXRlV29ybGRUcmFuc2Zvcm06IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gRmluZCB0aGUgcm9vdCBub2RlIHdoaWNoIHRyYW5zZm9ybSBuZWVkcyB1cGRhdGU7XG4gICAgICAgIHZhciByb290Tm9kZUlzRGlydHkgPSB0aGlzO1xuICAgICAgICB3aGlsZSAocm9vdE5vZGVJc0RpcnR5ICYmIHJvb3ROb2RlSXNEaXJ0eS5nZXRQYXJlbnQoKVxuICAgICAgICAgICAgJiYgcm9vdE5vZGVJc0RpcnR5LmdldFBhcmVudCgpLnRyYW5zZm9ybU5lZWRzVXBkYXRlKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByb290Tm9kZUlzRGlydHkgPSByb290Tm9kZUlzRGlydHkuZ2V0UGFyZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgcm9vdE5vZGVJc0RpcnR5LnVwZGF0ZSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgbG9jYWwgdHJhbnNmb3JtIGFuZCB3b3JsZCB0cmFuc2Zvcm0gcmVjdXJzaXZlbHlcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZvcmNlVXBkYXRlV29ybGRcbiAgICAgKi9cbiAgICB1cGRhdGU6IGZ1bmN0aW9uIChmb3JjZVVwZGF0ZVdvcmxkKSB7XG4gICAgICAgIGlmICh0aGlzLmF1dG9VcGRhdGVMb2NhbFRyYW5zZm9ybSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVMb2NhbFRyYW5zZm9ybSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gVHJhbnNmb3JtIGlzIG1hbnVhbGx5IHNldHRlZFxuICAgICAgICAgICAgZm9yY2VVcGRhdGVXb3JsZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm9yY2VVcGRhdGVXb3JsZCB8fCB0aGlzLl9uZWVkc1VwZGF0ZVdvcmxkVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVXb3JsZFRyYW5zZm9ybVRvcERvd24oKTtcbiAgICAgICAgICAgIGZvcmNlVXBkYXRlV29ybGQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fbmVlZHNVcGRhdGVXb3JsZFRyYW5zZm9ybSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5fY2hpbGRyZW47XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGxlbiA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjaGlsZHJlbltpXS51cGRhdGUoZm9yY2VVcGRhdGVXb3JsZCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGJvdW5kaW5nIGJveCBvZiBub2RlXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IFtmaWx0ZXJdXG4gICAgICogQHBhcmFtICB7Y2xheS5Cb3VuZGluZ0JveH0gW291dF1cbiAgICAgKiBAcmV0dXJuIHtjbGF5LkJvdW5kaW5nQm94fVxuICAgICAqL1xuICAgIC8vIFRPRE8gU2tpbm5pbmdcbiAgICBnZXRCb3VuZGluZ0JveDogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gZGVmYXVsdEZpbHRlciAoZWwpIHtcbiAgICAgICAgICAgIHJldHVybiAhZWwuaW52aXNpYmxlICYmIGVsLmdlb21ldHJ5O1xuICAgICAgICB9XG4gICAgICAgIHZhciB0bXBCQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgICAgIHZhciB0bXBNYXQ0ID0gbmV3IE1hdHJpeDQoKTtcbiAgICAgICAgdmFyIGludldvcmxkVHJhbnNmb3JtID0gbmV3IE1hdHJpeDQoKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmaWx0ZXIsIG91dCkge1xuICAgICAgICAgICAgb3V0ID0gb3V0IHx8IG5ldyBCb3VuZGluZ0JveCgpO1xuICAgICAgICAgICAgZmlsdGVyID0gZmlsdGVyIHx8IGRlZmF1bHRGaWx0ZXI7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBNYXRyaXg0LmludmVydChpbnZXb3JsZFRyYW5zZm9ybSwgdGhpcy5fcGFyZW50LndvcmxkVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIE1hdHJpeDQuaWRlbnRpdHkoaW52V29ybGRUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRyYXZlcnNlKGZ1bmN0aW9uIChtZXNoKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1lc2guZ2VvbWV0cnkgJiYgbWVzaC5nZW9tZXRyeS5ib3VuZGluZ0JveCkge1xuICAgICAgICAgICAgICAgICAgICB0bXBCQm94LmNvcHkobWVzaC5nZW9tZXRyeS5ib3VuZGluZ0JveCk7XG4gICAgICAgICAgICAgICAgICAgIE1hdHJpeDQubXVsdGlwbHkodG1wTWF0NCwgaW52V29ybGRUcmFuc2Zvcm0sIG1lc2gud29ybGRUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgICAgICB0bXBCQm94LmFwcGx5VHJhbnNmb3JtKHRtcE1hdDQpO1xuICAgICAgICAgICAgICAgICAgICBvdXQudW5pb24odG1wQkJveCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdGhpcywgZGVmYXVsdEZpbHRlcik7XG5cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgfSkoKSxcblxuICAgIC8qKlxuICAgICAqIEdldCB3b3JsZCBwb3NpdGlvbiwgZXh0cmFjdGVkIGZyb20gd29ybGQgdHJhbnNmb3JtXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBbb3V0XVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBnZXRXb3JsZFBvc2l0aW9uOiBmdW5jdGlvbiAob3V0KSB7XG4gICAgICAgIC8vIFBFTkRJTkdcbiAgICAgICAgaWYgKHRoaXMudHJhbnNmb3JtTmVlZHNVcGRhdGUoKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVXb3JsZFRyYW5zZm9ybSgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtID0gdGhpcy53b3JsZFRyYW5zZm9ybS5hcnJheTtcbiAgICAgICAgaWYgKG91dCkge1xuICAgICAgICAgICAgdmFyIGFyciA9IG91dC5hcnJheTtcbiAgICAgICAgICAgIGFyclswXSA9IG1bMTJdO1xuICAgICAgICAgICAgYXJyWzFdID0gbVsxM107XG4gICAgICAgICAgICBhcnJbMl0gPSBtWzE0XTtcbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjMobVsxMl0sIG1bMTNdLCBtWzE0XSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xvbmUgYSBuZXcgbm9kZVxuICAgICAqIEByZXR1cm4ge05vZGV9XG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5vZGUgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpO1xuXG4gICAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuX2NoaWxkcmVuO1xuXG4gICAgICAgIG5vZGUuc2V0TmFtZSh0aGlzLm5hbWUpO1xuICAgICAgICBub2RlLnBvc2l0aW9uLmNvcHkodGhpcy5wb3NpdGlvbik7XG4gICAgICAgIG5vZGUucm90YXRpb24uY29weSh0aGlzLnJvdGF0aW9uKTtcbiAgICAgICAgbm9kZS5zY2FsZS5jb3B5KHRoaXMuc2NhbGUpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG5vZGUuYWRkKGNoaWxkcmVuW2ldLmNsb25lKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSB0aGUgbm9kZSBhcm91bmQgYSBheGlzIGJ5IGFuZ2xlIGRlZ3JlZXMsIGF4aXMgcGFzc2VzIHRocm91Z2ggcG9pbnRcbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gcG9pbnQgQ2VudGVyIHBvaW50XG4gICAgICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IGF4aXMgIENlbnRlciBheGlzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9ICAgICAgIGFuZ2xlIFJvdGF0aW9uIGFuZ2xlXG4gICAgICogQHNlZSBodHRwOi8vZG9jcy51bml0eTNkLmNvbS9Eb2N1bWVudGF0aW9uL1NjcmlwdFJlZmVyZW5jZS9UcmFuc2Zvcm0uUm90YXRlQXJvdW5kLmh0bWxcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKi9cbiAgICByb3RhdGVBcm91bmQ6IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2ID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgdmFyIFJUTWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcblxuICAgICAgICAvLyBUT0RPIGltcHJvdmUgcGVyZm9ybWFuY2VcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChwb2ludCwgYXhpcywgYW5nbGUpIHtcblxuICAgICAgICAgICAgdi5jb3B5KHRoaXMucG9zaXRpb24pLnN1YnRyYWN0KHBvaW50KTtcblxuICAgICAgICAgICAgdmFyIGxvY2FsVHJhbnNmb3JtID0gdGhpcy5sb2NhbFRyYW5zZm9ybTtcbiAgICAgICAgICAgIGxvY2FsVHJhbnNmb3JtLmlkZW50aXR5KCk7XG4gICAgICAgICAgICAvLyBwYXJlbnQgbm9kZVxuICAgICAgICAgICAgbG9jYWxUcmFuc2Zvcm0udHJhbnNsYXRlKHBvaW50KTtcbiAgICAgICAgICAgIGxvY2FsVHJhbnNmb3JtLnJvdGF0ZShhbmdsZSwgYXhpcyk7XG5cbiAgICAgICAgICAgIFJUTWF0cml4LmZyb21Sb3RhdGlvblRyYW5zbGF0aW9uKHRoaXMucm90YXRpb24sIHYpO1xuICAgICAgICAgICAgbG9jYWxUcmFuc2Zvcm0ubXVsdGlwbHkoUlRNYXRyaXgpO1xuICAgICAgICAgICAgbG9jYWxUcmFuc2Zvcm0uc2NhbGUodGhpcy5zY2FsZSk7XG5cbiAgICAgICAgICAgIHRoaXMuZGVjb21wb3NlTG9jYWxUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIHRoaXMuX25lZWRzVXBkYXRlV29ybGRUcmFuc2Zvcm0gPSB0cnVlO1xuICAgICAgICB9O1xuICAgIH0pKCksXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gdGFyZ2V0XG4gICAgICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IFt1cF1cbiAgICAgKiBAc2VlIGh0dHA6Ly93d3cub3BlbmdsLm9yZy9zZGsvZG9jcy9tYW4yL3hodG1sL2dsdUxvb2tBdC54bWxcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKi9cbiAgICBsb29rQXQ6IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtID0gbmV3IE1hdHJpeDQoKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIHVwKSB7XG4gICAgICAgICAgICBtLmxvb2tBdCh0aGlzLnBvc2l0aW9uLCB0YXJnZXQsIHVwIHx8IHRoaXMubG9jYWxUcmFuc2Zvcm0ueSkuaW52ZXJ0KCk7XG4gICAgICAgICAgICB0aGlzLnNldExvY2FsVHJhbnNmb3JtKG0pO1xuXG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgfTtcbiAgICB9KSgpXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgTm9kZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvTm9kZS5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///19\n");

/***/ }),
/* 20 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Camera__ = __webpack_require__(37);\n\n\n/**\n * @constructor clay.camera.Perspective\n * @extends clay.Camera\n */\nvar Perspective = __WEBPACK_IMPORTED_MODULE_0__Camera__[\"a\" /* default */].extend(/** @lends clay.camera.Perspective# */{\n    /**\n     * Vertical field of view in degrees\n     * @type {number}\n     */\n    fov: 50,\n    /**\n     * Aspect ratio, typically viewport width / height\n     * @type {number}\n     */\n    aspect: 1,\n    /**\n     * Near bound of the frustum\n     * @type {number}\n     */\n    near: 0.1,\n    /**\n     * Far bound of the frustum\n     * @type {number}\n     */\n    far: 2000\n},\n/** @lends clay.camera.Perspective.prototype */\n{\n\n    updateProjectionMatrix: function() {\n        var rad = this.fov / 180 * Math.PI;\n        this.projectionMatrix.perspective(rad, this.aspect, this.near, this.far);\n    },\n    decomposeProjectionMatrix: function () {\n        var m = this.projectionMatrix.array;\n        var rad = Math.atan(1 / m[5]) * 2;\n        this.fov = rad / Math.PI * 180;\n        this.aspect = m[5] / m[0];\n        this.near = m[14] / (m[10] - 1);\n        this.far = m[14] / (m[10] + 1);\n    },\n    /**\n     * @return {clay.camera.Perspective}\n     */\n    clone: function() {\n        var camera = __WEBPACK_IMPORTED_MODULE_0__Camera__[\"a\" /* default */].prototype.clone.call(this);\n        camera.fov = this.fov;\n        camera.aspect = this.aspect;\n        camera.near = this.near;\n        camera.far = this.far;\n\n        return camera;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Perspective);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jYW1lcmEvUGVyc3BlY3RpdmUuanM/YzU5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2FtZXJhIGZyb20gJy4uL0NhbWVyYSc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuY2FtZXJhLlBlcnNwZWN0aXZlXG4gKiBAZXh0ZW5kcyBjbGF5LkNhbWVyYVxuICovXG52YXIgUGVyc3BlY3RpdmUgPSBDYW1lcmEuZXh0ZW5kKC8qKiBAbGVuZHMgY2xheS5jYW1lcmEuUGVyc3BlY3RpdmUjICove1xuICAgIC8qKlxuICAgICAqIFZlcnRpY2FsIGZpZWxkIG9mIHZpZXcgaW4gZGVncmVlc1xuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZm92OiA1MCxcbiAgICAvKipcbiAgICAgKiBBc3BlY3QgcmF0aW8sIHR5cGljYWxseSB2aWV3cG9ydCB3aWR0aCAvIGhlaWdodFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgYXNwZWN0OiAxLFxuICAgIC8qKlxuICAgICAqIE5lYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIG5lYXI6IDAuMSxcbiAgICAvKipcbiAgICAgKiBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGZhcjogMjAwMFxufSxcbi8qKiBAbGVuZHMgY2xheS5jYW1lcmEuUGVyc3BlY3RpdmUucHJvdG90eXBlICovXG57XG5cbiAgICB1cGRhdGVQcm9qZWN0aW9uTWF0cml4OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJhZCA9IHRoaXMuZm92IC8gMTgwICogTWF0aC5QSTtcbiAgICAgICAgdGhpcy5wcm9qZWN0aW9uTWF0cml4LnBlcnNwZWN0aXZlKHJhZCwgdGhpcy5hc3BlY3QsIHRoaXMubmVhciwgdGhpcy5mYXIpO1xuICAgIH0sXG4gICAgZGVjb21wb3NlUHJvamVjdGlvbk1hdHJpeDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbSA9IHRoaXMucHJvamVjdGlvbk1hdHJpeC5hcnJheTtcbiAgICAgICAgdmFyIHJhZCA9IE1hdGguYXRhbigxIC8gbVs1XSkgKiAyO1xuICAgICAgICB0aGlzLmZvdiA9IHJhZCAvIE1hdGguUEkgKiAxODA7XG4gICAgICAgIHRoaXMuYXNwZWN0ID0gbVs1XSAvIG1bMF07XG4gICAgICAgIHRoaXMubmVhciA9IG1bMTRdIC8gKG1bMTBdIC0gMSk7XG4gICAgICAgIHRoaXMuZmFyID0gbVsxNF0gLyAobVsxMF0gKyAxKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2NsYXkuY2FtZXJhLlBlcnNwZWN0aXZlfVxuICAgICAqL1xuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNhbWVyYSA9IENhbWVyYS5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTtcbiAgICAgICAgY2FtZXJhLmZvdiA9IHRoaXMuZm92O1xuICAgICAgICBjYW1lcmEuYXNwZWN0ID0gdGhpcy5hc3BlY3Q7XG4gICAgICAgIGNhbWVyYS5uZWFyID0gdGhpcy5uZWFyO1xuICAgICAgICBjYW1lcmEuZmFyID0gdGhpcy5mYXI7XG5cbiAgICAgICAgcmV0dXJuIGNhbWVyYTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgUGVyc3BlY3RpdmU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2NhbWVyYS9QZXJzcGVjdGl2ZS5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///20\n");

/***/ }),
/* 21 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__color__ = __webpack_require__(67);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__color__[\"e\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return __WEBPACK_IMPORTED_MODULE_0__color__[\"g\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return __WEBPACK_IMPORTED_MODULE_0__color__[\"f\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lab__ = __webpack_require__(225);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return __WEBPACK_IMPORTED_MODULE_1__lab__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return __WEBPACK_IMPORTED_MODULE_1__lab__[\"b\"]; });\n/* unused harmony reexport lch */\n/* unused harmony reexport gray */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cubehelix__ = __webpack_require__(226);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_2__cubehelix__[\"a\"]; });\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2luZGV4LmpzP2RkNTYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHtkZWZhdWx0IGFzIGNvbG9yLCByZ2IsIGhzbH0gZnJvbSBcIi4vY29sb3JcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBsYWIsIGhjbCwgbGNoLCBncmF5fSBmcm9tIFwiLi9sYWJcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBjdWJlaGVsaXh9IGZyb20gXCIuL2N1YmVoZWxpeFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///21\n");

/***/ }),
/* 22 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return GLMAT_EPSILON; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return GLMAT_ARRAY_TYPE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return GLMAT_RANDOM; });\n\nvar GLMAT_EPSILON = 0.000001;\n\n// Use Array instead of Float32Array. It seems to be much faster and higher precision.\nvar GLMAT_ARRAY_TYPE = Array;\n// if(!GLMAT_ARRAY_TYPE) {\n//     GLMAT_ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\n// }\n\nvar GLMAT_RANDOM = Math.random;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nbG1hdHJpeC9jb21tb24uanM/N2E2OSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCB2YXIgR0xNQVRfRVBTSUxPTiA9IDAuMDAwMDAxO1xuXG4vLyBVc2UgQXJyYXkgaW5zdGVhZCBvZiBGbG9hdDMyQXJyYXkuIEl0IHNlZW1zIHRvIGJlIG11Y2ggZmFzdGVyIGFuZCBoaWdoZXIgcHJlY2lzaW9uLlxuZXhwb3J0IHZhciBHTE1BVF9BUlJBWV9UWVBFID0gQXJyYXk7XG4vLyBpZighR0xNQVRfQVJSQVlfVFlQRSkge1xuLy8gICAgIEdMTUFUX0FSUkFZX1RZUEUgPSAodHlwZW9mIEZsb2F0MzJBcnJheSAhPT0gJ3VuZGVmaW5lZCcpID8gRmxvYXQzMkFycmF5IDogQXJyYXk7XG4vLyB9XG5cbmV4cG9ydCB2YXIgR0xNQVRfUkFORE9NID0gTWF0aC5yYW5kb207XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2dsbWF0cml4L2NvbW1vbi5qc1xuLy8gbW9kdWxlIGlkID0gMjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///22\n");

/***/ }),
/* 23 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_util__ = __webpack_require__(56);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_vendor__ = __webpack_require__(4);\n\n\n\n\n\nvar isPowerOfTwo = __WEBPACK_IMPORTED_MODULE_3__math_util__[\"a\" /* default */].isPowerOfTwo;\n\nvar targetList = ['px', 'nx', 'py', 'ny', 'pz', 'nz'];\n\n/**\n * @constructor clay.TextureCube\n * @extends clay.Texture\n *\n * @example\n *     ...\n *     var mat = new clay.Material({\n *         shader: clay.shader.library.get('clay.phong', 'environmentMap')\n *     });\n *     var envMap = new clay.TextureCube();\n *     envMap.load({\n *         'px': 'assets/textures/sky/px.jpg',\n *         'nx': 'assets/textures/sky/nx.jpg'\n *         'py': 'assets/textures/sky/py.jpg'\n *         'ny': 'assets/textures/sky/ny.jpg'\n *         'pz': 'assets/textures/sky/pz.jpg'\n *         'nz': 'assets/textures/sky/nz.jpg'\n *     });\n *     mat.set('environmentMap', envMap);\n *     ...\n *     envMap.success(function () {\n *         // Wait for the sky texture loaded\n *         animation.on('frame', function (frameTime) {\n *             renderer.render(scene, camera);\n *         });\n *     });\n */\nvar TextureCube = __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.TextureCube# */{\n\n        /**\n         * @type {boolean}\n         * @default false\n         */\n        // PENDING cubemap should not flipY in default.\n        // flipY: false,\n\n        /**\n         * @type {Object}\n         * @property {?HTMLImageElement|HTMLCanvasElemnet} px\n         * @property {?HTMLImageElement|HTMLCanvasElemnet} nx\n         * @property {?HTMLImageElement|HTMLCanvasElemnet} py\n         * @property {?HTMLImageElement|HTMLCanvasElemnet} ny\n         * @property {?HTMLImageElement|HTMLCanvasElemnet} pz\n         * @property {?HTMLImageElement|HTMLCanvasElemnet} nz\n         */\n        image: {\n            px: null,\n            nx: null,\n            py: null,\n            ny: null,\n            pz: null,\n            nz: null\n        },\n        /**\n         * Pixels data of each side. Will be ignored if images are set.\n         * @type {Object}\n         * @property {?Uint8Array} px\n         * @property {?Uint8Array} nx\n         * @property {?Uint8Array} py\n         * @property {?Uint8Array} ny\n         * @property {?Uint8Array} pz\n         * @property {?Uint8Array} nz\n         */\n        pixels: {\n            px: null,\n            nx: null,\n            py: null,\n            ny: null,\n            pz: null,\n            nz: null\n        },\n\n        /**\n         * @type {Array.<Object>}\n         */\n        mipmaps: []\n    };\n}, {\n\n    textureType: 'textureCube',\n\n    update: function (renderer) {\n        var _gl = renderer.gl;\n        _gl.bindTexture(_gl.TEXTURE_CUBE_MAP, this._cache.get('webgl_texture'));\n\n        this.updateCommon(renderer);\n\n        var glFormat = this.format;\n        var glType = this.type;\n\n        _gl.texParameteri(_gl.TEXTURE_CUBE_MAP, _gl.TEXTURE_WRAP_S, this.getAvailableWrapS());\n        _gl.texParameteri(_gl.TEXTURE_CUBE_MAP, _gl.TEXTURE_WRAP_T, this.getAvailableWrapT());\n\n        _gl.texParameteri(_gl.TEXTURE_CUBE_MAP, _gl.TEXTURE_MAG_FILTER, this.getAvailableMagFilter());\n        _gl.texParameteri(_gl.TEXTURE_CUBE_MAP, _gl.TEXTURE_MIN_FILTER, this.getAvailableMinFilter());\n\n        var anisotropicExt = renderer.getGLExtension('EXT_texture_filter_anisotropic');\n        if (anisotropicExt && this.anisotropic > 1) {\n            _gl.texParameterf(_gl.TEXTURE_CUBE_MAP, anisotropicExt.TEXTURE_MAX_ANISOTROPY_EXT, this.anisotropic);\n        }\n\n        // Fallback to float type if browser don't have half float extension\n        if (glType === 36193) {\n            var halfFloatExt = renderer.getGLExtension('OES_texture_half_float');\n            if (!halfFloatExt) {\n                glType = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].FLOAT;\n            }\n        }\n\n        if (this.mipmaps.length) {\n            var width = this.width;\n            var height = this.height;\n            for (var i = 0; i < this.mipmaps.length; i++) {\n                var mipmap = this.mipmaps[i];\n                this._updateTextureData(_gl, mipmap, i, width, height, glFormat, glType);\n                width /= 2;\n                height /= 2;\n            }\n        }\n        else {\n            this._updateTextureData(_gl, this, 0, this.width, this.height, glFormat, glType);\n\n            if (!this.NPOT && this.useMipmap) {\n                _gl.generateMipmap(_gl.TEXTURE_CUBE_MAP);\n            }\n        }\n\n        _gl.bindTexture(_gl.TEXTURE_CUBE_MAP, null);\n    },\n\n    _updateTextureData: function (_gl, data, level, width, height, glFormat, glType) {\n        for (var i = 0; i < 6; i++) {\n            var target = targetList[i];\n            var img = data.image && data.image[target];\n            if (img) {\n                _gl.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, level, glFormat, glFormat, glType, img);\n            }\n            else {\n                _gl.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, level, glFormat, width, height, 0, glFormat, glType, data.pixels && data.pixels[target]);\n            }\n        }\n    },\n\n    /**\n     * @param  {clay.Renderer} renderer\n     * @memberOf clay.TextureCube.prototype\n     */\n    generateMipmap: function (renderer) {\n        var _gl = renderer.gl;\n        if (this.useMipmap && !this.NPOT) {\n            _gl.bindTexture(_gl.TEXTURE_CUBE_MAP, this._cache.get('webgl_texture'));\n            _gl.generateMipmap(_gl.TEXTURE_CUBE_MAP);\n        }\n    },\n\n    bind: function (renderer) {\n        renderer.gl.bindTexture(renderer.gl.TEXTURE_CUBE_MAP, this.getWebGLTexture(renderer));\n    },\n\n    unbind: function (renderer) {\n        renderer.gl.bindTexture(renderer.gl.TEXTURE_CUBE_MAP, null);\n    },\n\n    // Overwrite the isPowerOfTwo method\n    isPowerOfTwo: function () {\n        if (this.image.px) {\n            return isPowerOfTwo(this.image.px.width)\n                && isPowerOfTwo(this.image.px.height);\n        }\n        else {\n            return isPowerOfTwo(this.width)\n                && isPowerOfTwo(this.height);\n        }\n    },\n\n    isRenderable: function () {\n        if (this.image.px) {\n            return isImageRenderable(this.image.px)\n                && isImageRenderable(this.image.nx)\n                && isImageRenderable(this.image.py)\n                && isImageRenderable(this.image.ny)\n                && isImageRenderable(this.image.pz)\n                && isImageRenderable(this.image.nz);\n        }\n        else {\n            return !!(this.width && this.height);\n        }\n    },\n\n    load: function (imageList, crossOrigin) {\n        var loading = 0;\n        var self = this;\n        __WEBPACK_IMPORTED_MODULE_2__core_util__[\"a\" /* default */].each(imageList, function (src, target){\n            var image = __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].createImage();\n            if (crossOrigin) {\n                image.crossOrigin = crossOrigin;\n            }\n            image.onload = function () {\n                loading --;\n                if (loading === 0){\n                    self.dirty();\n                    self.trigger('success', self);\n                }\n            };\n            image.onerror = function () {\n                loading --;\n            };\n\n            loading++;\n            image.src = src;\n            self.image[target] = image;\n        });\n\n        return this;\n    }\n});\n\nObject.defineProperty(TextureCube.prototype, 'width', {\n    get: function () {\n        if (this.image && this.image.px) {\n            return this.image.px.width;\n        }\n        return this._width;\n    },\n    set: function (value) {\n        if (this.image && this.image.px) {\n            console.warn('Texture from image can\\'t set width');\n        }\n        else {\n            if (this._width !== value) {\n                this.dirty();\n            }\n            this._width = value;\n        }\n    }\n});\nObject.defineProperty(TextureCube.prototype, 'height', {\n    get: function () {\n        if (this.image && this.image.px) {\n            return this.image.px.height;\n        }\n        return this._height;\n    },\n    set: function (value) {\n        if (this.image && this.image.px) {\n            console.warn('Texture from image can\\'t set height');\n        }\n        else {\n            if (this._height !== value) {\n                this.dirty();\n            }\n            this._height = value;\n        }\n    }\n});\nfunction isImageRenderable(image) {\n    return image.width > 0 && image.height > 0;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TextureCube);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9UZXh0dXJlQ3ViZS5qcz9lOGJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZXh0dXJlIGZyb20gJy4vVGV4dHVyZSc7XG5pbXBvcnQgZ2xlbnVtIGZyb20gJy4vY29yZS9nbGVudW0nO1xuaW1wb3J0IHV0aWwgZnJvbSAnLi9jb3JlL3V0aWwnO1xuaW1wb3J0IG1hdGhVdGlsIGZyb20gJy4vbWF0aC91dGlsJztcbmltcG9ydCB2ZW5kb3IgZnJvbSAnLi9jb3JlL3ZlbmRvcic7XG52YXIgaXNQb3dlck9mVHdvID0gbWF0aFV0aWwuaXNQb3dlck9mVHdvO1xuXG52YXIgdGFyZ2V0TGlzdCA9IFsncHgnLCAnbngnLCAncHknLCAnbnknLCAncHonLCAnbnonXTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5UZXh0dXJlQ3ViZVxuICogQGV4dGVuZHMgY2xheS5UZXh0dXJlXG4gKlxuICogQGV4YW1wbGVcbiAqICAgICAuLi5cbiAqICAgICB2YXIgbWF0ID0gbmV3IGNsYXkuTWF0ZXJpYWwoe1xuICogICAgICAgICBzaGFkZXI6IGNsYXkuc2hhZGVyLmxpYnJhcnkuZ2V0KCdjbGF5LnBob25nJywgJ2Vudmlyb25tZW50TWFwJylcbiAqICAgICB9KTtcbiAqICAgICB2YXIgZW52TWFwID0gbmV3IGNsYXkuVGV4dHVyZUN1YmUoKTtcbiAqICAgICBlbnZNYXAubG9hZCh7XG4gKiAgICAgICAgICdweCc6ICdhc3NldHMvdGV4dHVyZXMvc2t5L3B4LmpwZycsXG4gKiAgICAgICAgICdueCc6ICdhc3NldHMvdGV4dHVyZXMvc2t5L254LmpwZydcbiAqICAgICAgICAgJ3B5JzogJ2Fzc2V0cy90ZXh0dXJlcy9za3kvcHkuanBnJ1xuICogICAgICAgICAnbnknOiAnYXNzZXRzL3RleHR1cmVzL3NreS9ueS5qcGcnXG4gKiAgICAgICAgICdweic6ICdhc3NldHMvdGV4dHVyZXMvc2t5L3B6LmpwZydcbiAqICAgICAgICAgJ256JzogJ2Fzc2V0cy90ZXh0dXJlcy9za3kvbnouanBnJ1xuICogICAgIH0pO1xuICogICAgIG1hdC5zZXQoJ2Vudmlyb25tZW50TWFwJywgZW52TWFwKTtcbiAqICAgICAuLi5cbiAqICAgICBlbnZNYXAuc3VjY2VzcyhmdW5jdGlvbiAoKSB7XG4gKiAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBza3kgdGV4dHVyZSBsb2FkZWRcbiAqICAgICAgICAgYW5pbWF0aW9uLm9uKCdmcmFtZScsIGZ1bmN0aW9uIChmcmFtZVRpbWUpIHtcbiAqICAgICAgICAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTtcbiAqICAgICAgICAgfSk7XG4gKiAgICAgfSk7XG4gKi9cbnZhciBUZXh0dXJlQ3ViZSA9IFRleHR1cmUuZXh0ZW5kKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5LlRleHR1cmVDdWJlIyAqL3tcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICAvLyBQRU5ESU5HIGN1YmVtYXAgc2hvdWxkIG5vdCBmbGlwWSBpbiBkZWZhdWx0LlxuICAgICAgICAvLyBmbGlwWTogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7P0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1uZXR9IHB4XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7P0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1uZXR9IG54XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7P0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1uZXR9IHB5XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7P0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1uZXR9IG55XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7P0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1uZXR9IHB6XG4gICAgICAgICAqIEBwcm9wZXJ0eSB7P0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1uZXR9IG56XG4gICAgICAgICAqL1xuICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgcHg6IG51bGwsXG4gICAgICAgICAgICBueDogbnVsbCxcbiAgICAgICAgICAgIHB5OiBudWxsLFxuICAgICAgICAgICAgbnk6IG51bGwsXG4gICAgICAgICAgICBwejogbnVsbCxcbiAgICAgICAgICAgIG56OiBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQaXhlbHMgZGF0YSBvZiBlYWNoIHNpZGUuIFdpbGwgYmUgaWdub3JlZCBpZiBpbWFnZXMgYXJlIHNldC5cbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICogQHByb3BlcnR5IHs/VWludDhBcnJheX0gcHhcbiAgICAgICAgICogQHByb3BlcnR5IHs/VWludDhBcnJheX0gbnhcbiAgICAgICAgICogQHByb3BlcnR5IHs/VWludDhBcnJheX0gcHlcbiAgICAgICAgICogQHByb3BlcnR5IHs/VWludDhBcnJheX0gbnlcbiAgICAgICAgICogQHByb3BlcnR5IHs/VWludDhBcnJheX0gcHpcbiAgICAgICAgICogQHByb3BlcnR5IHs/VWludDhBcnJheX0gbnpcbiAgICAgICAgICovXG4gICAgICAgIHBpeGVsczoge1xuICAgICAgICAgICAgcHg6IG51bGwsXG4gICAgICAgICAgICBueDogbnVsbCxcbiAgICAgICAgICAgIHB5OiBudWxsLFxuICAgICAgICAgICAgbnk6IG51bGwsXG4gICAgICAgICAgICBwejogbnVsbCxcbiAgICAgICAgICAgIG56OiBudWxsXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheS48T2JqZWN0Pn1cbiAgICAgICAgICovXG4gICAgICAgIG1pcG1hcHM6IFtdXG4gICAgfTtcbn0sIHtcblxuICAgIHRleHR1cmVUeXBlOiAndGV4dHVyZUN1YmUnLFxuXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuICAgICAgICBfZ2wuYmluZFRleHR1cmUoX2dsLlRFWFRVUkVfQ1VCRV9NQVAsIHRoaXMuX2NhY2hlLmdldCgnd2ViZ2xfdGV4dHVyZScpKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZUNvbW1vbihyZW5kZXJlcik7XG5cbiAgICAgICAgdmFyIGdsRm9ybWF0ID0gdGhpcy5mb3JtYXQ7XG4gICAgICAgIHZhciBnbFR5cGUgPSB0aGlzLnR5cGU7XG5cbiAgICAgICAgX2dsLnRleFBhcmFtZXRlcmkoX2dsLlRFWFRVUkVfQ1VCRV9NQVAsIF9nbC5URVhUVVJFX1dSQVBfUywgdGhpcy5nZXRBdmFpbGFibGVXcmFwUygpKTtcbiAgICAgICAgX2dsLnRleFBhcmFtZXRlcmkoX2dsLlRFWFRVUkVfQ1VCRV9NQVAsIF9nbC5URVhUVVJFX1dSQVBfVCwgdGhpcy5nZXRBdmFpbGFibGVXcmFwVCgpKTtcblxuICAgICAgICBfZ2wudGV4UGFyYW1ldGVyaShfZ2wuVEVYVFVSRV9DVUJFX01BUCwgX2dsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgdGhpcy5nZXRBdmFpbGFibGVNYWdGaWx0ZXIoKSk7XG4gICAgICAgIF9nbC50ZXhQYXJhbWV0ZXJpKF9nbC5URVhUVVJFX0NVQkVfTUFQLCBfZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCB0aGlzLmdldEF2YWlsYWJsZU1pbkZpbHRlcigpKTtcblxuICAgICAgICB2YXIgYW5pc290cm9waWNFeHQgPSByZW5kZXJlci5nZXRHTEV4dGVuc2lvbignRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljJyk7XG4gICAgICAgIGlmIChhbmlzb3Ryb3BpY0V4dCAmJiB0aGlzLmFuaXNvdHJvcGljID4gMSkge1xuICAgICAgICAgICAgX2dsLnRleFBhcmFtZXRlcmYoX2dsLlRFWFRVUkVfQ1VCRV9NQVAsIGFuaXNvdHJvcGljRXh0LlRFWFRVUkVfTUFYX0FOSVNPVFJPUFlfRVhULCB0aGlzLmFuaXNvdHJvcGljKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZhbGxiYWNrIHRvIGZsb2F0IHR5cGUgaWYgYnJvd3NlciBkb24ndCBoYXZlIGhhbGYgZmxvYXQgZXh0ZW5zaW9uXG4gICAgICAgIGlmIChnbFR5cGUgPT09IDM2MTkzKSB7XG4gICAgICAgICAgICB2YXIgaGFsZkZsb2F0RXh0ID0gcmVuZGVyZXIuZ2V0R0xFeHRlbnNpb24oJ09FU190ZXh0dXJlX2hhbGZfZmxvYXQnKTtcbiAgICAgICAgICAgIGlmICghaGFsZkZsb2F0RXh0KSB7XG4gICAgICAgICAgICAgICAgZ2xUeXBlID0gZ2xlbnVtLkZMT0FUO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubWlwbWFwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMud2lkdGg7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubWlwbWFwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBtaXBtYXAgPSB0aGlzLm1pcG1hcHNbaV07XG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVGV4dHVyZURhdGEoX2dsLCBtaXBtYXAsIGksIHdpZHRoLCBoZWlnaHQsIGdsRm9ybWF0LCBnbFR5cGUpO1xuICAgICAgICAgICAgICAgIHdpZHRoIC89IDI7XG4gICAgICAgICAgICAgICAgaGVpZ2h0IC89IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVUZXh0dXJlRGF0YShfZ2wsIHRoaXMsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCBnbEZvcm1hdCwgZ2xUeXBlKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLk5QT1QgJiYgdGhpcy51c2VNaXBtYXApIHtcbiAgICAgICAgICAgICAgICBfZ2wuZ2VuZXJhdGVNaXBtYXAoX2dsLlRFWFRVUkVfQ1VCRV9NQVApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgX2dsLmJpbmRUZXh0dXJlKF9nbC5URVhUVVJFX0NVQkVfTUFQLCBudWxsKTtcbiAgICB9LFxuXG4gICAgX3VwZGF0ZVRleHR1cmVEYXRhOiBmdW5jdGlvbiAoX2dsLCBkYXRhLCBsZXZlbCwgd2lkdGgsIGhlaWdodCwgZ2xGb3JtYXQsIGdsVHlwZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDY7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRhcmdldExpc3RbaV07XG4gICAgICAgICAgICB2YXIgaW1nID0gZGF0YS5pbWFnZSAmJiBkYXRhLmltYWdlW3RhcmdldF07XG4gICAgICAgICAgICBpZiAoaW1nKSB7XG4gICAgICAgICAgICAgICAgX2dsLnRleEltYWdlMkQoX2dsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCArIGksIGxldmVsLCBnbEZvcm1hdCwgZ2xGb3JtYXQsIGdsVHlwZSwgaW1nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF9nbC50ZXhJbWFnZTJEKF9nbC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ggKyBpLCBsZXZlbCwgZ2xGb3JtYXQsIHdpZHRoLCBoZWlnaHQsIDAsIGdsRm9ybWF0LCBnbFR5cGUsIGRhdGEucGl4ZWxzICYmIGRhdGEucGl4ZWxzW3RhcmdldF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICogQG1lbWJlck9mIGNsYXkuVGV4dHVyZUN1YmUucHJvdG90eXBlXG4gICAgICovXG4gICAgZ2VuZXJhdGVNaXBtYXA6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgIGlmICh0aGlzLnVzZU1pcG1hcCAmJiAhdGhpcy5OUE9UKSB7XG4gICAgICAgICAgICBfZ2wuYmluZFRleHR1cmUoX2dsLlRFWFRVUkVfQ1VCRV9NQVAsIHRoaXMuX2NhY2hlLmdldCgnd2ViZ2xfdGV4dHVyZScpKTtcbiAgICAgICAgICAgIF9nbC5nZW5lcmF0ZU1pcG1hcChfZ2wuVEVYVFVSRV9DVUJFX01BUCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgYmluZDogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHJlbmRlcmVyLmdsLmJpbmRUZXh0dXJlKHJlbmRlcmVyLmdsLlRFWFRVUkVfQ1VCRV9NQVAsIHRoaXMuZ2V0V2ViR0xUZXh0dXJlKHJlbmRlcmVyKSk7XG4gICAgfSxcblxuICAgIHVuYmluZDogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHJlbmRlcmVyLmdsLmJpbmRUZXh0dXJlKHJlbmRlcmVyLmdsLlRFWFRVUkVfQ1VCRV9NQVAsIG51bGwpO1xuICAgIH0sXG5cbiAgICAvLyBPdmVyd3JpdGUgdGhlIGlzUG93ZXJPZlR3byBtZXRob2RcbiAgICBpc1Bvd2VyT2ZUd286IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2UucHgpIHtcbiAgICAgICAgICAgIHJldHVybiBpc1Bvd2VyT2ZUd28odGhpcy5pbWFnZS5weC53aWR0aClcbiAgICAgICAgICAgICAgICAmJiBpc1Bvd2VyT2ZUd28odGhpcy5pbWFnZS5weC5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGlzUG93ZXJPZlR3byh0aGlzLndpZHRoKVxuICAgICAgICAgICAgICAgICYmIGlzUG93ZXJPZlR3byh0aGlzLmhlaWdodCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgaXNSZW5kZXJhYmxlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmltYWdlLnB4KSB7XG4gICAgICAgICAgICByZXR1cm4gaXNJbWFnZVJlbmRlcmFibGUodGhpcy5pbWFnZS5weClcbiAgICAgICAgICAgICAgICAmJiBpc0ltYWdlUmVuZGVyYWJsZSh0aGlzLmltYWdlLm54KVxuICAgICAgICAgICAgICAgICYmIGlzSW1hZ2VSZW5kZXJhYmxlKHRoaXMuaW1hZ2UucHkpXG4gICAgICAgICAgICAgICAgJiYgaXNJbWFnZVJlbmRlcmFibGUodGhpcy5pbWFnZS5ueSlcbiAgICAgICAgICAgICAgICAmJiBpc0ltYWdlUmVuZGVyYWJsZSh0aGlzLmltYWdlLnB6KVxuICAgICAgICAgICAgICAgICYmIGlzSW1hZ2VSZW5kZXJhYmxlKHRoaXMuaW1hZ2UubnopO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICEhKHRoaXMud2lkdGggJiYgdGhpcy5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGxvYWQ6IGZ1bmN0aW9uIChpbWFnZUxpc3QsIGNyb3NzT3JpZ2luKSB7XG4gICAgICAgIHZhciBsb2FkaW5nID0gMDtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB1dGlsLmVhY2goaW1hZ2VMaXN0LCBmdW5jdGlvbiAoc3JjLCB0YXJnZXQpe1xuICAgICAgICAgICAgdmFyIGltYWdlID0gdmVuZG9yLmNyZWF0ZUltYWdlKCk7XG4gICAgICAgICAgICBpZiAoY3Jvc3NPcmlnaW4pIHtcbiAgICAgICAgICAgICAgICBpbWFnZS5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGxvYWRpbmcgLS07XG4gICAgICAgICAgICAgICAgaWYgKGxvYWRpbmcgPT09IDApe1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcignc3VjY2VzcycsIHNlbGYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGxvYWRpbmcgLS07XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsb2FkaW5nKys7XG4gICAgICAgICAgICBpbWFnZS5zcmMgPSBzcmM7XG4gICAgICAgICAgICBzZWxmLmltYWdlW3RhcmdldF0gPSBpbWFnZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZXh0dXJlQ3ViZS5wcm90b3R5cGUsICd3aWR0aCcsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2UgJiYgdGhpcy5pbWFnZS5weCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2UucHgud2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpZHRoO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2UgJiYgdGhpcy5pbWFnZS5weCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUZXh0dXJlIGZyb20gaW1hZ2UgY2FuXFwndCBzZXQgd2lkdGgnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl93aWR0aCAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl93aWR0aCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dHVyZUN1YmUucHJvdG90eXBlLCAnaGVpZ2h0Jywge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pbWFnZSAmJiB0aGlzLmltYWdlLnB4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbWFnZS5weC5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmltYWdlICYmIHRoaXMuaW1hZ2UucHgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVGV4dHVyZSBmcm9tIGltYWdlIGNhblxcJ3Qgc2V0IGhlaWdodCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2hlaWdodCAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9oZWlnaHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuZnVuY3Rpb24gaXNJbWFnZVJlbmRlcmFibGUoaW1hZ2UpIHtcbiAgICByZXR1cm4gaW1hZ2Uud2lkdGggPiAwICYmIGltYWdlLmhlaWdodCA+IDA7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRleHR1cmVDdWJlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9UZXh0dXJlQ3ViZS5qc1xuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///23\n");

/***/ }),
/* 24 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__camera_Orthographic__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__geometry_Plane__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__shader_source_compositor_vertex_glsl_js__ = __webpack_require__(137);\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_7__shader_source_compositor_vertex_glsl_js__[\"a\" /* default */]);\n\nvar planeGeo = new __WEBPACK_IMPORTED_MODULE_2__geometry_Plane__[\"a\" /* default */]();\nvar mesh = new __WEBPACK_IMPORTED_MODULE_5__Mesh__[\"a\" /* default */]({\n    geometry: planeGeo,\n    frustumCulling: false\n});\nvar camera = new __WEBPACK_IMPORTED_MODULE_1__camera_Orthographic__[\"a\" /* default */]();\n\n/**\n * @constructor clay.compositor.Pass\n * @extends clay.core.Base\n */\nvar Pass = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.compositor.Pass# */ {\n        /**\n         * Fragment shader string\n         * @type {string}\n         */\n        // PENDING shader or fragment ?\n        fragment: '',\n\n        /**\n         * @type {Object}\n         */\n        outputs: null,\n\n        /**\n         * @type {clay.Material}\n         */\n        material: null,\n\n        /**\n         * @type {Boolean}\n         */\n        blendWithPrevious: false,\n\n        /**\n         * @type {Boolean}\n         */\n        clearColor: false,\n\n        /**\n         * @type {Boolean}\n         */\n        clearDepth: true\n    };\n}, function() {\n\n    var shader = new __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].source('clay.compositor.vertex'), this.fragment);\n    var material = new __WEBPACK_IMPORTED_MODULE_4__Material__[\"a\" /* default */]({\n        shader: shader\n    });\n    material.enableTexturesAll();\n\n    this.material = material;\n\n},\n/** @lends clay.compositor.Pass.prototype */\n{\n    /**\n     * @param {string} name\n     * @param {} value\n     */\n    setUniform: function(name, value) {\n        this.material.setUniform(name, value);\n    },\n    /**\n     * @param  {string} name\n     * @return {}\n     */\n    getUniform: function(name) {\n        var uniform = this.material.uniforms[name];\n        if (uniform) {\n            return uniform.value;\n        }\n    },\n    /**\n     * @param  {clay.Texture} texture\n     * @param  {number} attachment\n     */\n    attachOutput: function(texture, attachment) {\n        if (!this.outputs) {\n            this.outputs = {};\n        }\n        attachment = attachment || __WEBPACK_IMPORTED_MODULE_6__core_glenum__[\"a\" /* default */].COLOR_ATTACHMENT0;\n        this.outputs[attachment] = texture;\n    },\n    /**\n     * @param  {clay.Texture} texture\n     */\n    detachOutput: function(texture) {\n        for (var attachment in this.outputs) {\n            if (this.outputs[attachment] === texture) {\n                this.outputs[attachment] = null;\n            }\n        }\n    },\n\n    bind: function(renderer, frameBuffer) {\n\n        if (this.outputs) {\n            for (var attachment in this.outputs) {\n                var texture = this.outputs[attachment];\n                if (texture) {\n                    frameBuffer.attach(texture, attachment);\n                }\n            }\n        }\n\n        if (frameBuffer) {\n            frameBuffer.bind(renderer);\n        }\n    },\n\n    unbind: function(renderer, frameBuffer) {\n        frameBuffer.unbind(renderer);\n    },\n    /**\n     * @param  {clay.Renderer} renderer\n     * @param  {clay.FrameBuffer} [frameBuffer]\n     */\n    render: function(renderer, frameBuffer) {\n\n        var _gl = renderer.gl;\n\n        if (frameBuffer) {\n            this.bind(renderer, frameBuffer);\n            // MRT Support in chrome\n            // https://www.khronos.org/registry/webgl/sdk/tests/conformance/extensions/ext-draw-buffers.html\n            var ext = renderer.getGLExtension('EXT_draw_buffers');\n            if (ext && this.outputs) {\n                var bufs = [];\n                for (var attachment in this.outputs) {\n                    attachment = +attachment;\n                    if (attachment >= _gl.COLOR_ATTACHMENT0 && attachment <= _gl.COLOR_ATTACHMENT0 + 8) {\n                        bufs.push(attachment);\n                    }\n                }\n                ext.drawBuffersEXT(bufs);\n            }\n        }\n\n        this.trigger('beforerender', this, renderer);\n\n        // FIXME Don't clear in each pass in default, let the color overwrite the buffer\n        // FIXME pixels may be discard\n        var clearBit = this.clearDepth ? _gl.DEPTH_BUFFER_BIT : 0;\n        _gl.depthMask(true);\n        if (this.clearColor) {\n            clearBit = clearBit | _gl.COLOR_BUFFER_BIT;\n            _gl.colorMask(true, true, true, true);\n            var cc = this.clearColor;\n            if (Array.isArray(cc)) {\n                _gl.clearColor(cc[0], cc[1], cc[2], cc[3]);\n            }\n        }\n        _gl.clear(clearBit);\n\n        if (this.blendWithPrevious) {\n            // Blend with previous rendered scene in the final output\n            // FIXME Configure blend.\n            // FIXME It will cause screen blink\n            _gl.enable(_gl.BLEND);\n            this.material.transparent = true;\n        }\n        else {\n            _gl.disable(_gl.BLEND);\n            this.material.transparent = false;\n        }\n\n        this.renderQuad(renderer);\n\n        this.trigger('afterrender', this, renderer);\n\n        if (frameBuffer) {\n            this.unbind(renderer, frameBuffer);\n        }\n    },\n\n    /**\n     * Simply do quad rendering\n     */\n    renderQuad: function (renderer) {\n        mesh.material = this.material;\n        renderer.renderPass([mesh], camera);\n    },\n\n    /**\n     * @param  {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {}\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Pass);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb21wb3NpdG9yL1Bhc3MuanM/YmIwNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZSBmcm9tICcuLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IE9ydGhvQ2FtZXJhIGZyb20gJy4uL2NhbWVyYS9PcnRob2dyYXBoaWMnO1xuaW1wb3J0IFBsYW5lIGZyb20gJy4uL2dlb21ldHJ5L1BsYW5lJztcbmltcG9ydCBTaGFkZXIgZnJvbSAnLi4vU2hhZGVyJztcbmltcG9ydCBNYXRlcmlhbCBmcm9tICcuLi9NYXRlcmlhbCc7XG5pbXBvcnQgTWVzaCBmcm9tICcuLi9NZXNoJztcbmltcG9ydCBnbGVudW0gZnJvbSAnLi4vY29yZS9nbGVudW0nO1xuaW1wb3J0IHZlcnRleEdsc2wgZnJvbSAnLi4vc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL3ZlcnRleC5nbHNsLmpzJztcblxuU2hhZGVyWydpbXBvcnQnXSh2ZXJ0ZXhHbHNsKTtcblxudmFyIHBsYW5lR2VvID0gbmV3IFBsYW5lKCk7XG52YXIgbWVzaCA9IG5ldyBNZXNoKHtcbiAgICBnZW9tZXRyeTogcGxhbmVHZW8sXG4gICAgZnJ1c3R1bUN1bGxpbmc6IGZhbHNlXG59KTtcbnZhciBjYW1lcmEgPSBuZXcgT3J0aG9DYW1lcmEoKTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5jb21wb3NpdG9yLlBhc3NcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKi9cbnZhciBQYXNzID0gQmFzZS5leHRlbmQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuY29tcG9zaXRvci5QYXNzIyAqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGcmFnbWVudCBzaGFkZXIgc3RyaW5nXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICAvLyBQRU5ESU5HIHNoYWRlciBvciBmcmFnbWVudCA/XG4gICAgICAgIGZyYWdtZW50OiAnJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIG91dHB1dHM6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtjbGF5Lk1hdGVyaWFsfVxuICAgICAgICAgKi9cbiAgICAgICAgbWF0ZXJpYWw6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgYmxlbmRXaXRoUHJldmlvdXM6IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGNsZWFyQ29sb3I6IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGNsZWFyRGVwdGg6IHRydWVcbiAgICB9O1xufSwgZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgc2hhZGVyID0gbmV3IFNoYWRlcihTaGFkZXIuc291cmNlKCdjbGF5LmNvbXBvc2l0b3IudmVydGV4JyksIHRoaXMuZnJhZ21lbnQpO1xuICAgIHZhciBtYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCh7XG4gICAgICAgIHNoYWRlcjogc2hhZGVyXG4gICAgfSk7XG4gICAgbWF0ZXJpYWwuZW5hYmxlVGV4dHVyZXNBbGwoKTtcblxuICAgIHRoaXMubWF0ZXJpYWwgPSBtYXRlcmlhbDtcblxufSxcbi8qKiBAbGVuZHMgY2xheS5jb21wb3NpdG9yLlBhc3MucHJvdG90eXBlICovXG57XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0ge30gdmFsdWVcbiAgICAgKi9cbiAgICBzZXRVbmlmb3JtOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLm1hdGVyaWFsLnNldFVuaWZvcm0obmFtZSwgdmFsdWUpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBuYW1lXG4gICAgICogQHJldHVybiB7fVxuICAgICAqL1xuICAgIGdldFVuaWZvcm06IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgdmFyIHVuaWZvcm0gPSB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zW25hbWVdO1xuICAgICAgICBpZiAodW5pZm9ybSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuaWZvcm0udmFsdWU7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge2NsYXkuVGV4dHVyZX0gdGV4dHVyZVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gYXR0YWNobWVudFxuICAgICAqL1xuICAgIGF0dGFjaE91dHB1dDogZnVuY3Rpb24odGV4dHVyZSwgYXR0YWNobWVudCkge1xuICAgICAgICBpZiAoIXRoaXMub3V0cHV0cykge1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgYXR0YWNobWVudCA9IGF0dGFjaG1lbnQgfHwgZ2xlbnVtLkNPTE9SX0FUVEFDSE1FTlQwO1xuICAgICAgICB0aGlzLm91dHB1dHNbYXR0YWNobWVudF0gPSB0ZXh0dXJlO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7Y2xheS5UZXh0dXJlfSB0ZXh0dXJlXG4gICAgICovXG4gICAgZGV0YWNoT3V0cHV0OiBmdW5jdGlvbih0ZXh0dXJlKSB7XG4gICAgICAgIGZvciAodmFyIGF0dGFjaG1lbnQgaW4gdGhpcy5vdXRwdXRzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vdXRwdXRzW2F0dGFjaG1lbnRdID09PSB0ZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRzW2F0dGFjaG1lbnRdID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBiaW5kOiBmdW5jdGlvbihyZW5kZXJlciwgZnJhbWVCdWZmZXIpIHtcblxuICAgICAgICBpZiAodGhpcy5vdXRwdXRzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBhdHRhY2htZW50IGluIHRoaXMub3V0cHV0cykge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gdGhpcy5vdXRwdXRzW2F0dGFjaG1lbnRdO1xuICAgICAgICAgICAgICAgIGlmICh0ZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyYW1lQnVmZmVyLmF0dGFjaCh0ZXh0dXJlLCBhdHRhY2htZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZnJhbWVCdWZmZXIpIHtcbiAgICAgICAgICAgIGZyYW1lQnVmZmVyLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHVuYmluZDogZnVuY3Rpb24ocmVuZGVyZXIsIGZyYW1lQnVmZmVyKSB7XG4gICAgICAgIGZyYW1lQnVmZmVyLnVuYmluZChyZW5kZXJlcik7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqIEBwYXJhbSAge2NsYXkuRnJhbWVCdWZmZXJ9IFtmcmFtZUJ1ZmZlcl1cbiAgICAgKi9cbiAgICByZW5kZXI6IGZ1bmN0aW9uKHJlbmRlcmVyLCBmcmFtZUJ1ZmZlcikge1xuXG4gICAgICAgIHZhciBfZ2wgPSByZW5kZXJlci5nbDtcblxuICAgICAgICBpZiAoZnJhbWVCdWZmZXIpIHtcbiAgICAgICAgICAgIHRoaXMuYmluZChyZW5kZXJlciwgZnJhbWVCdWZmZXIpO1xuICAgICAgICAgICAgLy8gTVJUIFN1cHBvcnQgaW4gY2hyb21lXG4gICAgICAgICAgICAvLyBodHRwczovL3d3dy5raHJvbm9zLm9yZy9yZWdpc3RyeS93ZWJnbC9zZGsvdGVzdHMvY29uZm9ybWFuY2UvZXh0ZW5zaW9ucy9leHQtZHJhdy1idWZmZXJzLmh0bWxcbiAgICAgICAgICAgIHZhciBleHQgPSByZW5kZXJlci5nZXRHTEV4dGVuc2lvbignRVhUX2RyYXdfYnVmZmVycycpO1xuICAgICAgICAgICAgaWYgKGV4dCAmJiB0aGlzLm91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgYnVmcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGF0dGFjaG1lbnQgaW4gdGhpcy5vdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQgPSArYXR0YWNobWVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dGFjaG1lbnQgPj0gX2dsLkNPTE9SX0FUVEFDSE1FTlQwICYmIGF0dGFjaG1lbnQgPD0gX2dsLkNPTE9SX0FUVEFDSE1FTlQwICsgOCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVmcy5wdXNoKGF0dGFjaG1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGV4dC5kcmF3QnVmZmVyc0VYVChidWZzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlcmVuZGVyJywgdGhpcywgcmVuZGVyZXIpO1xuXG4gICAgICAgIC8vIEZJWE1FIERvbid0IGNsZWFyIGluIGVhY2ggcGFzcyBpbiBkZWZhdWx0LCBsZXQgdGhlIGNvbG9yIG92ZXJ3cml0ZSB0aGUgYnVmZmVyXG4gICAgICAgIC8vIEZJWE1FIHBpeGVscyBtYXkgYmUgZGlzY2FyZFxuICAgICAgICB2YXIgY2xlYXJCaXQgPSB0aGlzLmNsZWFyRGVwdGggPyBfZ2wuREVQVEhfQlVGRkVSX0JJVCA6IDA7XG4gICAgICAgIF9nbC5kZXB0aE1hc2sodHJ1ZSk7XG4gICAgICAgIGlmICh0aGlzLmNsZWFyQ29sb3IpIHtcbiAgICAgICAgICAgIGNsZWFyQml0ID0gY2xlYXJCaXQgfCBfZ2wuQ09MT1JfQlVGRkVSX0JJVDtcbiAgICAgICAgICAgIF9nbC5jb2xvck1hc2sodHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICB2YXIgY2MgPSB0aGlzLmNsZWFyQ29sb3I7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjYykpIHtcbiAgICAgICAgICAgICAgICBfZ2wuY2xlYXJDb2xvcihjY1swXSwgY2NbMV0sIGNjWzJdLCBjY1szXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX2dsLmNsZWFyKGNsZWFyQml0KTtcblxuICAgICAgICBpZiAodGhpcy5ibGVuZFdpdGhQcmV2aW91cykge1xuICAgICAgICAgICAgLy8gQmxlbmQgd2l0aCBwcmV2aW91cyByZW5kZXJlZCBzY2VuZSBpbiB0aGUgZmluYWwgb3V0cHV0XG4gICAgICAgICAgICAvLyBGSVhNRSBDb25maWd1cmUgYmxlbmQuXG4gICAgICAgICAgICAvLyBGSVhNRSBJdCB3aWxsIGNhdXNlIHNjcmVlbiBibGlua++8n1xuICAgICAgICAgICAgX2dsLmVuYWJsZShfZ2wuQkxFTkQpO1xuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC50cmFuc3BhcmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfZ2wuZGlzYWJsZShfZ2wuQkxFTkQpO1xuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbC50cmFuc3BhcmVudCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW5kZXJRdWFkKHJlbmRlcmVyKTtcblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2FmdGVycmVuZGVyJywgdGhpcywgcmVuZGVyZXIpO1xuXG4gICAgICAgIGlmIChmcmFtZUJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy51bmJpbmQocmVuZGVyZXIsIGZyYW1lQnVmZmVyKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTaW1wbHkgZG8gcXVhZCByZW5kZXJpbmdcbiAgICAgKi9cbiAgICByZW5kZXJRdWFkOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgbWVzaC5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XG4gICAgICAgIHJlbmRlcmVyLnJlbmRlclBhc3MoW21lc2hdLCBjYW1lcmEpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqL1xuICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIChyZW5kZXJlcikge31cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBQYXNzO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb21wb3NpdG9yL1Bhc3MuanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///24\n");

/***/ }),
/* 25 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export animation */\n/* unused harmony export async */\n/* unused harmony export camera */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"m\", function() { return compositor; });\n/* unused harmony export core */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"o\", function() { return deferred; });\n/* unused harmony export dep */\n/* unused harmony export geometry */\n/* unused harmony export light */\n/* unused harmony export loader */\n/* unused harmony export math */\n/* unused harmony export particle */\n/* unused harmony export picking */\n/* unused harmony export plugin */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"p\", function() { return prePass; });\n/* unused harmony export shader */\n/* unused harmony export util */\n/* unused harmony export vr */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__animation_Animator__ = __webpack_require__(70);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__animation_Blend1DClip__ = __webpack_require__(127);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__animation_Blend2DClip__ = __webpack_require__(128);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__animation_Clip__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__animation_easing__ = __webpack_require__(44);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__animation_SamplerTrack__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__animation_Timeline__ = __webpack_require__(129);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__animation_TrackClip__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__application__ = __webpack_require__(130);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__async_Task__ = __webpack_require__(101);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__async_TaskGroup__ = __webpack_require__(142);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__Camera__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__camera_Orthographic__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__compositor_Compositor__ = __webpack_require__(102);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__compositor_CompositorNode__ = __webpack_require__(35);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__compositor_createCompositor__ = __webpack_require__(143);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__compositor_FilterNode__ = __webpack_require__(106);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__compositor_Graph__ = __webpack_require__(103);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__compositor_Pass__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__compositor_SceneNode__ = __webpack_require__(104);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__compositor_TextureNode__ = __webpack_require__(105);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__compositor_TexturePool__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__core_Cache__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__core_color__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__core_GLInfo__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__core_LinkedList__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__core_LRU__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__core_mixin_extend__ = __webpack_require__(73);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__core_mixin_notifier__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__core_request__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35__createCompositor__ = __webpack_require__(62);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_36__deferred_GBuffer__ = __webpack_require__(108);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_37__deferred_Renderer__ = __webpack_require__(159);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_38__dep_glmatrix__ = __webpack_require__(169);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_39__FrameBuffer__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_40__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_41__geometry_Cone__ = __webpack_require__(63);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_42__geometry_Cube__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_43__geometry_Cylinder__ = __webpack_require__(109);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_44__geometry_ParametricSurface__ = __webpack_require__(81);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_45__geometry_Plane__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_46__geometry_Sphere__ = __webpack_require__(55);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_47__GeometryBase__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_48__InstancedMesh__ = __webpack_require__(171);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_49__Joint__ = __webpack_require__(58);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_50__Light__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_51__light_Ambient__ = __webpack_require__(92);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_52__light_AmbientCubemap__ = __webpack_require__(93);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_53__light_AmbientSH__ = __webpack_require__(97);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_54__light_Directional__ = __webpack_require__(89);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_55__light_Point__ = __webpack_require__(90);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_56__light_Sphere__ = __webpack_require__(172);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_57__light_Spot__ = __webpack_require__(91);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_58__light_Tube__ = __webpack_require__(173);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_59__loader_FX__ = __webpack_require__(174);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_60__loader_GLTF__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_61__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_62__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_63__math_Frustum__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_64__math_Matrix2__ = __webpack_require__(175);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_65__math_Matrix2d__ = __webpack_require__(176);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_66__math_Matrix3__ = __webpack_require__(177);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_67__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_68__math_Plane__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_69__math_Quaternion__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_70__math_Ray__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_71__math_util__ = __webpack_require__(56);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_72__math_Value__ = __webpack_require__(112);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_73__math_Vector2__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_74__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_75__math_Vector4__ = __webpack_require__(178);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_76__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_77__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_78__particle_Emitter__ = __webpack_require__(179);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_79__particle_Field__ = __webpack_require__(114);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_80__particle_ForceField__ = __webpack_require__(180);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_81__particle_Particle__ = __webpack_require__(113);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_82__particle_ParticleRenderable__ = __webpack_require__(181);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_83__picking_PixelPicking__ = __webpack_require__(183);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_84__picking_RayPicking__ = __webpack_require__(99);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_85__plugin_FreeControl__ = __webpack_require__(185);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_86__plugin_GamepadControl__ = __webpack_require__(186);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_87__plugin_GestureMgr__ = __webpack_require__(115);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_88__plugin_InfinitePlane__ = __webpack_require__(187);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_89__plugin_OrbitControl__ = __webpack_require__(188);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_90__plugin_Skybox__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_91__plugin_Skydome__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_92__prePass_EnvironmentMap__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_93__prePass_ShadowMap__ = __webpack_require__(98);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_94__Renderable__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_95__Renderer__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_96__Scene__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_97__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_98__shader_library__ = __webpack_require__(57);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_99__shader_registerBuiltinCompositor__ = __webpack_require__(107);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_100__shader_source_header_light__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_101__Skeleton__ = __webpack_require__(85);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_102__StandardMaterial__ = __webpack_require__(83);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_103__StaticGeometry__ = __webpack_require__(189);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_104__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_105__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_106__TextureCube__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_107__Timeline__ = __webpack_require__(46);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_108__util_cubemap__ = __webpack_require__(94);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_109__util_dds__ = __webpack_require__(95);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_110__util_delaunay__ = __webpack_require__(71);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_111__util_hdr__ = __webpack_require__(96);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_112__util_ktx__ = __webpack_require__(190);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_113__util_mesh__ = __webpack_require__(191);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_114__util_sh__ = __webpack_require__(100);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_115__util_texture__ = __webpack_require__(59);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_116__util_transferable__ = __webpack_require__(192);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_117__version__ = __webpack_require__(193);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_118__vr_CardboardDistorter__ = __webpack_require__(194);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_119__vr_StereoCamera__ = __webpack_require__(196);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"l\", function() { return __WEBPACK_IMPORTED_MODULE_8__application__[\"a\"]; });\n/* unused harmony reexport Camera */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"n\", function() { return __WEBPACK_IMPORTED_MODULE_35__createCompositor__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_39__FrameBuffer__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_40__Geometry__[\"a\"]; });\n/* unused harmony reexport GeometryBase */\n/* unused harmony reexport InstancedMesh */\n/* unused harmony reexport Joint */\n/* unused harmony reexport Light */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return __WEBPACK_IMPORTED_MODULE_61__Material__[\"a\"]; });\n/* unused harmony reexport BoundingBox */\n/* unused harmony reexport Frustum */\n/* unused harmony reexport Matrix2 */\n/* unused harmony reexport Matrix2d */\n/* unused harmony reexport Matrix3 */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return __WEBPACK_IMPORTED_MODULE_67__math_Matrix4__[\"a\"]; });\n/* unused harmony reexport Plane */\n/* unused harmony reexport Quaternion */\n/* unused harmony reexport Ray */\n/* unused harmony reexport Value */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"j\", function() { return __WEBPACK_IMPORTED_MODULE_73__math_Vector2__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"k\", function() { return __WEBPACK_IMPORTED_MODULE_74__math_Vector3__[\"a\"]; });\n/* unused harmony reexport Vector4 */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return __WEBPACK_IMPORTED_MODULE_76__Mesh__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return __WEBPACK_IMPORTED_MODULE_77__Node__[\"a\"]; });\n/* unused harmony reexport Renderable */\n/* unused harmony reexport Renderer */\n/* unused harmony reexport Scene */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return __WEBPACK_IMPORTED_MODULE_97__Shader__[\"a\"]; });\n/* unused harmony reexport Skeleton */\n/* unused harmony reexport StandardMaterial */\n/* unused harmony reexport StaticGeometry */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return __WEBPACK_IMPORTED_MODULE_104__Texture__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"i\", function() { return __WEBPACK_IMPORTED_MODULE_105__Texture2D__[\"a\"]; });\n/* unused harmony reexport TextureCube */\n/* unused harmony reexport Timeline */\n/* unused harmony reexport version */\n/** @namespace clay */\n/** @namespace clay.math */\n/** @namespace clay.animation */\n/** @namespace clay.async */\n/** @namespace clay.camera */\n/** @namespace clay.compositor */\n/** @namespace clay.core */\n/** @namespace clay.geometry */\n/** @namespace clay.helper */\n/** @namespace clay.light */\n/** @namespace clay.loader */\n/** @namespace clay.particle */\n/** @namespace clay.plugin */\n/** @namespace clay.prePass */\n/** @namespace clay.shader */\n/** @namespace clay.texture */\n/** @namespace clay.util */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar animation = {\n    Animator : __WEBPACK_IMPORTED_MODULE_0__animation_Animator__[\"a\" /* default */],\n    Blend1DClip : __WEBPACK_IMPORTED_MODULE_1__animation_Blend1DClip__[\"a\" /* default */],\n    Blend2DClip : __WEBPACK_IMPORTED_MODULE_2__animation_Blend2DClip__[\"a\" /* default */],\n    Clip : __WEBPACK_IMPORTED_MODULE_3__animation_Clip__[\"a\" /* default */],\n    easing : __WEBPACK_IMPORTED_MODULE_4__animation_easing__[\"a\" /* default */],\n    SamplerTrack : __WEBPACK_IMPORTED_MODULE_5__animation_SamplerTrack__[\"a\" /* default */],\n    Timeline : __WEBPACK_IMPORTED_MODULE_6__animation_Timeline__[\"a\" /* default */],\n    TrackClip : __WEBPACK_IMPORTED_MODULE_7__animation_TrackClip__[\"a\" /* default */]\n};\n\n\n\n\nvar async = {\n    Task : __WEBPACK_IMPORTED_MODULE_9__async_Task__[\"a\" /* default */],\n    TaskGroup : __WEBPACK_IMPORTED_MODULE_10__async_TaskGroup__[\"a\" /* default */]\n};\n\n\n\n\nvar camera = {\n    Orthographic : __WEBPACK_IMPORTED_MODULE_12__camera_Orthographic__[\"a\" /* default */],\n    Perspective : __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */]\n};\n\n\n\nvar compositor = {\n    Compositor : __WEBPACK_IMPORTED_MODULE_14__compositor_Compositor__[\"a\" /* default */],\n    CompositorNode : __WEBPACK_IMPORTED_MODULE_15__compositor_CompositorNode__[\"a\" /* default */],\n    createCompositor : __WEBPACK_IMPORTED_MODULE_16__compositor_createCompositor__[\"a\" /* default */],\n    FilterNode : __WEBPACK_IMPORTED_MODULE_17__compositor_FilterNode__[\"a\" /* default */],\n    Graph : __WEBPACK_IMPORTED_MODULE_18__compositor_Graph__[\"a\" /* default */],\n    Pass : __WEBPACK_IMPORTED_MODULE_19__compositor_Pass__[\"a\" /* default */],\n    SceneNode : __WEBPACK_IMPORTED_MODULE_20__compositor_SceneNode__[\"a\" /* default */],\n    TextureNode : __WEBPACK_IMPORTED_MODULE_21__compositor_TextureNode__[\"a\" /* default */],\n    TexturePool : __WEBPACK_IMPORTED_MODULE_22__compositor_TexturePool__[\"a\" /* default */]\n};\n\n\n\nvar core = {\n    Base : __WEBPACK_IMPORTED_MODULE_23__core_Base__[\"a\" /* default */],\n    Cache : __WEBPACK_IMPORTED_MODULE_24__core_Cache__[\"a\" /* default */],\n    color : __WEBPACK_IMPORTED_MODULE_25__core_color__[\"a\" /* default */],\n    glenum : __WEBPACK_IMPORTED_MODULE_26__core_glenum__[\"a\" /* default */],\n    GLInfo : __WEBPACK_IMPORTED_MODULE_27__core_GLInfo__[\"a\" /* default */],\n    LinkedList : __WEBPACK_IMPORTED_MODULE_28__core_LinkedList__[\"a\" /* default */],\n    LRU : __WEBPACK_IMPORTED_MODULE_29__core_LRU__[\"a\" /* default */],\n    mixin : {\n        extend : __WEBPACK_IMPORTED_MODULE_30__core_mixin_extend__[\"a\" /* default */],\n        notifier : __WEBPACK_IMPORTED_MODULE_31__core_mixin_notifier__[\"a\" /* default */]\n    },\n    request : __WEBPACK_IMPORTED_MODULE_32__core_request__[\"a\" /* default */],\n    util : __WEBPACK_IMPORTED_MODULE_33__core_util__[\"a\" /* default */],\n    vendor : __WEBPACK_IMPORTED_MODULE_34__core_vendor__[\"a\" /* default */]\n};\n\n\n\n\nvar deferred = {\n    GBuffer : __WEBPACK_IMPORTED_MODULE_36__deferred_GBuffer__[\"a\" /* default */],\n    Renderer : __WEBPACK_IMPORTED_MODULE_37__deferred_Renderer__[\"a\" /* default */]\n};\n\n\n\nvar dep = {\n    glmatrix : __WEBPACK_IMPORTED_MODULE_38__dep_glmatrix__[\"a\" /* default */]\n};\n\n\n\n\n\nvar geometry = {\n    Cone : __WEBPACK_IMPORTED_MODULE_41__geometry_Cone__[\"a\" /* default */],\n    Cube : __WEBPACK_IMPORTED_MODULE_42__geometry_Cube__[\"a\" /* default */],\n    Cylinder : __WEBPACK_IMPORTED_MODULE_43__geometry_Cylinder__[\"a\" /* default */],\n    ParametricSurface : __WEBPACK_IMPORTED_MODULE_44__geometry_ParametricSurface__[\"a\" /* default */],\n    Plane : __WEBPACK_IMPORTED_MODULE_45__geometry_Plane__[\"a\" /* default */],\n    Sphere : __WEBPACK_IMPORTED_MODULE_46__geometry_Sphere__[\"a\" /* default */]\n};\n\n\n\n\n\n\n\nvar light = {\n    Ambient : __WEBPACK_IMPORTED_MODULE_51__light_Ambient__[\"a\" /* default */],\n    AmbientCubemap : __WEBPACK_IMPORTED_MODULE_52__light_AmbientCubemap__[\"a\" /* default */],\n    AmbientSH : __WEBPACK_IMPORTED_MODULE_53__light_AmbientSH__[\"a\" /* default */],\n    Directional : __WEBPACK_IMPORTED_MODULE_54__light_Directional__[\"a\" /* default */],\n    Point : __WEBPACK_IMPORTED_MODULE_55__light_Point__[\"a\" /* default */],\n    Sphere : __WEBPACK_IMPORTED_MODULE_56__light_Sphere__[\"a\" /* default */],\n    Spot : __WEBPACK_IMPORTED_MODULE_57__light_Spot__[\"a\" /* default */],\n    Tube : __WEBPACK_IMPORTED_MODULE_58__light_Tube__[\"a\" /* default */]\n};\n\n\n\nvar loader = {\n    FX : __WEBPACK_IMPORTED_MODULE_59__loader_FX__[\"a\" /* default */],\n    GLTF : __WEBPACK_IMPORTED_MODULE_60__loader_GLTF__[\"a\" /* default */]\n};\n\n\n\n\nvar math = {\n    BoundingBox : __WEBPACK_IMPORTED_MODULE_62__math_BoundingBox__[\"a\" /* default */],\n    Frustum : __WEBPACK_IMPORTED_MODULE_63__math_Frustum__[\"a\" /* default */],\n    Matrix2 : __WEBPACK_IMPORTED_MODULE_64__math_Matrix2__[\"a\" /* default */],\n    Matrix2d : __WEBPACK_IMPORTED_MODULE_65__math_Matrix2d__[\"a\" /* default */],\n    Matrix3 : __WEBPACK_IMPORTED_MODULE_66__math_Matrix3__[\"a\" /* default */],\n    Matrix4 : __WEBPACK_IMPORTED_MODULE_67__math_Matrix4__[\"a\" /* default */],\n    Plane : __WEBPACK_IMPORTED_MODULE_68__math_Plane__[\"a\" /* default */],\n    Quaternion : __WEBPACK_IMPORTED_MODULE_69__math_Quaternion__[\"a\" /* default */],\n    Ray : __WEBPACK_IMPORTED_MODULE_70__math_Ray__[\"a\" /* default */],\n    util : __WEBPACK_IMPORTED_MODULE_71__math_util__[\"a\" /* default */],\n    Value : __WEBPACK_IMPORTED_MODULE_72__math_Value__[\"a\" /* default */],\n    Vector2 : __WEBPACK_IMPORTED_MODULE_73__math_Vector2__[\"a\" /* default */],\n    Vector3 : __WEBPACK_IMPORTED_MODULE_74__math_Vector3__[\"a\" /* default */],\n    Vector4 : __WEBPACK_IMPORTED_MODULE_75__math_Vector4__[\"a\" /* default */]\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar particle = {\n    Emitter : __WEBPACK_IMPORTED_MODULE_78__particle_Emitter__[\"a\" /* default */],\n    Field : __WEBPACK_IMPORTED_MODULE_79__particle_Field__[\"a\" /* default */],\n    ForceField : __WEBPACK_IMPORTED_MODULE_80__particle_ForceField__[\"a\" /* default */],\n    Particle : __WEBPACK_IMPORTED_MODULE_81__particle_Particle__[\"a\" /* default */],\n    ParticleRenderable : __WEBPACK_IMPORTED_MODULE_82__particle_ParticleRenderable__[\"a\" /* default */]\n};\n\n\n\nvar picking = {\n    PixelPicking : __WEBPACK_IMPORTED_MODULE_83__picking_PixelPicking__[\"a\" /* default */],\n    RayPicking : __WEBPACK_IMPORTED_MODULE_84__picking_RayPicking__[\"a\" /* default */]\n};\n\n\n\nvar plugin = {\n    FreeControl : __WEBPACK_IMPORTED_MODULE_85__plugin_FreeControl__[\"a\" /* default */],\n    GamepadControl : __WEBPACK_IMPORTED_MODULE_86__plugin_GamepadControl__[\"a\" /* default */],\n    GestureMgr : __WEBPACK_IMPORTED_MODULE_87__plugin_GestureMgr__[\"a\" /* default */],\n    InfinitePlane : __WEBPACK_IMPORTED_MODULE_88__plugin_InfinitePlane__[\"a\" /* default */],\n    OrbitControl : __WEBPACK_IMPORTED_MODULE_89__plugin_OrbitControl__[\"a\" /* default */],\n    Skybox : __WEBPACK_IMPORTED_MODULE_90__plugin_Skybox__[\"a\" /* default */],\n    Skydome : __WEBPACK_IMPORTED_MODULE_91__plugin_Skydome__[\"a\" /* default */]\n};\n\n\n\nvar prePass = {\n    EnvironmentMap : __WEBPACK_IMPORTED_MODULE_92__prePass_EnvironmentMap__[\"a\" /* default */],\n    ShadowMap : __WEBPACK_IMPORTED_MODULE_93__prePass_ShadowMap__[\"a\" /* default */]\n};\n\n\n\n\n\n\n\nvar shader = {\n    library : __WEBPACK_IMPORTED_MODULE_98__shader_library__[\"a\" /* default */],\n    registerBuiltinCompositor : __WEBPACK_IMPORTED_MODULE_99__shader_registerBuiltinCompositor__[\"a\" /* default */],\n    source : {\n    header : {\n        light : __WEBPACK_IMPORTED_MODULE_100__shader_source_header_light__[\"a\" /* default */]\n    }\n    }\n};\n\n\n\n\n\n\n\n\n\n\nvar util = {\n    cubemap : __WEBPACK_IMPORTED_MODULE_108__util_cubemap__[\"a\" /* default */],\n    dds : __WEBPACK_IMPORTED_MODULE_109__util_dds__[\"a\" /* default */],\n    delaunay : __WEBPACK_IMPORTED_MODULE_110__util_delaunay__[\"a\" /* default */],\n    hdr : __WEBPACK_IMPORTED_MODULE_111__util_hdr__[\"a\" /* default */],\n    ktx : __WEBPACK_IMPORTED_MODULE_112__util_ktx__[\"a\" /* default */],\n    mesh : __WEBPACK_IMPORTED_MODULE_113__util_mesh__[\"a\" /* default */],\n    sh : __WEBPACK_IMPORTED_MODULE_114__util_sh__[\"a\" /* default */],\n    texture : __WEBPACK_IMPORTED_MODULE_115__util_texture__[\"a\" /* default */],\n    transferable : __WEBPACK_IMPORTED_MODULE_116__util_transferable__[\"a\" /* default */]\n};\n\n\n\n\nvar vr = {\n    CardboardDistorter : __WEBPACK_IMPORTED_MODULE_118__vr_CardboardDistorter__[\"a\" /* default */],\n    StereoCamera : __WEBPACK_IMPORTED_MODULE_119__vr_StereoCamera__[\"a\" /* default */]\n};\n\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jbGF5Z2wuanM/ZmY2NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiogQG5hbWVzcGFjZSBjbGF5ICovXG4vKiogQG5hbWVzcGFjZSBjbGF5Lm1hdGggKi9cbi8qKiBAbmFtZXNwYWNlIGNsYXkuYW5pbWF0aW9uICovXG4vKiogQG5hbWVzcGFjZSBjbGF5LmFzeW5jICovXG4vKiogQG5hbWVzcGFjZSBjbGF5LmNhbWVyYSAqL1xuLyoqIEBuYW1lc3BhY2UgY2xheS5jb21wb3NpdG9yICovXG4vKiogQG5hbWVzcGFjZSBjbGF5LmNvcmUgKi9cbi8qKiBAbmFtZXNwYWNlIGNsYXkuZ2VvbWV0cnkgKi9cbi8qKiBAbmFtZXNwYWNlIGNsYXkuaGVscGVyICovXG4vKiogQG5hbWVzcGFjZSBjbGF5LmxpZ2h0ICovXG4vKiogQG5hbWVzcGFjZSBjbGF5LmxvYWRlciAqL1xuLyoqIEBuYW1lc3BhY2UgY2xheS5wYXJ0aWNsZSAqL1xuLyoqIEBuYW1lc3BhY2UgY2xheS5wbHVnaW4gKi9cbi8qKiBAbmFtZXNwYWNlIGNsYXkucHJlUGFzcyAqL1xuLyoqIEBuYW1lc3BhY2UgY2xheS5zaGFkZXIgKi9cbi8qKiBAbmFtZXNwYWNlIGNsYXkudGV4dHVyZSAqL1xuLyoqIEBuYW1lc3BhY2UgY2xheS51dGlsICovXG5cbmltcG9ydCBBbmltYXRvciQwIGZyb20gJy4vYW5pbWF0aW9uL0FuaW1hdG9yJztcbmltcG9ydCBCbGVuZDFEQ2xpcCQxIGZyb20gJy4vYW5pbWF0aW9uL0JsZW5kMURDbGlwJztcbmltcG9ydCBCbGVuZDJEQ2xpcCQyIGZyb20gJy4vYW5pbWF0aW9uL0JsZW5kMkRDbGlwJztcbmltcG9ydCBDbGlwJDMgZnJvbSAnLi9hbmltYXRpb24vQ2xpcCc7XG5pbXBvcnQgZWFzaW5nJDQgZnJvbSAnLi9hbmltYXRpb24vZWFzaW5nJztcbmltcG9ydCBTYW1wbGVyVHJhY2skNSBmcm9tICcuL2FuaW1hdGlvbi9TYW1wbGVyVHJhY2snO1xuaW1wb3J0IFRpbWVsaW5lJDYgZnJvbSAnLi9hbmltYXRpb24vVGltZWxpbmUnO1xuaW1wb3J0IFRyYWNrQ2xpcCQ3IGZyb20gJy4vYW5pbWF0aW9uL1RyYWNrQ2xpcCc7XG5pbXBvcnQgYXBwbGljYXRpb24kOCBmcm9tICcuL2FwcGxpY2F0aW9uJztcbmltcG9ydCBUYXNrJDkgZnJvbSAnLi9hc3luYy9UYXNrJztcbmltcG9ydCBUYXNrR3JvdXAkMTAgZnJvbSAnLi9hc3luYy9UYXNrR3JvdXAnO1xuaW1wb3J0IENhbWVyYSQxMSBmcm9tICcuL0NhbWVyYSc7XG5pbXBvcnQgT3J0aG9ncmFwaGljJDEyIGZyb20gJy4vY2FtZXJhL09ydGhvZ3JhcGhpYyc7XG5pbXBvcnQgUGVyc3BlY3RpdmUkMTMgZnJvbSAnLi9jYW1lcmEvUGVyc3BlY3RpdmUnO1xuaW1wb3J0IENvbXBvc2l0b3IkMTQgZnJvbSAnLi9jb21wb3NpdG9yL0NvbXBvc2l0b3InO1xuaW1wb3J0IENvbXBvc2l0b3JOb2RlJDE1IGZyb20gJy4vY29tcG9zaXRvci9Db21wb3NpdG9yTm9kZSc7XG5pbXBvcnQgY3JlYXRlQ29tcG9zaXRvciQxNiBmcm9tICcuL2NvbXBvc2l0b3IvY3JlYXRlQ29tcG9zaXRvcic7XG5pbXBvcnQgRmlsdGVyTm9kZSQxNyBmcm9tICcuL2NvbXBvc2l0b3IvRmlsdGVyTm9kZSc7XG5pbXBvcnQgR3JhcGgkMTggZnJvbSAnLi9jb21wb3NpdG9yL0dyYXBoJztcbmltcG9ydCBQYXNzJDE5IGZyb20gJy4vY29tcG9zaXRvci9QYXNzJztcbmltcG9ydCBTY2VuZU5vZGUkMjAgZnJvbSAnLi9jb21wb3NpdG9yL1NjZW5lTm9kZSc7XG5pbXBvcnQgVGV4dHVyZU5vZGUkMjEgZnJvbSAnLi9jb21wb3NpdG9yL1RleHR1cmVOb2RlJztcbmltcG9ydCBUZXh0dXJlUG9vbCQyMiBmcm9tICcuL2NvbXBvc2l0b3IvVGV4dHVyZVBvb2wnO1xuaW1wb3J0IEJhc2UkMjMgZnJvbSAnLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IENhY2hlJDI0IGZyb20gJy4vY29yZS9DYWNoZSc7XG5pbXBvcnQgY29sb3IkMjUgZnJvbSAnLi9jb3JlL2NvbG9yJztcbmltcG9ydCBnbGVudW0kMjYgZnJvbSAnLi9jb3JlL2dsZW51bSc7XG5pbXBvcnQgR0xJbmZvJDI3IGZyb20gJy4vY29yZS9HTEluZm8nO1xuaW1wb3J0IExpbmtlZExpc3QkMjggZnJvbSAnLi9jb3JlL0xpbmtlZExpc3QnO1xuaW1wb3J0IExSVSQyOSBmcm9tICcuL2NvcmUvTFJVJztcbmltcG9ydCBleHRlbmQkMzAgZnJvbSAnLi9jb3JlL21peGluL2V4dGVuZCc7XG5pbXBvcnQgbm90aWZpZXIkMzEgZnJvbSAnLi9jb3JlL21peGluL25vdGlmaWVyJztcbmltcG9ydCByZXF1ZXN0JDMyIGZyb20gJy4vY29yZS9yZXF1ZXN0JztcbmltcG9ydCB1dGlsJDMzIGZyb20gJy4vY29yZS91dGlsJztcbmltcG9ydCB2ZW5kb3IkMzQgZnJvbSAnLi9jb3JlL3ZlbmRvcic7XG5pbXBvcnQgY3JlYXRlQ29tcG9zaXRvciQzNSBmcm9tICcuL2NyZWF0ZUNvbXBvc2l0b3InO1xuaW1wb3J0IEdCdWZmZXIkMzYgZnJvbSAnLi9kZWZlcnJlZC9HQnVmZmVyJztcbmltcG9ydCBSZW5kZXJlciQzNyBmcm9tICcuL2RlZmVycmVkL1JlbmRlcmVyJztcbmltcG9ydCBnbG1hdHJpeCQzOCBmcm9tICcuL2RlcC9nbG1hdHJpeCc7XG5pbXBvcnQgRnJhbWVCdWZmZXIkMzkgZnJvbSAnLi9GcmFtZUJ1ZmZlcic7XG5pbXBvcnQgR2VvbWV0cnkkNDAgZnJvbSAnLi9HZW9tZXRyeSc7XG5pbXBvcnQgQ29uZSQ0MSBmcm9tICcuL2dlb21ldHJ5L0NvbmUnO1xuaW1wb3J0IEN1YmUkNDIgZnJvbSAnLi9nZW9tZXRyeS9DdWJlJztcbmltcG9ydCBDeWxpbmRlciQ0MyBmcm9tICcuL2dlb21ldHJ5L0N5bGluZGVyJztcbmltcG9ydCBQYXJhbWV0cmljU3VyZmFjZSQ0NCBmcm9tICcuL2dlb21ldHJ5L1BhcmFtZXRyaWNTdXJmYWNlJztcbmltcG9ydCBQbGFuZSQ0NSBmcm9tICcuL2dlb21ldHJ5L1BsYW5lJztcbmltcG9ydCBTcGhlcmUkNDYgZnJvbSAnLi9nZW9tZXRyeS9TcGhlcmUnO1xuaW1wb3J0IEdlb21ldHJ5QmFzZSQ0NyBmcm9tICcuL0dlb21ldHJ5QmFzZSc7XG5pbXBvcnQgSW5zdGFuY2VkTWVzaCQ0OCBmcm9tICcuL0luc3RhbmNlZE1lc2gnO1xuaW1wb3J0IEpvaW50JDQ5IGZyb20gJy4vSm9pbnQnO1xuaW1wb3J0IExpZ2h0JDUwIGZyb20gJy4vTGlnaHQnO1xuaW1wb3J0IEFtYmllbnQkNTEgZnJvbSAnLi9saWdodC9BbWJpZW50JztcbmltcG9ydCBBbWJpZW50Q3ViZW1hcCQ1MiBmcm9tICcuL2xpZ2h0L0FtYmllbnRDdWJlbWFwJztcbmltcG9ydCBBbWJpZW50U0gkNTMgZnJvbSAnLi9saWdodC9BbWJpZW50U0gnO1xuaW1wb3J0IERpcmVjdGlvbmFsJDU0IGZyb20gJy4vbGlnaHQvRGlyZWN0aW9uYWwnO1xuaW1wb3J0IFBvaW50JDU1IGZyb20gJy4vbGlnaHQvUG9pbnQnO1xuaW1wb3J0IFNwaGVyZSQ1NiBmcm9tICcuL2xpZ2h0L1NwaGVyZSc7XG5pbXBvcnQgU3BvdCQ1NyBmcm9tICcuL2xpZ2h0L1Nwb3QnO1xuaW1wb3J0IFR1YmUkNTggZnJvbSAnLi9saWdodC9UdWJlJztcbmltcG9ydCBGWCQ1OSBmcm9tICcuL2xvYWRlci9GWCc7XG5pbXBvcnQgR0xURiQ2MCBmcm9tICcuL2xvYWRlci9HTFRGJztcbmltcG9ydCBNYXRlcmlhbCQ2MSBmcm9tICcuL01hdGVyaWFsJztcbmltcG9ydCBCb3VuZGluZ0JveCQ2MiBmcm9tICcuL21hdGgvQm91bmRpbmdCb3gnO1xuaW1wb3J0IEZydXN0dW0kNjMgZnJvbSAnLi9tYXRoL0ZydXN0dW0nO1xuaW1wb3J0IE1hdHJpeDIkNjQgZnJvbSAnLi9tYXRoL01hdHJpeDInO1xuaW1wb3J0IE1hdHJpeDJkJDY1IGZyb20gJy4vbWF0aC9NYXRyaXgyZCc7XG5pbXBvcnQgTWF0cml4MyQ2NiBmcm9tICcuL21hdGgvTWF0cml4Myc7XG5pbXBvcnQgTWF0cml4NCQ2NyBmcm9tICcuL21hdGgvTWF0cml4NCc7XG5pbXBvcnQgUGxhbmUkNjggZnJvbSAnLi9tYXRoL1BsYW5lJztcbmltcG9ydCBRdWF0ZXJuaW9uJDY5IGZyb20gJy4vbWF0aC9RdWF0ZXJuaW9uJztcbmltcG9ydCBSYXkkNzAgZnJvbSAnLi9tYXRoL1JheSc7XG5pbXBvcnQgdXRpbCQ3MSBmcm9tICcuL21hdGgvdXRpbCc7XG5pbXBvcnQgVmFsdWUkNzIgZnJvbSAnLi9tYXRoL1ZhbHVlJztcbmltcG9ydCBWZWN0b3IyJDczIGZyb20gJy4vbWF0aC9WZWN0b3IyJztcbmltcG9ydCBWZWN0b3IzJDc0IGZyb20gJy4vbWF0aC9WZWN0b3IzJztcbmltcG9ydCBWZWN0b3I0JDc1IGZyb20gJy4vbWF0aC9WZWN0b3I0JztcbmltcG9ydCBNZXNoJDc2IGZyb20gJy4vTWVzaCc7XG5pbXBvcnQgTm9kZSQ3NyBmcm9tICcuL05vZGUnO1xuaW1wb3J0IEVtaXR0ZXIkNzggZnJvbSAnLi9wYXJ0aWNsZS9FbWl0dGVyJztcbmltcG9ydCBGaWVsZCQ3OSBmcm9tICcuL3BhcnRpY2xlL0ZpZWxkJztcbmltcG9ydCBGb3JjZUZpZWxkJDgwIGZyb20gJy4vcGFydGljbGUvRm9yY2VGaWVsZCc7XG5pbXBvcnQgUGFydGljbGUkODEgZnJvbSAnLi9wYXJ0aWNsZS9QYXJ0aWNsZSc7XG5pbXBvcnQgUGFydGljbGVSZW5kZXJhYmxlJDgyIGZyb20gJy4vcGFydGljbGUvUGFydGljbGVSZW5kZXJhYmxlJztcbmltcG9ydCBQaXhlbFBpY2tpbmckODMgZnJvbSAnLi9waWNraW5nL1BpeGVsUGlja2luZyc7XG5pbXBvcnQgUmF5UGlja2luZyQ4NCBmcm9tICcuL3BpY2tpbmcvUmF5UGlja2luZyc7XG5pbXBvcnQgRnJlZUNvbnRyb2wkODUgZnJvbSAnLi9wbHVnaW4vRnJlZUNvbnRyb2wnO1xuaW1wb3J0IEdhbWVwYWRDb250cm9sJDg2IGZyb20gJy4vcGx1Z2luL0dhbWVwYWRDb250cm9sJztcbmltcG9ydCBHZXN0dXJlTWdyJDg3IGZyb20gJy4vcGx1Z2luL0dlc3R1cmVNZ3InO1xuaW1wb3J0IEluZmluaXRlUGxhbmUkODggZnJvbSAnLi9wbHVnaW4vSW5maW5pdGVQbGFuZSc7XG5pbXBvcnQgT3JiaXRDb250cm9sJDg5IGZyb20gJy4vcGx1Z2luL09yYml0Q29udHJvbCc7XG5pbXBvcnQgU2t5Ym94JDkwIGZyb20gJy4vcGx1Z2luL1NreWJveCc7XG5pbXBvcnQgU2t5ZG9tZSQ5MSBmcm9tICcuL3BsdWdpbi9Ta3lkb21lJztcbmltcG9ydCBFbnZpcm9ubWVudE1hcCQ5MiBmcm9tICcuL3ByZVBhc3MvRW52aXJvbm1lbnRNYXAnO1xuaW1wb3J0IFNoYWRvd01hcCQ5MyBmcm9tICcuL3ByZVBhc3MvU2hhZG93TWFwJztcbmltcG9ydCBSZW5kZXJhYmxlJDk0IGZyb20gJy4vUmVuZGVyYWJsZSc7XG5pbXBvcnQgUmVuZGVyZXIkOTUgZnJvbSAnLi9SZW5kZXJlcic7XG5pbXBvcnQgU2NlbmUkOTYgZnJvbSAnLi9TY2VuZSc7XG5pbXBvcnQgU2hhZGVyJDk3IGZyb20gJy4vU2hhZGVyJztcbmltcG9ydCBsaWJyYXJ5JDk4IGZyb20gJy4vc2hhZGVyL2xpYnJhcnknO1xuaW1wb3J0IHJlZ2lzdGVyQnVpbHRpbkNvbXBvc2l0b3IkOTkgZnJvbSAnLi9zaGFkZXIvcmVnaXN0ZXJCdWlsdGluQ29tcG9zaXRvcic7XG5pbXBvcnQgbGlnaHQkMTAwIGZyb20gJy4vc2hhZGVyL3NvdXJjZS9oZWFkZXIvbGlnaHQnO1xuaW1wb3J0IFNrZWxldG9uJDEwMSBmcm9tICcuL1NrZWxldG9uJztcbmltcG9ydCBTdGFuZGFyZE1hdGVyaWFsJDEwMiBmcm9tICcuL1N0YW5kYXJkTWF0ZXJpYWwnO1xuaW1wb3J0IFN0YXRpY0dlb21ldHJ5JDEwMyBmcm9tICcuL1N0YXRpY0dlb21ldHJ5JztcbmltcG9ydCBUZXh0dXJlJDEwNCBmcm9tICcuL1RleHR1cmUnO1xuaW1wb3J0IFRleHR1cmUyRCQxMDUgZnJvbSAnLi9UZXh0dXJlMkQnO1xuaW1wb3J0IFRleHR1cmVDdWJlJDEwNiBmcm9tICcuL1RleHR1cmVDdWJlJztcbmltcG9ydCBUaW1lbGluZSQxMDcgZnJvbSAnLi9UaW1lbGluZSc7XG5pbXBvcnQgY3ViZW1hcCQxMDggZnJvbSAnLi91dGlsL2N1YmVtYXAnO1xuaW1wb3J0IGRkcyQxMDkgZnJvbSAnLi91dGlsL2Rkcyc7XG5pbXBvcnQgZGVsYXVuYXkkMTEwIGZyb20gJy4vdXRpbC9kZWxhdW5heSc7XG5pbXBvcnQgaGRyJDExMSBmcm9tICcuL3V0aWwvaGRyJztcbmltcG9ydCBrdHgkMTEyIGZyb20gJy4vdXRpbC9rdHgnO1xuaW1wb3J0IG1lc2gkMTEzIGZyb20gJy4vdXRpbC9tZXNoJztcbmltcG9ydCBzaCQxMTQgZnJvbSAnLi91dGlsL3NoJztcbmltcG9ydCB0ZXh0dXJlJDExNSBmcm9tICcuL3V0aWwvdGV4dHVyZSc7XG5pbXBvcnQgdHJhbnNmZXJhYmxlJDExNiBmcm9tICcuL3V0aWwvdHJhbnNmZXJhYmxlJztcbmltcG9ydCB2ZXJzaW9uJDExNyBmcm9tICcuL3ZlcnNpb24nO1xuaW1wb3J0IENhcmRib2FyZERpc3RvcnRlciQxMTggZnJvbSAnLi92ci9DYXJkYm9hcmREaXN0b3J0ZXInO1xuaW1wb3J0IFN0ZXJlb0NhbWVyYSQxMTkgZnJvbSAnLi92ci9TdGVyZW9DYW1lcmEnO1xuXG5cbnZhciBhbmltYXRpb24gPSB7XG4gICAgQW5pbWF0b3IgOiBBbmltYXRvciQwLFxuICAgIEJsZW5kMURDbGlwIDogQmxlbmQxRENsaXAkMSxcbiAgICBCbGVuZDJEQ2xpcCA6IEJsZW5kMkRDbGlwJDIsXG4gICAgQ2xpcCA6IENsaXAkMyxcbiAgICBlYXNpbmcgOiBlYXNpbmckNCxcbiAgICBTYW1wbGVyVHJhY2sgOiBTYW1wbGVyVHJhY2skNSxcbiAgICBUaW1lbGluZSA6IFRpbWVsaW5lJDYsXG4gICAgVHJhY2tDbGlwIDogVHJhY2tDbGlwJDdcbn07XG5leHBvcnQgeyBhbmltYXRpb24gfTtcblxuZXhwb3J0IHsgYXBwbGljYXRpb24kOCBhcyBhcHBsaWNhdGlvbiB9O1xuXG52YXIgYXN5bmMgPSB7XG4gICAgVGFzayA6IFRhc2skOSxcbiAgICBUYXNrR3JvdXAgOiBUYXNrR3JvdXAkMTBcbn07XG5leHBvcnQgeyBhc3luYyB9O1xuXG5leHBvcnQgeyBDYW1lcmEkMTEgYXMgQ2FtZXJhIH07XG5cbnZhciBjYW1lcmEgPSB7XG4gICAgT3J0aG9ncmFwaGljIDogT3J0aG9ncmFwaGljJDEyLFxuICAgIFBlcnNwZWN0aXZlIDogUGVyc3BlY3RpdmUkMTNcbn07XG5leHBvcnQgeyBjYW1lcmEgfTtcblxuXG52YXIgY29tcG9zaXRvciA9IHtcbiAgICBDb21wb3NpdG9yIDogQ29tcG9zaXRvciQxNCxcbiAgICBDb21wb3NpdG9yTm9kZSA6IENvbXBvc2l0b3JOb2RlJDE1LFxuICAgIGNyZWF0ZUNvbXBvc2l0b3IgOiBjcmVhdGVDb21wb3NpdG9yJDE2LFxuICAgIEZpbHRlck5vZGUgOiBGaWx0ZXJOb2RlJDE3LFxuICAgIEdyYXBoIDogR3JhcGgkMTgsXG4gICAgUGFzcyA6IFBhc3MkMTksXG4gICAgU2NlbmVOb2RlIDogU2NlbmVOb2RlJDIwLFxuICAgIFRleHR1cmVOb2RlIDogVGV4dHVyZU5vZGUkMjEsXG4gICAgVGV4dHVyZVBvb2wgOiBUZXh0dXJlUG9vbCQyMlxufTtcbmV4cG9ydCB7IGNvbXBvc2l0b3IgfTtcblxuXG52YXIgY29yZSA9IHtcbiAgICBCYXNlIDogQmFzZSQyMyxcbiAgICBDYWNoZSA6IENhY2hlJDI0LFxuICAgIGNvbG9yIDogY29sb3IkMjUsXG4gICAgZ2xlbnVtIDogZ2xlbnVtJDI2LFxuICAgIEdMSW5mbyA6IEdMSW5mbyQyNyxcbiAgICBMaW5rZWRMaXN0IDogTGlua2VkTGlzdCQyOCxcbiAgICBMUlUgOiBMUlUkMjksXG4gICAgbWl4aW4gOiB7XG4gICAgICAgIGV4dGVuZCA6IGV4dGVuZCQzMCxcbiAgICAgICAgbm90aWZpZXIgOiBub3RpZmllciQzMVxuICAgIH0sXG4gICAgcmVxdWVzdCA6IHJlcXVlc3QkMzIsXG4gICAgdXRpbCA6IHV0aWwkMzMsXG4gICAgdmVuZG9yIDogdmVuZG9yJDM0XG59O1xuZXhwb3J0IHsgY29yZSB9O1xuXG5leHBvcnQgeyBjcmVhdGVDb21wb3NpdG9yJDM1IGFzIGNyZWF0ZUNvbXBvc2l0b3IgfTtcblxudmFyIGRlZmVycmVkID0ge1xuICAgIEdCdWZmZXIgOiBHQnVmZmVyJDM2LFxuICAgIFJlbmRlcmVyIDogUmVuZGVyZXIkMzdcbn07XG5leHBvcnQgeyBkZWZlcnJlZCB9O1xuXG5cbnZhciBkZXAgPSB7XG4gICAgZ2xtYXRyaXggOiBnbG1hdHJpeCQzOFxufTtcbmV4cG9ydCB7IGRlcCB9O1xuXG5leHBvcnQgeyBGcmFtZUJ1ZmZlciQzOSBhcyBGcmFtZUJ1ZmZlciB9O1xuZXhwb3J0IHsgR2VvbWV0cnkkNDAgYXMgR2VvbWV0cnkgfTtcblxudmFyIGdlb21ldHJ5ID0ge1xuICAgIENvbmUgOiBDb25lJDQxLFxuICAgIEN1YmUgOiBDdWJlJDQyLFxuICAgIEN5bGluZGVyIDogQ3lsaW5kZXIkNDMsXG4gICAgUGFyYW1ldHJpY1N1cmZhY2UgOiBQYXJhbWV0cmljU3VyZmFjZSQ0NCxcbiAgICBQbGFuZSA6IFBsYW5lJDQ1LFxuICAgIFNwaGVyZSA6IFNwaGVyZSQ0NlxufTtcbmV4cG9ydCB7IGdlb21ldHJ5IH07XG5cbmV4cG9ydCB7IEdlb21ldHJ5QmFzZSQ0NyBhcyBHZW9tZXRyeUJhc2UgfTtcbmV4cG9ydCB7IEluc3RhbmNlZE1lc2gkNDggYXMgSW5zdGFuY2VkTWVzaCB9O1xuZXhwb3J0IHsgSm9pbnQkNDkgYXMgSm9pbnQgfTtcbmV4cG9ydCB7IExpZ2h0JDUwIGFzIExpZ2h0IH07XG5cbnZhciBsaWdodCA9IHtcbiAgICBBbWJpZW50IDogQW1iaWVudCQ1MSxcbiAgICBBbWJpZW50Q3ViZW1hcCA6IEFtYmllbnRDdWJlbWFwJDUyLFxuICAgIEFtYmllbnRTSCA6IEFtYmllbnRTSCQ1MyxcbiAgICBEaXJlY3Rpb25hbCA6IERpcmVjdGlvbmFsJDU0LFxuICAgIFBvaW50IDogUG9pbnQkNTUsXG4gICAgU3BoZXJlIDogU3BoZXJlJDU2LFxuICAgIFNwb3QgOiBTcG90JDU3LFxuICAgIFR1YmUgOiBUdWJlJDU4XG59O1xuZXhwb3J0IHsgbGlnaHQgfTtcblxuXG52YXIgbG9hZGVyID0ge1xuICAgIEZYIDogRlgkNTksXG4gICAgR0xURiA6IEdMVEYkNjBcbn07XG5leHBvcnQgeyBsb2FkZXIgfTtcblxuZXhwb3J0IHsgTWF0ZXJpYWwkNjEgYXMgTWF0ZXJpYWwgfTtcblxudmFyIG1hdGggPSB7XG4gICAgQm91bmRpbmdCb3ggOiBCb3VuZGluZ0JveCQ2MixcbiAgICBGcnVzdHVtIDogRnJ1c3R1bSQ2MyxcbiAgICBNYXRyaXgyIDogTWF0cml4MiQ2NCxcbiAgICBNYXRyaXgyZCA6IE1hdHJpeDJkJDY1LFxuICAgIE1hdHJpeDMgOiBNYXRyaXgzJDY2LFxuICAgIE1hdHJpeDQgOiBNYXRyaXg0JDY3LFxuICAgIFBsYW5lIDogUGxhbmUkNjgsXG4gICAgUXVhdGVybmlvbiA6IFF1YXRlcm5pb24kNjksXG4gICAgUmF5IDogUmF5JDcwLFxuICAgIHV0aWwgOiB1dGlsJDcxLFxuICAgIFZhbHVlIDogVmFsdWUkNzIsXG4gICAgVmVjdG9yMiA6IFZlY3RvcjIkNzMsXG4gICAgVmVjdG9yMyA6IFZlY3RvcjMkNzQsXG4gICAgVmVjdG9yNCA6IFZlY3RvcjQkNzVcbn07XG5leHBvcnQgeyBtYXRoIH07XG5leHBvcnQgeyBCb3VuZGluZ0JveCQ2MiBhcyBCb3VuZGluZ0JveCB9O1xuZXhwb3J0IHsgRnJ1c3R1bSQ2MyBhcyBGcnVzdHVtIH07XG5leHBvcnQgeyBNYXRyaXgyJDY0IGFzIE1hdHJpeDIgfTtcbmV4cG9ydCB7IE1hdHJpeDJkJDY1IGFzIE1hdHJpeDJkIH07XG5leHBvcnQgeyBNYXRyaXgzJDY2IGFzIE1hdHJpeDMgfTtcbmV4cG9ydCB7IE1hdHJpeDQkNjcgYXMgTWF0cml4NCB9O1xuZXhwb3J0IHsgUGxhbmUkNjggYXMgUGxhbmUgfTtcbmV4cG9ydCB7IFF1YXRlcm5pb24kNjkgYXMgUXVhdGVybmlvbiB9O1xuZXhwb3J0IHsgUmF5JDcwIGFzIFJheSB9O1xuZXhwb3J0IHsgVmFsdWUkNzIgYXMgVmFsdWUgfTtcbmV4cG9ydCB7IFZlY3RvcjIkNzMgYXMgVmVjdG9yMiB9O1xuZXhwb3J0IHsgVmVjdG9yMyQ3NCBhcyBWZWN0b3IzIH07XG5leHBvcnQgeyBWZWN0b3I0JDc1IGFzIFZlY3RvcjQgfTtcblxuZXhwb3J0IHsgTWVzaCQ3NiBhcyBNZXNoIH07XG5leHBvcnQgeyBOb2RlJDc3IGFzIE5vZGUgfTtcblxudmFyIHBhcnRpY2xlID0ge1xuICAgIEVtaXR0ZXIgOiBFbWl0dGVyJDc4LFxuICAgIEZpZWxkIDogRmllbGQkNzksXG4gICAgRm9yY2VGaWVsZCA6IEZvcmNlRmllbGQkODAsXG4gICAgUGFydGljbGUgOiBQYXJ0aWNsZSQ4MSxcbiAgICBQYXJ0aWNsZVJlbmRlcmFibGUgOiBQYXJ0aWNsZVJlbmRlcmFibGUkODJcbn07XG5leHBvcnQgeyBwYXJ0aWNsZSB9O1xuXG5cbnZhciBwaWNraW5nID0ge1xuICAgIFBpeGVsUGlja2luZyA6IFBpeGVsUGlja2luZyQ4MyxcbiAgICBSYXlQaWNraW5nIDogUmF5UGlja2luZyQ4NFxufTtcbmV4cG9ydCB7IHBpY2tpbmcgfTtcblxuXG52YXIgcGx1Z2luID0ge1xuICAgIEZyZWVDb250cm9sIDogRnJlZUNvbnRyb2wkODUsXG4gICAgR2FtZXBhZENvbnRyb2wgOiBHYW1lcGFkQ29udHJvbCQ4NixcbiAgICBHZXN0dXJlTWdyIDogR2VzdHVyZU1nciQ4NyxcbiAgICBJbmZpbml0ZVBsYW5lIDogSW5maW5pdGVQbGFuZSQ4OCxcbiAgICBPcmJpdENvbnRyb2wgOiBPcmJpdENvbnRyb2wkODksXG4gICAgU2t5Ym94IDogU2t5Ym94JDkwLFxuICAgIFNreWRvbWUgOiBTa3lkb21lJDkxXG59O1xuZXhwb3J0IHsgcGx1Z2luIH07XG5cblxudmFyIHByZVBhc3MgPSB7XG4gICAgRW52aXJvbm1lbnRNYXAgOiBFbnZpcm9ubWVudE1hcCQ5MixcbiAgICBTaGFkb3dNYXAgOiBTaGFkb3dNYXAkOTNcbn07XG5leHBvcnQgeyBwcmVQYXNzIH07XG5cbmV4cG9ydCB7IFJlbmRlcmFibGUkOTQgYXMgUmVuZGVyYWJsZSB9O1xuZXhwb3J0IHsgUmVuZGVyZXIkOTUgYXMgUmVuZGVyZXIgfTtcbmV4cG9ydCB7IFNjZW5lJDk2IGFzIFNjZW5lIH07XG5leHBvcnQgeyBTaGFkZXIkOTcgYXMgU2hhZGVyIH07XG5cbnZhciBzaGFkZXIgPSB7XG4gICAgbGlicmFyeSA6IGxpYnJhcnkkOTgsXG4gICAgcmVnaXN0ZXJCdWlsdGluQ29tcG9zaXRvciA6IHJlZ2lzdGVyQnVpbHRpbkNvbXBvc2l0b3IkOTksXG4gICAgc291cmNlIDoge1xuICAgIGhlYWRlciA6IHtcbiAgICAgICAgbGlnaHQgOiBsaWdodCQxMDBcbiAgICB9XG4gICAgfVxufTtcbmV4cG9ydCB7IHNoYWRlciB9O1xuXG5leHBvcnQgeyBTa2VsZXRvbiQxMDEgYXMgU2tlbGV0b24gfTtcbmV4cG9ydCB7IFN0YW5kYXJkTWF0ZXJpYWwkMTAyIGFzIFN0YW5kYXJkTWF0ZXJpYWwgfTtcbmV4cG9ydCB7IFN0YXRpY0dlb21ldHJ5JDEwMyBhcyBTdGF0aWNHZW9tZXRyeSB9O1xuZXhwb3J0IHsgVGV4dHVyZSQxMDQgYXMgVGV4dHVyZSB9O1xuZXhwb3J0IHsgVGV4dHVyZTJEJDEwNSBhcyBUZXh0dXJlMkQgfTtcbmV4cG9ydCB7IFRleHR1cmVDdWJlJDEwNiBhcyBUZXh0dXJlQ3ViZSB9O1xuZXhwb3J0IHsgVGltZWxpbmUkMTA3IGFzIFRpbWVsaW5lIH07XG5cbnZhciB1dGlsID0ge1xuICAgIGN1YmVtYXAgOiBjdWJlbWFwJDEwOCxcbiAgICBkZHMgOiBkZHMkMTA5LFxuICAgIGRlbGF1bmF5IDogZGVsYXVuYXkkMTEwLFxuICAgIGhkciA6IGhkciQxMTEsXG4gICAga3R4IDoga3R4JDExMixcbiAgICBtZXNoIDogbWVzaCQxMTMsXG4gICAgc2ggOiBzaCQxMTQsXG4gICAgdGV4dHVyZSA6IHRleHR1cmUkMTE1LFxuICAgIHRyYW5zZmVyYWJsZSA6IHRyYW5zZmVyYWJsZSQxMTZcbn07XG5leHBvcnQgeyB1dGlsIH07XG5cbmV4cG9ydCB7IHZlcnNpb24kMTE3IGFzIHZlcnNpb24gfTtcblxudmFyIHZyID0ge1xuICAgIENhcmRib2FyZERpc3RvcnRlciA6IENhcmRib2FyZERpc3RvcnRlciQxMTgsXG4gICAgU3RlcmVvQ2FtZXJhIDogU3RlcmVvQ2FtZXJhJDExOVxufTtcbmV4cG9ydCB7IHZyIH07XG47XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2NsYXlnbC5qc1xuLy8gbW9kdWxlIGlkID0gMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///25\n");

/***/ }),
/* 26 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__ = __webpack_require__(45);\n\n\n/**\n * @constructor\n * @alias clay.Vector2\n * @param {number} x\n * @param {number} y\n */\nvar Vector2 = function(x, y) {\n\n    x = x || 0;\n    y = y || 0;\n\n    /**\n     * Storage of Vector2, read and write of x, y will change the values in array\n     * All methods also operate on the array instead of x, y components\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Vector2#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].fromValues(x, y);\n\n    /**\n     * Dirty flag is used by the Node to determine\n     * if the matrix is updated to latest\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Vector2#\n     */\n    this._dirty = true;\n};\n\nVector2.prototype = {\n\n    constructor: Vector2,\n\n    /**\n     * Add b to self\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    add: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].add(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x and y components\n     * @param  {number}  x\n     * @param  {number}  y\n     * @return {clay.Vector2}\n     */\n    set: function(x, y) {\n        this.array[0] = x;\n        this.array[1] = y;\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x and y components from array\n     * @param  {Float32Array|number[]} arr\n     * @return {clay.Vector2}\n     */\n    setArray: function(arr) {\n        this.array[0] = arr[0];\n        this.array[1] = arr[1];\n\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Clone a new Vector2\n     * @return {clay.Vector2}\n     */\n    clone: function() {\n        return new Vector2(this.x, this.y);\n    },\n\n    /**\n     * Copy x, y from b\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    copy: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].copy(this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Cross product of self and b, written to a Vector3 out\n     * @param  {clay.Vector3} out\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    cross: function(out, b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].cross(out.array, this.array, b.array);\n        out._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for distance\n     * @param  {clay.Vector2} b\n     * @return {number}\n     */\n    dist: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].dist(this.array, b.array);\n    },\n\n    /**\n     * Distance between self and b\n     * @param  {clay.Vector2} b\n     * @return {number}\n     */\n    distance: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].distance(this.array, b.array);\n    },\n\n    /**\n     * Alias for divide\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    div: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].div(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Divide self by b\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    divide: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].divide(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Dot product of self and b\n     * @param  {clay.Vector2} b\n     * @return {number}\n     */\n    dot: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].dot(this.array, b.array);\n    },\n\n    /**\n     * Alias of length\n     * @return {number}\n     */\n    len: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].len(this.array);\n    },\n\n    /**\n     * Calculate the length\n     * @return {number}\n     */\n    length: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].length(this.array);\n    },\n\n    /**\n     * Linear interpolation between a and b\n     * @param  {clay.Vector2} a\n     * @param  {clay.Vector2} b\n     * @param  {number}  t\n     * @return {clay.Vector2}\n     */\n    lerp: function(a, b, t) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].lerp(this.array, a.array, b.array, t);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Minimum of self and b\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    min: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].min(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Maximum of self and b\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    max: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].max(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiply\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    mul: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Mutiply self and b\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    multiply: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Negate self\n     * @return {clay.Vector2}\n     */\n    negate: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].negate(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Normalize self\n     * @return {clay.Vector2}\n     */\n    normalize: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].normalize(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Generate random x, y components with a given scale\n     * @param  {number} scale\n     * @return {clay.Vector2}\n     */\n    random: function(scale) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].random(this.array, scale);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale self\n     * @param  {number}  scale\n     * @return {clay.Vector2}\n     */\n    scale: function(s) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].scale(this.array, this.array, s);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale b and add to self\n     * @param  {clay.Vector2} b\n     * @param  {number}  scale\n     * @return {clay.Vector2}\n     */\n    scaleAndAdd: function(b, s) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].scaleAndAdd(this.array, this.array, b.array, s);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for squaredDistance\n     * @param  {clay.Vector2} b\n     * @return {number}\n     */\n    sqrDist: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].sqrDist(this.array, b.array);\n    },\n\n    /**\n     * Squared distance between self and b\n     * @param  {clay.Vector2} b\n     * @return {number}\n     */\n    squaredDistance: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].squaredDistance(this.array, b.array);\n    },\n\n    /**\n     * Alias for squaredLength\n     * @return {number}\n     */\n    sqrLen: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].sqrLen(this.array);\n    },\n\n    /**\n     * Squared length of self\n     * @return {number}\n     */\n    squaredLength: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].squaredLength(this.array);\n    },\n\n    /**\n     * Alias for subtract\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    sub: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].sub(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Subtract b from self\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    subtract: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].subtract(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Matrix2 m\n     * @param  {clay.Matrix2} m\n     * @return {clay.Vector2}\n     */\n    transformMat2: function(m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat2(this.array, this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Matrix2d m\n     * @param  {clay.Matrix2d} m\n     * @return {clay.Vector2}\n     */\n    transformMat2d: function(m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat2d(this.array, this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Matrix3 m\n     * @param  {clay.Matrix3} m\n     * @return {clay.Vector2}\n     */\n    transformMat3: function(m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat3(this.array, this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Matrix4 m\n     * @param  {clay.Matrix4} m\n     * @return {clay.Vector2}\n     */\n    transformMat4: function(m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat4(this.array, this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n\n    toString: function() {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n\n// Getter and Setter\nif (Object.defineProperty) {\n\n    var proto = Vector2.prototype;\n    /**\n     * @name x\n     * @type {number}\n     * @memberOf clay.Vector2\n     * @instance\n     */\n    Object.defineProperty(proto, 'x', {\n        get: function () {\n            return this.array[0];\n        },\n        set: function (value) {\n            this.array[0] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name y\n     * @type {number}\n     * @memberOf clay.Vector2\n     * @instance\n     */\n    Object.defineProperty(proto, 'y', {\n        get: function () {\n            return this.array[1];\n        },\n        set: function (value) {\n            this.array[1] = value;\n            this._dirty = true;\n        }\n    });\n}\n\n// Supply methods that are not in place\n\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.add = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].add(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector2} out\n * @param  {number}  x\n * @param  {number}  y\n * @return {clay.Vector2}\n */\nVector2.set = function(out, x, y) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].set(out.array, x, y);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.copy = function(out, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].copy(out.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.cross = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].cross(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {number}\n */\nVector2.dist = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].distance(a.array, b.array);\n};\n/**\n * @function\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {number}\n */\nVector2.distance = Vector2.dist;\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.div = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].divide(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @function\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.divide = Vector2.div;\n/**\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {number}\n */\nVector2.dot = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].dot(a.array, b.array);\n};\n\n/**\n * @param  {clay.Vector2} a\n * @return {number}\n */\nVector2.len = function(b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].length(b.array);\n};\n\n// Vector2.length = Vector2.len;\n\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @param  {number}  t\n * @return {clay.Vector2}\n */\nVector2.lerp = function(out, a, b, t) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].lerp(out.array, a.array, b.array, t);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.min = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].min(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.max = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].max(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.mul = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].multiply(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @function\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.multiply = Vector2.mul;\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @return {clay.Vector2}\n */\nVector2.negate = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].negate(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @return {clay.Vector2}\n */\nVector2.normalize = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].normalize(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {number}  scale\n * @return {clay.Vector2}\n */\nVector2.random = function(out, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].random(out.array, scale);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {number}  scale\n * @return {clay.Vector2}\n */\nVector2.scale = function(out, a, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].scale(out.array, a.array, scale);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @param  {number}  scale\n * @return {clay.Vector2}\n */\nVector2.scaleAndAdd = function(out, a, b, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].scaleAndAdd(out.array, a.array, b.array, scale);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {number}\n */\nVector2.sqrDist = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].sqrDist(a.array, b.array);\n};\n/**\n * @function\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {number}\n */\nVector2.squaredDistance = Vector2.sqrDist;\n\n/**\n * @param  {clay.Vector2} a\n * @return {number}\n */\nVector2.sqrLen = function(a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].sqrLen(a.array);\n};\n/**\n * @function\n * @param  {clay.Vector2} a\n * @return {number}\n */\nVector2.squaredLength = Vector2.sqrLen;\n\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.sub = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].subtract(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @function\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.subtract = Vector2.sub;\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Matrix2} m\n * @return {clay.Vector2}\n */\nVector2.transformMat2 = function(out, a, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat2(out.array, a.array, m.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2}  out\n * @param  {clay.Vector2}  a\n * @param  {clay.Matrix2d} m\n * @return {clay.Vector2}\n */\nVector2.transformMat2d = function(out, a, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat2d(out.array, a.array, m.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {Matrix3} m\n * @return {clay.Vector2}\n */\nVector2.transformMat3 = function(out, a, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat3(out.array, a.array, m.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Matrix4} m\n * @return {clay.Vector2}\n */\nVector2.transformMat4 = function(out, a, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat4(out.array, a.array, m.array);\n    out._dirty = true;\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Vector2);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL1ZlY3RvcjIuanM/YzQzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdmVjMiBmcm9tICcuLi9nbG1hdHJpeC92ZWMyJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LlZlY3RvcjJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gKiBAcGFyYW0ge251bWJlcn0geVxuICovXG52YXIgVmVjdG9yMiA9IGZ1bmN0aW9uKHgsIHkpIHtcblxuICAgIHggPSB4IHx8IDA7XG4gICAgeSA9IHkgfHwgMDtcblxuICAgIC8qKlxuICAgICAqIFN0b3JhZ2Ugb2YgVmVjdG9yMiwgcmVhZCBhbmQgd3JpdGUgb2YgeCwgeSB3aWxsIGNoYW5nZSB0aGUgdmFsdWVzIGluIGFycmF5XG4gICAgICogQWxsIG1ldGhvZHMgYWxzbyBvcGVyYXRlIG9uIHRoZSBhcnJheSBpbnN0ZWFkIG9mIHgsIHkgY29tcG9uZW50c1xuICAgICAqIEBuYW1lIGFycmF5XG4gICAgICogQHR5cGUge0Zsb2F0MzJBcnJheX1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3IyI1xuICAgICAqL1xuICAgIHRoaXMuYXJyYXkgPSB2ZWMyLmZyb21WYWx1ZXMoeCwgeSk7XG5cbiAgICAvKipcbiAgICAgKiBEaXJ0eSBmbGFnIGlzIHVzZWQgYnkgdGhlIE5vZGUgdG8gZGV0ZXJtaW5lXG4gICAgICogaWYgdGhlIG1hdHJpeCBpcyB1cGRhdGVkIHRvIGxhdGVzdFxuICAgICAqIEBuYW1lIF9kaXJ0eVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjIjXG4gICAgICovXG4gICAgdGhpcy5fZGlydHkgPSB0cnVlO1xufTtcblxuVmVjdG9yMi5wcm90b3R5cGUgPSB7XG5cbiAgICBjb25zdHJ1Y3RvcjogVmVjdG9yMixcblxuICAgIC8qKlxuICAgICAqIEFkZCBiIHRvIHNlbGZcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgYWRkOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzIuYWRkKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgeCBhbmQgeSBjb21wb25lbnRzXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgeFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHlcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgc2V0OiBmdW5jdGlvbih4LCB5KSB7XG4gICAgICAgIHRoaXMuYXJyYXlbMF0gPSB4O1xuICAgICAgICB0aGlzLmFycmF5WzFdID0geTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHggYW5kIHkgY29tcG9uZW50cyBmcm9tIGFycmF5XG4gICAgICogQHBhcmFtICB7RmxvYXQzMkFycmF5fG51bWJlcltdfSBhcnJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgc2V0QXJyYXk6IGZ1bmN0aW9uKGFycikge1xuICAgICAgICB0aGlzLmFycmF5WzBdID0gYXJyWzBdO1xuICAgICAgICB0aGlzLmFycmF5WzFdID0gYXJyWzFdO1xuXG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENsb25lIGEgbmV3IFZlY3RvcjJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjIodGhpcy54LCB0aGlzLnkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDb3B5IHgsIHkgZnJvbSBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIGNvcHk6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgdmVjMi5jb3B5KHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDcm9zcyBwcm9kdWN0IG9mIHNlbGYgYW5kIGIsIHdyaXR0ZW4gdG8gYSBWZWN0b3IzIG91dFxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIGNyb3NzOiBmdW5jdGlvbihvdXQsIGIpIHtcbiAgICAgICAgdmVjMi5jcm9zcyhvdXQuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBkaXN0YW5jZVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBkaXN0OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHJldHVybiB2ZWMyLmRpc3QodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERpc3RhbmNlIGJldHdlZW4gc2VsZiBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBkaXN0YW5jZTogZnVuY3Rpb24oYikge1xuICAgICAgICByZXR1cm4gdmVjMi5kaXN0YW5jZSh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIGRpdmlkZVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICBkaXY6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgdmVjMi5kaXYodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERpdmlkZSBzZWxmIGJ5IGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgZGl2aWRlOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzIuZGl2aWRlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEb3QgcHJvZHVjdCBvZiBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGRvdDogZnVuY3Rpb24oYikge1xuICAgICAgICByZXR1cm4gdmVjMi5kb3QodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIG9mIGxlbmd0aFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBsZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdmVjMi5sZW4odGhpcy5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgbGVuZ3RoXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGxlbmd0aDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB2ZWMyLmxlbmd0aCh0aGlzLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiBhIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgdFxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICBsZXJwOiBmdW5jdGlvbihhLCBiLCB0KSB7XG4gICAgICAgIHZlYzIubGVycCh0aGlzLmFycmF5LCBhLmFycmF5LCBiLmFycmF5LCB0KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTWluaW11bSBvZiBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIG1pbjogZnVuY3Rpb24oYikge1xuICAgICAgICB2ZWMyLm1pbih0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTWF4aW11bSBvZiBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIG1heDogZnVuY3Rpb24oYikge1xuICAgICAgICB2ZWMyLm1heCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIG11bHRpcGx5XG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIG11bDogZnVuY3Rpb24oYikge1xuICAgICAgICB2ZWMyLm11bCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXV0aXBseSBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIG11bHRpcGx5OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzIubXVsdGlwbHkodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE5lZ2F0ZSBzZWxmXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIG5lZ2F0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZlYzIubmVnYXRlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBOb3JtYWxpemUgc2VsZlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICBub3JtYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2ZWMyLm5vcm1hbGl6ZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgcmFuZG9tIHgsIHkgY29tcG9uZW50cyB3aXRoIGEgZ2l2ZW4gc2NhbGVcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHNjYWxlXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIHJhbmRvbTogZnVuY3Rpb24oc2NhbGUpIHtcbiAgICAgICAgdmVjMi5yYW5kb20odGhpcy5hcnJheSwgc2NhbGUpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTY2FsZSBzZWxmXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgc2NhbGU6IGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgdmVjMi5zY2FsZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBzKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2NhbGUgYiBhbmQgYWRkIHRvIHNlbGZcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsZVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICBzY2FsZUFuZEFkZDogZnVuY3Rpb24oYiwgcykge1xuICAgICAgICB2ZWMyLnNjYWxlQW5kQWRkKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXksIHMpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3Igc3F1YXJlZERpc3RhbmNlXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNxckRpc3Q6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgcmV0dXJuIHZlYzIuc3FyRGlzdCh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3F1YXJlZERpc3RhbmNlOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHJldHVybiB2ZWMyLnNxdWFyZWREaXN0YW5jZSh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIHNxdWFyZWRMZW5ndGhcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3FyTGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHZlYzIuc3FyTGVuKHRoaXMuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTcXVhcmVkIGxlbmd0aCBvZiBzZWxmXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNxdWFyZWRMZW5ndGg6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdmVjMi5zcXVhcmVkTGVuZ3RoKHRoaXMuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3Igc3VidHJhY3RcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgc3ViOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzIuc3ViKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTdWJ0cmFjdCBiIGZyb20gc2VsZlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICBzdWJ0cmFjdDogZnVuY3Rpb24oYikge1xuICAgICAgICB2ZWMyLnN1YnRyYWN0KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gc2VsZiB3aXRoIGEgTWF0cml4MiBtXG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBtXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIHRyYW5zZm9ybU1hdDI6IGZ1bmN0aW9uKG0pIHtcbiAgICAgICAgdmVjMi50cmFuc2Zvcm1NYXQyKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIG0uYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gc2VsZiB3aXRoIGEgTWF0cml4MmQgbVxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IG1cbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgdHJhbnNmb3JtTWF0MmQ6IGZ1bmN0aW9uKG0pIHtcbiAgICAgICAgdmVjMi50cmFuc2Zvcm1NYXQyZCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBtLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHNlbGYgd2l0aCBhIE1hdHJpeDMgbVxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gbVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1NYXQzOiBmdW5jdGlvbihtKSB7XG4gICAgICAgIHZlYzIudHJhbnNmb3JtTWF0Myh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBtLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHNlbGYgd2l0aCBhIE1hdHJpeDQgbVxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gbVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1NYXQ0OiBmdW5jdGlvbihtKSB7XG4gICAgICAgIHZlYzIudHJhbnNmb3JtTWF0NCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBtLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJ1snICsgQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbCh0aGlzLmFycmF5LCAnLCcpICsgJ10nO1xuICAgIH0sXG5cbiAgICB0b0FycmF5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLmFycmF5KTtcbiAgICB9XG59O1xuXG4vLyBHZXR0ZXIgYW5kIFNldHRlclxuaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkge1xuXG4gICAgdmFyIHByb3RvID0gVmVjdG9yMi5wcm90b3R5cGU7XG4gICAgLyoqXG4gICAgICogQG5hbWUgeFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQG1lbWJlck9mIGNsYXkuVmVjdG9yMlxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgJ3gnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbMF07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5WzBdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lIHlcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjJcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG8sICd5Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5WzFdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hcnJheVsxXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8vIFN1cHBseSBtZXRob2RzIHRoYXQgYXJlIG5vdCBpbiBwbGFjZVxuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLmFkZCA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIHZlYzIuYWRkKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBvdXRcbiAqIEBwYXJhbSAge251bWJlcn0gIHhcbiAqIEBwYXJhbSAge251bWJlcn0gIHlcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi5zZXQgPSBmdW5jdGlvbihvdXQsIHgsIHkpIHtcbiAgICB2ZWMyLnNldChvdXQuYXJyYXksIHgsIHkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi5jb3B5ID0gZnVuY3Rpb24ob3V0LCBiKSB7XG4gICAgdmVjMi5jb3B5KG91dC5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gKi9cblZlY3RvcjIuY3Jvc3MgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2ZWMyLmNyb3NzKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjIuZGlzdCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gdmVjMi5kaXN0YW5jZShhLmFycmF5LCBiLmFycmF5KTtcbn07XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMi5kaXN0YW5jZSA9IFZlY3RvcjIuZGlzdDtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gKi9cblZlY3RvcjIuZGl2ID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjMi5kaXZpZGUob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi5kaXZpZGUgPSBWZWN0b3IyLmRpdjtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMi5kb3QgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIHZlYzIuZG90KGEuYXJyYXksIGIuYXJyYXkpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMi5sZW4gPSBmdW5jdGlvbihiKSB7XG4gICAgcmV0dXJuIHZlYzIubGVuZ3RoKGIuYXJyYXkpO1xufTtcblxuLy8gVmVjdG9yMi5sZW5ndGggPSBWZWN0b3IyLmxlbjtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAqIEBwYXJhbSAge251bWJlcn0gIHRcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi5sZXJwID0gZnVuY3Rpb24ob3V0LCBhLCBiLCB0KSB7XG4gICAgdmVjMi5sZXJwKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSwgdCk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLm1pbiA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIHZlYzIubWluKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gKi9cblZlY3RvcjIubWF4ID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjMi5tYXgob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gKi9cblZlY3RvcjIubXVsID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjMi5tdWx0aXBseShvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLm11bHRpcGx5ID0gVmVjdG9yMi5tdWw7XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi5uZWdhdGUgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICB2ZWMyLm5lZ2F0ZShvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gKi9cblZlY3RvcjIubm9ybWFsaXplID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgdmVjMi5ub3JtYWxpemUob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBvdXRcbiAqIEBwYXJhbSAge251bWJlcn0gIHNjYWxlXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gKi9cblZlY3RvcjIucmFuZG9tID0gZnVuY3Rpb24ob3V0LCBzY2FsZSkge1xuICAgIHZlYzIucmFuZG9tKG91dC5hcnJheSwgc2NhbGUpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsZVxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLnNjYWxlID0gZnVuY3Rpb24ob3V0LCBhLCBzY2FsZSkge1xuICAgIHZlYzIuc2NhbGUob3V0LmFycmF5LCBhLmFycmF5LCBzY2FsZSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGVcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi5zY2FsZUFuZEFkZCA9IGZ1bmN0aW9uKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgICB2ZWMyLnNjYWxlQW5kQWRkKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSwgc2NhbGUpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5WZWN0b3IyLnNxckRpc3QgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIHZlYzIuc3FyRGlzdChhLmFycmF5LCBiLmFycmF5KTtcbn07XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMi5zcXVhcmVkRGlzdGFuY2UgPSBWZWN0b3IyLnNxckRpc3Q7XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjIuc3FyTGVuID0gZnVuY3Rpb24oYSkge1xuICAgIHJldHVybiB2ZWMyLnNxckxlbihhLmFycmF5KTtcbn07XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjIuc3F1YXJlZExlbmd0aCA9IFZlY3RvcjIuc3FyTGVuO1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLnN1YiA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIHZlYzIuc3VidHJhY3Qob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi5zdWJ0cmFjdCA9IFZlY3RvcjIuc3ViO1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJ9IG1cbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi50cmFuc2Zvcm1NYXQyID0gZnVuY3Rpb24ob3V0LCBhLCBtKSB7XG4gICAgdmVjMi50cmFuc2Zvcm1NYXQyKG91dC5hcnJheSwgYS5hcnJheSwgbS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gIG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSAgYVxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gbVxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLnRyYW5zZm9ybU1hdDJkID0gZnVuY3Rpb24ob3V0LCBhLCBtKSB7XG4gICAgdmVjMi50cmFuc2Zvcm1NYXQyZChvdXQuYXJyYXksIGEuYXJyYXksIG0uYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtNYXRyaXgzfSBtXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gKi9cblZlY3RvcjIudHJhbnNmb3JtTWF0MyA9IGZ1bmN0aW9uKG91dCwgYSwgbSkge1xuICAgIHZlYzIudHJhbnNmb3JtTWF0MyhvdXQuYXJyYXksIGEuYXJyYXksIG0uYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG1cbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi50cmFuc2Zvcm1NYXQ0ID0gZnVuY3Rpb24ob3V0LCBhLCBtKSB7XG4gICAgdmVjMi50cmFuc2Zvcm1NYXQ0KG91dC5hcnJheSwgYS5hcnJheSwgbS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFZlY3RvcjI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL21hdGgvVmVjdG9yMi5qc1xuLy8gbW9kdWxlIGlkID0gMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///26\n");

/***/ }),
/* 27 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__vec4__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__mat3__ = __webpack_require__(32);\n\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n\n\n\n\n/**\n * @class Quaternion\n * @name quat\n */\n\nvar quat = {};\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\nquat.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](4);\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n};\n\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {vec3} a the initial vector\n * @param {vec3} b the destination vector\n * @returns {quat} out\n */\nquat.rotationTo = (function() {\n    var tmpvec3 = __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].create();\n    var xUnitVec3 = __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].fromValues(1,0,0);\n    var yUnitVec3 = __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].fromValues(0,1,0);\n\n    return function(out, a, b) {\n        var dot = __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].dot(a, b);\n        if (dot < -0.999999) {\n            __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].cross(tmpvec3, xUnitVec3, a);\n            if (__WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].length(tmpvec3) < 0.000001)\n                __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].cross(tmpvec3, yUnitVec3, a);\n            __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].normalize(tmpvec3, tmpvec3);\n            quat.setAxisAngle(out, tmpvec3, Math.PI);\n            return out;\n        } else if (dot > 0.999999) {\n            out[0] = 0;\n            out[1] = 0;\n            out[2] = 0;\n            out[3] = 1;\n            return out;\n        } else {\n            __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].cross(tmpvec3, a, b);\n            out[0] = tmpvec3[0];\n            out[1] = tmpvec3[1];\n            out[2] = tmpvec3[2];\n            out[3] = 1 + dot;\n            return quat.normalize(out, out);\n        }\n    };\n})();\n\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {vec3} view  the vector representing the viewing direction\n * @param {vec3} right the vector representing the local \"right\" direction\n * @param {vec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\nquat.setAxes = (function() {\n    var matr = __WEBPACK_IMPORTED_MODULE_3__mat3__[\"a\" /* default */].create();\n\n    return function(out, view, right, up) {\n        matr[0] = right[0];\n        matr[3] = right[1];\n        matr[6] = right[2];\n\n        matr[1] = up[0];\n        matr[4] = up[1];\n        matr[7] = up[2];\n\n        matr[2] = -view[0];\n        matr[5] = -view[1];\n        matr[8] = -view[2];\n\n        return quat.normalize(out, quat.fromMat3(out, matr));\n    };\n})();\n\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {quat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\nquat.clone = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].clone;\n\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\nquat.fromValues = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].fromValues;\n\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the source quaternion\n * @returns {quat} out\n * @function\n */\nquat.copy = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].copy;\n\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\nquat.set = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].set;\n\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\nquat.identity = function(out) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n};\n\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {vec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\nquat.setAxisAngle = function(out, axis, rad) {\n    rad = rad * 0.5;\n    var s = Math.sin(rad);\n    out[0] = s * axis[0];\n    out[1] = s * axis[1];\n    out[2] = s * axis[2];\n    out[3] = Math.cos(rad);\n    return out;\n};\n\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {quat} out\n * @function\n */\nquat.add = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].add;\n\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {quat} out\n */\nquat.multiply = function(out, a, b) {\n    var ax = a[0], ay = a[1], az = a[2], aw = a[3],\n        bx = b[0], by = b[1], bz = b[2], bw = b[3];\n\n    out[0] = ax * bw + aw * bx + ay * bz - az * by;\n    out[1] = ay * bw + aw * by + az * bx - ax * bz;\n    out[2] = az * bw + aw * bz + ax * by - ay * bx;\n    out[3] = aw * bw - ax * bx - ay * by - az * bz;\n    return out;\n};\n\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\nquat.mul = quat.multiply;\n\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {quat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\nquat.scale = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].scale;\n\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nquat.rotateX = function (out, a, rad) {\n    rad *= 0.5;\n\n    var ax = a[0], ay = a[1], az = a[2], aw = a[3],\n        bx = Math.sin(rad), bw = Math.cos(rad);\n\n    out[0] = ax * bw + aw * bx;\n    out[1] = ay * bw + az * bx;\n    out[2] = az * bw - ay * bx;\n    out[3] = aw * bw - ax * bx;\n    return out;\n};\n\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nquat.rotateY = function (out, a, rad) {\n    rad *= 0.5;\n\n    var ax = a[0], ay = a[1], az = a[2], aw = a[3],\n        by = Math.sin(rad), bw = Math.cos(rad);\n\n    out[0] = ax * bw - az * by;\n    out[1] = ay * bw + aw * by;\n    out[2] = az * bw + ax * by;\n    out[3] = aw * bw - ay * by;\n    return out;\n};\n\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nquat.rotateZ = function (out, a, rad) {\n    rad *= 0.5;\n\n    var ax = a[0], ay = a[1], az = a[2], aw = a[3],\n        bz = Math.sin(rad), bw = Math.cos(rad);\n\n    out[0] = ax * bw + ay * bz;\n    out[1] = ay * bw - ax * bz;\n    out[2] = az * bw + aw * bz;\n    out[3] = aw * bw - az * bz;\n    return out;\n};\n\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate W component of\n * @returns {quat} out\n */\nquat.calculateW = function (out, a) {\n    var x = a[0], y = a[1], z = a[2];\n\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n    return out;\n};\n\n/**\n * Calculates the dot product of two quat's\n *\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\nquat.dot = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].dot;\n\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {quat} out\n * @function\n */\nquat.lerp = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].lerp;\n\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {quat} out\n */\nquat.slerp = function (out, a, b, t) {\n    // benchmarks:\n    //    http://jsperf.com/quaternion-slerp-implementations\n\n    var ax = a[0], ay = a[1], az = a[2], aw = a[3],\n        bx = b[0], by = b[1], bz = b[2], bw = b[3];\n\n    var        omega, cosom, sinom, scale0, scale1;\n\n    // calc cosine\n    cosom = ax * bx + ay * by + az * bz + aw * bw;\n    // adjust signs (if necessary)\n    if ( cosom < 0.0 ) {\n        cosom = -cosom;\n        bx = - bx;\n        by = - by;\n        bz = - bz;\n        bw = - bw;\n    }\n    // calculate coefficients\n    if ( (1.0 - cosom) > 0.000001 ) {\n        // standard case (slerp)\n        omega  = Math.acos(cosom);\n        sinom  = Math.sin(omega);\n        scale0 = Math.sin((1.0 - t) * omega) / sinom;\n        scale1 = Math.sin(t * omega) / sinom;\n    } else {\n        // \"from\" and \"to\" quaternions are very close\n        //  ... so we can do a linear interpolation\n        scale0 = 1.0 - t;\n        scale1 = t;\n    }\n    // calculate final values\n    out[0] = scale0 * ax + scale1 * bx;\n    out[1] = scale0 * ay + scale1 * by;\n    out[2] = scale0 * az + scale1 * bz;\n    out[3] = scale0 * aw + scale1 * bw;\n\n    return out;\n};\n\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate inverse of\n * @returns {quat} out\n */\nquat.invert = function(out, a) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3],\n        dot = a0*a0 + a1*a1 + a2*a2 + a3*a3,\n        invDot = dot ? 1.0/dot : 0;\n\n    // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n    out[0] = -a0*invDot;\n    out[1] = -a1*invDot;\n    out[2] = -a2*invDot;\n    out[3] = a3*invDot;\n    return out;\n};\n\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate conjugate of\n * @returns {quat} out\n */\nquat.conjugate = function (out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Calculates the length of a quat\n *\n * @param {quat} a vector to calculate length of\n * @returns {Number} length of a\n * @function\n */\nquat.length = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].length;\n\n/**\n * Alias for {@link quat.length}\n * @function\n */\nquat.len = quat.length;\n\n/**\n * Calculates the squared length of a quat\n *\n * @param {quat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\nquat.squaredLength = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].squaredLength;\n\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\nquat.sqrLen = quat.squaredLength;\n\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\nquat.normalize = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].normalize;\n\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {mat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\nquat.fromMat3 = function(out, m) {\n    // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n    // article \"Quaternion Calculus and Fast Animation\".\n    var fTrace = m[0] + m[4] + m[8];\n    var fRoot;\n\n    if ( fTrace > 0.0 ) {\n        // |w| > 1/2, may as well choose w > 1/2\n        fRoot = Math.sqrt(fTrace + 1.0);  // 2w\n        out[3] = 0.5 * fRoot;\n        fRoot = 0.5/fRoot;  // 1/(4w)\n        out[0] = (m[5]-m[7])*fRoot;\n        out[1] = (m[6]-m[2])*fRoot;\n        out[2] = (m[1]-m[3])*fRoot;\n    } else {\n        // |w| <= 1/2\n        var i = 0;\n        if ( m[4] > m[0] )\n          i = 1;\n        if ( m[8] > m[i*3+i] )\n          i = 2;\n        var j = (i+1)%3;\n        var k = (i+2)%3;\n\n        fRoot = Math.sqrt(m[i*3+i]-m[j*3+j]-m[k*3+k] + 1.0);\n        out[i] = 0.5 * fRoot;\n        fRoot = 0.5 / fRoot;\n        out[3] = (m[j*3+k] - m[k*3+j]) * fRoot;\n        out[j] = (m[j*3+i] + m[i*3+j]) * fRoot;\n        out[k] = (m[k*3+i] + m[i*3+k]) * fRoot;\n    }\n\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (quat);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nbG1hdHJpeC9xdWF0LmpzP2Y2ZjQiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cbi8qIENvcHlyaWdodCAoYykgMjAxMywgQnJhbmRvbiBKb25lcywgQ29saW4gTWFjS2VuemllIElWLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5SZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuXG4gICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gICAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAgICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXG5BTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1JcbkFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xuKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xuTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OXG5BTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcblNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLiAqL1xuXG5pbXBvcnQgeyBHTE1BVF9BUlJBWV9UWVBFIH0gZnJvbSAnLi9jb21tb24nO1xuaW1wb3J0IHZlYzMgZnJvbSAnLi92ZWMzJztcbmltcG9ydCB2ZWM0IGZyb20gJy4vdmVjNCc7XG5pbXBvcnQgbWF0MyBmcm9tICcuL21hdDMnO1xuXG5cbi8qKlxuICogQGNsYXNzIFF1YXRlcm5pb25cbiAqIEBuYW1lIHF1YXRcbiAqL1xuXG52YXIgcXVhdCA9IHt9O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaWRlbnRpdHkgcXVhdFxuICpcbiAqIEByZXR1cm5zIHtxdWF0fSBhIG5ldyBxdWF0ZXJuaW9uXG4gKi9cbnF1YXQuY3JlYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG91dCA9IG5ldyBHTE1BVF9BUlJBWV9UWVBFKDQpO1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDE7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogU2V0cyBhIHF1YXRlcm5pb24gdG8gcmVwcmVzZW50IHRoZSBzaG9ydGVzdCByb3RhdGlvbiBmcm9tIG9uZVxuICogdmVjdG9yIHRvIGFub3RoZXIuXG4gKlxuICogQm90aCB2ZWN0b3JzIGFyZSBhc3N1bWVkIHRvIGJlIHVuaXQgbGVuZ3RoLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvbi5cbiAqIEBwYXJhbSB7dmVjM30gYSB0aGUgaW5pdGlhbCB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjM30gYiB0aGUgZGVzdGluYXRpb24gdmVjdG9yXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cbnF1YXQucm90YXRpb25UbyA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgdG1wdmVjMyA9IHZlYzMuY3JlYXRlKCk7XG4gICAgdmFyIHhVbml0VmVjMyA9IHZlYzMuZnJvbVZhbHVlcygxLDAsMCk7XG4gICAgdmFyIHlVbml0VmVjMyA9IHZlYzMuZnJvbVZhbHVlcygwLDEsMCk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgICAgIHZhciBkb3QgPSB2ZWMzLmRvdChhLCBiKTtcbiAgICAgICAgaWYgKGRvdCA8IC0wLjk5OTk5OSkge1xuICAgICAgICAgICAgdmVjMy5jcm9zcyh0bXB2ZWMzLCB4VW5pdFZlYzMsIGEpO1xuICAgICAgICAgICAgaWYgKHZlYzMubGVuZ3RoKHRtcHZlYzMpIDwgMC4wMDAwMDEpXG4gICAgICAgICAgICAgICAgdmVjMy5jcm9zcyh0bXB2ZWMzLCB5VW5pdFZlYzMsIGEpO1xuICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUodG1wdmVjMywgdG1wdmVjMyk7XG4gICAgICAgICAgICBxdWF0LnNldEF4aXNBbmdsZShvdXQsIHRtcHZlYzMsIE1hdGguUEkpO1xuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfSBlbHNlIGlmIChkb3QgPiAwLjk5OTk5OSkge1xuICAgICAgICAgICAgb3V0WzBdID0gMDtcbiAgICAgICAgICAgIG91dFsxXSA9IDA7XG4gICAgICAgICAgICBvdXRbMl0gPSAwO1xuICAgICAgICAgICAgb3V0WzNdID0gMTtcbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2ZWMzLmNyb3NzKHRtcHZlYzMsIGEsIGIpO1xuICAgICAgICAgICAgb3V0WzBdID0gdG1wdmVjM1swXTtcbiAgICAgICAgICAgIG91dFsxXSA9IHRtcHZlYzNbMV07XG4gICAgICAgICAgICBvdXRbMl0gPSB0bXB2ZWMzWzJdO1xuICAgICAgICAgICAgb3V0WzNdID0gMSArIGRvdDtcbiAgICAgICAgICAgIHJldHVybiBxdWF0Lm5vcm1hbGl6ZShvdXQsIG91dCk7XG4gICAgICAgIH1cbiAgICB9O1xufSkoKTtcblxuLyoqXG4gKiBTZXRzIHRoZSBzcGVjaWZpZWQgcXVhdGVybmlvbiB3aXRoIHZhbHVlcyBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlblxuICogYXhlcy4gRWFjaCBheGlzIGlzIGEgdmVjMyBhbmQgaXMgZXhwZWN0ZWQgdG8gYmUgdW5pdCBsZW5ndGggYW5kXG4gKiBwZXJwZW5kaWN1bGFyIHRvIGFsbCBvdGhlciBzcGVjaWZpZWQgYXhlcy5cbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IHZpZXcgIHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSB2aWV3aW5nIGRpcmVjdGlvblxuICogQHBhcmFtIHt2ZWMzfSByaWdodCB0aGUgdmVjdG9yIHJlcHJlc2VudGluZyB0aGUgbG9jYWwgXCJyaWdodFwiIGRpcmVjdGlvblxuICogQHBhcmFtIHt2ZWMzfSB1cCAgICB0aGUgdmVjdG9yIHJlcHJlc2VudGluZyB0aGUgbG9jYWwgXCJ1cFwiIGRpcmVjdGlvblxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5xdWF0LnNldEF4ZXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1hdHIgPSBtYXQzLmNyZWF0ZSgpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG91dCwgdmlldywgcmlnaHQsIHVwKSB7XG4gICAgICAgIG1hdHJbMF0gPSByaWdodFswXTtcbiAgICAgICAgbWF0clszXSA9IHJpZ2h0WzFdO1xuICAgICAgICBtYXRyWzZdID0gcmlnaHRbMl07XG5cbiAgICAgICAgbWF0clsxXSA9IHVwWzBdO1xuICAgICAgICBtYXRyWzRdID0gdXBbMV07XG4gICAgICAgIG1hdHJbN10gPSB1cFsyXTtcblxuICAgICAgICBtYXRyWzJdID0gLXZpZXdbMF07XG4gICAgICAgIG1hdHJbNV0gPSAtdmlld1sxXTtcbiAgICAgICAgbWF0cls4XSA9IC12aWV3WzJdO1xuXG4gICAgICAgIHJldHVybiBxdWF0Lm5vcm1hbGl6ZShvdXQsIHF1YXQuZnJvbU1hdDMob3V0LCBtYXRyKSk7XG4gICAgfTtcbn0pKCk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBxdWF0IGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgcXVhdGVybmlvblxuICpcbiAqIEBwYXJhbSB7cXVhdH0gYSBxdWF0ZXJuaW9uIHRvIGNsb25lXG4gKiBAcmV0dXJucyB7cXVhdH0gYSBuZXcgcXVhdGVybmlvblxuICogQGZ1bmN0aW9uXG4gKi9cbnF1YXQuY2xvbmUgPSB2ZWM0LmNsb25lO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcXVhdCBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3F1YXR9IGEgbmV3IHF1YXRlcm5pb25cbiAqIEBmdW5jdGlvblxuICovXG5xdWF0LmZyb21WYWx1ZXMgPSB2ZWM0LmZyb21WYWx1ZXM7XG5cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIHF1YXQgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtxdWF0fSBhIHRoZSBzb3VyY2UgcXVhdGVybmlvblxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cbnF1YXQuY29weSA9IHZlYzQuY29weTtcblxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSBxdWF0IHRvIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xucXVhdC5zZXQgPSB2ZWM0LnNldDtcblxuLyoqXG4gKiBTZXQgYSBxdWF0IHRvIHRoZSBpZGVudGl0eSBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cbnF1YXQuaWRlbnRpdHkgPSBmdW5jdGlvbihvdXQpIHtcbiAgICBvdXRbMF0gPSAwO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAxO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFNldHMgYSBxdWF0IGZyb20gdGhlIGdpdmVuIGFuZ2xlIGFuZCByb3RhdGlvbiBheGlzLFxuICogdGhlbiByZXR1cm5zIGl0LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHt2ZWMzfSBheGlzIHRoZSBheGlzIGFyb3VuZCB3aGljaCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIGluIHJhZGlhbnNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqKi9cbnF1YXQuc2V0QXhpc0FuZ2xlID0gZnVuY3Rpb24ob3V0LCBheGlzLCByYWQpIHtcbiAgICByYWQgPSByYWQgKiAwLjU7XG4gICAgdmFyIHMgPSBNYXRoLnNpbihyYWQpO1xuICAgIG91dFswXSA9IHMgKiBheGlzWzBdO1xuICAgIG91dFsxXSA9IHMgKiBheGlzWzFdO1xuICAgIG91dFsyXSA9IHMgKiBheGlzWzJdO1xuICAgIG91dFszXSA9IE1hdGguY29zKHJhZCk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWRkcyB0d28gcXVhdCdzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge3F1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7cXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5xdWF0LmFkZCA9IHZlYzQuYWRkO1xuXG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIHF1YXQnc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtxdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3F1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cbnF1YXQubXVsdGlwbHkgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2YXIgYXggPSBhWzBdLCBheSA9IGFbMV0sIGF6ID0gYVsyXSwgYXcgPSBhWzNdLFxuICAgICAgICBieCA9IGJbMF0sIGJ5ID0gYlsxXSwgYnogPSBiWzJdLCBidyA9IGJbM107XG5cbiAgICBvdXRbMF0gPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5O1xuICAgIG91dFsxXSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7XG4gICAgb3V0WzJdID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDtcbiAgICBvdXRbM10gPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgcXVhdC5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5xdWF0Lm11bCA9IHF1YXQubXVsdGlwbHk7XG5cbi8qKlxuICogU2NhbGVzIGEgcXVhdCBieSBhIHNjYWxhciBudW1iZXJcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtxdWF0fSBhIHRoZSB2ZWN0b3IgdG8gc2NhbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgdmVjdG9yIGJ5XG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xucXVhdC5zY2FsZSA9IHZlYzQuc2NhbGU7XG5cbi8qKlxuICogUm90YXRlcyBhIHF1YXRlcm5pb24gYnkgdGhlIGdpdmVuIGFuZ2xlIGFib3V0IHRoZSBYIGF4aXNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCBxdWF0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge3F1YXR9IGEgcXVhdCB0byByb3RhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgYW5nbGUgKGluIHJhZGlhbnMpIHRvIHJvdGF0ZVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5xdWF0LnJvdGF0ZVggPSBmdW5jdGlvbiAob3V0LCBhLCByYWQpIHtcbiAgICByYWQgKj0gMC41O1xuXG4gICAgdmFyIGF4ID0gYVswXSwgYXkgPSBhWzFdLCBheiA9IGFbMl0sIGF3ID0gYVszXSxcbiAgICAgICAgYnggPSBNYXRoLnNpbihyYWQpLCBidyA9IE1hdGguY29zKHJhZCk7XG5cbiAgICBvdXRbMF0gPSBheCAqIGJ3ICsgYXcgKiBieDtcbiAgICBvdXRbMV0gPSBheSAqIGJ3ICsgYXogKiBieDtcbiAgICBvdXRbMl0gPSBheiAqIGJ3IC0gYXkgKiBieDtcbiAgICBvdXRbM10gPSBhdyAqIGJ3IC0gYXggKiBieDtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSb3RhdGVzIGEgcXVhdGVybmlvbiBieSB0aGUgZ2l2ZW4gYW5nbGUgYWJvdXQgdGhlIFkgYXhpc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHF1YXQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7cXVhdH0gYSBxdWF0IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZCBhbmdsZSAoaW4gcmFkaWFucykgdG8gcm90YXRlXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cbnF1YXQucm90YXRlWSA9IGZ1bmN0aW9uIChvdXQsIGEsIHJhZCkge1xuICAgIHJhZCAqPSAwLjU7XG5cbiAgICB2YXIgYXggPSBhWzBdLCBheSA9IGFbMV0sIGF6ID0gYVsyXSwgYXcgPSBhWzNdLFxuICAgICAgICBieSA9IE1hdGguc2luKHJhZCksIGJ3ID0gTWF0aC5jb3MocmFkKTtcblxuICAgIG91dFswXSA9IGF4ICogYncgLSBheiAqIGJ5O1xuICAgIG91dFsxXSA9IGF5ICogYncgKyBhdyAqIGJ5O1xuICAgIG91dFsyXSA9IGF6ICogYncgKyBheCAqIGJ5O1xuICAgIG91dFszXSA9IGF3ICogYncgLSBheSAqIGJ5O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFJvdGF0ZXMgYSBxdWF0ZXJuaW9uIGJ5IHRoZSBnaXZlbiBhbmdsZSBhYm91dCB0aGUgWiBheGlzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgcXVhdCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtxdWF0fSBhIHF1YXQgdG8gcm90YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIGFuZ2xlIChpbiByYWRpYW5zKSB0byByb3RhdGVcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xucXVhdC5yb3RhdGVaID0gZnVuY3Rpb24gKG91dCwgYSwgcmFkKSB7XG4gICAgcmFkICo9IDAuNTtcblxuICAgIHZhciBheCA9IGFbMF0sIGF5ID0gYVsxXSwgYXogPSBhWzJdLCBhdyA9IGFbM10sXG4gICAgICAgIGJ6ID0gTWF0aC5zaW4ocmFkKSwgYncgPSBNYXRoLmNvcyhyYWQpO1xuXG4gICAgb3V0WzBdID0gYXggKiBidyArIGF5ICogYno7XG4gICAgb3V0WzFdID0gYXkgKiBidyAtIGF4ICogYno7XG4gICAgb3V0WzJdID0gYXogKiBidyArIGF3ICogYno7XG4gICAgb3V0WzNdID0gYXcgKiBidyAtIGF6ICogYno7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgVyBjb21wb25lbnQgb2YgYSBxdWF0IGZyb20gdGhlIFgsIFksIGFuZCBaIGNvbXBvbmVudHMuXG4gKiBBc3N1bWVzIHRoYXQgcXVhdGVybmlvbiBpcyAxIHVuaXQgaW4gbGVuZ3RoLlxuICogQW55IGV4aXN0aW5nIFcgY29tcG9uZW50IHdpbGwgYmUgaWdub3JlZC5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7cXVhdH0gYSBxdWF0IHRvIGNhbGN1bGF0ZSBXIGNvbXBvbmVudCBvZlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5xdWF0LmNhbGN1bGF0ZVcgPSBmdW5jdGlvbiAob3V0LCBhKSB7XG4gICAgdmFyIHggPSBhWzBdLCB5ID0gYVsxXSwgeiA9IGFbMl07XG5cbiAgICBvdXRbMF0gPSB4O1xuICAgIG91dFsxXSA9IHk7XG4gICAgb3V0WzJdID0gejtcbiAgICBvdXRbM10gPSBNYXRoLnNxcnQoTWF0aC5hYnMoMS4wIC0geCAqIHggLSB5ICogeSAtIHogKiB6KSk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHF1YXQnc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtxdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZG90IHByb2R1Y3Qgb2YgYSBhbmQgYlxuICogQGZ1bmN0aW9uXG4gKi9cbnF1YXQuZG90ID0gdmVjNC5kb3Q7XG5cbi8qKlxuICogUGVyZm9ybXMgYSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0J3NcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7cXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtxdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cbnF1YXQubGVycCA9IHZlYzQubGVycDtcblxuLyoqXG4gKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge3F1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7cXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50IGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xucXVhdC5zbGVycCA9IGZ1bmN0aW9uIChvdXQsIGEsIGIsIHQpIHtcbiAgICAvLyBiZW5jaG1hcmtzOlxuICAgIC8vICAgIGh0dHA6Ly9qc3BlcmYuY29tL3F1YXRlcm5pb24tc2xlcnAtaW1wbGVtZW50YXRpb25zXG5cbiAgICB2YXIgYXggPSBhWzBdLCBheSA9IGFbMV0sIGF6ID0gYVsyXSwgYXcgPSBhWzNdLFxuICAgICAgICBieCA9IGJbMF0sIGJ5ID0gYlsxXSwgYnogPSBiWzJdLCBidyA9IGJbM107XG5cbiAgICB2YXIgICAgICAgIG9tZWdhLCBjb3NvbSwgc2lub20sIHNjYWxlMCwgc2NhbGUxO1xuXG4gICAgLy8gY2FsYyBjb3NpbmVcbiAgICBjb3NvbSA9IGF4ICogYnggKyBheSAqIGJ5ICsgYXogKiBieiArIGF3ICogYnc7XG4gICAgLy8gYWRqdXN0IHNpZ25zIChpZiBuZWNlc3NhcnkpXG4gICAgaWYgKCBjb3NvbSA8IDAuMCApIHtcbiAgICAgICAgY29zb20gPSAtY29zb207XG4gICAgICAgIGJ4ID0gLSBieDtcbiAgICAgICAgYnkgPSAtIGJ5O1xuICAgICAgICBieiA9IC0gYno7XG4gICAgICAgIGJ3ID0gLSBidztcbiAgICB9XG4gICAgLy8gY2FsY3VsYXRlIGNvZWZmaWNpZW50c1xuICAgIGlmICggKDEuMCAtIGNvc29tKSA+IDAuMDAwMDAxICkge1xuICAgICAgICAvLyBzdGFuZGFyZCBjYXNlIChzbGVycClcbiAgICAgICAgb21lZ2EgID0gTWF0aC5hY29zKGNvc29tKTtcbiAgICAgICAgc2lub20gID0gTWF0aC5zaW4ob21lZ2EpO1xuICAgICAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTtcbiAgICAgICAgc2NhbGUxID0gTWF0aC5zaW4odCAqIG9tZWdhKSAvIHNpbm9tO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFwiZnJvbVwiIGFuZCBcInRvXCIgcXVhdGVybmlvbnMgYXJlIHZlcnkgY2xvc2VcbiAgICAgICAgLy8gIC4uLiBzbyB3ZSBjYW4gZG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvblxuICAgICAgICBzY2FsZTAgPSAxLjAgLSB0O1xuICAgICAgICBzY2FsZTEgPSB0O1xuICAgIH1cbiAgICAvLyBjYWxjdWxhdGUgZmluYWwgdmFsdWVzXG4gICAgb3V0WzBdID0gc2NhbGUwICogYXggKyBzY2FsZTEgKiBieDtcbiAgICBvdXRbMV0gPSBzY2FsZTAgKiBheSArIHNjYWxlMSAqIGJ5O1xuICAgIG91dFsyXSA9IHNjYWxlMCAqIGF6ICsgc2NhbGUxICogYno7XG4gICAgb3V0WzNdID0gc2NhbGUwICogYXcgKyBzY2FsZTEgKiBidztcblxuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGludmVyc2Ugb2YgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge3F1YXR9IGEgcXVhdCB0byBjYWxjdWxhdGUgaW52ZXJzZSBvZlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5xdWF0LmludmVydCA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIHZhciBhMCA9IGFbMF0sIGExID0gYVsxXSwgYTIgPSBhWzJdLCBhMyA9IGFbM10sXG4gICAgICAgIGRvdCA9IGEwKmEwICsgYTEqYTEgKyBhMiphMiArIGEzKmEzLFxuICAgICAgICBpbnZEb3QgPSBkb3QgPyAxLjAvZG90IDogMDtcblxuICAgIC8vIFRPRE86IFdvdWxkIGJlIGZhc3RlciB0byByZXR1cm4gWzAsMCwwLDBdIGltbWVkaWF0ZWx5IGlmIGRvdCA9PSAwXG5cbiAgICBvdXRbMF0gPSAtYTAqaW52RG90O1xuICAgIG91dFsxXSA9IC1hMSppbnZEb3Q7XG4gICAgb3V0WzJdID0gLWEyKmludkRvdDtcbiAgICBvdXRbM10gPSBhMyppbnZEb3Q7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgY29uanVnYXRlIG9mIGEgcXVhdFxuICogSWYgdGhlIHF1YXRlcm5pb24gaXMgbm9ybWFsaXplZCwgdGhpcyBmdW5jdGlvbiBpcyBmYXN0ZXIgdGhhbiBxdWF0LmludmVyc2UgYW5kIHByb2R1Y2VzIHRoZSBzYW1lIHJlc3VsdC5cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7cXVhdH0gYSBxdWF0IHRvIGNhbGN1bGF0ZSBjb25qdWdhdGUgb2ZcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xucXVhdC5jb25qdWdhdGUgPSBmdW5jdGlvbiAob3V0LCBhKSB7XG4gICAgb3V0WzBdID0gLWFbMF07XG4gICAgb3V0WzFdID0gLWFbMV07XG4gICAgb3V0WzJdID0gLWFbMl07XG4gICAgb3V0WzNdID0gYVszXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBhIHZlY3RvciB0byBjYWxjdWxhdGUgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBsZW5ndGggb2YgYVxuICogQGZ1bmN0aW9uXG4gKi9cbnF1YXQubGVuZ3RoID0gdmVjNC5sZW5ndGg7XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBxdWF0Lmxlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG5xdWF0LmxlbiA9IHF1YXQubGVuZ3RoO1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgbGVuZ3RoIG9mIGEgcXVhdFxuICpcbiAqIEBwYXJhbSB7cXVhdH0gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIHNxdWFyZWQgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGxlbmd0aCBvZiBhXG4gKiBAZnVuY3Rpb25cbiAqL1xucXVhdC5zcXVhcmVkTGVuZ3RoID0gdmVjNC5zcXVhcmVkTGVuZ3RoO1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgcXVhdC5zcXVhcmVkTGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cbnF1YXQuc3FyTGVuID0gcXVhdC5zcXVhcmVkTGVuZ3RoO1xuXG4vKipcbiAqIE5vcm1hbGl6ZSBhIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7cXVhdH0gYSBxdWF0ZXJuaW9uIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cbnF1YXQubm9ybWFsaXplID0gdmVjNC5ub3JtYWxpemU7XG5cbi8qKlxuICogQ3JlYXRlcyBhIHF1YXRlcm5pb24gZnJvbSB0aGUgZ2l2ZW4gM3gzIHJvdGF0aW9uIG1hdHJpeC5cbiAqXG4gKiBOT1RFOiBUaGUgcmVzdWx0YW50IHF1YXRlcm5pb24gaXMgbm90IG5vcm1hbGl6ZWQsIHNvIHlvdSBzaG91bGQgYmUgc3VyZVxuICogdG8gcmVub3JtYWxpemUgdGhlIHF1YXRlcm5pb24geW91cnNlbGYgd2hlcmUgbmVjZXNzYXJ5LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHttYXQzfSBtIHJvdGF0aW9uIG1hdHJpeFxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cbnF1YXQuZnJvbU1hdDMgPSBmdW5jdGlvbihvdXQsIG0pIHtcbiAgICAvLyBBbGdvcml0aG0gaW4gS2VuIFNob2VtYWtlJ3MgYXJ0aWNsZSBpbiAxOTg3IFNJR0dSQVBIIGNvdXJzZSBub3Rlc1xuICAgIC8vIGFydGljbGUgXCJRdWF0ZXJuaW9uIENhbGN1bHVzIGFuZCBGYXN0IEFuaW1hdGlvblwiLlxuICAgIHZhciBmVHJhY2UgPSBtWzBdICsgbVs0XSArIG1bOF07XG4gICAgdmFyIGZSb290O1xuXG4gICAgaWYgKCBmVHJhY2UgPiAwLjAgKSB7XG4gICAgICAgIC8vIHx3fCA+IDEvMiwgbWF5IGFzIHdlbGwgY2hvb3NlIHcgPiAxLzJcbiAgICAgICAgZlJvb3QgPSBNYXRoLnNxcnQoZlRyYWNlICsgMS4wKTsgIC8vIDJ3XG4gICAgICAgIG91dFszXSA9IDAuNSAqIGZSb290O1xuICAgICAgICBmUm9vdCA9IDAuNS9mUm9vdDsgIC8vIDEvKDR3KVxuICAgICAgICBvdXRbMF0gPSAobVs1XS1tWzddKSpmUm9vdDtcbiAgICAgICAgb3V0WzFdID0gKG1bNl0tbVsyXSkqZlJvb3Q7XG4gICAgICAgIG91dFsyXSA9IChtWzFdLW1bM10pKmZSb290O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHx3fCA8PSAxLzJcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICBpZiAoIG1bNF0gPiBtWzBdIClcbiAgICAgICAgICBpID0gMTtcbiAgICAgICAgaWYgKCBtWzhdID4gbVtpKjMraV0gKVxuICAgICAgICAgIGkgPSAyO1xuICAgICAgICB2YXIgaiA9IChpKzEpJTM7XG4gICAgICAgIHZhciBrID0gKGkrMiklMztcblxuICAgICAgICBmUm9vdCA9IE1hdGguc3FydChtW2kqMytpXS1tW2oqMytqXS1tW2sqMytrXSArIDEuMCk7XG4gICAgICAgIG91dFtpXSA9IDAuNSAqIGZSb290O1xuICAgICAgICBmUm9vdCA9IDAuNSAvIGZSb290O1xuICAgICAgICBvdXRbM10gPSAobVtqKjMra10gLSBtW2sqMytqXSkgKiBmUm9vdDtcbiAgICAgICAgb3V0W2pdID0gKG1baiozK2ldICsgbVtpKjMral0pICogZlJvb3Q7XG4gICAgICAgIG91dFtrXSA9IChtW2sqMytpXSArIG1baSozK2tdKSAqIGZSb290O1xuICAgIH1cblxuICAgIHJldHVybiBvdXQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBxdWF0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZ2xtYXRyaXgvcXVhdC5qc1xuLy8gbW9kdWxlIGlkID0gMjdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///27\n");

/***/ }),
/* 28 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Light__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Camera__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__core_LRU__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__math_Matrix4__ = __webpack_require__(14);\n\n\n\n\n\n\n\n\n\nvar IDENTITY = __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__[\"a\" /* default */].create();\nvar WORLDVIEW = __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__[\"a\" /* default */].create();\n\nvar programKeyCache = {};\n\nfunction getProgramKey(lightNumbers) {\n    var defineStr = [];\n    var lightTypes = Object.keys(lightNumbers);\n    lightTypes.sort();\n    for (var i = 0; i < lightTypes.length; i++) {\n        var lightType = lightTypes[i];\n        defineStr.push(lightType + ' ' + lightNumbers[lightType]);\n    }\n    var key = defineStr.join('\\n');\n\n    if (programKeyCache[key]) {\n        return programKeyCache[key];\n    }\n\n    var id = __WEBPACK_IMPORTED_MODULE_4__core_util__[\"a\" /* default */].genGUID();\n    programKeyCache[key] = id;\n    return id;\n}\n\nfunction RenderList() {\n\n    this.opaque = [];\n    this.transparent = [];\n\n    this._opaqueCount = 0;\n    this._transparentCount = 0;\n}\n\nRenderList.prototype.startCount = function () {\n    this._opaqueCount = 0;\n    this._transparentCount = 0;\n};\n\nRenderList.prototype.add = function (object, isTransparent) {\n    if (isTransparent) {\n        this.transparent[this._transparentCount++] = object;\n    }\n    else {\n        this.opaque[this._opaqueCount++] = object;\n    }\n};\n\nRenderList.prototype.endCount = function () {\n    this.transparent.length = this._transparentCount;\n    this.opaque.length = this._opaqueCount;\n};\n\n/**\n * @typedef {Object} clay.Scene.RenderList\n * @property {Array.<clay.Renderable>} opaque\n * @property {Array.<clay.Renderable>} transparent\n */\n\n/**\n * @constructor clay.Scene\n * @extends clay.Node\n */\nvar Scene = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Scene# */ {\n        /**\n         * Global material of scene\n         * @type {clay.Material}\n         */\n        material: null,\n\n        lights: [],\n\n        /**\n         * Scene bounding box in view space.\n         * Used when camera needs to adujst the near and far plane automatically\n         * so that the view frustum contains the visible objects as tightly as possible.\n         * Notice:\n         *  It is updated after rendering (in the step of frustum culling passingly). So may be not so accurate, but saves a lot of calculation\n         *\n         * @type {clay.BoundingBox}\n         */\n        viewBoundingBoxLastFrame: new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */](),\n\n        // Uniforms for shadow map.\n        shadowUniforms: {},\n\n        _cameraList: [],\n\n        // Properties to save the light information in the scene\n        // Will be set in the render function\n        _lightUniforms: {},\n\n        _previousLightNumber: {},\n\n        _lightNumber: {\n            // groupId: {\n                // POINT_LIGHT: 0,\n                // DIRECTIONAL_LIGHT: 0,\n                // SPOT_LIGHT: 0,\n                // AMBIENT_LIGHT: 0,\n                // AMBIENT_SH_LIGHT: 0\n            // }\n        },\n\n        _lightProgramKeys: {},\n\n        _nodeRepository: {},\n\n        _renderLists: new __WEBPACK_IMPORTED_MODULE_6__core_LRU__[\"a\" /* default */](20)\n\n    };\n}, function () {\n    this._scene = this;\n},\n/** @lends clay.Scene.prototype. */\n{\n\n    // Add node to scene\n    addToScene: function (node) {\n        if (node instanceof __WEBPACK_IMPORTED_MODULE_2__Camera__[\"a\" /* default */]) {\n            if (this._cameraList.length > 0) {\n                console.warn('Found multiple camera in one scene. Use the fist one.');\n            }\n            this._cameraList.push(node);\n        }\n        else if (node instanceof __WEBPACK_IMPORTED_MODULE_1__Light__[\"a\" /* default */]) {\n            this.lights.push(node);\n        }\n        if (node.name) {\n            this._nodeRepository[node.name] = node;\n        }\n    },\n\n    // Remove node from scene\n    removeFromScene: function (node) {\n        var idx;\n        if (node instanceof __WEBPACK_IMPORTED_MODULE_2__Camera__[\"a\" /* default */]) {\n            idx = this._cameraList.indexOf(node);\n            if (idx >= 0) {\n                this._cameraList.splice(idx, 1);\n            }\n        }\n        else if (node instanceof __WEBPACK_IMPORTED_MODULE_1__Light__[\"a\" /* default */]) {\n            idx = this.lights.indexOf(node);\n            if (idx >= 0) {\n                this.lights.splice(idx, 1);\n            }\n        }\n        if (node.name) {\n            delete this._nodeRepository[node.name];\n        }\n    },\n\n    /**\n     * Get node by name\n     * @param  {string} name\n     * @return {Node}\n     * @DEPRECATED\n     */\n    getNode: function (name) {\n        return this._nodeRepository[name];\n    },\n\n    /**\n     * Set main camera of the scene.\n     * @param {claygl.Camera} camera\n     */\n    setMainCamera: function (camera) {\n        var idx = this._cameraList.indexOf(camera);\n        if (idx >= 0) {\n            this._cameraList.splice(idx, 1);\n        }\n        this._cameraList.unshift(camera);\n    },\n    /**\n     * Get main camera of the scene.\n     */\n    getMainCamera: function () {\n        return this._cameraList[0];\n    },\n\n    getLights: function () {\n        return this.lights;\n    },\n\n    updateLights: function () {\n        var lights = this.lights;\n        this._previousLightNumber = this._lightNumber;\n\n        var lightNumber = {};\n        for (var i = 0; i < lights.length; i++) {\n            var light = lights[i];\n            if (light.invisible) {\n                continue;\n            }\n            var group = light.group;\n            if (!lightNumber[group]) {\n                lightNumber[group] = {};\n            }\n            // User can use any type of light\n            lightNumber[group][light.type] = lightNumber[group][light.type] || 0;\n            lightNumber[group][light.type]++;\n        }\n        this._lightNumber = lightNumber;\n\n        for (var groupId in lightNumber) {\n            this._lightProgramKeys[groupId] = getProgramKey(lightNumber[groupId]);\n        }\n\n        this._updateLightUniforms();\n    },\n\n    /**\n     * Clone a node and it's children, including mesh, camera, light, etc.\n     * Unlike using `Node#clone`. It will clone skeleton and remap the joints. Material will also be cloned.\n     *\n     * @param {clay.Node} node\n     * @return {clay.Node}\n     */\n    cloneNode: function (node) {\n        var newNode = node.clone();\n        var clonedNodesMap = {};\n        function buildNodesMap(sNode, tNode) {\n            clonedNodesMap[sNode.__uid__] = tNode;\n\n            for (var i = 0; i < sNode._children.length; i++) {\n                var sChild = sNode._children[i];\n                var tChild = tNode._children[i];\n                buildNodesMap(sChild, tChild);\n            }\n        }\n        buildNodesMap(node, newNode);\n\n        newNode.traverse(function (newChild) {\n            if (newChild.skeleton) {\n                newChild.skeleton = newChild.skeleton.clone(clonedNodesMap);\n            }\n            if (newChild.material) {\n                newChild.material = newChild.material.clone();\n            }\n        });\n\n        return newNode;\n    },\n\n    /**\n     * Traverse the scene and add the renderable object to the render list.\n     * It needs camera for the frustum culling.\n     *\n     * @param {clay.Camera} camera\n     * @param {boolean} updateSceneBoundingBox\n     * @return {clay.Scene.RenderList}\n     */\n    updateRenderList: function (camera, updateSceneBoundingBox) {\n        var id = camera.__uid__;\n        var renderList = this._renderLists.get(id);\n        if (!renderList) {\n            renderList = new RenderList();\n            this._renderLists.put(id, renderList);\n        }\n        renderList.startCount();\n\n        if (updateSceneBoundingBox) {\n            this.viewBoundingBoxLastFrame.min.set(Infinity, Infinity, Infinity);\n            this.viewBoundingBoxLastFrame.max.set(-Infinity, -Infinity, -Infinity);\n        }\n\n        var sceneMaterialTransparent = this.material && this.material.transparent || false;\n        this._doUpdateRenderList(this, camera, sceneMaterialTransparent, renderList, updateSceneBoundingBox);\n\n        renderList.endCount();\n\n        return renderList;\n    },\n\n    /**\n     * Get render list. Used after {@link clay.Scene#updateRenderList}\n     * @param {clay.Camera} camera\n     * @return {clay.Scene.RenderList}\n     */\n    getRenderList: function (camera) {\n        return this._renderLists.get(camera.__uid__);\n    },\n\n    _doUpdateRenderList: function (parent, camera, sceneMaterialTransparent, renderList, updateSceneBoundingBox) {\n        if (parent.invisible) {\n            return;\n        }\n        // TODO Optimize\n        for (var i = 0; i < parent._children.length; i++) {\n            var child = parent._children[i];\n\n            if (child.isRenderable()) {\n                // Frustum culling\n                var worldM = child.isSkinnedMesh() ? IDENTITY : child.worldTransform.array;\n                var geometry = child.geometry;\n\n                __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__[\"a\" /* default */].multiplyAffine(WORLDVIEW, camera.viewMatrix.array, worldM);\n                if (updateSceneBoundingBox && !geometry.boundingBox || !this.isFrustumCulled(child, camera, WORLDVIEW)) {\n                    renderList.add(child, child.material.transparent || sceneMaterialTransparent);\n                }\n            }\n            if (child._children.length > 0) {\n                this._doUpdateRenderList(child, camera, sceneMaterialTransparent, renderList, updateSceneBoundingBox);\n            }\n        }\n    },\n\n    /**\n     * If an scene object is culled by camera frustum\n     *\n     * Object can be a renderable or a light\n     *\n     * @param {clay.Node} object\n     * @param {clay.Camera} camera\n     * @param {Array.<number>} worldViewMat represented with array\n     * @param {Array.<number>} projectionMat represented with array\n     */\n    isFrustumCulled: (function () {\n        // Frustum culling\n        // http://www.cse.chalmers.se/~uffe/vfc_bbox.pdf\n        var cullingBoundingBox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n        var cullingMatrix = new __WEBPACK_IMPORTED_MODULE_7__math_Matrix4__[\"a\" /* default */]();\n        return function(object, camera, worldViewMat) {\n            // Bounding box can be a property of object(like light) or renderable.geometry\n            // PENDING\n            var geoBBox = object.boundingBox;\n            if (!geoBBox) {\n                if (object.skeleton && object.skeleton.boundingBox) {\n                    geoBBox = object.skeleton.boundingBox;\n                }\n                else {\n                    geoBBox = object.geometry.boundingBox;\n                }\n            }\n\n            if (!geoBBox) {\n                return false;\n            }\n\n            cullingMatrix.array = worldViewMat;\n            cullingBoundingBox.transformFrom(geoBBox, cullingMatrix);\n\n            // Passingly update the scene bounding box\n            // FIXME exclude very large mesh like ground plane or terrain ?\n            // FIXME Only rendererable which cast shadow ?\n\n            // FIXME boundingBox becomes much larger after transformd.\n            if (object.castShadow) {\n                this.viewBoundingBoxLastFrame.union(cullingBoundingBox);\n            }\n            // Ignore frustum culling if object is skinned mesh.\n            if (object.frustumCulling)  {\n                if (!cullingBoundingBox.intersectBoundingBox(camera.frustum.boundingBox)) {\n                    return true;\n                }\n\n                cullingMatrix.array = camera.projectionMatrix.array;\n                if (\n                    cullingBoundingBox.max.array[2] > 0 &&\n                    cullingBoundingBox.min.array[2] < 0\n                ) {\n                    // Clip in the near plane\n                    cullingBoundingBox.max.array[2] = -1e-20;\n                }\n\n                cullingBoundingBox.applyProjection(cullingMatrix);\n\n                var min = cullingBoundingBox.min.array;\n                var max = cullingBoundingBox.max.array;\n\n                if (\n                    max[0] < -1 || min[0] > 1\n                    || max[1] < -1 || min[1] > 1\n                    || max[2] < -1 || min[2] > 1\n                ) {\n                    return true;\n                }\n            }\n\n            return false;\n        };\n    })(),\n\n    _updateLightUniforms: function () {\n        var lights = this.lights;\n        // Put the light cast shadow before the light not cast shadow\n        lights.sort(lightSortFunc);\n\n        var lightUniforms = this._lightUniforms;\n        for (var group in lightUniforms) {\n            for (var symbol in lightUniforms[group]) {\n                lightUniforms[group][symbol].value.length = 0;\n            }\n        }\n        for (var i = 0; i < lights.length; i++) {\n\n            var light = lights[i];\n\n            if (light.invisible) {\n                continue;\n            }\n\n            var group = light.group;\n\n            for (var symbol in light.uniformTemplates) {\n                var uniformTpl = light.uniformTemplates[symbol];\n                var value = uniformTpl.value(light);\n                if (value == null) {\n                    continue;\n                }\n                if (!lightUniforms[group]) {\n                    lightUniforms[group] = {};\n                }\n                if (!lightUniforms[group][symbol]) {\n                    lightUniforms[group][symbol] = {\n                        type: '',\n                        value: []\n                    };\n                }\n                var lu = lightUniforms[group][symbol];\n                lu.type = uniformTpl.type + 'v';\n                switch (uniformTpl.type) {\n                    case '1i':\n                    case '1f':\n                    case 't':\n                        lu.value.push(value);\n                        break;\n                    case '2f':\n                    case '3f':\n                    case '4f':\n                        for (var j = 0; j < value.length; j++) {\n                            lu.value.push(value[j]);\n                        }\n                        break;\n                    default:\n                        console.error('Unkown light uniform type ' + uniformTpl.type);\n                }\n            }\n        }\n    },\n\n    getLightGroups: function () {\n        var lightGroups = [];\n        for (var groupId in this._lightNumber) {\n            lightGroups.push(groupId);\n        }\n        return lightGroups;\n    },\n\n    getNumberChangedLightGroups: function () {\n        var lightGroups = [];\n        for (var groupId in this._lightNumber) {\n            if (this.isLightNumberChanged(groupId)) {\n                lightGroups.push(groupId);\n            }\n        }\n        return lightGroups;\n    },\n\n    // Determine if light group is different with since last frame\n    // Used to determine whether to update shader and scene's uniforms in Renderer.render\n    isLightNumberChanged: function (lightGroup) {\n        var prevLightNumber = this._previousLightNumber;\n        var currentLightNumber = this._lightNumber;\n        // PENDING Performance\n        for (var type in currentLightNumber[lightGroup]) {\n            if (!prevLightNumber[lightGroup]) {\n                return true;\n            }\n            if (currentLightNumber[lightGroup][type] !== prevLightNumber[lightGroup][type]) {\n                return true;\n            }\n        }\n        for (var type in prevLightNumber[lightGroup]) {\n            if (!currentLightNumber[lightGroup]) {\n                return true;\n            }\n            if (currentLightNumber[lightGroup][type] !== prevLightNumber[lightGroup][type]) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    getLightsNumbers: function (lightGroup) {\n        return this._lightNumber[lightGroup];\n    },\n\n    getProgramKey: function (lightGroup) {\n        return this._lightProgramKeys[lightGroup];\n    },\n\n    setLightUniforms: (function () {\n        function setUniforms(uniforms, program, renderer) {\n            for (var symbol in uniforms) {\n                var lu = uniforms[symbol];\n                if (lu.type === 'tv') {\n                    if (!program.hasUniform(symbol)) {\n                        continue;\n                    }\n                    var texSlots = [];\n                    for (var i = 0; i < lu.value.length; i++) {\n                        var texture = lu.value[i];\n                        var slot = program.takeCurrentTextureSlot(renderer, texture);\n                        texSlots.push(slot);\n                    }\n                    program.setUniform(renderer.gl, '1iv', symbol, texSlots);\n                }\n                else {\n                    program.setUniform(renderer.gl, lu.type, symbol, lu.value);\n                }\n            }\n        }\n\n        return function (program, lightGroup, renderer) {\n            setUniforms(this._lightUniforms[lightGroup], program, renderer);\n            // Set shadows\n            setUniforms(this.shadowUniforms, program, renderer);\n        };\n    })(),\n\n    /**\n     * Dispose self, clear all the scene objects\n     * But resources of gl like texuture, shader will not be disposed.\n     * Mostly you should use disposeScene method in Renderer to do dispose.\n     */\n    dispose: function () {\n        this.material = null;\n        this._opaqueList = [];\n        this._transparentList = [];\n\n        this.lights = [];\n\n        this._lightUniforms = {};\n\n        this._lightNumber = {};\n        this._nodeRepository = {};\n    }\n});\n\nfunction lightSortFunc(a, b) {\n    if (b.castShadow && !a.castShadow) {\n        return true;\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Scene);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9TY2VuZS5qcz8wMWJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOb2RlIGZyb20gJy4vTm9kZSc7XG5pbXBvcnQgTGlnaHQgZnJvbSAnLi9MaWdodCc7XG5pbXBvcnQgQ2FtZXJhIGZyb20gJy4vQ2FtZXJhJztcbmltcG9ydCBCb3VuZGluZ0JveCBmcm9tICcuL21hdGgvQm91bmRpbmdCb3gnO1xuaW1wb3J0IHV0aWwgZnJvbSAnLi9jb3JlL3V0aWwnO1xuaW1wb3J0IG1hdDQgZnJvbSAnLi9nbG1hdHJpeC9tYXQ0JztcbmltcG9ydCBMUlVDYWNoZSBmcm9tICcuL2NvcmUvTFJVJztcbmltcG9ydCBNYXRyaXg0IGZyb20gJy4vbWF0aC9NYXRyaXg0JztcblxudmFyIElERU5USVRZID0gbWF0NC5jcmVhdGUoKTtcbnZhciBXT1JMRFZJRVcgPSBtYXQ0LmNyZWF0ZSgpO1xuXG52YXIgcHJvZ3JhbUtleUNhY2hlID0ge307XG5cbmZ1bmN0aW9uIGdldFByb2dyYW1LZXkobGlnaHROdW1iZXJzKSB7XG4gICAgdmFyIGRlZmluZVN0ciA9IFtdO1xuICAgIHZhciBsaWdodFR5cGVzID0gT2JqZWN0LmtleXMobGlnaHROdW1iZXJzKTtcbiAgICBsaWdodFR5cGVzLnNvcnQoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpZ2h0VHlwZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGxpZ2h0VHlwZSA9IGxpZ2h0VHlwZXNbaV07XG4gICAgICAgIGRlZmluZVN0ci5wdXNoKGxpZ2h0VHlwZSArICcgJyArIGxpZ2h0TnVtYmVyc1tsaWdodFR5cGVdKTtcbiAgICB9XG4gICAgdmFyIGtleSA9IGRlZmluZVN0ci5qb2luKCdcXG4nKTtcblxuICAgIGlmIChwcm9ncmFtS2V5Q2FjaGVba2V5XSkge1xuICAgICAgICByZXR1cm4gcHJvZ3JhbUtleUNhY2hlW2tleV07XG4gICAgfVxuXG4gICAgdmFyIGlkID0gdXRpbC5nZW5HVUlEKCk7XG4gICAgcHJvZ3JhbUtleUNhY2hlW2tleV0gPSBpZDtcbiAgICByZXR1cm4gaWQ7XG59XG5cbmZ1bmN0aW9uIFJlbmRlckxpc3QoKSB7XG5cbiAgICB0aGlzLm9wYXF1ZSA9IFtdO1xuICAgIHRoaXMudHJhbnNwYXJlbnQgPSBbXTtcblxuICAgIHRoaXMuX29wYXF1ZUNvdW50ID0gMDtcbiAgICB0aGlzLl90cmFuc3BhcmVudENvdW50ID0gMDtcbn1cblxuUmVuZGVyTGlzdC5wcm90b3R5cGUuc3RhcnRDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9vcGFxdWVDb3VudCA9IDA7XG4gICAgdGhpcy5fdHJhbnNwYXJlbnRDb3VudCA9IDA7XG59O1xuXG5SZW5kZXJMaXN0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAob2JqZWN0LCBpc1RyYW5zcGFyZW50KSB7XG4gICAgaWYgKGlzVHJhbnNwYXJlbnQpIHtcbiAgICAgICAgdGhpcy50cmFuc3BhcmVudFt0aGlzLl90cmFuc3BhcmVudENvdW50KytdID0gb2JqZWN0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5vcGFxdWVbdGhpcy5fb3BhcXVlQ291bnQrK10gPSBvYmplY3Q7XG4gICAgfVxufTtcblxuUmVuZGVyTGlzdC5wcm90b3R5cGUuZW5kQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy50cmFuc3BhcmVudC5sZW5ndGggPSB0aGlzLl90cmFuc3BhcmVudENvdW50O1xuICAgIHRoaXMub3BhcXVlLmxlbmd0aCA9IHRoaXMuX29wYXF1ZUNvdW50O1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBjbGF5LlNjZW5lLlJlbmRlckxpc3RcbiAqIEBwcm9wZXJ0eSB7QXJyYXkuPGNsYXkuUmVuZGVyYWJsZT59IG9wYXF1ZVxuICogQHByb3BlcnR5IHtBcnJheS48Y2xheS5SZW5kZXJhYmxlPn0gdHJhbnNwYXJlbnRcbiAqL1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LlNjZW5lXG4gKiBAZXh0ZW5kcyBjbGF5Lk5vZGVcbiAqL1xudmFyIFNjZW5lID0gTm9kZS5leHRlbmQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuU2NlbmUjICovIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdsb2JhbCBtYXRlcmlhbCBvZiBzY2VuZVxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5NYXRlcmlhbH1cbiAgICAgICAgICovXG4gICAgICAgIG1hdGVyaWFsOiBudWxsLFxuXG4gICAgICAgIGxpZ2h0czogW10sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNjZW5lIGJvdW5kaW5nIGJveCBpbiB2aWV3IHNwYWNlLlxuICAgICAgICAgKiBVc2VkIHdoZW4gY2FtZXJhIG5lZWRzIHRvIGFkdWpzdCB0aGUgbmVhciBhbmQgZmFyIHBsYW5lIGF1dG9tYXRpY2FsbHlcbiAgICAgICAgICogc28gdGhhdCB0aGUgdmlldyBmcnVzdHVtIGNvbnRhaW5zIHRoZSB2aXNpYmxlIG9iamVjdHMgYXMgdGlnaHRseSBhcyBwb3NzaWJsZS5cbiAgICAgICAgICogTm90aWNlOlxuICAgICAgICAgKiAgSXQgaXMgdXBkYXRlZCBhZnRlciByZW5kZXJpbmcgKGluIHRoZSBzdGVwIG9mIGZydXN0dW0gY3VsbGluZyBwYXNzaW5nbHkpLiBTbyBtYXkgYmUgbm90IHNvIGFjY3VyYXRlLCBidXQgc2F2ZXMgYSBsb3Qgb2YgY2FsY3VsYXRpb25cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2NsYXkuQm91bmRpbmdCb3h9XG4gICAgICAgICAqL1xuICAgICAgICB2aWV3Qm91bmRpbmdCb3hMYXN0RnJhbWU6IG5ldyBCb3VuZGluZ0JveCgpLFxuXG4gICAgICAgIC8vIFVuaWZvcm1zIGZvciBzaGFkb3cgbWFwLlxuICAgICAgICBzaGFkb3dVbmlmb3Jtczoge30sXG5cbiAgICAgICAgX2NhbWVyYUxpc3Q6IFtdLFxuXG4gICAgICAgIC8vIFByb3BlcnRpZXMgdG8gc2F2ZSB0aGUgbGlnaHQgaW5mb3JtYXRpb24gaW4gdGhlIHNjZW5lXG4gICAgICAgIC8vIFdpbGwgYmUgc2V0IGluIHRoZSByZW5kZXIgZnVuY3Rpb25cbiAgICAgICAgX2xpZ2h0VW5pZm9ybXM6IHt9LFxuXG4gICAgICAgIF9wcmV2aW91c0xpZ2h0TnVtYmVyOiB7fSxcblxuICAgICAgICBfbGlnaHROdW1iZXI6IHtcbiAgICAgICAgICAgIC8vIGdyb3VwSWQ6IHtcbiAgICAgICAgICAgICAgICAvLyBQT0lOVF9MSUdIVDogMCxcbiAgICAgICAgICAgICAgICAvLyBESVJFQ1RJT05BTF9MSUdIVDogMCxcbiAgICAgICAgICAgICAgICAvLyBTUE9UX0xJR0hUOiAwLFxuICAgICAgICAgICAgICAgIC8vIEFNQklFTlRfTElHSFQ6IDAsXG4gICAgICAgICAgICAgICAgLy8gQU1CSUVOVF9TSF9MSUdIVDogMFxuICAgICAgICAgICAgLy8gfVxuICAgICAgICB9LFxuXG4gICAgICAgIF9saWdodFByb2dyYW1LZXlzOiB7fSxcblxuICAgICAgICBfbm9kZVJlcG9zaXRvcnk6IHt9LFxuXG4gICAgICAgIF9yZW5kZXJMaXN0czogbmV3IExSVUNhY2hlKDIwKVxuXG4gICAgfTtcbn0sIGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9zY2VuZSA9IHRoaXM7XG59LFxuLyoqIEBsZW5kcyBjbGF5LlNjZW5lLnByb3RvdHlwZS4gKi9cbntcblxuICAgIC8vIEFkZCBub2RlIHRvIHNjZW5lXG4gICAgYWRkVG9TY2VuZTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBDYW1lcmEpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jYW1lcmFMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZvdW5kIG11bHRpcGxlIGNhbWVyYSBpbiBvbmUgc2NlbmUuIFVzZSB0aGUgZmlzdCBvbmUuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9jYW1lcmFMaXN0LnB1c2gobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIExpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLmxpZ2h0cy5wdXNoKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLm5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuX25vZGVSZXBvc2l0b3J5W25vZGUubmFtZV0gPSBub2RlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBub2RlIGZyb20gc2NlbmVcbiAgICByZW1vdmVGcm9tU2NlbmU6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHZhciBpZHg7XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgQ2FtZXJhKSB7XG4gICAgICAgICAgICBpZHggPSB0aGlzLl9jYW1lcmFMaXN0LmluZGV4T2Yobm9kZSk7XG4gICAgICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYW1lcmFMaXN0LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5vZGUgaW5zdGFuY2VvZiBMaWdodCkge1xuICAgICAgICAgICAgaWR4ID0gdGhpcy5saWdodHMuaW5kZXhPZihub2RlKTtcbiAgICAgICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMubGlnaHRzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLm5hbWUpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9ub2RlUmVwb3NpdG9yeVtub2RlLm5hbWVdO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBub2RlIGJ5IG5hbWVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcmV0dXJuIHtOb2RlfVxuICAgICAqIEBERVBSRUNBVEVEXG4gICAgICovXG4gICAgZ2V0Tm9kZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25vZGVSZXBvc2l0b3J5W25hbWVdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgbWFpbiBjYW1lcmEgb2YgdGhlIHNjZW5lLlxuICAgICAqIEBwYXJhbSB7Y2xheWdsLkNhbWVyYX0gY2FtZXJhXG4gICAgICovXG4gICAgc2V0TWFpbkNhbWVyYTogZnVuY3Rpb24gKGNhbWVyYSkge1xuICAgICAgICB2YXIgaWR4ID0gdGhpcy5fY2FtZXJhTGlzdC5pbmRleE9mKGNhbWVyYSk7XG4gICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5fY2FtZXJhTGlzdC5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jYW1lcmFMaXN0LnVuc2hpZnQoY2FtZXJhKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEdldCBtYWluIGNhbWVyYSBvZiB0aGUgc2NlbmUuXG4gICAgICovXG4gICAgZ2V0TWFpbkNhbWVyYTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FtZXJhTGlzdFswXTtcbiAgICB9LFxuXG4gICAgZ2V0TGlnaHRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxpZ2h0cztcbiAgICB9LFxuXG4gICAgdXBkYXRlTGlnaHRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsaWdodHMgPSB0aGlzLmxpZ2h0cztcbiAgICAgICAgdGhpcy5fcHJldmlvdXNMaWdodE51bWJlciA9IHRoaXMuX2xpZ2h0TnVtYmVyO1xuXG4gICAgICAgIHZhciBsaWdodE51bWJlciA9IHt9O1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGxpZ2h0ID0gbGlnaHRzW2ldO1xuICAgICAgICAgICAgaWYgKGxpZ2h0LmludmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdyb3VwID0gbGlnaHQuZ3JvdXA7XG4gICAgICAgICAgICBpZiAoIWxpZ2h0TnVtYmVyW2dyb3VwXSkge1xuICAgICAgICAgICAgICAgIGxpZ2h0TnVtYmVyW2dyb3VwXSA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVXNlciBjYW4gdXNlIGFueSB0eXBlIG9mIGxpZ2h0XG4gICAgICAgICAgICBsaWdodE51bWJlcltncm91cF1bbGlnaHQudHlwZV0gPSBsaWdodE51bWJlcltncm91cF1bbGlnaHQudHlwZV0gfHwgMDtcbiAgICAgICAgICAgIGxpZ2h0TnVtYmVyW2dyb3VwXVtsaWdodC50eXBlXSsrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xpZ2h0TnVtYmVyID0gbGlnaHROdW1iZXI7XG5cbiAgICAgICAgZm9yICh2YXIgZ3JvdXBJZCBpbiBsaWdodE51bWJlcikge1xuICAgICAgICAgICAgdGhpcy5fbGlnaHRQcm9ncmFtS2V5c1tncm91cElkXSA9IGdldFByb2dyYW1LZXkobGlnaHROdW1iZXJbZ3JvdXBJZF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdXBkYXRlTGlnaHRVbmlmb3JtcygpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSBhIG5vZGUgYW5kIGl0J3MgY2hpbGRyZW4sIGluY2x1ZGluZyBtZXNoLCBjYW1lcmEsIGxpZ2h0LCBldGMuXG4gICAgICogVW5saWtlIHVzaW5nIGBOb2RlI2Nsb25lYC4gSXQgd2lsbCBjbG9uZSBza2VsZXRvbiBhbmQgcmVtYXAgdGhlIGpvaW50cy4gTWF0ZXJpYWwgd2lsbCBhbHNvIGJlIGNsb25lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Y2xheS5Ob2RlfSBub2RlXG4gICAgICogQHJldHVybiB7Y2xheS5Ob2RlfVxuICAgICAqL1xuICAgIGNsb25lTm9kZTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgdmFyIG5ld05vZGUgPSBub2RlLmNsb25lKCk7XG4gICAgICAgIHZhciBjbG9uZWROb2Rlc01hcCA9IHt9O1xuICAgICAgICBmdW5jdGlvbiBidWlsZE5vZGVzTWFwKHNOb2RlLCB0Tm9kZSkge1xuICAgICAgICAgICAgY2xvbmVkTm9kZXNNYXBbc05vZGUuX191aWRfX10gPSB0Tm9kZTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzTm9kZS5fY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc0NoaWxkID0gc05vZGUuX2NoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgIHZhciB0Q2hpbGQgPSB0Tm9kZS5fY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgYnVpbGROb2Rlc01hcChzQ2hpbGQsIHRDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnVpbGROb2Rlc01hcChub2RlLCBuZXdOb2RlKTtcblxuICAgICAgICBuZXdOb2RlLnRyYXZlcnNlKGZ1bmN0aW9uIChuZXdDaGlsZCkge1xuICAgICAgICAgICAgaWYgKG5ld0NoaWxkLnNrZWxldG9uKSB7XG4gICAgICAgICAgICAgICAgbmV3Q2hpbGQuc2tlbGV0b24gPSBuZXdDaGlsZC5za2VsZXRvbi5jbG9uZShjbG9uZWROb2Rlc01hcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3Q2hpbGQubWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICBuZXdDaGlsZC5tYXRlcmlhbCA9IG5ld0NoaWxkLm1hdGVyaWFsLmNsb25lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBuZXdOb2RlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUcmF2ZXJzZSB0aGUgc2NlbmUgYW5kIGFkZCB0aGUgcmVuZGVyYWJsZSBvYmplY3QgdG8gdGhlIHJlbmRlciBsaXN0LlxuICAgICAqIEl0IG5lZWRzIGNhbWVyYSBmb3IgdGhlIGZydXN0dW0gY3VsbGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Y2xheS5DYW1lcmF9IGNhbWVyYVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdXBkYXRlU2NlbmVCb3VuZGluZ0JveFxuICAgICAqIEByZXR1cm4ge2NsYXkuU2NlbmUuUmVuZGVyTGlzdH1cbiAgICAgKi9cbiAgICB1cGRhdGVSZW5kZXJMaXN0OiBmdW5jdGlvbiAoY2FtZXJhLCB1cGRhdGVTY2VuZUJvdW5kaW5nQm94KSB7XG4gICAgICAgIHZhciBpZCA9IGNhbWVyYS5fX3VpZF9fO1xuICAgICAgICB2YXIgcmVuZGVyTGlzdCA9IHRoaXMuX3JlbmRlckxpc3RzLmdldChpZCk7XG4gICAgICAgIGlmICghcmVuZGVyTGlzdCkge1xuICAgICAgICAgICAgcmVuZGVyTGlzdCA9IG5ldyBSZW5kZXJMaXN0KCk7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJMaXN0cy5wdXQoaWQsIHJlbmRlckxpc3QpO1xuICAgICAgICB9XG4gICAgICAgIHJlbmRlckxpc3Quc3RhcnRDb3VudCgpO1xuXG4gICAgICAgIGlmICh1cGRhdGVTY2VuZUJvdW5kaW5nQm94KSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdCb3VuZGluZ0JveExhc3RGcmFtZS5taW4uc2V0KEluZmluaXR5LCBJbmZpbml0eSwgSW5maW5pdHkpO1xuICAgICAgICAgICAgdGhpcy52aWV3Qm91bmRpbmdCb3hMYXN0RnJhbWUubWF4LnNldCgtSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzY2VuZU1hdGVyaWFsVHJhbnNwYXJlbnQgPSB0aGlzLm1hdGVyaWFsICYmIHRoaXMubWF0ZXJpYWwudHJhbnNwYXJlbnQgfHwgZmFsc2U7XG4gICAgICAgIHRoaXMuX2RvVXBkYXRlUmVuZGVyTGlzdCh0aGlzLCBjYW1lcmEsIHNjZW5lTWF0ZXJpYWxUcmFuc3BhcmVudCwgcmVuZGVyTGlzdCwgdXBkYXRlU2NlbmVCb3VuZGluZ0JveCk7XG5cbiAgICAgICAgcmVuZGVyTGlzdC5lbmRDb3VudCgpO1xuXG4gICAgICAgIHJldHVybiByZW5kZXJMaXN0O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgcmVuZGVyIGxpc3QuIFVzZWQgYWZ0ZXIge0BsaW5rIGNsYXkuU2NlbmUjdXBkYXRlUmVuZGVyTGlzdH1cbiAgICAgKiBAcGFyYW0ge2NsYXkuQ2FtZXJhfSBjYW1lcmFcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlNjZW5lLlJlbmRlckxpc3R9XG4gICAgICovXG4gICAgZ2V0UmVuZGVyTGlzdDogZnVuY3Rpb24gKGNhbWVyYSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVuZGVyTGlzdHMuZ2V0KGNhbWVyYS5fX3VpZF9fKTtcbiAgICB9LFxuXG4gICAgX2RvVXBkYXRlUmVuZGVyTGlzdDogZnVuY3Rpb24gKHBhcmVudCwgY2FtZXJhLCBzY2VuZU1hdGVyaWFsVHJhbnNwYXJlbnQsIHJlbmRlckxpc3QsIHVwZGF0ZVNjZW5lQm91bmRpbmdCb3gpIHtcbiAgICAgICAgaWYgKHBhcmVudC5pbnZpc2libGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPIE9wdGltaXplXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyZW50Ll9jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGNoaWxkID0gcGFyZW50Ll9jaGlsZHJlbltpXTtcblxuICAgICAgICAgICAgaWYgKGNoaWxkLmlzUmVuZGVyYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgLy8gRnJ1c3R1bSBjdWxsaW5nXG4gICAgICAgICAgICAgICAgdmFyIHdvcmxkTSA9IGNoaWxkLmlzU2tpbm5lZE1lc2goKSA/IElERU5USVRZIDogY2hpbGQud29ybGRUcmFuc2Zvcm0uYXJyYXk7XG4gICAgICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gY2hpbGQuZ2VvbWV0cnk7XG5cbiAgICAgICAgICAgICAgICBtYXQ0Lm11bHRpcGx5QWZmaW5lKFdPUkxEVklFVywgY2FtZXJhLnZpZXdNYXRyaXguYXJyYXksIHdvcmxkTSk7XG4gICAgICAgICAgICAgICAgaWYgKHVwZGF0ZVNjZW5lQm91bmRpbmdCb3ggJiYgIWdlb21ldHJ5LmJvdW5kaW5nQm94IHx8ICF0aGlzLmlzRnJ1c3R1bUN1bGxlZChjaGlsZCwgY2FtZXJhLCBXT1JMRFZJRVcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlckxpc3QuYWRkKGNoaWxkLCBjaGlsZC5tYXRlcmlhbC50cmFuc3BhcmVudCB8fCBzY2VuZU1hdGVyaWFsVHJhbnNwYXJlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGlsZC5fY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2RvVXBkYXRlUmVuZGVyTGlzdChjaGlsZCwgY2FtZXJhLCBzY2VuZU1hdGVyaWFsVHJhbnNwYXJlbnQsIHJlbmRlckxpc3QsIHVwZGF0ZVNjZW5lQm91bmRpbmdCb3gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIElmIGFuIHNjZW5lIG9iamVjdCBpcyBjdWxsZWQgYnkgY2FtZXJhIGZydXN0dW1cbiAgICAgKlxuICAgICAqIE9iamVjdCBjYW4gYmUgYSByZW5kZXJhYmxlIG9yIGEgbGlnaHRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Y2xheS5Ob2RlfSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge2NsYXkuQ2FtZXJhfSBjYW1lcmFcbiAgICAgKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSB3b3JsZFZpZXdNYXQgcmVwcmVzZW50ZWQgd2l0aCBhcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IHByb2plY3Rpb25NYXQgcmVwcmVzZW50ZWQgd2l0aCBhcnJheVxuICAgICAqL1xuICAgIGlzRnJ1c3R1bUN1bGxlZDogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gRnJ1c3R1bSBjdWxsaW5nXG4gICAgICAgIC8vIGh0dHA6Ly93d3cuY3NlLmNoYWxtZXJzLnNlL351ZmZlL3ZmY19iYm94LnBkZlxuICAgICAgICB2YXIgY3VsbGluZ0JvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgICAgIHZhciBjdWxsaW5nTWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCwgY2FtZXJhLCB3b3JsZFZpZXdNYXQpIHtcbiAgICAgICAgICAgIC8vIEJvdW5kaW5nIGJveCBjYW4gYmUgYSBwcm9wZXJ0eSBvZiBvYmplY3QobGlrZSBsaWdodCkgb3IgcmVuZGVyYWJsZS5nZW9tZXRyeVxuICAgICAgICAgICAgLy8gUEVORElOR1xuICAgICAgICAgICAgdmFyIGdlb0JCb3ggPSBvYmplY3QuYm91bmRpbmdCb3g7XG4gICAgICAgICAgICBpZiAoIWdlb0JCb3gpIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0LnNrZWxldG9uICYmIG9iamVjdC5za2VsZXRvbi5ib3VuZGluZ0JveCkge1xuICAgICAgICAgICAgICAgICAgICBnZW9CQm94ID0gb2JqZWN0LnNrZWxldG9uLmJvdW5kaW5nQm94O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZ2VvQkJveCA9IG9iamVjdC5nZW9tZXRyeS5ib3VuZGluZ0JveDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZ2VvQkJveCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3VsbGluZ01hdHJpeC5hcnJheSA9IHdvcmxkVmlld01hdDtcbiAgICAgICAgICAgIGN1bGxpbmdCb3VuZGluZ0JveC50cmFuc2Zvcm1Gcm9tKGdlb0JCb3gsIGN1bGxpbmdNYXRyaXgpO1xuXG4gICAgICAgICAgICAvLyBQYXNzaW5nbHkgdXBkYXRlIHRoZSBzY2VuZSBib3VuZGluZyBib3hcbiAgICAgICAgICAgIC8vIEZJWE1FIGV4Y2x1ZGUgdmVyeSBsYXJnZSBtZXNoIGxpa2UgZ3JvdW5kIHBsYW5lIG9yIHRlcnJhaW4gP1xuICAgICAgICAgICAgLy8gRklYTUUgT25seSByZW5kZXJlcmFibGUgd2hpY2ggY2FzdCBzaGFkb3cgP1xuXG4gICAgICAgICAgICAvLyBGSVhNRSBib3VuZGluZ0JveCBiZWNvbWVzIG11Y2ggbGFyZ2VyIGFmdGVyIHRyYW5zZm9ybWQuXG4gICAgICAgICAgICBpZiAob2JqZWN0LmNhc3RTaGFkb3cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdCb3VuZGluZ0JveExhc3RGcmFtZS51bmlvbihjdWxsaW5nQm91bmRpbmdCb3gpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWdub3JlIGZydXN0dW0gY3VsbGluZyBpZiBvYmplY3QgaXMgc2tpbm5lZCBtZXNoLlxuICAgICAgICAgICAgaWYgKG9iamVjdC5mcnVzdHVtQ3VsbGluZykgIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1bGxpbmdCb3VuZGluZ0JveC5pbnRlcnNlY3RCb3VuZGluZ0JveChjYW1lcmEuZnJ1c3R1bS5ib3VuZGluZ0JveCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY3VsbGluZ01hdHJpeC5hcnJheSA9IGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmFycmF5O1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgY3VsbGluZ0JvdW5kaW5nQm94Lm1heC5hcnJheVsyXSA+IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgY3VsbGluZ0JvdW5kaW5nQm94Lm1pbi5hcnJheVsyXSA8IDBcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2xpcCBpbiB0aGUgbmVhciBwbGFuZVxuICAgICAgICAgICAgICAgICAgICBjdWxsaW5nQm91bmRpbmdCb3gubWF4LmFycmF5WzJdID0gLTFlLTIwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGN1bGxpbmdCb3VuZGluZ0JveC5hcHBseVByb2plY3Rpb24oY3VsbGluZ01hdHJpeCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbWluID0gY3VsbGluZ0JvdW5kaW5nQm94Lm1pbi5hcnJheTtcbiAgICAgICAgICAgICAgICB2YXIgbWF4ID0gY3VsbGluZ0JvdW5kaW5nQm94Lm1heC5hcnJheTtcblxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgbWF4WzBdIDwgLTEgfHwgbWluWzBdID4gMVxuICAgICAgICAgICAgICAgICAgICB8fCBtYXhbMV0gPCAtMSB8fCBtaW5bMV0gPiAxXG4gICAgICAgICAgICAgICAgICAgIHx8IG1heFsyXSA8IC0xIHx8IG1pblsyXSA+IDFcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfSkoKSxcblxuICAgIF91cGRhdGVMaWdodFVuaWZvcm1zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsaWdodHMgPSB0aGlzLmxpZ2h0cztcbiAgICAgICAgLy8gUHV0IHRoZSBsaWdodCBjYXN0IHNoYWRvdyBiZWZvcmUgdGhlIGxpZ2h0IG5vdCBjYXN0IHNoYWRvd1xuICAgICAgICBsaWdodHMuc29ydChsaWdodFNvcnRGdW5jKTtcblxuICAgICAgICB2YXIgbGlnaHRVbmlmb3JtcyA9IHRoaXMuX2xpZ2h0VW5pZm9ybXM7XG4gICAgICAgIGZvciAodmFyIGdyb3VwIGluIGxpZ2h0VW5pZm9ybXMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHN5bWJvbCBpbiBsaWdodFVuaWZvcm1zW2dyb3VwXSkge1xuICAgICAgICAgICAgICAgIGxpZ2h0VW5pZm9ybXNbZ3JvdXBdW3N5bWJvbF0udmFsdWUubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpZ2h0cy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICB2YXIgbGlnaHQgPSBsaWdodHNbaV07XG5cbiAgICAgICAgICAgIGlmIChsaWdodC5pbnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGdyb3VwID0gbGlnaHQuZ3JvdXA7XG5cbiAgICAgICAgICAgIGZvciAodmFyIHN5bWJvbCBpbiBsaWdodC51bmlmb3JtVGVtcGxhdGVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVuaWZvcm1UcGwgPSBsaWdodC51bmlmb3JtVGVtcGxhdGVzW3N5bWJvbF07XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdW5pZm9ybVRwbC52YWx1ZShsaWdodCk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghbGlnaHRVbmlmb3Jtc1tncm91cF0pIHtcbiAgICAgICAgICAgICAgICAgICAgbGlnaHRVbmlmb3Jtc1tncm91cF0gPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFsaWdodFVuaWZvcm1zW2dyb3VwXVtzeW1ib2xdKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0VW5pZm9ybXNbZ3JvdXBdW3N5bWJvbF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbHUgPSBsaWdodFVuaWZvcm1zW2dyb3VwXVtzeW1ib2xdO1xuICAgICAgICAgICAgICAgIGx1LnR5cGUgPSB1bmlmb3JtVHBsLnR5cGUgKyAndic7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh1bmlmb3JtVHBsLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnMWknOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICcxZic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbHUudmFsdWUucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnMmYnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICczZic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJzRmJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsdWUubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsdS52YWx1ZS5wdXNoKHZhbHVlW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5rb3duIGxpZ2h0IHVuaWZvcm0gdHlwZSAnICsgdW5pZm9ybVRwbC50eXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0TGlnaHRHcm91cHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxpZ2h0R3JvdXBzID0gW107XG4gICAgICAgIGZvciAodmFyIGdyb3VwSWQgaW4gdGhpcy5fbGlnaHROdW1iZXIpIHtcbiAgICAgICAgICAgIGxpZ2h0R3JvdXBzLnB1c2goZ3JvdXBJZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpZ2h0R3JvdXBzO1xuICAgIH0sXG5cbiAgICBnZXROdW1iZXJDaGFuZ2VkTGlnaHRHcm91cHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxpZ2h0R3JvdXBzID0gW107XG4gICAgICAgIGZvciAodmFyIGdyb3VwSWQgaW4gdGhpcy5fbGlnaHROdW1iZXIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTGlnaHROdW1iZXJDaGFuZ2VkKGdyb3VwSWQpKSB7XG4gICAgICAgICAgICAgICAgbGlnaHRHcm91cHMucHVzaChncm91cElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlnaHRHcm91cHM7XG4gICAgfSxcblxuICAgIC8vIERldGVybWluZSBpZiBsaWdodCBncm91cCBpcyBkaWZmZXJlbnQgd2l0aCBzaW5jZSBsYXN0IGZyYW1lXG4gICAgLy8gVXNlZCB0byBkZXRlcm1pbmUgd2hldGhlciB0byB1cGRhdGUgc2hhZGVyIGFuZCBzY2VuZSdzIHVuaWZvcm1zIGluIFJlbmRlcmVyLnJlbmRlclxuICAgIGlzTGlnaHROdW1iZXJDaGFuZ2VkOiBmdW5jdGlvbiAobGlnaHRHcm91cCkge1xuICAgICAgICB2YXIgcHJldkxpZ2h0TnVtYmVyID0gdGhpcy5fcHJldmlvdXNMaWdodE51bWJlcjtcbiAgICAgICAgdmFyIGN1cnJlbnRMaWdodE51bWJlciA9IHRoaXMuX2xpZ2h0TnVtYmVyO1xuICAgICAgICAvLyBQRU5ESU5HIFBlcmZvcm1hbmNlXG4gICAgICAgIGZvciAodmFyIHR5cGUgaW4gY3VycmVudExpZ2h0TnVtYmVyW2xpZ2h0R3JvdXBdKSB7XG4gICAgICAgICAgICBpZiAoIXByZXZMaWdodE51bWJlcltsaWdodEdyb3VwXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN1cnJlbnRMaWdodE51bWJlcltsaWdodEdyb3VwXVt0eXBlXSAhPT0gcHJldkxpZ2h0TnVtYmVyW2xpZ2h0R3JvdXBdW3R5cGVdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgdHlwZSBpbiBwcmV2TGlnaHROdW1iZXJbbGlnaHRHcm91cF0pIHtcbiAgICAgICAgICAgIGlmICghY3VycmVudExpZ2h0TnVtYmVyW2xpZ2h0R3JvdXBdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudExpZ2h0TnVtYmVyW2xpZ2h0R3JvdXBdW3R5cGVdICE9PSBwcmV2TGlnaHROdW1iZXJbbGlnaHRHcm91cF1bdHlwZV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIGdldExpZ2h0c051bWJlcnM6IGZ1bmN0aW9uIChsaWdodEdyb3VwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saWdodE51bWJlcltsaWdodEdyb3VwXTtcbiAgICB9LFxuXG4gICAgZ2V0UHJvZ3JhbUtleTogZnVuY3Rpb24gKGxpZ2h0R3JvdXApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpZ2h0UHJvZ3JhbUtleXNbbGlnaHRHcm91cF07XG4gICAgfSxcblxuICAgIHNldExpZ2h0VW5pZm9ybXM6IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIHNldFVuaWZvcm1zKHVuaWZvcm1zLCBwcm9ncmFtLCByZW5kZXJlcikge1xuICAgICAgICAgICAgZm9yICh2YXIgc3ltYm9sIGluIHVuaWZvcm1zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGx1ID0gdW5pZm9ybXNbc3ltYm9sXTtcbiAgICAgICAgICAgICAgICBpZiAobHUudHlwZSA9PT0gJ3R2Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXByb2dyYW0uaGFzVW5pZm9ybShzeW1ib2wpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgdGV4U2xvdHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsdS52YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHR1cmUgPSBsdS52YWx1ZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzbG90ID0gcHJvZ3JhbS50YWtlQ3VycmVudFRleHR1cmVTbG90KHJlbmRlcmVyLCB0ZXh0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleFNsb3RzLnB1c2goc2xvdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcHJvZ3JhbS5zZXRVbmlmb3JtKHJlbmRlcmVyLmdsLCAnMWl2Jywgc3ltYm9sLCB0ZXhTbG90cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm0ocmVuZGVyZXIuZ2wsIGx1LnR5cGUsIHN5bWJvbCwgbHUudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocHJvZ3JhbSwgbGlnaHRHcm91cCwgcmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHNldFVuaWZvcm1zKHRoaXMuX2xpZ2h0VW5pZm9ybXNbbGlnaHRHcm91cF0sIHByb2dyYW0sIHJlbmRlcmVyKTtcbiAgICAgICAgICAgIC8vIFNldCBzaGFkb3dzXG4gICAgICAgICAgICBzZXRVbmlmb3Jtcyh0aGlzLnNoYWRvd1VuaWZvcm1zLCBwcm9ncmFtLCByZW5kZXJlcik7XG4gICAgICAgIH07XG4gICAgfSkoKSxcblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2Ugc2VsZiwgY2xlYXIgYWxsIHRoZSBzY2VuZSBvYmplY3RzXG4gICAgICogQnV0IHJlc291cmNlcyBvZiBnbCBsaWtlIHRleHV0dXJlLCBzaGFkZXIgd2lsbCBub3QgYmUgZGlzcG9zZWQuXG4gICAgICogTW9zdGx5IHlvdSBzaG91bGQgdXNlIGRpc3Bvc2VTY2VuZSBtZXRob2QgaW4gUmVuZGVyZXIgdG8gZG8gZGlzcG9zZS5cbiAgICAgKi9cbiAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwgPSBudWxsO1xuICAgICAgICB0aGlzLl9vcGFxdWVMaXN0ID0gW107XG4gICAgICAgIHRoaXMuX3RyYW5zcGFyZW50TGlzdCA9IFtdO1xuXG4gICAgICAgIHRoaXMubGlnaHRzID0gW107XG5cbiAgICAgICAgdGhpcy5fbGlnaHRVbmlmb3JtcyA9IHt9O1xuXG4gICAgICAgIHRoaXMuX2xpZ2h0TnVtYmVyID0ge307XG4gICAgICAgIHRoaXMuX25vZGVSZXBvc2l0b3J5ID0ge307XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIGxpZ2h0U29ydEZ1bmMoYSwgYikge1xuICAgIGlmIChiLmNhc3RTaGFkb3cgJiYgIWEuY2FzdFNoYWRvdykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNjZW5lO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9TY2VuZS5qc1xuLy8gbW9kdWxlIGlkID0gMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///28\n");

/***/ }),
/* 29 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"c\"] = hue;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = gamma;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = nogamma;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__constant__ = __webpack_require__(119);\n\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nfunction hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : Object(__WEBPACK_IMPORTED_MODULE_0__constant__[\"a\" /* default */])(isNaN(a) ? b : a);\n}\n\nfunction gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : Object(__WEBPACK_IMPORTED_MODULE_0__constant__[\"a\" /* default */])(isNaN(a) ? b : a);\n  };\n}\n\nfunction nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : Object(__WEBPACK_IMPORTED_MODULE_0__constant__[\"a\" /* default */])(isNaN(a) ? b : a);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2NvbG9yLmpzP2I2MDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbnN0YW50IGZyb20gXCIuL2NvbnN0YW50XCI7XG5cbmZ1bmN0aW9uIGxpbmVhcihhLCBkKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGEgKyB0ICogZDtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZXhwb25lbnRpYWwoYSwgYiwgeSkge1xuICByZXR1cm4gYSA9IE1hdGgucG93KGEsIHkpLCBiID0gTWF0aC5wb3coYiwgeSkgLSBhLCB5ID0gMSAvIHksIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gTWF0aC5wb3coYSArIHQgKiBiLCB5KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGh1ZShhLCBiKSB7XG4gIHZhciBkID0gYiAtIGE7XG4gIHJldHVybiBkID8gbGluZWFyKGEsIGQgPiAxODAgfHwgZCA8IC0xODAgPyBkIC0gMzYwICogTWF0aC5yb3VuZChkIC8gMzYwKSA6IGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnYW1tYSh5KSB7XG4gIHJldHVybiAoeSA9ICt5KSA9PT0gMSA/IG5vZ2FtbWEgOiBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGIgLSBhID8gZXhwb25lbnRpYWwoYSwgYiwgeSkgOiBjb25zdGFudChpc05hTihhKSA/IGIgOiBhKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbm9nYW1tYShhLCBiKSB7XG4gIHZhciBkID0gYiAtIGE7XG4gIHJldHVybiBkID8gbGluZWFyKGEsIGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvY29sb3IuanNcbi8vIG1vZHVsZSBpZCA9IDI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///29\n");

/***/ }),
/* 30 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__easing__ = __webpack_require__(44);\n\n\nfunction noop () {}\n/**\n * @constructor\n * @alias clay.animation.Clip\n * @param {Object} [opts]\n * @param {Object} [opts.target]\n * @param {number} [opts.life]\n * @param {number} [opts.delay]\n * @param {number} [opts.gap]\n * @param {number} [opts.playbackRate]\n * @param {boolean|number} [opts.loop] If loop is a number, it indicate the loop count of animation\n * @param {string|Function} [opts.easing]\n * @param {Function} [opts.onframe]\n * @param {Function} [opts.onfinish]\n * @param {Function} [opts.onrestart]\n */\nvar Clip = function (opts) {\n\n    opts = opts || {};\n\n    /**\n     * @type {string}\n     */\n    this.name = opts.name || '';\n\n    /**\n     * @type {Object}\n     */\n    this.target = opts.target;\n\n    /**\n     * @type {number}\n     */\n    this.life = opts.life || 1000;\n\n    /**\n     * @type {number}\n     */\n    this.delay = opts.delay || 0;\n\n    /**\n     * @type {number}\n     */\n    this.gap = opts.gap || 0;\n\n    /**\n     * @type {number}\n     */\n    this.playbackRate = opts.playbackRate || 1;\n\n\n    this._initialized = false;\n\n    this._elapsedTime = 0;\n\n    this._loop = opts.loop == null ? false : opts.loop;\n    this.setLoop(this._loop);\n\n    if (opts.easing != null) {\n        this.setEasing(opts.easing);\n    }\n\n    /**\n     * @type {Function}\n     */\n    this.onframe = opts.onframe || noop;\n\n    /**\n     * @type {Function}\n     */\n    this.onfinish = opts.onfinish || noop;\n\n    /**\n     * @type {Function}\n     */\n    this.onrestart = opts.onrestart || noop;\n\n    this._paused = false;\n};\n\nClip.prototype = {\n\n    gap: 0,\n\n    life: 0,\n\n    delay: 0,\n\n    /**\n     * @param {number|boolean} loop\n     */\n    setLoop: function (loop) {\n        this._loop = loop;\n        if (loop) {\n            if (typeof loop === 'number') {\n                this._loopRemained = loop;\n            }\n            else {\n                this._loopRemained = Infinity;\n            }\n        }\n    },\n\n    /**\n     * @param {string|Function} easing\n     */\n    setEasing: function (easing) {\n        if (typeof(easing) === 'string') {\n            easing = __WEBPACK_IMPORTED_MODULE_0__easing__[\"a\" /* default */][easing];\n        }\n        this.easing = easing;\n    },\n\n    /**\n     * @param  {number} time\n     * @return {string}\n     */\n    step: function (time, deltaTime, silent) {\n        if (!this._initialized) {\n            this._startTime = time + this.delay;\n            this._initialized = true;\n        }\n        if (this._currentTime != null) {\n            deltaTime = time - this._currentTime;\n        }\n        this._currentTime = time;\n\n        if (this._paused) {\n            return 'paused';\n        }\n\n        if (time < this._startTime) {\n            return;\n        }\n\n        // PENDIGN Sync ?\n        this._elapse(time, deltaTime);\n\n        var percent = Math.min(this._elapsedTime / this.life, 1);\n\n        if (percent < 0) {\n            return;\n        }\n\n        var schedule;\n        if (this.easing) {\n            schedule = this.easing(percent);\n        }\n        else {\n            schedule = percent;\n        }\n\n        if (!silent) {\n            this.fire('frame', schedule);\n        }\n\n        if (percent === 1) {\n            if (this._loop && this._loopRemained > 0) {\n                this._restartInLoop(time);\n                this._loopRemained--;\n                return 'restart';\n            }\n            else {\n                // Mark this clip to be deleted\n                // In the animation.update\n                this._needsRemove = true;\n\n                return 'finish';\n            }\n        }\n        else {\n            return null;\n        }\n    },\n\n    /**\n     * @param  {number} time\n     * @return {string}\n     */\n    setTime: function (time) {\n        return this.step(time + this._startTime);\n    },\n\n    restart: function (time) {\n        // If user leave the page for a while, when he gets back\n        // All clips may be expired and all start from the beginning value(position)\n        // It is clearly wrong, so we use remainder to add a offset\n\n        var remainder = 0;\n        // Remainder ignored if restart is invoked manually\n        if (time) {\n            this._elapse(time);\n            remainder = this._elapsedTime % this.life;\n        }\n        time = time || Date.now();\n\n        this._startTime = time - remainder + this.delay;\n        this._elapsedTime = 0;\n\n        this._needsRemove = false;\n        this._paused = false;\n    },\n\n    getElapsedTime: function () {\n        return this._elapsedTime;\n    },\n\n    _restartInLoop: function (time) {\n        this._startTime = time + this.gap;\n        this._elapsedTime = 0;\n    },\n\n    _elapse: function (time, deltaTime) {\n        this._elapsedTime += deltaTime * this.playbackRate;\n    },\n\n    fire: function (eventType, arg) {\n        var eventName = 'on' + eventType;\n        if (this[eventName]) {\n            this[eventName](this.target, arg);\n        }\n    },\n\n    clone: function () {\n        var clip = new this.constructor();\n        clip.name = this.name;\n        clip._loop = this._loop;\n        clip._loopRemained = this._loopRemained;\n\n        clip.life = this.life;\n        clip.gap = this.gap;\n        clip.delay = this.delay;\n\n        return clip;\n    },\n    /**\n     * Pause the clip.\n     */\n    pause: function () {\n        this._paused = true;\n    },\n\n    /**\n     * Resume the clip.\n     */\n    resume: function () {\n        this._paused = false;\n    }\n};\nClip.prototype.constructor = Clip;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Clip);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9hbmltYXRpb24vQ2xpcC5qcz84OTRhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFYXNpbmcgZnJvbSAnLi9lYXNpbmcnO1xuXG5mdW5jdGlvbiBub29wICgpIHt9XG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLkNsaXBcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c11cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy50YXJnZXRdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMubGlmZV1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5kZWxheV1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5nYXBdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMucGxheWJhY2tSYXRlXVxuICogQHBhcmFtIHtib29sZWFufG51bWJlcn0gW29wdHMubG9vcF0gSWYgbG9vcCBpcyBhIG51bWJlciwgaXQgaW5kaWNhdGUgdGhlIGxvb3AgY291bnQgb2YgYW5pbWF0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xGdW5jdGlvbn0gW29wdHMuZWFzaW5nXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMub25mcmFtZV1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLm9uZmluaXNoXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMub25yZXN0YXJ0XVxuICovXG52YXIgQ2xpcCA9IGZ1bmN0aW9uIChvcHRzKSB7XG5cbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5uYW1lID0gb3B0cy5uYW1lIHx8ICcnO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICB0aGlzLnRhcmdldCA9IG9wdHMudGFyZ2V0O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxpZmUgPSBvcHRzLmxpZmUgfHwgMTAwMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kZWxheSA9IG9wdHMuZGVsYXkgfHwgMDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5nYXAgPSBvcHRzLmdhcCB8fCAwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnBsYXliYWNrUmF0ZSA9IG9wdHMucGxheWJhY2tSYXRlIHx8IDE7XG5cblxuICAgIHRoaXMuX2luaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgICB0aGlzLl9lbGFwc2VkVGltZSA9IDA7XG5cbiAgICB0aGlzLl9sb29wID0gb3B0cy5sb29wID09IG51bGwgPyBmYWxzZSA6IG9wdHMubG9vcDtcbiAgICB0aGlzLnNldExvb3AodGhpcy5fbG9vcCk7XG5cbiAgICBpZiAob3B0cy5lYXNpbmcgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNldEVhc2luZyhvcHRzLmVhc2luZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIHRoaXMub25mcmFtZSA9IG9wdHMub25mcmFtZSB8fCBub29wO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIHRoaXMub25maW5pc2ggPSBvcHRzLm9uZmluaXNoIHx8IG5vb3A7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgdGhpcy5vbnJlc3RhcnQgPSBvcHRzLm9ucmVzdGFydCB8fCBub29wO1xuXG4gICAgdGhpcy5fcGF1c2VkID0gZmFsc2U7XG59O1xuXG5DbGlwLnByb3RvdHlwZSA9IHtcblxuICAgIGdhcDogMCxcblxuICAgIGxpZmU6IDAsXG5cbiAgICBkZWxheTogMCxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfGJvb2xlYW59IGxvb3BcbiAgICAgKi9cbiAgICBzZXRMb29wOiBmdW5jdGlvbiAobG9vcCkge1xuICAgICAgICB0aGlzLl9sb29wID0gbG9vcDtcbiAgICAgICAgaWYgKGxvb3ApIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbG9vcCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb29wUmVtYWluZWQgPSBsb29wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9vcFJlbWFpbmVkID0gSW5maW5pdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8RnVuY3Rpb259IGVhc2luZ1xuICAgICAqL1xuICAgIHNldEVhc2luZzogZnVuY3Rpb24gKGVhc2luZykge1xuICAgICAgICBpZiAodHlwZW9mKGVhc2luZykgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBlYXNpbmcgPSBFYXNpbmdbZWFzaW5nXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVhc2luZyA9IGVhc2luZztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB0aW1lXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHN0ZXA6IGZ1bmN0aW9uICh0aW1lLCBkZWx0YVRpbWUsIHNpbGVudCkge1xuICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGFydFRpbWUgPSB0aW1lICsgdGhpcy5kZWxheTtcbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY3VycmVudFRpbWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgZGVsdGFUaW1lID0gdGltZSAtIHRoaXMuX2N1cnJlbnRUaW1lO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2N1cnJlbnRUaW1lID0gdGltZTtcblxuICAgICAgICBpZiAodGhpcy5fcGF1c2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3BhdXNlZCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGltZSA8IHRoaXMuX3N0YXJ0VGltZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUEVORElHTiBTeW5jID9cbiAgICAgICAgdGhpcy5fZWxhcHNlKHRpbWUsIGRlbHRhVGltZSk7XG5cbiAgICAgICAgdmFyIHBlcmNlbnQgPSBNYXRoLm1pbih0aGlzLl9lbGFwc2VkVGltZSAvIHRoaXMubGlmZSwgMSk7XG5cbiAgICAgICAgaWYgKHBlcmNlbnQgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2NoZWR1bGU7XG4gICAgICAgIGlmICh0aGlzLmVhc2luZykge1xuICAgICAgICAgICAgc2NoZWR1bGUgPSB0aGlzLmVhc2luZyhwZXJjZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNjaGVkdWxlID0gcGVyY2VudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2lsZW50KSB7XG4gICAgICAgICAgICB0aGlzLmZpcmUoJ2ZyYW1lJywgc2NoZWR1bGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBlcmNlbnQgPT09IDEpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9sb29wICYmIHRoaXMuX2xvb3BSZW1haW5lZCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZXN0YXJ0SW5Mb29wKHRpbWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvb3BSZW1haW5lZC0tO1xuICAgICAgICAgICAgICAgIHJldHVybiAncmVzdGFydCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBNYXJrIHRoaXMgY2xpcCB0byBiZSBkZWxldGVkXG4gICAgICAgICAgICAgICAgLy8gSW4gdGhlIGFuaW1hdGlvbi51cGRhdGVcbiAgICAgICAgICAgICAgICB0aGlzLl9uZWVkc1JlbW92ZSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJ2ZpbmlzaCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHRpbWVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgc2V0VGltZTogZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcCh0aW1lICsgdGhpcy5fc3RhcnRUaW1lKTtcbiAgICB9LFxuXG4gICAgcmVzdGFydDogZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgICAgLy8gSWYgdXNlciBsZWF2ZSB0aGUgcGFnZSBmb3IgYSB3aGlsZSwgd2hlbiBoZSBnZXRzIGJhY2tcbiAgICAgICAgLy8gQWxsIGNsaXBzIG1heSBiZSBleHBpcmVkIGFuZCBhbGwgc3RhcnQgZnJvbSB0aGUgYmVnaW5uaW5nIHZhbHVlKHBvc2l0aW9uKVxuICAgICAgICAvLyBJdCBpcyBjbGVhcmx5IHdyb25nLCBzbyB3ZSB1c2UgcmVtYWluZGVyIHRvIGFkZCBhIG9mZnNldFxuXG4gICAgICAgIHZhciByZW1haW5kZXIgPSAwO1xuICAgICAgICAvLyBSZW1haW5kZXIgaWdub3JlZCBpZiByZXN0YXJ0IGlzIGludm9rZWQgbWFudWFsbHlcbiAgICAgICAgaWYgKHRpbWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2VsYXBzZSh0aW1lKTtcbiAgICAgICAgICAgIHJlbWFpbmRlciA9IHRoaXMuX2VsYXBzZWRUaW1lICUgdGhpcy5saWZlO1xuICAgICAgICB9XG4gICAgICAgIHRpbWUgPSB0aW1lIHx8IERhdGUubm93KCk7XG5cbiAgICAgICAgdGhpcy5fc3RhcnRUaW1lID0gdGltZSAtIHJlbWFpbmRlciArIHRoaXMuZGVsYXk7XG4gICAgICAgIHRoaXMuX2VsYXBzZWRUaW1lID0gMDtcblxuICAgICAgICB0aGlzLl9uZWVkc1JlbW92ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wYXVzZWQgPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgZ2V0RWxhcHNlZFRpbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsYXBzZWRUaW1lO1xuICAgIH0sXG5cbiAgICBfcmVzdGFydEluTG9vcDogZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgICAgdGhpcy5fc3RhcnRUaW1lID0gdGltZSArIHRoaXMuZ2FwO1xuICAgICAgICB0aGlzLl9lbGFwc2VkVGltZSA9IDA7XG4gICAgfSxcblxuICAgIF9lbGFwc2U6IGZ1bmN0aW9uICh0aW1lLCBkZWx0YVRpbWUpIHtcbiAgICAgICAgdGhpcy5fZWxhcHNlZFRpbWUgKz0gZGVsdGFUaW1lICogdGhpcy5wbGF5YmFja1JhdGU7XG4gICAgfSxcblxuICAgIGZpcmU6IGZ1bmN0aW9uIChldmVudFR5cGUsIGFyZykge1xuICAgICAgICB2YXIgZXZlbnROYW1lID0gJ29uJyArIGV2ZW50VHlwZTtcbiAgICAgICAgaWYgKHRoaXNbZXZlbnROYW1lXSkge1xuICAgICAgICAgICAgdGhpc1tldmVudE5hbWVdKHRoaXMudGFyZ2V0LCBhcmcpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGNsb25lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjbGlwID0gbmV3IHRoaXMuY29uc3RydWN0b3IoKTtcbiAgICAgICAgY2xpcC5uYW1lID0gdGhpcy5uYW1lO1xuICAgICAgICBjbGlwLl9sb29wID0gdGhpcy5fbG9vcDtcbiAgICAgICAgY2xpcC5fbG9vcFJlbWFpbmVkID0gdGhpcy5fbG9vcFJlbWFpbmVkO1xuXG4gICAgICAgIGNsaXAubGlmZSA9IHRoaXMubGlmZTtcbiAgICAgICAgY2xpcC5nYXAgPSB0aGlzLmdhcDtcbiAgICAgICAgY2xpcC5kZWxheSA9IHRoaXMuZGVsYXk7XG5cbiAgICAgICAgcmV0dXJuIGNsaXA7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBQYXVzZSB0aGUgY2xpcC5cbiAgICAgKi9cbiAgICBwYXVzZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9wYXVzZWQgPSB0cnVlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXN1bWUgdGhlIGNsaXAuXG4gICAgICovXG4gICAgcmVzdW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xuICAgIH1cbn07XG5DbGlwLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENsaXA7XG5cbmV4cG9ydCBkZWZhdWx0IENsaXA7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2FuaW1hdGlvbi9DbGlwLmpzXG4vLyBtb2R1bGUgaWQgPSAzMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///30\n");

/***/ }),
/* 31 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export vec4 */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n/**\n * @class 4 Dimensional Vector\n * @name vec4\n */\n\nvar vec4 = {};\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\nvec4.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](4);\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    return out;\n};\n\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {vec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\nvec4.clone = function(a) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](4);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\nvec4.fromValues = function(x, y, z, w) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](4);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n};\n\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the source vector\n * @returns {vec4} out\n */\nvec4.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\nvec4.set = function(out, x, y, z, w) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n};\n\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.add = function(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    return out;\n};\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.subtract = function(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    return out;\n};\n\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\nvec4.sub = vec4.subtract;\n\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.multiply = function(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    out[3] = a[3] * b[3];\n    return out;\n};\n\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\nvec4.mul = vec4.multiply;\n\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.divide = function(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    out[3] = a[3] / b[3];\n    return out;\n};\n\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\nvec4.div = vec4.divide;\n\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.min = function(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    out[3] = Math.min(a[3], b[3]);\n    return out;\n};\n\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.max = function(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    out[3] = Math.max(a[3], b[3]);\n    return out;\n};\n\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\nvec4.scale = function(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    return out;\n};\n\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\nvec4.scaleAndAdd = function(out, a, b, scale) {\n    out[0] = a[0] + (b[0] * scale);\n    out[1] = a[1] + (b[1] * scale);\n    out[2] = a[2] + (b[2] * scale);\n    out[3] = a[3] + (b[3] * scale);\n    return out;\n};\n\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} distance between a and b\n */\nvec4.distance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2],\n        w = b[3] - a[3];\n    return Math.sqrt(x*x + y*y + z*z + w*w);\n};\n\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\nvec4.dist = vec4.distance;\n\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\nvec4.squaredDistance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2],\n        w = b[3] - a[3];\n    return x*x + y*y + z*z + w*w;\n};\n\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\nvec4.sqrDist = vec4.squaredDistance;\n\n/**\n * Calculates the length of a vec4\n *\n * @param {vec4} a vector to calculate length of\n * @returns {Number} length of a\n */\nvec4.length = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2],\n        w = a[3];\n    return Math.sqrt(x*x + y*y + z*z + w*w);\n};\n\n/**\n * Alias for {@link vec4.length}\n * @function\n */\nvec4.len = vec4.length;\n\n/**\n * Calculates the squared length of a vec4\n *\n * @param {vec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nvec4.squaredLength = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2],\n        w = a[3];\n    return x*x + y*y + z*z + w*w;\n};\n\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\nvec4.sqrLen = vec4.squaredLength;\n\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to negate\n * @returns {vec4} out\n */\nvec4.negate = function(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    out[3] = -a[3];\n    return out;\n};\n\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to invert\n * @returns {vec4} out\n */\nvec4.inverse = function(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n};\n\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to normalize\n * @returns {vec4} out\n */\nvec4.normalize = function(out, a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2],\n        w = a[3];\n    var len = x*x + y*y + z*z + w*w;\n    if (len > 0) {\n        len = 1 / Math.sqrt(len);\n        out[0] = a[0] * len;\n        out[1] = a[1] * len;\n        out[2] = a[2] * len;\n        out[3] = a[3] * len;\n    }\n    return out;\n};\n\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} dot product of a and b\n */\nvec4.dot = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n};\n\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec4} out\n */\nvec4.lerp = function (out, a, b, t) {\n    var ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    out[3] = aw + t * (b[3] - aw);\n    return out;\n};\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\nvec4.random = function (out, scale) {\n    scale = scale || 1.0;\n\n    //TODO: This is a pretty awful way of doing this. Find something better.\n    out[0] = Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"c\" /* GLMAT_RANDOM */])();\n    out[1] = Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"c\" /* GLMAT_RANDOM */])();\n    out[2] = Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"c\" /* GLMAT_RANDOM */])();\n    out[3] = Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"c\" /* GLMAT_RANDOM */])();\n    vec4.normalize(out, out);\n    vec4.scale(out, out, scale);\n    return out;\n};\n\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec4} out\n */\nvec4.transformMat4 = function(out, a, m) {\n    var x = a[0], y = a[1], z = a[2], w = a[3];\n    out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n    out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n    out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n    out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n    return out;\n};\n\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec4} out\n */\nvec4.transformQuat = function(out, a, q) {\n    var x = a[0], y = a[1], z = a[2],\n        qx = q[0], qy = q[1], qz = q[2], qw = q[3],\n\n        // calculate quat * vec\n        ix = qw * x + qy * z - qz * y,\n        iy = qw * y + qz * x - qx * z,\n        iz = qw * z + qx * y - qy * x,\n        iw = -qx * x - qy * y - qz * z;\n\n    // calculate result * inverse quat\n    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return out;\n};\n\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nvec4.forEach = (function() {\n    var vec = vec4.create();\n\n    return function(a, stride, offset, count, fn, arg) {\n        var i, l;\n        if(!stride) {\n            stride = 4;\n        }\n\n        if(!offset) {\n            offset = 0;\n        }\n\n        if(count) {\n            l = Math.min((count * stride) + offset, a.length);\n        } else {\n            l = a.length;\n        }\n\n        for(i = offset; i < l; i += stride) {\n            vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2]; vec[3] = a[i+3];\n            fn(vec, vec, arg);\n            a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2]; a[i+3] = vec[3];\n        }\n\n        return a;\n    };\n})();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (vec4);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nbG1hdHJpeC92ZWM0LmpzPzdkOTIiXSwic291cmNlc0NvbnRlbnQiOlsiXG4vKiBDb3B5cmlnaHQgKGMpIDIwMTMsIEJyYW5kb24gSm9uZXMsIENvbGluIE1hY0tlbnppZSBJVi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0IG1vZGlmaWNhdGlvbixcbmFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcblxuICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpc1xuICAgIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORFxuQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRURcbldBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SXG5BTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVNcbihJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUztcbkxPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTlxuQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcbihJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTXG5TT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4gKi9cblxuaW1wb3J0IHsgR0xNQVRfUkFORE9NLCBHTE1BVF9BUlJBWV9UWVBFIH0gZnJvbSAnLi9jb21tb24nO1xuXG4vKipcbiAqIEBjbGFzcyA0IERpbWVuc2lvbmFsIFZlY3RvclxuICogQG5hbWUgdmVjNFxuICovXG5cbmV4cG9ydCB2YXIgdmVjNCA9IHt9O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcsIGVtcHR5IHZlYzRcbiAqXG4gKiBAcmV0dXJucyB7dmVjNH0gYSBuZXcgNEQgdmVjdG9yXG4gKi9cbnZlYzQuY3JlYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG91dCA9IG5ldyBHTE1BVF9BUlJBWV9UWVBFKDQpO1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWM0IGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgdmVjdG9yXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBhIHZlY3RvciB0byBjbG9uZVxuICogQHJldHVybnMge3ZlYzR9IGEgbmV3IDREIHZlY3RvclxuICovXG52ZWM0LmNsb25lID0gZnVuY3Rpb24oYSkge1xuICAgIHZhciBvdXQgPSBuZXcgR0xNQVRfQVJSQVlfVFlQRSg0KTtcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbMV07XG4gICAgb3V0WzJdID0gYVsyXTtcbiAgICBvdXRbM10gPSBhWzNdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjNCBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3ZlYzR9IGEgbmV3IDREIHZlY3RvclxuICovXG52ZWM0LmZyb21WYWx1ZXMgPSBmdW5jdGlvbih4LCB5LCB6LCB3KSB7XG4gICAgdmFyIG91dCA9IG5ldyBHTE1BVF9BUlJBWV9UWVBFKDQpO1xuICAgIG91dFswXSA9IHg7XG4gICAgb3V0WzFdID0geTtcbiAgICBvdXRbMl0gPSB6O1xuICAgIG91dFszXSA9IHc7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIHZlYzQgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdGhlIHNvdXJjZSB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xudmVjNC5jb3B5ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzFdO1xuICAgIG91dFsyXSA9IGFbMl07XG4gICAgb3V0WzNdID0gYVszXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0IHRvIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcgVyBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xudmVjNC5zZXQgPSBmdW5jdGlvbihvdXQsIHgsIHksIHosIHcpIHtcbiAgICBvdXRbMF0gPSB4O1xuICAgIG91dFsxXSA9IHk7XG4gICAgb3V0WzJdID0gejtcbiAgICBvdXRbM10gPSB3O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEFkZHMgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xudmVjNC5hZGQgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgICBvdXRbMV0gPSBhWzFdICsgYlsxXTtcbiAgICBvdXRbMl0gPSBhWzJdICsgYlsyXTtcbiAgICBvdXRbM10gPSBhWzNdICsgYlszXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBTdWJ0cmFjdHMgdmVjdG9yIGIgZnJvbSB2ZWN0b3IgYVxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xudmVjNC5zdWJ0cmFjdCA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIG91dFswXSA9IGFbMF0gLSBiWzBdO1xuICAgIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICAgIG91dFsyXSA9IGFbMl0gLSBiWzJdO1xuICAgIG91dFszXSA9IGFbM10gLSBiWzNdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5zdWJ0cmFjdH1cbiAqIEBmdW5jdGlvblxuICovXG52ZWM0LnN1YiA9IHZlYzQuc3VidHJhY3Q7XG5cbi8qKlxuICogTXVsdGlwbGllcyB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG52ZWM0Lm11bHRpcGx5ID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgb3V0WzBdID0gYVswXSAqIGJbMF07XG4gICAgb3V0WzFdID0gYVsxXSAqIGJbMV07XG4gICAgb3V0WzJdID0gYVsyXSAqIGJbMl07XG4gICAgb3V0WzNdID0gYVszXSAqIGJbM107XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0Lm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzQubXVsID0gdmVjNC5tdWx0aXBseTtcblxuLyoqXG4gKiBEaXZpZGVzIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cbnZlYzQuZGl2aWRlID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgb3V0WzBdID0gYVswXSAvIGJbMF07XG4gICAgb3V0WzFdID0gYVsxXSAvIGJbMV07XG4gICAgb3V0WzJdID0gYVsyXSAvIGJbMl07XG4gICAgb3V0WzNdID0gYVszXSAvIGJbM107XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LmRpdmlkZX1cbiAqIEBmdW5jdGlvblxuICovXG52ZWM0LmRpdiA9IHZlYzQuZGl2aWRlO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIG1pbmltdW0gb2YgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xudmVjNC5taW4gPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBNYXRoLm1pbihhWzBdLCBiWzBdKTtcbiAgICBvdXRbMV0gPSBNYXRoLm1pbihhWzFdLCBiWzFdKTtcbiAgICBvdXRbMl0gPSBNYXRoLm1pbihhWzJdLCBiWzJdKTtcbiAgICBvdXRbM10gPSBNYXRoLm1pbihhWzNdLCBiWzNdKTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG9mIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cbnZlYzQubWF4ID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgb3V0WzBdID0gTWF0aC5tYXgoYVswXSwgYlswXSk7XG4gICAgb3V0WzFdID0gTWF0aC5tYXgoYVsxXSwgYlsxXSk7XG4gICAgb3V0WzJdID0gTWF0aC5tYXgoYVsyXSwgYlsyXSk7XG4gICAgb3V0WzNdID0gTWF0aC5tYXgoYVszXSwgYlszXSk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogU2NhbGVzIGEgdmVjNCBieSBhIHNjYWxhciBudW1iZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWM0fSBhIHRoZSB2ZWN0b3IgdG8gc2NhbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgdmVjdG9yIGJ5XG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cbnZlYzQuc2NhbGUgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBhWzBdICogYjtcbiAgICBvdXRbMV0gPSBhWzFdICogYjtcbiAgICBvdXRbMl0gPSBhWzJdICogYjtcbiAgICBvdXRbM10gPSBhWzNdICogYjtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBBZGRzIHR3byB2ZWM0J3MgYWZ0ZXIgc2NhbGluZyB0aGUgc2Vjb25kIG9wZXJhbmQgYnkgYSBzY2FsYXIgdmFsdWVcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgdGhlIGFtb3VudCB0byBzY2FsZSBiIGJ5IGJlZm9yZSBhZGRpbmdcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xudmVjNC5zY2FsZUFuZEFkZCA9IGZ1bmN0aW9uKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgICBvdXRbMF0gPSBhWzBdICsgKGJbMF0gKiBzY2FsZSk7XG4gICAgb3V0WzFdID0gYVsxXSArIChiWzFdICogc2NhbGUpO1xuICAgIG91dFsyXSA9IGFbMl0gKyAoYlsyXSAqIHNjYWxlKTtcbiAgICBvdXRbM10gPSBhWzNdICsgKGJbM10gKiBzY2FsZSk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cbnZlYzQuZGlzdGFuY2UgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgdmFyIHggPSBiWzBdIC0gYVswXSxcbiAgICAgICAgeSA9IGJbMV0gLSBhWzFdLFxuICAgICAgICB6ID0gYlsyXSAtIGFbMl0sXG4gICAgICAgIHcgPSBiWzNdIC0gYVszXTtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHgqeCArIHkqeSArIHoqeiArIHcqdyk7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5kaXN0YW5jZX1cbiAqIEBmdW5jdGlvblxuICovXG52ZWM0LmRpc3QgPSB2ZWM0LmRpc3RhbmNlO1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xudmVjNC5zcXVhcmVkRGlzdGFuY2UgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgdmFyIHggPSBiWzBdIC0gYVswXSxcbiAgICAgICAgeSA9IGJbMV0gLSBhWzFdLFxuICAgICAgICB6ID0gYlsyXSAtIGFbMl0sXG4gICAgICAgIHcgPSBiWzNdIC0gYVszXTtcbiAgICByZXR1cm4geCp4ICsgeSp5ICsgeip6ICsgdyp3O1xufTtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQuc3F1YXJlZERpc3RhbmNlfVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzQuc3FyRGlzdCA9IHZlYzQuc3F1YXJlZERpc3RhbmNlO1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGxlbmd0aCBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXG4gKi9cbnZlYzQubGVuZ3RoID0gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgeCA9IGFbMF0sXG4gICAgICAgIHkgPSBhWzFdLFxuICAgICAgICB6ID0gYVsyXSxcbiAgICAgICAgdyA9IGFbM107XG4gICAgcmV0dXJuIE1hdGguc3FydCh4KnggKyB5KnkgKyB6KnogKyB3KncpO1xufTtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQubGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzQubGVuID0gdmVjNC5sZW5ndGg7XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBsZW5ndGggb2YgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBhIHZlY3RvciB0byBjYWxjdWxhdGUgc3F1YXJlZCBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgbGVuZ3RoIG9mIGFcbiAqL1xudmVjNC5zcXVhcmVkTGVuZ3RoID0gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgeCA9IGFbMF0sXG4gICAgICAgIHkgPSBhWzFdLFxuICAgICAgICB6ID0gYVsyXSxcbiAgICAgICAgdyA9IGFbM107XG4gICAgcmV0dXJuIHgqeCArIHkqeSArIHoqeiArIHcqdztcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LnNxdWFyZWRMZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjNC5zcXJMZW4gPSB2ZWM0LnNxdWFyZWRMZW5ndGg7XG5cbi8qKlxuICogTmVnYXRlcyB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWM0fSBhIHZlY3RvciB0byBuZWdhdGVcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xudmVjNC5uZWdhdGUgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICBvdXRbMF0gPSAtYVswXTtcbiAgICBvdXRbMV0gPSAtYVsxXTtcbiAgICBvdXRbMl0gPSAtYVsyXTtcbiAgICBvdXRbM10gPSAtYVszXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbnZlcnNlIG9mIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdmVjdG9yIHRvIGludmVydFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG52ZWM0LmludmVyc2UgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgb3V0WzBdID0gMS4wIC8gYVswXTtcbiAgb3V0WzFdID0gMS4wIC8gYVsxXTtcbiAgb3V0WzJdID0gMS4wIC8gYVsyXTtcbiAgb3V0WzNdID0gMS4wIC8gYVszXTtcbiAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogTm9ybWFsaXplIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdmVjdG9yIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG52ZWM0Lm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIHZhciB4ID0gYVswXSxcbiAgICAgICAgeSA9IGFbMV0sXG4gICAgICAgIHogPSBhWzJdLFxuICAgICAgICB3ID0gYVszXTtcbiAgICB2YXIgbGVuID0geCp4ICsgeSp5ICsgeip6ICsgdyp3O1xuICAgIGlmIChsZW4gPiAwKSB7XG4gICAgICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTtcbiAgICAgICAgb3V0WzBdID0gYVswXSAqIGxlbjtcbiAgICAgICAgb3V0WzFdID0gYVsxXSAqIGxlbjtcbiAgICAgICAgb3V0WzJdID0gYVsyXSAqIGxlbjtcbiAgICAgICAgb3V0WzNdID0gYVszXSAqIGxlbjtcbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZG90IHByb2R1Y3Qgb2YgYSBhbmQgYlxuICovXG52ZWM0LmRvdCA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGFbMF0gKiBiWzBdICsgYVsxXSAqIGJbMV0gKyBhWzJdICogYlsyXSArIGFbM10gKiBiWzNdO1xufTtcblxuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50IGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xudmVjNC5sZXJwID0gZnVuY3Rpb24gKG91dCwgYSwgYiwgdCkge1xuICAgIHZhciBheCA9IGFbMF0sXG4gICAgICAgIGF5ID0gYVsxXSxcbiAgICAgICAgYXogPSBhWzJdLFxuICAgICAgICBhdyA9IGFbM107XG4gICAgb3V0WzBdID0gYXggKyB0ICogKGJbMF0gLSBheCk7XG4gICAgb3V0WzFdID0gYXkgKyB0ICogKGJbMV0gLSBheSk7XG4gICAgb3V0WzJdID0gYXogKyB0ICogKGJbMl0gLSBheik7XG4gICAgb3V0WzNdID0gYXcgKyB0ICogKGJbM10gLSBhdyk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgcmFuZG9tIHZlY3RvciB3aXRoIHRoZSBnaXZlbiBzY2FsZVxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge051bWJlcn0gW3NjYWxlXSBMZW5ndGggb2YgdGhlIHJlc3VsdGluZyB2ZWN0b3IuIElmIG9tbWl0dGVkLCBhIHVuaXQgdmVjdG9yIHdpbGwgYmUgcmV0dXJuZWRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xudmVjNC5yYW5kb20gPSBmdW5jdGlvbiAob3V0LCBzY2FsZSkge1xuICAgIHNjYWxlID0gc2NhbGUgfHwgMS4wO1xuXG4gICAgLy9UT0RPOiBUaGlzIGlzIGEgcHJldHR5IGF3ZnVsIHdheSBvZiBkb2luZyB0aGlzLiBGaW5kIHNvbWV0aGluZyBiZXR0ZXIuXG4gICAgb3V0WzBdID0gR0xNQVRfUkFORE9NKCk7XG4gICAgb3V0WzFdID0gR0xNQVRfUkFORE9NKCk7XG4gICAgb3V0WzJdID0gR0xNQVRfUkFORE9NKCk7XG4gICAgb3V0WzNdID0gR0xNQVRfUkFORE9NKCk7XG4gICAgdmVjNC5ub3JtYWxpemUob3V0LCBvdXQpO1xuICAgIHZlYzQuc2NhbGUob3V0LCBvdXQsIHNjYWxlKTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWM0IHdpdGggYSBtYXQ0LlxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7bWF0NH0gbSBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xudmVjNC50cmFuc2Zvcm1NYXQ0ID0gZnVuY3Rpb24ob3V0LCBhLCBtKSB7XG4gICAgdmFyIHggPSBhWzBdLCB5ID0gYVsxXSwgeiA9IGFbMl0sIHcgPSBhWzNdO1xuICAgIG91dFswXSA9IG1bMF0gKiB4ICsgbVs0XSAqIHkgKyBtWzhdICogeiArIG1bMTJdICogdztcbiAgICBvdXRbMV0gPSBtWzFdICogeCArIG1bNV0gKiB5ICsgbVs5XSAqIHogKyBtWzEzXSAqIHc7XG4gICAgb3V0WzJdID0gbVsyXSAqIHggKyBtWzZdICogeSArIG1bMTBdICogeiArIG1bMTRdICogdztcbiAgICBvdXRbM10gPSBtWzNdICogeCArIG1bN10gKiB5ICsgbVsxMV0gKiB6ICsgbVsxNV0gKiB3O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzQgd2l0aCBhIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWM0fSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge3F1YXR9IHEgcXVhdGVybmlvbiB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG52ZWM0LnRyYW5zZm9ybVF1YXQgPSBmdW5jdGlvbihvdXQsIGEsIHEpIHtcbiAgICB2YXIgeCA9IGFbMF0sIHkgPSBhWzFdLCB6ID0gYVsyXSxcbiAgICAgICAgcXggPSBxWzBdLCBxeSA9IHFbMV0sIHF6ID0gcVsyXSwgcXcgPSBxWzNdLFxuXG4gICAgICAgIC8vIGNhbGN1bGF0ZSBxdWF0ICogdmVjXG4gICAgICAgIGl4ID0gcXcgKiB4ICsgcXkgKiB6IC0gcXogKiB5LFxuICAgICAgICBpeSA9IHF3ICogeSArIHF6ICogeCAtIHF4ICogeixcbiAgICAgICAgaXogPSBxdyAqIHogKyBxeCAqIHkgLSBxeSAqIHgsXG4gICAgICAgIGl3ID0gLXF4ICogeCAtIHF5ICogeSAtIHF6ICogejtcblxuICAgIC8vIGNhbGN1bGF0ZSByZXN1bHQgKiBpbnZlcnNlIHF1YXRcbiAgICBvdXRbMF0gPSBpeCAqIHF3ICsgaXcgKiAtcXggKyBpeSAqIC1xeiAtIGl6ICogLXF5O1xuICAgIG91dFsxXSA9IGl5ICogcXcgKyBpdyAqIC1xeSArIGl6ICogLXF4IC0gaXggKiAtcXo7XG4gICAgb3V0WzJdID0gaXogKiBxdyArIGl3ICogLXF6ICsgaXggKiAtcXkgLSBpeSAqIC1xeDtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBQZXJmb3JtIHNvbWUgb3BlcmF0aW9uIG92ZXIgYW4gYXJyYXkgb2YgdmVjNHMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYSB0aGUgYXJyYXkgb2YgdmVjdG9ycyB0byBpdGVyYXRlIG92ZXJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdHJpZGUgTnVtYmVyIG9mIGVsZW1lbnRzIGJldHdlZW4gdGhlIHN0YXJ0IG9mIGVhY2ggdmVjNC4gSWYgMCBhc3N1bWVzIHRpZ2h0bHkgcGFja2VkXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XG4gKiBAcGFyYW0ge051bWJlcn0gY291bnQgTnVtYmVyIG9mIHZlYzRzIHRvIGl0ZXJhdGUgb3Zlci4gSWYgMCBpdGVyYXRlcyBvdmVyIGVudGlyZSBhcnJheVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCB2ZWN0b3IgaW4gdGhlIGFycmF5XG4gKiBAcGFyYW0ge09iamVjdH0gW2FyZ10gYWRkaXRpb25hbCBhcmd1bWVudCB0byBwYXNzIHRvIGZuXG4gKiBAcmV0dXJucyB7QXJyYXl9IGFcbiAqIEBmdW5jdGlvblxuICovXG52ZWM0LmZvckVhY2ggPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZlYyA9IHZlYzQuY3JlYXRlKCk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oYSwgc3RyaWRlLCBvZmZzZXQsIGNvdW50LCBmbiwgYXJnKSB7XG4gICAgICAgIHZhciBpLCBsO1xuICAgICAgICBpZighc3RyaWRlKSB7XG4gICAgICAgICAgICBzdHJpZGUgPSA0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIW9mZnNldCkge1xuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGNvdW50KSB7XG4gICAgICAgICAgICBsID0gTWF0aC5taW4oKGNvdW50ICogc3RyaWRlKSArIG9mZnNldCwgYS5sZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbCA9IGEubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yKGkgPSBvZmZzZXQ7IGkgPCBsOyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgdmVjWzBdID0gYVtpXTsgdmVjWzFdID0gYVtpKzFdOyB2ZWNbMl0gPSBhW2krMl07IHZlY1szXSA9IGFbaSszXTtcbiAgICAgICAgICAgIGZuKHZlYywgdmVjLCBhcmcpO1xuICAgICAgICAgICAgYVtpXSA9IHZlY1swXTsgYVtpKzFdID0gdmVjWzFdOyBhW2krMl0gPSB2ZWNbMl07IGFbaSszXSA9IHZlY1szXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhO1xuICAgIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCB2ZWM0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZ2xtYXRyaXgvdmVjNC5qc1xuLy8gbW9kdWxlIGlkID0gMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///31\n");

/***/ }),
/* 32 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n/**\n * @class 3x3 Matrix\n * @name mat3\n */\n\nvar mat3 = {};\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\nmat3.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](9);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 1;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 1;\n    return out;\n};\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {mat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nmat3.fromMat4 = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[4];\n    out[4] = a[5];\n    out[5] = a[6];\n    out[6] = a[8];\n    out[7] = a[9];\n    out[8] = a[10];\n    return out;\n};\n\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {mat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\nmat3.clone = function(a) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](9);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    return out;\n};\n\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nmat3.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    return out;\n};\n\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\nmat3.identity = function(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 1;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 1;\n    return out;\n};\n\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nmat3.transpose = function(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1], a02 = a[2], a12 = a[5];\n        out[1] = a[3];\n        out[2] = a[6];\n        out[3] = a01;\n        out[5] = a[7];\n        out[6] = a02;\n        out[7] = a12;\n    } else {\n        out[0] = a[0];\n        out[1] = a[3];\n        out[2] = a[6];\n        out[3] = a[1];\n        out[4] = a[4];\n        out[5] = a[7];\n        out[6] = a[2];\n        out[7] = a[5];\n        out[8] = a[8];\n    }\n\n    return out;\n};\n\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nmat3.invert = function(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2],\n        a10 = a[3], a11 = a[4], a12 = a[5],\n        a20 = a[6], a21 = a[7], a22 = a[8],\n\n        b01 = a22 * a11 - a12 * a21,\n        b11 = -a22 * a10 + a12 * a20,\n        b21 = a21 * a10 - a11 * a20,\n\n        // Calculate the determinant\n        det = a00 * b01 + a01 * b11 + a02 * b21;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = b01 * det;\n    out[1] = (-a22 * a01 + a02 * a21) * det;\n    out[2] = (a12 * a01 - a02 * a11) * det;\n    out[3] = b11 * det;\n    out[4] = (a22 * a00 - a02 * a20) * det;\n    out[5] = (-a12 * a00 + a02 * a10) * det;\n    out[6] = b21 * det;\n    out[7] = (-a21 * a00 + a01 * a20) * det;\n    out[8] = (a11 * a00 - a01 * a10) * det;\n    return out;\n};\n\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nmat3.adjoint = function(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2],\n        a10 = a[3], a11 = a[4], a12 = a[5],\n        a20 = a[6], a21 = a[7], a22 = a[8];\n\n    out[0] = (a11 * a22 - a12 * a21);\n    out[1] = (a02 * a21 - a01 * a22);\n    out[2] = (a01 * a12 - a02 * a11);\n    out[3] = (a12 * a20 - a10 * a22);\n    out[4] = (a00 * a22 - a02 * a20);\n    out[5] = (a02 * a10 - a00 * a12);\n    out[6] = (a10 * a21 - a11 * a20);\n    out[7] = (a01 * a20 - a00 * a21);\n    out[8] = (a00 * a11 - a01 * a10);\n    return out;\n};\n\n/**\n * Calculates the determinant of a mat3\n *\n * @param {mat3} a the source matrix\n * @returns {Number} determinant of a\n */\nmat3.determinant = function (a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2],\n        a10 = a[3], a11 = a[4], a12 = a[5],\n        a20 = a[6], a21 = a[7], a22 = a[8];\n\n    return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n};\n\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nmat3.multiply = function (out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2],\n        a10 = a[3], a11 = a[4], a12 = a[5],\n        a20 = a[6], a21 = a[7], a22 = a[8],\n\n        b00 = b[0], b01 = b[1], b02 = b[2],\n        b10 = b[3], b11 = b[4], b12 = b[5],\n        b20 = b[6], b21 = b[7], b22 = b[8];\n\n    out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n    out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n    out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n\n    out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n    out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n    out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n\n    out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n    out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n    out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n    return out;\n};\n\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\nmat3.mul = mat3.multiply;\n\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to translate\n * @param {vec2} v vector to translate by\n * @returns {mat3} out\n */\nmat3.translate = function(out, a, v) {\n    var a00 = a[0], a01 = a[1], a02 = a[2],\n        a10 = a[3], a11 = a[4], a12 = a[5],\n        a20 = a[6], a21 = a[7], a22 = a[8],\n        x = v[0], y = v[1];\n\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n\n    out[3] = a10;\n    out[4] = a11;\n    out[5] = a12;\n\n    out[6] = x * a00 + y * a10 + a20;\n    out[7] = x * a01 + y * a11 + a21;\n    out[8] = x * a02 + y * a12 + a22;\n    return out;\n};\n\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nmat3.rotate = function (out, a, rad) {\n    var a00 = a[0], a01 = a[1], a02 = a[2],\n        a10 = a[3], a11 = a[4], a12 = a[5],\n        a20 = a[6], a21 = a[7], a22 = a[8],\n\n        s = Math.sin(rad),\n        c = Math.cos(rad);\n\n    out[0] = c * a00 + s * a10;\n    out[1] = c * a01 + s * a11;\n    out[2] = c * a02 + s * a12;\n\n    out[3] = c * a10 - s * a00;\n    out[4] = c * a11 - s * a01;\n    out[5] = c * a12 - s * a02;\n\n    out[6] = a20;\n    out[7] = a21;\n    out[8] = a22;\n    return out;\n};\n\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\nmat3.scale = function(out, a, v) {\n    var x = v[0], y = v[1];\n\n    out[0] = x * a[0];\n    out[1] = x * a[1];\n    out[2] = x * a[2];\n\n    out[3] = y * a[3];\n    out[4] = y * a[4];\n    out[5] = y * a[5];\n\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    return out;\n};\n\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat2d} a the matrix to copy\n * @returns {mat3} out\n **/\nmat3.fromMat2d = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = 0;\n\n    out[3] = a[2];\n    out[4] = a[3];\n    out[5] = 0;\n\n    out[6] = a[4];\n    out[7] = a[5];\n    out[8] = 1;\n    return out;\n};\n\n/**\n* Calculates a 3x3 matrix from the given quaternion\n*\n* @param {mat3} out mat3 receiving operation result\n* @param {quat} q Quaternion to create matrix from\n*\n* @returns {mat3} out\n*/\nmat3.fromQuat = function (out, q) {\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        yx = y * x2,\n        yy = y * y2,\n        zx = z * x2,\n        zy = z * y2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - yy - zz;\n    out[3] = yx - wz;\n    out[6] = zx + wy;\n\n    out[1] = yx + wz;\n    out[4] = 1 - xx - zz;\n    out[7] = zy - wx;\n\n    out[2] = zx - wy;\n    out[5] = zy + wx;\n    out[8] = 1 - xx - yy;\n\n    return out;\n};\n\n/**\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n*\n* @param {mat3} out mat3 receiving operation result\n* @param {mat4} a Mat4 to derive the normal matrix from\n*\n* @returns {mat3} out\n*/\nmat3.normalFromMat4 = function (out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        // Calculate the determinant\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n\n    out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n\n    out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n\n    return out;\n};\n\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {mat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nmat3.frob = function (a) {\n    return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2)))\n};\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (mat3);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nbG1hdHJpeC9tYXQzLmpzPzkxYWEiXSwic291cmNlc0NvbnRlbnQiOlsiXG4vKiBDb3B5cmlnaHQgKGMpIDIwMTMsIEJyYW5kb24gSm9uZXMsIENvbGluIE1hY0tlbnppZSBJVi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0IG1vZGlmaWNhdGlvbixcbmFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcblxuICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpc1xuICAgIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORFxuQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRURcbldBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SXG5BTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVNcbihJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUztcbkxPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTlxuQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcbihJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTXG5TT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4gKi9cblxuaW1wb3J0IHsgR0xNQVRfQVJSQVlfVFlQRSB9IGZyb20gJy4vY29tbW9uJztcblxuLyoqXG4gKiBAY2xhc3MgM3gzIE1hdHJpeFxuICogQG5hbWUgbWF0M1xuICovXG5cbnZhciBtYXQzID0ge307XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBtYXQzXG4gKlxuICogQHJldHVybnMge21hdDN9IGEgbmV3IDN4MyBtYXRyaXhcbiAqL1xubWF0My5jcmVhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgb3V0ID0gbmV3IEdMTUFUX0FSUkFZX1RZUEUoOSk7XG4gICAgb3V0WzBdID0gMTtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgICBvdXRbNF0gPSAxO1xuICAgIG91dFs1XSA9IDA7XG4gICAgb3V0WzZdID0gMDtcbiAgICBvdXRbN10gPSAwO1xuICAgIG91dFs4XSA9IDE7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ29waWVzIHRoZSB1cHBlci1sZWZ0IDN4MyB2YWx1ZXMgaW50byB0aGUgZ2l2ZW4gbWF0My5cbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIDN4MyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0NH0gYSAgIHRoZSBzb3VyY2UgNHg0IG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5tYXQzLmZyb21NYXQ0ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzFdO1xuICAgIG91dFsyXSA9IGFbMl07XG4gICAgb3V0WzNdID0gYVs0XTtcbiAgICBvdXRbNF0gPSBhWzVdO1xuICAgIG91dFs1XSA9IGFbNl07XG4gICAgb3V0WzZdID0gYVs4XTtcbiAgICBvdXRbN10gPSBhWzldO1xuICAgIG91dFs4XSA9IGFbMTBdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgbWF0MyBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7bWF0M30gYSBtYXRyaXggdG8gY2xvbmVcbiAqIEByZXR1cm5zIHttYXQzfSBhIG5ldyAzeDMgbWF0cml4XG4gKi9cbm1hdDMuY2xvbmUgPSBmdW5jdGlvbihhKSB7XG4gICAgdmFyIG91dCA9IG5ldyBHTE1BVF9BUlJBWV9UWVBFKDkpO1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICBvdXRbMl0gPSBhWzJdO1xuICAgIG91dFszXSA9IGFbM107XG4gICAgb3V0WzRdID0gYVs0XTtcbiAgICBvdXRbNV0gPSBhWzVdO1xuICAgIG91dFs2XSA9IGFbNl07XG4gICAgb3V0WzddID0gYVs3XTtcbiAgICBvdXRbOF0gPSBhWzhdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSBtYXQzIHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQzfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cbm1hdDMuY29weSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICBvdXRbMl0gPSBhWzJdO1xuICAgIG91dFszXSA9IGFbM107XG4gICAgb3V0WzRdID0gYVs0XTtcbiAgICBvdXRbNV0gPSBhWzVdO1xuICAgIG91dFs2XSA9IGFbNl07XG4gICAgb3V0WzddID0gYVs3XTtcbiAgICBvdXRbOF0gPSBhWzhdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFNldCBhIG1hdDMgdG8gdGhlIGlkZW50aXR5IG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cbm1hdDMuaWRlbnRpdHkgPSBmdW5jdGlvbihvdXQpIHtcbiAgICBvdXRbMF0gPSAxO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICAgIG91dFs0XSA9IDE7XG4gICAgb3V0WzVdID0gMDtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gICAgb3V0WzhdID0gMTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBUcmFuc3Bvc2UgdGhlIHZhbHVlcyBvZiBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQzfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cbm1hdDMudHJhbnNwb3NlID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgLy8gSWYgd2UgYXJlIHRyYW5zcG9zaW5nIG91cnNlbHZlcyB3ZSBjYW4gc2tpcCBhIGZldyBzdGVwcyBidXQgaGF2ZSB0byBjYWNoZSBzb21lIHZhbHVlc1xuICAgIGlmIChvdXQgPT09IGEpIHtcbiAgICAgICAgdmFyIGEwMSA9IGFbMV0sIGEwMiA9IGFbMl0sIGExMiA9IGFbNV07XG4gICAgICAgIG91dFsxXSA9IGFbM107XG4gICAgICAgIG91dFsyXSA9IGFbNl07XG4gICAgICAgIG91dFszXSA9IGEwMTtcbiAgICAgICAgb3V0WzVdID0gYVs3XTtcbiAgICAgICAgb3V0WzZdID0gYTAyO1xuICAgICAgICBvdXRbN10gPSBhMTI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb3V0WzBdID0gYVswXTtcbiAgICAgICAgb3V0WzFdID0gYVszXTtcbiAgICAgICAgb3V0WzJdID0gYVs2XTtcbiAgICAgICAgb3V0WzNdID0gYVsxXTtcbiAgICAgICAgb3V0WzRdID0gYVs0XTtcbiAgICAgICAgb3V0WzVdID0gYVs3XTtcbiAgICAgICAgb3V0WzZdID0gYVsyXTtcbiAgICAgICAgb3V0WzddID0gYVs1XTtcbiAgICAgICAgb3V0WzhdID0gYVs4XTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBJbnZlcnRzIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xubWF0My5pbnZlcnQgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICB2YXIgYTAwID0gYVswXSwgYTAxID0gYVsxXSwgYTAyID0gYVsyXSxcbiAgICAgICAgYTEwID0gYVszXSwgYTExID0gYVs0XSwgYTEyID0gYVs1XSxcbiAgICAgICAgYTIwID0gYVs2XSwgYTIxID0gYVs3XSwgYTIyID0gYVs4XSxcblxuICAgICAgICBiMDEgPSBhMjIgKiBhMTEgLSBhMTIgKiBhMjEsXG4gICAgICAgIGIxMSA9IC1hMjIgKiBhMTAgKyBhMTIgKiBhMjAsXG4gICAgICAgIGIyMSA9IGEyMSAqIGExMCAtIGExMSAqIGEyMCxcblxuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG4gICAgICAgIGRldCA9IGEwMCAqIGIwMSArIGEwMSAqIGIxMSArIGEwMiAqIGIyMTtcblxuICAgIGlmICghZGV0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBkZXQgPSAxLjAgLyBkZXQ7XG5cbiAgICBvdXRbMF0gPSBiMDEgKiBkZXQ7XG4gICAgb3V0WzFdID0gKC1hMjIgKiBhMDEgKyBhMDIgKiBhMjEpICogZGV0O1xuICAgIG91dFsyXSA9IChhMTIgKiBhMDEgLSBhMDIgKiBhMTEpICogZGV0O1xuICAgIG91dFszXSA9IGIxMSAqIGRldDtcbiAgICBvdXRbNF0gPSAoYTIyICogYTAwIC0gYTAyICogYTIwKSAqIGRldDtcbiAgICBvdXRbNV0gPSAoLWExMiAqIGEwMCArIGEwMiAqIGExMCkgKiBkZXQ7XG4gICAgb3V0WzZdID0gYjIxICogZGV0O1xuICAgIG91dFs3XSA9ICgtYTIxICogYTAwICsgYTAxICogYTIwKSAqIGRldDtcbiAgICBvdXRbOF0gPSAoYTExICogYTAwIC0gYTAxICogYTEwKSAqIGRldDtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBhZGp1Z2F0ZSBvZiBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQzfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cbm1hdDMuYWRqb2ludCA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIHZhciBhMDAgPSBhWzBdLCBhMDEgPSBhWzFdLCBhMDIgPSBhWzJdLFxuICAgICAgICBhMTAgPSBhWzNdLCBhMTEgPSBhWzRdLCBhMTIgPSBhWzVdLFxuICAgICAgICBhMjAgPSBhWzZdLCBhMjEgPSBhWzddLCBhMjIgPSBhWzhdO1xuXG4gICAgb3V0WzBdID0gKGExMSAqIGEyMiAtIGExMiAqIGEyMSk7XG4gICAgb3V0WzFdID0gKGEwMiAqIGEyMSAtIGEwMSAqIGEyMik7XG4gICAgb3V0WzJdID0gKGEwMSAqIGExMiAtIGEwMiAqIGExMSk7XG4gICAgb3V0WzNdID0gKGExMiAqIGEyMCAtIGExMCAqIGEyMik7XG4gICAgb3V0WzRdID0gKGEwMCAqIGEyMiAtIGEwMiAqIGEyMCk7XG4gICAgb3V0WzVdID0gKGEwMiAqIGExMCAtIGEwMCAqIGExMik7XG4gICAgb3V0WzZdID0gKGExMCAqIGEyMSAtIGExMSAqIGEyMCk7XG4gICAgb3V0WzddID0gKGEwMSAqIGEyMCAtIGEwMCAqIGEyMSk7XG4gICAgb3V0WzhdID0gKGEwMCAqIGExMSAtIGEwMSAqIGExMCk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZGV0ZXJtaW5hbnQgb2YgYSBtYXQzXG4gKlxuICogQHBhcmFtIHttYXQzfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkZXRlcm1pbmFudCBvZiBhXG4gKi9cbm1hdDMuZGV0ZXJtaW5hbnQgPSBmdW5jdGlvbiAoYSkge1xuICAgIHZhciBhMDAgPSBhWzBdLCBhMDEgPSBhWzFdLCBhMDIgPSBhWzJdLFxuICAgICAgICBhMTAgPSBhWzNdLCBhMTEgPSBhWzRdLCBhMTIgPSBhWzVdLFxuICAgICAgICBhMjAgPSBhWzZdLCBhMjEgPSBhWzddLCBhMjIgPSBhWzhdO1xuXG4gICAgcmV0dXJuIGEwMCAqIChhMjIgKiBhMTEgLSBhMTIgKiBhMjEpICsgYTAxICogKC1hMjIgKiBhMTAgKyBhMTIgKiBhMjApICsgYTAyICogKGEyMSAqIGExMCAtIGExMSAqIGEyMCk7XG59O1xuXG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIG1hdDMnc1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7bWF0M30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xubWF0My5tdWx0aXBseSA9IGZ1bmN0aW9uIChvdXQsIGEsIGIpIHtcbiAgICB2YXIgYTAwID0gYVswXSwgYTAxID0gYVsxXSwgYTAyID0gYVsyXSxcbiAgICAgICAgYTEwID0gYVszXSwgYTExID0gYVs0XSwgYTEyID0gYVs1XSxcbiAgICAgICAgYTIwID0gYVs2XSwgYTIxID0gYVs3XSwgYTIyID0gYVs4XSxcblxuICAgICAgICBiMDAgPSBiWzBdLCBiMDEgPSBiWzFdLCBiMDIgPSBiWzJdLFxuICAgICAgICBiMTAgPSBiWzNdLCBiMTEgPSBiWzRdLCBiMTIgPSBiWzVdLFxuICAgICAgICBiMjAgPSBiWzZdLCBiMjEgPSBiWzddLCBiMjIgPSBiWzhdO1xuXG4gICAgb3V0WzBdID0gYjAwICogYTAwICsgYjAxICogYTEwICsgYjAyICogYTIwO1xuICAgIG91dFsxXSA9IGIwMCAqIGEwMSArIGIwMSAqIGExMSArIGIwMiAqIGEyMTtcbiAgICBvdXRbMl0gPSBiMDAgKiBhMDIgKyBiMDEgKiBhMTIgKyBiMDIgKiBhMjI7XG5cbiAgICBvdXRbM10gPSBiMTAgKiBhMDAgKyBiMTEgKiBhMTAgKyBiMTIgKiBhMjA7XG4gICAgb3V0WzRdID0gYjEwICogYTAxICsgYjExICogYTExICsgYjEyICogYTIxO1xuICAgIG91dFs1XSA9IGIxMCAqIGEwMiArIGIxMSAqIGExMiArIGIxMiAqIGEyMjtcblxuICAgIG91dFs2XSA9IGIyMCAqIGEwMCArIGIyMSAqIGExMCArIGIyMiAqIGEyMDtcbiAgICBvdXRbN10gPSBiMjAgKiBhMDEgKyBiMjEgKiBhMTEgKyBiMjIgKiBhMjE7XG4gICAgb3V0WzhdID0gYjIwICogYTAyICsgYjIxICogYTEyICsgYjIyICogYTIyO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0My5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5tYXQzLm11bCA9IG1hdDMubXVsdGlwbHk7XG5cbi8qKlxuICogVHJhbnNsYXRlIGEgbWF0MyBieSB0aGUgZ2l2ZW4gdmVjdG9yXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0M30gYSB0aGUgbWF0cml4IHRvIHRyYW5zbGF0ZVxuICogQHBhcmFtIHt2ZWMyfSB2IHZlY3RvciB0byB0cmFuc2xhdGUgYnlcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xubWF0My50cmFuc2xhdGUgPSBmdW5jdGlvbihvdXQsIGEsIHYpIHtcbiAgICB2YXIgYTAwID0gYVswXSwgYTAxID0gYVsxXSwgYTAyID0gYVsyXSxcbiAgICAgICAgYTEwID0gYVszXSwgYTExID0gYVs0XSwgYTEyID0gYVs1XSxcbiAgICAgICAgYTIwID0gYVs2XSwgYTIxID0gYVs3XSwgYTIyID0gYVs4XSxcbiAgICAgICAgeCA9IHZbMF0sIHkgPSB2WzFdO1xuXG4gICAgb3V0WzBdID0gYTAwO1xuICAgIG91dFsxXSA9IGEwMTtcbiAgICBvdXRbMl0gPSBhMDI7XG5cbiAgICBvdXRbM10gPSBhMTA7XG4gICAgb3V0WzRdID0gYTExO1xuICAgIG91dFs1XSA9IGExMjtcblxuICAgIG91dFs2XSA9IHggKiBhMDAgKyB5ICogYTEwICsgYTIwO1xuICAgIG91dFs3XSA9IHggKiBhMDEgKyB5ICogYTExICsgYTIxO1xuICAgIG91dFs4XSA9IHggKiBhMDIgKyB5ICogYTEyICsgYTIyO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFJvdGF0ZXMgYSBtYXQzIGJ5IHRoZSBnaXZlbiBhbmdsZVxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDN9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cbm1hdDMucm90YXRlID0gZnVuY3Rpb24gKG91dCwgYSwgcmFkKSB7XG4gICAgdmFyIGEwMCA9IGFbMF0sIGEwMSA9IGFbMV0sIGEwMiA9IGFbMl0sXG4gICAgICAgIGExMCA9IGFbM10sIGExMSA9IGFbNF0sIGExMiA9IGFbNV0sXG4gICAgICAgIGEyMCA9IGFbNl0sIGEyMSA9IGFbN10sIGEyMiA9IGFbOF0sXG5cbiAgICAgICAgcyA9IE1hdGguc2luKHJhZCksXG4gICAgICAgIGMgPSBNYXRoLmNvcyhyYWQpO1xuXG4gICAgb3V0WzBdID0gYyAqIGEwMCArIHMgKiBhMTA7XG4gICAgb3V0WzFdID0gYyAqIGEwMSArIHMgKiBhMTE7XG4gICAgb3V0WzJdID0gYyAqIGEwMiArIHMgKiBhMTI7XG5cbiAgICBvdXRbM10gPSBjICogYTEwIC0gcyAqIGEwMDtcbiAgICBvdXRbNF0gPSBjICogYTExIC0gcyAqIGEwMTtcbiAgICBvdXRbNV0gPSBjICogYTEyIC0gcyAqIGEwMjtcblxuICAgIG91dFs2XSA9IGEyMDtcbiAgICBvdXRbN10gPSBhMjE7XG4gICAgb3V0WzhdID0gYTIyO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFNjYWxlcyB0aGUgbWF0MyBieSB0aGUgZGltZW5zaW9ucyBpbiB0aGUgZ2l2ZW4gdmVjMlxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDN9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7dmVjMn0gdiB0aGUgdmVjMiB0byBzY2FsZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKiovXG5tYXQzLnNjYWxlID0gZnVuY3Rpb24ob3V0LCBhLCB2KSB7XG4gICAgdmFyIHggPSB2WzBdLCB5ID0gdlsxXTtcblxuICAgIG91dFswXSA9IHggKiBhWzBdO1xuICAgIG91dFsxXSA9IHggKiBhWzFdO1xuICAgIG91dFsyXSA9IHggKiBhWzJdO1xuXG4gICAgb3V0WzNdID0geSAqIGFbM107XG4gICAgb3V0WzRdID0geSAqIGFbNF07XG4gICAgb3V0WzVdID0geSAqIGFbNV07XG5cbiAgICBvdXRbNl0gPSBhWzZdO1xuICAgIG91dFs3XSA9IGFbN107XG4gICAgb3V0WzhdID0gYVs4XTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDb3BpZXMgdGhlIHZhbHVlcyBmcm9tIGEgbWF0MmQgaW50byBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQyZH0gYSB0aGUgbWF0cml4IHRvIGNvcHlcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqKi9cbm1hdDMuZnJvbU1hdDJkID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzFdO1xuICAgIG91dFsyXSA9IDA7XG5cbiAgICBvdXRbM10gPSBhWzJdO1xuICAgIG91dFs0XSA9IGFbM107XG4gICAgb3V0WzVdID0gMDtcblxuICAgIG91dFs2XSA9IGFbNF07XG4gICAgb3V0WzddID0gYVs1XTtcbiAgICBvdXRbOF0gPSAxO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiogQ2FsY3VsYXRlcyBhIDN4MyBtYXRyaXggZnJvbSB0aGUgZ2l2ZW4gcXVhdGVybmlvblxuKlxuKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4qIEBwYXJhbSB7cXVhdH0gcSBRdWF0ZXJuaW9uIHRvIGNyZWF0ZSBtYXRyaXggZnJvbVxuKlxuKiBAcmV0dXJucyB7bWF0M30gb3V0XG4qL1xubWF0My5mcm9tUXVhdCA9IGZ1bmN0aW9uIChvdXQsIHEpIHtcbiAgICB2YXIgeCA9IHFbMF0sIHkgPSBxWzFdLCB6ID0gcVsyXSwgdyA9IHFbM10sXG4gICAgICAgIHgyID0geCArIHgsXG4gICAgICAgIHkyID0geSArIHksXG4gICAgICAgIHoyID0geiArIHosXG5cbiAgICAgICAgeHggPSB4ICogeDIsXG4gICAgICAgIHl4ID0geSAqIHgyLFxuICAgICAgICB5eSA9IHkgKiB5MixcbiAgICAgICAgenggPSB6ICogeDIsXG4gICAgICAgIHp5ID0geiAqIHkyLFxuICAgICAgICB6eiA9IHogKiB6MixcbiAgICAgICAgd3ggPSB3ICogeDIsXG4gICAgICAgIHd5ID0gdyAqIHkyLFxuICAgICAgICB3eiA9IHcgKiB6MjtcblxuICAgIG91dFswXSA9IDEgLSB5eSAtIHp6O1xuICAgIG91dFszXSA9IHl4IC0gd3o7XG4gICAgb3V0WzZdID0genggKyB3eTtcblxuICAgIG91dFsxXSA9IHl4ICsgd3o7XG4gICAgb3V0WzRdID0gMSAtIHh4IC0geno7XG4gICAgb3V0WzddID0genkgLSB3eDtcblxuICAgIG91dFsyXSA9IHp4IC0gd3k7XG4gICAgb3V0WzVdID0genkgKyB3eDtcbiAgICBvdXRbOF0gPSAxIC0geHggLSB5eTtcblxuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiogQ2FsY3VsYXRlcyBhIDN4MyBub3JtYWwgbWF0cml4ICh0cmFuc3Bvc2UgaW52ZXJzZSkgZnJvbSB0aGUgNHg0IG1hdHJpeFxuKlxuKiBAcGFyYW0ge21hdDN9IG91dCBtYXQzIHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4qIEBwYXJhbSB7bWF0NH0gYSBNYXQ0IHRvIGRlcml2ZSB0aGUgbm9ybWFsIG1hdHJpeCBmcm9tXG4qXG4qIEByZXR1cm5zIHttYXQzfSBvdXRcbiovXG5tYXQzLm5vcm1hbEZyb21NYXQ0ID0gZnVuY3Rpb24gKG91dCwgYSkge1xuICAgIHZhciBhMDAgPSBhWzBdLCBhMDEgPSBhWzFdLCBhMDIgPSBhWzJdLCBhMDMgPSBhWzNdLFxuICAgICAgICBhMTAgPSBhWzRdLCBhMTEgPSBhWzVdLCBhMTIgPSBhWzZdLCBhMTMgPSBhWzddLFxuICAgICAgICBhMjAgPSBhWzhdLCBhMjEgPSBhWzldLCBhMjIgPSBhWzEwXSwgYTIzID0gYVsxMV0sXG4gICAgICAgIGEzMCA9IGFbMTJdLCBhMzEgPSBhWzEzXSwgYTMyID0gYVsxNF0sIGEzMyA9IGFbMTVdLFxuXG4gICAgICAgIGIwMCA9IGEwMCAqIGExMSAtIGEwMSAqIGExMCxcbiAgICAgICAgYjAxID0gYTAwICogYTEyIC0gYTAyICogYTEwLFxuICAgICAgICBiMDIgPSBhMDAgKiBhMTMgLSBhMDMgKiBhMTAsXG4gICAgICAgIGIwMyA9IGEwMSAqIGExMiAtIGEwMiAqIGExMSxcbiAgICAgICAgYjA0ID0gYTAxICogYTEzIC0gYTAzICogYTExLFxuICAgICAgICBiMDUgPSBhMDIgKiBhMTMgLSBhMDMgKiBhMTIsXG4gICAgICAgIGIwNiA9IGEyMCAqIGEzMSAtIGEyMSAqIGEzMCxcbiAgICAgICAgYjA3ID0gYTIwICogYTMyIC0gYTIyICogYTMwLFxuICAgICAgICBiMDggPSBhMjAgKiBhMzMgLSBhMjMgKiBhMzAsXG4gICAgICAgIGIwOSA9IGEyMSAqIGEzMiAtIGEyMiAqIGEzMSxcbiAgICAgICAgYjEwID0gYTIxICogYTMzIC0gYTIzICogYTMxLFxuICAgICAgICBiMTEgPSBhMjIgKiBhMzMgLSBhMjMgKiBhMzIsXG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBkZXRlcm1pbmFudFxuICAgICAgICBkZXQgPSBiMDAgKiBiMTEgLSBiMDEgKiBiMTAgKyBiMDIgKiBiMDkgKyBiMDMgKiBiMDggLSBiMDQgKiBiMDcgKyBiMDUgKiBiMDY7XG5cbiAgICBpZiAoIWRldCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZGV0ID0gMS4wIC8gZGV0O1xuXG4gICAgb3V0WzBdID0gKGExMSAqIGIxMSAtIGExMiAqIGIxMCArIGExMyAqIGIwOSkgKiBkZXQ7XG4gICAgb3V0WzFdID0gKGExMiAqIGIwOCAtIGExMCAqIGIxMSAtIGExMyAqIGIwNykgKiBkZXQ7XG4gICAgb3V0WzJdID0gKGExMCAqIGIxMCAtIGExMSAqIGIwOCArIGExMyAqIGIwNikgKiBkZXQ7XG5cbiAgICBvdXRbM10gPSAoYTAyICogYjEwIC0gYTAxICogYjExIC0gYTAzICogYjA5KSAqIGRldDtcbiAgICBvdXRbNF0gPSAoYTAwICogYjExIC0gYTAyICogYjA4ICsgYTAzICogYjA3KSAqIGRldDtcbiAgICBvdXRbNV0gPSAoYTAxICogYjA4IC0gYTAwICogYjEwIC0gYTAzICogYjA2KSAqIGRldDtcblxuICAgIG91dFs2XSA9IChhMzEgKiBiMDUgLSBhMzIgKiBiMDQgKyBhMzMgKiBiMDMpICogZGV0O1xuICAgIG91dFs3XSA9IChhMzIgKiBiMDIgLSBhMzAgKiBiMDUgLSBhMzMgKiBiMDEpICogZGV0O1xuICAgIG91dFs4XSA9IChhMzAgKiBiMDQgLSBhMzEgKiBiMDIgKyBhMzMgKiBiMDApICogZGV0O1xuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUmV0dXJucyBGcm9iZW5pdXMgbm9ybSBvZiBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IGEgdGhlIG1hdHJpeCB0byBjYWxjdWxhdGUgRnJvYmVuaXVzIG5vcm0gb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IEZyb2Jlbml1cyBub3JtXG4gKi9cbm1hdDMuZnJvYiA9IGZ1bmN0aW9uIChhKSB7XG4gICAgcmV0dXJuKE1hdGguc3FydChNYXRoLnBvdyhhWzBdLCAyKSArIE1hdGgucG93KGFbMV0sIDIpICsgTWF0aC5wb3coYVsyXSwgMikgKyBNYXRoLnBvdyhhWzNdLCAyKSArIE1hdGgucG93KGFbNF0sIDIpICsgTWF0aC5wb3coYVs1XSwgMikgKyBNYXRoLnBvdyhhWzZdLCAyKSArIE1hdGgucG93KGFbN10sIDIpICsgTWF0aC5wb3coYVs4XSwgMikpKVxufTtcblxuXG5leHBvcnQgZGVmYXVsdCBtYXQzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZ2xtYXRyaXgvbWF0My5qc1xuLy8gbW9kdWxlIGlkID0gMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///32\n");

/***/ }),
/* 33 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("var DIRTY_PREFIX = '__dt__';\n\nvar Cache = function () {\n\n    this._contextId = 0;\n\n    this._caches = [];\n\n    this._context = {};\n};\n\nCache.prototype = {\n\n    use: function (contextId, documentSchema) {\n        var caches = this._caches;\n        if (!caches[contextId]) {\n            caches[contextId] = {};\n\n            if (documentSchema) {\n                caches[contextId] = documentSchema();\n            }\n        }\n        this._contextId = contextId;\n\n        this._context = caches[contextId];\n    },\n\n    put: function (key, value) {\n        this._context[key] = value;\n    },\n\n    get: function (key) {\n        return this._context[key];\n    },\n\n    dirty: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        this.put(key, true);\n    },\n\n    dirtyAll: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        var caches = this._caches;\n        for (var i = 0; i < caches.length; i++) {\n            if (caches[i]) {\n                caches[i][key] = true;\n            }\n        }\n    },\n\n    fresh: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        this.put(key, false);\n    },\n\n    freshAll: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        var caches = this._caches;\n        for (var i = 0; i < caches.length; i++) {\n            if (caches[i]) {\n                caches[i][key] = false;\n            }\n        }\n    },\n\n    isDirty: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        var context = this._context;\n        return  !context.hasOwnProperty(key)\n            || context[key] === true;\n    },\n\n    deleteContext: function (contextId) {\n        delete this._caches[contextId];\n        this._context = {};\n    },\n\n    delete: function (key) {\n        delete this._context[key];\n    },\n\n    clearAll: function () {\n        this._caches = {};\n    },\n\n    getContext: function () {\n        return this._context;\n    },\n\n    eachContext : function (cb, context) {\n        var keys = Object.keys(this._caches);\n        keys.forEach(function (key) {\n            cb && cb.call(context, key);\n        });\n    },\n\n    miss: function (key) {\n        return ! this._context.hasOwnProperty(key);\n    }\n};\n\nCache.prototype.constructor = Cache;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Cache);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb3JlL0NhY2hlLmpzPzcxNTEiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIERJUlRZX1BSRUZJWCA9ICdfX2R0X18nO1xuXG52YXIgQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICB0aGlzLl9jb250ZXh0SWQgPSAwO1xuXG4gICAgdGhpcy5fY2FjaGVzID0gW107XG5cbiAgICB0aGlzLl9jb250ZXh0ID0ge307XG59O1xuXG5DYWNoZS5wcm90b3R5cGUgPSB7XG5cbiAgICB1c2U6IGZ1bmN0aW9uIChjb250ZXh0SWQsIGRvY3VtZW50U2NoZW1hKSB7XG4gICAgICAgIHZhciBjYWNoZXMgPSB0aGlzLl9jYWNoZXM7XG4gICAgICAgIGlmICghY2FjaGVzW2NvbnRleHRJZF0pIHtcbiAgICAgICAgICAgIGNhY2hlc1tjb250ZXh0SWRdID0ge307XG5cbiAgICAgICAgICAgIGlmIChkb2N1bWVudFNjaGVtYSkge1xuICAgICAgICAgICAgICAgIGNhY2hlc1tjb250ZXh0SWRdID0gZG9jdW1lbnRTY2hlbWEoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jb250ZXh0SWQgPSBjb250ZXh0SWQ7XG5cbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNhY2hlc1tjb250ZXh0SWRdO1xuICAgIH0sXG5cbiAgICBwdXQ6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHRba2V5XSA9IHZhbHVlO1xuICAgIH0sXG5cbiAgICBnZXQ6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRleHRba2V5XTtcbiAgICB9LFxuXG4gICAgZGlydHk6IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICBmaWVsZCA9IGZpZWxkIHx8ICcnO1xuICAgICAgICB2YXIga2V5ID0gRElSVFlfUFJFRklYICsgZmllbGQ7XG4gICAgICAgIHRoaXMucHV0KGtleSwgdHJ1ZSk7XG4gICAgfSxcblxuICAgIGRpcnR5QWxsOiBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgZmllbGQgPSBmaWVsZCB8fCAnJztcbiAgICAgICAgdmFyIGtleSA9IERJUlRZX1BSRUZJWCArIGZpZWxkO1xuICAgICAgICB2YXIgY2FjaGVzID0gdGhpcy5fY2FjaGVzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhY2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGNhY2hlc1tpXSkge1xuICAgICAgICAgICAgICAgIGNhY2hlc1tpXVtrZXldID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBmcmVzaDogZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgIGZpZWxkID0gZmllbGQgfHwgJyc7XG4gICAgICAgIHZhciBrZXkgPSBESVJUWV9QUkVGSVggKyBmaWVsZDtcbiAgICAgICAgdGhpcy5wdXQoa2V5LCBmYWxzZSk7XG4gICAgfSxcblxuICAgIGZyZXNoQWxsOiBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgZmllbGQgPSBmaWVsZCB8fCAnJztcbiAgICAgICAgdmFyIGtleSA9IERJUlRZX1BSRUZJWCArIGZpZWxkO1xuICAgICAgICB2YXIgY2FjaGVzID0gdGhpcy5fY2FjaGVzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhY2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGNhY2hlc1tpXSkge1xuICAgICAgICAgICAgICAgIGNhY2hlc1tpXVtrZXldID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgaXNEaXJ0eTogZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgIGZpZWxkID0gZmllbGQgfHwgJyc7XG4gICAgICAgIHZhciBrZXkgPSBESVJUWV9QUkVGSVggKyBmaWVsZDtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLl9jb250ZXh0O1xuICAgICAgICByZXR1cm4gICFjb250ZXh0Lmhhc093blByb3BlcnR5KGtleSlcbiAgICAgICAgICAgIHx8IGNvbnRleHRba2V5XSA9PT0gdHJ1ZTtcbiAgICB9LFxuXG4gICAgZGVsZXRlQ29udGV4dDogZnVuY3Rpb24gKGNvbnRleHRJZCkge1xuICAgICAgICBkZWxldGUgdGhpcy5fY2FjaGVzW2NvbnRleHRJZF07XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSB7fTtcbiAgICB9LFxuXG4gICAgZGVsZXRlOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9jb250ZXh0W2tleV07XG4gICAgfSxcblxuICAgIGNsZWFyQWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2NhY2hlcyA9IHt9O1xuICAgIH0sXG5cbiAgICBnZXRDb250ZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250ZXh0O1xuICAgIH0sXG5cbiAgICBlYWNoQ29udGV4dCA6IGZ1bmN0aW9uIChjYiwgY29udGV4dCkge1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuX2NhY2hlcyk7XG4gICAgICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBjYiAmJiBjYi5jYWxsKGNvbnRleHQsIGtleSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBtaXNzOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiAhIHRoaXMuX2NvbnRleHQuaGFzT3duUHJvcGVydHkoa2V5KTtcbiAgICB9XG59O1xuXG5DYWNoZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDYWNoZTtcblxuZXhwb3J0IGRlZmF1bHQgQ2FjaGU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2NvcmUvQ2FjaGUuanNcbi8vIG1vZHVsZSBpZCA9IDMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///33\n");

/***/ }),
/* 34 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Camera__ = __webpack_require__(37);\n\n/**\n * @constructor clay.camera.Orthographic\n * @extends clay.Camera\n */\nvar Orthographic = __WEBPACK_IMPORTED_MODULE_0__Camera__[\"a\" /* default */].extend(\n/** @lends clay.camera.Orthographic# */\n{\n    /**\n     * @type {number}\n     */\n    left: -1,\n    /**\n     * @type {number}\n     */\n    right: 1,\n    /**\n     * @type {number}\n     */\n    near: -1,\n    /**\n     * @type {number}\n     */\n    far: 1,\n    /**\n     * @type {number}\n     */\n    top: 1,\n    /**\n     * @type {number}\n     */\n    bottom: -1\n},\n/** @lends clay.camera.Orthographic.prototype */\n{\n\n    updateProjectionMatrix: function() {\n        this.projectionMatrix.ortho(this.left, this.right, this.bottom, this.top, this.near, this.far);\n    },\n\n    decomposeProjectionMatrix: function () {\n        var m = this.projectionMatrix.array;\n        this.left = (-1 - m[12]) / m[0];\n        this.right = (1 - m[12]) / m[0];\n        this.top = (1 - m[13]) / m[5];\n        this.bottom = (-1 - m[13]) / m[5];\n        this.near = -(-1 - m[14]) / m[10];\n        this.far = -(1 - m[14]) / m[10];\n    },\n    /**\n     * @return {clay.camera.Orthographic}\n     */\n    clone: function() {\n        var camera = __WEBPACK_IMPORTED_MODULE_0__Camera__[\"a\" /* default */].prototype.clone.call(this);\n        camera.left = this.left;\n        camera.right = this.right;\n        camera.near = this.near;\n        camera.far = this.far;\n        camera.top = this.top;\n        camera.bottom = this.bottom;\n\n        return camera;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Orthographic);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jYW1lcmEvT3J0aG9ncmFwaGljLmpzPzQ4NzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENhbWVyYSBmcm9tICcuLi9DYW1lcmEnO1xuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5jYW1lcmEuT3J0aG9ncmFwaGljXG4gKiBAZXh0ZW5kcyBjbGF5LkNhbWVyYVxuICovXG52YXIgT3J0aG9ncmFwaGljID0gQ2FtZXJhLmV4dGVuZChcbi8qKiBAbGVuZHMgY2xheS5jYW1lcmEuT3J0aG9ncmFwaGljIyAqL1xue1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgbGVmdDogLTEsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICByaWdodDogMSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIG5lYXI6IC0xLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZmFyOiAxLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdG9wOiAxLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgYm90dG9tOiAtMVxufSxcbi8qKiBAbGVuZHMgY2xheS5jYW1lcmEuT3J0aG9ncmFwaGljLnByb3RvdHlwZSAqL1xue1xuXG4gICAgdXBkYXRlUHJvamVjdGlvbk1hdHJpeDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMucHJvamVjdGlvbk1hdHJpeC5vcnRobyh0aGlzLmxlZnQsIHRoaXMucmlnaHQsIHRoaXMuYm90dG9tLCB0aGlzLnRvcCwgdGhpcy5uZWFyLCB0aGlzLmZhcik7XG4gICAgfSxcblxuICAgIGRlY29tcG9zZVByb2plY3Rpb25NYXRyaXg6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG0gPSB0aGlzLnByb2plY3Rpb25NYXRyaXguYXJyYXk7XG4gICAgICAgIHRoaXMubGVmdCA9ICgtMSAtIG1bMTJdKSAvIG1bMF07XG4gICAgICAgIHRoaXMucmlnaHQgPSAoMSAtIG1bMTJdKSAvIG1bMF07XG4gICAgICAgIHRoaXMudG9wID0gKDEgLSBtWzEzXSkgLyBtWzVdO1xuICAgICAgICB0aGlzLmJvdHRvbSA9ICgtMSAtIG1bMTNdKSAvIG1bNV07XG4gICAgICAgIHRoaXMubmVhciA9IC0oLTEgLSBtWzE0XSkgLyBtWzEwXTtcbiAgICAgICAgdGhpcy5mYXIgPSAtKDEgLSBtWzE0XSkgLyBtWzEwXTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2NsYXkuY2FtZXJhLk9ydGhvZ3JhcGhpY31cbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjYW1lcmEgPSBDYW1lcmEucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7XG4gICAgICAgIGNhbWVyYS5sZWZ0ID0gdGhpcy5sZWZ0O1xuICAgICAgICBjYW1lcmEucmlnaHQgPSB0aGlzLnJpZ2h0O1xuICAgICAgICBjYW1lcmEubmVhciA9IHRoaXMubmVhcjtcbiAgICAgICAgY2FtZXJhLmZhciA9IHRoaXMuZmFyO1xuICAgICAgICBjYW1lcmEudG9wID0gdGhpcy50b3A7XG4gICAgICAgIGNhbWVyYS5ib3R0b20gPSB0aGlzLmJvdHRvbTtcblxuICAgICAgICByZXR1cm4gY2FtZXJhO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBPcnRob2dyYXBoaWM7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2NhbWVyYS9PcnRob2dyYXBoaWMuanNcbi8vIG1vZHVsZSBpZCA9IDM0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///34\n");

/***/ }),
/* 35 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n\n\n// PENDING\n// Use topological sort ?\n\n/**\n * Node of graph based post processing.\n *\n * @constructor clay.compositor.CompositorNode\n * @extends clay.core.Base\n *\n */\nvar CompositorNode = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.compositor.CompositorNode# */ {\n        /**\n         * @type {string}\n         */\n        name: '',\n\n        /**\n         * Input links, will be updated by the graph\n         * @example:\n         *     inputName: {\n         *         node: someNode,\n         *         pin: 'xxxx'\n         *     }\n         * @type {Object}\n         */\n        inputLinks: {},\n\n        /**\n         * Output links, will be updated by the graph\n         * @example:\n         *     outputName: {\n         *         node: someNode,\n         *         pin: 'xxxx'\n         *     }\n         * @type {Object}\n         */\n        outputLinks: {},\n\n        // Save the output texture of previous frame\n        // Will be used when there exist a circular reference\n        _prevOutputTextures: {},\n        _outputTextures: {},\n\n        // Example: { name: 2 }\n        _outputReferences: {},\n\n        _rendering: false,\n        // If rendered in this frame\n        _rendered: false,\n\n        _compositor: null\n    };\n},\n/** @lends clay.compositor.CompositorNode.prototype */\n{\n\n    // TODO Remove parameter function callback\n    updateParameter: function (outputName, renderer) {\n        var outputInfo = this.outputs[outputName];\n        var parameters = outputInfo.parameters;\n        var parametersCopy = outputInfo._parametersCopy;\n        if (!parametersCopy) {\n            parametersCopy = outputInfo._parametersCopy = {};\n        }\n        if (parameters) {\n            for (var key in parameters) {\n                if (key !== 'width' && key !== 'height') {\n                    parametersCopy[key] = parameters[key];\n                }\n            }\n        }\n        var width, height;\n        if (parameters.width instanceof Function) {\n            width = parameters.width.call(this, renderer);\n        }\n        else {\n            width = parameters.width;\n        }\n        if (parameters.height instanceof Function) {\n            height = parameters.height.call(this, renderer);\n        }\n        else {\n            height = parameters.height;\n        }\n        if (\n            parametersCopy.width !== width\n            || parametersCopy.height !== height\n        ) {\n            if (this._outputTextures[outputName]) {\n                this._outputTextures[outputName].dispose(renderer.gl);\n            }\n        }\n        parametersCopy.width = width;\n        parametersCopy.height = height;\n\n        return parametersCopy;\n    },\n\n    /**\n     * Set parameter\n     * @param {string} name\n     * @param {} value\n     */\n    setParameter: function (name, value) {},\n    /**\n     * Get parameter value\n     * @param  {string} name\n     * @return {}\n     */\n    getParameter: function (name) {},\n    /**\n     * Set parameters\n     * @param {Object} obj\n     */\n    setParameters: function (obj) {\n        for (var name in obj) {\n            this.setParameter(name, obj[name]);\n        }\n    },\n\n    render: function () {},\n\n    getOutput: function (renderer /*optional*/, name) {\n        if (name == null) {\n            // Return the output texture without rendering\n            name = renderer;\n            return this._outputTextures[name];\n        }\n        var outputInfo = this.outputs[name];\n        if (!outputInfo) {\n            return ;\n        }\n\n        // Already been rendered in this frame\n        if (this._rendered) {\n            // Force return texture in last frame\n            if (outputInfo.outputLastFrame) {\n                return this._prevOutputTextures[name];\n            }\n            else {\n                return this._outputTextures[name];\n            }\n        }\n        else if (\n            // TODO\n            this._rendering   // Solve Circular Reference\n        ) {\n            if (!this._prevOutputTextures[name]) {\n                // Create a blank texture at first pass\n                this._prevOutputTextures[name] = this._compositor.allocateTexture(outputInfo.parameters || {});\n            }\n            return this._prevOutputTextures[name];\n        }\n\n        this.render(renderer);\n\n        return this._outputTextures[name];\n    },\n\n    removeReference: function (outputName) {\n        this._outputReferences[outputName]--;\n        if (this._outputReferences[outputName] === 0) {\n            var outputInfo = this.outputs[outputName];\n            if (outputInfo.keepLastFrame) {\n                if (this._prevOutputTextures[outputName]) {\n                    this._compositor.releaseTexture(this._prevOutputTextures[outputName]);\n                }\n                this._prevOutputTextures[outputName] = this._outputTextures[outputName];\n            }\n            else {\n                // Output of this node have alreay been used by all other nodes\n                // Put the texture back to the pool.\n                this._compositor.releaseTexture(this._outputTextures[outputName]);\n            }\n        }\n    },\n\n    link: function (inputPinName, fromNode, fromPinName) {\n\n        // The relationship from output pin to input pin is one-on-multiple\n        this.inputLinks[inputPinName] = {\n            node: fromNode,\n            pin: fromPinName\n        };\n        if (!fromNode.outputLinks[fromPinName]) {\n            fromNode.outputLinks[fromPinName] = [];\n        }\n        fromNode.outputLinks[fromPinName].push({\n            node: this,\n            pin: inputPinName\n        });\n\n        // Enabled the pin texture in shader\n        this.pass.material.enableTexture(inputPinName);\n    },\n\n    clear: function () {\n        this.inputLinks = {};\n        this.outputLinks = {};\n    },\n\n    updateReference: function (outputName) {\n        if (!this._rendering) {\n            this._rendering = true;\n            for (var inputName in this.inputLinks) {\n                var link = this.inputLinks[inputName];\n                link.node.updateReference(link.pin);\n            }\n            this._rendering = false;\n        }\n        if (outputName) {\n            this._outputReferences[outputName] ++;\n        }\n    },\n\n    beforeFrame: function () {\n        this._rendered = false;\n\n        for (var name in this.outputLinks) {\n            this._outputReferences[name] = 0;\n        }\n    },\n\n    afterFrame: function () {\n        // Put back all the textures to pool\n        for (var name in this.outputLinks) {\n            if (this._outputReferences[name] > 0) {\n                var outputInfo = this.outputs[name];\n                if (outputInfo.keepLastFrame) {\n                    if (this._prevOutputTextures[name]) {\n                        this._compositor.releaseTexture(this._prevOutputTextures[name]);\n                    }\n                    this._prevOutputTextures[name] = this._outputTextures[name];\n                }\n                else {\n                    this._compositor.releaseTexture(this._outputTextures[name]);\n                }\n            }\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (CompositorNode);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb21wb3NpdG9yL0NvbXBvc2l0b3JOb2RlLmpzP2Q4YWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi4vY29yZS9CYXNlJztcblxuLy8gUEVORElOR1xuLy8gVXNlIHRvcG9sb2dpY2FsIHNvcnQgP1xuXG4vKipcbiAqIE5vZGUgb2YgZ3JhcGggYmFzZWQgcG9zdCBwcm9jZXNzaW5nLlxuICpcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LmNvbXBvc2l0b3IuQ29tcG9zaXRvck5vZGVcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKlxuICovXG52YXIgQ29tcG9zaXRvck5vZGUgPSBCYXNlLmV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIC8qKiBAbGVuZHMgY2xheS5jb21wb3NpdG9yLkNvbXBvc2l0b3JOb2RlIyAqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgbmFtZTogJycsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElucHV0IGxpbmtzLCB3aWxsIGJlIHVwZGF0ZWQgYnkgdGhlIGdyYXBoXG4gICAgICAgICAqIEBleGFtcGxlOlxuICAgICAgICAgKiAgICAgaW5wdXROYW1lOiB7XG4gICAgICAgICAqICAgICAgICAgbm9kZTogc29tZU5vZGUsXG4gICAgICAgICAqICAgICAgICAgcGluOiAneHh4eCdcbiAgICAgICAgICogICAgIH1cbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIGlucHV0TGlua3M6IHt9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPdXRwdXQgbGlua3MsIHdpbGwgYmUgdXBkYXRlZCBieSB0aGUgZ3JhcGhcbiAgICAgICAgICogQGV4YW1wbGU6XG4gICAgICAgICAqICAgICBvdXRwdXROYW1lOiB7XG4gICAgICAgICAqICAgICAgICAgbm9kZTogc29tZU5vZGUsXG4gICAgICAgICAqICAgICAgICAgcGluOiAneHh4eCdcbiAgICAgICAgICogICAgIH1cbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIG91dHB1dExpbmtzOiB7fSxcblxuICAgICAgICAvLyBTYXZlIHRoZSBvdXRwdXQgdGV4dHVyZSBvZiBwcmV2aW91cyBmcmFtZVxuICAgICAgICAvLyBXaWxsIGJlIHVzZWQgd2hlbiB0aGVyZSBleGlzdCBhIGNpcmN1bGFyIHJlZmVyZW5jZVxuICAgICAgICBfcHJldk91dHB1dFRleHR1cmVzOiB7fSxcbiAgICAgICAgX291dHB1dFRleHR1cmVzOiB7fSxcblxuICAgICAgICAvLyBFeGFtcGxlOiB7IG5hbWU6IDIgfVxuICAgICAgICBfb3V0cHV0UmVmZXJlbmNlczoge30sXG5cbiAgICAgICAgX3JlbmRlcmluZzogZmFsc2UsXG4gICAgICAgIC8vIElmIHJlbmRlcmVkIGluIHRoaXMgZnJhbWVcbiAgICAgICAgX3JlbmRlcmVkOiBmYWxzZSxcblxuICAgICAgICBfY29tcG9zaXRvcjogbnVsbFxuICAgIH07XG59LFxuLyoqIEBsZW5kcyBjbGF5LmNvbXBvc2l0b3IuQ29tcG9zaXRvck5vZGUucHJvdG90eXBlICovXG57XG5cbiAgICAvLyBUT0RPIFJlbW92ZSBwYXJhbWV0ZXIgZnVuY3Rpb24gY2FsbGJhY2tcbiAgICB1cGRhdGVQYXJhbWV0ZXI6IGZ1bmN0aW9uIChvdXRwdXROYW1lLCByZW5kZXJlcikge1xuICAgICAgICB2YXIgb3V0cHV0SW5mbyA9IHRoaXMub3V0cHV0c1tvdXRwdXROYW1lXTtcbiAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSBvdXRwdXRJbmZvLnBhcmFtZXRlcnM7XG4gICAgICAgIHZhciBwYXJhbWV0ZXJzQ29weSA9IG91dHB1dEluZm8uX3BhcmFtZXRlcnNDb3B5O1xuICAgICAgICBpZiAoIXBhcmFtZXRlcnNDb3B5KSB7XG4gICAgICAgICAgICBwYXJhbWV0ZXJzQ29weSA9IG91dHB1dEluZm8uX3BhcmFtZXRlcnNDb3B5ID0ge307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSAhPT0gJ3dpZHRoJyAmJiBrZXkgIT09ICdoZWlnaHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnNDb3B5W2tleV0gPSBwYXJhbWV0ZXJzW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciB3aWR0aCwgaGVpZ2h0O1xuICAgICAgICBpZiAocGFyYW1ldGVycy53aWR0aCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICB3aWR0aCA9IHBhcmFtZXRlcnMud2lkdGguY2FsbCh0aGlzLCByZW5kZXJlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB3aWR0aCA9IHBhcmFtZXRlcnMud2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMuaGVpZ2h0IGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGhlaWdodCA9IHBhcmFtZXRlcnMuaGVpZ2h0LmNhbGwodGhpcywgcmVuZGVyZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaGVpZ2h0ID0gcGFyYW1ldGVycy5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGFyYW1ldGVyc0NvcHkud2lkdGggIT09IHdpZHRoXG4gICAgICAgICAgICB8fCBwYXJhbWV0ZXJzQ29weS5oZWlnaHQgIT09IGhlaWdodFxuICAgICAgICApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vdXRwdXRUZXh0dXJlc1tvdXRwdXROYW1lXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX291dHB1dFRleHR1cmVzW291dHB1dE5hbWVdLmRpc3Bvc2UocmVuZGVyZXIuZ2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBhcmFtZXRlcnNDb3B5LndpZHRoID0gd2lkdGg7XG4gICAgICAgIHBhcmFtZXRlcnNDb3B5LmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICByZXR1cm4gcGFyYW1ldGVyc0NvcHk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCBwYXJhbWV0ZXJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSB7fSB2YWx1ZVxuICAgICAqL1xuICAgIHNldFBhcmFtZXRlcjogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7fSxcbiAgICAvKipcbiAgICAgKiBHZXQgcGFyYW1ldGVyIHZhbHVlXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBuYW1lXG4gICAgICogQHJldHVybiB7fVxuICAgICAqL1xuICAgIGdldFBhcmFtZXRlcjogZnVuY3Rpb24gKG5hbWUpIHt9LFxuICAgIC8qKlxuICAgICAqIFNldCBwYXJhbWV0ZXJzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9ialxuICAgICAqL1xuICAgIHNldFBhcmFtZXRlcnM6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBvYmopIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UGFyYW1ldGVyKG5hbWUsIG9ialtuYW1lXSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7fSxcblxuICAgIGdldE91dHB1dDogZnVuY3Rpb24gKHJlbmRlcmVyIC8qb3B0aW9uYWwqLywgbmFtZSkge1xuICAgICAgICBpZiAobmFtZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIG91dHB1dCB0ZXh0dXJlIHdpdGhvdXQgcmVuZGVyaW5nXG4gICAgICAgICAgICBuYW1lID0gcmVuZGVyZXI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3V0cHV0VGV4dHVyZXNbbmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dHB1dEluZm8gPSB0aGlzLm91dHB1dHNbbmFtZV07XG4gICAgICAgIGlmICghb3V0cHV0SW5mbykge1xuICAgICAgICAgICAgcmV0dXJuIDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFscmVhZHkgYmVlbiByZW5kZXJlZCBpbiB0aGlzIGZyYW1lXG4gICAgICAgIGlmICh0aGlzLl9yZW5kZXJlZCkge1xuICAgICAgICAgICAgLy8gRm9yY2UgcmV0dXJuIHRleHR1cmUgaW4gbGFzdCBmcmFtZVxuICAgICAgICAgICAgaWYgKG91dHB1dEluZm8ub3V0cHV0TGFzdEZyYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ByZXZPdXRwdXRUZXh0dXJlc1tuYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vdXRwdXRUZXh0dXJlc1tuYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChcbiAgICAgICAgICAgIC8vIFRPRE9cbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmluZyAgIC8vIFNvbHZlIENpcmN1bGFyIFJlZmVyZW5jZVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fcHJldk91dHB1dFRleHR1cmVzW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgYmxhbmsgdGV4dHVyZSBhdCBmaXJzdCBwYXNzXG4gICAgICAgICAgICAgICAgdGhpcy5fcHJldk91dHB1dFRleHR1cmVzW25hbWVdID0gdGhpcy5fY29tcG9zaXRvci5hbGxvY2F0ZVRleHR1cmUob3V0cHV0SW5mby5wYXJhbWV0ZXJzIHx8IHt9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcmV2T3V0cHV0VGV4dHVyZXNbbmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbmRlcihyZW5kZXJlcik7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX291dHB1dFRleHR1cmVzW25hbWVdO1xuICAgIH0sXG5cbiAgICByZW1vdmVSZWZlcmVuY2U6IGZ1bmN0aW9uIChvdXRwdXROYW1lKSB7XG4gICAgICAgIHRoaXMuX291dHB1dFJlZmVyZW5jZXNbb3V0cHV0TmFtZV0tLTtcbiAgICAgICAgaWYgKHRoaXMuX291dHB1dFJlZmVyZW5jZXNbb3V0cHV0TmFtZV0gPT09IDApIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXRJbmZvID0gdGhpcy5vdXRwdXRzW291dHB1dE5hbWVdO1xuICAgICAgICAgICAgaWYgKG91dHB1dEluZm8ua2VlcExhc3RGcmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9wcmV2T3V0cHV0VGV4dHVyZXNbb3V0cHV0TmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29tcG9zaXRvci5yZWxlYXNlVGV4dHVyZSh0aGlzLl9wcmV2T3V0cHV0VGV4dHVyZXNbb3V0cHV0TmFtZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9wcmV2T3V0cHV0VGV4dHVyZXNbb3V0cHV0TmFtZV0gPSB0aGlzLl9vdXRwdXRUZXh0dXJlc1tvdXRwdXROYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE91dHB1dCBvZiB0aGlzIG5vZGUgaGF2ZSBhbHJlYXkgYmVlbiB1c2VkIGJ5IGFsbCBvdGhlciBub2Rlc1xuICAgICAgICAgICAgICAgIC8vIFB1dCB0aGUgdGV4dHVyZSBiYWNrIHRvIHRoZSBwb29sLlxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbXBvc2l0b3IucmVsZWFzZVRleHR1cmUodGhpcy5fb3V0cHV0VGV4dHVyZXNbb3V0cHV0TmFtZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGxpbms6IGZ1bmN0aW9uIChpbnB1dFBpbk5hbWUsIGZyb21Ob2RlLCBmcm9tUGluTmFtZSkge1xuXG4gICAgICAgIC8vIFRoZSByZWxhdGlvbnNoaXAgZnJvbSBvdXRwdXQgcGluIHRvIGlucHV0IHBpbiBpcyBvbmUtb24tbXVsdGlwbGVcbiAgICAgICAgdGhpcy5pbnB1dExpbmtzW2lucHV0UGluTmFtZV0gPSB7XG4gICAgICAgICAgICBub2RlOiBmcm9tTm9kZSxcbiAgICAgICAgICAgIHBpbjogZnJvbVBpbk5hbWVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCFmcm9tTm9kZS5vdXRwdXRMaW5rc1tmcm9tUGluTmFtZV0pIHtcbiAgICAgICAgICAgIGZyb21Ob2RlLm91dHB1dExpbmtzW2Zyb21QaW5OYW1lXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGZyb21Ob2RlLm91dHB1dExpbmtzW2Zyb21QaW5OYW1lXS5wdXNoKHtcbiAgICAgICAgICAgIG5vZGU6IHRoaXMsXG4gICAgICAgICAgICBwaW46IGlucHV0UGluTmFtZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBFbmFibGVkIHRoZSBwaW4gdGV4dHVyZSBpbiBzaGFkZXJcbiAgICAgICAgdGhpcy5wYXNzLm1hdGVyaWFsLmVuYWJsZVRleHR1cmUoaW5wdXRQaW5OYW1lKTtcbiAgICB9LFxuXG4gICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pbnB1dExpbmtzID0ge307XG4gICAgICAgIHRoaXMub3V0cHV0TGlua3MgPSB7fTtcbiAgICB9LFxuXG4gICAgdXBkYXRlUmVmZXJlbmNlOiBmdW5jdGlvbiAob3V0cHV0TmFtZSkge1xuICAgICAgICBpZiAoIXRoaXMuX3JlbmRlcmluZykge1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAodmFyIGlucHV0TmFtZSBpbiB0aGlzLmlucHV0TGlua3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IHRoaXMuaW5wdXRMaW5rc1tpbnB1dE5hbWVdO1xuICAgICAgICAgICAgICAgIGxpbmsubm9kZS51cGRhdGVSZWZlcmVuY2UobGluay5waW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG91dHB1dE5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuX291dHB1dFJlZmVyZW5jZXNbb3V0cHV0TmFtZV0gKys7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgYmVmb3JlRnJhbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWQgPSBmYWxzZTtcblxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMub3V0cHV0TGlua3MpIHtcbiAgICAgICAgICAgIHRoaXMuX291dHB1dFJlZmVyZW5jZXNbbmFtZV0gPSAwO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGFmdGVyRnJhbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gUHV0IGJhY2sgYWxsIHRoZSB0ZXh0dXJlcyB0byBwb29sXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5vdXRwdXRMaW5rcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuX291dHB1dFJlZmVyZW5jZXNbbmFtZV0gPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIG91dHB1dEluZm8gPSB0aGlzLm91dHB1dHNbbmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKG91dHB1dEluZm8ua2VlcExhc3RGcmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcHJldk91dHB1dFRleHR1cmVzW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb21wb3NpdG9yLnJlbGVhc2VUZXh0dXJlKHRoaXMuX3ByZXZPdXRwdXRUZXh0dXJlc1tuYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJldk91dHB1dFRleHR1cmVzW25hbWVdID0gdGhpcy5fb3V0cHV0VGV4dHVyZXNbbmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb21wb3NpdG9yLnJlbGVhc2VUZXh0dXJlKHRoaXMuX291dHB1dFRleHR1cmVzW25hbWVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgQ29tcG9zaXRvck5vZGU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2NvbXBvc2l0b3IvQ29tcG9zaXRvck5vZGUuanNcbi8vIG1vZHVsZSBpZCA9IDM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///35\n");

/***/ }),
/* 36 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__LinkedList__ = __webpack_require__(78);\n\n\n/**\n * LRU Cache\n * @constructor\n * @alias clay.core.LRU\n */\nvar LRU = function (maxSize) {\n\n    this._list = new __WEBPACK_IMPORTED_MODULE_0__LinkedList__[\"a\" /* default */]();\n\n    this._map = {};\n\n    this._maxSize = maxSize || 10;\n};\n\n/**\n * Set cache max size\n * @param {number} size\n */\nLRU.prototype.setMaxSize = function (size) {\n    this._maxSize = size;\n};\n\n/**\n * @param  {string} key\n * @param  {} value\n */\nLRU.prototype.put = function (key, value) {\n    if (!this._map.hasOwnProperty(key)) {\n        var len = this._list.length();\n        if (len >= this._maxSize && len > 0) {\n            // Remove the least recently used\n            var leastUsedEntry = this._list.head;\n            this._list.remove(leastUsedEntry);\n            delete this._map[leastUsedEntry.key];\n        }\n\n        var entry = this._list.insert(value);\n        entry.key = key;\n        this._map[key] = entry;\n    }\n};\n\n/**\n * @param  {string} key\n * @return {}\n */\nLRU.prototype.get = function (key) {\n    var entry = this._map[key];\n    if (this._map.hasOwnProperty(key)) {\n        // Put the latest used entry in the tail\n        if (entry !== this._list.tail) {\n            this._list.remove(entry);\n            this._list.insertEntry(entry);\n        }\n\n        return entry.value;\n    }\n};\n\n/**\n * @param {string} key\n */\nLRU.prototype.remove = function (key) {\n    var entry = this._map[key];\n    if (typeof(entry) !== 'undefined') {\n        delete this._map[key];\n        this._list.remove(entry);\n    }\n};\n\n/**\n * Clear the cache\n */\nLRU.prototype.clear = function () {\n    this._list.clear();\n    this._map = {};\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (LRU);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb3JlL0xSVS5qcz9hNjI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMaW5rZWRMaXN0IGZyb20gJy4vTGlua2VkTGlzdCc7XG5cbi8qKlxuICogTFJVIENhY2hlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LmNvcmUuTFJVXG4gKi9cbnZhciBMUlUgPSBmdW5jdGlvbiAobWF4U2l6ZSkge1xuXG4gICAgdGhpcy5fbGlzdCA9IG5ldyBMaW5rZWRMaXN0KCk7XG5cbiAgICB0aGlzLl9tYXAgPSB7fTtcblxuICAgIHRoaXMuX21heFNpemUgPSBtYXhTaXplIHx8IDEwO1xufTtcblxuLyoqXG4gKiBTZXQgY2FjaGUgbWF4IHNpemVcbiAqIEBwYXJhbSB7bnVtYmVyfSBzaXplXG4gKi9cbkxSVS5wcm90b3R5cGUuc2V0TWF4U2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgdGhpcy5fbWF4U2l6ZSA9IHNpemU7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge3N0cmluZ30ga2V5XG4gKiBAcGFyYW0gIHt9IHZhbHVlXG4gKi9cbkxSVS5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuX21hcC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLl9saXN0Lmxlbmd0aCgpO1xuICAgICAgICBpZiAobGVuID49IHRoaXMuX21heFNpemUgJiYgbGVuID4gMCkge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBsZWFzdCByZWNlbnRseSB1c2VkXG4gICAgICAgICAgICB2YXIgbGVhc3RVc2VkRW50cnkgPSB0aGlzLl9saXN0LmhlYWQ7XG4gICAgICAgICAgICB0aGlzLl9saXN0LnJlbW92ZShsZWFzdFVzZWRFbnRyeSk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fbWFwW2xlYXN0VXNlZEVudHJ5LmtleV07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLl9saXN0Lmluc2VydCh2YWx1ZSk7XG4gICAgICAgIGVudHJ5LmtleSA9IGtleTtcbiAgICAgICAgdGhpcy5fbWFwW2tleV0gPSBlbnRyeTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge3N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHt9XG4gKi9cbkxSVS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciBlbnRyeSA9IHRoaXMuX21hcFtrZXldO1xuICAgIGlmICh0aGlzLl9tYXAuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAvLyBQdXQgdGhlIGxhdGVzdCB1c2VkIGVudHJ5IGluIHRoZSB0YWlsXG4gICAgICAgIGlmIChlbnRyeSAhPT0gdGhpcy5fbGlzdC50YWlsKSB7XG4gICAgICAgICAgICB0aGlzLl9saXN0LnJlbW92ZShlbnRyeSk7XG4gICAgICAgICAgICB0aGlzLl9saXN0Lmluc2VydEVudHJ5KGVudHJ5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbnRyeS52YWx1ZTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqL1xuTFJVLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGVudHJ5ID0gdGhpcy5fbWFwW2tleV07XG4gICAgaWYgKHR5cGVvZihlbnRyeSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9tYXBba2V5XTtcbiAgICAgICAgdGhpcy5fbGlzdC5yZW1vdmUoZW50cnkpO1xuICAgIH1cbn07XG5cbi8qKlxuICogQ2xlYXIgdGhlIGNhY2hlXG4gKi9cbkxSVS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fbGlzdC5jbGVhcigpO1xuICAgIHRoaXMuX21hcCA9IHt9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTFJVO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb3JlL0xSVS5qc1xuLy8gbW9kdWxlIGlkID0gMzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///36\n");

/***/ }),
/* 37 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Frustum__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_Ray__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\n\n\n\n\n\n\n/**\n * @constructor clay.Camera\n * @extends clay.Node\n */\nvar Camera = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Camera# */ {\n        /**\n         * Camera projection matrix\n         * @type {clay.Matrix4}\n         */\n        projectionMatrix: new __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */](),\n\n        /**\n         * Inverse of camera projection matrix\n         * @type {clay.Matrix4}\n         */\n        invProjectionMatrix: new __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */](),\n\n        /**\n         * View matrix, equal to inverse of camera's world matrix\n         * @type {clay.Matrix4}\n         */\n        viewMatrix: new __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */](),\n\n        /**\n         * Camera frustum in view space\n         * @type {clay.Frustum}\n         */\n        frustum: new __WEBPACK_IMPORTED_MODULE_2__math_Frustum__[\"a\" /* default */]()\n    };\n}, function () {\n    this.update(true);\n},\n/** @lends clay.Camera.prototype */\n{\n\n    update: function (force) {\n        __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].prototype.update.call(this, force);\n        __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */].invert(this.viewMatrix, this.worldTransform);\n\n        this.updateProjectionMatrix();\n        __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */].invert(this.invProjectionMatrix, this.projectionMatrix);\n\n        this.frustum.setFromProjection(this.projectionMatrix);\n    },\n\n    /**\n     * Set camera view matrix\n     */\n    setViewMatrix: function (viewMatrix) {\n        __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */].copy(this.viewMatrix, viewMatrix);\n        __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */].invert(this.worldTransform, viewMatrix);\n        this.decomposeWorldTransform();\n    },\n\n    /**\n     * Decompose camera projection matrix\n     */\n    decomposeProjectionMatrix: function () {},\n\n    /**\n     * Set camera projection matrix\n     * @param {clay.Matrix4} projectionMatrix\n     */\n    setProjectionMatrix: function (projectionMatrix) {\n        __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */].copy(this.projectionMatrix, projectionMatrix);\n        __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */].invert(this.invProjectionMatrix, projectionMatrix);\n        this.decomposeProjectionMatrix();\n    },\n    /**\n     * Update projection matrix, called after update\n     */\n    updateProjectionMatrix: function () {},\n\n    /**\n     * Cast a picking ray from camera near plane to far plane\n     * @function\n     * @param {clay.Vector2} ndc\n     * @param {clay.Ray} [out]\n     * @return {clay.Ray}\n     */\n    castRay: (function () {\n        var v4 = __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__[\"a\" /* default */].create();\n        return function (ndc, out) {\n            var ray = out !== undefined ? out : new __WEBPACK_IMPORTED_MODULE_3__math_Ray__[\"a\" /* default */]();\n            var x = ndc.array[0];\n            var y = ndc.array[1];\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__[\"a\" /* default */].set(v4, x, y, -1, 1);\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__[\"a\" /* default */].transformMat4(v4, v4, this.invProjectionMatrix.array);\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__[\"a\" /* default */].transformMat4(v4, v4, this.worldTransform.array);\n            __WEBPACK_IMPORTED_MODULE_5__glmatrix_vec3__[\"a\" /* default */].scale(ray.origin.array, v4, 1 / v4[3]);\n\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__[\"a\" /* default */].set(v4, x, y, 1, 1);\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__[\"a\" /* default */].transformMat4(v4, v4, this.invProjectionMatrix.array);\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__[\"a\" /* default */].transformMat4(v4, v4, this.worldTransform.array);\n            __WEBPACK_IMPORTED_MODULE_5__glmatrix_vec3__[\"a\" /* default */].scale(v4, v4, 1 / v4[3]);\n            __WEBPACK_IMPORTED_MODULE_5__glmatrix_vec3__[\"a\" /* default */].sub(ray.direction.array, v4, ray.origin.array);\n\n            __WEBPACK_IMPORTED_MODULE_5__glmatrix_vec3__[\"a\" /* default */].normalize(ray.direction.array, ray.direction.array);\n            ray.direction._dirty = true;\n            ray.origin._dirty = true;\n\n            return ray;\n        };\n    })(),\n\n    /**\n     * @function\n     * @name clone\n     * @return {clay.Camera}\n     * @memberOf clay.Camera.prototype\n     */\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Camera);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9DYW1lcmEuanM/YmJjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTm9kZSBmcm9tICcuL05vZGUnO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSAnLi9tYXRoL01hdHJpeDQnO1xuaW1wb3J0IEZydXN0dW0gZnJvbSAnLi9tYXRoL0ZydXN0dW0nO1xuaW1wb3J0IFJheSBmcm9tICcuL21hdGgvUmF5JztcblxuaW1wb3J0IHZlYzQgZnJvbSAnLi9nbG1hdHJpeC92ZWM0JztcbmltcG9ydCB2ZWMzIGZyb20gJy4vZ2xtYXRyaXgvdmVjMyc7XG5cblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5DYW1lcmFcbiAqIEBleHRlbmRzIGNsYXkuTm9kZVxuICovXG52YXIgQ2FtZXJhID0gTm9kZS5leHRlbmQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuQ2FtZXJhIyAqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYW1lcmEgcHJvamVjdGlvbiBtYXRyaXhcbiAgICAgICAgICogQHR5cGUge2NsYXkuTWF0cml4NH1cbiAgICAgICAgICovXG4gICAgICAgIHByb2plY3Rpb25NYXRyaXg6IG5ldyBNYXRyaXg0KCksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludmVyc2Ugb2YgY2FtZXJhIHByb2plY3Rpb24gbWF0cml4XG4gICAgICAgICAqIEB0eXBlIHtjbGF5Lk1hdHJpeDR9XG4gICAgICAgICAqL1xuICAgICAgICBpbnZQcm9qZWN0aW9uTWF0cml4OiBuZXcgTWF0cml4NCgpLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWaWV3IG1hdHJpeCwgZXF1YWwgdG8gaW52ZXJzZSBvZiBjYW1lcmEncyB3b3JsZCBtYXRyaXhcbiAgICAgICAgICogQHR5cGUge2NsYXkuTWF0cml4NH1cbiAgICAgICAgICovXG4gICAgICAgIHZpZXdNYXRyaXg6IG5ldyBNYXRyaXg0KCksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbWVyYSBmcnVzdHVtIGluIHZpZXcgc3BhY2VcbiAgICAgICAgICogQHR5cGUge2NsYXkuRnJ1c3R1bX1cbiAgICAgICAgICovXG4gICAgICAgIGZydXN0dW06IG5ldyBGcnVzdHVtKClcbiAgICB9O1xufSwgZnVuY3Rpb24gKCkge1xuICAgIHRoaXMudXBkYXRlKHRydWUpO1xufSxcbi8qKiBAbGVuZHMgY2xheS5DYW1lcmEucHJvdG90eXBlICovXG57XG5cbiAgICB1cGRhdGU6IGZ1bmN0aW9uIChmb3JjZSkge1xuICAgICAgICBOb2RlLnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzLCBmb3JjZSk7XG4gICAgICAgIE1hdHJpeDQuaW52ZXJ0KHRoaXMudmlld01hdHJpeCwgdGhpcy53b3JsZFRyYW5zZm9ybSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgICAgIE1hdHJpeDQuaW52ZXJ0KHRoaXMuaW52UHJvamVjdGlvbk1hdHJpeCwgdGhpcy5wcm9qZWN0aW9uTWF0cml4KTtcblxuICAgICAgICB0aGlzLmZydXN0dW0uc2V0RnJvbVByb2plY3Rpb24odGhpcy5wcm9qZWN0aW9uTWF0cml4KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IGNhbWVyYSB2aWV3IG1hdHJpeFxuICAgICAqL1xuICAgIHNldFZpZXdNYXRyaXg6IGZ1bmN0aW9uICh2aWV3TWF0cml4KSB7XG4gICAgICAgIE1hdHJpeDQuY29weSh0aGlzLnZpZXdNYXRyaXgsIHZpZXdNYXRyaXgpO1xuICAgICAgICBNYXRyaXg0LmludmVydCh0aGlzLndvcmxkVHJhbnNmb3JtLCB2aWV3TWF0cml4KTtcbiAgICAgICAgdGhpcy5kZWNvbXBvc2VXb3JsZFRyYW5zZm9ybSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEZWNvbXBvc2UgY2FtZXJhIHByb2plY3Rpb24gbWF0cml4XG4gICAgICovXG4gICAgZGVjb21wb3NlUHJvamVjdGlvbk1hdHJpeDogZnVuY3Rpb24gKCkge30sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgY2FtZXJhIHByb2plY3Rpb24gbWF0cml4XG4gICAgICogQHBhcmFtIHtjbGF5Lk1hdHJpeDR9IHByb2plY3Rpb25NYXRyaXhcbiAgICAgKi9cbiAgICBzZXRQcm9qZWN0aW9uTWF0cml4OiBmdW5jdGlvbiAocHJvamVjdGlvbk1hdHJpeCkge1xuICAgICAgICBNYXRyaXg0LmNvcHkodGhpcy5wcm9qZWN0aW9uTWF0cml4LCBwcm9qZWN0aW9uTWF0cml4KTtcbiAgICAgICAgTWF0cml4NC5pbnZlcnQodGhpcy5pbnZQcm9qZWN0aW9uTWF0cml4LCBwcm9qZWN0aW9uTWF0cml4KTtcbiAgICAgICAgdGhpcy5kZWNvbXBvc2VQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgcHJvamVjdGlvbiBtYXRyaXgsIGNhbGxlZCBhZnRlciB1cGRhdGVcbiAgICAgKi9cbiAgICB1cGRhdGVQcm9qZWN0aW9uTWF0cml4OiBmdW5jdGlvbiAoKSB7fSxcblxuICAgIC8qKlxuICAgICAqIENhc3QgYSBwaWNraW5nIHJheSBmcm9tIGNhbWVyYSBuZWFyIHBsYW5lIHRvIGZhciBwbGFuZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7Y2xheS5WZWN0b3IyfSBuZGNcbiAgICAgKiBAcGFyYW0ge2NsYXkuUmF5fSBbb3V0XVxuICAgICAqIEByZXR1cm4ge2NsYXkuUmF5fVxuICAgICAqL1xuICAgIGNhc3RSYXk6IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2NCA9IHZlYzQuY3JlYXRlKCk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobmRjLCBvdXQpIHtcbiAgICAgICAgICAgIHZhciByYXkgPSBvdXQgIT09IHVuZGVmaW5lZCA/IG91dCA6IG5ldyBSYXkoKTtcbiAgICAgICAgICAgIHZhciB4ID0gbmRjLmFycmF5WzBdO1xuICAgICAgICAgICAgdmFyIHkgPSBuZGMuYXJyYXlbMV07XG4gICAgICAgICAgICB2ZWM0LnNldCh2NCwgeCwgeSwgLTEsIDEpO1xuICAgICAgICAgICAgdmVjNC50cmFuc2Zvcm1NYXQ0KHY0LCB2NCwgdGhpcy5pbnZQcm9qZWN0aW9uTWF0cml4LmFycmF5KTtcbiAgICAgICAgICAgIHZlYzQudHJhbnNmb3JtTWF0NCh2NCwgdjQsIHRoaXMud29ybGRUcmFuc2Zvcm0uYXJyYXkpO1xuICAgICAgICAgICAgdmVjMy5zY2FsZShyYXkub3JpZ2luLmFycmF5LCB2NCwgMSAvIHY0WzNdKTtcblxuICAgICAgICAgICAgdmVjNC5zZXQodjQsIHgsIHksIDEsIDEpO1xuICAgICAgICAgICAgdmVjNC50cmFuc2Zvcm1NYXQ0KHY0LCB2NCwgdGhpcy5pbnZQcm9qZWN0aW9uTWF0cml4LmFycmF5KTtcbiAgICAgICAgICAgIHZlYzQudHJhbnNmb3JtTWF0NCh2NCwgdjQsIHRoaXMud29ybGRUcmFuc2Zvcm0uYXJyYXkpO1xuICAgICAgICAgICAgdmVjMy5zY2FsZSh2NCwgdjQsIDEgLyB2NFszXSk7XG4gICAgICAgICAgICB2ZWMzLnN1YihyYXkuZGlyZWN0aW9uLmFycmF5LCB2NCwgcmF5Lm9yaWdpbi5hcnJheSk7XG5cbiAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKHJheS5kaXJlY3Rpb24uYXJyYXksIHJheS5kaXJlY3Rpb24uYXJyYXkpO1xuICAgICAgICAgICAgcmF5LmRpcmVjdGlvbi5fZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgcmF5Lm9yaWdpbi5fZGlydHkgPSB0cnVlO1xuXG4gICAgICAgICAgICByZXR1cm4gcmF5O1xuICAgICAgICB9O1xuICAgIH0pKCksXG5cbiAgICAvKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAbmFtZSBjbG9uZVxuICAgICAqIEByZXR1cm4ge2NsYXkuQ2FtZXJhfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LkNhbWVyYS5wcm90b3R5cGVcbiAgICAgKi9cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBDYW1lcmE7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL0NhbWVyYS5qc1xuLy8gbW9kdWxlIGlkID0gMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///37\n");

/***/ }),
/* 38 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\nvar EPSILON = 1e-5;\n\n/**\n * @constructor\n * @alias clay.Ray\n * @param {clay.Vector3} [origin]\n * @param {clay.Vector3} [direction]\n */\nvar Ray = function (origin, direction) {\n    /**\n     * @type {clay.Vector3}\n     */\n    this.origin = origin || new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n    /**\n     * @type {clay.Vector3}\n     */\n    this.direction = direction || new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n};\n\nRay.prototype = {\n\n    constructor: Ray,\n\n    // http://www.siggraph.org/education/materials/HyperGraph/raytrace/rayplane_intersection.htm\n    /**\n     * Calculate intersection point between ray and a give plane\n     * @param  {clay.Plane} plane\n     * @param  {clay.Vector3} [out]\n     * @return {clay.Vector3}\n     */\n    intersectPlane: function (plane, out) {\n        var pn = plane.normal.array;\n        var d = plane.distance;\n        var ro = this.origin.array;\n        var rd = this.direction.array;\n\n        var divider = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(pn, rd);\n        // ray is parallel to the plane\n        if (divider === 0) {\n            return null;\n        }\n        if (!out) {\n            out = new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n        }\n        var t = (__WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(pn, ro) - d) / divider;\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, ro, rd, -t);\n        out._dirty = true;\n        return out;\n    },\n\n    /**\n     * Mirror the ray against plane\n     * @param  {clay.Plane} plane\n     */\n    mirrorAgainstPlane: function (plane) {\n        // Distance to plane\n        var d = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(plane.normal.array, this.direction.array);\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(this.direction.array, this.direction.array, plane.normal.array, -d * 2);\n        this.direction._dirty = true;\n    },\n\n    distanceToPoint: (function () {\n        var v = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        return function (point) {\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(v, point, this.origin.array);\n            // Distance from projection point to origin\n            var b = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(v, this.direction.array);\n            if (b < 0) {\n                return __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].distance(this.origin.array, point);\n            }\n            // Squared distance from center to origin\n            var c2 = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].lenSquared(v);\n            // Squared distance from center to projection point\n            return Math.sqrt(c2 - b * b);\n        };\n    })(),\n\n    /**\n     * Calculate intersection point between ray and sphere\n     * @param  {clay.Vector3} center\n     * @param  {number} radius\n     * @param  {clay.Vector3} out\n     * @return {clay.Vector3}\n     */\n    intersectSphere: (function () {\n        var v = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        return function (center, radius, out) {\n            var origin = this.origin.array;\n            var direction = this.direction.array;\n            center = center.array;\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(v, center, origin);\n            // Distance from projection point to origin\n            var b = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(v, direction);\n            // Squared distance from center to origin\n            var c2 = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].squaredLength(v);\n            // Squared distance from center to projection point\n            var d2 = c2 - b * b;\n\n            var r2 = radius * radius;\n            // No intersection\n            if (d2 > r2) {\n                return;\n            }\n\n            var a = Math.sqrt(r2 - d2);\n            // First intersect point\n            var t0 = b - a;\n            // Second intersect point\n            var t1 = b + a;\n\n            if (!out) {\n                out = new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n            }\n            if (t0 < 0) {\n                if (t1 < 0) {\n                    return null;\n                }\n                else {\n                    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, origin, direction, t1);\n                    return out;\n                }\n            }\n            else {\n                __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, origin, direction, t0);\n                return out;\n            }\n        };\n    })(),\n\n    // http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-box-intersection/\n    /**\n     * Calculate intersection point between ray and bounding box\n     * @param {clay.BoundingBox} bbox\n     * @param {clay.Vector3}\n     * @return {clay.Vector3}\n     */\n    intersectBoundingBox: function (bbox, out) {\n        var dir = this.direction.array;\n        var origin = this.origin.array;\n        var min = bbox.min.array;\n        var max = bbox.max.array;\n\n        var invdirx = 1 / dir[0];\n        var invdiry = 1 / dir[1];\n        var invdirz = 1 / dir[2];\n\n        var tmin, tmax, tymin, tymax, tzmin, tzmax;\n        if (invdirx >= 0) {\n            tmin = (min[0] - origin[0]) * invdirx;\n            tmax = (max[0] - origin[0]) * invdirx;\n        }\n        else {\n            tmax = (min[0] - origin[0]) * invdirx;\n            tmin = (max[0] - origin[0]) * invdirx;\n        }\n        if (invdiry >= 0) {\n            tymin = (min[1] - origin[1]) * invdiry;\n            tymax = (max[1] - origin[1]) * invdiry;\n        }\n        else {\n            tymax = (min[1] - origin[1]) * invdiry;\n            tymin = (max[1] - origin[1]) * invdiry;\n        }\n\n        if ((tmin > tymax) || (tymin > tmax)) {\n            return null;\n        }\n\n        if (tymin > tmin || tmin !== tmin) {\n            tmin = tymin;\n        }\n        if (tymax < tmax || tmax !== tmax) {\n            tmax = tymax;\n        }\n\n        if (invdirz >= 0) {\n            tzmin = (min[2] - origin[2]) * invdirz;\n            tzmax = (max[2] - origin[2]) * invdirz;\n        }\n        else {\n            tzmax = (min[2] - origin[2]) * invdirz;\n            tzmin = (max[2] - origin[2]) * invdirz;\n        }\n\n        if ((tmin > tzmax) || (tzmin > tmax)) {\n            return null;\n        }\n\n        if (tzmin > tmin || tmin !== tmin) {\n            tmin = tzmin;\n        }\n        if (tzmax < tmax || tmax !== tmax) {\n            tmax = tzmax;\n        }\n        if (tmax < 0) {\n            return null;\n        }\n\n        var t = tmin >= 0 ? tmin : tmax;\n\n        if (!out) {\n            out = new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n        }\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, origin, dir, t);\n        return out;\n    },\n\n    // http://en.wikipedia.org/wiki/M%C3%B6ller%E2%80%93Trumbore_intersection_algorithm\n    /**\n     * Calculate intersection point between ray and three triangle vertices\n     * @param {clay.Vector3} a\n     * @param {clay.Vector3} b\n     * @param {clay.Vector3} c\n     * @param {boolean}           singleSided, CW triangle will be ignored\n     * @param {clay.Vector3} [out]\n     * @param {clay.Vector3} [barycenteric] barycentric coords\n     * @return {clay.Vector3}\n     */\n    intersectTriangle: (function () {\n\n        var eBA = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var eCA = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var AO = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var vCross = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n\n        return function (a, b, c, singleSided, out, barycenteric) {\n            var dir = this.direction.array;\n            var origin = this.origin.array;\n            a = a.array;\n            b = b.array;\n            c = c.array;\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(eBA, b, a);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(eCA, c, a);\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].cross(vCross, eCA, dir);\n\n            var det = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(eBA, vCross);\n\n            if (singleSided) {\n                if (det > -EPSILON) {\n                    return null;\n                }\n            }\n            else {\n                if (det > -EPSILON && det < EPSILON) {\n                    return null;\n                }\n            }\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(AO, origin, a);\n            var u = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(vCross, AO) / det;\n            if (u < 0 || u > 1) {\n                return null;\n            }\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].cross(vCross, eBA, AO);\n            var v = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(dir, vCross) / det;\n\n            if (v < 0 || v > 1 || (u + v > 1)) {\n                return null;\n            }\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].cross(vCross, eBA, eCA);\n            var t = -__WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(AO, vCross) / det;\n\n            if (t < 0) {\n                return null;\n            }\n\n            if (!out) {\n                out = new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n            }\n            if (barycenteric) {\n                __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].set(barycenteric, (1 - u - v), u, v);\n            }\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, origin, dir, t);\n\n            return out;\n        };\n    })(),\n\n    /**\n     * Apply an affine transform matrix to the ray\n     * @return {clay.Matrix4} matrix\n     */\n    applyTransform: function (matrix) {\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].add(this.direction, this.direction, this.origin);\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].transformMat4(this.origin, this.origin, matrix);\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].transformMat4(this.direction, this.direction, matrix);\n\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].sub(this.direction, this.direction, this.origin);\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].normalize(this.direction, this.direction);\n    },\n\n    /**\n     * Copy values from another ray\n     * @param {clay.Ray} ray\n     */\n    copy: function (ray) {\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].copy(this.origin, ray.origin);\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].copy(this.direction, ray.direction);\n    },\n\n    /**\n     * Clone a new ray\n     * @return {clay.Ray}\n     */\n    clone: function () {\n        var ray = new Ray();\n        ray.copy(this);\n        return ray;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Ray);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL1JheS5qcz8yOTBlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBWZWN0b3IzIGZyb20gJy4vVmVjdG9yMyc7XG5pbXBvcnQgdmVjMyBmcm9tICcuLi9nbG1hdHJpeC92ZWMzJztcblxudmFyIEVQU0lMT04gPSAxZS01O1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuUmF5XG4gKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gW29yaWdpbl1cbiAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSBbZGlyZWN0aW9uXVxuICovXG52YXIgUmF5ID0gZnVuY3Rpb24gKG9yaWdpbiwgZGlyZWN0aW9uKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICB0aGlzLm9yaWdpbiA9IG9yaWdpbiB8fCBuZXcgVmVjdG9yMygpO1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb24gfHwgbmV3IFZlY3RvcjMoKTtcbn07XG5cblJheS5wcm90b3R5cGUgPSB7XG5cbiAgICBjb25zdHJ1Y3RvcjogUmF5LFxuXG4gICAgLy8gaHR0cDovL3d3dy5zaWdncmFwaC5vcmcvZWR1Y2F0aW9uL21hdGVyaWFscy9IeXBlckdyYXBoL3JheXRyYWNlL3JheXBsYW5lX2ludGVyc2VjdGlvbi5odG1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgaW50ZXJzZWN0aW9uIHBvaW50IGJldHdlZW4gcmF5IGFuZCBhIGdpdmUgcGxhbmVcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlBsYW5lfSBwbGFuZVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gW291dF1cbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgaW50ZXJzZWN0UGxhbmU6IGZ1bmN0aW9uIChwbGFuZSwgb3V0KSB7XG4gICAgICAgIHZhciBwbiA9IHBsYW5lLm5vcm1hbC5hcnJheTtcbiAgICAgICAgdmFyIGQgPSBwbGFuZS5kaXN0YW5jZTtcbiAgICAgICAgdmFyIHJvID0gdGhpcy5vcmlnaW4uYXJyYXk7XG4gICAgICAgIHZhciByZCA9IHRoaXMuZGlyZWN0aW9uLmFycmF5O1xuXG4gICAgICAgIHZhciBkaXZpZGVyID0gdmVjMy5kb3QocG4sIHJkKTtcbiAgICAgICAgLy8gcmF5IGlzIHBhcmFsbGVsIHRvIHRoZSBwbGFuZVxuICAgICAgICBpZiAoZGl2aWRlciA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvdXQpIHtcbiAgICAgICAgICAgIG91dCA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHQgPSAodmVjMy5kb3QocG4sIHJvKSAtIGQpIC8gZGl2aWRlcjtcbiAgICAgICAgdmVjMy5zY2FsZUFuZEFkZChvdXQuYXJyYXksIHJvLCByZCwgLXQpO1xuICAgICAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTWlycm9yIHRoZSByYXkgYWdhaW5zdCBwbGFuZVxuICAgICAqIEBwYXJhbSAge2NsYXkuUGxhbmV9IHBsYW5lXG4gICAgICovXG4gICAgbWlycm9yQWdhaW5zdFBsYW5lOiBmdW5jdGlvbiAocGxhbmUpIHtcbiAgICAgICAgLy8gRGlzdGFuY2UgdG8gcGxhbmVcbiAgICAgICAgdmFyIGQgPSB2ZWMzLmRvdChwbGFuZS5ub3JtYWwuYXJyYXksIHRoaXMuZGlyZWN0aW9uLmFycmF5KTtcbiAgICAgICAgdmVjMy5zY2FsZUFuZEFkZCh0aGlzLmRpcmVjdGlvbi5hcnJheSwgdGhpcy5kaXJlY3Rpb24uYXJyYXksIHBsYW5lLm5vcm1hbC5hcnJheSwgLWQgKiAyKTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24uX2RpcnR5ID0gdHJ1ZTtcbiAgICB9LFxuXG4gICAgZGlzdGFuY2VUb1BvaW50OiAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdiA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocG9pbnQpIHtcbiAgICAgICAgICAgIHZlYzMuc3ViKHYsIHBvaW50LCB0aGlzLm9yaWdpbi5hcnJheSk7XG4gICAgICAgICAgICAvLyBEaXN0YW5jZSBmcm9tIHByb2plY3Rpb24gcG9pbnQgdG8gb3JpZ2luXG4gICAgICAgICAgICB2YXIgYiA9IHZlYzMuZG90KHYsIHRoaXMuZGlyZWN0aW9uLmFycmF5KTtcbiAgICAgICAgICAgIGlmIChiIDwgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2ZWMzLmRpc3RhbmNlKHRoaXMub3JpZ2luLmFycmF5LCBwb2ludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTcXVhcmVkIGRpc3RhbmNlIGZyb20gY2VudGVyIHRvIG9yaWdpblxuICAgICAgICAgICAgdmFyIGMyID0gdmVjMy5sZW5TcXVhcmVkKHYpO1xuICAgICAgICAgICAgLy8gU3F1YXJlZCBkaXN0YW5jZSBmcm9tIGNlbnRlciB0byBwcm9qZWN0aW9uIHBvaW50XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KGMyIC0gYiAqIGIpO1xuICAgICAgICB9O1xuICAgIH0pKCksXG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgaW50ZXJzZWN0aW9uIHBvaW50IGJldHdlZW4gcmF5IGFuZCBzcGhlcmVcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGNlbnRlclxuICAgICAqIEBwYXJhbSAge251bWJlcn0gcmFkaXVzXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgaW50ZXJzZWN0U3BoZXJlOiAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdiA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoY2VudGVyLCByYWRpdXMsIG91dCkge1xuICAgICAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMub3JpZ2luLmFycmF5O1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uLmFycmF5O1xuICAgICAgICAgICAgY2VudGVyID0gY2VudGVyLmFycmF5O1xuICAgICAgICAgICAgdmVjMy5zdWIodiwgY2VudGVyLCBvcmlnaW4pO1xuICAgICAgICAgICAgLy8gRGlzdGFuY2UgZnJvbSBwcm9qZWN0aW9uIHBvaW50IHRvIG9yaWdpblxuICAgICAgICAgICAgdmFyIGIgPSB2ZWMzLmRvdCh2LCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgLy8gU3F1YXJlZCBkaXN0YW5jZSBmcm9tIGNlbnRlciB0byBvcmlnaW5cbiAgICAgICAgICAgIHZhciBjMiA9IHZlYzMuc3F1YXJlZExlbmd0aCh2KTtcbiAgICAgICAgICAgIC8vIFNxdWFyZWQgZGlzdGFuY2UgZnJvbSBjZW50ZXIgdG8gcHJvamVjdGlvbiBwb2ludFxuICAgICAgICAgICAgdmFyIGQyID0gYzIgLSBiICogYjtcblxuICAgICAgICAgICAgdmFyIHIyID0gcmFkaXVzICogcmFkaXVzO1xuICAgICAgICAgICAgLy8gTm8gaW50ZXJzZWN0aW9uXG4gICAgICAgICAgICBpZiAoZDIgPiByMikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGEgPSBNYXRoLnNxcnQocjIgLSBkMik7XG4gICAgICAgICAgICAvLyBGaXJzdCBpbnRlcnNlY3QgcG9pbnRcbiAgICAgICAgICAgIHZhciB0MCA9IGIgLSBhO1xuICAgICAgICAgICAgLy8gU2Vjb25kIGludGVyc2VjdCBwb2ludFxuICAgICAgICAgICAgdmFyIHQxID0gYiArIGE7XG5cbiAgICAgICAgICAgIGlmICghb3V0KSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0MCA8IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodDEgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5zY2FsZUFuZEFkZChvdXQuYXJyYXksIG9yaWdpbiwgZGlyZWN0aW9uLCB0MSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmVjMy5zY2FsZUFuZEFkZChvdXQuYXJyYXksIG9yaWdpbiwgZGlyZWN0aW9uLCB0MCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KSgpLFxuXG4gICAgLy8gaHR0cDovL3d3dy5zY3JhdGNoYXBpeGVsLmNvbS9sZXNzb25zLzNkLWJhc2ljLWxlc3NvbnMvbGVzc29uLTctaW50ZXJzZWN0aW5nLXNpbXBsZS1zaGFwZXMvcmF5LWJveC1pbnRlcnNlY3Rpb24vXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIGludGVyc2VjdGlvbiBwb2ludCBiZXR3ZWVuIHJheSBhbmQgYm91bmRpbmcgYm94XG4gICAgICogQHBhcmFtIHtjbGF5LkJvdW5kaW5nQm94fSBiYm94XG4gICAgICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9XG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIGludGVyc2VjdEJvdW5kaW5nQm94OiBmdW5jdGlvbiAoYmJveCwgb3V0KSB7XG4gICAgICAgIHZhciBkaXIgPSB0aGlzLmRpcmVjdGlvbi5hcnJheTtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMub3JpZ2luLmFycmF5O1xuICAgICAgICB2YXIgbWluID0gYmJveC5taW4uYXJyYXk7XG4gICAgICAgIHZhciBtYXggPSBiYm94Lm1heC5hcnJheTtcblxuICAgICAgICB2YXIgaW52ZGlyeCA9IDEgLyBkaXJbMF07XG4gICAgICAgIHZhciBpbnZkaXJ5ID0gMSAvIGRpclsxXTtcbiAgICAgICAgdmFyIGludmRpcnogPSAxIC8gZGlyWzJdO1xuXG4gICAgICAgIHZhciB0bWluLCB0bWF4LCB0eW1pbiwgdHltYXgsIHR6bWluLCB0em1heDtcbiAgICAgICAgaWYgKGludmRpcnggPj0gMCkge1xuICAgICAgICAgICAgdG1pbiA9IChtaW5bMF0gLSBvcmlnaW5bMF0pICogaW52ZGlyeDtcbiAgICAgICAgICAgIHRtYXggPSAobWF4WzBdIC0gb3JpZ2luWzBdKSAqIGludmRpcng7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0bWF4ID0gKG1pblswXSAtIG9yaWdpblswXSkgKiBpbnZkaXJ4O1xuICAgICAgICAgICAgdG1pbiA9IChtYXhbMF0gLSBvcmlnaW5bMF0pICogaW52ZGlyeDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW52ZGlyeSA+PSAwKSB7XG4gICAgICAgICAgICB0eW1pbiA9IChtaW5bMV0gLSBvcmlnaW5bMV0pICogaW52ZGlyeTtcbiAgICAgICAgICAgIHR5bWF4ID0gKG1heFsxXSAtIG9yaWdpblsxXSkgKiBpbnZkaXJ5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHltYXggPSAobWluWzFdIC0gb3JpZ2luWzFdKSAqIGludmRpcnk7XG4gICAgICAgICAgICB0eW1pbiA9IChtYXhbMV0gLSBvcmlnaW5bMV0pICogaW52ZGlyeTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgodG1pbiA+IHR5bWF4KSB8fCAodHltaW4gPiB0bWF4KSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHltaW4gPiB0bWluIHx8IHRtaW4gIT09IHRtaW4pIHtcbiAgICAgICAgICAgIHRtaW4gPSB0eW1pbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHltYXggPCB0bWF4IHx8IHRtYXggIT09IHRtYXgpIHtcbiAgICAgICAgICAgIHRtYXggPSB0eW1heDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnZkaXJ6ID49IDApIHtcbiAgICAgICAgICAgIHR6bWluID0gKG1pblsyXSAtIG9yaWdpblsyXSkgKiBpbnZkaXJ6O1xuICAgICAgICAgICAgdHptYXggPSAobWF4WzJdIC0gb3JpZ2luWzJdKSAqIGludmRpcno7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0em1heCA9IChtaW5bMl0gLSBvcmlnaW5bMl0pICogaW52ZGlyejtcbiAgICAgICAgICAgIHR6bWluID0gKG1heFsyXSAtIG9yaWdpblsyXSkgKiBpbnZkaXJ6O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCh0bWluID4gdHptYXgpIHx8ICh0em1pbiA+IHRtYXgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0em1pbiA+IHRtaW4gfHwgdG1pbiAhPT0gdG1pbikge1xuICAgICAgICAgICAgdG1pbiA9IHR6bWluO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0em1heCA8IHRtYXggfHwgdG1heCAhPT0gdG1heCkge1xuICAgICAgICAgICAgdG1heCA9IHR6bWF4O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0bWF4IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdCA9IHRtaW4gPj0gMCA/IHRtaW4gOiB0bWF4O1xuXG4gICAgICAgIGlmICghb3V0KSB7XG4gICAgICAgICAgICBvdXQgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB9XG4gICAgICAgIHZlYzMuc2NhbGVBbmRBZGQob3V0LmFycmF5LCBvcmlnaW4sIGRpciwgdCk7XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfSxcblxuICAgIC8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTSVDMyVCNmxsZXIlRTIlODAlOTNUcnVtYm9yZV9pbnRlcnNlY3Rpb25fYWxnb3JpdGhtXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIGludGVyc2VjdGlvbiBwb2ludCBiZXR3ZWVuIHJheSBhbmQgdGhyZWUgdHJpYW5nbGUgdmVydGljZXNcbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gYVxuICAgICAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSBiXG4gICAgICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IGNcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59ICAgICAgICAgICBzaW5nbGVTaWRlZCwgQ1cgdHJpYW5nbGUgd2lsbCBiZSBpZ25vcmVkXG4gICAgICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IFtvdXRdXG4gICAgICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IFtiYXJ5Y2VudGVyaWNdIGJhcnljZW50cmljIGNvb3Jkc1xuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBpbnRlcnNlY3RUcmlhbmdsZTogKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgZUJBID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdmFyIGVDQSA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHZhciBBTyA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHZhciB2Q3Jvc3MgPSB2ZWMzLmNyZWF0ZSgpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSwgYiwgYywgc2luZ2xlU2lkZWQsIG91dCwgYmFyeWNlbnRlcmljKSB7XG4gICAgICAgICAgICB2YXIgZGlyID0gdGhpcy5kaXJlY3Rpb24uYXJyYXk7XG4gICAgICAgICAgICB2YXIgb3JpZ2luID0gdGhpcy5vcmlnaW4uYXJyYXk7XG4gICAgICAgICAgICBhID0gYS5hcnJheTtcbiAgICAgICAgICAgIGIgPSBiLmFycmF5O1xuICAgICAgICAgICAgYyA9IGMuYXJyYXk7XG5cbiAgICAgICAgICAgIHZlYzMuc3ViKGVCQSwgYiwgYSk7XG4gICAgICAgICAgICB2ZWMzLnN1YihlQ0EsIGMsIGEpO1xuXG4gICAgICAgICAgICB2ZWMzLmNyb3NzKHZDcm9zcywgZUNBLCBkaXIpO1xuXG4gICAgICAgICAgICB2YXIgZGV0ID0gdmVjMy5kb3QoZUJBLCB2Q3Jvc3MpO1xuXG4gICAgICAgICAgICBpZiAoc2luZ2xlU2lkZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGV0ID4gLUVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGRldCA+IC1FUFNJTE9OICYmIGRldCA8IEVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2ZWMzLnN1YihBTywgb3JpZ2luLCBhKTtcbiAgICAgICAgICAgIHZhciB1ID0gdmVjMy5kb3QodkNyb3NzLCBBTykgLyBkZXQ7XG4gICAgICAgICAgICBpZiAodSA8IDAgfHwgdSA+IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmVjMy5jcm9zcyh2Q3Jvc3MsIGVCQSwgQU8pO1xuICAgICAgICAgICAgdmFyIHYgPSB2ZWMzLmRvdChkaXIsIHZDcm9zcykgLyBkZXQ7XG5cbiAgICAgICAgICAgIGlmICh2IDwgMCB8fCB2ID4gMSB8fCAodSArIHYgPiAxKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2ZWMzLmNyb3NzKHZDcm9zcywgZUJBLCBlQ0EpO1xuICAgICAgICAgICAgdmFyIHQgPSAtdmVjMy5kb3QoQU8sIHZDcm9zcykgLyBkZXQ7XG5cbiAgICAgICAgICAgIGlmICh0IDwgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIW91dCkge1xuICAgICAgICAgICAgICAgIG91dCA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmFyeWNlbnRlcmljKSB7XG4gICAgICAgICAgICAgICAgVmVjdG9yMy5zZXQoYmFyeWNlbnRlcmljLCAoMSAtIHUgLSB2KSwgdSwgdik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2ZWMzLnNjYWxlQW5kQWRkKG91dC5hcnJheSwgb3JpZ2luLCBkaXIsIHQpO1xuXG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH0pKCksXG5cbiAgICAvKipcbiAgICAgKiBBcHBseSBhbiBhZmZpbmUgdHJhbnNmb3JtIG1hdHJpeCB0byB0aGUgcmF5XG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fSBtYXRyaXhcbiAgICAgKi9cbiAgICBhcHBseVRyYW5zZm9ybTogZnVuY3Rpb24gKG1hdHJpeCkge1xuICAgICAgICBWZWN0b3IzLmFkZCh0aGlzLmRpcmVjdGlvbiwgdGhpcy5kaXJlY3Rpb24sIHRoaXMub3JpZ2luKTtcbiAgICAgICAgVmVjdG9yMy50cmFuc2Zvcm1NYXQ0KHRoaXMub3JpZ2luLCB0aGlzLm9yaWdpbiwgbWF0cml4KTtcbiAgICAgICAgVmVjdG9yMy50cmFuc2Zvcm1NYXQ0KHRoaXMuZGlyZWN0aW9uLCB0aGlzLmRpcmVjdGlvbiwgbWF0cml4KTtcblxuICAgICAgICBWZWN0b3IzLnN1Yih0aGlzLmRpcmVjdGlvbiwgdGhpcy5kaXJlY3Rpb24sIHRoaXMub3JpZ2luKTtcbiAgICAgICAgVmVjdG9yMy5ub3JtYWxpemUodGhpcy5kaXJlY3Rpb24sIHRoaXMuZGlyZWN0aW9uKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ29weSB2YWx1ZXMgZnJvbSBhbm90aGVyIHJheVxuICAgICAqIEBwYXJhbSB7Y2xheS5SYXl9IHJheVxuICAgICAqL1xuICAgIGNvcHk6IGZ1bmN0aW9uIChyYXkpIHtcbiAgICAgICAgVmVjdG9yMy5jb3B5KHRoaXMub3JpZ2luLCByYXkub3JpZ2luKTtcbiAgICAgICAgVmVjdG9yMy5jb3B5KHRoaXMuZGlyZWN0aW9uLCByYXkuZGlyZWN0aW9uKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xvbmUgYSBuZXcgcmF5XG4gICAgICogQHJldHVybiB7Y2xheS5SYXl9XG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJheSA9IG5ldyBSYXkoKTtcbiAgICAgICAgcmF5LmNvcHkodGhpcyk7XG4gICAgICAgIHJldHVybiByYXk7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgUmF5O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL1JheS5qc1xuLy8gbW9kdWxlIGlkID0gMzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///38\n");

/***/ }),
/* 39 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_BoundingBox__ = __webpack_require__(9);\n\n\n\n/**\n * @constructor clay.geometry.Plane\n * @extends clay.Geometry\n * @param {Object} [opt]\n * @param {number} [opt.widthSegments]\n * @param {number} [opt.heightSegments]\n */\nvar Plane = __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */].extend(\n/** @lends clay.geometry.Plane# */\n{\n    dynamic: false,\n    /**\n     * @type {number}\n     */\n    widthSegments: 1,\n    /**\n     * @type {number}\n     */\n    heightSegments: 1\n}, function() {\n    this.build();\n},\n/** @lends clay.geometry.Plane.prototype */\n{\n    /**\n     * Build plane geometry\n     */\n    build: function() {\n        var heightSegments = this.heightSegments;\n        var widthSegments = this.widthSegments;\n        var attributes = this.attributes;\n        var positions = [];\n        var texcoords = [];\n        var normals = [];\n        var faces = [];\n\n        for (var y = 0; y <= heightSegments; y++) {\n            var t = y / heightSegments;\n            for (var x = 0; x <= widthSegments; x++) {\n                var s = x / widthSegments;\n\n                positions.push([2 * s - 1, 2 * t - 1, 0]);\n                if (texcoords) {\n                    texcoords.push([s, t]);\n                }\n                if (normals) {\n                    normals.push([0, 0, 1]);\n                }\n                if (x < widthSegments && y < heightSegments) {\n                    var i = x + y * (widthSegments + 1);\n                    faces.push([i, i + 1, i + widthSegments + 1]);\n                    faces.push([i + widthSegments + 1, i + 1, i + widthSegments + 2]);\n                }\n            }\n        }\n\n        attributes.position.fromArray(positions);\n        attributes.texcoord0.fromArray(texcoords);\n        attributes.normal.fromArray(normals);\n\n        this.initIndicesFromArray(faces);\n\n        this.boundingBox = new __WEBPACK_IMPORTED_MODULE_1__math_BoundingBox__[\"a\" /* default */]();\n        this.boundingBox.min.set(-1, -1, 0);\n        this.boundingBox.max.set(1, 1, 0);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Plane);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nZW9tZXRyeS9QbGFuZS5qcz9lODg3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHZW9tZXRyeSBmcm9tICcuLi9HZW9tZXRyeSc7XG5pbXBvcnQgQm91bmRpbmdCb3ggZnJvbSAnLi4vbWF0aC9Cb3VuZGluZ0JveCc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuZ2VvbWV0cnkuUGxhbmVcbiAqIEBleHRlbmRzIGNsYXkuR2VvbWV0cnlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0XVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHQud2lkdGhTZWdtZW50c11cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LmhlaWdodFNlZ21lbnRzXVxuICovXG52YXIgUGxhbmUgPSBHZW9tZXRyeS5leHRlbmQoXG4vKiogQGxlbmRzIGNsYXkuZ2VvbWV0cnkuUGxhbmUjICovXG57XG4gICAgZHluYW1pYzogZmFsc2UsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB3aWR0aFNlZ21lbnRzOiAxLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgaGVpZ2h0U2VnbWVudHM6IDFcbn0sIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuYnVpbGQoKTtcbn0sXG4vKiogQGxlbmRzIGNsYXkuZ2VvbWV0cnkuUGxhbmUucHJvdG90eXBlICovXG57XG4gICAgLyoqXG4gICAgICogQnVpbGQgcGxhbmUgZ2VvbWV0cnlcbiAgICAgKi9cbiAgICBidWlsZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBoZWlnaHRTZWdtZW50cyA9IHRoaXMuaGVpZ2h0U2VnbWVudHM7XG4gICAgICAgIHZhciB3aWR0aFNlZ21lbnRzID0gdGhpcy53aWR0aFNlZ21lbnRzO1xuICAgICAgICB2YXIgYXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcztcbiAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFtdO1xuICAgICAgICB2YXIgdGV4Y29vcmRzID0gW107XG4gICAgICAgIHZhciBub3JtYWxzID0gW107XG4gICAgICAgIHZhciBmYWNlcyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDw9IGhlaWdodFNlZ21lbnRzOyB5KyspIHtcbiAgICAgICAgICAgIHZhciB0ID0geSAvIGhlaWdodFNlZ21lbnRzO1xuICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPD0gd2lkdGhTZWdtZW50czsgeCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSB4IC8gd2lkdGhTZWdtZW50cztcblxuICAgICAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKFsyICogcyAtIDEsIDIgKiB0IC0gMSwgMF0pO1xuICAgICAgICAgICAgICAgIGlmICh0ZXhjb29yZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4Y29vcmRzLnB1c2goW3MsIHRdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vcm1hbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFscy5wdXNoKFswLCAwLCAxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh4IDwgd2lkdGhTZWdtZW50cyAmJiB5IDwgaGVpZ2h0U2VnbWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB4ICsgeSAqICh3aWR0aFNlZ21lbnRzICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGZhY2VzLnB1c2goW2ksIGkgKyAxLCBpICsgd2lkdGhTZWdtZW50cyArIDFdKTtcbiAgICAgICAgICAgICAgICAgICAgZmFjZXMucHVzaChbaSArIHdpZHRoU2VnbWVudHMgKyAxLCBpICsgMSwgaSArIHdpZHRoU2VnbWVudHMgKyAyXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYXR0cmlidXRlcy5wb3NpdGlvbi5mcm9tQXJyYXkocG9zaXRpb25zKTtcbiAgICAgICAgYXR0cmlidXRlcy50ZXhjb29yZDAuZnJvbUFycmF5KHRleGNvb3Jkcyk7XG4gICAgICAgIGF0dHJpYnV0ZXMubm9ybWFsLmZyb21BcnJheShub3JtYWxzKTtcblxuICAgICAgICB0aGlzLmluaXRJbmRpY2VzRnJvbUFycmF5KGZhY2VzKTtcblxuICAgICAgICB0aGlzLmJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3gubWluLnNldCgtMSwgLTEsIDApO1xuICAgICAgICB0aGlzLmJvdW5kaW5nQm94Lm1heC5zZXQoMSwgMSwgMCk7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFBsYW5lO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nZW9tZXRyeS9QbGFuZS5qc1xuLy8gbW9kdWxlIGlkID0gMzlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///39\n");

/***/ }),
/* 40 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n\n\n\n/**\n * @constructor\n * @alias clay.Renderable\n * @extends clay.Node\n */\nvar Renderable = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].extend(/** @lends clay.Renderable# */ {\n    /**\n     * @type {clay.Material}\n     */\n    material: null,\n\n    /**\n     * @type {clay.Geometry}\n     */\n    geometry: null,\n\n    /**\n     * @type {number}\n     */\n    mode: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].TRIANGLES,\n\n    _renderInfo: null\n},\n/** @lends clay.Renderable.prototype */\n{\n\n    __program: null,\n\n    /**\n     * Group of received light.\n     */\n    lightGroup: 0,\n    /**\n     * Render order, Nodes with smaller value renders before nodes with larger values.\n     * @type {Number}\n     */\n    renderOrder: 0,\n\n    /**\n     * Used when mode is LINES, LINE_STRIP or LINE_LOOP\n     * @type {number}\n     */\n    // lineWidth: 1,\n\n    /**\n     * If enable culling\n     * @type {boolean}\n     */\n    culling: true,\n    /**\n     * Specify which side of polygon will be culled.\n     * Possible values:\n     *  + {@link clay.Renderable.BACK}\n     *  + {@link clay.Renderable.FRONT}\n     *  + {@link clay.Renderable.FRONT_AND_BACK}\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/cullFace\n     * @type {number}\n     */\n    cullFace: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].BACK,\n    /**\n     * Specify which side is front face.\n     * Possible values:\n     *  + {@link clay.Renderable.CW}\n     *  + {@link clay.Renderable.CCW}\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/frontFace\n     * @type {number}\n     */\n    frontFace: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CCW,\n\n    /**\n     * If enable software frustum culling\n     * @type {boolean}\n     */\n    frustumCulling: true,\n    /**\n     * @type {boolean}\n     */\n    receiveShadow: true,\n    /**\n     * @type {boolean}\n     */\n    castShadow: true,\n    /**\n     * @type {boolean}\n     */\n    ignorePicking: false,\n    /**\n     * @type {boolean}\n     */\n    ignorePreZ: false,\n\n    /**\n     * @type {boolean}\n     */\n    ignoreGBuffer: false,\n\n    /**\n     * @return {boolean}\n     */\n    isRenderable: function() {\n        // TODO Shader ?\n        return this.geometry && this.material && this.material.shader && !this.invisible\n            && this.geometry.vertexCount > 0;\n    },\n\n    /**\n     * Before render hook\n     * @type {Function}\n     */\n    beforeRender: function (_gl) {},\n\n    /**\n     * Before render hook\n     * @type {Function}\n     */\n    afterRender: function (_gl, renderStat) {},\n\n    getBoundingBox: function (filter, out) {\n        out = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].prototype.getBoundingBox.call(this, filter, out);\n        if (this.geometry && this.geometry.boundingBox) {\n            out.union(this.geometry.boundingBox);\n        }\n\n        return out;\n    },\n\n    /**\n     * Clone a new renderable\n     * @function\n     * @return {clay.Renderable}\n     */\n    clone: (function() {\n        var properties = [\n            'castShadow', 'receiveShadow',\n            'mode', 'culling', 'cullFace', 'frontFace',\n            'frustumCulling',\n            'renderOrder', 'lineWidth',\n            'ignorePicking', 'ignorePreZ', 'ignoreGBuffer'\n        ];\n        return function() {\n            var renderable = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].prototype.clone.call(this);\n\n            renderable.geometry = this.geometry;\n            renderable.material = this.material;\n\n            for (var i = 0; i < properties.length; i++) {\n                var name = properties[i];\n                // Try not to overwrite the prototype property\n                if (renderable[name] !== this[name]) {\n                    renderable[name] = this[name];\n                }\n            }\n\n            return renderable;\n        };\n    })()\n});\n\n/**\n * @type {number}\n */\nRenderable.POINTS = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].POINTS;\n/**\n * @type {number}\n */\nRenderable.LINES = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINES;\n/**\n * @type {number}\n */\nRenderable.LINE_LOOP = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINE_LOOP;\n/**\n * @type {number}\n */\nRenderable.LINE_STRIP = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINE_STRIP;\n/**\n * @type {number}\n */\nRenderable.TRIANGLES = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].TRIANGLES;\n/**\n * @type {number}\n */\nRenderable.TRIANGLE_STRIP = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].TRIANGLE_STRIP;\n/**\n * @type {number}\n */\nRenderable.TRIANGLE_FAN = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].TRIANGLE_FAN;\n/**\n * @type {number}\n */\nRenderable.BACK = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].BACK;\n/**\n * @type {number}\n */\nRenderable.FRONT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].FRONT;\n/**\n * @type {number}\n */\nRenderable.FRONT_AND_BACK = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].FRONT_AND_BACK;\n/**\n * @type {number}\n */\nRenderable.CW = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CW;\n/**\n * @type {number}\n */\nRenderable.CCW = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CCW;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Renderable);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9SZW5kZXJhYmxlLmpzPzMyZWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5vZGUgZnJvbSAnLi9Ob2RlJztcbmltcG9ydCBnbGVudW0gZnJvbSAnLi9jb3JlL2dsZW51bSc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5SZW5kZXJhYmxlXG4gKiBAZXh0ZW5kcyBjbGF5Lk5vZGVcbiAqL1xudmFyIFJlbmRlcmFibGUgPSBOb2RlLmV4dGVuZCgvKiogQGxlbmRzIGNsYXkuUmVuZGVyYWJsZSMgKi8ge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5Lk1hdGVyaWFsfVxuICAgICAqL1xuICAgIG1hdGVyaWFsOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuR2VvbWV0cnl9XG4gICAgICovXG4gICAgZ2VvbWV0cnk6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIG1vZGU6IGdsZW51bS5UUklBTkdMRVMsXG5cbiAgICBfcmVuZGVySW5mbzogbnVsbFxufSxcbi8qKiBAbGVuZHMgY2xheS5SZW5kZXJhYmxlLnByb3RvdHlwZSAqL1xue1xuXG4gICAgX19wcm9ncmFtOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogR3JvdXAgb2YgcmVjZWl2ZWQgbGlnaHQuXG4gICAgICovXG4gICAgbGlnaHRHcm91cDogMCxcbiAgICAvKipcbiAgICAgKiBSZW5kZXIgb3JkZXIsIE5vZGVzIHdpdGggc21hbGxlciB2YWx1ZSByZW5kZXJzIGJlZm9yZSBub2RlcyB3aXRoIGxhcmdlciB2YWx1ZXMuXG4gICAgICogQHR5cGUge051bWJlcn1cbiAgICAgKi9cbiAgICByZW5kZXJPcmRlcjogMCxcblxuICAgIC8qKlxuICAgICAqIFVzZWQgd2hlbiBtb2RlIGlzIExJTkVTLCBMSU5FX1NUUklQIG9yIExJTkVfTE9PUFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgLy8gbGluZVdpZHRoOiAxLFxuXG4gICAgLyoqXG4gICAgICogSWYgZW5hYmxlIGN1bGxpbmdcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBjdWxsaW5nOiB0cnVlLFxuICAgIC8qKlxuICAgICAqIFNwZWNpZnkgd2hpY2ggc2lkZSBvZiBwb2x5Z29uIHdpbGwgYmUgY3VsbGVkLlxuICAgICAqIFBvc3NpYmxlIHZhbHVlczpcbiAgICAgKiAgKyB7QGxpbmsgY2xheS5SZW5kZXJhYmxlLkJBQ0t9XG4gICAgICogICsge0BsaW5rIGNsYXkuUmVuZGVyYWJsZS5GUk9OVH1cbiAgICAgKiAgKyB7QGxpbmsgY2xheS5SZW5kZXJhYmxlLkZST05UX0FORF9CQUNLfVxuICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYkdMUmVuZGVyaW5nQ29udGV4dC9jdWxsRmFjZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgY3VsbEZhY2U6IGdsZW51bS5CQUNLLFxuICAgIC8qKlxuICAgICAqIFNwZWNpZnkgd2hpY2ggc2lkZSBpcyBmcm9udCBmYWNlLlxuICAgICAqIFBvc3NpYmxlIHZhbHVlczpcbiAgICAgKiAgKyB7QGxpbmsgY2xheS5SZW5kZXJhYmxlLkNXfVxuICAgICAqICArIHtAbGluayBjbGF5LlJlbmRlcmFibGUuQ0NXfVxuICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYkdMUmVuZGVyaW5nQ29udGV4dC9mcm9udEZhY2VcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGZyb250RmFjZTogZ2xlbnVtLkNDVyxcblxuICAgIC8qKlxuICAgICAqIElmIGVuYWJsZSBzb2Z0d2FyZSBmcnVzdHVtIGN1bGxpbmdcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBmcnVzdHVtQ3VsbGluZzogdHJ1ZSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICByZWNlaXZlU2hhZG93OiB0cnVlLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGNhc3RTaGFkb3c6IHRydWUsXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgaWdub3JlUGlja2luZzogZmFsc2UsXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgaWdub3JlUHJlWjogZmFsc2UsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpZ25vcmVHQnVmZmVyOiBmYWxzZSxcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgaXNSZW5kZXJhYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gVE9ETyBTaGFkZXIgP1xuICAgICAgICByZXR1cm4gdGhpcy5nZW9tZXRyeSAmJiB0aGlzLm1hdGVyaWFsICYmIHRoaXMubWF0ZXJpYWwuc2hhZGVyICYmICF0aGlzLmludmlzaWJsZVxuICAgICAgICAgICAgJiYgdGhpcy5nZW9tZXRyeS52ZXJ0ZXhDb3VudCA+IDA7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEJlZm9yZSByZW5kZXIgaG9va1xuICAgICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICBiZWZvcmVSZW5kZXI6IGZ1bmN0aW9uIChfZ2wpIHt9LFxuXG4gICAgLyoqXG4gICAgICogQmVmb3JlIHJlbmRlciBob29rXG4gICAgICogQHR5cGUge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIGFmdGVyUmVuZGVyOiBmdW5jdGlvbiAoX2dsLCByZW5kZXJTdGF0KSB7fSxcblxuICAgIGdldEJvdW5kaW5nQm94OiBmdW5jdGlvbiAoZmlsdGVyLCBvdXQpIHtcbiAgICAgICAgb3V0ID0gTm9kZS5wcm90b3R5cGUuZ2V0Qm91bmRpbmdCb3guY2FsbCh0aGlzLCBmaWx0ZXIsIG91dCk7XG4gICAgICAgIGlmICh0aGlzLmdlb21ldHJ5ICYmIHRoaXMuZ2VvbWV0cnkuYm91bmRpbmdCb3gpIHtcbiAgICAgICAgICAgIG91dC51bmlvbih0aGlzLmdlb21ldHJ5LmJvdW5kaW5nQm94KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENsb25lIGEgbmV3IHJlbmRlcmFibGVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcmV0dXJuIHtjbGF5LlJlbmRlcmFibGV9XG4gICAgICovXG4gICAgY2xvbmU6IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBbXG4gICAgICAgICAgICAnY2FzdFNoYWRvdycsICdyZWNlaXZlU2hhZG93JyxcbiAgICAgICAgICAgICdtb2RlJywgJ2N1bGxpbmcnLCAnY3VsbEZhY2UnLCAnZnJvbnRGYWNlJyxcbiAgICAgICAgICAgICdmcnVzdHVtQ3VsbGluZycsXG4gICAgICAgICAgICAncmVuZGVyT3JkZXInLCAnbGluZVdpZHRoJyxcbiAgICAgICAgICAgICdpZ25vcmVQaWNraW5nJywgJ2lnbm9yZVByZVonLCAnaWdub3JlR0J1ZmZlcidcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHJlbmRlcmFibGUgPSBOb2RlLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpO1xuXG4gICAgICAgICAgICByZW5kZXJhYmxlLmdlb21ldHJ5ID0gdGhpcy5nZW9tZXRyeTtcbiAgICAgICAgICAgIHJlbmRlcmFibGUubWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHByb3BlcnRpZXNbaV07XG4gICAgICAgICAgICAgICAgLy8gVHJ5IG5vdCB0byBvdmVyd3JpdGUgdGhlIHByb3RvdHlwZSBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgIGlmIChyZW5kZXJhYmxlW25hbWVdICE9PSB0aGlzW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmFibGVbbmFtZV0gPSB0aGlzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmFibGU7XG4gICAgICAgIH07XG4gICAgfSkoKVxufSk7XG5cbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuUmVuZGVyYWJsZS5QT0lOVFMgPSBnbGVudW0uUE9JTlRTO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5SZW5kZXJhYmxlLkxJTkVTID0gZ2xlbnVtLkxJTkVTO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5SZW5kZXJhYmxlLkxJTkVfTE9PUCA9IGdsZW51bS5MSU5FX0xPT1A7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblJlbmRlcmFibGUuTElORV9TVFJJUCA9IGdsZW51bS5MSU5FX1NUUklQO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5SZW5kZXJhYmxlLlRSSUFOR0xFUyA9IGdsZW51bS5UUklBTkdMRVM7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblJlbmRlcmFibGUuVFJJQU5HTEVfU1RSSVAgPSBnbGVudW0uVFJJQU5HTEVfU1RSSVA7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblJlbmRlcmFibGUuVFJJQU5HTEVfRkFOID0gZ2xlbnVtLlRSSUFOR0xFX0ZBTjtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuUmVuZGVyYWJsZS5CQUNLID0gZ2xlbnVtLkJBQ0s7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblJlbmRlcmFibGUuRlJPTlQgPSBnbGVudW0uRlJPTlQ7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblJlbmRlcmFibGUuRlJPTlRfQU5EX0JBQ0sgPSBnbGVudW0uRlJPTlRfQU5EX0JBQ0s7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblJlbmRlcmFibGUuQ1cgPSBnbGVudW0uQ1c7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblJlbmRlcmFibGUuQ0NXID0gZ2xlbnVtLkNDVztcblxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyYWJsZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvUmVuZGVyYWJsZS5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///40\n");

/***/ }),
/* 41 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__geometry_Cube__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__shader_source_skybox_glsl_js__ = __webpack_require__(88);\n// TODO Should not derived from mesh?\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_2__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_7__shader_source_skybox_glsl_js__[\"a\" /* default */]);\n/**\n * @constructor clay.plugin.Skybox\n *\n * @example\n *     var skyTex = new clay.TextureCube();\n *     skyTex.load({\n *         'px': 'assets/textures/sky/px.jpg',\n *         'nx': 'assets/textures/sky/nx.jpg'\n *         'py': 'assets/textures/sky/py.jpg'\n *         'ny': 'assets/textures/sky/ny.jpg'\n *         'pz': 'assets/textures/sky/pz.jpg'\n *         'nz': 'assets/textures/sky/nz.jpg'\n *     });\n *     var skybox = new clay.plugin.Skybox({\n *         scene: scene\n *     });\n *     skybox.material.set('environmentMap', skyTex);\n */\nvar Skybox = __WEBPACK_IMPORTED_MODULE_0__Mesh__[\"a\" /* default */].extend(function () {\n\n    var skyboxShader = new __WEBPACK_IMPORTED_MODULE_2__Shader__[\"a\" /* default */]({\n        vertex: __WEBPACK_IMPORTED_MODULE_2__Shader__[\"a\" /* default */].source('clay.skybox.vertex'),\n        fragment: __WEBPACK_IMPORTED_MODULE_2__Shader__[\"a\" /* default */].source('clay.skybox.fragment')\n    });\n    var material = new __WEBPACK_IMPORTED_MODULE_3__Material__[\"a\" /* default */]({\n        shader: skyboxShader,\n        depthMask: false\n    });\n\n    return {\n        /**\n         * @type {clay.Scene}\n         * @memberOf clay.plugin.Skybox.prototype\n         */\n        scene: null,\n\n        geometry: new __WEBPACK_IMPORTED_MODULE_1__geometry_Cube__[\"a\" /* default */](),\n\n        material: material,\n\n        environmentMap: null,\n\n        culling: false,\n\n        _dummyCamera: new __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__[\"a\" /* default */]()\n    };\n}, function () {\n    var scene = this.scene;\n    if (scene) {\n        this.attachScene(scene);\n    }\n    if (this.environmentMap) {\n        this.setEnvironmentMap(this.environmentMap);\n    }\n}, /** @lends clay.plugin.Skybox# */ {\n    /**\n     * Attach the skybox to the scene\n     * @param  {clay.Scene} scene\n     */\n    attachScene: function (scene) {\n        if (this.scene) {\n            this.detachScene();\n        }\n        scene.skybox = this;\n\n        this.scene = scene;\n        scene.on('beforerender', this._beforeRenderScene, this);\n    },\n    /**\n     * Detach from scene\n     */\n    detachScene: function () {\n        if (this.scene) {\n            this.scene.off('beforerender', this._beforeRenderScene);\n            this.scene.skybox = null;\n        }\n        this.scene = null;\n    },\n\n    /**\n     * Dispose skybox\n     * @param  {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n        this.detachScene();\n        this.geometry.dispose(renderer);\n    },\n    /**\n     * Set environment map\n     * @param {clay.TextureCube} envMap\n     */\n    setEnvironmentMap: function (envMap) {\n        if (envMap.textureType === 'texture2D') {\n            this.material.define('EQUIRECTANGULAR');\n            // LINEAR filter can remove the artifacts in pole\n            envMap.minFilter = __WEBPACK_IMPORTED_MODULE_4__Texture__[\"a\" /* default */].LINEAR;\n        }\n        else {\n            this.material.undefine('EQUIRECTANGULAR');\n        }\n        this.material.set('environmentMap', envMap);\n    },\n    /**\n     * Get environment map\n     * @return {clay.TextureCube}\n     */\n    getEnvironmentMap: function () {\n        return this.material.get('environmentMap');\n    },\n\n    _beforeRenderScene: function(renderer, scene, camera) {\n        this.renderSkybox(renderer, camera);\n    },\n\n    renderSkybox: function (renderer, camera) {\n        var dummyCamera = this._dummyCamera;\n        dummyCamera.aspect = renderer.getViewportAspect();\n        dummyCamera.fov = camera.fov || 50;\n        dummyCamera.updateProjectionMatrix();\n        __WEBPACK_IMPORTED_MODULE_6__math_Matrix4__[\"a\" /* default */].invert(dummyCamera.invProjectionMatrix, dummyCamera.projectionMatrix);\n        dummyCamera.worldTransform.copy(camera.worldTransform);\n        dummyCamera.viewMatrix.copy(camera.viewMatrix);\n\n        this.position.copy(camera.getWorldPosition());\n        this.update();\n\n        // Don't remember to disable blend\n        renderer.gl.disable(renderer.gl.BLEND);\n        if (this.material.get('lod') > 0) {\n            this.material.define('fragment', 'LOD');\n        }\n        else {\n            this.material.undefine('fragment', 'LOD');\n        }\n        renderer.renderPass([this], dummyCamera);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Skybox);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9wbHVnaW4vU2t5Ym94LmpzPzMzOGQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVE9ETyBTaG91bGQgbm90IGRlcml2ZWQgZnJvbSBtZXNoP1xuaW1wb3J0IE1lc2ggZnJvbSAnLi4vTWVzaCc7XG5pbXBvcnQgQ3ViZUdlb21ldHJ5IGZyb20gJy4uL2dlb21ldHJ5L0N1YmUnO1xuaW1wb3J0IFNoYWRlciBmcm9tICcuLi9TaGFkZXInO1xuaW1wb3J0IE1hdGVyaWFsIGZyb20gJy4uL01hdGVyaWFsJztcbmltcG9ydCBUZXh0dXJlIGZyb20gJy4uL1RleHR1cmUnO1xuaW1wb3J0IFBlcnNwZWN0aXZlQ2FtZXJhIGZyb20gJy4uL2NhbWVyYS9QZXJzcGVjdGl2ZSc7XG5pbXBvcnQgTWF0cml4NCBmcm9tICcuLi9tYXRoL01hdHJpeDQnO1xuXG5pbXBvcnQgc2t5Ym94RXNzbCBmcm9tICcuLi9zaGFkZXIvc291cmNlL3NreWJveC5nbHNsLmpzJztcblNoYWRlci5pbXBvcnQoc2t5Ym94RXNzbCk7XG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LnBsdWdpbi5Ta3lib3hcbiAqXG4gKiBAZXhhbXBsZVxuICogICAgIHZhciBza3lUZXggPSBuZXcgY2xheS5UZXh0dXJlQ3ViZSgpO1xuICogICAgIHNreVRleC5sb2FkKHtcbiAqICAgICAgICAgJ3B4JzogJ2Fzc2V0cy90ZXh0dXJlcy9za3kvcHguanBnJyxcbiAqICAgICAgICAgJ254JzogJ2Fzc2V0cy90ZXh0dXJlcy9za3kvbnguanBnJ1xuICogICAgICAgICAncHknOiAnYXNzZXRzL3RleHR1cmVzL3NreS9weS5qcGcnXG4gKiAgICAgICAgICdueSc6ICdhc3NldHMvdGV4dHVyZXMvc2t5L255LmpwZydcbiAqICAgICAgICAgJ3B6JzogJ2Fzc2V0cy90ZXh0dXJlcy9za3kvcHouanBnJ1xuICogICAgICAgICAnbnonOiAnYXNzZXRzL3RleHR1cmVzL3NreS9uei5qcGcnXG4gKiAgICAgfSk7XG4gKiAgICAgdmFyIHNreWJveCA9IG5ldyBjbGF5LnBsdWdpbi5Ta3lib3goe1xuICogICAgICAgICBzY2VuZTogc2NlbmVcbiAqICAgICB9KTtcbiAqICAgICBza3lib3gubWF0ZXJpYWwuc2V0KCdlbnZpcm9ubWVudE1hcCcsIHNreVRleCk7XG4gKi9cbnZhciBTa3lib3ggPSBNZXNoLmV4dGVuZChmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgc2t5Ym94U2hhZGVyID0gbmV3IFNoYWRlcih7XG4gICAgICAgIHZlcnRleDogU2hhZGVyLnNvdXJjZSgnY2xheS5za3lib3gudmVydGV4JyksXG4gICAgICAgIGZyYWdtZW50OiBTaGFkZXIuc291cmNlKCdjbGF5LnNreWJveC5mcmFnbWVudCcpXG4gICAgfSk7XG4gICAgdmFyIG1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgc2hhZGVyOiBza3lib3hTaGFkZXIsXG4gICAgICAgIGRlcHRoTWFzazogZmFsc2VcbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5TY2VuZX1cbiAgICAgICAgICogQG1lbWJlck9mIGNsYXkucGx1Z2luLlNreWJveC5wcm90b3R5cGVcbiAgICAgICAgICovXG4gICAgICAgIHNjZW5lOiBudWxsLFxuXG4gICAgICAgIGdlb21ldHJ5OiBuZXcgQ3ViZUdlb21ldHJ5KCksXG5cbiAgICAgICAgbWF0ZXJpYWw6IG1hdGVyaWFsLFxuXG4gICAgICAgIGVudmlyb25tZW50TWFwOiBudWxsLFxuXG4gICAgICAgIGN1bGxpbmc6IGZhbHNlLFxuXG4gICAgICAgIF9kdW1teUNhbWVyYTogbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKClcbiAgICB9O1xufSwgZnVuY3Rpb24gKCkge1xuICAgIHZhciBzY2VuZSA9IHRoaXMuc2NlbmU7XG4gICAgaWYgKHNjZW5lKSB7XG4gICAgICAgIHRoaXMuYXR0YWNoU2NlbmUoc2NlbmUpO1xuICAgIH1cbiAgICBpZiAodGhpcy5lbnZpcm9ubWVudE1hcCkge1xuICAgICAgICB0aGlzLnNldEVudmlyb25tZW50TWFwKHRoaXMuZW52aXJvbm1lbnRNYXApO1xuICAgIH1cbn0sIC8qKiBAbGVuZHMgY2xheS5wbHVnaW4uU2t5Ym94IyAqLyB7XG4gICAgLyoqXG4gICAgICogQXR0YWNoIHRoZSBza3lib3ggdG8gdGhlIHNjZW5lXG4gICAgICogQHBhcmFtICB7Y2xheS5TY2VuZX0gc2NlbmVcbiAgICAgKi9cbiAgICBhdHRhY2hTY2VuZTogZnVuY3Rpb24gKHNjZW5lKSB7XG4gICAgICAgIGlmICh0aGlzLnNjZW5lKSB7XG4gICAgICAgICAgICB0aGlzLmRldGFjaFNjZW5lKCk7XG4gICAgICAgIH1cbiAgICAgICAgc2NlbmUuc2t5Ym94ID0gdGhpcztcblxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XG4gICAgICAgIHNjZW5lLm9uKCdiZWZvcmVyZW5kZXInLCB0aGlzLl9iZWZvcmVSZW5kZXJTY2VuZSwgdGhpcyk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBEZXRhY2ggZnJvbSBzY2VuZVxuICAgICAqL1xuICAgIGRldGFjaFNjZW5lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNjZW5lKSB7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLm9mZignYmVmb3JlcmVuZGVyJywgdGhpcy5fYmVmb3JlUmVuZGVyU2NlbmUpO1xuICAgICAgICAgICAgdGhpcy5zY2VuZS5za3lib3ggPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2NlbmUgPSBudWxsO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIHNreWJveFxuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICovXG4gICAgZGlzcG9zZTogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMuZGV0YWNoU2NlbmUoKTtcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFNldCBlbnZpcm9ubWVudCBtYXBcbiAgICAgKiBAcGFyYW0ge2NsYXkuVGV4dHVyZUN1YmV9IGVudk1hcFxuICAgICAqL1xuICAgIHNldEVudmlyb25tZW50TWFwOiBmdW5jdGlvbiAoZW52TWFwKSB7XG4gICAgICAgIGlmIChlbnZNYXAudGV4dHVyZVR5cGUgPT09ICd0ZXh0dXJlMkQnKSB7XG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLmRlZmluZSgnRVFVSVJFQ1RBTkdVTEFSJyk7XG4gICAgICAgICAgICAvLyBMSU5FQVIgZmlsdGVyIGNhbiByZW1vdmUgdGhlIGFydGlmYWN0cyBpbiBwb2xlXG4gICAgICAgICAgICBlbnZNYXAubWluRmlsdGVyID0gVGV4dHVyZS5MSU5FQVI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuZGVmaW5lKCdFUVVJUkVDVEFOR1VMQVInKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hdGVyaWFsLnNldCgnZW52aXJvbm1lbnRNYXAnLCBlbnZNYXApO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogR2V0IGVudmlyb25tZW50IG1hcFxuICAgICAqIEByZXR1cm4ge2NsYXkuVGV4dHVyZUN1YmV9XG4gICAgICovXG4gICAgZ2V0RW52aXJvbm1lbnRNYXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0ZXJpYWwuZ2V0KCdlbnZpcm9ubWVudE1hcCcpO1xuICAgIH0sXG5cbiAgICBfYmVmb3JlUmVuZGVyU2NlbmU6IGZ1bmN0aW9uKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKSB7XG4gICAgICAgIHRoaXMucmVuZGVyU2t5Ym94KHJlbmRlcmVyLCBjYW1lcmEpO1xuICAgIH0sXG5cbiAgICByZW5kZXJTa3lib3g6IGZ1bmN0aW9uIChyZW5kZXJlciwgY2FtZXJhKSB7XG4gICAgICAgIHZhciBkdW1teUNhbWVyYSA9IHRoaXMuX2R1bW15Q2FtZXJhO1xuICAgICAgICBkdW1teUNhbWVyYS5hc3BlY3QgPSByZW5kZXJlci5nZXRWaWV3cG9ydEFzcGVjdCgpO1xuICAgICAgICBkdW1teUNhbWVyYS5mb3YgPSBjYW1lcmEuZm92IHx8IDUwO1xuICAgICAgICBkdW1teUNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgICAgIE1hdHJpeDQuaW52ZXJ0KGR1bW15Q2FtZXJhLmludlByb2plY3Rpb25NYXRyaXgsIGR1bW15Q2FtZXJhLnByb2plY3Rpb25NYXRyaXgpO1xuICAgICAgICBkdW1teUNhbWVyYS53b3JsZFRyYW5zZm9ybS5jb3B5KGNhbWVyYS53b3JsZFRyYW5zZm9ybSk7XG4gICAgICAgIGR1bW15Q2FtZXJhLnZpZXdNYXRyaXguY29weShjYW1lcmEudmlld01hdHJpeCk7XG5cbiAgICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KGNhbWVyYS5nZXRXb3JsZFBvc2l0aW9uKCkpO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuXG4gICAgICAgIC8vIERvbid0IHJlbWVtYmVyIHRvIGRpc2FibGUgYmxlbmRcbiAgICAgICAgcmVuZGVyZXIuZ2wuZGlzYWJsZShyZW5kZXJlci5nbC5CTEVORCk7XG4gICAgICAgIGlmICh0aGlzLm1hdGVyaWFsLmdldCgnbG9kJykgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnTE9EJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnVuZGVmaW5lKCdmcmFnbWVudCcsICdMT0QnKTtcbiAgICAgICAgfVxuICAgICAgICByZW5kZXJlci5yZW5kZXJQYXNzKFt0aGlzXSwgZHVtbXlDYW1lcmEpO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBTa3lib3g7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3BsdWdpbi9Ta3lib3guanNcbi8vIG1vZHVsZSBpZCA9IDQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///41\n");

/***/ }),
/* 42 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__FrameBuffer__ = __webpack_require__(18);\n\n\n\n\n\nvar targets = ['px', 'nx', 'py', 'ny', 'pz', 'nz'];\n\n/**\n * Pass rendering scene to a environment cube map\n *\n * @constructor clay.prePass.EnvironmentMap\n * @extends clay.core.Base\n * @example\n *     // Example of car reflection\n *     var envMap = new clay.TextureCube({\n *         width: 256,\n *         height: 256\n *     });\n *     var envPass = new clay.prePass.EnvironmentMap({\n *         position: car.position,\n *         texture: envMap\n *     });\n *     var carBody = car.getChildByName('body');\n *     carBody.material.enableTexture('environmentMap');\n *     carBody.material.set('environmentMap', envMap);\n *     ...\n *     animation.on('frame', function(frameTime) {\n *         envPass.render(renderer, scene);\n *         renderer.render(scene, camera);\n *     });\n */\nvar EnvironmentMapPass = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function() {\n    var ret = /** @lends clay.prePass.EnvironmentMap# */ {\n        /**\n         * Camera position\n         * @type {clay.Vector3}\n         * @memberOf clay.prePass.EnvironmentMap#\n         */\n        position: new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */](),\n        /**\n         * Camera far plane\n         * @type {number}\n         * @memberOf clay.prePass.EnvironmentMap#\n         */\n        far: 1000,\n        /**\n         * Camera near plane\n         * @type {number}\n         * @memberOf clay.prePass.EnvironmentMap#\n         */\n        near: 0.1,\n        /**\n         * Environment cube map\n         * @type {clay.TextureCube}\n         * @memberOf clay.prePass.EnvironmentMap#\n         */\n        texture: null,\n\n        /**\n         * Used if you wan't have shadow in environment map\n         * @type {clay.prePass.ShadowMap}\n         */\n        shadowMapPass: null,\n    };\n    var cameras = ret._cameras = {\n        px: new __WEBPACK_IMPORTED_MODULE_2__camera_Perspective__[\"a\" /* default */]({ fov: 90 }),\n        nx: new __WEBPACK_IMPORTED_MODULE_2__camera_Perspective__[\"a\" /* default */]({ fov: 90 }),\n        py: new __WEBPACK_IMPORTED_MODULE_2__camera_Perspective__[\"a\" /* default */]({ fov: 90 }),\n        ny: new __WEBPACK_IMPORTED_MODULE_2__camera_Perspective__[\"a\" /* default */]({ fov: 90 }),\n        pz: new __WEBPACK_IMPORTED_MODULE_2__camera_Perspective__[\"a\" /* default */]({ fov: 90 }),\n        nz: new __WEBPACK_IMPORTED_MODULE_2__camera_Perspective__[\"a\" /* default */]({ fov: 90 })\n    };\n    cameras.px.lookAt(__WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].POSITIVE_X, __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n    cameras.nx.lookAt(__WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_X, __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n    cameras.py.lookAt(__WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].POSITIVE_Y, __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].POSITIVE_Z);\n    cameras.ny.lookAt(__WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_Y, __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_Z);\n    cameras.pz.lookAt(__WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].POSITIVE_Z, __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n    cameras.nz.lookAt(__WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_Z, __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n\n    // FIXME In windows, use one framebuffer only renders one side of cubemap\n    ret._frameBuffer = new __WEBPACK_IMPORTED_MODULE_3__FrameBuffer__[\"a\" /* default */]();\n\n    return ret;\n},  /** @lends clay.prePass.EnvironmentMap# */ {\n    /**\n     * @param  {string} target\n     * @return  {clay.Camera}\n     */\n    getCamera: function (target) {\n        return this._cameras[target];\n    },\n    /**\n     * @param  {clay.Renderer} renderer\n     * @param  {clay.Scene} scene\n     * @param  {boolean} [notUpdateScene=false]\n     */\n    render: function(renderer, scene, notUpdateScene) {\n        var _gl = renderer.gl;\n        if (!notUpdateScene) {\n            scene.update();\n        }\n        // Tweak fov\n        // http://the-witness.net/news/2012/02/seamless-cube-map-filtering/\n        var n = this.texture.width;\n        var fov = 2 * Math.atan(n / (n - 0.5)) / Math.PI * 180;\n\n        for (var i = 0; i < 6; i++) {\n            var target = targets[i];\n            var camera = this._cameras[target];\n            __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].copy(camera.position, this.position);\n\n            camera.far = this.far;\n            camera.near = this.near;\n            camera.fov = fov;\n\n            if (this.shadowMapPass) {\n                camera.update();\n\n                // update boundingBoxLastFrame\n                var bbox = scene.getBoundingBox();\n                bbox.applyTransform(camera.viewMatrix);\n                scene.viewBoundingBoxLastFrame.copy(bbox);\n\n                this.shadowMapPass.render(renderer, scene, camera, true);\n            }\n            this._frameBuffer.attach(\n                this.texture, _gl.COLOR_ATTACHMENT0,\n                _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i\n            );\n            this._frameBuffer.bind(renderer);\n            renderer.render(scene, camera, true);\n            this._frameBuffer.unbind(renderer);\n        }\n    },\n    /**\n     * @param {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n        this._frameBuffer.dispose(renderer);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (EnvironmentMapPass);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9wcmVQYXNzL0Vudmlyb25tZW50TWFwLmpzP2JiOGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi4vY29yZS9CYXNlJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4uL21hdGgvVmVjdG9yMyc7XG5pbXBvcnQgUGVyc3BlY3RpdmVDYW1lcmEgZnJvbSAnLi4vY2FtZXJhL1BlcnNwZWN0aXZlJztcbmltcG9ydCBGcmFtZUJ1ZmZlciBmcm9tICcuLi9GcmFtZUJ1ZmZlcic7XG5cbnZhciB0YXJnZXRzID0gWydweCcsICdueCcsICdweScsICdueScsICdweicsICdueiddO1xuXG4vKipcbiAqIFBhc3MgcmVuZGVyaW5nIHNjZW5lIHRvIGEgZW52aXJvbm1lbnQgY3ViZSBtYXBcbiAqXG4gKiBAY29uc3RydWN0b3IgY2xheS5wcmVQYXNzLkVudmlyb25tZW50TWFwXG4gKiBAZXh0ZW5kcyBjbGF5LmNvcmUuQmFzZVxuICogQGV4YW1wbGVcbiAqICAgICAvLyBFeGFtcGxlIG9mIGNhciByZWZsZWN0aW9uXG4gKiAgICAgdmFyIGVudk1hcCA9IG5ldyBjbGF5LlRleHR1cmVDdWJlKHtcbiAqICAgICAgICAgd2lkdGg6IDI1NixcbiAqICAgICAgICAgaGVpZ2h0OiAyNTZcbiAqICAgICB9KTtcbiAqICAgICB2YXIgZW52UGFzcyA9IG5ldyBjbGF5LnByZVBhc3MuRW52aXJvbm1lbnRNYXAoe1xuICogICAgICAgICBwb3NpdGlvbjogY2FyLnBvc2l0aW9uLFxuICogICAgICAgICB0ZXh0dXJlOiBlbnZNYXBcbiAqICAgICB9KTtcbiAqICAgICB2YXIgY2FyQm9keSA9IGNhci5nZXRDaGlsZEJ5TmFtZSgnYm9keScpO1xuICogICAgIGNhckJvZHkubWF0ZXJpYWwuZW5hYmxlVGV4dHVyZSgnZW52aXJvbm1lbnRNYXAnKTtcbiAqICAgICBjYXJCb2R5Lm1hdGVyaWFsLnNldCgnZW52aXJvbm1lbnRNYXAnLCBlbnZNYXApO1xuICogICAgIC4uLlxuICogICAgIGFuaW1hdGlvbi5vbignZnJhbWUnLCBmdW5jdGlvbihmcmFtZVRpbWUpIHtcbiAqICAgICAgICAgZW52UGFzcy5yZW5kZXIocmVuZGVyZXIsIHNjZW5lKTtcbiAqICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICogICAgIH0pO1xuICovXG52YXIgRW52aXJvbm1lbnRNYXBQYXNzID0gQmFzZS5leHRlbmQoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJldCA9IC8qKiBAbGVuZHMgY2xheS5wcmVQYXNzLkVudmlyb25tZW50TWFwIyAqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYW1lcmEgcG9zaXRpb25cbiAgICAgICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgICAgICogQG1lbWJlck9mIGNsYXkucHJlUGFzcy5FbnZpcm9ubWVudE1hcCNcbiAgICAgICAgICovXG4gICAgICAgIHBvc2l0aW9uOiBuZXcgVmVjdG9yMygpLFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FtZXJhIGZhciBwbGFuZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAbWVtYmVyT2YgY2xheS5wcmVQYXNzLkVudmlyb25tZW50TWFwI1xuICAgICAgICAgKi9cbiAgICAgICAgZmFyOiAxMDAwLFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FtZXJhIG5lYXIgcGxhbmVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQG1lbWJlck9mIGNsYXkucHJlUGFzcy5FbnZpcm9ubWVudE1hcCNcbiAgICAgICAgICovXG4gICAgICAgIG5lYXI6IDAuMSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVudmlyb25tZW50IGN1YmUgbWFwXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlRleHR1cmVDdWJlfVxuICAgICAgICAgKiBAbWVtYmVyT2YgY2xheS5wcmVQYXNzLkVudmlyb25tZW50TWFwI1xuICAgICAgICAgKi9cbiAgICAgICAgdGV4dHVyZTogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVXNlZCBpZiB5b3Ugd2FuJ3QgaGF2ZSBzaGFkb3cgaW4gZW52aXJvbm1lbnQgbWFwXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LnByZVBhc3MuU2hhZG93TWFwfVxuICAgICAgICAgKi9cbiAgICAgICAgc2hhZG93TWFwUGFzczogbnVsbCxcbiAgICB9O1xuICAgIHZhciBjYW1lcmFzID0gcmV0Ll9jYW1lcmFzID0ge1xuICAgICAgICBweDogbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKHsgZm92OiA5MCB9KSxcbiAgICAgICAgbng6IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSh7IGZvdjogOTAgfSksXG4gICAgICAgIHB5OiBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoeyBmb3Y6IDkwIH0pLFxuICAgICAgICBueTogbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKHsgZm92OiA5MCB9KSxcbiAgICAgICAgcHo6IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSh7IGZvdjogOTAgfSksXG4gICAgICAgIG56OiBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoeyBmb3Y6IDkwIH0pXG4gICAgfTtcbiAgICBjYW1lcmFzLnB4Lmxvb2tBdChWZWN0b3IzLlBPU0lUSVZFX1gsIFZlY3RvcjMuTkVHQVRJVkVfWSk7XG4gICAgY2FtZXJhcy5ueC5sb29rQXQoVmVjdG9yMy5ORUdBVElWRV9YLCBWZWN0b3IzLk5FR0FUSVZFX1kpO1xuICAgIGNhbWVyYXMucHkubG9va0F0KFZlY3RvcjMuUE9TSVRJVkVfWSwgVmVjdG9yMy5QT1NJVElWRV9aKTtcbiAgICBjYW1lcmFzLm55Lmxvb2tBdChWZWN0b3IzLk5FR0FUSVZFX1ksIFZlY3RvcjMuTkVHQVRJVkVfWik7XG4gICAgY2FtZXJhcy5wei5sb29rQXQoVmVjdG9yMy5QT1NJVElWRV9aLCBWZWN0b3IzLk5FR0FUSVZFX1kpO1xuICAgIGNhbWVyYXMubnoubG9va0F0KFZlY3RvcjMuTkVHQVRJVkVfWiwgVmVjdG9yMy5ORUdBVElWRV9ZKTtcblxuICAgIC8vIEZJWE1FIEluIHdpbmRvd3MsIHVzZSBvbmUgZnJhbWVidWZmZXIgb25seSByZW5kZXJzIG9uZSBzaWRlIG9mIGN1YmVtYXBcbiAgICByZXQuX2ZyYW1lQnVmZmVyID0gbmV3IEZyYW1lQnVmZmVyKCk7XG5cbiAgICByZXR1cm4gcmV0O1xufSwgIC8qKiBAbGVuZHMgY2xheS5wcmVQYXNzLkVudmlyb25tZW50TWFwIyAqLyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSB0YXJnZXRcbiAgICAgKiBAcmV0dXJuICB7Y2xheS5DYW1lcmF9XG4gICAgICovXG4gICAgZ2V0Q2FtZXJhOiBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW1lcmFzW3RhcmdldF07XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqIEBwYXJhbSAge2NsYXkuU2NlbmV9IHNjZW5lXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gW25vdFVwZGF0ZVNjZW5lPWZhbHNlXVxuICAgICAqL1xuICAgIHJlbmRlcjogZnVuY3Rpb24ocmVuZGVyZXIsIHNjZW5lLCBub3RVcGRhdGVTY2VuZSkge1xuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgIGlmICghbm90VXBkYXRlU2NlbmUpIHtcbiAgICAgICAgICAgIHNjZW5lLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFR3ZWFrIGZvdlxuICAgICAgICAvLyBodHRwOi8vdGhlLXdpdG5lc3MubmV0L25ld3MvMjAxMi8wMi9zZWFtbGVzcy1jdWJlLW1hcC1maWx0ZXJpbmcvXG4gICAgICAgIHZhciBuID0gdGhpcy50ZXh0dXJlLndpZHRoO1xuICAgICAgICB2YXIgZm92ID0gMiAqIE1hdGguYXRhbihuIC8gKG4gLSAwLjUpKSAvIE1hdGguUEkgKiAxODA7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA2OyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0YXJnZXRzW2ldO1xuICAgICAgICAgICAgdmFyIGNhbWVyYSA9IHRoaXMuX2NhbWVyYXNbdGFyZ2V0XTtcbiAgICAgICAgICAgIFZlY3RvcjMuY29weShjYW1lcmEucG9zaXRpb24sIHRoaXMucG9zaXRpb24pO1xuXG4gICAgICAgICAgICBjYW1lcmEuZmFyID0gdGhpcy5mYXI7XG4gICAgICAgICAgICBjYW1lcmEubmVhciA9IHRoaXMubmVhcjtcbiAgICAgICAgICAgIGNhbWVyYS5mb3YgPSBmb3Y7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNoYWRvd01hcFBhc3MpIHtcbiAgICAgICAgICAgICAgICBjYW1lcmEudXBkYXRlKCk7XG5cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgYm91bmRpbmdCb3hMYXN0RnJhbWVcbiAgICAgICAgICAgICAgICB2YXIgYmJveCA9IHNjZW5lLmdldEJvdW5kaW5nQm94KCk7XG4gICAgICAgICAgICAgICAgYmJveC5hcHBseVRyYW5zZm9ybShjYW1lcmEudmlld01hdHJpeCk7XG4gICAgICAgICAgICAgICAgc2NlbmUudmlld0JvdW5kaW5nQm94TGFzdEZyYW1lLmNvcHkoYmJveCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd01hcFBhc3MucmVuZGVyKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmF0dGFjaChcbiAgICAgICAgICAgICAgICB0aGlzLnRleHR1cmUsIF9nbC5DT0xPUl9BVFRBQ0hNRU5UMCxcbiAgICAgICAgICAgICAgICBfZ2wuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YICsgaVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEsIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIudW5iaW5kKHJlbmRlcmVyKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqL1xuICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgRW52aXJvbm1lbnRNYXBQYXNzO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9wcmVQYXNzL0Vudmlyb25tZW50TWFwLmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///42\n");

/***/ }),
/* 43 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return a + b * t;\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL251bWJlci5qcz81Mjk1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGEgPSArYSwgYiAtPSBhLCBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGEgKyBiICogdDtcbiAgfTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9udW1iZXIuanNcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///43\n");

/***/ }),
/* 44 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("//  https://github.com/sole/tween.js/blob/master/src/Tween.js\n\n/**\n * @namespace clay.animation.easing\n */\nvar easing = {\n    /**\n     * @alias clay.animation.easing.linear\n     * @param {number} k\n     * @return {number}\n     */\n    linear: function(k) {\n        return k;\n    },\n    /**\n     * @alias clay.animation.easing.quadraticIn\n     * @param {number} k\n     * @return {number}\n     */\n    quadraticIn: function(k) {\n        return k * k;\n    },\n    /**\n     * @alias clay.animation.easing.quadraticOut\n     * @param {number} k\n     * @return {number}\n     */\n    quadraticOut: function(k) {\n        return k * (2 - k);\n    },\n    /**\n     * @alias clay.animation.easing.quadraticInOut\n     * @param {number} k\n     * @return {number}\n     */\n    quadraticInOut: function(k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k;\n        }\n        return - 0.5 * (--k * (k - 2) - 1);\n    },\n    /**\n     * @alias clay.animation.easing.cubicIn\n     * @param {number} k\n     * @return {number}\n     */\n    cubicIn: function(k) {\n        return k * k * k;\n    },\n    /**\n     * @alias clay.animation.easing.cubicOut\n     * @param {number} k\n     * @return {number}\n     */\n    cubicOut: function(k) {\n        return --k * k * k + 1;\n    },\n    /**\n     * @alias clay.animation.easing.cubicInOut\n     * @param {number} k\n     * @return {number}\n     */\n    cubicInOut: function(k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k + 2);\n    },\n    /**\n     * @alias clay.animation.easing.quarticIn\n     * @param {number} k\n     * @return {number}\n     */\n    quarticIn: function(k) {\n        return k * k * k * k;\n    },\n    /**\n     * @alias clay.animation.easing.quarticOut\n     * @param {number} k\n     * @return {number}\n     */\n    quarticOut: function(k) {\n        return 1 - (--k * k * k * k);\n    },\n    /**\n     * @alias clay.animation.easing.quarticInOut\n     * @param {number} k\n     * @return {number}\n     */\n    quarticInOut: function(k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k;\n        }\n        return - 0.5 * ((k -= 2) * k * k * k - 2);\n    },\n    /**\n     * @alias clay.animation.easing.quinticIn\n     * @param {number} k\n     * @return {number}\n     */\n    quinticIn: function(k) {\n        return k * k * k * k * k;\n    },\n    /**\n     * @alias clay.animation.easing.quinticOut\n     * @param {number} k\n     * @return {number}\n     */\n    quinticOut: function(k) {\n        return --k * k * k * k * k + 1;\n    },\n    /**\n     * @alias clay.animation.easing.quinticInOut\n     * @param {number} k\n     * @return {number}\n     */\n    quinticInOut: function(k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    },\n    /**\n     * @alias clay.animation.easing.sinusoidalIn\n     * @param {number} k\n     * @return {number}\n     */\n    sinusoidalIn: function(k) {\n        return 1 - Math.cos(k * Math.PI / 2);\n    },\n    /**\n     * @alias clay.animation.easing.sinusoidalOut\n     * @param {number} k\n     * @return {number}\n     */\n    sinusoidalOut: function(k) {\n        return Math.sin(k * Math.PI / 2);\n    },\n    /**\n     * @alias clay.animation.easing.sinusoidalInOut\n     * @param {number} k\n     * @return {number}\n     */\n    sinusoidalInOut: function(k) {\n        return 0.5 * (1 - Math.cos(Math.PI * k));\n    },\n    /**\n     * @alias clay.animation.easing.exponentialIn\n     * @param {number} k\n     * @return {number}\n     */\n    exponentialIn: function(k) {\n        return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n    /**\n     * @alias clay.animation.easing.exponentialOut\n     * @param {number} k\n     * @return {number}\n     */\n    exponentialOut: function(k) {\n        return k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\n    },\n    /**\n     * @alias clay.animation.easing.exponentialInOut\n     * @param {number} k\n     * @return {number}\n     */\n    exponentialInOut: function(k) {\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if ((k *= 2) < 1) {\n            return 0.5 * Math.pow(1024, k - 1);\n        }\n        return 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\n    },\n    /**\n     * @alias clay.animation.easing.circularIn\n     * @param {number} k\n     * @return {number}\n     */\n    circularIn: function(k) {\n        return 1 - Math.sqrt(1 - k * k);\n    },\n    /**\n     * @alias clay.animation.easing.circularOut\n     * @param {number} k\n     * @return {number}\n     */\n    circularOut: function(k) {\n        return Math.sqrt(1 - (--k * k));\n    },\n    /**\n     * @alias clay.animation.easing.circularInOut\n     * @param {number} k\n     * @return {number}\n     */\n    circularInOut: function(k) {\n        if ((k *= 2) < 1) {\n            return - 0.5 * (Math.sqrt(1 - k * k) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    },\n    /**\n     * @alias clay.animation.easing.elasticIn\n     * @param {number} k\n     * @return {number}\n     */\n    elasticIn: function(k) {\n        var s, a = 0.1, p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1; s = p / 4;\n        }else{\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return - (a * Math.pow(2, 10 * (k -= 1)) *\n                    Math.sin((k - s) * (2 * Math.PI) / p));\n    },\n    /**\n     * @alias clay.animation.easing.elasticOut\n     * @param {number} k\n     * @return {number}\n     */\n    elasticOut: function(k) {\n        var s, a = 0.1, p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1; s = p / 4;\n        }\n        else{\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return (a * Math.pow(2, - 10 * k) *\n                Math.sin((k - s) * (2 * Math.PI) / p) + 1);\n    },\n    /**\n     * @alias clay.animation.easing.elasticInOut\n     * @param {number} k\n     * @return {number}\n     */\n    elasticInOut: function(k) {\n        var s, a = 0.1, p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1; s = p / 4;\n        }\n        else{\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        if ((k *= 2) < 1) {\n            return - 0.5 * (a * Math.pow(2, 10 * (k -= 1))\n                * Math.sin((k - s) * (2 * Math.PI) / p));\n        }\n        return a * Math.pow(2, -10 * (k -= 1))\n                * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n\n    },\n    /**\n     * @alias clay.animation.easing.backIn\n     * @param {number} k\n     * @return {number}\n     */\n    backIn: function(k) {\n        var s = 1.70158;\n        return k * k * ((s + 1) * k - s);\n    },\n    /**\n     * @alias clay.animation.easing.backOut\n     * @param {number} k\n     * @return {number}\n     */\n    backOut: function(k) {\n        var s = 1.70158;\n        return --k * k * ((s + 1) * k + s) + 1;\n    },\n    /**\n     * @alias clay.animation.easing.backInOut\n     * @param {number} k\n     * @return {number}\n     */\n    backInOut: function(k) {\n        var s = 1.70158 * 1.525;\n        if ((k *= 2) < 1) {\n            return 0.5 * (k * k * ((s + 1) * k - s));\n        }\n        return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    },\n    /**\n     * @alias clay.animation.easing.bounceIn\n     * @param {number} k\n     * @return {number}\n     */\n    bounceIn: function(k) {\n        return 1 - easing.bounceOut(1 - k);\n    },\n    /**\n     * @alias clay.animation.easing.bounceOut\n     * @param {number} k\n     * @return {number}\n     */\n    bounceOut: function(k) {\n        if (k < (1 / 2.75)) {\n            return 7.5625 * k * k;\n        }\n        else if (k < (2 / 2.75)) {\n            return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n        } else if (k < (2.5 / 2.75)) {\n            return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n        } else {\n            return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n        }\n    },\n    /**\n     * @alias clay.animation.easing.bounceInOut\n     * @param {number} k\n     * @return {number}\n     */\n    bounceInOut: function(k) {\n        if (k < 0.5) {\n            return easing.bounceIn(k * 2) * 0.5;\n        }\n        return easing.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (easing);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9hbmltYXRpb24vZWFzaW5nLmpzPzJmYmYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g57yT5Yqo5Ye95pWw5p2l6IeqIGh0dHBzOi8vZ2l0aHViLmNvbS9zb2xlL3R3ZWVuLmpzL2Jsb2IvbWFzdGVyL3NyYy9Ud2Vlbi5qc1xuXG4vKipcbiAqIEBuYW1lc3BhY2UgY2xheS5hbmltYXRpb24uZWFzaW5nXG4gKi9cbnZhciBlYXNpbmcgPSB7XG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5saW5lYXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBsaW5lYXI6IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgcmV0dXJuIGs7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLnF1YWRyYXRpY0luXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcXVhZHJhdGljSW46IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgcmV0dXJuIGsgKiBrO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5xdWFkcmF0aWNPdXRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBxdWFkcmF0aWNPdXQ6IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgcmV0dXJuIGsgKiAoMiAtIGspO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5xdWFkcmF0aWNJbk91dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHF1YWRyYXRpY0luT3V0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIGlmICgoayAqPSAyKSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAwLjUgKiBrICogaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLSAwLjUgKiAoLS1rICogKGsgLSAyKSAtIDEpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5jdWJpY0luXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgY3ViaWNJbjogZnVuY3Rpb24oaykge1xuICAgICAgICByZXR1cm4gayAqIGsgKiBrO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5jdWJpY091dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGN1YmljT3V0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIHJldHVybiAtLWsgKiBrICogayArIDE7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmN1YmljSW5PdXRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBjdWJpY0luT3V0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIGlmICgoayAqPSAyKSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAwLjUgKiBrICogayAqIGs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDAuNSAqICgoayAtPSAyKSAqIGsgKiBrICsgMik7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLnF1YXJ0aWNJblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHF1YXJ0aWNJbjogZnVuY3Rpb24oaykge1xuICAgICAgICByZXR1cm4gayAqIGsgKiBrICogaztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcucXVhcnRpY091dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHF1YXJ0aWNPdXQ6IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgcmV0dXJuIDEgLSAoLS1rICogayAqIGsgKiBrKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcucXVhcnRpY0luT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcXVhcnRpY0luT3V0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIGlmICgoayAqPSAyKSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAwLjUgKiBrICogayAqIGsgKiBrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtIDAuNSAqICgoayAtPSAyKSAqIGsgKiBrICogayAtIDIpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5xdWludGljSW5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBxdWludGljSW46IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgcmV0dXJuIGsgKiBrICogayAqIGsgKiBrO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5xdWludGljT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcXVpbnRpY091dDogZnVuY3Rpb24oaykge1xuICAgICAgICByZXR1cm4gLS1rICogayAqIGsgKiBrICogayArIDE7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLnF1aW50aWNJbk91dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHF1aW50aWNJbk91dDogZnVuY3Rpb24oaykge1xuICAgICAgICBpZiAoKGsgKj0gMikgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMC41ICogayAqIGsgKiBrICogayAqIGs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDAuNSAqICgoayAtPSAyKSAqIGsgKiBrICogayAqIGsgKyAyKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcuc2ludXNvaWRhbEluXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2ludXNvaWRhbEluOiBmdW5jdGlvbihrKSB7XG4gICAgICAgIHJldHVybiAxIC0gTWF0aC5jb3MoayAqIE1hdGguUEkgLyAyKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcuc2ludXNvaWRhbE91dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNpbnVzb2lkYWxPdXQ6IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgcmV0dXJuIE1hdGguc2luKGsgKiBNYXRoLlBJIC8gMik7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLnNpbnVzb2lkYWxJbk91dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNpbnVzb2lkYWxJbk91dDogZnVuY3Rpb24oaykge1xuICAgICAgICByZXR1cm4gMC41ICogKDEgLSBNYXRoLmNvcyhNYXRoLlBJICogaykpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5leHBvbmVudGlhbEluXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZXhwb25lbnRpYWxJbjogZnVuY3Rpb24oaykge1xuICAgICAgICByZXR1cm4gayA9PT0gMCA/IDAgOiBNYXRoLnBvdygxMDI0LCBrIC0gMSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmV4cG9uZW50aWFsT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZXhwb25lbnRpYWxPdXQ6IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgcmV0dXJuIGsgPT09IDEgPyAxIDogMSAtIE1hdGgucG93KDIsIC0gMTAgKiBrKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcuZXhwb25lbnRpYWxJbk91dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGV4cG9uZW50aWFsSW5PdXQ6IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgaWYgKGsgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGsgKj0gMikgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMC41ICogTWF0aC5wb3coMTAyNCwgayAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwLjUgKiAoLSBNYXRoLnBvdygyLCAtIDEwICogKGsgLSAxKSkgKyAyKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcuY2lyY3VsYXJJblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGNpcmN1bGFySW46IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgcmV0dXJuIDEgLSBNYXRoLnNxcnQoMSAtIGsgKiBrKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcuY2lyY3VsYXJPdXRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBjaXJjdWxhck91dDogZnVuY3Rpb24oaykge1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KDEgLSAoLS1rICogaykpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5jaXJjdWxhckluT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgY2lyY3VsYXJJbk91dDogZnVuY3Rpb24oaykge1xuICAgICAgICBpZiAoKGsgKj0gMikgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gLSAwLjUgKiAoTWF0aC5zcXJ0KDEgLSBrICogaykgLSAxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMC41ICogKE1hdGguc3FydCgxIC0gKGsgLT0gMikgKiBrKSArIDEpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5lbGFzdGljSW5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBlbGFzdGljSW46IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgdmFyIHMsIGEgPSAwLjEsIHAgPSAwLjQ7XG4gICAgICAgIGlmIChrID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoayA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhIHx8IGEgPCAxKSB7XG4gICAgICAgICAgICBhID0gMTsgcyA9IHAgLyA0O1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHMgPSBwICogTWF0aC5hc2luKDEgLyBhKSAvICgyICogTWF0aC5QSSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0gKGEgKiBNYXRoLnBvdygyLCAxMCAqIChrIC09IDEpKSAqXG4gICAgICAgICAgICAgICAgICAgIE1hdGguc2luKChrIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5lbGFzdGljT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZWxhc3RpY091dDogZnVuY3Rpb24oaykge1xuICAgICAgICB2YXIgcywgYSA9IDAuMSwgcCA9IDAuNDtcbiAgICAgICAgaWYgKGsgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWEgfHwgYSA8IDEpIHtcbiAgICAgICAgICAgIGEgPSAxOyBzID0gcCAvIDQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHMgPSBwICogTWF0aC5hc2luKDEgLyBhKSAvICgyICogTWF0aC5QSSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChhICogTWF0aC5wb3coMiwgLSAxMCAqIGspICpcbiAgICAgICAgICAgICAgICBNYXRoLnNpbigoayAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApICsgMSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmVsYXN0aWNJbk91dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGVsYXN0aWNJbk91dDogZnVuY3Rpb24oaykge1xuICAgICAgICB2YXIgcywgYSA9IDAuMSwgcCA9IDAuNDtcbiAgICAgICAgaWYgKGsgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWEgfHwgYSA8IDEpIHtcbiAgICAgICAgICAgIGEgPSAxOyBzID0gcCAvIDQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHMgPSBwICogTWF0aC5hc2luKDEgLyBhKSAvICgyICogTWF0aC5QSSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChrICo9IDIpIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIC0gMC41ICogKGEgKiBNYXRoLnBvdygyLCAxMCAqIChrIC09IDEpKVxuICAgICAgICAgICAgICAgICogTWF0aC5zaW4oKGsgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGEgKiBNYXRoLnBvdygyLCAtMTAgKiAoayAtPSAxKSlcbiAgICAgICAgICAgICAgICAqIE1hdGguc2luKChrIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkgKiAwLjUgKyAxO1xuXG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmJhY2tJblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGJhY2tJbjogZnVuY3Rpb24oaykge1xuICAgICAgICB2YXIgcyA9IDEuNzAxNTg7XG4gICAgICAgIHJldHVybiBrICogayAqICgocyArIDEpICogayAtIHMpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5iYWNrT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgYmFja091dDogZnVuY3Rpb24oaykge1xuICAgICAgICB2YXIgcyA9IDEuNzAxNTg7XG4gICAgICAgIHJldHVybiAtLWsgKiBrICogKChzICsgMSkgKiBrICsgcykgKyAxO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5iYWNrSW5PdXRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBiYWNrSW5PdXQ6IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgdmFyIHMgPSAxLjcwMTU4ICogMS41MjU7XG4gICAgICAgIGlmICgoayAqPSAyKSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAwLjUgKiAoayAqIGsgKiAoKHMgKyAxKSAqIGsgLSBzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDAuNSAqICgoayAtPSAyKSAqIGsgKiAoKHMgKyAxKSAqIGsgKyBzKSArIDIpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5ib3VuY2VJblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGJvdW5jZUluOiBmdW5jdGlvbihrKSB7XG4gICAgICAgIHJldHVybiAxIC0gZWFzaW5nLmJvdW5jZU91dCgxIC0gayk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmJvdW5jZU91dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGJvdW5jZU91dDogZnVuY3Rpb24oaykge1xuICAgICAgICBpZiAoayA8ICgxIC8gMi43NSkpIHtcbiAgICAgICAgICAgIHJldHVybiA3LjU2MjUgKiBrICogaztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrIDwgKDIgLyAyLjc1KSkge1xuICAgICAgICAgICAgcmV0dXJuIDcuNTYyNSAqIChrIC09ICgxLjUgLyAyLjc1KSkgKiBrICsgMC43NTtcbiAgICAgICAgfSBlbHNlIGlmIChrIDwgKDIuNSAvIDIuNzUpKSB7XG4gICAgICAgICAgICByZXR1cm4gNy41NjI1ICogKGsgLT0gKDIuMjUgLyAyLjc1KSkgKiBrICsgMC45Mzc1O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDcuNTYyNSAqIChrIC09ICgyLjYyNSAvIDIuNzUpKSAqIGsgKyAwLjk4NDM3NTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5ib3VuY2VJbk91dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGJvdW5jZUluT3V0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIGlmIChrIDwgMC41KSB7XG4gICAgICAgICAgICByZXR1cm4gZWFzaW5nLmJvdW5jZUluKGsgKiAyKSAqIDAuNTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWFzaW5nLmJvdW5jZU91dChrICogMiAtIDEpICogMC41ICsgMC41O1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGVhc2luZztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvYW5pbWF0aW9uL2Vhc2luZy5qc1xuLy8gbW9kdWxlIGlkID0gNDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///44\n");

/***/ }),
/* 45 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n/**\n * @class 2 Dimensional Vector\n * @name vec2\n */\n\nvar vec2 = {};\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\nvec2.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](2);\n    out[0] = 0;\n    out[1] = 0;\n    return out;\n};\n\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {vec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\nvec2.clone = function(a) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](2);\n    out[0] = a[0];\n    out[1] = a[1];\n    return out;\n};\n\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\nvec2.fromValues = function(x, y) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](2);\n    out[0] = x;\n    out[1] = y;\n    return out;\n};\n\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the source vector\n * @returns {vec2} out\n */\nvec2.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    return out;\n};\n\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\nvec2.set = function(out, x, y) {\n    out[0] = x;\n    out[1] = y;\n    return out;\n};\n\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.add = function(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    return out;\n};\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.subtract = function(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    return out;\n};\n\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\nvec2.sub = vec2.subtract;\n\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.multiply = function(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    return out;\n};\n\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\nvec2.mul = vec2.multiply;\n\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.divide = function(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    return out;\n};\n\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\nvec2.div = vec2.divide;\n\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.min = function(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    return out;\n};\n\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.max = function(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    return out;\n};\n\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\nvec2.scale = function(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    return out;\n};\n\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\nvec2.scaleAndAdd = function(out, a, b, scale) {\n    out[0] = a[0] + (b[0] * scale);\n    out[1] = a[1] + (b[1] * scale);\n    return out;\n};\n\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} distance between a and b\n */\nvec2.distance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1];\n    return Math.sqrt(x*x + y*y);\n};\n\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\nvec2.dist = vec2.distance;\n\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\nvec2.squaredDistance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1];\n    return x*x + y*y;\n};\n\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\nvec2.sqrDist = vec2.squaredDistance;\n\n/**\n * Calculates the length of a vec2\n *\n * @param {vec2} a vector to calculate length of\n * @returns {Number} length of a\n */\nvec2.length = function (a) {\n    var x = a[0],\n        y = a[1];\n    return Math.sqrt(x*x + y*y);\n};\n\n/**\n * Alias for {@link vec2.length}\n * @function\n */\nvec2.len = vec2.length;\n\n/**\n * Calculates the squared length of a vec2\n *\n * @param {vec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nvec2.squaredLength = function (a) {\n    var x = a[0],\n        y = a[1];\n    return x*x + y*y;\n};\n\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\nvec2.sqrLen = vec2.squaredLength;\n\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to negate\n * @returns {vec2} out\n */\nvec2.negate = function(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    return out;\n};\n\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to invert\n * @returns {vec2} out\n */\nvec2.inverse = function(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n};\n\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to normalize\n * @returns {vec2} out\n */\nvec2.normalize = function(out, a) {\n    var x = a[0],\n        y = a[1];\n    var len = x*x + y*y;\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n        out[0] = a[0] * len;\n        out[1] = a[1] * len;\n    }\n    return out;\n};\n\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} dot product of a and b\n */\nvec2.dot = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1];\n};\n\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec3} out\n */\nvec2.cross = function(out, a, b) {\n    var z = a[0] * b[1] - a[1] * b[0];\n    out[0] = out[1] = 0;\n    out[2] = z;\n    return out;\n};\n\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec2} out\n */\nvec2.lerp = function (out, a, b, t) {\n    var ax = a[0],\n        ay = a[1];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    return out;\n};\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\nvec2.random = function (out, scale) {\n    scale = scale || 1.0;\n    var r = GLMAT_RANDOM() * 2.0 * Math.PI;\n    out[0] = Math.cos(r) * scale;\n    out[1] = Math.sin(r) * scale;\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat2 = function(out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[2] * y;\n    out[1] = m[1] * x + m[3] * y;\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2d} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat2d = function(out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat3} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat3 = function(out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[3] * y + m[6];\n    out[1] = m[1] * x + m[4] * y + m[7];\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat4 = function(out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[4] * y + m[12];\n    out[1] = m[1] * x + m[5] * y + m[13];\n    return out;\n};\n\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nvec2.forEach = (function() {\n    var vec = vec2.create();\n\n    return function(a, stride, offset, count, fn, arg) {\n        var i, l;\n        if(!stride) {\n            stride = 2;\n        }\n\n        if(!offset) {\n            offset = 0;\n        }\n\n        if(count) {\n            l = Math.min((count * stride) + offset, a.length);\n        } else {\n            l = a.length;\n        }\n\n        for(i = offset; i < l; i += stride) {\n            vec[0] = a[i]; vec[1] = a[i+1];\n            fn(vec, vec, arg);\n            a[i] = vec[0]; a[i+1] = vec[1];\n        }\n\n        return a;\n    };\n})();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (vec2);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nbG1hdHJpeC92ZWMyLmpzPzI5NjUiXSwic291cmNlc0NvbnRlbnQiOlsiXG4vKiBDb3B5cmlnaHQgKGMpIDIwMTMsIEJyYW5kb24gSm9uZXMsIENvbGluIE1hY0tlbnppZSBJVi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0IG1vZGlmaWNhdGlvbixcbmFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcblxuICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpc1xuICAgIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORFxuQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRURcbldBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SXG5BTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVNcbihJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUztcbkxPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTlxuQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcbihJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTXG5TT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4gKi9cblxuaW1wb3J0IHsgR0xNQVRfQVJSQVlfVFlQRSB9IGZyb20gJy4vY29tbW9uJztcblxuLyoqXG4gKiBAY2xhc3MgMiBEaW1lbnNpb25hbCBWZWN0b3JcbiAqIEBuYW1lIHZlYzJcbiAqL1xuXG52YXIgdmVjMiA9IHt9O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcsIGVtcHR5IHZlYzJcbiAqXG4gKiBAcmV0dXJucyB7dmVjMn0gYSBuZXcgMkQgdmVjdG9yXG4gKi9cbnZlYzIuY3JlYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG91dCA9IG5ldyBHTE1BVF9BUlJBWV9UWVBFKDIpO1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzIgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdmVjdG9yIHRvIGNsb25lXG4gKiBAcmV0dXJucyB7dmVjMn0gYSBuZXcgMkQgdmVjdG9yXG4gKi9cbnZlYzIuY2xvbmUgPSBmdW5jdGlvbihhKSB7XG4gICAgdmFyIG91dCA9IG5ldyBHTE1BVF9BUlJBWV9UWVBFKDIpO1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzIgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjMn0gYSBuZXcgMkQgdmVjdG9yXG4gKi9cbnZlYzIuZnJvbVZhbHVlcyA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICB2YXIgb3V0ID0gbmV3IEdMTUFUX0FSUkFZX1RZUEUoMik7XG4gICAgb3V0WzBdID0geDtcbiAgICBvdXRbMV0gPSB5O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSB2ZWMyIHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMyfSBhIHRoZSBzb3VyY2UgdmVjdG9yXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cbnZlYzIuY29weSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMyIHRvIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cbnZlYzIuc2V0ID0gZnVuY3Rpb24ob3V0LCB4LCB5KSB7XG4gICAgb3V0WzBdID0geDtcbiAgICBvdXRbMV0gPSB5O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEFkZHMgdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjMn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi5hZGQgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgICBvdXRbMV0gPSBhWzFdICsgYlsxXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBTdWJ0cmFjdHMgdmVjdG9yIGIgZnJvbSB2ZWN0b3IgYVxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjMn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi5zdWJ0cmFjdCA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIG91dFswXSA9IGFbMF0gLSBiWzBdO1xuICAgIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMi5zdWJ0cmFjdH1cbiAqIEBmdW5jdGlvblxuICovXG52ZWMyLnN1YiA9IHZlYzIuc3VidHJhY3Q7XG5cbi8qKlxuICogTXVsdGlwbGllcyB0d28gdmVjMidzXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG52ZWMyLm11bHRpcGx5ID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgb3V0WzBdID0gYVswXSAqIGJbMF07XG4gICAgb3V0WzFdID0gYVsxXSAqIGJbMV07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMyLm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzIubXVsID0gdmVjMi5tdWx0aXBseTtcblxuLyoqXG4gKiBEaXZpZGVzIHR3byB2ZWMyJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cbnZlYzIuZGl2aWRlID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgb3V0WzBdID0gYVswXSAvIGJbMF07XG4gICAgb3V0WzFdID0gYVsxXSAvIGJbMV07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMyLmRpdmlkZX1cbiAqIEBmdW5jdGlvblxuICovXG52ZWMyLmRpdiA9IHZlYzIuZGl2aWRlO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIG1pbmltdW0gb2YgdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjMn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi5taW4gPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBNYXRoLm1pbihhWzBdLCBiWzBdKTtcbiAgICBvdXRbMV0gPSBNYXRoLm1pbihhWzFdLCBiWzFdKTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG9mIHR3byB2ZWMyJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cbnZlYzIubWF4ID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgb3V0WzBdID0gTWF0aC5tYXgoYVswXSwgYlswXSk7XG4gICAgb3V0WzFdID0gTWF0aC5tYXgoYVsxXSwgYlsxXSk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogU2NhbGVzIGEgdmVjMiBieSBhIHNjYWxhciBudW1iZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMyfSBhIHRoZSB2ZWN0b3IgdG8gc2NhbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgdmVjdG9yIGJ5XG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cbnZlYzIuc2NhbGUgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBhWzBdICogYjtcbiAgICBvdXRbMV0gPSBhWzFdICogYjtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBBZGRzIHR3byB2ZWMyJ3MgYWZ0ZXIgc2NhbGluZyB0aGUgc2Vjb25kIG9wZXJhbmQgYnkgYSBzY2FsYXIgdmFsdWVcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgdGhlIGFtb3VudCB0byBzY2FsZSBiIGJ5IGJlZm9yZSBhZGRpbmdcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi5zY2FsZUFuZEFkZCA9IGZ1bmN0aW9uKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgICBvdXRbMF0gPSBhWzBdICsgKGJbMF0gKiBzY2FsZSk7XG4gICAgb3V0WzFdID0gYVsxXSArIChiWzFdICogc2NhbGUpO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGV1Y2xpZGlhbiBkaXN0YW5jZSBiZXR3ZWVuIHR3byB2ZWMyJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjMn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG52ZWMyLmRpc3RhbmNlID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHZhciB4ID0gYlswXSAtIGFbMF0sXG4gICAgICAgIHkgPSBiWzFdIC0gYVsxXTtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHgqeCArIHkqeSk7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMi5kaXN0YW5jZX1cbiAqIEBmdW5jdGlvblxuICovXG52ZWMyLmRpc3QgPSB2ZWMyLmRpc3RhbmNlO1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xudmVjMi5zcXVhcmVkRGlzdGFuY2UgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgdmFyIHggPSBiWzBdIC0gYVswXSxcbiAgICAgICAgeSA9IGJbMV0gLSBhWzFdO1xuICAgIHJldHVybiB4KnggKyB5Knk7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMi5zcXVhcmVkRGlzdGFuY2V9XG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjMi5zcXJEaXN0ID0gdmVjMi5zcXVhcmVkRGlzdGFuY2U7XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIGEgdmVjMlxuICpcbiAqIEBwYXJhbSB7dmVjMn0gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gbGVuZ3RoIG9mIGFcbiAqL1xudmVjMi5sZW5ndGggPSBmdW5jdGlvbiAoYSkge1xuICAgIHZhciB4ID0gYVswXSxcbiAgICAgICAgeSA9IGFbMV07XG4gICAgcmV0dXJuIE1hdGguc3FydCh4KnggKyB5KnkpO1xufTtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzIubGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzIubGVuID0gdmVjMi5sZW5ndGg7XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBsZW5ndGggb2YgYSB2ZWMyXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBhIHZlY3RvciB0byBjYWxjdWxhdGUgc3F1YXJlZCBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgbGVuZ3RoIG9mIGFcbiAqL1xudmVjMi5zcXVhcmVkTGVuZ3RoID0gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgeCA9IGFbMF0sXG4gICAgICAgIHkgPSBhWzFdO1xuICAgIHJldHVybiB4KnggKyB5Knk7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMi5zcXVhcmVkTGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzIuc3FyTGVuID0gdmVjMi5zcXVhcmVkTGVuZ3RoO1xuXG4vKipcbiAqIE5lZ2F0ZXMgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMyXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjMn0gYSB2ZWN0b3IgdG8gbmVnYXRlXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cbnZlYzIubmVnYXRlID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgb3V0WzBdID0gLWFbMF07XG4gICAgb3V0WzFdID0gLWFbMV07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW52ZXJzZSBvZiB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMyfSBhIHZlY3RvciB0byBpbnZlcnRcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi5pbnZlcnNlID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gIG91dFswXSA9IDEuMCAvIGFbMF07XG4gIG91dFsxXSA9IDEuMCAvIGFbMV07XG4gIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIE5vcm1hbGl6ZSBhIHZlYzJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMyfSBhIHZlY3RvciB0byBub3JtYWxpemVcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi5ub3JtYWxpemUgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICB2YXIgeCA9IGFbMF0sXG4gICAgICAgIHkgPSBhWzFdO1xuICAgIHZhciBsZW4gPSB4KnggKyB5Knk7XG4gICAgaWYgKGxlbiA+IDApIHtcbiAgICAgICAgLy9UT0RPOiBldmFsdWF0ZSB1c2Ugb2YgZ2xtX2ludnNxcnQgaGVyZT9cbiAgICAgICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pO1xuICAgICAgICBvdXRbMF0gPSBhWzBdICogbGVuO1xuICAgICAgICBvdXRbMV0gPSBhWzFdICogbGVuO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0d28gdmVjMidzXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKi9cbnZlYzIuZG90ID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYVswXSAqIGJbMF0gKyBhWzFdICogYlsxXTtcbn07XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdHdvIHZlYzInc1xuICogTm90ZSB0aGF0IHRoZSBjcm9zcyBwcm9kdWN0IG11c3QgYnkgZGVmaW5pdGlvbiBwcm9kdWNlIGEgM0QgdmVjdG9yXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG52ZWMyLmNyb3NzID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmFyIHogPSBhWzBdICogYlsxXSAtIGFbMV0gKiBiWzBdO1xuICAgIG91dFswXSA9IG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gejtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjMn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSB0IGludGVycG9sYXRpb24gYW1vdW50IGJldHdlZW4gdGhlIHR3byBpbnB1dHNcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi5sZXJwID0gZnVuY3Rpb24gKG91dCwgYSwgYiwgdCkge1xuICAgIHZhciBheCA9IGFbMF0sXG4gICAgICAgIGF5ID0gYVsxXTtcbiAgICBvdXRbMF0gPSBheCArIHQgKiAoYlswXSAtIGF4KTtcbiAgICBvdXRbMV0gPSBheSArIHQgKiAoYlsxXSAtIGF5KTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSByYW5kb20gdmVjdG9yIHdpdGggdGhlIGdpdmVuIHNjYWxlXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc2NhbGVdIExlbmd0aCBvZiB0aGUgcmVzdWx0aW5nIHZlY3Rvci4gSWYgb21taXR0ZWQsIGEgdW5pdCB2ZWN0b3Igd2lsbCBiZSByZXR1cm5lZFxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG52ZWMyLnJhbmRvbSA9IGZ1bmN0aW9uIChvdXQsIHNjYWxlKSB7XG4gICAgc2NhbGUgPSBzY2FsZSB8fCAxLjA7XG4gICAgdmFyIHIgPSBHTE1BVF9SQU5ET00oKSAqIDIuMCAqIE1hdGguUEk7XG4gICAgb3V0WzBdID0gTWF0aC5jb3MocikgKiBzY2FsZTtcbiAgICBvdXRbMV0gPSBNYXRoLnNpbihyKSAqIHNjYWxlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzIgd2l0aCBhIG1hdDJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMyfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge21hdDJ9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cbnZlYzIudHJhbnNmb3JtTWF0MiA9IGZ1bmN0aW9uKG91dCwgYSwgbSkge1xuICAgIHZhciB4ID0gYVswXSxcbiAgICAgICAgeSA9IGFbMV07XG4gICAgb3V0WzBdID0gbVswXSAqIHggKyBtWzJdICogeTtcbiAgICBvdXRbMV0gPSBtWzFdICogeCArIG1bM10gKiB5O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzIgd2l0aCBhIG1hdDJkXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjMn0gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHttYXQyZH0gbSBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi50cmFuc2Zvcm1NYXQyZCA9IGZ1bmN0aW9uKG91dCwgYSwgbSkge1xuICAgIHZhciB4ID0gYVswXSxcbiAgICAgICAgeSA9IGFbMV07XG4gICAgb3V0WzBdID0gbVswXSAqIHggKyBtWzJdICogeSArIG1bNF07XG4gICAgb3V0WzFdID0gbVsxXSAqIHggKyBtWzNdICogeSArIG1bNV07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjMiB3aXRoIGEgbWF0M1xuICogM3JkIHZlY3RvciBjb21wb25lbnQgaXMgaW1wbGljaXRseSAnMSdcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMyfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge21hdDN9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cbnZlYzIudHJhbnNmb3JtTWF0MyA9IGZ1bmN0aW9uKG91dCwgYSwgbSkge1xuICAgIHZhciB4ID0gYVswXSxcbiAgICAgICAgeSA9IGFbMV07XG4gICAgb3V0WzBdID0gbVswXSAqIHggKyBtWzNdICogeSArIG1bNl07XG4gICAgb3V0WzFdID0gbVsxXSAqIHggKyBtWzRdICogeSArIG1bN107XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjMiB3aXRoIGEgbWF0NFxuICogM3JkIHZlY3RvciBjb21wb25lbnQgaXMgaW1wbGljaXRseSAnMCdcbiAqIDR0aCB2ZWN0b3IgY29tcG9uZW50IGlzIGltcGxpY2l0bHkgJzEnXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjMn0gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHttYXQ0fSBtIG1hdHJpeCB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG52ZWMyLnRyYW5zZm9ybU1hdDQgPSBmdW5jdGlvbihvdXQsIGEsIG0pIHtcbiAgICB2YXIgeCA9IGFbMF0sXG4gICAgICAgIHkgPSBhWzFdO1xuICAgIG91dFswXSA9IG1bMF0gKiB4ICsgbVs0XSAqIHkgKyBtWzEyXTtcbiAgICBvdXRbMV0gPSBtWzFdICogeCArIG1bNV0gKiB5ICsgbVsxM107XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvdmVyIGFuIGFycmF5IG9mIHZlYzJzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGEgdGhlIGFycmF5IG9mIHZlY3RvcnMgdG8gaXRlcmF0ZSBvdmVyXG4gKiBAcGFyYW0ge051bWJlcn0gc3RyaWRlIE51bWJlciBvZiBlbGVtZW50cyBiZXR3ZWVuIHRoZSBzdGFydCBvZiBlYWNoIHZlYzIuIElmIDAgYXNzdW1lcyB0aWdodGx5IHBhY2tlZFxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiB2ZWMycyB0byBpdGVyYXRlIG92ZXIuIElmIDAgaXRlcmF0ZXMgb3ZlciBlbnRpcmUgYXJyYXlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggdmVjdG9yIGluIHRoZSBhcnJheVxuICogQHBhcmFtIHtPYmplY3R9IFthcmddIGFkZGl0aW9uYWwgYXJndW1lbnQgdG8gcGFzcyB0byBmblxuICogQHJldHVybnMge0FycmF5fSBhXG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjMi5mb3JFYWNoID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ZWMgPSB2ZWMyLmNyZWF0ZSgpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGEsIHN0cmlkZSwgb2Zmc2V0LCBjb3VudCwgZm4sIGFyZykge1xuICAgICAgICB2YXIgaSwgbDtcbiAgICAgICAgaWYoIXN0cmlkZSkge1xuICAgICAgICAgICAgc3RyaWRlID0gMjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFvZmZzZXQpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZihjb3VudCkge1xuICAgICAgICAgICAgbCA9IE1hdGgubWluKChjb3VudCAqIHN0cmlkZSkgKyBvZmZzZXQsIGEubGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGwgPSBhLmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcihpID0gb2Zmc2V0OyBpIDwgbDsgaSArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHZlY1swXSA9IGFbaV07IHZlY1sxXSA9IGFbaSsxXTtcbiAgICAgICAgICAgIGZuKHZlYywgdmVjLCBhcmcpO1xuICAgICAgICAgICAgYVtpXSA9IHZlY1swXTsgYVtpKzFdID0gdmVjWzFdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IHZlYzI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nbG1hdHJpeC92ZWMyLmpzXG4vLyBtb2R1bGUgaWQgPSA0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///45\n");

/***/ }),
/* 46 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__animation_Animator__ = __webpack_require__(70);\n\n\n\n\n\n/**\n * Animation is global timeline that schedule all clips. each frame animation will set the time of clips to current and update the states of clips\n * @constructor clay.Timeline\n * @extends clay.core.Base\n *\n * @example\n * var animation = new clay.Timeline();\n * var node = new clay.Node();\n * animation.animate(node.position)\n *     .when(1000, {\n *         x: 500,\n *         y: 500\n *     })\n *     .when(2000, {\n *         x: 100,\n *         y: 100\n *     })\n *     .when(3000, {\n *         z: 10\n *     })\n *     .start('spline');\n */\nvar Timeline = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Timeline# */{\n        /**\n         * stage is an object with render method, each frame if there exists any animating clips, stage.render will be called\n         * @type {Object}\n         */\n        stage: null,\n\n        _clips: [],\n\n        _running: false,\n\n        _time: 0,\n\n        _paused: false,\n\n        _pausedTime: 0\n    };\n},\n/** @lends clay.Timeline.prototype */\n{\n\n    /**\n     * Add animator\n     * @param {clay.animate.Animator} animator\n     */\n    addAnimator: function (animator) {\n        animator.animation = this;\n        var clips = animator.getClips();\n        for (var i = 0; i < clips.length; i++) {\n            this.addClip(clips[i]);\n        }\n    },\n\n    /**\n     * @param {clay.animation.Clip} clip\n     */\n    addClip: function (clip) {\n        if (this._clips.indexOf(clip) < 0) {\n            this._clips.push(clip);\n        }\n    },\n\n    /**\n     * @param  {clay.animation.Clip} clip\n     */\n    removeClip: function (clip) {\n        var idx = this._clips.indexOf(clip);\n        if (idx >= 0) {\n            this._clips.splice(idx, 1);\n        }\n    },\n\n    /**\n     * Remove animator\n     * @param {clay.animate.Animator} animator\n     */\n    removeAnimator: function (animator) {\n        var clips = animator.getClips();\n        for (var i = 0; i < clips.length; i++) {\n            this.removeClip(clips[i]);\n        }\n        animator.animation = null;\n    },\n\n    _update: function () {\n\n        var time = Date.now() - this._pausedTime;\n        var delta = time - this._time;\n        var clips = this._clips;\n        var len = clips.length;\n\n        var deferredEvents = [];\n        var deferredClips = [];\n        for (var i = 0; i < len; i++) {\n            var clip = clips[i];\n            var e = clip.step(time, delta, false);\n            // Throw out the events need to be called after\n            // stage.render, like finish\n            if (e) {\n                deferredEvents.push(e);\n                deferredClips.push(clip);\n            }\n        }\n\n        // Remove the finished clip\n        for (var i = 0; i < len;) {\n            if (clips[i]._needsRemove) {\n                clips[i] = clips[len-1];\n                clips.pop();\n                len--;\n            } else {\n                i++;\n            }\n        }\n\n        len = deferredEvents.length;\n        for (var i = 0; i < len; i++) {\n            deferredClips[i].fire(deferredEvents[i]);\n        }\n\n        this._time = time;\n\n        this.trigger('frame', delta);\n\n        if (this.stage && this.stage.render) {\n            this.stage.render();\n        }\n    },\n    /**\n     * Start running animation\n     */\n    start: function () {\n        var self = this;\n\n        this._running = true;\n        this._time = Date.now();\n\n        this._pausedTime = 0;\n\n        var requestAnimationFrame = __WEBPACK_IMPORTED_MODULE_1__core_vendor__[\"a\" /* default */].requestAnimationFrame;\n\n        function step() {\n            if (self._running) {\n\n                requestAnimationFrame(step);\n\n                if (!self._paused) {\n                    self._update();\n                }\n            }\n        }\n\n        requestAnimationFrame(step);\n\n    },\n    /**\n     * Stop running animation\n     */\n    stop: function () {\n        this._running = false;\n    },\n\n    /**\n     * Pause\n     */\n    pause: function () {\n        if (!this._paused) {\n            this._pauseStart = Date.now();\n            this._paused = true;\n        }\n    },\n\n    /**\n     * Resume\n     */\n    resume: function () {\n        if (this._paused) {\n            this._pausedTime += Date.now() - this._pauseStart;\n            this._paused = false;\n        }\n    },\n\n    /**\n     * Remove all clips\n     */\n    removeClipsAll: function () {\n        this._clips = [];\n    },\n    /**\n     * Create an animator\n     * @param  {Object} target\n     * @param  {Object} [options]\n     * @param  {boolean} [options.loop]\n     * @param  {Function} [options.getter]\n     * @param  {Function} [options.setter]\n     * @param  {Function} [options.interpolater]\n     * @return {clay.animation.Animator}\n     */\n    animate: function (target, options) {\n        options = options || {};\n        var animator = new __WEBPACK_IMPORTED_MODULE_2__animation_Animator__[\"a\" /* default */](\n            target,\n            options.loop,\n            options.getter,\n            options.setter,\n            options.interpolater\n        );\n        animator.animation = this;\n        return animator;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Timeline);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9UaW1lbGluZS5qcz81NzQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4vY29yZS9CYXNlJztcbmltcG9ydCB2ZW5kb3IgZnJvbSAnLi9jb3JlL3ZlbmRvcic7XG5pbXBvcnQgQW5pbWF0b3IgZnJvbSAnLi9hbmltYXRpb24vQW5pbWF0b3InO1xuXG5cbi8qKlxuICogQW5pbWF0aW9uIGlzIGdsb2JhbCB0aW1lbGluZSB0aGF0IHNjaGVkdWxlIGFsbCBjbGlwcy4gZWFjaCBmcmFtZSBhbmltYXRpb24gd2lsbCBzZXQgdGhlIHRpbWUgb2YgY2xpcHMgdG8gY3VycmVudCBhbmQgdXBkYXRlIHRoZSBzdGF0ZXMgb2YgY2xpcHNcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LlRpbWVsaW5lXG4gKiBAZXh0ZW5kcyBjbGF5LmNvcmUuQmFzZVxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgYW5pbWF0aW9uID0gbmV3IGNsYXkuVGltZWxpbmUoKTtcbiAqIHZhciBub2RlID0gbmV3IGNsYXkuTm9kZSgpO1xuICogYW5pbWF0aW9uLmFuaW1hdGUobm9kZS5wb3NpdGlvbilcbiAqICAgICAud2hlbigxMDAwLCB7XG4gKiAgICAgICAgIHg6IDUwMCxcbiAqICAgICAgICAgeTogNTAwXG4gKiAgICAgfSlcbiAqICAgICAud2hlbigyMDAwLCB7XG4gKiAgICAgICAgIHg6IDEwMCxcbiAqICAgICAgICAgeTogMTAwXG4gKiAgICAgfSlcbiAqICAgICAud2hlbigzMDAwLCB7XG4gKiAgICAgICAgIHo6IDEwXG4gKiAgICAgfSlcbiAqICAgICAuc3RhcnQoJ3NwbGluZScpO1xuICovXG52YXIgVGltZWxpbmUgPSBCYXNlLmV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIC8qKiBAbGVuZHMgY2xheS5UaW1lbGluZSMgKi97XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBzdGFnZSBpcyBhbiBvYmplY3Qgd2l0aCByZW5kZXIgbWV0aG9kLCBlYWNoIGZyYW1lIGlmIHRoZXJlIGV4aXN0cyBhbnkgYW5pbWF0aW5nIGNsaXBzLCBzdGFnZS5yZW5kZXIgd2lsbCBiZSBjYWxsZWRcbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHN0YWdlOiBudWxsLFxuXG4gICAgICAgIF9jbGlwczogW10sXG5cbiAgICAgICAgX3J1bm5pbmc6IGZhbHNlLFxuXG4gICAgICAgIF90aW1lOiAwLFxuXG4gICAgICAgIF9wYXVzZWQ6IGZhbHNlLFxuXG4gICAgICAgIF9wYXVzZWRUaW1lOiAwXG4gICAgfTtcbn0sXG4vKiogQGxlbmRzIGNsYXkuVGltZWxpbmUucHJvdG90eXBlICovXG57XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW5pbWF0b3JcbiAgICAgKiBAcGFyYW0ge2NsYXkuYW5pbWF0ZS5BbmltYXRvcn0gYW5pbWF0b3JcbiAgICAgKi9cbiAgICBhZGRBbmltYXRvcjogZnVuY3Rpb24gKGFuaW1hdG9yKSB7XG4gICAgICAgIGFuaW1hdG9yLmFuaW1hdGlvbiA9IHRoaXM7XG4gICAgICAgIHZhciBjbGlwcyA9IGFuaW1hdG9yLmdldENsaXBzKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYWRkQ2xpcChjbGlwc1tpXSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtjbGF5LmFuaW1hdGlvbi5DbGlwfSBjbGlwXG4gICAgICovXG4gICAgYWRkQ2xpcDogZnVuY3Rpb24gKGNsaXApIHtcbiAgICAgICAgaWYgKHRoaXMuX2NsaXBzLmluZGV4T2YoY2xpcCkgPCAwKSB7XG4gICAgICAgICAgICB0aGlzLl9jbGlwcy5wdXNoKGNsaXApO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge2NsYXkuYW5pbWF0aW9uLkNsaXB9IGNsaXBcbiAgICAgKi9cbiAgICByZW1vdmVDbGlwOiBmdW5jdGlvbiAoY2xpcCkge1xuICAgICAgICB2YXIgaWR4ID0gdGhpcy5fY2xpcHMuaW5kZXhPZihjbGlwKTtcbiAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9jbGlwcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYW5pbWF0b3JcbiAgICAgKiBAcGFyYW0ge2NsYXkuYW5pbWF0ZS5BbmltYXRvcn0gYW5pbWF0b3JcbiAgICAgKi9cbiAgICByZW1vdmVBbmltYXRvcjogZnVuY3Rpb24gKGFuaW1hdG9yKSB7XG4gICAgICAgIHZhciBjbGlwcyA9IGFuaW1hdG9yLmdldENsaXBzKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2xpcChjbGlwc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgYW5pbWF0b3IuYW5pbWF0aW9uID0gbnVsbDtcbiAgICB9LFxuXG4gICAgX3VwZGF0ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciB0aW1lID0gRGF0ZS5ub3coKSAtIHRoaXMuX3BhdXNlZFRpbWU7XG4gICAgICAgIHZhciBkZWx0YSA9IHRpbWUgLSB0aGlzLl90aW1lO1xuICAgICAgICB2YXIgY2xpcHMgPSB0aGlzLl9jbGlwcztcbiAgICAgICAgdmFyIGxlbiA9IGNsaXBzLmxlbmd0aDtcblxuICAgICAgICB2YXIgZGVmZXJyZWRFdmVudHMgPSBbXTtcbiAgICAgICAgdmFyIGRlZmVycmVkQ2xpcHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIGNsaXAgPSBjbGlwc1tpXTtcbiAgICAgICAgICAgIHZhciBlID0gY2xpcC5zdGVwKHRpbWUsIGRlbHRhLCBmYWxzZSk7XG4gICAgICAgICAgICAvLyBUaHJvdyBvdXQgdGhlIGV2ZW50cyBuZWVkIHRvIGJlIGNhbGxlZCBhZnRlclxuICAgICAgICAgICAgLy8gc3RhZ2UucmVuZGVyLCBsaWtlIGZpbmlzaFxuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZEV2ZW50cy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgIGRlZmVycmVkQ2xpcHMucHVzaChjbGlwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgZmluaXNoZWQgY2xpcFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjspIHtcbiAgICAgICAgICAgIGlmIChjbGlwc1tpXS5fbmVlZHNSZW1vdmUpIHtcbiAgICAgICAgICAgICAgICBjbGlwc1tpXSA9IGNsaXBzW2xlbi0xXTtcbiAgICAgICAgICAgICAgICBjbGlwcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBsZW4tLTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGVuID0gZGVmZXJyZWRFdmVudHMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBkZWZlcnJlZENsaXBzW2ldLmZpcmUoZGVmZXJyZWRFdmVudHNbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdGltZSA9IHRpbWU7XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdmcmFtZScsIGRlbHRhKTtcblxuICAgICAgICBpZiAodGhpcy5zdGFnZSAmJiB0aGlzLnN0YWdlLnJlbmRlcikge1xuICAgICAgICAgICAgdGhpcy5zdGFnZS5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogU3RhcnQgcnVubmluZyBhbmltYXRpb25cbiAgICAgKi9cbiAgICBzdGFydDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5fcnVubmluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuX3RpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgIHRoaXMuX3BhdXNlZFRpbWUgPSAwO1xuXG4gICAgICAgIHZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB2ZW5kb3IucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAoKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fcnVubmluZykge1xuXG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFzZWxmLl9wYXVzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fdXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xuXG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBTdG9wIHJ1bm5pbmcgYW5pbWF0aW9uXG4gICAgICovXG4gICAgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9ydW5uaW5nID0gZmFsc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBhdXNlXG4gICAgICovXG4gICAgcGF1c2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9wYXVzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3BhdXNlU3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgdGhpcy5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXN1bWVcbiAgICAgKi9cbiAgICByZXN1bWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3BhdXNlZCkge1xuICAgICAgICAgICAgdGhpcy5fcGF1c2VkVGltZSArPSBEYXRlLm5vdygpIC0gdGhpcy5fcGF1c2VTdGFydDtcbiAgICAgICAgICAgIHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbGwgY2xpcHNcbiAgICAgKi9cbiAgICByZW1vdmVDbGlwc0FsbDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9jbGlwcyA9IFtdO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGFuaW1hdG9yXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSB0YXJnZXRcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IFtvcHRpb25zLmxvb3BdXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IFtvcHRpb25zLmdldHRlcl1cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gW29wdGlvbnMuc2V0dGVyXVxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBbb3B0aW9ucy5pbnRlcnBvbGF0ZXJdXG4gICAgICogQHJldHVybiB7Y2xheS5hbmltYXRpb24uQW5pbWF0b3J9XG4gICAgICovXG4gICAgYW5pbWF0ZTogZnVuY3Rpb24gKHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIGFuaW1hdG9yID0gbmV3IEFuaW1hdG9yKFxuICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgb3B0aW9ucy5sb29wLFxuICAgICAgICAgICAgb3B0aW9ucy5nZXR0ZXIsXG4gICAgICAgICAgICBvcHRpb25zLnNldHRlcixcbiAgICAgICAgICAgIG9wdGlvbnMuaW50ZXJwb2xhdGVyXG4gICAgICAgICk7XG4gICAgICAgIGFuaW1hdG9yLmFuaW1hdGlvbiA9IHRoaXM7XG4gICAgICAgIHJldHVybiBhbmltYXRvcjtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgVGltZWxpbmU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL1RpbWVsaW5lLmpzXG4vLyBtb2R1bGUgaWQgPSA0NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///46\n");

/***/ }),
/* 47 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("function Handler(action, context) {\n    this.action = action;\n    this.context = context;\n}\n/**\n * @mixin\n * @alias clay.core.mixin.notifier\n */\nvar notifier = {\n    /**\n     * Trigger event\n     * @param  {string} name\n     */\n    trigger: function(name) {\n        if (!this.hasOwnProperty('__handlers__')) {\n            return;\n        }\n        if (!this.__handlers__.hasOwnProperty(name)) {\n            return;\n        }\n\n        var hdls = this.__handlers__[name];\n        var l = hdls.length, i = -1, args = arguments;\n        // Optimize advise from backbone\n        switch (args.length) {\n            case 1:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context);\n                }\n                return;\n            case 2:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context, args[1]);\n                }\n                return;\n            case 3:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context, args[1], args[2]);\n                }\n                return;\n            case 4:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context, args[1], args[2], args[3]);\n                }\n                return;\n            case 5:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context, args[1], args[2], args[3], args[4]);\n                }\n                return;\n            default:\n                while (++i < l) {\n                    hdls[i].action.apply(hdls[i].context, Array.prototype.slice.call(args, 1));\n                }\n                return;\n        }\n    },\n    /**\n     * Register event handler\n     * @param  {string} name\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    on: function(name, action, context) {\n        if (!name || !action) {\n            return;\n        }\n        var handlers = this.__handlers__ || (this.__handlers__={});\n        if (!handlers[name]) {\n            handlers[name] = [];\n        }\n        else {\n            if (this.has(name, action)) {\n                return;\n            }\n        }\n        var handler = new Handler(action, context || this);\n        handlers[name].push(handler);\n\n        return this;\n    },\n\n    /**\n     * Register event, event will only be triggered once and then removed\n     * @param  {string} name\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    once: function(name, action, context) {\n        if (!name || !action) {\n            return;\n        }\n        var self = this;\n        function wrapper() {\n            self.off(name, wrapper);\n            action.apply(this, arguments);\n        }\n        return this.on(name, wrapper, context);\n    },\n\n    /**\n     * Alias of once('before' + name)\n     * @param  {string} name\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    before: function(name, action, context) {\n        if (!name || !action) {\n            return;\n        }\n        name = 'before' + name;\n        return this.on(name, action, context);\n    },\n\n    /**\n     * Alias of once('after' + name)\n     * @param  {string} name\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    after: function(name, action, context) {\n        if (!name || !action) {\n            return;\n        }\n        name = 'after' + name;\n        return this.on(name, action, context);\n    },\n\n    /**\n     * Alias of on('success')\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    success: function(action, context) {\n        return this.once('success', action, context);\n    },\n\n    /**\n     * Alias of on('error')\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    error: function(action, context) {\n        return this.once('error', action, context);\n    },\n\n    /**\n     * Remove event listener\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    off: function(name, action) {\n\n        var handlers = this.__handlers__ || (this.__handlers__={});\n\n        if (!action) {\n            handlers[name] = [];\n            return;\n        }\n        if (handlers[name]) {\n            var hdls = handlers[name];\n            var retains = [];\n            for (var i = 0; i < hdls.length; i++) {\n                if (action && hdls[i].action !== action) {\n                    retains.push(hdls[i]);\n                }\n            }\n            handlers[name] = retains;\n        }\n\n        return this;\n    },\n\n    /**\n     * If registered the event handler\n     * @param  {string}  name\n     * @param  {Function}  action\n     * @return {boolean}\n     */\n    has: function(name, action) {\n        var handlers = this.__handlers__;\n\n        if (! handlers ||\n            ! handlers[name]) {\n            return false;\n        }\n        var hdls = handlers[name];\n        for (var i = 0; i < hdls.length; i++) {\n            if (hdls[i].action === action) {\n                return true;\n            }\n        }\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (notifier);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb3JlL21peGluL25vdGlmaWVyLmpzP2ZjZjIiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gSGFuZGxlcihhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB0aGlzLmFjdGlvbiA9IGFjdGlvbjtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xufVxuLyoqXG4gKiBAbWl4aW5cbiAqIEBhbGlhcyBjbGF5LmNvcmUubWl4aW4ubm90aWZpZXJcbiAqL1xudmFyIG5vdGlmaWVyID0ge1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgZXZlbnRcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWVcbiAgICAgKi9cbiAgICB0cmlnZ2VyOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eSgnX19oYW5kbGVyc19fJykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX19oYW5kbGVyc19fLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGRscyA9IHRoaXMuX19oYW5kbGVyc19fW25hbWVdO1xuICAgICAgICB2YXIgbCA9IGhkbHMubGVuZ3RoLCBpID0gLTEsIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIC8vIE9wdGltaXplIGFkdmlzZSBmcm9tIGJhY2tib25lXG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpIDwgbCkge1xuICAgICAgICAgICAgICAgICAgICBoZGxzW2ldLmFjdGlvbi5jYWxsKGhkbHNbaV0uY29udGV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpIDwgbCkge1xuICAgICAgICAgICAgICAgICAgICBoZGxzW2ldLmFjdGlvbi5jYWxsKGhkbHNbaV0uY29udGV4dCwgYXJnc1sxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpIDwgbCkge1xuICAgICAgICAgICAgICAgICAgICBoZGxzW2ldLmFjdGlvbi5jYWxsKGhkbHNbaV0uY29udGV4dCwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpIDwgbCkge1xuICAgICAgICAgICAgICAgICAgICBoZGxzW2ldLmFjdGlvbi5jYWxsKGhkbHNbaV0uY29udGV4dCwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpIDwgbCkge1xuICAgICAgICAgICAgICAgICAgICBoZGxzW2ldLmFjdGlvbi5jYWxsKGhkbHNbaV0uY29udGV4dCwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSwgYXJnc1s0XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgd2hpbGUgKCsraSA8IGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaGRsc1tpXS5hY3Rpb24uYXBwbHkoaGRsc1tpXS5jb250ZXh0LCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzLCAxKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXIgZXZlbnQgaGFuZGxlclxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBhY3Rpb25cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFtjb250ZXh0XVxuICAgICAqIEBjaGFpbmFibGVcbiAgICAgKi9cbiAgICBvbjogZnVuY3Rpb24obmFtZSwgYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICAgIGlmICghbmFtZSB8fCAhYWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5fX2hhbmRsZXJzX18gfHwgKHRoaXMuX19oYW5kbGVyc19fPXt9KTtcbiAgICAgICAgaWYgKCFoYW5kbGVyc1tuYW1lXSkge1xuICAgICAgICAgICAgaGFuZGxlcnNbbmFtZV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmhhcyhuYW1lLCBhY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBoYW5kbGVyID0gbmV3IEhhbmRsZXIoYWN0aW9uLCBjb250ZXh0IHx8IHRoaXMpO1xuICAgICAgICBoYW5kbGVyc1tuYW1lXS5wdXNoKGhhbmRsZXIpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBldmVudCwgZXZlbnQgd2lsbCBvbmx5IGJlIHRyaWdnZXJlZCBvbmNlIGFuZCB0aGVuIHJlbW92ZWRcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gYWN0aW9uXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBbY29udGV4dF1cbiAgICAgKiBAY2hhaW5hYmxlXG4gICAgICovXG4gICAgb25jZTogZnVuY3Rpb24obmFtZSwgYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICAgIGlmICghbmFtZSB8fCAhYWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBmdW5jdGlvbiB3cmFwcGVyKCkge1xuICAgICAgICAgICAgc2VsZi5vZmYobmFtZSwgd3JhcHBlcik7XG4gICAgICAgICAgICBhY3Rpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5vbihuYW1lLCB3cmFwcGVyLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2Ygb25jZSgnYmVmb3JlJyArIG5hbWUpXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGFjdGlvblxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW2NvbnRleHRdXG4gICAgICogQGNoYWluYWJsZVxuICAgICAqL1xuICAgIGJlZm9yZTogZnVuY3Rpb24obmFtZSwgYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICAgIGlmICghbmFtZSB8fCAhYWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbmFtZSA9ICdiZWZvcmUnICsgbmFtZTtcbiAgICAgICAgcmV0dXJuIHRoaXMub24obmFtZSwgYWN0aW9uLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2Ygb25jZSgnYWZ0ZXInICsgbmFtZSlcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gYWN0aW9uXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBbY29udGV4dF1cbiAgICAgKiBAY2hhaW5hYmxlXG4gICAgICovXG4gICAgYWZ0ZXI6IGZ1bmN0aW9uKG5hbWUsIGFjdGlvbiwgY29udGV4dCkge1xuICAgICAgICBpZiAoIW5hbWUgfHwgIWFjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG5hbWUgPSAnYWZ0ZXInICsgbmFtZTtcbiAgICAgICAgcmV0dXJuIHRoaXMub24obmFtZSwgYWN0aW9uLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2Ygb24oJ3N1Y2Nlc3MnKVxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBhY3Rpb25cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFtjb250ZXh0XVxuICAgICAqIEBjaGFpbmFibGVcbiAgICAgKi9cbiAgICBzdWNjZXNzOiBmdW5jdGlvbihhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub25jZSgnc3VjY2VzcycsIGFjdGlvbiwgY29udGV4dCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIG9mIG9uKCdlcnJvcicpXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGFjdGlvblxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW2NvbnRleHRdXG4gICAgICogQGNoYWluYWJsZVxuICAgICAqL1xuICAgIGVycm9yOiBmdW5jdGlvbihhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub25jZSgnZXJyb3InLCBhY3Rpb24sIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXJcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gYWN0aW9uXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBbY29udGV4dF1cbiAgICAgKiBAY2hhaW5hYmxlXG4gICAgICovXG4gICAgb2ZmOiBmdW5jdGlvbihuYW1lLCBhY3Rpb24pIHtcblxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLl9faGFuZGxlcnNfXyB8fCAodGhpcy5fX2hhbmRsZXJzX189e30pO1xuXG4gICAgICAgIGlmICghYWN0aW9uKSB7XG4gICAgICAgICAgICBoYW5kbGVyc1tuYW1lXSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYW5kbGVyc1tuYW1lXSkge1xuICAgICAgICAgICAgdmFyIGhkbHMgPSBoYW5kbGVyc1tuYW1lXTtcbiAgICAgICAgICAgIHZhciByZXRhaW5zID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhkbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uICYmIGhkbHNbaV0uYWN0aW9uICE9PSBhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0YWlucy5wdXNoKGhkbHNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhhbmRsZXJzW25hbWVdID0gcmV0YWlucztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJZiByZWdpc3RlcmVkIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSAgbmFtZVxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSAgYWN0aW9uXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBoYXM6IGZ1bmN0aW9uKG5hbWUsIGFjdGlvbikge1xuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLl9faGFuZGxlcnNfXztcblxuICAgICAgICBpZiAoISBoYW5kbGVycyB8fFxuICAgICAgICAgICAgISBoYW5kbGVyc1tuYW1lXSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBoZGxzID0gaGFuZGxlcnNbbmFtZV07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGRscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGhkbHNbaV0uYWN0aW9uID09PSBhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IG5vdGlmaWVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvY29yZS9taXhpbi9ub3RpZmllci5qc1xuLy8gbW9kdWxlIGlkID0gNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///47\n");

/***/ }),
/* 48 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_GLInfo__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__math_Vector2__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__gpu_ProgramManager__ = __webpack_require__(131);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__shader_source_prez_glsl_js__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__glmatrix_vec3__ = __webpack_require__(5);\n// TODO Resources like shader, texture, geometry reference management\n// Trace and find out which shader, texture, geometry can be destroyed\n\n\n\n\n\n\n\n\n\n// Light header\n\n\n\n__WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_8__shader_source_prez_glsl_js__[\"a\" /* default */]);\n\n\n\n\nvar mat4Create = __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].create;\n\nvar errorShader = {};\n\nfunction defaultGetMaterial(renderable) {\n    return renderable.material;\n}\nfunction defaultGetUniform(renderable, material, symbol) {\n    return material.uniforms[symbol].value;\n}\nfunction defaultIsMaterialChanged(renderabled, prevRenderable, material, prevMaterial) {\n    return material !== prevMaterial;\n}\nfunction defaultIfRender(renderable) {\n    return true;\n}\n\nfunction noop() {}\n\nvar attributeBufferTypeMap = {\n    float: __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].FLOAT,\n    byte: __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].BYTE,\n    ubyte: __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].UNSIGNED_BYTE,\n    short: __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].SHORT,\n    ushort: __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].UNSIGNED_SHORT\n};\n\nfunction VertexArrayObject(availableAttributes, availableAttributeSymbols, indicesBuffer) {\n    this.availableAttributes = availableAttributes;\n    this.availableAttributeSymbols = availableAttributeSymbols;\n    this.indicesBuffer = indicesBuffer;\n\n    this.vao = null;\n}\n\nfunction PlaceHolderTexture(renderer) {\n    var blankCanvas;\n    var webglTexture;\n    this.bind = function (renderer) {\n        if (!blankCanvas) {\n            // TODO Environment not support createCanvas.\n            blankCanvas = __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].createCanvas();\n            blankCanvas.width = blankCanvas.height = 1;\n            blankCanvas.getContext('2d');\n        }\n\n        var gl = renderer.gl;\n        var firstBind = !webglTexture;\n        if (firstBind) {\n            webglTexture = gl.createTexture();\n        }\n        gl.bindTexture(gl.TEXTURE_2D, webglTexture);\n        if (firstBind) {\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, blankCanvas);\n        }\n    };\n    this.unbind = function (renderer) {\n        renderer.gl.bindTexture(renderer.gl.TEXTURE_2D, null);\n    };\n    this.isRenderable = function () {\n        return true;\n    };\n}\n\n/**\n * @constructor clay.Renderer\n * @extends clay.core.Base\n */\nvar Renderer = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Renderer# */ {\n\n        /**\n         * @type {HTMLCanvasElement}\n         * @readonly\n         */\n        canvas: null,\n\n        /**\n         * Canvas width, set by resize method\n         * @type {number}\n         * @private\n         */\n        _width: 100,\n\n        /**\n         * Canvas width, set by resize method\n         * @type {number}\n         * @private\n         */\n        _height: 100,\n\n        /**\n         * Device pixel ratio, set by setDevicePixelRatio method\n         * Specially for high defination display\n         * @see http://www.khronos.org/webgl/wiki/HandlingHighDPI\n         * @type {number}\n         * @private\n         */\n        devicePixelRatio: (typeof window !== 'undefined' && window.devicePixelRatio) || 1.0,\n\n        /**\n         * Clear color\n         * @type {number[]}\n         */\n        clearColor: [0.0, 0.0, 0.0, 0.0],\n\n        /**\n         * Default:\n         *     _gl.COLOR_BUFFER_BIT | _gl.DEPTH_BUFFER_BIT | _gl.STENCIL_BUFFER_BIT\n         * @type {number}\n         */\n        clearBit: 17664,\n\n        // Settings when getting context\n        // http://www.khronos.org/registry/webgl/specs/latest/#2.4\n\n        /**\n         * If enable log depth buffer\n         * @type {boolean}\n         */\n        logDepthBuffer: false,\n        /**\n         * If enable alpha, default true\n         * @type {boolean}\n         */\n        alpha: true,\n        /**\n         * If enable depth buffer, default true\n         * @type {boolean}\n         */\n        depth: true,\n        /**\n         * If enable stencil buffer, default false\n         * @type {boolean}\n         */\n        stencil: false,\n        /**\n         * If enable antialias, default true\n         * @type {boolean}\n         */\n        antialias: true,\n        /**\n         * If enable premultiplied alpha, default true\n         * @type {boolean}\n         */\n        premultipliedAlpha: true,\n        /**\n         * If preserve drawing buffer, default false\n         * @type {boolean}\n         */\n        preserveDrawingBuffer: false,\n        /**\n         * If throw context error, usually turned on in debug mode\n         * @type {boolean}\n         */\n        throwError: true,\n        /**\n         * WebGL Context created from given canvas\n         * @type {WebGLRenderingContext}\n         */\n        gl: null,\n        /**\n         * Renderer viewport, read-only, can be set by setViewport method\n         * @type {Object}\n         */\n        viewport: {},\n\n        /**\n         * Max joint number\n         * @type {number}\n         */\n        maxJointNumber: 20,\n\n        // Set by FrameBuffer#bind\n        __currentFrameBuffer: null,\n\n        _viewportStack: [],\n        _clearStack: [],\n\n        _sceneRendering: null\n    };\n}, function () {\n\n    if (!this.canvas) {\n        this.canvas = __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].createCanvas();\n    }\n    var canvas = this.canvas;\n    try {\n        var opts = {\n            alpha: this.alpha,\n            depth: this.depth,\n            stencil: this.stencil,\n            antialias: this.antialias,\n            premultipliedAlpha: this.premultipliedAlpha,\n            preserveDrawingBuffer: this.preserveDrawingBuffer\n        };\n\n        this.gl = canvas.getContext('webgl', opts)\n            || canvas.getContext('experimental-webgl', opts);\n\n        if (!this.gl) {\n            throw new Error();\n        }\n\n        this._glinfo = new __WEBPACK_IMPORTED_MODULE_1__core_GLInfo__[\"a\" /* default */](this.gl);\n\n        if (this.gl.targetRenderer) {\n            console.error('Already created a renderer');\n        }\n        this.gl.targetRenderer = this;\n\n        this.resize();\n    }\n    catch (e) {\n        throw 'Error creating WebGL Context ' + e;\n    }\n\n    // Init managers\n    this._programMgr = new __WEBPACK_IMPORTED_MODULE_6__gpu_ProgramManager__[\"a\" /* default */](this);\n\n    this._placeholderTexture = new PlaceHolderTexture(this);\n},\n/** @lends clay.Renderer.prototype. **/\n{\n    /**\n     * Resize the canvas\n     * @param {number} width\n     * @param {number} height\n     */\n    resize: function(width, height) {\n        var canvas = this.canvas;\n        // http://www.khronos.org/webgl/wiki/HandlingHighDPI\n        // set the display size of the canvas.\n        var dpr = this.devicePixelRatio;\n        if (width != null) {\n            if (canvas.style) {\n                canvas.style.width = width + 'px';\n                canvas.style.height = height + 'px';\n            }\n            // set the size of the drawingBuffer\n            canvas.width = width * dpr;\n            canvas.height = height * dpr;\n\n            this._width = width;\n            this._height = height;\n        }\n        else {\n            this._width = canvas.width / dpr;\n            this._height = canvas.height / dpr;\n        }\n\n        this.setViewport(0, 0, this._width, this._height);\n    },\n\n    /**\n     * Get renderer width\n     * @return {number}\n     */\n    getWidth: function () {\n        return this._width;\n    },\n\n    /**\n     * Get renderer height\n     * @return {number}\n     */\n    getHeight: function () {\n        return this._height;\n    },\n\n    /**\n     * Get viewport aspect,\n     * @return {number}\n     */\n    getViewportAspect: function () {\n        var viewport = this.viewport;\n        return viewport.width / viewport.height;\n    },\n\n    /**\n     * Set devicePixelRatio\n     * @param {number} devicePixelRatio\n     */\n    setDevicePixelRatio: function(devicePixelRatio) {\n        this.devicePixelRatio = devicePixelRatio;\n        this.resize(this._width, this._height);\n    },\n\n    /**\n     * Get devicePixelRatio\n     * @param {number} devicePixelRatio\n     */\n    getDevicePixelRatio: function () {\n        return this.devicePixelRatio;\n    },\n\n    /**\n     * Get WebGL extension\n     * @param {string} name\n     * @return {object}\n     */\n    getGLExtension: function (name) {\n        return this._glinfo.getExtension(name);\n    },\n\n    /**\n     * Get WebGL parameter\n     * @param {string} name\n     * @return {*}\n     */\n    getGLParameter: function (name) {\n        return this._glinfo.getParameter(name);\n    },\n\n    /**\n     * Set rendering viewport\n     * @param {number|Object} x\n     * @param {number} [y]\n     * @param {number} [width]\n     * @param {number} [height]\n     * @param {number} [devicePixelRatio]\n     *        Defaultly use the renderere devicePixelRatio\n     *        It needs to be 1 when setViewport is called by frameBuffer\n     *\n     * @example\n     *  setViewport(0,0,width,height,1)\n     *  setViewport({\n     *      x: 0,\n     *      y: 0,\n     *      width: width,\n     *      height: height,\n     *      devicePixelRatio: 1\n     *  })\n     */\n    setViewport: function (x, y, width, height, dpr) {\n\n        if (typeof x === 'object') {\n            var obj = x;\n\n            x = obj.x;\n            y = obj.y;\n            width = obj.width;\n            height = obj.height;\n            dpr = obj.devicePixelRatio;\n        }\n        dpr = dpr || this.devicePixelRatio;\n\n        this.gl.viewport(\n            x * dpr, y * dpr, width * dpr, height * dpr\n        );\n        // Use a fresh new object, not write property.\n        this.viewport = {\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n            devicePixelRatio: dpr\n        };\n    },\n\n    /**\n     * Push current viewport into a stack\n     */\n    saveViewport: function () {\n        this._viewportStack.push(this.viewport);\n    },\n\n    /**\n     * Pop viewport from stack, restore in the renderer\n     */\n    restoreViewport: function () {\n        if (this._viewportStack.length > 0) {\n            this.setViewport(this._viewportStack.pop());\n        }\n    },\n\n    /**\n     * Push current clear into a stack\n     */\n    saveClear: function () {\n        this._clearStack.push({\n            clearBit: this.clearBit,\n            clearColor: this.clearColor\n        });\n    },\n\n    /**\n     * Pop clear from stack, restore in the renderer\n     */\n    restoreClear: function () {\n        if (this._clearStack.length > 0) {\n            var opt = this._clearStack.pop();\n            this.clearColor = opt.clearColor;\n            this.clearBit = opt.clearBit;\n        }\n    },\n\n    bindSceneRendering: function (scene) {\n        this._sceneRendering = scene;\n    },\n\n    /**\n     * Render the scene in camera to the screen or binded offline framebuffer\n     * @param  {clay.Scene}       scene\n     * @param  {clay.Camera}      camera\n     * @param  {boolean}     [notUpdateScene] If not call the scene.update methods in the rendering, default true\n     * @param  {boolean}     [preZ]           If use preZ optimization, default false\n     * @return {IRenderInfo}\n     */\n    render: function(scene, camera, notUpdateScene, preZ) {\n        var _gl = this.gl;\n\n        var clearColor = this.clearColor;\n\n        if (this.clearBit) {\n\n            // Must set depth and color mask true before clear\n            _gl.colorMask(true, true, true, true);\n            _gl.depthMask(true);\n            var viewport = this.viewport;\n            var needsScissor = false;\n            var viewportDpr = viewport.devicePixelRatio;\n            if (viewport.width !== this._width || viewport.height !== this._height\n                || (viewportDpr && viewportDpr !== this.devicePixelRatio)\n                || viewport.x || viewport.y\n            ) {\n                needsScissor = true;\n                // http://stackoverflow.com/questions/11544608/how-to-clear-a-rectangle-area-in-webgl\n                // Only clear the viewport\n                _gl.enable(_gl.SCISSOR_TEST);\n                _gl.scissor(viewport.x * viewportDpr, viewport.y * viewportDpr, viewport.width * viewportDpr, viewport.height * viewportDpr);\n            }\n            _gl.clearColor(clearColor[0], clearColor[1], clearColor[2], clearColor[3]);\n            _gl.clear(this.clearBit);\n            if (needsScissor) {\n                _gl.disable(_gl.SCISSOR_TEST);\n            }\n        }\n\n        // If the scene have been updated in the prepass like shadow map\n        // There is no need to update it again\n        if (!notUpdateScene) {\n            scene.update(false);\n        }\n        scene.updateLights();\n\n        camera = camera || scene.getMainCamera();\n        if (!camera) {\n            console.error('Can\\'t find camera in the scene.');\n            return;\n        }\n        camera.update();\n        var renderList = scene.updateRenderList(camera, true);\n\n        this._sceneRendering = scene;\n\n        var opaqueList = renderList.opaque;\n        var transparentList = renderList.transparent;\n        var sceneMaterial = scene.material;\n\n        scene.trigger('beforerender', this, scene, camera, renderList);\n\n        // Render pre z\n        if (preZ) {\n            this.renderPreZ(opaqueList, scene, camera);\n            _gl.depthFunc(_gl.LEQUAL);\n        }\n        else {\n            _gl.depthFunc(_gl.LESS);\n        }\n\n        // Update the depth of transparent list.\n        var worldViewMat = mat4Create();\n        var posViewSpace = __WEBPACK_IMPORTED_MODULE_10__glmatrix_vec3__[\"a\" /* default */].create();\n        for (var i = 0; i < transparentList.length; i++) {\n            var renderable = transparentList[i];\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].multiplyAffine(worldViewMat, camera.viewMatrix.array, renderable.worldTransform.array);\n            __WEBPACK_IMPORTED_MODULE_10__glmatrix_vec3__[\"a\" /* default */].transformMat4(posViewSpace, renderable.position.array, worldViewMat);\n            renderable.__depth = posViewSpace[2];\n        }\n\n        // Render opaque list\n        this.renderPass(opaqueList, camera, {\n            getMaterial: function (renderable) {\n                return sceneMaterial || renderable.material;\n            },\n            sortCompare: this.opaqueSortCompare\n        });\n\n        this.renderPass(transparentList, camera, {\n            getMaterial: function (renderable) {\n                return sceneMaterial || renderable.material;\n            },\n            sortCompare: this.transparentSortCompare\n        });\n\n        scene.trigger('afterrender', this, scene, camera, renderList);\n\n        // Cleanup\n        this._sceneRendering = null;\n    },\n\n    getProgram: function (renderable, renderMaterial, scene) {\n        renderMaterial = renderMaterial || renderable.material;\n        return this._programMgr.getProgram(renderable, renderMaterial, scene, this);\n    },\n\n    validateProgram: function (program) {\n        if (program.__error) {\n            var errorMsg = program.__error;\n            if (errorShader[program.__uid__]) {\n                return;\n            }\n            errorShader[program.__uid__] = true;\n\n            if (this.throwError) {\n                throw new Error(errorMsg);\n            }\n            else {\n                this.trigger('error', errorMsg);\n            }\n\n        }\n    },\n\n    updatePrograms: function (list, scene, passConfig) {\n        var getMaterial = (passConfig && passConfig.getMaterial) || defaultGetMaterial;\n        scene = scene || null;\n        for (var i = 0; i < list.length; i++) {\n            var renderable = list[i];\n            var renderMaterial = getMaterial.call(this, renderable);\n            if (i > 0) {\n                var prevRenderable = list[i - 1];\n                var prevJointsLen = prevRenderable.joints ? prevRenderable.joints.length : 0;\n                var jointsLen = renderable.joints ? renderable.joints.length : 0;\n                // Keep program not change if joints, material, lightGroup are same of two renderables.\n                if (jointsLen === prevJointsLen\n                    && renderable.material === prevRenderable.material\n                    && renderable.lightGroup === prevRenderable.lightGroup\n                ) {\n                    renderable.__program = prevRenderable.__program;\n                    continue;\n                }\n            }\n\n            var program = this._programMgr.getProgram(renderable, renderMaterial, scene, this);\n\n            this.validateProgram(program);\n\n            renderable.__program = program;\n        }\n    },\n\n    /**\n     * Render a single renderable list in camera in sequence\n     * @param {clay.Renderable[]} list List of all renderables.\n     * @param {clay.Camera} [camera] Camera provide view matrix and porjection matrix. It can be null.\n     * @param {Object} [passConfig]\n     * @param {Function} [passConfig.getMaterial] Get renderable material.\n     * @param {Function} [passConfig.getUniform] Get material uniform value.\n     * @param {Function} [passConfig.isMaterialChanged] If material changed.\n     * @param {Function} [passConfig.beforeRender] Before render each renderable.\n     * @param {Function} [passConfig.afterRender] After render each renderable\n     * @param {Function} [passConfig.ifRender] If render the renderable.\n     * @param {Function} [passConfig.sortCompare] Sort compare function.\n     * @return {IRenderInfo}\n     */\n    renderPass: function(list, camera, passConfig) {\n        this.trigger('beforerenderpass', this, list, camera, passConfig);\n\n        passConfig = passConfig || {};\n        passConfig.getMaterial = passConfig.getMaterial || defaultGetMaterial;\n        passConfig.getUniform = passConfig.getUniform || defaultGetUniform;\n        // PENDING Better solution?\n        passConfig.isMaterialChanged = passConfig.isMaterialChanged || defaultIsMaterialChanged;\n        passConfig.beforeRender = passConfig.beforeRender || noop;\n        passConfig.afterRender = passConfig.afterRender || noop;\n\n        var ifRenderObject = passConfig.ifRender || defaultIfRender;\n\n        this.updatePrograms(list, this._sceneRendering, passConfig);\n        if (passConfig.sortCompare) {\n            list.sort(passConfig.sortCompare);\n        }\n\n        // Some common builtin uniforms\n        var viewport = this.viewport;\n        var vDpr = viewport.devicePixelRatio;\n        var viewportUniform = [\n            viewport.x * vDpr, viewport.y * vDpr,\n            viewport.width * vDpr, viewport.height * vDpr\n        ];\n        var windowDpr = this.devicePixelRatio;\n        var windowSizeUniform = this.__currentFrameBuffer\n            ? [this.__currentFrameBuffer.getTextureWidth(), this.__currentFrameBuffer.getTextureHeight()]\n            : [this._width * windowDpr, this._height * windowDpr];\n        // DEPRECATED\n        var viewportSizeUniform = [\n            viewportUniform[2], viewportUniform[3]\n        ];\n        var time = Date.now();\n\n        // Calculate view and projection matrix\n        if (camera) {\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].copy(matrices.VIEW, camera.viewMatrix.array);\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].copy(matrices.PROJECTION, camera.projectionMatrix.array);\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].copy(matrices.VIEWINVERSE, camera.worldTransform.array);\n        }\n        else {\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].identity(matrices.VIEW);\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].identity(matrices.PROJECTION);\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].identity(matrices.VIEWINVERSE);\n        }\n        __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].multiply(matrices.VIEWPROJECTION, matrices.PROJECTION, matrices.VIEW);\n        __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].invert(matrices.PROJECTIONINVERSE, matrices.PROJECTION);\n        __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].invert(matrices.VIEWPROJECTIONINVERSE, matrices.VIEWPROJECTION);\n\n        var _gl = this.gl;\n        var scene = this._sceneRendering;\n\n        var prevMaterial;\n        var prevProgram;\n        var prevRenderable;\n\n        // Status\n        var depthTest, depthMask;\n        var culling, cullFace, frontFace;\n        var transparent;\n        var drawID;\n        var currentVAO;\n        var materialTakesTextureSlot;\n\n        // var vaoExt = this.getGLExtension('OES_vertex_array_object');\n        // not use vaoExt, some platforms may mess it up.\n        var vaoExt = null;\n\n        for (var i = 0; i < list.length; i++) {\n            var renderable = list[i];\n            var isSceneNode = renderable.worldTransform != null;\n            var worldM;\n\n            if (!ifRenderObject(renderable)) {\n                continue;\n            }\n\n            // Skinned mesh will transformed to joint space. Ignore the mesh transform\n            if (isSceneNode) {\n                worldM = (renderable.isSkinnedMesh && renderable.isSkinnedMesh())\n                    // TODO\n                    ? (renderable.offsetMatrix ? renderable.offsetMatrix.array :matrices.IDENTITY)\n                    : renderable.worldTransform.array;\n            }\n            var geometry = renderable.geometry;\n            var material = passConfig.getMaterial.call(this, renderable);\n\n            var program = renderable.__program;\n            var shader = material.shader;\n\n            var currentDrawID = geometry.__uid__ + '-' + program.__uid__;\n            var drawIDChanged = currentDrawID !== drawID;\n            drawID = currentDrawID;\n            if (drawIDChanged && vaoExt) {\n                // TODO Seems need to be bound to null immediately (or before bind another program?) if vao is changed\n                vaoExt.bindVertexArrayOES(null);\n            }\n            if (isSceneNode) {\n                __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].copy(matrices.WORLD, worldM);\n                __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].multiply(matrices.WORLDVIEWPROJECTION, matrices.VIEWPROJECTION, worldM);\n                __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].multiplyAffine(matrices.WORLDVIEW, matrices.VIEW, worldM);\n                if (shader.matrixSemantics.WORLDINVERSE ||\n                    shader.matrixSemantics.WORLDINVERSETRANSPOSE) {\n                    __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].invert(matrices.WORLDINVERSE, worldM);\n                }\n                if (shader.matrixSemantics.WORLDVIEWINVERSE ||\n                    shader.matrixSemantics.WORLDVIEWINVERSETRANSPOSE) {\n                    __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].invert(matrices.WORLDVIEWINVERSE, matrices.WORLDVIEW);\n                }\n                if (shader.matrixSemantics.WORLDVIEWPROJECTIONINVERSE ||\n                    shader.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE) {\n                    __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].invert(matrices.WORLDVIEWPROJECTIONINVERSE, matrices.WORLDVIEWPROJECTION);\n                }\n            }\n\n            // Before render hook\n            renderable.beforeRender && renderable.beforeRender(this);\n            passConfig.beforeRender.call(this, renderable, material, prevMaterial);\n\n            var programChanged = program !== prevProgram;\n            if (programChanged) {\n                // Set lights number\n                program.bind(this);\n                // Set some common uniforms\n                program.setUniformOfSemantic(_gl, 'VIEWPORT', viewportUniform);\n                program.setUniformOfSemantic(_gl, 'WINDOW_SIZE', windowSizeUniform);\n                if (camera) {\n                    program.setUniformOfSemantic(_gl, 'NEAR', camera.near);\n                    program.setUniformOfSemantic(_gl, 'FAR', camera.far);\n\n                    if (this.logDepthBuffer) {\n                        // TODO Semantic?\n                        program.setUniformOfSemantic(_gl, 'LOG_DEPTH_BUFFER_FC', 2.0 / (Math.log(camera.far + 1.0 ) / Math.LN2));\n                    }\n                }\n                program.setUniformOfSemantic(_gl, 'DEVICEPIXELRATIO', vDpr);\n                program.setUniformOfSemantic(_gl, 'TIME', time);\n                // DEPRECATED\n                program.setUniformOfSemantic(_gl, 'VIEWPORT_SIZE', viewportSizeUniform);\n\n                // Set lights uniforms\n                // TODO needs optimized\n                if (scene) {\n                    scene.setLightUniforms(program, renderable.lightGroup, this);\n                }\n            }\n            else {\n                program = prevProgram;\n            }\n\n            // Program changes also needs reset the materials.\n            if (programChanged || passConfig.isMaterialChanged(\n                renderable, prevRenderable, material, prevMaterial\n            )) {\n                if (material.depthTest !== depthTest) {\n                    material.depthTest ? _gl.enable(_gl.DEPTH_TEST) : _gl.disable(_gl.DEPTH_TEST);\n                    depthTest = material.depthTest;\n                }\n                if (material.depthMask !== depthMask) {\n                    _gl.depthMask(material.depthMask);\n                    depthMask = material.depthMask;\n                }\n                if (material.transparent !== transparent) {\n                    material.transparent ? _gl.enable(_gl.BLEND) : _gl.disable(_gl.BLEND);\n                    transparent = material.transparent;\n                }\n                // TODO cache blending\n                if (material.transparent) {\n                    if (material.blend) {\n                        material.blend(_gl);\n                    }\n                    else {\n                        // Default blend function\n                        _gl.blendEquationSeparate(_gl.FUNC_ADD, _gl.FUNC_ADD);\n                        _gl.blendFuncSeparate(_gl.SRC_ALPHA, _gl.ONE_MINUS_SRC_ALPHA, _gl.ONE, _gl.ONE_MINUS_SRC_ALPHA);\n                    }\n                }\n\n                materialTakesTextureSlot = this._bindMaterial(\n                    renderable, material, program,\n                    prevRenderable || null, prevMaterial || null, prevProgram || null,\n                    passConfig.getUniform\n                );\n                prevMaterial = material;\n            }\n\n            var matrixSemanticKeys = shader.matrixSemanticKeys;\n\n            if (isSceneNode) {\n                for (var k = 0; k < matrixSemanticKeys.length; k++) {\n                    var semantic = matrixSemanticKeys[k];\n                    var semanticInfo = shader.matrixSemantics[semantic];\n                    var matrix = matrices[semantic];\n                    if (semanticInfo.isTranspose) {\n                        var matrixNoTranspose = matrices[semanticInfo.semanticNoTranspose];\n                        __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].transpose(matrix, matrixNoTranspose);\n                    }\n                    program.setUniform(_gl, semanticInfo.type, semanticInfo.symbol, matrix);\n                }\n            }\n\n            if (renderable.cullFace !== cullFace) {\n                cullFace = renderable.cullFace;\n                _gl.cullFace(cullFace);\n            }\n            if (renderable.frontFace !== frontFace) {\n                frontFace = renderable.frontFace;\n                _gl.frontFace(frontFace);\n            }\n            if (renderable.culling !== culling) {\n                culling = renderable.culling;\n                culling ? _gl.enable(_gl.CULL_FACE) : _gl.disable(_gl.CULL_FACE);\n            }\n            // TODO Not update skeleton in each renderable.\n            this._updateSkeleton(renderable, program, materialTakesTextureSlot);\n            if (drawIDChanged) {\n                currentVAO = this._bindVAO(vaoExt, shader, geometry, program);\n            }\n            this._renderObject(renderable, currentVAO, program);\n\n            // After render hook\n            passConfig.afterRender(this, renderable);\n            renderable.afterRender && renderable.afterRender(this);\n\n            prevProgram = program;\n            prevRenderable = renderable;\n        }\n\n        // TODO Seems need to be bound to null immediately if vao is changed?\n        if (vaoExt) {\n            vaoExt.bindVertexArrayOES(null);\n        }\n\n        this.trigger('afterrenderpass', this, list, camera, passConfig);\n    },\n\n    getMaxJointNumber: function () {\n        return this.maxJointNumber;\n    },\n\n    _updateSkeleton: function (object, program, slot) {\n        var _gl = this.gl;\n        var skeleton = object.skeleton;\n        // Set pose matrices of skinned mesh\n        if (skeleton) {\n            // TODO Update before culling.\n            skeleton.update();\n            if (object.joints.length > this.getMaxJointNumber()) {\n                var skinMatricesTexture = skeleton.getSubSkinMatricesTexture(object.__uid__, object.joints);\n                program.useTextureSlot(this, skinMatricesTexture, slot);\n                program.setUniform(_gl, '1i', 'skinMatricesTexture', slot);\n                program.setUniform(_gl, '1f', 'skinMatricesTextureSize', skinMatricesTexture.width);\n            }\n            else {\n                var skinMatricesArray = skeleton.getSubSkinMatrices(object.__uid__, object.joints);\n                program.setUniformOfSemantic(_gl, 'SKIN_MATRIX', skinMatricesArray);\n            }\n        }\n    },\n\n    _renderObject: function (renderable, vao, program) {\n        var _gl = this.gl;\n        var geometry = renderable.geometry;\n\n        var glDrawMode = renderable.mode;\n        if (glDrawMode == null) {\n            glDrawMode = 0x0004;\n        }\n\n        var ext = null;\n        var isInstanced = renderable.isInstancedMesh && renderable.isInstancedMesh();\n        if (isInstanced) {\n            ext = this.getGLExtension('ANGLE_instanced_arrays');\n            if (!ext) {\n                console.warn('Device not support ANGLE_instanced_arrays extension');\n                return;\n            }\n        }\n\n        var instancedAttrLocations;\n        if (isInstanced) {\n            instancedAttrLocations = this._bindInstancedAttributes(renderable, program, ext);\n        }\n\n        if (vao.indicesBuffer) {\n            var uintExt = this.getGLExtension('OES_element_index_uint');\n            var useUintExt = uintExt && (geometry.indices instanceof Uint32Array);\n            var indicesType = useUintExt ? _gl.UNSIGNED_INT : _gl.UNSIGNED_SHORT;\n\n            if (isInstanced) {\n                ext.drawElementsInstancedANGLE(\n                    glDrawMode, vao.indicesBuffer.count, indicesType, 0, renderable.getInstanceCount()\n                );\n            }\n            else {\n                _gl.drawElements(glDrawMode, vao.indicesBuffer.count, indicesType, 0);\n            }\n        }\n        else {\n            if (isInstanced) {\n                ext.drawArraysInstancedANGLE(glDrawMode, 0, geometry.vertexCount, renderable.getInstanceCount());\n            }\n            else {\n                // FIXME Use vertex number in buffer\n                // vertexCount may get the wrong value when geometry forget to mark dirty after update\n                _gl.drawArrays(glDrawMode, 0, geometry.vertexCount);\n            }\n        }\n\n        if (isInstanced) {\n            for (var i = 0; i < instancedAttrLocations.length; i++) {\n                if (!instancedAttrLocations[i].enabled) {\n                    _gl.disableVertexAttribArray(instancedAttrLocations[i].location);\n                }\n                ext.vertexAttribDivisorANGLE(instancedAttrLocations[i].location, 0);\n            }\n        }\n    },\n\n    _bindInstancedAttributes: function (renderable, program, ext) {\n        var _gl = this.gl;\n        var instancedBuffers = renderable.getInstancedAttributesBuffers(this);\n        var locations = [];\n\n        for (var i = 0; i < instancedBuffers.length; i++) {\n            var bufferObj = instancedBuffers[i];\n            var location = program.getAttribLocation(_gl, bufferObj.symbol);\n            if (location < 0) {\n                continue;\n            }\n\n            var glType = attributeBufferTypeMap[bufferObj.type] || _gl.FLOAT;;\n            var isEnabled = program.isAttribEnabled(this, location);\n            if (!program.isAttribEnabled(this, location)) {\n                _gl.enableVertexAttribArray(location);\n            }\n            locations.push({\n                location: location,\n                enabled: isEnabled\n            });\n            _gl.bindBuffer(_gl.ARRAY_BUFFER, bufferObj.buffer);\n            _gl.vertexAttribPointer(location, bufferObj.size, glType, false, 0, 0);\n            ext.vertexAttribDivisorANGLE(location, bufferObj.divisor);\n        }\n\n        return locations;\n    },\n\n    _bindMaterial: function (renderable, material, program, prevRenderable, prevMaterial, prevProgram, getUniformValue) {\n        var _gl = this.gl;\n        // PENDING Same texture in different material take different slot?\n\n        // May use shader of other material if shader code are same\n        var sameProgram = prevProgram === program;\n\n        var currentTextureSlot = program.currentTextureSlot();\n        var enabledUniforms = material.getEnabledUniforms();\n        var textureUniforms = material.getTextureUniforms();\n        var placeholderTexture = this._placeholderTexture;\n\n        for (var u = 0; u < textureUniforms.length; u++) {\n            var symbol = textureUniforms[u];\n            var uniformValue = getUniformValue(renderable, material, symbol);\n            var uniformType = material.uniforms[symbol].type;\n            // Not use `instanceof` to determine if a value is texture in Material#bind.\n            // Use type instead, in some case texture may be in different namespaces.\n            // TODO Duck type validate.\n            if (uniformType === 't' && uniformValue) {\n                // Reset slot\n                uniformValue.__slot = -1;\n            }\n            else if (uniformType === 'tv') {\n                for (var i = 0; i < uniformValue.length; i++) {\n                    if (uniformValue[i]) {\n                        uniformValue[i].__slot = -1;\n                    }\n                }\n            }\n        }\n\n        placeholderTexture.__slot = -1;\n\n        // Set uniforms\n        for (var u = 0; u < enabledUniforms.length; u++) {\n            var symbol = enabledUniforms[u];\n            var uniform = material.uniforms[symbol];\n            var uniformValue = getUniformValue(renderable, material, symbol);\n            var uniformType = uniform.type;\n            var isTexture = uniformType === 't';\n\n            if (isTexture) {\n                if (!uniformValue || !uniformValue.isRenderable()) {\n                    uniformValue = placeholderTexture;\n                }\n            }\n            // PENDING\n            // When binding two materials with the same shader\n            // Many uniforms will be be set twice even if they have the same value\n            // So add a evaluation to see if the uniform is really needed to be set\n            if (prevMaterial && sameProgram) {\n                var prevUniformValue = getUniformValue(prevRenderable, prevMaterial, symbol);\n                if (isTexture) {\n                    if (!prevUniformValue || !prevUniformValue.isRenderable()) {\n                        prevUniformValue = placeholderTexture;\n                    }\n                }\n\n                if (prevUniformValue === uniformValue) {\n                    if (isTexture) {\n                        // Still take the slot to make sure same texture in different materials have same slot.\n                        program.takeCurrentTextureSlot(this, null);\n                    }\n                    else if (uniformType === 'tv' && uniformValue) {\n                        for (var i = 0; i < uniformValue.length; i++) {\n                            program.takeCurrentTextureSlot(this, null);\n                        }\n                    }\n                    continue;\n                }\n            }\n\n            if (uniformValue == null) {\n                continue;\n            }\n            else if (isTexture) {\n                if (uniformValue.__slot < 0) {\n                    var slot = program.currentTextureSlot();\n                    var res = program.setUniform(_gl, '1i', symbol, slot);\n                    if (res) { // Texture uniform is enabled\n                        program.takeCurrentTextureSlot(this, uniformValue);\n                        uniformValue.__slot = slot;\n                    }\n                }\n                // Multiple uniform use same texture..\n                else {\n                    program.setUniform(_gl, '1i', symbol, uniformValue.__slot);\n                }\n            }\n            else if (Array.isArray(uniformValue)) {\n                if (uniformValue.length === 0) {\n                    continue;\n                }\n                // Texture Array\n                if (uniformType === 'tv') {\n                    if (!program.hasUniform(symbol)) {\n                        continue;\n                    }\n\n                    var arr = [];\n                    for (var i = 0; i < uniformValue.length; i++) {\n                        var texture = uniformValue[i];\n\n                        if (texture.__slot < 0) {\n                            var slot = program.currentTextureSlot();\n                            arr.push(slot);\n                            program.takeCurrentTextureSlot(this, texture);\n                            texture.__slot = slot;\n                        }\n                        else {\n                            arr.push(texture.__slot);\n                        }\n                    }\n\n                    program.setUniform(_gl, '1iv', symbol, arr);\n                }\n                else {\n                    program.setUniform(_gl, uniform.type, symbol, uniformValue);\n                }\n            }\n            else{\n                program.setUniform(_gl, uniform.type, symbol, uniformValue);\n            }\n        }\n        var newSlot = program.currentTextureSlot();\n        // Texture slot maybe used out of material.\n        program.resetTextureSlot(currentTextureSlot);\n        return newSlot;\n    },\n\n    _bindVAO: function (vaoExt, shader, geometry, program) {\n        var isStatic = !geometry.dynamic;\n        var _gl = this.gl;\n\n        var vaoId = this.__uid__ + '-' + program.__uid__;\n        var vao = geometry.__vaoCache[vaoId];\n        if (!vao) {\n            var chunks = geometry.getBufferChunks(this);\n            if (!chunks || !chunks.length) {  // Empty mesh\n                return;\n            }\n            var chunk = chunks[0];\n            var attributeBuffers = chunk.attributeBuffers;\n            var indicesBuffer = chunk.indicesBuffer;\n\n            var availableAttributes = [];\n            var availableAttributeSymbols = [];\n            for (var a = 0; a < attributeBuffers.length; a++) {\n                var attributeBufferInfo = attributeBuffers[a];\n                var name = attributeBufferInfo.name;\n                var semantic = attributeBufferInfo.semantic;\n                var symbol;\n                if (semantic) {\n                    var semanticInfo = shader.attributeSemantics[semantic];\n                    symbol = semanticInfo && semanticInfo.symbol;\n                }\n                else {\n                    symbol = name;\n                }\n                if (symbol && program.attributes[symbol]) {\n                    availableAttributes.push(attributeBufferInfo);\n                    availableAttributeSymbols.push(symbol);\n                }\n            }\n\n            vao = new VertexArrayObject(\n                availableAttributes,\n                availableAttributeSymbols,\n                indicesBuffer\n            );\n\n            if (isStatic) {\n                geometry.__vaoCache[vaoId] = vao;\n            }\n        }\n\n        var needsBindAttributes = true;\n\n        // Create vertex object array cost a lot\n        // So we don't use it on the dynamic object\n        if (vaoExt && isStatic) {\n            // Use vertex array object\n            // http://blog.tojicode.com/2012/10/oesvertexarrayobject-extension.html\n            if (vao.vao == null) {\n                vao.vao = vaoExt.createVertexArrayOES();\n            }\n            else {\n                needsBindAttributes = false;\n            }\n            vaoExt.bindVertexArrayOES(vao.vao);\n        }\n\n        var availableAttributes = vao.availableAttributes;\n        var indicesBuffer = vao.indicesBuffer;\n\n        if (needsBindAttributes) {\n            var locationList = program.enableAttributes(this, vao.availableAttributeSymbols, (vaoExt && isStatic && vao));\n            // Setting attributes;\n            for (var a = 0; a < availableAttributes.length; a++) {\n                var location = locationList[a];\n                if (location === -1) {\n                    continue;\n                }\n                var attributeBufferInfo = availableAttributes[a];\n                var buffer = attributeBufferInfo.buffer;\n                var size = attributeBufferInfo.size;\n                var glType = attributeBufferTypeMap[attributeBufferInfo.type] || _gl.FLOAT;\n\n                _gl.bindBuffer(_gl.ARRAY_BUFFER, buffer);\n                _gl.vertexAttribPointer(location, size, glType, false, 0, 0);\n            }\n\n            if (geometry.isUseIndices()) {\n                _gl.bindBuffer(_gl.ELEMENT_ARRAY_BUFFER, indicesBuffer.buffer);\n            }\n        }\n\n        return vao;\n    },\n\n    renderPreZ: function (list, scene, camera) {\n        var _gl = this.gl;\n        var preZPassMaterial = this._prezMaterial || new __WEBPACK_IMPORTED_MODULE_4__Material__[\"a\" /* default */]({\n            shader: new __WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */].source('clay.prez.vertex'), __WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */].source('clay.prez.fragment'))\n        });\n        this._prezMaterial = preZPassMaterial;\n        if (this.logDepthBuffer) {\n            this._prezMaterial.setUniform('logDepthBufFC', 2.0 / (Math.log(camera.far + 1.0 ) / Math.LN2));\n        }\n\n        _gl.colorMask(false, false, false, false);\n        _gl.depthMask(true);\n\n        // Status\n        this.renderPass(list, camera, {\n            ifRender: function (renderable) {\n                return !renderable.ignorePreZ;\n            },\n            isMaterialChanged: function (renderable, prevRenderable) {\n                var matA = renderable.material;\n                var matB = prevRenderable.material;\n                return matA.get('diffuseMap') !== matB.get('diffuseMap')\n                    || (matA.get('alphaCutoff') || 0) !== (matB.get('alphaCutoff') || 0);\n            },\n            getUniform: function (renderable, depthMaterial, symbol) {\n                if (symbol === 'alphaMap') {\n                    return renderable.material.get('diffuseMap');\n                }\n                else if (symbol === 'alphaCutoff') {\n                    if (renderable.material.isDefined('fragment', 'ALPHA_TEST')\n                        && renderable.material.get('diffuseMap')\n                    ) {\n                        var alphaCutoff = renderable.material.get('alphaCutoff');\n                        return alphaCutoff || 0;\n                    }\n                    return 0;\n                }\n                else if (symbol === 'uvRepeat') {\n                    return renderable.material.get('uvRepeat');\n                }\n                else if (symbol === 'uvOffset') {\n                    return renderable.material.get('uvOffset');\n                }\n                else {\n                    return depthMaterial.get(symbol);\n                }\n            },\n            getMaterial: function () {\n                return preZPassMaterial;\n            },\n            sort: this.opaqueSortCompare\n        });\n\n        _gl.colorMask(true, true, true, true);\n        _gl.depthMask(true);\n    },\n\n    /**\n     * Dispose given scene, including all geometris, textures and shaders in the scene\n     * @param {clay.Scene} scene\n     */\n    disposeScene: function(scene) {\n        this.disposeNode(scene, true, true);\n        scene.dispose();\n    },\n\n    /**\n     * Dispose given node, including all geometries, textures and shaders attached on it or its descendant\n     * @param {clay.Node} node\n     * @param {boolean} [disposeGeometry=false] If dispose the geometries used in the descendant mesh\n     * @param {boolean} [disposeTexture=false] If dispose the textures used in the descendant mesh\n     */\n    disposeNode: function(root, disposeGeometry, disposeTexture) {\n        // Dettached from parent\n        if (root.getParent()) {\n            root.getParent().remove(root);\n        }\n        var disposedMap = {};\n        root.traverse(function(node) {\n            var material = node.material;\n            if (node.geometry && disposeGeometry) {\n                node.geometry.dispose(this);\n            }\n            if (disposeTexture && material && !disposedMap[material.__uid__]) {\n                var textureUniforms = material.getTextureUniforms();\n                for (var u = 0; u < textureUniforms.length; u++) {\n                    var uniformName = textureUniforms[u];\n                    var val = material.uniforms[uniformName].value;\n                    var uniformType = material.uniforms[uniformName].type;\n                    if (!val) {\n                        continue;\n                    }\n                    if (uniformType === 't') {\n                        val.dispose && val.dispose(this);\n                    }\n                    else if (uniformType === 'tv') {\n                        for (var k = 0; k < val.length; k++) {\n                            if (val[k]) {\n                                val[k].dispose && val[k].dispose(this);\n                            }\n                        }\n                    }\n                }\n                disposedMap[material.__uid__] = true;\n            }\n            // Particle system and AmbientCubemap light need to dispose\n            if (node.dispose) {\n                node.dispose(this);\n            }\n        }, this);\n    },\n\n    /**\n     * Dispose given geometry\n     * @param {clay.Geometry} geometry\n     */\n    disposeGeometry: function(geometry) {\n        geometry.dispose(this);\n    },\n\n    /**\n     * Dispose given texture\n     * @param {clay.Texture} texture\n     */\n    disposeTexture: function(texture) {\n        texture.dispose(this);\n    },\n\n    /**\n     * Dispose given frame buffer\n     * @param {clay.FrameBuffer} frameBuffer\n     */\n    disposeFrameBuffer: function(frameBuffer) {\n        frameBuffer.dispose(this);\n    },\n\n    /**\n     * Dispose renderer\n     */\n    dispose: function () {},\n\n    /**\n     * Convert screen coords to normalized device coordinates(NDC)\n     * Screen coords can get from mouse event, it is positioned relative to canvas element\n     * NDC can be used in ray casting with Camera.prototype.castRay methods\n     *\n     * @param  {number}       x\n     * @param  {number}       y\n     * @param  {clay.Vector2} [out]\n     * @return {clay.Vector2}\n     */\n    screenToNDC: function(x, y, out) {\n        if (!out) {\n            out = new __WEBPACK_IMPORTED_MODULE_5__math_Vector2__[\"a\" /* default */]();\n        }\n        // Invert y;\n        y = this._height - y;\n\n        var viewport = this.viewport;\n        var arr = out.array;\n        arr[0] = (x - viewport.x) / viewport.width;\n        arr[0] = arr[0] * 2 - 1;\n        arr[1] = (y - viewport.y) / viewport.height;\n        arr[1] = arr[1] * 2 - 1;\n\n        return out;\n    }\n});\n\n/**\n * Opaque renderables compare function\n * @param  {clay.Renderable} x\n * @param  {clay.Renderable} y\n * @return {boolean}\n * @static\n */\nRenderer.opaqueSortCompare = Renderer.prototype.opaqueSortCompare = function(x, y) {\n    // Priority renderOrder -> program -> material -> geometry\n    if (x.renderOrder === y.renderOrder) {\n        if (x.__program === y.__program) {\n            if (x.material === y.material) {\n                return x.geometry.__uid__ - y.geometry.__uid__;\n            }\n            return x.material.__uid__ - y.material.__uid__;\n        }\n        if (x.__program && y.__program) {\n            return x.__program.__uid__ - y.__program.__uid__;\n        }\n        return 0;\n    }\n    return x.renderOrder - y.renderOrder;\n};\n\n/**\n * Transparent renderables compare function\n * @param  {clay.Renderable} a\n * @param  {clay.Renderable} b\n * @return {boolean}\n * @static\n */\nRenderer.transparentSortCompare = Renderer.prototype.transparentSortCompare = function(x, y) {\n    // Priority renderOrder -> depth -> program -> material -> geometry\n\n    if (x.renderOrder === y.renderOrder) {\n        if (x.__depth === y.__depth) {\n            if (x.__program === y.__program) {\n                if (x.material === y.material) {\n                    return x.geometry.__uid__ - y.geometry.__uid__;\n                }\n                return x.material.__uid__ - y.material.__uid__;\n            }\n            if (x.__program  && y.__program) {\n                return x.__program.__uid__ - y.__program.__uid__;\n            }\n            return 0;\n        }\n        // Depth is negative\n        // So farther object has smaller depth value\n        return x.__depth - y.__depth;\n    }\n    return x.renderOrder - y.renderOrder;\n};\n\n// Temporary variables\nvar matrices = {\n    IDENTITY: mat4Create(),\n\n    WORLD: mat4Create(),\n    VIEW: mat4Create(),\n    PROJECTION: mat4Create(),\n    WORLDVIEW: mat4Create(),\n    VIEWPROJECTION: mat4Create(),\n    WORLDVIEWPROJECTION: mat4Create(),\n\n    WORLDINVERSE: mat4Create(),\n    VIEWINVERSE: mat4Create(),\n    PROJECTIONINVERSE: mat4Create(),\n    WORLDVIEWINVERSE: mat4Create(),\n    VIEWPROJECTIONINVERSE: mat4Create(),\n    WORLDVIEWPROJECTIONINVERSE: mat4Create(),\n\n    WORLDTRANSPOSE: mat4Create(),\n    VIEWTRANSPOSE: mat4Create(),\n    PROJECTIONTRANSPOSE: mat4Create(),\n    WORLDVIEWTRANSPOSE: mat4Create(),\n    VIEWPROJECTIONTRANSPOSE: mat4Create(),\n    WORLDVIEWPROJECTIONTRANSPOSE: mat4Create(),\n    WORLDINVERSETRANSPOSE: mat4Create(),\n    VIEWINVERSETRANSPOSE: mat4Create(),\n    PROJECTIONINVERSETRANSPOSE: mat4Create(),\n    WORLDVIEWINVERSETRANSPOSE: mat4Create(),\n    VIEWPROJECTIONINVERSETRANSPOSE: mat4Create(),\n    WORLDVIEWPROJECTIONINVERSETRANSPOSE: mat4Create()\n};\n\n/**\n * @name clay.Renderer.COLOR_BUFFER_BIT\n * @type {number}\n */\nRenderer.COLOR_BUFFER_BIT = __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].COLOR_BUFFER_BIT;\n/**\n * @name clay.Renderer.DEPTH_BUFFER_BIT\n * @type {number}\n */\nRenderer.DEPTH_BUFFER_BIT = __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].DEPTH_BUFFER_BIT;\n/**\n * @name clay.Renderer.STENCIL_BUFFER_BIT\n * @type {number}\n */\nRenderer.STENCIL_BUFFER_BIT = __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].STENCIL_BUFFER_BIT;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Renderer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9SZW5kZXJlci5qcz82MzJiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRPRE8gUmVzb3VyY2VzIGxpa2Ugc2hhZGVyLCB0ZXh0dXJlLCBnZW9tZXRyeSByZWZlcmVuY2UgbWFuYWdlbWVudFxuLy8gVHJhY2UgYW5kIGZpbmQgb3V0IHdoaWNoIHNoYWRlciwgdGV4dHVyZSwgZ2VvbWV0cnkgY2FuIGJlIGRlc3Ryb3llZFxuaW1wb3J0IEJhc2UgZnJvbSAnLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IEdMSW5mbyBmcm9tICcuL2NvcmUvR0xJbmZvJztcbmltcG9ydCBnbGVudW0gZnJvbSAnLi9jb3JlL2dsZW51bSc7XG5pbXBvcnQgdmVuZG9yIGZyb20gJy4vY29yZS92ZW5kb3InO1xuXG5pbXBvcnQgTWF0ZXJpYWwgZnJvbSAnLi9NYXRlcmlhbCc7XG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuL21hdGgvVmVjdG9yMic7XG5pbXBvcnQgUHJvZ3JhbU1hbmFnZXIgZnJvbSAnLi9ncHUvUHJvZ3JhbU1hbmFnZXInO1xuXG4vLyBMaWdodCBoZWFkZXJcbmltcG9ydCBTaGFkZXIgZnJvbSAnLi9TaGFkZXInO1xuXG5pbXBvcnQgcHJlekVzc2wgZnJvbSAnLi9zaGFkZXIvc291cmNlL3ByZXouZ2xzbC5qcyc7XG5TaGFkZXJbJ2ltcG9ydCddKHByZXpFc3NsKTtcblxuaW1wb3J0IG1hdDQgZnJvbSAnLi9nbG1hdHJpeC9tYXQ0JztcbmltcG9ydCB2ZWMzIGZyb20gJy4vZ2xtYXRyaXgvdmVjMyc7XG5cbnZhciBtYXQ0Q3JlYXRlID0gbWF0NC5jcmVhdGU7XG5cbnZhciBlcnJvclNoYWRlciA9IHt9O1xuXG5mdW5jdGlvbiBkZWZhdWx0R2V0TWF0ZXJpYWwocmVuZGVyYWJsZSkge1xuICAgIHJldHVybiByZW5kZXJhYmxlLm1hdGVyaWFsO1xufVxuZnVuY3Rpb24gZGVmYXVsdEdldFVuaWZvcm0ocmVuZGVyYWJsZSwgbWF0ZXJpYWwsIHN5bWJvbCkge1xuICAgIHJldHVybiBtYXRlcmlhbC51bmlmb3Jtc1tzeW1ib2xdLnZhbHVlO1xufVxuZnVuY3Rpb24gZGVmYXVsdElzTWF0ZXJpYWxDaGFuZ2VkKHJlbmRlcmFibGVkLCBwcmV2UmVuZGVyYWJsZSwgbWF0ZXJpYWwsIHByZXZNYXRlcmlhbCkge1xuICAgIHJldHVybiBtYXRlcmlhbCAhPT0gcHJldk1hdGVyaWFsO1xufVxuZnVuY3Rpb24gZGVmYXVsdElmUmVuZGVyKHJlbmRlcmFibGUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnZhciBhdHRyaWJ1dGVCdWZmZXJUeXBlTWFwID0ge1xuICAgIGZsb2F0OiBnbGVudW0uRkxPQVQsXG4gICAgYnl0ZTogZ2xlbnVtLkJZVEUsXG4gICAgdWJ5dGU6IGdsZW51bS5VTlNJR05FRF9CWVRFLFxuICAgIHNob3J0OiBnbGVudW0uU0hPUlQsXG4gICAgdXNob3J0OiBnbGVudW0uVU5TSUdORURfU0hPUlRcbn07XG5cbmZ1bmN0aW9uIFZlcnRleEFycmF5T2JqZWN0KGF2YWlsYWJsZUF0dHJpYnV0ZXMsIGF2YWlsYWJsZUF0dHJpYnV0ZVN5bWJvbHMsIGluZGljZXNCdWZmZXIpIHtcbiAgICB0aGlzLmF2YWlsYWJsZUF0dHJpYnV0ZXMgPSBhdmFpbGFibGVBdHRyaWJ1dGVzO1xuICAgIHRoaXMuYXZhaWxhYmxlQXR0cmlidXRlU3ltYm9scyA9IGF2YWlsYWJsZUF0dHJpYnV0ZVN5bWJvbHM7XG4gICAgdGhpcy5pbmRpY2VzQnVmZmVyID0gaW5kaWNlc0J1ZmZlcjtcblxuICAgIHRoaXMudmFvID0gbnVsbDtcbn1cblxuZnVuY3Rpb24gUGxhY2VIb2xkZXJUZXh0dXJlKHJlbmRlcmVyKSB7XG4gICAgdmFyIGJsYW5rQ2FudmFzO1xuICAgIHZhciB3ZWJnbFRleHR1cmU7XG4gICAgdGhpcy5iaW5kID0gZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIGlmICghYmxhbmtDYW52YXMpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gRW52aXJvbm1lbnQgbm90IHN1cHBvcnQgY3JlYXRlQ2FudmFzLlxuICAgICAgICAgICAgYmxhbmtDYW52YXMgPSB2ZW5kb3IuY3JlYXRlQ2FudmFzKCk7XG4gICAgICAgICAgICBibGFua0NhbnZhcy53aWR0aCA9IGJsYW5rQ2FudmFzLmhlaWdodCA9IDE7XG4gICAgICAgICAgICBibGFua0NhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGdsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgIHZhciBmaXJzdEJpbmQgPSAhd2ViZ2xUZXh0dXJlO1xuICAgICAgICBpZiAoZmlyc3RCaW5kKSB7XG4gICAgICAgICAgICB3ZWJnbFRleHR1cmUgPSBnbC5jcmVhdGVUZXh0dXJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgd2ViZ2xUZXh0dXJlKTtcbiAgICAgICAgaWYgKGZpcnN0QmluZCkge1xuICAgICAgICAgICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBibGFua0NhbnZhcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMudW5iaW5kID0gZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHJlbmRlcmVyLmdsLmJpbmRUZXh0dXJlKHJlbmRlcmVyLmdsLlRFWFRVUkVfMkQsIG51bGwpO1xuICAgIH07XG4gICAgdGhpcy5pc1JlbmRlcmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuUmVuZGVyZXJcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKi9cbnZhciBSZW5kZXJlciA9IEJhc2UuZXh0ZW5kKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5LlJlbmRlcmVyIyAqLyB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgICAgICogQHJlYWRvbmx5XG4gICAgICAgICAqL1xuICAgICAgICBjYW52YXM6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbnZhcyB3aWR0aCwgc2V0IGJ5IHJlc2l6ZSBtZXRob2RcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF93aWR0aDogMTAwLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYW52YXMgd2lkdGgsIHNldCBieSByZXNpemUgbWV0aG9kXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfaGVpZ2h0OiAxMDAsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldmljZSBwaXhlbCByYXRpbywgc2V0IGJ5IHNldERldmljZVBpeGVsUmF0aW8gbWV0aG9kXG4gICAgICAgICAqIFNwZWNpYWxseSBmb3IgaGlnaCBkZWZpbmF0aW9uIGRpc3BsYXlcbiAgICAgICAgICogQHNlZSBodHRwOi8vd3d3Lmtocm9ub3Mub3JnL3dlYmdsL3dpa2kvSGFuZGxpbmdIaWdoRFBJXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBkZXZpY2VQaXhlbFJhdGlvOiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRldmljZVBpeGVsUmF0aW8pIHx8IDEuMCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2xlYXIgY29sb3JcbiAgICAgICAgICogQHR5cGUge251bWJlcltdfVxuICAgICAgICAgKi9cbiAgICAgICAgY2xlYXJDb2xvcjogWzAuMCwgMC4wLCAwLjAsIDAuMF0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmF1bHQ6XG4gICAgICAgICAqICAgICBfZ2wuQ09MT1JfQlVGRkVSX0JJVCB8IF9nbC5ERVBUSF9CVUZGRVJfQklUIHwgX2dsLlNURU5DSUxfQlVGRkVSX0JJVFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgY2xlYXJCaXQ6IDE3NjY0LFxuXG4gICAgICAgIC8vIFNldHRpbmdzIHdoZW4gZ2V0dGluZyBjb250ZXh0XG4gICAgICAgIC8vIGh0dHA6Ly93d3cua2hyb25vcy5vcmcvcmVnaXN0cnkvd2ViZ2wvc3BlY3MvbGF0ZXN0LyMyLjRcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgZW5hYmxlIGxvZyBkZXB0aCBidWZmZXJcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBsb2dEZXB0aEJ1ZmZlcjogZmFsc2UsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBlbmFibGUgYWxwaGEsIGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGFscGhhOiB0cnVlLFxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgZW5hYmxlIGRlcHRoIGJ1ZmZlciwgZGVmYXVsdCB0cnVlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZGVwdGg6IHRydWUsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBlbmFibGUgc3RlbmNpbCBidWZmZXIsIGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBzdGVuY2lsOiBmYWxzZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGVuYWJsZSBhbnRpYWxpYXMsIGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGFudGlhbGlhczogdHJ1ZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGVuYWJsZSBwcmVtdWx0aXBsaWVkIGFscGhhLCBkZWZhdWx0IHRydWVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBwcmVtdWx0aXBsaWVkQWxwaGE6IHRydWUsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBwcmVzZXJ2ZSBkcmF3aW5nIGJ1ZmZlciwgZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogZmFsc2UsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0aHJvdyBjb250ZXh0IGVycm9yLCB1c3VhbGx5IHR1cm5lZCBvbiBpbiBkZWJ1ZyBtb2RlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhyb3dFcnJvcjogdHJ1ZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdlYkdMIENvbnRleHQgY3JlYXRlZCBmcm9tIGdpdmVuIGNhbnZhc1xuICAgICAgICAgKiBAdHlwZSB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fVxuICAgICAgICAgKi9cbiAgICAgICAgZ2w6IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW5kZXJlciB2aWV3cG9ydCwgcmVhZC1vbmx5LCBjYW4gYmUgc2V0IGJ5IHNldFZpZXdwb3J0IG1ldGhvZFxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdmlld3BvcnQ6IHt9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXggam9pbnQgbnVtYmVyXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBtYXhKb2ludE51bWJlcjogMjAsXG5cbiAgICAgICAgLy8gU2V0IGJ5IEZyYW1lQnVmZmVyI2JpbmRcbiAgICAgICAgX19jdXJyZW50RnJhbWVCdWZmZXI6IG51bGwsXG5cbiAgICAgICAgX3ZpZXdwb3J0U3RhY2s6IFtdLFxuICAgICAgICBfY2xlYXJTdGFjazogW10sXG5cbiAgICAgICAgX3NjZW5lUmVuZGVyaW5nOiBudWxsXG4gICAgfTtcbn0sIGZ1bmN0aW9uICgpIHtcblxuICAgIGlmICghdGhpcy5jYW52YXMpIHtcbiAgICAgICAgdGhpcy5jYW52YXMgPSB2ZW5kb3IuY3JlYXRlQ2FudmFzKCk7XG4gICAgfVxuICAgIHZhciBjYW52YXMgPSB0aGlzLmNhbnZhcztcbiAgICB0cnkge1xuICAgICAgICB2YXIgb3B0cyA9IHtcbiAgICAgICAgICAgIGFscGhhOiB0aGlzLmFscGhhLFxuICAgICAgICAgICAgZGVwdGg6IHRoaXMuZGVwdGgsXG4gICAgICAgICAgICBzdGVuY2lsOiB0aGlzLnN0ZW5jaWwsXG4gICAgICAgICAgICBhbnRpYWxpYXM6IHRoaXMuYW50aWFsaWFzLFxuICAgICAgICAgICAgcHJlbXVsdGlwbGllZEFscGhhOiB0aGlzLnByZW11bHRpcGxpZWRBbHBoYSxcbiAgICAgICAgICAgIHByZXNlcnZlRHJhd2luZ0J1ZmZlcjogdGhpcy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXJcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdsID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJywgb3B0cylcbiAgICAgICAgICAgIHx8IGNhbnZhcy5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnLCBvcHRzKTtcblxuICAgICAgICBpZiAoIXRoaXMuZ2wpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZ2xpbmZvID0gbmV3IEdMSW5mbyh0aGlzLmdsKTtcblxuICAgICAgICBpZiAodGhpcy5nbC50YXJnZXRSZW5kZXJlcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQWxyZWFkeSBjcmVhdGVkIGEgcmVuZGVyZXInKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdsLnRhcmdldFJlbmRlcmVyID0gdGhpcztcblxuICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyAnRXJyb3IgY3JlYXRpbmcgV2ViR0wgQ29udGV4dCAnICsgZTtcbiAgICB9XG5cbiAgICAvLyBJbml0IG1hbmFnZXJzXG4gICAgdGhpcy5fcHJvZ3JhbU1nciA9IG5ldyBQcm9ncmFtTWFuYWdlcih0aGlzKTtcblxuICAgIHRoaXMuX3BsYWNlaG9sZGVyVGV4dHVyZSA9IG5ldyBQbGFjZUhvbGRlclRleHR1cmUodGhpcyk7XG59LFxuLyoqIEBsZW5kcyBjbGF5LlJlbmRlcmVyLnByb3RvdHlwZS4gKiovXG57XG4gICAgLyoqXG4gICAgICogUmVzaXplIHRoZSBjYW52YXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0XG4gICAgICovXG4gICAgcmVzaXplOiBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHZhciBjYW52YXMgPSB0aGlzLmNhbnZhcztcbiAgICAgICAgLy8gaHR0cDovL3d3dy5raHJvbm9zLm9yZy93ZWJnbC93aWtpL0hhbmRsaW5nSGlnaERQSVxuICAgICAgICAvLyBzZXQgdGhlIGRpc3BsYXkgc2l6ZSBvZiB0aGUgY2FudmFzLlxuICAgICAgICB2YXIgZHByID0gdGhpcy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICBpZiAod2lkdGggIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGNhbnZhcy5zdHlsZSkge1xuICAgICAgICAgICAgICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHNldCB0aGUgc2l6ZSBvZiB0aGUgZHJhd2luZ0J1ZmZlclxuICAgICAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGggKiBkcHI7XG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0ICogZHByO1xuXG4gICAgICAgICAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fd2lkdGggPSBjYW52YXMud2lkdGggLyBkcHI7XG4gICAgICAgICAgICB0aGlzLl9oZWlnaHQgPSBjYW52YXMuaGVpZ2h0IC8gZHByO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRWaWV3cG9ydCgwLCAwLCB0aGlzLl93aWR0aCwgdGhpcy5faGVpZ2h0KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHJlbmRlcmVyIHdpZHRoXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldFdpZHRoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl93aWR0aDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHJlbmRlcmVyIGhlaWdodFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXRIZWlnaHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHZpZXdwb3J0IGFzcGVjdCxcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0Vmlld3BvcnRBc3BlY3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZpZXdwb3J0ID0gdGhpcy52aWV3cG9ydDtcbiAgICAgICAgcmV0dXJuIHZpZXdwb3J0LndpZHRoIC8gdmlld3BvcnQuaGVpZ2h0O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgZGV2aWNlUGl4ZWxSYXRpb1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZXZpY2VQaXhlbFJhdGlvXG4gICAgICovXG4gICAgc2V0RGV2aWNlUGl4ZWxSYXRpbzogZnVuY3Rpb24oZGV2aWNlUGl4ZWxSYXRpbykge1xuICAgICAgICB0aGlzLmRldmljZVBpeGVsUmF0aW8gPSBkZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICB0aGlzLnJlc2l6ZSh0aGlzLl93aWR0aCwgdGhpcy5faGVpZ2h0KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGRldmljZVBpeGVsUmF0aW9cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGV2aWNlUGl4ZWxSYXRpb1xuICAgICAqL1xuICAgIGdldERldmljZVBpeGVsUmF0aW86IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IFdlYkdMIGV4dGVuc2lvblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHJldHVybiB7b2JqZWN0fVxuICAgICAqL1xuICAgIGdldEdMRXh0ZW5zaW9uOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2xpbmZvLmdldEV4dGVuc2lvbihuYW1lKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IFdlYkdMIHBhcmFtZXRlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKi9cbiAgICBnZXRHTFBhcmFtZXRlcjogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dsaW5mby5nZXRQYXJhbWV0ZXIobmFtZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCByZW5kZXJpbmcgdmlld3BvcnRcbiAgICAgKiBAcGFyYW0ge251bWJlcnxPYmplY3R9IHhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3ldXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt3aWR0aF1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2hlaWdodF1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2RldmljZVBpeGVsUmF0aW9dXG4gICAgICogICAgICAgIERlZmF1bHRseSB1c2UgdGhlIHJlbmRlcmVyZSBkZXZpY2VQaXhlbFJhdGlvXG4gICAgICogICAgICAgIEl0IG5lZWRzIHRvIGJlIDEgd2hlbiBzZXRWaWV3cG9ydCBpcyBjYWxsZWQgYnkgZnJhbWVCdWZmZXJcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogIHNldFZpZXdwb3J0KDAsMCx3aWR0aCxoZWlnaHQsMSlcbiAgICAgKiAgc2V0Vmlld3BvcnQoe1xuICAgICAqICAgICAgeDogMCxcbiAgICAgKiAgICAgIHk6IDAsXG4gICAgICogICAgICB3aWR0aDogd2lkdGgsXG4gICAgICogICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgKiAgICAgIGRldmljZVBpeGVsUmF0aW86IDFcbiAgICAgKiAgfSlcbiAgICAgKi9cbiAgICBzZXRWaWV3cG9ydDogZnVuY3Rpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQsIGRwcikge1xuXG4gICAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHZhciBvYmogPSB4O1xuXG4gICAgICAgICAgICB4ID0gb2JqLng7XG4gICAgICAgICAgICB5ID0gb2JqLnk7XG4gICAgICAgICAgICB3aWR0aCA9IG9iai53aWR0aDtcbiAgICAgICAgICAgIGhlaWdodCA9IG9iai5oZWlnaHQ7XG4gICAgICAgICAgICBkcHIgPSBvYmouZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgfVxuICAgICAgICBkcHIgPSBkcHIgfHwgdGhpcy5kZXZpY2VQaXhlbFJhdGlvO1xuXG4gICAgICAgIHRoaXMuZ2wudmlld3BvcnQoXG4gICAgICAgICAgICB4ICogZHByLCB5ICogZHByLCB3aWR0aCAqIGRwciwgaGVpZ2h0ICogZHByXG4gICAgICAgICk7XG4gICAgICAgIC8vIFVzZSBhIGZyZXNoIG5ldyBvYmplY3QsIG5vdCB3cml0ZSBwcm9wZXJ0eS5cbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IHtcbiAgICAgICAgICAgIHg6IHgsXG4gICAgICAgICAgICB5OiB5LFxuICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgICAgICBkZXZpY2VQaXhlbFJhdGlvOiBkcHJcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUHVzaCBjdXJyZW50IHZpZXdwb3J0IGludG8gYSBzdGFja1xuICAgICAqL1xuICAgIHNhdmVWaWV3cG9ydDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl92aWV3cG9ydFN0YWNrLnB1c2godGhpcy52aWV3cG9ydCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBvcCB2aWV3cG9ydCBmcm9tIHN0YWNrLCByZXN0b3JlIGluIHRoZSByZW5kZXJlclxuICAgICAqL1xuICAgIHJlc3RvcmVWaWV3cG9ydDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fdmlld3BvcnRTdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZpZXdwb3J0KHRoaXMuX3ZpZXdwb3J0U3RhY2sucG9wKCkpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFB1c2ggY3VycmVudCBjbGVhciBpbnRvIGEgc3RhY2tcbiAgICAgKi9cbiAgICBzYXZlQ2xlYXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fY2xlYXJTdGFjay5wdXNoKHtcbiAgICAgICAgICAgIGNsZWFyQml0OiB0aGlzLmNsZWFyQml0LFxuICAgICAgICAgICAgY2xlYXJDb2xvcjogdGhpcy5jbGVhckNvbG9yXG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQb3AgY2xlYXIgZnJvbSBzdGFjaywgcmVzdG9yZSBpbiB0aGUgcmVuZGVyZXJcbiAgICAgKi9cbiAgICByZXN0b3JlQ2xlYXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NsZWFyU3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIG9wdCA9IHRoaXMuX2NsZWFyU3RhY2sucG9wKCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyQ29sb3IgPSBvcHQuY2xlYXJDb2xvcjtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJCaXQgPSBvcHQuY2xlYXJCaXQ7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgYmluZFNjZW5lUmVuZGVyaW5nOiBmdW5jdGlvbiAoc2NlbmUpIHtcbiAgICAgICAgdGhpcy5fc2NlbmVSZW5kZXJpbmcgPSBzY2VuZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBzY2VuZSBpbiBjYW1lcmEgdG8gdGhlIHNjcmVlbiBvciBiaW5kZWQgb2ZmbGluZSBmcmFtZWJ1ZmZlclxuICAgICAqIEBwYXJhbSAge2NsYXkuU2NlbmV9ICAgICAgIHNjZW5lXG4gICAgICogQHBhcmFtICB7Y2xheS5DYW1lcmF9ICAgICAgY2FtZXJhXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gICAgIFtub3RVcGRhdGVTY2VuZV0gSWYgbm90IGNhbGwgdGhlIHNjZW5lLnVwZGF0ZSBtZXRob2RzIGluIHRoZSByZW5kZXJpbmcsIGRlZmF1bHQgdHJ1ZVxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59ICAgICBbcHJlWl0gICAgICAgICAgIElmIHVzZSBwcmVaIG9wdGltaXphdGlvbiwgZGVmYXVsdCBmYWxzZVxuICAgICAqIEByZXR1cm4ge0lSZW5kZXJJbmZvfVxuICAgICAqL1xuICAgIHJlbmRlcjogZnVuY3Rpb24oc2NlbmUsIGNhbWVyYSwgbm90VXBkYXRlU2NlbmUsIHByZVopIHtcbiAgICAgICAgdmFyIF9nbCA9IHRoaXMuZ2w7XG5cbiAgICAgICAgdmFyIGNsZWFyQ29sb3IgPSB0aGlzLmNsZWFyQ29sb3I7XG5cbiAgICAgICAgaWYgKHRoaXMuY2xlYXJCaXQpIHtcblxuICAgICAgICAgICAgLy8gTXVzdCBzZXQgZGVwdGggYW5kIGNvbG9yIG1hc2sgdHJ1ZSBiZWZvcmUgY2xlYXJcbiAgICAgICAgICAgIF9nbC5jb2xvck1hc2sodHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICBfZ2wuZGVwdGhNYXNrKHRydWUpO1xuICAgICAgICAgICAgdmFyIHZpZXdwb3J0ID0gdGhpcy52aWV3cG9ydDtcbiAgICAgICAgICAgIHZhciBuZWVkc1NjaXNzb3IgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciB2aWV3cG9ydERwciA9IHZpZXdwb3J0LmRldmljZVBpeGVsUmF0aW87XG4gICAgICAgICAgICBpZiAodmlld3BvcnQud2lkdGggIT09IHRoaXMuX3dpZHRoIHx8IHZpZXdwb3J0LmhlaWdodCAhPT0gdGhpcy5faGVpZ2h0XG4gICAgICAgICAgICAgICAgfHwgKHZpZXdwb3J0RHByICYmIHZpZXdwb3J0RHByICE9PSB0aGlzLmRldmljZVBpeGVsUmF0aW8pXG4gICAgICAgICAgICAgICAgfHwgdmlld3BvcnQueCB8fCB2aWV3cG9ydC55XG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBuZWVkc1NjaXNzb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTE1NDQ2MDgvaG93LXRvLWNsZWFyLWEtcmVjdGFuZ2xlLWFyZWEtaW4td2ViZ2xcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGNsZWFyIHRoZSB2aWV3cG9ydFxuICAgICAgICAgICAgICAgIF9nbC5lbmFibGUoX2dsLlNDSVNTT1JfVEVTVCk7XG4gICAgICAgICAgICAgICAgX2dsLnNjaXNzb3Iodmlld3BvcnQueCAqIHZpZXdwb3J0RHByLCB2aWV3cG9ydC55ICogdmlld3BvcnREcHIsIHZpZXdwb3J0LndpZHRoICogdmlld3BvcnREcHIsIHZpZXdwb3J0LmhlaWdodCAqIHZpZXdwb3J0RHByKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9nbC5jbGVhckNvbG9yKGNsZWFyQ29sb3JbMF0sIGNsZWFyQ29sb3JbMV0sIGNsZWFyQ29sb3JbMl0sIGNsZWFyQ29sb3JbM10pO1xuICAgICAgICAgICAgX2dsLmNsZWFyKHRoaXMuY2xlYXJCaXQpO1xuICAgICAgICAgICAgaWYgKG5lZWRzU2Npc3Nvcikge1xuICAgICAgICAgICAgICAgIF9nbC5kaXNhYmxlKF9nbC5TQ0lTU09SX1RFU1QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdGhlIHNjZW5lIGhhdmUgYmVlbiB1cGRhdGVkIGluIHRoZSBwcmVwYXNzIGxpa2Ugc2hhZG93IG1hcFxuICAgICAgICAvLyBUaGVyZSBpcyBubyBuZWVkIHRvIHVwZGF0ZSBpdCBhZ2FpblxuICAgICAgICBpZiAoIW5vdFVwZGF0ZVNjZW5lKSB7XG4gICAgICAgICAgICBzY2VuZS51cGRhdGUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHNjZW5lLnVwZGF0ZUxpZ2h0cygpO1xuXG4gICAgICAgIGNhbWVyYSA9IGNhbWVyYSB8fCBzY2VuZS5nZXRNYWluQ2FtZXJhKCk7XG4gICAgICAgIGlmICghY2FtZXJhKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDYW5cXCd0IGZpbmQgY2FtZXJhIGluIHRoZSBzY2VuZS4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjYW1lcmEudXBkYXRlKCk7XG4gICAgICAgIHZhciByZW5kZXJMaXN0ID0gc2NlbmUudXBkYXRlUmVuZGVyTGlzdChjYW1lcmEsIHRydWUpO1xuXG4gICAgICAgIHRoaXMuX3NjZW5lUmVuZGVyaW5nID0gc2NlbmU7XG5cbiAgICAgICAgdmFyIG9wYXF1ZUxpc3QgPSByZW5kZXJMaXN0Lm9wYXF1ZTtcbiAgICAgICAgdmFyIHRyYW5zcGFyZW50TGlzdCA9IHJlbmRlckxpc3QudHJhbnNwYXJlbnQ7XG4gICAgICAgIHZhciBzY2VuZU1hdGVyaWFsID0gc2NlbmUubWF0ZXJpYWw7XG5cbiAgICAgICAgc2NlbmUudHJpZ2dlcignYmVmb3JlcmVuZGVyJywgdGhpcywgc2NlbmUsIGNhbWVyYSwgcmVuZGVyTGlzdCk7XG5cbiAgICAgICAgLy8gUmVuZGVyIHByZSB6XG4gICAgICAgIGlmIChwcmVaKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclByZVoob3BhcXVlTGlzdCwgc2NlbmUsIGNhbWVyYSk7XG4gICAgICAgICAgICBfZ2wuZGVwdGhGdW5jKF9nbC5MRVFVQUwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX2dsLmRlcHRoRnVuYyhfZ2wuTEVTUyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgdGhlIGRlcHRoIG9mIHRyYW5zcGFyZW50IGxpc3QuXG4gICAgICAgIHZhciB3b3JsZFZpZXdNYXQgPSBtYXQ0Q3JlYXRlKCk7XG4gICAgICAgIHZhciBwb3NWaWV3U3BhY2UgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYW5zcGFyZW50TGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHJlbmRlcmFibGUgPSB0cmFuc3BhcmVudExpc3RbaV07XG4gICAgICAgICAgICBtYXQ0Lm11bHRpcGx5QWZmaW5lKHdvcmxkVmlld01hdCwgY2FtZXJhLnZpZXdNYXRyaXguYXJyYXksIHJlbmRlcmFibGUud29ybGRUcmFuc2Zvcm0uYXJyYXkpO1xuICAgICAgICAgICAgdmVjMy50cmFuc2Zvcm1NYXQ0KHBvc1ZpZXdTcGFjZSwgcmVuZGVyYWJsZS5wb3NpdGlvbi5hcnJheSwgd29ybGRWaWV3TWF0KTtcbiAgICAgICAgICAgIHJlbmRlcmFibGUuX19kZXB0aCA9IHBvc1ZpZXdTcGFjZVsyXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbmRlciBvcGFxdWUgbGlzdFxuICAgICAgICB0aGlzLnJlbmRlclBhc3Mob3BhcXVlTGlzdCwgY2FtZXJhLCB7XG4gICAgICAgICAgICBnZXRNYXRlcmlhbDogZnVuY3Rpb24gKHJlbmRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NlbmVNYXRlcmlhbCB8fCByZW5kZXJhYmxlLm1hdGVyaWFsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNvcnRDb21wYXJlOiB0aGlzLm9wYXF1ZVNvcnRDb21wYXJlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucmVuZGVyUGFzcyh0cmFuc3BhcmVudExpc3QsIGNhbWVyYSwge1xuICAgICAgICAgICAgZ2V0TWF0ZXJpYWw6IGZ1bmN0aW9uIChyZW5kZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjZW5lTWF0ZXJpYWwgfHwgcmVuZGVyYWJsZS5tYXRlcmlhbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzb3J0Q29tcGFyZTogdGhpcy50cmFuc3BhcmVudFNvcnRDb21wYXJlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNjZW5lLnRyaWdnZXIoJ2FmdGVycmVuZGVyJywgdGhpcywgc2NlbmUsIGNhbWVyYSwgcmVuZGVyTGlzdCk7XG5cbiAgICAgICAgLy8gQ2xlYW51cFxuICAgICAgICB0aGlzLl9zY2VuZVJlbmRlcmluZyA9IG51bGw7XG4gICAgfSxcblxuICAgIGdldFByb2dyYW06IGZ1bmN0aW9uIChyZW5kZXJhYmxlLCByZW5kZXJNYXRlcmlhbCwgc2NlbmUpIHtcbiAgICAgICAgcmVuZGVyTWF0ZXJpYWwgPSByZW5kZXJNYXRlcmlhbCB8fCByZW5kZXJhYmxlLm1hdGVyaWFsO1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJvZ3JhbU1nci5nZXRQcm9ncmFtKHJlbmRlcmFibGUsIHJlbmRlck1hdGVyaWFsLCBzY2VuZSwgdGhpcyk7XG4gICAgfSxcblxuICAgIHZhbGlkYXRlUHJvZ3JhbTogZnVuY3Rpb24gKHByb2dyYW0pIHtcbiAgICAgICAgaWYgKHByb2dyYW0uX19lcnJvcikge1xuICAgICAgICAgICAgdmFyIGVycm9yTXNnID0gcHJvZ3JhbS5fX2Vycm9yO1xuICAgICAgICAgICAgaWYgKGVycm9yU2hhZGVyW3Byb2dyYW0uX191aWRfX10pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlcnJvclNoYWRlcltwcm9ncmFtLl9fdWlkX19dID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKHRoaXMudGhyb3dFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1zZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2Vycm9yJywgZXJyb3JNc2cpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdXBkYXRlUHJvZ3JhbXM6IGZ1bmN0aW9uIChsaXN0LCBzY2VuZSwgcGFzc0NvbmZpZykge1xuICAgICAgICB2YXIgZ2V0TWF0ZXJpYWwgPSAocGFzc0NvbmZpZyAmJiBwYXNzQ29uZmlnLmdldE1hdGVyaWFsKSB8fCBkZWZhdWx0R2V0TWF0ZXJpYWw7XG4gICAgICAgIHNjZW5lID0gc2NlbmUgfHwgbnVsbDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcmVuZGVyYWJsZSA9IGxpc3RbaV07XG4gICAgICAgICAgICB2YXIgcmVuZGVyTWF0ZXJpYWwgPSBnZXRNYXRlcmlhbC5jYWxsKHRoaXMsIHJlbmRlcmFibGUpO1xuICAgICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByZXZSZW5kZXJhYmxlID0gbGlzdFtpIC0gMV07XG4gICAgICAgICAgICAgICAgdmFyIHByZXZKb2ludHNMZW4gPSBwcmV2UmVuZGVyYWJsZS5qb2ludHMgPyBwcmV2UmVuZGVyYWJsZS5qb2ludHMubGVuZ3RoIDogMDtcbiAgICAgICAgICAgICAgICB2YXIgam9pbnRzTGVuID0gcmVuZGVyYWJsZS5qb2ludHMgPyByZW5kZXJhYmxlLmpvaW50cy5sZW5ndGggOiAwO1xuICAgICAgICAgICAgICAgIC8vIEtlZXAgcHJvZ3JhbSBub3QgY2hhbmdlIGlmIGpvaW50cywgbWF0ZXJpYWwsIGxpZ2h0R3JvdXAgYXJlIHNhbWUgb2YgdHdvIHJlbmRlcmFibGVzLlxuICAgICAgICAgICAgICAgIGlmIChqb2ludHNMZW4gPT09IHByZXZKb2ludHNMZW5cbiAgICAgICAgICAgICAgICAgICAgJiYgcmVuZGVyYWJsZS5tYXRlcmlhbCA9PT0gcHJldlJlbmRlcmFibGUubWF0ZXJpYWxcbiAgICAgICAgICAgICAgICAgICAgJiYgcmVuZGVyYWJsZS5saWdodEdyb3VwID09PSBwcmV2UmVuZGVyYWJsZS5saWdodEdyb3VwXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmFibGUuX19wcm9ncmFtID0gcHJldlJlbmRlcmFibGUuX19wcm9ncmFtO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwcm9ncmFtID0gdGhpcy5fcHJvZ3JhbU1nci5nZXRQcm9ncmFtKHJlbmRlcmFibGUsIHJlbmRlck1hdGVyaWFsLCBzY2VuZSwgdGhpcyk7XG5cbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVQcm9ncmFtKHByb2dyYW0pO1xuXG4gICAgICAgICAgICByZW5kZXJhYmxlLl9fcHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIGEgc2luZ2xlIHJlbmRlcmFibGUgbGlzdCBpbiBjYW1lcmEgaW4gc2VxdWVuY2VcbiAgICAgKiBAcGFyYW0ge2NsYXkuUmVuZGVyYWJsZVtdfSBsaXN0IExpc3Qgb2YgYWxsIHJlbmRlcmFibGVzLlxuICAgICAqIEBwYXJhbSB7Y2xheS5DYW1lcmF9IFtjYW1lcmFdIENhbWVyYSBwcm92aWRlIHZpZXcgbWF0cml4IGFuZCBwb3JqZWN0aW9uIG1hdHJpeC4gSXQgY2FuIGJlIG51bGwuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtwYXNzQ29uZmlnXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwYXNzQ29uZmlnLmdldE1hdGVyaWFsXSBHZXQgcmVuZGVyYWJsZSBtYXRlcmlhbC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcGFzc0NvbmZpZy5nZXRVbmlmb3JtXSBHZXQgbWF0ZXJpYWwgdW5pZm9ybSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcGFzc0NvbmZpZy5pc01hdGVyaWFsQ2hhbmdlZF0gSWYgbWF0ZXJpYWwgY2hhbmdlZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcGFzc0NvbmZpZy5iZWZvcmVSZW5kZXJdIEJlZm9yZSByZW5kZXIgZWFjaCByZW5kZXJhYmxlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwYXNzQ29uZmlnLmFmdGVyUmVuZGVyXSBBZnRlciByZW5kZXIgZWFjaCByZW5kZXJhYmxlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Bhc3NDb25maWcuaWZSZW5kZXJdIElmIHJlbmRlciB0aGUgcmVuZGVyYWJsZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcGFzc0NvbmZpZy5zb3J0Q29tcGFyZV0gU29ydCBjb21wYXJlIGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm4ge0lSZW5kZXJJbmZvfVxuICAgICAqL1xuICAgIHJlbmRlclBhc3M6IGZ1bmN0aW9uKGxpc3QsIGNhbWVyYSwgcGFzc0NvbmZpZykge1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZXJlbmRlcnBhc3MnLCB0aGlzLCBsaXN0LCBjYW1lcmEsIHBhc3NDb25maWcpO1xuXG4gICAgICAgIHBhc3NDb25maWcgPSBwYXNzQ29uZmlnIHx8IHt9O1xuICAgICAgICBwYXNzQ29uZmlnLmdldE1hdGVyaWFsID0gcGFzc0NvbmZpZy5nZXRNYXRlcmlhbCB8fCBkZWZhdWx0R2V0TWF0ZXJpYWw7XG4gICAgICAgIHBhc3NDb25maWcuZ2V0VW5pZm9ybSA9IHBhc3NDb25maWcuZ2V0VW5pZm9ybSB8fCBkZWZhdWx0R2V0VW5pZm9ybTtcbiAgICAgICAgLy8gUEVORElORyBCZXR0ZXIgc29sdXRpb24/XG4gICAgICAgIHBhc3NDb25maWcuaXNNYXRlcmlhbENoYW5nZWQgPSBwYXNzQ29uZmlnLmlzTWF0ZXJpYWxDaGFuZ2VkIHx8IGRlZmF1bHRJc01hdGVyaWFsQ2hhbmdlZDtcbiAgICAgICAgcGFzc0NvbmZpZy5iZWZvcmVSZW5kZXIgPSBwYXNzQ29uZmlnLmJlZm9yZVJlbmRlciB8fCBub29wO1xuICAgICAgICBwYXNzQ29uZmlnLmFmdGVyUmVuZGVyID0gcGFzc0NvbmZpZy5hZnRlclJlbmRlciB8fCBub29wO1xuXG4gICAgICAgIHZhciBpZlJlbmRlck9iamVjdCA9IHBhc3NDb25maWcuaWZSZW5kZXIgfHwgZGVmYXVsdElmUmVuZGVyO1xuXG4gICAgICAgIHRoaXMudXBkYXRlUHJvZ3JhbXMobGlzdCwgdGhpcy5fc2NlbmVSZW5kZXJpbmcsIHBhc3NDb25maWcpO1xuICAgICAgICBpZiAocGFzc0NvbmZpZy5zb3J0Q29tcGFyZSkge1xuICAgICAgICAgICAgbGlzdC5zb3J0KHBhc3NDb25maWcuc29ydENvbXBhcmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU29tZSBjb21tb24gYnVpbHRpbiB1bmlmb3Jtc1xuICAgICAgICB2YXIgdmlld3BvcnQgPSB0aGlzLnZpZXdwb3J0O1xuICAgICAgICB2YXIgdkRwciA9IHZpZXdwb3J0LmRldmljZVBpeGVsUmF0aW87XG4gICAgICAgIHZhciB2aWV3cG9ydFVuaWZvcm0gPSBbXG4gICAgICAgICAgICB2aWV3cG9ydC54ICogdkRwciwgdmlld3BvcnQueSAqIHZEcHIsXG4gICAgICAgICAgICB2aWV3cG9ydC53aWR0aCAqIHZEcHIsIHZpZXdwb3J0LmhlaWdodCAqIHZEcHJcbiAgICAgICAgXTtcbiAgICAgICAgdmFyIHdpbmRvd0RwciA9IHRoaXMuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgdmFyIHdpbmRvd1NpemVVbmlmb3JtID0gdGhpcy5fX2N1cnJlbnRGcmFtZUJ1ZmZlclxuICAgICAgICAgICAgPyBbdGhpcy5fX2N1cnJlbnRGcmFtZUJ1ZmZlci5nZXRUZXh0dXJlV2lkdGgoKSwgdGhpcy5fX2N1cnJlbnRGcmFtZUJ1ZmZlci5nZXRUZXh0dXJlSGVpZ2h0KCldXG4gICAgICAgICAgICA6IFt0aGlzLl93aWR0aCAqIHdpbmRvd0RwciwgdGhpcy5faGVpZ2h0ICogd2luZG93RHByXTtcbiAgICAgICAgLy8gREVQUkVDQVRFRFxuICAgICAgICB2YXIgdmlld3BvcnRTaXplVW5pZm9ybSA9IFtcbiAgICAgICAgICAgIHZpZXdwb3J0VW5pZm9ybVsyXSwgdmlld3BvcnRVbmlmb3JtWzNdXG4gICAgICAgIF07XG4gICAgICAgIHZhciB0aW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgdmlldyBhbmQgcHJvamVjdGlvbiBtYXRyaXhcbiAgICAgICAgaWYgKGNhbWVyYSkge1xuICAgICAgICAgICAgbWF0NC5jb3B5KG1hdHJpY2VzLlZJRVcsIGNhbWVyYS52aWV3TWF0cml4LmFycmF5KTtcbiAgICAgICAgICAgIG1hdDQuY29weShtYXRyaWNlcy5QUk9KRUNUSU9OLCBjYW1lcmEucHJvamVjdGlvbk1hdHJpeC5hcnJheSk7XG4gICAgICAgICAgICBtYXQ0LmNvcHkobWF0cmljZXMuVklFV0lOVkVSU0UsIGNhbWVyYS53b3JsZFRyYW5zZm9ybS5hcnJheSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtYXQ0LmlkZW50aXR5KG1hdHJpY2VzLlZJRVcpO1xuICAgICAgICAgICAgbWF0NC5pZGVudGl0eShtYXRyaWNlcy5QUk9KRUNUSU9OKTtcbiAgICAgICAgICAgIG1hdDQuaWRlbnRpdHkobWF0cmljZXMuVklFV0lOVkVSU0UpO1xuICAgICAgICB9XG4gICAgICAgIG1hdDQubXVsdGlwbHkobWF0cmljZXMuVklFV1BST0pFQ1RJT04sIG1hdHJpY2VzLlBST0pFQ1RJT04sIG1hdHJpY2VzLlZJRVcpO1xuICAgICAgICBtYXQ0LmludmVydChtYXRyaWNlcy5QUk9KRUNUSU9OSU5WRVJTRSwgbWF0cmljZXMuUFJPSkVDVElPTik7XG4gICAgICAgIG1hdDQuaW52ZXJ0KG1hdHJpY2VzLlZJRVdQUk9KRUNUSU9OSU5WRVJTRSwgbWF0cmljZXMuVklFV1BST0pFQ1RJT04pO1xuXG4gICAgICAgIHZhciBfZ2wgPSB0aGlzLmdsO1xuICAgICAgICB2YXIgc2NlbmUgPSB0aGlzLl9zY2VuZVJlbmRlcmluZztcblxuICAgICAgICB2YXIgcHJldk1hdGVyaWFsO1xuICAgICAgICB2YXIgcHJldlByb2dyYW07XG4gICAgICAgIHZhciBwcmV2UmVuZGVyYWJsZTtcblxuICAgICAgICAvLyBTdGF0dXNcbiAgICAgICAgdmFyIGRlcHRoVGVzdCwgZGVwdGhNYXNrO1xuICAgICAgICB2YXIgY3VsbGluZywgY3VsbEZhY2UsIGZyb250RmFjZTtcbiAgICAgICAgdmFyIHRyYW5zcGFyZW50O1xuICAgICAgICB2YXIgZHJhd0lEO1xuICAgICAgICB2YXIgY3VycmVudFZBTztcbiAgICAgICAgdmFyIG1hdGVyaWFsVGFrZXNUZXh0dXJlU2xvdDtcblxuICAgICAgICAvLyB2YXIgdmFvRXh0ID0gdGhpcy5nZXRHTEV4dGVuc2lvbignT0VTX3ZlcnRleF9hcnJheV9vYmplY3QnKTtcbiAgICAgICAgLy8gbm90IHVzZSB2YW9FeHQsIHNvbWUgcGxhdGZvcm1zIG1heSBtZXNzIGl0IHVwLlxuICAgICAgICB2YXIgdmFvRXh0ID0gbnVsbDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJhYmxlID0gbGlzdFtpXTtcbiAgICAgICAgICAgIHZhciBpc1NjZW5lTm9kZSA9IHJlbmRlcmFibGUud29ybGRUcmFuc2Zvcm0gIT0gbnVsbDtcbiAgICAgICAgICAgIHZhciB3b3JsZE07XG5cbiAgICAgICAgICAgIGlmICghaWZSZW5kZXJPYmplY3QocmVuZGVyYWJsZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2tpbm5lZCBtZXNoIHdpbGwgdHJhbnNmb3JtZWQgdG8gam9pbnQgc3BhY2UuIElnbm9yZSB0aGUgbWVzaCB0cmFuc2Zvcm1cbiAgICAgICAgICAgIGlmIChpc1NjZW5lTm9kZSkge1xuICAgICAgICAgICAgICAgIHdvcmxkTSA9IChyZW5kZXJhYmxlLmlzU2tpbm5lZE1lc2ggJiYgcmVuZGVyYWJsZS5pc1NraW5uZWRNZXNoKCkpXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE9cbiAgICAgICAgICAgICAgICAgICAgPyAocmVuZGVyYWJsZS5vZmZzZXRNYXRyaXggPyByZW5kZXJhYmxlLm9mZnNldE1hdHJpeC5hcnJheSA6bWF0cmljZXMuSURFTlRJVFkpXG4gICAgICAgICAgICAgICAgICAgIDogcmVuZGVyYWJsZS53b3JsZFRyYW5zZm9ybS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IHJlbmRlcmFibGUuZ2VvbWV0cnk7XG4gICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBwYXNzQ29uZmlnLmdldE1hdGVyaWFsLmNhbGwodGhpcywgcmVuZGVyYWJsZSk7XG5cbiAgICAgICAgICAgIHZhciBwcm9ncmFtID0gcmVuZGVyYWJsZS5fX3Byb2dyYW07XG4gICAgICAgICAgICB2YXIgc2hhZGVyID0gbWF0ZXJpYWwuc2hhZGVyO1xuXG4gICAgICAgICAgICB2YXIgY3VycmVudERyYXdJRCA9IGdlb21ldHJ5Ll9fdWlkX18gKyAnLScgKyBwcm9ncmFtLl9fdWlkX187XG4gICAgICAgICAgICB2YXIgZHJhd0lEQ2hhbmdlZCA9IGN1cnJlbnREcmF3SUQgIT09IGRyYXdJRDtcbiAgICAgICAgICAgIGRyYXdJRCA9IGN1cnJlbnREcmF3SUQ7XG4gICAgICAgICAgICBpZiAoZHJhd0lEQ2hhbmdlZCAmJiB2YW9FeHQpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPIFNlZW1zIG5lZWQgdG8gYmUgYm91bmQgdG8gbnVsbCBpbW1lZGlhdGVseSAob3IgYmVmb3JlIGJpbmQgYW5vdGhlciBwcm9ncmFtPykgaWYgdmFvIGlzIGNoYW5nZWRcbiAgICAgICAgICAgICAgICB2YW9FeHQuYmluZFZlcnRleEFycmF5T0VTKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzU2NlbmVOb2RlKSB7XG4gICAgICAgICAgICAgICAgbWF0NC5jb3B5KG1hdHJpY2VzLldPUkxELCB3b3JsZE0pO1xuICAgICAgICAgICAgICAgIG1hdDQubXVsdGlwbHkobWF0cmljZXMuV09STERWSUVXUFJPSkVDVElPTiwgbWF0cmljZXMuVklFV1BST0pFQ1RJT04sIHdvcmxkTSk7XG4gICAgICAgICAgICAgICAgbWF0NC5tdWx0aXBseUFmZmluZShtYXRyaWNlcy5XT1JMRFZJRVcsIG1hdHJpY2VzLlZJRVcsIHdvcmxkTSk7XG4gICAgICAgICAgICAgICAgaWYgKHNoYWRlci5tYXRyaXhTZW1hbnRpY3MuV09STERJTlZFUlNFIHx8XG4gICAgICAgICAgICAgICAgICAgIHNoYWRlci5tYXRyaXhTZW1hbnRpY3MuV09STERJTlZFUlNFVFJBTlNQT1NFKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdDQuaW52ZXJ0KG1hdHJpY2VzLldPUkxESU5WRVJTRSwgd29ybGRNKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNoYWRlci5tYXRyaXhTZW1hbnRpY3MuV09STERWSUVXSU5WRVJTRSB8fFxuICAgICAgICAgICAgICAgICAgICBzaGFkZXIubWF0cml4U2VtYW50aWNzLldPUkxEVklFV0lOVkVSU0VUUkFOU1BPU0UpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0NC5pbnZlcnQobWF0cmljZXMuV09STERWSUVXSU5WRVJTRSwgbWF0cmljZXMuV09STERWSUVXKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNoYWRlci5tYXRyaXhTZW1hbnRpY3MuV09STERWSUVXUFJPSkVDVElPTklOVkVSU0UgfHxcbiAgICAgICAgICAgICAgICAgICAgc2hhZGVyLm1hdHJpeFNlbWFudGljcy5XT1JMRFZJRVdQUk9KRUNUSU9OSU5WRVJTRVRSQU5TUE9TRSkge1xuICAgICAgICAgICAgICAgICAgICBtYXQ0LmludmVydChtYXRyaWNlcy5XT1JMRFZJRVdQUk9KRUNUSU9OSU5WRVJTRSwgbWF0cmljZXMuV09STERWSUVXUFJPSkVDVElPTik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBCZWZvcmUgcmVuZGVyIGhvb2tcbiAgICAgICAgICAgIHJlbmRlcmFibGUuYmVmb3JlUmVuZGVyICYmIHJlbmRlcmFibGUuYmVmb3JlUmVuZGVyKHRoaXMpO1xuICAgICAgICAgICAgcGFzc0NvbmZpZy5iZWZvcmVSZW5kZXIuY2FsbCh0aGlzLCByZW5kZXJhYmxlLCBtYXRlcmlhbCwgcHJldk1hdGVyaWFsKTtcblxuICAgICAgICAgICAgdmFyIHByb2dyYW1DaGFuZ2VkID0gcHJvZ3JhbSAhPT0gcHJldlByb2dyYW07XG4gICAgICAgICAgICBpZiAocHJvZ3JhbUNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBTZXQgbGlnaHRzIG51bWJlclxuICAgICAgICAgICAgICAgIHByb2dyYW0uYmluZCh0aGlzKTtcbiAgICAgICAgICAgICAgICAvLyBTZXQgc29tZSBjb21tb24gdW5pZm9ybXNcbiAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm1PZlNlbWFudGljKF9nbCwgJ1ZJRVdQT1JUJywgdmlld3BvcnRVbmlmb3JtKTtcbiAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm1PZlNlbWFudGljKF9nbCwgJ1dJTkRPV19TSVpFJywgd2luZG93U2l6ZVVuaWZvcm0pO1xuICAgICAgICAgICAgICAgIGlmIChjYW1lcmEpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3JhbS5zZXRVbmlmb3JtT2ZTZW1hbnRpYyhfZ2wsICdORUFSJywgY2FtZXJhLm5lYXIpO1xuICAgICAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm1PZlNlbWFudGljKF9nbCwgJ0ZBUicsIGNhbWVyYS5mYXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmxvZ0RlcHRoQnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIFNlbWFudGljP1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3JhbS5zZXRVbmlmb3JtT2ZTZW1hbnRpYyhfZ2wsICdMT0dfREVQVEhfQlVGRkVSX0ZDJywgMi4wIC8gKE1hdGgubG9nKGNhbWVyYS5mYXIgKyAxLjAgKSAvIE1hdGguTE4yKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvZ3JhbS5zZXRVbmlmb3JtT2ZTZW1hbnRpYyhfZ2wsICdERVZJQ0VQSVhFTFJBVElPJywgdkRwcik7XG4gICAgICAgICAgICAgICAgcHJvZ3JhbS5zZXRVbmlmb3JtT2ZTZW1hbnRpYyhfZ2wsICdUSU1FJywgdGltZSk7XG4gICAgICAgICAgICAgICAgLy8gREVQUkVDQVRFRFxuICAgICAgICAgICAgICAgIHByb2dyYW0uc2V0VW5pZm9ybU9mU2VtYW50aWMoX2dsLCAnVklFV1BPUlRfU0laRScsIHZpZXdwb3J0U2l6ZVVuaWZvcm0pO1xuXG4gICAgICAgICAgICAgICAgLy8gU2V0IGxpZ2h0cyB1bmlmb3Jtc1xuICAgICAgICAgICAgICAgIC8vIFRPRE8gbmVlZHMgb3B0aW1pemVkXG4gICAgICAgICAgICAgICAgaWYgKHNjZW5lKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjZW5lLnNldExpZ2h0VW5pZm9ybXMocHJvZ3JhbSwgcmVuZGVyYWJsZS5saWdodEdyb3VwLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9ncmFtID0gcHJldlByb2dyYW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFByb2dyYW0gY2hhbmdlcyBhbHNvIG5lZWRzIHJlc2V0IHRoZSBtYXRlcmlhbHMuXG4gICAgICAgICAgICBpZiAocHJvZ3JhbUNoYW5nZWQgfHwgcGFzc0NvbmZpZy5pc01hdGVyaWFsQ2hhbmdlZChcbiAgICAgICAgICAgICAgICByZW5kZXJhYmxlLCBwcmV2UmVuZGVyYWJsZSwgbWF0ZXJpYWwsIHByZXZNYXRlcmlhbFxuICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgIGlmIChtYXRlcmlhbC5kZXB0aFRlc3QgIT09IGRlcHRoVGVzdCkge1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5kZXB0aFRlc3QgPyBfZ2wuZW5hYmxlKF9nbC5ERVBUSF9URVNUKSA6IF9nbC5kaXNhYmxlKF9nbC5ERVBUSF9URVNUKTtcbiAgICAgICAgICAgICAgICAgICAgZGVwdGhUZXN0ID0gbWF0ZXJpYWwuZGVwdGhUZXN0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWF0ZXJpYWwuZGVwdGhNYXNrICE9PSBkZXB0aE1hc2spIHtcbiAgICAgICAgICAgICAgICAgICAgX2dsLmRlcHRoTWFzayhtYXRlcmlhbC5kZXB0aE1hc2spO1xuICAgICAgICAgICAgICAgICAgICBkZXB0aE1hc2sgPSBtYXRlcmlhbC5kZXB0aE1hc2s7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtYXRlcmlhbC50cmFuc3BhcmVudCAhPT0gdHJhbnNwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwudHJhbnNwYXJlbnQgPyBfZ2wuZW5hYmxlKF9nbC5CTEVORCkgOiBfZ2wuZGlzYWJsZShfZ2wuQkxFTkQpO1xuICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVudCA9IG1hdGVyaWFsLnRyYW5zcGFyZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUT0RPIGNhY2hlIGJsZW5kaW5nXG4gICAgICAgICAgICAgICAgaWYgKG1hdGVyaWFsLnRyYW5zcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRlcmlhbC5ibGVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuYmxlbmQoX2dsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgYmxlbmQgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIF9nbC5ibGVuZEVxdWF0aW9uU2VwYXJhdGUoX2dsLkZVTkNfQURELCBfZ2wuRlVOQ19BREQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2dsLmJsZW5kRnVuY1NlcGFyYXRlKF9nbC5TUkNfQUxQSEEsIF9nbC5PTkVfTUlOVVNfU1JDX0FMUEhBLCBfZ2wuT05FLCBfZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtYXRlcmlhbFRha2VzVGV4dHVyZVNsb3QgPSB0aGlzLl9iaW5kTWF0ZXJpYWwoXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmFibGUsIG1hdGVyaWFsLCBwcm9ncmFtLFxuICAgICAgICAgICAgICAgICAgICBwcmV2UmVuZGVyYWJsZSB8fCBudWxsLCBwcmV2TWF0ZXJpYWwgfHwgbnVsbCwgcHJldlByb2dyYW0gfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgcGFzc0NvbmZpZy5nZXRVbmlmb3JtXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBwcmV2TWF0ZXJpYWwgPSBtYXRlcmlhbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIG1hdHJpeFNlbWFudGljS2V5cyA9IHNoYWRlci5tYXRyaXhTZW1hbnRpY0tleXM7XG5cbiAgICAgICAgICAgIGlmIChpc1NjZW5lTm9kZSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbWF0cml4U2VtYW50aWNLZXlzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZW1hbnRpYyA9IG1hdHJpeFNlbWFudGljS2V5c1trXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbWFudGljSW5mbyA9IHNoYWRlci5tYXRyaXhTZW1hbnRpY3Nbc2VtYW50aWNdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0cml4ID0gbWF0cmljZXNbc2VtYW50aWNdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VtYW50aWNJbmZvLmlzVHJhbnNwb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0cml4Tm9UcmFuc3Bvc2UgPSBtYXRyaWNlc1tzZW1hbnRpY0luZm8uc2VtYW50aWNOb1RyYW5zcG9zZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXQ0LnRyYW5zcG9zZShtYXRyaXgsIG1hdHJpeE5vVHJhbnNwb3NlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm0oX2dsLCBzZW1hbnRpY0luZm8udHlwZSwgc2VtYW50aWNJbmZvLnN5bWJvbCwgbWF0cml4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyZW5kZXJhYmxlLmN1bGxGYWNlICE9PSBjdWxsRmFjZSkge1xuICAgICAgICAgICAgICAgIGN1bGxGYWNlID0gcmVuZGVyYWJsZS5jdWxsRmFjZTtcbiAgICAgICAgICAgICAgICBfZ2wuY3VsbEZhY2UoY3VsbEZhY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlbmRlcmFibGUuZnJvbnRGYWNlICE9PSBmcm9udEZhY2UpIHtcbiAgICAgICAgICAgICAgICBmcm9udEZhY2UgPSByZW5kZXJhYmxlLmZyb250RmFjZTtcbiAgICAgICAgICAgICAgICBfZ2wuZnJvbnRGYWNlKGZyb250RmFjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVuZGVyYWJsZS5jdWxsaW5nICE9PSBjdWxsaW5nKSB7XG4gICAgICAgICAgICAgICAgY3VsbGluZyA9IHJlbmRlcmFibGUuY3VsbGluZztcbiAgICAgICAgICAgICAgICBjdWxsaW5nID8gX2dsLmVuYWJsZShfZ2wuQ1VMTF9GQUNFKSA6IF9nbC5kaXNhYmxlKF9nbC5DVUxMX0ZBQ0UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVE9ETyBOb3QgdXBkYXRlIHNrZWxldG9uIGluIGVhY2ggcmVuZGVyYWJsZS5cbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVNrZWxldG9uKHJlbmRlcmFibGUsIHByb2dyYW0sIG1hdGVyaWFsVGFrZXNUZXh0dXJlU2xvdCk7XG4gICAgICAgICAgICBpZiAoZHJhd0lEQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRWQU8gPSB0aGlzLl9iaW5kVkFPKHZhb0V4dCwgc2hhZGVyLCBnZW9tZXRyeSwgcHJvZ3JhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJPYmplY3QocmVuZGVyYWJsZSwgY3VycmVudFZBTywgcHJvZ3JhbSk7XG5cbiAgICAgICAgICAgIC8vIEFmdGVyIHJlbmRlciBob29rXG4gICAgICAgICAgICBwYXNzQ29uZmlnLmFmdGVyUmVuZGVyKHRoaXMsIHJlbmRlcmFibGUpO1xuICAgICAgICAgICAgcmVuZGVyYWJsZS5hZnRlclJlbmRlciAmJiByZW5kZXJhYmxlLmFmdGVyUmVuZGVyKHRoaXMpO1xuXG4gICAgICAgICAgICBwcmV2UHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgICAgICBwcmV2UmVuZGVyYWJsZSA9IHJlbmRlcmFibGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUT0RPIFNlZW1zIG5lZWQgdG8gYmUgYm91bmQgdG8gbnVsbCBpbW1lZGlhdGVseSBpZiB2YW8gaXMgY2hhbmdlZD9cbiAgICAgICAgaWYgKHZhb0V4dCkge1xuICAgICAgICAgICAgdmFvRXh0LmJpbmRWZXJ0ZXhBcnJheU9FUyhudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignYWZ0ZXJyZW5kZXJwYXNzJywgdGhpcywgbGlzdCwgY2FtZXJhLCBwYXNzQ29uZmlnKTtcbiAgICB9LFxuXG4gICAgZ2V0TWF4Sm9pbnROdW1iZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4Sm9pbnROdW1iZXI7XG4gICAgfSxcblxuICAgIF91cGRhdGVTa2VsZXRvbjogZnVuY3Rpb24gKG9iamVjdCwgcHJvZ3JhbSwgc2xvdCkge1xuICAgICAgICB2YXIgX2dsID0gdGhpcy5nbDtcbiAgICAgICAgdmFyIHNrZWxldG9uID0gb2JqZWN0LnNrZWxldG9uO1xuICAgICAgICAvLyBTZXQgcG9zZSBtYXRyaWNlcyBvZiBza2lubmVkIG1lc2hcbiAgICAgICAgaWYgKHNrZWxldG9uKSB7XG4gICAgICAgICAgICAvLyBUT0RPIFVwZGF0ZSBiZWZvcmUgY3VsbGluZy5cbiAgICAgICAgICAgIHNrZWxldG9uLnVwZGF0ZSgpO1xuICAgICAgICAgICAgaWYgKG9iamVjdC5qb2ludHMubGVuZ3RoID4gdGhpcy5nZXRNYXhKb2ludE51bWJlcigpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNraW5NYXRyaWNlc1RleHR1cmUgPSBza2VsZXRvbi5nZXRTdWJTa2luTWF0cmljZXNUZXh0dXJlKG9iamVjdC5fX3VpZF9fLCBvYmplY3Quam9pbnRzKTtcbiAgICAgICAgICAgICAgICBwcm9ncmFtLnVzZVRleHR1cmVTbG90KHRoaXMsIHNraW5NYXRyaWNlc1RleHR1cmUsIHNsb3QpO1xuICAgICAgICAgICAgICAgIHByb2dyYW0uc2V0VW5pZm9ybShfZ2wsICcxaScsICdza2luTWF0cmljZXNUZXh0dXJlJywgc2xvdCk7XG4gICAgICAgICAgICAgICAgcHJvZ3JhbS5zZXRVbmlmb3JtKF9nbCwgJzFmJywgJ3NraW5NYXRyaWNlc1RleHR1cmVTaXplJywgc2tpbk1hdHJpY2VzVGV4dHVyZS53aWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgc2tpbk1hdHJpY2VzQXJyYXkgPSBza2VsZXRvbi5nZXRTdWJTa2luTWF0cmljZXMob2JqZWN0Ll9fdWlkX18sIG9iamVjdC5qb2ludHMpO1xuICAgICAgICAgICAgICAgIHByb2dyYW0uc2V0VW5pZm9ybU9mU2VtYW50aWMoX2dsLCAnU0tJTl9NQVRSSVgnLCBza2luTWF0cmljZXNBcnJheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX3JlbmRlck9iamVjdDogZnVuY3Rpb24gKHJlbmRlcmFibGUsIHZhbywgcHJvZ3JhbSkge1xuICAgICAgICB2YXIgX2dsID0gdGhpcy5nbDtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gcmVuZGVyYWJsZS5nZW9tZXRyeTtcblxuICAgICAgICB2YXIgZ2xEcmF3TW9kZSA9IHJlbmRlcmFibGUubW9kZTtcbiAgICAgICAgaWYgKGdsRHJhd01vZGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgZ2xEcmF3TW9kZSA9IDB4MDAwNDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBleHQgPSBudWxsO1xuICAgICAgICB2YXIgaXNJbnN0YW5jZWQgPSByZW5kZXJhYmxlLmlzSW5zdGFuY2VkTWVzaCAmJiByZW5kZXJhYmxlLmlzSW5zdGFuY2VkTWVzaCgpO1xuICAgICAgICBpZiAoaXNJbnN0YW5jZWQpIHtcbiAgICAgICAgICAgIGV4dCA9IHRoaXMuZ2V0R0xFeHRlbnNpb24oJ0FOR0xFX2luc3RhbmNlZF9hcnJheXMnKTtcbiAgICAgICAgICAgIGlmICghZXh0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdEZXZpY2Ugbm90IHN1cHBvcnQgQU5HTEVfaW5zdGFuY2VkX2FycmF5cyBleHRlbnNpb24nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaW5zdGFuY2VkQXR0ckxvY2F0aW9ucztcbiAgICAgICAgaWYgKGlzSW5zdGFuY2VkKSB7XG4gICAgICAgICAgICBpbnN0YW5jZWRBdHRyTG9jYXRpb25zID0gdGhpcy5fYmluZEluc3RhbmNlZEF0dHJpYnV0ZXMocmVuZGVyYWJsZSwgcHJvZ3JhbSwgZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YW8uaW5kaWNlc0J1ZmZlcikge1xuICAgICAgICAgICAgdmFyIHVpbnRFeHQgPSB0aGlzLmdldEdMRXh0ZW5zaW9uKCdPRVNfZWxlbWVudF9pbmRleF91aW50Jyk7XG4gICAgICAgICAgICB2YXIgdXNlVWludEV4dCA9IHVpbnRFeHQgJiYgKGdlb21ldHJ5LmluZGljZXMgaW5zdGFuY2VvZiBVaW50MzJBcnJheSk7XG4gICAgICAgICAgICB2YXIgaW5kaWNlc1R5cGUgPSB1c2VVaW50RXh0ID8gX2dsLlVOU0lHTkVEX0lOVCA6IF9nbC5VTlNJR05FRF9TSE9SVDtcblxuICAgICAgICAgICAgaWYgKGlzSW5zdGFuY2VkKSB7XG4gICAgICAgICAgICAgICAgZXh0LmRyYXdFbGVtZW50c0luc3RhbmNlZEFOR0xFKFxuICAgICAgICAgICAgICAgICAgICBnbERyYXdNb2RlLCB2YW8uaW5kaWNlc0J1ZmZlci5jb3VudCwgaW5kaWNlc1R5cGUsIDAsIHJlbmRlcmFibGUuZ2V0SW5zdGFuY2VDb3VudCgpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF9nbC5kcmF3RWxlbWVudHMoZ2xEcmF3TW9kZSwgdmFvLmluZGljZXNCdWZmZXIuY291bnQsIGluZGljZXNUeXBlLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChpc0luc3RhbmNlZCkge1xuICAgICAgICAgICAgICAgIGV4dC5kcmF3QXJyYXlzSW5zdGFuY2VkQU5HTEUoZ2xEcmF3TW9kZSwgMCwgZ2VvbWV0cnkudmVydGV4Q291bnQsIHJlbmRlcmFibGUuZ2V0SW5zdGFuY2VDb3VudCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEZJWE1FIFVzZSB2ZXJ0ZXggbnVtYmVyIGluIGJ1ZmZlclxuICAgICAgICAgICAgICAgIC8vIHZlcnRleENvdW50IG1heSBnZXQgdGhlIHdyb25nIHZhbHVlIHdoZW4gZ2VvbWV0cnkgZm9yZ2V0IHRvIG1hcmsgZGlydHkgYWZ0ZXIgdXBkYXRlXG4gICAgICAgICAgICAgICAgX2dsLmRyYXdBcnJheXMoZ2xEcmF3TW9kZSwgMCwgZ2VvbWV0cnkudmVydGV4Q291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzSW5zdGFuY2VkKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluc3RhbmNlZEF0dHJMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWluc3RhbmNlZEF0dHJMb2NhdGlvbnNbaV0uZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBfZ2wuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGluc3RhbmNlZEF0dHJMb2NhdGlvbnNbaV0ubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBleHQudmVydGV4QXR0cmliRGl2aXNvckFOR0xFKGluc3RhbmNlZEF0dHJMb2NhdGlvbnNbaV0ubG9jYXRpb24sIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9iaW5kSW5zdGFuY2VkQXR0cmlidXRlczogZnVuY3Rpb24gKHJlbmRlcmFibGUsIHByb2dyYW0sIGV4dCkge1xuICAgICAgICB2YXIgX2dsID0gdGhpcy5nbDtcbiAgICAgICAgdmFyIGluc3RhbmNlZEJ1ZmZlcnMgPSByZW5kZXJhYmxlLmdldEluc3RhbmNlZEF0dHJpYnV0ZXNCdWZmZXJzKHRoaXMpO1xuICAgICAgICB2YXIgbG9jYXRpb25zID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnN0YW5jZWRCdWZmZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYnVmZmVyT2JqID0gaW5zdGFuY2VkQnVmZmVyc1tpXTtcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHByb2dyYW0uZ2V0QXR0cmliTG9jYXRpb24oX2dsLCBidWZmZXJPYmouc3ltYm9sKTtcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbiA8IDApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGdsVHlwZSA9IGF0dHJpYnV0ZUJ1ZmZlclR5cGVNYXBbYnVmZmVyT2JqLnR5cGVdIHx8IF9nbC5GTE9BVDs7XG4gICAgICAgICAgICB2YXIgaXNFbmFibGVkID0gcHJvZ3JhbS5pc0F0dHJpYkVuYWJsZWQodGhpcywgbG9jYXRpb24pO1xuICAgICAgICAgICAgaWYgKCFwcm9ncmFtLmlzQXR0cmliRW5hYmxlZCh0aGlzLCBsb2NhdGlvbikpIHtcbiAgICAgICAgICAgICAgICBfZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkobG9jYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYXRpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBsb2NhdGlvbixcbiAgICAgICAgICAgICAgICBlbmFibGVkOiBpc0VuYWJsZWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgX2dsLmJpbmRCdWZmZXIoX2dsLkFSUkFZX0JVRkZFUiwgYnVmZmVyT2JqLmJ1ZmZlcik7XG4gICAgICAgICAgICBfZ2wudmVydGV4QXR0cmliUG9pbnRlcihsb2NhdGlvbiwgYnVmZmVyT2JqLnNpemUsIGdsVHlwZSwgZmFsc2UsIDAsIDApO1xuICAgICAgICAgICAgZXh0LnZlcnRleEF0dHJpYkRpdmlzb3JBTkdMRShsb2NhdGlvbiwgYnVmZmVyT2JqLmRpdmlzb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGxvY2F0aW9ucztcbiAgICB9LFxuXG4gICAgX2JpbmRNYXRlcmlhbDogZnVuY3Rpb24gKHJlbmRlcmFibGUsIG1hdGVyaWFsLCBwcm9ncmFtLCBwcmV2UmVuZGVyYWJsZSwgcHJldk1hdGVyaWFsLCBwcmV2UHJvZ3JhbSwgZ2V0VW5pZm9ybVZhbHVlKSB7XG4gICAgICAgIHZhciBfZ2wgPSB0aGlzLmdsO1xuICAgICAgICAvLyBQRU5ESU5HIFNhbWUgdGV4dHVyZSBpbiBkaWZmZXJlbnQgbWF0ZXJpYWwgdGFrZSBkaWZmZXJlbnQgc2xvdD9cblxuICAgICAgICAvLyBNYXkgdXNlIHNoYWRlciBvZiBvdGhlciBtYXRlcmlhbCBpZiBzaGFkZXIgY29kZSBhcmUgc2FtZVxuICAgICAgICB2YXIgc2FtZVByb2dyYW0gPSBwcmV2UHJvZ3JhbSA9PT0gcHJvZ3JhbTtcblxuICAgICAgICB2YXIgY3VycmVudFRleHR1cmVTbG90ID0gcHJvZ3JhbS5jdXJyZW50VGV4dHVyZVNsb3QoKTtcbiAgICAgICAgdmFyIGVuYWJsZWRVbmlmb3JtcyA9IG1hdGVyaWFsLmdldEVuYWJsZWRVbmlmb3JtcygpO1xuICAgICAgICB2YXIgdGV4dHVyZVVuaWZvcm1zID0gbWF0ZXJpYWwuZ2V0VGV4dHVyZVVuaWZvcm1zKCk7XG4gICAgICAgIHZhciBwbGFjZWhvbGRlclRleHR1cmUgPSB0aGlzLl9wbGFjZWhvbGRlclRleHR1cmU7XG5cbiAgICAgICAgZm9yICh2YXIgdSA9IDA7IHUgPCB0ZXh0dXJlVW5pZm9ybXMubGVuZ3RoOyB1KyspIHtcbiAgICAgICAgICAgIHZhciBzeW1ib2wgPSB0ZXh0dXJlVW5pZm9ybXNbdV07XG4gICAgICAgICAgICB2YXIgdW5pZm9ybVZhbHVlID0gZ2V0VW5pZm9ybVZhbHVlKHJlbmRlcmFibGUsIG1hdGVyaWFsLCBzeW1ib2wpO1xuICAgICAgICAgICAgdmFyIHVuaWZvcm1UeXBlID0gbWF0ZXJpYWwudW5pZm9ybXNbc3ltYm9sXS50eXBlO1xuICAgICAgICAgICAgLy8gTm90IHVzZSBgaW5zdGFuY2VvZmAgdG8gZGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgdGV4dHVyZSBpbiBNYXRlcmlhbCNiaW5kLlxuICAgICAgICAgICAgLy8gVXNlIHR5cGUgaW5zdGVhZCwgaW4gc29tZSBjYXNlIHRleHR1cmUgbWF5IGJlIGluIGRpZmZlcmVudCBuYW1lc3BhY2VzLlxuICAgICAgICAgICAgLy8gVE9ETyBEdWNrIHR5cGUgdmFsaWRhdGUuXG4gICAgICAgICAgICBpZiAodW5pZm9ybVR5cGUgPT09ICd0JyAmJiB1bmlmb3JtVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBzbG90XG4gICAgICAgICAgICAgICAgdW5pZm9ybVZhbHVlLl9fc2xvdCA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5pZm9ybVR5cGUgPT09ICd0dicpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVuaWZvcm1WYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodW5pZm9ybVZhbHVlW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlmb3JtVmFsdWVbaV0uX19zbG90ID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwbGFjZWhvbGRlclRleHR1cmUuX19zbG90ID0gLTE7XG5cbiAgICAgICAgLy8gU2V0IHVuaWZvcm1zXG4gICAgICAgIGZvciAodmFyIHUgPSAwOyB1IDwgZW5hYmxlZFVuaWZvcm1zLmxlbmd0aDsgdSsrKSB7XG4gICAgICAgICAgICB2YXIgc3ltYm9sID0gZW5hYmxlZFVuaWZvcm1zW3VdO1xuICAgICAgICAgICAgdmFyIHVuaWZvcm0gPSBtYXRlcmlhbC51bmlmb3Jtc1tzeW1ib2xdO1xuICAgICAgICAgICAgdmFyIHVuaWZvcm1WYWx1ZSA9IGdldFVuaWZvcm1WYWx1ZShyZW5kZXJhYmxlLCBtYXRlcmlhbCwgc3ltYm9sKTtcbiAgICAgICAgICAgIHZhciB1bmlmb3JtVHlwZSA9IHVuaWZvcm0udHlwZTtcbiAgICAgICAgICAgIHZhciBpc1RleHR1cmUgPSB1bmlmb3JtVHlwZSA9PT0gJ3QnO1xuXG4gICAgICAgICAgICBpZiAoaXNUZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1bmlmb3JtVmFsdWUgfHwgIXVuaWZvcm1WYWx1ZS5pc1JlbmRlcmFibGUoKSkge1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3JtVmFsdWUgPSBwbGFjZWhvbGRlclRleHR1cmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUEVORElOR1xuICAgICAgICAgICAgLy8gV2hlbiBiaW5kaW5nIHR3byBtYXRlcmlhbHMgd2l0aCB0aGUgc2FtZSBzaGFkZXJcbiAgICAgICAgICAgIC8vIE1hbnkgdW5pZm9ybXMgd2lsbCBiZSBiZSBzZXQgdHdpY2UgZXZlbiBpZiB0aGV5IGhhdmUgdGhlIHNhbWUgdmFsdWVcbiAgICAgICAgICAgIC8vIFNvIGFkZCBhIGV2YWx1YXRpb24gdG8gc2VlIGlmIHRoZSB1bmlmb3JtIGlzIHJlYWxseSBuZWVkZWQgdG8gYmUgc2V0XG4gICAgICAgICAgICBpZiAocHJldk1hdGVyaWFsICYmIHNhbWVQcm9ncmFtKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByZXZVbmlmb3JtVmFsdWUgPSBnZXRVbmlmb3JtVmFsdWUocHJldlJlbmRlcmFibGUsIHByZXZNYXRlcmlhbCwgc3ltYm9sKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNUZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJldlVuaWZvcm1WYWx1ZSB8fCAhcHJldlVuaWZvcm1WYWx1ZS5pc1JlbmRlcmFibGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlVuaWZvcm1WYWx1ZSA9IHBsYWNlaG9sZGVyVGV4dHVyZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChwcmV2VW5pZm9ybVZhbHVlID09PSB1bmlmb3JtVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVGV4dHVyZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RpbGwgdGFrZSB0aGUgc2xvdCB0byBtYWtlIHN1cmUgc2FtZSB0ZXh0dXJlIGluIGRpZmZlcmVudCBtYXRlcmlhbHMgaGF2ZSBzYW1lIHNsb3QuXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmFtLnRha2VDdXJyZW50VGV4dHVyZVNsb3QodGhpcywgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodW5pZm9ybVR5cGUgPT09ICd0dicgJiYgdW5pZm9ybVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVuaWZvcm1WYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyYW0udGFrZUN1cnJlbnRUZXh0dXJlU2xvdCh0aGlzLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh1bmlmb3JtVmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNUZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHVuaWZvcm1WYWx1ZS5fX3Nsb3QgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzbG90ID0gcHJvZ3JhbS5jdXJyZW50VGV4dHVyZVNsb3QoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IHByb2dyYW0uc2V0VW5pZm9ybShfZ2wsICcxaScsIHN5bWJvbCwgc2xvdCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMpIHsgLy8gVGV4dHVyZSB1bmlmb3JtIGlzIGVuYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyYW0udGFrZUN1cnJlbnRUZXh0dXJlU2xvdCh0aGlzLCB1bmlmb3JtVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5pZm9ybVZhbHVlLl9fc2xvdCA9IHNsb3Q7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gTXVsdGlwbGUgdW5pZm9ybSB1c2Ugc2FtZSB0ZXh0dXJlLi5cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3JhbS5zZXRVbmlmb3JtKF9nbCwgJzFpJywgc3ltYm9sLCB1bmlmb3JtVmFsdWUuX19zbG90KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHVuaWZvcm1WYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAodW5pZm9ybVZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVGV4dHVyZSBBcnJheVxuICAgICAgICAgICAgICAgIGlmICh1bmlmb3JtVHlwZSA9PT0gJ3R2Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXByb2dyYW0uaGFzVW5pZm9ybShzeW1ib2wpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bmlmb3JtVmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gdW5pZm9ybVZhbHVlW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGV4dHVyZS5fX3Nsb3QgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNsb3QgPSBwcm9ncmFtLmN1cnJlbnRUZXh0dXJlU2xvdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKHNsb3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyYW0udGFrZUN1cnJlbnRUZXh0dXJlU2xvdCh0aGlzLCB0ZXh0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLl9fc2xvdCA9IHNsb3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh0ZXh0dXJlLl9fc2xvdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm0oX2dsLCAnMWl2Jywgc3ltYm9sLCBhcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvZ3JhbS5zZXRVbmlmb3JtKF9nbCwgdW5pZm9ybS50eXBlLCBzeW1ib2wsIHVuaWZvcm1WYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm0oX2dsLCB1bmlmb3JtLnR5cGUsIHN5bWJvbCwgdW5pZm9ybVZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3U2xvdCA9IHByb2dyYW0uY3VycmVudFRleHR1cmVTbG90KCk7XG4gICAgICAgIC8vIFRleHR1cmUgc2xvdCBtYXliZSB1c2VkIG91dCBvZiBtYXRlcmlhbC5cbiAgICAgICAgcHJvZ3JhbS5yZXNldFRleHR1cmVTbG90KGN1cnJlbnRUZXh0dXJlU2xvdCk7XG4gICAgICAgIHJldHVybiBuZXdTbG90O1xuICAgIH0sXG5cbiAgICBfYmluZFZBTzogZnVuY3Rpb24gKHZhb0V4dCwgc2hhZGVyLCBnZW9tZXRyeSwgcHJvZ3JhbSkge1xuICAgICAgICB2YXIgaXNTdGF0aWMgPSAhZ2VvbWV0cnkuZHluYW1pYztcbiAgICAgICAgdmFyIF9nbCA9IHRoaXMuZ2w7XG5cbiAgICAgICAgdmFyIHZhb0lkID0gdGhpcy5fX3VpZF9fICsgJy0nICsgcHJvZ3JhbS5fX3VpZF9fO1xuICAgICAgICB2YXIgdmFvID0gZ2VvbWV0cnkuX192YW9DYWNoZVt2YW9JZF07XG4gICAgICAgIGlmICghdmFvKSB7XG4gICAgICAgICAgICB2YXIgY2h1bmtzID0gZ2VvbWV0cnkuZ2V0QnVmZmVyQ2h1bmtzKHRoaXMpO1xuICAgICAgICAgICAgaWYgKCFjaHVua3MgfHwgIWNodW5rcy5sZW5ndGgpIHsgIC8vIEVtcHR5IG1lc2hcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2h1bmsgPSBjaHVua3NbMF07XG4gICAgICAgICAgICB2YXIgYXR0cmlidXRlQnVmZmVycyA9IGNodW5rLmF0dHJpYnV0ZUJ1ZmZlcnM7XG4gICAgICAgICAgICB2YXIgaW5kaWNlc0J1ZmZlciA9IGNodW5rLmluZGljZXNCdWZmZXI7XG5cbiAgICAgICAgICAgIHZhciBhdmFpbGFibGVBdHRyaWJ1dGVzID0gW107XG4gICAgICAgICAgICB2YXIgYXZhaWxhYmxlQXR0cmlidXRlU3ltYm9scyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBhdHRyaWJ1dGVCdWZmZXJzLmxlbmd0aDsgYSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZUJ1ZmZlckluZm8gPSBhdHRyaWJ1dGVCdWZmZXJzW2FdO1xuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gYXR0cmlidXRlQnVmZmVySW5mby5uYW1lO1xuICAgICAgICAgICAgICAgIHZhciBzZW1hbnRpYyA9IGF0dHJpYnV0ZUJ1ZmZlckluZm8uc2VtYW50aWM7XG4gICAgICAgICAgICAgICAgdmFyIHN5bWJvbDtcbiAgICAgICAgICAgICAgICBpZiAoc2VtYW50aWMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbWFudGljSW5mbyA9IHNoYWRlci5hdHRyaWJ1dGVTZW1hbnRpY3Nbc2VtYW50aWNdO1xuICAgICAgICAgICAgICAgICAgICBzeW1ib2wgPSBzZW1hbnRpY0luZm8gJiYgc2VtYW50aWNJbmZvLnN5bWJvbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN5bWJvbCA9IG5hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzeW1ib2wgJiYgcHJvZ3JhbS5hdHRyaWJ1dGVzW3N5bWJvbF0pIHtcbiAgICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlQXR0cmlidXRlcy5wdXNoKGF0dHJpYnV0ZUJ1ZmZlckluZm8pO1xuICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVBdHRyaWJ1dGVTeW1ib2xzLnB1c2goc3ltYm9sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhbyA9IG5ldyBWZXJ0ZXhBcnJheU9iamVjdChcbiAgICAgICAgICAgICAgICBhdmFpbGFibGVBdHRyaWJ1dGVzLFxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZUF0dHJpYnV0ZVN5bWJvbHMsXG4gICAgICAgICAgICAgICAgaW5kaWNlc0J1ZmZlclxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKGlzU3RhdGljKSB7XG4gICAgICAgICAgICAgICAgZ2VvbWV0cnkuX192YW9DYWNoZVt2YW9JZF0gPSB2YW87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbmVlZHNCaW5kQXR0cmlidXRlcyA9IHRydWU7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHZlcnRleCBvYmplY3QgYXJyYXkgY29zdCBhIGxvdFxuICAgICAgICAvLyBTbyB3ZSBkb24ndCB1c2UgaXQgb24gdGhlIGR5bmFtaWMgb2JqZWN0XG4gICAgICAgIGlmICh2YW9FeHQgJiYgaXNTdGF0aWMpIHtcbiAgICAgICAgICAgIC8vIFVzZSB2ZXJ0ZXggYXJyYXkgb2JqZWN0XG4gICAgICAgICAgICAvLyBodHRwOi8vYmxvZy50b2ppY29kZS5jb20vMjAxMi8xMC9vZXN2ZXJ0ZXhhcnJheW9iamVjdC1leHRlbnNpb24uaHRtbFxuICAgICAgICAgICAgaWYgKHZhby52YW8gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhby52YW8gPSB2YW9FeHQuY3JlYXRlVmVydGV4QXJyYXlPRVMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5lZWRzQmluZEF0dHJpYnV0ZXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhb0V4dC5iaW5kVmVydGV4QXJyYXlPRVModmFvLnZhbyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYXZhaWxhYmxlQXR0cmlidXRlcyA9IHZhby5hdmFpbGFibGVBdHRyaWJ1dGVzO1xuICAgICAgICB2YXIgaW5kaWNlc0J1ZmZlciA9IHZhby5pbmRpY2VzQnVmZmVyO1xuXG4gICAgICAgIGlmIChuZWVkc0JpbmRBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICB2YXIgbG9jYXRpb25MaXN0ID0gcHJvZ3JhbS5lbmFibGVBdHRyaWJ1dGVzKHRoaXMsIHZhby5hdmFpbGFibGVBdHRyaWJ1dGVTeW1ib2xzLCAodmFvRXh0ICYmIGlzU3RhdGljICYmIHZhbykpO1xuICAgICAgICAgICAgLy8gU2V0dGluZyBhdHRyaWJ1dGVzO1xuICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBhdmFpbGFibGVBdHRyaWJ1dGVzLmxlbmd0aDsgYSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gbG9jYXRpb25MaXN0W2FdO1xuICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbiA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVCdWZmZXJJbmZvID0gYXZhaWxhYmxlQXR0cmlidXRlc1thXTtcbiAgICAgICAgICAgICAgICB2YXIgYnVmZmVyID0gYXR0cmlidXRlQnVmZmVySW5mby5idWZmZXI7XG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSBhdHRyaWJ1dGVCdWZmZXJJbmZvLnNpemU7XG4gICAgICAgICAgICAgICAgdmFyIGdsVHlwZSA9IGF0dHJpYnV0ZUJ1ZmZlclR5cGVNYXBbYXR0cmlidXRlQnVmZmVySW5mby50eXBlXSB8fCBfZ2wuRkxPQVQ7XG5cbiAgICAgICAgICAgICAgICBfZ2wuYmluZEJ1ZmZlcihfZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIpO1xuICAgICAgICAgICAgICAgIF9nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGxvY2F0aW9uLCBzaXplLCBnbFR5cGUsIGZhbHNlLCAwLCAwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGdlb21ldHJ5LmlzVXNlSW5kaWNlcygpKSB7XG4gICAgICAgICAgICAgICAgX2dsLmJpbmRCdWZmZXIoX2dsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBpbmRpY2VzQnVmZmVyLmJ1ZmZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFvO1xuICAgIH0sXG5cbiAgICByZW5kZXJQcmVaOiBmdW5jdGlvbiAobGlzdCwgc2NlbmUsIGNhbWVyYSkge1xuICAgICAgICB2YXIgX2dsID0gdGhpcy5nbDtcbiAgICAgICAgdmFyIHByZVpQYXNzTWF0ZXJpYWwgPSB0aGlzLl9wcmV6TWF0ZXJpYWwgfHwgbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgICAgIHNoYWRlcjogbmV3IFNoYWRlcihTaGFkZXIuc291cmNlKCdjbGF5LnByZXoudmVydGV4JyksIFNoYWRlci5zb3VyY2UoJ2NsYXkucHJlei5mcmFnbWVudCcpKVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fcHJlek1hdGVyaWFsID0gcHJlWlBhc3NNYXRlcmlhbDtcbiAgICAgICAgaWYgKHRoaXMubG9nRGVwdGhCdWZmZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX3ByZXpNYXRlcmlhbC5zZXRVbmlmb3JtKCdsb2dEZXB0aEJ1ZkZDJywgMi4wIC8gKE1hdGgubG9nKGNhbWVyYS5mYXIgKyAxLjAgKSAvIE1hdGguTE4yKSk7XG4gICAgICAgIH1cblxuICAgICAgICBfZ2wuY29sb3JNYXNrKGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgX2dsLmRlcHRoTWFzayh0cnVlKTtcblxuICAgICAgICAvLyBTdGF0dXNcbiAgICAgICAgdGhpcy5yZW5kZXJQYXNzKGxpc3QsIGNhbWVyYSwge1xuICAgICAgICAgICAgaWZSZW5kZXI6IGZ1bmN0aW9uIChyZW5kZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFyZW5kZXJhYmxlLmlnbm9yZVByZVo7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNNYXRlcmlhbENoYW5nZWQ6IGZ1bmN0aW9uIChyZW5kZXJhYmxlLCBwcmV2UmVuZGVyYWJsZSkge1xuICAgICAgICAgICAgICAgIHZhciBtYXRBID0gcmVuZGVyYWJsZS5tYXRlcmlhbDtcbiAgICAgICAgICAgICAgICB2YXIgbWF0QiA9IHByZXZSZW5kZXJhYmxlLm1hdGVyaWFsO1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXRBLmdldCgnZGlmZnVzZU1hcCcpICE9PSBtYXRCLmdldCgnZGlmZnVzZU1hcCcpXG4gICAgICAgICAgICAgICAgICAgIHx8IChtYXRBLmdldCgnYWxwaGFDdXRvZmYnKSB8fCAwKSAhPT0gKG1hdEIuZ2V0KCdhbHBoYUN1dG9mZicpIHx8IDApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFVuaWZvcm06IGZ1bmN0aW9uIChyZW5kZXJhYmxlLCBkZXB0aE1hdGVyaWFsLCBzeW1ib2wpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3ltYm9sID09PSAnYWxwaGFNYXAnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJhYmxlLm1hdGVyaWFsLmdldCgnZGlmZnVzZU1hcCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzeW1ib2wgPT09ICdhbHBoYUN1dG9mZicpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbmRlcmFibGUubWF0ZXJpYWwuaXNEZWZpbmVkKCdmcmFnbWVudCcsICdBTFBIQV9URVNUJylcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHJlbmRlcmFibGUubWF0ZXJpYWwuZ2V0KCdkaWZmdXNlTWFwJylcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxwaGFDdXRvZmYgPSByZW5kZXJhYmxlLm1hdGVyaWFsLmdldCgnYWxwaGFDdXRvZmYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhbHBoYUN1dG9mZiB8fCAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzeW1ib2wgPT09ICd1dlJlcGVhdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmFibGUubWF0ZXJpYWwuZ2V0KCd1dlJlcGVhdCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzeW1ib2wgPT09ICd1dk9mZnNldCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmFibGUubWF0ZXJpYWwuZ2V0KCd1dk9mZnNldCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlcHRoTWF0ZXJpYWwuZ2V0KHN5bWJvbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldE1hdGVyaWFsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZVpQYXNzTWF0ZXJpYWw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc29ydDogdGhpcy5vcGFxdWVTb3J0Q29tcGFyZVxuICAgICAgICB9KTtcblxuICAgICAgICBfZ2wuY29sb3JNYXNrKHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuICAgICAgICBfZ2wuZGVwdGhNYXNrKHRydWUpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIGdpdmVuIHNjZW5lLCBpbmNsdWRpbmcgYWxsIGdlb21ldHJpcywgdGV4dHVyZXMgYW5kIHNoYWRlcnMgaW4gdGhlIHNjZW5lXG4gICAgICogQHBhcmFtIHtjbGF5LlNjZW5lfSBzY2VuZVxuICAgICAqL1xuICAgIGRpc3Bvc2VTY2VuZTogZnVuY3Rpb24oc2NlbmUpIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlTm9kZShzY2VuZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIHNjZW5lLmRpc3Bvc2UoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBnaXZlbiBub2RlLCBpbmNsdWRpbmcgYWxsIGdlb21ldHJpZXMsIHRleHR1cmVzIGFuZCBzaGFkZXJzIGF0dGFjaGVkIG9uIGl0IG9yIGl0cyBkZXNjZW5kYW50XG4gICAgICogQHBhcmFtIHtjbGF5Lk5vZGV9IG5vZGVcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtkaXNwb3NlR2VvbWV0cnk9ZmFsc2VdIElmIGRpc3Bvc2UgdGhlIGdlb21ldHJpZXMgdXNlZCBpbiB0aGUgZGVzY2VuZGFudCBtZXNoXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbZGlzcG9zZVRleHR1cmU9ZmFsc2VdIElmIGRpc3Bvc2UgdGhlIHRleHR1cmVzIHVzZWQgaW4gdGhlIGRlc2NlbmRhbnQgbWVzaFxuICAgICAqL1xuICAgIGRpc3Bvc2VOb2RlOiBmdW5jdGlvbihyb290LCBkaXNwb3NlR2VvbWV0cnksIGRpc3Bvc2VUZXh0dXJlKSB7XG4gICAgICAgIC8vIERldHRhY2hlZCBmcm9tIHBhcmVudFxuICAgICAgICBpZiAocm9vdC5nZXRQYXJlbnQoKSkge1xuICAgICAgICAgICAgcm9vdC5nZXRQYXJlbnQoKS5yZW1vdmUocm9vdCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRpc3Bvc2VkTWFwID0ge307XG4gICAgICAgIHJvb3QudHJhdmVyc2UoZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gbm9kZS5tYXRlcmlhbDtcbiAgICAgICAgICAgIGlmIChub2RlLmdlb21ldHJ5ICYmIGRpc3Bvc2VHZW9tZXRyeSkge1xuICAgICAgICAgICAgICAgIG5vZGUuZ2VvbWV0cnkuZGlzcG9zZSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXNwb3NlVGV4dHVyZSAmJiBtYXRlcmlhbCAmJiAhZGlzcG9zZWRNYXBbbWF0ZXJpYWwuX191aWRfX10pIHtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZVVuaWZvcm1zID0gbWF0ZXJpYWwuZ2V0VGV4dHVyZVVuaWZvcm1zKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgdSA9IDA7IHUgPCB0ZXh0dXJlVW5pZm9ybXMubGVuZ3RoOyB1KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVuaWZvcm1OYW1lID0gdGV4dHVyZVVuaWZvcm1zW3VdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gbWF0ZXJpYWwudW5pZm9ybXNbdW5pZm9ybU5hbWVdLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdW5pZm9ybVR5cGUgPSBtYXRlcmlhbC51bmlmb3Jtc1t1bmlmb3JtTmFtZV0udHlwZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh1bmlmb3JtVHlwZSA9PT0gJ3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwuZGlzcG9zZSAmJiB2YWwuZGlzcG9zZSh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh1bmlmb3JtVHlwZSA9PT0gJ3R2Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB2YWwubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsW2tdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbFtrXS5kaXNwb3NlICYmIHZhbFtrXS5kaXNwb3NlKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkaXNwb3NlZE1hcFttYXRlcmlhbC5fX3VpZF9fXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQYXJ0aWNsZSBzeXN0ZW0gYW5kIEFtYmllbnRDdWJlbWFwIGxpZ2h0IG5lZWQgdG8gZGlzcG9zZVxuICAgICAgICAgICAgaWYgKG5vZGUuZGlzcG9zZSkge1xuICAgICAgICAgICAgICAgIG5vZGUuZGlzcG9zZSh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2UgZ2l2ZW4gZ2VvbWV0cnlcbiAgICAgKiBAcGFyYW0ge2NsYXkuR2VvbWV0cnl9IGdlb21ldHJ5XG4gICAgICovXG4gICAgZGlzcG9zZUdlb21ldHJ5OiBmdW5jdGlvbihnZW9tZXRyeSkge1xuICAgICAgICBnZW9tZXRyeS5kaXNwb3NlKHRoaXMpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIGdpdmVuIHRleHR1cmVcbiAgICAgKiBAcGFyYW0ge2NsYXkuVGV4dHVyZX0gdGV4dHVyZVxuICAgICAqL1xuICAgIGRpc3Bvc2VUZXh0dXJlOiBmdW5jdGlvbih0ZXh0dXJlKSB7XG4gICAgICAgIHRleHR1cmUuZGlzcG9zZSh0aGlzKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBnaXZlbiBmcmFtZSBidWZmZXJcbiAgICAgKiBAcGFyYW0ge2NsYXkuRnJhbWVCdWZmZXJ9IGZyYW1lQnVmZmVyXG4gICAgICovXG4gICAgZGlzcG9zZUZyYW1lQnVmZmVyOiBmdW5jdGlvbihmcmFtZUJ1ZmZlcikge1xuICAgICAgICBmcmFtZUJ1ZmZlci5kaXNwb3NlKHRoaXMpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIHJlbmRlcmVyXG4gICAgICovXG4gICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge30sXG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IHNjcmVlbiBjb29yZHMgdG8gbm9ybWFsaXplZCBkZXZpY2UgY29vcmRpbmF0ZXMoTkRDKVxuICAgICAqIFNjcmVlbiBjb29yZHMgY2FuIGdldCBmcm9tIG1vdXNlIGV2ZW50LCBpdCBpcyBwb3NpdGlvbmVkIHJlbGF0aXZlIHRvIGNhbnZhcyBlbGVtZW50XG4gICAgICogTkRDIGNhbiBiZSB1c2VkIGluIHJheSBjYXN0aW5nIHdpdGggQ2FtZXJhLnByb3RvdHlwZS5jYXN0UmF5IG1ldGhvZHNcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge251bWJlcn0gICAgICAgeFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gICAgICAgeVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gW291dF1cbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgc2NyZWVuVG9OREM6IGZ1bmN0aW9uKHgsIHksIG91dCkge1xuICAgICAgICBpZiAoIW91dCkge1xuICAgICAgICAgICAgb3V0ID0gbmV3IFZlY3RvcjIoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJbnZlcnQgeTtcbiAgICAgICAgeSA9IHRoaXMuX2hlaWdodCAtIHk7XG5cbiAgICAgICAgdmFyIHZpZXdwb3J0ID0gdGhpcy52aWV3cG9ydDtcbiAgICAgICAgdmFyIGFyciA9IG91dC5hcnJheTtcbiAgICAgICAgYXJyWzBdID0gKHggLSB2aWV3cG9ydC54KSAvIHZpZXdwb3J0LndpZHRoO1xuICAgICAgICBhcnJbMF0gPSBhcnJbMF0gKiAyIC0gMTtcbiAgICAgICAgYXJyWzFdID0gKHkgLSB2aWV3cG9ydC55KSAvIHZpZXdwb3J0LmhlaWdodDtcbiAgICAgICAgYXJyWzFdID0gYXJyWzFdICogMiAtIDE7XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBPcGFxdWUgcmVuZGVyYWJsZXMgY29tcGFyZSBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5SZW5kZXJhYmxlfSB4XG4gKiBAcGFyYW0gIHtjbGF5LlJlbmRlcmFibGV9IHlcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAc3RhdGljXG4gKi9cblJlbmRlcmVyLm9wYXF1ZVNvcnRDb21wYXJlID0gUmVuZGVyZXIucHJvdG90eXBlLm9wYXF1ZVNvcnRDb21wYXJlID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIC8vIFByaW9yaXR5IHJlbmRlck9yZGVyIC0+IHByb2dyYW0gLT4gbWF0ZXJpYWwgLT4gZ2VvbWV0cnlcbiAgICBpZiAoeC5yZW5kZXJPcmRlciA9PT0geS5yZW5kZXJPcmRlcikge1xuICAgICAgICBpZiAoeC5fX3Byb2dyYW0gPT09IHkuX19wcm9ncmFtKSB7XG4gICAgICAgICAgICBpZiAoeC5tYXRlcmlhbCA9PT0geS5tYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB4Lmdlb21ldHJ5Ll9fdWlkX18gLSB5Lmdlb21ldHJ5Ll9fdWlkX187XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geC5tYXRlcmlhbC5fX3VpZF9fIC0geS5tYXRlcmlhbC5fX3VpZF9fO1xuICAgICAgICB9XG4gICAgICAgIGlmICh4Ll9fcHJvZ3JhbSAmJiB5Ll9fcHJvZ3JhbSkge1xuICAgICAgICAgICAgcmV0dXJuIHguX19wcm9ncmFtLl9fdWlkX18gLSB5Ll9fcHJvZ3JhbS5fX3VpZF9fO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4geC5yZW5kZXJPcmRlciAtIHkucmVuZGVyT3JkZXI7XG59O1xuXG4vKipcbiAqIFRyYW5zcGFyZW50IHJlbmRlcmFibGVzIGNvbXBhcmUgZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuUmVuZGVyYWJsZX0gYVxuICogQHBhcmFtICB7Y2xheS5SZW5kZXJhYmxlfSBiXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogQHN0YXRpY1xuICovXG5SZW5kZXJlci50cmFuc3BhcmVudFNvcnRDb21wYXJlID0gUmVuZGVyZXIucHJvdG90eXBlLnRyYW5zcGFyZW50U29ydENvbXBhcmUgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgLy8gUHJpb3JpdHkgcmVuZGVyT3JkZXIgLT4gZGVwdGggLT4gcHJvZ3JhbSAtPiBtYXRlcmlhbCAtPiBnZW9tZXRyeVxuXG4gICAgaWYgKHgucmVuZGVyT3JkZXIgPT09IHkucmVuZGVyT3JkZXIpIHtcbiAgICAgICAgaWYgKHguX19kZXB0aCA9PT0geS5fX2RlcHRoKSB7XG4gICAgICAgICAgICBpZiAoeC5fX3Byb2dyYW0gPT09IHkuX19wcm9ncmFtKSB7XG4gICAgICAgICAgICAgICAgaWYgKHgubWF0ZXJpYWwgPT09IHkubWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHguZ2VvbWV0cnkuX191aWRfXyAtIHkuZ2VvbWV0cnkuX191aWRfXztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHgubWF0ZXJpYWwuX191aWRfXyAtIHkubWF0ZXJpYWwuX191aWRfXztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh4Ll9fcHJvZ3JhbSAgJiYgeS5fX3Byb2dyYW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geC5fX3Byb2dyYW0uX191aWRfXyAtIHkuX19wcm9ncmFtLl9fdWlkX187XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBEZXB0aCBpcyBuZWdhdGl2ZVxuICAgICAgICAvLyBTbyBmYXJ0aGVyIG9iamVjdCBoYXMgc21hbGxlciBkZXB0aCB2YWx1ZVxuICAgICAgICByZXR1cm4geC5fX2RlcHRoIC0geS5fX2RlcHRoO1xuICAgIH1cbiAgICByZXR1cm4geC5yZW5kZXJPcmRlciAtIHkucmVuZGVyT3JkZXI7XG59O1xuXG4vLyBUZW1wb3JhcnkgdmFyaWFibGVzXG52YXIgbWF0cmljZXMgPSB7XG4gICAgSURFTlRJVFk6IG1hdDRDcmVhdGUoKSxcblxuICAgIFdPUkxEOiBtYXQ0Q3JlYXRlKCksXG4gICAgVklFVzogbWF0NENyZWF0ZSgpLFxuICAgIFBST0pFQ1RJT046IG1hdDRDcmVhdGUoKSxcbiAgICBXT1JMRFZJRVc6IG1hdDRDcmVhdGUoKSxcbiAgICBWSUVXUFJPSkVDVElPTjogbWF0NENyZWF0ZSgpLFxuICAgIFdPUkxEVklFV1BST0pFQ1RJT046IG1hdDRDcmVhdGUoKSxcblxuICAgIFdPUkxESU5WRVJTRTogbWF0NENyZWF0ZSgpLFxuICAgIFZJRVdJTlZFUlNFOiBtYXQ0Q3JlYXRlKCksXG4gICAgUFJPSkVDVElPTklOVkVSU0U6IG1hdDRDcmVhdGUoKSxcbiAgICBXT1JMRFZJRVdJTlZFUlNFOiBtYXQ0Q3JlYXRlKCksXG4gICAgVklFV1BST0pFQ1RJT05JTlZFUlNFOiBtYXQ0Q3JlYXRlKCksXG4gICAgV09STERWSUVXUFJPSkVDVElPTklOVkVSU0U6IG1hdDRDcmVhdGUoKSxcblxuICAgIFdPUkxEVFJBTlNQT1NFOiBtYXQ0Q3JlYXRlKCksXG4gICAgVklFV1RSQU5TUE9TRTogbWF0NENyZWF0ZSgpLFxuICAgIFBST0pFQ1RJT05UUkFOU1BPU0U6IG1hdDRDcmVhdGUoKSxcbiAgICBXT1JMRFZJRVdUUkFOU1BPU0U6IG1hdDRDcmVhdGUoKSxcbiAgICBWSUVXUFJPSkVDVElPTlRSQU5TUE9TRTogbWF0NENyZWF0ZSgpLFxuICAgIFdPUkxEVklFV1BST0pFQ1RJT05UUkFOU1BPU0U6IG1hdDRDcmVhdGUoKSxcbiAgICBXT1JMRElOVkVSU0VUUkFOU1BPU0U6IG1hdDRDcmVhdGUoKSxcbiAgICBWSUVXSU5WRVJTRVRSQU5TUE9TRTogbWF0NENyZWF0ZSgpLFxuICAgIFBST0pFQ1RJT05JTlZFUlNFVFJBTlNQT1NFOiBtYXQ0Q3JlYXRlKCksXG4gICAgV09STERWSUVXSU5WRVJTRVRSQU5TUE9TRTogbWF0NENyZWF0ZSgpLFxuICAgIFZJRVdQUk9KRUNUSU9OSU5WRVJTRVRSQU5TUE9TRTogbWF0NENyZWF0ZSgpLFxuICAgIFdPUkxEVklFV1BST0pFQ1RJT05JTlZFUlNFVFJBTlNQT1NFOiBtYXQ0Q3JlYXRlKClcbn07XG5cbi8qKlxuICogQG5hbWUgY2xheS5SZW5kZXJlci5DT0xPUl9CVUZGRVJfQklUXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5SZW5kZXJlci5DT0xPUl9CVUZGRVJfQklUID0gZ2xlbnVtLkNPTE9SX0JVRkZFUl9CSVQ7XG4vKipcbiAqIEBuYW1lIGNsYXkuUmVuZGVyZXIuREVQVEhfQlVGRkVSX0JJVFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuUmVuZGVyZXIuREVQVEhfQlVGRkVSX0JJVCA9IGdsZW51bS5ERVBUSF9CVUZGRVJfQklUO1xuLyoqXG4gKiBAbmFtZSBjbGF5LlJlbmRlcmVyLlNURU5DSUxfQlVGRkVSX0JJVFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuUmVuZGVyZXIuU1RFTkNJTF9CVUZGRVJfQklUID0gZ2xlbnVtLlNURU5DSUxfQlVGRkVSX0JJVDtcblxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyZXI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL1JlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA0OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///48\n");

/***/ }),
/* 49 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_LRU__ = __webpack_require__(36);\n/**\n * @namespace clay.core.color\n */\n\n\nvar colorUtil = {};\n\nvar kCSSColorTable = {\n    'transparent': [0,0,0,0], 'aliceblue': [240,248,255,1],\n    'antiquewhite': [250,235,215,1], 'aqua': [0,255,255,1],\n    'aquamarine': [127,255,212,1], 'azure': [240,255,255,1],\n    'beige': [245,245,220,1], 'bisque': [255,228,196,1],\n    'black': [0,0,0,1], 'blanchedalmond': [255,235,205,1],\n    'blue': [0,0,255,1], 'blueviolet': [138,43,226,1],\n    'brown': [165,42,42,1], 'burlywood': [222,184,135,1],\n    'cadetblue': [95,158,160,1], 'chartreuse': [127,255,0,1],\n    'chocolate': [210,105,30,1], 'coral': [255,127,80,1],\n    'cornflowerblue': [100,149,237,1], 'cornsilk': [255,248,220,1],\n    'crimson': [220,20,60,1], 'cyan': [0,255,255,1],\n    'darkblue': [0,0,139,1], 'darkcyan': [0,139,139,1],\n    'darkgoldenrod': [184,134,11,1], 'darkgray': [169,169,169,1],\n    'darkgreen': [0,100,0,1], 'darkgrey': [169,169,169,1],\n    'darkkhaki': [189,183,107,1], 'darkmagenta': [139,0,139,1],\n    'darkolivegreen': [85,107,47,1], 'darkorange': [255,140,0,1],\n    'darkorchid': [153,50,204,1], 'darkred': [139,0,0,1],\n    'darksalmon': [233,150,122,1], 'darkseagreen': [143,188,143,1],\n    'darkslateblue': [72,61,139,1], 'darkslategray': [47,79,79,1],\n    'darkslategrey': [47,79,79,1], 'darkturquoise': [0,206,209,1],\n    'darkviolet': [148,0,211,1], 'deeppink': [255,20,147,1],\n    'deepskyblue': [0,191,255,1], 'dimgray': [105,105,105,1],\n    'dimgrey': [105,105,105,1], 'dodgerblue': [30,144,255,1],\n    'firebrick': [178,34,34,1], 'floralwhite': [255,250,240,1],\n    'forestgreen': [34,139,34,1], 'fuchsia': [255,0,255,1],\n    'gainsboro': [220,220,220,1], 'ghostwhite': [248,248,255,1],\n    'gold': [255,215,0,1], 'goldenrod': [218,165,32,1],\n    'gray': [128,128,128,1], 'green': [0,128,0,1],\n    'greenyellow': [173,255,47,1], 'grey': [128,128,128,1],\n    'honeydew': [240,255,240,1], 'hotpink': [255,105,180,1],\n    'indianred': [205,92,92,1], 'indigo': [75,0,130,1],\n    'ivory': [255,255,240,1], 'khaki': [240,230,140,1],\n    'lavender': [230,230,250,1], 'lavenderblush': [255,240,245,1],\n    'lawngreen': [124,252,0,1], 'lemonchiffon': [255,250,205,1],\n    'lightblue': [173,216,230,1], 'lightcoral': [240,128,128,1],\n    'lightcyan': [224,255,255,1], 'lightgoldenrodyellow': [250,250,210,1],\n    'lightgray': [211,211,211,1], 'lightgreen': [144,238,144,1],\n    'lightgrey': [211,211,211,1], 'lightpink': [255,182,193,1],\n    'lightsalmon': [255,160,122,1], 'lightseagreen': [32,178,170,1],\n    'lightskyblue': [135,206,250,1], 'lightslategray': [119,136,153,1],\n    'lightslategrey': [119,136,153,1], 'lightsteelblue': [176,196,222,1],\n    'lightyellow': [255,255,224,1], 'lime': [0,255,0,1],\n    'limegreen': [50,205,50,1], 'linen': [250,240,230,1],\n    'magenta': [255,0,255,1], 'maroon': [128,0,0,1],\n    'mediumaquamarine': [102,205,170,1], 'mediumblue': [0,0,205,1],\n    'mediumorchid': [186,85,211,1], 'mediumpurple': [147,112,219,1],\n    'mediumseagreen': [60,179,113,1], 'mediumslateblue': [123,104,238,1],\n    'mediumspringgreen': [0,250,154,1], 'mediumturquoise': [72,209,204,1],\n    'mediumvioletred': [199,21,133,1], 'midnightblue': [25,25,112,1],\n    'mintcream': [245,255,250,1], 'mistyrose': [255,228,225,1],\n    'moccasin': [255,228,181,1], 'navajowhite': [255,222,173,1],\n    'navy': [0,0,128,1], 'oldlace': [253,245,230,1],\n    'olive': [128,128,0,1], 'olivedrab': [107,142,35,1],\n    'orange': [255,165,0,1], 'orangered': [255,69,0,1],\n    'orchid': [218,112,214,1], 'palegoldenrod': [238,232,170,1],\n    'palegreen': [152,251,152,1], 'paleturquoise': [175,238,238,1],\n    'palevioletred': [219,112,147,1], 'papayawhip': [255,239,213,1],\n    'peachpuff': [255,218,185,1], 'peru': [205,133,63,1],\n    'pink': [255,192,203,1], 'plum': [221,160,221,1],\n    'powderblue': [176,224,230,1], 'purple': [128,0,128,1],\n    'red': [255,0,0,1], 'rosybrown': [188,143,143,1],\n    'royalblue': [65,105,225,1], 'saddlebrown': [139,69,19,1],\n    'salmon': [250,128,114,1], 'sandybrown': [244,164,96,1],\n    'seagreen': [46,139,87,1], 'seashell': [255,245,238,1],\n    'sienna': [160,82,45,1], 'silver': [192,192,192,1],\n    'skyblue': [135,206,235,1], 'slateblue': [106,90,205,1],\n    'slategray': [112,128,144,1], 'slategrey': [112,128,144,1],\n    'snow': [255,250,250,1], 'springgreen': [0,255,127,1],\n    'steelblue': [70,130,180,1], 'tan': [210,180,140,1],\n    'teal': [0,128,128,1], 'thistle': [216,191,216,1],\n    'tomato': [255,99,71,1], 'turquoise': [64,224,208,1],\n    'violet': [238,130,238,1], 'wheat': [245,222,179,1],\n    'white': [255,255,255,1], 'whitesmoke': [245,245,245,1],\n    'yellow': [255,255,0,1], 'yellowgreen': [154,205,50,1]\n};\n\nfunction clampCssByte(i) {  // Clamp to integer 0 .. 255.\n    i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clampCssAngle(i) {  // Clamp to integer 0 .. 360.\n    i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n    return i < 0 ? 0 : i > 360 ? 360 : i;\n}\n\nfunction clampCssFloat(f) {  // Clamp to float 0.0 .. 1.0.\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n}\n\nfunction parseCssInt(str) {  // int or percentage.\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssByte(parseFloat(str) / 100 * 255);\n    }\n    return clampCssByte(parseInt(str, 10));\n}\n\nfunction parseCssFloat(str) {  // float or percentage.\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssFloat(parseFloat(str) / 100);\n    }\n    return clampCssFloat(parseFloat(str));\n}\n\nfunction cssHueToRgb(m1, m2, h) {\n    if (h < 0) {\n        h += 1;\n    }\n    else if (h > 1) {\n        h -= 1;\n    }\n\n    if (h * 6 < 1) {\n        return m1 + (m2 - m1) * h * 6;\n    }\n    if (h * 2 < 1) {\n        return m2;\n    }\n    if (h * 3 < 2) {\n        return m1 + (m2 - m1) * (2/3 - h) * 6;\n    }\n    return m1;\n}\n\nfunction lerpNumber(a, b, p) {\n    return a + (b - a) * p;\n}\n\nfunction setRgba(out, r, g, b, a) {\n    out[0] = r; out[1] = g; out[2] = b; out[3] = a;\n    return out;\n}\nfunction copyRgba(out, a) {\n    out[0] = a[0]; out[1] = a[1]; out[2] = a[2]; out[3] = a[3];\n    return out;\n}\n\nvar colorCache = new __WEBPACK_IMPORTED_MODULE_0__core_LRU__[\"a\" /* default */](20);\nvar lastRemovedArr = null;\n\nfunction putToCache(colorStr, rgbaArr) {\n    // Reuse removed array\n    if (lastRemovedArr) {\n        copyRgba(lastRemovedArr, rgbaArr);\n    }\n    lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || (rgbaArr.slice()));\n}\n\n/**\n * @name clay.core.color.parse\n * @param {string} colorStr\n * @param {Array.<number>} out\n * @return {Array.<number>}\n */\ncolorUtil.parse = function (colorStr, rgbaArr) {\n    if (!colorStr) {\n        return;\n    }\n    rgbaArr = rgbaArr || [];\n\n    var cached = colorCache.get(colorStr);\n    if (cached) {\n        return copyRgba(rgbaArr, cached);\n    }\n\n    // colorStr may be not string\n    colorStr = colorStr + '';\n    // Remove all whitespace, not compliant, but should just be more accepting.\n    var str = colorStr.replace(/ /g, '').toLowerCase();\n\n    // Color keywords (and transparent) lookup.\n    if (str in kCSSColorTable) {\n        copyRgba(rgbaArr, kCSSColorTable[str]);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n    }\n\n    // #abc and #abc123 syntax.\n    if (str.charAt(0) === '#') {\n        if (str.length === 4) {\n            var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 0xfff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;  // Covers NaN.\n            }\n            setRgba(rgbaArr,\n                ((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8),\n                (iv & 0xf0) | ((iv & 0xf0) >> 4),\n                (iv & 0xf) | ((iv & 0xf) << 4),\n                1\n            );\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        else if (str.length === 7) {\n            var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 0xffffff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;  // Covers NaN.\n            }\n            setRgba(rgbaArr,\n                (iv & 0xff0000) >> 16,\n                (iv & 0xff00) >> 8,\n                iv & 0xff,\n                1\n            );\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n\n        return;\n    }\n    var op = str.indexOf('('), ep = str.indexOf(')');\n    if (op !== -1 && ep + 1 === str.length) {\n        var fname = str.substr(0, op);\n        var params = str.substr(op + 1, ep - (op + 1)).split(',');\n        var alpha = 1;  // To allow case fallthrough.\n        switch (fname) {\n            case 'rgba':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                alpha = parseCssFloat(params.pop()); // jshint ignore:line\n            // Fall through.\n            case 'rgb':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                setRgba(rgbaArr,\n                    parseCssInt(params[0]),\n                    parseCssInt(params[1]),\n                    parseCssInt(params[2]),\n                    alpha\n                );\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsla':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                params[3] = parseCssFloat(params[3]);\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsl':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            default:\n                return;\n        }\n    }\n\n    setRgba(rgbaArr, 0, 0, 0, 1);\n    return;\n};\n\ncolorUtil.parseToFloat = function (colorStr, rgbaArr) {\n    rgbaArr = colorUtil.parse(colorStr, rgbaArr);\n    if (!rgbaArr) {\n        return;\n    }\n    rgbaArr[0] /= 255;\n    rgbaArr[1] /= 255;\n    rgbaArr[2] /= 255;\n    return rgbaArr;\n}\n\n/**\n * @name clay.core.color.hsla2rgba\n * @param {Array.<number>} hsla\n * @param {Array.<number>} rgba\n * @return {Array.<number>} rgba\n */\nfunction hsla2rgba(hsla, rgba) {\n    var h = (((parseFloat(hsla[0]) % 360) + 360) % 360) / 360;  // 0 .. 1\n    // NOTE(deanm): According to the CSS spec s/l should only be\n    // percentages, but we don't bother and let float or percentage.\n    var s = parseCssFloat(hsla[1]);\n    var l = parseCssFloat(hsla[2]);\n    var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var m1 = l * 2 - m2;\n\n    rgba = rgba || [];\n    setRgba(rgba,\n        clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255),\n        clampCssByte(cssHueToRgb(m1, m2, h) * 255),\n        clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255),\n        1\n    );\n\n    if (hsla.length === 4) {\n        rgba[3] = hsla[3];\n    }\n\n    return rgba;\n}\n\n/**\n * @name clay.core.color.rgba2hsla\n * @param {Array.<number>} rgba\n * @return {Array.<number>} hsla\n */\nfunction rgba2hsla(rgba) {\n    if (!rgba) {\n        return;\n    }\n\n    // RGB from 0 to 255\n    var R = rgba[0] / 255;\n    var G = rgba[1] / 255;\n    var B = rgba[2] / 255;\n\n    var vMin = Math.min(R, G, B); // Min. value of RGB\n    var vMax = Math.max(R, G, B); // Max. value of RGB\n    var delta = vMax - vMin; // Delta RGB value\n\n    var L = (vMax + vMin) / 2;\n    var H;\n    var S;\n    // HSL results from 0 to 1\n    if (delta === 0) {\n        H = 0;\n        S = 0;\n    }\n    else {\n        if (L < 0.5) {\n            S = delta / (vMax + vMin);\n        }\n        else {\n            S = delta / (2 - vMax - vMin);\n        }\n\n        var deltaR = (((vMax - R) / 6) + (delta / 2)) / delta;\n        var deltaG = (((vMax - G) / 6) + (delta / 2)) / delta;\n        var deltaB = (((vMax - B) / 6) + (delta / 2)) / delta;\n\n        if (R === vMax) {\n            H = deltaB - deltaG;\n        }\n        else if (G === vMax) {\n            H = (1 / 3) + deltaR - deltaB;\n        }\n        else if (B === vMax) {\n            H = (2 / 3) + deltaG - deltaR;\n        }\n\n        if (H < 0) {\n            H += 1;\n        }\n\n        if (H > 1) {\n            H -= 1;\n        }\n    }\n\n    var hsla = [H * 360, S, L];\n\n    if (rgba[3] != null) {\n        hsla.push(rgba[3]);\n    }\n\n    return hsla;\n}\n\n/**\n * @name clay.core.color.lift\n * @param {string} color\n * @param {number} level\n * @return {string}\n */\ncolorUtil.lift = function (color, level) {\n    var colorArr = colorUtil.parse(color);\n    if (colorArr) {\n        for (var i = 0; i < 3; i++) {\n            if (level < 0) {\n                colorArr[i] = colorArr[i] * (1 - level) | 0;\n            }\n            else {\n                colorArr[i] = ((255 - colorArr[i]) * level + colorArr[i]) | 0;\n            }\n        }\n        return colorUtil.stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n    }\n}\n\n/**\n * @name clay.core.color.toHex\n * @param {string} color\n * @return {string}\n */\ncolorUtil.toHex = function (color) {\n    var colorArr = colorUtil.parse(color);\n    if (colorArr) {\n        return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + (+colorArr[2])).toString(16).slice(1);\n    }\n};\n\n/**\n * Map value to color. Faster than lerp methods because color is represented by rgba array.\n * @name clay.core.color\n * @param {number} normalizedValue A float between 0 and 1.\n * @param {Array.<Array.<number>>} colors List of rgba color array\n * @param {Array.<number>} [out] Mapped gba color array\n * @return {Array.<number>} will be null/undefined if input illegal.\n */\ncolorUtil.fastLerp = function (normalizedValue, colors, out) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)\n    ) {\n        return;\n    }\n\n    out = out || [];\n\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = colors[leftIndex];\n    var rightColor = colors[rightIndex];\n    var dv = value - leftIndex;\n    out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n    out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n    out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n    out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n\n    return out;\n}\n\ncolorUtil.fastMapToColor = colorUtil.fastLerp;\n\n/**\n * @param {number} normalizedValue A float between 0 and 1.\n * @param {Array.<string>} colors Color list.\n * @param {boolean=} fullOutput Default false.\n * @return {(string|Object)} Result color. If fullOutput,\n *                           return {color: ..., leftIndex: ..., rightIndex: ..., value: ...},\n */\ncolorUtil.lerp = function (normalizedValue, colors, fullOutput) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)\n    ) {\n        return;\n    }\n\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = colorUtil.parse(colors[leftIndex]);\n    var rightColor = colorUtil.parse(colors[rightIndex]);\n    var dv = value - leftIndex;\n\n    var color = colorUtil.stringify(\n        [\n            clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)),\n            clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)),\n            clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)),\n            clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))\n        ],\n        'rgba'\n    );\n\n    return fullOutput\n        ? {\n            color: color,\n            leftIndex: leftIndex,\n            rightIndex: rightIndex,\n            value: value\n        }\n        : color;\n}\n\n/**\n * @deprecated\n */\ncolorUtil.mapToColor = colorUtil.lerp;\n\n/**\n * @name clay.core.color\n * @param {string} color\n * @param {number=} h 0 ~ 360, ignore when null.\n * @param {number=} s 0 ~ 1, ignore when null.\n * @param {number=} l 0 ~ 1, ignore when null.\n * @return {string} Color string in rgba format.\n */\ncolorUtil.modifyHSL = function (color, h, s, l) {\n    color = colorUtil.parse(color);\n\n    if (color) {\n        color = rgba2hsla(color);\n        h != null && (color[0] = clampCssAngle(h));\n        s != null && (color[1] = parseCssFloat(s));\n        l != null && (color[2] = parseCssFloat(l));\n\n        return colorUtil.stringify(hsla2rgba(color), 'rgba');\n    }\n}\n\n/**\n * @param {string} color\n * @param {number=} alpha 0 ~ 1\n * @return {string} Color string in rgba format.\n */\ncolorUtil.modifyAlpha = function (color, alpha) {\n    color = colorUtil.parse(color);\n\n    if (color && alpha != null) {\n        color[3] = clampCssFloat(alpha);\n        return colorUtil.stringify(color, 'rgba');\n    }\n}\n\n/**\n * @param {Array.<number>} arrColor like [12,33,44,0.4]\n * @param {string} type 'rgba', 'hsva', ...\n * @return {string} Result color. (If input illegal, return undefined).\n */\ncolorUtil.stringify = function (arrColor, type) {\n    if (!arrColor || !arrColor.length) {\n        return;\n    }\n    var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n    if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n        colorStr += ',' + arrColor[3];\n    }\n    return type + '(' + colorStr + ')';\n};\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (colorUtil);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb3JlL2NvbG9yLmpzPzUxYjgiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbmFtZXNwYWNlIGNsYXkuY29yZS5jb2xvclxuICovXG5pbXBvcnQgTFJVIGZyb20gJy4uL2NvcmUvTFJVJztcblxudmFyIGNvbG9yVXRpbCA9IHt9O1xuXG52YXIga0NTU0NvbG9yVGFibGUgPSB7XG4gICAgJ3RyYW5zcGFyZW50JzogWzAsMCwwLDBdLCAnYWxpY2VibHVlJzogWzI0MCwyNDgsMjU1LDFdLFxuICAgICdhbnRpcXVld2hpdGUnOiBbMjUwLDIzNSwyMTUsMV0sICdhcXVhJzogWzAsMjU1LDI1NSwxXSxcbiAgICAnYXF1YW1hcmluZSc6IFsxMjcsMjU1LDIxMiwxXSwgJ2F6dXJlJzogWzI0MCwyNTUsMjU1LDFdLFxuICAgICdiZWlnZSc6IFsyNDUsMjQ1LDIyMCwxXSwgJ2Jpc3F1ZSc6IFsyNTUsMjI4LDE5NiwxXSxcbiAgICAnYmxhY2snOiBbMCwwLDAsMV0sICdibGFuY2hlZGFsbW9uZCc6IFsyNTUsMjM1LDIwNSwxXSxcbiAgICAnYmx1ZSc6IFswLDAsMjU1LDFdLCAnYmx1ZXZpb2xldCc6IFsxMzgsNDMsMjI2LDFdLFxuICAgICdicm93bic6IFsxNjUsNDIsNDIsMV0sICdidXJseXdvb2QnOiBbMjIyLDE4NCwxMzUsMV0sXG4gICAgJ2NhZGV0Ymx1ZSc6IFs5NSwxNTgsMTYwLDFdLCAnY2hhcnRyZXVzZSc6IFsxMjcsMjU1LDAsMV0sXG4gICAgJ2Nob2NvbGF0ZSc6IFsyMTAsMTA1LDMwLDFdLCAnY29yYWwnOiBbMjU1LDEyNyw4MCwxXSxcbiAgICAnY29ybmZsb3dlcmJsdWUnOiBbMTAwLDE0OSwyMzcsMV0sICdjb3Juc2lsayc6IFsyNTUsMjQ4LDIyMCwxXSxcbiAgICAnY3JpbXNvbic6IFsyMjAsMjAsNjAsMV0sICdjeWFuJzogWzAsMjU1LDI1NSwxXSxcbiAgICAnZGFya2JsdWUnOiBbMCwwLDEzOSwxXSwgJ2RhcmtjeWFuJzogWzAsMTM5LDEzOSwxXSxcbiAgICAnZGFya2dvbGRlbnJvZCc6IFsxODQsMTM0LDExLDFdLCAnZGFya2dyYXknOiBbMTY5LDE2OSwxNjksMV0sXG4gICAgJ2RhcmtncmVlbic6IFswLDEwMCwwLDFdLCAnZGFya2dyZXknOiBbMTY5LDE2OSwxNjksMV0sXG4gICAgJ2RhcmtraGFraSc6IFsxODksMTgzLDEwNywxXSwgJ2RhcmttYWdlbnRhJzogWzEzOSwwLDEzOSwxXSxcbiAgICAnZGFya29saXZlZ3JlZW4nOiBbODUsMTA3LDQ3LDFdLCAnZGFya29yYW5nZSc6IFsyNTUsMTQwLDAsMV0sXG4gICAgJ2RhcmtvcmNoaWQnOiBbMTUzLDUwLDIwNCwxXSwgJ2RhcmtyZWQnOiBbMTM5LDAsMCwxXSxcbiAgICAnZGFya3NhbG1vbic6IFsyMzMsMTUwLDEyMiwxXSwgJ2RhcmtzZWFncmVlbic6IFsxNDMsMTg4LDE0MywxXSxcbiAgICAnZGFya3NsYXRlYmx1ZSc6IFs3Miw2MSwxMzksMV0sICdkYXJrc2xhdGVncmF5JzogWzQ3LDc5LDc5LDFdLFxuICAgICdkYXJrc2xhdGVncmV5JzogWzQ3LDc5LDc5LDFdLCAnZGFya3R1cnF1b2lzZSc6IFswLDIwNiwyMDksMV0sXG4gICAgJ2Rhcmt2aW9sZXQnOiBbMTQ4LDAsMjExLDFdLCAnZGVlcHBpbmsnOiBbMjU1LDIwLDE0NywxXSxcbiAgICAnZGVlcHNreWJsdWUnOiBbMCwxOTEsMjU1LDFdLCAnZGltZ3JheSc6IFsxMDUsMTA1LDEwNSwxXSxcbiAgICAnZGltZ3JleSc6IFsxMDUsMTA1LDEwNSwxXSwgJ2RvZGdlcmJsdWUnOiBbMzAsMTQ0LDI1NSwxXSxcbiAgICAnZmlyZWJyaWNrJzogWzE3OCwzNCwzNCwxXSwgJ2Zsb3JhbHdoaXRlJzogWzI1NSwyNTAsMjQwLDFdLFxuICAgICdmb3Jlc3RncmVlbic6IFszNCwxMzksMzQsMV0sICdmdWNoc2lhJzogWzI1NSwwLDI1NSwxXSxcbiAgICAnZ2FpbnNib3JvJzogWzIyMCwyMjAsMjIwLDFdLCAnZ2hvc3R3aGl0ZSc6IFsyNDgsMjQ4LDI1NSwxXSxcbiAgICAnZ29sZCc6IFsyNTUsMjE1LDAsMV0sICdnb2xkZW5yb2QnOiBbMjE4LDE2NSwzMiwxXSxcbiAgICAnZ3JheSc6IFsxMjgsMTI4LDEyOCwxXSwgJ2dyZWVuJzogWzAsMTI4LDAsMV0sXG4gICAgJ2dyZWVueWVsbG93JzogWzE3MywyNTUsNDcsMV0sICdncmV5JzogWzEyOCwxMjgsMTI4LDFdLFxuICAgICdob25leWRldyc6IFsyNDAsMjU1LDI0MCwxXSwgJ2hvdHBpbmsnOiBbMjU1LDEwNSwxODAsMV0sXG4gICAgJ2luZGlhbnJlZCc6IFsyMDUsOTIsOTIsMV0sICdpbmRpZ28nOiBbNzUsMCwxMzAsMV0sXG4gICAgJ2l2b3J5JzogWzI1NSwyNTUsMjQwLDFdLCAna2hha2knOiBbMjQwLDIzMCwxNDAsMV0sXG4gICAgJ2xhdmVuZGVyJzogWzIzMCwyMzAsMjUwLDFdLCAnbGF2ZW5kZXJibHVzaCc6IFsyNTUsMjQwLDI0NSwxXSxcbiAgICAnbGF3bmdyZWVuJzogWzEyNCwyNTIsMCwxXSwgJ2xlbW9uY2hpZmZvbic6IFsyNTUsMjUwLDIwNSwxXSxcbiAgICAnbGlnaHRibHVlJzogWzE3MywyMTYsMjMwLDFdLCAnbGlnaHRjb3JhbCc6IFsyNDAsMTI4LDEyOCwxXSxcbiAgICAnbGlnaHRjeWFuJzogWzIyNCwyNTUsMjU1LDFdLCAnbGlnaHRnb2xkZW5yb2R5ZWxsb3cnOiBbMjUwLDI1MCwyMTAsMV0sXG4gICAgJ2xpZ2h0Z3JheSc6IFsyMTEsMjExLDIxMSwxXSwgJ2xpZ2h0Z3JlZW4nOiBbMTQ0LDIzOCwxNDQsMV0sXG4gICAgJ2xpZ2h0Z3JleSc6IFsyMTEsMjExLDIxMSwxXSwgJ2xpZ2h0cGluayc6IFsyNTUsMTgyLDE5MywxXSxcbiAgICAnbGlnaHRzYWxtb24nOiBbMjU1LDE2MCwxMjIsMV0sICdsaWdodHNlYWdyZWVuJzogWzMyLDE3OCwxNzAsMV0sXG4gICAgJ2xpZ2h0c2t5Ymx1ZSc6IFsxMzUsMjA2LDI1MCwxXSwgJ2xpZ2h0c2xhdGVncmF5JzogWzExOSwxMzYsMTUzLDFdLFxuICAgICdsaWdodHNsYXRlZ3JleSc6IFsxMTksMTM2LDE1MywxXSwgJ2xpZ2h0c3RlZWxibHVlJzogWzE3NiwxOTYsMjIyLDFdLFxuICAgICdsaWdodHllbGxvdyc6IFsyNTUsMjU1LDIyNCwxXSwgJ2xpbWUnOiBbMCwyNTUsMCwxXSxcbiAgICAnbGltZWdyZWVuJzogWzUwLDIwNSw1MCwxXSwgJ2xpbmVuJzogWzI1MCwyNDAsMjMwLDFdLFxuICAgICdtYWdlbnRhJzogWzI1NSwwLDI1NSwxXSwgJ21hcm9vbic6IFsxMjgsMCwwLDFdLFxuICAgICdtZWRpdW1hcXVhbWFyaW5lJzogWzEwMiwyMDUsMTcwLDFdLCAnbWVkaXVtYmx1ZSc6IFswLDAsMjA1LDFdLFxuICAgICdtZWRpdW1vcmNoaWQnOiBbMTg2LDg1LDIxMSwxXSwgJ21lZGl1bXB1cnBsZSc6IFsxNDcsMTEyLDIxOSwxXSxcbiAgICAnbWVkaXVtc2VhZ3JlZW4nOiBbNjAsMTc5LDExMywxXSwgJ21lZGl1bXNsYXRlYmx1ZSc6IFsxMjMsMTA0LDIzOCwxXSxcbiAgICAnbWVkaXVtc3ByaW5nZ3JlZW4nOiBbMCwyNTAsMTU0LDFdLCAnbWVkaXVtdHVycXVvaXNlJzogWzcyLDIwOSwyMDQsMV0sXG4gICAgJ21lZGl1bXZpb2xldHJlZCc6IFsxOTksMjEsMTMzLDFdLCAnbWlkbmlnaHRibHVlJzogWzI1LDI1LDExMiwxXSxcbiAgICAnbWludGNyZWFtJzogWzI0NSwyNTUsMjUwLDFdLCAnbWlzdHlyb3NlJzogWzI1NSwyMjgsMjI1LDFdLFxuICAgICdtb2NjYXNpbic6IFsyNTUsMjI4LDE4MSwxXSwgJ25hdmFqb3doaXRlJzogWzI1NSwyMjIsMTczLDFdLFxuICAgICduYXZ5JzogWzAsMCwxMjgsMV0sICdvbGRsYWNlJzogWzI1MywyNDUsMjMwLDFdLFxuICAgICdvbGl2ZSc6IFsxMjgsMTI4LDAsMV0sICdvbGl2ZWRyYWInOiBbMTA3LDE0MiwzNSwxXSxcbiAgICAnb3JhbmdlJzogWzI1NSwxNjUsMCwxXSwgJ29yYW5nZXJlZCc6IFsyNTUsNjksMCwxXSxcbiAgICAnb3JjaGlkJzogWzIxOCwxMTIsMjE0LDFdLCAncGFsZWdvbGRlbnJvZCc6IFsyMzgsMjMyLDE3MCwxXSxcbiAgICAncGFsZWdyZWVuJzogWzE1MiwyNTEsMTUyLDFdLCAncGFsZXR1cnF1b2lzZSc6IFsxNzUsMjM4LDIzOCwxXSxcbiAgICAncGFsZXZpb2xldHJlZCc6IFsyMTksMTEyLDE0NywxXSwgJ3BhcGF5YXdoaXAnOiBbMjU1LDIzOSwyMTMsMV0sXG4gICAgJ3BlYWNocHVmZic6IFsyNTUsMjE4LDE4NSwxXSwgJ3BlcnUnOiBbMjA1LDEzMyw2MywxXSxcbiAgICAncGluayc6IFsyNTUsMTkyLDIwMywxXSwgJ3BsdW0nOiBbMjIxLDE2MCwyMjEsMV0sXG4gICAgJ3Bvd2RlcmJsdWUnOiBbMTc2LDIyNCwyMzAsMV0sICdwdXJwbGUnOiBbMTI4LDAsMTI4LDFdLFxuICAgICdyZWQnOiBbMjU1LDAsMCwxXSwgJ3Jvc3licm93bic6IFsxODgsMTQzLDE0MywxXSxcbiAgICAncm95YWxibHVlJzogWzY1LDEwNSwyMjUsMV0sICdzYWRkbGVicm93bic6IFsxMzksNjksMTksMV0sXG4gICAgJ3NhbG1vbic6IFsyNTAsMTI4LDExNCwxXSwgJ3NhbmR5YnJvd24nOiBbMjQ0LDE2NCw5NiwxXSxcbiAgICAnc2VhZ3JlZW4nOiBbNDYsMTM5LDg3LDFdLCAnc2Vhc2hlbGwnOiBbMjU1LDI0NSwyMzgsMV0sXG4gICAgJ3NpZW5uYSc6IFsxNjAsODIsNDUsMV0sICdzaWx2ZXInOiBbMTkyLDE5MiwxOTIsMV0sXG4gICAgJ3NreWJsdWUnOiBbMTM1LDIwNiwyMzUsMV0sICdzbGF0ZWJsdWUnOiBbMTA2LDkwLDIwNSwxXSxcbiAgICAnc2xhdGVncmF5JzogWzExMiwxMjgsMTQ0LDFdLCAnc2xhdGVncmV5JzogWzExMiwxMjgsMTQ0LDFdLFxuICAgICdzbm93JzogWzI1NSwyNTAsMjUwLDFdLCAnc3ByaW5nZ3JlZW4nOiBbMCwyNTUsMTI3LDFdLFxuICAgICdzdGVlbGJsdWUnOiBbNzAsMTMwLDE4MCwxXSwgJ3Rhbic6IFsyMTAsMTgwLDE0MCwxXSxcbiAgICAndGVhbCc6IFswLDEyOCwxMjgsMV0sICd0aGlzdGxlJzogWzIxNiwxOTEsMjE2LDFdLFxuICAgICd0b21hdG8nOiBbMjU1LDk5LDcxLDFdLCAndHVycXVvaXNlJzogWzY0LDIyNCwyMDgsMV0sXG4gICAgJ3Zpb2xldCc6IFsyMzgsMTMwLDIzOCwxXSwgJ3doZWF0JzogWzI0NSwyMjIsMTc5LDFdLFxuICAgICd3aGl0ZSc6IFsyNTUsMjU1LDI1NSwxXSwgJ3doaXRlc21va2UnOiBbMjQ1LDI0NSwyNDUsMV0sXG4gICAgJ3llbGxvdyc6IFsyNTUsMjU1LDAsMV0sICd5ZWxsb3dncmVlbic6IFsxNTQsMjA1LDUwLDFdXG59O1xuXG5mdW5jdGlvbiBjbGFtcENzc0J5dGUoaSkgeyAgLy8gQ2xhbXAgdG8gaW50ZWdlciAwIC4uIDI1NS5cbiAgICBpID0gTWF0aC5yb3VuZChpKTsgIC8vIFNlZW1zIHRvIGJlIHdoYXQgQ2hyb21lIGRvZXMgKHZzIHRydW5jYXRpb24pLlxuICAgIHJldHVybiBpIDwgMCA/IDAgOiBpID4gMjU1ID8gMjU1IDogaTtcbn1cblxuZnVuY3Rpb24gY2xhbXBDc3NBbmdsZShpKSB7ICAvLyBDbGFtcCB0byBpbnRlZ2VyIDAgLi4gMzYwLlxuICAgIGkgPSBNYXRoLnJvdW5kKGkpOyAgLy8gU2VlbXMgdG8gYmUgd2hhdCBDaHJvbWUgZG9lcyAodnMgdHJ1bmNhdGlvbikuXG4gICAgcmV0dXJuIGkgPCAwID8gMCA6IGkgPiAzNjAgPyAzNjAgOiBpO1xufVxuXG5mdW5jdGlvbiBjbGFtcENzc0Zsb2F0KGYpIHsgIC8vIENsYW1wIHRvIGZsb2F0IDAuMCAuLiAxLjAuXG4gICAgcmV0dXJuIGYgPCAwID8gMCA6IGYgPiAxID8gMSA6IGY7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ3NzSW50KHN0cikgeyAgLy8gaW50IG9yIHBlcmNlbnRhZ2UuXG4gICAgaWYgKHN0ci5sZW5ndGggJiYgc3RyLmNoYXJBdChzdHIubGVuZ3RoIC0gMSkgPT09ICclJykge1xuICAgICAgICByZXR1cm4gY2xhbXBDc3NCeXRlKHBhcnNlRmxvYXQoc3RyKSAvIDEwMCAqIDI1NSk7XG4gICAgfVxuICAgIHJldHVybiBjbGFtcENzc0J5dGUocGFyc2VJbnQoc3RyLCAxMCkpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUNzc0Zsb2F0KHN0cikgeyAgLy8gZmxvYXQgb3IgcGVyY2VudGFnZS5cbiAgICBpZiAoc3RyLmxlbmd0aCAmJiBzdHIuY2hhckF0KHN0ci5sZW5ndGggLSAxKSA9PT0gJyUnKSB7XG4gICAgICAgIHJldHVybiBjbGFtcENzc0Zsb2F0KHBhcnNlRmxvYXQoc3RyKSAvIDEwMCk7XG4gICAgfVxuICAgIHJldHVybiBjbGFtcENzc0Zsb2F0KHBhcnNlRmxvYXQoc3RyKSk7XG59XG5cbmZ1bmN0aW9uIGNzc0h1ZVRvUmdiKG0xLCBtMiwgaCkge1xuICAgIGlmIChoIDwgMCkge1xuICAgICAgICBoICs9IDE7XG4gICAgfVxuICAgIGVsc2UgaWYgKGggPiAxKSB7XG4gICAgICAgIGggLT0gMTtcbiAgICB9XG5cbiAgICBpZiAoaCAqIDYgPCAxKSB7XG4gICAgICAgIHJldHVybiBtMSArIChtMiAtIG0xKSAqIGggKiA2O1xuICAgIH1cbiAgICBpZiAoaCAqIDIgPCAxKSB7XG4gICAgICAgIHJldHVybiBtMjtcbiAgICB9XG4gICAgaWYgKGggKiAzIDwgMikge1xuICAgICAgICByZXR1cm4gbTEgKyAobTIgLSBtMSkgKiAoMi8zIC0gaCkgKiA2O1xuICAgIH1cbiAgICByZXR1cm4gbTE7XG59XG5cbmZ1bmN0aW9uIGxlcnBOdW1iZXIoYSwgYiwgcCkge1xuICAgIHJldHVybiBhICsgKGIgLSBhKSAqIHA7XG59XG5cbmZ1bmN0aW9uIHNldFJnYmEob3V0LCByLCBnLCBiLCBhKSB7XG4gICAgb3V0WzBdID0gcjsgb3V0WzFdID0gZzsgb3V0WzJdID0gYjsgb3V0WzNdID0gYTtcbiAgICByZXR1cm4gb3V0O1xufVxuZnVuY3Rpb24gY29weVJnYmEob3V0LCBhKSB7XG4gICAgb3V0WzBdID0gYVswXTsgb3V0WzFdID0gYVsxXTsgb3V0WzJdID0gYVsyXTsgb3V0WzNdID0gYVszXTtcbiAgICByZXR1cm4gb3V0O1xufVxuXG52YXIgY29sb3JDYWNoZSA9IG5ldyBMUlUoMjApO1xudmFyIGxhc3RSZW1vdmVkQXJyID0gbnVsbDtcblxuZnVuY3Rpb24gcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycikge1xuICAgIC8vIFJldXNlIHJlbW92ZWQgYXJyYXlcbiAgICBpZiAobGFzdFJlbW92ZWRBcnIpIHtcbiAgICAgICAgY29weVJnYmEobGFzdFJlbW92ZWRBcnIsIHJnYmFBcnIpO1xuICAgIH1cbiAgICBsYXN0UmVtb3ZlZEFyciA9IGNvbG9yQ2FjaGUucHV0KGNvbG9yU3RyLCBsYXN0UmVtb3ZlZEFyciB8fCAocmdiYUFyci5zbGljZSgpKSk7XG59XG5cbi8qKlxuICogQG5hbWUgY2xheS5jb3JlLmNvbG9yLnBhcnNlXG4gKiBAcGFyYW0ge3N0cmluZ30gY29sb3JTdHJcbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IG91dFxuICogQHJldHVybiB7QXJyYXkuPG51bWJlcj59XG4gKi9cbmNvbG9yVXRpbC5wYXJzZSA9IGZ1bmN0aW9uIChjb2xvclN0ciwgcmdiYUFycikge1xuICAgIGlmICghY29sb3JTdHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZ2JhQXJyID0gcmdiYUFyciB8fCBbXTtcblxuICAgIHZhciBjYWNoZWQgPSBjb2xvckNhY2hlLmdldChjb2xvclN0cik7XG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgICByZXR1cm4gY29weVJnYmEocmdiYUFyciwgY2FjaGVkKTtcbiAgICB9XG5cbiAgICAvLyBjb2xvclN0ciBtYXkgYmUgbm90IHN0cmluZ1xuICAgIGNvbG9yU3RyID0gY29sb3JTdHIgKyAnJztcbiAgICAvLyBSZW1vdmUgYWxsIHdoaXRlc3BhY2UsIG5vdCBjb21wbGlhbnQsIGJ1dCBzaG91bGQganVzdCBiZSBtb3JlIGFjY2VwdGluZy5cbiAgICB2YXIgc3RyID0gY29sb3JTdHIucmVwbGFjZSgvIC9nLCAnJykudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIENvbG9yIGtleXdvcmRzIChhbmQgdHJhbnNwYXJlbnQpIGxvb2t1cC5cbiAgICBpZiAoc3RyIGluIGtDU1NDb2xvclRhYmxlKSB7XG4gICAgICAgIGNvcHlSZ2JhKHJnYmFBcnIsIGtDU1NDb2xvclRhYmxlW3N0cl0pO1xuICAgICAgICBwdXRUb0NhY2hlKGNvbG9yU3RyLCByZ2JhQXJyKTtcbiAgICAgICAgcmV0dXJuIHJnYmFBcnI7XG4gICAgfVxuXG4gICAgLy8gI2FiYyBhbmQgI2FiYzEyMyBzeW50YXguXG4gICAgaWYgKHN0ci5jaGFyQXQoMCkgPT09ICcjJykge1xuICAgICAgICBpZiAoc3RyLmxlbmd0aCA9PT0gNCkge1xuICAgICAgICAgICAgdmFyIGl2ID0gcGFyc2VJbnQoc3RyLnN1YnN0cigxKSwgMTYpOyAgLy8gVE9ETyhkZWFubSk6IFN0cmljdGVyIHBhcnNpbmcuXG4gICAgICAgICAgICBpZiAoIShpdiA+PSAwICYmIGl2IDw9IDB4ZmZmKSkge1xuICAgICAgICAgICAgICAgIHNldFJnYmEocmdiYUFyciwgMCwgMCwgMCwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAgLy8gQ292ZXJzIE5hTi5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFJnYmEocmdiYUFycixcbiAgICAgICAgICAgICAgICAoKGl2ICYgMHhmMDApID4+IDQpIHwgKChpdiAmIDB4ZjAwKSA+PiA4KSxcbiAgICAgICAgICAgICAgICAoaXYgJiAweGYwKSB8ICgoaXYgJiAweGYwKSA+PiA0KSxcbiAgICAgICAgICAgICAgICAoaXYgJiAweGYpIHwgKChpdiAmIDB4ZikgPDwgNCksXG4gICAgICAgICAgICAgICAgMVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHB1dFRvQ2FjaGUoY29sb3JTdHIsIHJnYmFBcnIpO1xuICAgICAgICAgICAgcmV0dXJuIHJnYmFBcnI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3RyLmxlbmd0aCA9PT0gNykge1xuICAgICAgICAgICAgdmFyIGl2ID0gcGFyc2VJbnQoc3RyLnN1YnN0cigxKSwgMTYpOyAgLy8gVE9ETyhkZWFubSk6IFN0cmljdGVyIHBhcnNpbmcuXG4gICAgICAgICAgICBpZiAoIShpdiA+PSAwICYmIGl2IDw9IDB4ZmZmZmZmKSkge1xuICAgICAgICAgICAgICAgIHNldFJnYmEocmdiYUFyciwgMCwgMCwgMCwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAgLy8gQ292ZXJzIE5hTi5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFJnYmEocmdiYUFycixcbiAgICAgICAgICAgICAgICAoaXYgJiAweGZmMDAwMCkgPj4gMTYsXG4gICAgICAgICAgICAgICAgKGl2ICYgMHhmZjAwKSA+PiA4LFxuICAgICAgICAgICAgICAgIGl2ICYgMHhmZixcbiAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgICAgICByZXR1cm4gcmdiYUFycjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIG9wID0gc3RyLmluZGV4T2YoJygnKSwgZXAgPSBzdHIuaW5kZXhPZignKScpO1xuICAgIGlmIChvcCAhPT0gLTEgJiYgZXAgKyAxID09PSBzdHIubGVuZ3RoKSB7XG4gICAgICAgIHZhciBmbmFtZSA9IHN0ci5zdWJzdHIoMCwgb3ApO1xuICAgICAgICB2YXIgcGFyYW1zID0gc3RyLnN1YnN0cihvcCArIDEsIGVwIC0gKG9wICsgMSkpLnNwbGl0KCcsJyk7XG4gICAgICAgIHZhciBhbHBoYSA9IDE7ICAvLyBUbyBhbGxvdyBjYXNlIGZhbGx0aHJvdWdoLlxuICAgICAgICBzd2l0Y2ggKGZuYW1lKSB7XG4gICAgICAgICAgICBjYXNlICdyZ2JhJzpcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLmxlbmd0aCAhPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRSZ2JhKHJnYmFBcnIsIDAsIDAsIDAsIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFscGhhID0gcGFyc2VDc3NGbG9hdChwYXJhbXMucG9wKCkpOyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbiAgICAgICAgICAgIC8vIEZhbGwgdGhyb3VnaC5cbiAgICAgICAgICAgIGNhc2UgJ3JnYic6XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggIT09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLCAwLCAwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXRSZ2JhKHJnYmFBcnIsXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlQ3NzSW50KHBhcmFtc1swXSksXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlQ3NzSW50KHBhcmFtc1sxXSksXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlQ3NzSW50KHBhcmFtc1syXSksXG4gICAgICAgICAgICAgICAgICAgIGFscGhhXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBwdXRUb0NhY2hlKGNvbG9yU3RyLCByZ2JhQXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmdiYUFycjtcbiAgICAgICAgICAgIGNhc2UgJ2hzbGEnOlxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMubGVuZ3RoICE9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFJnYmEocmdiYUFyciwgMCwgMCwgMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyYW1zWzNdID0gcGFyc2VDc3NGbG9hdChwYXJhbXNbM10pO1xuICAgICAgICAgICAgICAgIGhzbGEycmdiYShwYXJhbXMsIHJnYmFBcnIpO1xuICAgICAgICAgICAgICAgIHB1dFRvQ2FjaGUoY29sb3JTdHIsIHJnYmFBcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZ2JhQXJyO1xuICAgICAgICAgICAgY2FzZSAnaHNsJzpcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLmxlbmd0aCAhPT0gMykge1xuICAgICAgICAgICAgICAgICAgICBzZXRSZ2JhKHJnYmFBcnIsIDAsIDAsIDAsIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhzbGEycmdiYShwYXJhbXMsIHJnYmFBcnIpO1xuICAgICAgICAgICAgICAgIHB1dFRvQ2FjaGUoY29sb3JTdHIsIHJnYmFBcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZ2JhQXJyO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRSZ2JhKHJnYmFBcnIsIDAsIDAsIDAsIDEpO1xuICAgIHJldHVybjtcbn07XG5cbmNvbG9yVXRpbC5wYXJzZVRvRmxvYXQgPSBmdW5jdGlvbiAoY29sb3JTdHIsIHJnYmFBcnIpIHtcbiAgICByZ2JhQXJyID0gY29sb3JVdGlsLnBhcnNlKGNvbG9yU3RyLCByZ2JhQXJyKTtcbiAgICBpZiAoIXJnYmFBcnIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZ2JhQXJyWzBdIC89IDI1NTtcbiAgICByZ2JhQXJyWzFdIC89IDI1NTtcbiAgICByZ2JhQXJyWzJdIC89IDI1NTtcbiAgICByZXR1cm4gcmdiYUFycjtcbn1cblxuLyoqXG4gKiBAbmFtZSBjbGF5LmNvcmUuY29sb3IuaHNsYTJyZ2JhXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSBoc2xhXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSByZ2JhXG4gKiBAcmV0dXJuIHtBcnJheS48bnVtYmVyPn0gcmdiYVxuICovXG5mdW5jdGlvbiBoc2xhMnJnYmEoaHNsYSwgcmdiYSkge1xuICAgIHZhciBoID0gKCgocGFyc2VGbG9hdChoc2xhWzBdKSAlIDM2MCkgKyAzNjApICUgMzYwKSAvIDM2MDsgIC8vIDAgLi4gMVxuICAgIC8vIE5PVEUoZGVhbm0pOiBBY2NvcmRpbmcgdG8gdGhlIENTUyBzcGVjIHMvbCBzaG91bGQgb25seSBiZVxuICAgIC8vIHBlcmNlbnRhZ2VzLCBidXQgd2UgZG9uJ3QgYm90aGVyIGFuZCBsZXQgZmxvYXQgb3IgcGVyY2VudGFnZS5cbiAgICB2YXIgcyA9IHBhcnNlQ3NzRmxvYXQoaHNsYVsxXSk7XG4gICAgdmFyIGwgPSBwYXJzZUNzc0Zsb2F0KGhzbGFbMl0pO1xuICAgIHZhciBtMiA9IGwgPD0gMC41ID8gbCAqIChzICsgMSkgOiBsICsgcyAtIGwgKiBzO1xuICAgIHZhciBtMSA9IGwgKiAyIC0gbTI7XG5cbiAgICByZ2JhID0gcmdiYSB8fCBbXTtcbiAgICBzZXRSZ2JhKHJnYmEsXG4gICAgICAgIGNsYW1wQ3NzQnl0ZShjc3NIdWVUb1JnYihtMSwgbTIsIGggKyAxIC8gMykgKiAyNTUpLFxuICAgICAgICBjbGFtcENzc0J5dGUoY3NzSHVlVG9SZ2IobTEsIG0yLCBoKSAqIDI1NSksXG4gICAgICAgIGNsYW1wQ3NzQnl0ZShjc3NIdWVUb1JnYihtMSwgbTIsIGggLSAxIC8gMykgKiAyNTUpLFxuICAgICAgICAxXG4gICAgKTtcblxuICAgIGlmIChoc2xhLmxlbmd0aCA9PT0gNCkge1xuICAgICAgICByZ2JhWzNdID0gaHNsYVszXTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmdiYTtcbn1cblxuLyoqXG4gKiBAbmFtZSBjbGF5LmNvcmUuY29sb3IucmdiYTJoc2xhXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSByZ2JhXG4gKiBAcmV0dXJuIHtBcnJheS48bnVtYmVyPn0gaHNsYVxuICovXG5mdW5jdGlvbiByZ2JhMmhzbGEocmdiYSkge1xuICAgIGlmICghcmdiYSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUkdCIGZyb20gMCB0byAyNTVcbiAgICB2YXIgUiA9IHJnYmFbMF0gLyAyNTU7XG4gICAgdmFyIEcgPSByZ2JhWzFdIC8gMjU1O1xuICAgIHZhciBCID0gcmdiYVsyXSAvIDI1NTtcblxuICAgIHZhciB2TWluID0gTWF0aC5taW4oUiwgRywgQik7IC8vIE1pbi4gdmFsdWUgb2YgUkdCXG4gICAgdmFyIHZNYXggPSBNYXRoLm1heChSLCBHLCBCKTsgLy8gTWF4LiB2YWx1ZSBvZiBSR0JcbiAgICB2YXIgZGVsdGEgPSB2TWF4IC0gdk1pbjsgLy8gRGVsdGEgUkdCIHZhbHVlXG5cbiAgICB2YXIgTCA9ICh2TWF4ICsgdk1pbikgLyAyO1xuICAgIHZhciBIO1xuICAgIHZhciBTO1xuICAgIC8vIEhTTCByZXN1bHRzIGZyb20gMCB0byAxXG4gICAgaWYgKGRlbHRhID09PSAwKSB7XG4gICAgICAgIEggPSAwO1xuICAgICAgICBTID0gMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChMIDwgMC41KSB7XG4gICAgICAgICAgICBTID0gZGVsdGEgLyAodk1heCArIHZNaW4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgUyA9IGRlbHRhIC8gKDIgLSB2TWF4IC0gdk1pbik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGVsdGFSID0gKCgodk1heCAtIFIpIC8gNikgKyAoZGVsdGEgLyAyKSkgLyBkZWx0YTtcbiAgICAgICAgdmFyIGRlbHRhRyA9ICgoKHZNYXggLSBHKSAvIDYpICsgKGRlbHRhIC8gMikpIC8gZGVsdGE7XG4gICAgICAgIHZhciBkZWx0YUIgPSAoKCh2TWF4IC0gQikgLyA2KSArIChkZWx0YSAvIDIpKSAvIGRlbHRhO1xuXG4gICAgICAgIGlmIChSID09PSB2TWF4KSB7XG4gICAgICAgICAgICBIID0gZGVsdGFCIC0gZGVsdGFHO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEcgPT09IHZNYXgpIHtcbiAgICAgICAgICAgIEggPSAoMSAvIDMpICsgZGVsdGFSIC0gZGVsdGFCO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEIgPT09IHZNYXgpIHtcbiAgICAgICAgICAgIEggPSAoMiAvIDMpICsgZGVsdGFHIC0gZGVsdGFSO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKEggPCAwKSB7XG4gICAgICAgICAgICBIICs9IDE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoSCA+IDEpIHtcbiAgICAgICAgICAgIEggLT0gMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBoc2xhID0gW0ggKiAzNjAsIFMsIExdO1xuXG4gICAgaWYgKHJnYmFbM10gIT0gbnVsbCkge1xuICAgICAgICBoc2xhLnB1c2gocmdiYVszXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhzbGE7XG59XG5cbi8qKlxuICogQG5hbWUgY2xheS5jb3JlLmNvbG9yLmxpZnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvclxuICogQHBhcmFtIHtudW1iZXJ9IGxldmVsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmNvbG9yVXRpbC5saWZ0ID0gZnVuY3Rpb24gKGNvbG9yLCBsZXZlbCkge1xuICAgIHZhciBjb2xvckFyciA9IGNvbG9yVXRpbC5wYXJzZShjb2xvcik7XG4gICAgaWYgKGNvbG9yQXJyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobGV2ZWwgPCAwKSB7XG4gICAgICAgICAgICAgICAgY29sb3JBcnJbaV0gPSBjb2xvckFycltpXSAqICgxIC0gbGV2ZWwpIHwgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbG9yQXJyW2ldID0gKCgyNTUgLSBjb2xvckFycltpXSkgKiBsZXZlbCArIGNvbG9yQXJyW2ldKSB8IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbG9yVXRpbC5zdHJpbmdpZnkoY29sb3JBcnIsIGNvbG9yQXJyLmxlbmd0aCA9PT0gNCA/ICdyZ2JhJyA6ICdyZ2InKTtcbiAgICB9XG59XG5cbi8qKlxuICogQG5hbWUgY2xheS5jb3JlLmNvbG9yLnRvSGV4XG4gKiBAcGFyYW0ge3N0cmluZ30gY29sb3JcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuY29sb3JVdGlsLnRvSGV4ID0gZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgdmFyIGNvbG9yQXJyID0gY29sb3JVdGlsLnBhcnNlKGNvbG9yKTtcbiAgICBpZiAoY29sb3JBcnIpIHtcbiAgICAgICAgcmV0dXJuICgoMSA8PCAyNCkgKyAoY29sb3JBcnJbMF0gPDwgMTYpICsgKGNvbG9yQXJyWzFdIDw8IDgpICsgKCtjb2xvckFyclsyXSkpLnRvU3RyaW5nKDE2KS5zbGljZSgxKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIE1hcCB2YWx1ZSB0byBjb2xvci4gRmFzdGVyIHRoYW4gbGVycCBtZXRob2RzIGJlY2F1c2UgY29sb3IgaXMgcmVwcmVzZW50ZWQgYnkgcmdiYSBhcnJheS5cbiAqIEBuYW1lIGNsYXkuY29yZS5jb2xvclxuICogQHBhcmFtIHtudW1iZXJ9IG5vcm1hbGl6ZWRWYWx1ZSBBIGZsb2F0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBwYXJhbSB7QXJyYXkuPEFycmF5LjxudW1iZXI+Pn0gY29sb3JzIExpc3Qgb2YgcmdiYSBjb2xvciBhcnJheVxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPn0gW291dF0gTWFwcGVkIGdiYSBjb2xvciBhcnJheVxuICogQHJldHVybiB7QXJyYXkuPG51bWJlcj59IHdpbGwgYmUgbnVsbC91bmRlZmluZWQgaWYgaW5wdXQgaWxsZWdhbC5cbiAqL1xuY29sb3JVdGlsLmZhc3RMZXJwID0gZnVuY3Rpb24gKG5vcm1hbGl6ZWRWYWx1ZSwgY29sb3JzLCBvdXQpIHtcbiAgICBpZiAoIShjb2xvcnMgJiYgY29sb3JzLmxlbmd0aClcbiAgICAgICAgfHwgIShub3JtYWxpemVkVmFsdWUgPj0gMCAmJiBub3JtYWxpemVkVmFsdWUgPD0gMSlcbiAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG91dCA9IG91dCB8fCBbXTtcblxuICAgIHZhciB2YWx1ZSA9IG5vcm1hbGl6ZWRWYWx1ZSAqIChjb2xvcnMubGVuZ3RoIC0gMSk7XG4gICAgdmFyIGxlZnRJbmRleCA9IE1hdGguZmxvb3IodmFsdWUpO1xuICAgIHZhciByaWdodEluZGV4ID0gTWF0aC5jZWlsKHZhbHVlKTtcbiAgICB2YXIgbGVmdENvbG9yID0gY29sb3JzW2xlZnRJbmRleF07XG4gICAgdmFyIHJpZ2h0Q29sb3IgPSBjb2xvcnNbcmlnaHRJbmRleF07XG4gICAgdmFyIGR2ID0gdmFsdWUgLSBsZWZ0SW5kZXg7XG4gICAgb3V0WzBdID0gY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzBdLCByaWdodENvbG9yWzBdLCBkdikpO1xuICAgIG91dFsxXSA9IGNsYW1wQ3NzQnl0ZShsZXJwTnVtYmVyKGxlZnRDb2xvclsxXSwgcmlnaHRDb2xvclsxXSwgZHYpKTtcbiAgICBvdXRbMl0gPSBjbGFtcENzc0J5dGUobGVycE51bWJlcihsZWZ0Q29sb3JbMl0sIHJpZ2h0Q29sb3JbMl0sIGR2KSk7XG4gICAgb3V0WzNdID0gY2xhbXBDc3NGbG9hdChsZXJwTnVtYmVyKGxlZnRDb2xvclszXSwgcmlnaHRDb2xvclszXSwgZHYpKTtcblxuICAgIHJldHVybiBvdXQ7XG59XG5cbmNvbG9yVXRpbC5mYXN0TWFwVG9Db2xvciA9IGNvbG9yVXRpbC5mYXN0TGVycDtcblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gbm9ybWFsaXplZFZhbHVlIEEgZmxvYXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHBhcmFtIHtBcnJheS48c3RyaW5nPn0gY29sb3JzIENvbG9yIGxpc3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBmdWxsT3V0cHV0IERlZmF1bHQgZmFsc2UuXG4gKiBAcmV0dXJuIHsoc3RyaW5nfE9iamVjdCl9IFJlc3VsdCBjb2xvci4gSWYgZnVsbE91dHB1dCxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtjb2xvcjogLi4uLCBsZWZ0SW5kZXg6IC4uLiwgcmlnaHRJbmRleDogLi4uLCB2YWx1ZTogLi4ufSxcbiAqL1xuY29sb3JVdGlsLmxlcnAgPSBmdW5jdGlvbiAobm9ybWFsaXplZFZhbHVlLCBjb2xvcnMsIGZ1bGxPdXRwdXQpIHtcbiAgICBpZiAoIShjb2xvcnMgJiYgY29sb3JzLmxlbmd0aClcbiAgICAgICAgfHwgIShub3JtYWxpemVkVmFsdWUgPj0gMCAmJiBub3JtYWxpemVkVmFsdWUgPD0gMSlcbiAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IG5vcm1hbGl6ZWRWYWx1ZSAqIChjb2xvcnMubGVuZ3RoIC0gMSk7XG4gICAgdmFyIGxlZnRJbmRleCA9IE1hdGguZmxvb3IodmFsdWUpO1xuICAgIHZhciByaWdodEluZGV4ID0gTWF0aC5jZWlsKHZhbHVlKTtcbiAgICB2YXIgbGVmdENvbG9yID0gY29sb3JVdGlsLnBhcnNlKGNvbG9yc1tsZWZ0SW5kZXhdKTtcbiAgICB2YXIgcmlnaHRDb2xvciA9IGNvbG9yVXRpbC5wYXJzZShjb2xvcnNbcmlnaHRJbmRleF0pO1xuICAgIHZhciBkdiA9IHZhbHVlIC0gbGVmdEluZGV4O1xuXG4gICAgdmFyIGNvbG9yID0gY29sb3JVdGlsLnN0cmluZ2lmeShcbiAgICAgICAgW1xuICAgICAgICAgICAgY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzBdLCByaWdodENvbG9yWzBdLCBkdikpLFxuICAgICAgICAgICAgY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzFdLCByaWdodENvbG9yWzFdLCBkdikpLFxuICAgICAgICAgICAgY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzJdLCByaWdodENvbG9yWzJdLCBkdikpLFxuICAgICAgICAgICAgY2xhbXBDc3NGbG9hdChsZXJwTnVtYmVyKGxlZnRDb2xvclszXSwgcmlnaHRDb2xvclszXSwgZHYpKVxuICAgICAgICBdLFxuICAgICAgICAncmdiYSdcbiAgICApO1xuXG4gICAgcmV0dXJuIGZ1bGxPdXRwdXRcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBjb2xvcjogY29sb3IsXG4gICAgICAgICAgICBsZWZ0SW5kZXg6IGxlZnRJbmRleCxcbiAgICAgICAgICAgIHJpZ2h0SW5kZXg6IHJpZ2h0SW5kZXgsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgfVxuICAgICAgICA6IGNvbG9yO1xufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmNvbG9yVXRpbC5tYXBUb0NvbG9yID0gY29sb3JVdGlsLmxlcnA7XG5cbi8qKlxuICogQG5hbWUgY2xheS5jb3JlLmNvbG9yXG4gKiBAcGFyYW0ge3N0cmluZ30gY29sb3JcbiAqIEBwYXJhbSB7bnVtYmVyPX0gaCAwIH4gMzYwLCBpZ25vcmUgd2hlbiBudWxsLlxuICogQHBhcmFtIHtudW1iZXI9fSBzIDAgfiAxLCBpZ25vcmUgd2hlbiBudWxsLlxuICogQHBhcmFtIHtudW1iZXI9fSBsIDAgfiAxLCBpZ25vcmUgd2hlbiBudWxsLlxuICogQHJldHVybiB7c3RyaW5nfSBDb2xvciBzdHJpbmcgaW4gcmdiYSBmb3JtYXQuXG4gKi9cbmNvbG9yVXRpbC5tb2RpZnlIU0wgPSBmdW5jdGlvbiAoY29sb3IsIGgsIHMsIGwpIHtcbiAgICBjb2xvciA9IGNvbG9yVXRpbC5wYXJzZShjb2xvcik7XG5cbiAgICBpZiAoY29sb3IpIHtcbiAgICAgICAgY29sb3IgPSByZ2JhMmhzbGEoY29sb3IpO1xuICAgICAgICBoICE9IG51bGwgJiYgKGNvbG9yWzBdID0gY2xhbXBDc3NBbmdsZShoKSk7XG4gICAgICAgIHMgIT0gbnVsbCAmJiAoY29sb3JbMV0gPSBwYXJzZUNzc0Zsb2F0KHMpKTtcbiAgICAgICAgbCAhPSBudWxsICYmIChjb2xvclsyXSA9IHBhcnNlQ3NzRmxvYXQobCkpO1xuXG4gICAgICAgIHJldHVybiBjb2xvclV0aWwuc3RyaW5naWZ5KGhzbGEycmdiYShjb2xvciksICdyZ2JhJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvclxuICogQHBhcmFtIHtudW1iZXI9fSBhbHBoYSAwIH4gMVxuICogQHJldHVybiB7c3RyaW5nfSBDb2xvciBzdHJpbmcgaW4gcmdiYSBmb3JtYXQuXG4gKi9cbmNvbG9yVXRpbC5tb2RpZnlBbHBoYSA9IGZ1bmN0aW9uIChjb2xvciwgYWxwaGEpIHtcbiAgICBjb2xvciA9IGNvbG9yVXRpbC5wYXJzZShjb2xvcik7XG5cbiAgICBpZiAoY29sb3IgJiYgYWxwaGEgIT0gbnVsbCkge1xuICAgICAgICBjb2xvclszXSA9IGNsYW1wQ3NzRmxvYXQoYWxwaGEpO1xuICAgICAgICByZXR1cm4gY29sb3JVdGlsLnN0cmluZ2lmeShjb2xvciwgJ3JnYmEnKTtcbiAgICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPn0gYXJyQ29sb3IgbGlrZSBbMTIsMzMsNDQsMC40XVxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgJ3JnYmEnLCAnaHN2YScsIC4uLlxuICogQHJldHVybiB7c3RyaW5nfSBSZXN1bHQgY29sb3IuIChJZiBpbnB1dCBpbGxlZ2FsLCByZXR1cm4gdW5kZWZpbmVkKS5cbiAqL1xuY29sb3JVdGlsLnN0cmluZ2lmeSA9IGZ1bmN0aW9uIChhcnJDb2xvciwgdHlwZSkge1xuICAgIGlmICghYXJyQ29sb3IgfHwgIWFyckNvbG9yLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBjb2xvclN0ciA9IGFyckNvbG9yWzBdICsgJywnICsgYXJyQ29sb3JbMV0gKyAnLCcgKyBhcnJDb2xvclsyXTtcbiAgICBpZiAodHlwZSA9PT0gJ3JnYmEnIHx8IHR5cGUgPT09ICdoc3ZhJyB8fCB0eXBlID09PSAnaHNsYScpIHtcbiAgICAgICAgY29sb3JTdHIgKz0gJywnICsgYXJyQ29sb3JbM107XG4gICAgfVxuICAgIHJldHVybiB0eXBlICsgJygnICsgY29sb3JTdHIgKyAnKSc7XG59O1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgY29sb3JVdGlsO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvY29yZS9jb2xvci5qc1xuLy8gbW9kdWxlIGlkID0gNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///49\n");

/***/ }),
/* 50 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.prez.vertex\\n#define SHADER_NAME prez\\nuniform mat4 WVP : WORLDVIEWPROJECTION;\\nattribute vec3 pos : POSITION;\\nattribute vec2 uv : TEXCOORD_0;\\nuniform vec2 uvRepeat : [1.0, 1.0];\\nuniform vec2 uvOffset : [0.0, 0.0];\\n@import clay.chunk.skinning_header\\n@import clay.chunk.instancing_header\\n@import clay.util.logdepth_vertex_header\\nvarying vec2 v_Texcoord;\\nvoid main()\\n{\\n vec4 P = vec4(pos, 1.0);\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n P = skinMatrixWS * P;\\n#endif\\n#ifdef INSTANCING\\n @import clay.chunk.instancing_matrix\\n P = instanceMat * P;\\n#endif\\n gl_Position = WVP * P;\\n v_Texcoord = uv * uvRepeat + uvOffset;\\n @import clay.util.logdepth_vertex_main\\n}\\n@end\\n@export clay.prez.fragment\\nuniform sampler2D alphaMap;\\nuniform float alphaCutoff: 0.0;\\n@import clay.util.logdepth_fragment_header\\nvarying vec2 v_Texcoord;\\nvoid main()\\n{\\n if (alphaCutoff > 0.0) {\\n if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {\\n discard;\\n }\\n }\\n gl_FragColor = vec4(0.0,0.0,0.0,1.0);\\n @import clay.util.logdepth_fragment_main\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL3ByZXouZ2xzbC5qcz8xODE0Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LnByZXoudmVydGV4XFxuI2RlZmluZSBTSEFERVJfTkFNRSBwcmV6XFxudW5pZm9ybSBtYXQ0IFdWUCA6IFdPUkxEVklFV1BST0pFQ1RJT047XFxuYXR0cmlidXRlIHZlYzMgcG9zIDogUE9TSVRJT047XFxuYXR0cmlidXRlIHZlYzIgdXYgOiBURVhDT09SRF8wO1xcbnVuaWZvcm0gdmVjMiB1dlJlcGVhdCA6IFsxLjAsIDEuMF07XFxudW5pZm9ybSB2ZWMyIHV2T2Zmc2V0IDogWzAuMCwgMC4wXTtcXG5AaW1wb3J0IGNsYXkuY2h1bmsuc2tpbm5pbmdfaGVhZGVyXFxuQGltcG9ydCBjbGF5LmNodW5rLmluc3RhbmNpbmdfaGVhZGVyXFxuQGltcG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfdmVydGV4X2hlYWRlclxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWM0IFAgPSB2ZWM0KHBvcywgMS4wKTtcXG4jaWZkZWYgU0tJTk5JTkdcXG4gQGltcG9ydCBjbGF5LmNodW5rLnNraW5fbWF0cml4XFxuIFAgPSBza2luTWF0cml4V1MgKiBQO1xcbiNlbmRpZlxcbiNpZmRlZiBJTlNUQU5DSU5HXFxuIEBpbXBvcnQgY2xheS5jaHVuay5pbnN0YW5jaW5nX21hdHJpeFxcbiBQID0gaW5zdGFuY2VNYXQgKiBQO1xcbiNlbmRpZlxcbiBnbF9Qb3NpdGlvbiA9IFdWUCAqIFA7XFxuIHZfVGV4Y29vcmQgPSB1diAqIHV2UmVwZWF0ICsgdXZPZmZzZXQ7XFxuIEBpbXBvcnQgY2xheS51dGlsLmxvZ2RlcHRoX3ZlcnRleF9tYWluXFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkucHJlei5mcmFnbWVudFxcbnVuaWZvcm0gc2FtcGxlcjJEIGFscGhhTWFwO1xcbnVuaWZvcm0gZmxvYXQgYWxwaGFDdXRvZmY6IDAuMDtcXG5AaW1wb3J0IGNsYXkudXRpbC5sb2dkZXB0aF9mcmFnbWVudF9oZWFkZXJcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG52b2lkIG1haW4oKVxcbntcXG4gaWYgKGFscGhhQ3V0b2ZmID4gMC4wKSB7XFxuIGlmICh0ZXh0dXJlMkQoYWxwaGFNYXAsIHZfVGV4Y29vcmQpLmEgPD0gYWxwaGFDdXRvZmYpIHtcXG4gZGlzY2FyZDtcXG4gfVxcbiB9XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQoMC4wLDAuMCwwLjAsMS4wKTtcXG4gQGltcG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfZnJhZ21lbnRfbWFpblxcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvcHJlei5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSA1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///50\n");

/***/ }),
/* 51 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__calcAmbientSHLight_glsl_js__ = __webpack_require__(133);\n\n\nvar uniformVec3Prefix = 'uniform vec3 ';\nvar uniformFloatPrefix = 'uniform float ';\nvar exportHeaderPrefix = '@export clay.header.';\nvar exportEnd = '@end';\nvar unconfigurable = ':unconfigurable;';\n/* harmony default export */ __webpack_exports__[\"a\"] = ([\n    exportHeaderPrefix + 'directional_light',\n    uniformVec3Prefix + 'directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]' + unconfigurable,\n    uniformVec3Prefix + 'directionalLightColor[DIRECTIONAL_LIGHT_COUNT]' + unconfigurable,\n    exportEnd,\n\n    exportHeaderPrefix + 'ambient_light',\n    uniformVec3Prefix + 'ambientLightColor[AMBIENT_LIGHT_COUNT]' + unconfigurable,\n    exportEnd,\n\n    exportHeaderPrefix + 'ambient_sh_light',\n    uniformVec3Prefix + 'ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]' + unconfigurable,\n    uniformVec3Prefix + 'ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]' + unconfigurable,\n    __WEBPACK_IMPORTED_MODULE_0__calcAmbientSHLight_glsl_js__[\"a\" /* default */],\n    exportEnd,\n\n    exportHeaderPrefix + 'ambient_cubemap_light',\n    uniformVec3Prefix + 'ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]' + unconfigurable,\n    'uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]' + unconfigurable,\n    'uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]' + unconfigurable,\n    exportEnd,\n\n    exportHeaderPrefix + 'point_light',\n    uniformVec3Prefix + 'pointLightPosition[POINT_LIGHT_COUNT]' + unconfigurable,\n    uniformFloatPrefix + 'pointLightRange[POINT_LIGHT_COUNT]' + unconfigurable,\n    uniformVec3Prefix + 'pointLightColor[POINT_LIGHT_COUNT]' + unconfigurable,\n    exportEnd,\n\n    exportHeaderPrefix + 'spot_light',\n    uniformVec3Prefix + 'spotLightPosition[SPOT_LIGHT_COUNT]' + unconfigurable,\n    uniformVec3Prefix + 'spotLightDirection[SPOT_LIGHT_COUNT]' + unconfigurable,\n    uniformFloatPrefix + 'spotLightRange[SPOT_LIGHT_COUNT]' + unconfigurable,\n    uniformFloatPrefix + 'spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]' + unconfigurable,\n    uniformFloatPrefix + 'spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]' + unconfigurable,\n    uniformFloatPrefix + 'spotLightFalloffFactor[SPOT_LIGHT_COUNT]' + unconfigurable,\n    uniformVec3Prefix + 'spotLightColor[SPOT_LIGHT_COUNT]' + unconfigurable,\n    exportEnd\n].join('\\n'));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2hlYWRlci9saWdodC5qcz81NmQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjYWxjQW1iaWVudFNITGlnaHRFc3NsIGZyb20gJy4vY2FsY0FtYmllbnRTSExpZ2h0Lmdsc2wuanMnO1xuXG52YXIgdW5pZm9ybVZlYzNQcmVmaXggPSAndW5pZm9ybSB2ZWMzICc7XG52YXIgdW5pZm9ybUZsb2F0UHJlZml4ID0gJ3VuaWZvcm0gZmxvYXQgJztcbnZhciBleHBvcnRIZWFkZXJQcmVmaXggPSAnQGV4cG9ydCBjbGF5LmhlYWRlci4nO1xudmFyIGV4cG9ydEVuZCA9ICdAZW5kJztcbnZhciB1bmNvbmZpZ3VyYWJsZSA9ICc6dW5jb25maWd1cmFibGU7JztcbmV4cG9ydCBkZWZhdWx0IFtcbiAgICBleHBvcnRIZWFkZXJQcmVmaXggKyAnZGlyZWN0aW9uYWxfbGlnaHQnLFxuICAgIHVuaWZvcm1WZWMzUHJlZml4ICsgJ2RpcmVjdGlvbmFsTGlnaHREaXJlY3Rpb25bRElSRUNUSU9OQUxfTElHSFRfQ09VTlRdJyArIHVuY29uZmlndXJhYmxlLFxuICAgIHVuaWZvcm1WZWMzUHJlZml4ICsgJ2RpcmVjdGlvbmFsTGlnaHRDb2xvcltESVJFQ1RJT05BTF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgZXhwb3J0RW5kLFxuXG4gICAgZXhwb3J0SGVhZGVyUHJlZml4ICsgJ2FtYmllbnRfbGlnaHQnLFxuICAgIHVuaWZvcm1WZWMzUHJlZml4ICsgJ2FtYmllbnRMaWdodENvbG9yW0FNQklFTlRfTElHSFRfQ09VTlRdJyArIHVuY29uZmlndXJhYmxlLFxuICAgIGV4cG9ydEVuZCxcblxuICAgIGV4cG9ydEhlYWRlclByZWZpeCArICdhbWJpZW50X3NoX2xpZ2h0JyxcbiAgICB1bmlmb3JtVmVjM1ByZWZpeCArICdhbWJpZW50U0hMaWdodENvbG9yW0FNQklFTlRfU0hfTElHSFRfQ09VTlRdJyArIHVuY29uZmlndXJhYmxlLFxuICAgIHVuaWZvcm1WZWMzUHJlZml4ICsgJ2FtYmllbnRTSExpZ2h0Q29lZmZpY2llbnRzW0FNQklFTlRfU0hfTElHSFRfQ09VTlQgKiA5XScgKyB1bmNvbmZpZ3VyYWJsZSxcbiAgICBjYWxjQW1iaWVudFNITGlnaHRFc3NsLFxuICAgIGV4cG9ydEVuZCxcblxuICAgIGV4cG9ydEhlYWRlclByZWZpeCArICdhbWJpZW50X2N1YmVtYXBfbGlnaHQnLFxuICAgIHVuaWZvcm1WZWMzUHJlZml4ICsgJ2FtYmllbnRDdWJlbWFwTGlnaHRDb2xvcltBTUJJRU5UX0NVQkVNQVBfTElHSFRfQ09VTlRdJyArIHVuY29uZmlndXJhYmxlLFxuICAgICd1bmlmb3JtIHNhbXBsZXJDdWJlIGFtYmllbnRDdWJlbWFwTGlnaHRDdWJlbWFwW0FNQklFTlRfQ1VCRU1BUF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgJ3VuaWZvcm0gc2FtcGxlcjJEIGFtYmllbnRDdWJlbWFwTGlnaHRCUkRGTG9va3VwW0FNQklFTlRfQ1VCRU1BUF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgZXhwb3J0RW5kLFxuXG4gICAgZXhwb3J0SGVhZGVyUHJlZml4ICsgJ3BvaW50X2xpZ2h0JyxcbiAgICB1bmlmb3JtVmVjM1ByZWZpeCArICdwb2ludExpZ2h0UG9zaXRpb25bUE9JTlRfTElHSFRfQ09VTlRdJyArIHVuY29uZmlndXJhYmxlLFxuICAgIHVuaWZvcm1GbG9hdFByZWZpeCArICdwb2ludExpZ2h0UmFuZ2VbUE9JTlRfTElHSFRfQ09VTlRdJyArIHVuY29uZmlndXJhYmxlLFxuICAgIHVuaWZvcm1WZWMzUHJlZml4ICsgJ3BvaW50TGlnaHRDb2xvcltQT0lOVF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgZXhwb3J0RW5kLFxuXG4gICAgZXhwb3J0SGVhZGVyUHJlZml4ICsgJ3Nwb3RfbGlnaHQnLFxuICAgIHVuaWZvcm1WZWMzUHJlZml4ICsgJ3Nwb3RMaWdodFBvc2l0aW9uW1NQT1RfTElHSFRfQ09VTlRdJyArIHVuY29uZmlndXJhYmxlLFxuICAgIHVuaWZvcm1WZWMzUHJlZml4ICsgJ3Nwb3RMaWdodERpcmVjdGlvbltTUE9UX0xJR0hUX0NPVU5UXScgKyB1bmNvbmZpZ3VyYWJsZSxcbiAgICB1bmlmb3JtRmxvYXRQcmVmaXggKyAnc3BvdExpZ2h0UmFuZ2VbU1BPVF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgdW5pZm9ybUZsb2F0UHJlZml4ICsgJ3Nwb3RMaWdodFVtYnJhQW5nbGVDb3NpbmVbU1BPVF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgdW5pZm9ybUZsb2F0UHJlZml4ICsgJ3Nwb3RMaWdodFBlbnVtYnJhQW5nbGVDb3NpbmVbU1BPVF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgdW5pZm9ybUZsb2F0UHJlZml4ICsgJ3Nwb3RMaWdodEZhbGxvZmZGYWN0b3JbU1BPVF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgdW5pZm9ybVZlYzNQcmVmaXggKyAnc3BvdExpZ2h0Q29sb3JbU1BPVF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgZXhwb3J0RW5kXG5dLmpvaW4oJ1xcbicpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2hlYWRlci9saWdodC5qc1xuLy8gbW9kdWxlIGlkID0gNTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///51\n");

/***/ }),
/* 52 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Plane__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\n\n\nvar vec3Set = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].set;\nvar vec3Copy = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].copy;\nvar vec3TranformMat4 = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].transformMat4;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\n/**\n * @constructor\n * @alias clay.Frustum\n */\nvar Frustum = function() {\n\n    /**\n     * Eight planes to enclose the frustum\n     * @type {clay.Plane[]}\n     */\n    this.planes = [];\n\n    for (var i = 0; i < 6; i++) {\n        this.planes.push(new __WEBPACK_IMPORTED_MODULE_1__Plane__[\"a\" /* default */]());\n    }\n\n    /**\n     * Bounding box of frustum\n     * @type {clay.BoundingBox}\n     */\n    this.boundingBox = new __WEBPACK_IMPORTED_MODULE_0__BoundingBox__[\"a\" /* default */]();\n\n    /**\n     * Eight vertices of frustum\n     * @type {Float32Array[]}\n     */\n    this.vertices = [];\n    for (var i = 0; i < 8; i++) {\n        this.vertices[i] = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].fromValues(0, 0, 0);\n    }\n};\n\nFrustum.prototype = {\n\n    // http://web.archive.org/web/20120531231005/http://crazyjoke.free.fr/doc/3D/plane%20extraction.pdf\n    /**\n     * Set frustum from a projection matrix\n     * @param {clay.Matrix4} projectionMatrix\n     */\n    setFromProjection: function(projectionMatrix) {\n\n        var planes = this.planes;\n        var m = projectionMatrix.array;\n        var m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3];\n        var m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7];\n        var m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11];\n        var m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15];\n\n        // Update planes\n        vec3Set(planes[0].normal.array, m3 - m0, m7 - m4, m11 - m8);\n        planes[0].distance = -(m15 - m12);\n        planes[0].normalize();\n\n        vec3Set(planes[1].normal.array, m3 + m0, m7 + m4, m11 + m8);\n        planes[1].distance = -(m15 + m12);\n        planes[1].normalize();\n\n        vec3Set(planes[2].normal.array, m3 + m1, m7 + m5, m11 + m9);\n        planes[2].distance = -(m15 + m13);\n        planes[2].normalize();\n\n        vec3Set(planes[3].normal.array, m3 - m1, m7 - m5, m11 - m9);\n        planes[3].distance = -(m15 - m13);\n        planes[3].normalize();\n\n        vec3Set(planes[4].normal.array, m3 - m2, m7 - m6, m11 - m10);\n        planes[4].distance = -(m15 - m14);\n        planes[4].normalize();\n\n        vec3Set(planes[5].normal.array, m3 + m2, m7 + m6, m11 + m10);\n        planes[5].distance = -(m15 + m14);\n        planes[5].normalize();\n\n        // Perspective projection\n        var boundingBox = this.boundingBox;\n        var vertices = this.vertices;\n        if (m15 === 0)  {\n            var aspect = m5 / m0;\n            var zNear = -m14 / (m10 - 1);\n            var zFar = -m14 / (m10 + 1);\n            var farY = -zFar / m5;\n            var nearY = -zNear / m5;\n            // Update bounding box\n            boundingBox.min.set(-farY * aspect, -farY, zFar);\n            boundingBox.max.set(farY * aspect, farY, zNear);\n            // update vertices\n            //--- min z\n            // min x\n            vec3Set(vertices[0], -farY * aspect, -farY, zFar);\n            vec3Set(vertices[1], -farY * aspect, farY, zFar);\n            // max x\n            vec3Set(vertices[2], farY * aspect, -farY, zFar);\n            vec3Set(vertices[3], farY * aspect, farY, zFar);\n            //-- max z\n            vec3Set(vertices[4], -nearY * aspect, -nearY, zNear);\n            vec3Set(vertices[5], -nearY * aspect, nearY, zNear);\n            vec3Set(vertices[6], nearY * aspect, -nearY, zNear);\n            vec3Set(vertices[7], nearY * aspect, nearY, zNear);\n        }\n        else { // Orthographic projection\n            var left = (-1 - m12) / m0;\n            var right = (1 - m12) / m0;\n            var top = (1 - m13) / m5;\n            var bottom = (-1 - m13) / m5;\n            var near = (-1 - m14) / m10;\n            var far = (1 - m14) / m10;\n\n\n            boundingBox.min.set(Math.min(left, right), Math.min(bottom, top), Math.min(far, near));\n            boundingBox.max.set(Math.max(right, left), Math.max(top, bottom), Math.max(near, far));\n\n            var min = boundingBox.min.array;\n            var max = boundingBox.max.array;\n            //--- min z\n            // min x\n            vec3Set(vertices[0], min[0], min[1], min[2]);\n            vec3Set(vertices[1], min[0], max[1], min[2]);\n            // max x\n            vec3Set(vertices[2], max[0], min[1], min[2]);\n            vec3Set(vertices[3], max[0], max[1], min[2]);\n            //-- max z\n            vec3Set(vertices[4], min[0], min[1], max[2]);\n            vec3Set(vertices[5], min[0], max[1], max[2]);\n            vec3Set(vertices[6], max[0], min[1], max[2]);\n            vec3Set(vertices[7], max[0], max[1], max[2]);\n        }\n    },\n\n    /**\n     * Apply a affine transform matrix and set to the given bounding box\n     * @function\n     * @param {clay.BoundingBox}\n     * @param {clay.Matrix4}\n     * @return {clay.BoundingBox}\n     */\n    getTransformedBoundingBox: (function() {\n\n        var tmpVec3 = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].create();\n\n        return function(bbox, matrix) {\n            var vertices = this.vertices;\n\n            var m4 = matrix.array;\n            var min = bbox.min;\n            var max = bbox.max;\n            var minArr = min.array;\n            var maxArr = max.array;\n            var v = vertices[0];\n            vec3TranformMat4(tmpVec3, v, m4);\n            vec3Copy(minArr, tmpVec3);\n            vec3Copy(maxArr, tmpVec3);\n\n            for (var i = 1; i < 8; i++) {\n                v = vertices[i];\n                vec3TranformMat4(tmpVec3, v, m4);\n\n                minArr[0] = mathMin(tmpVec3[0], minArr[0]);\n                minArr[1] = mathMin(tmpVec3[1], minArr[1]);\n                minArr[2] = mathMin(tmpVec3[2], minArr[2]);\n\n                maxArr[0] = mathMax(tmpVec3[0], maxArr[0]);\n                maxArr[1] = mathMax(tmpVec3[1], maxArr[1]);\n                maxArr[2] = mathMax(tmpVec3[2], maxArr[2]);\n            }\n\n            min._dirty = true;\n            max._dirty = true;\n\n            return bbox;\n        };\n    }) ()\n};\n/* harmony default export */ __webpack_exports__[\"a\"] = (Frustum);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL0ZydXN0dW0uanM/NjA3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQm91bmRpbmdCb3ggZnJvbSAnLi9Cb3VuZGluZ0JveCc7XG5pbXBvcnQgUGxhbmUgZnJvbSAnLi9QbGFuZSc7XG5cbmltcG9ydCB2ZWMzIGZyb20gJy4uL2dsbWF0cml4L3ZlYzMnO1xuXG52YXIgdmVjM1NldCA9IHZlYzMuc2V0O1xudmFyIHZlYzNDb3B5ID0gdmVjMy5jb3B5O1xudmFyIHZlYzNUcmFuZm9ybU1hdDQgPSB2ZWMzLnRyYW5zZm9ybU1hdDQ7XG52YXIgbWF0aE1pbiA9IE1hdGgubWluO1xudmFyIG1hdGhNYXggPSBNYXRoLm1heDtcbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5GcnVzdHVtXG4gKi9cbnZhciBGcnVzdHVtID0gZnVuY3Rpb24oKSB7XG5cbiAgICAvKipcbiAgICAgKiBFaWdodCBwbGFuZXMgdG8gZW5jbG9zZSB0aGUgZnJ1c3R1bVxuICAgICAqIEB0eXBlIHtjbGF5LlBsYW5lW119XG4gICAgICovXG4gICAgdGhpcy5wbGFuZXMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICAgIHRoaXMucGxhbmVzLnB1c2gobmV3IFBsYW5lKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJvdW5kaW5nIGJveCBvZiBmcnVzdHVtXG4gICAgICogQHR5cGUge2NsYXkuQm91bmRpbmdCb3h9XG4gICAgICovXG4gICAgdGhpcy5ib3VuZGluZ0JveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuXG4gICAgLyoqXG4gICAgICogRWlnaHQgdmVydGljZXMgb2YgZnJ1c3R1bVxuICAgICAqIEB0eXBlIHtGbG9hdDMyQXJyYXlbXX1cbiAgICAgKi9cbiAgICB0aGlzLnZlcnRpY2VzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgdGhpcy52ZXJ0aWNlc1tpXSA9IHZlYzMuZnJvbVZhbHVlcygwLCAwLCAwKTtcbiAgICB9XG59O1xuXG5GcnVzdHVtLnByb3RvdHlwZSA9IHtcblxuICAgIC8vIGh0dHA6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTIwNTMxMjMxMDA1L2h0dHA6Ly9jcmF6eWpva2UuZnJlZS5mci9kb2MvM0QvcGxhbmUlMjBleHRyYWN0aW9uLnBkZlxuICAgIC8qKlxuICAgICAqIFNldCBmcnVzdHVtIGZyb20gYSBwcm9qZWN0aW9uIG1hdHJpeFxuICAgICAqIEBwYXJhbSB7Y2xheS5NYXRyaXg0fSBwcm9qZWN0aW9uTWF0cml4XG4gICAgICovXG4gICAgc2V0RnJvbVByb2plY3Rpb246IGZ1bmN0aW9uKHByb2plY3Rpb25NYXRyaXgpIHtcblxuICAgICAgICB2YXIgcGxhbmVzID0gdGhpcy5wbGFuZXM7XG4gICAgICAgIHZhciBtID0gcHJvamVjdGlvbk1hdHJpeC5hcnJheTtcbiAgICAgICAgdmFyIG0wID0gbVswXSwgbTEgPSBtWzFdLCBtMiA9IG1bMl0sIG0zID0gbVszXTtcbiAgICAgICAgdmFyIG00ID0gbVs0XSwgbTUgPSBtWzVdLCBtNiA9IG1bNl0sIG03ID0gbVs3XTtcbiAgICAgICAgdmFyIG04ID0gbVs4XSwgbTkgPSBtWzldLCBtMTAgPSBtWzEwXSwgbTExID0gbVsxMV07XG4gICAgICAgIHZhciBtMTIgPSBtWzEyXSwgbTEzID0gbVsxM10sIG0xNCA9IG1bMTRdLCBtMTUgPSBtWzE1XTtcblxuICAgICAgICAvLyBVcGRhdGUgcGxhbmVzXG4gICAgICAgIHZlYzNTZXQocGxhbmVzWzBdLm5vcm1hbC5hcnJheSwgbTMgLSBtMCwgbTcgLSBtNCwgbTExIC0gbTgpO1xuICAgICAgICBwbGFuZXNbMF0uZGlzdGFuY2UgPSAtKG0xNSAtIG0xMik7XG4gICAgICAgIHBsYW5lc1swXS5ub3JtYWxpemUoKTtcblxuICAgICAgICB2ZWMzU2V0KHBsYW5lc1sxXS5ub3JtYWwuYXJyYXksIG0zICsgbTAsIG03ICsgbTQsIG0xMSArIG04KTtcbiAgICAgICAgcGxhbmVzWzFdLmRpc3RhbmNlID0gLShtMTUgKyBtMTIpO1xuICAgICAgICBwbGFuZXNbMV0ubm9ybWFsaXplKCk7XG5cbiAgICAgICAgdmVjM1NldChwbGFuZXNbMl0ubm9ybWFsLmFycmF5LCBtMyArIG0xLCBtNyArIG01LCBtMTEgKyBtOSk7XG4gICAgICAgIHBsYW5lc1syXS5kaXN0YW5jZSA9IC0obTE1ICsgbTEzKTtcbiAgICAgICAgcGxhbmVzWzJdLm5vcm1hbGl6ZSgpO1xuXG4gICAgICAgIHZlYzNTZXQocGxhbmVzWzNdLm5vcm1hbC5hcnJheSwgbTMgLSBtMSwgbTcgLSBtNSwgbTExIC0gbTkpO1xuICAgICAgICBwbGFuZXNbM10uZGlzdGFuY2UgPSAtKG0xNSAtIG0xMyk7XG4gICAgICAgIHBsYW5lc1szXS5ub3JtYWxpemUoKTtcblxuICAgICAgICB2ZWMzU2V0KHBsYW5lc1s0XS5ub3JtYWwuYXJyYXksIG0zIC0gbTIsIG03IC0gbTYsIG0xMSAtIG0xMCk7XG4gICAgICAgIHBsYW5lc1s0XS5kaXN0YW5jZSA9IC0obTE1IC0gbTE0KTtcbiAgICAgICAgcGxhbmVzWzRdLm5vcm1hbGl6ZSgpO1xuXG4gICAgICAgIHZlYzNTZXQocGxhbmVzWzVdLm5vcm1hbC5hcnJheSwgbTMgKyBtMiwgbTcgKyBtNiwgbTExICsgbTEwKTtcbiAgICAgICAgcGxhbmVzWzVdLmRpc3RhbmNlID0gLShtMTUgKyBtMTQpO1xuICAgICAgICBwbGFuZXNbNV0ubm9ybWFsaXplKCk7XG5cbiAgICAgICAgLy8gUGVyc3BlY3RpdmUgcHJvamVjdGlvblxuICAgICAgICB2YXIgYm91bmRpbmdCb3ggPSB0aGlzLmJvdW5kaW5nQm94O1xuICAgICAgICB2YXIgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuICAgICAgICBpZiAobTE1ID09PSAwKSAge1xuICAgICAgICAgICAgdmFyIGFzcGVjdCA9IG01IC8gbTA7XG4gICAgICAgICAgICB2YXIgek5lYXIgPSAtbTE0IC8gKG0xMCAtIDEpO1xuICAgICAgICAgICAgdmFyIHpGYXIgPSAtbTE0IC8gKG0xMCArIDEpO1xuICAgICAgICAgICAgdmFyIGZhclkgPSAtekZhciAvIG01O1xuICAgICAgICAgICAgdmFyIG5lYXJZID0gLXpOZWFyIC8gbTU7XG4gICAgICAgICAgICAvLyBVcGRhdGUgYm91bmRpbmcgYm94XG4gICAgICAgICAgICBib3VuZGluZ0JveC5taW4uc2V0KC1mYXJZICogYXNwZWN0LCAtZmFyWSwgekZhcik7XG4gICAgICAgICAgICBib3VuZGluZ0JveC5tYXguc2V0KGZhclkgKiBhc3BlY3QsIGZhclksIHpOZWFyKTtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB2ZXJ0aWNlc1xuICAgICAgICAgICAgLy8tLS0gbWluIHpcbiAgICAgICAgICAgIC8vIG1pbiB4XG4gICAgICAgICAgICB2ZWMzU2V0KHZlcnRpY2VzWzBdLCAtZmFyWSAqIGFzcGVjdCwgLWZhclksIHpGYXIpO1xuICAgICAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1sxXSwgLWZhclkgKiBhc3BlY3QsIGZhclksIHpGYXIpO1xuICAgICAgICAgICAgLy8gbWF4IHhcbiAgICAgICAgICAgIHZlYzNTZXQodmVydGljZXNbMl0sIGZhclkgKiBhc3BlY3QsIC1mYXJZLCB6RmFyKTtcbiAgICAgICAgICAgIHZlYzNTZXQodmVydGljZXNbM10sIGZhclkgKiBhc3BlY3QsIGZhclksIHpGYXIpO1xuICAgICAgICAgICAgLy8tLSBtYXggelxuICAgICAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1s0XSwgLW5lYXJZICogYXNwZWN0LCAtbmVhclksIHpOZWFyKTtcbiAgICAgICAgICAgIHZlYzNTZXQodmVydGljZXNbNV0sIC1uZWFyWSAqIGFzcGVjdCwgbmVhclksIHpOZWFyKTtcbiAgICAgICAgICAgIHZlYzNTZXQodmVydGljZXNbNl0sIG5lYXJZICogYXNwZWN0LCAtbmVhclksIHpOZWFyKTtcbiAgICAgICAgICAgIHZlYzNTZXQodmVydGljZXNbN10sIG5lYXJZICogYXNwZWN0LCBuZWFyWSwgek5lYXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgeyAvLyBPcnRob2dyYXBoaWMgcHJvamVjdGlvblxuICAgICAgICAgICAgdmFyIGxlZnQgPSAoLTEgLSBtMTIpIC8gbTA7XG4gICAgICAgICAgICB2YXIgcmlnaHQgPSAoMSAtIG0xMikgLyBtMDtcbiAgICAgICAgICAgIHZhciB0b3AgPSAoMSAtIG0xMykgLyBtNTtcbiAgICAgICAgICAgIHZhciBib3R0b20gPSAoLTEgLSBtMTMpIC8gbTU7XG4gICAgICAgICAgICB2YXIgbmVhciA9ICgtMSAtIG0xNCkgLyBtMTA7XG4gICAgICAgICAgICB2YXIgZmFyID0gKDEgLSBtMTQpIC8gbTEwO1xuXG5cbiAgICAgICAgICAgIGJvdW5kaW5nQm94Lm1pbi5zZXQoTWF0aC5taW4obGVmdCwgcmlnaHQpLCBNYXRoLm1pbihib3R0b20sIHRvcCksIE1hdGgubWluKGZhciwgbmVhcikpO1xuICAgICAgICAgICAgYm91bmRpbmdCb3gubWF4LnNldChNYXRoLm1heChyaWdodCwgbGVmdCksIE1hdGgubWF4KHRvcCwgYm90dG9tKSwgTWF0aC5tYXgobmVhciwgZmFyKSk7XG5cbiAgICAgICAgICAgIHZhciBtaW4gPSBib3VuZGluZ0JveC5taW4uYXJyYXk7XG4gICAgICAgICAgICB2YXIgbWF4ID0gYm91bmRpbmdCb3gubWF4LmFycmF5O1xuICAgICAgICAgICAgLy8tLS0gbWluIHpcbiAgICAgICAgICAgIC8vIG1pbiB4XG4gICAgICAgICAgICB2ZWMzU2V0KHZlcnRpY2VzWzBdLCBtaW5bMF0sIG1pblsxXSwgbWluWzJdKTtcbiAgICAgICAgICAgIHZlYzNTZXQodmVydGljZXNbMV0sIG1pblswXSwgbWF4WzFdLCBtaW5bMl0pO1xuICAgICAgICAgICAgLy8gbWF4IHhcbiAgICAgICAgICAgIHZlYzNTZXQodmVydGljZXNbMl0sIG1heFswXSwgbWluWzFdLCBtaW5bMl0pO1xuICAgICAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1szXSwgbWF4WzBdLCBtYXhbMV0sIG1pblsyXSk7XG4gICAgICAgICAgICAvLy0tIG1heCB6XG4gICAgICAgICAgICB2ZWMzU2V0KHZlcnRpY2VzWzRdLCBtaW5bMF0sIG1pblsxXSwgbWF4WzJdKTtcbiAgICAgICAgICAgIHZlYzNTZXQodmVydGljZXNbNV0sIG1pblswXSwgbWF4WzFdLCBtYXhbMl0pO1xuICAgICAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1s2XSwgbWF4WzBdLCBtaW5bMV0sIG1heFsyXSk7XG4gICAgICAgICAgICB2ZWMzU2V0KHZlcnRpY2VzWzddLCBtYXhbMF0sIG1heFsxXSwgbWF4WzJdKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBcHBseSBhIGFmZmluZSB0cmFuc2Zvcm0gbWF0cml4IGFuZCBzZXQgdG8gdGhlIGdpdmVuIGJvdW5kaW5nIGJveFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7Y2xheS5Cb3VuZGluZ0JveH1cbiAgICAgKiBAcGFyYW0ge2NsYXkuTWF0cml4NH1cbiAgICAgKiBAcmV0dXJuIHtjbGF5LkJvdW5kaW5nQm94fVxuICAgICAqL1xuICAgIGdldFRyYW5zZm9ybWVkQm91bmRpbmdCb3g6IChmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgdG1wVmVjMyA9IHZlYzMuY3JlYXRlKCk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGJib3gsIG1hdHJpeCkge1xuICAgICAgICAgICAgdmFyIHZlcnRpY2VzID0gdGhpcy52ZXJ0aWNlcztcblxuICAgICAgICAgICAgdmFyIG00ID0gbWF0cml4LmFycmF5O1xuICAgICAgICAgICAgdmFyIG1pbiA9IGJib3gubWluO1xuICAgICAgICAgICAgdmFyIG1heCA9IGJib3gubWF4O1xuICAgICAgICAgICAgdmFyIG1pbkFyciA9IG1pbi5hcnJheTtcbiAgICAgICAgICAgIHZhciBtYXhBcnIgPSBtYXguYXJyYXk7XG4gICAgICAgICAgICB2YXIgdiA9IHZlcnRpY2VzWzBdO1xuICAgICAgICAgICAgdmVjM1RyYW5mb3JtTWF0NCh0bXBWZWMzLCB2LCBtNCk7XG4gICAgICAgICAgICB2ZWMzQ29weShtaW5BcnIsIHRtcFZlYzMpO1xuICAgICAgICAgICAgdmVjM0NvcHkobWF4QXJyLCB0bXBWZWMzKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgICAgICAgICB2ID0gdmVydGljZXNbaV07XG4gICAgICAgICAgICAgICAgdmVjM1RyYW5mb3JtTWF0NCh0bXBWZWMzLCB2LCBtNCk7XG5cbiAgICAgICAgICAgICAgICBtaW5BcnJbMF0gPSBtYXRoTWluKHRtcFZlYzNbMF0sIG1pbkFyclswXSk7XG4gICAgICAgICAgICAgICAgbWluQXJyWzFdID0gbWF0aE1pbih0bXBWZWMzWzFdLCBtaW5BcnJbMV0pO1xuICAgICAgICAgICAgICAgIG1pbkFyclsyXSA9IG1hdGhNaW4odG1wVmVjM1syXSwgbWluQXJyWzJdKTtcblxuICAgICAgICAgICAgICAgIG1heEFyclswXSA9IG1hdGhNYXgodG1wVmVjM1swXSwgbWF4QXJyWzBdKTtcbiAgICAgICAgICAgICAgICBtYXhBcnJbMV0gPSBtYXRoTWF4KHRtcFZlYzNbMV0sIG1heEFyclsxXSk7XG4gICAgICAgICAgICAgICAgbWF4QXJyWzJdID0gbWF0aE1heCh0bXBWZWMzWzJdLCBtYXhBcnJbMl0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtaW4uX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIG1heC5fZGlydHkgPSB0cnVlO1xuXG4gICAgICAgICAgICByZXR1cm4gYmJveDtcbiAgICAgICAgfTtcbiAgICB9KSAoKVxufTtcbmV4cG9ydCBkZWZhdWx0IEZydXN0dW07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL21hdGgvRnJ1c3R1bS5qc1xuLy8gbW9kdWxlIGlkID0gNTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///52\n");

/***/ }),
/* 53 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__glmatrix_vec4__ = __webpack_require__(31);\n\n\n\n\n\n/**\n * @constructor\n * @alias clay.Plane\n * @param {clay.Vector3} [normal]\n * @param {number} [distance]\n */\nvar Plane = function(normal, distance) {\n    /**\n     * Normal of the plane\n     * @type {clay.Vector3}\n     */\n    this.normal = normal || new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */](0, 1, 0);\n\n    /**\n     * Constant of the plane equation, used as distance to the origin\n     * @type {number}\n     */\n    this.distance = distance || 0;\n};\n\nPlane.prototype = {\n\n    constructor: Plane,\n\n    /**\n     * Distance from a given point to the plane\n     * @param  {clay.Vector3} point\n     * @return {number}\n     */\n    distanceToPoint: function(point) {\n        return __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].dot(point.array, this.normal.array) - this.distance;\n    },\n\n    /**\n     * Calculate the projection point on the plane\n     * @param  {clay.Vector3} point\n     * @param  {clay.Vector3} out\n     * @return {clay.Vector3}\n     */\n    projectPoint: function(point, out) {\n        if (!out) {\n            out = new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n        }\n        var d = this.distanceToPoint(point);\n        __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, point.array, this.normal.array, -d);\n        out._dirty = true;\n        return out;\n    },\n\n    /**\n     * Normalize the plane's normal and calculate the distance\n     */\n    normalize: function() {\n        var invLen = 1 / __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].len(this.normal.array);\n        __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].scale(this.normal.array, invLen);\n        this.distance *= invLen;\n    },\n\n    /**\n     * If the plane intersect a frustum\n     * @param  {clay.Frustum} Frustum\n     * @return {boolean}\n     */\n    intersectFrustum: function(frustum) {\n        // Check if all coords of frustum is on plane all under plane\n        var coords = frustum.vertices;\n        var normal = this.normal.array;\n        var onPlane = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].dot(coords[0].array, normal) > this.distance;\n        for (var i = 1; i < 8; i++) {\n            if ((__WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].dot(coords[i].array, normal) > this.distance) != onPlane) {\n                return true;\n            }\n        }\n    },\n\n    /**\n     * Calculate the intersection point between plane and a given line\n     * @function\n     * @param {clay.Vector3} start start point of line\n     * @param {clay.Vector3} end end point of line\n     * @param {clay.Vector3} [out]\n     * @return {clay.Vector3}\n     */\n    intersectLine: (function() {\n        var rd = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].create();\n        return function(start, end, out) {\n            var d0 = this.distanceToPoint(start);\n            var d1 = this.distanceToPoint(end);\n            if ((d0 > 0 && d1 > 0) || (d0 < 0 && d1 < 0)) {\n                return null;\n            }\n            // Ray intersection\n            var pn = this.normal.array;\n            var d = this.distance;\n            var ro = start.array;\n            // direction\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].sub(rd, end.array, start.array);\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].normalize(rd, rd);\n\n            var divider = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].dot(pn, rd);\n            // ray is parallel to the plane\n            if (divider === 0) {\n                return null;\n            }\n            if (!out) {\n                out = new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n            }\n            var t = (__WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].dot(pn, ro) - d) / divider;\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, ro, rd, -t);\n            out._dirty = true;\n            return out;\n        };\n    })(),\n\n    /**\n     * Apply an affine transform matrix to plane\n     * @function\n     * @return {clay.Matrix4}\n     */\n    applyTransform: (function() {\n        var inverseTranspose = __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat4__[\"a\" /* default */].create();\n        var normalv4 = __WEBPACK_IMPORTED_MODULE_3__glmatrix_vec4__[\"a\" /* default */].create();\n        var pointv4 = __WEBPACK_IMPORTED_MODULE_3__glmatrix_vec4__[\"a\" /* default */].create();\n        pointv4[3] = 1;\n        return function(m4) {\n            m4 = m4.array;\n            // Transform point on plane\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].scale(pointv4, this.normal.array, this.distance);\n            __WEBPACK_IMPORTED_MODULE_3__glmatrix_vec4__[\"a\" /* default */].transformMat4(pointv4, pointv4, m4);\n            this.distance = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].dot(pointv4, this.normal.array);\n            // Transform plane normal\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat4__[\"a\" /* default */].invert(inverseTranspose, m4);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat4__[\"a\" /* default */].transpose(inverseTranspose, inverseTranspose);\n            normalv4[3] = 0;\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].copy(normalv4, this.normal.array);\n            __WEBPACK_IMPORTED_MODULE_3__glmatrix_vec4__[\"a\" /* default */].transformMat4(normalv4, normalv4, inverseTranspose);\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].copy(this.normal.array, normalv4);\n        };\n    })(),\n\n    /**\n     * Copy from another plane\n     * @param  {clay.Vector3} plane\n     */\n    copy: function(plane) {\n        __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].copy(this.normal.array, plane.normal.array);\n        this.normal._dirty = true;\n        this.distance = plane.distance;\n    },\n\n    /**\n     * Clone a new plane\n     * @return {clay.Plane}\n     */\n    clone: function() {\n        var plane = new Plane();\n        plane.copy(this);\n        return plane;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Plane);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL1BsYW5lLmpzP2YwZjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi9WZWN0b3IzJztcbmltcG9ydCBtYXQ0IGZyb20gJy4uL2dsbWF0cml4L21hdDQnO1xuaW1wb3J0IHZlYzMgZnJvbSAnLi4vZ2xtYXRyaXgvdmVjMyc7XG5pbXBvcnQgdmVjNCBmcm9tICcuLi9nbG1hdHJpeC92ZWM0JztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LlBsYW5lXG4gKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gW25vcm1hbF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZGlzdGFuY2VdXG4gKi9cbnZhciBQbGFuZSA9IGZ1bmN0aW9uKG5vcm1hbCwgZGlzdGFuY2UpIHtcbiAgICAvKipcbiAgICAgKiBOb3JtYWwgb2YgdGhlIHBsYW5lXG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICB0aGlzLm5vcm1hbCA9IG5vcm1hbCB8fCBuZXcgVmVjdG9yMygwLCAxLCAwKTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0YW50IG9mIHRoZSBwbGFuZSBlcXVhdGlvbiwgdXNlZCBhcyBkaXN0YW5jZSB0byB0aGUgb3JpZ2luXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2UgfHwgMDtcbn07XG5cblBsYW5lLnByb3RvdHlwZSA9IHtcblxuICAgIGNvbnN0cnVjdG9yOiBQbGFuZSxcblxuICAgIC8qKlxuICAgICAqIERpc3RhbmNlIGZyb20gYSBnaXZlbiBwb2ludCB0byB0aGUgcGxhbmVcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IHBvaW50XG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGRpc3RhbmNlVG9Qb2ludDogZnVuY3Rpb24ocG9pbnQpIHtcbiAgICAgICAgcmV0dXJuIHZlYzMuZG90KHBvaW50LmFycmF5LCB0aGlzLm5vcm1hbC5hcnJheSkgLSB0aGlzLmRpc3RhbmNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIHByb2plY3Rpb24gcG9pbnQgb24gdGhlIHBsYW5lXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBwb2ludFxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIHByb2plY3RQb2ludDogZnVuY3Rpb24ocG9pbnQsIG91dCkge1xuICAgICAgICBpZiAoIW91dCkge1xuICAgICAgICAgICAgb3V0ID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZCA9IHRoaXMuZGlzdGFuY2VUb1BvaW50KHBvaW50KTtcbiAgICAgICAgdmVjMy5zY2FsZUFuZEFkZChvdXQuYXJyYXksIHBvaW50LmFycmF5LCB0aGlzLm5vcm1hbC5hcnJheSwgLWQpO1xuICAgICAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTm9ybWFsaXplIHRoZSBwbGFuZSdzIG5vcm1hbCBhbmQgY2FsY3VsYXRlIHRoZSBkaXN0YW5jZVxuICAgICAqL1xuICAgIG5vcm1hbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpbnZMZW4gPSAxIC8gdmVjMy5sZW4odGhpcy5ub3JtYWwuYXJyYXkpO1xuICAgICAgICB2ZWMzLnNjYWxlKHRoaXMubm9ybWFsLmFycmF5LCBpbnZMZW4pO1xuICAgICAgICB0aGlzLmRpc3RhbmNlICo9IGludkxlbjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSWYgdGhlIHBsYW5lIGludGVyc2VjdCBhIGZydXN0dW1cbiAgICAgKiBAcGFyYW0gIHtjbGF5LkZydXN0dW19IEZydXN0dW1cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGludGVyc2VjdEZydXN0dW06IGZ1bmN0aW9uKGZydXN0dW0pIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgYWxsIGNvb3JkcyBvZiBmcnVzdHVtIGlzIG9uIHBsYW5lIGFsbCB1bmRlciBwbGFuZVxuICAgICAgICB2YXIgY29vcmRzID0gZnJ1c3R1bS52ZXJ0aWNlcztcbiAgICAgICAgdmFyIG5vcm1hbCA9IHRoaXMubm9ybWFsLmFycmF5O1xuICAgICAgICB2YXIgb25QbGFuZSA9IHZlYzMuZG90KGNvb3Jkc1swXS5hcnJheSwgbm9ybWFsKSA+IHRoaXMuZGlzdGFuY2U7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgODsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoKHZlYzMuZG90KGNvb3Jkc1tpXS5hcnJheSwgbm9ybWFsKSA+IHRoaXMuZGlzdGFuY2UpICE9IG9uUGxhbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIGludGVyc2VjdGlvbiBwb2ludCBiZXR3ZWVuIHBsYW5lIGFuZCBhIGdpdmVuIGxpbmVcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gc3RhcnQgc3RhcnQgcG9pbnQgb2YgbGluZVxuICAgICAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSBlbmQgZW5kIHBvaW50IG9mIGxpbmVcbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gW291dF1cbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgaW50ZXJzZWN0TGluZTogKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmQgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc3RhcnQsIGVuZCwgb3V0KSB7XG4gICAgICAgICAgICB2YXIgZDAgPSB0aGlzLmRpc3RhbmNlVG9Qb2ludChzdGFydCk7XG4gICAgICAgICAgICB2YXIgZDEgPSB0aGlzLmRpc3RhbmNlVG9Qb2ludChlbmQpO1xuICAgICAgICAgICAgaWYgKChkMCA+IDAgJiYgZDEgPiAwKSB8fCAoZDAgPCAwICYmIGQxIDwgMCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJheSBpbnRlcnNlY3Rpb25cbiAgICAgICAgICAgIHZhciBwbiA9IHRoaXMubm9ybWFsLmFycmF5O1xuICAgICAgICAgICAgdmFyIGQgPSB0aGlzLmRpc3RhbmNlO1xuICAgICAgICAgICAgdmFyIHJvID0gc3RhcnQuYXJyYXk7XG4gICAgICAgICAgICAvLyBkaXJlY3Rpb25cbiAgICAgICAgICAgIHZlYzMuc3ViKHJkLCBlbmQuYXJyYXksIHN0YXJ0LmFycmF5KTtcbiAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKHJkLCByZCk7XG5cbiAgICAgICAgICAgIHZhciBkaXZpZGVyID0gdmVjMy5kb3QocG4sIHJkKTtcbiAgICAgICAgICAgIC8vIHJheSBpcyBwYXJhbGxlbCB0byB0aGUgcGxhbmVcbiAgICAgICAgICAgIGlmIChkaXZpZGVyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW91dCkge1xuICAgICAgICAgICAgICAgIG91dCA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdCA9ICh2ZWMzLmRvdChwbiwgcm8pIC0gZCkgLyBkaXZpZGVyO1xuICAgICAgICAgICAgdmVjMy5zY2FsZUFuZEFkZChvdXQuYXJyYXksIHJvLCByZCwgLXQpO1xuICAgICAgICAgICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9O1xuICAgIH0pKCksXG5cbiAgICAvKipcbiAgICAgKiBBcHBseSBhbiBhZmZpbmUgdHJhbnNmb3JtIG1hdHJpeCB0byBwbGFuZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICBhcHBseVRyYW5zZm9ybTogKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaW52ZXJzZVRyYW5zcG9zZSA9IG1hdDQuY3JlYXRlKCk7XG4gICAgICAgIHZhciBub3JtYWx2NCA9IHZlYzQuY3JlYXRlKCk7XG4gICAgICAgIHZhciBwb2ludHY0ID0gdmVjNC5jcmVhdGUoKTtcbiAgICAgICAgcG9pbnR2NFszXSA9IDE7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihtNCkge1xuICAgICAgICAgICAgbTQgPSBtNC5hcnJheTtcbiAgICAgICAgICAgIC8vIFRyYW5zZm9ybSBwb2ludCBvbiBwbGFuZVxuICAgICAgICAgICAgdmVjMy5zY2FsZShwb2ludHY0LCB0aGlzLm5vcm1hbC5hcnJheSwgdGhpcy5kaXN0YW5jZSk7XG4gICAgICAgICAgICB2ZWM0LnRyYW5zZm9ybU1hdDQocG9pbnR2NCwgcG9pbnR2NCwgbTQpO1xuICAgICAgICAgICAgdGhpcy5kaXN0YW5jZSA9IHZlYzMuZG90KHBvaW50djQsIHRoaXMubm9ybWFsLmFycmF5KTtcbiAgICAgICAgICAgIC8vIFRyYW5zZm9ybSBwbGFuZSBub3JtYWxcbiAgICAgICAgICAgIG1hdDQuaW52ZXJ0KGludmVyc2VUcmFuc3Bvc2UsIG00KTtcbiAgICAgICAgICAgIG1hdDQudHJhbnNwb3NlKGludmVyc2VUcmFuc3Bvc2UsIGludmVyc2VUcmFuc3Bvc2UpO1xuICAgICAgICAgICAgbm9ybWFsdjRbM10gPSAwO1xuICAgICAgICAgICAgdmVjMy5jb3B5KG5vcm1hbHY0LCB0aGlzLm5vcm1hbC5hcnJheSk7XG4gICAgICAgICAgICB2ZWM0LnRyYW5zZm9ybU1hdDQobm9ybWFsdjQsIG5vcm1hbHY0LCBpbnZlcnNlVHJhbnNwb3NlKTtcbiAgICAgICAgICAgIHZlYzMuY29weSh0aGlzLm5vcm1hbC5hcnJheSwgbm9ybWFsdjQpO1xuICAgICAgICB9O1xuICAgIH0pKCksXG5cbiAgICAvKipcbiAgICAgKiBDb3B5IGZyb20gYW5vdGhlciBwbGFuZVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gcGxhbmVcbiAgICAgKi9cbiAgICBjb3B5OiBmdW5jdGlvbihwbGFuZSkge1xuICAgICAgICB2ZWMzLmNvcHkodGhpcy5ub3JtYWwuYXJyYXksIHBsYW5lLm5vcm1hbC5hcnJheSk7XG4gICAgICAgIHRoaXMubm9ybWFsLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGlzdGFuY2UgPSBwbGFuZS5kaXN0YW5jZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xvbmUgYSBuZXcgcGxhbmVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlBsYW5lfVxuICAgICAqL1xuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHBsYW5lID0gbmV3IFBsYW5lKCk7XG4gICAgICAgIHBsYW5lLmNvcHkodGhpcyk7XG4gICAgICAgIHJldHVybiBwbGFuZTtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQbGFuZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvbWF0aC9QbGFuZS5qc1xuLy8gbW9kdWxlIGlkID0gNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///53\n");

/***/ }),
/* 54 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Plane__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__core_vendor__ = __webpack_require__(4);\n\n\n\n\n\n\n\nvar planeMatrix = new __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */]();\n\n/**\n * @constructor clay.geometry.Cube\n * @extends clay.Geometry\n * @param {Object} [opt]\n * @param {number} [opt.widthSegments]\n * @param {number} [opt.heightSegments]\n * @param {number} [opt.depthSegments]\n * @param {boolean} [opt.inside]\n */\nvar Cube = __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */].extend(\n/**@lends clay.geometry.Cube# */\n{\n    dynamic: false,\n    /**\n     * @type {number}\n     */\n    widthSegments: 1,\n    /**\n     * @type {number}\n     */\n    heightSegments: 1,\n    /**\n     * @type {number}\n     */\n    depthSegments: 1,\n    /**\n     * @type {boolean}\n     */\n    inside: false\n}, function() {\n    this.build();\n},\n/** @lends clay.geometry.Cube.prototype */\n{\n    /**\n     * Build cube geometry\n     */\n    build: function() {\n\n        var planes = {\n            'px': createPlane('px', this.depthSegments, this.heightSegments),\n            'nx': createPlane('nx', this.depthSegments, this.heightSegments),\n            'py': createPlane('py', this.widthSegments, this.depthSegments),\n            'ny': createPlane('ny', this.widthSegments, this.depthSegments),\n            'pz': createPlane('pz', this.widthSegments, this.heightSegments),\n            'nz': createPlane('nz', this.widthSegments, this.heightSegments),\n        };\n\n        var attrList = ['position', 'texcoord0', 'normal'];\n        var vertexNumber = 0;\n        var faceNumber = 0;\n        for (var pos in planes) {\n            vertexNumber += planes[pos].vertexCount;\n            faceNumber += planes[pos].indices.length;\n        }\n        for (var k = 0; k < attrList.length; k++) {\n            this.attributes[attrList[k]].init(vertexNumber);\n        }\n        this.indices = new __WEBPACK_IMPORTED_MODULE_5__core_vendor__[\"a\" /* default */].Uint16Array(faceNumber);\n        var faceOffset = 0;\n        var vertexOffset = 0;\n        for (var pos in planes) {\n            var plane = planes[pos];\n            for (var k = 0; k < attrList.length; k++) {\n                var attrName = attrList[k];\n                var attrArray = plane.attributes[attrName].value;\n                var attrSize = plane.attributes[attrName].size;\n                var isNormal = attrName === 'normal';\n                for (var i = 0; i < attrArray.length; i++) {\n                    var value = attrArray[i];\n                    if (this.inside && isNormal) {\n                        value = -value;\n                    }\n                    this.attributes[attrName].value[i + attrSize * vertexOffset] = value;\n                }\n            }\n            var len = plane.indices.length;\n            for (var i = 0; i < plane.indices.length; i++) {\n                this.indices[i + faceOffset] = vertexOffset + plane.indices[this.inside ? (len - i - 1) : i];\n            }\n            faceOffset += plane.indices.length;\n            vertexOffset += plane.vertexCount;\n        }\n\n        this.boundingBox = new __WEBPACK_IMPORTED_MODULE_4__math_BoundingBox__[\"a\" /* default */]();\n        this.boundingBox.max.set(1, 1, 1);\n        this.boundingBox.min.set(-1, -1, -1);\n    }\n});\n\nfunction createPlane(pos, widthSegments, heightSegments) {\n\n    planeMatrix.identity();\n\n    var plane = new __WEBPACK_IMPORTED_MODULE_1__Plane__[\"a\" /* default */]({\n        widthSegments: widthSegments,\n        heightSegments: heightSegments\n    });\n\n    switch(pos) {\n        case 'px':\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].translate(planeMatrix, planeMatrix, __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].POSITIVE_X);\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].rotateY(planeMatrix, planeMatrix, Math.PI / 2);\n            break;\n        case 'nx':\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].translate(planeMatrix, planeMatrix, __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].NEGATIVE_X);\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].rotateY(planeMatrix, planeMatrix, -Math.PI / 2);\n            break;\n        case 'py':\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].translate(planeMatrix, planeMatrix, __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].POSITIVE_Y);\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].rotateX(planeMatrix, planeMatrix, -Math.PI / 2);\n            break;\n        case 'ny':\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].translate(planeMatrix, planeMatrix, __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].rotateX(planeMatrix, planeMatrix, Math.PI / 2);\n            break;\n        case 'pz':\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].translate(planeMatrix, planeMatrix, __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].POSITIVE_Z);\n            break;\n        case 'nz':\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].translate(planeMatrix, planeMatrix, __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].NEGATIVE_Z);\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].rotateY(planeMatrix, planeMatrix, Math.PI);\n            break;\n    }\n    plane.applyTransform(planeMatrix);\n    return plane;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Cube);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nZW9tZXRyeS9DdWJlLmpzPzNhNDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEdlb21ldHJ5IGZyb20gJy4uL0dlb21ldHJ5JztcbmltcG9ydCBQbGFuZSBmcm9tICcuL1BsYW5lJztcbmltcG9ydCBNYXRyaXg0IGZyb20gJy4uL21hdGgvTWF0cml4NCc7XG5pbXBvcnQgVmVjdG9yMyBmcm9tICcuLi9tYXRoL1ZlY3RvcjMnO1xuaW1wb3J0IEJvdW5kaW5nQm94IGZyb20gJy4uL21hdGgvQm91bmRpbmdCb3gnO1xuaW1wb3J0IHZlbmRvciBmcm9tICcuLi9jb3JlL3ZlbmRvcic7XG5cbnZhciBwbGFuZU1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuZ2VvbWV0cnkuQ3ViZVxuICogQGV4dGVuZHMgY2xheS5HZW9tZXRyeVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdC53aWR0aFNlZ21lbnRzXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHQuaGVpZ2h0U2VnbWVudHNdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdC5kZXB0aFNlZ21lbnRzXVxuICogQHBhcmFtIHtib29sZWFufSBbb3B0Lmluc2lkZV1cbiAqL1xudmFyIEN1YmUgPSBHZW9tZXRyeS5leHRlbmQoXG4vKipAbGVuZHMgY2xheS5nZW9tZXRyeS5DdWJlIyAqL1xue1xuICAgIGR5bmFtaWM6IGZhbHNlLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgd2lkdGhTZWdtZW50czogMSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGhlaWdodFNlZ21lbnRzOiAxLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZGVwdGhTZWdtZW50czogMSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpbnNpZGU6IGZhbHNlXG59LCBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmJ1aWxkKCk7XG59LFxuLyoqIEBsZW5kcyBjbGF5Lmdlb21ldHJ5LkN1YmUucHJvdG90eXBlICovXG57XG4gICAgLyoqXG4gICAgICogQnVpbGQgY3ViZSBnZW9tZXRyeVxuICAgICAqL1xuICAgIGJ1aWxkOiBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgcGxhbmVzID0ge1xuICAgICAgICAgICAgJ3B4JzogY3JlYXRlUGxhbmUoJ3B4JywgdGhpcy5kZXB0aFNlZ21lbnRzLCB0aGlzLmhlaWdodFNlZ21lbnRzKSxcbiAgICAgICAgICAgICdueCc6IGNyZWF0ZVBsYW5lKCdueCcsIHRoaXMuZGVwdGhTZWdtZW50cywgdGhpcy5oZWlnaHRTZWdtZW50cyksXG4gICAgICAgICAgICAncHknOiBjcmVhdGVQbGFuZSgncHknLCB0aGlzLndpZHRoU2VnbWVudHMsIHRoaXMuZGVwdGhTZWdtZW50cyksXG4gICAgICAgICAgICAnbnknOiBjcmVhdGVQbGFuZSgnbnknLCB0aGlzLndpZHRoU2VnbWVudHMsIHRoaXMuZGVwdGhTZWdtZW50cyksXG4gICAgICAgICAgICAncHonOiBjcmVhdGVQbGFuZSgncHonLCB0aGlzLndpZHRoU2VnbWVudHMsIHRoaXMuaGVpZ2h0U2VnbWVudHMpLFxuICAgICAgICAgICAgJ256JzogY3JlYXRlUGxhbmUoJ256JywgdGhpcy53aWR0aFNlZ21lbnRzLCB0aGlzLmhlaWdodFNlZ21lbnRzKSxcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgYXR0ckxpc3QgPSBbJ3Bvc2l0aW9uJywgJ3RleGNvb3JkMCcsICdub3JtYWwnXTtcbiAgICAgICAgdmFyIHZlcnRleE51bWJlciA9IDA7XG4gICAgICAgIHZhciBmYWNlTnVtYmVyID0gMDtcbiAgICAgICAgZm9yICh2YXIgcG9zIGluIHBsYW5lcykge1xuICAgICAgICAgICAgdmVydGV4TnVtYmVyICs9IHBsYW5lc1twb3NdLnZlcnRleENvdW50O1xuICAgICAgICAgICAgZmFjZU51bWJlciArPSBwbGFuZXNbcG9zXS5pbmRpY2VzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGF0dHJMaXN0Lmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXNbYXR0ckxpc3Rba11dLmluaXQodmVydGV4TnVtYmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluZGljZXMgPSBuZXcgdmVuZG9yLlVpbnQxNkFycmF5KGZhY2VOdW1iZXIpO1xuICAgICAgICB2YXIgZmFjZU9mZnNldCA9IDA7XG4gICAgICAgIHZhciB2ZXJ0ZXhPZmZzZXQgPSAwO1xuICAgICAgICBmb3IgKHZhciBwb3MgaW4gcGxhbmVzKSB7XG4gICAgICAgICAgICB2YXIgcGxhbmUgPSBwbGFuZXNbcG9zXTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXR0ckxpc3QubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYXR0ck5hbWUgPSBhdHRyTGlzdFtrXTtcbiAgICAgICAgICAgICAgICB2YXIgYXR0ckFycmF5ID0gcGxhbmUuYXR0cmlidXRlc1thdHRyTmFtZV0udmFsdWU7XG4gICAgICAgICAgICAgICAgdmFyIGF0dHJTaXplID0gcGxhbmUuYXR0cmlidXRlc1thdHRyTmFtZV0uc2l6ZTtcbiAgICAgICAgICAgICAgICB2YXIgaXNOb3JtYWwgPSBhdHRyTmFtZSA9PT0gJ25vcm1hbCc7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRyQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gYXR0ckFycmF5W2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbnNpZGUgJiYgaXNOb3JtYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gLXZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlc1thdHRyTmFtZV0udmFsdWVbaSArIGF0dHJTaXplICogdmVydGV4T2Zmc2V0XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsZW4gPSBwbGFuZS5pbmRpY2VzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGxhbmUuaW5kaWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNlc1tpICsgZmFjZU9mZnNldF0gPSB2ZXJ0ZXhPZmZzZXQgKyBwbGFuZS5pbmRpY2VzW3RoaXMuaW5zaWRlID8gKGxlbiAtIGkgLSAxKSA6IGldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmFjZU9mZnNldCArPSBwbGFuZS5pbmRpY2VzLmxlbmd0aDtcbiAgICAgICAgICAgIHZlcnRleE9mZnNldCArPSBwbGFuZS52ZXJ0ZXhDb3VudDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveC5tYXguc2V0KDEsIDEsIDEpO1xuICAgICAgICB0aGlzLmJvdW5kaW5nQm94Lm1pbi5zZXQoLTEsIC0xLCAtMSk7XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVBsYW5lKHBvcywgd2lkdGhTZWdtZW50cywgaGVpZ2h0U2VnbWVudHMpIHtcblxuICAgIHBsYW5lTWF0cml4LmlkZW50aXR5KCk7XG5cbiAgICB2YXIgcGxhbmUgPSBuZXcgUGxhbmUoe1xuICAgICAgICB3aWR0aFNlZ21lbnRzOiB3aWR0aFNlZ21lbnRzLFxuICAgICAgICBoZWlnaHRTZWdtZW50czogaGVpZ2h0U2VnbWVudHNcbiAgICB9KTtcblxuICAgIHN3aXRjaChwb3MpIHtcbiAgICAgICAgY2FzZSAncHgnOlxuICAgICAgICAgICAgTWF0cml4NC50cmFuc2xhdGUocGxhbmVNYXRyaXgsIHBsYW5lTWF0cml4LCBWZWN0b3IzLlBPU0lUSVZFX1gpO1xuICAgICAgICAgICAgTWF0cml4NC5yb3RhdGVZKHBsYW5lTWF0cml4LCBwbGFuZU1hdHJpeCwgTWF0aC5QSSAvIDIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ254JzpcbiAgICAgICAgICAgIE1hdHJpeDQudHJhbnNsYXRlKHBsYW5lTWF0cml4LCBwbGFuZU1hdHJpeCwgVmVjdG9yMy5ORUdBVElWRV9YKTtcbiAgICAgICAgICAgIE1hdHJpeDQucm90YXRlWShwbGFuZU1hdHJpeCwgcGxhbmVNYXRyaXgsIC1NYXRoLlBJIC8gMik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncHknOlxuICAgICAgICAgICAgTWF0cml4NC50cmFuc2xhdGUocGxhbmVNYXRyaXgsIHBsYW5lTWF0cml4LCBWZWN0b3IzLlBPU0lUSVZFX1kpO1xuICAgICAgICAgICAgTWF0cml4NC5yb3RhdGVYKHBsYW5lTWF0cml4LCBwbGFuZU1hdHJpeCwgLU1hdGguUEkgLyAyKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdueSc6XG4gICAgICAgICAgICBNYXRyaXg0LnRyYW5zbGF0ZShwbGFuZU1hdHJpeCwgcGxhbmVNYXRyaXgsIFZlY3RvcjMuTkVHQVRJVkVfWSk7XG4gICAgICAgICAgICBNYXRyaXg0LnJvdGF0ZVgocGxhbmVNYXRyaXgsIHBsYW5lTWF0cml4LCBNYXRoLlBJIC8gMik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncHonOlxuICAgICAgICAgICAgTWF0cml4NC50cmFuc2xhdGUocGxhbmVNYXRyaXgsIHBsYW5lTWF0cml4LCBWZWN0b3IzLlBPU0lUSVZFX1opO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ256JzpcbiAgICAgICAgICAgIE1hdHJpeDQudHJhbnNsYXRlKHBsYW5lTWF0cml4LCBwbGFuZU1hdHJpeCwgVmVjdG9yMy5ORUdBVElWRV9aKTtcbiAgICAgICAgICAgIE1hdHJpeDQucm90YXRlWShwbGFuZU1hdHJpeCwgcGxhbmVNYXRyaXgsIE1hdGguUEkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHBsYW5lLmFwcGx5VHJhbnNmb3JtKHBsYW5lTWF0cml4KTtcbiAgICByZXR1cm4gcGxhbmU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEN1YmU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2dlb21ldHJ5L0N1YmUuanNcbi8vIG1vZHVsZSBpZCA9IDU0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///54\n");

/***/ }),
/* 55 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_BoundingBox__ = __webpack_require__(9);\n\n\n\n/**\n * @constructor clay.geometry.Sphere\n * @extends clay.Geometry\n * @param {Object} [opt]\n * @param {number} [widthSegments]\n * @param {number} [heightSegments]\n * @param {number} [phiStart]\n * @param {number} [phiLength]\n * @param {number} [thetaStart]\n * @param {number} [thetaLength]\n * @param {number} [radius]\n */\nvar Sphere = __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */].extend(/** @lends clay.geometry.Sphere# */ {\n    dynamic: false,\n    /**\n     * @type {number}\n     */\n    widthSegments: 40,\n    /**\n     * @type {number}\n     */\n    heightSegments: 20,\n\n    /**\n     * @type {number}\n     */\n    phiStart: 0,\n    /**\n     * @type {number}\n     */\n    phiLength: Math.PI * 2,\n\n    /**\n     * @type {number}\n     */\n    thetaStart: 0,\n    /**\n     * @type {number}\n     */\n    thetaLength: Math.PI,\n\n    /**\n     * @type {number}\n     */\n    radius: 1\n\n}, function() {\n    this.build();\n},\n/** @lends clay.geometry.Sphere.prototype */\n{\n    /**\n     * Build sphere geometry\n     */\n    build: function() {\n        var heightSegments = this.heightSegments;\n        var widthSegments = this.widthSegments;\n\n        var positionAttr = this.attributes.position;\n        var texcoordAttr = this.attributes.texcoord0;\n        var normalAttr = this.attributes.normal;\n\n        var vertexCount = (widthSegments + 1) * (heightSegments + 1);\n        positionAttr.init(vertexCount);\n        texcoordAttr.init(vertexCount);\n        normalAttr.init(vertexCount);\n\n        var IndicesCtor = vertexCount > 0xffff ? Uint32Array : Uint16Array;\n        var indices = this.indices = new IndicesCtor(widthSegments * heightSegments * 6);\n\n        var x, y, z,\n            u, v,\n            i, j;\n\n        var radius = this.radius;\n        var phiStart = this.phiStart;\n        var phiLength = this.phiLength;\n        var thetaStart = this.thetaStart;\n        var thetaLength = this.thetaLength;\n        var radius = this.radius;\n\n        var pos = [];\n        var uv = [];\n        var offset = 0;\n        var divider = 1 / radius;\n        for (j = 0; j <= heightSegments; j ++) {\n            for (i = 0; i <= widthSegments; i ++) {\n                u = i / widthSegments;\n                v = j / heightSegments;\n\n                // X axis is inverted so texture can be mapped from left to right\n                x = -radius * Math.cos(phiStart + u * phiLength) * Math.sin(thetaStart + v * thetaLength);\n                y = radius * Math.cos(thetaStart + v * thetaLength);\n                z = radius * Math.sin(phiStart + u * phiLength) * Math.sin(thetaStart + v * thetaLength);\n\n                pos[0] = x; pos[1] = y; pos[2] = z;\n                uv[0] = u; uv[1] = v;\n                positionAttr.set(offset, pos);\n                texcoordAttr.set(offset, uv);\n                pos[0] *= divider;\n                pos[1] *= divider;\n                pos[2] *= divider;\n                normalAttr.set(offset, pos);\n                offset++;\n            }\n        }\n\n        var i1, i2, i3, i4;\n\n        var len = widthSegments + 1;\n\n        var n = 0;\n        for (j = 0; j < heightSegments; j ++) {\n            for (i = 0; i < widthSegments; i ++) {\n                i2 = j * len + i;\n                i1 = (j * len + i + 1);\n                i4 = (j + 1) * len + i + 1;\n                i3 = (j + 1) * len + i;\n\n                indices[n++] = i1;\n                indices[n++] = i2;\n                indices[n++] = i4;\n\n                indices[n++] = i2;\n                indices[n++] = i3;\n                indices[n++] = i4;\n            }\n        }\n\n        this.boundingBox = new __WEBPACK_IMPORTED_MODULE_1__math_BoundingBox__[\"a\" /* default */]();\n        this.boundingBox.max.set(radius, radius, radius);\n        this.boundingBox.min.set(-radius, -radius, -radius);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Sphere);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nZW9tZXRyeS9TcGhlcmUuanM/ZGJmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi4vR2VvbWV0cnknO1xuaW1wb3J0IEJvdW5kaW5nQm94IGZyb20gJy4uL21hdGgvQm91bmRpbmdCb3gnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5Lmdlb21ldHJ5LlNwaGVyZVxuICogQGV4dGVuZHMgY2xheS5HZW9tZXRyeVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRdXG4gKiBAcGFyYW0ge251bWJlcn0gW3dpZHRoU2VnbWVudHNdXG4gKiBAcGFyYW0ge251bWJlcn0gW2hlaWdodFNlZ21lbnRzXVxuICogQHBhcmFtIHtudW1iZXJ9IFtwaGlTdGFydF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbcGhpTGVuZ3RoXVxuICogQHBhcmFtIHtudW1iZXJ9IFt0aGV0YVN0YXJ0XVxuICogQHBhcmFtIHtudW1iZXJ9IFt0aGV0YUxlbmd0aF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbcmFkaXVzXVxuICovXG52YXIgU3BoZXJlID0gR2VvbWV0cnkuZXh0ZW5kKC8qKiBAbGVuZHMgY2xheS5nZW9tZXRyeS5TcGhlcmUjICovIHtcbiAgICBkeW5hbWljOiBmYWxzZSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHdpZHRoU2VnbWVudHM6IDQwLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgaGVpZ2h0U2VnbWVudHM6IDIwLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBwaGlTdGFydDogMCxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHBoaUxlbmd0aDogTWF0aC5QSSAqIDIsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoZXRhU3RhcnQ6IDAsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGV0YUxlbmd0aDogTWF0aC5QSSxcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgcmFkaXVzOiAxXG5cbn0sIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuYnVpbGQoKTtcbn0sXG4vKiogQGxlbmRzIGNsYXkuZ2VvbWV0cnkuU3BoZXJlLnByb3RvdHlwZSAqL1xue1xuICAgIC8qKlxuICAgICAqIEJ1aWxkIHNwaGVyZSBnZW9tZXRyeVxuICAgICAqL1xuICAgIGJ1aWxkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGhlaWdodFNlZ21lbnRzID0gdGhpcy5oZWlnaHRTZWdtZW50cztcbiAgICAgICAgdmFyIHdpZHRoU2VnbWVudHMgPSB0aGlzLndpZHRoU2VnbWVudHM7XG5cbiAgICAgICAgdmFyIHBvc2l0aW9uQXR0ciA9IHRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbjtcbiAgICAgICAgdmFyIHRleGNvb3JkQXR0ciA9IHRoaXMuYXR0cmlidXRlcy50ZXhjb29yZDA7XG4gICAgICAgIHZhciBub3JtYWxBdHRyID0gdGhpcy5hdHRyaWJ1dGVzLm5vcm1hbDtcblxuICAgICAgICB2YXIgdmVydGV4Q291bnQgPSAod2lkdGhTZWdtZW50cyArIDEpICogKGhlaWdodFNlZ21lbnRzICsgMSk7XG4gICAgICAgIHBvc2l0aW9uQXR0ci5pbml0KHZlcnRleENvdW50KTtcbiAgICAgICAgdGV4Y29vcmRBdHRyLmluaXQodmVydGV4Q291bnQpO1xuICAgICAgICBub3JtYWxBdHRyLmluaXQodmVydGV4Q291bnQpO1xuXG4gICAgICAgIHZhciBJbmRpY2VzQ3RvciA9IHZlcnRleENvdW50ID4gMHhmZmZmID8gVWludDMyQXJyYXkgOiBVaW50MTZBcnJheTtcbiAgICAgICAgdmFyIGluZGljZXMgPSB0aGlzLmluZGljZXMgPSBuZXcgSW5kaWNlc0N0b3Iod2lkdGhTZWdtZW50cyAqIGhlaWdodFNlZ21lbnRzICogNik7XG5cbiAgICAgICAgdmFyIHgsIHksIHosXG4gICAgICAgICAgICB1LCB2LFxuICAgICAgICAgICAgaSwgajtcblxuICAgICAgICB2YXIgcmFkaXVzID0gdGhpcy5yYWRpdXM7XG4gICAgICAgIHZhciBwaGlTdGFydCA9IHRoaXMucGhpU3RhcnQ7XG4gICAgICAgIHZhciBwaGlMZW5ndGggPSB0aGlzLnBoaUxlbmd0aDtcbiAgICAgICAgdmFyIHRoZXRhU3RhcnQgPSB0aGlzLnRoZXRhU3RhcnQ7XG4gICAgICAgIHZhciB0aGV0YUxlbmd0aCA9IHRoaXMudGhldGFMZW5ndGg7XG4gICAgICAgIHZhciByYWRpdXMgPSB0aGlzLnJhZGl1cztcblxuICAgICAgICB2YXIgcG9zID0gW107XG4gICAgICAgIHZhciB1diA9IFtdO1xuICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgICAgdmFyIGRpdmlkZXIgPSAxIC8gcmFkaXVzO1xuICAgICAgICBmb3IgKGogPSAwOyBqIDw9IGhlaWdodFNlZ21lbnRzOyBqICsrKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDw9IHdpZHRoU2VnbWVudHM7IGkgKyspIHtcbiAgICAgICAgICAgICAgICB1ID0gaSAvIHdpZHRoU2VnbWVudHM7XG4gICAgICAgICAgICAgICAgdiA9IGogLyBoZWlnaHRTZWdtZW50cztcblxuICAgICAgICAgICAgICAgIC8vIFggYXhpcyBpcyBpbnZlcnRlZCBzbyB0ZXh0dXJlIGNhbiBiZSBtYXBwZWQgZnJvbSBsZWZ0IHRvIHJpZ2h0XG4gICAgICAgICAgICAgICAgeCA9IC1yYWRpdXMgKiBNYXRoLmNvcyhwaGlTdGFydCArIHUgKiBwaGlMZW5ndGgpICogTWF0aC5zaW4odGhldGFTdGFydCArIHYgKiB0aGV0YUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgeSA9IHJhZGl1cyAqIE1hdGguY29zKHRoZXRhU3RhcnQgKyB2ICogdGhldGFMZW5ndGgpO1xuICAgICAgICAgICAgICAgIHogPSByYWRpdXMgKiBNYXRoLnNpbihwaGlTdGFydCArIHUgKiBwaGlMZW5ndGgpICogTWF0aC5zaW4odGhldGFTdGFydCArIHYgKiB0aGV0YUxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICBwb3NbMF0gPSB4OyBwb3NbMV0gPSB5OyBwb3NbMl0gPSB6O1xuICAgICAgICAgICAgICAgIHV2WzBdID0gdTsgdXZbMV0gPSB2O1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uQXR0ci5zZXQob2Zmc2V0LCBwb3MpO1xuICAgICAgICAgICAgICAgIHRleGNvb3JkQXR0ci5zZXQob2Zmc2V0LCB1dik7XG4gICAgICAgICAgICAgICAgcG9zWzBdICo9IGRpdmlkZXI7XG4gICAgICAgICAgICAgICAgcG9zWzFdICo9IGRpdmlkZXI7XG4gICAgICAgICAgICAgICAgcG9zWzJdICo9IGRpdmlkZXI7XG4gICAgICAgICAgICAgICAgbm9ybWFsQXR0ci5zZXQob2Zmc2V0LCBwb3MpO1xuICAgICAgICAgICAgICAgIG9mZnNldCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGkxLCBpMiwgaTMsIGk0O1xuXG4gICAgICAgIHZhciBsZW4gPSB3aWR0aFNlZ21lbnRzICsgMTtcblxuICAgICAgICB2YXIgbiA9IDA7XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBoZWlnaHRTZWdtZW50czsgaiArKykge1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHdpZHRoU2VnbWVudHM7IGkgKyspIHtcbiAgICAgICAgICAgICAgICBpMiA9IGogKiBsZW4gKyBpO1xuICAgICAgICAgICAgICAgIGkxID0gKGogKiBsZW4gKyBpICsgMSk7XG4gICAgICAgICAgICAgICAgaTQgPSAoaiArIDEpICogbGVuICsgaSArIDE7XG4gICAgICAgICAgICAgICAgaTMgPSAoaiArIDEpICogbGVuICsgaTtcblxuICAgICAgICAgICAgICAgIGluZGljZXNbbisrXSA9IGkxO1xuICAgICAgICAgICAgICAgIGluZGljZXNbbisrXSA9IGkyO1xuICAgICAgICAgICAgICAgIGluZGljZXNbbisrXSA9IGk0O1xuXG4gICAgICAgICAgICAgICAgaW5kaWNlc1tuKytdID0gaTI7XG4gICAgICAgICAgICAgICAgaW5kaWNlc1tuKytdID0gaTM7XG4gICAgICAgICAgICAgICAgaW5kaWNlc1tuKytdID0gaTQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3gubWF4LnNldChyYWRpdXMsIHJhZGl1cywgcmFkaXVzKTtcbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveC5taW4uc2V0KC1yYWRpdXMsIC1yYWRpdXMsIC1yYWRpdXMpO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBTcGhlcmU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2dlb21ldHJ5L1NwaGVyZS5qc1xuLy8gbW9kdWxlIGlkID0gNTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///55\n");

/***/ }),
/* 56 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("var mathUtil = {};\n\nmathUtil.isPowerOfTwo = function (value) {\n    return (value & (value - 1)) === 0;\n};\n\nmathUtil.nextPowerOfTwo = function (value) {\n    value --;\n    value |= value >> 1;\n    value |= value >> 2;\n    value |= value >> 4;\n    value |= value >> 8;\n    value |= value >> 16;\n    value ++;\n\n    return value;\n};\n\nmathUtil.nearestPowerOfTwo = function (value) {\n    return Math.pow( 2, Math.round( Math.log( value ) / Math.LN2 ) );\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (mathUtil);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL3V0aWwuanM/NDg4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbWF0aFV0aWwgPSB7fTtcblxubWF0aFV0aWwuaXNQb3dlck9mVHdvID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSAmICh2YWx1ZSAtIDEpKSA9PT0gMDtcbn07XG5cbm1hdGhVdGlsLm5leHRQb3dlck9mVHdvID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFsdWUgLS07XG4gICAgdmFsdWUgfD0gdmFsdWUgPj4gMTtcbiAgICB2YWx1ZSB8PSB2YWx1ZSA+PiAyO1xuICAgIHZhbHVlIHw9IHZhbHVlID4+IDQ7XG4gICAgdmFsdWUgfD0gdmFsdWUgPj4gODtcbiAgICB2YWx1ZSB8PSB2YWx1ZSA+PiAxNjtcbiAgICB2YWx1ZSArKztcblxuICAgIHJldHVybiB2YWx1ZTtcbn07XG5cbm1hdGhVdGlsLm5lYXJlc3RQb3dlck9mVHdvID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIE1hdGgucG93KCAyLCBNYXRoLnJvdW5kKCBNYXRoLmxvZyggdmFsdWUgKSAvIE1hdGguTE4yICkgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IG1hdGhVdGlsO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL3V0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDU2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///56\n");

/***/ }),
/* 57 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Shader__ = __webpack_require__(6);\n\n\nvar _library = {};\n\nfunction ShaderLibrary () {\n    this._pool = {};\n}\n\nShaderLibrary.prototype.get = function(name) {\n    var key = name;\n\n    if (this._pool[key]) {\n        return this._pool[key];\n    }\n    else {\n        var source = _library[name];\n        if (!source) {\n            console.error('Shader \"' + name + '\"' + ' is not in the library');\n            return;\n        }\n        var shader = new __WEBPACK_IMPORTED_MODULE_0__Shader__[\"a\" /* default */](source.vertex, source.fragment);\n        this._pool[key] = shader;\n        return shader;\n    }\n};\n\nShaderLibrary.prototype.clear = function() {\n    this._pool = {};\n};\n\nfunction template(name, vertex, fragment) {\n    _library[name] = {\n        vertex: vertex,\n        fragment: fragment\n    };\n}\n\nvar defaultLibrary = new ShaderLibrary();\n\n/**\n * ### Builin shaders\n * + clay.standard\n * + clay.basic\n * + clay.lambert\n * + clay.wireframe\n *\n * @namespace clay.shader.library\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    /**\n     * Create a new shader library.\n     */\n    createLibrary: function () {\n        return new ShaderLibrary();\n    },\n    /**\n     * Get shader from default library.\n     * @param {string} name\n     * @return {clay.Shader}\n     * @memberOf clay.shader.library\n     * @example\n     *     clay.shader.library.get('clay.standard')\n     */\n    get: function () {\n        return defaultLibrary.get.apply(defaultLibrary, arguments);\n    },\n    /**\n     * @memberOf clay.shader.library\n     * @param  {string} name\n     * @param  {string} vertex - Vertex shader code\n     * @param  {string} fragment - Fragment shader code\n     */\n    template: template,\n    clear: function () {\n        return defaultLibrary.clear();\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvbGlicmFyeS5qcz9lZDI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTaGFkZXIgZnJvbSAnLi4vU2hhZGVyJztcblxudmFyIF9saWJyYXJ5ID0ge307XG5cbmZ1bmN0aW9uIFNoYWRlckxpYnJhcnkgKCkge1xuICAgIHRoaXMuX3Bvb2wgPSB7fTtcbn1cblxuU2hhZGVyTGlicmFyeS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBrZXkgPSBuYW1lO1xuXG4gICAgaWYgKHRoaXMuX3Bvb2xba2V5XSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9vbFtrZXldO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IF9saWJyYXJ5W25hbWVdO1xuICAgICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignU2hhZGVyIFwiJyArIG5hbWUgKyAnXCInICsgJyBpcyBub3QgaW4gdGhlIGxpYnJhcnknKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2hhZGVyID0gbmV3IFNoYWRlcihzb3VyY2UudmVydGV4LCBzb3VyY2UuZnJhZ21lbnQpO1xuICAgICAgICB0aGlzLl9wb29sW2tleV0gPSBzaGFkZXI7XG4gICAgICAgIHJldHVybiBzaGFkZXI7XG4gICAgfVxufTtcblxuU2hhZGVyTGlicmFyeS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9wb29sID0ge307XG59O1xuXG5mdW5jdGlvbiB0ZW1wbGF0ZShuYW1lLCB2ZXJ0ZXgsIGZyYWdtZW50KSB7XG4gICAgX2xpYnJhcnlbbmFtZV0gPSB7XG4gICAgICAgIHZlcnRleDogdmVydGV4LFxuICAgICAgICBmcmFnbWVudDogZnJhZ21lbnRcbiAgICB9O1xufVxuXG52YXIgZGVmYXVsdExpYnJhcnkgPSBuZXcgU2hhZGVyTGlicmFyeSgpO1xuXG4vKipcbiAqICMjIyBCdWlsaW4gc2hhZGVyc1xuICogKyBjbGF5LnN0YW5kYXJkXG4gKiArIGNsYXkuYmFzaWNcbiAqICsgY2xheS5sYW1iZXJ0XG4gKiArIGNsYXkud2lyZWZyYW1lXG4gKlxuICogQG5hbWVzcGFjZSBjbGF5LnNoYWRlci5saWJyYXJ5XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgc2hhZGVyIGxpYnJhcnkuXG4gICAgICovXG4gICAgY3JlYXRlTGlicmFyeTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFNoYWRlckxpYnJhcnkoKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEdldCBzaGFkZXIgZnJvbSBkZWZhdWx0IGxpYnJhcnkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlNoYWRlcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5zaGFkZXIubGlicmFyeVxuICAgICAqIEBleGFtcGxlXG4gICAgICogICAgIGNsYXkuc2hhZGVyLmxpYnJhcnkuZ2V0KCdjbGF5LnN0YW5kYXJkJylcbiAgICAgKi9cbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRMaWJyYXJ5LmdldC5hcHBseShkZWZhdWx0TGlicmFyeSwgYXJndW1lbnRzKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBtZW1iZXJPZiBjbGF5LnNoYWRlci5saWJyYXJ5XG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSB2ZXJ0ZXggLSBWZXJ0ZXggc2hhZGVyIGNvZGVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGZyYWdtZW50IC0gRnJhZ21lbnQgc2hhZGVyIGNvZGVcbiAgICAgKi9cbiAgICB0ZW1wbGF0ZTogdGVtcGxhdGUsXG4gICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRMaWJyYXJ5LmNsZWFyKCk7XG4gICAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL2xpYnJhcnkuanNcbi8vIG1vZHVsZSBpZCA9IDU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///57\n");

/***/ }),
/* 58 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n\n\n/**\n * @constructor clay.Joint\n * @extends clay.core.Base\n */\nvar Joint = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(\n/** @lends clay.Joint# */\n{\n    // https://github.com/KhronosGroup/glTF/issues/193#issuecomment-29216576\n    /**\n     * Joint name\n     * @type {string}\n     */\n    name: '',\n    /**\n     * Index of joint in the skeleton\n     * @type {number}\n     */\n    index: -1,\n\n    /**\n     * Scene node attached to\n     * @type {clay.Node}\n     */\n    node: null\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Joint);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9Kb2ludC5qcz80MTQwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4vY29yZS9CYXNlJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5Kb2ludFxuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqL1xudmFyIEpvaW50ID0gQmFzZS5leHRlbmQoXG4vKiogQGxlbmRzIGNsYXkuSm9pbnQjICovXG57XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2lzc3Vlcy8xOTMjaXNzdWVjb21tZW50LTI5MjE2NTc2XG4gICAgLyoqXG4gICAgICogSm9pbnQgbmFtZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgbmFtZTogJycsXG4gICAgLyoqXG4gICAgICogSW5kZXggb2Ygam9pbnQgaW4gdGhlIHNrZWxldG9uXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBpbmRleDogLTEsXG5cbiAgICAvKipcbiAgICAgKiBTY2VuZSBub2RlIGF0dGFjaGVkIHRvXG4gICAgICogQHR5cGUge2NsYXkuTm9kZX1cbiAgICAgKi9cbiAgICBub2RlOiBudWxsXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgSm9pbnQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL0pvaW50LmpzXG4vLyBtb2R1bGUgaWQgPSA1OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///58\n");

/***/ }),
/* 59 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TextureCube__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__prePass_EnvironmentMap__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__plugin_Skydome__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Scene__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__dds__ = __webpack_require__(95);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__hdr__ = __webpack_require__(96);\n\n\n\n\n\n\n\n\n\n\n/**\n * @alias clay.util.texture\n */\nvar textureUtil = {\n    /**\n     * @param  {string|object} path\n     * @param  {object} [option]\n     * @param  {Function} [onsuccess]\n     * @param  {Function} [onerror]\n     * @return {clay.Texture}\n     */\n    loadTexture: function (path, option, onsuccess, onerror) {\n        var texture;\n        if (typeof(option) === 'function') {\n            onsuccess = option;\n            onerror = onsuccess;\n            option = {};\n        }\n        else {\n            option = option || {};\n        }\n        if (typeof(path) === 'string') {\n            if (path.match(/.hdr$/) || option.fileType === 'hdr') {\n                texture = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]({\n                    width: 0,\n                    height: 0,\n                    sRGB: false\n                });\n                textureUtil._fetchTexture(\n                    path,\n                    function (data) {\n                        __WEBPACK_IMPORTED_MODULE_7__hdr__[\"a\" /* default */].parseRGBE(data, texture, option.exposure);\n                        texture.dirty();\n                        onsuccess && onsuccess(texture);\n                    },\n                    onerror\n                );\n                return texture;\n            }\n            else if (path.match(/.dds$/) || option.fileType === 'dds') {\n                texture = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]({\n                    width: 0,\n                    height: 0\n                });\n                textureUtil._fetchTexture(\n                    path,\n                    function (data) {\n                        __WEBPACK_IMPORTED_MODULE_6__dds__[\"a\" /* default */].parse(data, texture);\n                        texture.dirty();\n                        onsuccess && onsuccess(texture);\n                    },\n                    onerror\n                );\n            }\n            else {\n                texture = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]();\n                texture.load(path);\n                texture.success(onsuccess);\n                texture.error(onerror);\n            }\n        }\n        else if (typeof path === 'object' && typeof(path.px) !== 'undefined') {\n            texture = new __WEBPACK_IMPORTED_MODULE_1__TextureCube__[\"a\" /* default */]();\n            texture.load(path);\n            texture.success(onsuccess);\n            texture.error(onerror);\n        }\n        return texture;\n    },\n\n    /**\n     * Load a panorama texture and render it to a cube map\n     * @param  {clay.Renderer} renderer\n     * @param  {string} path\n     * @param  {clay.TextureCube} cubeMap\n     * @param  {object} [option]\n     * @param  {boolean} [option.encodeRGBM]\n     * @param  {number} [option.exposure]\n     * @param  {Function} [onsuccess]\n     * @param  {Function} [onerror]\n     */\n    loadPanorama: function (renderer, path, cubeMap, option, onsuccess, onerror) {\n        var self = this;\n\n        if (typeof(option) === 'function') {\n            onsuccess = option;\n            onerror = onsuccess;\n            option = {};\n        }\n        else {\n            option = option || {};\n        }\n\n        textureUtil.loadTexture(path, option, function (texture) {\n            // PENDING\n            texture.flipY = option.flipY || false;\n            self.panoramaToCubeMap(renderer, texture, cubeMap, option);\n            texture.dispose(renderer);\n            onsuccess && onsuccess(cubeMap);\n        }, onerror);\n    },\n\n    /**\n     * Render a panorama texture to a cube map\n     * @param  {clay.Renderer} renderer\n     * @param  {clay.Texture2D} panoramaMap\n     * @param  {clay.TextureCube} cubeMap\n     * @param  {Object} option\n     * @param  {boolean} [option.encodeRGBM]\n     */\n    panoramaToCubeMap: function (renderer, panoramaMap, cubeMap, option) {\n        var environmentMapPass = new __WEBPACK_IMPORTED_MODULE_3__prePass_EnvironmentMap__[\"a\" /* default */]();\n        var skydome = new __WEBPACK_IMPORTED_MODULE_4__plugin_Skydome__[\"a\" /* default */]({\n            scene: new __WEBPACK_IMPORTED_MODULE_5__Scene__[\"a\" /* default */]()\n        });\n        skydome.setEnvironmentMap(panoramaMap);\n\n        option = option || {};\n        if (option.encodeRGBM) {\n            skydome.material.define('fragment', 'RGBM_ENCODE');\n        }\n\n        // Share sRGB\n        cubeMap.sRGB = panoramaMap.sRGB;\n\n        environmentMapPass.texture = cubeMap;\n        environmentMapPass.render(renderer, skydome.scene);\n        environmentMapPass.texture = null;\n        environmentMapPass.dispose(renderer);\n        return cubeMap;\n    },\n\n    /**\n     * Convert height map to normal map\n     * @param {HTMLImageElement|HTMLCanvasElement} image\n     * @param {boolean} [checkBump=false]\n     * @return {HTMLCanvasElement}\n     */\n    heightToNormal: function (image, checkBump) {\n        var canvas = document.createElement('canvas');\n        var width = canvas.width = image.width;\n        var height = canvas.height = image.height;\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(image, 0, 0, width, height);\n        checkBump = checkBump || false;\n        var srcData = ctx.getImageData(0, 0, width, height);\n        var dstData = ctx.createImageData(width, height);\n        for (var i = 0; i < srcData.data.length; i += 4) {\n            if (checkBump) {\n                var r = srcData.data[i];\n                var g = srcData.data[i + 1];\n                var b = srcData.data[i + 2];\n                var diff = Math.abs(r - g) + Math.abs(g - b);\n                if (diff > 20) {\n                    console.warn('Given image is not a height map');\n                    return image;\n                }\n            }\n            // Modified from http://mrdoob.com/lab/javascript/height2normal/\n            var x1, y1, x2, y2;\n            if (i % (width * 4) === 0) {\n                // left edge\n                x1 = srcData.data[i];\n                x2 = srcData.data[i + 4];\n            }\n            else if (i % (width * 4) === (width - 1) * 4) {\n                // right edge\n                x1 = srcData.data[i - 4];\n                x2 = srcData.data[i];\n            }\n            else {\n                x1 = srcData.data[i - 4];\n                x2 = srcData.data[i + 4];\n            }\n\n            if (i < width * 4) {\n                // top edge\n                y1 = srcData.data[i];\n                y2 = srcData.data[i + width * 4];\n            }\n            else if (i > width * (height - 1) * 4) {\n                // bottom edge\n                y1 = srcData.data[i - width * 4];\n                y2 = srcData.data[i];\n            }\n            else {\n                y1 = srcData.data[i - width * 4];\n                y2 = srcData.data[i + width * 4];\n            }\n\n            dstData.data[i] = (x1 - x2) + 127;\n            dstData.data[i + 1] = (y1 - y2) + 127;\n            dstData.data[i + 2] = 255;\n            dstData.data[i + 3] = 255;\n        }\n        ctx.putImageData(dstData, 0, 0);\n        return canvas;\n    },\n\n    /**\n     * Convert height map to normal map\n     * @param {HTMLImageElement|HTMLCanvasElement} image\n     * @param {boolean} [checkBump=false]\n     * @param {number} [threshold=20]\n     * @return {HTMLCanvasElement}\n     */\n    isHeightImage: function (img, downScaleSize, threshold) {\n        if (!img || !img.width || !img.height) {\n            return false;\n        }\n\n        var canvas = document.createElement('canvas');\n        var ctx = canvas.getContext('2d');\n        var size = downScaleSize || 32;\n        threshold = threshold || 20;\n        canvas.width = canvas.height = size;\n        ctx.drawImage(img, 0, 0, size, size);\n        var srcData = ctx.getImageData(0, 0, size, size);\n        for (var i = 0; i < srcData.data.length; i += 4) {\n            var r = srcData.data[i];\n            var g = srcData.data[i + 1];\n            var b = srcData.data[i + 2];\n            var diff = Math.abs(r - g) + Math.abs(g - b);\n            if (diff > threshold) {\n                return false;\n            }\n        }\n        return true;\n    },\n\n    _fetchTexture: function (path, onsuccess, onerror) {\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].request.get({\n            url: path,\n            responseType: 'arraybuffer',\n            onload: onsuccess,\n            onerror: onerror\n        });\n    },\n\n    /**\n     * Create a chessboard texture\n     * @param  {number} [size]\n     * @param  {number} [unitSize]\n     * @param  {string} [color1]\n     * @param  {string} [color2]\n     * @return {clay.Texture2D}\n     */\n    createChessboard: function (size, unitSize, color1, color2) {\n        size = size || 512;\n        unitSize = unitSize || 64;\n        color1 = color1 || 'black';\n        color2 = color2 || 'white';\n\n        var repeat = Math.ceil(size / unitSize);\n\n        var canvas = document.createElement('canvas');\n        canvas.width = size;\n        canvas.height = size;\n        var ctx = canvas.getContext('2d');\n        ctx.fillStyle = color2;\n        ctx.fillRect(0, 0, size, size);\n\n        ctx.fillStyle = color1;\n        for (var i = 0; i < repeat; i++) {\n            for (var j = 0; j < repeat; j++) {\n                var isFill = j % 2 ? (i % 2) : (i % 2 - 1);\n                if (isFill) {\n                    ctx.fillRect(i * unitSize, j * unitSize, unitSize, unitSize);\n                }\n            }\n        }\n\n        var texture = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]({\n            image: canvas,\n            anisotropic: 8\n        });\n\n        return texture;\n    },\n\n    /**\n     * Create a blank pure color 1x1 texture\n     * @param  {string} color\n     * @return {clay.Texture2D}\n     */\n    createBlank: function (color) {\n        var canvas = document.createElement('canvas');\n        canvas.width = 1;\n        canvas.height = 1;\n        var ctx = canvas.getContext('2d');\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, 1, 1);\n\n        var texture = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]({\n            image: canvas\n        });\n\n        return texture;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (textureUtil);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy91dGlsL3RleHR1cmUuanM/ZjBhYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVGV4dHVyZTJEIGZyb20gJy4uL1RleHR1cmUyRCc7XG5pbXBvcnQgVGV4dHVyZUN1YmUgZnJvbSAnLi4vVGV4dHVyZUN1YmUnO1xuaW1wb3J0IHZlbmRvciBmcm9tICcuLi9jb3JlL3ZlbmRvcic7XG5pbXBvcnQgRW52aXJvbm1lbnRNYXBQYXNzIGZyb20gJy4uL3ByZVBhc3MvRW52aXJvbm1lbnRNYXAnO1xuaW1wb3J0IFNreWRvbWUgZnJvbSAnLi4vcGx1Z2luL1NreWRvbWUnO1xuaW1wb3J0IFNjZW5lIGZyb20gJy4uL1NjZW5lJztcblxuaW1wb3J0IGRkcyBmcm9tICcuL2Rkcyc7XG5pbXBvcnQgaGRyIGZyb20gJy4vaGRyJztcblxuLyoqXG4gKiBAYWxpYXMgY2xheS51dGlsLnRleHR1cmVcbiAqL1xudmFyIHRleHR1cmVVdGlsID0ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ3xvYmplY3R9IHBhdGhcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IFtvcHRpb25dXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IFtvbnN1Y2Nlc3NdXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IFtvbmVycm9yXVxuICAgICAqIEByZXR1cm4ge2NsYXkuVGV4dHVyZX1cbiAgICAgKi9cbiAgICBsb2FkVGV4dHVyZTogZnVuY3Rpb24gKHBhdGgsIG9wdGlvbiwgb25zdWNjZXNzLCBvbmVycm9yKSB7XG4gICAgICAgIHZhciB0ZXh0dXJlO1xuICAgICAgICBpZiAodHlwZW9mKG9wdGlvbikgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uc3VjY2VzcyA9IG9wdGlvbjtcbiAgICAgICAgICAgIG9uZXJyb3IgPSBvbnN1Y2Nlc3M7XG4gICAgICAgICAgICBvcHRpb24gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbiA9IG9wdGlvbiB8fCB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mKHBhdGgpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKHBhdGgubWF0Y2goLy5oZHIkLykgfHwgb3B0aW9uLmZpbGVUeXBlID09PSAnaGRyJykge1xuICAgICAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgICAgICAgICAgICAgc1JHQjogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlVXRpbC5fZmV0Y2hUZXh0dXJlKFxuICAgICAgICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGRyLnBhcnNlUkdCRShkYXRhLCB0ZXh0dXJlLCBvcHRpb24uZXhwb3N1cmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb25zdWNjZXNzICYmIG9uc3VjY2Vzcyh0ZXh0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25lcnJvclxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXRoLm1hdGNoKC8uZGRzJC8pIHx8IG9wdGlvbi5maWxlVHlwZSA9PT0gJ2RkcycpIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlID0gbmV3IFRleHR1cmUyRCh7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlVXRpbC5fZmV0Y2hUZXh0dXJlKFxuICAgICAgICAgICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGRzLnBhcnNlKGRhdGEsIHRleHR1cmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb25zdWNjZXNzICYmIG9uc3VjY2Vzcyh0ZXh0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb25lcnJvclxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlID0gbmV3IFRleHR1cmUyRCgpO1xuICAgICAgICAgICAgICAgIHRleHR1cmUubG9hZChwYXRoKTtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLnN1Y2Nlc3Mob25zdWNjZXNzKTtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLmVycm9yKG9uZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwYXRoID09PSAnb2JqZWN0JyAmJiB0eXBlb2YocGF0aC5weCkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0ZXh0dXJlID0gbmV3IFRleHR1cmVDdWJlKCk7XG4gICAgICAgICAgICB0ZXh0dXJlLmxvYWQocGF0aCk7XG4gICAgICAgICAgICB0ZXh0dXJlLnN1Y2Nlc3Mob25zdWNjZXNzKTtcbiAgICAgICAgICAgIHRleHR1cmUuZXJyb3Iob25lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExvYWQgYSBwYW5vcmFtYSB0ZXh0dXJlIGFuZCByZW5kZXIgaXQgdG8gYSBjdWJlIG1hcFxuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBwYXRoXG4gICAgICogQHBhcmFtICB7Y2xheS5UZXh0dXJlQ3ViZX0gY3ViZU1hcFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gW29wdGlvbl1cbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBbb3B0aW9uLmVuY29kZVJHQk1dXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBbb3B0aW9uLmV4cG9zdXJlXVxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBbb25zdWNjZXNzXVxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBbb25lcnJvcl1cbiAgICAgKi9cbiAgICBsb2FkUGFub3JhbWE6IGZ1bmN0aW9uIChyZW5kZXJlciwgcGF0aCwgY3ViZU1hcCwgb3B0aW9uLCBvbnN1Y2Nlc3MsIG9uZXJyb3IpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGlmICh0eXBlb2Yob3B0aW9uKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25zdWNjZXNzID0gb3B0aW9uO1xuICAgICAgICAgICAgb25lcnJvciA9IG9uc3VjY2VzcztcbiAgICAgICAgICAgIG9wdGlvbiA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9uID0gb3B0aW9uIHx8IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZVV0aWwubG9hZFRleHR1cmUocGF0aCwgb3B0aW9uLCBmdW5jdGlvbiAodGV4dHVyZSkge1xuICAgICAgICAgICAgLy8gUEVORElOR1xuICAgICAgICAgICAgdGV4dHVyZS5mbGlwWSA9IG9wdGlvbi5mbGlwWSB8fCBmYWxzZTtcbiAgICAgICAgICAgIHNlbGYucGFub3JhbWFUb0N1YmVNYXAocmVuZGVyZXIsIHRleHR1cmUsIGN1YmVNYXAsIG9wdGlvbik7XG4gICAgICAgICAgICB0ZXh0dXJlLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgICAgICAgICAgb25zdWNjZXNzICYmIG9uc3VjY2VzcyhjdWJlTWFwKTtcbiAgICAgICAgfSwgb25lcnJvcik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbmRlciBhIHBhbm9yYW1hIHRleHR1cmUgdG8gYSBjdWJlIG1hcFxuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICogQHBhcmFtICB7Y2xheS5UZXh0dXJlMkR9IHBhbm9yYW1hTWFwXG4gICAgICogQHBhcmFtICB7Y2xheS5UZXh0dXJlQ3ViZX0gY3ViZU1hcFxuICAgICAqIEBwYXJhbSAge09iamVjdH0gb3B0aW9uXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gW29wdGlvbi5lbmNvZGVSR0JNXVxuICAgICAqL1xuICAgIHBhbm9yYW1hVG9DdWJlTWFwOiBmdW5jdGlvbiAocmVuZGVyZXIsIHBhbm9yYW1hTWFwLCBjdWJlTWFwLCBvcHRpb24pIHtcbiAgICAgICAgdmFyIGVudmlyb25tZW50TWFwUGFzcyA9IG5ldyBFbnZpcm9ubWVudE1hcFBhc3MoKTtcbiAgICAgICAgdmFyIHNreWRvbWUgPSBuZXcgU2t5ZG9tZSh7XG4gICAgICAgICAgICBzY2VuZTogbmV3IFNjZW5lKClcbiAgICAgICAgfSk7XG4gICAgICAgIHNreWRvbWUuc2V0RW52aXJvbm1lbnRNYXAocGFub3JhbWFNYXApO1xuXG4gICAgICAgIG9wdGlvbiA9IG9wdGlvbiB8fCB7fTtcbiAgICAgICAgaWYgKG9wdGlvbi5lbmNvZGVSR0JNKSB7XG4gICAgICAgICAgICBza3lkb21lLm1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnUkdCTV9FTkNPREUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNoYXJlIHNSR0JcbiAgICAgICAgY3ViZU1hcC5zUkdCID0gcGFub3JhbWFNYXAuc1JHQjtcblxuICAgICAgICBlbnZpcm9ubWVudE1hcFBhc3MudGV4dHVyZSA9IGN1YmVNYXA7XG4gICAgICAgIGVudmlyb25tZW50TWFwUGFzcy5yZW5kZXIocmVuZGVyZXIsIHNreWRvbWUuc2NlbmUpO1xuICAgICAgICBlbnZpcm9ubWVudE1hcFBhc3MudGV4dHVyZSA9IG51bGw7XG4gICAgICAgIGVudmlyb25tZW50TWFwUGFzcy5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAgICAgcmV0dXJuIGN1YmVNYXA7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnQgaGVpZ2h0IG1hcCB0byBub3JtYWwgbWFwXG4gICAgICogQHBhcmFtIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fSBpbWFnZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NoZWNrQnVtcD1mYWxzZV1cbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgKi9cbiAgICBoZWlnaHRUb05vcm1hbDogZnVuY3Rpb24gKGltYWdlLCBjaGVja0J1bXApIHtcbiAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICB2YXIgd2lkdGggPSBjYW52YXMud2lkdGggPSBpbWFnZS53aWR0aDtcbiAgICAgICAgdmFyIGhlaWdodCA9IGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7XG4gICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGNoZWNrQnVtcCA9IGNoZWNrQnVtcCB8fCBmYWxzZTtcbiAgICAgICAgdmFyIHNyY0RhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB2YXIgZHN0RGF0YSA9IGN0eC5jcmVhdGVJbWFnZURhdGEod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3JjRGF0YS5kYXRhLmxlbmd0aDsgaSArPSA0KSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tCdW1wKSB7XG4gICAgICAgICAgICAgICAgdmFyIHIgPSBzcmNEYXRhLmRhdGFbaV07XG4gICAgICAgICAgICAgICAgdmFyIGcgPSBzcmNEYXRhLmRhdGFbaSArIDFdO1xuICAgICAgICAgICAgICAgIHZhciBiID0gc3JjRGF0YS5kYXRhW2kgKyAyXTtcbiAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IE1hdGguYWJzKHIgLSBnKSArIE1hdGguYWJzKGcgLSBiKTtcbiAgICAgICAgICAgICAgICBpZiAoZGlmZiA+IDIwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignR2l2ZW4gaW1hZ2UgaXMgbm90IGEgaGVpZ2h0IG1hcCcpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW1hZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTW9kaWZpZWQgZnJvbSBodHRwOi8vbXJkb29iLmNvbS9sYWIvamF2YXNjcmlwdC9oZWlnaHQybm9ybWFsL1xuICAgICAgICAgICAgdmFyIHgxLCB5MSwgeDIsIHkyO1xuICAgICAgICAgICAgaWYgKGkgJSAod2lkdGggKiA0KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIGxlZnQgZWRnZVxuICAgICAgICAgICAgICAgIHgxID0gc3JjRGF0YS5kYXRhW2ldO1xuICAgICAgICAgICAgICAgIHgyID0gc3JjRGF0YS5kYXRhW2kgKyA0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGkgJSAod2lkdGggKiA0KSA9PT0gKHdpZHRoIC0gMSkgKiA0KSB7XG4gICAgICAgICAgICAgICAgLy8gcmlnaHQgZWRnZVxuICAgICAgICAgICAgICAgIHgxID0gc3JjRGF0YS5kYXRhW2kgLSA0XTtcbiAgICAgICAgICAgICAgICB4MiA9IHNyY0RhdGEuZGF0YVtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHgxID0gc3JjRGF0YS5kYXRhW2kgLSA0XTtcbiAgICAgICAgICAgICAgICB4MiA9IHNyY0RhdGEuZGF0YVtpICsgNF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpIDwgd2lkdGggKiA0KSB7XG4gICAgICAgICAgICAgICAgLy8gdG9wIGVkZ2VcbiAgICAgICAgICAgICAgICB5MSA9IHNyY0RhdGEuZGF0YVtpXTtcbiAgICAgICAgICAgICAgICB5MiA9IHNyY0RhdGEuZGF0YVtpICsgd2lkdGggKiA0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGkgPiB3aWR0aCAqIChoZWlnaHQgLSAxKSAqIDQpIHtcbiAgICAgICAgICAgICAgICAvLyBib3R0b20gZWRnZVxuICAgICAgICAgICAgICAgIHkxID0gc3JjRGF0YS5kYXRhW2kgLSB3aWR0aCAqIDRdO1xuICAgICAgICAgICAgICAgIHkyID0gc3JjRGF0YS5kYXRhW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgeTEgPSBzcmNEYXRhLmRhdGFbaSAtIHdpZHRoICogNF07XG4gICAgICAgICAgICAgICAgeTIgPSBzcmNEYXRhLmRhdGFbaSArIHdpZHRoICogNF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRzdERhdGEuZGF0YVtpXSA9ICh4MSAtIHgyKSArIDEyNztcbiAgICAgICAgICAgIGRzdERhdGEuZGF0YVtpICsgMV0gPSAoeTEgLSB5MikgKyAxMjc7XG4gICAgICAgICAgICBkc3REYXRhLmRhdGFbaSArIDJdID0gMjU1O1xuICAgICAgICAgICAgZHN0RGF0YS5kYXRhW2kgKyAzXSA9IDI1NTtcbiAgICAgICAgfVxuICAgICAgICBjdHgucHV0SW1hZ2VEYXRhKGRzdERhdGEsIDAsIDApO1xuICAgICAgICByZXR1cm4gY2FudmFzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IGhlaWdodCBtYXAgdG8gbm9ybWFsIG1hcFxuICAgICAqIEBwYXJhbSB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudH0gaW1hZ2VcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjaGVja0J1bXA9ZmFsc2VdXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt0aHJlc2hvbGQ9MjBdXG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICovXG4gICAgaXNIZWlnaHRJbWFnZTogZnVuY3Rpb24gKGltZywgZG93blNjYWxlU2l6ZSwgdGhyZXNob2xkKSB7XG4gICAgICAgIGlmICghaW1nIHx8ICFpbWcud2lkdGggfHwgIWltZy5oZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICB2YXIgc2l6ZSA9IGRvd25TY2FsZVNpemUgfHwgMzI7XG4gICAgICAgIHRocmVzaG9sZCA9IHRocmVzaG9sZCB8fCAyMDtcbiAgICAgICAgY2FudmFzLndpZHRoID0gY2FudmFzLmhlaWdodCA9IHNpemU7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCBzaXplLCBzaXplKTtcbiAgICAgICAgdmFyIHNyY0RhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHNpemUsIHNpemUpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNyY0RhdGEuZGF0YS5sZW5ndGg7IGkgKz0gNCkge1xuICAgICAgICAgICAgdmFyIHIgPSBzcmNEYXRhLmRhdGFbaV07XG4gICAgICAgICAgICB2YXIgZyA9IHNyY0RhdGEuZGF0YVtpICsgMV07XG4gICAgICAgICAgICB2YXIgYiA9IHNyY0RhdGEuZGF0YVtpICsgMl07XG4gICAgICAgICAgICB2YXIgZGlmZiA9IE1hdGguYWJzKHIgLSBnKSArIE1hdGguYWJzKGcgLSBiKTtcbiAgICAgICAgICAgIGlmIChkaWZmID4gdGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgICBfZmV0Y2hUZXh0dXJlOiBmdW5jdGlvbiAocGF0aCwgb25zdWNjZXNzLCBvbmVycm9yKSB7XG4gICAgICAgIHZlbmRvci5yZXF1ZXN0LmdldCh7XG4gICAgICAgICAgICB1cmw6IHBhdGgsXG4gICAgICAgICAgICByZXNwb25zZVR5cGU6ICdhcnJheWJ1ZmZlcicsXG4gICAgICAgICAgICBvbmxvYWQ6IG9uc3VjY2VzcyxcbiAgICAgICAgICAgIG9uZXJyb3I6IG9uZXJyb3JcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNoZXNzYm9hcmQgdGV4dHVyZVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gW3NpemVdXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBbdW5pdFNpemVdXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBbY29sb3IxXVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gW2NvbG9yMl1cbiAgICAgKiBAcmV0dXJuIHtjbGF5LlRleHR1cmUyRH1cbiAgICAgKi9cbiAgICBjcmVhdGVDaGVzc2JvYXJkOiBmdW5jdGlvbiAoc2l6ZSwgdW5pdFNpemUsIGNvbG9yMSwgY29sb3IyKSB7XG4gICAgICAgIHNpemUgPSBzaXplIHx8IDUxMjtcbiAgICAgICAgdW5pdFNpemUgPSB1bml0U2l6ZSB8fCA2NDtcbiAgICAgICAgY29sb3IxID0gY29sb3IxIHx8ICdibGFjayc7XG4gICAgICAgIGNvbG9yMiA9IGNvbG9yMiB8fCAnd2hpdGUnO1xuXG4gICAgICAgIHZhciByZXBlYXQgPSBNYXRoLmNlaWwoc2l6ZSAvIHVuaXRTaXplKTtcblxuICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemU7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplO1xuICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjI7XG4gICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBzaXplLCBzaXplKTtcblxuICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3IxO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcGVhdDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJlcGVhdDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzRmlsbCA9IGogJSAyID8gKGkgJSAyKSA6IChpICUgMiAtIDEpO1xuICAgICAgICAgICAgICAgIGlmIChpc0ZpbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KGkgKiB1bml0U2l6ZSwgaiAqIHVuaXRTaXplLCB1bml0U2l6ZSwgdW5pdFNpemUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0ZXh0dXJlID0gbmV3IFRleHR1cmUyRCh7XG4gICAgICAgICAgICBpbWFnZTogY2FudmFzLFxuICAgICAgICAgICAgYW5pc290cm9waWM6IDhcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGJsYW5rIHB1cmUgY29sb3IgMXgxIHRleHR1cmVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGNvbG9yXG4gICAgICogQHJldHVybiB7Y2xheS5UZXh0dXJlMkR9XG4gICAgICovXG4gICAgY3JlYXRlQmxhbms6IGZ1bmN0aW9uIChjb2xvcikge1xuICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IDE7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSAxO1xuICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIDEsIDEpO1xuXG4gICAgICAgIHZhciB0ZXh0dXJlID0gbmV3IFRleHR1cmUyRCh7XG4gICAgICAgICAgICBpbWFnZTogY2FudmFzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRleHR1cmVVdGlsO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy91dGlsL3RleHR1cmUuanNcbi8vIG1vZHVsZSBpZCA9IDU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///59\n");

/***/ }),
/* 60 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Skybox__ = __webpack_require__(41);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0__Skybox__[\"a\" /* default */]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9wbHVnaW4vU2t5ZG9tZS5qcz84NTEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTa3lib3ggZnJvbSAnLi9Ta3lib3gnO1xuXG5leHBvcnQgZGVmYXVsdCBTa3lib3g7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9wbHVnaW4vU2t5ZG9tZS5qc1xuLy8gbW9kdWxlIGlkID0gNjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///60\n");

/***/ }),
/* 61 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_util__ = __webpack_require__(11);\n\n\n\n\nvar TexturePool = function () {\n\n    this._pool = {};\n\n    this._allocatedTextures = [];\n};\n\nTexturePool.prototype = {\n\n    constructor: TexturePool,\n\n    get: function (parameters) {\n        var key = generateKey(parameters);\n        if (!this._pool.hasOwnProperty(key)) {\n            this._pool[key] = [];\n        }\n        var list = this._pool[key];\n        if (!list.length) {\n            var texture = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */](parameters);\n            this._allocatedTextures.push(texture);\n            return texture;\n        }\n        return list.pop();\n    },\n\n    put: function (texture) {\n        var key = generateKey(texture);\n        if (!this._pool.hasOwnProperty(key)) {\n            this._pool[key] = [];\n        }\n        var list = this._pool[key];\n        list.push(texture);\n    },\n\n    clear: function (renderer) {\n        for (var i = 0; i < this._allocatedTextures.length; i++) {\n            this._allocatedTextures[i].dispose(renderer);\n        }\n        this._pool = {};\n        this._allocatedTextures = [];\n    }\n};\n\nvar defaultParams = {\n    width: 512,\n    height: 512,\n    type: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].UNSIGNED_BYTE,\n    format: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].RGBA,\n    wrapS: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CLAMP_TO_EDGE,\n    wrapT: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CLAMP_TO_EDGE,\n    minFilter: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_LINEAR,\n    magFilter: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR,\n    useMipmap: true,\n    anisotropic: 1,\n    flipY: true,\n    unpackAlignment: 4,\n    premultiplyAlpha: false\n};\n\nvar defaultParamPropList = Object.keys(defaultParams);\n\nfunction generateKey(parameters) {\n    __WEBPACK_IMPORTED_MODULE_2__core_util__[\"a\" /* default */].defaultsWithPropList(parameters, defaultParams, defaultParamPropList);\n    fallBack(parameters);\n\n    var key = '';\n    for (var i = 0; i < defaultParamPropList.length; i++) {\n        var name = defaultParamPropList[i];\n        var chunk = parameters[name].toString();\n        key += chunk;\n    }\n    return key;\n}\n\nfunction fallBack(target) {\n\n    var IPOT = isPowerOfTwo(target.width, target.height);\n\n    if (target.format === __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].DEPTH_COMPONENT) {\n        target.useMipmap = false;\n    }\n\n    if (!IPOT || !target.useMipmap) {\n        if (target.minFilter == __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST_MIPMAP_NEAREST ||\n            target.minFilter == __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST_MIPMAP_LINEAR) {\n            target.minFilter = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST;\n        } else if (\n            target.minFilter == __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_LINEAR ||\n            target.minFilter == __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_NEAREST\n        ) {\n            target.minFilter = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR;\n        }\n    }\n    if (!IPOT) {\n        target.wrapS = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CLAMP_TO_EDGE;\n        target.wrapT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CLAMP_TO_EDGE;\n    }\n}\n\nfunction isPowerOfTwo(width, height) {\n    return (width & (width-1)) === 0 &&\n            (height & (height-1)) === 0;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TexturePool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb21wb3NpdG9yL1RleHR1cmVQb29sLmpzPzQ5ZDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRleHR1cmUyRCBmcm9tICcuLi9UZXh0dXJlMkQnO1xuaW1wb3J0IGdsZW51bSBmcm9tICcuLi9jb3JlL2dsZW51bSc7XG5pbXBvcnQgdXRpbCBmcm9tICcuLi9jb3JlL3V0aWwnO1xuXG52YXIgVGV4dHVyZVBvb2wgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICB0aGlzLl9wb29sID0ge307XG5cbiAgICB0aGlzLl9hbGxvY2F0ZWRUZXh0dXJlcyA9IFtdO1xufTtcblxuVGV4dHVyZVBvb2wucHJvdG90eXBlID0ge1xuXG4gICAgY29uc3RydWN0b3I6IFRleHR1cmVQb29sLFxuXG4gICAgZ2V0OiBmdW5jdGlvbiAocGFyYW1ldGVycykge1xuICAgICAgICB2YXIga2V5ID0gZ2VuZXJhdGVLZXkocGFyYW1ldGVycyk7XG4gICAgICAgIGlmICghdGhpcy5fcG9vbC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICB0aGlzLl9wb29sW2tleV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGlzdCA9IHRoaXMuX3Bvb2xba2V5XTtcbiAgICAgICAgaWYgKCFsaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHRleHR1cmUgPSBuZXcgVGV4dHVyZTJEKHBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgdGhpcy5fYWxsb2NhdGVkVGV4dHVyZXMucHVzaCh0ZXh0dXJlKTtcbiAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaXN0LnBvcCgpO1xuICAgIH0sXG5cbiAgICBwdXQ6IGZ1bmN0aW9uICh0ZXh0dXJlKSB7XG4gICAgICAgIHZhciBrZXkgPSBnZW5lcmF0ZUtleSh0ZXh0dXJlKTtcbiAgICAgICAgaWYgKCF0aGlzLl9wb29sLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Bvb2xba2V5XSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsaXN0ID0gdGhpcy5fcG9vbFtrZXldO1xuICAgICAgICBsaXN0LnB1c2godGV4dHVyZSk7XG4gICAgfSxcblxuICAgIGNsZWFyOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9hbGxvY2F0ZWRUZXh0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5fYWxsb2NhdGVkVGV4dHVyZXNbaV0uZGlzcG9zZShyZW5kZXJlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcG9vbCA9IHt9O1xuICAgICAgICB0aGlzLl9hbGxvY2F0ZWRUZXh0dXJlcyA9IFtdO1xuICAgIH1cbn07XG5cbnZhciBkZWZhdWx0UGFyYW1zID0ge1xuICAgIHdpZHRoOiA1MTIsXG4gICAgaGVpZ2h0OiA1MTIsXG4gICAgdHlwZTogZ2xlbnVtLlVOU0lHTkVEX0JZVEUsXG4gICAgZm9ybWF0OiBnbGVudW0uUkdCQSxcbiAgICB3cmFwUzogZ2xlbnVtLkNMQU1QX1RPX0VER0UsXG4gICAgd3JhcFQ6IGdsZW51bS5DTEFNUF9UT19FREdFLFxuICAgIG1pbkZpbHRlcjogZ2xlbnVtLkxJTkVBUl9NSVBNQVBfTElORUFSLFxuICAgIG1hZ0ZpbHRlcjogZ2xlbnVtLkxJTkVBUixcbiAgICB1c2VNaXBtYXA6IHRydWUsXG4gICAgYW5pc290cm9waWM6IDEsXG4gICAgZmxpcFk6IHRydWUsXG4gICAgdW5wYWNrQWxpZ25tZW50OiA0LFxuICAgIHByZW11bHRpcGx5QWxwaGE6IGZhbHNlXG59O1xuXG52YXIgZGVmYXVsdFBhcmFtUHJvcExpc3QgPSBPYmplY3Qua2V5cyhkZWZhdWx0UGFyYW1zKTtcblxuZnVuY3Rpb24gZ2VuZXJhdGVLZXkocGFyYW1ldGVycykge1xuICAgIHV0aWwuZGVmYXVsdHNXaXRoUHJvcExpc3QocGFyYW1ldGVycywgZGVmYXVsdFBhcmFtcywgZGVmYXVsdFBhcmFtUHJvcExpc3QpO1xuICAgIGZhbGxCYWNrKHBhcmFtZXRlcnMpO1xuXG4gICAgdmFyIGtleSA9ICcnO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVmYXVsdFBhcmFtUHJvcExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5hbWUgPSBkZWZhdWx0UGFyYW1Qcm9wTGlzdFtpXTtcbiAgICAgICAgdmFyIGNodW5rID0gcGFyYW1ldGVyc1tuYW1lXS50b1N0cmluZygpO1xuICAgICAgICBrZXkgKz0gY2h1bms7XG4gICAgfVxuICAgIHJldHVybiBrZXk7XG59XG5cbmZ1bmN0aW9uIGZhbGxCYWNrKHRhcmdldCkge1xuXG4gICAgdmFyIElQT1QgPSBpc1Bvd2VyT2ZUd28odGFyZ2V0LndpZHRoLCB0YXJnZXQuaGVpZ2h0KTtcblxuICAgIGlmICh0YXJnZXQuZm9ybWF0ID09PSBnbGVudW0uREVQVEhfQ09NUE9ORU5UKSB7XG4gICAgICAgIHRhcmdldC51c2VNaXBtYXAgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIUlQT1QgfHwgIXRhcmdldC51c2VNaXBtYXApIHtcbiAgICAgICAgaWYgKHRhcmdldC5taW5GaWx0ZXIgPT0gZ2xlbnVtLk5FQVJFU1RfTUlQTUFQX05FQVJFU1QgfHxcbiAgICAgICAgICAgIHRhcmdldC5taW5GaWx0ZXIgPT0gZ2xlbnVtLk5FQVJFU1RfTUlQTUFQX0xJTkVBUikge1xuICAgICAgICAgICAgdGFyZ2V0Lm1pbkZpbHRlciA9IGdsZW51bS5ORUFSRVNUO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGFyZ2V0Lm1pbkZpbHRlciA9PSBnbGVudW0uTElORUFSX01JUE1BUF9MSU5FQVIgfHxcbiAgICAgICAgICAgIHRhcmdldC5taW5GaWx0ZXIgPT0gZ2xlbnVtLkxJTkVBUl9NSVBNQVBfTkVBUkVTVFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRhcmdldC5taW5GaWx0ZXIgPSBnbGVudW0uTElORUFSO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghSVBPVCkge1xuICAgICAgICB0YXJnZXQud3JhcFMgPSBnbGVudW0uQ0xBTVBfVE9fRURHRTtcbiAgICAgICAgdGFyZ2V0LndyYXBUID0gZ2xlbnVtLkNMQU1QX1RPX0VER0U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc1Bvd2VyT2ZUd28od2lkdGgsIGhlaWdodCkge1xuICAgIHJldHVybiAod2lkdGggJiAod2lkdGgtMSkpID09PSAwICYmXG4gICAgICAgICAgICAoaGVpZ2h0ICYgKGhlaWdodC0xKSkgPT09IDA7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRleHR1cmVQb29sO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb21wb3NpdG9yL1RleHR1cmVQb29sLmpzXG4vLyBtb2R1bGUgaWQgPSA2MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///61\n");

/***/ }),
/* 62 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__compositor_Compositor__ = __webpack_require__(102);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__compositor_SceneNode__ = __webpack_require__(104);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__compositor_TextureNode__ = __webpack_require__(105);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__compositor_FilterNode__ = __webpack_require__(106);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__TextureCube__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__shader_registerBuiltinCompositor__ = __webpack_require__(107);\n\n\n\n\n\n\n\n\n\n\n\n\nObject(__WEBPACK_IMPORTED_MODULE_9__shader_registerBuiltinCompositor__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */]);\n\nvar shaderSourceReg = /^#source\\((.*?)\\)/;\n\n/**\n * @name clay.createCompositor\n * @function\n * @param {Object} json\n * @param {Object} [opts]\n * @return {clay.compositor.Compositor}\n */\nfunction createCompositor(json, opts) {\n    var compositor = new __WEBPACK_IMPORTED_MODULE_1__compositor_Compositor__[\"a\" /* default */]();\n    opts = opts || {};\n\n    var lib = {\n        textures: {},\n        parameters: {}\n    };\n    var afterLoad = function(shaderLib, textureLib) {\n        for (var i = 0; i < json.nodes.length; i++) {\n            var nodeInfo = json.nodes[i];\n            var node = createNode(nodeInfo, lib, opts);\n            if (node) {\n                compositor.addNode(node);\n            }\n        }\n    };\n\n    for (var name in json.parameters) {\n        var paramInfo = json.parameters[name];\n        lib.parameters[name] = convertParameter(paramInfo);\n    }\n    // TODO load texture asynchronous\n    loadTextures(json, lib, opts, function(textureLib) {\n        lib.textures = textureLib;\n        afterLoad();\n    });\n\n    return compositor;\n}\n\nfunction createNode(nodeInfo, lib, opts) {\n    var type = nodeInfo.type || 'filter';\n    var shaderSource;\n    var inputs;\n    var outputs;\n\n    if (type === 'filter') {\n        var shaderExp = nodeInfo.shader.trim();\n        var res = shaderSourceReg.exec(shaderExp);\n        if (res) {\n            shaderSource = __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source(res[1].trim());\n        }\n        else if (shaderExp.charAt(0) === '#') {\n            shaderSource = lib.shaders[shaderExp.substr(1)];\n        }\n        if (!shaderSource) {\n            shaderSource = shaderExp;\n        }\n        if (!shaderSource) {\n            return;\n        }\n    }\n\n    if (nodeInfo.inputs) {\n        inputs = {};\n        for (var name in nodeInfo.inputs) {\n            if (typeof nodeInfo.inputs[name] === 'string') {\n                inputs[name] = nodeInfo.inputs[name];\n            }\n            else {\n                inputs[name] = {\n                    node: nodeInfo.inputs[name].node,\n                    pin: nodeInfo.inputs[name].pin\n                };\n            }\n        }\n    }\n    if (nodeInfo.outputs) {\n        outputs = {};\n        for (var name in nodeInfo.outputs) {\n            var outputInfo = nodeInfo.outputs[name];\n            outputs[name] = {};\n            if (outputInfo.attachment != null) {\n                outputs[name].attachment = outputInfo.attachment;\n            }\n            if (outputInfo.keepLastFrame != null) {\n                outputs[name].keepLastFrame = outputInfo.keepLastFrame;\n            }\n            if (outputInfo.outputLastFrame != null) {\n                outputs[name].outputLastFrame = outputInfo.outputLastFrame;\n            }\n            if (outputInfo.parameters) {\n                outputs[name].parameters = convertParameter(outputInfo.parameters);\n            }\n        }\n    }\n    var node;\n    if (type === 'scene') {\n        node = new __WEBPACK_IMPORTED_MODULE_2__compositor_SceneNode__[\"a\" /* default */]({\n            name: nodeInfo.name,\n            scene: opts.scene,\n            camera: opts.camera,\n            outputs: outputs\n        });\n    }\n    else if (type === 'texture') {\n        node = new __WEBPACK_IMPORTED_MODULE_3__compositor_TextureNode__[\"a\" /* default */]({\n            name: nodeInfo.name,\n            outputs: outputs\n        });\n    }\n    // Default is filter\n    else {\n        node = new __WEBPACK_IMPORTED_MODULE_4__compositor_FilterNode__[\"a\" /* default */]({\n            name: nodeInfo.name,\n            shader: shaderSource,\n            inputs: inputs,\n            outputs: outputs\n        });\n    }\n    if (node) {\n        if (nodeInfo.parameters) {\n            for (var name in nodeInfo.parameters) {\n                var val = nodeInfo.parameters[name];\n                if (typeof val === 'string') {\n                    val = val.trim();\n                    if (val.charAt(0) === '#') {\n                        val = lib.textures[val.substr(1)];\n                    }\n                    else {\n                        node.on(\n                            'beforerender', createSizeSetHandler(\n                                name, tryConvertExpr(val)\n                            )\n                        );\n                    }\n                }\n                else if (typeof val === 'function') {\n                    node.on('beforerender', val);\n                }\n                node.setParameter(name, val);\n            }\n        }\n        if (nodeInfo.defines && node.pass) {\n            for (var name in nodeInfo.defines) {\n                var val = nodeInfo.defines[name];\n                node.pass.material.define('fragment', name, val);\n            }\n        }\n    }\n    return node;\n}\n\nfunction defaultWidthFunc(width, height) {\n    return width;\n}\nfunction defaultHeightFunc(width, height) {\n    return height;\n}\n\nfunction convertParameter(paramInfo) {\n    var param = {};\n    if (!paramInfo) {\n        return param;\n    }\n    ['type', 'minFilter', 'magFilter', 'wrapS', 'wrapT', 'flipY', 'useMipmap']\n        .forEach(function(name) {\n            var val = paramInfo[name];\n            if (val != null) {\n                // Convert string to enum\n                if (typeof val === 'string') {\n                    val = __WEBPACK_IMPORTED_MODULE_6__Texture__[\"a\" /* default */][val];\n                }\n                param[name] = val;\n            }\n        });\n\n    var sizeScale = paramInfo.scale || 1;\n    ['width', 'height']\n        .forEach(function(name) {\n            if (paramInfo[name] != null) {\n                var val = paramInfo[name];\n                if (typeof val === 'string') {\n                    val = val.trim();\n                    param[name] = createSizeParser(\n                        name, tryConvertExpr(val), sizeScale\n                    );\n                }\n                else {\n                    param[name] = val;\n                }\n            }\n        });\n    if (!param.width) {\n        param.width = defaultWidthFunc;\n    }\n    if (!param.height) {\n        param.height = defaultHeightFunc;\n    }\n\n    if (paramInfo.useMipmap != null) {\n        param.useMipmap = paramInfo.useMipmap;\n    }\n    return param;\n}\n\nfunction loadTextures(json, lib, opts, callback) {\n    if (!json.textures) {\n        callback({});\n        return;\n    }\n    var textures = {};\n    var loading = 0;\n\n    var cbd = false;\n    var textureRootPath = opts.textureRootPath;\n    __WEBPACK_IMPORTED_MODULE_0__core_util__[\"a\" /* default */].each(json.textures, function(textureInfo, name) {\n        var texture;\n        var path = textureInfo.path;\n        var parameters = convertParameter(textureInfo.parameters);\n        if (Array.isArray(path) && path.length === 6) {\n            if (textureRootPath) {\n                path = path.map(function(item) {\n                    return __WEBPACK_IMPORTED_MODULE_0__core_util__[\"a\" /* default */].relative2absolute(item, textureRootPath);\n                });\n            }\n            texture = new __WEBPACK_IMPORTED_MODULE_8__TextureCube__[\"a\" /* default */](parameters);\n        }\n        else if(typeof path === 'string') {\n            if (textureRootPath) {\n                path = __WEBPACK_IMPORTED_MODULE_0__core_util__[\"a\" /* default */].relative2absolute(path, textureRootPath);\n            }\n            texture = new __WEBPACK_IMPORTED_MODULE_7__Texture2D__[\"a\" /* default */](parameters);\n        }\n        else {\n            return;\n        }\n\n        texture.load(path);\n        loading++;\n        texture.once('success', function() {\n            textures[name] = texture;\n            loading--;\n            if (loading === 0) {\n                callback(textures);\n                cbd = true;\n            }\n        });\n    });\n\n    if (loading === 0 && !cbd) {\n        callback(textures);\n    }\n}\n\nfunction createSizeSetHandler(name, exprFunc) {\n    return function (renderer) {\n        // PENDING viewport size or window size\n        var dpr = renderer.getDevicePixelRatio();\n        // PENDING If multiply dpr ?\n        var width = renderer.getWidth();\n        var height = renderer.getHeight();\n        var result = exprFunc(width, height, dpr);\n        this.setParameter(name, result);\n    };\n}\n\nfunction createSizeParser(name, exprFunc, scale) {\n    scale = scale || 1;\n    return function (renderer) {\n        var dpr = renderer.getDevicePixelRatio();\n        var width = renderer.getWidth() * scale;\n        var height = renderer.getHeight() * scale;\n        return exprFunc(width, height, dpr);\n    };\n}\n\nfunction tryConvertExpr(string) {\n    // PENDING\n    var exprRes = /^expr\\((.*)\\)$/.exec(string);\n    if (exprRes) {\n        try {\n            var func = new Function('width', 'height', 'dpr', 'return ' + exprRes[1]);\n            // Try run t\n            func(1, 1);\n\n            return func;\n        }\n        catch (e) {\n            throw new Error('Invalid expression.');\n        }\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (createCompositor);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jcmVhdGVDb21wb3NpdG9yLmpzP2UyZTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHV0aWwgZnJvbSAnLi9jb3JlL3V0aWwnO1xuaW1wb3J0IENvbXBvc2l0b3IgZnJvbSAnLi9jb21wb3NpdG9yL0NvbXBvc2l0b3InO1xuaW1wb3J0IENvbXBvU2NlbmVOb2RlIGZyb20gJy4vY29tcG9zaXRvci9TY2VuZU5vZGUnO1xuaW1wb3J0IENvbXBvVGV4dHVyZU5vZGUgZnJvbSAnLi9jb21wb3NpdG9yL1RleHR1cmVOb2RlJztcbmltcG9ydCBDb21wb0ZpbHRlck5vZGUgZnJvbSAnLi9jb21wb3NpdG9yL0ZpbHRlck5vZGUnO1xuaW1wb3J0IFNoYWRlciBmcm9tICcuL1NoYWRlcic7XG5pbXBvcnQgVGV4dHVyZSBmcm9tICcuL1RleHR1cmUnO1xuaW1wb3J0IFRleHR1cmUyRCBmcm9tICcuL1RleHR1cmUyRCc7XG5pbXBvcnQgVGV4dHVyZUN1YmUgZnJvbSAnLi9UZXh0dXJlQ3ViZSc7XG5cbmltcG9ydCByZWdpc3RlckJ1aWx0aW5Db21wb3NpdG9yIGZyb20gJy4vc2hhZGVyL3JlZ2lzdGVyQnVpbHRpbkNvbXBvc2l0b3InO1xuXG5yZWdpc3RlckJ1aWx0aW5Db21wb3NpdG9yKFNoYWRlcik7XG5cbnZhciBzaGFkZXJTb3VyY2VSZWcgPSAvXiNzb3VyY2VcXCgoLio/KVxcKS87XG5cbi8qKlxuICogQG5hbWUgY2xheS5jcmVhdGVDb21wb3NpdG9yXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7T2JqZWN0fSBqc29uXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHNdXG4gKiBAcmV0dXJuIHtjbGF5LmNvbXBvc2l0b3IuQ29tcG9zaXRvcn1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ29tcG9zaXRvcihqc29uLCBvcHRzKSB7XG4gICAgdmFyIGNvbXBvc2l0b3IgPSBuZXcgQ29tcG9zaXRvcigpO1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuXG4gICAgdmFyIGxpYiA9IHtcbiAgICAgICAgdGV4dHVyZXM6IHt9LFxuICAgICAgICBwYXJhbWV0ZXJzOiB7fVxuICAgIH07XG4gICAgdmFyIGFmdGVyTG9hZCA9IGZ1bmN0aW9uKHNoYWRlckxpYiwgdGV4dHVyZUxpYikge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGpzb24ubm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBub2RlSW5mbyA9IGpzb24ubm9kZXNbaV07XG4gICAgICAgICAgICB2YXIgbm9kZSA9IGNyZWF0ZU5vZGUobm9kZUluZm8sIGxpYiwgb3B0cyk7XG4gICAgICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgICAgIGNvbXBvc2l0b3IuYWRkTm9kZShub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmb3IgKHZhciBuYW1lIGluIGpzb24ucGFyYW1ldGVycykge1xuICAgICAgICB2YXIgcGFyYW1JbmZvID0ganNvbi5wYXJhbWV0ZXJzW25hbWVdO1xuICAgICAgICBsaWIucGFyYW1ldGVyc1tuYW1lXSA9IGNvbnZlcnRQYXJhbWV0ZXIocGFyYW1JbmZvKTtcbiAgICB9XG4gICAgLy8gVE9ETyBsb2FkIHRleHR1cmUgYXN5bmNocm9ub3VzXG4gICAgbG9hZFRleHR1cmVzKGpzb24sIGxpYiwgb3B0cywgZnVuY3Rpb24odGV4dHVyZUxpYikge1xuICAgICAgICBsaWIudGV4dHVyZXMgPSB0ZXh0dXJlTGliO1xuICAgICAgICBhZnRlckxvYWQoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBjb21wb3NpdG9yO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVOb2RlKG5vZGVJbmZvLCBsaWIsIG9wdHMpIHtcbiAgICB2YXIgdHlwZSA9IG5vZGVJbmZvLnR5cGUgfHwgJ2ZpbHRlcic7XG4gICAgdmFyIHNoYWRlclNvdXJjZTtcbiAgICB2YXIgaW5wdXRzO1xuICAgIHZhciBvdXRwdXRzO1xuXG4gICAgaWYgKHR5cGUgPT09ICdmaWx0ZXInKSB7XG4gICAgICAgIHZhciBzaGFkZXJFeHAgPSBub2RlSW5mby5zaGFkZXIudHJpbSgpO1xuICAgICAgICB2YXIgcmVzID0gc2hhZGVyU291cmNlUmVnLmV4ZWMoc2hhZGVyRXhwKTtcbiAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgICAgc2hhZGVyU291cmNlID0gU2hhZGVyLnNvdXJjZShyZXNbMV0udHJpbSgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzaGFkZXJFeHAuY2hhckF0KDApID09PSAnIycpIHtcbiAgICAgICAgICAgIHNoYWRlclNvdXJjZSA9IGxpYi5zaGFkZXJzW3NoYWRlckV4cC5zdWJzdHIoMSldO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2hhZGVyU291cmNlKSB7XG4gICAgICAgICAgICBzaGFkZXJTb3VyY2UgPSBzaGFkZXJFeHA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzaGFkZXJTb3VyY2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChub2RlSW5mby5pbnB1dHMpIHtcbiAgICAgICAgaW5wdXRzID0ge307XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gbm9kZUluZm8uaW5wdXRzKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG5vZGVJbmZvLmlucHV0c1tuYW1lXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBpbnB1dHNbbmFtZV0gPSBub2RlSW5mby5pbnB1dHNbbmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnB1dHNbbmFtZV0gPSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGU6IG5vZGVJbmZvLmlucHV0c1tuYW1lXS5ub2RlLFxuICAgICAgICAgICAgICAgICAgICBwaW46IG5vZGVJbmZvLmlucHV0c1tuYW1lXS5waW5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChub2RlSW5mby5vdXRwdXRzKSB7XG4gICAgICAgIG91dHB1dHMgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBub2RlSW5mby5vdXRwdXRzKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0SW5mbyA9IG5vZGVJbmZvLm91dHB1dHNbbmFtZV07XG4gICAgICAgICAgICBvdXRwdXRzW25hbWVdID0ge307XG4gICAgICAgICAgICBpZiAob3V0cHV0SW5mby5hdHRhY2htZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRzW25hbWVdLmF0dGFjaG1lbnQgPSBvdXRwdXRJbmZvLmF0dGFjaG1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3V0cHV0SW5mby5rZWVwTGFzdEZyYW1lICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRzW25hbWVdLmtlZXBMYXN0RnJhbWUgPSBvdXRwdXRJbmZvLmtlZXBMYXN0RnJhbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3V0cHV0SW5mby5vdXRwdXRMYXN0RnJhbWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG91dHB1dHNbbmFtZV0ub3V0cHV0TGFzdEZyYW1lID0gb3V0cHV0SW5mby5vdXRwdXRMYXN0RnJhbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3V0cHV0SW5mby5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0c1tuYW1lXS5wYXJhbWV0ZXJzID0gY29udmVydFBhcmFtZXRlcihvdXRwdXRJbmZvLnBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBub2RlO1xuICAgIGlmICh0eXBlID09PSAnc2NlbmUnKSB7XG4gICAgICAgIG5vZGUgPSBuZXcgQ29tcG9TY2VuZU5vZGUoe1xuICAgICAgICAgICAgbmFtZTogbm9kZUluZm8ubmFtZSxcbiAgICAgICAgICAgIHNjZW5lOiBvcHRzLnNjZW5lLFxuICAgICAgICAgICAgY2FtZXJhOiBvcHRzLmNhbWVyYSxcbiAgICAgICAgICAgIG91dHB1dHM6IG91dHB1dHNcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICd0ZXh0dXJlJykge1xuICAgICAgICBub2RlID0gbmV3IENvbXBvVGV4dHVyZU5vZGUoe1xuICAgICAgICAgICAgbmFtZTogbm9kZUluZm8ubmFtZSxcbiAgICAgICAgICAgIG91dHB1dHM6IG91dHB1dHNcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIERlZmF1bHQgaXMgZmlsdGVyXG4gICAgZWxzZSB7XG4gICAgICAgIG5vZGUgPSBuZXcgQ29tcG9GaWx0ZXJOb2RlKHtcbiAgICAgICAgICAgIG5hbWU6IG5vZGVJbmZvLm5hbWUsXG4gICAgICAgICAgICBzaGFkZXI6IHNoYWRlclNvdXJjZSxcbiAgICAgICAgICAgIGlucHV0czogaW5wdXRzLFxuICAgICAgICAgICAgb3V0cHV0czogb3V0cHV0c1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGVJbmZvLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gbm9kZUluZm8ucGFyYW1ldGVycykge1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBub2RlSW5mby5wYXJhbWV0ZXJzW25hbWVdO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB2YWwgPSB2YWwudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBsaWIudGV4dHVyZXNbdmFsLnN1YnN0cigxKV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLm9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiZWZvcmVyZW5kZXInLCBjcmVhdGVTaXplU2V0SGFuZGxlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSwgdHJ5Q29udmVydEV4cHIodmFsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBub2RlLm9uKCdiZWZvcmVyZW5kZXInLCB2YWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBub2RlLnNldFBhcmFtZXRlcihuYW1lLCB2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlSW5mby5kZWZpbmVzICYmIG5vZGUucGFzcykge1xuICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBub2RlSW5mby5kZWZpbmVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IG5vZGVJbmZvLmRlZmluZXNbbmFtZV07XG4gICAgICAgICAgICAgICAgbm9kZS5wYXNzLm1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCBuYW1lLCB2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub2RlO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0V2lkdGhGdW5jKHdpZHRoLCBoZWlnaHQpIHtcbiAgICByZXR1cm4gd2lkdGg7XG59XG5mdW5jdGlvbiBkZWZhdWx0SGVpZ2h0RnVuYyh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgcmV0dXJuIGhlaWdodDtcbn1cblxuZnVuY3Rpb24gY29udmVydFBhcmFtZXRlcihwYXJhbUluZm8pIHtcbiAgICB2YXIgcGFyYW0gPSB7fTtcbiAgICBpZiAoIXBhcmFtSW5mbykge1xuICAgICAgICByZXR1cm4gcGFyYW07XG4gICAgfVxuICAgIFsndHlwZScsICdtaW5GaWx0ZXInLCAnbWFnRmlsdGVyJywgJ3dyYXBTJywgJ3dyYXBUJywgJ2ZsaXBZJywgJ3VzZU1pcG1hcCddXG4gICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICAgIHZhciB2YWwgPSBwYXJhbUluZm9bbmFtZV07XG4gICAgICAgICAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IHN0cmluZyB0byBlbnVtXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IFRleHR1cmVbdmFsXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyYW1bbmFtZV0gPSB2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgdmFyIHNpemVTY2FsZSA9IHBhcmFtSW5mby5zY2FsZSB8fCAxO1xuICAgIFsnd2lkdGgnLCAnaGVpZ2h0J11cbiAgICAgICAgLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgaWYgKHBhcmFtSW5mb1tuYW1lXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IHBhcmFtSW5mb1tuYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gdmFsLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1bbmFtZV0gPSBjcmVhdGVTaXplUGFyc2VyKFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSwgdHJ5Q29udmVydEV4cHIodmFsKSwgc2l6ZVNjYWxlXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbVtuYW1lXSA9IHZhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIGlmICghcGFyYW0ud2lkdGgpIHtcbiAgICAgICAgcGFyYW0ud2lkdGggPSBkZWZhdWx0V2lkdGhGdW5jO1xuICAgIH1cbiAgICBpZiAoIXBhcmFtLmhlaWdodCkge1xuICAgICAgICBwYXJhbS5oZWlnaHQgPSBkZWZhdWx0SGVpZ2h0RnVuYztcbiAgICB9XG5cbiAgICBpZiAocGFyYW1JbmZvLnVzZU1pcG1hcCAhPSBudWxsKSB7XG4gICAgICAgIHBhcmFtLnVzZU1pcG1hcCA9IHBhcmFtSW5mby51c2VNaXBtYXA7XG4gICAgfVxuICAgIHJldHVybiBwYXJhbTtcbn1cblxuZnVuY3Rpb24gbG9hZFRleHR1cmVzKGpzb24sIGxpYiwgb3B0cywgY2FsbGJhY2spIHtcbiAgICBpZiAoIWpzb24udGV4dHVyZXMpIHtcbiAgICAgICAgY2FsbGJhY2soe30pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0ZXh0dXJlcyA9IHt9O1xuICAgIHZhciBsb2FkaW5nID0gMDtcblxuICAgIHZhciBjYmQgPSBmYWxzZTtcbiAgICB2YXIgdGV4dHVyZVJvb3RQYXRoID0gb3B0cy50ZXh0dXJlUm9vdFBhdGg7XG4gICAgdXRpbC5lYWNoKGpzb24udGV4dHVyZXMsIGZ1bmN0aW9uKHRleHR1cmVJbmZvLCBuYW1lKSB7XG4gICAgICAgIHZhciB0ZXh0dXJlO1xuICAgICAgICB2YXIgcGF0aCA9IHRleHR1cmVJbmZvLnBhdGg7XG4gICAgICAgIHZhciBwYXJhbWV0ZXJzID0gY29udmVydFBhcmFtZXRlcih0ZXh0dXJlSW5mby5wYXJhbWV0ZXJzKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGF0aCkgJiYgcGF0aC5sZW5ndGggPT09IDYpIHtcbiAgICAgICAgICAgIGlmICh0ZXh0dXJlUm9vdFBhdGgpIHtcbiAgICAgICAgICAgICAgICBwYXRoID0gcGF0aC5tYXAoZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXRpbC5yZWxhdGl2ZTJhYnNvbHV0ZShpdGVtLCB0ZXh0dXJlUm9vdFBhdGgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGV4dHVyZSA9IG5ldyBUZXh0dXJlQ3ViZShwYXJhbWV0ZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKHRleHR1cmVSb290UGF0aCkge1xuICAgICAgICAgICAgICAgIHBhdGggPSB1dGlsLnJlbGF0aXZlMmFic29sdXRlKHBhdGgsIHRleHR1cmVSb290UGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXh0dXJlID0gbmV3IFRleHR1cmUyRChwYXJhbWV0ZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRleHR1cmUubG9hZChwYXRoKTtcbiAgICAgICAgbG9hZGluZysrO1xuICAgICAgICB0ZXh0dXJlLm9uY2UoJ3N1Y2Nlc3MnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRleHR1cmVzW25hbWVdID0gdGV4dHVyZTtcbiAgICAgICAgICAgIGxvYWRpbmctLTtcbiAgICAgICAgICAgIGlmIChsb2FkaW5nID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodGV4dHVyZXMpO1xuICAgICAgICAgICAgICAgIGNiZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaWYgKGxvYWRpbmcgPT09IDAgJiYgIWNiZCkge1xuICAgICAgICBjYWxsYmFjayh0ZXh0dXJlcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTaXplU2V0SGFuZGxlcihuYW1lLCBleHByRnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgLy8gUEVORElORyB2aWV3cG9ydCBzaXplIG9yIHdpbmRvdyBzaXplXG4gICAgICAgIHZhciBkcHIgPSByZW5kZXJlci5nZXREZXZpY2VQaXhlbFJhdGlvKCk7XG4gICAgICAgIC8vIFBFTkRJTkcgSWYgbXVsdGlwbHkgZHByID9cbiAgICAgICAgdmFyIHdpZHRoID0gcmVuZGVyZXIuZ2V0V2lkdGgoKTtcbiAgICAgICAgdmFyIGhlaWdodCA9IHJlbmRlcmVyLmdldEhlaWdodCgpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gZXhwckZ1bmMod2lkdGgsIGhlaWdodCwgZHByKTtcbiAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXIobmFtZSwgcmVzdWx0KTtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTaXplUGFyc2VyKG5hbWUsIGV4cHJGdW5jLCBzY2FsZSkge1xuICAgIHNjYWxlID0gc2NhbGUgfHwgMTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBkcHIgPSByZW5kZXJlci5nZXREZXZpY2VQaXhlbFJhdGlvKCk7XG4gICAgICAgIHZhciB3aWR0aCA9IHJlbmRlcmVyLmdldFdpZHRoKCkgKiBzY2FsZTtcbiAgICAgICAgdmFyIGhlaWdodCA9IHJlbmRlcmVyLmdldEhlaWdodCgpICogc2NhbGU7XG4gICAgICAgIHJldHVybiBleHByRnVuYyh3aWR0aCwgaGVpZ2h0LCBkcHIpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIHRyeUNvbnZlcnRFeHByKHN0cmluZykge1xuICAgIC8vIFBFTkRJTkdcbiAgICB2YXIgZXhwclJlcyA9IC9eZXhwclxcKCguKilcXCkkLy5leGVjKHN0cmluZyk7XG4gICAgaWYgKGV4cHJSZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBmdW5jID0gbmV3IEZ1bmN0aW9uKCd3aWR0aCcsICdoZWlnaHQnLCAnZHByJywgJ3JldHVybiAnICsgZXhwclJlc1sxXSk7XG4gICAgICAgICAgICAvLyBUcnkgcnVuIHRcbiAgICAgICAgICAgIGZ1bmMoMSwgMSk7XG5cbiAgICAgICAgICAgIHJldHVybiBmdW5jO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZXhwcmVzc2lvbi4nKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9zaXRvcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvY3JlYXRlQ29tcG9zaXRvci5qc1xuLy8gbW9kdWxlIGlkID0gNjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///62\n");

/***/ }),
/* 63 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__glmatrix_vec2__ = __webpack_require__(45);\n\n\n\n\n\n/**\n * @constructor clay.geometry.Cone\n * @extends clay.Geometry\n * @param {Object} [opt]\n * @param {number} [opt.topRadius]\n * @param {number} [opt.bottomRadius]\n * @param {number} [opt.height]\n * @param {number} [opt.capSegments]\n * @param {number} [opt.heightSegments]\n */\nvar Cone = __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */].extend(/** @lends clay.geometry.Cone# */ {\n    dynamic: false,\n    /**\n     * @type {number}\n     */\n    topRadius: 0,\n\n    /**\n     * @type {number}\n     */\n    bottomRadius: 1,\n\n    /**\n     * @type {number}\n     */\n    height: 2,\n\n    /**\n     * @type {number}\n     */\n    capSegments: 20,\n\n    /**\n     * @type {number}\n     */\n    heightSegments: 1\n}, function() {\n    this.build();\n},\n/** @lends clay.geometry.Cone.prototype */\n{\n    /**\n     * Build cone geometry\n     */\n    build: function() {\n        var positions = [];\n        var texcoords = [];\n        var faces = [];\n        positions.length = 0;\n        texcoords.length = 0;\n        faces.length = 0;\n        // Top cap\n        var capSegRadial = Math.PI * 2 / this.capSegments;\n\n        var topCap = [];\n        var bottomCap = [];\n\n        var r1 = this.topRadius;\n        var r2 = this.bottomRadius;\n        var y = this.height / 2;\n\n        var c1 = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].fromValues(0, y, 0);\n        var c2 = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].fromValues(0, -y, 0);\n        for (var i = 0; i < this.capSegments; i++) {\n            var theta = i * capSegRadial;\n            var x = r1 * Math.sin(theta);\n            var z = r1 * Math.cos(theta);\n            topCap.push(__WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].fromValues(x, y, z));\n\n            x = r2 * Math.sin(theta);\n            z = r2 * Math.cos(theta);\n            bottomCap.push(__WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].fromValues(x, -y, z));\n        }\n\n        // Build top cap\n        positions.push(c1);\n        // FIXME\n        texcoords.push(__WEBPACK_IMPORTED_MODULE_3__glmatrix_vec2__[\"a\" /* default */].fromValues(0, 1));\n        var n = this.capSegments;\n        for (var i = 0; i < n; i++) {\n            positions.push(topCap[i]);\n            // FIXME\n            texcoords.push(__WEBPACK_IMPORTED_MODULE_3__glmatrix_vec2__[\"a\" /* default */].fromValues(i / n, 0));\n            faces.push([0, i+1, (i+1) % n + 1]);\n        }\n\n        // Build bottom cap\n        var offset = positions.length;\n        positions.push(c2);\n        texcoords.push(__WEBPACK_IMPORTED_MODULE_3__glmatrix_vec2__[\"a\" /* default */].fromValues(0, 1));\n        for (var i = 0; i < n; i++) {\n            positions.push(bottomCap[i]);\n            // FIXME\n            texcoords.push(__WEBPACK_IMPORTED_MODULE_3__glmatrix_vec2__[\"a\" /* default */].fromValues(i / n, 0));\n            faces.push([offset, offset+((i+1) % n + 1), offset+i+1]);\n        }\n\n        // Build side\n        offset = positions.length;\n        var n2 = this.heightSegments;\n        for (var i = 0; i < n; i++) {\n            for (var j = 0; j < n2+1; j++) {\n                var v = j / n2;\n                positions.push(__WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].lerp(__WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].create(), topCap[i], bottomCap[i], v));\n                texcoords.push(__WEBPACK_IMPORTED_MODULE_3__glmatrix_vec2__[\"a\" /* default */].fromValues(i / n, v));\n            }\n        }\n        for (var i = 0; i < n; i++) {\n            for (var j = 0; j < n2; j++) {\n                var i1 = i * (n2 + 1) + j;\n                var i2 = ((i + 1) % n) * (n2 + 1) + j;\n                var i3 = ((i + 1) % n) * (n2 + 1) + j + 1;\n                var i4 = i * (n2 + 1) + j + 1;\n                faces.push([offset+i2, offset+i1, offset+i4]);\n                faces.push([offset+i4, offset+i3, offset+i2]);\n            }\n        }\n\n        this.attributes.position.fromArray(positions);\n        this.attributes.texcoord0.fromArray(texcoords);\n\n        this.initIndicesFromArray(faces);\n\n        this.generateVertexNormals();\n\n        this.boundingBox = new __WEBPACK_IMPORTED_MODULE_1__math_BoundingBox__[\"a\" /* default */]();\n        var r = Math.max(this.topRadius, this.bottomRadius);\n        this.boundingBox.min.set(-r, -this.height/2, -r);\n        this.boundingBox.max.set(r, this.height/2, r);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Cone);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nZW9tZXRyeS9Db25lLmpzPzQ4NDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEdlb21ldHJ5IGZyb20gJy4uL0dlb21ldHJ5JztcbmltcG9ydCBCb3VuZGluZ0JveCBmcm9tICcuLi9tYXRoL0JvdW5kaW5nQm94JztcbmltcG9ydCB2ZWMzIGZyb20gJy4uL2dsbWF0cml4L3ZlYzMnO1xuaW1wb3J0IHZlYzIgZnJvbSAnLi4vZ2xtYXRyaXgvdmVjMic7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuZ2VvbWV0cnkuQ29uZVxuICogQGV4dGVuZHMgY2xheS5HZW9tZXRyeVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdC50b3BSYWRpdXNdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdC5ib3R0b21SYWRpdXNdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdC5oZWlnaHRdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdC5jYXBTZWdtZW50c11cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LmhlaWdodFNlZ21lbnRzXVxuICovXG52YXIgQ29uZSA9IEdlb21ldHJ5LmV4dGVuZCgvKiogQGxlbmRzIGNsYXkuZ2VvbWV0cnkuQ29uZSMgKi8ge1xuICAgIGR5bmFtaWM6IGZhbHNlLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdG9wUmFkaXVzOiAwLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBib3R0b21SYWRpdXM6IDEsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGhlaWdodDogMixcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgY2FwU2VnbWVudHM6IDIwLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBoZWlnaHRTZWdtZW50czogMVxufSwgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5idWlsZCgpO1xufSxcbi8qKiBAbGVuZHMgY2xheS5nZW9tZXRyeS5Db25lLnByb3RvdHlwZSAqL1xue1xuICAgIC8qKlxuICAgICAqIEJ1aWxkIGNvbmUgZ2VvbWV0cnlcbiAgICAgKi9cbiAgICBidWlsZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBwb3NpdGlvbnMgPSBbXTtcbiAgICAgICAgdmFyIHRleGNvb3JkcyA9IFtdO1xuICAgICAgICB2YXIgZmFjZXMgPSBbXTtcbiAgICAgICAgcG9zaXRpb25zLmxlbmd0aCA9IDA7XG4gICAgICAgIHRleGNvb3Jkcy5sZW5ndGggPSAwO1xuICAgICAgICBmYWNlcy5sZW5ndGggPSAwO1xuICAgICAgICAvLyBUb3AgY2FwXG4gICAgICAgIHZhciBjYXBTZWdSYWRpYWwgPSBNYXRoLlBJICogMiAvIHRoaXMuY2FwU2VnbWVudHM7XG5cbiAgICAgICAgdmFyIHRvcENhcCA9IFtdO1xuICAgICAgICB2YXIgYm90dG9tQ2FwID0gW107XG5cbiAgICAgICAgdmFyIHIxID0gdGhpcy50b3BSYWRpdXM7XG4gICAgICAgIHZhciByMiA9IHRoaXMuYm90dG9tUmFkaXVzO1xuICAgICAgICB2YXIgeSA9IHRoaXMuaGVpZ2h0IC8gMjtcblxuICAgICAgICB2YXIgYzEgPSB2ZWMzLmZyb21WYWx1ZXMoMCwgeSwgMCk7XG4gICAgICAgIHZhciBjMiA9IHZlYzMuZnJvbVZhbHVlcygwLCAteSwgMCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jYXBTZWdtZW50czsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGhldGEgPSBpICogY2FwU2VnUmFkaWFsO1xuICAgICAgICAgICAgdmFyIHggPSByMSAqIE1hdGguc2luKHRoZXRhKTtcbiAgICAgICAgICAgIHZhciB6ID0gcjEgKiBNYXRoLmNvcyh0aGV0YSk7XG4gICAgICAgICAgICB0b3BDYXAucHVzaCh2ZWMzLmZyb21WYWx1ZXMoeCwgeSwgeikpO1xuXG4gICAgICAgICAgICB4ID0gcjIgKiBNYXRoLnNpbih0aGV0YSk7XG4gICAgICAgICAgICB6ID0gcjIgKiBNYXRoLmNvcyh0aGV0YSk7XG4gICAgICAgICAgICBib3R0b21DYXAucHVzaCh2ZWMzLmZyb21WYWx1ZXMoeCwgLXksIHopKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJ1aWxkIHRvcCBjYXBcbiAgICAgICAgcG9zaXRpb25zLnB1c2goYzEpO1xuICAgICAgICAvLyBGSVhNRVxuICAgICAgICB0ZXhjb29yZHMucHVzaCh2ZWMyLmZyb21WYWx1ZXMoMCwgMSkpO1xuICAgICAgICB2YXIgbiA9IHRoaXMuY2FwU2VnbWVudHM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBwb3NpdGlvbnMucHVzaCh0b3BDYXBbaV0pO1xuICAgICAgICAgICAgLy8gRklYTUVcbiAgICAgICAgICAgIHRleGNvb3Jkcy5wdXNoKHZlYzIuZnJvbVZhbHVlcyhpIC8gbiwgMCkpO1xuICAgICAgICAgICAgZmFjZXMucHVzaChbMCwgaSsxLCAoaSsxKSAlIG4gKyAxXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCdWlsZCBib3R0b20gY2FwXG4gICAgICAgIHZhciBvZmZzZXQgPSBwb3NpdGlvbnMubGVuZ3RoO1xuICAgICAgICBwb3NpdGlvbnMucHVzaChjMik7XG4gICAgICAgIHRleGNvb3Jkcy5wdXNoKHZlYzIuZnJvbVZhbHVlcygwLCAxKSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBwb3NpdGlvbnMucHVzaChib3R0b21DYXBbaV0pO1xuICAgICAgICAgICAgLy8gRklYTUVcbiAgICAgICAgICAgIHRleGNvb3Jkcy5wdXNoKHZlYzIuZnJvbVZhbHVlcyhpIC8gbiwgMCkpO1xuICAgICAgICAgICAgZmFjZXMucHVzaChbb2Zmc2V0LCBvZmZzZXQrKChpKzEpICUgbiArIDEpLCBvZmZzZXQraSsxXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCdWlsZCBzaWRlXG4gICAgICAgIG9mZnNldCA9IHBvc2l0aW9ucy5sZW5ndGg7XG4gICAgICAgIHZhciBuMiA9IHRoaXMuaGVpZ2h0U2VnbWVudHM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG4yKzE7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciB2ID0gaiAvIG4yO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKHZlYzMubGVycCh2ZWMzLmNyZWF0ZSgpLCB0b3BDYXBbaV0sIGJvdHRvbUNhcFtpXSwgdikpO1xuICAgICAgICAgICAgICAgIHRleGNvb3Jkcy5wdXNoKHZlYzIuZnJvbVZhbHVlcyhpIC8gbiwgdikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG4yOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaTEgPSBpICogKG4yICsgMSkgKyBqO1xuICAgICAgICAgICAgICAgIHZhciBpMiA9ICgoaSArIDEpICUgbikgKiAobjIgKyAxKSArIGo7XG4gICAgICAgICAgICAgICAgdmFyIGkzID0gKChpICsgMSkgJSBuKSAqIChuMiArIDEpICsgaiArIDE7XG4gICAgICAgICAgICAgICAgdmFyIGk0ID0gaSAqIChuMiArIDEpICsgaiArIDE7XG4gICAgICAgICAgICAgICAgZmFjZXMucHVzaChbb2Zmc2V0K2kyLCBvZmZzZXQraTEsIG9mZnNldCtpNF0pO1xuICAgICAgICAgICAgICAgIGZhY2VzLnB1c2goW29mZnNldCtpNCwgb2Zmc2V0K2kzLCBvZmZzZXQraTJdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbi5mcm9tQXJyYXkocG9zaXRpb25zKTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnRleGNvb3JkMC5mcm9tQXJyYXkodGV4Y29vcmRzKTtcblxuICAgICAgICB0aGlzLmluaXRJbmRpY2VzRnJvbUFycmF5KGZhY2VzKTtcblxuICAgICAgICB0aGlzLmdlbmVyYXRlVmVydGV4Tm9ybWFscygpO1xuXG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgICAgdmFyIHIgPSBNYXRoLm1heCh0aGlzLnRvcFJhZGl1cywgdGhpcy5ib3R0b21SYWRpdXMpO1xuICAgICAgICB0aGlzLmJvdW5kaW5nQm94Lm1pbi5zZXQoLXIsIC10aGlzLmhlaWdodC8yLCAtcik7XG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3gubWF4LnNldChyLCB0aGlzLmhlaWdodC8yLCByKTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgQ29uZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZ2VvbWV0cnkvQ29uZS5qc1xuLy8gbW9kdWxlIGlkID0gNjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///63\n");

/***/ }),
/* 64 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("\n// Generate halton sequence\n// https://en.wikipedia.org/wiki/Halton_sequence\nfunction halton(index, base) {\n\n    var result = 0;\n    var f = 1 / base;\n    var i = index;\n    while (i > 0) {\n        result = result + f * (i % base);\n        i = Math.floor(i / base);\n        f = f / base;\n    }\n    return result;\n}\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (halton);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsLWFkdmFuY2VkLXJlbmRlcmVyL3NyYy9oYWx0b24uanM/NWI0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vIEdlbmVyYXRlIGhhbHRvbiBzZXF1ZW5jZVxuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSGFsdG9uX3NlcXVlbmNlXG5mdW5jdGlvbiBoYWx0b24oaW5kZXgsIGJhc2UpIHtcblxuICAgIHZhciByZXN1bHQgPSAwO1xuICAgIHZhciBmID0gMSAvIGJhc2U7XG4gICAgdmFyIGkgPSBpbmRleDtcbiAgICB3aGlsZSAoaSA+IDApIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgZiAqIChpICUgYmFzZSk7XG4gICAgICAgIGkgPSBNYXRoLmZsb29yKGkgLyBiYXNlKTtcbiAgICAgICAgZiA9IGYgLyBiYXNlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IGhhbHRvbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wtYWR2YW5jZWQtcmVuZGVyZXIvc3JjL2hhbHRvbi5qc1xuLy8gbW9kdWxlIGlkID0gNjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///64\n");

/***/ }),
/* 65 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__value__ = __webpack_require__(66);\n/* unused harmony reexport interpolate */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__array__ = __webpack_require__(120);\n/* unused harmony reexport interpolateArray */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__basis__ = __webpack_require__(69);\n/* unused harmony reexport interpolateBasis */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__basisClosed__ = __webpack_require__(118);\n/* unused harmony reexport interpolateBasisClosed */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__date__ = __webpack_require__(121);\n/* unused harmony reexport interpolateDate */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__discrete__ = __webpack_require__(227);\n/* unused harmony reexport interpolateDiscrete */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__hue__ = __webpack_require__(228);\n/* unused harmony reexport interpolateHue */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__number__ = __webpack_require__(43);\n/* unused harmony reexport interpolateNumber */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__object__ = __webpack_require__(122);\n/* unused harmony reexport interpolateObject */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__round__ = __webpack_require__(229);\n/* unused harmony reexport interpolateRound */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__string__ = __webpack_require__(123);\n/* unused harmony reexport interpolateString */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__transform_index__ = __webpack_require__(230);\n/* unused harmony reexport interpolateTransformCss */\n/* unused harmony reexport interpolateTransformSvg */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__zoom__ = __webpack_require__(233);\n/* unused harmony reexport interpolateZoom */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__rgb__ = __webpack_require__(117);\n/* unused harmony reexport interpolateRgb */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_13__rgb__[\"b\"]; });\n/* unused harmony reexport interpolateRgbBasisClosed */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__hsl__ = __webpack_require__(234);\n/* unused harmony reexport interpolateHsl */\n/* unused harmony reexport interpolateHslLong */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__lab__ = __webpack_require__(235);\n/* unused harmony reexport interpolateLab */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__hcl__ = __webpack_require__(236);\n/* unused harmony reexport interpolateHcl */\n/* unused harmony reexport interpolateHclLong */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__cubehelix__ = __webpack_require__(237);\n/* unused harmony reexport interpolateCubehelix */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_17__cubehelix__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__piecewise__ = __webpack_require__(238);\n/* unused harmony reexport piecewise */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__quantize__ = __webpack_require__(239);\n/* unused harmony reexport quantize */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2luZGV4LmpzPzI3MjAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlfSBmcm9tIFwiLi92YWx1ZVwiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlQXJyYXl9IGZyb20gXCIuL2FycmF5XCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVCYXNpc30gZnJvbSBcIi4vYmFzaXNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZUJhc2lzQ2xvc2VkfSBmcm9tIFwiLi9iYXNpc0Nsb3NlZFwiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlRGF0ZX0gZnJvbSBcIi4vZGF0ZVwiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlRGlzY3JldGV9IGZyb20gXCIuL2Rpc2NyZXRlXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVIdWV9IGZyb20gXCIuL2h1ZVwiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlTnVtYmVyfSBmcm9tIFwiLi9udW1iZXJcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZU9iamVjdH0gZnJvbSBcIi4vb2JqZWN0XCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVSb3VuZH0gZnJvbSBcIi4vcm91bmRcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZVN0cmluZ30gZnJvbSBcIi4vc3RyaW5nXCI7XG5leHBvcnQge2ludGVycG9sYXRlVHJhbnNmb3JtQ3NzLCBpbnRlcnBvbGF0ZVRyYW5zZm9ybVN2Z30gZnJvbSBcIi4vdHJhbnNmb3JtL2luZGV4XCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVab29tfSBmcm9tIFwiLi96b29tXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVSZ2IsIHJnYkJhc2lzIGFzIGludGVycG9sYXRlUmdiQmFzaXMsIHJnYkJhc2lzQ2xvc2VkIGFzIGludGVycG9sYXRlUmdiQmFzaXNDbG9zZWR9IGZyb20gXCIuL3JnYlwiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlSHNsLCBoc2xMb25nIGFzIGludGVycG9sYXRlSHNsTG9uZ30gZnJvbSBcIi4vaHNsXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVMYWJ9IGZyb20gXCIuL2xhYlwiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlSGNsLCBoY2xMb25nIGFzIGludGVycG9sYXRlSGNsTG9uZ30gZnJvbSBcIi4vaGNsXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVDdWJlaGVsaXgsIGN1YmVoZWxpeExvbmcgYXMgaW50ZXJwb2xhdGVDdWJlaGVsaXhMb25nfSBmcm9tIFwiLi9jdWJlaGVsaXhcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBwaWVjZXdpc2V9IGZyb20gXCIuL3BpZWNld2lzZVwiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIHF1YW50aXplfSBmcm9tIFwiLi9xdWFudGl6ZVwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA2NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///65\n");

/***/ }),
/* 66 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__rgb__ = __webpack_require__(117);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__array__ = __webpack_require__(120);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__date__ = __webpack_require__(121);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__number__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__object__ = __webpack_require__(122);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__string__ = __webpack_require__(123);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__constant__ = __webpack_require__(119);\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? Object(__WEBPACK_IMPORTED_MODULE_7__constant__[\"a\" /* default */])(b)\n      : (t === \"number\" ? __WEBPACK_IMPORTED_MODULE_4__number__[\"a\" /* default */]\n      : t === \"string\" ? ((c = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"a\" /* color */])(b)) ? (b = c, __WEBPACK_IMPORTED_MODULE_1__rgb__[\"a\" /* default */]) : __WEBPACK_IMPORTED_MODULE_6__string__[\"a\" /* default */])\n      : b instanceof __WEBPACK_IMPORTED_MODULE_0_d3_color__[\"a\" /* color */] ? __WEBPACK_IMPORTED_MODULE_1__rgb__[\"a\" /* default */]\n      : b instanceof Date ? __WEBPACK_IMPORTED_MODULE_3__date__[\"a\" /* default */]\n      : Array.isArray(b) ? __WEBPACK_IMPORTED_MODULE_2__array__[\"a\" /* default */]\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? __WEBPACK_IMPORTED_MODULE_5__object__[\"a\" /* default */]\n      : __WEBPACK_IMPORTED_MODULE_4__number__[\"a\" /* default */])(a, b);\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3ZhbHVlLmpzP2FmM2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtjb2xvcn0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgcmdiIGZyb20gXCIuL3JnYlwiO1xuaW1wb3J0IGFycmF5IGZyb20gXCIuL2FycmF5XCI7XG5pbXBvcnQgZGF0ZSBmcm9tIFwiLi9kYXRlXCI7XG5pbXBvcnQgbnVtYmVyIGZyb20gXCIuL251bWJlclwiO1xuaW1wb3J0IG9iamVjdCBmcm9tIFwiLi9vYmplY3RcIjtcbmltcG9ydCBzdHJpbmcgZnJvbSBcIi4vc3RyaW5nXCI7XG5pbXBvcnQgY29uc3RhbnQgZnJvbSBcIi4vY29uc3RhbnRcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgdCA9IHR5cGVvZiBiLCBjO1xuICByZXR1cm4gYiA9PSBudWxsIHx8IHQgPT09IFwiYm9vbGVhblwiID8gY29uc3RhbnQoYilcbiAgICAgIDogKHQgPT09IFwibnVtYmVyXCIgPyBudW1iZXJcbiAgICAgIDogdCA9PT0gXCJzdHJpbmdcIiA/ICgoYyA9IGNvbG9yKGIpKSA/IChiID0gYywgcmdiKSA6IHN0cmluZylcbiAgICAgIDogYiBpbnN0YW5jZW9mIGNvbG9yID8gcmdiXG4gICAgICA6IGIgaW5zdGFuY2VvZiBEYXRlID8gZGF0ZVxuICAgICAgOiBBcnJheS5pc0FycmF5KGIpID8gYXJyYXlcbiAgICAgIDogdHlwZW9mIGIudmFsdWVPZiAhPT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBiLnRvU3RyaW5nICE9PSBcImZ1bmN0aW9uXCIgfHwgaXNOYU4oYikgPyBvYmplY3RcbiAgICAgIDogbnVtYmVyKShhLCBiKTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy92YWx1ZS5qc1xuLy8gbW9kdWxlIGlkID0gNjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///66\n");

/***/ }),
/* 67 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"a\"] = Color;\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return darker; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return brighter; });\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = color;\n/* harmony export (immutable) */ __webpack_exports__[\"h\"] = rgbConvert;\n/* harmony export (immutable) */ __webpack_exports__[\"g\"] = rgb;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = Rgb;\n/* unused harmony export hslConvert */\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = hsl;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__define__ = __webpack_require__(68);\n\n\nfunction Color() {}\n\nvar darker = 0.7;\nvar brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\nObject(__WEBPACK_IMPORTED_MODULE_0__define__[\"a\" /* default */])(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nfunction color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nfunction rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nfunction rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nfunction Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\nObject(__WEBPACK_IMPORTED_MODULE_0__define__[\"a\" /* default */])(Rgb, rgb, Object(__WEBPACK_IMPORTED_MODULE_0__define__[\"b\" /* extend */])(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nfunction hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nfunction hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nObject(__WEBPACK_IMPORTED_MODULE_0__define__[\"a\" /* default */])(Hsl, hsl, Object(__WEBPACK_IMPORTED_MODULE_0__define__[\"b\" /* extend */])(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2NvbG9yLmpzPzc1MjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmluZSwge2V4dGVuZH0gZnJvbSBcIi4vZGVmaW5lXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBDb2xvcigpIHt9XG5cbmV4cG9ydCB2YXIgZGFya2VyID0gMC43O1xuZXhwb3J0IHZhciBicmlnaHRlciA9IDEgLyBkYXJrZXI7XG5cbnZhciByZUkgPSBcIlxcXFxzKihbKy1dP1xcXFxkKylcXFxccypcIixcbiAgICByZU4gPSBcIlxcXFxzKihbKy1dP1xcXFxkKlxcXFwuP1xcXFxkKyg/OltlRV1bKy1dP1xcXFxkKyk/KVxcXFxzKlwiLFxuICAgIHJlUCA9IFwiXFxcXHMqKFsrLV0/XFxcXGQqXFxcXC4/XFxcXGQrKD86W2VFXVsrLV0/XFxcXGQrKT8pJVxcXFxzKlwiLFxuICAgIHJlSGV4MyA9IC9eIyhbMC05YS1mXXszfSkkLyxcbiAgICByZUhleDYgPSAvXiMoWzAtOWEtZl17Nn0pJC8sXG4gICAgcmVSZ2JJbnRlZ2VyID0gbmV3IFJlZ0V4cChcIl5yZ2JcXFxcKFwiICsgW3JlSSwgcmVJLCByZUldICsgXCJcXFxcKSRcIiksXG4gICAgcmVSZ2JQZXJjZW50ID0gbmV3IFJlZ0V4cChcIl5yZ2JcXFxcKFwiICsgW3JlUCwgcmVQLCByZVBdICsgXCJcXFxcKSRcIiksXG4gICAgcmVSZ2JhSW50ZWdlciA9IG5ldyBSZWdFeHAoXCJecmdiYVxcXFwoXCIgKyBbcmVJLCByZUksIHJlSSwgcmVOXSArIFwiXFxcXCkkXCIpLFxuICAgIHJlUmdiYVBlcmNlbnQgPSBuZXcgUmVnRXhwKFwiXnJnYmFcXFxcKFwiICsgW3JlUCwgcmVQLCByZVAsIHJlTl0gKyBcIlxcXFwpJFwiKSxcbiAgICByZUhzbFBlcmNlbnQgPSBuZXcgUmVnRXhwKFwiXmhzbFxcXFwoXCIgKyBbcmVOLCByZVAsIHJlUF0gKyBcIlxcXFwpJFwiKSxcbiAgICByZUhzbGFQZXJjZW50ID0gbmV3IFJlZ0V4cChcIl5oc2xhXFxcXChcIiArIFtyZU4sIHJlUCwgcmVQLCByZU5dICsgXCJcXFxcKSRcIik7XG5cbnZhciBuYW1lZCA9IHtcbiAgYWxpY2VibHVlOiAweGYwZjhmZixcbiAgYW50aXF1ZXdoaXRlOiAweGZhZWJkNyxcbiAgYXF1YTogMHgwMGZmZmYsXG4gIGFxdWFtYXJpbmU6IDB4N2ZmZmQ0LFxuICBhenVyZTogMHhmMGZmZmYsXG4gIGJlaWdlOiAweGY1ZjVkYyxcbiAgYmlzcXVlOiAweGZmZTRjNCxcbiAgYmxhY2s6IDB4MDAwMDAwLFxuICBibGFuY2hlZGFsbW9uZDogMHhmZmViY2QsXG4gIGJsdWU6IDB4MDAwMGZmLFxuICBibHVldmlvbGV0OiAweDhhMmJlMixcbiAgYnJvd246IDB4YTUyYTJhLFxuICBidXJseXdvb2Q6IDB4ZGViODg3LFxuICBjYWRldGJsdWU6IDB4NWY5ZWEwLFxuICBjaGFydHJldXNlOiAweDdmZmYwMCxcbiAgY2hvY29sYXRlOiAweGQyNjkxZSxcbiAgY29yYWw6IDB4ZmY3ZjUwLFxuICBjb3JuZmxvd2VyYmx1ZTogMHg2NDk1ZWQsXG4gIGNvcm5zaWxrOiAweGZmZjhkYyxcbiAgY3JpbXNvbjogMHhkYzE0M2MsXG4gIGN5YW46IDB4MDBmZmZmLFxuICBkYXJrYmx1ZTogMHgwMDAwOGIsXG4gIGRhcmtjeWFuOiAweDAwOGI4YixcbiAgZGFya2dvbGRlbnJvZDogMHhiODg2MGIsXG4gIGRhcmtncmF5OiAweGE5YTlhOSxcbiAgZGFya2dyZWVuOiAweDAwNjQwMCxcbiAgZGFya2dyZXk6IDB4YTlhOWE5LFxuICBkYXJra2hha2k6IDB4YmRiNzZiLFxuICBkYXJrbWFnZW50YTogMHg4YjAwOGIsXG4gIGRhcmtvbGl2ZWdyZWVuOiAweDU1NmIyZixcbiAgZGFya29yYW5nZTogMHhmZjhjMDAsXG4gIGRhcmtvcmNoaWQ6IDB4OTkzMmNjLFxuICBkYXJrcmVkOiAweDhiMDAwMCxcbiAgZGFya3NhbG1vbjogMHhlOTk2N2EsXG4gIGRhcmtzZWFncmVlbjogMHg4ZmJjOGYsXG4gIGRhcmtzbGF0ZWJsdWU6IDB4NDgzZDhiLFxuICBkYXJrc2xhdGVncmF5OiAweDJmNGY0ZixcbiAgZGFya3NsYXRlZ3JleTogMHgyZjRmNGYsXG4gIGRhcmt0dXJxdW9pc2U6IDB4MDBjZWQxLFxuICBkYXJrdmlvbGV0OiAweDk0MDBkMyxcbiAgZGVlcHBpbms6IDB4ZmYxNDkzLFxuICBkZWVwc2t5Ymx1ZTogMHgwMGJmZmYsXG4gIGRpbWdyYXk6IDB4Njk2OTY5LFxuICBkaW1ncmV5OiAweDY5Njk2OSxcbiAgZG9kZ2VyYmx1ZTogMHgxZTkwZmYsXG4gIGZpcmVicmljazogMHhiMjIyMjIsXG4gIGZsb3JhbHdoaXRlOiAweGZmZmFmMCxcbiAgZm9yZXN0Z3JlZW46IDB4MjI4YjIyLFxuICBmdWNoc2lhOiAweGZmMDBmZixcbiAgZ2FpbnNib3JvOiAweGRjZGNkYyxcbiAgZ2hvc3R3aGl0ZTogMHhmOGY4ZmYsXG4gIGdvbGQ6IDB4ZmZkNzAwLFxuICBnb2xkZW5yb2Q6IDB4ZGFhNTIwLFxuICBncmF5OiAweDgwODA4MCxcbiAgZ3JlZW46IDB4MDA4MDAwLFxuICBncmVlbnllbGxvdzogMHhhZGZmMmYsXG4gIGdyZXk6IDB4ODA4MDgwLFxuICBob25leWRldzogMHhmMGZmZjAsXG4gIGhvdHBpbms6IDB4ZmY2OWI0LFxuICBpbmRpYW5yZWQ6IDB4Y2Q1YzVjLFxuICBpbmRpZ286IDB4NGIwMDgyLFxuICBpdm9yeTogMHhmZmZmZjAsXG4gIGtoYWtpOiAweGYwZTY4YyxcbiAgbGF2ZW5kZXI6IDB4ZTZlNmZhLFxuICBsYXZlbmRlcmJsdXNoOiAweGZmZjBmNSxcbiAgbGF3bmdyZWVuOiAweDdjZmMwMCxcbiAgbGVtb25jaGlmZm9uOiAweGZmZmFjZCxcbiAgbGlnaHRibHVlOiAweGFkZDhlNixcbiAgbGlnaHRjb3JhbDogMHhmMDgwODAsXG4gIGxpZ2h0Y3lhbjogMHhlMGZmZmYsXG4gIGxpZ2h0Z29sZGVucm9keWVsbG93OiAweGZhZmFkMixcbiAgbGlnaHRncmF5OiAweGQzZDNkMyxcbiAgbGlnaHRncmVlbjogMHg5MGVlOTAsXG4gIGxpZ2h0Z3JleTogMHhkM2QzZDMsXG4gIGxpZ2h0cGluazogMHhmZmI2YzEsXG4gIGxpZ2h0c2FsbW9uOiAweGZmYTA3YSxcbiAgbGlnaHRzZWFncmVlbjogMHgyMGIyYWEsXG4gIGxpZ2h0c2t5Ymx1ZTogMHg4N2NlZmEsXG4gIGxpZ2h0c2xhdGVncmF5OiAweDc3ODg5OSxcbiAgbGlnaHRzbGF0ZWdyZXk6IDB4Nzc4ODk5LFxuICBsaWdodHN0ZWVsYmx1ZTogMHhiMGM0ZGUsXG4gIGxpZ2h0eWVsbG93OiAweGZmZmZlMCxcbiAgbGltZTogMHgwMGZmMDAsXG4gIGxpbWVncmVlbjogMHgzMmNkMzIsXG4gIGxpbmVuOiAweGZhZjBlNixcbiAgbWFnZW50YTogMHhmZjAwZmYsXG4gIG1hcm9vbjogMHg4MDAwMDAsXG4gIG1lZGl1bWFxdWFtYXJpbmU6IDB4NjZjZGFhLFxuICBtZWRpdW1ibHVlOiAweDAwMDBjZCxcbiAgbWVkaXVtb3JjaGlkOiAweGJhNTVkMyxcbiAgbWVkaXVtcHVycGxlOiAweDkzNzBkYixcbiAgbWVkaXVtc2VhZ3JlZW46IDB4M2NiMzcxLFxuICBtZWRpdW1zbGF0ZWJsdWU6IDB4N2I2OGVlLFxuICBtZWRpdW1zcHJpbmdncmVlbjogMHgwMGZhOWEsXG4gIG1lZGl1bXR1cnF1b2lzZTogMHg0OGQxY2MsXG4gIG1lZGl1bXZpb2xldHJlZDogMHhjNzE1ODUsXG4gIG1pZG5pZ2h0Ymx1ZTogMHgxOTE5NzAsXG4gIG1pbnRjcmVhbTogMHhmNWZmZmEsXG4gIG1pc3R5cm9zZTogMHhmZmU0ZTEsXG4gIG1vY2Nhc2luOiAweGZmZTRiNSxcbiAgbmF2YWpvd2hpdGU6IDB4ZmZkZWFkLFxuICBuYXZ5OiAweDAwMDA4MCxcbiAgb2xkbGFjZTogMHhmZGY1ZTYsXG4gIG9saXZlOiAweDgwODAwMCxcbiAgb2xpdmVkcmFiOiAweDZiOGUyMyxcbiAgb3JhbmdlOiAweGZmYTUwMCxcbiAgb3JhbmdlcmVkOiAweGZmNDUwMCxcbiAgb3JjaGlkOiAweGRhNzBkNixcbiAgcGFsZWdvbGRlbnJvZDogMHhlZWU4YWEsXG4gIHBhbGVncmVlbjogMHg5OGZiOTgsXG4gIHBhbGV0dXJxdW9pc2U6IDB4YWZlZWVlLFxuICBwYWxldmlvbGV0cmVkOiAweGRiNzA5MyxcbiAgcGFwYXlhd2hpcDogMHhmZmVmZDUsXG4gIHBlYWNocHVmZjogMHhmZmRhYjksXG4gIHBlcnU6IDB4Y2Q4NTNmLFxuICBwaW5rOiAweGZmYzBjYixcbiAgcGx1bTogMHhkZGEwZGQsXG4gIHBvd2RlcmJsdWU6IDB4YjBlMGU2LFxuICBwdXJwbGU6IDB4ODAwMDgwLFxuICByZWJlY2NhcHVycGxlOiAweDY2MzM5OSxcbiAgcmVkOiAweGZmMDAwMCxcbiAgcm9zeWJyb3duOiAweGJjOGY4ZixcbiAgcm95YWxibHVlOiAweDQxNjllMSxcbiAgc2FkZGxlYnJvd246IDB4OGI0NTEzLFxuICBzYWxtb246IDB4ZmE4MDcyLFxuICBzYW5keWJyb3duOiAweGY0YTQ2MCxcbiAgc2VhZ3JlZW46IDB4MmU4YjU3LFxuICBzZWFzaGVsbDogMHhmZmY1ZWUsXG4gIHNpZW5uYTogMHhhMDUyMmQsXG4gIHNpbHZlcjogMHhjMGMwYzAsXG4gIHNreWJsdWU6IDB4ODdjZWViLFxuICBzbGF0ZWJsdWU6IDB4NmE1YWNkLFxuICBzbGF0ZWdyYXk6IDB4NzA4MDkwLFxuICBzbGF0ZWdyZXk6IDB4NzA4MDkwLFxuICBzbm93OiAweGZmZmFmYSxcbiAgc3ByaW5nZ3JlZW46IDB4MDBmZjdmLFxuICBzdGVlbGJsdWU6IDB4NDY4MmI0LFxuICB0YW46IDB4ZDJiNDhjLFxuICB0ZWFsOiAweDAwODA4MCxcbiAgdGhpc3RsZTogMHhkOGJmZDgsXG4gIHRvbWF0bzogMHhmZjYzNDcsXG4gIHR1cnF1b2lzZTogMHg0MGUwZDAsXG4gIHZpb2xldDogMHhlZTgyZWUsXG4gIHdoZWF0OiAweGY1ZGViMyxcbiAgd2hpdGU6IDB4ZmZmZmZmLFxuICB3aGl0ZXNtb2tlOiAweGY1ZjVmNSxcbiAgeWVsbG93OiAweGZmZmYwMCxcbiAgeWVsbG93Z3JlZW46IDB4OWFjZDMyXG59O1xuXG5kZWZpbmUoQ29sb3IsIGNvbG9yLCB7XG4gIGNvcHk6IGZ1bmN0aW9uKGNoYW5uZWxzKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IHRoaXMuY29uc3RydWN0b3IsIHRoaXMsIGNoYW5uZWxzKTtcbiAgfSxcbiAgZGlzcGxheWFibGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJnYigpLmRpc3BsYXlhYmxlKCk7XG4gIH0sXG4gIGhleDogY29sb3JfZm9ybWF0SGV4LCAvLyBEZXByZWNhdGVkISBVc2UgY29sb3IuZm9ybWF0SGV4LlxuICBmb3JtYXRIZXg6IGNvbG9yX2Zvcm1hdEhleCxcbiAgZm9ybWF0SHNsOiBjb2xvcl9mb3JtYXRIc2wsXG4gIGZvcm1hdFJnYjogY29sb3JfZm9ybWF0UmdiLFxuICB0b1N0cmluZzogY29sb3JfZm9ybWF0UmdiXG59KTtcblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0SGV4KCkge1xuICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRIZXgoKTtcbn1cblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0SHNsKCkge1xuICByZXR1cm4gaHNsQ29udmVydCh0aGlzKS5mb3JtYXRIc2woKTtcbn1cblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0UmdiKCkge1xuICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRSZ2IoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29sb3IoZm9ybWF0KSB7XG4gIHZhciBtO1xuICBmb3JtYXQgPSAoZm9ybWF0ICsgXCJcIikudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiAobSA9IHJlSGV4My5leGVjKGZvcm1hdCkpID8gKG0gPSBwYXJzZUludChtWzFdLCAxNiksIG5ldyBSZ2IoKG0gPj4gOCAmIDB4ZikgfCAobSA+PiA0ICYgMHgwZjApLCAobSA+PiA0ICYgMHhmKSB8IChtICYgMHhmMCksICgobSAmIDB4ZikgPDwgNCkgfCAobSAmIDB4ZiksIDEpKSAvLyAjZjAwXG4gICAgICA6IChtID0gcmVIZXg2LmV4ZWMoZm9ybWF0KSkgPyByZ2JuKHBhcnNlSW50KG1bMV0sIDE2KSkgLy8gI2ZmMDAwMFxuICAgICAgOiAobSA9IHJlUmdiSW50ZWdlci5leGVjKGZvcm1hdCkpID8gbmV3IFJnYihtWzFdLCBtWzJdLCBtWzNdLCAxKSAvLyByZ2IoMjU1LCAwLCAwKVxuICAgICAgOiAobSA9IHJlUmdiUGVyY2VudC5leGVjKGZvcm1hdCkpID8gbmV3IFJnYihtWzFdICogMjU1IC8gMTAwLCBtWzJdICogMjU1IC8gMTAwLCBtWzNdICogMjU1IC8gMTAwLCAxKSAvLyByZ2IoMTAwJSwgMCUsIDAlKVxuICAgICAgOiAobSA9IHJlUmdiYUludGVnZXIuZXhlYyhmb3JtYXQpKSA/IHJnYmEobVsxXSwgbVsyXSwgbVszXSwgbVs0XSkgLy8gcmdiYSgyNTUsIDAsIDAsIDEpXG4gICAgICA6IChtID0gcmVSZ2JhUGVyY2VudC5leGVjKGZvcm1hdCkpID8gcmdiYShtWzFdICogMjU1IC8gMTAwLCBtWzJdICogMjU1IC8gMTAwLCBtWzNdICogMjU1IC8gMTAwLCBtWzRdKSAvLyByZ2IoMTAwJSwgMCUsIDAlLCAxKVxuICAgICAgOiAobSA9IHJlSHNsUGVyY2VudC5leGVjKGZvcm1hdCkpID8gaHNsYShtWzFdLCBtWzJdIC8gMTAwLCBtWzNdIC8gMTAwLCAxKSAvLyBoc2woMTIwLCA1MCUsIDUwJSlcbiAgICAgIDogKG0gPSByZUhzbGFQZXJjZW50LmV4ZWMoZm9ybWF0KSkgPyBoc2xhKG1bMV0sIG1bMl0gLyAxMDAsIG1bM10gLyAxMDAsIG1bNF0pIC8vIGhzbGEoMTIwLCA1MCUsIDUwJSwgMSlcbiAgICAgIDogbmFtZWQuaGFzT3duUHJvcGVydHkoZm9ybWF0KSA/IHJnYm4obmFtZWRbZm9ybWF0XSkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgIDogZm9ybWF0ID09PSBcInRyYW5zcGFyZW50XCIgPyBuZXcgUmdiKE5hTiwgTmFOLCBOYU4sIDApXG4gICAgICA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHJnYm4obikge1xuICByZXR1cm4gbmV3IFJnYihuID4+IDE2ICYgMHhmZiwgbiA+PiA4ICYgMHhmZiwgbiAmIDB4ZmYsIDEpO1xufVxuXG5mdW5jdGlvbiByZ2JhKHIsIGcsIGIsIGEpIHtcbiAgaWYgKGEgPD0gMCkgciA9IGcgPSBiID0gTmFOO1xuICByZXR1cm4gbmV3IFJnYihyLCBnLCBiLCBhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJnYkNvbnZlcnQobykge1xuICBpZiAoIShvIGluc3RhbmNlb2YgQ29sb3IpKSBvID0gY29sb3Iobyk7XG4gIGlmICghbykgcmV0dXJuIG5ldyBSZ2I7XG4gIG8gPSBvLnJnYigpO1xuICByZXR1cm4gbmV3IFJnYihvLnIsIG8uZywgby5iLCBvLm9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmdiKHIsIGcsIGIsIG9wYWNpdHkpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyByZ2JDb252ZXJ0KHIpIDogbmV3IFJnYihyLCBnLCBiLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZ2IociwgZywgYiwgb3BhY2l0eSkge1xuICB0aGlzLnIgPSArcjtcbiAgdGhpcy5nID0gK2c7XG4gIHRoaXMuYiA9ICtiO1xuICB0aGlzLm9wYWNpdHkgPSArb3BhY2l0eTtcbn1cblxuZGVmaW5lKFJnYiwgcmdiLCBleHRlbmQoQ29sb3IsIHtcbiAgYnJpZ2h0ZXI6IGZ1bmN0aW9uKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gYnJpZ2h0ZXIgOiBNYXRoLnBvdyhicmlnaHRlciwgayk7XG4gICAgcmV0dXJuIG5ldyBSZ2IodGhpcy5yICogaywgdGhpcy5nICogaywgdGhpcy5iICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgZGFya2VyOiBmdW5jdGlvbihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGRhcmtlciA6IE1hdGgucG93KGRhcmtlciwgayk7XG4gICAgcmV0dXJuIG5ldyBSZ2IodGhpcy5yICogaywgdGhpcy5nICogaywgdGhpcy5iICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgcmdiOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSxcbiAgZGlzcGxheWFibGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoLTAuNSA8PSB0aGlzLnIgJiYgdGhpcy5yIDwgMjU1LjUpXG4gICAgICAgICYmICgtMC41IDw9IHRoaXMuZyAmJiB0aGlzLmcgPCAyNTUuNSlcbiAgICAgICAgJiYgKC0wLjUgPD0gdGhpcy5iICYmIHRoaXMuYiA8IDI1NS41KVxuICAgICAgICAmJiAoMCA8PSB0aGlzLm9wYWNpdHkgJiYgdGhpcy5vcGFjaXR5IDw9IDEpO1xuICB9LFxuICBoZXg6IHJnYl9mb3JtYXRIZXgsIC8vIERlcHJlY2F0ZWQhIFVzZSBjb2xvci5mb3JtYXRIZXguXG4gIGZvcm1hdEhleDogcmdiX2Zvcm1hdEhleCxcbiAgZm9ybWF0UmdiOiByZ2JfZm9ybWF0UmdiLFxuICB0b1N0cmluZzogcmdiX2Zvcm1hdFJnYlxufSkpO1xuXG5mdW5jdGlvbiByZ2JfZm9ybWF0SGV4KCkge1xuICByZXR1cm4gXCIjXCIgKyBoZXgodGhpcy5yKSArIGhleCh0aGlzLmcpICsgaGV4KHRoaXMuYik7XG59XG5cbmZ1bmN0aW9uIHJnYl9mb3JtYXRSZ2IoKSB7XG4gIHZhciBhID0gdGhpcy5vcGFjaXR5OyBhID0gaXNOYU4oYSkgPyAxIDogTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgYSkpO1xuICByZXR1cm4gKGEgPT09IDEgPyBcInJnYihcIiA6IFwicmdiYShcIilcbiAgICAgICsgTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHRoaXMucikgfHwgMCkpICsgXCIsIFwiXG4gICAgICArIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCh0aGlzLmcpIHx8IDApKSArIFwiLCBcIlxuICAgICAgKyBNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIE1hdGgucm91bmQodGhpcy5iKSB8fCAwKSlcbiAgICAgICsgKGEgPT09IDEgPyBcIilcIiA6IFwiLCBcIiArIGEgKyBcIilcIik7XG59XG5cbmZ1bmN0aW9uIGhleCh2YWx1ZSkge1xuICB2YWx1ZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCh2YWx1ZSkgfHwgMCkpO1xuICByZXR1cm4gKHZhbHVlIDwgMTYgPyBcIjBcIiA6IFwiXCIpICsgdmFsdWUudG9TdHJpbmcoMTYpO1xufVxuXG5mdW5jdGlvbiBoc2xhKGgsIHMsIGwsIGEpIHtcbiAgaWYgKGEgPD0gMCkgaCA9IHMgPSBsID0gTmFOO1xuICBlbHNlIGlmIChsIDw9IDAgfHwgbCA+PSAxKSBoID0gcyA9IE5hTjtcbiAgZWxzZSBpZiAocyA8PSAwKSBoID0gTmFOO1xuICByZXR1cm4gbmV3IEhzbChoLCBzLCBsLCBhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhzbENvbnZlcnQobykge1xuICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG5ldyBIc2woby5oLCBvLnMsIG8ubCwgby5vcGFjaXR5KTtcbiAgaWYgKCEobyBpbnN0YW5jZW9mIENvbG9yKSkgbyA9IGNvbG9yKG8pO1xuICBpZiAoIW8pIHJldHVybiBuZXcgSHNsO1xuICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG87XG4gIG8gPSBvLnJnYigpO1xuICB2YXIgciA9IG8uciAvIDI1NSxcbiAgICAgIGcgPSBvLmcgLyAyNTUsXG4gICAgICBiID0gby5iIC8gMjU1LFxuICAgICAgbWluID0gTWF0aC5taW4ociwgZywgYiksXG4gICAgICBtYXggPSBNYXRoLm1heChyLCBnLCBiKSxcbiAgICAgIGggPSBOYU4sXG4gICAgICBzID0gbWF4IC0gbWluLFxuICAgICAgbCA9IChtYXggKyBtaW4pIC8gMjtcbiAgaWYgKHMpIHtcbiAgICBpZiAociA9PT0gbWF4KSBoID0gKGcgLSBiKSAvIHMgKyAoZyA8IGIpICogNjtcbiAgICBlbHNlIGlmIChnID09PSBtYXgpIGggPSAoYiAtIHIpIC8gcyArIDI7XG4gICAgZWxzZSBoID0gKHIgLSBnKSAvIHMgKyA0O1xuICAgIHMgLz0gbCA8IDAuNSA/IG1heCArIG1pbiA6IDIgLSBtYXggLSBtaW47XG4gICAgaCAqPSA2MDtcbiAgfSBlbHNlIHtcbiAgICBzID0gbCA+IDAgJiYgbCA8IDEgPyAwIDogaDtcbiAgfVxuICByZXR1cm4gbmV3IEhzbChoLCBzLCBsLCBvLm9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaHNsKGgsIHMsIGwsIG9wYWNpdHkpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBoc2xDb252ZXJ0KGgpIDogbmV3IEhzbChoLCBzLCBsLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7XG59XG5cbmZ1bmN0aW9uIEhzbChoLCBzLCBsLCBvcGFjaXR5KSB7XG4gIHRoaXMuaCA9ICtoO1xuICB0aGlzLnMgPSArcztcbiAgdGhpcy5sID0gK2w7XG4gIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5O1xufVxuXG5kZWZpbmUoSHNsLCBoc2wsIGV4dGVuZChDb2xvciwge1xuICBicmlnaHRlcjogZnVuY3Rpb24oaykge1xuICAgIGsgPSBrID09IG51bGwgPyBicmlnaHRlciA6IE1hdGgucG93KGJyaWdodGVyLCBrKTtcbiAgICByZXR1cm4gbmV3IEhzbCh0aGlzLmgsIHRoaXMucywgdGhpcy5sICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgZGFya2VyOiBmdW5jdGlvbihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGRhcmtlciA6IE1hdGgucG93KGRhcmtlciwgayk7XG4gICAgcmV0dXJuIG5ldyBIc2wodGhpcy5oLCB0aGlzLnMsIHRoaXMubCAqIGssIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIHJnYjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGggPSB0aGlzLmggJSAzNjAgKyAodGhpcy5oIDwgMCkgKiAzNjAsXG4gICAgICAgIHMgPSBpc05hTihoKSB8fCBpc05hTih0aGlzLnMpID8gMCA6IHRoaXMucyxcbiAgICAgICAgbCA9IHRoaXMubCxcbiAgICAgICAgbTIgPSBsICsgKGwgPCAwLjUgPyBsIDogMSAtIGwpICogcyxcbiAgICAgICAgbTEgPSAyICogbCAtIG0yO1xuICAgIHJldHVybiBuZXcgUmdiKFxuICAgICAgaHNsMnJnYihoID49IDI0MCA/IGggLSAyNDAgOiBoICsgMTIwLCBtMSwgbTIpLFxuICAgICAgaHNsMnJnYihoLCBtMSwgbTIpLFxuICAgICAgaHNsMnJnYihoIDwgMTIwID8gaCArIDI0MCA6IGggLSAxMjAsIG0xLCBtMiksXG4gICAgICB0aGlzLm9wYWNpdHlcbiAgICApO1xuICB9LFxuICBkaXNwbGF5YWJsZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICgwIDw9IHRoaXMucyAmJiB0aGlzLnMgPD0gMSB8fCBpc05hTih0aGlzLnMpKVxuICAgICAgICAmJiAoMCA8PSB0aGlzLmwgJiYgdGhpcy5sIDw9IDEpXG4gICAgICAgICYmICgwIDw9IHRoaXMub3BhY2l0eSAmJiB0aGlzLm9wYWNpdHkgPD0gMSk7XG4gIH0sXG4gIGZvcm1hdEhzbDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGEgPSB0aGlzLm9wYWNpdHk7IGEgPSBpc05hTihhKSA/IDEgOiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBhKSk7XG4gICAgcmV0dXJuIChhID09PSAxID8gXCJoc2woXCIgOiBcImhzbGEoXCIpXG4gICAgICAgICsgKHRoaXMuaCB8fCAwKSArIFwiLCBcIlxuICAgICAgICArICh0aGlzLnMgfHwgMCkgKiAxMDAgKyBcIiUsIFwiXG4gICAgICAgICsgKHRoaXMubCB8fCAwKSAqIDEwMCArIFwiJVwiXG4gICAgICAgICsgKGEgPT09IDEgPyBcIilcIiA6IFwiLCBcIiArIGEgKyBcIilcIik7XG4gIH1cbn0pKTtcblxuLyogRnJvbSBGdkQgMTMuMzcsIENTUyBDb2xvciBNb2R1bGUgTGV2ZWwgMyAqL1xuZnVuY3Rpb24gaHNsMnJnYihoLCBtMSwgbTIpIHtcbiAgcmV0dXJuIChoIDwgNjAgPyBtMSArIChtMiAtIG0xKSAqIGggLyA2MFxuICAgICAgOiBoIDwgMTgwID8gbTJcbiAgICAgIDogaCA8IDI0MCA/IG0xICsgKG0yIC0gbTEpICogKDI0MCAtIGgpIC8gNjBcbiAgICAgIDogbTEpICogMjU1O1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2NvbG9yLmpzXG4vLyBtb2R1bGUgaWQgPSA2N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///67\n");

/***/ }),
/* 68 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"b\"] = extend;\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n});\n\nfunction extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2RlZmluZS5qcz8zNjJkIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNvbnN0cnVjdG9yLCBmYWN0b3J5LCBwcm90b3R5cGUpIHtcbiAgY29uc3RydWN0b3IucHJvdG90eXBlID0gZmFjdG9yeS5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG4gIHByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGNvbnN0cnVjdG9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKHBhcmVudCwgZGVmaW5pdGlvbikge1xuICB2YXIgcHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQucHJvdG90eXBlKTtcbiAgZm9yICh2YXIga2V5IGluIGRlZmluaXRpb24pIHByb3RvdHlwZVtrZXldID0gZGVmaW5pdGlvbltrZXldO1xuICByZXR1cm4gcHJvdG90eXBlO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2RlZmluZS5qc1xuLy8gbW9kdWxlIGlkID0gNjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///68\n");

/***/ }),
/* 69 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"a\"] = basis;\nfunction basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2Jhc2lzLmpzP2FkMDAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGJhc2lzKHQxLCB2MCwgdjEsIHYyLCB2Mykge1xuICB2YXIgdDIgPSB0MSAqIHQxLCB0MyA9IHQyICogdDE7XG4gIHJldHVybiAoKDEgLSAzICogdDEgKyAzICogdDIgLSB0MykgKiB2MFxuICAgICAgKyAoNCAtIDYgKiB0MiArIDMgKiB0MykgKiB2MVxuICAgICAgKyAoMSArIDMgKiB0MSArIDMgKiB0MiAtIDMgKiB0MykgKiB2MlxuICAgICAgKyB0MyAqIHYzKSAvIDY7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlcykge1xuICB2YXIgbiA9IHZhbHVlcy5sZW5ndGggLSAxO1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHZhciBpID0gdCA8PSAwID8gKHQgPSAwKSA6IHQgPj0gMSA/ICh0ID0gMSwgbiAtIDEpIDogTWF0aC5mbG9vcih0ICogbiksXG4gICAgICAgIHYxID0gdmFsdWVzW2ldLFxuICAgICAgICB2MiA9IHZhbHVlc1tpICsgMV0sXG4gICAgICAgIHYwID0gaSA+IDAgPyB2YWx1ZXNbaSAtIDFdIDogMiAqIHYxIC0gdjIsXG4gICAgICAgIHYzID0gaSA8IG4gLSAxID8gdmFsdWVzW2kgKyAyXSA6IDIgKiB2MiAtIHYxO1xuICAgIHJldHVybiBiYXNpcygodCAtIGkgLyBuKSAqIG4sIHYwLCB2MSwgdjIsIHYzKTtcbiAgfTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9iYXNpcy5qc1xuLy8gbW9kdWxlIGlkID0gNjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///69\n");

/***/ }),
/* 70 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Clip__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__easing__ = __webpack_require__(44);\n\n\n\nvar arraySlice = Array.prototype.slice;\n\nfunction defaultGetter(target, key) {\n    return target[key];\n}\nfunction defaultSetter(target, key, value) {\n    target[key] = value;\n}\n\nfunction interpolateNumber(p0, p1, percent) {\n    return (p1 - p0) * percent + p0;\n}\n\nfunction interpolateArray(p0, p1, percent, out, arrDim) {\n    var len = p0.length;\n    if (arrDim == 1) {\n        for (var i = 0; i < len; i++) {\n            out[i] = interpolateNumber(p0[i], p1[i], percent);\n        }\n    }\n    else {\n        var len2 = p0[0].length;\n        for (var i = 0; i < len; i++) {\n            for (var j = 0; j < len2; j++) {\n                out[i][j] = interpolateNumber(\n                    p0[i][j], p1[i][j], percent\n                );\n            }\n        }\n    }\n}\n\nfunction isArrayLike(data) {\n    if (typeof(data) == 'undefined') {\n        return false;\n    } else if (typeof(data) == 'string') {\n        return false;\n    } else {\n        return typeof(data.length) == 'number';\n    }\n}\n\nfunction cloneValue(value) {\n    if (isArrayLike(value)) {\n        var len = value.length;\n        if (isArrayLike(value[0])) {\n            var ret = [];\n            for (var i = 0; i < len; i++) {\n                ret.push(arraySlice.call(value[i]));\n            }\n            return ret;\n        } else {\n            return arraySlice.call(value);\n        }\n    } else {\n        return value;\n    }\n}\n\nfunction catmullRomInterpolateArray(\n    p0, p1, p2, p3, t, t2, t3, out, arrDim\n) {\n    var len = p0.length;\n    if (arrDim == 1) {\n        for (var i = 0; i < len; i++) {\n            out[i] = catmullRomInterpolate(\n                p0[i], p1[i], p2[i], p3[i], t, t2, t3\n            );\n        }\n    } else {\n        var len2 = p0[0].length;\n        for (var i = 0; i < len; i++) {\n            for (var j = 0; j < len2; j++) {\n                out[i][j] = catmullRomInterpolate(\n                    p0[i][j], p1[i][j], p2[i][j], p3[i][j],\n                    t, t2, t3\n                );\n            }\n        }\n    }\n}\n\nfunction catmullRomInterpolate(p0, p1, p2, p3, t, t2, t3) {\n    var v0 = (p2 - p0) * 0.5;\n    var v1 = (p3 - p1) * 0.5;\n    return (2 * (p1 - p2) + v0 + v1) * t3\n            + (- 3 * (p1 - p2) - 2 * v0 - v1) * t2\n            + v0 * t + p1;\n}\n\n// arr0 is source array, arr1 is target array.\n// Do some preprocess to avoid error happened when interpolating from arr0 to arr1\nfunction fillArr(arr0, arr1, arrDim) {\n    var arr0Len = arr0.length;\n    var arr1Len = arr1.length;\n    if (arr0Len !== arr1Len) {\n        // FIXME Not work for TypedArray\n        var isPreviousLarger = arr0Len > arr1Len;\n        if (isPreviousLarger) {\n            // Cut the previous\n            arr0.length = arr1Len;\n        }\n        else {\n            // Fill the previous\n            for (var i = arr0Len; i < arr1Len; i++) {\n                arr0.push(\n                    arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i])\n                );\n            }\n        }\n    }\n    // Handling NaN value\n    var len2 = arr0[0] && arr0[0].length;\n    for (var i = 0; i < arr0.length; i++) {\n        if (arrDim === 1) {\n            if (isNaN(arr0[i])) {\n                arr0[i] = arr1[i];\n            }\n        }\n        else {\n            for (var j = 0; j < len2; j++) {\n                if (isNaN(arr0[i][j])) {\n                    arr0[i][j] = arr1[i][j];\n                }\n            }\n        }\n    }\n}\n\nfunction isArraySame(arr0, arr1, arrDim) {\n    if (arr0 === arr1) {\n        return true;\n    }\n    var len = arr0.length;\n    if (len !== arr1.length) {\n        return false;\n    }\n    if (arrDim === 1) {\n        for (var i = 0; i < len; i++) {\n            if (arr0[i] !== arr1[i]) {\n                return false;\n            }\n        }\n    }\n    else {\n        var len2 = arr0[0].length;\n        for (var i = 0; i < len; i++) {\n            for (var j = 0; j < len2; j++) {\n                if (arr0[i][j] !== arr1[i][j]) {\n                    return false;\n                }\n            }\n        }\n    }\n    return true;\n}\n\nfunction createTrackClip(animator, globalEasing, oneTrackDone, keyframes, propName, interpolater, maxTime) {\n    var getter = animator._getter;\n    var setter = animator._setter;\n    var useSpline = globalEasing === 'spline';\n\n    var trackLen = keyframes.length;\n    if (!trackLen) {\n        return;\n    }\n    // Guess data type\n    var firstVal = keyframes[0].value;\n    var isValueArray = isArrayLike(firstVal);\n\n    // For vertices morphing\n    var arrDim = (\n            isValueArray\n            && isArrayLike(firstVal[0])\n        )\n        ? 2 : 1;\n    // Sort keyframe as ascending\n    keyframes.sort(function(a, b) {\n        return a.time - b.time;\n    });\n\n    // Percents of each keyframe\n    var kfPercents = [];\n    // Value of each keyframe\n    var kfValues = [];\n    // Easing funcs of each keyframe.\n    var kfEasings = [];\n\n    var prevValue = keyframes[0].value;\n    var isAllValueEqual = true;\n    for (var i = 0; i < trackLen; i++) {\n        kfPercents.push(keyframes[i].time / maxTime);\n\n        // Assume value is a color when it is a string\n        var value = keyframes[i].value;\n\n        // Check if value is equal, deep check if value is array\n        if (!((isValueArray && isArraySame(value, prevValue, arrDim))\n            || (!isValueArray && value === prevValue))) {\n            isAllValueEqual = false;\n        }\n        prevValue = value;\n\n        kfValues.push(value);\n        kfEasings.push(keyframes[i].easing);\n    }\n    if (isAllValueEqual) {\n        return;\n    }\n\n    var lastValue = kfValues[trackLen - 1];\n    // Polyfill array and NaN value\n    for (var i = 0; i < trackLen - 1; i++) {\n        if (isValueArray) {\n            fillArr(kfValues[i], lastValue, arrDim);\n        }\n        else {\n            if (isNaN(kfValues[i]) && !isNaN(lastValue)) {\n                kfValues[i] = lastValue;\n            }\n        }\n    }\n    isValueArray && fillArr(getter(animator._target, propName), lastValue, arrDim);\n\n    // Cache the key of last frame to speed up when\n    // animation playback is sequency\n    var cacheKey = 0;\n    var cachePercent = 0;\n    var start;\n    var i, w;\n    var p0, p1, p2, p3;\n\n    var onframe = function(target, percent) {\n        // Find the range keyframes\n        // kf1-----kf2---------current--------kf3\n        // find kf2(i) and kf3(i + 1) and do interpolation\n        if (percent < cachePercent) {\n            // Start from next key\n            start = Math.min(cacheKey + 1, trackLen - 1);\n            for (i = start; i >= 0; i--) {\n                if (kfPercents[i] <= percent) {\n                    break;\n                }\n            }\n            i = Math.min(i, trackLen - 2);\n        }\n        else {\n            for (i = cacheKey; i < trackLen; i++) {\n                if (kfPercents[i] > percent) {\n                    break;\n                }\n            }\n            i = Math.min(i - 1, trackLen - 2);\n        }\n        cacheKey = i;\n        cachePercent = percent;\n\n        var range = (kfPercents[i + 1] - kfPercents[i]);\n        if (range === 0) {\n            return;\n        }\n        else {\n            w = (percent - kfPercents[i]) / range;\n            // Clamp 0 - 1\n            w = Math.max(Math.min(1, w), 0);\n        }\n        w = kfEasings[i + 1](w);\n\n        if (useSpline) {\n            p1 = kfValues[i];\n            p0 = kfValues[i === 0 ? i : i - 1];\n            p2 = kfValues[i > trackLen - 2 ? trackLen - 1 : i + 1];\n            p3 = kfValues[i > trackLen - 3 ? trackLen - 1 : i + 2];\n            if (interpolater) {\n                setter(\n                    target,\n                    propName,\n                    interpolater(\n                        getter(target, propName),\n                        p0, p1, p2, p3, w\n                    )\n                );\n            }\n            else if (isValueArray) {\n                catmullRomInterpolateArray(\n                    p0, p1, p2, p3, w, w*w, w*w*w,\n                    getter(target, propName),\n                    arrDim\n                );\n            }\n            else {\n                setter(\n                    target,\n                    propName,\n                    catmullRomInterpolate(p0, p1, p2, p3, w, w*w, w*w*w)\n                );\n            }\n        }\n        else {\n            if (interpolater) {\n                setter(\n                    target,\n                    propName,\n                    interpolater(\n                        getter(target, propName),\n                        kfValues[i],\n                        kfValues[i + 1],\n                        w\n                    )\n                );\n            }\n\n            else if (isValueArray) {\n                interpolateArray(\n                    kfValues[i], kfValues[i+1], w,\n                    getter(target, propName),\n                    arrDim\n                );\n            }\n            else {\n                setter(\n                    target,\n                    propName,\n                    interpolateNumber(kfValues[i], kfValues[i+1], w)\n                );\n            }\n        }\n    };\n\n    var clip = new __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */]({\n        target: animator._target,\n        life: maxTime,\n        loop: animator._loop,\n        delay: animator._delay,\n        onframe: onframe,\n        onfinish: oneTrackDone\n    });\n\n    if (globalEasing && globalEasing !== 'spline') {\n        clip.setEasing(globalEasing);\n    }\n\n    return clip;\n}\n\n/**\n * @description Animator object can only be created by Animation.prototype.animate method.\n * After created, we can use {@link clay.animation.Animator#when} to add all keyframes and {@link clay.animation.Animator#start} it.\n * Clips will be automatically created and added to the animation instance which created this deferred object.\n *\n * @constructor clay.animation.Animator\n *\n * @param {Object} target\n * @param {boolean} loop\n * @param {Function} getter\n * @param {Function} setter\n * @param {Function} interpolater\n */\nfunction Animator(target, loop, getter, setter, interpolater) {\n    this._tracks = {};\n    this._target = target;\n\n    this._loop = loop || false;\n\n    this._getter = getter || defaultGetter;\n    this._setter = setter || defaultSetter;\n\n    this._interpolater = interpolater || null;\n\n    this._delay = 0;\n\n    this._doneList = [];\n\n    this._onframeList = [];\n\n    this._clipList = [];\n\n    this._maxTime = 0;\n\n    this._lastKFTime = 0;\n}\n\nfunction noopEasing(w) {\n    return w;\n}\n\nAnimator.prototype = {\n\n    constructor: Animator,\n\n    /**\n     * @param {number} time Keyframe time using millisecond\n     * @param {Object} props A key-value object. Value can be number, 1d and 2d array\n     * @param {string|Function} [easing]\n     * @return {clay.animation.Animator}\n     * @memberOf clay.animation.Animator.prototype\n     */\n    when: function (time, props, easing) {\n\n        this._maxTime = Math.max(time, this._maxTime);\n\n        easing = (typeof easing === 'function' ? easing : __WEBPACK_IMPORTED_MODULE_1__easing__[\"a\" /* default */][easing]) || noopEasing;\n        for (var propName in props) {\n            if (!this._tracks[propName]) {\n                this._tracks[propName] = [];\n                // If time is 0\n                //  Then props is given initialize value\n                // Else\n                //  Initialize value from current prop value\n                if (time !== 0) {\n                    this._tracks[propName].push({\n                        time: 0,\n                        value: cloneValue(\n                            this._getter(this._target, propName)\n                        ),\n                        easing: easing\n                    });\n                }\n            }\n            this._tracks[propName].push({\n                time: parseInt(time),\n                value: props[propName],\n                easing: easing\n            });\n        }\n        return this;\n    },\n    /**\n     * @param {number} time During time since last keyframe\n     * @param {Object} props A key-value object. Value can be number, 1d and 2d array\n     * @param {string|Function} [easing]\n     * @return {clay.animation.Animator}\n     * @memberOf clay.animation.Animator.prototype\n     */\n    then: function (duringTime, props, easing) {\n        this.when(duringTime + this._lastKFTime, props, easing);\n        this._lastKFTime += duringTime;\n        return this;\n    },\n    /**\n     * callback when running animation\n     * @param  {Function} callback callback have two args, animating target and current percent\n     * @return {clay.animation.Animator}\n     * @memberOf clay.animation.Animator.prototype\n     */\n    during: function (callback) {\n        this._onframeList.push(callback);\n        return this;\n    },\n\n    _doneCallback: function () {\n        // Clear all tracks\n        this._tracks = {};\n        // Clear all clips\n        this._clipList.length = 0;\n\n        var doneList = this._doneList;\n        var len = doneList.length;\n        for (var i = 0; i < len; i++) {\n            doneList[i].call(this);\n        }\n    },\n    /**\n     * Start the animation\n     * @param  {string|Function} easing\n     * @return {clay.animation.Animator}\n     * @memberOf clay.animation.Animator.prototype\n     */\n    start: function (globalEasing) {\n\n        var self = this;\n        var clipCount = 0;\n\n        var oneTrackDone = function() {\n            clipCount--;\n            if (clipCount === 0) {\n                self._doneCallback();\n            }\n        };\n\n        var lastClip;\n        var clipMaxTime = 0;\n        for (var propName in this._tracks) {\n            var clip = createTrackClip(\n                this, globalEasing, oneTrackDone,\n                this._tracks[propName], propName, self._interpolater, self._maxTime\n            );\n            if (clip) {\n                clipMaxTime = Math.max(clipMaxTime, clip.life);\n                this._clipList.push(clip);\n                clipCount++;\n\n                // If start after added to animation\n                if (this.animation) {\n                    this.animation.addClip(clip);\n                }\n\n                lastClip = clip;\n            }\n        }\n\n        // Add during callback on the last clip\n        if (lastClip) {\n            var oldOnFrame = lastClip.onframe;\n            lastClip.onframe = function (target, percent) {\n                oldOnFrame(target, percent);\n\n                for (var i = 0; i < self._onframeList.length; i++) {\n                    self._onframeList[i](target, percent);\n                }\n            };\n        }\n\n        if (!clipCount) {\n            this._doneCallback();\n        }\n        return this;\n    },\n\n    /**\n     * Stop the animation\n     * @memberOf clay.animation.Animator.prototype\n     */\n    stop: function () {\n        for (var i = 0; i < this._clipList.length; i++) {\n            var clip = this._clipList[i];\n            this.animation.removeClip(clip);\n        }\n        this._clipList = [];\n    },\n    /**\n     * Delay given milliseconds\n     * @param  {number} time\n     * @return {clay.animation.Animator}\n     * @memberOf clay.animation.Animator.prototype\n     */\n    delay: function (time){\n        this._delay = time;\n        return this;\n    },\n    /**\n     * Callback after animation finished\n     * @param {Function} func\n     * @return {clay.animation.Animator}\n     * @memberOf clay.animation.Animator.prototype\n     */\n    done: function (func) {\n        if (func) {\n            this._doneList.push(func);\n        }\n        return this;\n    },\n    /**\n     * Get all clips created in start method.\n     * @return {clay.animation.Clip[]}\n     * @memberOf clay.animation.Animator.prototype\n     */\n    getClips: function () {\n        return this._clipList;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Animator);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9hbmltYXRpb24vQW5pbWF0b3IuanM/ZjEzYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2xpcCBmcm9tICcuL0NsaXAnO1xuaW1wb3J0IGVhc2luZ0Z1bmNzIGZyb20gJy4vZWFzaW5nJztcblxudmFyIGFycmF5U2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cbmZ1bmN0aW9uIGRlZmF1bHRHZXR0ZXIodGFyZ2V0LCBrZXkpIHtcbiAgICByZXR1cm4gdGFyZ2V0W2tleV07XG59XG5mdW5jdGlvbiBkZWZhdWx0U2V0dGVyKHRhcmdldCwga2V5LCB2YWx1ZSkge1xuICAgIHRhcmdldFtrZXldID0gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGludGVycG9sYXRlTnVtYmVyKHAwLCBwMSwgcGVyY2VudCkge1xuICAgIHJldHVybiAocDEgLSBwMCkgKiBwZXJjZW50ICsgcDA7XG59XG5cbmZ1bmN0aW9uIGludGVycG9sYXRlQXJyYXkocDAsIHAxLCBwZXJjZW50LCBvdXQsIGFyckRpbSkge1xuICAgIHZhciBsZW4gPSBwMC5sZW5ndGg7XG4gICAgaWYgKGFyckRpbSA9PSAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIG91dFtpXSA9IGludGVycG9sYXRlTnVtYmVyKHAwW2ldLCBwMVtpXSwgcGVyY2VudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBsZW4yID0gcDBbMF0ubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxlbjI7IGorKykge1xuICAgICAgICAgICAgICAgIG91dFtpXVtqXSA9IGludGVycG9sYXRlTnVtYmVyKFxuICAgICAgICAgICAgICAgICAgICBwMFtpXVtqXSwgcDFbaV1bal0sIHBlcmNlbnRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc0FycmF5TGlrZShkYXRhKSB7XG4gICAgaWYgKHR5cGVvZihkYXRhKSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YoZGF0YSkgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YoZGF0YS5sZW5ndGgpID09ICdudW1iZXInO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2xvbmVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmIChpc0FycmF5TGlrZSh2YWx1ZSkpIHtcbiAgICAgICAgdmFyIGxlbiA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgaWYgKGlzQXJyYXlMaWtlKHZhbHVlWzBdKSkge1xuICAgICAgICAgICAgdmFyIHJldCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHJldC5wdXNoKGFycmF5U2xpY2UuY2FsbCh2YWx1ZVtpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhcnJheVNsaWNlLmNhbGwodmFsdWUpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2F0bXVsbFJvbUludGVycG9sYXRlQXJyYXkoXG4gICAgcDAsIHAxLCBwMiwgcDMsIHQsIHQyLCB0Mywgb3V0LCBhcnJEaW1cbikge1xuICAgIHZhciBsZW4gPSBwMC5sZW5ndGg7XG4gICAgaWYgKGFyckRpbSA9PSAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIG91dFtpXSA9IGNhdG11bGxSb21JbnRlcnBvbGF0ZShcbiAgICAgICAgICAgICAgICBwMFtpXSwgcDFbaV0sIHAyW2ldLCBwM1tpXSwgdCwgdDIsIHQzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGxlbjIgPSBwMFswXS5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGVuMjsgaisrKSB7XG4gICAgICAgICAgICAgICAgb3V0W2ldW2pdID0gY2F0bXVsbFJvbUludGVycG9sYXRlKFxuICAgICAgICAgICAgICAgICAgICBwMFtpXVtqXSwgcDFbaV1bal0sIHAyW2ldW2pdLCBwM1tpXVtqXSxcbiAgICAgICAgICAgICAgICAgICAgdCwgdDIsIHQzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gY2F0bXVsbFJvbUludGVycG9sYXRlKHAwLCBwMSwgcDIsIHAzLCB0LCB0MiwgdDMpIHtcbiAgICB2YXIgdjAgPSAocDIgLSBwMCkgKiAwLjU7XG4gICAgdmFyIHYxID0gKHAzIC0gcDEpICogMC41O1xuICAgIHJldHVybiAoMiAqIChwMSAtIHAyKSArIHYwICsgdjEpICogdDNcbiAgICAgICAgICAgICsgKC0gMyAqIChwMSAtIHAyKSAtIDIgKiB2MCAtIHYxKSAqIHQyXG4gICAgICAgICAgICArIHYwICogdCArIHAxO1xufVxuXG4vLyBhcnIwIGlzIHNvdXJjZSBhcnJheSwgYXJyMSBpcyB0YXJnZXQgYXJyYXkuXG4vLyBEbyBzb21lIHByZXByb2Nlc3MgdG8gYXZvaWQgZXJyb3IgaGFwcGVuZWQgd2hlbiBpbnRlcnBvbGF0aW5nIGZyb20gYXJyMCB0byBhcnIxXG5mdW5jdGlvbiBmaWxsQXJyKGFycjAsIGFycjEsIGFyckRpbSkge1xuICAgIHZhciBhcnIwTGVuID0gYXJyMC5sZW5ndGg7XG4gICAgdmFyIGFycjFMZW4gPSBhcnIxLmxlbmd0aDtcbiAgICBpZiAoYXJyMExlbiAhPT0gYXJyMUxlbikge1xuICAgICAgICAvLyBGSVhNRSBOb3Qgd29yayBmb3IgVHlwZWRBcnJheVxuICAgICAgICB2YXIgaXNQcmV2aW91c0xhcmdlciA9IGFycjBMZW4gPiBhcnIxTGVuO1xuICAgICAgICBpZiAoaXNQcmV2aW91c0xhcmdlcikge1xuICAgICAgICAgICAgLy8gQ3V0IHRoZSBwcmV2aW91c1xuICAgICAgICAgICAgYXJyMC5sZW5ndGggPSBhcnIxTGVuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRmlsbCB0aGUgcHJldmlvdXNcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBhcnIwTGVuOyBpIDwgYXJyMUxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJyMC5wdXNoKFxuICAgICAgICAgICAgICAgICAgICBhcnJEaW0gPT09IDEgPyBhcnIxW2ldIDogYXJyYXlTbGljZS5jYWxsKGFycjFbaV0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBIYW5kbGluZyBOYU4gdmFsdWVcbiAgICB2YXIgbGVuMiA9IGFycjBbMF0gJiYgYXJyMFswXS5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChhcnJEaW0gPT09IDEpIHtcbiAgICAgICAgICAgIGlmIChpc05hTihhcnIwW2ldKSkge1xuICAgICAgICAgICAgICAgIGFycjBbaV0gPSBhcnIxW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsZW4yOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4oYXJyMFtpXVtqXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyMFtpXVtqXSA9IGFycjFbaV1bal07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc0FycmF5U2FtZShhcnIwLCBhcnIxLCBhcnJEaW0pIHtcbiAgICBpZiAoYXJyMCA9PT0gYXJyMSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIGxlbiA9IGFycjAubGVuZ3RoO1xuICAgIGlmIChsZW4gIT09IGFycjEubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGFyckRpbSA9PT0gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYXJyMFtpXSAhPT0gYXJyMVtpXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIGxlbjIgPSBhcnIwWzBdLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsZW4yOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJyMFtpXVtqXSAhPT0gYXJyMVtpXVtqXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUcmFja0NsaXAoYW5pbWF0b3IsIGdsb2JhbEVhc2luZywgb25lVHJhY2tEb25lLCBrZXlmcmFtZXMsIHByb3BOYW1lLCBpbnRlcnBvbGF0ZXIsIG1heFRpbWUpIHtcbiAgICB2YXIgZ2V0dGVyID0gYW5pbWF0b3IuX2dldHRlcjtcbiAgICB2YXIgc2V0dGVyID0gYW5pbWF0b3IuX3NldHRlcjtcbiAgICB2YXIgdXNlU3BsaW5lID0gZ2xvYmFsRWFzaW5nID09PSAnc3BsaW5lJztcblxuICAgIHZhciB0cmFja0xlbiA9IGtleWZyYW1lcy5sZW5ndGg7XG4gICAgaWYgKCF0cmFja0xlbikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIEd1ZXNzIGRhdGEgdHlwZVxuICAgIHZhciBmaXJzdFZhbCA9IGtleWZyYW1lc1swXS52YWx1ZTtcbiAgICB2YXIgaXNWYWx1ZUFycmF5ID0gaXNBcnJheUxpa2UoZmlyc3RWYWwpO1xuXG4gICAgLy8gRm9yIHZlcnRpY2VzIG1vcnBoaW5nXG4gICAgdmFyIGFyckRpbSA9IChcbiAgICAgICAgICAgIGlzVmFsdWVBcnJheVxuICAgICAgICAgICAgJiYgaXNBcnJheUxpa2UoZmlyc3RWYWxbMF0pXG4gICAgICAgIClcbiAgICAgICAgPyAyIDogMTtcbiAgICAvLyBTb3J0IGtleWZyYW1lIGFzIGFzY2VuZGluZ1xuICAgIGtleWZyYW1lcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEudGltZSAtIGIudGltZTtcbiAgICB9KTtcblxuICAgIC8vIFBlcmNlbnRzIG9mIGVhY2gga2V5ZnJhbWVcbiAgICB2YXIga2ZQZXJjZW50cyA9IFtdO1xuICAgIC8vIFZhbHVlIG9mIGVhY2gga2V5ZnJhbWVcbiAgICB2YXIga2ZWYWx1ZXMgPSBbXTtcbiAgICAvLyBFYXNpbmcgZnVuY3Mgb2YgZWFjaCBrZXlmcmFtZS5cbiAgICB2YXIga2ZFYXNpbmdzID0gW107XG5cbiAgICB2YXIgcHJldlZhbHVlID0ga2V5ZnJhbWVzWzBdLnZhbHVlO1xuICAgIHZhciBpc0FsbFZhbHVlRXF1YWwgPSB0cnVlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2tMZW47IGkrKykge1xuICAgICAgICBrZlBlcmNlbnRzLnB1c2goa2V5ZnJhbWVzW2ldLnRpbWUgLyBtYXhUaW1lKTtcblxuICAgICAgICAvLyBBc3N1bWUgdmFsdWUgaXMgYSBjb2xvciB3aGVuIGl0IGlzIGEgc3RyaW5nXG4gICAgICAgIHZhciB2YWx1ZSA9IGtleWZyYW1lc1tpXS52YWx1ZTtcblxuICAgICAgICAvLyBDaGVjayBpZiB2YWx1ZSBpcyBlcXVhbCwgZGVlcCBjaGVjayBpZiB2YWx1ZSBpcyBhcnJheVxuICAgICAgICBpZiAoISgoaXNWYWx1ZUFycmF5ICYmIGlzQXJyYXlTYW1lKHZhbHVlLCBwcmV2VmFsdWUsIGFyckRpbSkpXG4gICAgICAgICAgICB8fCAoIWlzVmFsdWVBcnJheSAmJiB2YWx1ZSA9PT0gcHJldlZhbHVlKSkpIHtcbiAgICAgICAgICAgIGlzQWxsVmFsdWVFcXVhbCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHByZXZWYWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgIGtmVmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICBrZkVhc2luZ3MucHVzaChrZXlmcmFtZXNbaV0uZWFzaW5nKTtcbiAgICB9XG4gICAgaWYgKGlzQWxsVmFsdWVFcXVhbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGxhc3RWYWx1ZSA9IGtmVmFsdWVzW3RyYWNrTGVuIC0gMV07XG4gICAgLy8gUG9seWZpbGwgYXJyYXkgYW5kIE5hTiB2YWx1ZVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2tMZW4gLSAxOyBpKyspIHtcbiAgICAgICAgaWYgKGlzVmFsdWVBcnJheSkge1xuICAgICAgICAgICAgZmlsbEFycihrZlZhbHVlc1tpXSwgbGFzdFZhbHVlLCBhcnJEaW0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGlzTmFOKGtmVmFsdWVzW2ldKSAmJiAhaXNOYU4obGFzdFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGtmVmFsdWVzW2ldID0gbGFzdFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlzVmFsdWVBcnJheSAmJiBmaWxsQXJyKGdldHRlcihhbmltYXRvci5fdGFyZ2V0LCBwcm9wTmFtZSksIGxhc3RWYWx1ZSwgYXJyRGltKTtcblxuICAgIC8vIENhY2hlIHRoZSBrZXkgb2YgbGFzdCBmcmFtZSB0byBzcGVlZCB1cCB3aGVuXG4gICAgLy8gYW5pbWF0aW9uIHBsYXliYWNrIGlzIHNlcXVlbmN5XG4gICAgdmFyIGNhY2hlS2V5ID0gMDtcbiAgICB2YXIgY2FjaGVQZXJjZW50ID0gMDtcbiAgICB2YXIgc3RhcnQ7XG4gICAgdmFyIGksIHc7XG4gICAgdmFyIHAwLCBwMSwgcDIsIHAzO1xuXG4gICAgdmFyIG9uZnJhbWUgPSBmdW5jdGlvbih0YXJnZXQsIHBlcmNlbnQpIHtcbiAgICAgICAgLy8gRmluZCB0aGUgcmFuZ2Uga2V5ZnJhbWVzXG4gICAgICAgIC8vIGtmMS0tLS0ta2YyLS0tLS0tLS0tY3VycmVudC0tLS0tLS0ta2YzXG4gICAgICAgIC8vIGZpbmQga2YyKGkpIGFuZCBrZjMoaSArIDEpIGFuZCBkbyBpbnRlcnBvbGF0aW9uXG4gICAgICAgIGlmIChwZXJjZW50IDwgY2FjaGVQZXJjZW50KSB7XG4gICAgICAgICAgICAvLyBTdGFydCBmcm9tIG5leHQga2V5XG4gICAgICAgICAgICBzdGFydCA9IE1hdGgubWluKGNhY2hlS2V5ICsgMSwgdHJhY2tMZW4gLSAxKTtcbiAgICAgICAgICAgIGZvciAoaSA9IHN0YXJ0OyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIGlmIChrZlBlcmNlbnRzW2ldIDw9IHBlcmNlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSA9IE1hdGgubWluKGksIHRyYWNrTGVuIC0gMik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGkgPSBjYWNoZUtleTsgaSA8IHRyYWNrTGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoa2ZQZXJjZW50c1tpXSA+IHBlcmNlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSA9IE1hdGgubWluKGkgLSAxLCB0cmFja0xlbiAtIDIpO1xuICAgICAgICB9XG4gICAgICAgIGNhY2hlS2V5ID0gaTtcbiAgICAgICAgY2FjaGVQZXJjZW50ID0gcGVyY2VudDtcblxuICAgICAgICB2YXIgcmFuZ2UgPSAoa2ZQZXJjZW50c1tpICsgMV0gLSBrZlBlcmNlbnRzW2ldKTtcbiAgICAgICAgaWYgKHJhbmdlID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB3ID0gKHBlcmNlbnQgLSBrZlBlcmNlbnRzW2ldKSAvIHJhbmdlO1xuICAgICAgICAgICAgLy8gQ2xhbXAgMCAtIDFcbiAgICAgICAgICAgIHcgPSBNYXRoLm1heChNYXRoLm1pbigxLCB3KSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgdyA9IGtmRWFzaW5nc1tpICsgMV0odyk7XG5cbiAgICAgICAgaWYgKHVzZVNwbGluZSkge1xuICAgICAgICAgICAgcDEgPSBrZlZhbHVlc1tpXTtcbiAgICAgICAgICAgIHAwID0ga2ZWYWx1ZXNbaSA9PT0gMCA/IGkgOiBpIC0gMV07XG4gICAgICAgICAgICBwMiA9IGtmVmFsdWVzW2kgPiB0cmFja0xlbiAtIDIgPyB0cmFja0xlbiAtIDEgOiBpICsgMV07XG4gICAgICAgICAgICBwMyA9IGtmVmFsdWVzW2kgPiB0cmFja0xlbiAtIDMgPyB0cmFja0xlbiAtIDEgOiBpICsgMl07XG4gICAgICAgICAgICBpZiAoaW50ZXJwb2xhdGVyKSB7XG4gICAgICAgICAgICAgICAgc2V0dGVyKFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgIHByb3BOYW1lLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXR0ZXIodGFyZ2V0LCBwcm9wTmFtZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBwMCwgcDEsIHAyLCBwMywgd1xuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzVmFsdWVBcnJheSkge1xuICAgICAgICAgICAgICAgIGNhdG11bGxSb21JbnRlcnBvbGF0ZUFycmF5KFxuICAgICAgICAgICAgICAgICAgICBwMCwgcDEsIHAyLCBwMywgdywgdyp3LCB3KncqdyxcbiAgICAgICAgICAgICAgICAgICAgZ2V0dGVyKHRhcmdldCwgcHJvcE5hbWUpLFxuICAgICAgICAgICAgICAgICAgICBhcnJEaW1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0dGVyKFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgIHByb3BOYW1lLFxuICAgICAgICAgICAgICAgICAgICBjYXRtdWxsUm9tSW50ZXJwb2xhdGUocDAsIHAxLCBwMiwgcDMsIHcsIHcqdywgdyp3KncpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChpbnRlcnBvbGF0ZXIpIHtcbiAgICAgICAgICAgICAgICBzZXR0ZXIoXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgcHJvcE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGludGVycG9sYXRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldHRlcih0YXJnZXQsIHByb3BOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtmVmFsdWVzW2ldLFxuICAgICAgICAgICAgICAgICAgICAgICAga2ZWYWx1ZXNbaSArIDFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgd1xuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxzZSBpZiAoaXNWYWx1ZUFycmF5KSB7XG4gICAgICAgICAgICAgICAgaW50ZXJwb2xhdGVBcnJheShcbiAgICAgICAgICAgICAgICAgICAga2ZWYWx1ZXNbaV0sIGtmVmFsdWVzW2krMV0sIHcsXG4gICAgICAgICAgICAgICAgICAgIGdldHRlcih0YXJnZXQsIHByb3BOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgYXJyRGltXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldHRlcihcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICBwcm9wTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJwb2xhdGVOdW1iZXIoa2ZWYWx1ZXNbaV0sIGtmVmFsdWVzW2krMV0sIHcpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY2xpcCA9IG5ldyBDbGlwKHtcbiAgICAgICAgdGFyZ2V0OiBhbmltYXRvci5fdGFyZ2V0LFxuICAgICAgICBsaWZlOiBtYXhUaW1lLFxuICAgICAgICBsb29wOiBhbmltYXRvci5fbG9vcCxcbiAgICAgICAgZGVsYXk6IGFuaW1hdG9yLl9kZWxheSxcbiAgICAgICAgb25mcmFtZTogb25mcmFtZSxcbiAgICAgICAgb25maW5pc2g6IG9uZVRyYWNrRG9uZVxuICAgIH0pO1xuXG4gICAgaWYgKGdsb2JhbEVhc2luZyAmJiBnbG9iYWxFYXNpbmcgIT09ICdzcGxpbmUnKSB7XG4gICAgICAgIGNsaXAuc2V0RWFzaW5nKGdsb2JhbEVhc2luZyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsaXA7XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIEFuaW1hdG9yIG9iamVjdCBjYW4gb25seSBiZSBjcmVhdGVkIGJ5IEFuaW1hdGlvbi5wcm90b3R5cGUuYW5pbWF0ZSBtZXRob2QuXG4gKiBBZnRlciBjcmVhdGVkLCB3ZSBjYW4gdXNlIHtAbGluayBjbGF5LmFuaW1hdGlvbi5BbmltYXRvciN3aGVufSB0byBhZGQgYWxsIGtleWZyYW1lcyBhbmQge0BsaW5rIGNsYXkuYW5pbWF0aW9uLkFuaW1hdG9yI3N0YXJ0fSBpdC5cbiAqIENsaXBzIHdpbGwgYmUgYXV0b21hdGljYWxseSBjcmVhdGVkIGFuZCBhZGRlZCB0byB0aGUgYW5pbWF0aW9uIGluc3RhbmNlIHdoaWNoIGNyZWF0ZWQgdGhpcyBkZWZlcnJlZCBvYmplY3QuXG4gKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuYW5pbWF0aW9uLkFuaW1hdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRhcmdldFxuICogQHBhcmFtIHtib29sZWFufSBsb29wXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBnZXR0ZXJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHNldHRlclxuICogQHBhcmFtIHtGdW5jdGlvbn0gaW50ZXJwb2xhdGVyXG4gKi9cbmZ1bmN0aW9uIEFuaW1hdG9yKHRhcmdldCwgbG9vcCwgZ2V0dGVyLCBzZXR0ZXIsIGludGVycG9sYXRlcikge1xuICAgIHRoaXMuX3RyYWNrcyA9IHt9O1xuICAgIHRoaXMuX3RhcmdldCA9IHRhcmdldDtcblxuICAgIHRoaXMuX2xvb3AgPSBsb29wIHx8IGZhbHNlO1xuXG4gICAgdGhpcy5fZ2V0dGVyID0gZ2V0dGVyIHx8IGRlZmF1bHRHZXR0ZXI7XG4gICAgdGhpcy5fc2V0dGVyID0gc2V0dGVyIHx8IGRlZmF1bHRTZXR0ZXI7XG5cbiAgICB0aGlzLl9pbnRlcnBvbGF0ZXIgPSBpbnRlcnBvbGF0ZXIgfHwgbnVsbDtcblxuICAgIHRoaXMuX2RlbGF5ID0gMDtcblxuICAgIHRoaXMuX2RvbmVMaXN0ID0gW107XG5cbiAgICB0aGlzLl9vbmZyYW1lTGlzdCA9IFtdO1xuXG4gICAgdGhpcy5fY2xpcExpc3QgPSBbXTtcblxuICAgIHRoaXMuX21heFRpbWUgPSAwO1xuXG4gICAgdGhpcy5fbGFzdEtGVGltZSA9IDA7XG59XG5cbmZ1bmN0aW9uIG5vb3BFYXNpbmcodykge1xuICAgIHJldHVybiB3O1xufVxuXG5BbmltYXRvci5wcm90b3R5cGUgPSB7XG5cbiAgICBjb25zdHJ1Y3RvcjogQW5pbWF0b3IsXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGltZSBLZXlmcmFtZSB0aW1lIHVzaW5nIG1pbGxpc2Vjb25kXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzIEEga2V5LXZhbHVlIG9iamVjdC4gVmFsdWUgY2FuIGJlIG51bWJlciwgMWQgYW5kIDJkIGFycmF5XG4gICAgICogQHBhcmFtIHtzdHJpbmd8RnVuY3Rpb259IFtlYXNpbmddXG4gICAgICogQHJldHVybiB7Y2xheS5hbmltYXRpb24uQW5pbWF0b3J9XG4gICAgICogQG1lbWJlck9mIGNsYXkuYW5pbWF0aW9uLkFuaW1hdG9yLnByb3RvdHlwZVxuICAgICAqL1xuICAgIHdoZW46IGZ1bmN0aW9uICh0aW1lLCBwcm9wcywgZWFzaW5nKSB7XG5cbiAgICAgICAgdGhpcy5fbWF4VGltZSA9IE1hdGgubWF4KHRpbWUsIHRoaXMuX21heFRpbWUpO1xuXG4gICAgICAgIGVhc2luZyA9ICh0eXBlb2YgZWFzaW5nID09PSAnZnVuY3Rpb24nID8gZWFzaW5nIDogZWFzaW5nRnVuY3NbZWFzaW5nXSkgfHwgbm9vcEVhc2luZztcbiAgICAgICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gcHJvcHMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fdHJhY2tzW3Byb3BOYW1lXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyYWNrc1twcm9wTmFtZV0gPSBbXTtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aW1lIGlzIDBcbiAgICAgICAgICAgICAgICAvLyAgVGhlbiBwcm9wcyBpcyBnaXZlbiBpbml0aWFsaXplIHZhbHVlXG4gICAgICAgICAgICAgICAgLy8gRWxzZVxuICAgICAgICAgICAgICAgIC8vICBJbml0aWFsaXplIHZhbHVlIGZyb20gY3VycmVudCBwcm9wIHZhbHVlXG4gICAgICAgICAgICAgICAgaWYgKHRpbWUgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJhY2tzW3Byb3BOYW1lXS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2xvbmVWYWx1ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9nZXR0ZXIodGhpcy5fdGFyZ2V0LCBwcm9wTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2luZ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl90cmFja3NbcHJvcE5hbWVdLnB1c2goe1xuICAgICAgICAgICAgICAgIHRpbWU6IHBhcnNlSW50KHRpbWUpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9wc1twcm9wTmFtZV0sXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBlYXNpbmdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWUgRHVyaW5nIHRpbWUgc2luY2UgbGFzdCBrZXlmcmFtZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyBBIGtleS12YWx1ZSBvYmplY3QuIFZhbHVlIGNhbiBiZSBudW1iZXIsIDFkIGFuZCAyZCBhcnJheVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfEZ1bmN0aW9ufSBbZWFzaW5nXVxuICAgICAqIEByZXR1cm4ge2NsYXkuYW5pbWF0aW9uLkFuaW1hdG9yfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmFuaW1hdGlvbi5BbmltYXRvci5wcm90b3R5cGVcbiAgICAgKi9cbiAgICB0aGVuOiBmdW5jdGlvbiAoZHVyaW5nVGltZSwgcHJvcHMsIGVhc2luZykge1xuICAgICAgICB0aGlzLndoZW4oZHVyaW5nVGltZSArIHRoaXMuX2xhc3RLRlRpbWUsIHByb3BzLCBlYXNpbmcpO1xuICAgICAgICB0aGlzLl9sYXN0S0ZUaW1lICs9IGR1cmluZ1RpbWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogY2FsbGJhY2sgd2hlbiBydW5uaW5nIGFuaW1hdGlvblxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayBjYWxsYmFjayBoYXZlIHR3byBhcmdzLCBhbmltYXRpbmcgdGFyZ2V0IGFuZCBjdXJyZW50IHBlcmNlbnRcbiAgICAgKiBAcmV0dXJuIHtjbGF5LmFuaW1hdGlvbi5BbmltYXRvcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5hbmltYXRpb24uQW5pbWF0b3IucHJvdG90eXBlXG4gICAgICovXG4gICAgZHVyaW5nOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fb25mcmFtZUxpc3QucHVzaChjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBfZG9uZUNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIENsZWFyIGFsbCB0cmFja3NcbiAgICAgICAgdGhpcy5fdHJhY2tzID0ge307XG4gICAgICAgIC8vIENsZWFyIGFsbCBjbGlwc1xuICAgICAgICB0aGlzLl9jbGlwTGlzdC5sZW5ndGggPSAwO1xuXG4gICAgICAgIHZhciBkb25lTGlzdCA9IHRoaXMuX2RvbmVMaXN0O1xuICAgICAgICB2YXIgbGVuID0gZG9uZUxpc3QubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBkb25lTGlzdFtpXS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBTdGFydCB0aGUgYW5pbWF0aW9uXG4gICAgICogQHBhcmFtICB7c3RyaW5nfEZ1bmN0aW9ufSBlYXNpbmdcbiAgICAgKiBAcmV0dXJuIHtjbGF5LmFuaW1hdGlvbi5BbmltYXRvcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5hbmltYXRpb24uQW5pbWF0b3IucHJvdG90eXBlXG4gICAgICovXG4gICAgc3RhcnQ6IGZ1bmN0aW9uIChnbG9iYWxFYXNpbmcpIHtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBjbGlwQ291bnQgPSAwO1xuXG4gICAgICAgIHZhciBvbmVUcmFja0RvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNsaXBDb3VudC0tO1xuICAgICAgICAgICAgaWYgKGNsaXBDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHNlbGYuX2RvbmVDYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBsYXN0Q2xpcDtcbiAgICAgICAgdmFyIGNsaXBNYXhUaW1lID0gMDtcbiAgICAgICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gdGhpcy5fdHJhY2tzKSB7XG4gICAgICAgICAgICB2YXIgY2xpcCA9IGNyZWF0ZVRyYWNrQ2xpcChcbiAgICAgICAgICAgICAgICB0aGlzLCBnbG9iYWxFYXNpbmcsIG9uZVRyYWNrRG9uZSxcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFja3NbcHJvcE5hbWVdLCBwcm9wTmFtZSwgc2VsZi5faW50ZXJwb2xhdGVyLCBzZWxmLl9tYXhUaW1lXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGNsaXApIHtcbiAgICAgICAgICAgICAgICBjbGlwTWF4VGltZSA9IE1hdGgubWF4KGNsaXBNYXhUaW1lLCBjbGlwLmxpZmUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NsaXBMaXN0LnB1c2goY2xpcCk7XG4gICAgICAgICAgICAgICAgY2xpcENvdW50Kys7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiBzdGFydCBhZnRlciBhZGRlZCB0byBhbmltYXRpb25cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbmltYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb24uYWRkQ2xpcChjbGlwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsYXN0Q2xpcCA9IGNsaXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgZHVyaW5nIGNhbGxiYWNrIG9uIHRoZSBsYXN0IGNsaXBcbiAgICAgICAgaWYgKGxhc3RDbGlwKSB7XG4gICAgICAgICAgICB2YXIgb2xkT25GcmFtZSA9IGxhc3RDbGlwLm9uZnJhbWU7XG4gICAgICAgICAgICBsYXN0Q2xpcC5vbmZyYW1lID0gZnVuY3Rpb24gKHRhcmdldCwgcGVyY2VudCkge1xuICAgICAgICAgICAgICAgIG9sZE9uRnJhbWUodGFyZ2V0LCBwZXJjZW50KTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5fb25mcmFtZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fb25mcmFtZUxpc3RbaV0odGFyZ2V0LCBwZXJjZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjbGlwQ291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuX2RvbmVDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTdG9wIHRoZSBhbmltYXRpb25cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5hbmltYXRpb24uQW5pbWF0b3IucHJvdG90eXBlXG4gICAgICovXG4gICAgc3RvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2NsaXBMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2xpcCA9IHRoaXMuX2NsaXBMaXN0W2ldO1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb24ucmVtb3ZlQ2xpcChjbGlwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jbGlwTGlzdCA9IFtdO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogRGVsYXkgZ2l2ZW4gbWlsbGlzZWNvbmRzXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB0aW1lXG4gICAgICogQHJldHVybiB7Y2xheS5hbmltYXRpb24uQW5pbWF0b3J9XG4gICAgICogQG1lbWJlck9mIGNsYXkuYW5pbWF0aW9uLkFuaW1hdG9yLnByb3RvdHlwZVxuICAgICAqL1xuICAgIGRlbGF5OiBmdW5jdGlvbiAodGltZSl7XG4gICAgICAgIHRoaXMuX2RlbGF5ID0gdGltZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayBhZnRlciBhbmltYXRpb24gZmluaXNoZWRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jXG4gICAgICogQHJldHVybiB7Y2xheS5hbmltYXRpb24uQW5pbWF0b3J9XG4gICAgICogQG1lbWJlck9mIGNsYXkuYW5pbWF0aW9uLkFuaW1hdG9yLnByb3RvdHlwZVxuICAgICAqL1xuICAgIGRvbmU6IGZ1bmN0aW9uIChmdW5jKSB7XG4gICAgICAgIGlmIChmdW5jKSB7XG4gICAgICAgICAgICB0aGlzLl9kb25lTGlzdC5wdXNoKGZ1bmMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBjbGlwcyBjcmVhdGVkIGluIHN0YXJ0IG1ldGhvZC5cbiAgICAgKiBAcmV0dXJuIHtjbGF5LmFuaW1hdGlvbi5DbGlwW119XG4gICAgICogQG1lbWJlck9mIGNsYXkuYW5pbWF0aW9uLkFuaW1hdG9yLnByb3RvdHlwZVxuICAgICAqL1xuICAgIGdldENsaXBzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGlwTGlzdDtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBbmltYXRvcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvYW5pbWF0aW9uL0FuaW1hdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSA3MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///70\n");

/***/ }),
/* 71 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("// Delaunay Triangulation\n// Modified from https://github.com/ironwallaby/delaunay\nvar EPSILON = 1.0 / 1048576.0;\n\nfunction supertriangle(vertices) {\n    var xmin = Number.POSITIVE_INFINITY;\n    var ymin = Number.POSITIVE_INFINITY;\n    var xmax = Number.NEGATIVE_INFINITY;\n    var ymax = Number.NEGATIVE_INFINITY;\n    var i, dx, dy, dmax, xmid, ymid;\n\n    for (i = vertices.length; i--; ) {\n        if (vertices[i][0] < xmin) { xmin = vertices[i][0]; }\n        if (vertices[i][0] > xmax) { xmax = vertices[i][0]; }\n        if (vertices[i][1] < ymin) { ymin = vertices[i][1]; }\n        if (vertices[i][1] > ymax) { ymax = vertices[i][1]; }\n    }\n\n    dx = xmax - xmin;\n    dy = ymax - ymin;\n    dmax = Math.max(dx, dy);\n    xmid = xmin + dx * 0.5;\n    ymid = ymin + dy * 0.5;\n\n    return [\n        [xmid - 20 * dmax, ymid -      dmax],\n        [xmid            , ymid + 20 * dmax],\n        [xmid + 20 * dmax, ymid -      dmax]\n    ];\n}\n\nfunction circumcircle(vertices, i, j, k) {\n    var x1 = vertices[i][0],\n            y1 = vertices[i][1],\n            x2 = vertices[j][0],\n            y2 = vertices[j][1],\n            x3 = vertices[k][0],\n            y3 = vertices[k][1],\n            fabsy1y2 = Math.abs(y1 - y2),\n            fabsy2y3 = Math.abs(y2 - y3),\n            xc, yc, m1, m2, mx1, mx2, my1, my2, dx, dy;\n\n    /* Check for coincident points */\n    if (fabsy1y2 < EPSILON && fabsy2y3 < EPSILON) {\n        throw new Error('Eek! Coincident points!');\n    }\n\n    if (fabsy1y2 < EPSILON) {\n        m2  = -((x3 - x2) / (y3 - y2));\n        mx2 = (x2 + x3) / 2.0;\n        my2 = (y2 + y3) / 2.0;\n        xc  = (x2 + x1) / 2.0;\n        yc  = m2 * (xc - mx2) + my2;\n    }\n\n    else if (fabsy2y3 < EPSILON) {\n        m1  = -((x2 - x1) / (y2 - y1));\n        mx1 = (x1 + x2) / 2.0;\n        my1 = (y1 + y2) / 2.0;\n        xc  = (x3 + x2) / 2.0;\n        yc  = m1 * (xc - mx1) + my1;\n    }\n\n    else {\n        m1  = -((x2 - x1) / (y2 - y1));\n        m2  = -((x3 - x2) / (y3 - y2));\n        mx1 = (x1 + x2) / 2.0;\n        mx2 = (x2 + x3) / 2.0;\n        my1 = (y1 + y2) / 2.0;\n        my2 = (y2 + y3) / 2.0;\n        xc  = (m1 * mx1 - m2 * mx2 + my2 - my1) / (m1 - m2);\n        yc  = (fabsy1y2 > fabsy2y3) ?\n            m1 * (xc - mx1) + my1 :\n            m2 * (xc - mx2) + my2;\n    }\n\n    dx = x2 - xc;\n    dy = y2 - yc;\n    return {i: i, j: j, k: k, x: xc, y: yc, r: dx * dx + dy * dy};\n}\n\nfunction dedup(edges) {\n    var i, j, a, b, m, n;\n\n    for (j = edges.length; j; ) {\n        b = edges[--j];\n        a = edges[--j];\n\n        for (i = j; i; ) {\n            n = edges[--i];\n            m = edges[--i];\n\n            if ((a === m && b === n) || (a === n && b === m)) {\n                edges.splice(j, 2);\n                edges.splice(i, 2);\n                break;\n            }\n        }\n    }\n}\n\nvar delaunay = {\n    triangulate: function(vertices, key) {\n        var n = vertices.length;\n        var i, j, indices, st, open, closed, edges, dx, dy, a, b, c;\n\n        /* Bail if there aren't enough vertices to form any triangles. */\n        if (n < 3) {\n            return [];\n        }\n\n        /* Slice out the actual vertices from the passed objects. (Duplicate the\n            * array even if we don't, though, since we need to make a supertriangle\n            * later on!) */\n        vertices = vertices.slice(0);\n\n        if (key) {\n            for (i = n; i--; ) {\n                vertices[i] = vertices[i][key];\n            }\n        }\n\n        /* Make an array of indices into the vertex array, sorted by the\n            * vertices' x-position. Force stable sorting by comparing indices if\n            * the x-positions are equal. */\n        indices = new Array(n);\n\n        for (i = n; i--; ) {\n            indices[i] = i;\n        }\n\n        indices.sort(function(i, j) {\n            var diff = vertices[j][0] - vertices[i][0];\n            return diff !== 0 ? diff : i - j;\n        });\n\n        /* Next, find the vertices of the supertriangle (which contains all other\n            * triangles), and append them onto the end of a (copy of) the vertex\n            * array. */\n        st = supertriangle(vertices);\n        vertices.push(st[0], st[1], st[2]);\n\n        /* Initialize the open list (containing the supertriangle and nothing\n            * else) and the closed list (which is empty since we havn't processed\n            * any triangles yet). */\n        open   = [circumcircle(vertices, n + 0, n + 1, n + 2)];\n        closed = [];\n        edges  = [];\n\n        /* Incrementally add each vertex to the mesh. */\n        for (i = indices.length; i--; edges.length = 0) {\n            c = indices[i];\n\n            /* For each open triangle, check to see if the current point is\n                * inside it's circumcircle. If it is, remove the triangle and add\n                * it's edges to an edge list. */\n            for (j = open.length; j--; ) {\n                /* If this point is to the right of this triangle's circumcircle,\n                    * then this triangle should never get checked again. Remove it\n                    * from the open list, add it to the closed list, and skip. */\n                dx = vertices[c][0] - open[j].x;\n                if (dx > 0.0 && dx * dx > open[j].r) {\n                    closed.push(open[j]);\n                    open.splice(j, 1);\n                    continue;\n                }\n\n                /* If we're outside the circumcircle, skip this triangle. */\n                dy = vertices[c][1] - open[j].y;\n                if (dx * dx + dy * dy - open[j].r > EPSILON) {\n                    continue;\n                }\n\n                /* Remove the triangle and add it's edges to the edge list. */\n                edges.push(\n                    open[j].i, open[j].j,\n                    open[j].j, open[j].k,\n                    open[j].k, open[j].i\n                );\n                open.splice(j, 1);\n            }\n\n            /* Remove any doubled edges. */\n            dedup(edges);\n\n            /* Add a new triangle for each edge. */\n            for (j = edges.length; j; ) {\n                b = edges[--j];\n                a = edges[--j];\n                open.push(circumcircle(vertices, a, b, c));\n            }\n        }\n\n        /* Copy any remaining open triangles to the closed list, and then\n            * remove any triangles that share a vertex with the supertriangle,\n            * building a list of triplets that represent triangles. */\n        for (i = open.length; i--; ) {\n            closed.push(open[i]);\n        }\n        open.length = 0;\n\n        for (i = closed.length; i--; ) {\n            if (closed[i].i < n && closed[i].j < n && closed[i].k < n) {\n                open.push(closed[i].i, closed[i].j, closed[i].k);\n            }\n        }\n\n        /* Yay, we're done! */\n        return open;\n    },\n    contains: function(tri, p) {\n        /* Bounding box test first, for quick rejections. */\n        if ((p[0] < tri[0][0] && p[0] < tri[1][0] && p[0] < tri[2][0]) ||\n                (p[0] > tri[0][0] && p[0] > tri[1][0] && p[0] > tri[2][0]) ||\n                (p[1] < tri[0][1] && p[1] < tri[1][1] && p[1] < tri[2][1]) ||\n                (p[1] > tri[0][1] && p[1] > tri[1][1] && p[1] > tri[2][1])) {\n            return null;\n        }\n\n        var a = tri[1][0] - tri[0][0];\n        var b = tri[2][0] - tri[0][0];\n        var c = tri[1][1] - tri[0][1];\n        var d = tri[2][1] - tri[0][1];\n        var i = a * d - b * c;\n\n        /* Degenerate tri. */\n        if (i === 0.0) {\n            return null;\n        }\n\n        var u = (d * (p[0] - tri[0][0]) - b * (p[1] - tri[0][1])) / i,\n                v = (a * (p[1] - tri[0][1]) - c * (p[0] - tri[0][0])) / i;\n\n        /* If we're outside the tri, fail. */\n        if (u < 0.0 || v < 0.0 || (u + v) > 1.0) {\n            return null;\n        }\n\n        return [u, v];\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (delaunay);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy91dGlsL2RlbGF1bmF5LmpzP2ZlNDAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRGVsYXVuYXkgVHJpYW5ndWxhdGlvblxuLy8gTW9kaWZpZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vaXJvbndhbGxhYnkvZGVsYXVuYXlcbnZhciBFUFNJTE9OID0gMS4wIC8gMTA0ODU3Ni4wO1xuXG5mdW5jdGlvbiBzdXBlcnRyaWFuZ2xlKHZlcnRpY2VzKSB7XG4gICAgdmFyIHhtaW4gPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgdmFyIHltaW4gPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgdmFyIHhtYXggPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG4gICAgdmFyIHltYXggPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG4gICAgdmFyIGksIGR4LCBkeSwgZG1heCwgeG1pZCwgeW1pZDtcblxuICAgIGZvciAoaSA9IHZlcnRpY2VzLmxlbmd0aDsgaS0tOyApIHtcbiAgICAgICAgaWYgKHZlcnRpY2VzW2ldWzBdIDwgeG1pbikgeyB4bWluID0gdmVydGljZXNbaV1bMF07IH1cbiAgICAgICAgaWYgKHZlcnRpY2VzW2ldWzBdID4geG1heCkgeyB4bWF4ID0gdmVydGljZXNbaV1bMF07IH1cbiAgICAgICAgaWYgKHZlcnRpY2VzW2ldWzFdIDwgeW1pbikgeyB5bWluID0gdmVydGljZXNbaV1bMV07IH1cbiAgICAgICAgaWYgKHZlcnRpY2VzW2ldWzFdID4geW1heCkgeyB5bWF4ID0gdmVydGljZXNbaV1bMV07IH1cbiAgICB9XG5cbiAgICBkeCA9IHhtYXggLSB4bWluO1xuICAgIGR5ID0geW1heCAtIHltaW47XG4gICAgZG1heCA9IE1hdGgubWF4KGR4LCBkeSk7XG4gICAgeG1pZCA9IHhtaW4gKyBkeCAqIDAuNTtcbiAgICB5bWlkID0geW1pbiArIGR5ICogMC41O1xuXG4gICAgcmV0dXJuIFtcbiAgICAgICAgW3htaWQgLSAyMCAqIGRtYXgsIHltaWQgLSAgICAgIGRtYXhdLFxuICAgICAgICBbeG1pZCAgICAgICAgICAgICwgeW1pZCArIDIwICogZG1heF0sXG4gICAgICAgIFt4bWlkICsgMjAgKiBkbWF4LCB5bWlkIC0gICAgICBkbWF4XVxuICAgIF07XG59XG5cbmZ1bmN0aW9uIGNpcmN1bWNpcmNsZSh2ZXJ0aWNlcywgaSwgaiwgaykge1xuICAgIHZhciB4MSA9IHZlcnRpY2VzW2ldWzBdLFxuICAgICAgICAgICAgeTEgPSB2ZXJ0aWNlc1tpXVsxXSxcbiAgICAgICAgICAgIHgyID0gdmVydGljZXNbal1bMF0sXG4gICAgICAgICAgICB5MiA9IHZlcnRpY2VzW2pdWzFdLFxuICAgICAgICAgICAgeDMgPSB2ZXJ0aWNlc1trXVswXSxcbiAgICAgICAgICAgIHkzID0gdmVydGljZXNba11bMV0sXG4gICAgICAgICAgICBmYWJzeTF5MiA9IE1hdGguYWJzKHkxIC0geTIpLFxuICAgICAgICAgICAgZmFic3kyeTMgPSBNYXRoLmFicyh5MiAtIHkzKSxcbiAgICAgICAgICAgIHhjLCB5YywgbTEsIG0yLCBteDEsIG14MiwgbXkxLCBteTIsIGR4LCBkeTtcblxuICAgIC8qIENoZWNrIGZvciBjb2luY2lkZW50IHBvaW50cyAqL1xuICAgIGlmIChmYWJzeTF5MiA8IEVQU0lMT04gJiYgZmFic3kyeTMgPCBFUFNJTE9OKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRWVrISBDb2luY2lkZW50IHBvaW50cyEnKTtcbiAgICB9XG5cbiAgICBpZiAoZmFic3kxeTIgPCBFUFNJTE9OKSB7XG4gICAgICAgIG0yICA9IC0oKHgzIC0geDIpIC8gKHkzIC0geTIpKTtcbiAgICAgICAgbXgyID0gKHgyICsgeDMpIC8gMi4wO1xuICAgICAgICBteTIgPSAoeTIgKyB5MykgLyAyLjA7XG4gICAgICAgIHhjICA9ICh4MiArIHgxKSAvIDIuMDtcbiAgICAgICAgeWMgID0gbTIgKiAoeGMgLSBteDIpICsgbXkyO1xuICAgIH1cblxuICAgIGVsc2UgaWYgKGZhYnN5MnkzIDwgRVBTSUxPTikge1xuICAgICAgICBtMSAgPSAtKCh4MiAtIHgxKSAvICh5MiAtIHkxKSk7XG4gICAgICAgIG14MSA9ICh4MSArIHgyKSAvIDIuMDtcbiAgICAgICAgbXkxID0gKHkxICsgeTIpIC8gMi4wO1xuICAgICAgICB4YyAgPSAoeDMgKyB4MikgLyAyLjA7XG4gICAgICAgIHljICA9IG0xICogKHhjIC0gbXgxKSArIG15MTtcbiAgICB9XG5cbiAgICBlbHNlIHtcbiAgICAgICAgbTEgID0gLSgoeDIgLSB4MSkgLyAoeTIgLSB5MSkpO1xuICAgICAgICBtMiAgPSAtKCh4MyAtIHgyKSAvICh5MyAtIHkyKSk7XG4gICAgICAgIG14MSA9ICh4MSArIHgyKSAvIDIuMDtcbiAgICAgICAgbXgyID0gKHgyICsgeDMpIC8gMi4wO1xuICAgICAgICBteTEgPSAoeTEgKyB5MikgLyAyLjA7XG4gICAgICAgIG15MiA9ICh5MiArIHkzKSAvIDIuMDtcbiAgICAgICAgeGMgID0gKG0xICogbXgxIC0gbTIgKiBteDIgKyBteTIgLSBteTEpIC8gKG0xIC0gbTIpO1xuICAgICAgICB5YyAgPSAoZmFic3kxeTIgPiBmYWJzeTJ5MykgP1xuICAgICAgICAgICAgbTEgKiAoeGMgLSBteDEpICsgbXkxIDpcbiAgICAgICAgICAgIG0yICogKHhjIC0gbXgyKSArIG15MjtcbiAgICB9XG5cbiAgICBkeCA9IHgyIC0geGM7XG4gICAgZHkgPSB5MiAtIHljO1xuICAgIHJldHVybiB7aTogaSwgajogaiwgazogaywgeDogeGMsIHk6IHljLCByOiBkeCAqIGR4ICsgZHkgKiBkeX07XG59XG5cbmZ1bmN0aW9uIGRlZHVwKGVkZ2VzKSB7XG4gICAgdmFyIGksIGosIGEsIGIsIG0sIG47XG5cbiAgICBmb3IgKGogPSBlZGdlcy5sZW5ndGg7IGo7ICkge1xuICAgICAgICBiID0gZWRnZXNbLS1qXTtcbiAgICAgICAgYSA9IGVkZ2VzWy0tal07XG5cbiAgICAgICAgZm9yIChpID0gajsgaTsgKSB7XG4gICAgICAgICAgICBuID0gZWRnZXNbLS1pXTtcbiAgICAgICAgICAgIG0gPSBlZGdlc1stLWldO1xuXG4gICAgICAgICAgICBpZiAoKGEgPT09IG0gJiYgYiA9PT0gbikgfHwgKGEgPT09IG4gJiYgYiA9PT0gbSkpIHtcbiAgICAgICAgICAgICAgICBlZGdlcy5zcGxpY2UoaiwgMik7XG4gICAgICAgICAgICAgICAgZWRnZXMuc3BsaWNlKGksIDIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG52YXIgZGVsYXVuYXkgPSB7XG4gICAgdHJpYW5ndWxhdGU6IGZ1bmN0aW9uKHZlcnRpY2VzLCBrZXkpIHtcbiAgICAgICAgdmFyIG4gPSB2ZXJ0aWNlcy5sZW5ndGg7XG4gICAgICAgIHZhciBpLCBqLCBpbmRpY2VzLCBzdCwgb3BlbiwgY2xvc2VkLCBlZGdlcywgZHgsIGR5LCBhLCBiLCBjO1xuXG4gICAgICAgIC8qIEJhaWwgaWYgdGhlcmUgYXJlbid0IGVub3VnaCB2ZXJ0aWNlcyB0byBmb3JtIGFueSB0cmlhbmdsZXMuICovXG4gICAgICAgIGlmIChuIDwgMykge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgLyogU2xpY2Ugb3V0IHRoZSBhY3R1YWwgdmVydGljZXMgZnJvbSB0aGUgcGFzc2VkIG9iamVjdHMuIChEdXBsaWNhdGUgdGhlXG4gICAgICAgICAgICAqIGFycmF5IGV2ZW4gaWYgd2UgZG9uJ3QsIHRob3VnaCwgc2luY2Ugd2UgbmVlZCB0byBtYWtlIGEgc3VwZXJ0cmlhbmdsZVxuICAgICAgICAgICAgKiBsYXRlciBvbiEpICovXG4gICAgICAgIHZlcnRpY2VzID0gdmVydGljZXMuc2xpY2UoMCk7XG5cbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgZm9yIChpID0gbjsgaS0tOyApIHtcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlc1tpXSA9IHZlcnRpY2VzW2ldW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKiBNYWtlIGFuIGFycmF5IG9mIGluZGljZXMgaW50byB0aGUgdmVydGV4IGFycmF5LCBzb3J0ZWQgYnkgdGhlXG4gICAgICAgICAgICAqIHZlcnRpY2VzJyB4LXBvc2l0aW9uLiBGb3JjZSBzdGFibGUgc29ydGluZyBieSBjb21wYXJpbmcgaW5kaWNlcyBpZlxuICAgICAgICAgICAgKiB0aGUgeC1wb3NpdGlvbnMgYXJlIGVxdWFsLiAqL1xuICAgICAgICBpbmRpY2VzID0gbmV3IEFycmF5KG4pO1xuXG4gICAgICAgIGZvciAoaSA9IG47IGktLTsgKSB7XG4gICAgICAgICAgICBpbmRpY2VzW2ldID0gaTtcbiAgICAgICAgfVxuXG4gICAgICAgIGluZGljZXMuc29ydChmdW5jdGlvbihpLCBqKSB7XG4gICAgICAgICAgICB2YXIgZGlmZiA9IHZlcnRpY2VzW2pdWzBdIC0gdmVydGljZXNbaV1bMF07XG4gICAgICAgICAgICByZXR1cm4gZGlmZiAhPT0gMCA/IGRpZmYgOiBpIC0gajtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogTmV4dCwgZmluZCB0aGUgdmVydGljZXMgb2YgdGhlIHN1cGVydHJpYW5nbGUgKHdoaWNoIGNvbnRhaW5zIGFsbCBvdGhlclxuICAgICAgICAgICAgKiB0cmlhbmdsZXMpLCBhbmQgYXBwZW5kIHRoZW0gb250byB0aGUgZW5kIG9mIGEgKGNvcHkgb2YpIHRoZSB2ZXJ0ZXhcbiAgICAgICAgICAgICogYXJyYXkuICovXG4gICAgICAgIHN0ID0gc3VwZXJ0cmlhbmdsZSh2ZXJ0aWNlcyk7XG4gICAgICAgIHZlcnRpY2VzLnB1c2goc3RbMF0sIHN0WzFdLCBzdFsyXSk7XG5cbiAgICAgICAgLyogSW5pdGlhbGl6ZSB0aGUgb3BlbiBsaXN0IChjb250YWluaW5nIHRoZSBzdXBlcnRyaWFuZ2xlIGFuZCBub3RoaW5nXG4gICAgICAgICAgICAqIGVsc2UpIGFuZCB0aGUgY2xvc2VkIGxpc3QgKHdoaWNoIGlzIGVtcHR5IHNpbmNlIHdlIGhhdm4ndCBwcm9jZXNzZWRcbiAgICAgICAgICAgICogYW55IHRyaWFuZ2xlcyB5ZXQpLiAqL1xuICAgICAgICBvcGVuICAgPSBbY2lyY3VtY2lyY2xlKHZlcnRpY2VzLCBuICsgMCwgbiArIDEsIG4gKyAyKV07XG4gICAgICAgIGNsb3NlZCA9IFtdO1xuICAgICAgICBlZGdlcyAgPSBbXTtcblxuICAgICAgICAvKiBJbmNyZW1lbnRhbGx5IGFkZCBlYWNoIHZlcnRleCB0byB0aGUgbWVzaC4gKi9cbiAgICAgICAgZm9yIChpID0gaW5kaWNlcy5sZW5ndGg7IGktLTsgZWRnZXMubGVuZ3RoID0gMCkge1xuICAgICAgICAgICAgYyA9IGluZGljZXNbaV07XG5cbiAgICAgICAgICAgIC8qIEZvciBlYWNoIG9wZW4gdHJpYW5nbGUsIGNoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCBwb2ludCBpc1xuICAgICAgICAgICAgICAgICogaW5zaWRlIGl0J3MgY2lyY3VtY2lyY2xlLiBJZiBpdCBpcywgcmVtb3ZlIHRoZSB0cmlhbmdsZSBhbmQgYWRkXG4gICAgICAgICAgICAgICAgKiBpdCdzIGVkZ2VzIHRvIGFuIGVkZ2UgbGlzdC4gKi9cbiAgICAgICAgICAgIGZvciAoaiA9IG9wZW4ubGVuZ3RoOyBqLS07ICkge1xuICAgICAgICAgICAgICAgIC8qIElmIHRoaXMgcG9pbnQgaXMgdG8gdGhlIHJpZ2h0IG9mIHRoaXMgdHJpYW5nbGUncyBjaXJjdW1jaXJjbGUsXG4gICAgICAgICAgICAgICAgICAgICogdGhlbiB0aGlzIHRyaWFuZ2xlIHNob3VsZCBuZXZlciBnZXQgY2hlY2tlZCBhZ2Fpbi4gUmVtb3ZlIGl0XG4gICAgICAgICAgICAgICAgICAgICogZnJvbSB0aGUgb3BlbiBsaXN0LCBhZGQgaXQgdG8gdGhlIGNsb3NlZCBsaXN0LCBhbmQgc2tpcC4gKi9cbiAgICAgICAgICAgICAgICBkeCA9IHZlcnRpY2VzW2NdWzBdIC0gb3BlbltqXS54O1xuICAgICAgICAgICAgICAgIGlmIChkeCA+IDAuMCAmJiBkeCAqIGR4ID4gb3BlbltqXS5yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsb3NlZC5wdXNoKG9wZW5bal0pO1xuICAgICAgICAgICAgICAgICAgICBvcGVuLnNwbGljZShqLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyogSWYgd2UncmUgb3V0c2lkZSB0aGUgY2lyY3VtY2lyY2xlLCBza2lwIHRoaXMgdHJpYW5nbGUuICovXG4gICAgICAgICAgICAgICAgZHkgPSB2ZXJ0aWNlc1tjXVsxXSAtIG9wZW5bal0ueTtcbiAgICAgICAgICAgICAgICBpZiAoZHggKiBkeCArIGR5ICogZHkgLSBvcGVuW2pdLnIgPiBFUFNJTE9OKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qIFJlbW92ZSB0aGUgdHJpYW5nbGUgYW5kIGFkZCBpdCdzIGVkZ2VzIHRvIHRoZSBlZGdlIGxpc3QuICovXG4gICAgICAgICAgICAgICAgZWRnZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgb3BlbltqXS5pLCBvcGVuW2pdLmosXG4gICAgICAgICAgICAgICAgICAgIG9wZW5bal0uaiwgb3BlbltqXS5rLFxuICAgICAgICAgICAgICAgICAgICBvcGVuW2pdLmssIG9wZW5bal0uaVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgb3Blbi5zcGxpY2UoaiwgMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIFJlbW92ZSBhbnkgZG91YmxlZCBlZGdlcy4gKi9cbiAgICAgICAgICAgIGRlZHVwKGVkZ2VzKTtcblxuICAgICAgICAgICAgLyogQWRkIGEgbmV3IHRyaWFuZ2xlIGZvciBlYWNoIGVkZ2UuICovXG4gICAgICAgICAgICBmb3IgKGogPSBlZGdlcy5sZW5ndGg7IGo7ICkge1xuICAgICAgICAgICAgICAgIGIgPSBlZGdlc1stLWpdO1xuICAgICAgICAgICAgICAgIGEgPSBlZGdlc1stLWpdO1xuICAgICAgICAgICAgICAgIG9wZW4ucHVzaChjaXJjdW1jaXJjbGUodmVydGljZXMsIGEsIGIsIGMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIENvcHkgYW55IHJlbWFpbmluZyBvcGVuIHRyaWFuZ2xlcyB0byB0aGUgY2xvc2VkIGxpc3QsIGFuZCB0aGVuXG4gICAgICAgICAgICAqIHJlbW92ZSBhbnkgdHJpYW5nbGVzIHRoYXQgc2hhcmUgYSB2ZXJ0ZXggd2l0aCB0aGUgc3VwZXJ0cmlhbmdsZSxcbiAgICAgICAgICAgICogYnVpbGRpbmcgYSBsaXN0IG9mIHRyaXBsZXRzIHRoYXQgcmVwcmVzZW50IHRyaWFuZ2xlcy4gKi9cbiAgICAgICAgZm9yIChpID0gb3Blbi5sZW5ndGg7IGktLTsgKSB7XG4gICAgICAgICAgICBjbG9zZWQucHVzaChvcGVuW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBvcGVuLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgZm9yIChpID0gY2xvc2VkLmxlbmd0aDsgaS0tOyApIHtcbiAgICAgICAgICAgIGlmIChjbG9zZWRbaV0uaSA8IG4gJiYgY2xvc2VkW2ldLmogPCBuICYmIGNsb3NlZFtpXS5rIDwgbikge1xuICAgICAgICAgICAgICAgIG9wZW4ucHVzaChjbG9zZWRbaV0uaSwgY2xvc2VkW2ldLmosIGNsb3NlZFtpXS5rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIFlheSwgd2UncmUgZG9uZSEgKi9cbiAgICAgICAgcmV0dXJuIG9wZW47XG4gICAgfSxcbiAgICBjb250YWluczogZnVuY3Rpb24odHJpLCBwKSB7XG4gICAgICAgIC8qIEJvdW5kaW5nIGJveCB0ZXN0IGZpcnN0LCBmb3IgcXVpY2sgcmVqZWN0aW9ucy4gKi9cbiAgICAgICAgaWYgKChwWzBdIDwgdHJpWzBdWzBdICYmIHBbMF0gPCB0cmlbMV1bMF0gJiYgcFswXSA8IHRyaVsyXVswXSkgfHxcbiAgICAgICAgICAgICAgICAocFswXSA+IHRyaVswXVswXSAmJiBwWzBdID4gdHJpWzFdWzBdICYmIHBbMF0gPiB0cmlbMl1bMF0pIHx8XG4gICAgICAgICAgICAgICAgKHBbMV0gPCB0cmlbMF1bMV0gJiYgcFsxXSA8IHRyaVsxXVsxXSAmJiBwWzFdIDwgdHJpWzJdWzFdKSB8fFxuICAgICAgICAgICAgICAgIChwWzFdID4gdHJpWzBdWzFdICYmIHBbMV0gPiB0cmlbMV1bMV0gJiYgcFsxXSA+IHRyaVsyXVsxXSkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGEgPSB0cmlbMV1bMF0gLSB0cmlbMF1bMF07XG4gICAgICAgIHZhciBiID0gdHJpWzJdWzBdIC0gdHJpWzBdWzBdO1xuICAgICAgICB2YXIgYyA9IHRyaVsxXVsxXSAtIHRyaVswXVsxXTtcbiAgICAgICAgdmFyIGQgPSB0cmlbMl1bMV0gLSB0cmlbMF1bMV07XG4gICAgICAgIHZhciBpID0gYSAqIGQgLSBiICogYztcblxuICAgICAgICAvKiBEZWdlbmVyYXRlIHRyaS4gKi9cbiAgICAgICAgaWYgKGkgPT09IDAuMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdSA9IChkICogKHBbMF0gLSB0cmlbMF1bMF0pIC0gYiAqIChwWzFdIC0gdHJpWzBdWzFdKSkgLyBpLFxuICAgICAgICAgICAgICAgIHYgPSAoYSAqIChwWzFdIC0gdHJpWzBdWzFdKSAtIGMgKiAocFswXSAtIHRyaVswXVswXSkpIC8gaTtcblxuICAgICAgICAvKiBJZiB3ZSdyZSBvdXRzaWRlIHRoZSB0cmksIGZhaWwuICovXG4gICAgICAgIGlmICh1IDwgMC4wIHx8IHYgPCAwLjAgfHwgKHUgKyB2KSA+IDEuMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW3UsIHZdO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGRlbGF1bmF5O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy91dGlsL2RlbGF1bmF5LmpzXG4vLyBtb2R1bGUgaWQgPSA3MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///71\n");

/***/ }),
/* 72 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__ = __webpack_require__(5);\n// Sampler clip is especially for the animation sampler in glTF\n// Use Typed Array can reduce a lot of heap memory\n\n\n\n\n// lerp function with offset in large array\nfunction vec3lerp(out, a, b, t, oa, ob) {\n    var ax = a[oa];\n    var ay = a[oa + 1];\n    var az = a[oa + 2];\n    out[0] = ax + t * (b[ob] - ax);\n    out[1] = ay + t * (b[ob + 1] - ay);\n    out[2] = az + t * (b[ob + 2] - az);\n\n    return out;\n}\n\nfunction quatSlerp(out, a, b, t, oa, ob) {\n    // benchmarks:\n    //    http://jsperf.com/quaternion-slerp-implementations\n\n    var ax = a[0 + oa], ay = a[1 + oa], az = a[2 + oa], aw = a[3 + oa],\n        bx = b[0 + ob], by = b[1 + ob], bz = b[2 + ob], bw = b[3 + ob];\n\n    var omega, cosom, sinom, scale0, scale1;\n\n    // calc cosine\n    cosom = ax * bx + ay * by + az * bz + aw * bw;\n    // adjust signs (if necessary)\n    if (cosom < 0.0) {\n        cosom = -cosom;\n        bx = - bx;\n        by = - by;\n        bz = - bz;\n        bw = - bw;\n    }\n    // calculate coefficients\n    if ((1.0 - cosom) > 0.000001) {\n        // standard case (slerp)\n        omega  = Math.acos(cosom);\n        sinom  = Math.sin(omega);\n        scale0 = Math.sin((1.0 - t) * omega) / sinom;\n        scale1 = Math.sin(t * omega) / sinom;\n    }\n    else {\n        // 'from' and 'to' quaternions are very close\n        //  ... so we can do a linear interpolation\n        scale0 = 1.0 - t;\n        scale1 = t;\n    }\n    // calculate final values\n    out[0] = scale0 * ax + scale1 * bx;\n    out[1] = scale0 * ay + scale1 * by;\n    out[2] = scale0 * az + scale1 * bz;\n    out[3] = scale0 * aw + scale1 * bw;\n\n    return out;\n}\n\n/**\n * SamplerTrack manages `position`, `rotation`, `scale` tracks in animation of single scene node.\n * @constructor\n * @alias clay.animation.SamplerTrack\n * @param {Object} [opts]\n * @param {string} [opts.name] Track name\n * @param {clay.Node} [opts.target] Target node's transform will updated automatically\n */\nvar SamplerTrack = function (opts) {\n    opts = opts || {};\n\n    this.name = opts.name || '';\n    /**\n     * @param {clay.Node}\n     */\n    this.target = opts.target || null;\n    /**\n     * @type {Array}\n     */\n    this.position = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n    /**\n     * Rotation is represented by a quaternion\n     * @type {Array}\n     */\n    this.rotation = __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].create();\n    /**\n     * @type {Array}\n     */\n    this.scale = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].fromValues(1, 1, 1);\n\n    this.channels = {\n        time: null,\n        position: null,\n        rotation: null,\n        scale: null\n    };\n\n    this._cacheKey = 0;\n    this._cacheTime = 0;\n};\n\nSamplerTrack.prototype.setTime = function (time) {\n    if (!this.channels.time) {\n        return;\n    }\n    var channels = this.channels;\n    var len = channels.time.length;\n    var key = -1;\n    // Only one frame\n    if (len === 1) {\n        if (channels.rotation) {\n            __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].copy(this.rotation, channels.rotation);\n        }\n        if (channels.position) {\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].copy(this.position, channels.position);\n        }\n        if (channels.scale) {\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].copy(this.scale, channels.scale);\n        }\n        return;\n    }\n    // Clamp\n    else if (time <= channels.time[0]) {\n        time = channels.time[0];\n        key = 0;\n    }\n    else if (time >= channels.time[len - 1]) {\n        time = channels.time[len - 1];\n        key = len - 2;\n    }\n    else {\n        if (time < this._cacheTime) {\n            var s = Math.min(len - 1, this._cacheKey + 1);\n            for (var i = s; i >= 0; i--) {\n                if (channels.time[i - 1] <= time && channels.time[i] > time) {\n                    key = i - 1;\n                    break;\n                }\n            }\n        }\n        else {\n            for (var i = this._cacheKey; i < len - 1; i++) {\n                if (channels.time[i] <= time && channels.time[i + 1] > time) {\n                    key = i;\n                    break;\n                }\n            }\n        }\n    }\n    if (key > -1) {\n        this._cacheKey = key;\n        this._cacheTime = time;\n        var start = key;\n        var end = key + 1;\n        var startTime = channels.time[start];\n        var endTime = channels.time[end];\n        var range = endTime - startTime;\n        var percent = range === 0 ? 0 : (time - startTime) / range;\n\n        if (channels.rotation) {\n            quatSlerp(this.rotation, channels.rotation, channels.rotation, percent, start * 4, end * 4);\n        }\n        if (channels.position) {\n            vec3lerp(this.position, channels.position, channels.position, percent, start * 3, end * 3);\n        }\n        if (channels.scale) {\n            vec3lerp(this.scale, channels.scale, channels.scale, percent, start * 3, end * 3);\n        }\n    }\n    // Loop handling\n    if (key === len - 2) {\n        this._cacheKey = 0;\n        this._cacheTime = 0;\n    }\n\n    this.updateTarget();\n};\n\n/**\n * Update transform of target node manually\n */\nSamplerTrack.prototype.updateTarget = function () {\n    var channels = this.channels;\n    if (this.target) {\n        // Only update target prop if have data.\n        if (channels.position) {\n            this.target.position.setArray(this.position);\n        }\n        if (channels.rotation) {\n            this.target.rotation.setArray(this.rotation);\n        }\n        if (channels.scale) {\n            this.target.scale.setArray(this.scale);\n        }\n    }\n};\n\n/**\n * @return {number}\n */\nSamplerTrack.prototype.getMaxTime = function () {\n    return this.channels.time[this.channels.time.length - 1];\n};\n\n/**\n * @param {number} startTime\n * @param {number} endTime\n * @return {clay.animation.SamplerTrack}\n */\nSamplerTrack.prototype.getSubTrack = function (startTime, endTime) {\n\n    var subClip = new SamplerTrack({\n        name: this.name\n    });\n    var minTime = this.channels.time[0];\n    startTime = Math.min(Math.max(startTime, minTime), this.life);\n    endTime = Math.min(Math.max(endTime, minTime), this.life);\n\n    var rangeStart = this._findRange(startTime);\n    var rangeEnd = this._findRange(endTime);\n\n    var count = rangeEnd[0] - rangeStart[0] + 1;\n    if (rangeStart[1] === 0 && rangeEnd[1] === 0) {\n        count -= 1;\n    }\n    if (this.channels.rotation) {\n        subClip.channels.rotation = new Float32Array(count * 4);\n    }\n    if (this.channels.position) {\n        subClip.channels.position = new Float32Array(count * 3);\n    }\n    if (this.channels.scale) {\n        subClip.channels.scale = new Float32Array(count * 3);\n    }\n    if (this.channels.time) {\n        subClip.channels.time = new Float32Array(count);\n    }\n    // Clip at the start\n    this.setTime(startTime);\n    for (var i = 0; i < 3; i++) {\n        subClip.channels.rotation[i] = this.rotation[i];\n        subClip.channels.position[i] = this.position[i];\n        subClip.channels.scale[i] = this.scale[i];\n    }\n    subClip.channels.time[0] = 0;\n    subClip.channels.rotation[3] = this.rotation[3];\n\n    for (var i = 1; i < count-1; i++) {\n        var i2;\n        for (var j = 0; j < 3; j++) {\n            i2 = rangeStart[0] + i;\n            subClip.channels.rotation[i * 4 + j] = this.channels.rotation[i2 * 4 + j];\n            subClip.channels.position[i * 3 + j] = this.channels.position[i2 * 3 + j];\n            subClip.channels.scale[i * 3 + j] = this.channels.scale[i2 * 3 + j];\n        }\n        subClip.channels.time[i] = this.channels.time[i2] - startTime;\n        subClip.channels.rotation[i * 4 + 3] = this.channels.rotation[i2 * 4 + 3];\n    }\n    // Clip at the end\n    this.setTime(endTime);\n    for (var i = 0; i < 3; i++) {\n        subClip.channels.rotation[(count - 1) * 4 + i] = this.rotation[i];\n        subClip.channels.position[(count - 1) * 3 + i] = this.position[i];\n        subClip.channels.scale[(count - 1) * 3 + i] = this.scale[i];\n    }\n    subClip.channels.time[(count - 1)] = endTime - startTime;\n    subClip.channels.rotation[(count - 1) * 4 + 3] = this.rotation[3];\n\n    // TODO set back ?\n    subClip.life = endTime - startTime;\n    return subClip;\n};\n\nSamplerTrack.prototype._findRange = function (time) {\n    var channels = this.channels;\n    var len = channels.time.length;\n    var start = -1;\n    for (var i = 0; i < len - 1; i++) {\n        if (channels.time[i] <= time && channels.time[i+1] > time) {\n            start = i;\n        }\n    }\n    var percent = 0;\n    if (start >= 0) {\n        var startTime = channels.time[start];\n        var endTime = channels.time[start+1];\n        var percent = (time-startTime) / (endTime-startTime);\n    }\n    // Percent [0, 1)\n    return [start, percent];\n};\n\n/**\n * 1D blending between two clips\n * @function\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c1\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c2\n * @param  {number} w\n */\nSamplerTrack.prototype.blend1D = function (t1, t2, w) {\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].lerp(this.position, t1.position, t2.position, w);\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].lerp(this.scale, t1.scale, t2.scale, w);\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].slerp(this.rotation, t1.rotation, t2.rotation, w);\n};\n/**\n * 2D blending between three clips\n * @function\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c1\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c2\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c3\n * @param  {number} f\n * @param  {number} g\n */\nSamplerTrack.prototype.blend2D = (function () {\n    var q1 = __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].create();\n    var q2 = __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].create();\n    return function (t1, t2, t3, f, g) {\n        var a = 1 - f - g;\n\n        this.position[0] = t1.position[0] * a + t2.position[0] * f + t3.position[0] * g;\n        this.position[1] = t1.position[1] * a + t2.position[1] * f + t3.position[1] * g;\n        this.position[2] = t1.position[2] * a + t2.position[2] * f + t3.position[2] * g;\n\n        this.scale[0] = t1.scale[0] * a + t2.scale[0] * f + t3.scale[0] * g;\n        this.scale[1] = t1.scale[1] * a + t2.scale[1] * f + t3.scale[1] * g;\n        this.scale[2] = t1.scale[2] * a + t2.scale[2] * f + t3.scale[2] * g;\n\n        // http://msdn.microsoft.com/en-us/library/windows/desktop/bb205403(v=vs.85).aspx\n        // http://msdn.microsoft.com/en-us/library/windows/desktop/microsoft.directx_sdk.quaternion.xmquaternionbarycentric(v=vs.85).aspx\n        var s = f + g;\n        if (s === 0) {\n            __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].copy(this.rotation, t1.rotation);\n        }\n        else {\n            __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].slerp(q1, t1.rotation, t2.rotation, s);\n            __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].slerp(q2, t1.rotation, t3.rotation, s);\n            __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].slerp(this.rotation, q1, q2, g / s);\n        }\n    };\n})();\n/**\n * Additive blending between two clips\n * @function\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c1\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c2\n */\nSamplerTrack.prototype.additiveBlend = function (t1, t2) {\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].add(this.position, t1.position, t2.position);\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].add(this.scale, t1.scale, t2.scale);\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].multiply(this.rotation, t2.rotation, t1.rotation);\n};\n/**\n * Subtractive blending between two clips\n * @function\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c1\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c2\n */\nSamplerTrack.prototype.subtractiveBlend = function (t1, t2) {\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(this.position, t1.position, t2.position);\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(this.scale, t1.scale, t2.scale);\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].invert(this.rotation, t2.rotation);\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].multiply(this.rotation, this.rotation, t1.rotation);\n};\n\n/**\n * Clone a new SamplerTrack\n * @return {clay.animation.SamplerTrack}\n */\nSamplerTrack.prototype.clone = function () {\n    var track = SamplerTrack.prototype.clone.call(this);\n    track.channels = {\n        time: this.channels.time || null,\n        position: this.channels.position || null,\n        rotation: this.channels.rotation || null,\n        scale: this.channels.scale || null\n    };\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].copy(track.position, this.position);\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].copy(track.rotation, this.rotation);\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].copy(track.scale, this.scale);\n\n    track.target = this.target;\n    track.updateTarget();\n\n    return track;\n\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SamplerTrack);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9hbmltYXRpb24vU2FtcGxlclRyYWNrLmpzPzIwN2EiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2FtcGxlciBjbGlwIGlzIGVzcGVjaWFsbHkgZm9yIHRoZSBhbmltYXRpb24gc2FtcGxlciBpbiBnbFRGXG4vLyBVc2UgVHlwZWQgQXJyYXkgY2FuIHJlZHVjZSBhIGxvdCBvZiBoZWFwIG1lbW9yeVxuXG5pbXBvcnQgcXVhdCBmcm9tICcuLi9nbG1hdHJpeC9xdWF0JztcbmltcG9ydCB2ZWMzIGZyb20gJy4uL2dsbWF0cml4L3ZlYzMnO1xuXG4vLyBsZXJwIGZ1bmN0aW9uIHdpdGggb2Zmc2V0IGluIGxhcmdlIGFycmF5XG5mdW5jdGlvbiB2ZWMzbGVycChvdXQsIGEsIGIsIHQsIG9hLCBvYikge1xuICAgIHZhciBheCA9IGFbb2FdO1xuICAgIHZhciBheSA9IGFbb2EgKyAxXTtcbiAgICB2YXIgYXogPSBhW29hICsgMl07XG4gICAgb3V0WzBdID0gYXggKyB0ICogKGJbb2JdIC0gYXgpO1xuICAgIG91dFsxXSA9IGF5ICsgdCAqIChiW29iICsgMV0gLSBheSk7XG4gICAgb3V0WzJdID0gYXogKyB0ICogKGJbb2IgKyAyXSAtIGF6KTtcblxuICAgIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHF1YXRTbGVycChvdXQsIGEsIGIsIHQsIG9hLCBvYikge1xuICAgIC8vIGJlbmNobWFya3M6XG4gICAgLy8gICAgaHR0cDovL2pzcGVyZi5jb20vcXVhdGVybmlvbi1zbGVycC1pbXBsZW1lbnRhdGlvbnNcblxuICAgIHZhciBheCA9IGFbMCArIG9hXSwgYXkgPSBhWzEgKyBvYV0sIGF6ID0gYVsyICsgb2FdLCBhdyA9IGFbMyArIG9hXSxcbiAgICAgICAgYnggPSBiWzAgKyBvYl0sIGJ5ID0gYlsxICsgb2JdLCBieiA9IGJbMiArIG9iXSwgYncgPSBiWzMgKyBvYl07XG5cbiAgICB2YXIgb21lZ2EsIGNvc29tLCBzaW5vbSwgc2NhbGUwLCBzY2FsZTE7XG5cbiAgICAvLyBjYWxjIGNvc2luZVxuICAgIGNvc29tID0gYXggKiBieCArIGF5ICogYnkgKyBheiAqIGJ6ICsgYXcgKiBidztcbiAgICAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSlcbiAgICBpZiAoY29zb20gPCAwLjApIHtcbiAgICAgICAgY29zb20gPSAtY29zb207XG4gICAgICAgIGJ4ID0gLSBieDtcbiAgICAgICAgYnkgPSAtIGJ5O1xuICAgICAgICBieiA9IC0gYno7XG4gICAgICAgIGJ3ID0gLSBidztcbiAgICB9XG4gICAgLy8gY2FsY3VsYXRlIGNvZWZmaWNpZW50c1xuICAgIGlmICgoMS4wIC0gY29zb20pID4gMC4wMDAwMDEpIHtcbiAgICAgICAgLy8gc3RhbmRhcmQgY2FzZSAoc2xlcnApXG4gICAgICAgIG9tZWdhICA9IE1hdGguYWNvcyhjb3NvbSk7XG4gICAgICAgIHNpbm9tICA9IE1hdGguc2luKG9tZWdhKTtcbiAgICAgICAgc2NhbGUwID0gTWF0aC5zaW4oKDEuMCAtIHQpICogb21lZ2EpIC8gc2lub207XG4gICAgICAgIHNjYWxlMSA9IE1hdGguc2luKHQgKiBvbWVnYSkgLyBzaW5vbTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vICdmcm9tJyBhbmQgJ3RvJyBxdWF0ZXJuaW9ucyBhcmUgdmVyeSBjbG9zZVxuICAgICAgICAvLyAgLi4uIHNvIHdlIGNhbiBkbyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uXG4gICAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7XG4gICAgICAgIHNjYWxlMSA9IHQ7XG4gICAgfVxuICAgIC8vIGNhbGN1bGF0ZSBmaW5hbCB2YWx1ZXNcbiAgICBvdXRbMF0gPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4O1xuICAgIG91dFsxXSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7XG4gICAgb3V0WzJdID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejtcbiAgICBvdXRbM10gPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3O1xuXG4gICAgcmV0dXJuIG91dDtcbn1cblxuLyoqXG4gKiBTYW1wbGVyVHJhY2sgbWFuYWdlcyBgcG9zaXRpb25gLCBgcm90YXRpb25gLCBgc2NhbGVgIHRyYWNrcyBpbiBhbmltYXRpb24gb2Ygc2luZ2xlIHNjZW5lIG5vZGUuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5TYW1wbGVyVHJhY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c11cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5uYW1lXSBUcmFjayBuYW1lXG4gKiBAcGFyYW0ge2NsYXkuTm9kZX0gW29wdHMudGFyZ2V0XSBUYXJnZXQgbm9kZSdzIHRyYW5zZm9ybSB3aWxsIHVwZGF0ZWQgYXV0b21hdGljYWxseVxuICovXG52YXIgU2FtcGxlclRyYWNrID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICAgIHRoaXMubmFtZSA9IG9wdHMubmFtZSB8fCAnJztcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2NsYXkuTm9kZX1cbiAgICAgKi9cbiAgICB0aGlzLnRhcmdldCA9IG9wdHMudGFyZ2V0IHx8IG51bGw7XG4gICAgLyoqXG4gICAgICogQHR5cGUge0FycmF5fVxuICAgICAqL1xuICAgIHRoaXMucG9zaXRpb24gPSB2ZWMzLmNyZWF0ZSgpO1xuICAgIC8qKlxuICAgICAqIFJvdGF0aW9uIGlzIHJlcHJlc2VudGVkIGJ5IGEgcXVhdGVybmlvblxuICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAgKi9cbiAgICB0aGlzLnJvdGF0aW9uID0gcXVhdC5jcmVhdGUoKTtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgICovXG4gICAgdGhpcy5zY2FsZSA9IHZlYzMuZnJvbVZhbHVlcygxLCAxLCAxKTtcblxuICAgIHRoaXMuY2hhbm5lbHMgPSB7XG4gICAgICAgIHRpbWU6IG51bGwsXG4gICAgICAgIHBvc2l0aW9uOiBudWxsLFxuICAgICAgICByb3RhdGlvbjogbnVsbCxcbiAgICAgICAgc2NhbGU6IG51bGxcbiAgICB9O1xuXG4gICAgdGhpcy5fY2FjaGVLZXkgPSAwO1xuICAgIHRoaXMuX2NhY2hlVGltZSA9IDA7XG59O1xuXG5TYW1wbGVyVHJhY2sucHJvdG90eXBlLnNldFRpbWUgPSBmdW5jdGlvbiAodGltZSkge1xuICAgIGlmICghdGhpcy5jaGFubmVscy50aW1lKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGNoYW5uZWxzID0gdGhpcy5jaGFubmVscztcbiAgICB2YXIgbGVuID0gY2hhbm5lbHMudGltZS5sZW5ndGg7XG4gICAgdmFyIGtleSA9IC0xO1xuICAgIC8vIE9ubHkgb25lIGZyYW1lXG4gICAgaWYgKGxlbiA9PT0gMSkge1xuICAgICAgICBpZiAoY2hhbm5lbHMucm90YXRpb24pIHtcbiAgICAgICAgICAgIHF1YXQuY29weSh0aGlzLnJvdGF0aW9uLCBjaGFubmVscy5yb3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5uZWxzLnBvc2l0aW9uKSB7XG4gICAgICAgICAgICB2ZWMzLmNvcHkodGhpcy5wb3NpdGlvbiwgY2hhbm5lbHMucG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFubmVscy5zY2FsZSkge1xuICAgICAgICAgICAgdmVjMy5jb3B5KHRoaXMuc2NhbGUsIGNoYW5uZWxzLnNjYWxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIENsYW1wXG4gICAgZWxzZSBpZiAodGltZSA8PSBjaGFubmVscy50aW1lWzBdKSB7XG4gICAgICAgIHRpbWUgPSBjaGFubmVscy50aW1lWzBdO1xuICAgICAgICBrZXkgPSAwO1xuICAgIH1cbiAgICBlbHNlIGlmICh0aW1lID49IGNoYW5uZWxzLnRpbWVbbGVuIC0gMV0pIHtcbiAgICAgICAgdGltZSA9IGNoYW5uZWxzLnRpbWVbbGVuIC0gMV07XG4gICAgICAgIGtleSA9IGxlbiAtIDI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAodGltZSA8IHRoaXMuX2NhY2hlVGltZSkge1xuICAgICAgICAgICAgdmFyIHMgPSBNYXRoLm1pbihsZW4gLSAxLCB0aGlzLl9jYWNoZUtleSArIDEpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHM7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYW5uZWxzLnRpbWVbaSAtIDFdIDw9IHRpbWUgJiYgY2hhbm5lbHMudGltZVtpXSA+IHRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gaSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSB0aGlzLl9jYWNoZUtleTsgaSA8IGxlbiAtIDE7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChjaGFubmVscy50aW1lW2ldIDw9IHRpbWUgJiYgY2hhbm5lbHMudGltZVtpICsgMV0gPiB0aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoa2V5ID4gLTEpIHtcbiAgICAgICAgdGhpcy5fY2FjaGVLZXkgPSBrZXk7XG4gICAgICAgIHRoaXMuX2NhY2hlVGltZSA9IHRpbWU7XG4gICAgICAgIHZhciBzdGFydCA9IGtleTtcbiAgICAgICAgdmFyIGVuZCA9IGtleSArIDE7XG4gICAgICAgIHZhciBzdGFydFRpbWUgPSBjaGFubmVscy50aW1lW3N0YXJ0XTtcbiAgICAgICAgdmFyIGVuZFRpbWUgPSBjaGFubmVscy50aW1lW2VuZF07XG4gICAgICAgIHZhciByYW5nZSA9IGVuZFRpbWUgLSBzdGFydFRpbWU7XG4gICAgICAgIHZhciBwZXJjZW50ID0gcmFuZ2UgPT09IDAgPyAwIDogKHRpbWUgLSBzdGFydFRpbWUpIC8gcmFuZ2U7XG5cbiAgICAgICAgaWYgKGNoYW5uZWxzLnJvdGF0aW9uKSB7XG4gICAgICAgICAgICBxdWF0U2xlcnAodGhpcy5yb3RhdGlvbiwgY2hhbm5lbHMucm90YXRpb24sIGNoYW5uZWxzLnJvdGF0aW9uLCBwZXJjZW50LCBzdGFydCAqIDQsIGVuZCAqIDQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFubmVscy5wb3NpdGlvbikge1xuICAgICAgICAgICAgdmVjM2xlcnAodGhpcy5wb3NpdGlvbiwgY2hhbm5lbHMucG9zaXRpb24sIGNoYW5uZWxzLnBvc2l0aW9uLCBwZXJjZW50LCBzdGFydCAqIDMsIGVuZCAqIDMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFubmVscy5zY2FsZSkge1xuICAgICAgICAgICAgdmVjM2xlcnAodGhpcy5zY2FsZSwgY2hhbm5lbHMuc2NhbGUsIGNoYW5uZWxzLnNjYWxlLCBwZXJjZW50LCBzdGFydCAqIDMsIGVuZCAqIDMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIExvb3AgaGFuZGxpbmdcbiAgICBpZiAoa2V5ID09PSBsZW4gLSAyKSB7XG4gICAgICAgIHRoaXMuX2NhY2hlS2V5ID0gMDtcbiAgICAgICAgdGhpcy5fY2FjaGVUaW1lID0gMDtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVRhcmdldCgpO1xufTtcblxuLyoqXG4gKiBVcGRhdGUgdHJhbnNmb3JtIG9mIHRhcmdldCBub2RlIG1hbnVhbGx5XG4gKi9cblNhbXBsZXJUcmFjay5wcm90b3R5cGUudXBkYXRlVGFyZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjaGFubmVscyA9IHRoaXMuY2hhbm5lbHM7XG4gICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICAgIC8vIE9ubHkgdXBkYXRlIHRhcmdldCBwcm9wIGlmIGhhdmUgZGF0YS5cbiAgICAgICAgaWYgKGNoYW5uZWxzLnBvc2l0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldC5wb3NpdGlvbi5zZXRBcnJheSh0aGlzLnBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbm5lbHMucm90YXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJvdGF0aW9uLnNldEFycmF5KHRoaXMucm90YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFubmVscy5zY2FsZSkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQuc2NhbGUuc2V0QXJyYXkodGhpcy5zY2FsZSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuU2FtcGxlclRyYWNrLnByb3RvdHlwZS5nZXRNYXhUaW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmNoYW5uZWxzLnRpbWVbdGhpcy5jaGFubmVscy50aW1lLmxlbmd0aCAtIDFdO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnRUaW1lXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kVGltZVxuICogQHJldHVybiB7Y2xheS5hbmltYXRpb24uU2FtcGxlclRyYWNrfVxuICovXG5TYW1wbGVyVHJhY2sucHJvdG90eXBlLmdldFN1YlRyYWNrID0gZnVuY3Rpb24gKHN0YXJ0VGltZSwgZW5kVGltZSkge1xuXG4gICAgdmFyIHN1YkNsaXAgPSBuZXcgU2FtcGxlclRyYWNrKHtcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lXG4gICAgfSk7XG4gICAgdmFyIG1pblRpbWUgPSB0aGlzLmNoYW5uZWxzLnRpbWVbMF07XG4gICAgc3RhcnRUaW1lID0gTWF0aC5taW4oTWF0aC5tYXgoc3RhcnRUaW1lLCBtaW5UaW1lKSwgdGhpcy5saWZlKTtcbiAgICBlbmRUaW1lID0gTWF0aC5taW4oTWF0aC5tYXgoZW5kVGltZSwgbWluVGltZSksIHRoaXMubGlmZSk7XG5cbiAgICB2YXIgcmFuZ2VTdGFydCA9IHRoaXMuX2ZpbmRSYW5nZShzdGFydFRpbWUpO1xuICAgIHZhciByYW5nZUVuZCA9IHRoaXMuX2ZpbmRSYW5nZShlbmRUaW1lKTtcblxuICAgIHZhciBjb3VudCA9IHJhbmdlRW5kWzBdIC0gcmFuZ2VTdGFydFswXSArIDE7XG4gICAgaWYgKHJhbmdlU3RhcnRbMV0gPT09IDAgJiYgcmFuZ2VFbmRbMV0gPT09IDApIHtcbiAgICAgICAgY291bnQgLT0gMTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2hhbm5lbHMucm90YXRpb24pIHtcbiAgICAgICAgc3ViQ2xpcC5jaGFubmVscy5yb3RhdGlvbiA9IG5ldyBGbG9hdDMyQXJyYXkoY291bnQgKiA0KTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2hhbm5lbHMucG9zaXRpb24pIHtcbiAgICAgICAgc3ViQ2xpcC5jaGFubmVscy5wb3NpdGlvbiA9IG5ldyBGbG9hdDMyQXJyYXkoY291bnQgKiAzKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2hhbm5lbHMuc2NhbGUpIHtcbiAgICAgICAgc3ViQ2xpcC5jaGFubmVscy5zY2FsZSA9IG5ldyBGbG9hdDMyQXJyYXkoY291bnQgKiAzKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2hhbm5lbHMudGltZSkge1xuICAgICAgICBzdWJDbGlwLmNoYW5uZWxzLnRpbWUgPSBuZXcgRmxvYXQzMkFycmF5KGNvdW50KTtcbiAgICB9XG4gICAgLy8gQ2xpcCBhdCB0aGUgc3RhcnRcbiAgICB0aGlzLnNldFRpbWUoc3RhcnRUaW1lKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICBzdWJDbGlwLmNoYW5uZWxzLnJvdGF0aW9uW2ldID0gdGhpcy5yb3RhdGlvbltpXTtcbiAgICAgICAgc3ViQ2xpcC5jaGFubmVscy5wb3NpdGlvbltpXSA9IHRoaXMucG9zaXRpb25baV07XG4gICAgICAgIHN1YkNsaXAuY2hhbm5lbHMuc2NhbGVbaV0gPSB0aGlzLnNjYWxlW2ldO1xuICAgIH1cbiAgICBzdWJDbGlwLmNoYW5uZWxzLnRpbWVbMF0gPSAwO1xuICAgIHN1YkNsaXAuY2hhbm5lbHMucm90YXRpb25bM10gPSB0aGlzLnJvdGF0aW9uWzNdO1xuXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBjb3VudC0xOyBpKyspIHtcbiAgICAgICAgdmFyIGkyO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDM7IGorKykge1xuICAgICAgICAgICAgaTIgPSByYW5nZVN0YXJ0WzBdICsgaTtcbiAgICAgICAgICAgIHN1YkNsaXAuY2hhbm5lbHMucm90YXRpb25baSAqIDQgKyBqXSA9IHRoaXMuY2hhbm5lbHMucm90YXRpb25baTIgKiA0ICsgal07XG4gICAgICAgICAgICBzdWJDbGlwLmNoYW5uZWxzLnBvc2l0aW9uW2kgKiAzICsgal0gPSB0aGlzLmNoYW5uZWxzLnBvc2l0aW9uW2kyICogMyArIGpdO1xuICAgICAgICAgICAgc3ViQ2xpcC5jaGFubmVscy5zY2FsZVtpICogMyArIGpdID0gdGhpcy5jaGFubmVscy5zY2FsZVtpMiAqIDMgKyBqXTtcbiAgICAgICAgfVxuICAgICAgICBzdWJDbGlwLmNoYW5uZWxzLnRpbWVbaV0gPSB0aGlzLmNoYW5uZWxzLnRpbWVbaTJdIC0gc3RhcnRUaW1lO1xuICAgICAgICBzdWJDbGlwLmNoYW5uZWxzLnJvdGF0aW9uW2kgKiA0ICsgM10gPSB0aGlzLmNoYW5uZWxzLnJvdGF0aW9uW2kyICogNCArIDNdO1xuICAgIH1cbiAgICAvLyBDbGlwIGF0IHRoZSBlbmRcbiAgICB0aGlzLnNldFRpbWUoZW5kVGltZSk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgc3ViQ2xpcC5jaGFubmVscy5yb3RhdGlvblsoY291bnQgLSAxKSAqIDQgKyBpXSA9IHRoaXMucm90YXRpb25baV07XG4gICAgICAgIHN1YkNsaXAuY2hhbm5lbHMucG9zaXRpb25bKGNvdW50IC0gMSkgKiAzICsgaV0gPSB0aGlzLnBvc2l0aW9uW2ldO1xuICAgICAgICBzdWJDbGlwLmNoYW5uZWxzLnNjYWxlWyhjb3VudCAtIDEpICogMyArIGldID0gdGhpcy5zY2FsZVtpXTtcbiAgICB9XG4gICAgc3ViQ2xpcC5jaGFubmVscy50aW1lWyhjb3VudCAtIDEpXSA9IGVuZFRpbWUgLSBzdGFydFRpbWU7XG4gICAgc3ViQ2xpcC5jaGFubmVscy5yb3RhdGlvblsoY291bnQgLSAxKSAqIDQgKyAzXSA9IHRoaXMucm90YXRpb25bM107XG5cbiAgICAvLyBUT0RPIHNldCBiYWNrID9cbiAgICBzdWJDbGlwLmxpZmUgPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuICAgIHJldHVybiBzdWJDbGlwO1xufTtcblxuU2FtcGxlclRyYWNrLnByb3RvdHlwZS5fZmluZFJhbmdlID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICB2YXIgY2hhbm5lbHMgPSB0aGlzLmNoYW5uZWxzO1xuICAgIHZhciBsZW4gPSBjaGFubmVscy50aW1lLmxlbmd0aDtcbiAgICB2YXIgc3RhcnQgPSAtMTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbiAtIDE7IGkrKykge1xuICAgICAgICBpZiAoY2hhbm5lbHMudGltZVtpXSA8PSB0aW1lICYmIGNoYW5uZWxzLnRpbWVbaSsxXSA+IHRpbWUpIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgcGVyY2VudCA9IDA7XG4gICAgaWYgKHN0YXJ0ID49IDApIHtcbiAgICAgICAgdmFyIHN0YXJ0VGltZSA9IGNoYW5uZWxzLnRpbWVbc3RhcnRdO1xuICAgICAgICB2YXIgZW5kVGltZSA9IGNoYW5uZWxzLnRpbWVbc3RhcnQrMV07XG4gICAgICAgIHZhciBwZXJjZW50ID0gKHRpbWUtc3RhcnRUaW1lKSAvIChlbmRUaW1lLXN0YXJ0VGltZSk7XG4gICAgfVxuICAgIC8vIFBlcmNlbnQgWzAsIDEpXG4gICAgcmV0dXJuIFtzdGFydCwgcGVyY2VudF07XG59O1xuXG4vKipcbiAqIDFEIGJsZW5kaW5nIGJldHdlZW4gdHdvIGNsaXBzXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuYW5pbWF0aW9uLlNhbXBsZXJUcmFja3xjbGF5LmFuaW1hdGlvbi5UcmFuc2Zvcm1UcmFja30gYzFcbiAqIEBwYXJhbSAge2NsYXkuYW5pbWF0aW9uLlNhbXBsZXJUcmFja3xjbGF5LmFuaW1hdGlvbi5UcmFuc2Zvcm1UcmFja30gYzJcbiAqIEBwYXJhbSAge251bWJlcn0gd1xuICovXG5TYW1wbGVyVHJhY2sucHJvdG90eXBlLmJsZW5kMUQgPSBmdW5jdGlvbiAodDEsIHQyLCB3KSB7XG4gICAgdmVjMy5sZXJwKHRoaXMucG9zaXRpb24sIHQxLnBvc2l0aW9uLCB0Mi5wb3NpdGlvbiwgdyk7XG4gICAgdmVjMy5sZXJwKHRoaXMuc2NhbGUsIHQxLnNjYWxlLCB0Mi5zY2FsZSwgdyk7XG4gICAgcXVhdC5zbGVycCh0aGlzLnJvdGF0aW9uLCB0MS5yb3RhdGlvbiwgdDIucm90YXRpb24sIHcpO1xufTtcbi8qKlxuICogMkQgYmxlbmRpbmcgYmV0d2VlbiB0aHJlZSBjbGlwc1xuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LmFuaW1hdGlvbi5TYW1wbGVyVHJhY2t8Y2xheS5hbmltYXRpb24uVHJhbnNmb3JtVHJhY2t9IGMxXG4gKiBAcGFyYW0gIHtjbGF5LmFuaW1hdGlvbi5TYW1wbGVyVHJhY2t8Y2xheS5hbmltYXRpb24uVHJhbnNmb3JtVHJhY2t9IGMyXG4gKiBAcGFyYW0gIHtjbGF5LmFuaW1hdGlvbi5TYW1wbGVyVHJhY2t8Y2xheS5hbmltYXRpb24uVHJhbnNmb3JtVHJhY2t9IGMzXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGZcbiAqIEBwYXJhbSAge251bWJlcn0gZ1xuICovXG5TYW1wbGVyVHJhY2sucHJvdG90eXBlLmJsZW5kMkQgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBxMSA9IHF1YXQuY3JlYXRlKCk7XG4gICAgdmFyIHEyID0gcXVhdC5jcmVhdGUoKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHQxLCB0MiwgdDMsIGYsIGcpIHtcbiAgICAgICAgdmFyIGEgPSAxIC0gZiAtIGc7XG5cbiAgICAgICAgdGhpcy5wb3NpdGlvblswXSA9IHQxLnBvc2l0aW9uWzBdICogYSArIHQyLnBvc2l0aW9uWzBdICogZiArIHQzLnBvc2l0aW9uWzBdICogZztcbiAgICAgICAgdGhpcy5wb3NpdGlvblsxXSA9IHQxLnBvc2l0aW9uWzFdICogYSArIHQyLnBvc2l0aW9uWzFdICogZiArIHQzLnBvc2l0aW9uWzFdICogZztcbiAgICAgICAgdGhpcy5wb3NpdGlvblsyXSA9IHQxLnBvc2l0aW9uWzJdICogYSArIHQyLnBvc2l0aW9uWzJdICogZiArIHQzLnBvc2l0aW9uWzJdICogZztcblxuICAgICAgICB0aGlzLnNjYWxlWzBdID0gdDEuc2NhbGVbMF0gKiBhICsgdDIuc2NhbGVbMF0gKiBmICsgdDMuc2NhbGVbMF0gKiBnO1xuICAgICAgICB0aGlzLnNjYWxlWzFdID0gdDEuc2NhbGVbMV0gKiBhICsgdDIuc2NhbGVbMV0gKiBmICsgdDMuc2NhbGVbMV0gKiBnO1xuICAgICAgICB0aGlzLnNjYWxlWzJdID0gdDEuc2NhbGVbMl0gKiBhICsgdDIuc2NhbGVbMl0gKiBmICsgdDMuc2NhbGVbMl0gKiBnO1xuXG4gICAgICAgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS93aW5kb3dzL2Rlc2t0b3AvYmIyMDU0MDModj12cy44NSkuYXNweFxuICAgICAgICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvd2luZG93cy9kZXNrdG9wL21pY3Jvc29mdC5kaXJlY3R4X3Nkay5xdWF0ZXJuaW9uLnhtcXVhdGVybmlvbmJhcnljZW50cmljKHY9dnMuODUpLmFzcHhcbiAgICAgICAgdmFyIHMgPSBmICsgZztcbiAgICAgICAgaWYgKHMgPT09IDApIHtcbiAgICAgICAgICAgIHF1YXQuY29weSh0aGlzLnJvdGF0aW9uLCB0MS5yb3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBxdWF0LnNsZXJwKHExLCB0MS5yb3RhdGlvbiwgdDIucm90YXRpb24sIHMpO1xuICAgICAgICAgICAgcXVhdC5zbGVycChxMiwgdDEucm90YXRpb24sIHQzLnJvdGF0aW9uLCBzKTtcbiAgICAgICAgICAgIHF1YXQuc2xlcnAodGhpcy5yb3RhdGlvbiwgcTEsIHEyLCBnIC8gcyk7XG4gICAgICAgIH1cbiAgICB9O1xufSkoKTtcbi8qKlxuICogQWRkaXRpdmUgYmxlbmRpbmcgYmV0d2VlbiB0d28gY2xpcHNcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5hbmltYXRpb24uU2FtcGxlclRyYWNrfGNsYXkuYW5pbWF0aW9uLlRyYW5zZm9ybVRyYWNrfSBjMVxuICogQHBhcmFtICB7Y2xheS5hbmltYXRpb24uU2FtcGxlclRyYWNrfGNsYXkuYW5pbWF0aW9uLlRyYW5zZm9ybVRyYWNrfSBjMlxuICovXG5TYW1wbGVyVHJhY2sucHJvdG90eXBlLmFkZGl0aXZlQmxlbmQgPSBmdW5jdGlvbiAodDEsIHQyKSB7XG4gICAgdmVjMy5hZGQodGhpcy5wb3NpdGlvbiwgdDEucG9zaXRpb24sIHQyLnBvc2l0aW9uKTtcbiAgICB2ZWMzLmFkZCh0aGlzLnNjYWxlLCB0MS5zY2FsZSwgdDIuc2NhbGUpO1xuICAgIHF1YXQubXVsdGlwbHkodGhpcy5yb3RhdGlvbiwgdDIucm90YXRpb24sIHQxLnJvdGF0aW9uKTtcbn07XG4vKipcbiAqIFN1YnRyYWN0aXZlIGJsZW5kaW5nIGJldHdlZW4gdHdvIGNsaXBzXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuYW5pbWF0aW9uLlNhbXBsZXJUcmFja3xjbGF5LmFuaW1hdGlvbi5UcmFuc2Zvcm1UcmFja30gYzFcbiAqIEBwYXJhbSAge2NsYXkuYW5pbWF0aW9uLlNhbXBsZXJUcmFja3xjbGF5LmFuaW1hdGlvbi5UcmFuc2Zvcm1UcmFja30gYzJcbiAqL1xuU2FtcGxlclRyYWNrLnByb3RvdHlwZS5zdWJ0cmFjdGl2ZUJsZW5kID0gZnVuY3Rpb24gKHQxLCB0Mikge1xuICAgIHZlYzMuc3ViKHRoaXMucG9zaXRpb24sIHQxLnBvc2l0aW9uLCB0Mi5wb3NpdGlvbik7XG4gICAgdmVjMy5zdWIodGhpcy5zY2FsZSwgdDEuc2NhbGUsIHQyLnNjYWxlKTtcbiAgICBxdWF0LmludmVydCh0aGlzLnJvdGF0aW9uLCB0Mi5yb3RhdGlvbik7XG4gICAgcXVhdC5tdWx0aXBseSh0aGlzLnJvdGF0aW9uLCB0aGlzLnJvdGF0aW9uLCB0MS5yb3RhdGlvbik7XG59O1xuXG4vKipcbiAqIENsb25lIGEgbmV3IFNhbXBsZXJUcmFja1xuICogQHJldHVybiB7Y2xheS5hbmltYXRpb24uU2FtcGxlclRyYWNrfVxuICovXG5TYW1wbGVyVHJhY2sucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0cmFjayA9IFNhbXBsZXJUcmFjay5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTtcbiAgICB0cmFjay5jaGFubmVscyA9IHtcbiAgICAgICAgdGltZTogdGhpcy5jaGFubmVscy50aW1lIHx8IG51bGwsXG4gICAgICAgIHBvc2l0aW9uOiB0aGlzLmNoYW5uZWxzLnBvc2l0aW9uIHx8IG51bGwsXG4gICAgICAgIHJvdGF0aW9uOiB0aGlzLmNoYW5uZWxzLnJvdGF0aW9uIHx8IG51bGwsXG4gICAgICAgIHNjYWxlOiB0aGlzLmNoYW5uZWxzLnNjYWxlIHx8IG51bGxcbiAgICB9O1xuICAgIHZlYzMuY29weSh0cmFjay5wb3NpdGlvbiwgdGhpcy5wb3NpdGlvbik7XG4gICAgcXVhdC5jb3B5KHRyYWNrLnJvdGF0aW9uLCB0aGlzLnJvdGF0aW9uKTtcbiAgICB2ZWMzLmNvcHkodHJhY2suc2NhbGUsIHRoaXMuc2NhbGUpO1xuXG4gICAgdHJhY2sudGFyZ2V0ID0gdGhpcy50YXJnZXQ7XG4gICAgdHJhY2sudXBkYXRlVGFyZ2V0KCk7XG5cbiAgICByZXR1cm4gdHJhY2s7XG5cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNhbXBsZXJUcmFjaztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvYW5pbWF0aW9uL1NhbXBsZXJUcmFjay5qc1xuLy8gbW9kdWxlIGlkID0gNzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///72\n");

/***/ }),
/* 73 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/**\n * Extend a sub class from base class\n * @param {object|Function} makeDefaultOpt default option of this sub class, method of the sub can use this.xxx to access this option\n * @param {Function} [initialize] Initialize after the sub class is instantiated\n * @param {Object} [proto] Prototype methods/properties of the sub class\n * @memberOf clay.core.mixin.extend\n * @return {Function}\n */\nfunction derive(makeDefaultOpt, initialize/*optional*/, proto/*optional*/) {\n\n    if (typeof initialize == 'object') {\n        proto = initialize;\n        initialize = null;\n    }\n\n    var _super = this;\n\n    var propList;\n    if (!(makeDefaultOpt instanceof Function)) {\n        // Optimize the property iterate if it have been fixed\n        propList = [];\n        for (var propName in makeDefaultOpt) {\n            if (makeDefaultOpt.hasOwnProperty(propName)) {\n                propList.push(propName);\n            }\n        }\n    }\n\n    var sub = function(options) {\n\n        // call super constructor\n        _super.apply(this, arguments);\n\n        if (makeDefaultOpt instanceof Function) {\n            // Invoke makeDefaultOpt each time if it is a function, So we can make sure each\n            // property in the object will not be shared by mutiple instances\n            extend(this, makeDefaultOpt.call(this, options));\n        }\n        else {\n            extendWithPropList(this, makeDefaultOpt, propList);\n        }\n\n        if (this.constructor === sub) {\n            // Initialize function will be called in the order of inherit\n            var initializers = sub.__initializers__;\n            for (var i = 0; i < initializers.length; i++) {\n                initializers[i].apply(this, arguments);\n            }\n        }\n    };\n    // save super constructor\n    sub.__super__ = _super;\n    // Initialize function will be called after all the super constructor is called\n    if (!_super.__initializers__) {\n        sub.__initializers__ = [];\n    } else {\n        sub.__initializers__ = _super.__initializers__.slice();\n    }\n    if (initialize) {\n        sub.__initializers__.push(initialize);\n    }\n\n    var Ctor = function() {};\n    Ctor.prototype = _super.prototype;\n    sub.prototype = new Ctor();\n    sub.prototype.constructor = sub;\n    extend(sub.prototype, proto);\n\n    // extend the derive method as a static method;\n    sub.extend = _super.extend;\n\n    // DEPCRATED\n    sub.derive = _super.extend;\n\n    return sub;\n}\n\nfunction extend(target, source) {\n    if (!source) {\n        return;\n    }\n    for (var name in source) {\n        if (source.hasOwnProperty(name)) {\n            target[name] = source[name];\n        }\n    }\n}\n\nfunction extendWithPropList(target, source, propList) {\n    for (var i = 0; i < propList.length; i++) {\n        var propName = propList[i];\n        target[propName] = source[propName];\n    }\n}\n\n/**\n * @alias clay.core.mixin.extend\n * @mixin\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n\n    extend: derive,\n\n    // DEPCRATED\n    derive: derive\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb3JlL21peGluL2V4dGVuZC5qcz9hZDJlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRXh0ZW5kIGEgc3ViIGNsYXNzIGZyb20gYmFzZSBjbGFzc1xuICogQHBhcmFtIHtvYmplY3R8RnVuY3Rpb259IG1ha2VEZWZhdWx0T3B0IGRlZmF1bHQgb3B0aW9uIG9mIHRoaXMgc3ViIGNsYXNzLCBtZXRob2Qgb2YgdGhlIHN1YiBjYW4gdXNlIHRoaXMueHh4IHRvIGFjY2VzcyB0aGlzIG9wdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2luaXRpYWxpemVdIEluaXRpYWxpemUgYWZ0ZXIgdGhlIHN1YiBjbGFzcyBpcyBpbnN0YW50aWF0ZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcHJvdG9dIFByb3RvdHlwZSBtZXRob2RzL3Byb3BlcnRpZXMgb2YgdGhlIHN1YiBjbGFzc1xuICogQG1lbWJlck9mIGNsYXkuY29yZS5taXhpbi5leHRlbmRcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBkZXJpdmUobWFrZURlZmF1bHRPcHQsIGluaXRpYWxpemUvKm9wdGlvbmFsKi8sIHByb3RvLypvcHRpb25hbCovKSB7XG5cbiAgICBpZiAodHlwZW9mIGluaXRpYWxpemUgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcHJvdG8gPSBpbml0aWFsaXplO1xuICAgICAgICBpbml0aWFsaXplID0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgX3N1cGVyID0gdGhpcztcblxuICAgIHZhciBwcm9wTGlzdDtcbiAgICBpZiAoIShtYWtlRGVmYXVsdE9wdCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkge1xuICAgICAgICAvLyBPcHRpbWl6ZSB0aGUgcHJvcGVydHkgaXRlcmF0ZSBpZiBpdCBoYXZlIGJlZW4gZml4ZWRcbiAgICAgICAgcHJvcExpc3QgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gbWFrZURlZmF1bHRPcHQpIHtcbiAgICAgICAgICAgIGlmIChtYWtlRGVmYXVsdE9wdC5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBwcm9wTGlzdC5wdXNoKHByb3BOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBzdWIgPSBmdW5jdGlvbihvcHRpb25zKSB7XG5cbiAgICAgICAgLy8gY2FsbCBzdXBlciBjb25zdHJ1Y3RvclxuICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgICAgICBpZiAobWFrZURlZmF1bHRPcHQgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICAgICAgLy8gSW52b2tlIG1ha2VEZWZhdWx0T3B0IGVhY2ggdGltZSBpZiBpdCBpcyBhIGZ1bmN0aW9uLCBTbyB3ZSBjYW4gbWFrZSBzdXJlIGVhY2hcbiAgICAgICAgICAgIC8vIHByb3BlcnR5IGluIHRoZSBvYmplY3Qgd2lsbCBub3QgYmUgc2hhcmVkIGJ5IG11dGlwbGUgaW5zdGFuY2VzXG4gICAgICAgICAgICBleHRlbmQodGhpcywgbWFrZURlZmF1bHRPcHQuY2FsbCh0aGlzLCBvcHRpb25zKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBleHRlbmRXaXRoUHJvcExpc3QodGhpcywgbWFrZURlZmF1bHRPcHQsIHByb3BMaXN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yID09PSBzdWIpIHtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgaW4gdGhlIG9yZGVyIG9mIGluaGVyaXRcbiAgICAgICAgICAgIHZhciBpbml0aWFsaXplcnMgPSBzdWIuX19pbml0aWFsaXplcnNfXztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5pdGlhbGl6ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIHNhdmUgc3VwZXIgY29uc3RydWN0b3JcbiAgICBzdWIuX19zdXBlcl9fID0gX3N1cGVyO1xuICAgIC8vIEluaXRpYWxpemUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgYWxsIHRoZSBzdXBlciBjb25zdHJ1Y3RvciBpcyBjYWxsZWRcbiAgICBpZiAoIV9zdXBlci5fX2luaXRpYWxpemVyc19fKSB7XG4gICAgICAgIHN1Yi5fX2luaXRpYWxpemVyc19fID0gW107XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3ViLl9faW5pdGlhbGl6ZXJzX18gPSBfc3VwZXIuX19pbml0aWFsaXplcnNfXy5zbGljZSgpO1xuICAgIH1cbiAgICBpZiAoaW5pdGlhbGl6ZSkge1xuICAgICAgICBzdWIuX19pbml0aWFsaXplcnNfXy5wdXNoKGluaXRpYWxpemUpO1xuICAgIH1cblxuICAgIHZhciBDdG9yID0gZnVuY3Rpb24oKSB7fTtcbiAgICBDdG9yLnByb3RvdHlwZSA9IF9zdXBlci5wcm90b3R5cGU7XG4gICAgc3ViLnByb3RvdHlwZSA9IG5ldyBDdG9yKCk7XG4gICAgc3ViLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YjtcbiAgICBleHRlbmQoc3ViLnByb3RvdHlwZSwgcHJvdG8pO1xuXG4gICAgLy8gZXh0ZW5kIHRoZSBkZXJpdmUgbWV0aG9kIGFzIGEgc3RhdGljIG1ldGhvZDtcbiAgICBzdWIuZXh0ZW5kID0gX3N1cGVyLmV4dGVuZDtcblxuICAgIC8vIERFUENSQVRFRFxuICAgIHN1Yi5kZXJpdmUgPSBfc3VwZXIuZXh0ZW5kO1xuXG4gICAgcmV0dXJuIHN1Yjtcbn1cblxuZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XG4gICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKHZhciBuYW1lIGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICB0YXJnZXRbbmFtZV0gPSBzb3VyY2VbbmFtZV07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGV4dGVuZFdpdGhQcm9wTGlzdCh0YXJnZXQsIHNvdXJjZSwgcHJvcExpc3QpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBwcm9wTmFtZSA9IHByb3BMaXN0W2ldO1xuICAgICAgICB0YXJnZXRbcHJvcE5hbWVdID0gc291cmNlW3Byb3BOYW1lXTtcbiAgICB9XG59XG5cbi8qKlxuICogQGFsaWFzIGNsYXkuY29yZS5taXhpbi5leHRlbmRcbiAqIEBtaXhpblxuICovXG5leHBvcnQgZGVmYXVsdCB7XG5cbiAgICBleHRlbmQ6IGRlcml2ZSxcblxuICAgIC8vIERFUENSQVRFRFxuICAgIGRlcml2ZTogZGVyaXZlXG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb3JlL21peGluL2V4dGVuZC5qc1xuLy8gbW9kdWxlIGlkID0gNzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///73\n");

/***/ }),
/* 74 */
/***/ (function(module, exports) {

eval("var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzPzM2OTgiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGc7XHJcblxyXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxyXG5nID0gKGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzO1xyXG59KSgpO1xyXG5cclxudHJ5IHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcclxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsZXZhbCkoXCJ0aGlzXCIpO1xyXG59IGNhdGNoKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpXHJcblx0XHRnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzXG4vLyBtb2R1bGUgaWQgPSA3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///74\n");

/***/ }),
/* 75 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("function get(options) {\n\n    var xhr = new XMLHttpRequest();\n\n    xhr.open('get', options.url);\n    // With response type set browser can get and put binary data\n    // https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data\n    // Default is text, and it can be set\n    // arraybuffer, blob, document, json, text\n    xhr.responseType = options.responseType || 'text';\n\n    if (options.onprogress) {\n        //https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest\n        xhr.onprogress = function(e) {\n            if (e.lengthComputable) {\n                var percent = e.loaded / e.total;\n                options.onprogress(percent, e.loaded, e.total);\n            }\n            else {\n                options.onprogress(null);\n            }\n        };\n    }\n    xhr.onload = function(e) {\n        if (xhr.status >= 400) {\n            options.onerror && options.onerror();\n        }\n        else {\n            options.onload && options.onload(xhr.response);\n        }\n    };\n    if (options.onerror) {\n        xhr.onerror = options.onerror;\n    }\n    xhr.send(null);\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    get: get\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb3JlL3JlcXVlc3QuanM/MDFjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBnZXQob3B0aW9ucykge1xuXG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgeGhyLm9wZW4oJ2dldCcsIG9wdGlvbnMudXJsKTtcbiAgICAvLyBXaXRoIHJlc3BvbnNlIHR5cGUgc2V0IGJyb3dzZXIgY2FuIGdldCBhbmQgcHV0IGJpbmFyeSBkYXRhXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9ET00vWE1MSHR0cFJlcXVlc3QvU2VuZGluZ19hbmRfUmVjZWl2aW5nX0JpbmFyeV9EYXRhXG4gICAgLy8gRGVmYXVsdCBpcyB0ZXh0LCBhbmQgaXQgY2FuIGJlIHNldFxuICAgIC8vIGFycmF5YnVmZmVyLCBibG9iLCBkb2N1bWVudCwganNvbiwgdGV4dFxuICAgIHhoci5yZXNwb25zZVR5cGUgPSBvcHRpb25zLnJlc3BvbnNlVHlwZSB8fCAndGV4dCc7XG5cbiAgICBpZiAob3B0aW9ucy5vbnByb2dyZXNzKSB7XG4gICAgICAgIC8vaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9ET00vWE1MSHR0cFJlcXVlc3QvVXNpbmdfWE1MSHR0cFJlcXVlc3RcbiAgICAgICAgeGhyLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS5sZW5ndGhDb21wdXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBlcmNlbnQgPSBlLmxvYWRlZCAvIGUudG90YWw7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5vbnByb2dyZXNzKHBlcmNlbnQsIGUubG9hZGVkLCBlLnRvdGFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMub25wcm9ncmVzcyhudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPj0gNDAwKSB7XG4gICAgICAgICAgICBvcHRpb25zLm9uZXJyb3IgJiYgb3B0aW9ucy5vbmVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zLm9ubG9hZCAmJiBvcHRpb25zLm9ubG9hZCh4aHIucmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBpZiAob3B0aW9ucy5vbmVycm9yKSB7XG4gICAgICAgIHhoci5vbmVycm9yID0gb3B0aW9ucy5vbmVycm9yO1xuICAgIH1cbiAgICB4aHIuc2VuZChudWxsKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGdldDogZ2V0XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb3JlL3JlcXVlc3QuanNcbi8vIG1vZHVsZSBpZCA9IDc1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///75\n");

/***/ }),
/* 76 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Clip__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_quat__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\n\n\n\n/**\n *\n * Animation clip that manage a collection of {@link clay.animation.SamplerTrack}\n * @constructor\n * @alias clay.animation.TrackClip\n *\n * @extends clay.animation.Clip\n * @param {Object} [opts]\n * @param {string} [opts.name]\n * @param {Object} [opts.target]\n * @param {number} [opts.life]\n * @param {number} [opts.delay]\n * @param {number} [opts.gap]\n * @param {number} [opts.playbackRatio]\n * @param {boolean|number} [opts.loop] If loop is a number, it indicate the loop count of animation\n * @param {string|Function} [opts.easing]\n * @param {Function} [opts.onframe]\n * @param {Function} [opts.onfinish]\n * @param {Function} [opts.onrestart]\n * @param {Array.<clay.animation.SamplerTrack>} [opts.tracks]\n */\nvar TrackClip = function (opts) {\n\n    opts = opts || {};\n\n    __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].call(this, opts);\n\n    /**\n     *\n     * @type {clay.animation.SamplerTrack[]}\n     */\n    this.tracks = opts.tracks || [];\n\n    this.calcLifeFromTracks();\n};\n\nTrackClip.prototype = Object.create(__WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].prototype);\n\nTrackClip.prototype.constructor = TrackClip;\n\nTrackClip.prototype.step = function (time, dTime, silent) {\n\n    var ret = __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].prototype.step.call(this, time, dTime, true);\n\n    if (ret !== 'finish') {\n        var time = this.getElapsedTime();\n        // TODO life may be changed.\n        if (this._range) {\n            time = this._range[0] + time;\n        }\n        this.setTime(time);\n    }\n\n    // PENDING Schedule\n    if (!silent && ret !== 'paused') {\n        this.fire('frame');\n    }\n\n    return ret;\n};\n\n/**\n * @param {Array.<number>} range\n */\nTrackClip.prototype.setRange = function (range) {\n    this.calcLifeFromTracks();\n    this._range = range;\n    if (range) {\n        range[1] = Math.min(range[1], this.life);\n        range[0] = Math.min(range[0], this.life);\n        this.life = (range[1] - range[0]);\n    }\n};\n\nTrackClip.prototype.setTime = function (time) {\n    for (var i = 0; i < this.tracks.length; i++) {\n        this.tracks[i].setTime(time);\n    }\n};\n\nTrackClip.prototype.calcLifeFromTracks = function () {\n    this.life = 0;\n    for (var i = 0; i < this.tracks.length; i++) {\n        this.life = Math.max(this.life, this.tracks[i].getMaxTime());\n    }\n};\n\n/**\n * @param {clay.animation.SamplerTrack} track\n */\nTrackClip.prototype.addTrack = function (track) {\n    this.tracks.push(track);\n    this.calcLifeFromTracks();\n};\n\n/**\n * @param {clay.animation.SamplerTrack} track\n */\nTrackClip.prototype.removeTarck = function (track) {\n    var idx = this.tracks.indexOf(track);\n    if (idx >= 0) {\n        this.tracks.splice(idx, 1);\n    }\n};\n\n/**\n * @param {number} startTime\n * @param {number} endTime\n * @param {boolean} isLoop\n * @return {clay.animation.TrackClip}\n */\nTrackClip.prototype.getSubClip = function (startTime, endTime, isLoop) {\n    var subClip = new TrackClip({\n        name: this.name\n    });\n\n    for (var i = 0; i < this.tracks.length; i++) {\n        var subTrack = this.tracks[i].getSubTrack(startTime, endTime);\n        subClip.addTrack(subTrack);\n    }\n\n    if (isLoop !== undefined) {\n        subClip.setLoop(isLoop);\n    }\n\n    subClip.life = endTime - startTime;\n\n    return subClip;\n};\n\n/**\n * 1d blending from two skinning clips\n * @param  {clay.animation.TrackClip} clip1\n * @param  {clay.animation.TrackClip} clip2\n * @param  {number} w\n */\nTrackClip.prototype.blend1D = function (clip1, clip2, w) {\n    for (var i = 0; i < this.tracks.length; i++) {\n        var c1 = clip1.tracks[i];\n        var c2 = clip2.tracks[i];\n        var tClip = this.tracks[i];\n\n        tClip.blend1D(c1, c2, w);\n    }\n};\n\n/**\n * Additive blending from two skinning clips\n * @param  {clay.animation.TrackClip} clip1\n * @param  {clay.animation.TrackClip} clip2\n */\nTrackClip.prototype.additiveBlend = function (clip1, clip2) {\n    for (var i = 0; i < this.tracks.length; i++) {\n        var c1 = clip1.tracks[i];\n        var c2 = clip2.tracks[i];\n        var tClip = this.tracks[i];\n\n        tClip.additiveBlend(c1, c2);\n    }\n};\n\n/**\n * Subtractive blending from two skinning clips\n * @param  {clay.animation.TrackClip} clip1\n * @param  {clay.animation.TrackClip} clip2\n */\nTrackClip.prototype.subtractiveBlend = function (clip1, clip2) {\n    for (var i = 0; i < this.tracks.length; i++) {\n        var c1 = clip1.tracks[i];\n        var c2 = clip2.tracks[i];\n        var tClip = this.tracks[i];\n\n        tClip.subtractiveBlend(c1, c2);\n    }\n};\n\n/**\n * 2D blending from three skinning clips\n * @param  {clay.animation.TrackClip} clip1\n * @param  {clay.animation.TrackClip} clip2\n * @param  {clay.animation.TrackClip} clip3\n * @param  {number} f\n * @param  {number} g\n */\nTrackClip.prototype.blend2D = function (clip1, clip2, clip3, f, g) {\n    for (var i = 0; i < this.tracks.length; i++) {\n        var c1 = clip1.tracks[i];\n        var c2 = clip2.tracks[i];\n        var c3 = clip3.tracks[i];\n        var tClip = this.tracks[i];\n\n        tClip.blend2D(c1, c2, c3, f, g);\n    }\n};\n\n/**\n * Copy SRT of all joints clips from another TrackClip\n * @param  {clay.animation.TrackClip} clip\n */\nTrackClip.prototype.copy = function (clip) {\n    for (var i = 0; i < this.tracks.length; i++) {\n        var sTrack = clip.tracks[i];\n        var tTrack = this.tracks[i];\n\n        __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].copy(tTrack.position, sTrack.position);\n        __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].copy(tTrack.scale, sTrack.scale);\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_quat__[\"a\" /* default */].copy(tTrack.rotation, sTrack.rotation);\n    }\n};\n\nTrackClip.prototype.clone = function () {\n    var clip = __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].prototype.clone.call(this);\n    for (var i = 0; i < this.tracks.length; i++) {\n        clip.addTrack(this.tracks[i].clone());\n    }\n    clip.life = this.life;\n    return clip;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TrackClip);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9hbmltYXRpb24vVHJhY2tDbGlwLmpzPzExNTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENsaXAgZnJvbSAnLi9DbGlwJztcblxuaW1wb3J0IHF1YXQgZnJvbSAnLi4vZ2xtYXRyaXgvcXVhdCc7XG5pbXBvcnQgdmVjMyBmcm9tICcuLi9nbG1hdHJpeC92ZWMzJztcblxuXG4vKipcbiAqXG4gKiBBbmltYXRpb24gY2xpcCB0aGF0IG1hbmFnZSBhIGNvbGxlY3Rpb24gb2Yge0BsaW5rIGNsYXkuYW5pbWF0aW9uLlNhbXBsZXJUcmFja31cbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLlRyYWNrQ2xpcFxuICpcbiAqIEBleHRlbmRzIGNsYXkuYW5pbWF0aW9uLkNsaXBcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c11cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5uYW1lXVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLnRhcmdldF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5saWZlXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmRlbGF5XVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmdhcF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5wbGF5YmFja1JhdGlvXVxuICogQHBhcmFtIHtib29sZWFufG51bWJlcn0gW29wdHMubG9vcF0gSWYgbG9vcCBpcyBhIG51bWJlciwgaXQgaW5kaWNhdGUgdGhlIGxvb3AgY291bnQgb2YgYW5pbWF0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xGdW5jdGlvbn0gW29wdHMuZWFzaW5nXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMub25mcmFtZV1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLm9uZmluaXNoXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMub25yZXN0YXJ0XVxuICogQHBhcmFtIHtBcnJheS48Y2xheS5hbmltYXRpb24uU2FtcGxlclRyYWNrPn0gW29wdHMudHJhY2tzXVxuICovXG52YXIgVHJhY2tDbGlwID0gZnVuY3Rpb24gKG9wdHMpIHtcblxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuXG4gICAgQ2xpcC5jYWxsKHRoaXMsIG9wdHMpO1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Y2xheS5hbmltYXRpb24uU2FtcGxlclRyYWNrW119XG4gICAgICovXG4gICAgdGhpcy50cmFja3MgPSBvcHRzLnRyYWNrcyB8fCBbXTtcblxuICAgIHRoaXMuY2FsY0xpZmVGcm9tVHJhY2tzKCk7XG59O1xuXG5UcmFja0NsaXAucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDbGlwLnByb3RvdHlwZSk7XG5cblRyYWNrQ2xpcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUcmFja0NsaXA7XG5cblRyYWNrQ2xpcC5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICh0aW1lLCBkVGltZSwgc2lsZW50KSB7XG5cbiAgICB2YXIgcmV0ID0gQ2xpcC5wcm90b3R5cGUuc3RlcC5jYWxsKHRoaXMsIHRpbWUsIGRUaW1lLCB0cnVlKTtcblxuICAgIGlmIChyZXQgIT09ICdmaW5pc2gnKSB7XG4gICAgICAgIHZhciB0aW1lID0gdGhpcy5nZXRFbGFwc2VkVGltZSgpO1xuICAgICAgICAvLyBUT0RPIGxpZmUgbWF5IGJlIGNoYW5nZWQuXG4gICAgICAgIGlmICh0aGlzLl9yYW5nZSkge1xuICAgICAgICAgICAgdGltZSA9IHRoaXMuX3JhbmdlWzBdICsgdGltZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFRpbWUodGltZSk7XG4gICAgfVxuXG4gICAgLy8gUEVORElORyBTY2hlZHVsZVxuICAgIGlmICghc2lsZW50ICYmIHJldCAhPT0gJ3BhdXNlZCcpIHtcbiAgICAgICAgdGhpcy5maXJlKCdmcmFtZScpO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IHJhbmdlXG4gKi9cblRyYWNrQ2xpcC5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2UpIHtcbiAgICB0aGlzLmNhbGNMaWZlRnJvbVRyYWNrcygpO1xuICAgIHRoaXMuX3JhbmdlID0gcmFuZ2U7XG4gICAgaWYgKHJhbmdlKSB7XG4gICAgICAgIHJhbmdlWzFdID0gTWF0aC5taW4ocmFuZ2VbMV0sIHRoaXMubGlmZSk7XG4gICAgICAgIHJhbmdlWzBdID0gTWF0aC5taW4ocmFuZ2VbMF0sIHRoaXMubGlmZSk7XG4gICAgICAgIHRoaXMubGlmZSA9IChyYW5nZVsxXSAtIHJhbmdlWzBdKTtcbiAgICB9XG59O1xuXG5UcmFja0NsaXAucHJvdG90eXBlLnNldFRpbWUgPSBmdW5jdGlvbiAodGltZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy50cmFja3NbaV0uc2V0VGltZSh0aW1lKTtcbiAgICB9XG59O1xuXG5UcmFja0NsaXAucHJvdG90eXBlLmNhbGNMaWZlRnJvbVRyYWNrcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmxpZmUgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5saWZlID0gTWF0aC5tYXgodGhpcy5saWZlLCB0aGlzLnRyYWNrc1tpXS5nZXRNYXhUaW1lKCkpO1xuICAgIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHtjbGF5LmFuaW1hdGlvbi5TYW1wbGVyVHJhY2t9IHRyYWNrXG4gKi9cblRyYWNrQ2xpcC5wcm90b3R5cGUuYWRkVHJhY2sgPSBmdW5jdGlvbiAodHJhY2spIHtcbiAgICB0aGlzLnRyYWNrcy5wdXNoKHRyYWNrKTtcbiAgICB0aGlzLmNhbGNMaWZlRnJvbVRyYWNrcygpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0ge2NsYXkuYW5pbWF0aW9uLlNhbXBsZXJUcmFja30gdHJhY2tcbiAqL1xuVHJhY2tDbGlwLnByb3RvdHlwZS5yZW1vdmVUYXJjayA9IGZ1bmN0aW9uICh0cmFjaykge1xuICAgIHZhciBpZHggPSB0aGlzLnRyYWNrcy5pbmRleE9mKHRyYWNrKTtcbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgdGhpcy50cmFja3Muc3BsaWNlKGlkeCwgMSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnRUaW1lXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kVGltZVxuICogQHBhcmFtIHtib29sZWFufSBpc0xvb3BcbiAqIEByZXR1cm4ge2NsYXkuYW5pbWF0aW9uLlRyYWNrQ2xpcH1cbiAqL1xuVHJhY2tDbGlwLnByb3RvdHlwZS5nZXRTdWJDbGlwID0gZnVuY3Rpb24gKHN0YXJ0VGltZSwgZW5kVGltZSwgaXNMb29wKSB7XG4gICAgdmFyIHN1YkNsaXAgPSBuZXcgVHJhY2tDbGlwKHtcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lXG4gICAgfSk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudHJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzdWJUcmFjayA9IHRoaXMudHJhY2tzW2ldLmdldFN1YlRyYWNrKHN0YXJ0VGltZSwgZW5kVGltZSk7XG4gICAgICAgIHN1YkNsaXAuYWRkVHJhY2soc3ViVHJhY2spO1xuICAgIH1cblxuICAgIGlmIChpc0xvb3AgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzdWJDbGlwLnNldExvb3AoaXNMb29wKTtcbiAgICB9XG5cbiAgICBzdWJDbGlwLmxpZmUgPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuXG4gICAgcmV0dXJuIHN1YkNsaXA7XG59O1xuXG4vKipcbiAqIDFkIGJsZW5kaW5nIGZyb20gdHdvIHNraW5uaW5nIGNsaXBzXG4gKiBAcGFyYW0gIHtjbGF5LmFuaW1hdGlvbi5UcmFja0NsaXB9IGNsaXAxXG4gKiBAcGFyYW0gIHtjbGF5LmFuaW1hdGlvbi5UcmFja0NsaXB9IGNsaXAyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IHdcbiAqL1xuVHJhY2tDbGlwLnByb3RvdHlwZS5ibGVuZDFEID0gZnVuY3Rpb24gKGNsaXAxLCBjbGlwMiwgdykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGMxID0gY2xpcDEudHJhY2tzW2ldO1xuICAgICAgICB2YXIgYzIgPSBjbGlwMi50cmFja3NbaV07XG4gICAgICAgIHZhciB0Q2xpcCA9IHRoaXMudHJhY2tzW2ldO1xuXG4gICAgICAgIHRDbGlwLmJsZW5kMUQoYzEsIGMyLCB3KTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEFkZGl0aXZlIGJsZW5kaW5nIGZyb20gdHdvIHNraW5uaW5nIGNsaXBzXG4gKiBAcGFyYW0gIHtjbGF5LmFuaW1hdGlvbi5UcmFja0NsaXB9IGNsaXAxXG4gKiBAcGFyYW0gIHtjbGF5LmFuaW1hdGlvbi5UcmFja0NsaXB9IGNsaXAyXG4gKi9cblRyYWNrQ2xpcC5wcm90b3R5cGUuYWRkaXRpdmVCbGVuZCA9IGZ1bmN0aW9uIChjbGlwMSwgY2xpcDIpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudHJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjMSA9IGNsaXAxLnRyYWNrc1tpXTtcbiAgICAgICAgdmFyIGMyID0gY2xpcDIudHJhY2tzW2ldO1xuICAgICAgICB2YXIgdENsaXAgPSB0aGlzLnRyYWNrc1tpXTtcblxuICAgICAgICB0Q2xpcC5hZGRpdGl2ZUJsZW5kKGMxLCBjMik7XG4gICAgfVxufTtcblxuLyoqXG4gKiBTdWJ0cmFjdGl2ZSBibGVuZGluZyBmcm9tIHR3byBza2lubmluZyBjbGlwc1xuICogQHBhcmFtICB7Y2xheS5hbmltYXRpb24uVHJhY2tDbGlwfSBjbGlwMVxuICogQHBhcmFtICB7Y2xheS5hbmltYXRpb24uVHJhY2tDbGlwfSBjbGlwMlxuICovXG5UcmFja0NsaXAucHJvdG90eXBlLnN1YnRyYWN0aXZlQmxlbmQgPSBmdW5jdGlvbiAoY2xpcDEsIGNsaXAyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYzEgPSBjbGlwMS50cmFja3NbaV07XG4gICAgICAgIHZhciBjMiA9IGNsaXAyLnRyYWNrc1tpXTtcbiAgICAgICAgdmFyIHRDbGlwID0gdGhpcy50cmFja3NbaV07XG5cbiAgICAgICAgdENsaXAuc3VidHJhY3RpdmVCbGVuZChjMSwgYzIpO1xuICAgIH1cbn07XG5cbi8qKlxuICogMkQgYmxlbmRpbmcgZnJvbSB0aHJlZSBza2lubmluZyBjbGlwc1xuICogQHBhcmFtICB7Y2xheS5hbmltYXRpb24uVHJhY2tDbGlwfSBjbGlwMVxuICogQHBhcmFtICB7Y2xheS5hbmltYXRpb24uVHJhY2tDbGlwfSBjbGlwMlxuICogQHBhcmFtICB7Y2xheS5hbmltYXRpb24uVHJhY2tDbGlwfSBjbGlwM1xuICogQHBhcmFtICB7bnVtYmVyfSBmXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGdcbiAqL1xuVHJhY2tDbGlwLnByb3RvdHlwZS5ibGVuZDJEID0gZnVuY3Rpb24gKGNsaXAxLCBjbGlwMiwgY2xpcDMsIGYsIGcpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudHJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjMSA9IGNsaXAxLnRyYWNrc1tpXTtcbiAgICAgICAgdmFyIGMyID0gY2xpcDIudHJhY2tzW2ldO1xuICAgICAgICB2YXIgYzMgPSBjbGlwMy50cmFja3NbaV07XG4gICAgICAgIHZhciB0Q2xpcCA9IHRoaXMudHJhY2tzW2ldO1xuXG4gICAgICAgIHRDbGlwLmJsZW5kMkQoYzEsIGMyLCBjMywgZiwgZyk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBDb3B5IFNSVCBvZiBhbGwgam9pbnRzIGNsaXBzIGZyb20gYW5vdGhlciBUcmFja0NsaXBcbiAqIEBwYXJhbSAge2NsYXkuYW5pbWF0aW9uLlRyYWNrQ2xpcH0gY2xpcFxuICovXG5UcmFja0NsaXAucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiAoY2xpcCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHNUcmFjayA9IGNsaXAudHJhY2tzW2ldO1xuICAgICAgICB2YXIgdFRyYWNrID0gdGhpcy50cmFja3NbaV07XG5cbiAgICAgICAgdmVjMy5jb3B5KHRUcmFjay5wb3NpdGlvbiwgc1RyYWNrLnBvc2l0aW9uKTtcbiAgICAgICAgdmVjMy5jb3B5KHRUcmFjay5zY2FsZSwgc1RyYWNrLnNjYWxlKTtcbiAgICAgICAgcXVhdC5jb3B5KHRUcmFjay5yb3RhdGlvbiwgc1RyYWNrLnJvdGF0aW9uKTtcbiAgICB9XG59O1xuXG5UcmFja0NsaXAucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjbGlwID0gQ2xpcC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudHJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNsaXAuYWRkVHJhY2sodGhpcy50cmFja3NbaV0uY2xvbmUoKSk7XG4gICAgfVxuICAgIGNsaXAubGlmZSA9IHRoaXMubGlmZTtcbiAgICByZXR1cm4gY2xpcDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRyYWNrQ2xpcDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvYW5pbWF0aW9uL1RyYWNrQ2xpcC5qc1xuLy8gbW9kdWxlIGlkID0gNzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///76\n");

/***/ }),
/* 77 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("var EXTENSION_LIST = [\n    'OES_texture_float',\n    'OES_texture_half_float',\n    'OES_texture_float_linear',\n    'OES_texture_half_float_linear',\n    'OES_standard_derivatives',\n    'OES_vertex_array_object',\n    'OES_element_index_uint',\n    'WEBGL_compressed_texture_s3tc',\n    'WEBGL_compressed_texture_etc',\n    'WEBGL_compressed_texture_etc1',\n    'WEBGL_compressed_texture_pvrtc',\n    'WEBGL_compressed_texture_atc',\n    'WEBGL_compressed_texture_astc',\n    'WEBGL_depth_texture',\n    'EXT_texture_filter_anisotropic',\n    'EXT_shader_texture_lod',\n    'WEBGL_draw_buffers',\n    'EXT_frag_depth',\n    'EXT_sRGB',\n    'ANGLE_instanced_arrays'\n];\n\nvar PARAMETER_NAMES = [\n    'MAX_TEXTURE_SIZE',\n    'MAX_CUBE_MAP_TEXTURE_SIZE'\n];\n\nfunction GLInfo(_gl) {\n    var extensions = {};\n    var parameters = {};\n\n    // Get webgl extension\n    for (var i = 0; i < EXTENSION_LIST.length; i++) {\n        var extName = EXTENSION_LIST[i];\n        createExtension(extName);\n    }\n    // Get parameters\n    for (var i = 0; i < PARAMETER_NAMES.length; i++) {\n        var name = PARAMETER_NAMES[i];\n        parameters[name] = _gl.getParameter(_gl[name]);\n    }\n\n    this.getExtension = function (name) {\n        if (!(name in extensions)) {\n            createExtension(name);\n        }\n        return extensions[name];\n    };\n\n    this.getParameter = function (name) {\n        return parameters[name];\n    };\n\n    function createExtension(name) {\n        if (_gl.getExtension) {\n            var ext = _gl.getExtension(name);\n            if (!ext) {\n                ext = _gl.getExtension('MOZ_' + name);\n            }\n            if (!ext) {\n                ext = _gl.getExtension('WEBKIT_' + name);\n            }\n            extensions[name] = ext;\n        }\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GLInfo);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb3JlL0dMSW5mby5qcz9hN2I1Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBFWFRFTlNJT05fTElTVCA9IFtcbiAgICAnT0VTX3RleHR1cmVfZmxvYXQnLFxuICAgICdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0JyxcbiAgICAnT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyJyxcbiAgICAnT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXInLFxuICAgICdPRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMnLFxuICAgICdPRVNfdmVydGV4X2FycmF5X29iamVjdCcsXG4gICAgJ09FU19lbGVtZW50X2luZGV4X3VpbnQnLFxuICAgICdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfczN0YycsXG4gICAgJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMnLFxuICAgICdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfZXRjMScsXG4gICAgJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9wdnJ0YycsXG4gICAgJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9hdGMnLFxuICAgICdXRUJHTF9jb21wcmVzc2VkX3RleHR1cmVfYXN0YycsXG4gICAgJ1dFQkdMX2RlcHRoX3RleHR1cmUnLFxuICAgICdFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnLFxuICAgICdFWFRfc2hhZGVyX3RleHR1cmVfbG9kJyxcbiAgICAnV0VCR0xfZHJhd19idWZmZXJzJyxcbiAgICAnRVhUX2ZyYWdfZGVwdGgnLFxuICAgICdFWFRfc1JHQicsXG4gICAgJ0FOR0xFX2luc3RhbmNlZF9hcnJheXMnXG5dO1xuXG52YXIgUEFSQU1FVEVSX05BTUVTID0gW1xuICAgICdNQVhfVEVYVFVSRV9TSVpFJyxcbiAgICAnTUFYX0NVQkVfTUFQX1RFWFRVUkVfU0laRSdcbl07XG5cbmZ1bmN0aW9uIEdMSW5mbyhfZ2wpIHtcbiAgICB2YXIgZXh0ZW5zaW9ucyA9IHt9O1xuICAgIHZhciBwYXJhbWV0ZXJzID0ge307XG5cbiAgICAvLyBHZXQgd2ViZ2wgZXh0ZW5zaW9uXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBFWFRFTlNJT05fTElTVC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZXh0TmFtZSA9IEVYVEVOU0lPTl9MSVNUW2ldO1xuICAgICAgICBjcmVhdGVFeHRlbnNpb24oZXh0TmFtZSk7XG4gICAgfVxuICAgIC8vIEdldCBwYXJhbWV0ZXJzXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBQQVJBTUVURVJfTkFNRVMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5hbWUgPSBQQVJBTUVURVJfTkFNRVNbaV07XG4gICAgICAgIHBhcmFtZXRlcnNbbmFtZV0gPSBfZ2wuZ2V0UGFyYW1ldGVyKF9nbFtuYW1lXSk7XG4gICAgfVxuXG4gICAgdGhpcy5nZXRFeHRlbnNpb24gPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBpZiAoIShuYW1lIGluIGV4dGVuc2lvbnMpKSB7XG4gICAgICAgICAgICBjcmVhdGVFeHRlbnNpb24obmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4dGVuc2lvbnNbbmFtZV07XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0UGFyYW1ldGVyID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHBhcmFtZXRlcnNbbmFtZV07XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUV4dGVuc2lvbihuYW1lKSB7XG4gICAgICAgIGlmIChfZ2wuZ2V0RXh0ZW5zaW9uKSB7XG4gICAgICAgICAgICB2YXIgZXh0ID0gX2dsLmdldEV4dGVuc2lvbihuYW1lKTtcbiAgICAgICAgICAgIGlmICghZXh0KSB7XG4gICAgICAgICAgICAgICAgZXh0ID0gX2dsLmdldEV4dGVuc2lvbignTU9aXycgKyBuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZXh0KSB7XG4gICAgICAgICAgICAgICAgZXh0ID0gX2dsLmdldEV4dGVuc2lvbignV0VCS0lUXycgKyBuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV4dGVuc2lvbnNbbmFtZV0gPSBleHQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdMSW5mbztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvY29yZS9HTEluZm8uanNcbi8vIG1vZHVsZSBpZCA9IDc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///77\n");

/***/ }),
/* 78 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/**\n * Simple double linked list. Compared with array, it has O(1) remove operation.\n * @constructor\n * @alias clay.core.LinkedList\n */\nvar LinkedList = function () {\n\n    /**\n     * @type {clay.core.LinkedList.Entry}\n     */\n    this.head = null;\n\n    /**\n     * @type {clay.core.LinkedList.Entry}\n     */\n    this.tail = null;\n\n    this._length = 0;\n};\n\n/**\n * Insert a new value at the tail\n * @param  {} val\n * @return {clay.core.LinkedList.Entry}\n */\nLinkedList.prototype.insert = function (val) {\n    var entry = new LinkedList.Entry(val);\n    this.insertEntry(entry);\n    return entry;\n};\n\n/**\n * Insert a new value at idx\n * @param {number} idx\n * @param  {} val\n * @return {clay.core.LinkedList.Entry}\n */\nLinkedList.prototype.insertAt = function (idx, val) {\n    if (idx < 0) {\n        return;\n    }\n    var next = this.head;\n    var cursor = 0;\n    while (next && cursor != idx) {\n        next = next.next;\n        cursor++;\n    }\n    if (next) {\n        var entry = new LinkedList.Entry(val);\n        var prev = next.prev;\n        if (!prev) { //next is head\n            this.head = entry;\n        }\n        else {\n            prev.next = entry;\n            entry.prev = prev;\n        }\n        entry.next = next;\n        next.prev = entry;\n    }\n    else {\n        this.insert(val);\n    }\n};\n\nLinkedList.prototype.insertBeforeEntry = function (val, next) {\n    var entry = new LinkedList.Entry(val);\n    var prev = next.prev;\n    if (!prev) { //next is head\n        this.head = entry;\n    }\n    else {\n        prev.next = entry;\n        entry.prev = prev;\n    }\n    entry.next = next;\n    next.prev = entry;\n\n    this._length++;\n};\n\n/**\n * Insert an entry at the tail\n * @param  {clay.core.LinkedList.Entry} entry\n */\nLinkedList.prototype.insertEntry = function (entry) {\n    if (!this.head) {\n        this.head = this.tail = entry;\n    }\n    else {\n        this.tail.next = entry;\n        entry.prev = this.tail;\n        this.tail = entry;\n    }\n    this._length++;\n};\n\n/**\n * Remove entry.\n * @param  {clay.core.LinkedList.Entry} entry\n */\nLinkedList.prototype.remove = function (entry) {\n    var prev = entry.prev;\n    var next = entry.next;\n    if (prev) {\n        prev.next = next;\n    }\n    else {\n        // Is head\n        this.head = next;\n    }\n    if (next) {\n        next.prev = prev;\n    }\n    else {\n        // Is tail\n        this.tail = prev;\n    }\n    entry.next = entry.prev = null;\n    this._length--;\n};\n\n/**\n * Remove entry at index.\n * @param  {number} idx\n * @return {}\n */\nLinkedList.prototype.removeAt = function (idx) {\n    if (idx < 0) {\n        return;\n    }\n    var curr = this.head;\n    var cursor = 0;\n    while (curr && cursor != idx) {\n        curr = curr.next;\n        cursor++;\n    }\n    if (curr) {\n        this.remove(curr);\n        return curr.value;\n    }\n};\n/**\n * Get head value\n * @return {}\n */\nLinkedList.prototype.getHead = function () {\n    if (this.head) {\n        return this.head.value;\n    }\n};\n/**\n * Get tail value\n * @return {}\n */\nLinkedList.prototype.getTail = function () {\n    if (this.tail) {\n        return this.tail.value;\n    }\n};\n/**\n * Get value at idx\n * @param {number} idx\n * @return {}\n */\nLinkedList.prototype.getAt = function (idx) {\n    if (idx < 0) {\n        return;\n    }\n    var curr = this.head;\n    var cursor = 0;\n    while (curr && cursor != idx) {\n        curr = curr.next;\n        cursor++;\n    }\n    return curr.value;\n};\n\n/**\n * @param  {} value\n * @return {number}\n */\nLinkedList.prototype.indexOf = function (value) {\n    var curr = this.head;\n    var cursor = 0;\n    while (curr) {\n        if (curr.value === value) {\n            return cursor;\n        }\n        curr = curr.next;\n        cursor++;\n    }\n};\n\n/**\n * @return {number}\n */\nLinkedList.prototype.length = function () {\n    return this._length;\n};\n\n/**\n * If list is empty\n */\nLinkedList.prototype.isEmpty = function () {\n    return this._length === 0;\n};\n\n/**\n * @param  {Function} cb\n * @param  {} context\n */\nLinkedList.prototype.forEach = function (cb, context) {\n    var curr = this.head;\n    var idx = 0;\n    var haveContext = typeof(context) != 'undefined';\n    while (curr) {\n        if (haveContext) {\n            cb.call(context, curr.value, idx);\n        }\n        else {\n            cb(curr.value, idx);\n        }\n        curr = curr.next;\n        idx++;\n    }\n};\n\n/**\n * Clear the list\n */\nLinkedList.prototype.clear = function () {\n    this.tail = this.head = null;\n    this._length = 0;\n};\n\n/**\n * @constructor\n * @param {} val\n */\nLinkedList.Entry = function (val) {\n    /**\n     * @type {}\n     */\n    this.value = val;\n\n    /**\n     * @type {clay.core.LinkedList.Entry}\n     */\n    this.next = null;\n\n    /**\n     * @type {clay.core.LinkedList.Entry}\n     */\n    this.prev = null;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (LinkedList);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb3JlL0xpbmtlZExpc3QuanM/NjFhZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNpbXBsZSBkb3VibGUgbGlua2VkIGxpc3QuIENvbXBhcmVkIHdpdGggYXJyYXksIGl0IGhhcyBPKDEpIHJlbW92ZSBvcGVyYXRpb24uXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LmNvcmUuTGlua2VkTGlzdFxuICovXG52YXIgTGlua2VkTGlzdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5LmNvcmUuTGlua2VkTGlzdC5FbnRyeX1cbiAgICAgKi9cbiAgICB0aGlzLmhlYWQgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuY29yZS5MaW5rZWRMaXN0LkVudHJ5fVxuICAgICAqL1xuICAgIHRoaXMudGFpbCA9IG51bGw7XG5cbiAgICB0aGlzLl9sZW5ndGggPSAwO1xufTtcblxuLyoqXG4gKiBJbnNlcnQgYSBuZXcgdmFsdWUgYXQgdGhlIHRhaWxcbiAqIEBwYXJhbSAge30gdmFsXG4gKiBAcmV0dXJuIHtjbGF5LmNvcmUuTGlua2VkTGlzdC5FbnRyeX1cbiAqL1xuTGlua2VkTGlzdC5wcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24gKHZhbCkge1xuICAgIHZhciBlbnRyeSA9IG5ldyBMaW5rZWRMaXN0LkVudHJ5KHZhbCk7XG4gICAgdGhpcy5pbnNlcnRFbnRyeShlbnRyeSk7XG4gICAgcmV0dXJuIGVudHJ5O1xufTtcblxuLyoqXG4gKiBJbnNlcnQgYSBuZXcgdmFsdWUgYXQgaWR4XG4gKiBAcGFyYW0ge251bWJlcn0gaWR4XG4gKiBAcGFyYW0gIHt9IHZhbFxuICogQHJldHVybiB7Y2xheS5jb3JlLkxpbmtlZExpc3QuRW50cnl9XG4gKi9cbkxpbmtlZExpc3QucHJvdG90eXBlLmluc2VydEF0ID0gZnVuY3Rpb24gKGlkeCwgdmFsKSB7XG4gICAgaWYgKGlkeCA8IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgbmV4dCA9IHRoaXMuaGVhZDtcbiAgICB2YXIgY3Vyc29yID0gMDtcbiAgICB3aGlsZSAobmV4dCAmJiBjdXJzb3IgIT0gaWR4KSB7XG4gICAgICAgIG5leHQgPSBuZXh0Lm5leHQ7XG4gICAgICAgIGN1cnNvcisrO1xuICAgIH1cbiAgICBpZiAobmV4dCkge1xuICAgICAgICB2YXIgZW50cnkgPSBuZXcgTGlua2VkTGlzdC5FbnRyeSh2YWwpO1xuICAgICAgICB2YXIgcHJldiA9IG5leHQucHJldjtcbiAgICAgICAgaWYgKCFwcmV2KSB7IC8vbmV4dCBpcyBoZWFkXG4gICAgICAgICAgICB0aGlzLmhlYWQgPSBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHByZXYubmV4dCA9IGVudHJ5O1xuICAgICAgICAgICAgZW50cnkucHJldiA9IHByZXY7XG4gICAgICAgIH1cbiAgICAgICAgZW50cnkubmV4dCA9IG5leHQ7XG4gICAgICAgIG5leHQucHJldiA9IGVudHJ5O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5pbnNlcnQodmFsKTtcbiAgICB9XG59O1xuXG5MaW5rZWRMaXN0LnByb3RvdHlwZS5pbnNlcnRCZWZvcmVFbnRyeSA9IGZ1bmN0aW9uICh2YWwsIG5leHQpIHtcbiAgICB2YXIgZW50cnkgPSBuZXcgTGlua2VkTGlzdC5FbnRyeSh2YWwpO1xuICAgIHZhciBwcmV2ID0gbmV4dC5wcmV2O1xuICAgIGlmICghcHJldikgeyAvL25leHQgaXMgaGVhZFxuICAgICAgICB0aGlzLmhlYWQgPSBlbnRyeTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHByZXYubmV4dCA9IGVudHJ5O1xuICAgICAgICBlbnRyeS5wcmV2ID0gcHJldjtcbiAgICB9XG4gICAgZW50cnkubmV4dCA9IG5leHQ7XG4gICAgbmV4dC5wcmV2ID0gZW50cnk7XG5cbiAgICB0aGlzLl9sZW5ndGgrKztcbn07XG5cbi8qKlxuICogSW5zZXJ0IGFuIGVudHJ5IGF0IHRoZSB0YWlsXG4gKiBAcGFyYW0gIHtjbGF5LmNvcmUuTGlua2VkTGlzdC5FbnRyeX0gZW50cnlcbiAqL1xuTGlua2VkTGlzdC5wcm90b3R5cGUuaW5zZXJ0RW50cnkgPSBmdW5jdGlvbiAoZW50cnkpIHtcbiAgICBpZiAoIXRoaXMuaGVhZCkge1xuICAgICAgICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMudGFpbC5uZXh0ID0gZW50cnk7XG4gICAgICAgIGVudHJ5LnByZXYgPSB0aGlzLnRhaWw7XG4gICAgICAgIHRoaXMudGFpbCA9IGVudHJ5O1xuICAgIH1cbiAgICB0aGlzLl9sZW5ndGgrKztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGVudHJ5LlxuICogQHBhcmFtICB7Y2xheS5jb3JlLkxpbmtlZExpc3QuRW50cnl9IGVudHJ5XG4gKi9cbkxpbmtlZExpc3QucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChlbnRyeSkge1xuICAgIHZhciBwcmV2ID0gZW50cnkucHJldjtcbiAgICB2YXIgbmV4dCA9IGVudHJ5Lm5leHQ7XG4gICAgaWYgKHByZXYpIHtcbiAgICAgICAgcHJldi5uZXh0ID0gbmV4dDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIElzIGhlYWRcbiAgICAgICAgdGhpcy5oZWFkID0gbmV4dDtcbiAgICB9XG4gICAgaWYgKG5leHQpIHtcbiAgICAgICAgbmV4dC5wcmV2ID0gcHJldjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIElzIHRhaWxcbiAgICAgICAgdGhpcy50YWlsID0gcHJldjtcbiAgICB9XG4gICAgZW50cnkubmV4dCA9IGVudHJ5LnByZXYgPSBudWxsO1xuICAgIHRoaXMuX2xlbmd0aC0tO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgZW50cnkgYXQgaW5kZXguXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGlkeFxuICogQHJldHVybiB7fVxuICovXG5MaW5rZWRMaXN0LnByb3RvdHlwZS5yZW1vdmVBdCA9IGZ1bmN0aW9uIChpZHgpIHtcbiAgICBpZiAoaWR4IDwgMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBjdXJyID0gdGhpcy5oZWFkO1xuICAgIHZhciBjdXJzb3IgPSAwO1xuICAgIHdoaWxlIChjdXJyICYmIGN1cnNvciAhPSBpZHgpIHtcbiAgICAgICAgY3VyciA9IGN1cnIubmV4dDtcbiAgICAgICAgY3Vyc29yKys7XG4gICAgfVxuICAgIGlmIChjdXJyKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlKGN1cnIpO1xuICAgICAgICByZXR1cm4gY3Vyci52YWx1ZTtcbiAgICB9XG59O1xuLyoqXG4gKiBHZXQgaGVhZCB2YWx1ZVxuICogQHJldHVybiB7fVxuICovXG5MaW5rZWRMaXN0LnByb3RvdHlwZS5nZXRIZWFkID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmhlYWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZC52YWx1ZTtcbiAgICB9XG59O1xuLyoqXG4gKiBHZXQgdGFpbCB2YWx1ZVxuICogQHJldHVybiB7fVxuICovXG5MaW5rZWRMaXN0LnByb3RvdHlwZS5nZXRUYWlsID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLnRhaWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFpbC52YWx1ZTtcbiAgICB9XG59O1xuLyoqXG4gKiBHZXQgdmFsdWUgYXQgaWR4XG4gKiBAcGFyYW0ge251bWJlcn0gaWR4XG4gKiBAcmV0dXJuIHt9XG4gKi9cbkxpbmtlZExpc3QucHJvdG90eXBlLmdldEF0ID0gZnVuY3Rpb24gKGlkeCkge1xuICAgIGlmIChpZHggPCAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGN1cnIgPSB0aGlzLmhlYWQ7XG4gICAgdmFyIGN1cnNvciA9IDA7XG4gICAgd2hpbGUgKGN1cnIgJiYgY3Vyc29yICE9IGlkeCkge1xuICAgICAgICBjdXJyID0gY3Vyci5uZXh0O1xuICAgICAgICBjdXJzb3IrKztcbiAgICB9XG4gICAgcmV0dXJuIGN1cnIudmFsdWU7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge30gdmFsdWVcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuTGlua2VkTGlzdC5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciBjdXJyID0gdGhpcy5oZWFkO1xuICAgIHZhciBjdXJzb3IgPSAwO1xuICAgIHdoaWxlIChjdXJyKSB7XG4gICAgICAgIGlmIChjdXJyLnZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGN1cnNvcjtcbiAgICAgICAgfVxuICAgICAgICBjdXJyID0gY3Vyci5uZXh0O1xuICAgICAgICBjdXJzb3IrKztcbiAgICB9XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuTGlua2VkTGlzdC5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGg7XG59O1xuXG4vKipcbiAqIElmIGxpc3QgaXMgZW1wdHlcbiAqL1xuTGlua2VkTGlzdC5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fbGVuZ3RoID09PSAwO1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2JcbiAqIEBwYXJhbSAge30gY29udGV4dFxuICovXG5MaW5rZWRMaXN0LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNiLCBjb250ZXh0KSB7XG4gICAgdmFyIGN1cnIgPSB0aGlzLmhlYWQ7XG4gICAgdmFyIGlkeCA9IDA7XG4gICAgdmFyIGhhdmVDb250ZXh0ID0gdHlwZW9mKGNvbnRleHQpICE9ICd1bmRlZmluZWQnO1xuICAgIHdoaWxlIChjdXJyKSB7XG4gICAgICAgIGlmIChoYXZlQ29udGV4dCkge1xuICAgICAgICAgICAgY2IuY2FsbChjb250ZXh0LCBjdXJyLnZhbHVlLCBpZHgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2IoY3Vyci52YWx1ZSwgaWR4KTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyID0gY3Vyci5uZXh0O1xuICAgICAgICBpZHgrKztcbiAgICB9XG59O1xuXG4vKipcbiAqIENsZWFyIHRoZSBsaXN0XG4gKi9cbkxpbmtlZExpc3QucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMudGFpbCA9IHRoaXMuaGVhZCA9IG51bGw7XG4gICAgdGhpcy5fbGVuZ3RoID0gMDtcbn07XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge30gdmFsXG4gKi9cbkxpbmtlZExpc3QuRW50cnkgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge31cbiAgICAgKi9cbiAgICB0aGlzLnZhbHVlID0gdmFsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuY29yZS5MaW5rZWRMaXN0LkVudHJ5fVxuICAgICAqL1xuICAgIHRoaXMubmV4dCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5jb3JlLkxpbmtlZExpc3QuRW50cnl9XG4gICAgICovXG4gICAgdGhpcy5wcmV2ID0gbnVsbDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IExpbmtlZExpc3Q7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2NvcmUvTGlua2VkTGlzdC5qc1xuLy8gbW9kdWxlIGlkID0gNzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///78\n");

/***/ }),
/* 79 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat3__ = __webpack_require__(32);\n\n\n\n/**\n * @constructor\n * @alias clay.Quaternion\n * @param {number} x\n * @param {number} y\n * @param {number} z\n * @param {number} w\n */\nvar Quaternion = function (x, y, z, w) {\n\n    x = x || 0;\n    y = y || 0;\n    z = z || 0;\n    w = w === undefined ? 1 : w;\n\n    /**\n     * Storage of Quaternion, read and write of x, y, z, w will change the values in array\n     * All methods also operate on the array instead of x, y, z, w components\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Quaternion#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].fromValues(x, y, z, w);\n\n    /**\n     * Dirty flag is used by the Node to determine\n     * if the matrix is updated to latest\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Quaternion#\n     */\n    this._dirty = true;\n};\n\nQuaternion.prototype = {\n\n    constructor: Quaternion,\n\n    /**\n     * Add b to self\n     * @param  {clay.Quaternion} b\n     * @return {clay.Quaternion}\n     */\n    add: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].add(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Calculate the w component from x, y, z component\n     * @return {clay.Quaternion}\n     */\n    calculateW: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].calculateW(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x, y and z components\n     * @param  {number}  x\n     * @param  {number}  y\n     * @param  {number}  z\n     * @param  {number}  w\n     * @return {clay.Quaternion}\n     */\n    set: function (x, y, z, w) {\n        this.array[0] = x;\n        this.array[1] = y;\n        this.array[2] = z;\n        this.array[3] = w;\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x, y, z and w components from array\n     * @param  {Float32Array|number[]} arr\n     * @return {clay.Quaternion}\n     */\n    setArray: function (arr) {\n        this.array[0] = arr[0];\n        this.array[1] = arr[1];\n        this.array[2] = arr[2];\n        this.array[3] = arr[3];\n\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Clone a new Quaternion\n     * @return {clay.Quaternion}\n     */\n    clone: function () {\n        return new Quaternion(this.x, this.y, this.z, this.w);\n    },\n\n    /**\n     * Calculates the conjugate of self If the quaternion is normalized,\n     * this function is faster than invert and produces the same result.\n     *\n     * @return {clay.Quaternion}\n     */\n    conjugate: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].conjugate(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Copy from b\n     * @param  {clay.Quaternion} b\n     * @return {clay.Quaternion}\n     */\n    copy: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].copy(this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Dot product of self and b\n     * @param  {clay.Quaternion} b\n     * @return {number}\n     */\n    dot: function (b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].dot(this.array, b.array);\n    },\n\n    /**\n     * Set from the given 3x3 rotation matrix\n     * @param  {clay.Matrix3} m\n     * @return {clay.Quaternion}\n     */\n    fromMat3: function (m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].fromMat3(this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set from the given 4x4 rotation matrix\n     * The 4th column and 4th row will be droped\n     * @param  {clay.Matrix4} m\n     * @return {clay.Quaternion}\n     */\n    fromMat4: (function () {\n        var m3 = __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat3__[\"a\" /* default */].create();\n        return function (m) {\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat3__[\"a\" /* default */].fromMat4(m3, m.array);\n            // TODO Not like mat4, mat3 in glmatrix seems to be row-based\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat3__[\"a\" /* default */].transpose(m3, m3);\n            __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].fromMat3(this.array, m3);\n            this._dirty = true;\n            return this;\n        };\n    })(),\n\n    /**\n     * Set to identity quaternion\n     * @return {clay.Quaternion}\n     */\n    identity: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].identity(this.array);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Invert self\n     * @return {clay.Quaternion}\n     */\n    invert: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].invert(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Alias of length\n     * @return {number}\n     */\n    len: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].len(this.array);\n    },\n\n    /**\n     * Calculate the length\n     * @return {number}\n     */\n    length: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].length(this.array);\n    },\n\n    /**\n     * Linear interpolation between a and b\n     * @param  {clay.Quaternion} a\n     * @param  {clay.Quaternion} b\n     * @param  {number}  t\n     * @return {clay.Quaternion}\n     */\n    lerp: function (a, b, t) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].lerp(this.array, a.array, b.array, t);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiply\n     * @param  {clay.Quaternion} b\n     * @return {clay.Quaternion}\n     */\n    mul: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiplyLeft\n     * @param  {clay.Quaternion} a\n     * @return {clay.Quaternion}\n     */\n    mulLeft: function (a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].multiply(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Mutiply self and b\n     * @param  {clay.Quaternion} b\n     * @return {clay.Quaternion}\n     */\n    multiply: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Mutiply a and self\n     * Quaternion mutiply is not commutative, so the result of mutiplyLeft is different with multiply.\n     * @param  {clay.Quaternion} a\n     * @return {clay.Quaternion}\n     */\n    multiplyLeft: function (a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].multiply(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Normalize self\n     * @return {clay.Quaternion}\n     */\n    normalize: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].normalize(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian about X axis\n     * @param {number} rad\n     * @return {clay.Quaternion}\n     */\n    rotateX: function (rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotateX(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian about Y axis\n     * @param {number} rad\n     * @return {clay.Quaternion}\n     */\n    rotateY: function (rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotateY(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian about Z axis\n     * @param {number} rad\n     * @return {clay.Quaternion}\n     */\n    rotateZ: function (rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotateZ(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Sets self to represent the shortest rotation from Vector3 a to Vector3 b.\n     * a and b needs to be normalized\n     * @param  {clay.Vector3} a\n     * @param  {clay.Vector3} b\n     * @return {clay.Quaternion}\n     */\n    rotationTo: function (a, b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotationTo(this.array, a.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Sets self with values corresponding to the given axes\n     * @param {clay.Vector3} view\n     * @param {clay.Vector3} right\n     * @param {clay.Vector3} up\n     * @return {clay.Quaternion}\n     */\n    setAxes: function (view, right, up) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].setAxes(this.array, view.array, right.array, up.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Sets self with a rotation axis and rotation angle\n     * @param {clay.Vector3} axis\n     * @param {number} rad\n     * @return {clay.Quaternion}\n     */\n    setAxisAngle: function (axis, rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].setAxisAngle(this.array, axis.array, rad);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Perform spherical linear interpolation between a and b\n     * @param  {clay.Quaternion} a\n     * @param  {clay.Quaternion} b\n     * @param  {number} t\n     * @return {clay.Quaternion}\n     */\n    slerp: function (a, b, t) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].slerp(this.array, a.array, b.array, t);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for squaredLength\n     * @return {number}\n     */\n    sqrLen: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].sqrLen(this.array);\n    },\n\n    /**\n     * Squared length of self\n     * @return {number}\n     */\n    squaredLength: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].squaredLength(this.array);\n    },\n\n    /**\n     * Set from euler\n     * @param {clay.Vector3} v\n     * @param {String} order\n     */\n    fromEuler: function (v, order) {\n        return Quaternion.fromEuler(this, v, order);\n    },\n\n    toString: function () {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n\nvar defineProperty = Object.defineProperty;\n// Getter and Setter\nif (defineProperty) {\n\n    var proto = Quaternion.prototype;\n    /**\n     * @name x\n     * @type {number}\n     * @memberOf clay.Quaternion\n     * @instance\n     */\n    defineProperty(proto, 'x', {\n        get: function () {\n            return this.array[0];\n        },\n        set: function (value) {\n            this.array[0] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name y\n     * @type {number}\n     * @memberOf clay.Quaternion\n     * @instance\n     */\n    defineProperty(proto, 'y', {\n        get: function () {\n            return this.array[1];\n        },\n        set: function (value) {\n            this.array[1] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name z\n     * @type {number}\n     * @memberOf clay.Quaternion\n     * @instance\n     */\n    defineProperty(proto, 'z', {\n        get: function () {\n            return this.array[2];\n        },\n        set: function (value) {\n            this.array[2] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name w\n     * @type {number}\n     * @memberOf clay.Quaternion\n     * @instance\n     */\n    defineProperty(proto, 'w', {\n        get: function () {\n            return this.array[3];\n        },\n        set: function (value) {\n            this.array[3] = value;\n            this._dirty = true;\n        }\n    });\n}\n\n// Supply methods that are not in place\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {clay.Quaternion} b\n * @return {clay.Quaternion}\n */\nQuaternion.add = function (out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].add(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {number}     x\n * @param  {number}     y\n * @param  {number}     z\n * @param  {number}     w\n * @return {clay.Quaternion}\n */\nQuaternion.set = function (out, x, y, z, w) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].set(out.array, x, y, z, w);\n    out._dirty = true;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} b\n * @return {clay.Quaternion}\n */\nQuaternion.copy = function (out, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].copy(out.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @return {clay.Quaternion}\n */\nQuaternion.calculateW = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].calculateW(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @return {clay.Quaternion}\n */\nQuaternion.conjugate = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].conjugate(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @return {clay.Quaternion}\n */\nQuaternion.identity = function (out) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].identity(out.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @return {clay.Quaternion}\n */\nQuaternion.invert = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].invert(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} a\n * @param  {clay.Quaternion} b\n * @return {number}\n */\nQuaternion.dot = function (a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].dot(a.array, b.array);\n};\n\n/**\n * @param  {clay.Quaternion} a\n * @return {number}\n */\nQuaternion.len = function (a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].length(a.array);\n};\n\n// Quaternion.length = Quaternion.len;\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {clay.Quaternion} b\n * @param  {number}     t\n * @return {clay.Quaternion}\n */\nQuaternion.lerp = function (out, a, b, t) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].lerp(out.array, a.array, b.array, t);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {clay.Quaternion} b\n * @param  {number}     t\n * @return {clay.Quaternion}\n */\nQuaternion.slerp = function (out, a, b, t) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].slerp(out.array, a.array, b.array, t);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {clay.Quaternion} b\n * @return {clay.Quaternion}\n */\nQuaternion.mul = function (out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].multiply(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {clay.Quaternion} b\n * @return {clay.Quaternion}\n */\nQuaternion.multiply = Quaternion.mul;\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {number}     rad\n * @return {clay.Quaternion}\n */\nQuaternion.rotateX = function (out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotateX(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {number}     rad\n * @return {clay.Quaternion}\n */\nQuaternion.rotateY = function (out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotateY(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {number}     rad\n * @return {clay.Quaternion}\n */\nQuaternion.rotateZ = function (out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotateZ(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Vector3}    axis\n * @param  {number}     rad\n * @return {clay.Quaternion}\n */\nQuaternion.setAxisAngle = function (out, axis, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].setAxisAngle(out.array, axis.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @return {clay.Quaternion}\n */\nQuaternion.normalize = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].normalize(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} a\n * @return {number}\n */\nQuaternion.sqrLen = function (a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].sqrLen(a.array);\n};\n\n/**\n * @function\n * @param  {clay.Quaternion} a\n * @return {number}\n */\nQuaternion.squaredLength = Quaternion.sqrLen;\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Matrix3}    m\n * @return {clay.Quaternion}\n */\nQuaternion.fromMat3 = function (out, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].fromMat3(out.array, m.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Vector3}    view\n * @param  {clay.Vector3}    right\n * @param  {clay.Vector3}    up\n * @return {clay.Quaternion}\n */\nQuaternion.setAxes = function (out, view, right, up) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].setAxes(out.array, view.array, right.array, up.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Vector3}    a\n * @param  {clay.Vector3}    b\n * @return {clay.Quaternion}\n */\nQuaternion.rotationTo = function (out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotationTo(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * Set quaternion from euler\n * @param {clay.Quaternion} out\n * @param {clay.Vector3} v\n * @param {String} order\n */\nQuaternion.fromEuler = function (out, v, order) {\n\n    out._dirty = true;\n\n    v = v.array;\n    var target = out.array;\n    var c1 = Math.cos(v[0] / 2);\n    var c2 = Math.cos(v[1] / 2);\n    var c3 = Math.cos(v[2] / 2);\n    var s1 = Math.sin(v[0] / 2);\n    var s2 = Math.sin(v[1] / 2);\n    var s3 = Math.sin(v[2] / 2);\n\n    var order = (order || 'XYZ').toUpperCase();\n\n    // http://www.mathworks.com/matlabcentral/fileexchange/\n    //  20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n    //  content/SpinCalc.m\n\n    switch (order) {\n        case 'XYZ':\n            target[0] = s1 * c2 * c3 + c1 * s2 * s3;\n            target[1] = c1 * s2 * c3 - s1 * c2 * s3;\n            target[2] = c1 * c2 * s3 + s1 * s2 * c3;\n            target[3] = c1 * c2 * c3 - s1 * s2 * s3;\n            break;\n        case 'YXZ':\n            target[0] = s1 * c2 * c3 + c1 * s2 * s3;\n            target[1] = c1 * s2 * c3 - s1 * c2 * s3;\n            target[2] = c1 * c2 * s3 - s1 * s2 * c3;\n            target[3] = c1 * c2 * c3 + s1 * s2 * s3;\n            break;\n        case 'ZXY':\n            target[0] = s1 * c2 * c3 - c1 * s2 * s3;\n            target[1] = c1 * s2 * c3 + s1 * c2 * s3;\n            target[2] = c1 * c2 * s3 + s1 * s2 * c3;\n            target[3] = c1 * c2 * c3 - s1 * s2 * s3;\n            break;\n        case 'ZYX':\n            target[0] = s1 * c2 * c3 - c1 * s2 * s3;\n            target[1] = c1 * s2 * c3 + s1 * c2 * s3;\n            target[2] = c1 * c2 * s3 - s1 * s2 * c3;\n            target[3] = c1 * c2 * c3 + s1 * s2 * s3;\n            break;\n        case 'YZX':\n            target[0] = s1 * c2 * c3 + c1 * s2 * s3;\n            target[1] = c1 * s2 * c3 + s1 * c2 * s3;\n            target[2] = c1 * c2 * s3 - s1 * s2 * c3;\n            target[3] = c1 * c2 * c3 - s1 * s2 * s3;\n            break;\n        case 'XZY':\n            target[0] = s1 * c2 * c3 - c1 * s2 * s3;\n            target[1] = c1 * s2 * c3 - s1 * c2 * s3;\n            target[2] = c1 * c2 * s3 + s1 * s2 * c3;\n            target[3] = c1 * c2 * c3 + s1 * s2 * s3;\n            break;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Quaternion);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL1F1YXRlcm5pb24uanM/Zjc5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcXVhdCBmcm9tICcuLi9nbG1hdHJpeC9xdWF0JztcbmltcG9ydCBtYXQzIGZyb20gJy4uL2dsbWF0cml4L21hdDMnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuUXVhdGVybmlvblxuICogQHBhcmFtIHtudW1iZXJ9IHhcbiAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gKiBAcGFyYW0ge251bWJlcn0gelxuICogQHBhcmFtIHtudW1iZXJ9IHdcbiAqL1xudmFyIFF1YXRlcm5pb24gPSBmdW5jdGlvbiAoeCwgeSwgeiwgdykge1xuXG4gICAgeCA9IHggfHwgMDtcbiAgICB5ID0geSB8fCAwO1xuICAgIHogPSB6IHx8IDA7XG4gICAgdyA9IHcgPT09IHVuZGVmaW5lZCA/IDEgOiB3O1xuXG4gICAgLyoqXG4gICAgICogU3RvcmFnZSBvZiBRdWF0ZXJuaW9uLCByZWFkIGFuZCB3cml0ZSBvZiB4LCB5LCB6LCB3IHdpbGwgY2hhbmdlIHRoZSB2YWx1ZXMgaW4gYXJyYXlcbiAgICAgKiBBbGwgbWV0aG9kcyBhbHNvIG9wZXJhdGUgb24gdGhlIGFycmF5IGluc3RlYWQgb2YgeCwgeSwgeiwgdyBjb21wb25lbnRzXG4gICAgICogQG5hbWUgYXJyYXlcbiAgICAgKiBAdHlwZSB7RmxvYXQzMkFycmF5fVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlF1YXRlcm5pb24jXG4gICAgICovXG4gICAgdGhpcy5hcnJheSA9IHF1YXQuZnJvbVZhbHVlcyh4LCB5LCB6LCB3KTtcblxuICAgIC8qKlxuICAgICAqIERpcnR5IGZsYWcgaXMgdXNlZCBieSB0aGUgTm9kZSB0byBkZXRlcm1pbmVcbiAgICAgKiBpZiB0aGUgbWF0cml4IGlzIHVwZGF0ZWQgdG8gbGF0ZXN0XG4gICAgICogQG5hbWUgX2RpcnR5XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQG1lbWJlck9mIGNsYXkuUXVhdGVybmlvbiNcbiAgICAgKi9cbiAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG59O1xuXG5RdWF0ZXJuaW9uLnByb3RvdHlwZSA9IHtcblxuICAgIGNvbnN0cnVjdG9yOiBRdWF0ZXJuaW9uLFxuXG4gICAgLyoqXG4gICAgICogQWRkIGIgdG8gc2VsZlxuICAgICAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBhZGQ6IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHF1YXQuYWRkKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIHcgY29tcG9uZW50IGZyb20geCwgeSwgeiBjb21wb25lbnRcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgY2FsY3VsYXRlVzogZnVuY3Rpb24gKCkge1xuICAgICAgICBxdWF0LmNhbGN1bGF0ZVcodGhpcy5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB4LCB5IGFuZCB6IGNvbXBvbmVudHNcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB4XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgeVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHpcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB3XG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24gKHgsIHksIHosIHcpIHtcbiAgICAgICAgdGhpcy5hcnJheVswXSA9IHg7XG4gICAgICAgIHRoaXMuYXJyYXlbMV0gPSB5O1xuICAgICAgICB0aGlzLmFycmF5WzJdID0gejtcbiAgICAgICAgdGhpcy5hcnJheVszXSA9IHc7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB4LCB5LCB6IGFuZCB3IGNvbXBvbmVudHMgZnJvbSBhcnJheVxuICAgICAqIEBwYXJhbSAge0Zsb2F0MzJBcnJheXxudW1iZXJbXX0gYXJyXG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIHNldEFycmF5OiBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgIHRoaXMuYXJyYXlbMF0gPSBhcnJbMF07XG4gICAgICAgIHRoaXMuYXJyYXlbMV0gPSBhcnJbMV07XG4gICAgICAgIHRoaXMuYXJyYXlbMl0gPSBhcnJbMl07XG4gICAgICAgIHRoaXMuYXJyYXlbM10gPSBhcnJbM107XG5cbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xvbmUgYSBuZXcgUXVhdGVybmlvblxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFF1YXRlcm5pb24odGhpcy54LCB0aGlzLnksIHRoaXMueiwgdGhpcy53KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgY29uanVnYXRlIG9mIHNlbGYgSWYgdGhlIHF1YXRlcm5pb24gaXMgbm9ybWFsaXplZCxcbiAgICAgKiB0aGlzIGZ1bmN0aW9uIGlzIGZhc3RlciB0aGFuIGludmVydCBhbmQgcHJvZHVjZXMgdGhlIHNhbWUgcmVzdWx0LlxuICAgICAqXG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIGNvbmp1Z2F0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICBxdWF0LmNvbmp1Z2F0ZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ29weSBmcm9tIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgY29weTogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgcXVhdC5jb3B5KHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEb3QgcHJvZHVjdCBvZiBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBiXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGRvdDogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgcmV0dXJuIHF1YXQuZG90KHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgZnJvbSB0aGUgZ2l2ZW4gM3gzIHJvdGF0aW9uIG1hdHJpeFxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gbVxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBmcm9tTWF0MzogZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgcXVhdC5mcm9tTWF0Myh0aGlzLmFycmF5LCBtLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IGZyb20gdGhlIGdpdmVuIDR4NCByb3RhdGlvbiBtYXRyaXhcbiAgICAgKiBUaGUgNHRoIGNvbHVtbiBhbmQgNHRoIHJvdyB3aWxsIGJlIGRyb3BlZFxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gbVxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBmcm9tTWF0NDogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG0zID0gbWF0My5jcmVhdGUoKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICBtYXQzLmZyb21NYXQ0KG0zLCBtLmFycmF5KTtcbiAgICAgICAgICAgIC8vIFRPRE8gTm90IGxpa2UgbWF0NCwgbWF0MyBpbiBnbG1hdHJpeCBzZWVtcyB0byBiZSByb3ctYmFzZWRcbiAgICAgICAgICAgIG1hdDMudHJhbnNwb3NlKG0zLCBtMyk7XG4gICAgICAgICAgICBxdWF0LmZyb21NYXQzKHRoaXMuYXJyYXksIG0zKTtcbiAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgIH0pKCksXG5cbiAgICAvKipcbiAgICAgKiBTZXQgdG8gaWRlbnRpdHkgcXVhdGVybmlvblxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBpZGVudGl0eTogZnVuY3Rpb24gKCkge1xuICAgICAgICBxdWF0LmlkZW50aXR5KHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogSW52ZXJ0IHNlbGZcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgaW52ZXJ0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHF1YXQuaW52ZXJ0KHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2YgbGVuZ3RoXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGxlbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcXVhdC5sZW4odGhpcy5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgbGVuZ3RoXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGxlbmd0aDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcXVhdC5sZW5ndGgodGhpcy5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gYSBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYVxuICAgICAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYlxuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHRcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgbGVycDogZnVuY3Rpb24gKGEsIGIsIHQpIHtcbiAgICAgICAgcXVhdC5sZXJwKHRoaXMuYXJyYXksIGEuYXJyYXksIGIuYXJyYXksIHQpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgbXVsdGlwbHlcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgbXVsOiBmdW5jdGlvbiAoYikge1xuICAgICAgICBxdWF0Lm11bCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIG11bHRpcGx5TGVmdFxuICAgICAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYVxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBtdWxMZWZ0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICBxdWF0Lm11bHRpcGx5KHRoaXMuYXJyYXksIGEuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNdXRpcGx5IHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgbXVsdGlwbHk6IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHF1YXQubXVsdGlwbHkodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE11dGlwbHkgYSBhbmQgc2VsZlxuICAgICAqIFF1YXRlcm5pb24gbXV0aXBseSBpcyBub3QgY29tbXV0YXRpdmUsIHNvIHRoZSByZXN1bHQgb2YgbXV0aXBseUxlZnQgaXMgZGlmZmVyZW50IHdpdGggbXVsdGlwbHkuXG4gICAgICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBhXG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIG11bHRpcGx5TGVmdDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgcXVhdC5tdWx0aXBseSh0aGlzLmFycmF5LCBhLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTm9ybWFsaXplIHNlbGZcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgbm9ybWFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHF1YXQubm9ybWFsaXplKHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgc2VsZiBieSBhIGdpdmVuIHJhZGlhbiBhYm91dCBYIGF4aXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmFkXG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIHJvdGF0ZVg6IGZ1bmN0aW9uIChyYWQpIHtcbiAgICAgICAgcXVhdC5yb3RhdGVYKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHJhZCk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBzZWxmIGJ5IGEgZ2l2ZW4gcmFkaWFuIGFib3V0IFkgYXhpc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByYWRcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgcm90YXRlWTogZnVuY3Rpb24gKHJhZCkge1xuICAgICAgICBxdWF0LnJvdGF0ZVkodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgcmFkKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUm90YXRlIHNlbGYgYnkgYSBnaXZlbiByYWRpYW4gYWJvdXQgWiBheGlzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhZFxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICByb3RhdGVaOiBmdW5jdGlvbiAocmFkKSB7XG4gICAgICAgIHF1YXQucm90YXRlWih0aGlzLmFycmF5LCB0aGlzLmFycmF5LCByYWQpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHNlbGYgdG8gcmVwcmVzZW50IHRoZSBzaG9ydGVzdCByb3RhdGlvbiBmcm9tIFZlY3RvcjMgYSB0byBWZWN0b3IzIGIuXG4gICAgICogYSBhbmQgYiBuZWVkcyB0byBiZSBub3JtYWxpemVkXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIHJvdGF0aW9uVG86IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHF1YXQucm90YXRpb25Ubyh0aGlzLmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFNldHMgc2VsZiB3aXRoIHZhbHVlcyBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiBheGVzXG4gICAgICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IHZpZXdcbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gcmlnaHRcbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gdXBcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgc2V0QXhlczogZnVuY3Rpb24gKHZpZXcsIHJpZ2h0LCB1cCkge1xuICAgICAgICBxdWF0LnNldEF4ZXModGhpcy5hcnJheSwgdmlldy5hcnJheSwgcmlnaHQuYXJyYXksIHVwLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0cyBzZWxmIHdpdGggYSByb3RhdGlvbiBheGlzIGFuZCByb3RhdGlvbiBhbmdsZVxuICAgICAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSBheGlzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhZFxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBzZXRBeGlzQW5nbGU6IGZ1bmN0aW9uIChheGlzLCByYWQpIHtcbiAgICAgICAgcXVhdC5zZXRBeGlzQW5nbGUodGhpcy5hcnJheSwgYXhpcy5hcnJheSwgcmFkKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gYSBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYVxuICAgICAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYlxuICAgICAqIEBwYXJhbSAge251bWJlcn0gdFxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBzbGVycDogZnVuY3Rpb24gKGEsIGIsIHQpIHtcbiAgICAgICAgcXVhdC5zbGVycCh0aGlzLmFycmF5LCBhLmFycmF5LCBiLmFycmF5LCB0KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIHNxdWFyZWRMZW5ndGhcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3FyTGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBxdWF0LnNxckxlbih0aGlzLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3F1YXJlZCBsZW5ndGggb2Ygc2VsZlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBzcXVhcmVkTGVuZ3RoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBxdWF0LnNxdWFyZWRMZW5ndGgodGhpcy5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCBmcm9tIGV1bGVyXG4gICAgICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IHZcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3JkZXJcbiAgICAgKi9cbiAgICBmcm9tRXVsZXI6IGZ1bmN0aW9uICh2LCBvcmRlcikge1xuICAgICAgICByZXR1cm4gUXVhdGVybmlvbi5mcm9tRXVsZXIodGhpcywgdiwgb3JkZXIpO1xuICAgIH0sXG5cbiAgICB0b1N0cmluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ1snICsgQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbCh0aGlzLmFycmF5LCAnLCcpICsgJ10nO1xuICAgIH0sXG5cbiAgICB0b0FycmF5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLmFycmF5KTtcbiAgICB9XG59O1xuXG52YXIgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG4vLyBHZXR0ZXIgYW5kIFNldHRlclxuaWYgKGRlZmluZVByb3BlcnR5KSB7XG5cbiAgICB2YXIgcHJvdG8gPSBRdWF0ZXJuaW9uLnByb3RvdHlwZTtcbiAgICAvKipcbiAgICAgKiBAbmFtZSB4XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5RdWF0ZXJuaW9uXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICd4Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5WzBdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hcnJheVswXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSB5XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5RdWF0ZXJuaW9uXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICd5Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5WzFdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hcnJheVsxXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSB6XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5RdWF0ZXJuaW9uXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICd6Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5WzJdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hcnJheVsyXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSB3XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5RdWF0ZXJuaW9uXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICd3Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5WzNdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hcnJheVszXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8vIFN1cHBseSBtZXRob2RzIHRoYXQgYXJlIG5vdCBpbiBwbGFjZVxuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYlxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLmFkZCA9IGZ1bmN0aW9uIChvdXQsIGEsIGIpIHtcbiAgICBxdWF0LmFkZChvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtudW1iZXJ9ICAgICB4XG4gKiBAcGFyYW0gIHtudW1iZXJ9ICAgICB5XG4gKiBAcGFyYW0gIHtudW1iZXJ9ICAgICB6XG4gKiBAcGFyYW0gIHtudW1iZXJ9ICAgICB3XG4gKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gKi9cblF1YXRlcm5pb24uc2V0ID0gZnVuY3Rpb24gKG91dCwgeCwgeSwgeiwgdykge1xuICAgIHF1YXQuc2V0KG91dC5hcnJheSwgeCwgeSwgeiwgdyk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGJcbiAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAqL1xuUXVhdGVybmlvbi5jb3B5ID0gZnVuY3Rpb24gKG91dCwgYikge1xuICAgIHF1YXQuY29weShvdXQuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAqL1xuUXVhdGVybmlvbi5jYWxjdWxhdGVXID0gZnVuY3Rpb24gKG91dCwgYSkge1xuICAgIHF1YXQuY2FsY3VsYXRlVyhvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAqL1xuUXVhdGVybmlvbi5jb25qdWdhdGUgPSBmdW5jdGlvbiAob3V0LCBhKSB7XG4gICAgcXVhdC5jb25qdWdhdGUob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IG91dFxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLmlkZW50aXR5ID0gZnVuY3Rpb24gKG91dCkge1xuICAgIHF1YXQuaWRlbnRpdHkob3V0LmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IG91dFxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBhXG4gKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gKi9cblF1YXRlcm5pb24uaW52ZXJ0ID0gZnVuY3Rpb24gKG91dCwgYSkge1xuICAgIHF1YXQuaW52ZXJ0KG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBhXG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuUXVhdGVybmlvbi5kb3QgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBxdWF0LmRvdChhLmFycmF5LCBiLmFycmF5KTtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblF1YXRlcm5pb24ubGVuID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4gcXVhdC5sZW5ndGgoYS5hcnJheSk7XG59O1xuXG4vLyBRdWF0ZXJuaW9uLmxlbmd0aCA9IFF1YXRlcm5pb24ubGVuO1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYlxuICogQHBhcmFtICB7bnVtYmVyfSAgICAgdFxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLmxlcnAgPSBmdW5jdGlvbiAob3V0LCBhLCBiLCB0KSB7XG4gICAgcXVhdC5sZXJwKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSwgdCk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYVxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBiXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICAgICB0XG4gKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gKi9cblF1YXRlcm5pb24uc2xlcnAgPSBmdW5jdGlvbiAob3V0LCBhLCBiLCB0KSB7XG4gICAgcXVhdC5zbGVycChvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXksIHQpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYlxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLm11bCA9IGZ1bmN0aW9uIChvdXQsIGEsIGIpIHtcbiAgICBxdWF0Lm11bHRpcGx5KG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IG91dFxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBhXG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGJcbiAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAqL1xuUXVhdGVybmlvbi5tdWx0aXBseSA9IFF1YXRlcm5pb24ubXVsO1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEBwYXJhbSAge251bWJlcn0gICAgIHJhZFxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLnJvdGF0ZVggPSBmdW5jdGlvbiAob3V0LCBhLCByYWQpIHtcbiAgICBxdWF0LnJvdGF0ZVgob3V0LmFycmF5LCBhLmFycmF5LCByYWQpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEBwYXJhbSAge251bWJlcn0gICAgIHJhZFxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLnJvdGF0ZVkgPSBmdW5jdGlvbiAob3V0LCBhLCByYWQpIHtcbiAgICBxdWF0LnJvdGF0ZVkob3V0LmFycmF5LCBhLmFycmF5LCByYWQpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEBwYXJhbSAge251bWJlcn0gICAgIHJhZFxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLnJvdGF0ZVogPSBmdW5jdGlvbiAob3V0LCBhLCByYWQpIHtcbiAgICBxdWF0LnJvdGF0ZVoob3V0LmFycmF5LCBhLmFycmF5LCByYWQpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9ICAgIGF4aXNcbiAqIEBwYXJhbSAge251bWJlcn0gICAgIHJhZFxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLnNldEF4aXNBbmdsZSA9IGZ1bmN0aW9uIChvdXQsIGF4aXMsIHJhZCkge1xuICAgIHF1YXQuc2V0QXhpc0FuZ2xlKG91dC5hcnJheSwgYXhpcy5hcnJheSwgcmFkKTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IG91dFxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBhXG4gKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gKi9cblF1YXRlcm5pb24ubm9ybWFsaXplID0gZnVuY3Rpb24gKG91dCwgYSkge1xuICAgIHF1YXQubm9ybWFsaXplKG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblF1YXRlcm5pb24uc3FyTGVuID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4gcXVhdC5zcXJMZW4oYS5hcnJheSk7XG59O1xuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblF1YXRlcm5pb24uc3F1YXJlZExlbmd0aCA9IFF1YXRlcm5pb24uc3FyTGVuO1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9ICAgIG1cbiAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAqL1xuUXVhdGVybmlvbi5mcm9tTWF0MyA9IGZ1bmN0aW9uIChvdXQsIG0pIHtcbiAgICBxdWF0LmZyb21NYXQzKG91dC5hcnJheSwgbS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gICAgdmlld1xuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSAgICByaWdodFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSAgICB1cFxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLnNldEF4ZXMgPSBmdW5jdGlvbiAob3V0LCB2aWV3LCByaWdodCwgdXApIHtcbiAgICBxdWF0LnNldEF4ZXMob3V0LmFycmF5LCB2aWV3LmFycmF5LCByaWdodC5hcnJheSwgdXAuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9ICAgIGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gICAgYlxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLnJvdGF0aW9uVG8gPSBmdW5jdGlvbiAob3V0LCBhLCBiKSB7XG4gICAgcXVhdC5yb3RhdGlvblRvKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogU2V0IHF1YXRlcm5pb24gZnJvbSBldWxlclxuICogQHBhcmFtIHtjbGF5LlF1YXRlcm5pb259IG91dFxuICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IHZcbiAqIEBwYXJhbSB7U3RyaW5nfSBvcmRlclxuICovXG5RdWF0ZXJuaW9uLmZyb21FdWxlciA9IGZ1bmN0aW9uIChvdXQsIHYsIG9yZGVyKSB7XG5cbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcblxuICAgIHYgPSB2LmFycmF5O1xuICAgIHZhciB0YXJnZXQgPSBvdXQuYXJyYXk7XG4gICAgdmFyIGMxID0gTWF0aC5jb3ModlswXSAvIDIpO1xuICAgIHZhciBjMiA9IE1hdGguY29zKHZbMV0gLyAyKTtcbiAgICB2YXIgYzMgPSBNYXRoLmNvcyh2WzJdIC8gMik7XG4gICAgdmFyIHMxID0gTWF0aC5zaW4odlswXSAvIDIpO1xuICAgIHZhciBzMiA9IE1hdGguc2luKHZbMV0gLyAyKTtcbiAgICB2YXIgczMgPSBNYXRoLnNpbih2WzJdIC8gMik7XG5cbiAgICB2YXIgb3JkZXIgPSAob3JkZXIgfHwgJ1hZWicpLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAvLyBodHRwOi8vd3d3Lm1hdGh3b3Jrcy5jb20vbWF0bGFiY2VudHJhbC9maWxlZXhjaGFuZ2UvXG4gICAgLy8gIDIwNjk2LWZ1bmN0aW9uLXRvLWNvbnZlcnQtYmV0d2Vlbi1kY20tZXVsZXItYW5nbGVzLXF1YXRlcm5pb25zLWFuZC1ldWxlci12ZWN0b3JzL1xuICAgIC8vICBjb250ZW50L1NwaW5DYWxjLm1cblxuICAgIHN3aXRjaCAob3JkZXIpIHtcbiAgICAgICAgY2FzZSAnWFlaJzpcbiAgICAgICAgICAgIHRhcmdldFswXSA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMztcbiAgICAgICAgICAgIHRhcmdldFsxXSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMztcbiAgICAgICAgICAgIHRhcmdldFsyXSA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMztcbiAgICAgICAgICAgIHRhcmdldFszXSA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdZWFonOlxuICAgICAgICAgICAgdGFyZ2V0WzBdID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzO1xuICAgICAgICAgICAgdGFyZ2V0WzFdID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzO1xuICAgICAgICAgICAgdGFyZ2V0WzJdID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzO1xuICAgICAgICAgICAgdGFyZ2V0WzNdID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1pYWSc6XG4gICAgICAgICAgICB0YXJnZXRbMF0gPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7XG4gICAgICAgICAgICB0YXJnZXRbMV0gPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7XG4gICAgICAgICAgICB0YXJnZXRbMl0gPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7XG4gICAgICAgICAgICB0YXJnZXRbM10gPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnWllYJzpcbiAgICAgICAgICAgIHRhcmdldFswXSA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMztcbiAgICAgICAgICAgIHRhcmdldFsxXSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMztcbiAgICAgICAgICAgIHRhcmdldFsyXSA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMztcbiAgICAgICAgICAgIHRhcmdldFszXSA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdZWlgnOlxuICAgICAgICAgICAgdGFyZ2V0WzBdID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzO1xuICAgICAgICAgICAgdGFyZ2V0WzFdID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzO1xuICAgICAgICAgICAgdGFyZ2V0WzJdID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzO1xuICAgICAgICAgICAgdGFyZ2V0WzNdID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1haWSc6XG4gICAgICAgICAgICB0YXJnZXRbMF0gPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7XG4gICAgICAgICAgICB0YXJnZXRbMV0gPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7XG4gICAgICAgICAgICB0YXJnZXRbMl0gPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7XG4gICAgICAgICAgICB0YXJnZXRbM10gPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBRdWF0ZXJuaW9uO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL1F1YXRlcm5pb24uanNcbi8vIG1vZHVsZSBpZCA9IDc5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///79\n");

/***/ }),
/* 80 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_Cache__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_vendor__ = __webpack_require__(4);\n\n\n\n\n\nfunction getArrayCtorByType (type) {\n    return ({\n        'byte': __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].Int8Array,\n        'ubyte': __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].Uint8Array,\n        'short': __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].Int16Array,\n        'ushort': __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].Uint16Array\n    })[type] || __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].Float32Array;\n}\n\nfunction makeAttrKey(attrName) {\n    return 'attr_' + attrName;\n}\n/**\n * GeometryBase attribute\n * @alias clay.GeometryBase.Attribute\n * @constructor\n */\nfunction Attribute(name, type, size, semantic) {\n    /**\n     * Attribute name\n     * @type {string}\n     */\n    this.name = name;\n    /**\n     * Attribute type\n     * Possible values:\n     *  + `'byte'`\n     *  + `'ubyte'`\n     *  + `'short'`\n     *  + `'ushort'`\n     *  + `'float'` Most commonly used.\n     * @type {string}\n     */\n    this.type = type;\n    /**\n     * Size of attribute component. 1 - 4.\n     * @type {number}\n     */\n    this.size = size;\n    /**\n     * Semantic of this attribute.\n     * Possible values:\n     *  + `'POSITION'`\n     *  + `'NORMAL'`\n     *  + `'BINORMAL'`\n     *  + `'TANGENT'`\n     *  + `'TEXCOORD'`\n     *  + `'TEXCOORD_0'`\n     *  + `'TEXCOORD_1'`\n     *  + `'COLOR'`\n     *  + `'JOINT'`\n     *  + `'WEIGHT'`\n     *\n     * In shader, attribute with same semantic will be automatically mapped. For example:\n     * ```glsl\n     * attribute vec3 pos: POSITION\n     * ```\n     * will use the attribute value with semantic POSITION in geometry, no matter what name it used.\n     * @type {string}\n     */\n    this.semantic = semantic || '';\n\n    /**\n     * Value of the attribute.\n     * @type {TypedArray}\n     */\n    this.value = null;\n\n    // Init getter setter\n    switch (size) {\n        case 1:\n            this.get = function (idx) {\n                return this.value[idx];\n            };\n            this.set = function (idx, value) {\n                this.value[idx] = value;\n            };\n            // Copy from source to target\n            this.copy = function (target, source) {\n                this.value[target] = this.value[target];\n            };\n            break;\n        case 2:\n            this.get = function (idx, out) {\n                var arr = this.value;\n                out[0] = arr[idx * 2];\n                out[1] = arr[idx * 2 + 1];\n                return out;\n            };\n            this.set = function (idx, val) {\n                var arr = this.value;\n                arr[idx * 2] = val[0];\n                arr[idx * 2 + 1] = val[1];\n            };\n            this.copy = function (target, source) {\n                var arr = this.value;\n                source *= 2;\n                target *= 2;\n                arr[target] = arr[source];\n                arr[target + 1] = arr[source + 1];\n            };\n            break;\n        case 3:\n            this.get = function (idx, out) {\n                var idx3 = idx * 3;\n                var arr = this.value;\n                out[0] = arr[idx3];\n                out[1] = arr[idx3 + 1];\n                out[2] = arr[idx3 + 2];\n                return out;\n            };\n            this.set = function (idx, val) {\n                var idx3 = idx * 3;\n                var arr = this.value;\n                arr[idx3] = val[0];\n                arr[idx3 + 1] = val[1];\n                arr[idx3 + 2] = val[2];\n            };\n            this.copy = function (target, source) {\n                var arr = this.value;\n                source *= 3;\n                target *= 3;\n                arr[target] = arr[source];\n                arr[target + 1] = arr[source + 1];\n                arr[target + 2] = arr[source + 2];\n            };\n            break;\n        case 4:\n            this.get = function (idx, out) {\n                var arr = this.value;\n                var idx4 = idx * 4;\n                out[0] = arr[idx4];\n                out[1] = arr[idx4 + 1];\n                out[2] = arr[idx4 + 2];\n                out[3] = arr[idx4 + 3];\n                return out;\n            };\n            this.set = function (idx, val) {\n                var arr = this.value;\n                var idx4 = idx * 4;\n                arr[idx4] = val[0];\n                arr[idx4 + 1] = val[1];\n                arr[idx4 + 2] = val[2];\n                arr[idx4 + 3] = val[3];\n            };\n            this.copy = function (target, source) {\n                var arr = this.value;\n                source *= 4;\n                target *= 4;\n                // copyWithin is extremely slow\n                arr[target] = arr[source];\n                arr[target + 1] = arr[source + 1];\n                arr[target + 2] = arr[source + 2];\n                arr[target + 3] = arr[source + 3];\n            };\n    }\n}\n\n/**\n * Set item value at give index. Second parameter val is number if size is 1\n * @function\n * @name clay.GeometryBase.Attribute#set\n * @param {number} idx\n * @param {number[]|number} val\n * @example\n * geometry.getAttribute('position').set(0, [1, 1, 1]);\n */\n\n/**\n * Get item value at give index. Second parameter out is no need if size is 1\n * @function\n * @name clay.GeometryBase.Attribute#set\n * @param {number} idx\n * @param {number[]} [out]\n * @example\n * geometry.getAttribute('position').get(0, out);\n */\n\n/**\n * Initialize attribute with given vertex count\n * @param {number} nVertex\n */\nAttribute.prototype.init = function (nVertex) {\n    if (!this.value || this.value.length !== nVertex * this.size) {\n        var ArrayConstructor = getArrayCtorByType(this.type);\n        this.value = new ArrayConstructor(nVertex * this.size);\n    }\n};\n\n/**\n * Initialize attribute with given array. Which can be 1 dimensional or 2 dimensional\n * @param {Array} array\n * @example\n *  geometry.getAttribute('position').fromArray(\n *      [-1, 0, 0, 1, 0, 0, 0, 1, 0]\n *  );\n *  geometry.getAttribute('position').fromArray(\n *      [ [-1, 0, 0], [1, 0, 0], [0, 1, 0] ]\n *  );\n */\nAttribute.prototype.fromArray = function (array) {\n    var ArrayConstructor = getArrayCtorByType(this.type);\n    var value;\n    // Convert 2d array to flat\n    if (array[0] && (array[0].length)) {\n        var n = 0;\n        var size = this.size;\n        value = new ArrayConstructor(array.length * size);\n        for (var i = 0; i < array.length; i++) {\n            for (var j = 0; j < size; j++) {\n                value[n++] = array[i][j];\n            }\n        }\n    }\n    else {\n        value = new ArrayConstructor(array);\n    }\n    this.value = value;\n};\n\nAttribute.prototype.clone = function(copyValue) {\n    var ret = new Attribute(this.name, this.type, this.size, this.semantic);\n    // FIXME\n    if (copyValue) {\n        console.warn('todo');\n    }\n    return ret;\n};\n\nfunction AttributeBuffer(name, type, buffer, size, semantic) {\n    this.name = name;\n    this.type = type;\n    this.buffer = buffer;\n    this.size = size;\n    this.semantic = semantic;\n\n    // To be set in mesh\n    // symbol in the shader\n    this.symbol = '';\n\n    // Needs remove flag\n    this.needsRemove = false;\n}\n\nfunction IndicesBuffer(buffer) {\n    this.buffer = buffer;\n    this.count = 0;\n}\n\n/**\n * Base of all geometry. Use {@link clay.Geometry} for common 3D usage.\n * @constructor clay.GeometryBase\n * @extends clay.core.Base\n */\nvar GeometryBase = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.GeometryBase# */ {\n        /**\n         * Attributes of geometry.\n         * @type {Object.<string, clay.GeometryBase.Attribute>}\n         */\n        attributes: {},\n\n        /**\n         * Indices of geometry.\n         * @type {Uint16Array|Uint32Array}\n         */\n        indices: null,\n\n        /**\n         * Is vertices data dynamically updated.\n         * Attributes value can't be changed after first render if dyanmic is false.\n         * @type {boolean}\n         */\n        dynamic: true,\n\n        _enabledAttributes: null,\n\n        // PENDING\n        // Init it here to avoid deoptimization when it's assigned in application dynamically\n        __used: 0\n    };\n}, function () {\n    // Use cache\n    this._cache = new __WEBPACK_IMPORTED_MODULE_2__core_Cache__[\"a\" /* default */]();\n\n    this._attributeList = Object.keys(this.attributes);\n\n    this.__vaoCache = {};\n},\n/** @lends clay.GeometryBase.prototype */\n{\n    /**\n     * Main attribute will be used to count vertex number\n     * @type {string}\n     */\n    mainAttribute: '',\n    /**\n     * User defined picking algorithm instead of default\n     * triangle ray intersection\n     * x, y are NDC.\n     * ```typescript\n     * (x, y, renderer, camera, renderable, out) => boolean\n     * ```\n     * @type {?Function}\n     */\n    pick: null,\n\n    /**\n     * User defined ray picking algorithm instead of default\n     * triangle ray intersection\n     * ```typescript\n     * (ray: clay.Ray, renderable: clay.Renderable, out: Array) => boolean\n     * ```\n     * @type {?Function}\n     */\n    pickByRay: null,\n\n    /**\n     * Mark attributes and indices in geometry needs to update.\n     * Usually called after you change the data in attributes.\n     */\n    dirty: function () {\n        var enabledAttributes = this.getEnabledAttributes();\n        for (var i = 0; i < enabledAttributes.length; i++) {\n            this.dirtyAttribute(enabledAttributes[i]);\n        }\n        this.dirtyIndices();\n        this._enabledAttributes = null;\n\n        this._cache.dirty('any');\n    },\n    /**\n     * Mark the indices needs to update.\n     */\n    dirtyIndices: function () {\n        this._cache.dirtyAll('indices');\n    },\n    /**\n     * Mark the attributes needs to update.\n     * @param {string} [attrName]\n     */\n    dirtyAttribute: function (attrName) {\n        this._cache.dirtyAll(makeAttrKey(attrName));\n        this._cache.dirtyAll('attributes');\n    },\n    /**\n     * Get indices of triangle at given index.\n     * @param {number} idx\n     * @param {Array.<number>} out\n     * @return {Array.<number>}\n     */\n    getTriangleIndices: function (idx, out) {\n        if (idx < this.triangleCount && idx >= 0) {\n            if (!out) {\n                out = [];\n            }\n            var indices = this.indices;\n            out[0] = indices[idx * 3];\n            out[1] = indices[idx * 3 + 1];\n            out[2] = indices[idx * 3 + 2];\n            return out;\n        }\n    },\n\n    /**\n     * Set indices of triangle at given index.\n     * @param {number} idx\n     * @param {Array.<number>} arr\n     */\n    setTriangleIndices: function (idx, arr) {\n        var indices = this.indices;\n        indices[idx * 3] = arr[0];\n        indices[idx * 3 + 1] = arr[1];\n        indices[idx * 3 + 2] = arr[2];\n    },\n\n    isUseIndices: function () {\n        return !!this.indices;\n    },\n\n    /**\n     * Initialize indices from an array.\n     * @param {Array} array\n     */\n    initIndicesFromArray: function (array) {\n        var value;\n        var ArrayConstructor = this.vertexCount > 0xffff\n            ? __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].Uint32Array : __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].Uint16Array;\n        // Convert 2d array to flat\n        if (array[0] && (array[0].length)) {\n            var n = 0;\n            var size = 3;\n\n            value = new ArrayConstructor(array.length * size);\n            for (var i = 0; i < array.length; i++) {\n                for (var j = 0; j < size; j++) {\n                    value[n++] = array[i][j];\n                }\n            }\n        }\n        else {\n            value = new ArrayConstructor(array);\n        }\n\n        this.indices = value;\n    },\n    /**\n     * Create a new attribute\n     * @param {string} name\n     * @param {string} type\n     * @param {number} size\n     * @param {string} [semantic]\n     */\n    createAttribute: function (name, type, size, semantic) {\n        var attrib = new Attribute(name, type, size, semantic);\n        if (this.attributes[name]) {\n            this.removeAttribute(name);\n        }\n        this.attributes[name] = attrib;\n        this._attributeList.push(name);\n        return attrib;\n    },\n    /**\n     * Remove attribute\n     * @param {string} name\n     */\n    removeAttribute: function (name) {\n        var attributeList = this._attributeList;\n        var idx = attributeList.indexOf(name);\n        if (idx >= 0) {\n            attributeList.splice(idx, 1);\n            delete this.attributes[name];\n            return true;\n        }\n        return false;\n    },\n\n    /**\n     * Get attribute\n     * @param {string} name\n     * @return {clay.GeometryBase.Attribute}\n     */\n    getAttribute: function (name) {\n        return this.attributes[name];\n    },\n\n    /**\n     * Get enabled attributes name list\n     * Attribute which has the same vertex number with position is treated as a enabled attribute\n     * @return {string[]}\n     */\n    getEnabledAttributes: function () {\n        var enabledAttributes = this._enabledAttributes;\n        var attributeList = this._attributeList;\n        // Cache\n        if (enabledAttributes) {\n            return enabledAttributes;\n        }\n\n        var result = [];\n        var nVertex = this.vertexCount;\n\n        for (var i = 0; i < attributeList.length; i++) {\n            var name = attributeList[i];\n            var attrib = this.attributes[name];\n            if (attrib.value) {\n                if (attrib.value.length === nVertex * attrib.size) {\n                    result.push(name);\n                }\n            }\n        }\n\n        this._enabledAttributes = result;\n\n        return result;\n    },\n\n    getBufferChunks: function (renderer) {\n        var cache = this._cache;\n        cache.use(renderer.__uid__);\n        var isAttributesDirty = cache.isDirty('attributes');\n        var isIndicesDirty = cache.isDirty('indices');\n        if (isAttributesDirty || isIndicesDirty) {\n            this._updateBuffer(renderer.gl, isAttributesDirty, isIndicesDirty);\n            var enabledAttributes = this.getEnabledAttributes();\n            for (var i = 0; i < enabledAttributes.length; i++) {\n                cache.fresh(makeAttrKey(enabledAttributes[i]));\n            }\n            cache.fresh('attributes');\n            cache.fresh('indices');\n        }\n        cache.fresh('any');\n        return cache.get('chunks');\n    },\n\n    _updateBuffer: function (_gl, isAttributesDirty, isIndicesDirty) {\n        var cache = this._cache;\n        var chunks = cache.get('chunks');\n        var firstUpdate = false;\n        if (!chunks) {\n            chunks = [];\n            // Intialize\n            chunks[0] = {\n                attributeBuffers: [],\n                indicesBuffer: null\n            };\n            cache.put('chunks', chunks);\n            firstUpdate = true;\n        }\n\n        var chunk = chunks[0];\n        var attributeBuffers = chunk.attributeBuffers;\n        var indicesBuffer = chunk.indicesBuffer;\n\n        if (isAttributesDirty || firstUpdate) {\n            var attributeList = this.getEnabledAttributes();\n\n            var attributeBufferMap = {};\n            if (!firstUpdate) {\n                for (var i = 0; i < attributeBuffers.length; i++) {\n                    attributeBufferMap[attributeBuffers[i].name] = attributeBuffers[i];\n                }\n            }\n            // FIXME If some attributes removed\n            for (var k = 0; k < attributeList.length; k++) {\n                var name = attributeList[k];\n                var attribute = this.attributes[name];\n\n                var bufferInfo;\n\n                if (!firstUpdate) {\n                    bufferInfo = attributeBufferMap[name];\n                }\n                var buffer;\n                if (bufferInfo) {\n                    buffer = bufferInfo.buffer;\n                }\n                else {\n                    buffer = _gl.createBuffer();\n                }\n                if (cache.isDirty(makeAttrKey(name))) {\n                    // Only update when they are dirty.\n                    // TODO: Use BufferSubData?\n                    _gl.bindBuffer(_gl.ARRAY_BUFFER, buffer);\n                    _gl.bufferData(_gl.ARRAY_BUFFER, attribute.value, this.dynamic ? _gl.DYNAMIC_DRAW : _gl.STATIC_DRAW);\n                }\n\n                attributeBuffers[k] = new AttributeBuffer(name, attribute.type, buffer, attribute.size, attribute.semantic);\n            }\n            // Remove unused attributes buffers.\n            // PENDING\n            for (var i = k; i < attributeBuffers.length; i++) {\n                _gl.deleteBuffer(attributeBuffers[i].buffer);\n            }\n            attributeBuffers.length = k;\n\n        }\n\n        if (this.isUseIndices() && (isIndicesDirty || firstUpdate)) {\n            if (!indicesBuffer) {\n                indicesBuffer = new IndicesBuffer(_gl.createBuffer());\n                chunk.indicesBuffer = indicesBuffer;\n            }\n            indicesBuffer.count = this.indices.length;\n            _gl.bindBuffer(_gl.ELEMENT_ARRAY_BUFFER, indicesBuffer.buffer);\n            _gl.bufferData(_gl.ELEMENT_ARRAY_BUFFER, this.indices, this.dynamic ? _gl.DYNAMIC_DRAW : _gl.STATIC_DRAW);\n        }\n    },\n\n    /**\n     * Dispose geometry data in GL context.\n     * @param {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n\n        var cache = this._cache;\n\n        cache.use(renderer.__uid__);\n        var chunks = cache.get('chunks');\n        if (chunks) {\n            for (var c = 0; c < chunks.length; c++) {\n                var chunk = chunks[c];\n\n                for (var k = 0; k < chunk.attributeBuffers.length; k++) {\n                    var attribs = chunk.attributeBuffers[k];\n                    renderer.gl.deleteBuffer(attribs.buffer);\n                }\n\n                if (chunk.indicesBuffer) {\n                    renderer.gl.deleteBuffer(chunk.indicesBuffer.buffer);\n                }\n            }\n        }\n        if (this.__vaoCache) {\n            var vaoExt = renderer.getGLExtension('OES_vertex_array_object');\n            for (var id in this.__vaoCache) {\n                var vao = this.__vaoCache[id].vao;\n                if (vao) {\n                    vaoExt.deleteVertexArrayOES(vao);\n                }\n            }\n        }\n        this.__vaoCache = {};\n        cache.deleteContext(renderer.__uid__);\n    }\n\n});\n\nif (Object.defineProperty) {\n    /**\n     * @name clay.GeometryBase#vertexCount\n     * @type {number}\n     * @readOnly\n     */\n    Object.defineProperty(GeometryBase.prototype, 'vertexCount', {\n\n        enumerable: false,\n\n        get: function () {\n\n            var mainAttribute = this.attributes[this.mainAttribute];\n\n            if (!mainAttribute) {\n                mainAttribute = this.attributes[this._attributeList[0]];\n            }\n\n            if (!mainAttribute || !mainAttribute.value) {\n                return 0;\n            }\n            return mainAttribute.value.length / mainAttribute.size;\n        }\n    });\n    /**\n     * @name clay.GeometryBase#triangleCount\n     * @type {number}\n     * @readOnly\n     */\n    Object.defineProperty(GeometryBase.prototype, 'triangleCount', {\n\n        enumerable: false,\n\n        get: function () {\n            var indices = this.indices;\n            if (!indices) {\n                return 0;\n            }\n            else {\n                return indices.length / 3;\n            }\n        }\n    });\n}\n\nGeometryBase.STATIC_DRAW = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].STATIC_DRAW;\nGeometryBase.DYNAMIC_DRAW = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].DYNAMIC_DRAW;\nGeometryBase.STREAM_DRAW = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].STREAM_DRAW;\n\nGeometryBase.AttributeBuffer = AttributeBuffer;\nGeometryBase.IndicesBuffer = IndicesBuffer;\n\nGeometryBase.Attribute = Attribute;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GeometryBase);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9HZW9tZXRyeUJhc2UuanM/NzZkOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZSBmcm9tICcuL2NvcmUvQmFzZSc7XG5pbXBvcnQgZ2xlbnVtIGZyb20gJy4vY29yZS9nbGVudW0nO1xuaW1wb3J0IENhY2hlIGZyb20gJy4vY29yZS9DYWNoZSc7XG5pbXBvcnQgdmVuZG9yIGZyb20gJy4vY29yZS92ZW5kb3InO1xuXG5mdW5jdGlvbiBnZXRBcnJheUN0b3JCeVR5cGUgKHR5cGUpIHtcbiAgICByZXR1cm4gKHtcbiAgICAgICAgJ2J5dGUnOiB2ZW5kb3IuSW50OEFycmF5LFxuICAgICAgICAndWJ5dGUnOiB2ZW5kb3IuVWludDhBcnJheSxcbiAgICAgICAgJ3Nob3J0JzogdmVuZG9yLkludDE2QXJyYXksXG4gICAgICAgICd1c2hvcnQnOiB2ZW5kb3IuVWludDE2QXJyYXlcbiAgICB9KVt0eXBlXSB8fCB2ZW5kb3IuRmxvYXQzMkFycmF5O1xufVxuXG5mdW5jdGlvbiBtYWtlQXR0cktleShhdHRyTmFtZSkge1xuICAgIHJldHVybiAnYXR0cl8nICsgYXR0ck5hbWU7XG59XG4vKipcbiAqIEdlb21ldHJ5QmFzZSBhdHRyaWJ1dGVcbiAqIEBhbGlhcyBjbGF5Lkdlb21ldHJ5QmFzZS5BdHRyaWJ1dGVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBBdHRyaWJ1dGUobmFtZSwgdHlwZSwgc2l6ZSwgc2VtYW50aWMpIHtcbiAgICAvKipcbiAgICAgKiBBdHRyaWJ1dGUgbmFtZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAvKipcbiAgICAgKiBBdHRyaWJ1dGUgdHlwZVxuICAgICAqIFBvc3NpYmxlIHZhbHVlczpcbiAgICAgKiAgKyBgJ2J5dGUnYFxuICAgICAqICArIGAndWJ5dGUnYFxuICAgICAqICArIGAnc2hvcnQnYFxuICAgICAqICArIGAndXNob3J0J2BcbiAgICAgKiAgKyBgJ2Zsb2F0J2AgTW9zdCBjb21tb25seSB1c2VkLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAvKipcbiAgICAgKiBTaXplIG9mIGF0dHJpYnV0ZSBjb21wb25lbnQuIDEgLSA0LlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAvKipcbiAgICAgKiBTZW1hbnRpYyBvZiB0aGlzIGF0dHJpYnV0ZS5cbiAgICAgKiBQb3NzaWJsZSB2YWx1ZXM6XG4gICAgICogICsgYCdQT1NJVElPTidgXG4gICAgICogICsgYCdOT1JNQUwnYFxuICAgICAqICArIGAnQklOT1JNQUwnYFxuICAgICAqICArIGAnVEFOR0VOVCdgXG4gICAgICogICsgYCdURVhDT09SRCdgXG4gICAgICogICsgYCdURVhDT09SRF8wJ2BcbiAgICAgKiAgKyBgJ1RFWENPT1JEXzEnYFxuICAgICAqICArIGAnQ09MT1InYFxuICAgICAqICArIGAnSk9JTlQnYFxuICAgICAqICArIGAnV0VJR0hUJ2BcbiAgICAgKlxuICAgICAqIEluIHNoYWRlciwgYXR0cmlidXRlIHdpdGggc2FtZSBzZW1hbnRpYyB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgbWFwcGVkLiBGb3IgZXhhbXBsZTpcbiAgICAgKiBgYGBnbHNsXG4gICAgICogYXR0cmlidXRlIHZlYzMgcG9zOiBQT1NJVElPTlxuICAgICAqIGBgYFxuICAgICAqIHdpbGwgdXNlIHRoZSBhdHRyaWJ1dGUgdmFsdWUgd2l0aCBzZW1hbnRpYyBQT1NJVElPTiBpbiBnZW9tZXRyeSwgbm8gbWF0dGVyIHdoYXQgbmFtZSBpdCB1c2VkLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5zZW1hbnRpYyA9IHNlbWFudGljIHx8ICcnO1xuXG4gICAgLyoqXG4gICAgICogVmFsdWUgb2YgdGhlIGF0dHJpYnV0ZS5cbiAgICAgKiBAdHlwZSB7VHlwZWRBcnJheX1cbiAgICAgKi9cbiAgICB0aGlzLnZhbHVlID0gbnVsbDtcblxuICAgIC8vIEluaXQgZ2V0dGVyIHNldHRlclxuICAgIHN3aXRjaCAoc2l6ZSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICB0aGlzLmdldCA9IGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZVtpZHhdO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2V0ID0gZnVuY3Rpb24gKGlkeCwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlW2lkeF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBDb3B5IGZyb20gc291cmNlIHRvIHRhcmdldFxuICAgICAgICAgICAgdGhpcy5jb3B5ID0gZnVuY3Rpb24gKHRhcmdldCwgc291cmNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZVt0YXJnZXRdID0gdGhpcy52YWx1ZVt0YXJnZXRdO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB0aGlzLmdldCA9IGZ1bmN0aW9uIChpZHgsIG91dCkge1xuICAgICAgICAgICAgICAgIHZhciBhcnIgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgIG91dFswXSA9IGFycltpZHggKiAyXTtcbiAgICAgICAgICAgICAgICBvdXRbMV0gPSBhcnJbaWR4ICogMiArIDFdO1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoaWR4LCB2YWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgICBhcnJbaWR4ICogMl0gPSB2YWxbMF07XG4gICAgICAgICAgICAgICAgYXJyW2lkeCAqIDIgKyAxXSA9IHZhbFsxXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNvcHkgPSBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgICBzb3VyY2UgKj0gMjtcbiAgICAgICAgICAgICAgICB0YXJnZXQgKj0gMjtcbiAgICAgICAgICAgICAgICBhcnJbdGFyZ2V0XSA9IGFycltzb3VyY2VdO1xuICAgICAgICAgICAgICAgIGFyclt0YXJnZXQgKyAxXSA9IGFycltzb3VyY2UgKyAxXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgdGhpcy5nZXQgPSBmdW5jdGlvbiAoaWR4LCBvdXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWR4MyA9IGlkeCAqIDM7XG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICAgICAgb3V0WzBdID0gYXJyW2lkeDNdO1xuICAgICAgICAgICAgICAgIG91dFsxXSA9IGFycltpZHgzICsgMV07XG4gICAgICAgICAgICAgICAgb3V0WzJdID0gYXJyW2lkeDMgKyAyXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2V0ID0gZnVuY3Rpb24gKGlkeCwgdmFsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkeDMgPSBpZHggKiAzO1xuICAgICAgICAgICAgICAgIHZhciBhcnIgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgIGFycltpZHgzXSA9IHZhbFswXTtcbiAgICAgICAgICAgICAgICBhcnJbaWR4MyArIDFdID0gdmFsWzFdO1xuICAgICAgICAgICAgICAgIGFycltpZHgzICsgMl0gPSB2YWxbMl07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jb3B5ID0gZnVuY3Rpb24gKHRhcmdldCwgc291cmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICAgICAgc291cmNlICo9IDM7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ICo9IDM7XG4gICAgICAgICAgICAgICAgYXJyW3RhcmdldF0gPSBhcnJbc291cmNlXTtcbiAgICAgICAgICAgICAgICBhcnJbdGFyZ2V0ICsgMV0gPSBhcnJbc291cmNlICsgMV07XG4gICAgICAgICAgICAgICAgYXJyW3RhcmdldCArIDJdID0gYXJyW3NvdXJjZSArIDJdO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICB0aGlzLmdldCA9IGZ1bmN0aW9uIChpZHgsIG91dCkge1xuICAgICAgICAgICAgICAgIHZhciBhcnIgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgIHZhciBpZHg0ID0gaWR4ICogNDtcbiAgICAgICAgICAgICAgICBvdXRbMF0gPSBhcnJbaWR4NF07XG4gICAgICAgICAgICAgICAgb3V0WzFdID0gYXJyW2lkeDQgKyAxXTtcbiAgICAgICAgICAgICAgICBvdXRbMl0gPSBhcnJbaWR4NCArIDJdO1xuICAgICAgICAgICAgICAgIG91dFszXSA9IGFycltpZHg0ICsgM107XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNldCA9IGZ1bmN0aW9uIChpZHgsIHZhbCkge1xuICAgICAgICAgICAgICAgIHZhciBhcnIgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgIHZhciBpZHg0ID0gaWR4ICogNDtcbiAgICAgICAgICAgICAgICBhcnJbaWR4NF0gPSB2YWxbMF07XG4gICAgICAgICAgICAgICAgYXJyW2lkeDQgKyAxXSA9IHZhbFsxXTtcbiAgICAgICAgICAgICAgICBhcnJbaWR4NCArIDJdID0gdmFsWzJdO1xuICAgICAgICAgICAgICAgIGFycltpZHg0ICsgM10gPSB2YWxbM107XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jb3B5ID0gZnVuY3Rpb24gKHRhcmdldCwgc291cmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICAgICAgc291cmNlICo9IDQ7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ICo9IDQ7XG4gICAgICAgICAgICAgICAgLy8gY29weVdpdGhpbiBpcyBleHRyZW1lbHkgc2xvd1xuICAgICAgICAgICAgICAgIGFyclt0YXJnZXRdID0gYXJyW3NvdXJjZV07XG4gICAgICAgICAgICAgICAgYXJyW3RhcmdldCArIDFdID0gYXJyW3NvdXJjZSArIDFdO1xuICAgICAgICAgICAgICAgIGFyclt0YXJnZXQgKyAyXSA9IGFycltzb3VyY2UgKyAyXTtcbiAgICAgICAgICAgICAgICBhcnJbdGFyZ2V0ICsgM10gPSBhcnJbc291cmNlICsgM107XG4gICAgICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBTZXQgaXRlbSB2YWx1ZSBhdCBnaXZlIGluZGV4LiBTZWNvbmQgcGFyYW1ldGVyIHZhbCBpcyBudW1iZXIgaWYgc2l6ZSBpcyAxXG4gKiBAZnVuY3Rpb25cbiAqIEBuYW1lIGNsYXkuR2VvbWV0cnlCYXNlLkF0dHJpYnV0ZSNzZXRcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZHhcbiAqIEBwYXJhbSB7bnVtYmVyW118bnVtYmVyfSB2YWxcbiAqIEBleGFtcGxlXG4gKiBnZW9tZXRyeS5nZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJykuc2V0KDAsIFsxLCAxLCAxXSk7XG4gKi9cblxuLyoqXG4gKiBHZXQgaXRlbSB2YWx1ZSBhdCBnaXZlIGluZGV4LiBTZWNvbmQgcGFyYW1ldGVyIG91dCBpcyBubyBuZWVkIGlmIHNpemUgaXMgMVxuICogQGZ1bmN0aW9uXG4gKiBAbmFtZSBjbGF5Lkdlb21ldHJ5QmFzZS5BdHRyaWJ1dGUjc2V0XG4gKiBAcGFyYW0ge251bWJlcn0gaWR4XG4gKiBAcGFyYW0ge251bWJlcltdfSBbb3V0XVxuICogQGV4YW1wbGVcbiAqIGdlb21ldHJ5LmdldEF0dHJpYnV0ZSgncG9zaXRpb24nKS5nZXQoMCwgb3V0KTtcbiAqL1xuXG4vKipcbiAqIEluaXRpYWxpemUgYXR0cmlidXRlIHdpdGggZ2l2ZW4gdmVydGV4IGNvdW50XG4gKiBAcGFyYW0ge251bWJlcn0gblZlcnRleFxuICovXG5BdHRyaWJ1dGUucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoblZlcnRleCkge1xuICAgIGlmICghdGhpcy52YWx1ZSB8fCB0aGlzLnZhbHVlLmxlbmd0aCAhPT0gblZlcnRleCAqIHRoaXMuc2l6ZSkge1xuICAgICAgICB2YXIgQXJyYXlDb25zdHJ1Y3RvciA9IGdldEFycmF5Q3RvckJ5VHlwZSh0aGlzLnR5cGUpO1xuICAgICAgICB0aGlzLnZhbHVlID0gbmV3IEFycmF5Q29uc3RydWN0b3IoblZlcnRleCAqIHRoaXMuc2l6ZSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBJbml0aWFsaXplIGF0dHJpYnV0ZSB3aXRoIGdpdmVuIGFycmF5LiBXaGljaCBjYW4gYmUgMSBkaW1lbnNpb25hbCBvciAyIGRpbWVuc2lvbmFsXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheVxuICogQGV4YW1wbGVcbiAqICBnZW9tZXRyeS5nZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJykuZnJvbUFycmF5KFxuICogICAgICBbLTEsIDAsIDAsIDEsIDAsIDAsIDAsIDEsIDBdXG4gKiAgKTtcbiAqICBnZW9tZXRyeS5nZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJykuZnJvbUFycmF5KFxuICogICAgICBbIFstMSwgMCwgMF0sIFsxLCAwLCAwXSwgWzAsIDEsIDBdIF1cbiAqICApO1xuICovXG5BdHRyaWJ1dGUucHJvdG90eXBlLmZyb21BcnJheSA9IGZ1bmN0aW9uIChhcnJheSkge1xuICAgIHZhciBBcnJheUNvbnN0cnVjdG9yID0gZ2V0QXJyYXlDdG9yQnlUeXBlKHRoaXMudHlwZSk7XG4gICAgdmFyIHZhbHVlO1xuICAgIC8vIENvbnZlcnQgMmQgYXJyYXkgdG8gZmxhdFxuICAgIGlmIChhcnJheVswXSAmJiAoYXJyYXlbMF0ubGVuZ3RoKSkge1xuICAgICAgICB2YXIgbiA9IDA7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplO1xuICAgICAgICB2YWx1ZSA9IG5ldyBBcnJheUNvbnN0cnVjdG9yKGFycmF5Lmxlbmd0aCAqIHNpemUpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNpemU7IGorKykge1xuICAgICAgICAgICAgICAgIHZhbHVlW24rK10gPSBhcnJheVtpXVtqXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBuZXcgQXJyYXlDb25zdHJ1Y3RvcihhcnJheSk7XG4gICAgfVxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbn07XG5cbkF0dHJpYnV0ZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbihjb3B5VmFsdWUpIHtcbiAgICB2YXIgcmV0ID0gbmV3IEF0dHJpYnV0ZSh0aGlzLm5hbWUsIHRoaXMudHlwZSwgdGhpcy5zaXplLCB0aGlzLnNlbWFudGljKTtcbiAgICAvLyBGSVhNRVxuICAgIGlmIChjb3B5VmFsdWUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCd0b2RvJyk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5mdW5jdGlvbiBBdHRyaWJ1dGVCdWZmZXIobmFtZSwgdHlwZSwgYnVmZmVyLCBzaXplLCBzZW1hbnRpYykge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgIHRoaXMuc2VtYW50aWMgPSBzZW1hbnRpYztcblxuICAgIC8vIFRvIGJlIHNldCBpbiBtZXNoXG4gICAgLy8gc3ltYm9sIGluIHRoZSBzaGFkZXJcbiAgICB0aGlzLnN5bWJvbCA9ICcnO1xuXG4gICAgLy8gTmVlZHMgcmVtb3ZlIGZsYWdcbiAgICB0aGlzLm5lZWRzUmVtb3ZlID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIEluZGljZXNCdWZmZXIoYnVmZmVyKSB7XG4gICAgdGhpcy5idWZmZXIgPSBidWZmZXI7XG4gICAgdGhpcy5jb3VudCA9IDA7XG59XG5cbi8qKlxuICogQmFzZSBvZiBhbGwgZ2VvbWV0cnkuIFVzZSB7QGxpbmsgY2xheS5HZW9tZXRyeX0gZm9yIGNvbW1vbiAzRCB1c2FnZS5cbiAqIEBjb25zdHJ1Y3RvciBjbGF5Lkdlb21ldHJ5QmFzZVxuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqL1xudmFyIEdlb21ldHJ5QmFzZSA9IEJhc2UuZXh0ZW5kKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5Lkdlb21ldHJ5QmFzZSMgKi8ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQXR0cmlidXRlcyBvZiBnZW9tZXRyeS5cbiAgICAgICAgICogQHR5cGUge09iamVjdC48c3RyaW5nLCBjbGF5Lkdlb21ldHJ5QmFzZS5BdHRyaWJ1dGU+fVxuICAgICAgICAgKi9cbiAgICAgICAgYXR0cmlidXRlczoge30sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluZGljZXMgb2YgZ2VvbWV0cnkuXG4gICAgICAgICAqIEB0eXBlIHtVaW50MTZBcnJheXxVaW50MzJBcnJheX1cbiAgICAgICAgICovXG4gICAgICAgIGluZGljZXM6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElzIHZlcnRpY2VzIGRhdGEgZHluYW1pY2FsbHkgdXBkYXRlZC5cbiAgICAgICAgICogQXR0cmlidXRlcyB2YWx1ZSBjYW4ndCBiZSBjaGFuZ2VkIGFmdGVyIGZpcnN0IHJlbmRlciBpZiBkeWFubWljIGlzIGZhbHNlLlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGR5bmFtaWM6IHRydWUsXG5cbiAgICAgICAgX2VuYWJsZWRBdHRyaWJ1dGVzOiBudWxsLFxuXG4gICAgICAgIC8vIFBFTkRJTkdcbiAgICAgICAgLy8gSW5pdCBpdCBoZXJlIHRvIGF2b2lkIGRlb3B0aW1pemF0aW9uIHdoZW4gaXQncyBhc3NpZ25lZCBpbiBhcHBsaWNhdGlvbiBkeW5hbWljYWxseVxuICAgICAgICBfX3VzZWQ6IDBcbiAgICB9O1xufSwgZnVuY3Rpb24gKCkge1xuICAgIC8vIFVzZSBjYWNoZVxuICAgIHRoaXMuX2NhY2hlID0gbmV3IENhY2hlKCk7XG5cbiAgICB0aGlzLl9hdHRyaWJ1dGVMaXN0ID0gT2JqZWN0LmtleXModGhpcy5hdHRyaWJ1dGVzKTtcblxuICAgIHRoaXMuX192YW9DYWNoZSA9IHt9O1xufSxcbi8qKiBAbGVuZHMgY2xheS5HZW9tZXRyeUJhc2UucHJvdG90eXBlICovXG57XG4gICAgLyoqXG4gICAgICogTWFpbiBhdHRyaWJ1dGUgd2lsbCBiZSB1c2VkIHRvIGNvdW50IHZlcnRleCBudW1iZXJcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIG1haW5BdHRyaWJ1dGU6ICcnLFxuICAgIC8qKlxuICAgICAqIFVzZXIgZGVmaW5lZCBwaWNraW5nIGFsZ29yaXRobSBpbnN0ZWFkIG9mIGRlZmF1bHRcbiAgICAgKiB0cmlhbmdsZSByYXkgaW50ZXJzZWN0aW9uXG4gICAgICogeCwgeSBhcmUgTkRDLlxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiAoeCwgeSwgcmVuZGVyZXIsIGNhbWVyYSwgcmVuZGVyYWJsZSwgb3V0KSA9PiBib29sZWFuXG4gICAgICogYGBgXG4gICAgICogQHR5cGUgez9GdW5jdGlvbn1cbiAgICAgKi9cbiAgICBwaWNrOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogVXNlciBkZWZpbmVkIHJheSBwaWNraW5nIGFsZ29yaXRobSBpbnN0ZWFkIG9mIGRlZmF1bHRcbiAgICAgKiB0cmlhbmdsZSByYXkgaW50ZXJzZWN0aW9uXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIChyYXk6IGNsYXkuUmF5LCByZW5kZXJhYmxlOiBjbGF5LlJlbmRlcmFibGUsIG91dDogQXJyYXkpID0+IGJvb2xlYW5cbiAgICAgKiBgYGBcbiAgICAgKiBAdHlwZSB7P0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIHBpY2tCeVJheTogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIE1hcmsgYXR0cmlidXRlcyBhbmQgaW5kaWNlcyBpbiBnZW9tZXRyeSBuZWVkcyB0byB1cGRhdGUuXG4gICAgICogVXN1YWxseSBjYWxsZWQgYWZ0ZXIgeW91IGNoYW5nZSB0aGUgZGF0YSBpbiBhdHRyaWJ1dGVzLlxuICAgICAqL1xuICAgIGRpcnR5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbmFibGVkQXR0cmlidXRlcyA9IHRoaXMuZ2V0RW5hYmxlZEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbmFibGVkQXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5kaXJ0eUF0dHJpYnV0ZShlbmFibGVkQXR0cmlidXRlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXJ0eUluZGljZXMoKTtcbiAgICAgICAgdGhpcy5fZW5hYmxlZEF0dHJpYnV0ZXMgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX2NhY2hlLmRpcnR5KCdhbnknKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIE1hcmsgdGhlIGluZGljZXMgbmVlZHMgdG8gdXBkYXRlLlxuICAgICAqL1xuICAgIGRpcnR5SW5kaWNlczogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9jYWNoZS5kaXJ0eUFsbCgnaW5kaWNlcycpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogTWFyayB0aGUgYXR0cmlidXRlcyBuZWVkcyB0byB1cGRhdGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFthdHRyTmFtZV1cbiAgICAgKi9cbiAgICBkaXJ0eUF0dHJpYnV0ZTogZnVuY3Rpb24gKGF0dHJOYW1lKSB7XG4gICAgICAgIHRoaXMuX2NhY2hlLmRpcnR5QWxsKG1ha2VBdHRyS2V5KGF0dHJOYW1lKSk7XG4gICAgICAgIHRoaXMuX2NhY2hlLmRpcnR5QWxsKCdhdHRyaWJ1dGVzJyk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBHZXQgaW5kaWNlcyBvZiB0cmlhbmdsZSBhdCBnaXZlbiBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaWR4XG4gICAgICogQHBhcmFtIHtBcnJheS48bnVtYmVyPn0gb3V0XG4gICAgICogQHJldHVybiB7QXJyYXkuPG51bWJlcj59XG4gICAgICovXG4gICAgZ2V0VHJpYW5nbGVJbmRpY2VzOiBmdW5jdGlvbiAoaWR4LCBvdXQpIHtcbiAgICAgICAgaWYgKGlkeCA8IHRoaXMudHJpYW5nbGVDb3VudCAmJiBpZHggPj0gMCkge1xuICAgICAgICAgICAgaWYgKCFvdXQpIHtcbiAgICAgICAgICAgICAgICBvdXQgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpbmRpY2VzID0gdGhpcy5pbmRpY2VzO1xuICAgICAgICAgICAgb3V0WzBdID0gaW5kaWNlc1tpZHggKiAzXTtcbiAgICAgICAgICAgIG91dFsxXSA9IGluZGljZXNbaWR4ICogMyArIDFdO1xuICAgICAgICAgICAgb3V0WzJdID0gaW5kaWNlc1tpZHggKiAzICsgMl07XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCBpbmRpY2VzIG9mIHRyaWFuZ2xlIGF0IGdpdmVuIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpZHhcbiAgICAgKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSBhcnJcbiAgICAgKi9cbiAgICBzZXRUcmlhbmdsZUluZGljZXM6IGZ1bmN0aW9uIChpZHgsIGFycikge1xuICAgICAgICB2YXIgaW5kaWNlcyA9IHRoaXMuaW5kaWNlcztcbiAgICAgICAgaW5kaWNlc1tpZHggKiAzXSA9IGFyclswXTtcbiAgICAgICAgaW5kaWNlc1tpZHggKiAzICsgMV0gPSBhcnJbMV07XG4gICAgICAgIGluZGljZXNbaWR4ICogMyArIDJdID0gYXJyWzJdO1xuICAgIH0sXG5cbiAgICBpc1VzZUluZGljZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5pbmRpY2VzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGluZGljZXMgZnJvbSBhbiBhcnJheS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheVxuICAgICAqL1xuICAgIGluaXRJbmRpY2VzRnJvbUFycmF5OiBmdW5jdGlvbiAoYXJyYXkpIHtcbiAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICB2YXIgQXJyYXlDb25zdHJ1Y3RvciA9IHRoaXMudmVydGV4Q291bnQgPiAweGZmZmZcbiAgICAgICAgICAgID8gdmVuZG9yLlVpbnQzMkFycmF5IDogdmVuZG9yLlVpbnQxNkFycmF5O1xuICAgICAgICAvLyBDb252ZXJ0IDJkIGFycmF5IHRvIGZsYXRcbiAgICAgICAgaWYgKGFycmF5WzBdICYmIChhcnJheVswXS5sZW5ndGgpKSB7XG4gICAgICAgICAgICB2YXIgbiA9IDA7XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IDM7XG5cbiAgICAgICAgICAgIHZhbHVlID0gbmV3IEFycmF5Q29uc3RydWN0b3IoYXJyYXkubGVuZ3RoICogc2l6ZSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzaXplOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVbbisrXSA9IGFycmF5W2ldW2pdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlID0gbmV3IEFycmF5Q29uc3RydWN0b3IoYXJyYXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbmRpY2VzID0gdmFsdWU7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgYXR0cmlidXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzaXplXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtzZW1hbnRpY11cbiAgICAgKi9cbiAgICBjcmVhdGVBdHRyaWJ1dGU6IGZ1bmN0aW9uIChuYW1lLCB0eXBlLCBzaXplLCBzZW1hbnRpYykge1xuICAgICAgICB2YXIgYXR0cmliID0gbmV3IEF0dHJpYnV0ZShuYW1lLCB0eXBlLCBzaXplLCBzZW1hbnRpYyk7XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZXNbbmFtZV0pIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXR0cmlidXRlc1tuYW1lXSA9IGF0dHJpYjtcbiAgICAgICAgdGhpcy5fYXR0cmlidXRlTGlzdC5wdXNoKG5hbWUpO1xuICAgICAgICByZXR1cm4gYXR0cmliO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGF0dHJpYnV0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICovXG4gICAgcmVtb3ZlQXR0cmlidXRlOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgYXR0cmlidXRlTGlzdCA9IHRoaXMuX2F0dHJpYnV0ZUxpc3Q7XG4gICAgICAgIHZhciBpZHggPSBhdHRyaWJ1dGVMaXN0LmluZGV4T2YobmFtZSk7XG4gICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgYXR0cmlidXRlTGlzdC5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmF0dHJpYnV0ZXNbbmFtZV07XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBhdHRyaWJ1dGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEByZXR1cm4ge2NsYXkuR2VvbWV0cnlCYXNlLkF0dHJpYnV0ZX1cbiAgICAgKi9cbiAgICBnZXRBdHRyaWJ1dGU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZXNbbmFtZV07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBlbmFibGVkIGF0dHJpYnV0ZXMgbmFtZSBsaXN0XG4gICAgICogQXR0cmlidXRlIHdoaWNoIGhhcyB0aGUgc2FtZSB2ZXJ0ZXggbnVtYmVyIHdpdGggcG9zaXRpb24gaXMgdHJlYXRlZCBhcyBhIGVuYWJsZWQgYXR0cmlidXRlXG4gICAgICogQHJldHVybiB7c3RyaW5nW119XG4gICAgICovXG4gICAgZ2V0RW5hYmxlZEF0dHJpYnV0ZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVuYWJsZWRBdHRyaWJ1dGVzID0gdGhpcy5fZW5hYmxlZEF0dHJpYnV0ZXM7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVMaXN0ID0gdGhpcy5fYXR0cmlidXRlTGlzdDtcbiAgICAgICAgLy8gQ2FjaGVcbiAgICAgICAgaWYgKGVuYWJsZWRBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gZW5hYmxlZEF0dHJpYnV0ZXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIHZhciBuVmVydGV4ID0gdGhpcy52ZXJ0ZXhDb3VudDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJpYnV0ZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gYXR0cmlidXRlTGlzdFtpXTtcbiAgICAgICAgICAgIHZhciBhdHRyaWIgPSB0aGlzLmF0dHJpYnV0ZXNbbmFtZV07XG4gICAgICAgICAgICBpZiAoYXR0cmliLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJpYi52YWx1ZS5sZW5ndGggPT09IG5WZXJ0ZXggKiBhdHRyaWIuc2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChuYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9lbmFibGVkQXR0cmlidXRlcyA9IHJlc3VsdDtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICBnZXRCdWZmZXJDaHVua3M6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLl9jYWNoZTtcbiAgICAgICAgY2FjaGUudXNlKHJlbmRlcmVyLl9fdWlkX18pO1xuICAgICAgICB2YXIgaXNBdHRyaWJ1dGVzRGlydHkgPSBjYWNoZS5pc0RpcnR5KCdhdHRyaWJ1dGVzJyk7XG4gICAgICAgIHZhciBpc0luZGljZXNEaXJ0eSA9IGNhY2hlLmlzRGlydHkoJ2luZGljZXMnKTtcbiAgICAgICAgaWYgKGlzQXR0cmlidXRlc0RpcnR5IHx8IGlzSW5kaWNlc0RpcnR5KSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVCdWZmZXIocmVuZGVyZXIuZ2wsIGlzQXR0cmlidXRlc0RpcnR5LCBpc0luZGljZXNEaXJ0eSk7XG4gICAgICAgICAgICB2YXIgZW5hYmxlZEF0dHJpYnV0ZXMgPSB0aGlzLmdldEVuYWJsZWRBdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVuYWJsZWRBdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY2FjaGUuZnJlc2gobWFrZUF0dHJLZXkoZW5hYmxlZEF0dHJpYnV0ZXNbaV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhY2hlLmZyZXNoKCdhdHRyaWJ1dGVzJyk7XG4gICAgICAgICAgICBjYWNoZS5mcmVzaCgnaW5kaWNlcycpO1xuICAgICAgICB9XG4gICAgICAgIGNhY2hlLmZyZXNoKCdhbnknKTtcbiAgICAgICAgcmV0dXJuIGNhY2hlLmdldCgnY2h1bmtzJyk7XG4gICAgfSxcblxuICAgIF91cGRhdGVCdWZmZXI6IGZ1bmN0aW9uIChfZ2wsIGlzQXR0cmlidXRlc0RpcnR5LCBpc0luZGljZXNEaXJ0eSkge1xuICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLl9jYWNoZTtcbiAgICAgICAgdmFyIGNodW5rcyA9IGNhY2hlLmdldCgnY2h1bmtzJyk7XG4gICAgICAgIHZhciBmaXJzdFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgICBpZiAoIWNodW5rcykge1xuICAgICAgICAgICAgY2h1bmtzID0gW107XG4gICAgICAgICAgICAvLyBJbnRpYWxpemVcbiAgICAgICAgICAgIGNodW5rc1swXSA9IHtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVCdWZmZXJzOiBbXSxcbiAgICAgICAgICAgICAgICBpbmRpY2VzQnVmZmVyOiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FjaGUucHV0KCdjaHVua3MnLCBjaHVua3MpO1xuICAgICAgICAgICAgZmlyc3RVcGRhdGUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNodW5rID0gY2h1bmtzWzBdO1xuICAgICAgICB2YXIgYXR0cmlidXRlQnVmZmVycyA9IGNodW5rLmF0dHJpYnV0ZUJ1ZmZlcnM7XG4gICAgICAgIHZhciBpbmRpY2VzQnVmZmVyID0gY2h1bmsuaW5kaWNlc0J1ZmZlcjtcblxuICAgICAgICBpZiAoaXNBdHRyaWJ1dGVzRGlydHkgfHwgZmlyc3RVcGRhdGUpIHtcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVMaXN0ID0gdGhpcy5nZXRFbmFibGVkQXR0cmlidXRlcygpO1xuXG4gICAgICAgICAgICB2YXIgYXR0cmlidXRlQnVmZmVyTWFwID0ge307XG4gICAgICAgICAgICBpZiAoIWZpcnN0VXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRyaWJ1dGVCdWZmZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZUJ1ZmZlck1hcFthdHRyaWJ1dGVCdWZmZXJzW2ldLm5hbWVdID0gYXR0cmlidXRlQnVmZmVyc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGSVhNRSBJZiBzb21lIGF0dHJpYnV0ZXMgcmVtb3ZlZFxuICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBhdHRyaWJ1dGVMaXN0Lmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBhdHRyaWJ1dGVMaXN0W2tdO1xuICAgICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGUgPSB0aGlzLmF0dHJpYnV0ZXNbbmFtZV07XG5cbiAgICAgICAgICAgICAgICB2YXIgYnVmZmVySW5mbztcblxuICAgICAgICAgICAgICAgIGlmICghZmlyc3RVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVySW5mbyA9IGF0dHJpYnV0ZUJ1ZmZlck1hcFtuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGJ1ZmZlcjtcbiAgICAgICAgICAgICAgICBpZiAoYnVmZmVySW5mbykge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBidWZmZXJJbmZvLmJ1ZmZlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IF9nbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlLmlzRGlydHkobWFrZUF0dHJLZXkobmFtZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIHdoZW4gdGhleSBhcmUgZGlydHkuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFVzZSBCdWZmZXJTdWJEYXRhP1xuICAgICAgICAgICAgICAgICAgICBfZ2wuYmluZEJ1ZmZlcihfZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICBfZ2wuYnVmZmVyRGF0YShfZ2wuQVJSQVlfQlVGRkVSLCBhdHRyaWJ1dGUudmFsdWUsIHRoaXMuZHluYW1pYyA/IF9nbC5EWU5BTUlDX0RSQVcgOiBfZ2wuU1RBVElDX0RSQVcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZUJ1ZmZlcnNba10gPSBuZXcgQXR0cmlidXRlQnVmZmVyKG5hbWUsIGF0dHJpYnV0ZS50eXBlLCBidWZmZXIsIGF0dHJpYnV0ZS5zaXplLCBhdHRyaWJ1dGUuc2VtYW50aWMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVtb3ZlIHVudXNlZCBhdHRyaWJ1dGVzIGJ1ZmZlcnMuXG4gICAgICAgICAgICAvLyBQRU5ESU5HXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gazsgaSA8IGF0dHJpYnV0ZUJ1ZmZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBfZ2wuZGVsZXRlQnVmZmVyKGF0dHJpYnV0ZUJ1ZmZlcnNbaV0uYnVmZmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF0dHJpYnV0ZUJ1ZmZlcnMubGVuZ3RoID0gaztcblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaXNVc2VJbmRpY2VzKCkgJiYgKGlzSW5kaWNlc0RpcnR5IHx8IGZpcnN0VXBkYXRlKSkge1xuICAgICAgICAgICAgaWYgKCFpbmRpY2VzQnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgaW5kaWNlc0J1ZmZlciA9IG5ldyBJbmRpY2VzQnVmZmVyKF9nbC5jcmVhdGVCdWZmZXIoKSk7XG4gICAgICAgICAgICAgICAgY2h1bmsuaW5kaWNlc0J1ZmZlciA9IGluZGljZXNCdWZmZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmRpY2VzQnVmZmVyLmNvdW50ID0gdGhpcy5pbmRpY2VzLmxlbmd0aDtcbiAgICAgICAgICAgIF9nbC5iaW5kQnVmZmVyKF9nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgaW5kaWNlc0J1ZmZlci5idWZmZXIpO1xuICAgICAgICAgICAgX2dsLmJ1ZmZlckRhdGEoX2dsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmluZGljZXMsIHRoaXMuZHluYW1pYyA/IF9nbC5EWU5BTUlDX0RSQVcgOiBfZ2wuU1RBVElDX0RSQVcpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2UgZ2VvbWV0cnkgZGF0YSBpbiBHTCBjb250ZXh0LlxuICAgICAqIEBwYXJhbSB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKi9cbiAgICBkaXNwb3NlOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcblxuICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLl9jYWNoZTtcblxuICAgICAgICBjYWNoZS51c2UocmVuZGVyZXIuX191aWRfXyk7XG4gICAgICAgIHZhciBjaHVua3MgPSBjYWNoZS5nZXQoJ2NodW5rcycpO1xuICAgICAgICBpZiAoY2h1bmtzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGNodW5rcy5sZW5ndGg7IGMrKykge1xuICAgICAgICAgICAgICAgIHZhciBjaHVuayA9IGNodW5rc1tjXTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgY2h1bmsuYXR0cmlidXRlQnVmZmVycy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0cmlicyA9IGNodW5rLmF0dHJpYnV0ZUJ1ZmZlcnNba107XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLmdsLmRlbGV0ZUJ1ZmZlcihhdHRyaWJzLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNodW5rLmluZGljZXNCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIuZ2wuZGVsZXRlQnVmZmVyKGNodW5rLmluZGljZXNCdWZmZXIuYnVmZmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX192YW9DYWNoZSkge1xuICAgICAgICAgICAgdmFyIHZhb0V4dCA9IHJlbmRlcmVyLmdldEdMRXh0ZW5zaW9uKCdPRVNfdmVydGV4X2FycmF5X29iamVjdCcpO1xuICAgICAgICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy5fX3Zhb0NhY2hlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbyA9IHRoaXMuX192YW9DYWNoZVtpZF0udmFvO1xuICAgICAgICAgICAgICAgIGlmICh2YW8pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFvRXh0LmRlbGV0ZVZlcnRleEFycmF5T0VTKHZhbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX192YW9DYWNoZSA9IHt9O1xuICAgICAgICBjYWNoZS5kZWxldGVDb250ZXh0KHJlbmRlcmVyLl9fdWlkX18pO1xuICAgIH1cblxufSk7XG5cbmlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHtcbiAgICAvKipcbiAgICAgKiBAbmFtZSBjbGF5Lkdlb21ldHJ5QmFzZSN2ZXJ0ZXhDb3VudFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHJlYWRPbmx5XG4gICAgICovXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEdlb21ldHJ5QmFzZS5wcm90b3R5cGUsICd2ZXJ0ZXhDb3VudCcsIHtcblxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIG1haW5BdHRyaWJ1dGUgPSB0aGlzLmF0dHJpYnV0ZXNbdGhpcy5tYWluQXR0cmlidXRlXTtcblxuICAgICAgICAgICAgaWYgKCFtYWluQXR0cmlidXRlKSB7XG4gICAgICAgICAgICAgICAgbWFpbkF0dHJpYnV0ZSA9IHRoaXMuYXR0cmlidXRlc1t0aGlzLl9hdHRyaWJ1dGVMaXN0WzBdXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFtYWluQXR0cmlidXRlIHx8ICFtYWluQXR0cmlidXRlLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWFpbkF0dHJpYnV0ZS52YWx1ZS5sZW5ndGggLyBtYWluQXR0cmlidXRlLnNpemU7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBAbmFtZSBjbGF5Lkdlb21ldHJ5QmFzZSN0cmlhbmdsZUNvdW50XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKi9cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VvbWV0cnlCYXNlLnByb3RvdHlwZSwgJ3RyaWFuZ2xlQ291bnQnLCB7XG5cbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG5cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5kaWNlcyA9IHRoaXMuaW5kaWNlcztcbiAgICAgICAgICAgIGlmICghaW5kaWNlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGljZXMubGVuZ3RoIC8gMztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5HZW9tZXRyeUJhc2UuU1RBVElDX0RSQVcgPSBnbGVudW0uU1RBVElDX0RSQVc7XG5HZW9tZXRyeUJhc2UuRFlOQU1JQ19EUkFXID0gZ2xlbnVtLkRZTkFNSUNfRFJBVztcbkdlb21ldHJ5QmFzZS5TVFJFQU1fRFJBVyA9IGdsZW51bS5TVFJFQU1fRFJBVztcblxuR2VvbWV0cnlCYXNlLkF0dHJpYnV0ZUJ1ZmZlciA9IEF0dHJpYnV0ZUJ1ZmZlcjtcbkdlb21ldHJ5QmFzZS5JbmRpY2VzQnVmZmVyID0gSW5kaWNlc0J1ZmZlcjtcblxuR2VvbWV0cnlCYXNlLkF0dHJpYnV0ZSA9IEF0dHJpYnV0ZTtcblxuZXhwb3J0IGRlZmF1bHQgR2VvbWV0cnlCYXNlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9HZW9tZXRyeUJhc2UuanNcbi8vIG1vZHVsZSBpZCA9IDgwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///80\n");

/***/ }),
/* 81 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n\n\n/**\n * @constructor clay.geometry.ParametricSurface\n * @extends clay.Geometry\n * @param {Object} [opt]\n * @param {Object} [generator]\n * @param {Function} generator.x\n * @param {Function} generator.y\n * @param {Function} generator.z\n * @param {Array} [generator.u=[0, 1, 0.05]]\n * @param {Array} [generator.v=[0, 1, 0.05]]\n */\nvar ParametricSurface = __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */].extend(\n/** @lends clay.geometry.ParametricSurface# */\n{\n    dynamic: false,\n    /**\n     * @type {Object}\n     */\n    generator: null\n\n}, function() {\n    this.build();\n},\n/** @lends clay.geometry.ParametricSurface.prototype */\n{\n    /**\n     * Build parametric surface geometry\n     */\n    build: function () {\n        var generator = this.generator;\n\n        if (!generator || !generator.x || !generator.y || !generator.z) {\n            throw new Error('Invalid generator');\n        }\n        var xFunc = generator.x;\n        var yFunc = generator.y;\n        var zFunc = generator.z;\n        var uRange = generator.u || [0, 1, 0.05];\n        var vRange = generator.v || [0, 1, 0.05];\n\n        var uNum = Math.floor((uRange[1] - uRange[0] + uRange[2]) / uRange[2]);\n        var vNum = Math.floor((vRange[1] - vRange[0] + vRange[2]) / vRange[2]);\n\n        if (!isFinite(uNum) || !isFinite(vNum)) {\n            throw new Error('Infinite generator');\n        }\n\n        var vertexNum = uNum * vNum;\n        this.attributes.position.init(vertexNum);\n        this.attributes.texcoord0.init(vertexNum);\n\n        var pos = [];\n        var texcoord = [];\n        var nVertex = 0;\n        for (var j = 0; j < vNum; j++) {\n            for (var i = 0; i < uNum; i++) {\n                var u = i * uRange[2] + uRange[0];\n                var v = j * vRange[2] + vRange[0];\n                pos[0] = xFunc(u, v);\n                pos[1] = yFunc(u, v);\n                pos[2] = zFunc(u, v);\n\n                texcoord[0] = i / (uNum - 1);\n                texcoord[1] = j / (vNum - 1);\n\n                this.attributes.position.set(nVertex, pos);\n                this.attributes.texcoord0.set(nVertex, texcoord);\n                nVertex++;\n            }\n        }\n\n        var IndicesCtor = vertexNum > 0xffff ? Uint32Array : Uint16Array;\n        var nIndices = (uNum - 1) * (vNum - 1) * 6;\n        var indices = this.indices = new IndicesCtor(nIndices);\n\n        var n = 0;\n        for (var j = 0; j < vNum - 1; j++) {\n            for (var i = 0; i < uNum - 1; i++) {\n                var i2 = j * uNum + i;\n                var i1 = (j * uNum + i + 1);\n                var i4 = (j + 1) * uNum + i + 1;\n                var i3 = (j + 1) * uNum + i;\n\n                indices[n++] = i1;\n                indices[n++] = i2;\n                indices[n++] = i4;\n\n                indices[n++] = i2;\n                indices[n++] = i3;\n                indices[n++] = i4;\n            }\n        }\n\n        this.generateVertexNormals();\n        this.updateBoundingBox();\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ParametricSurface);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nZW9tZXRyeS9QYXJhbWV0cmljU3VyZmFjZS5qcz9jNGU4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHZW9tZXRyeSBmcm9tICcuLi9HZW9tZXRyeSc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuZ2VvbWV0cnkuUGFyYW1ldHJpY1N1cmZhY2VcbiAqIEBleHRlbmRzIGNsYXkuR2VvbWV0cnlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0XVxuICogQHBhcmFtIHtPYmplY3R9IFtnZW5lcmF0b3JdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBnZW5lcmF0b3IueFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZ2VuZXJhdG9yLnlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGdlbmVyYXRvci56XG4gKiBAcGFyYW0ge0FycmF5fSBbZ2VuZXJhdG9yLnU9WzAsIDEsIDAuMDVdXVxuICogQHBhcmFtIHtBcnJheX0gW2dlbmVyYXRvci52PVswLCAxLCAwLjA1XV1cbiAqL1xudmFyIFBhcmFtZXRyaWNTdXJmYWNlID0gR2VvbWV0cnkuZXh0ZW5kKFxuLyoqIEBsZW5kcyBjbGF5Lmdlb21ldHJ5LlBhcmFtZXRyaWNTdXJmYWNlIyAqL1xue1xuICAgIGR5bmFtaWM6IGZhbHNlLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgZ2VuZXJhdG9yOiBudWxsXG5cbn0sIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuYnVpbGQoKTtcbn0sXG4vKiogQGxlbmRzIGNsYXkuZ2VvbWV0cnkuUGFyYW1ldHJpY1N1cmZhY2UucHJvdG90eXBlICovXG57XG4gICAgLyoqXG4gICAgICogQnVpbGQgcGFyYW1ldHJpYyBzdXJmYWNlIGdlb21ldHJ5XG4gICAgICovXG4gICAgYnVpbGQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGdlbmVyYXRvciA9IHRoaXMuZ2VuZXJhdG9yO1xuXG4gICAgICAgIGlmICghZ2VuZXJhdG9yIHx8ICFnZW5lcmF0b3IueCB8fCAhZ2VuZXJhdG9yLnkgfHwgIWdlbmVyYXRvci56KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZ2VuZXJhdG9yJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHhGdW5jID0gZ2VuZXJhdG9yLng7XG4gICAgICAgIHZhciB5RnVuYyA9IGdlbmVyYXRvci55O1xuICAgICAgICB2YXIgekZ1bmMgPSBnZW5lcmF0b3IuejtcbiAgICAgICAgdmFyIHVSYW5nZSA9IGdlbmVyYXRvci51IHx8IFswLCAxLCAwLjA1XTtcbiAgICAgICAgdmFyIHZSYW5nZSA9IGdlbmVyYXRvci52IHx8IFswLCAxLCAwLjA1XTtcblxuICAgICAgICB2YXIgdU51bSA9IE1hdGguZmxvb3IoKHVSYW5nZVsxXSAtIHVSYW5nZVswXSArIHVSYW5nZVsyXSkgLyB1UmFuZ2VbMl0pO1xuICAgICAgICB2YXIgdk51bSA9IE1hdGguZmxvb3IoKHZSYW5nZVsxXSAtIHZSYW5nZVswXSArIHZSYW5nZVsyXSkgLyB2UmFuZ2VbMl0pO1xuXG4gICAgICAgIGlmICghaXNGaW5pdGUodU51bSkgfHwgIWlzRmluaXRlKHZOdW0pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luZmluaXRlIGdlbmVyYXRvcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHZlcnRleE51bSA9IHVOdW0gKiB2TnVtO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24uaW5pdCh2ZXJ0ZXhOdW0pO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMudGV4Y29vcmQwLmluaXQodmVydGV4TnVtKTtcblxuICAgICAgICB2YXIgcG9zID0gW107XG4gICAgICAgIHZhciB0ZXhjb29yZCA9IFtdO1xuICAgICAgICB2YXIgblZlcnRleCA9IDA7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdk51bTsgaisrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVOdW07IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciB1ID0gaSAqIHVSYW5nZVsyXSArIHVSYW5nZVswXTtcbiAgICAgICAgICAgICAgICB2YXIgdiA9IGogKiB2UmFuZ2VbMl0gKyB2UmFuZ2VbMF07XG4gICAgICAgICAgICAgICAgcG9zWzBdID0geEZ1bmModSwgdik7XG4gICAgICAgICAgICAgICAgcG9zWzFdID0geUZ1bmModSwgdik7XG4gICAgICAgICAgICAgICAgcG9zWzJdID0gekZ1bmModSwgdik7XG5cbiAgICAgICAgICAgICAgICB0ZXhjb29yZFswXSA9IGkgLyAodU51bSAtIDEpO1xuICAgICAgICAgICAgICAgIHRleGNvb3JkWzFdID0gaiAvICh2TnVtIC0gMSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24uc2V0KG5WZXJ0ZXgsIHBvcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnRleGNvb3JkMC5zZXQoblZlcnRleCwgdGV4Y29vcmQpO1xuICAgICAgICAgICAgICAgIG5WZXJ0ZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBJbmRpY2VzQ3RvciA9IHZlcnRleE51bSA+IDB4ZmZmZiA/IFVpbnQzMkFycmF5IDogVWludDE2QXJyYXk7XG4gICAgICAgIHZhciBuSW5kaWNlcyA9ICh1TnVtIC0gMSkgKiAodk51bSAtIDEpICogNjtcbiAgICAgICAgdmFyIGluZGljZXMgPSB0aGlzLmluZGljZXMgPSBuZXcgSW5kaWNlc0N0b3IobkluZGljZXMpO1xuXG4gICAgICAgIHZhciBuID0gMDtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2TnVtIC0gMTsgaisrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVOdW0gLSAxOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaTIgPSBqICogdU51bSArIGk7XG4gICAgICAgICAgICAgICAgdmFyIGkxID0gKGogKiB1TnVtICsgaSArIDEpO1xuICAgICAgICAgICAgICAgIHZhciBpNCA9IChqICsgMSkgKiB1TnVtICsgaSArIDE7XG4gICAgICAgICAgICAgICAgdmFyIGkzID0gKGogKyAxKSAqIHVOdW0gKyBpO1xuXG4gICAgICAgICAgICAgICAgaW5kaWNlc1tuKytdID0gaTE7XG4gICAgICAgICAgICAgICAgaW5kaWNlc1tuKytdID0gaTI7XG4gICAgICAgICAgICAgICAgaW5kaWNlc1tuKytdID0gaTQ7XG5cbiAgICAgICAgICAgICAgICBpbmRpY2VzW24rK10gPSBpMjtcbiAgICAgICAgICAgICAgICBpbmRpY2VzW24rK10gPSBpMztcbiAgICAgICAgICAgICAgICBpbmRpY2VzW24rK10gPSBpNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVWZXJ0ZXhOb3JtYWxzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdCb3goKTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgUGFyYW1ldHJpY1N1cmZhY2U7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2dlb21ldHJ5L1BhcmFtZXRyaWNTdXJmYWNlLmpzXG4vLyBtb2R1bGUgaWQgPSA4MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///81\n");

/***/ }),
/* 82 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Scene__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__StandardMaterial__ = __webpack_require__(83);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__shader_library__ = __webpack_require__(57);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__Skeleton__ = __webpack_require__(85);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__Joint__ = __webpack_require__(58);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__camera_Orthographic__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__animation_TrackClip__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__animation_SamplerTrack__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__shader_builtin__ = __webpack_require__(86);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__Shader__ = __webpack_require__(6);\n/**\n * glTF Loader\n * Specification https://github.com/KhronosGroup/glTF/blob/master/specification/README.md\n *\n * TODO Morph targets\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Import builtin shader\n\n\n\nvar semanticAttributeMap = {\n    'NORMAL': 'normal',\n    'POSITION': 'position',\n    'TEXCOORD_0': 'texcoord0',\n    'TEXCOORD_1': 'texcoord1',\n    'WEIGHTS_0': 'weight',\n    'JOINTS_0': 'joint',\n    'COLOR_0': 'color'\n};\n\nvar ARRAY_CTOR_MAP = {\n    5120: __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Int8Array,\n    5121: __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint8Array,\n    5122: __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Int16Array,\n    5123: __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint16Array,\n    5125: __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint32Array,\n    5126: __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Float32Array\n};\nvar SIZE_MAP = {\n    SCALAR: 1,\n    VEC2: 2,\n    VEC3: 3,\n    VEC4: 4,\n    MAT2: 4,\n    MAT3: 9,\n    MAT4: 16\n};\n\nfunction getAccessorData(json, lib, accessorIdx, isIndices) {\n    var accessorInfo = json.accessors[accessorIdx];\n\n    var buffer = lib.bufferViews[accessorInfo.bufferView];\n    var byteOffset = accessorInfo.byteOffset || 0;\n    var ArrayCtor = ARRAY_CTOR_MAP[accessorInfo.componentType] || __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Float32Array;\n\n    var size = SIZE_MAP[accessorInfo.type];\n    if (size == null && isIndices) {\n        size = 1;\n    }\n    var arr = new ArrayCtor(buffer, byteOffset, size * accessorInfo.count);\n\n    var quantizeExtension = accessorInfo.extensions && accessorInfo.extensions['WEB3D_quantized_attributes'];\n    if (quantizeExtension) {\n        var decodedArr = new __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Float32Array(size * accessorInfo.count);\n        var decodeMatrix = quantizeExtension.decodeMatrix;\n        var decodeOffset;\n        var decodeScale;\n        var decodeOffset = new Array(size);\n        var decodeScale = new Array(size);\n        for (var k = 0; k < size; k++) {\n            decodeOffset[k] = decodeMatrix[size * (size + 1) + k];\n            decodeScale[k] = decodeMatrix[k * (size + 1) + k];\n        }\n        for (var i = 0; i < accessorInfo.count; i++) {\n            for (var k = 0; k < size; k++) {\n                decodedArr[i * size + k] = arr[i * size + k] * decodeScale[k] + decodeOffset[k];\n            }\n        }\n\n        arr = decodedArr;\n    }\n    return arr;\n}\n\nfunction base64ToBinary(input, charStart) {\n    var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n    var lookup = new Uint8Array(130);\n    for (var i = 0; i < chars.length; i++) {\n        lookup[chars.charCodeAt(i)] = i;\n    }\n    // Ignore\n    var len = input.length - charStart;\n    if (input.charAt(len - 1) === '=') { len--; }\n    if (input.charAt(len - 1) === '=') { len--; }\n\n    var uarray = new Uint8Array((len / 4) * 3);\n\n    for (var i = 0, j = charStart; i < uarray.length;) {\n        var c1 = lookup[input.charCodeAt(j++)];\n        var c2 = lookup[input.charCodeAt(j++)];\n        var c3 = lookup[input.charCodeAt(j++)];\n        var c4 = lookup[input.charCodeAt(j++)];\n\n        uarray[i++] = (c1 << 2) | (c2 >> 4);\n        uarray[i++] = ((c2 & 15) << 4) | (c3 >> 2);\n        uarray[i++] = ((c3 & 3) << 6) | c4;\n    }\n\n    return uarray.buffer;\n}\n\n\n/**\n * @typedef {Object} clay.loader.GLTF.Result\n * @property {Object} json\n * @property {clay.Scene} scene\n * @property {clay.Node} rootNode\n * @property {clay.Camera[]} cameras\n * @property {clay.Texture[]} textures\n * @property {clay.Material[]} materials\n * @property {clay.Skeleton[]} skeletons\n * @property {clay.Mesh[]} meshes\n * @property {clay.animation.TrackClip[]} clips\n * @property {clay.Node[]} nodes\n */\n\n/**\n * @constructor clay.loader.GLTF\n * @extends clay.core.Base\n */\nvar GLTFLoader = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(/** @lends clay.loader.GLTF# */ {\n    /**\n     *\n     * @type {clay.Node}\n     */\n    rootNode: null,\n    /**\n     * Root path for uri parsing.\n     * @type {string}\n     */\n    rootPath: null,\n\n    /**\n     * Root path for texture uri parsing. Defaultly use the rootPath\n     * @type {string}\n     */\n    textureRootPath: null,\n\n    /**\n     * Root path for buffer uri parsing. Defaultly use the rootPath\n     * @type {string}\n     */\n    bufferRootPath: null,\n\n    /**\n     * Shader used when creating the materials.\n     * @type {string|clay.Shader}\n     * @default 'clay.standard'\n     */\n    shader: 'clay.standard',\n\n    /**\n     * If use {@link clay.StandardMaterial}\n     * @type {string}\n     */\n    useStandardMaterial: false,\n\n    /**\n     * If loading the cameras.\n     * @type {boolean}\n     */\n    includeCamera: true,\n\n    /**\n     * If loading the animations.\n     * @type {boolean}\n     */\n    includeAnimation: true,\n    /**\n     * If loading the meshes\n     * @type {boolean}\n     */\n    includeMesh: true,\n    /**\n     * If loading the textures.\n     * @type {boolean}\n     */\n    includeTexture: true,\n\n    /**\n     * @type {string}\n     */\n    crossOrigin: '',\n    /**\n     * @type {boolean}\n     * @see https://github.com/KhronosGroup/glTF/issues/674\n     */\n    textureFlipY: false,\n\n    /**\n     * If convert texture to power-of-two\n     * @type {boolean}\n     */\n    textureConvertToPOT: false,\n\n    shaderLibrary: null\n},\nfunction () {\n    if (!this.shaderLibrary) {\n        this.shaderLibrary = __WEBPACK_IMPORTED_MODULE_10__shader_library__[\"a\" /* default */].createLibrary();\n    }\n},\n/** @lends clay.loader.GLTF.prototype */\n{\n    /**\n     * @param {string} url\n     */\n    load: function (url) {\n        var self = this;\n        var isBinary = url.endsWith('.glb');\n\n        if (this.rootPath == null) {\n            this.rootPath = url.slice(0, url.lastIndexOf('/'));\n        }\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].request.get({\n            url: url,\n            onprogress: function (percent, loaded, total) {\n                self.trigger('progress', percent, loaded, total);\n            },\n            onerror: function (e) {\n                self.trigger('error', e);\n            },\n            responseType: isBinary ? 'arraybuffer' : 'text',\n            onload: function (data) {\n                if (isBinary) {\n                    self.parseBinary(data);\n                }\n                else {\n                    if (typeof data === 'string') {\n                        data = JSON.parse(data);\n                    }\n                    self.parse(data);\n                }\n            }\n        });\n    },\n\n    /**\n     * Parse glTF binary\n     * @param {ArrayBuffer} buffer\n     * @return {clay.loader.GLTF.Result}\n     */\n    parseBinary: function (buffer) {\n        var header = new Uint32Array(buffer, 0, 4);\n        if (header[0] !== 0x46546C67) {\n            this.trigger('error', 'Invalid glTF binary format: Invalid header');\n            return;\n        }\n        if (header[0] < 2) {\n            this.trigger('error', 'Only glTF2.0 is supported.');\n            return;\n        }\n\n        var dataView = new DataView(buffer, 12);\n\n        var json;\n        var buffers = [];\n        // Read chunks\n        for (var i = 0; i < dataView.byteLength;) {\n            var chunkLength = dataView.getUint32(i, true);\n            i += 4;\n            var chunkType = dataView.getUint32(i, true);\n            i += 4;\n\n            // json\n            if (chunkType === 0x4E4F534A) {\n                var arr = new Uint8Array(buffer, i + 12, chunkLength);\n                // TODO, for the browser not support TextDecoder.\n                var decoder = new TextDecoder();\n                var str = decoder.decode(arr);\n                try {\n                    json = JSON.parse(str);\n                }\n                catch (e) {\n                    this.trigger('error', 'JSON Parse error:' + e.toString());\n                    return;\n                }\n            }\n            else if (chunkType === 0x004E4942) {\n                buffers.push(buffer.slice(i + 12, i + 12 + chunkLength));\n            }\n\n            i += chunkLength;\n        }\n        if (!json) {\n            this.trigger('error', 'Invalid glTF binary format: Can\\'t find JSON.');\n            return;\n        }\n\n        return this.parse(json, buffers);\n    },\n\n    /**\n     * @param {Object} json\n     * @param {ArrayBuffer[]} [buffer]\n     * @return {clay.loader.GLTF.Result}\n     */\n    parse: function (json, buffers) {\n        var self = this;\n\n        var lib = {\n            json: json,\n            buffers: [],\n            bufferViews: [],\n            materials: [],\n            textures: [],\n            meshes: [],\n            joints: [],\n            skeletons: [],\n            cameras: [],\n            nodes: [],\n            clips: []\n        };\n        // Mount on the root node if given\n        var rootNode = this.rootNode || new __WEBPACK_IMPORTED_MODULE_3__Scene__[\"a\" /* default */]();\n\n        var loading = 0;\n        function checkLoad() {\n            loading--;\n            if (loading === 0) {\n                afterLoadBuffer();\n            }\n        }\n        // If already load buffers\n        if (buffers) {\n            lib.buffers = buffers.slice();\n            afterLoadBuffer(true);\n        }\n        else {\n            // Load buffers\n            __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.buffers, function (bufferInfo, idx) {\n                loading++;\n                var path = bufferInfo.uri;\n\n                self._loadBuffers(path, function (buffer) {\n                    lib.buffers[idx] = buffer;\n                    checkLoad();\n                }, checkLoad);\n            });\n        }\n\n        function getResult() {\n            return {\n                json: json,\n                scene: self.rootNode ? null : rootNode,\n                rootNode: self.rootNode ? rootNode : null,\n                cameras: lib.cameras,\n                textures: lib.textures,\n                materials: lib.materials,\n                skeletons: lib.skeletons,\n                meshes: lib.instancedMeshes,\n                clips: lib.clips,\n                nodes: lib.nodes\n            };\n        }\n\n        function afterLoadBuffer(immediately) {\n            // Buffer not load complete.\n            if (lib.buffers.length !== json.buffers.length) {\n                setTimeout(function () {\n                    self.trigger('error', 'Buffer not load complete.');\n                });\n                return;\n            }\n\n            json.bufferViews.forEach(function (bufferViewInfo, idx) {\n                // PENDING Performance\n                lib.bufferViews[idx] = lib.buffers[bufferViewInfo.buffer]\n                    .slice(bufferViewInfo.byteOffset || 0, (bufferViewInfo.byteOffset || 0) + (bufferViewInfo.byteLength || 0));\n            });\n            lib.buffers = null;\n            if (self.includeMesh) {\n                if (self.includeTexture) {\n                    self._parseTextures(json, lib);\n                }\n                self._parseMaterials(json, lib);\n                self._parseMeshes(json, lib);\n            }\n            self._parseNodes(json, lib);\n\n            // Only support one scene.\n            if (json.scenes) {\n                var sceneInfo = json.scenes[json.scene || 0]; // Default use the first scene.\n                if (sceneInfo) {\n                    for (var i = 0; i < sceneInfo.nodes.length; i++) {\n                        var node = lib.nodes[sceneInfo.nodes[i]];\n                        node.update();\n                        rootNode.add(node);\n                    }\n                }\n            }\n\n            if (self.includeMesh) {\n                self._parseSkins(json, lib);\n            }\n\n            if (self.includeAnimation) {\n                self._parseAnimations(json, lib);\n            }\n            if (immediately) {\n                setTimeout(function () {\n                    self.trigger('success', getResult());\n                });\n            }\n            else {\n                self.trigger('success', getResult());\n            }\n        }\n\n        return getResult();\n    },\n\n    /**\n     * Binary file path resolver. User can override it\n     * @param {string} path\n     */\n    resolveBufferPath: function (path) {\n        if (path && path.match(/^data:(.*?)base64,/)) {\n            return path;\n        }\n\n        var rootPath = this.bufferRootPath;\n        if (rootPath == null) {\n            rootPath = this.rootPath;\n        }\n        return __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].relative2absolute(path, rootPath);\n    },\n\n    /**\n     * Texture file path resolver. User can override it\n     * @param {string} path\n     */\n    resolveTexturePath: function (path) {\n        if (path && path.match(/^data:(.*?)base64,/)) {\n            return path;\n        }\n\n        var rootPath = this.textureRootPath;\n        if (rootPath == null) {\n            rootPath = this.rootPath;\n        }\n        return __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].relative2absolute(path, rootPath);\n    },\n\n    /**\n     * Buffer loader\n     * @param {string}\n     * @param {Function} onsuccess\n     * @param {Function} onerror\n     */\n    loadBuffer: function (path, onsuccess, onerror) {\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].request.get({\n            url: path,\n            responseType: 'arraybuffer',\n            onload: function (buffer) {\n                onsuccess && onsuccess(buffer);\n            },\n            onerror: function (buffer) {\n                onerror && onerror(buffer);\n            }\n        });\n    },\n\n    _getShader: function () {\n        if (typeof this.shader === 'string') {\n            return this.shaderLibrary.get(this.shader);\n        }\n        else if (this.shader instanceof __WEBPACK_IMPORTED_MODULE_21__Shader__[\"a\" /* default */]) {\n            return this.shader;\n        }\n    },\n\n    _loadBuffers: function (path, onsuccess, onerror) {\n        var base64Prefix = 'data:application/octet-stream;base64,';\n        var strStart = path.substr(0, base64Prefix.length);\n        if (strStart === base64Prefix) {\n            onsuccess(\n                base64ToBinary(path, base64Prefix.length)\n            );\n        }\n        else {\n            this.loadBuffer(\n                this.resolveBufferPath(path),\n                onsuccess,\n                onerror\n            );\n        }\n    },\n\n    // https://github.com/KhronosGroup/glTF/issues/100\n    // https://github.com/KhronosGroup/glTF/issues/193\n    _parseSkins: function (json, lib) {\n\n        // Create skeletons and joints\n        var haveInvBindMatrices = false;\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.skins, function (skinInfo, idx) {\n            var skeleton = new __WEBPACK_IMPORTED_MODULE_11__Skeleton__[\"a\" /* default */]({\n                name: skinInfo.name\n            });\n            for (var i = 0; i < skinInfo.joints.length; i++) {\n                var nodeIdx = skinInfo.joints[i];\n                var node = lib.nodes[nodeIdx];\n                var joint = new __WEBPACK_IMPORTED_MODULE_12__Joint__[\"a\" /* default */]({\n                    name: node.name,\n                    node: node,\n                    index: skeleton.joints.length\n                });\n                skeleton.joints.push(joint);\n            }\n            skeleton.relativeRootNode = lib.nodes[skinInfo.skeleton] || this.rootNode;\n            if (skinInfo.inverseBindMatrices) {\n                haveInvBindMatrices = true;\n                var IBMInfo = json.accessors[skinInfo.inverseBindMatrices];\n                var buffer = lib.bufferViews[IBMInfo.bufferView];\n\n                var offset = IBMInfo.byteOffset || 0;\n                var size = IBMInfo.count * 16;\n\n                var array = new __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Float32Array(buffer, offset, size);\n\n                skeleton.setJointMatricesArray(array);\n            }\n            else {\n                skeleton.updateJointMatrices();\n            }\n            lib.skeletons[idx] = skeleton;\n        }, this);\n\n        function enableSkinningForMesh(mesh, skeleton, jointIndices) {\n            mesh.skeleton = skeleton;\n            mesh.joints = jointIndices;\n\n            if (!skeleton.boundingBox) {\n                skeleton.updateJointsBoundingBoxes(mesh.geometry);\n            }\n        }\n\n        function getJointIndex(joint) {\n            return joint.index;\n        }\n\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.nodes, function (nodeInfo, nodeIdx) {\n            if (nodeInfo.skin != null) {\n                var skinIdx = nodeInfo.skin;\n                var skeleton = lib.skeletons[skinIdx];\n\n                var node = lib.nodes[nodeIdx];\n                var jointIndices = skeleton.joints.map(getJointIndex);\n                if (node instanceof __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */]) {\n                    enableSkinningForMesh(node, skeleton, jointIndices);\n                }\n                else {\n                    // Mesh have multiple primitives\n                    var children = node.children();\n                    for (var i = 0; i < children.length; i++) {\n                        enableSkinningForMesh(children[i], skeleton, jointIndices);\n                    }\n                }\n            }\n        }, this);\n    },\n\n    _parseTextures: function (json, lib) {\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.textures, function (textureInfo, idx){\n            // samplers is optional\n            var samplerInfo = (json.samplers && json.samplers[textureInfo.sampler]) || {};\n            var parameters = {};\n            ['wrapS', 'wrapT', 'magFilter', 'minFilter'].forEach(function (name) {\n                var value = samplerInfo[name];\n                if (value != null) {\n                    parameters[name] = value;\n                }\n            });\n            __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].defaults(parameters, {\n                wrapS: __WEBPACK_IMPORTED_MODULE_8__Texture__[\"a\" /* default */].REPEAT,\n                wrapT: __WEBPACK_IMPORTED_MODULE_8__Texture__[\"a\" /* default */].REPEAT,\n                flipY: this.textureFlipY,\n                convertToPOT: this.textureConvertToPOT\n            });\n\n            var target = textureInfo.target || __WEBPACK_IMPORTED_MODULE_15__core_glenum__[\"a\" /* default */].TEXTURE_2D;\n            var format = textureInfo.format;\n            if (format != null) {\n                parameters.format = format;\n            }\n\n            if (target === __WEBPACK_IMPORTED_MODULE_15__core_glenum__[\"a\" /* default */].TEXTURE_2D) {\n                var texture = new __WEBPACK_IMPORTED_MODULE_9__Texture2D__[\"a\" /* default */](parameters);\n                var imageInfo = json.images[textureInfo.source];\n                var uri;\n                if (imageInfo.uri) {\n                    uri = this.resolveTexturePath(imageInfo.uri);\n                }\n                else if (imageInfo.bufferView != null) {\n                    uri = URL.createObjectURL(new Blob([lib.bufferViews[imageInfo.bufferView]], {\n                        type: imageInfo.mimeType\n                    }));\n                }\n                if (uri) {\n                    texture.load(uri, this.crossOrigin);\n                    lib.textures[idx] = texture;\n                }\n            }\n        }, this);\n    },\n\n    _KHRCommonMaterialToStandard: function (materialInfo, lib) {\n        var uniforms = {};\n        var commonMaterialInfo = materialInfo.extensions['KHR_materials_common'];\n        uniforms = commonMaterialInfo.values || {};\n\n        if (typeof uniforms.diffuse === 'number') {\n            uniforms.diffuse = lib.textures[uniforms.diffuse] || null;\n        }\n        if (typeof uniforms.emission === 'number') {\n            uniforms.emission = lib.textures[uniforms.emission] || null;\n        }\n\n        var enabledTextures = [];\n        if (uniforms['diffuse'] instanceof __WEBPACK_IMPORTED_MODULE_9__Texture2D__[\"a\" /* default */]) {\n            enabledTextures.push('diffuseMap');\n        }\n        if (materialInfo.normalTexture) {\n            enabledTextures.push('normalMap');\n        }\n        if (uniforms['emission'] instanceof __WEBPACK_IMPORTED_MODULE_9__Texture2D__[\"a\" /* default */]) {\n            enabledTextures.push('emissiveMap');\n        }\n        var material;\n        var isStandardMaterial = this.useStandardMaterial;\n        if (isStandardMaterial) {\n            material = new __WEBPACK_IMPORTED_MODULE_5__StandardMaterial__[\"a\" /* default */]({\n                name: materialInfo.name,\n                doubleSided: materialInfo.doubleSided\n            });\n        }\n        else {\n            material = new __WEBPACK_IMPORTED_MODULE_4__Material__[\"a\" /* default */]({\n                name: materialInfo.name,\n                shader: this._getShader()\n            });\n\n            material.define('fragment', 'USE_ROUGHNESS');\n            material.define('fragment', 'USE_METALNESS');\n\n            if (materialInfo.doubleSided) {\n                material.define('fragment', 'DOUBLE_SIDED');\n            }\n        }\n\n        if (uniforms.transparent) {\n            material.depthMask = false;\n            material.depthTest = true;\n            material.transparent = true;\n        }\n\n        var diffuseProp = uniforms['diffuse'];\n        if (diffuseProp) {\n            // Color\n            if (Array.isArray(diffuseProp)) {\n                diffuseProp = diffuseProp.slice(0, 3);\n                isStandardMaterial ? (material.color = diffuseProp)\n                    : material.set('color', diffuseProp);\n            }\n            else { // Texture\n                isStandardMaterial ? (material.diffuseMap = diffuseProp)\n                    : material.set('diffuseMap', diffuseProp);\n            }\n        }\n        var emissionProp = uniforms['emission'];\n        if (emissionProp != null) {\n            // Color\n            if (Array.isArray(emissionProp)) {\n                emissionProp = emissionProp.slice(0, 3);\n                isStandardMaterial ? (material.emission = emissionProp)\n                    : material.set('emission', emissionProp);\n            }\n            else { // Texture\n                isStandardMaterial ? (material.emissiveMap = emissionProp)\n                    : material.set('emissiveMap', emissionProp);\n            }\n        }\n        if (materialInfo.normalTexture != null) {\n            // TODO texCoord\n            var normalTextureIndex = materialInfo.normalTexture.index;\n            if (isStandardMaterial) {\n                material.normalMap = lib.textures[normalTextureIndex] || null;\n            }\n            else {\n                material.set('normalMap', lib.textures[normalTextureIndex] || null);\n            }\n        }\n        if (uniforms['shininess'] != null) {\n            var glossiness = Math.log(uniforms['shininess']) / Math.log(8192);\n            // Uniform glossiness\n            material.set('glossiness', glossiness);\n            material.set('roughness', 1 - glossiness);\n        }\n        else {\n            material.set('glossiness', 0.3);\n            material.set('roughness', 0.3);\n        }\n        if (uniforms['specular'] != null) {\n            material.set('specularColor', uniforms['specular'].slice(0, 3));\n        }\n        if (uniforms['transparency'] != null) {\n            material.set('alpha', uniforms['transparency']);\n        }\n\n        return material;\n    },\n\n    _pbrMetallicRoughnessToStandard: function (materialInfo, metallicRoughnessMatInfo, lib) {\n        var alphaTest = materialInfo.alphaMode === 'MASK';\n\n        var isStandardMaterial = this.useStandardMaterial;\n        var material;\n        var diffuseMap, roughnessMap, metalnessMap, normalMap, emissiveMap, occlusionMap;\n        var enabledTextures = [];\n\n        /**\n         * The scalar multiplier applied to each normal vector of the normal texture.\n         *\n         * @type {number}\n         *\n         * XXX This value is ignored if `materialInfo.normalTexture` is not specified.\n         */\n        var normalScale = 1.0;\n\n        // TODO texCoord\n        if (metallicRoughnessMatInfo.baseColorTexture) {\n            diffuseMap = lib.textures[metallicRoughnessMatInfo.baseColorTexture.index] || null;\n            diffuseMap && enabledTextures.push('diffuseMap');\n        }\n        if (metallicRoughnessMatInfo.metallicRoughnessTexture) {\n            roughnessMap = metalnessMap = lib.textures[metallicRoughnessMatInfo.metallicRoughnessTexture.index] || null;\n            roughnessMap && enabledTextures.push('metalnessMap', 'roughnessMap');\n        }\n        if (materialInfo.normalTexture) {\n\n            normalMap = lib.textures[materialInfo.normalTexture.index] || null;\n            normalMap && enabledTextures.push('normalMap');\n\n            if (typeof materialInfo.normalTexture.scale === 'number') {\n                normalScale = materialInfo.normalTexture.scale;\n            }\n\n        }\n        if (materialInfo.emissiveTexture) {\n            emissiveMap = lib.textures[materialInfo.emissiveTexture.index] || null;\n            emissiveMap && enabledTextures.push('emissiveMap');\n        }\n        if (materialInfo.occlusionTexture) {\n            occlusionMap = lib.textures[materialInfo.occlusionTexture.index] || null;\n            occlusionMap && enabledTextures.push('occlusionMap');\n        }\n        var baseColor = metallicRoughnessMatInfo.baseColorFactor || [1, 1, 1, 1];\n\n        var commonProperties = {\n            diffuseMap: diffuseMap || null,\n            roughnessMap: roughnessMap || null,\n            metalnessMap: metalnessMap || null,\n            normalMap: normalMap || null,\n            occlusionMap: occlusionMap || null,\n            emissiveMap: emissiveMap || null,\n            color: baseColor.slice(0, 3),\n            alpha: baseColor[3],\n            metalness: metallicRoughnessMatInfo.metallicFactor || 0,\n            roughness: metallicRoughnessMatInfo.roughnessFactor || 0,\n            emission: materialInfo.emissiveFactor || [0, 0, 0],\n            emissionIntensity: 1,\n            alphaCutoff: materialInfo.alphaCutoff || 0,\n            normalScale: normalScale\n        };\n        if (commonProperties.roughnessMap) {\n            // In glTF metallicFactor will do multiply, which is different from StandardMaterial.\n            // So simply ignore it\n            commonProperties.metalness = 0.5;\n            commonProperties.roughness = 0.5;\n        }\n        if (isStandardMaterial) {\n            material = new __WEBPACK_IMPORTED_MODULE_5__StandardMaterial__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].extend({\n                name: materialInfo.name,\n                alphaTest: alphaTest,\n                doubleSided: materialInfo.doubleSided,\n                // G channel\n                roughnessChannel: 1,\n                // B Channel\n                metalnessChannel: 2\n            }, commonProperties));\n        }\n        else {\n\n            material = new __WEBPACK_IMPORTED_MODULE_4__Material__[\"a\" /* default */]({\n                name: materialInfo.name,\n                shader: this._getShader()\n            });\n\n            material.define('fragment', 'USE_ROUGHNESS');\n            material.define('fragment', 'USE_METALNESS');\n            material.define('fragment', 'ROUGHNESS_CHANNEL', 1);\n            material.define('fragment', 'METALNESS_CHANNEL', 2);\n\n            material.define('fragment', 'DIFFUSEMAP_ALPHA_ALPHA');\n\n            if (alphaTest) {\n                material.define('fragment', 'ALPHA_TEST');\n            }\n            if (materialInfo.doubleSided) {\n                material.define('fragment', 'DOUBLE_SIDED');\n            }\n\n            material.set(commonProperties);\n        }\n\n        if (materialInfo.alphaMode === 'BLEND') {\n            material.depthMask = false;\n            material.depthTest = true;\n            material.transparent = true;\n        }\n\n        return material;\n    },\n\n    _pbrSpecularGlossinessToStandard: function (materialInfo, specularGlossinessMatInfo, lib) {\n        var alphaTest = materialInfo.alphaMode === 'MASK';\n\n        if (this.useStandardMaterial) {\n            console.error('StandardMaterial doesn\\'t support specular glossiness workflow yet');\n        }\n\n        var material;\n        var diffuseMap, glossinessMap, specularMap, normalMap, emissiveMap, occlusionMap;\n        var enabledTextures = [];\n        // TODO texCoord\n        if (specularGlossinessMatInfo.diffuseTexture) {\n            diffuseMap = lib.textures[specularGlossinessMatInfo.diffuseTexture.index] || null;\n            diffuseMap && enabledTextures.push('diffuseMap');\n        }\n        if (specularGlossinessMatInfo.specularGlossinessTexture) {\n            glossinessMap = specularMap = lib.textures[specularGlossinessMatInfo.specularGlossinessTexture.index] || null;\n            glossinessMap && enabledTextures.push('specularMap', 'glossinessMap');\n        }\n        if (materialInfo.normalTexture) {\n            normalMap = lib.textures[materialInfo.normalTexture.index] || null;\n            normalMap && enabledTextures.push('normalMap');\n        }\n        if (materialInfo.emissiveTexture) {\n            emissiveMap = lib.textures[materialInfo.emissiveTexture.index] || null;\n            emissiveMap && enabledTextures.push('emissiveMap');\n        }\n        if (materialInfo.occlusionTexture) {\n            occlusionMap = lib.textures[materialInfo.occlusionTexture.index] || null;\n            occlusionMap && enabledTextures.push('occlusionMap');\n        }\n        var diffuseColor = specularGlossinessMatInfo.diffuseFactor || [1, 1, 1, 1];\n\n        var commonProperties = {\n            diffuseMap: diffuseMap || null,\n            glossinessMap: glossinessMap || null,\n            specularMap: specularMap || null,\n            normalMap: normalMap || null,\n            emissiveMap: emissiveMap || null,\n            occlusionMap: occlusionMap || null,\n            color: diffuseColor.slice(0, 3),\n            alpha: diffuseColor[3],\n            specularColor: specularGlossinessMatInfo.specularFactor || [1, 1, 1],\n            glossiness: specularGlossinessMatInfo.glossinessFactor || 0,\n            emission: materialInfo.emissiveFactor || [0, 0, 0],\n            emissionIntensity: 1,\n            alphaCutoff: materialInfo.alphaCutoff == null ? 0.9 : materialInfo.alphaCutoff\n        };\n        if (commonProperties.glossinessMap) {\n            // Ignore specularFactor\n            commonProperties.glossiness = 0.5;\n        }\n        if (commonProperties.specularMap) {\n            // Ignore specularFactor\n            commonProperties.specularColor = [1, 1, 1];\n        }\n\n        material = new __WEBPACK_IMPORTED_MODULE_4__Material__[\"a\" /* default */]({\n            name: materialInfo.name,\n            shader: this._getShader()\n        });\n\n        material.define('fragment', 'GLOSSINESS_CHANNEL', 3);\n        material.define('fragment', 'DIFFUSEMAP_ALPHA_ALPHA');\n\n        if (alphaTest) {\n            material.define('fragment', 'ALPHA_TEST');\n        }\n        if (materialInfo.doubleSided) {\n            material.define('fragment', 'DOUBLE_SIDED');\n        }\n\n        material.set(commonProperties);\n\n        if (materialInfo.alphaMode === 'BLEND') {\n            material.depthMask = false;\n            material.depthTest = true;\n            material.transparent = true;\n        }\n\n        return material;\n    },\n\n    _parseMaterials: function (json, lib) {\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.materials, function (materialInfo, idx) {\n            if (materialInfo.extensions && materialInfo.extensions['KHR_materials_common']) {\n                lib.materials[idx] = this._KHRCommonMaterialToStandard(materialInfo, lib);\n            }\n            else if (materialInfo.extensions && materialInfo.extensions['KHR_materials_pbrSpecularGlossiness']) {\n                lib.materials[idx] = this._pbrSpecularGlossinessToStandard(materialInfo, materialInfo.extensions['KHR_materials_pbrSpecularGlossiness'], lib);\n            }\n            else {\n                lib.materials[idx] = this._pbrMetallicRoughnessToStandard(materialInfo, materialInfo.pbrMetallicRoughness || {}, lib);\n            }\n        }, this);\n    },\n\n    _parseMeshes: function (json, lib) {\n        var self = this;\n\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.meshes, function (meshInfo, idx) {\n            lib.meshes[idx] = [];\n            // Geometry\n            for (var pp = 0; pp < meshInfo.primitives.length; pp++) {\n                var primitiveInfo = meshInfo.primitives[pp];\n                var geometry = new __WEBPACK_IMPORTED_MODULE_19__Geometry__[\"a\" /* default */]({\n                    dynamic: false,\n                    // PENDIGN\n                    name: meshInfo.name,\n                    boundingBox: new __WEBPACK_IMPORTED_MODULE_16__math_BoundingBox__[\"a\" /* default */]()\n                });\n                // Parse attributes\n                var semantics = Object.keys(primitiveInfo.attributes);\n                for (var ss = 0; ss < semantics.length; ss++) {\n                    var semantic = semantics[ss];\n                    var accessorIdx = primitiveInfo.attributes[semantic];\n                    var attributeInfo = json.accessors[accessorIdx];\n                    var attributeName = semanticAttributeMap[semantic];\n                    if (!attributeName) {\n                        continue;\n                    }\n                    var size = SIZE_MAP[attributeInfo.type];\n                    var attributeArray = getAccessorData(json, lib, accessorIdx);\n                    // WebGL attribute buffer not support uint32.\n                    // Direct use Float32Array may also have issue.\n                    if (attributeArray instanceof __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint32Array) {\n                        attributeArray = new Float32Array(attributeArray);\n                    }\n                    if (semantic === 'WEIGHTS_0' && size === 4) {\n                        // Weight data in QTEK has only 3 component, the last component can be evaluated since it is normalized\n                        var weightArray = new attributeArray.constructor(attributeInfo.count * 3);\n                        for (var i = 0; i < attributeInfo.count; i++) {\n                            var i4 = i * 4, i3 = i * 3;\n                            var w1 = attributeArray[i4], w2 = attributeArray[i4 + 1], w3 = attributeArray[i4 + 2], w4 = attributeArray[i4 + 3];\n                            var wSum = w1 + w2 + w3 + w4;\n                            weightArray[i3] = w1 / wSum;\n                            weightArray[i3 + 1] = w2 / wSum;\n                            weightArray[i3 + 2] = w3 / wSum;\n                        }\n                        geometry.attributes[attributeName].value = weightArray;\n                    }\n                    else if (semantic === 'COLOR_0' && size === 3) {\n                        var colorArray = new attributeArray.constructor(attributeInfo.count * 4);\n                        for (var i = 0; i < attributeInfo.count; i++) {\n                            var i4 = i * 4, i3 = i * 3;\n                            colorArray[i4] = attributeArray[i3];\n                            colorArray[i4 + 1] = attributeArray[i3 + 1];\n                            colorArray[i4 + 2] = attributeArray[i3 + 2];\n                            colorArray[i4 + 3] = 1;\n                        }\n                        geometry.attributes[attributeName].value = colorArray;\n                    }\n                    else {\n                        geometry.attributes[attributeName].value = attributeArray;\n                    }\n\n                    var attributeType = 'float';\n                    if (attributeArray instanceof __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint16Array) {\n                        attributeType = 'ushort';\n                    }\n                    else if (attributeArray instanceof __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Int16Array) {\n                        attributeType = 'short';\n                    }\n                    else if (attributeArray instanceof __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint8Array) {\n                        attributeType = 'ubyte';\n                    }\n                    else if (attributeArray instanceof __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Int8Array) {\n                        attributeType = 'byte';\n                    }\n                    geometry.attributes[attributeName].type = attributeType;\n\n                    if (semantic === 'POSITION') {\n                        // Bounding Box\n                        var min = attributeInfo.min;\n                        var max = attributeInfo.max;\n                        if (min) {\n                            geometry.boundingBox.min.set(min[0], min[1], min[2]);\n                        }\n                        if (max) {\n                            geometry.boundingBox.max.set(max[0], max[1], max[2]);\n                        }\n                    }\n                }\n\n                // Parse indices\n                if (primitiveInfo.indices != null) {\n                    geometry.indices = getAccessorData(json, lib, primitiveInfo.indices, true);\n                    if (geometry.vertexCount <= 0xffff && geometry.indices instanceof __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint32Array) {\n                        geometry.indices = new __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint16Array(geometry.indices);\n                    }\n                    if(geometry.indices instanceof __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint8Array) {\n                        geometry.indices = new __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint16Array(geometry.indices);\n                    }\n                }\n\n                var material = lib.materials[primitiveInfo.material];\n                var materialInfo = (json.materials || [])[primitiveInfo.material];\n                // Use default material\n                if (!material) {\n                    material = new __WEBPACK_IMPORTED_MODULE_4__Material__[\"a\" /* default */]({\n                        shader: self._getShader()\n                    });\n                }\n                var mesh = new __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */]({\n                    geometry: geometry,\n                    material: material,\n                    mode: [__WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].POINTS, __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].LINES, __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].LINE_LOOP, __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].LINE_STRIP, __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].TRIANGLES, __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].TRIANGLE_STRIP, __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].TRIANGLE_FAN][primitiveInfo.mode] || __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].TRIANGLES,\n                    ignoreGBuffer: material.transparent\n                });\n                if (materialInfo != null) {\n                    mesh.culling = !materialInfo.doubleSided;\n                }\n                if (!mesh.geometry.attributes.normal.value) {\n                    mesh.geometry.generateVertexNormals();\n                }\n                if (((material instanceof __WEBPACK_IMPORTED_MODULE_5__StandardMaterial__[\"a\" /* default */]) && material.normalMap)\n                    || (material.isTextureEnabled('normalMap'))\n                ) {\n                    if (!mesh.geometry.attributes.tangent.value) {\n                        mesh.geometry.generateTangents();\n                    }\n                }\n                if (mesh.geometry.attributes.color.value) {\n                    mesh.material.define('VERTEX_COLOR');\n                }\n\n                mesh.name = GLTFLoader.generateMeshName(json.meshes, idx, pp);\n\n                lib.meshes[idx].push(mesh);\n            }\n        }, this);\n    },\n\n    _instanceCamera: function (json, nodeInfo) {\n        var cameraInfo = json.cameras[nodeInfo.camera];\n\n        if (cameraInfo.type === 'perspective') {\n            var perspectiveInfo = cameraInfo.perspective || {};\n            return new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */]({\n                name: nodeInfo.name,\n                aspect: perspectiveInfo.aspectRatio,\n                fov: perspectiveInfo.yfov / Math.PI * 180,\n                far: perspectiveInfo.zfar,\n                near: perspectiveInfo.znear\n            });\n        }\n        else {\n            var orthographicInfo = cameraInfo.orthographic || {};\n            return new __WEBPACK_IMPORTED_MODULE_14__camera_Orthographic__[\"a\" /* default */]({\n                name: nodeInfo.name,\n                top: orthographicInfo.ymag,\n                right: orthographicInfo.xmag,\n                left: -orthographicInfo.xmag,\n                bottom: -orthographicInfo.ymag,\n                near: orthographicInfo.znear,\n                far: orthographicInfo.zfar\n            });\n        }\n    },\n\n    _parseNodes: function (json, lib) {\n\n        function instanceMesh(mesh) {\n            return new __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */]({\n                name: mesh.name,\n                geometry: mesh.geometry,\n                material: mesh.material,\n                culling: mesh.culling,\n                mode: mesh.mode\n            });\n        }\n\n        lib.instancedMeshes = [];\n\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.nodes, function (nodeInfo, idx) {\n            var node;\n            if (nodeInfo.camera != null && this.includeCamera) {\n                node = this._instanceCamera(json, nodeInfo);\n                lib.cameras.push(node);\n            }\n            else if (nodeInfo.mesh != null && this.includeMesh) {\n                var primitives = lib.meshes[nodeInfo.mesh];\n                if (primitives) {\n                    if (primitives.length === 1) {\n                        // Replace the node with mesh directly\n                        node = instanceMesh(primitives[0]);\n                        node.setName(nodeInfo.name);\n                        lib.instancedMeshes.push(node);\n                    }\n                    else {\n                        node = new __WEBPACK_IMPORTED_MODULE_7__Node__[\"a\" /* default */]();\n                        node.setName(nodeInfo.name);\n                        for (var j = 0; j < primitives.length; j++) {\n                            var newMesh = instanceMesh(primitives[j]);\n                            node.add(newMesh);\n                            lib.instancedMeshes.push(newMesh);\n                        }\n                    }\n                }\n            }\n            else {\n                node = new __WEBPACK_IMPORTED_MODULE_7__Node__[\"a\" /* default */]();\n                // PENDING Dulplicate name.\n                node.setName(nodeInfo.name);\n            }\n            if (nodeInfo.matrix) {\n                node.localTransform.setArray(nodeInfo.matrix);\n                node.decomposeLocalTransform();\n            }\n            else {\n                if (nodeInfo.translation) {\n                    node.position.setArray(nodeInfo.translation);\n                }\n                if (nodeInfo.rotation) {\n                    node.rotation.setArray(nodeInfo.rotation);\n                }\n                if (nodeInfo.scale) {\n                    node.scale.setArray(nodeInfo.scale);\n                }\n            }\n\n            lib.nodes[idx] = node;\n        }, this);\n\n        // Build hierarchy\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.nodes, function (nodeInfo, idx) {\n            var node = lib.nodes[idx];\n            if (nodeInfo.children) {\n                for (var i = 0; i < nodeInfo.children.length; i++) {\n                    var childIdx = nodeInfo.children[i];\n                    var child = lib.nodes[childIdx];\n                    node.add(child);\n                }\n            }\n        });\n        },\n\n    _parseAnimations: function (json, lib) {\n        function checkChannelPath(channelInfo) {\n            if (channelInfo.path === 'weights') {\n                console.warn('GLTFLoader not support morph targets yet.');\n                return false;\n            }\n            return true;\n        }\n\n        function getChannelHash(channelInfo, animationInfo) {\n            return channelInfo.target.node + '_' + animationInfo.samplers[channelInfo.sampler].input;\n        }\n\n        var timeAccessorMultiplied = {};\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.animations, function (animationInfo, idx) {\n            var channels = animationInfo.channels.filter(checkChannelPath);\n\n            if (!channels.length) {\n                return;\n            }\n            var tracks = {};\n            for (var i = 0; i < channels.length; i++) {\n                var channelInfo = channels[i];\n                var channelHash = getChannelHash(channelInfo, animationInfo);\n\n                var targetNode = lib.nodes[channelInfo.target.node];\n                var track = tracks[channelHash];\n                var samplerInfo = animationInfo.samplers[channelInfo.sampler];\n\n                if (!track) {\n                    track = tracks[channelHash] = new __WEBPACK_IMPORTED_MODULE_18__animation_SamplerTrack__[\"a\" /* default */]({\n                        name: targetNode ? targetNode.name : '',\n                        target: targetNode\n                    });\n                    track.targetNodeIndex = channelInfo.target.node;\n                    track.channels.time = getAccessorData(json, lib, samplerInfo.input);\n                    var frameLen = track.channels.time.length;\n                    if (!timeAccessorMultiplied[samplerInfo.input]) {\n                        for (var k = 0; k < frameLen; k++) {\n                            track.channels.time[k] *= 1000;\n                        }\n                        timeAccessorMultiplied[samplerInfo.input] = true;\n                    }\n                }\n\n                var interpolation = samplerInfo.interpolation || 'LINEAR';\n                if (interpolation !== 'LINEAR') {\n                    console.warn('GLTFLoader only support LINEAR interpolation.');\n                }\n\n                var path = channelInfo.target.path;\n                if (path === 'translation') {\n                    path = 'position';\n                }\n\n                track.channels[path] = getAccessorData(json, lib, samplerInfo.output);\n            }\n            var tracksList = [];\n            for (var hash in tracks) {\n                tracksList.push(tracks[hash]);\n            }\n            var clip = new __WEBPACK_IMPORTED_MODULE_17__animation_TrackClip__[\"a\" /* default */]({\n                name: animationInfo.name,\n                loop: true,\n                tracks: tracksList\n            });\n            lib.clips.push(clip);\n        }, this);\n\n\n        // PENDING\n        var maxLife = lib.clips.reduce(function (maxTime, clip) {\n            return Math.max(maxTime, clip.life);\n        }, 0);\n        lib.clips.forEach(function (clip) {\n            clip.life = maxLife;\n        });\n\n        return lib.clips;\n    }\n});\n\nGLTFLoader.generateMeshName = function (meshes, idx, primitiveIdx) {\n    var meshInfo = meshes[idx];\n    var meshName = meshInfo.name || ('mesh_' + idx);\n    return primitiveIdx === 0 ? meshName : (meshName + '$' + primitiveIdx);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GLTFLoader);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9sb2FkZXIvR0xURi5qcz8xZjRmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogZ2xURiBMb2FkZXJcbiAqIFNwZWNpZmljYXRpb24gaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2Jsb2IvbWFzdGVyL3NwZWNpZmljYXRpb24vUkVBRE1FLm1kXG4gKlxuICogVE9ETyBNb3JwaCB0YXJnZXRzXG4gKi9cbmltcG9ydCBCYXNlIGZyb20gJy4uL2NvcmUvQmFzZSc7XG5pbXBvcnQgdXRpbCBmcm9tICcuLi9jb3JlL3V0aWwnO1xuaW1wb3J0IHZlbmRvciBmcm9tICcuLi9jb3JlL3ZlbmRvcic7XG5cbmltcG9ydCBTY2VuZSBmcm9tICcuLi9TY2VuZSc7XG5pbXBvcnQgTWF0ZXJpYWwgZnJvbSAnLi4vTWF0ZXJpYWwnO1xuaW1wb3J0IFN0YW5kYXJkTWF0ZXJpYWwgZnJvbSAnLi4vU3RhbmRhcmRNYXRlcmlhbCc7XG5pbXBvcnQgTWVzaCBmcm9tICcuLi9NZXNoJztcbmltcG9ydCBOb2RlIGZyb20gJy4uL05vZGUnO1xuaW1wb3J0IFRleHR1cmUgZnJvbSAnLi4vVGV4dHVyZSc7XG5pbXBvcnQgVGV4dHVyZTJEIGZyb20gJy4uL1RleHR1cmUyRCc7XG5pbXBvcnQgc2hhZGVyTGlicmFyeSBmcm9tICcuLi9zaGFkZXIvbGlicmFyeSc7XG5pbXBvcnQgU2tlbGV0b24gZnJvbSAnLi4vU2tlbGV0b24nO1xuaW1wb3J0IEpvaW50IGZyb20gJy4uL0pvaW50JztcbmltcG9ydCBQZXJzcGVjdGl2ZUNhbWVyYSBmcm9tICcuLi9jYW1lcmEvUGVyc3BlY3RpdmUnO1xuaW1wb3J0IE9ydGhvZ3JhcGhpY0NhbWVyYSBmcm9tICcuLi9jYW1lcmEvT3J0aG9ncmFwaGljJztcbmltcG9ydCBnbGVudW0gZnJvbSAnLi4vY29yZS9nbGVudW0nO1xuXG5pbXBvcnQgQm91bmRpbmdCb3ggZnJvbSAnLi4vbWF0aC9Cb3VuZGluZ0JveCc7XG5cbmltcG9ydCBUcmFja0NsaXAgZnJvbSAnLi4vYW5pbWF0aW9uL1RyYWNrQ2xpcCc7XG5pbXBvcnQgU2FtcGxlclRyYWNrIGZyb20gJy4uL2FuaW1hdGlvbi9TYW1wbGVyVHJhY2snO1xuXG5pbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi4vR2VvbWV0cnknO1xuXG4vLyBJbXBvcnQgYnVpbHRpbiBzaGFkZXJcbmltcG9ydCAnLi4vc2hhZGVyL2J1aWx0aW4nO1xuaW1wb3J0IFNoYWRlciBmcm9tICcuLi9TaGFkZXInO1xuXG52YXIgc2VtYW50aWNBdHRyaWJ1dGVNYXAgPSB7XG4gICAgJ05PUk1BTCc6ICdub3JtYWwnLFxuICAgICdQT1NJVElPTic6ICdwb3NpdGlvbicsXG4gICAgJ1RFWENPT1JEXzAnOiAndGV4Y29vcmQwJyxcbiAgICAnVEVYQ09PUkRfMSc6ICd0ZXhjb29yZDEnLFxuICAgICdXRUlHSFRTXzAnOiAnd2VpZ2h0JyxcbiAgICAnSk9JTlRTXzAnOiAnam9pbnQnLFxuICAgICdDT0xPUl8wJzogJ2NvbG9yJ1xufTtcblxudmFyIEFSUkFZX0NUT1JfTUFQID0ge1xuICAgIDUxMjA6IHZlbmRvci5JbnQ4QXJyYXksXG4gICAgNTEyMTogdmVuZG9yLlVpbnQ4QXJyYXksXG4gICAgNTEyMjogdmVuZG9yLkludDE2QXJyYXksXG4gICAgNTEyMzogdmVuZG9yLlVpbnQxNkFycmF5LFxuICAgIDUxMjU6IHZlbmRvci5VaW50MzJBcnJheSxcbiAgICA1MTI2OiB2ZW5kb3IuRmxvYXQzMkFycmF5XG59O1xudmFyIFNJWkVfTUFQID0ge1xuICAgIFNDQUxBUjogMSxcbiAgICBWRUMyOiAyLFxuICAgIFZFQzM6IDMsXG4gICAgVkVDNDogNCxcbiAgICBNQVQyOiA0LFxuICAgIE1BVDM6IDksXG4gICAgTUFUNDogMTZcbn07XG5cbmZ1bmN0aW9uIGdldEFjY2Vzc29yRGF0YShqc29uLCBsaWIsIGFjY2Vzc29ySWR4LCBpc0luZGljZXMpIHtcbiAgICB2YXIgYWNjZXNzb3JJbmZvID0ganNvbi5hY2Nlc3NvcnNbYWNjZXNzb3JJZHhdO1xuXG4gICAgdmFyIGJ1ZmZlciA9IGxpYi5idWZmZXJWaWV3c1thY2Nlc3NvckluZm8uYnVmZmVyVmlld107XG4gICAgdmFyIGJ5dGVPZmZzZXQgPSBhY2Nlc3NvckluZm8uYnl0ZU9mZnNldCB8fCAwO1xuICAgIHZhciBBcnJheUN0b3IgPSBBUlJBWV9DVE9SX01BUFthY2Nlc3NvckluZm8uY29tcG9uZW50VHlwZV0gfHwgdmVuZG9yLkZsb2F0MzJBcnJheTtcblxuICAgIHZhciBzaXplID0gU0laRV9NQVBbYWNjZXNzb3JJbmZvLnR5cGVdO1xuICAgIGlmIChzaXplID09IG51bGwgJiYgaXNJbmRpY2VzKSB7XG4gICAgICAgIHNpemUgPSAxO1xuICAgIH1cbiAgICB2YXIgYXJyID0gbmV3IEFycmF5Q3RvcihidWZmZXIsIGJ5dGVPZmZzZXQsIHNpemUgKiBhY2Nlc3NvckluZm8uY291bnQpO1xuXG4gICAgdmFyIHF1YW50aXplRXh0ZW5zaW9uID0gYWNjZXNzb3JJbmZvLmV4dGVuc2lvbnMgJiYgYWNjZXNzb3JJbmZvLmV4dGVuc2lvbnNbJ1dFQjNEX3F1YW50aXplZF9hdHRyaWJ1dGVzJ107XG4gICAgaWYgKHF1YW50aXplRXh0ZW5zaW9uKSB7XG4gICAgICAgIHZhciBkZWNvZGVkQXJyID0gbmV3IHZlbmRvci5GbG9hdDMyQXJyYXkoc2l6ZSAqIGFjY2Vzc29ySW5mby5jb3VudCk7XG4gICAgICAgIHZhciBkZWNvZGVNYXRyaXggPSBxdWFudGl6ZUV4dGVuc2lvbi5kZWNvZGVNYXRyaXg7XG4gICAgICAgIHZhciBkZWNvZGVPZmZzZXQ7XG4gICAgICAgIHZhciBkZWNvZGVTY2FsZTtcbiAgICAgICAgdmFyIGRlY29kZU9mZnNldCA9IG5ldyBBcnJheShzaXplKTtcbiAgICAgICAgdmFyIGRlY29kZVNjYWxlID0gbmV3IEFycmF5KHNpemUpO1xuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHNpemU7IGsrKykge1xuICAgICAgICAgICAgZGVjb2RlT2Zmc2V0W2tdID0gZGVjb2RlTWF0cml4W3NpemUgKiAoc2l6ZSArIDEpICsga107XG4gICAgICAgICAgICBkZWNvZGVTY2FsZVtrXSA9IGRlY29kZU1hdHJpeFtrICogKHNpemUgKyAxKSArIGtdO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWNjZXNzb3JJbmZvLmNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc2l6ZTsgaysrKSB7XG4gICAgICAgICAgICAgICAgZGVjb2RlZEFycltpICogc2l6ZSArIGtdID0gYXJyW2kgKiBzaXplICsga10gKiBkZWNvZGVTY2FsZVtrXSArIGRlY29kZU9mZnNldFtrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGFyciA9IGRlY29kZWRBcnI7XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFRvQmluYXJ5KGlucHV0LCBjaGFyU3RhcnQpIHtcbiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7XG4gICAgdmFyIGxvb2t1cCA9IG5ldyBVaW50OEFycmF5KDEzMCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpO1xuICAgIH1cbiAgICAvLyBJZ25vcmVcbiAgICB2YXIgbGVuID0gaW5wdXQubGVuZ3RoIC0gY2hhclN0YXJ0O1xuICAgIGlmIChpbnB1dC5jaGFyQXQobGVuIC0gMSkgPT09ICc9JykgeyBsZW4tLTsgfVxuICAgIGlmIChpbnB1dC5jaGFyQXQobGVuIC0gMSkgPT09ICc9JykgeyBsZW4tLTsgfVxuXG4gICAgdmFyIHVhcnJheSA9IG5ldyBVaW50OEFycmF5KChsZW4gLyA0KSAqIDMpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGogPSBjaGFyU3RhcnQ7IGkgPCB1YXJyYXkubGVuZ3RoOykge1xuICAgICAgICB2YXIgYzEgPSBsb29rdXBbaW5wdXQuY2hhckNvZGVBdChqKyspXTtcbiAgICAgICAgdmFyIGMyID0gbG9va3VwW2lucHV0LmNoYXJDb2RlQXQoaisrKV07XG4gICAgICAgIHZhciBjMyA9IGxvb2t1cFtpbnB1dC5jaGFyQ29kZUF0KGorKyldO1xuICAgICAgICB2YXIgYzQgPSBsb29rdXBbaW5wdXQuY2hhckNvZGVBdChqKyspXTtcblxuICAgICAgICB1YXJyYXlbaSsrXSA9IChjMSA8PCAyKSB8IChjMiA+PiA0KTtcbiAgICAgICAgdWFycmF5W2krK10gPSAoKGMyICYgMTUpIDw8IDQpIHwgKGMzID4+IDIpO1xuICAgICAgICB1YXJyYXlbaSsrXSA9ICgoYzMgJiAzKSA8PCA2KSB8IGM0O1xuICAgIH1cblxuICAgIHJldHVybiB1YXJyYXkuYnVmZmVyO1xufVxuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gY2xheS5sb2FkZXIuR0xURi5SZXN1bHRcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBqc29uXG4gKiBAcHJvcGVydHkge2NsYXkuU2NlbmV9IHNjZW5lXG4gKiBAcHJvcGVydHkge2NsYXkuTm9kZX0gcm9vdE5vZGVcbiAqIEBwcm9wZXJ0eSB7Y2xheS5DYW1lcmFbXX0gY2FtZXJhc1xuICogQHByb3BlcnR5IHtjbGF5LlRleHR1cmVbXX0gdGV4dHVyZXNcbiAqIEBwcm9wZXJ0eSB7Y2xheS5NYXRlcmlhbFtdfSBtYXRlcmlhbHNcbiAqIEBwcm9wZXJ0eSB7Y2xheS5Ta2VsZXRvbltdfSBza2VsZXRvbnNcbiAqIEBwcm9wZXJ0eSB7Y2xheS5NZXNoW119IG1lc2hlc1xuICogQHByb3BlcnR5IHtjbGF5LmFuaW1hdGlvbi5UcmFja0NsaXBbXX0gY2xpcHNcbiAqIEBwcm9wZXJ0eSB7Y2xheS5Ob2RlW119IG5vZGVzXG4gKi9cblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5sb2FkZXIuR0xURlxuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqL1xudmFyIEdMVEZMb2FkZXIgPSBCYXNlLmV4dGVuZCgvKiogQGxlbmRzIGNsYXkubG9hZGVyLkdMVEYjICovIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEB0eXBlIHtjbGF5Lk5vZGV9XG4gICAgICovXG4gICAgcm9vdE5vZGU6IG51bGwsXG4gICAgLyoqXG4gICAgICogUm9vdCBwYXRoIGZvciB1cmkgcGFyc2luZy5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHJvb3RQYXRoOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogUm9vdCBwYXRoIGZvciB0ZXh0dXJlIHVyaSBwYXJzaW5nLiBEZWZhdWx0bHkgdXNlIHRoZSByb290UGF0aFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGV4dHVyZVJvb3RQYXRoOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogUm9vdCBwYXRoIGZvciBidWZmZXIgdXJpIHBhcnNpbmcuIERlZmF1bHRseSB1c2UgdGhlIHJvb3RQYXRoXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBidWZmZXJSb290UGF0aDogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIFNoYWRlciB1c2VkIHdoZW4gY3JlYXRpbmcgdGhlIG1hdGVyaWFscy5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfGNsYXkuU2hhZGVyfVxuICAgICAqIEBkZWZhdWx0ICdjbGF5LnN0YW5kYXJkJ1xuICAgICAqL1xuICAgIHNoYWRlcjogJ2NsYXkuc3RhbmRhcmQnLFxuXG4gICAgLyoqXG4gICAgICogSWYgdXNlIHtAbGluayBjbGF5LlN0YW5kYXJkTWF0ZXJpYWx9XG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB1c2VTdGFuZGFyZE1hdGVyaWFsOiBmYWxzZSxcblxuICAgIC8qKlxuICAgICAqIElmIGxvYWRpbmcgdGhlIGNhbWVyYXMuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgaW5jbHVkZUNhbWVyYTogdHJ1ZSxcblxuICAgIC8qKlxuICAgICAqIElmIGxvYWRpbmcgdGhlIGFuaW1hdGlvbnMuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgaW5jbHVkZUFuaW1hdGlvbjogdHJ1ZSxcbiAgICAvKipcbiAgICAgKiBJZiBsb2FkaW5nIHRoZSBtZXNoZXNcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpbmNsdWRlTWVzaDogdHJ1ZSxcbiAgICAvKipcbiAgICAgKiBJZiBsb2FkaW5nIHRoZSB0ZXh0dXJlcy5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpbmNsdWRlVGV4dHVyZTogdHJ1ZSxcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgY3Jvc3NPcmlnaW46ICcnLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2lzc3Vlcy82NzRcbiAgICAgKi9cbiAgICB0ZXh0dXJlRmxpcFk6IGZhbHNlLFxuXG4gICAgLyoqXG4gICAgICogSWYgY29udmVydCB0ZXh0dXJlIHRvIHBvd2VyLW9mLXR3b1xuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRleHR1cmVDb252ZXJ0VG9QT1Q6IGZhbHNlLFxuXG4gICAgc2hhZGVyTGlicmFyeTogbnVsbFxufSxcbmZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuc2hhZGVyTGlicmFyeSkge1xuICAgICAgICB0aGlzLnNoYWRlckxpYnJhcnkgPSBzaGFkZXJMaWJyYXJ5LmNyZWF0ZUxpYnJhcnkoKTtcbiAgICB9XG59LFxuLyoqIEBsZW5kcyBjbGF5LmxvYWRlci5HTFRGLnByb3RvdHlwZSAqL1xue1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAgICAgKi9cbiAgICBsb2FkOiBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGlzQmluYXJ5ID0gdXJsLmVuZHNXaXRoKCcuZ2xiJyk7XG5cbiAgICAgICAgaWYgKHRoaXMucm9vdFBhdGggPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5yb290UGF0aCA9IHVybC5zbGljZSgwLCB1cmwubGFzdEluZGV4T2YoJy8nKSk7XG4gICAgICAgIH1cblxuICAgICAgICB2ZW5kb3IucmVxdWVzdC5nZXQoe1xuICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICBvbnByb2dyZXNzOiBmdW5jdGlvbiAocGVyY2VudCwgbG9hZGVkLCB0b3RhbCkge1xuICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcigncHJvZ3Jlc3MnLCBwZXJjZW50LCBsb2FkZWQsIHRvdGFsKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcignZXJyb3InLCBlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXNwb25zZVR5cGU6IGlzQmluYXJ5ID8gJ2FycmF5YnVmZmVyJyA6ICd0ZXh0JyxcbiAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNCaW5hcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJzZUJpbmFyeShkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUGFyc2UgZ2xURiBiaW5hcnlcbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBidWZmZXJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LmxvYWRlci5HTFRGLlJlc3VsdH1cbiAgICAgKi9cbiAgICBwYXJzZUJpbmFyeTogZnVuY3Rpb24gKGJ1ZmZlcikge1xuICAgICAgICB2YXIgaGVhZGVyID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlciwgMCwgNCk7XG4gICAgICAgIGlmIChoZWFkZXJbMF0gIT09IDB4NDY1NDZDNjcpIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZXJyb3InLCAnSW52YWxpZCBnbFRGIGJpbmFyeSBmb3JtYXQ6IEludmFsaWQgaGVhZGVyJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhlYWRlclswXSA8IDIpIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZXJyb3InLCAnT25seSBnbFRGMi4wIGlzIHN1cHBvcnRlZC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIsIDEyKTtcblxuICAgICAgICB2YXIganNvbjtcbiAgICAgICAgdmFyIGJ1ZmZlcnMgPSBbXTtcbiAgICAgICAgLy8gUmVhZCBjaHVua3NcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhVmlldy5ieXRlTGVuZ3RoOykge1xuICAgICAgICAgICAgdmFyIGNodW5rTGVuZ3RoID0gZGF0YVZpZXcuZ2V0VWludDMyKGksIHRydWUpO1xuICAgICAgICAgICAgaSArPSA0O1xuICAgICAgICAgICAgdmFyIGNodW5rVHlwZSA9IGRhdGFWaWV3LmdldFVpbnQzMihpLCB0cnVlKTtcbiAgICAgICAgICAgIGkgKz0gNDtcblxuICAgICAgICAgICAgLy8ganNvblxuICAgICAgICAgICAgaWYgKGNodW5rVHlwZSA9PT0gMHg0RTRGNTM0QSkge1xuICAgICAgICAgICAgICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheShidWZmZXIsIGkgKyAxMiwgY2h1bmtMZW5ndGgpO1xuICAgICAgICAgICAgICAgIC8vIFRPRE8sIGZvciB0aGUgYnJvd3NlciBub3Qgc3VwcG9ydCBUZXh0RGVjb2Rlci5cbiAgICAgICAgICAgICAgICB2YXIgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICAgICAgICAgICAgICAgIHZhciBzdHIgPSBkZWNvZGVyLmRlY29kZShhcnIpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGpzb24gPSBKU09OLnBhcnNlKHN0cik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZXJyb3InLCAnSlNPTiBQYXJzZSBlcnJvcjonICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNodW5rVHlwZSA9PT0gMHgwMDRFNDk0Mikge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcnMucHVzaChidWZmZXIuc2xpY2UoaSArIDEyLCBpICsgMTIgKyBjaHVua0xlbmd0aCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpICs9IGNodW5rTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlmICghanNvbikge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdlcnJvcicsICdJbnZhbGlkIGdsVEYgYmluYXJ5IGZvcm1hdDogQ2FuXFwndCBmaW5kIEpTT04uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZShqc29uLCBidWZmZXJzKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGpzb25cbiAgICAgKiBAcGFyYW0ge0FycmF5QnVmZmVyW119IFtidWZmZXJdXG4gICAgICogQHJldHVybiB7Y2xheS5sb2FkZXIuR0xURi5SZXN1bHR9XG4gICAgICovXG4gICAgcGFyc2U6IGZ1bmN0aW9uIChqc29uLCBidWZmZXJzKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB2YXIgbGliID0ge1xuICAgICAgICAgICAganNvbjoganNvbixcbiAgICAgICAgICAgIGJ1ZmZlcnM6IFtdLFxuICAgICAgICAgICAgYnVmZmVyVmlld3M6IFtdLFxuICAgICAgICAgICAgbWF0ZXJpYWxzOiBbXSxcbiAgICAgICAgICAgIHRleHR1cmVzOiBbXSxcbiAgICAgICAgICAgIG1lc2hlczogW10sXG4gICAgICAgICAgICBqb2ludHM6IFtdLFxuICAgICAgICAgICAgc2tlbGV0b25zOiBbXSxcbiAgICAgICAgICAgIGNhbWVyYXM6IFtdLFxuICAgICAgICAgICAgbm9kZXM6IFtdLFxuICAgICAgICAgICAgY2xpcHM6IFtdXG4gICAgICAgIH07XG4gICAgICAgIC8vIE1vdW50IG9uIHRoZSByb290IG5vZGUgaWYgZ2l2ZW5cbiAgICAgICAgdmFyIHJvb3ROb2RlID0gdGhpcy5yb290Tm9kZSB8fCBuZXcgU2NlbmUoKTtcblxuICAgICAgICB2YXIgbG9hZGluZyA9IDA7XG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrTG9hZCgpIHtcbiAgICAgICAgICAgIGxvYWRpbmctLTtcbiAgICAgICAgICAgIGlmIChsb2FkaW5nID09PSAwKSB7XG4gICAgICAgICAgICAgICAgYWZ0ZXJMb2FkQnVmZmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgYWxyZWFkeSBsb2FkIGJ1ZmZlcnNcbiAgICAgICAgaWYgKGJ1ZmZlcnMpIHtcbiAgICAgICAgICAgIGxpYi5idWZmZXJzID0gYnVmZmVycy5zbGljZSgpO1xuICAgICAgICAgICAgYWZ0ZXJMb2FkQnVmZmVyKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gTG9hZCBidWZmZXJzXG4gICAgICAgICAgICB1dGlsLmVhY2goanNvbi5idWZmZXJzLCBmdW5jdGlvbiAoYnVmZmVySW5mbywgaWR4KSB7XG4gICAgICAgICAgICAgICAgbG9hZGluZysrO1xuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gYnVmZmVySW5mby51cmk7XG5cbiAgICAgICAgICAgICAgICBzZWxmLl9sb2FkQnVmZmVycyhwYXRoLCBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpYi5idWZmZXJzW2lkeF0gPSBidWZmZXI7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrTG9hZCgpO1xuICAgICAgICAgICAgICAgIH0sIGNoZWNrTG9hZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFJlc3VsdCgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAganNvbjoganNvbixcbiAgICAgICAgICAgICAgICBzY2VuZTogc2VsZi5yb290Tm9kZSA/IG51bGwgOiByb290Tm9kZSxcbiAgICAgICAgICAgICAgICByb290Tm9kZTogc2VsZi5yb290Tm9kZSA/IHJvb3ROb2RlIDogbnVsbCxcbiAgICAgICAgICAgICAgICBjYW1lcmFzOiBsaWIuY2FtZXJhcyxcbiAgICAgICAgICAgICAgICB0ZXh0dXJlczogbGliLnRleHR1cmVzLFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsczogbGliLm1hdGVyaWFscyxcbiAgICAgICAgICAgICAgICBza2VsZXRvbnM6IGxpYi5za2VsZXRvbnMsXG4gICAgICAgICAgICAgICAgbWVzaGVzOiBsaWIuaW5zdGFuY2VkTWVzaGVzLFxuICAgICAgICAgICAgICAgIGNsaXBzOiBsaWIuY2xpcHMsXG4gICAgICAgICAgICAgICAgbm9kZXM6IGxpYi5ub2Rlc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFmdGVyTG9hZEJ1ZmZlcihpbW1lZGlhdGVseSkge1xuICAgICAgICAgICAgLy8gQnVmZmVyIG5vdCBsb2FkIGNvbXBsZXRlLlxuICAgICAgICAgICAgaWYgKGxpYi5idWZmZXJzLmxlbmd0aCAhPT0ganNvbi5idWZmZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnRyaWdnZXIoJ2Vycm9yJywgJ0J1ZmZlciBub3QgbG9hZCBjb21wbGV0ZS4nKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGpzb24uYnVmZmVyVmlld3MuZm9yRWFjaChmdW5jdGlvbiAoYnVmZmVyVmlld0luZm8sIGlkeCkge1xuICAgICAgICAgICAgICAgIC8vIFBFTkRJTkcgUGVyZm9ybWFuY2VcbiAgICAgICAgICAgICAgICBsaWIuYnVmZmVyVmlld3NbaWR4XSA9IGxpYi5idWZmZXJzW2J1ZmZlclZpZXdJbmZvLmJ1ZmZlcl1cbiAgICAgICAgICAgICAgICAgICAgLnNsaWNlKGJ1ZmZlclZpZXdJbmZvLmJ5dGVPZmZzZXQgfHwgMCwgKGJ1ZmZlclZpZXdJbmZvLmJ5dGVPZmZzZXQgfHwgMCkgKyAoYnVmZmVyVmlld0luZm8uYnl0ZUxlbmd0aCB8fCAwKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxpYi5idWZmZXJzID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChzZWxmLmluY2x1ZGVNZXNoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuaW5jbHVkZVRleHR1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fcGFyc2VUZXh0dXJlcyhqc29uLCBsaWIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZWxmLl9wYXJzZU1hdGVyaWFscyhqc29uLCBsaWIpO1xuICAgICAgICAgICAgICAgIHNlbGYuX3BhcnNlTWVzaGVzKGpzb24sIGxpYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLl9wYXJzZU5vZGVzKGpzb24sIGxpYik7XG5cbiAgICAgICAgICAgIC8vIE9ubHkgc3VwcG9ydCBvbmUgc2NlbmUuXG4gICAgICAgICAgICBpZiAoanNvbi5zY2VuZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2NlbmVJbmZvID0ganNvbi5zY2VuZXNbanNvbi5zY2VuZSB8fCAwXTsgLy8gRGVmYXVsdCB1c2UgdGhlIGZpcnN0IHNjZW5lLlxuICAgICAgICAgICAgICAgIGlmIChzY2VuZUluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY2VuZUluZm8ubm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub2RlID0gbGliLm5vZGVzW3NjZW5lSW5mby5ub2Rlc1tpXV07XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcm9vdE5vZGUuYWRkKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2VsZi5pbmNsdWRlTWVzaCkge1xuICAgICAgICAgICAgICAgIHNlbGYuX3BhcnNlU2tpbnMoanNvbiwgbGliKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNlbGYuaW5jbHVkZUFuaW1hdGlvbikge1xuICAgICAgICAgICAgICAgIHNlbGYuX3BhcnNlQW5pbWF0aW9ucyhqc29uLCBsaWIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGltbWVkaWF0ZWx5KSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcignc3VjY2VzcycsIGdldFJlc3VsdCgpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcignc3VjY2VzcycsIGdldFJlc3VsdCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBnZXRSZXN1bHQoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQmluYXJ5IGZpbGUgcGF0aCByZXNvbHZlci4gVXNlciBjYW4gb3ZlcnJpZGUgaXRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aFxuICAgICAqL1xuICAgIHJlc29sdmVCdWZmZXJQYXRoOiBmdW5jdGlvbiAocGF0aCkge1xuICAgICAgICBpZiAocGF0aCAmJiBwYXRoLm1hdGNoKC9eZGF0YTooLio/KWJhc2U2NCwvKSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcm9vdFBhdGggPSB0aGlzLmJ1ZmZlclJvb3RQYXRoO1xuICAgICAgICBpZiAocm9vdFBhdGggPT0gbnVsbCkge1xuICAgICAgICAgICAgcm9vdFBhdGggPSB0aGlzLnJvb3RQYXRoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1dGlsLnJlbGF0aXZlMmFic29sdXRlKHBhdGgsIHJvb3RQYXRoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVGV4dHVyZSBmaWxlIHBhdGggcmVzb2x2ZXIuIFVzZXIgY2FuIG92ZXJyaWRlIGl0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcbiAgICAgKi9cbiAgICByZXNvbHZlVGV4dHVyZVBhdGg6IGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgICAgIGlmIChwYXRoICYmIHBhdGgubWF0Y2goL15kYXRhOiguKj8pYmFzZTY0LC8pKSB7XG4gICAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByb290UGF0aCA9IHRoaXMudGV4dHVyZVJvb3RQYXRoO1xuICAgICAgICBpZiAocm9vdFBhdGggPT0gbnVsbCkge1xuICAgICAgICAgICAgcm9vdFBhdGggPSB0aGlzLnJvb3RQYXRoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1dGlsLnJlbGF0aXZlMmFic29sdXRlKHBhdGgsIHJvb3RQYXRoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQnVmZmVyIGxvYWRlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uc3VjY2Vzc1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uZXJyb3JcbiAgICAgKi9cbiAgICBsb2FkQnVmZmVyOiBmdW5jdGlvbiAocGF0aCwgb25zdWNjZXNzLCBvbmVycm9yKSB7XG4gICAgICAgIHZlbmRvci5yZXF1ZXN0LmdldCh7XG4gICAgICAgICAgICB1cmw6IHBhdGgsXG4gICAgICAgICAgICByZXNwb25zZVR5cGU6ICdhcnJheWJ1ZmZlcicsXG4gICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChidWZmZXIpIHtcbiAgICAgICAgICAgICAgICBvbnN1Y2Nlc3MgJiYgb25zdWNjZXNzKGJ1ZmZlcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25lcnJvcjogZnVuY3Rpb24gKGJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIG9uZXJyb3IgJiYgb25lcnJvcihidWZmZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgX2dldFNoYWRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuc2hhZGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hhZGVyTGlicmFyeS5nZXQodGhpcy5zaGFkZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc2hhZGVyIGluc3RhbmNlb2YgU2hhZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaGFkZXI7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX2xvYWRCdWZmZXJzOiBmdW5jdGlvbiAocGF0aCwgb25zdWNjZXNzLCBvbmVycm9yKSB7XG4gICAgICAgIHZhciBiYXNlNjRQcmVmaXggPSAnZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LCc7XG4gICAgICAgIHZhciBzdHJTdGFydCA9IHBhdGguc3Vic3RyKDAsIGJhc2U2NFByZWZpeC5sZW5ndGgpO1xuICAgICAgICBpZiAoc3RyU3RhcnQgPT09IGJhc2U2NFByZWZpeCkge1xuICAgICAgICAgICAgb25zdWNjZXNzKFxuICAgICAgICAgICAgICAgIGJhc2U2NFRvQmluYXJ5KHBhdGgsIGJhc2U2NFByZWZpeC5sZW5ndGgpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkQnVmZmVyKFxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZUJ1ZmZlclBhdGgocGF0aCksXG4gICAgICAgICAgICAgICAgb25zdWNjZXNzLFxuICAgICAgICAgICAgICAgIG9uZXJyb3JcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGL2lzc3Vlcy8xMDBcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvaXNzdWVzLzE5M1xuICAgIF9wYXJzZVNraW5zOiBmdW5jdGlvbiAoanNvbiwgbGliKSB7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHNrZWxldG9ucyBhbmQgam9pbnRzXG4gICAgICAgIHZhciBoYXZlSW52QmluZE1hdHJpY2VzID0gZmFsc2U7XG4gICAgICAgIHV0aWwuZWFjaChqc29uLnNraW5zLCBmdW5jdGlvbiAoc2tpbkluZm8sIGlkeCkge1xuICAgICAgICAgICAgdmFyIHNrZWxldG9uID0gbmV3IFNrZWxldG9uKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBza2luSW5mby5uYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2tpbkluZm8uam9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGVJZHggPSBza2luSW5mby5qb2ludHNbaV07XG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBsaWIubm9kZXNbbm9kZUlkeF07XG4gICAgICAgICAgICAgICAgdmFyIGpvaW50ID0gbmV3IEpvaW50KHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbm9kZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBub2RlOiBub2RlLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogc2tlbGV0b24uam9pbnRzLmxlbmd0aFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNrZWxldG9uLmpvaW50cy5wdXNoKGpvaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNrZWxldG9uLnJlbGF0aXZlUm9vdE5vZGUgPSBsaWIubm9kZXNbc2tpbkluZm8uc2tlbGV0b25dIHx8IHRoaXMucm9vdE5vZGU7XG4gICAgICAgICAgICBpZiAoc2tpbkluZm8uaW52ZXJzZUJpbmRNYXRyaWNlcykge1xuICAgICAgICAgICAgICAgIGhhdmVJbnZCaW5kTWF0cmljZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZhciBJQk1JbmZvID0ganNvbi5hY2Nlc3NvcnNbc2tpbkluZm8uaW52ZXJzZUJpbmRNYXRyaWNlc107XG4gICAgICAgICAgICAgICAgdmFyIGJ1ZmZlciA9IGxpYi5idWZmZXJWaWV3c1tJQk1JbmZvLmJ1ZmZlclZpZXddO1xuXG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IElCTUluZm8uYnl0ZU9mZnNldCB8fCAwO1xuICAgICAgICAgICAgICAgIHZhciBzaXplID0gSUJNSW5mby5jb3VudCAqIDE2O1xuXG4gICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gbmV3IHZlbmRvci5GbG9hdDMyQXJyYXkoYnVmZmVyLCBvZmZzZXQsIHNpemUpO1xuXG4gICAgICAgICAgICAgICAgc2tlbGV0b24uc2V0Sm9pbnRNYXRyaWNlc0FycmF5KGFycmF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNrZWxldG9uLnVwZGF0ZUpvaW50TWF0cmljZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpYi5za2VsZXRvbnNbaWR4XSA9IHNrZWxldG9uO1xuICAgICAgICB9LCB0aGlzKTtcblxuICAgICAgICBmdW5jdGlvbiBlbmFibGVTa2lubmluZ0Zvck1lc2gobWVzaCwgc2tlbGV0b24sIGpvaW50SW5kaWNlcykge1xuICAgICAgICAgICAgbWVzaC5za2VsZXRvbiA9IHNrZWxldG9uO1xuICAgICAgICAgICAgbWVzaC5qb2ludHMgPSBqb2ludEluZGljZXM7XG5cbiAgICAgICAgICAgIGlmICghc2tlbGV0b24uYm91bmRpbmdCb3gpIHtcbiAgICAgICAgICAgICAgICBza2VsZXRvbi51cGRhdGVKb2ludHNCb3VuZGluZ0JveGVzKG1lc2guZ2VvbWV0cnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Sm9pbnRJbmRleChqb2ludCkge1xuICAgICAgICAgICAgcmV0dXJuIGpvaW50LmluZGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgdXRpbC5lYWNoKGpzb24ubm9kZXMsIGZ1bmN0aW9uIChub2RlSW5mbywgbm9kZUlkeCkge1xuICAgICAgICAgICAgaWYgKG5vZGVJbmZvLnNraW4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhciBza2luSWR4ID0gbm9kZUluZm8uc2tpbjtcbiAgICAgICAgICAgICAgICB2YXIgc2tlbGV0b24gPSBsaWIuc2tlbGV0b25zW3NraW5JZHhdO1xuXG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBsaWIubm9kZXNbbm9kZUlkeF07XG4gICAgICAgICAgICAgICAgdmFyIGpvaW50SW5kaWNlcyA9IHNrZWxldG9uLmpvaW50cy5tYXAoZ2V0Sm9pbnRJbmRleCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBNZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZVNraW5uaW5nRm9yTWVzaChub2RlLCBza2VsZXRvbiwgam9pbnRJbmRpY2VzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE1lc2ggaGF2ZSBtdWx0aXBsZSBwcmltaXRpdmVzXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlU2tpbm5pbmdGb3JNZXNoKGNoaWxkcmVuW2ldLCBza2VsZXRvbiwgam9pbnRJbmRpY2VzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfSxcblxuICAgIF9wYXJzZVRleHR1cmVzOiBmdW5jdGlvbiAoanNvbiwgbGliKSB7XG4gICAgICAgIHV0aWwuZWFjaChqc29uLnRleHR1cmVzLCBmdW5jdGlvbiAodGV4dHVyZUluZm8sIGlkeCl7XG4gICAgICAgICAgICAvLyBzYW1wbGVycyBpcyBvcHRpb25hbFxuICAgICAgICAgICAgdmFyIHNhbXBsZXJJbmZvID0gKGpzb24uc2FtcGxlcnMgJiYganNvbi5zYW1wbGVyc1t0ZXh0dXJlSW5mby5zYW1wbGVyXSkgfHwge307XG4gICAgICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHt9O1xuICAgICAgICAgICAgWyd3cmFwUycsICd3cmFwVCcsICdtYWdGaWx0ZXInLCAnbWluRmlsdGVyJ10uZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHNhbXBsZXJJbmZvW25hbWVdO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHV0aWwuZGVmYXVsdHMocGFyYW1ldGVycywge1xuICAgICAgICAgICAgICAgIHdyYXBTOiBUZXh0dXJlLlJFUEVBVCxcbiAgICAgICAgICAgICAgICB3cmFwVDogVGV4dHVyZS5SRVBFQVQsXG4gICAgICAgICAgICAgICAgZmxpcFk6IHRoaXMudGV4dHVyZUZsaXBZLFxuICAgICAgICAgICAgICAgIGNvbnZlcnRUb1BPVDogdGhpcy50ZXh0dXJlQ29udmVydFRvUE9UXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRleHR1cmVJbmZvLnRhcmdldCB8fCBnbGVudW0uVEVYVFVSRV8yRDtcbiAgICAgICAgICAgIHZhciBmb3JtYXQgPSB0ZXh0dXJlSW5mby5mb3JtYXQ7XG4gICAgICAgICAgICBpZiAoZm9ybWF0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmZvcm1hdCA9IGZvcm1hdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gZ2xlbnVtLlRFWFRVUkVfMkQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQocGFyYW1ldGVycyk7XG4gICAgICAgICAgICAgICAgdmFyIGltYWdlSW5mbyA9IGpzb24uaW1hZ2VzW3RleHR1cmVJbmZvLnNvdXJjZV07XG4gICAgICAgICAgICAgICAgdmFyIHVyaTtcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VJbmZvLnVyaSkge1xuICAgICAgICAgICAgICAgICAgICB1cmkgPSB0aGlzLnJlc29sdmVUZXh0dXJlUGF0aChpbWFnZUluZm8udXJpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaW1hZ2VJbmZvLmJ1ZmZlclZpZXcgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB1cmkgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtsaWIuYnVmZmVyVmlld3NbaW1hZ2VJbmZvLmJ1ZmZlclZpZXddXSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW1hZ2VJbmZvLm1pbWVUeXBlXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHVyaSkge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLmxvYWQodXJpLCB0aGlzLmNyb3NzT3JpZ2luKTtcbiAgICAgICAgICAgICAgICAgICAgbGliLnRleHR1cmVzW2lkeF0gPSB0ZXh0dXJlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfSxcblxuICAgIF9LSFJDb21tb25NYXRlcmlhbFRvU3RhbmRhcmQ6IGZ1bmN0aW9uIChtYXRlcmlhbEluZm8sIGxpYikge1xuICAgICAgICB2YXIgdW5pZm9ybXMgPSB7fTtcbiAgICAgICAgdmFyIGNvbW1vbk1hdGVyaWFsSW5mbyA9IG1hdGVyaWFsSW5mby5leHRlbnNpb25zWydLSFJfbWF0ZXJpYWxzX2NvbW1vbiddO1xuICAgICAgICB1bmlmb3JtcyA9IGNvbW1vbk1hdGVyaWFsSW5mby52YWx1ZXMgfHwge307XG5cbiAgICAgICAgaWYgKHR5cGVvZiB1bmlmb3Jtcy5kaWZmdXNlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgdW5pZm9ybXMuZGlmZnVzZSA9IGxpYi50ZXh0dXJlc1t1bmlmb3Jtcy5kaWZmdXNlXSB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdW5pZm9ybXMuZW1pc3Npb24gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB1bmlmb3Jtcy5lbWlzc2lvbiA9IGxpYi50ZXh0dXJlc1t1bmlmb3Jtcy5lbWlzc2lvbl0gfHwgbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBlbmFibGVkVGV4dHVyZXMgPSBbXTtcbiAgICAgICAgaWYgKHVuaWZvcm1zWydkaWZmdXNlJ10gaW5zdGFuY2VvZiBUZXh0dXJlMkQpIHtcbiAgICAgICAgICAgIGVuYWJsZWRUZXh0dXJlcy5wdXNoKCdkaWZmdXNlTWFwJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGVyaWFsSW5mby5ub3JtYWxUZXh0dXJlKSB7XG4gICAgICAgICAgICBlbmFibGVkVGV4dHVyZXMucHVzaCgnbm9ybWFsTWFwJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVuaWZvcm1zWydlbWlzc2lvbiddIGluc3RhbmNlb2YgVGV4dHVyZTJEKSB7XG4gICAgICAgICAgICBlbmFibGVkVGV4dHVyZXMucHVzaCgnZW1pc3NpdmVNYXAnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWF0ZXJpYWw7XG4gICAgICAgIHZhciBpc1N0YW5kYXJkTWF0ZXJpYWwgPSB0aGlzLnVzZVN0YW5kYXJkTWF0ZXJpYWw7XG4gICAgICAgIGlmIChpc1N0YW5kYXJkTWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgICAgICAgICAgICAgIG5hbWU6IG1hdGVyaWFsSW5mby5uYW1lLFxuICAgICAgICAgICAgICAgIGRvdWJsZVNpZGVkOiBtYXRlcmlhbEluZm8uZG91YmxlU2lkZWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoe1xuICAgICAgICAgICAgICAgIG5hbWU6IG1hdGVyaWFsSW5mby5uYW1lLFxuICAgICAgICAgICAgICAgIHNoYWRlcjogdGhpcy5fZ2V0U2hhZGVyKClcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ1VTRV9ST1VHSE5FU1MnKTtcbiAgICAgICAgICAgIG1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnVVNFX01FVEFMTkVTUycpO1xuXG4gICAgICAgICAgICBpZiAobWF0ZXJpYWxJbmZvLmRvdWJsZVNpZGVkKSB7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdET1VCTEVfU0lERUQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1bmlmb3Jtcy50cmFuc3BhcmVudCkge1xuICAgICAgICAgICAgbWF0ZXJpYWwuZGVwdGhNYXNrID0gZmFsc2U7XG4gICAgICAgICAgICBtYXRlcmlhbC5kZXB0aFRlc3QgPSB0cnVlO1xuICAgICAgICAgICAgbWF0ZXJpYWwudHJhbnNwYXJlbnQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRpZmZ1c2VQcm9wID0gdW5pZm9ybXNbJ2RpZmZ1c2UnXTtcbiAgICAgICAgaWYgKGRpZmZ1c2VQcm9wKSB7XG4gICAgICAgICAgICAvLyBDb2xvclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGlmZnVzZVByb3ApKSB7XG4gICAgICAgICAgICAgICAgZGlmZnVzZVByb3AgPSBkaWZmdXNlUHJvcC5zbGljZSgwLCAzKTtcbiAgICAgICAgICAgICAgICBpc1N0YW5kYXJkTWF0ZXJpYWwgPyAobWF0ZXJpYWwuY29sb3IgPSBkaWZmdXNlUHJvcClcbiAgICAgICAgICAgICAgICAgICAgOiBtYXRlcmlhbC5zZXQoJ2NvbG9yJywgZGlmZnVzZVByb3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7IC8vIFRleHR1cmVcbiAgICAgICAgICAgICAgICBpc1N0YW5kYXJkTWF0ZXJpYWwgPyAobWF0ZXJpYWwuZGlmZnVzZU1hcCA9IGRpZmZ1c2VQcm9wKVxuICAgICAgICAgICAgICAgICAgICA6IG1hdGVyaWFsLnNldCgnZGlmZnVzZU1hcCcsIGRpZmZ1c2VQcm9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgZW1pc3Npb25Qcm9wID0gdW5pZm9ybXNbJ2VtaXNzaW9uJ107XG4gICAgICAgIGlmIChlbWlzc2lvblByb3AgIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gQ29sb3JcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVtaXNzaW9uUHJvcCkpIHtcbiAgICAgICAgICAgICAgICBlbWlzc2lvblByb3AgPSBlbWlzc2lvblByb3Auc2xpY2UoMCwgMyk7XG4gICAgICAgICAgICAgICAgaXNTdGFuZGFyZE1hdGVyaWFsID8gKG1hdGVyaWFsLmVtaXNzaW9uID0gZW1pc3Npb25Qcm9wKVxuICAgICAgICAgICAgICAgICAgICA6IG1hdGVyaWFsLnNldCgnZW1pc3Npb24nLCBlbWlzc2lvblByb3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7IC8vIFRleHR1cmVcbiAgICAgICAgICAgICAgICBpc1N0YW5kYXJkTWF0ZXJpYWwgPyAobWF0ZXJpYWwuZW1pc3NpdmVNYXAgPSBlbWlzc2lvblByb3ApXG4gICAgICAgICAgICAgICAgICAgIDogbWF0ZXJpYWwuc2V0KCdlbWlzc2l2ZU1hcCcsIGVtaXNzaW9uUHJvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGVyaWFsSW5mby5ub3JtYWxUZXh0dXJlICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gdGV4Q29vcmRcbiAgICAgICAgICAgIHZhciBub3JtYWxUZXh0dXJlSW5kZXggPSBtYXRlcmlhbEluZm8ubm9ybWFsVGV4dHVyZS5pbmRleDtcbiAgICAgICAgICAgIGlmIChpc1N0YW5kYXJkTWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5ub3JtYWxNYXAgPSBsaWIudGV4dHVyZXNbbm9ybWFsVGV4dHVyZUluZGV4XSB8fCBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0KCdub3JtYWxNYXAnLCBsaWIudGV4dHVyZXNbbm9ybWFsVGV4dHVyZUluZGV4XSB8fCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodW5pZm9ybXNbJ3NoaW5pbmVzcyddICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBnbG9zc2luZXNzID0gTWF0aC5sb2codW5pZm9ybXNbJ3NoaW5pbmVzcyddKSAvIE1hdGgubG9nKDgxOTIpO1xuICAgICAgICAgICAgLy8gVW5pZm9ybSBnbG9zc2luZXNzXG4gICAgICAgICAgICBtYXRlcmlhbC5zZXQoJ2dsb3NzaW5lc3MnLCBnbG9zc2luZXNzKTtcbiAgICAgICAgICAgIG1hdGVyaWFsLnNldCgncm91Z2huZXNzJywgMSAtIGdsb3NzaW5lc3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWF0ZXJpYWwuc2V0KCdnbG9zc2luZXNzJywgMC4zKTtcbiAgICAgICAgICAgIG1hdGVyaWFsLnNldCgncm91Z2huZXNzJywgMC4zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodW5pZm9ybXNbJ3NwZWN1bGFyJ10gIT0gbnVsbCkge1xuICAgICAgICAgICAgbWF0ZXJpYWwuc2V0KCdzcGVjdWxhckNvbG9yJywgdW5pZm9ybXNbJ3NwZWN1bGFyJ10uc2xpY2UoMCwgMykpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1bmlmb3Jtc1sndHJhbnNwYXJlbmN5J10gIT0gbnVsbCkge1xuICAgICAgICAgICAgbWF0ZXJpYWwuc2V0KCdhbHBoYScsIHVuaWZvcm1zWyd0cmFuc3BhcmVuY3knXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XG4gICAgfSxcblxuICAgIF9wYnJNZXRhbGxpY1JvdWdobmVzc1RvU3RhbmRhcmQ6IGZ1bmN0aW9uIChtYXRlcmlhbEluZm8sIG1ldGFsbGljUm91Z2huZXNzTWF0SW5mbywgbGliKSB7XG4gICAgICAgIHZhciBhbHBoYVRlc3QgPSBtYXRlcmlhbEluZm8uYWxwaGFNb2RlID09PSAnTUFTSyc7XG5cbiAgICAgICAgdmFyIGlzU3RhbmRhcmRNYXRlcmlhbCA9IHRoaXMudXNlU3RhbmRhcmRNYXRlcmlhbDtcbiAgICAgICAgdmFyIG1hdGVyaWFsO1xuICAgICAgICB2YXIgZGlmZnVzZU1hcCwgcm91Z2huZXNzTWFwLCBtZXRhbG5lc3NNYXAsIG5vcm1hbE1hcCwgZW1pc3NpdmVNYXAsIG9jY2x1c2lvbk1hcDtcbiAgICAgICAgdmFyIGVuYWJsZWRUZXh0dXJlcyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2NhbGFyIG11bHRpcGxpZXIgYXBwbGllZCB0byBlYWNoIG5vcm1hbCB2ZWN0b3Igb2YgdGhlIG5vcm1hbCB0ZXh0dXJlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKlxuICAgICAgICAgKiBYWFggVGhpcyB2YWx1ZSBpcyBpZ25vcmVkIGlmIGBtYXRlcmlhbEluZm8ubm9ybWFsVGV4dHVyZWAgaXMgbm90IHNwZWNpZmllZC5cbiAgICAgICAgICovXG4gICAgICAgIHZhciBub3JtYWxTY2FsZSA9IDEuMDtcblxuICAgICAgICAvLyBUT0RPIHRleENvb3JkXG4gICAgICAgIGlmIChtZXRhbGxpY1JvdWdobmVzc01hdEluZm8uYmFzZUNvbG9yVGV4dHVyZSkge1xuICAgICAgICAgICAgZGlmZnVzZU1hcCA9IGxpYi50ZXh0dXJlc1ttZXRhbGxpY1JvdWdobmVzc01hdEluZm8uYmFzZUNvbG9yVGV4dHVyZS5pbmRleF0gfHwgbnVsbDtcbiAgICAgICAgICAgIGRpZmZ1c2VNYXAgJiYgZW5hYmxlZFRleHR1cmVzLnB1c2goJ2RpZmZ1c2VNYXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0YWxsaWNSb3VnaG5lc3NNYXRJbmZvLm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSkge1xuICAgICAgICAgICAgcm91Z2huZXNzTWFwID0gbWV0YWxuZXNzTWFwID0gbGliLnRleHR1cmVzW21ldGFsbGljUm91Z2huZXNzTWF0SW5mby5tZXRhbGxpY1JvdWdobmVzc1RleHR1cmUuaW5kZXhdIHx8IG51bGw7XG4gICAgICAgICAgICByb3VnaG5lc3NNYXAgJiYgZW5hYmxlZFRleHR1cmVzLnB1c2goJ21ldGFsbmVzc01hcCcsICdyb3VnaG5lc3NNYXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0ZXJpYWxJbmZvLm5vcm1hbFRleHR1cmUpIHtcblxuICAgICAgICAgICAgbm9ybWFsTWFwID0gbGliLnRleHR1cmVzW21hdGVyaWFsSW5mby5ub3JtYWxUZXh0dXJlLmluZGV4XSB8fCBudWxsO1xuICAgICAgICAgICAgbm9ybWFsTWFwICYmIGVuYWJsZWRUZXh0dXJlcy5wdXNoKCdub3JtYWxNYXAnKTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXRlcmlhbEluZm8ubm9ybWFsVGV4dHVyZS5zY2FsZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBub3JtYWxTY2FsZSA9IG1hdGVyaWFsSW5mby5ub3JtYWxUZXh0dXJlLnNjYWxlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGVyaWFsSW5mby5lbWlzc2l2ZVRleHR1cmUpIHtcbiAgICAgICAgICAgIGVtaXNzaXZlTWFwID0gbGliLnRleHR1cmVzW21hdGVyaWFsSW5mby5lbWlzc2l2ZVRleHR1cmUuaW5kZXhdIHx8IG51bGw7XG4gICAgICAgICAgICBlbWlzc2l2ZU1hcCAmJiBlbmFibGVkVGV4dHVyZXMucHVzaCgnZW1pc3NpdmVNYXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0ZXJpYWxJbmZvLm9jY2x1c2lvblRleHR1cmUpIHtcbiAgICAgICAgICAgIG9jY2x1c2lvbk1hcCA9IGxpYi50ZXh0dXJlc1ttYXRlcmlhbEluZm8ub2NjbHVzaW9uVGV4dHVyZS5pbmRleF0gfHwgbnVsbDtcbiAgICAgICAgICAgIG9jY2x1c2lvbk1hcCAmJiBlbmFibGVkVGV4dHVyZXMucHVzaCgnb2NjbHVzaW9uTWFwJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJhc2VDb2xvciA9IG1ldGFsbGljUm91Z2huZXNzTWF0SW5mby5iYXNlQ29sb3JGYWN0b3IgfHwgWzEsIDEsIDEsIDFdO1xuXG4gICAgICAgIHZhciBjb21tb25Qcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgZGlmZnVzZU1hcDogZGlmZnVzZU1hcCB8fCBudWxsLFxuICAgICAgICAgICAgcm91Z2huZXNzTWFwOiByb3VnaG5lc3NNYXAgfHwgbnVsbCxcbiAgICAgICAgICAgIG1ldGFsbmVzc01hcDogbWV0YWxuZXNzTWFwIHx8IG51bGwsXG4gICAgICAgICAgICBub3JtYWxNYXA6IG5vcm1hbE1hcCB8fCBudWxsLFxuICAgICAgICAgICAgb2NjbHVzaW9uTWFwOiBvY2NsdXNpb25NYXAgfHwgbnVsbCxcbiAgICAgICAgICAgIGVtaXNzaXZlTWFwOiBlbWlzc2l2ZU1hcCB8fCBudWxsLFxuICAgICAgICAgICAgY29sb3I6IGJhc2VDb2xvci5zbGljZSgwLCAzKSxcbiAgICAgICAgICAgIGFscGhhOiBiYXNlQ29sb3JbM10sXG4gICAgICAgICAgICBtZXRhbG5lc3M6IG1ldGFsbGljUm91Z2huZXNzTWF0SW5mby5tZXRhbGxpY0ZhY3RvciB8fCAwLFxuICAgICAgICAgICAgcm91Z2huZXNzOiBtZXRhbGxpY1JvdWdobmVzc01hdEluZm8ucm91Z2huZXNzRmFjdG9yIHx8IDAsXG4gICAgICAgICAgICBlbWlzc2lvbjogbWF0ZXJpYWxJbmZvLmVtaXNzaXZlRmFjdG9yIHx8IFswLCAwLCAwXSxcbiAgICAgICAgICAgIGVtaXNzaW9uSW50ZW5zaXR5OiAxLFxuICAgICAgICAgICAgYWxwaGFDdXRvZmY6IG1hdGVyaWFsSW5mby5hbHBoYUN1dG9mZiB8fCAwLFxuICAgICAgICAgICAgbm9ybWFsU2NhbGU6IG5vcm1hbFNjYWxlXG4gICAgICAgIH07XG4gICAgICAgIGlmIChjb21tb25Qcm9wZXJ0aWVzLnJvdWdobmVzc01hcCkge1xuICAgICAgICAgICAgLy8gSW4gZ2xURiBtZXRhbGxpY0ZhY3RvciB3aWxsIGRvIG11bHRpcGx5LCB3aGljaCBpcyBkaWZmZXJlbnQgZnJvbSBTdGFuZGFyZE1hdGVyaWFsLlxuICAgICAgICAgICAgLy8gU28gc2ltcGx5IGlnbm9yZSBpdFxuICAgICAgICAgICAgY29tbW9uUHJvcGVydGllcy5tZXRhbG5lc3MgPSAwLjU7XG4gICAgICAgICAgICBjb21tb25Qcm9wZXJ0aWVzLnJvdWdobmVzcyA9IDAuNTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNTdGFuZGFyZE1hdGVyaWFsKSB7XG4gICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBTdGFuZGFyZE1hdGVyaWFsKHV0aWwuZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBtYXRlcmlhbEluZm8ubmFtZSxcbiAgICAgICAgICAgICAgICBhbHBoYVRlc3Q6IGFscGhhVGVzdCxcbiAgICAgICAgICAgICAgICBkb3VibGVTaWRlZDogbWF0ZXJpYWxJbmZvLmRvdWJsZVNpZGVkLFxuICAgICAgICAgICAgICAgIC8vIEcgY2hhbm5lbFxuICAgICAgICAgICAgICAgIHJvdWdobmVzc0NoYW5uZWw6IDEsXG4gICAgICAgICAgICAgICAgLy8gQiBDaGFubmVsXG4gICAgICAgICAgICAgICAgbWV0YWxuZXNzQ2hhbm5lbDogMlxuICAgICAgICAgICAgfSwgY29tbW9uUHJvcGVydGllcykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuXG4gICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCh7XG4gICAgICAgICAgICAgICAgbmFtZTogbWF0ZXJpYWxJbmZvLm5hbWUsXG4gICAgICAgICAgICAgICAgc2hhZGVyOiB0aGlzLl9nZXRTaGFkZXIoKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnVVNFX1JPVUdITkVTUycpO1xuICAgICAgICAgICAgbWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdVU0VfTUVUQUxORVNTJyk7XG4gICAgICAgICAgICBtYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ1JPVUdITkVTU19DSEFOTkVMJywgMSk7XG4gICAgICAgICAgICBtYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ01FVEFMTkVTU19DSEFOTkVMJywgMik7XG5cbiAgICAgICAgICAgIG1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnRElGRlVTRU1BUF9BTFBIQV9BTFBIQScpO1xuXG4gICAgICAgICAgICBpZiAoYWxwaGFUZXN0KSB7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdBTFBIQV9URVNUJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWF0ZXJpYWxJbmZvLmRvdWJsZVNpZGVkKSB7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdET1VCTEVfU0lERUQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWF0ZXJpYWwuc2V0KGNvbW1vblByb3BlcnRpZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1hdGVyaWFsSW5mby5hbHBoYU1vZGUgPT09ICdCTEVORCcpIHtcbiAgICAgICAgICAgIG1hdGVyaWFsLmRlcHRoTWFzayA9IGZhbHNlO1xuICAgICAgICAgICAgbWF0ZXJpYWwuZGVwdGhUZXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgIG1hdGVyaWFsLnRyYW5zcGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXRlcmlhbDtcbiAgICB9LFxuXG4gICAgX3BiclNwZWN1bGFyR2xvc3NpbmVzc1RvU3RhbmRhcmQ6IGZ1bmN0aW9uIChtYXRlcmlhbEluZm8sIHNwZWN1bGFyR2xvc3NpbmVzc01hdEluZm8sIGxpYikge1xuICAgICAgICB2YXIgYWxwaGFUZXN0ID0gbWF0ZXJpYWxJbmZvLmFscGhhTW9kZSA9PT0gJ01BU0snO1xuXG4gICAgICAgIGlmICh0aGlzLnVzZVN0YW5kYXJkTWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N0YW5kYXJkTWF0ZXJpYWwgZG9lc25cXCd0IHN1cHBvcnQgc3BlY3VsYXIgZ2xvc3NpbmVzcyB3b3JrZmxvdyB5ZXQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtYXRlcmlhbDtcbiAgICAgICAgdmFyIGRpZmZ1c2VNYXAsIGdsb3NzaW5lc3NNYXAsIHNwZWN1bGFyTWFwLCBub3JtYWxNYXAsIGVtaXNzaXZlTWFwLCBvY2NsdXNpb25NYXA7XG4gICAgICAgIHZhciBlbmFibGVkVGV4dHVyZXMgPSBbXTtcbiAgICAgICAgLy8gVE9ETyB0ZXhDb29yZFxuICAgICAgICBpZiAoc3BlY3VsYXJHbG9zc2luZXNzTWF0SW5mby5kaWZmdXNlVGV4dHVyZSkge1xuICAgICAgICAgICAgZGlmZnVzZU1hcCA9IGxpYi50ZXh0dXJlc1tzcGVjdWxhckdsb3NzaW5lc3NNYXRJbmZvLmRpZmZ1c2VUZXh0dXJlLmluZGV4XSB8fCBudWxsO1xuICAgICAgICAgICAgZGlmZnVzZU1hcCAmJiBlbmFibGVkVGV4dHVyZXMucHVzaCgnZGlmZnVzZU1hcCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcGVjdWxhckdsb3NzaW5lc3NNYXRJbmZvLnNwZWN1bGFyR2xvc3NpbmVzc1RleHR1cmUpIHtcbiAgICAgICAgICAgIGdsb3NzaW5lc3NNYXAgPSBzcGVjdWxhck1hcCA9IGxpYi50ZXh0dXJlc1tzcGVjdWxhckdsb3NzaW5lc3NNYXRJbmZvLnNwZWN1bGFyR2xvc3NpbmVzc1RleHR1cmUuaW5kZXhdIHx8IG51bGw7XG4gICAgICAgICAgICBnbG9zc2luZXNzTWFwICYmIGVuYWJsZWRUZXh0dXJlcy5wdXNoKCdzcGVjdWxhck1hcCcsICdnbG9zc2luZXNzTWFwJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGVyaWFsSW5mby5ub3JtYWxUZXh0dXJlKSB7XG4gICAgICAgICAgICBub3JtYWxNYXAgPSBsaWIudGV4dHVyZXNbbWF0ZXJpYWxJbmZvLm5vcm1hbFRleHR1cmUuaW5kZXhdIHx8IG51bGw7XG4gICAgICAgICAgICBub3JtYWxNYXAgJiYgZW5hYmxlZFRleHR1cmVzLnB1c2goJ25vcm1hbE1hcCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRlcmlhbEluZm8uZW1pc3NpdmVUZXh0dXJlKSB7XG4gICAgICAgICAgICBlbWlzc2l2ZU1hcCA9IGxpYi50ZXh0dXJlc1ttYXRlcmlhbEluZm8uZW1pc3NpdmVUZXh0dXJlLmluZGV4XSB8fCBudWxsO1xuICAgICAgICAgICAgZW1pc3NpdmVNYXAgJiYgZW5hYmxlZFRleHR1cmVzLnB1c2goJ2VtaXNzaXZlTWFwJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGVyaWFsSW5mby5vY2NsdXNpb25UZXh0dXJlKSB7XG4gICAgICAgICAgICBvY2NsdXNpb25NYXAgPSBsaWIudGV4dHVyZXNbbWF0ZXJpYWxJbmZvLm9jY2x1c2lvblRleHR1cmUuaW5kZXhdIHx8IG51bGw7XG4gICAgICAgICAgICBvY2NsdXNpb25NYXAgJiYgZW5hYmxlZFRleHR1cmVzLnB1c2goJ29jY2x1c2lvbk1hcCcpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkaWZmdXNlQ29sb3IgPSBzcGVjdWxhckdsb3NzaW5lc3NNYXRJbmZvLmRpZmZ1c2VGYWN0b3IgfHwgWzEsIDEsIDEsIDFdO1xuXG4gICAgICAgIHZhciBjb21tb25Qcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgZGlmZnVzZU1hcDogZGlmZnVzZU1hcCB8fCBudWxsLFxuICAgICAgICAgICAgZ2xvc3NpbmVzc01hcDogZ2xvc3NpbmVzc01hcCB8fCBudWxsLFxuICAgICAgICAgICAgc3BlY3VsYXJNYXA6IHNwZWN1bGFyTWFwIHx8IG51bGwsXG4gICAgICAgICAgICBub3JtYWxNYXA6IG5vcm1hbE1hcCB8fCBudWxsLFxuICAgICAgICAgICAgZW1pc3NpdmVNYXA6IGVtaXNzaXZlTWFwIHx8IG51bGwsXG4gICAgICAgICAgICBvY2NsdXNpb25NYXA6IG9jY2x1c2lvbk1hcCB8fCBudWxsLFxuICAgICAgICAgICAgY29sb3I6IGRpZmZ1c2VDb2xvci5zbGljZSgwLCAzKSxcbiAgICAgICAgICAgIGFscGhhOiBkaWZmdXNlQ29sb3JbM10sXG4gICAgICAgICAgICBzcGVjdWxhckNvbG9yOiBzcGVjdWxhckdsb3NzaW5lc3NNYXRJbmZvLnNwZWN1bGFyRmFjdG9yIHx8IFsxLCAxLCAxXSxcbiAgICAgICAgICAgIGdsb3NzaW5lc3M6IHNwZWN1bGFyR2xvc3NpbmVzc01hdEluZm8uZ2xvc3NpbmVzc0ZhY3RvciB8fCAwLFxuICAgICAgICAgICAgZW1pc3Npb246IG1hdGVyaWFsSW5mby5lbWlzc2l2ZUZhY3RvciB8fCBbMCwgMCwgMF0sXG4gICAgICAgICAgICBlbWlzc2lvbkludGVuc2l0eTogMSxcbiAgICAgICAgICAgIGFscGhhQ3V0b2ZmOiBtYXRlcmlhbEluZm8uYWxwaGFDdXRvZmYgPT0gbnVsbCA/IDAuOSA6IG1hdGVyaWFsSW5mby5hbHBoYUN1dG9mZlxuICAgICAgICB9O1xuICAgICAgICBpZiAoY29tbW9uUHJvcGVydGllcy5nbG9zc2luZXNzTWFwKSB7XG4gICAgICAgICAgICAvLyBJZ25vcmUgc3BlY3VsYXJGYWN0b3JcbiAgICAgICAgICAgIGNvbW1vblByb3BlcnRpZXMuZ2xvc3NpbmVzcyA9IDAuNTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29tbW9uUHJvcGVydGllcy5zcGVjdWxhck1hcCkge1xuICAgICAgICAgICAgLy8gSWdub3JlIHNwZWN1bGFyRmFjdG9yXG4gICAgICAgICAgICBjb21tb25Qcm9wZXJ0aWVzLnNwZWN1bGFyQ29sb3IgPSBbMSwgMSwgMV07XG4gICAgICAgIH1cblxuICAgICAgICBtYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCh7XG4gICAgICAgICAgICBuYW1lOiBtYXRlcmlhbEluZm8ubmFtZSxcbiAgICAgICAgICAgIHNoYWRlcjogdGhpcy5fZ2V0U2hhZGVyKClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdHTE9TU0lORVNTX0NIQU5ORUwnLCAzKTtcbiAgICAgICAgbWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdESUZGVVNFTUFQX0FMUEhBX0FMUEhBJyk7XG5cbiAgICAgICAgaWYgKGFscGhhVGVzdCkge1xuICAgICAgICAgICAgbWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdBTFBIQV9URVNUJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGVyaWFsSW5mby5kb3VibGVTaWRlZCkge1xuICAgICAgICAgICAgbWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdET1VCTEVfU0lERUQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1hdGVyaWFsLnNldChjb21tb25Qcm9wZXJ0aWVzKTtcblxuICAgICAgICBpZiAobWF0ZXJpYWxJbmZvLmFscGhhTW9kZSA9PT0gJ0JMRU5EJykge1xuICAgICAgICAgICAgbWF0ZXJpYWwuZGVwdGhNYXNrID0gZmFsc2U7XG4gICAgICAgICAgICBtYXRlcmlhbC5kZXB0aFRlc3QgPSB0cnVlO1xuICAgICAgICAgICAgbWF0ZXJpYWwudHJhbnNwYXJlbnQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xuICAgIH0sXG5cbiAgICBfcGFyc2VNYXRlcmlhbHM6IGZ1bmN0aW9uIChqc29uLCBsaWIpIHtcbiAgICAgICAgdXRpbC5lYWNoKGpzb24ubWF0ZXJpYWxzLCBmdW5jdGlvbiAobWF0ZXJpYWxJbmZvLCBpZHgpIHtcbiAgICAgICAgICAgIGlmIChtYXRlcmlhbEluZm8uZXh0ZW5zaW9ucyAmJiBtYXRlcmlhbEluZm8uZXh0ZW5zaW9uc1snS0hSX21hdGVyaWFsc19jb21tb24nXSkge1xuICAgICAgICAgICAgICAgIGxpYi5tYXRlcmlhbHNbaWR4XSA9IHRoaXMuX0tIUkNvbW1vbk1hdGVyaWFsVG9TdGFuZGFyZChtYXRlcmlhbEluZm8sIGxpYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtYXRlcmlhbEluZm8uZXh0ZW5zaW9ucyAmJiBtYXRlcmlhbEluZm8uZXh0ZW5zaW9uc1snS0hSX21hdGVyaWFsc19wYnJTcGVjdWxhckdsb3NzaW5lc3MnXSkge1xuICAgICAgICAgICAgICAgIGxpYi5tYXRlcmlhbHNbaWR4XSA9IHRoaXMuX3BiclNwZWN1bGFyR2xvc3NpbmVzc1RvU3RhbmRhcmQobWF0ZXJpYWxJbmZvLCBtYXRlcmlhbEluZm8uZXh0ZW5zaW9uc1snS0hSX21hdGVyaWFsc19wYnJTcGVjdWxhckdsb3NzaW5lc3MnXSwgbGliKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpYi5tYXRlcmlhbHNbaWR4XSA9IHRoaXMuX3Bick1ldGFsbGljUm91Z2huZXNzVG9TdGFuZGFyZChtYXRlcmlhbEluZm8sIG1hdGVyaWFsSW5mby5wYnJNZXRhbGxpY1JvdWdobmVzcyB8fCB7fSwgbGliKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfSxcblxuICAgIF9wYXJzZU1lc2hlczogZnVuY3Rpb24gKGpzb24sIGxpYikge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgdXRpbC5lYWNoKGpzb24ubWVzaGVzLCBmdW5jdGlvbiAobWVzaEluZm8sIGlkeCkge1xuICAgICAgICAgICAgbGliLm1lc2hlc1tpZHhdID0gW107XG4gICAgICAgICAgICAvLyBHZW9tZXRyeVxuICAgICAgICAgICAgZm9yICh2YXIgcHAgPSAwOyBwcCA8IG1lc2hJbmZvLnByaW1pdGl2ZXMubGVuZ3RoOyBwcCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByaW1pdGl2ZUluZm8gPSBtZXNoSW5mby5wcmltaXRpdmVzW3BwXTtcbiAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgR2VvbWV0cnkoe1xuICAgICAgICAgICAgICAgICAgICBkeW5hbWljOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gUEVORElHTlxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBtZXNoSW5mby5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBib3VuZGluZ0JveDogbmV3IEJvdW5kaW5nQm94KClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBQYXJzZSBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAgICAgdmFyIHNlbWFudGljcyA9IE9iamVjdC5rZXlzKHByaW1pdGl2ZUluZm8uYXR0cmlidXRlcyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc3MgPSAwOyBzcyA8IHNlbWFudGljcy5sZW5ndGg7IHNzKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbWFudGljID0gc2VtYW50aWNzW3NzXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFjY2Vzc29ySWR4ID0gcHJpbWl0aXZlSW5mby5hdHRyaWJ1dGVzW3NlbWFudGljXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZUluZm8gPSBqc29uLmFjY2Vzc29yc1thY2Nlc3NvcklkeF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVOYW1lID0gc2VtYW50aWNBdHRyaWJ1dGVNYXBbc2VtYW50aWNdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gU0laRV9NQVBbYXR0cmlidXRlSW5mby50eXBlXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZUFycmF5ID0gZ2V0QWNjZXNzb3JEYXRhKGpzb24sIGxpYiwgYWNjZXNzb3JJZHgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBXZWJHTCBhdHRyaWJ1dGUgYnVmZmVyIG5vdCBzdXBwb3J0IHVpbnQzMi5cbiAgICAgICAgICAgICAgICAgICAgLy8gRGlyZWN0IHVzZSBGbG9hdDMyQXJyYXkgbWF5IGFsc28gaGF2ZSBpc3N1ZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZUFycmF5IGluc3RhbmNlb2YgdmVuZG9yLlVpbnQzMkFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoYXR0cmlidXRlQXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZW1hbnRpYyA9PT0gJ1dFSUdIVFNfMCcgJiYgc2l6ZSA9PT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2VpZ2h0IGRhdGEgaW4gUVRFSyBoYXMgb25seSAzIGNvbXBvbmVudCwgdGhlIGxhc3QgY29tcG9uZW50IGNhbiBiZSBldmFsdWF0ZWQgc2luY2UgaXQgaXMgbm9ybWFsaXplZFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdlaWdodEFycmF5ID0gbmV3IGF0dHJpYnV0ZUFycmF5LmNvbnN0cnVjdG9yKGF0dHJpYnV0ZUluZm8uY291bnQgKiAzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cmlidXRlSW5mby5jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGk0ID0gaSAqIDQsIGkzID0gaSAqIDM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHcxID0gYXR0cmlidXRlQXJyYXlbaTRdLCB3MiA9IGF0dHJpYnV0ZUFycmF5W2k0ICsgMV0sIHczID0gYXR0cmlidXRlQXJyYXlbaTQgKyAyXSwgdzQgPSBhdHRyaWJ1dGVBcnJheVtpNCArIDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3U3VtID0gdzEgKyB3MiArIHczICsgdzQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0QXJyYXlbaTNdID0gdzEgLyB3U3VtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodEFycmF5W2kzICsgMV0gPSB3MiAvIHdTdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0QXJyYXlbaTMgKyAyXSA9IHczIC8gd1N1bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0udmFsdWUgPSB3ZWlnaHRBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZW1hbnRpYyA9PT0gJ0NPTE9SXzAnICYmIHNpemUgPT09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xvckFycmF5ID0gbmV3IGF0dHJpYnV0ZUFycmF5LmNvbnN0cnVjdG9yKGF0dHJpYnV0ZUluZm8uY291bnQgKiA0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cmlidXRlSW5mby5jb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGk0ID0gaSAqIDQsIGkzID0gaSAqIDM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JBcnJheVtpNF0gPSBhdHRyaWJ1dGVBcnJheVtpM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JBcnJheVtpNCArIDFdID0gYXR0cmlidXRlQXJyYXlbaTMgKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvckFycmF5W2k0ICsgMl0gPSBhdHRyaWJ1dGVBcnJheVtpMyArIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yQXJyYXlbaTQgKyAzXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdLnZhbHVlID0gY29sb3JBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0udmFsdWUgPSBhdHRyaWJ1dGVBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVUeXBlID0gJ2Zsb2F0JztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZUFycmF5IGluc3RhbmNlb2YgdmVuZG9yLlVpbnQxNkFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVUeXBlID0gJ3VzaG9ydCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXR0cmlidXRlQXJyYXkgaW5zdGFuY2VvZiB2ZW5kb3IuSW50MTZBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlVHlwZSA9ICdzaG9ydCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXR0cmlidXRlQXJyYXkgaW5zdGFuY2VvZiB2ZW5kb3IuVWludDhBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlVHlwZSA9ICd1Ynl0ZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXR0cmlidXRlQXJyYXkgaW5zdGFuY2VvZiB2ZW5kb3IuSW50OEFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVUeXBlID0gJ2J5dGUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0udHlwZSA9IGF0dHJpYnV0ZVR5cGU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbWFudGljID09PSAnUE9TSVRJT04nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCb3VuZGluZyBCb3hcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtaW4gPSBhdHRyaWJ1dGVJbmZvLm1pbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXggPSBhdHRyaWJ1dGVJbmZvLm1heDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5ib3VuZGluZ0JveC5taW4uc2V0KG1pblswXSwgbWluWzFdLCBtaW5bMl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmJvdW5kaW5nQm94Lm1heC5zZXQobWF4WzBdLCBtYXhbMV0sIG1heFsyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBQYXJzZSBpbmRpY2VzXG4gICAgICAgICAgICAgICAgaWYgKHByaW1pdGl2ZUluZm8uaW5kaWNlcyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmluZGljZXMgPSBnZXRBY2Nlc3NvckRhdGEoanNvbiwgbGliLCBwcmltaXRpdmVJbmZvLmluZGljZXMsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvbWV0cnkudmVydGV4Q291bnQgPD0gMHhmZmZmICYmIGdlb21ldHJ5LmluZGljZXMgaW5zdGFuY2VvZiB2ZW5kb3IuVWludDMyQXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmluZGljZXMgPSBuZXcgdmVuZG9yLlVpbnQxNkFycmF5KGdlb21ldHJ5LmluZGljZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKGdlb21ldHJ5LmluZGljZXMgaW5zdGFuY2VvZiB2ZW5kb3IuVWludDhBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuaW5kaWNlcyA9IG5ldyB2ZW5kb3IuVWludDE2QXJyYXkoZ2VvbWV0cnkuaW5kaWNlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBsaWIubWF0ZXJpYWxzW3ByaW1pdGl2ZUluZm8ubWF0ZXJpYWxdO1xuICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbEluZm8gPSAoanNvbi5tYXRlcmlhbHMgfHwgW10pW3ByaW1pdGl2ZUluZm8ubWF0ZXJpYWxdO1xuICAgICAgICAgICAgICAgIC8vIFVzZSBkZWZhdWx0IG1hdGVyaWFsXG4gICAgICAgICAgICAgICAgaWYgKCFtYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkZXI6IHNlbGYuX2dldFNoYWRlcigpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbWVzaCA9IG5ldyBNZXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LFxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbDogbWF0ZXJpYWwsXG4gICAgICAgICAgICAgICAgICAgIG1vZGU6IFtNZXNoLlBPSU5UUywgTWVzaC5MSU5FUywgTWVzaC5MSU5FX0xPT1AsIE1lc2guTElORV9TVFJJUCwgTWVzaC5UUklBTkdMRVMsIE1lc2guVFJJQU5HTEVfU1RSSVAsIE1lc2guVFJJQU5HTEVfRkFOXVtwcmltaXRpdmVJbmZvLm1vZGVdIHx8IE1lc2guVFJJQU5HTEVTLFxuICAgICAgICAgICAgICAgICAgICBpZ25vcmVHQnVmZmVyOiBtYXRlcmlhbC50cmFuc3BhcmVudFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChtYXRlcmlhbEluZm8gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBtZXNoLmN1bGxpbmcgPSAhbWF0ZXJpYWxJbmZvLmRvdWJsZVNpZGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIW1lc2guZ2VvbWV0cnkuYXR0cmlidXRlcy5ub3JtYWwudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzaC5nZW9tZXRyeS5nZW5lcmF0ZVZlcnRleE5vcm1hbHMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCgobWF0ZXJpYWwgaW5zdGFuY2VvZiBTdGFuZGFyZE1hdGVyaWFsKSAmJiBtYXRlcmlhbC5ub3JtYWxNYXApXG4gICAgICAgICAgICAgICAgICAgIHx8IChtYXRlcmlhbC5pc1RleHR1cmVFbmFibGVkKCdub3JtYWxNYXAnKSlcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNoLmdlb21ldHJ5LmF0dHJpYnV0ZXMudGFuZ2VudC52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzaC5nZW9tZXRyeS5nZW5lcmF0ZVRhbmdlbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1lc2guZ2VvbWV0cnkuYXR0cmlidXRlcy5jb2xvci52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBtZXNoLm1hdGVyaWFsLmRlZmluZSgnVkVSVEVYX0NPTE9SJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbWVzaC5uYW1lID0gR0xURkxvYWRlci5nZW5lcmF0ZU1lc2hOYW1lKGpzb24ubWVzaGVzLCBpZHgsIHBwKTtcblxuICAgICAgICAgICAgICAgIGxpYi5tZXNoZXNbaWR4XS5wdXNoKG1lc2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICB9LFxuXG4gICAgX2luc3RhbmNlQ2FtZXJhOiBmdW5jdGlvbiAoanNvbiwgbm9kZUluZm8pIHtcbiAgICAgICAgdmFyIGNhbWVyYUluZm8gPSBqc29uLmNhbWVyYXNbbm9kZUluZm8uY2FtZXJhXTtcblxuICAgICAgICBpZiAoY2FtZXJhSW5mby50eXBlID09PSAncGVyc3BlY3RpdmUnKSB7XG4gICAgICAgICAgICB2YXIgcGVyc3BlY3RpdmVJbmZvID0gY2FtZXJhSW5mby5wZXJzcGVjdGl2ZSB8fCB7fTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoe1xuICAgICAgICAgICAgICAgIG5hbWU6IG5vZGVJbmZvLm5hbWUsXG4gICAgICAgICAgICAgICAgYXNwZWN0OiBwZXJzcGVjdGl2ZUluZm8uYXNwZWN0UmF0aW8sXG4gICAgICAgICAgICAgICAgZm92OiBwZXJzcGVjdGl2ZUluZm8ueWZvdiAvIE1hdGguUEkgKiAxODAsXG4gICAgICAgICAgICAgICAgZmFyOiBwZXJzcGVjdGl2ZUluZm8uemZhcixcbiAgICAgICAgICAgICAgICBuZWFyOiBwZXJzcGVjdGl2ZUluZm8uem5lYXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIG9ydGhvZ3JhcGhpY0luZm8gPSBjYW1lcmFJbmZvLm9ydGhvZ3JhcGhpYyB8fCB7fTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgT3J0aG9ncmFwaGljQ2FtZXJhKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBub2RlSW5mby5uYW1lLFxuICAgICAgICAgICAgICAgIHRvcDogb3J0aG9ncmFwaGljSW5mby55bWFnLFxuICAgICAgICAgICAgICAgIHJpZ2h0OiBvcnRob2dyYXBoaWNJbmZvLnhtYWcsXG4gICAgICAgICAgICAgICAgbGVmdDogLW9ydGhvZ3JhcGhpY0luZm8ueG1hZyxcbiAgICAgICAgICAgICAgICBib3R0b206IC1vcnRob2dyYXBoaWNJbmZvLnltYWcsXG4gICAgICAgICAgICAgICAgbmVhcjogb3J0aG9ncmFwaGljSW5mby56bmVhcixcbiAgICAgICAgICAgICAgICBmYXI6IG9ydGhvZ3JhcGhpY0luZm8uemZhclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX3BhcnNlTm9kZXM6IGZ1bmN0aW9uIChqc29uLCBsaWIpIHtcblxuICAgICAgICBmdW5jdGlvbiBpbnN0YW5jZU1lc2gobWVzaCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBNZXNoKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBtZXNoLm5hbWUsXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IG1lc2guZ2VvbWV0cnksXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWw6IG1lc2gubWF0ZXJpYWwsXG4gICAgICAgICAgICAgICAgY3VsbGluZzogbWVzaC5jdWxsaW5nLFxuICAgICAgICAgICAgICAgIG1vZGU6IG1lc2gubW9kZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBsaWIuaW5zdGFuY2VkTWVzaGVzID0gW107XG5cbiAgICAgICAgdXRpbC5lYWNoKGpzb24ubm9kZXMsIGZ1bmN0aW9uIChub2RlSW5mbywgaWR4KSB7XG4gICAgICAgICAgICB2YXIgbm9kZTtcbiAgICAgICAgICAgIGlmIChub2RlSW5mby5jYW1lcmEgIT0gbnVsbCAmJiB0aGlzLmluY2x1ZGVDYW1lcmEpIHtcbiAgICAgICAgICAgICAgICBub2RlID0gdGhpcy5faW5zdGFuY2VDYW1lcmEoanNvbiwgbm9kZUluZm8pO1xuICAgICAgICAgICAgICAgIGxpYi5jYW1lcmFzLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChub2RlSW5mby5tZXNoICE9IG51bGwgJiYgdGhpcy5pbmNsdWRlTWVzaCkge1xuICAgICAgICAgICAgICAgIHZhciBwcmltaXRpdmVzID0gbGliLm1lc2hlc1tub2RlSW5mby5tZXNoXTtcbiAgICAgICAgICAgICAgICBpZiAocHJpbWl0aXZlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJpbWl0aXZlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIG5vZGUgd2l0aCBtZXNoIGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlID0gaW5zdGFuY2VNZXNoKHByaW1pdGl2ZXNbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5zZXROYW1lKG5vZGVJbmZvLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGliLmluc3RhbmNlZE1lc2hlcy5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5ldyBOb2RlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNldE5hbWUobm9kZUluZm8ubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHByaW1pdGl2ZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3TWVzaCA9IGluc3RhbmNlTWVzaChwcmltaXRpdmVzW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLmFkZChuZXdNZXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaWIuaW5zdGFuY2VkTWVzaGVzLnB1c2gobmV3TWVzaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBub2RlID0gbmV3IE5vZGUoKTtcbiAgICAgICAgICAgICAgICAvLyBQRU5ESU5HIER1bHBsaWNhdGUgbmFtZS5cbiAgICAgICAgICAgICAgICBub2RlLnNldE5hbWUobm9kZUluZm8ubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm9kZUluZm8ubWF0cml4KSB7XG4gICAgICAgICAgICAgICAgbm9kZS5sb2NhbFRyYW5zZm9ybS5zZXRBcnJheShub2RlSW5mby5tYXRyaXgpO1xuICAgICAgICAgICAgICAgIG5vZGUuZGVjb21wb3NlTG9jYWxUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChub2RlSW5mby50cmFuc2xhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBub2RlLnBvc2l0aW9uLnNldEFycmF5KG5vZGVJbmZvLnRyYW5zbGF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVJbmZvLnJvdGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUucm90YXRpb24uc2V0QXJyYXkobm9kZUluZm8ucm90YXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm9kZUluZm8uc2NhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5zY2FsZS5zZXRBcnJheShub2RlSW5mby5zY2FsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsaWIubm9kZXNbaWR4XSA9IG5vZGU7XG4gICAgICAgIH0sIHRoaXMpO1xuXG4gICAgICAgIC8vIEJ1aWxkIGhpZXJhcmNoeVxuICAgICAgICB1dGlsLmVhY2goanNvbi5ub2RlcywgZnVuY3Rpb24gKG5vZGVJbmZvLCBpZHgpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gbGliLm5vZGVzW2lkeF07XG4gICAgICAgICAgICBpZiAobm9kZUluZm8uY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVJbmZvLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZElkeCA9IG5vZGVJbmZvLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBsaWIubm9kZXNbY2hpbGRJZHhdO1xuICAgICAgICAgICAgICAgICAgICBub2RlLmFkZChjaGlsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgIF9wYXJzZUFuaW1hdGlvbnM6IGZ1bmN0aW9uIChqc29uLCBsaWIpIHtcbiAgICAgICAgZnVuY3Rpb24gY2hlY2tDaGFubmVsUGF0aChjaGFubmVsSW5mbykge1xuICAgICAgICAgICAgaWYgKGNoYW5uZWxJbmZvLnBhdGggPT09ICd3ZWlnaHRzJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignR0xURkxvYWRlciBub3Qgc3VwcG9ydCBtb3JwaCB0YXJnZXRzIHlldC4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldENoYW5uZWxIYXNoKGNoYW5uZWxJbmZvLCBhbmltYXRpb25JbmZvKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hhbm5lbEluZm8udGFyZ2V0Lm5vZGUgKyAnXycgKyBhbmltYXRpb25JbmZvLnNhbXBsZXJzW2NoYW5uZWxJbmZvLnNhbXBsZXJdLmlucHV0O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRpbWVBY2Nlc3Nvck11bHRpcGxpZWQgPSB7fTtcbiAgICAgICAgdXRpbC5lYWNoKGpzb24uYW5pbWF0aW9ucywgZnVuY3Rpb24gKGFuaW1hdGlvbkluZm8sIGlkeCkge1xuICAgICAgICAgICAgdmFyIGNoYW5uZWxzID0gYW5pbWF0aW9uSW5mby5jaGFubmVscy5maWx0ZXIoY2hlY2tDaGFubmVsUGF0aCk7XG5cbiAgICAgICAgICAgIGlmICghY2hhbm5lbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRyYWNrcyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFubmVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjaGFubmVsSW5mbyA9IGNoYW5uZWxzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBjaGFubmVsSGFzaCA9IGdldENoYW5uZWxIYXNoKGNoYW5uZWxJbmZvLCBhbmltYXRpb25JbmZvKTtcblxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXROb2RlID0gbGliLm5vZGVzW2NoYW5uZWxJbmZvLnRhcmdldC5ub2RlXTtcbiAgICAgICAgICAgICAgICB2YXIgdHJhY2sgPSB0cmFja3NbY2hhbm5lbEhhc2hdO1xuICAgICAgICAgICAgICAgIHZhciBzYW1wbGVySW5mbyA9IGFuaW1hdGlvbkluZm8uc2FtcGxlcnNbY2hhbm5lbEluZm8uc2FtcGxlcl07XG5cbiAgICAgICAgICAgICAgICBpZiAoIXRyYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNrID0gdHJhY2tzW2NoYW5uZWxIYXNoXSA9IG5ldyBTYW1wbGVyVHJhY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdGFyZ2V0Tm9kZSA/IHRhcmdldE5vZGUubmFtZSA6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXROb2RlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0cmFjay50YXJnZXROb2RlSW5kZXggPSBjaGFubmVsSW5mby50YXJnZXQubm9kZTtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2suY2hhbm5lbHMudGltZSA9IGdldEFjY2Vzc29yRGF0YShqc29uLCBsaWIsIHNhbXBsZXJJbmZvLmlucHV0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZyYW1lTGVuID0gdHJhY2suY2hhbm5lbHMudGltZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGltZUFjY2Vzc29yTXVsdGlwbGllZFtzYW1wbGVySW5mby5pbnB1dF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZnJhbWVMZW47IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrLmNoYW5uZWxzLnRpbWVba10gKj0gMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVBY2Nlc3Nvck11bHRpcGxpZWRbc2FtcGxlckluZm8uaW5wdXRdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBpbnRlcnBvbGF0aW9uID0gc2FtcGxlckluZm8uaW50ZXJwb2xhdGlvbiB8fCAnTElORUFSJztcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJwb2xhdGlvbiAhPT0gJ0xJTkVBUicpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdHTFRGTG9hZGVyIG9ubHkgc3VwcG9ydCBMSU5FQVIgaW50ZXJwb2xhdGlvbi4nKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IGNoYW5uZWxJbmZvLnRhcmdldC5wYXRoO1xuICAgICAgICAgICAgICAgIGlmIChwYXRoID09PSAndHJhbnNsYXRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGggPSAncG9zaXRpb24nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyYWNrLmNoYW5uZWxzW3BhdGhdID0gZ2V0QWNjZXNzb3JEYXRhKGpzb24sIGxpYiwgc2FtcGxlckluZm8ub3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0cmFja3NMaXN0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBoYXNoIGluIHRyYWNrcykge1xuICAgICAgICAgICAgICAgIHRyYWNrc0xpc3QucHVzaCh0cmFja3NbaGFzaF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNsaXAgPSBuZXcgVHJhY2tDbGlwKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBhbmltYXRpb25JbmZvLm5hbWUsXG4gICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0cmFja3M6IHRyYWNrc0xpc3RcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGliLmNsaXBzLnB1c2goY2xpcCk7XG4gICAgICAgIH0sIHRoaXMpO1xuXG5cbiAgICAgICAgLy8gUEVORElOR1xuICAgICAgICB2YXIgbWF4TGlmZSA9IGxpYi5jbGlwcy5yZWR1Y2UoZnVuY3Rpb24gKG1heFRpbWUsIGNsaXApIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heChtYXhUaW1lLCBjbGlwLmxpZmUpO1xuICAgICAgICB9LCAwKTtcbiAgICAgICAgbGliLmNsaXBzLmZvckVhY2goZnVuY3Rpb24gKGNsaXApIHtcbiAgICAgICAgICAgIGNsaXAubGlmZSA9IG1heExpZmU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBsaWIuY2xpcHM7XG4gICAgfVxufSk7XG5cbkdMVEZMb2FkZXIuZ2VuZXJhdGVNZXNoTmFtZSA9IGZ1bmN0aW9uIChtZXNoZXMsIGlkeCwgcHJpbWl0aXZlSWR4KSB7XG4gICAgdmFyIG1lc2hJbmZvID0gbWVzaGVzW2lkeF07XG4gICAgdmFyIG1lc2hOYW1lID0gbWVzaEluZm8ubmFtZSB8fCAoJ21lc2hfJyArIGlkeCk7XG4gICAgcmV0dXJuIHByaW1pdGl2ZUlkeCA9PT0gMCA/IG1lc2hOYW1lIDogKG1lc2hOYW1lICsgJyQnICsgcHJpbWl0aXZlSWR4KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEdMVEZMb2FkZXI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2xvYWRlci9HTFRGLmpzXG4vLyBtb2R1bGUgaWQgPSA4MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///82\n");

/***/ }),
/* 83 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__shader_source_standard_glsl_js__ = __webpack_require__(84);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_util__ = __webpack_require__(11);\n\n\n\n\n\n\n// Import standard shader\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_2__shader_source_standard_glsl_js__[\"a\" /* default */]);\n\nvar TEXTURE_PROPERTIES = ['diffuseMap', 'normalMap', 'roughnessMap', 'metalnessMap', 'emissiveMap', 'environmentMap', 'brdfLookup', 'ssaoMap', 'aoMap'];\nvar SIMPLE_PROPERTIES = ['color', 'emission', 'emissionIntensity', 'alpha', 'roughness', 'metalness', 'uvRepeat', 'uvOffset', 'aoIntensity', 'alphaCutoff', 'normalScale'];\nvar PROPERTIES_CHANGE_SHADER = ['linear', 'encodeRGBM', 'decodeRGBM', 'doubleSided', 'alphaTest', 'roughnessChannel', 'metalnessChannel', 'environmentMapPrefiltered'];\n\nvar NUM_DEFINE_MAP = {\n    'roughnessChannel': 'ROUGHNESS_CHANNEL',\n    'metalnessChannel': 'METALNESS_CHANNEL'\n};\nvar BOOL_DEFINE_MAP = {\n    'linear': 'SRGB_DECODE',\n    'encodeRGBM': 'RGBM_ENCODE',\n    'decodeRGBM': 'RGBM_DECODE',\n    'doubleSided': 'DOUBLE_SIDED',\n    'alphaTest': 'ALPHA_TEST',\n    'environmentMapPrefiltered': 'ENVIRONMENTMAP_PREFILTER'\n};\n\n\nvar standardShader;\n/**\n * Standard material without custom shader.\n * @constructor clay.StandardMaterial\n * @extends clay.Base\n * @example\n * var mat = new clay.StandardMaterial({\n *     color: [1, 1, 1],\n *     diffuseMap: diffuseTexture\n * });\n * mat.roughness = 1;\n */\nvar StandardMaterial = __WEBPACK_IMPORTED_MODULE_0__Material__[\"a\" /* default */].extend(function () {\n    if (!standardShader) {\n        standardShader = new __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.standardMR.vertex'), __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.standardMR.fragment'));\n    }\n    return /** @lends clay.StandardMaterial# */ {\n        shader: standardShader\n    };\n}, function (option) {\n    // PENDING\n    __WEBPACK_IMPORTED_MODULE_3__core_util__[\"a\" /* default */].extend(this, option);\n    // Extend after shader is created.\n    __WEBPACK_IMPORTED_MODULE_3__core_util__[\"a\" /* default */].defaults(this, /** @lends clay.StandardMaterial# */  {\n        /**\n         * @type {Array.<number>}\n         * @default [1, 1, 1]\n         */\n        color: [1, 1, 1],\n\n        /**\n         * @type {Array.<number>}\n         * @default [0, 0, 0]\n         */\n        emission: [0, 0, 0],\n\n        /**\n         * @type {number}\n         * @default 0\n         */\n        emissionIntensity: 0,\n\n        /**\n         * @type {number}\n         * @default 0.5\n         */\n        roughness: 0.5,\n\n        /**\n         * @type {number}\n         * @default 0\n         */\n        metalness: 0,\n\n        /**\n         * @type {number}\n         * @default 1\n         */\n        alpha: 1,\n\n        /**\n         * @type {boolean}\n         */\n        alphaTest: false,\n\n        /**\n         * Cutoff threshold for alpha test\n         * @type {number}\n         */\n        alphaCutoff: 0.9,\n\n        /**\n         * Scalar multiplier applied to each normal vector of normal texture.\n         *\n         * @type {number}\n         *\n         * XXX This value is considered only if a normal texture is specified.\n         */\n        normalScale: 1.0,\n\n        /**\n         * @type {boolean}\n         */\n        // TODO Must disable culling.\n        doubleSided: false,\n\n        /**\n         * @type {clay.Texture2D}\n         */\n        diffuseMap: null,\n\n        /**\n         * @type {clay.Texture2D}\n         */\n        normalMap: null,\n\n        /**\n         * @type {clay.Texture2D}\n         */\n        roughnessMap: null,\n\n        /**\n         * @type {clay.Texture2D}\n         */\n        metalnessMap: null,\n        /**\n         * @type {clay.Texture2D}\n         */\n        emissiveMap: null,\n\n        /**\n         * @type {clay.TextureCube}\n         */\n        environmentMap: null,\n\n        /**\n         * @type {clay.BoundingBox}\n         */\n        environmentBox: null,\n        /**\n         * BRDF Lookup is generated by clay.util.cubemap.integrateBrdf\n         * @type {clay.Texture2D}\n         */\n        brdfLookup: null,\n\n        /**\n         * @type {clay.Texture2D}\n         */\n        ssaoMap: null,\n\n        /**\n         * @type {clay.Texture2D}\n         */\n        aoMap: null,\n\n        /**\n         * @type {Array.<number>}\n         * @default [1, 1]\n         */\n        uvRepeat: [1, 1],\n\n        /**\n         * @type {Array.<number>}\n         * @default [0, 0]\n         */\n        uvOffset: [0, 0],\n\n        /**\n         * @type {number}\n         * @default 1\n         */\n        aoIntensity: 1,\n\n        /**\n         * @type {boolean}\n         */\n        environmentMapPrefiltered: false,\n\n        /**\n         * @type {boolean}\n         */\n        linear: false,\n\n        /**\n         * @type {boolean}\n         */\n        encodeRGBM: false,\n\n        /**\n         * @type {boolean}\n         */\n        decodeRGBM: false,\n\n        /**\n         * @type {Number}\n         */\n        roughnessChannel: 0,\n        /**\n         * @type {Number}\n         */\n        metalnessChannel: 1\n    });\n}, {\n    clone: function () {\n        var material = new StandardMaterial({\n            name: this.name\n        });\n        TEXTURE_PROPERTIES.forEach(function (propName) {\n            if (this[propName]) {\n                material[propName] = this[propName];\n            }\n        }, this);\n        SIMPLE_PROPERTIES.concat(PROPERTIES_CHANGE_SHADER).forEach(function (propName) {\n            material[propName] = this[propName];\n        }, this);\n        return material;\n    }\n});\n\nSIMPLE_PROPERTIES.forEach(function (propName) {\n    Object.defineProperty(StandardMaterial.prototype, propName, {\n        get: function () {\n            return this.get(propName);\n        },\n        set: function (value) {\n            this.setUniform(propName, value);\n        }\n    });\n});\n\nTEXTURE_PROPERTIES.forEach(function (propName) {\n    Object.defineProperty(StandardMaterial.prototype, propName, {\n        get: function () {\n            return this.get(propName);\n        },\n        set: function (value) {\n            this.setUniform(propName, value);\n        }\n    });\n});\n\nPROPERTIES_CHANGE_SHADER.forEach(function (propName) {\n    var privateKey = '_' + propName;\n    Object.defineProperty(StandardMaterial.prototype, propName, {\n        get: function () {\n            return this[privateKey];\n        },\n        set: function (value) {\n            this[privateKey] = value;\n            if (propName in NUM_DEFINE_MAP) {\n                var defineName = NUM_DEFINE_MAP[propName];\n                this.define('fragment', defineName, value);\n            }\n            else {\n                var defineName = BOOL_DEFINE_MAP[propName];\n                value ? this.define('fragment', defineName) : this.undefine('fragment', defineName);\n            }\n        }\n    });\n});\n\nObject.defineProperty(StandardMaterial.prototype, 'environmentBox', {\n    get: function () {\n        var envBox = this._environmentBox;\n        if (envBox) {\n            envBox.min.setArray(this.get('environmentBoxMin'));\n            envBox.max.setArray(this.get('environmentBoxMax'));\n        }\n        return envBox;\n    },\n\n    set: function (value) {\n        this._environmentBox = value;\n\n        var uniforms = this.uniforms = this.uniforms || {};\n        uniforms['environmentBoxMin'] = uniforms['environmentBoxMin'] || {\n            value: null\n        };\n        uniforms['environmentBoxMax'] = uniforms['environmentBoxMax'] || {\n            value: null\n        };\n\n        // TODO Can't detect operation like box.min = new Vector()\n        if (value) {\n            this.setUniform('environmentBoxMin', value.min.array);\n            this.setUniform('environmentBoxMax', value.max.array);\n        }\n\n        if (value) {\n            this.define('fragment', 'PARALLAX_CORRECTED');\n        }\n        else {\n            this.undefine('fragment', 'PARALLAX_CORRECTED');\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (StandardMaterial);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9TdGFuZGFyZE1hdGVyaWFsLmpzPzVkNGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE1hdGVyaWFsIGZyb20gJy4vTWF0ZXJpYWwnO1xuXG5pbXBvcnQgU2hhZGVyIGZyb20gJy4vU2hhZGVyJztcbmltcG9ydCBzdGFuZGFyZEVzc2wgZnJvbSAnLi9zaGFkZXIvc291cmNlL3N0YW5kYXJkLmdsc2wuanMnO1xuaW1wb3J0IHV0aWwgZnJvbSAnLi9jb3JlL3V0aWwnO1xuXG4vLyBJbXBvcnQgc3RhbmRhcmQgc2hhZGVyXG5TaGFkZXJbJ2ltcG9ydCddKHN0YW5kYXJkRXNzbCk7XG5cbnZhciBURVhUVVJFX1BST1BFUlRJRVMgPSBbJ2RpZmZ1c2VNYXAnLCAnbm9ybWFsTWFwJywgJ3JvdWdobmVzc01hcCcsICdtZXRhbG5lc3NNYXAnLCAnZW1pc3NpdmVNYXAnLCAnZW52aXJvbm1lbnRNYXAnLCAnYnJkZkxvb2t1cCcsICdzc2FvTWFwJywgJ2FvTWFwJ107XG52YXIgU0lNUExFX1BST1BFUlRJRVMgPSBbJ2NvbG9yJywgJ2VtaXNzaW9uJywgJ2VtaXNzaW9uSW50ZW5zaXR5JywgJ2FscGhhJywgJ3JvdWdobmVzcycsICdtZXRhbG5lc3MnLCAndXZSZXBlYXQnLCAndXZPZmZzZXQnLCAnYW9JbnRlbnNpdHknLCAnYWxwaGFDdXRvZmYnLCAnbm9ybWFsU2NhbGUnXTtcbnZhciBQUk9QRVJUSUVTX0NIQU5HRV9TSEFERVIgPSBbJ2xpbmVhcicsICdlbmNvZGVSR0JNJywgJ2RlY29kZVJHQk0nLCAnZG91YmxlU2lkZWQnLCAnYWxwaGFUZXN0JywgJ3JvdWdobmVzc0NoYW5uZWwnLCAnbWV0YWxuZXNzQ2hhbm5lbCcsICdlbnZpcm9ubWVudE1hcFByZWZpbHRlcmVkJ107XG5cbnZhciBOVU1fREVGSU5FX01BUCA9IHtcbiAgICAncm91Z2huZXNzQ2hhbm5lbCc6ICdST1VHSE5FU1NfQ0hBTk5FTCcsXG4gICAgJ21ldGFsbmVzc0NoYW5uZWwnOiAnTUVUQUxORVNTX0NIQU5ORUwnXG59O1xudmFyIEJPT0xfREVGSU5FX01BUCA9IHtcbiAgICAnbGluZWFyJzogJ1NSR0JfREVDT0RFJyxcbiAgICAnZW5jb2RlUkdCTSc6ICdSR0JNX0VOQ09ERScsXG4gICAgJ2RlY29kZVJHQk0nOiAnUkdCTV9ERUNPREUnLFxuICAgICdkb3VibGVTaWRlZCc6ICdET1VCTEVfU0lERUQnLFxuICAgICdhbHBoYVRlc3QnOiAnQUxQSEFfVEVTVCcsXG4gICAgJ2Vudmlyb25tZW50TWFwUHJlZmlsdGVyZWQnOiAnRU5WSVJPTk1FTlRNQVBfUFJFRklMVEVSJ1xufTtcblxuXG52YXIgc3RhbmRhcmRTaGFkZXI7XG4vKipcbiAqIFN0YW5kYXJkIG1hdGVyaWFsIHdpdGhvdXQgY3VzdG9tIHNoYWRlci5cbiAqIEBjb25zdHJ1Y3RvciBjbGF5LlN0YW5kYXJkTWF0ZXJpYWxcbiAqIEBleHRlbmRzIGNsYXkuQmFzZVxuICogQGV4YW1wbGVcbiAqIHZhciBtYXQgPSBuZXcgY2xheS5TdGFuZGFyZE1hdGVyaWFsKHtcbiAqICAgICBjb2xvcjogWzEsIDEsIDFdLFxuICogICAgIGRpZmZ1c2VNYXA6IGRpZmZ1c2VUZXh0dXJlXG4gKiB9KTtcbiAqIG1hdC5yb3VnaG5lc3MgPSAxO1xuICovXG52YXIgU3RhbmRhcmRNYXRlcmlhbCA9IE1hdGVyaWFsLmV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFzdGFuZGFyZFNoYWRlcikge1xuICAgICAgICBzdGFuZGFyZFNoYWRlciA9IG5ldyBTaGFkZXIoU2hhZGVyLnNvdXJjZSgnY2xheS5zdGFuZGFyZE1SLnZlcnRleCcpLCBTaGFkZXIuc291cmNlKCdjbGF5LnN0YW5kYXJkTVIuZnJhZ21lbnQnKSk7XG4gICAgfVxuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuU3RhbmRhcmRNYXRlcmlhbCMgKi8ge1xuICAgICAgICBzaGFkZXI6IHN0YW5kYXJkU2hhZGVyXG4gICAgfTtcbn0sIGZ1bmN0aW9uIChvcHRpb24pIHtcbiAgICAvLyBQRU5ESU5HXG4gICAgdXRpbC5leHRlbmQodGhpcywgb3B0aW9uKTtcbiAgICAvLyBFeHRlbmQgYWZ0ZXIgc2hhZGVyIGlzIGNyZWF0ZWQuXG4gICAgdXRpbC5kZWZhdWx0cyh0aGlzLCAvKiogQGxlbmRzIGNsYXkuU3RhbmRhcmRNYXRlcmlhbCMgKi8gIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheS48bnVtYmVyPn1cbiAgICAgICAgICogQGRlZmF1bHQgWzEsIDEsIDFdXG4gICAgICAgICAqL1xuICAgICAgICBjb2xvcjogWzEsIDEsIDFdLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXkuPG51bWJlcj59XG4gICAgICAgICAqIEBkZWZhdWx0IFswLCAwLCAwXVxuICAgICAgICAgKi9cbiAgICAgICAgZW1pc3Npb246IFswLCAwLCAwXSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMFxuICAgICAgICAgKi9cbiAgICAgICAgZW1pc3Npb25JbnRlbnNpdHk6IDAsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDAuNVxuICAgICAgICAgKi9cbiAgICAgICAgcm91Z2huZXNzOiAwLjUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDBcbiAgICAgICAgICovXG4gICAgICAgIG1ldGFsbmVzczogMCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMVxuICAgICAgICAgKi9cbiAgICAgICAgYWxwaGE6IDEsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgYWxwaGFUZXN0OiBmYWxzZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3V0b2ZmIHRocmVzaG9sZCBmb3IgYWxwaGEgdGVzdFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgYWxwaGFDdXRvZmY6IDAuOSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2NhbGFyIG11bHRpcGxpZXIgYXBwbGllZCB0byBlYWNoIG5vcm1hbCB2ZWN0b3Igb2Ygbm9ybWFsIHRleHR1cmUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqXG4gICAgICAgICAqIFhYWCBUaGlzIHZhbHVlIGlzIGNvbnNpZGVyZWQgb25seSBpZiBhIG5vcm1hbCB0ZXh0dXJlIGlzIHNwZWNpZmllZC5cbiAgICAgICAgICovXG4gICAgICAgIG5vcm1hbFNjYWxlOiAxLjAsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgLy8gVE9ETyBNdXN0IGRpc2FibGUgY3VsbGluZy5cbiAgICAgICAgZG91YmxlU2lkZWQ6IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5UZXh0dXJlMkR9XG4gICAgICAgICAqL1xuICAgICAgICBkaWZmdXNlTWFwOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5UZXh0dXJlMkR9XG4gICAgICAgICAqL1xuICAgICAgICBub3JtYWxNYXA6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlRleHR1cmUyRH1cbiAgICAgICAgICovXG4gICAgICAgIHJvdWdobmVzc01hcDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2NsYXkuVGV4dHVyZTJEfVxuICAgICAgICAgKi9cbiAgICAgICAgbWV0YWxuZXNzTWFwOiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2NsYXkuVGV4dHVyZTJEfVxuICAgICAgICAgKi9cbiAgICAgICAgZW1pc3NpdmVNYXA6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlRleHR1cmVDdWJlfVxuICAgICAgICAgKi9cbiAgICAgICAgZW52aXJvbm1lbnRNYXA6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LkJvdW5kaW5nQm94fVxuICAgICAgICAgKi9cbiAgICAgICAgZW52aXJvbm1lbnRCb3g6IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCUkRGIExvb2t1cCBpcyBnZW5lcmF0ZWQgYnkgY2xheS51dGlsLmN1YmVtYXAuaW50ZWdyYXRlQnJkZlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5UZXh0dXJlMkR9XG4gICAgICAgICAqL1xuICAgICAgICBicmRmTG9va3VwOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5UZXh0dXJlMkR9XG4gICAgICAgICAqL1xuICAgICAgICBzc2FvTWFwOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5UZXh0dXJlMkR9XG4gICAgICAgICAqL1xuICAgICAgICBhb01hcDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5LjxudW1iZXI+fVxuICAgICAgICAgKiBAZGVmYXVsdCBbMSwgMV1cbiAgICAgICAgICovXG4gICAgICAgIHV2UmVwZWF0OiBbMSwgMV0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheS48bnVtYmVyPn1cbiAgICAgICAgICogQGRlZmF1bHQgWzAsIDBdXG4gICAgICAgICAqL1xuICAgICAgICB1dk9mZnNldDogWzAsIDBdLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAxXG4gICAgICAgICAqL1xuICAgICAgICBhb0ludGVuc2l0eTogMSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBlbnZpcm9ubWVudE1hcFByZWZpbHRlcmVkOiBmYWxzZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBsaW5lYXI6IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGVuY29kZVJHQk06IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGRlY29kZVJHQk06IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgcm91Z2huZXNzQ2hhbm5lbDogMCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBtZXRhbG5lc3NDaGFubmVsOiAxXG4gICAgfSk7XG59LCB7XG4gICAgY2xvbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1hdGVyaWFsID0gbmV3IFN0YW5kYXJkTWF0ZXJpYWwoe1xuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lXG4gICAgICAgIH0pO1xuICAgICAgICBURVhUVVJFX1BST1BFUlRJRVMuZm9yRWFjaChmdW5jdGlvbiAocHJvcE5hbWUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzW3Byb3BOYW1lXSkge1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsW3Byb3BOYW1lXSA9IHRoaXNbcHJvcE5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgU0lNUExFX1BST1BFUlRJRVMuY29uY2F0KFBST1BFUlRJRVNfQ0hBTkdFX1NIQURFUikuZm9yRWFjaChmdW5jdGlvbiAocHJvcE5hbWUpIHtcbiAgICAgICAgICAgIG1hdGVyaWFsW3Byb3BOYW1lXSA9IHRoaXNbcHJvcE5hbWVdO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xuICAgIH1cbn0pO1xuXG5TSU1QTEVfUFJPUEVSVElFUy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wTmFtZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdGFuZGFyZE1hdGVyaWFsLnByb3RvdHlwZSwgcHJvcE5hbWUsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQocHJvcE5hbWUpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRVbmlmb3JtKHByb3BOYW1lLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG5URVhUVVJFX1BST1BFUlRJRVMuZm9yRWFjaChmdW5jdGlvbiAocHJvcE5hbWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhbmRhcmRNYXRlcmlhbC5wcm90b3R5cGUsIHByb3BOYW1lLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHByb3BOYW1lKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VW5pZm9ybShwcm9wTmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfSk7XG59KTtcblxuUFJPUEVSVElFU19DSEFOR0VfU0hBREVSLmZvckVhY2goZnVuY3Rpb24gKHByb3BOYW1lKSB7XG4gICAgdmFyIHByaXZhdGVLZXkgPSAnXycgKyBwcm9wTmFtZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhbmRhcmRNYXRlcmlhbC5wcm90b3R5cGUsIHByb3BOYW1lLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNbcHJpdmF0ZUtleV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzW3ByaXZhdGVLZXldID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAocHJvcE5hbWUgaW4gTlVNX0RFRklORV9NQVApIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmaW5lTmFtZSA9IE5VTV9ERUZJTkVfTUFQW3Byb3BOYW1lXTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmluZSgnZnJhZ21lbnQnLCBkZWZpbmVOYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmaW5lTmFtZSA9IEJPT0xfREVGSU5FX01BUFtwcm9wTmFtZV07XG4gICAgICAgICAgICAgICAgdmFsdWUgPyB0aGlzLmRlZmluZSgnZnJhZ21lbnQnLCBkZWZpbmVOYW1lKSA6IHRoaXMudW5kZWZpbmUoJ2ZyYWdtZW50JywgZGVmaW5lTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU3RhbmRhcmRNYXRlcmlhbC5wcm90b3R5cGUsICdlbnZpcm9ubWVudEJveCcsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVudkJveCA9IHRoaXMuX2Vudmlyb25tZW50Qm94O1xuICAgICAgICBpZiAoZW52Qm94KSB7XG4gICAgICAgICAgICBlbnZCb3gubWluLnNldEFycmF5KHRoaXMuZ2V0KCdlbnZpcm9ubWVudEJveE1pbicpKTtcbiAgICAgICAgICAgIGVudkJveC5tYXguc2V0QXJyYXkodGhpcy5nZXQoJ2Vudmlyb25tZW50Qm94TWF4JykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnZCb3g7XG4gICAgfSxcblxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2Vudmlyb25tZW50Qm94ID0gdmFsdWU7XG5cbiAgICAgICAgdmFyIHVuaWZvcm1zID0gdGhpcy51bmlmb3JtcyA9IHRoaXMudW5pZm9ybXMgfHwge307XG4gICAgICAgIHVuaWZvcm1zWydlbnZpcm9ubWVudEJveE1pbiddID0gdW5pZm9ybXNbJ2Vudmlyb25tZW50Qm94TWluJ10gfHwge1xuICAgICAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgdW5pZm9ybXNbJ2Vudmlyb25tZW50Qm94TWF4J10gPSB1bmlmb3Jtc1snZW52aXJvbm1lbnRCb3hNYXgnXSB8fCB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFRPRE8gQ2FuJ3QgZGV0ZWN0IG9wZXJhdGlvbiBsaWtlIGJveC5taW4gPSBuZXcgVmVjdG9yKClcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFVuaWZvcm0oJ2Vudmlyb25tZW50Qm94TWluJywgdmFsdWUubWluLmFycmF5KTtcbiAgICAgICAgICAgIHRoaXMuc2V0VW5pZm9ybSgnZW52aXJvbm1lbnRCb3hNYXgnLCB2YWx1ZS5tYXguYXJyYXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmRlZmluZSgnZnJhZ21lbnQnLCAnUEFSQUxMQVhfQ09SUkVDVEVEJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVuZGVmaW5lKCdmcmFnbWVudCcsICdQQVJBTExBWF9DT1JSRUNURUQnKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBTdGFuZGFyZE1hdGVyaWFsO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9TdGFuZGFyZE1hdGVyaWFsLmpzXG4vLyBtb2R1bGUgaWQgPSA4M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///83\n");

/***/ }),
/* 84 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"\\n@export clay.standard.chunk.varying\\nvarying vec2 v_Texcoord;\\nvarying vec3 v_Normal;\\nvarying vec3 v_WorldPosition;\\nvarying vec3 v_Barycentric;\\n#if defined(PARALLAXOCCLUSIONMAP_ENABLED) || defined(NORMALMAP_ENABLED)\\nvarying vec3 v_Tangent;\\nvarying vec3 v_Bitangent;\\n#endif\\n#if defined(AOMAP_ENABLED)\\nvarying vec2 v_Texcoord2;\\n#endif\\n#ifdef VERTEX_COLOR\\nvarying vec4 v_Color;\\n#endif\\n@end\\n@export clay.standard.chunk.light_header\\n#ifdef AMBIENT_LIGHT_COUNT\\n@import clay.header.ambient_light\\n#endif\\n#ifdef AMBIENT_SH_LIGHT_COUNT\\n@import clay.header.ambient_sh_light\\n#endif\\n#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT\\n@import clay.header.ambient_cubemap_light\\n#endif\\n#ifdef POINT_LIGHT_COUNT\\n@import clay.header.point_light\\n#endif\\n#ifdef DIRECTIONAL_LIGHT_COUNT\\n@import clay.header.directional_light\\n#endif\\n#ifdef SPOT_LIGHT_COUNT\\n@import clay.header.spot_light\\n#endif\\n@end\\n@export clay.standard.vertex\\n#define SHADER_NAME standard\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\\nuniform mat4 world : WORLD;\\nuniform vec2 uvRepeat = vec2(1.0, 1.0);\\nuniform vec2 uvOffset = vec2(0.0, 0.0);\\nattribute vec3 position : POSITION;\\nattribute vec2 texcoord : TEXCOORD_0;\\n#if defined(AOMAP_ENABLED)\\nattribute vec2 texcoord2 : TEXCOORD_1;\\n#endif\\nattribute vec3 normal : NORMAL;\\nattribute vec4 tangent : TANGENT;\\n#ifdef VERTEX_COLOR\\nattribute vec4 a_Color : COLOR;\\n#endif\\nattribute vec3 barycentric;\\n@import clay.standard.chunk.varying\\n@import clay.chunk.skinning_header\\n@import clay.chunk.instancing_header\\n@import clay.util.logdepth_vertex_header\\nvoid main()\\n{\\n vec4 skinnedPosition = vec4(position, 1.0);\\n vec4 skinnedNormal = vec4(normal, 0.0);\\n vec4 skinnedTangent = vec4(tangent.xyz, 0.0);\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n skinnedPosition = skinMatrixWS * skinnedPosition;\\n skinnedNormal = skinMatrixWS * skinnedNormal;\\n skinnedTangent = skinMatrixWS * skinnedTangent;\\n#endif\\n#ifdef INSTANCING\\n @import clay.chunk.instancing_matrix\\n skinnedPosition = instanceMat * skinnedPosition;\\n skinnedNormal = instanceMat * skinnedNormal;\\n skinnedTangent = instanceMat * skinnedTangent;\\n#endif\\n gl_Position = worldViewProjection * skinnedPosition;\\n v_Texcoord = texcoord * uvRepeat + uvOffset;\\n v_WorldPosition = (world * skinnedPosition).xyz;\\n v_Barycentric = barycentric;\\n v_Normal = normalize((worldInverseTranspose * skinnedNormal).xyz);\\n#if defined(PARALLAXOCCLUSIONMAP_ENABLED) || defined(NORMALMAP_ENABLED)\\n v_Tangent = normalize((worldInverseTranspose * skinnedTangent).xyz);\\n v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\\n#endif\\n#ifdef VERTEX_COLOR\\n v_Color = a_Color;\\n#endif\\n#if defined(AOMAP_ENABLED)\\n v_Texcoord2 = texcoord2;\\n#endif\\n @import clay.util.logdepth_vertex_main\\n}\\n@end\\n@export clay.standard.fragment\\n#define PI 3.14159265358979\\n#define GLOSSINESS_CHANNEL 0\\n#define ROUGHNESS_CHANNEL 0\\n#define METALNESS_CHANNEL 1\\n#define DIFFUSEMAP_ALPHA_ALPHA\\n@import clay.standard.chunk.varying\\nuniform mat4 viewInverse : VIEWINVERSE;\\n#ifdef NORMALMAP_ENABLED\\nuniform sampler2D normalMap;\\n#endif\\nuniform float normalScale: 1.0;\\n#ifdef DIFFUSEMAP_ENABLED\\nuniform sampler2D diffuseMap;\\n#endif\\n#ifdef SPECULARMAP_ENABLED\\nuniform sampler2D specularMap;\\n#endif\\n#ifdef USE_ROUGHNESS\\nuniform float roughness : 0.5;\\n #ifdef ROUGHNESSMAP_ENABLED\\nuniform sampler2D roughnessMap;\\n #endif\\n#else\\nuniform float glossiness: 0.5;\\n #ifdef GLOSSINESSMAP_ENABLED\\nuniform sampler2D glossinessMap;\\n #endif\\n#endif\\n#ifdef METALNESSMAP_ENABLED\\nuniform sampler2D metalnessMap;\\n#endif\\n#ifdef OCCLUSIONMAP_ENABLED\\nuniform sampler2D occlusionMap;\\n#endif\\n#ifdef ENVIRONMENTMAP_ENABLED\\nuniform samplerCube environmentMap;\\n #ifdef PARALLAX_CORRECTED\\nuniform vec3 environmentBoxMin;\\nuniform vec3 environmentBoxMax;\\n #endif\\n#endif\\n#ifdef BRDFLOOKUP_ENABLED\\nuniform sampler2D brdfLookup;\\n#endif\\n#ifdef EMISSIVEMAP_ENABLED\\nuniform sampler2D emissiveMap;\\n#endif\\n#ifdef SSAOMAP_ENABLED\\nuniform sampler2D ssaoMap;\\nuniform vec4 viewport : VIEWPORT;\\n#endif\\n#ifdef AOMAP_ENABLED\\nuniform sampler2D aoMap;\\nuniform float aoIntensity;\\n#endif\\nuniform vec3 color : [1.0, 1.0, 1.0];\\nuniform float alpha : 1.0;\\n#ifdef ALPHA_TEST\\nuniform float alphaCutoff: 0.9;\\n#endif\\n#ifdef USE_METALNESS\\nuniform float metalness : 0.0;\\n#else\\nuniform vec3 specularColor : [0.1, 0.1, 0.1];\\n#endif\\nuniform vec3 emission : [0.0, 0.0, 0.0];\\nuniform float emissionIntensity: 1;\\nuniform float lineWidth : 0.0;\\nuniform vec4 lineColor : [0.0, 0.0, 0.0, 0.6];\\n#ifdef ENVIRONMENTMAP_PREFILTER\\nuniform float maxMipmapLevel: 5;\\n#endif\\n@import clay.standard.chunk.light_header\\n@import clay.util.logdepth_fragment_header\\n@import clay.util.calculate_attenuation\\n@import clay.util.edge_factor\\n@import clay.util.rgbm\\n@import clay.util.srgb\\n@import clay.plugin.compute_shadow_map\\n@import clay.util.parallax_correct\\n@import clay.util.ACES\\nfloat G_Smith(float g, float ndv, float ndl)\\n{\\n float roughness = 1.0 - g;\\n float k = roughness * roughness / 2.0;\\n float G1V = ndv / (ndv * (1.0 - k) + k);\\n float G1L = ndl / (ndl * (1.0 - k) + k);\\n return G1L * G1V;\\n}\\nvec3 F_Schlick(float ndv, vec3 spec) {\\n return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);\\n}\\nfloat D_Phong(float g, float ndh) {\\n float a = pow(8192.0, g);\\n return (a + 2.0) / 8.0 * pow(ndh, a);\\n}\\nfloat D_GGX(float g, float ndh) {\\n float r = 1.0 - g;\\n float a = r * r;\\n float tmp = ndh * ndh * (a - 1.0) + 1.0;\\n return a / (PI * tmp * tmp);\\n}\\n#ifdef PARALLAXOCCLUSIONMAP_ENABLED\\nuniform float parallaxOcclusionScale : 0.02;\\nuniform float parallaxMaxLayers : 20;\\nuniform float parallaxMinLayers : 5;\\nuniform sampler2D parallaxOcclusionMap;\\nmat3 transpose(in mat3 inMat)\\n{\\n vec3 i0 = inMat[0];\\n vec3 i1 = inMat[1];\\n vec3 i2 = inMat[2];\\n return mat3(\\n vec3(i0.x, i1.x, i2.x),\\n vec3(i0.y, i1.y, i2.y),\\n vec3(i0.z, i1.z, i2.z)\\n );\\n}\\nvec2 parallaxUv(vec2 uv, vec3 viewDir)\\n{\\n float numLayers = mix(parallaxMaxLayers, parallaxMinLayers, abs(dot(vec3(0.0, 0.0, 1.0), viewDir)));\\n float layerHeight = 1.0 / numLayers;\\n float curLayerHeight = 0.0;\\n vec2 deltaUv = viewDir.xy * parallaxOcclusionScale / (viewDir.z * numLayers);\\n vec2 curUv = uv;\\n float height = 1.0 - texture2D(parallaxOcclusionMap, curUv).r;\\n for (int i = 0; i < 30; i++) {\\n curLayerHeight += layerHeight;\\n curUv -= deltaUv;\\n height = 1.0 - texture2D(parallaxOcclusionMap, curUv).r;\\n if (height < curLayerHeight) {\\n break;\\n }\\n }\\n vec2 prevUv = curUv + deltaUv;\\n float next = height - curLayerHeight;\\n float prev = 1.0 - texture2D(parallaxOcclusionMap, prevUv).r - curLayerHeight + layerHeight;\\n return mix(curUv, prevUv, next / (next - prev));\\n}\\n#endif\\nvoid main() {\\n vec4 albedoColor = vec4(color, alpha);\\n#ifdef VERTEX_COLOR\\n albedoColor *= v_Color;\\n#endif\\n#ifdef SRGB_DECODE\\n albedoColor = sRGBToLinear(albedoColor);\\n#endif\\n vec3 eyePos = viewInverse[3].xyz;\\n vec3 V = normalize(eyePos - v_WorldPosition);\\n vec2 uv = v_Texcoord;\\n#if defined(PARALLAXOCCLUSIONMAP_ENABLED) || defined(NORMALMAP_ENABLED)\\n mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);\\n#endif\\n#ifdef PARALLAXOCCLUSIONMAP_ENABLED\\n uv = parallaxUv(v_Texcoord, normalize(transpose(tbn) * -V));\\n#endif\\n#ifdef DIFFUSEMAP_ENABLED\\n vec4 texel = texture2D(diffuseMap, uv);\\n #ifdef SRGB_DECODE\\n texel = sRGBToLinear(texel);\\n #endif\\n albedoColor.rgb *= texel.rgb;\\n #ifdef DIFFUSEMAP_ALPHA_ALPHA\\n albedoColor.a *= texel.a;\\n #endif\\n#endif\\n#ifdef USE_METALNESS\\n float m = metalness;\\n #ifdef METALNESSMAP_ENABLED\\n float m2 = texture2D(metalnessMap, uv)[METALNESS_CHANNEL];\\n m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);\\n #endif\\n vec3 baseColor = albedoColor.rgb;\\n albedoColor.rgb = baseColor * (1.0 - m);\\n vec3 spec = mix(vec3(0.04), baseColor, m);\\n#else\\n vec3 spec = specularColor;\\n#endif\\n#ifdef USE_ROUGHNESS\\n float g = clamp(1.0 - roughness, 0.0, 1.0);\\n #ifdef ROUGHNESSMAP_ENABLED\\n float g2 = 1.0 - texture2D(roughnessMap, uv)[ROUGHNESS_CHANNEL];\\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\\n #endif\\n#else\\n float g = glossiness;\\n #ifdef GLOSSINESSMAP_ENABLED\\n float g2 = texture2D(glossinessMap, uv)[GLOSSINESS_CHANNEL];\\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\\n #endif\\n#endif\\n#ifdef SPECULARMAP_ENABLED\\n spec *= sRGBToLinear(texture2D(specularMap, uv)).rgb;\\n#endif\\n vec3 N = v_Normal;\\n#ifdef DOUBLE_SIDED\\n if (dot(N, V) < 0.0) {\\n N = -N;\\n }\\n#endif\\n#ifdef NORMALMAP_ENABLED\\n if (dot(v_Tangent, v_Tangent) > 0.0) {\\n vec3 normalTexel = texture2D(normalMap, uv).xyz;\\n if (dot(normalTexel, normalTexel) > 0.0) { N = (normalTexel * 2.0 - 1.0);\\n N = normalize(N * vec3(normalScale, normalScale, 1.0));\\n tbn[1] = -tbn[1];\\n N = normalize(tbn * N);\\n }\\n }\\n#endif\\n vec3 diffuseTerm = vec3(0.0, 0.0, 0.0);\\n vec3 specularTerm = vec3(0.0, 0.0, 0.0);\\n float ndv = clamp(dot(N, V), 0.0, 1.0);\\n vec3 fresnelTerm = F_Schlick(ndv, spec);\\n#ifdef AMBIENT_LIGHT_COUNT\\n for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)\\n {{\\n diffuseTerm += ambientLightColor[_idx_];\\n }}\\n#endif\\n#ifdef AMBIENT_SH_LIGHT_COUNT\\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\\n {{\\n diffuseTerm += calcAmbientSHLight(_idx_, N) * ambientSHLightColor[_idx_];\\n }}\\n#endif\\n#ifdef POINT_LIGHT_COUNT\\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\\n float shadowContribsPoint[POINT_LIGHT_COUNT];\\n if(shadowEnabled)\\n {\\n computeShadowOfPointLights(v_WorldPosition, shadowContribsPoint);\\n }\\n#endif\\n for(int _idx_ = 0; _idx_ < POINT_LIGHT_COUNT; _idx_++)\\n {{\\n vec3 lightPosition = pointLightPosition[_idx_];\\n vec3 lc = pointLightColor[_idx_];\\n float range = pointLightRange[_idx_];\\n vec3 L = lightPosition - v_WorldPosition;\\n float dist = length(L);\\n float attenuation = lightAttenuation(dist, range);\\n L /= dist;\\n vec3 H = normalize(L + V);\\n float ndl = clamp(dot(N, L), 0.0, 1.0);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float shadowContrib = 1.0;\\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\\n if(shadowEnabled)\\n {\\n shadowContrib = shadowContribsPoint[_idx_];\\n }\\n#endif\\n vec3 li = lc * ndl * attenuation * shadowContrib;\\n diffuseTerm += li;\\n specularTerm += li * fresnelTerm * D_Phong(g, ndh);\\n }}\\n#endif\\n#ifdef DIRECTIONAL_LIGHT_COUNT\\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\\n if(shadowEnabled)\\n {\\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\\n }\\n#endif\\n for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)\\n {{\\n vec3 L = -normalize(directionalLightDirection[_idx_]);\\n vec3 lc = directionalLightColor[_idx_];\\n vec3 H = normalize(L + V);\\n float ndl = clamp(dot(N, L), 0.0, 1.0);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float shadowContrib = 1.0;\\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\\n if(shadowEnabled)\\n {\\n shadowContrib = shadowContribsDir[_idx_];\\n }\\n#endif\\n vec3 li = lc * ndl * shadowContrib;\\n diffuseTerm += li;\\n specularTerm += li * fresnelTerm * D_Phong(g, ndh);\\n }}\\n#endif\\n#ifdef SPOT_LIGHT_COUNT\\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\\n float shadowContribsSpot[SPOT_LIGHT_COUNT];\\n if(shadowEnabled)\\n {\\n computeShadowOfSpotLights(v_WorldPosition, shadowContribsSpot);\\n }\\n#endif\\n for(int i = 0; i < SPOT_LIGHT_COUNT; i++)\\n {\\n vec3 lightPosition = spotLightPosition[i];\\n vec3 spotLightDirection = -normalize(spotLightDirection[i]);\\n vec3 lc = spotLightColor[i];\\n float range = spotLightRange[i];\\n float a = spotLightUmbraAngleCosine[i];\\n float b = spotLightPenumbraAngleCosine[i];\\n float falloffFactor = spotLightFalloffFactor[i];\\n vec3 L = lightPosition - v_WorldPosition;\\n float dist = length(L);\\n float attenuation = lightAttenuation(dist, range);\\n L /= dist;\\n float c = dot(spotLightDirection, L);\\n float falloff;\\n falloff = clamp((c - a) /(b - a), 0.0, 1.0);\\n falloff = pow(falloff, falloffFactor);\\n vec3 H = normalize(L + V);\\n float ndl = clamp(dot(N, L), 0.0, 1.0);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float shadowContrib = 1.0;\\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\\n if (shadowEnabled)\\n {\\n shadowContrib = shadowContribsSpot[i];\\n }\\n#endif\\n vec3 li = lc * attenuation * (1.0 - falloff) * shadowContrib * ndl;\\n diffuseTerm += li;\\n specularTerm += li * fresnelTerm * D_Phong(g, ndh);\\n }\\n#endif\\n vec4 outColor = albedoColor;\\n outColor.rgb *= max(diffuseTerm, vec3(0.0));\\n outColor.rgb += max(specularTerm, vec3(0.0));\\n#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT\\n vec3 L = reflect(-V, N);\\n float rough2 = clamp(1.0 - g, 0.0, 1.0);\\n float bias2 = rough2 * 5.0;\\n vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;\\n vec3 envWeight2 = spec * brdfParam2.x + brdfParam2.y;\\n vec3 envTexel2;\\n for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)\\n {{\\n #ifdef SUPPORT_TEXTURE_LOD\\n envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);\\n #else\\n envTexel2 = RGBMDecode(textureCube(ambientCubemapLightCubemap[_idx_], L), 8.12);\\n #endif\\n outColor.rgb += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2;\\n }}\\n#endif\\n#ifdef ENVIRONMENTMAP_ENABLED\\n vec3 envWeight = g * fresnelTerm;\\n vec3 L = reflect(-V, N);\\n #ifdef PARALLAX_CORRECTED\\n L = parallaxCorrect(L, v_WorldPosition, environmentBoxMin, environmentBoxMax);\\n#endif\\n #ifdef ENVIRONMENTMAP_PREFILTER\\n float rough = clamp(1.0 - g, 0.0, 1.0);\\n float bias = rough * maxMipmapLevel;\\n #ifdef SUPPORT_TEXTURE_LOD\\n vec3 envTexel = decodeHDR(textureCubeLodEXT(environmentMap, L, bias)).rgb;\\n #else\\n vec3 envTexel = decodeHDR(textureCube(environmentMap, L)).rgb;\\n #endif\\n #ifdef BRDFLOOKUP_ENABLED\\n vec2 brdfParam = texture2D(brdfLookup, vec2(rough, ndv)).xy;\\n envWeight = spec * brdfParam.x + brdfParam.y;\\n #endif\\n #else\\n vec3 envTexel = textureCube(environmentMap, L).xyz;\\n #endif\\n outColor.rgb += envTexel * envWeight;\\n#endif\\n float aoFactor = 1.0;\\n#ifdef SSAOMAP_ENABLED\\n aoFactor = min(texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r, aoFactor);\\n#endif\\n#ifdef AOMAP_ENABLED\\n aoFactor = min(1.0 - clamp((1.0 - texture2D(aoMap, v_Texcoord2).r) * aoIntensity, 0.0, 1.0), aoFactor);\\n#endif\\n#ifdef OCCLUSIONMAP_ENABLED\\n aoFactor = min(1.0 - clamp((1.0 - texture2D(occlusionMap, v_Texcoord).r), 0.0, 1.0), aoFactor);\\n#endif\\n outColor.rgb *= aoFactor;\\n vec3 lEmission = emission;\\n#ifdef EMISSIVEMAP_ENABLED\\n lEmission *= texture2D(emissiveMap, uv).rgb;\\n#endif\\n outColor.rgb += lEmission * emissionIntensity;\\n if(lineWidth > 0.)\\n {\\n outColor.rgb = mix(outColor.rgb, lineColor.rgb, (1.0 - edgeFactor(lineWidth)) * lineColor.a);\\n }\\n#ifdef ALPHA_TEST\\n if (outColor.a < alphaCutoff) {\\n discard;\\n }\\n#endif\\n#ifdef TONEMAPPING\\n outColor.rgb = ACESToneMapping(outColor.rgb);\\n#endif\\n#ifdef SRGB_ENCODE\\n outColor = linearTosRGB(outColor);\\n#endif\\n gl_FragColor = encodeHDR(outColor);\\n @import clay.util.logdepth_fragment_main\\n}\\n@end\\n@export clay.standardMR.vertex\\n@import clay.standard.vertex\\n@end\\n@export clay.standardMR.fragment\\n#define USE_METALNESS\\n#define USE_ROUGHNESS\\n@import clay.standard.fragment\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL3N0YW5kYXJkLmdsc2wuanM/YmY1MSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIlxcbkBleHBvcnQgY2xheS5zdGFuZGFyZC5jaHVuay52YXJ5aW5nXFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudmFyeWluZyB2ZWMzIHZfTm9ybWFsO1xcbnZhcnlpbmcgdmVjMyB2X1dvcmxkUG9zaXRpb247XFxudmFyeWluZyB2ZWMzIHZfQmFyeWNlbnRyaWM7XFxuI2lmIGRlZmluZWQoUEFSQUxMQVhPQ0NMVVNJT05NQVBfRU5BQkxFRCkgfHwgZGVmaW5lZChOT1JNQUxNQVBfRU5BQkxFRClcXG52YXJ5aW5nIHZlYzMgdl9UYW5nZW50O1xcbnZhcnlpbmcgdmVjMyB2X0JpdGFuZ2VudDtcXG4jZW5kaWZcXG4jaWYgZGVmaW5lZChBT01BUF9FTkFCTEVEKVxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkMjtcXG4jZW5kaWZcXG4jaWZkZWYgVkVSVEVYX0NPTE9SXFxudmFyeWluZyB2ZWM0IHZfQ29sb3I7XFxuI2VuZGlmXFxuQGVuZFxcbkBleHBvcnQgY2xheS5zdGFuZGFyZC5jaHVuay5saWdodF9oZWFkZXJcXG4jaWZkZWYgQU1CSUVOVF9MSUdIVF9DT1VOVFxcbkBpbXBvcnQgY2xheS5oZWFkZXIuYW1iaWVudF9saWdodFxcbiNlbmRpZlxcbiNpZmRlZiBBTUJJRU5UX1NIX0xJR0hUX0NPVU5UXFxuQGltcG9ydCBjbGF5LmhlYWRlci5hbWJpZW50X3NoX2xpZ2h0XFxuI2VuZGlmXFxuI2lmZGVmIEFNQklFTlRfQ1VCRU1BUF9MSUdIVF9DT1VOVFxcbkBpbXBvcnQgY2xheS5oZWFkZXIuYW1iaWVudF9jdWJlbWFwX2xpZ2h0XFxuI2VuZGlmXFxuI2lmZGVmIFBPSU5UX0xJR0hUX0NPVU5UXFxuQGltcG9ydCBjbGF5LmhlYWRlci5wb2ludF9saWdodFxcbiNlbmRpZlxcbiNpZmRlZiBESVJFQ1RJT05BTF9MSUdIVF9DT1VOVFxcbkBpbXBvcnQgY2xheS5oZWFkZXIuZGlyZWN0aW9uYWxfbGlnaHRcXG4jZW5kaWZcXG4jaWZkZWYgU1BPVF9MSUdIVF9DT1VOVFxcbkBpbXBvcnQgY2xheS5oZWFkZXIuc3BvdF9saWdodFxcbiNlbmRpZlxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuc3RhbmRhcmQudmVydGV4XFxuI2RlZmluZSBTSEFERVJfTkFNRSBzdGFuZGFyZFxcbnVuaWZvcm0gbWF0NCB3b3JsZFZpZXdQcm9qZWN0aW9uIDogV09STERWSUVXUFJPSkVDVElPTjtcXG51bmlmb3JtIG1hdDQgd29ybGRJbnZlcnNlVHJhbnNwb3NlIDogV09STERJTlZFUlNFVFJBTlNQT1NFO1xcbnVuaWZvcm0gbWF0NCB3b3JsZCA6IFdPUkxEO1xcbnVuaWZvcm0gdmVjMiB1dlJlcGVhdCA9IHZlYzIoMS4wLCAxLjApO1xcbnVuaWZvcm0gdmVjMiB1dk9mZnNldCA9IHZlYzIoMC4wLCAwLjApO1xcbmF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uIDogUE9TSVRJT047XFxuYXR0cmlidXRlIHZlYzIgdGV4Y29vcmQgOiBURVhDT09SRF8wO1xcbiNpZiBkZWZpbmVkKEFPTUFQX0VOQUJMRUQpXFxuYXR0cmlidXRlIHZlYzIgdGV4Y29vcmQyIDogVEVYQ09PUkRfMTtcXG4jZW5kaWZcXG5hdHRyaWJ1dGUgdmVjMyBub3JtYWwgOiBOT1JNQUw7XFxuYXR0cmlidXRlIHZlYzQgdGFuZ2VudCA6IFRBTkdFTlQ7XFxuI2lmZGVmIFZFUlRFWF9DT0xPUlxcbmF0dHJpYnV0ZSB2ZWM0IGFfQ29sb3IgOiBDT0xPUjtcXG4jZW5kaWZcXG5hdHRyaWJ1dGUgdmVjMyBiYXJ5Y2VudHJpYztcXG5AaW1wb3J0IGNsYXkuc3RhbmRhcmQuY2h1bmsudmFyeWluZ1xcbkBpbXBvcnQgY2xheS5jaHVuay5za2lubmluZ19oZWFkZXJcXG5AaW1wb3J0IGNsYXkuY2h1bmsuaW5zdGFuY2luZ19oZWFkZXJcXG5AaW1wb3J0IGNsYXkudXRpbC5sb2dkZXB0aF92ZXJ0ZXhfaGVhZGVyXFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgc2tpbm5lZFBvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMS4wKTtcXG4gdmVjNCBza2lubmVkTm9ybWFsID0gdmVjNChub3JtYWwsIDAuMCk7XFxuIHZlYzQgc2tpbm5lZFRhbmdlbnQgPSB2ZWM0KHRhbmdlbnQueHl6LCAwLjApO1xcbiNpZmRlZiBTS0lOTklOR1xcbiBAaW1wb3J0IGNsYXkuY2h1bmsuc2tpbl9tYXRyaXhcXG4gc2tpbm5lZFBvc2l0aW9uID0gc2tpbk1hdHJpeFdTICogc2tpbm5lZFBvc2l0aW9uO1xcbiBza2lubmVkTm9ybWFsID0gc2tpbk1hdHJpeFdTICogc2tpbm5lZE5vcm1hbDtcXG4gc2tpbm5lZFRhbmdlbnQgPSBza2luTWF0cml4V1MgKiBza2lubmVkVGFuZ2VudDtcXG4jZW5kaWZcXG4jaWZkZWYgSU5TVEFOQ0lOR1xcbiBAaW1wb3J0IGNsYXkuY2h1bmsuaW5zdGFuY2luZ19tYXRyaXhcXG4gc2tpbm5lZFBvc2l0aW9uID0gaW5zdGFuY2VNYXQgKiBza2lubmVkUG9zaXRpb247XFxuIHNraW5uZWROb3JtYWwgPSBpbnN0YW5jZU1hdCAqIHNraW5uZWROb3JtYWw7XFxuIHNraW5uZWRUYW5nZW50ID0gaW5zdGFuY2VNYXQgKiBza2lubmVkVGFuZ2VudDtcXG4jZW5kaWZcXG4gZ2xfUG9zaXRpb24gPSB3b3JsZFZpZXdQcm9qZWN0aW9uICogc2tpbm5lZFBvc2l0aW9uO1xcbiB2X1RleGNvb3JkID0gdGV4Y29vcmQgKiB1dlJlcGVhdCArIHV2T2Zmc2V0O1xcbiB2X1dvcmxkUG9zaXRpb24gPSAod29ybGQgKiBza2lubmVkUG9zaXRpb24pLnh5ejtcXG4gdl9CYXJ5Y2VudHJpYyA9IGJhcnljZW50cmljO1xcbiB2X05vcm1hbCA9IG5vcm1hbGl6ZSgod29ybGRJbnZlcnNlVHJhbnNwb3NlICogc2tpbm5lZE5vcm1hbCkueHl6KTtcXG4jaWYgZGVmaW5lZChQQVJBTExBWE9DQ0xVU0lPTk1BUF9FTkFCTEVEKSB8fCBkZWZpbmVkKE5PUk1BTE1BUF9FTkFCTEVEKVxcbiB2X1RhbmdlbnQgPSBub3JtYWxpemUoKHdvcmxkSW52ZXJzZVRyYW5zcG9zZSAqIHNraW5uZWRUYW5nZW50KS54eXopO1xcbiB2X0JpdGFuZ2VudCA9IG5vcm1hbGl6ZShjcm9zcyh2X05vcm1hbCwgdl9UYW5nZW50KSAqIHRhbmdlbnQudyk7XFxuI2VuZGlmXFxuI2lmZGVmIFZFUlRFWF9DT0xPUlxcbiB2X0NvbG9yID0gYV9Db2xvcjtcXG4jZW5kaWZcXG4jaWYgZGVmaW5lZChBT01BUF9FTkFCTEVEKVxcbiB2X1RleGNvb3JkMiA9IHRleGNvb3JkMjtcXG4jZW5kaWZcXG4gQGltcG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfdmVydGV4X21haW5cXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5zdGFuZGFyZC5mcmFnbWVudFxcbiNkZWZpbmUgUEkgMy4xNDE1OTI2NTM1ODk3OVxcbiNkZWZpbmUgR0xPU1NJTkVTU19DSEFOTkVMIDBcXG4jZGVmaW5lIFJPVUdITkVTU19DSEFOTkVMIDBcXG4jZGVmaW5lIE1FVEFMTkVTU19DSEFOTkVMIDFcXG4jZGVmaW5lIERJRkZVU0VNQVBfQUxQSEFfQUxQSEFcXG5AaW1wb3J0IGNsYXkuc3RhbmRhcmQuY2h1bmsudmFyeWluZ1xcbnVuaWZvcm0gbWF0NCB2aWV3SW52ZXJzZSA6IFZJRVdJTlZFUlNFO1xcbiNpZmRlZiBOT1JNQUxNQVBfRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIG5vcm1hbE1hcDtcXG4jZW5kaWZcXG51bmlmb3JtIGZsb2F0IG5vcm1hbFNjYWxlOiAxLjA7XFxuI2lmZGVmIERJRkZVU0VNQVBfRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIGRpZmZ1c2VNYXA7XFxuI2VuZGlmXFxuI2lmZGVmIFNQRUNVTEFSTUFQX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCBzcGVjdWxhck1hcDtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX1JPVUdITkVTU1xcbnVuaWZvcm0gZmxvYXQgcm91Z2huZXNzIDogMC41O1xcbiAjaWZkZWYgUk9VR0hORVNTTUFQX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCByb3VnaG5lc3NNYXA7XFxuICNlbmRpZlxcbiNlbHNlXFxudW5pZm9ybSBmbG9hdCBnbG9zc2luZXNzOiAwLjU7XFxuICNpZmRlZiBHTE9TU0lORVNTTUFQX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCBnbG9zc2luZXNzTWFwO1xcbiAjZW5kaWZcXG4jZW5kaWZcXG4jaWZkZWYgTUVUQUxORVNTTUFQX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCBtZXRhbG5lc3NNYXA7XFxuI2VuZGlmXFxuI2lmZGVmIE9DQ0xVU0lPTk1BUF9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgb2NjbHVzaW9uTWFwO1xcbiNlbmRpZlxcbiNpZmRlZiBFTlZJUk9OTUVOVE1BUF9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyQ3ViZSBlbnZpcm9ubWVudE1hcDtcXG4gI2lmZGVmIFBBUkFMTEFYX0NPUlJFQ1RFRFxcbnVuaWZvcm0gdmVjMyBlbnZpcm9ubWVudEJveE1pbjtcXG51bmlmb3JtIHZlYzMgZW52aXJvbm1lbnRCb3hNYXg7XFxuICNlbmRpZlxcbiNlbmRpZlxcbiNpZmRlZiBCUkRGTE9PS1VQX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCBicmRmTG9va3VwO1xcbiNlbmRpZlxcbiNpZmRlZiBFTUlTU0lWRU1BUF9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgZW1pc3NpdmVNYXA7XFxuI2VuZGlmXFxuI2lmZGVmIFNTQU9NQVBfRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIHNzYW9NYXA7XFxudW5pZm9ybSB2ZWM0IHZpZXdwb3J0IDogVklFV1BPUlQ7XFxuI2VuZGlmXFxuI2lmZGVmIEFPTUFQX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCBhb01hcDtcXG51bmlmb3JtIGZsb2F0IGFvSW50ZW5zaXR5O1xcbiNlbmRpZlxcbnVuaWZvcm0gdmVjMyBjb2xvciA6IFsxLjAsIDEuMCwgMS4wXTtcXG51bmlmb3JtIGZsb2F0IGFscGhhIDogMS4wO1xcbiNpZmRlZiBBTFBIQV9URVNUXFxudW5pZm9ybSBmbG9hdCBhbHBoYUN1dG9mZjogMC45O1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfTUVUQUxORVNTXFxudW5pZm9ybSBmbG9hdCBtZXRhbG5lc3MgOiAwLjA7XFxuI2Vsc2VcXG51bmlmb3JtIHZlYzMgc3BlY3VsYXJDb2xvciA6IFswLjEsIDAuMSwgMC4xXTtcXG4jZW5kaWZcXG51bmlmb3JtIHZlYzMgZW1pc3Npb24gOiBbMC4wLCAwLjAsIDAuMF07XFxudW5pZm9ybSBmbG9hdCBlbWlzc2lvbkludGVuc2l0eTogMTtcXG51bmlmb3JtIGZsb2F0IGxpbmVXaWR0aCA6IDAuMDtcXG51bmlmb3JtIHZlYzQgbGluZUNvbG9yIDogWzAuMCwgMC4wLCAwLjAsIDAuNl07XFxuI2lmZGVmIEVOVklST05NRU5UTUFQX1BSRUZJTFRFUlxcbnVuaWZvcm0gZmxvYXQgbWF4TWlwbWFwTGV2ZWw6IDU7XFxuI2VuZGlmXFxuQGltcG9ydCBjbGF5LnN0YW5kYXJkLmNodW5rLmxpZ2h0X2hlYWRlclxcbkBpbXBvcnQgY2xheS51dGlsLmxvZ2RlcHRoX2ZyYWdtZW50X2hlYWRlclxcbkBpbXBvcnQgY2xheS51dGlsLmNhbGN1bGF0ZV9hdHRlbnVhdGlvblxcbkBpbXBvcnQgY2xheS51dGlsLmVkZ2VfZmFjdG9yXFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbkBpbXBvcnQgY2xheS51dGlsLnNyZ2JcXG5AaW1wb3J0IGNsYXkucGx1Z2luLmNvbXB1dGVfc2hhZG93X21hcFxcbkBpbXBvcnQgY2xheS51dGlsLnBhcmFsbGF4X2NvcnJlY3RcXG5AaW1wb3J0IGNsYXkudXRpbC5BQ0VTXFxuZmxvYXQgR19TbWl0aChmbG9hdCBnLCBmbG9hdCBuZHYsIGZsb2F0IG5kbClcXG57XFxuIGZsb2F0IHJvdWdobmVzcyA9IDEuMCAtIGc7XFxuIGZsb2F0IGsgPSByb3VnaG5lc3MgKiByb3VnaG5lc3MgLyAyLjA7XFxuIGZsb2F0IEcxViA9IG5kdiAvIChuZHYgKiAoMS4wIC0gaykgKyBrKTtcXG4gZmxvYXQgRzFMID0gbmRsIC8gKG5kbCAqICgxLjAgLSBrKSArIGspO1xcbiByZXR1cm4gRzFMICogRzFWO1xcbn1cXG52ZWMzIEZfU2NobGljayhmbG9hdCBuZHYsIHZlYzMgc3BlYykge1xcbiByZXR1cm4gc3BlYyArICgxLjAgLSBzcGVjKSAqIHBvdygxLjAgLSBuZHYsIDUuMCk7XFxufVxcbmZsb2F0IERfUGhvbmcoZmxvYXQgZywgZmxvYXQgbmRoKSB7XFxuIGZsb2F0IGEgPSBwb3coODE5Mi4wLCBnKTtcXG4gcmV0dXJuIChhICsgMi4wKSAvIDguMCAqIHBvdyhuZGgsIGEpO1xcbn1cXG5mbG9hdCBEX0dHWChmbG9hdCBnLCBmbG9hdCBuZGgpIHtcXG4gZmxvYXQgciA9IDEuMCAtIGc7XFxuIGZsb2F0IGEgPSByICogcjtcXG4gZmxvYXQgdG1wID0gbmRoICogbmRoICogKGEgLSAxLjApICsgMS4wO1xcbiByZXR1cm4gYSAvIChQSSAqIHRtcCAqIHRtcCk7XFxufVxcbiNpZmRlZiBQQVJBTExBWE9DQ0xVU0lPTk1BUF9FTkFCTEVEXFxudW5pZm9ybSBmbG9hdCBwYXJhbGxheE9jY2x1c2lvblNjYWxlIDogMC4wMjtcXG51bmlmb3JtIGZsb2F0IHBhcmFsbGF4TWF4TGF5ZXJzIDogMjA7XFxudW5pZm9ybSBmbG9hdCBwYXJhbGxheE1pbkxheWVycyA6IDU7XFxudW5pZm9ybSBzYW1wbGVyMkQgcGFyYWxsYXhPY2NsdXNpb25NYXA7XFxubWF0MyB0cmFuc3Bvc2UoaW4gbWF0MyBpbk1hdClcXG57XFxuIHZlYzMgaTAgPSBpbk1hdFswXTtcXG4gdmVjMyBpMSA9IGluTWF0WzFdO1xcbiB2ZWMzIGkyID0gaW5NYXRbMl07XFxuIHJldHVybiBtYXQzKFxcbiB2ZWMzKGkwLngsIGkxLngsIGkyLngpLFxcbiB2ZWMzKGkwLnksIGkxLnksIGkyLnkpLFxcbiB2ZWMzKGkwLnosIGkxLnosIGkyLnopXFxuICk7XFxufVxcbnZlYzIgcGFyYWxsYXhVdih2ZWMyIHV2LCB2ZWMzIHZpZXdEaXIpXFxue1xcbiBmbG9hdCBudW1MYXllcnMgPSBtaXgocGFyYWxsYXhNYXhMYXllcnMsIHBhcmFsbGF4TWluTGF5ZXJzLCBhYnMoZG90KHZlYzMoMC4wLCAwLjAsIDEuMCksIHZpZXdEaXIpKSk7XFxuIGZsb2F0IGxheWVySGVpZ2h0ID0gMS4wIC8gbnVtTGF5ZXJzO1xcbiBmbG9hdCBjdXJMYXllckhlaWdodCA9IDAuMDtcXG4gdmVjMiBkZWx0YVV2ID0gdmlld0Rpci54eSAqIHBhcmFsbGF4T2NjbHVzaW9uU2NhbGUgLyAodmlld0Rpci56ICogbnVtTGF5ZXJzKTtcXG4gdmVjMiBjdXJVdiA9IHV2O1xcbiBmbG9hdCBoZWlnaHQgPSAxLjAgLSB0ZXh0dXJlMkQocGFyYWxsYXhPY2NsdXNpb25NYXAsIGN1clV2KS5yO1xcbiBmb3IgKGludCBpID0gMDsgaSA8IDMwOyBpKyspIHtcXG4gY3VyTGF5ZXJIZWlnaHQgKz0gbGF5ZXJIZWlnaHQ7XFxuIGN1clV2IC09IGRlbHRhVXY7XFxuIGhlaWdodCA9IDEuMCAtIHRleHR1cmUyRChwYXJhbGxheE9jY2x1c2lvbk1hcCwgY3VyVXYpLnI7XFxuIGlmIChoZWlnaHQgPCBjdXJMYXllckhlaWdodCkge1xcbiBicmVhaztcXG4gfVxcbiB9XFxuIHZlYzIgcHJldlV2ID0gY3VyVXYgKyBkZWx0YVV2O1xcbiBmbG9hdCBuZXh0ID0gaGVpZ2h0IC0gY3VyTGF5ZXJIZWlnaHQ7XFxuIGZsb2F0IHByZXYgPSAxLjAgLSB0ZXh0dXJlMkQocGFyYWxsYXhPY2NsdXNpb25NYXAsIHByZXZVdikuciAtIGN1ckxheWVySGVpZ2h0ICsgbGF5ZXJIZWlnaHQ7XFxuIHJldHVybiBtaXgoY3VyVXYsIHByZXZVdiwgbmV4dCAvIChuZXh0IC0gcHJldikpO1xcbn1cXG4jZW5kaWZcXG52b2lkIG1haW4oKSB7XFxuIHZlYzQgYWxiZWRvQ29sb3IgPSB2ZWM0KGNvbG9yLCBhbHBoYSk7XFxuI2lmZGVmIFZFUlRFWF9DT0xPUlxcbiBhbGJlZG9Db2xvciAqPSB2X0NvbG9yO1xcbiNlbmRpZlxcbiNpZmRlZiBTUkdCX0RFQ09ERVxcbiBhbGJlZG9Db2xvciA9IHNSR0JUb0xpbmVhcihhbGJlZG9Db2xvcik7XFxuI2VuZGlmXFxuIHZlYzMgZXllUG9zID0gdmlld0ludmVyc2VbM10ueHl6O1xcbiB2ZWMzIFYgPSBub3JtYWxpemUoZXllUG9zIC0gdl9Xb3JsZFBvc2l0aW9uKTtcXG4gdmVjMiB1diA9IHZfVGV4Y29vcmQ7XFxuI2lmIGRlZmluZWQoUEFSQUxMQVhPQ0NMVVNJT05NQVBfRU5BQkxFRCkgfHwgZGVmaW5lZChOT1JNQUxNQVBfRU5BQkxFRClcXG4gbWF0MyB0Ym4gPSBtYXQzKHZfVGFuZ2VudCwgdl9CaXRhbmdlbnQsIHZfTm9ybWFsKTtcXG4jZW5kaWZcXG4jaWZkZWYgUEFSQUxMQVhPQ0NMVVNJT05NQVBfRU5BQkxFRFxcbiB1diA9IHBhcmFsbGF4VXYodl9UZXhjb29yZCwgbm9ybWFsaXplKHRyYW5zcG9zZSh0Ym4pICogLVYpKTtcXG4jZW5kaWZcXG4jaWZkZWYgRElGRlVTRU1BUF9FTkFCTEVEXFxuIHZlYzQgdGV4ZWwgPSB0ZXh0dXJlMkQoZGlmZnVzZU1hcCwgdXYpO1xcbiAjaWZkZWYgU1JHQl9ERUNPREVcXG4gdGV4ZWwgPSBzUkdCVG9MaW5lYXIodGV4ZWwpO1xcbiAjZW5kaWZcXG4gYWxiZWRvQ29sb3IucmdiICo9IHRleGVsLnJnYjtcXG4gI2lmZGVmIERJRkZVU0VNQVBfQUxQSEFfQUxQSEFcXG4gYWxiZWRvQ29sb3IuYSAqPSB0ZXhlbC5hO1xcbiAjZW5kaWZcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX01FVEFMTkVTU1xcbiBmbG9hdCBtID0gbWV0YWxuZXNzO1xcbiAjaWZkZWYgTUVUQUxORVNTTUFQX0VOQUJMRURcXG4gZmxvYXQgbTIgPSB0ZXh0dXJlMkQobWV0YWxuZXNzTWFwLCB1dilbTUVUQUxORVNTX0NIQU5ORUxdO1xcbiBtID0gY2xhbXAobTIgKyAobSAtIDAuNSkgKiAyLjAsIDAuMCwgMS4wKTtcXG4gI2VuZGlmXFxuIHZlYzMgYmFzZUNvbG9yID0gYWxiZWRvQ29sb3IucmdiO1xcbiBhbGJlZG9Db2xvci5yZ2IgPSBiYXNlQ29sb3IgKiAoMS4wIC0gbSk7XFxuIHZlYzMgc3BlYyA9IG1peCh2ZWMzKDAuMDQpLCBiYXNlQ29sb3IsIG0pO1xcbiNlbHNlXFxuIHZlYzMgc3BlYyA9IHNwZWN1bGFyQ29sb3I7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9ST1VHSE5FU1NcXG4gZmxvYXQgZyA9IGNsYW1wKDEuMCAtIHJvdWdobmVzcywgMC4wLCAxLjApO1xcbiAjaWZkZWYgUk9VR0hORVNTTUFQX0VOQUJMRURcXG4gZmxvYXQgZzIgPSAxLjAgLSB0ZXh0dXJlMkQocm91Z2huZXNzTWFwLCB1dilbUk9VR0hORVNTX0NIQU5ORUxdO1xcbiBnID0gY2xhbXAoZzIgKyAoZyAtIDAuNSkgKiAyLjAsIDAuMCwgMS4wKTtcXG4gI2VuZGlmXFxuI2Vsc2VcXG4gZmxvYXQgZyA9IGdsb3NzaW5lc3M7XFxuICNpZmRlZiBHTE9TU0lORVNTTUFQX0VOQUJMRURcXG4gZmxvYXQgZzIgPSB0ZXh0dXJlMkQoZ2xvc3NpbmVzc01hcCwgdXYpW0dMT1NTSU5FU1NfQ0hBTk5FTF07XFxuIGcgPSBjbGFtcChnMiArIChnIC0gMC41KSAqIDIuMCwgMC4wLCAxLjApO1xcbiAjZW5kaWZcXG4jZW5kaWZcXG4jaWZkZWYgU1BFQ1VMQVJNQVBfRU5BQkxFRFxcbiBzcGVjICo9IHNSR0JUb0xpbmVhcih0ZXh0dXJlMkQoc3BlY3VsYXJNYXAsIHV2KSkucmdiO1xcbiNlbmRpZlxcbiB2ZWMzIE4gPSB2X05vcm1hbDtcXG4jaWZkZWYgRE9VQkxFX1NJREVEXFxuIGlmIChkb3QoTiwgVikgPCAwLjApIHtcXG4gTiA9IC1OO1xcbiB9XFxuI2VuZGlmXFxuI2lmZGVmIE5PUk1BTE1BUF9FTkFCTEVEXFxuIGlmIChkb3Qodl9UYW5nZW50LCB2X1RhbmdlbnQpID4gMC4wKSB7XFxuIHZlYzMgbm9ybWFsVGV4ZWwgPSB0ZXh0dXJlMkQobm9ybWFsTWFwLCB1dikueHl6O1xcbiBpZiAoZG90KG5vcm1hbFRleGVsLCBub3JtYWxUZXhlbCkgPiAwLjApIHsgTiA9IChub3JtYWxUZXhlbCAqIDIuMCAtIDEuMCk7XFxuIE4gPSBub3JtYWxpemUoTiAqIHZlYzMobm9ybWFsU2NhbGUsIG5vcm1hbFNjYWxlLCAxLjApKTtcXG4gdGJuWzFdID0gLXRiblsxXTtcXG4gTiA9IG5vcm1hbGl6ZSh0Ym4gKiBOKTtcXG4gfVxcbiB9XFxuI2VuZGlmXFxuIHZlYzMgZGlmZnVzZVRlcm0gPSB2ZWMzKDAuMCwgMC4wLCAwLjApO1xcbiB2ZWMzIHNwZWN1bGFyVGVybSA9IHZlYzMoMC4wLCAwLjAsIDAuMCk7XFxuIGZsb2F0IG5kdiA9IGNsYW1wKGRvdChOLCBWKSwgMC4wLCAxLjApO1xcbiB2ZWMzIGZyZXNuZWxUZXJtID0gRl9TY2hsaWNrKG5kdiwgc3BlYyk7XFxuI2lmZGVmIEFNQklFTlRfTElHSFRfQ09VTlRcXG4gZm9yKGludCBfaWR4XyA9IDA7IF9pZHhfIDwgQU1CSUVOVF9MSUdIVF9DT1VOVDsgX2lkeF8rKylcXG4ge3tcXG4gZGlmZnVzZVRlcm0gKz0gYW1iaWVudExpZ2h0Q29sb3JbX2lkeF9dO1xcbiB9fVxcbiNlbmRpZlxcbiNpZmRlZiBBTUJJRU5UX1NIX0xJR0hUX0NPVU5UXFxuIGZvcihpbnQgX2lkeF8gPSAwOyBfaWR4XyA8IEFNQklFTlRfU0hfTElHSFRfQ09VTlQ7IF9pZHhfKyspXFxuIHt7XFxuIGRpZmZ1c2VUZXJtICs9IGNhbGNBbWJpZW50U0hMaWdodChfaWR4XywgTikgKiBhbWJpZW50U0hMaWdodENvbG9yW19pZHhfXTtcXG4gfX1cXG4jZW5kaWZcXG4jaWZkZWYgUE9JTlRfTElHSFRfQ09VTlRcXG4jaWYgZGVmaW5lZChQT0lOVF9MSUdIVF9TSEFET1dNQVBfQ09VTlQpXFxuIGZsb2F0IHNoYWRvd0NvbnRyaWJzUG9pbnRbUE9JTlRfTElHSFRfQ09VTlRdO1xcbiBpZihzaGFkb3dFbmFibGVkKVxcbiB7XFxuIGNvbXB1dGVTaGFkb3dPZlBvaW50TGlnaHRzKHZfV29ybGRQb3NpdGlvbiwgc2hhZG93Q29udHJpYnNQb2ludCk7XFxuIH1cXG4jZW5kaWZcXG4gZm9yKGludCBfaWR4XyA9IDA7IF9pZHhfIDwgUE9JTlRfTElHSFRfQ09VTlQ7IF9pZHhfKyspXFxuIHt7XFxuIHZlYzMgbGlnaHRQb3NpdGlvbiA9IHBvaW50TGlnaHRQb3NpdGlvbltfaWR4X107XFxuIHZlYzMgbGMgPSBwb2ludExpZ2h0Q29sb3JbX2lkeF9dO1xcbiBmbG9hdCByYW5nZSA9IHBvaW50TGlnaHRSYW5nZVtfaWR4X107XFxuIHZlYzMgTCA9IGxpZ2h0UG9zaXRpb24gLSB2X1dvcmxkUG9zaXRpb247XFxuIGZsb2F0IGRpc3QgPSBsZW5ndGgoTCk7XFxuIGZsb2F0IGF0dGVudWF0aW9uID0gbGlnaHRBdHRlbnVhdGlvbihkaXN0LCByYW5nZSk7XFxuIEwgLz0gZGlzdDtcXG4gdmVjMyBIID0gbm9ybWFsaXplKEwgKyBWKTtcXG4gZmxvYXQgbmRsID0gY2xhbXAoZG90KE4sIEwpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IG5kaCA9IGNsYW1wKGRvdChOLCBIKSwgMC4wLCAxLjApO1xcbiBmbG9hdCBzaGFkb3dDb250cmliID0gMS4wO1xcbiNpZiBkZWZpbmVkKFBPSU5UX0xJR0hUX1NIQURPV01BUF9DT1VOVClcXG4gaWYoc2hhZG93RW5hYmxlZClcXG4ge1xcbiBzaGFkb3dDb250cmliID0gc2hhZG93Q29udHJpYnNQb2ludFtfaWR4X107XFxuIH1cXG4jZW5kaWZcXG4gdmVjMyBsaSA9IGxjICogbmRsICogYXR0ZW51YXRpb24gKiBzaGFkb3dDb250cmliO1xcbiBkaWZmdXNlVGVybSArPSBsaTtcXG4gc3BlY3VsYXJUZXJtICs9IGxpICogZnJlc25lbFRlcm0gKiBEX1Bob25nKGcsIG5kaCk7XFxuIH19XFxuI2VuZGlmXFxuI2lmZGVmIERJUkVDVElPTkFMX0xJR0hUX0NPVU5UXFxuI2lmIGRlZmluZWQoRElSRUNUSU9OQUxfTElHSFRfU0hBRE9XTUFQX0NPVU5UKVxcbiBmbG9hdCBzaGFkb3dDb250cmlic0RpcltESVJFQ1RJT05BTF9MSUdIVF9DT1VOVF07XFxuIGlmKHNoYWRvd0VuYWJsZWQpXFxuIHtcXG4gY29tcHV0ZVNoYWRvd09mRGlyZWN0aW9uYWxMaWdodHModl9Xb3JsZFBvc2l0aW9uLCBzaGFkb3dDb250cmlic0Rpcik7XFxuIH1cXG4jZW5kaWZcXG4gZm9yKGludCBfaWR4XyA9IDA7IF9pZHhfIDwgRElSRUNUSU9OQUxfTElHSFRfQ09VTlQ7IF9pZHhfKyspXFxuIHt7XFxuIHZlYzMgTCA9IC1ub3JtYWxpemUoZGlyZWN0aW9uYWxMaWdodERpcmVjdGlvbltfaWR4X10pO1xcbiB2ZWMzIGxjID0gZGlyZWN0aW9uYWxMaWdodENvbG9yW19pZHhfXTtcXG4gdmVjMyBIID0gbm9ybWFsaXplKEwgKyBWKTtcXG4gZmxvYXQgbmRsID0gY2xhbXAoZG90KE4sIEwpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IG5kaCA9IGNsYW1wKGRvdChOLCBIKSwgMC4wLCAxLjApO1xcbiBmbG9hdCBzaGFkb3dDb250cmliID0gMS4wO1xcbiNpZiBkZWZpbmVkKERJUkVDVElPTkFMX0xJR0hUX1NIQURPV01BUF9DT1VOVClcXG4gaWYoc2hhZG93RW5hYmxlZClcXG4ge1xcbiBzaGFkb3dDb250cmliID0gc2hhZG93Q29udHJpYnNEaXJbX2lkeF9dO1xcbiB9XFxuI2VuZGlmXFxuIHZlYzMgbGkgPSBsYyAqIG5kbCAqIHNoYWRvd0NvbnRyaWI7XFxuIGRpZmZ1c2VUZXJtICs9IGxpO1xcbiBzcGVjdWxhclRlcm0gKz0gbGkgKiBmcmVzbmVsVGVybSAqIERfUGhvbmcoZywgbmRoKTtcXG4gfX1cXG4jZW5kaWZcXG4jaWZkZWYgU1BPVF9MSUdIVF9DT1VOVFxcbiNpZiBkZWZpbmVkKFNQT1RfTElHSFRfU0hBRE9XTUFQX0NPVU5UKVxcbiBmbG9hdCBzaGFkb3dDb250cmlic1Nwb3RbU1BPVF9MSUdIVF9DT1VOVF07XFxuIGlmKHNoYWRvd0VuYWJsZWQpXFxuIHtcXG4gY29tcHV0ZVNoYWRvd09mU3BvdExpZ2h0cyh2X1dvcmxkUG9zaXRpb24sIHNoYWRvd0NvbnRyaWJzU3BvdCk7XFxuIH1cXG4jZW5kaWZcXG4gZm9yKGludCBpID0gMDsgaSA8IFNQT1RfTElHSFRfQ09VTlQ7IGkrKylcXG4ge1xcbiB2ZWMzIGxpZ2h0UG9zaXRpb24gPSBzcG90TGlnaHRQb3NpdGlvbltpXTtcXG4gdmVjMyBzcG90TGlnaHREaXJlY3Rpb24gPSAtbm9ybWFsaXplKHNwb3RMaWdodERpcmVjdGlvbltpXSk7XFxuIHZlYzMgbGMgPSBzcG90TGlnaHRDb2xvcltpXTtcXG4gZmxvYXQgcmFuZ2UgPSBzcG90TGlnaHRSYW5nZVtpXTtcXG4gZmxvYXQgYSA9IHNwb3RMaWdodFVtYnJhQW5nbGVDb3NpbmVbaV07XFxuIGZsb2F0IGIgPSBzcG90TGlnaHRQZW51bWJyYUFuZ2xlQ29zaW5lW2ldO1xcbiBmbG9hdCBmYWxsb2ZmRmFjdG9yID0gc3BvdExpZ2h0RmFsbG9mZkZhY3RvcltpXTtcXG4gdmVjMyBMID0gbGlnaHRQb3NpdGlvbiAtIHZfV29ybGRQb3NpdGlvbjtcXG4gZmxvYXQgZGlzdCA9IGxlbmd0aChMKTtcXG4gZmxvYXQgYXR0ZW51YXRpb24gPSBsaWdodEF0dGVudWF0aW9uKGRpc3QsIHJhbmdlKTtcXG4gTCAvPSBkaXN0O1xcbiBmbG9hdCBjID0gZG90KHNwb3RMaWdodERpcmVjdGlvbiwgTCk7XFxuIGZsb2F0IGZhbGxvZmY7XFxuIGZhbGxvZmYgPSBjbGFtcCgoYyAtIGEpIC8oYiAtIGEpLCAwLjAsIDEuMCk7XFxuIGZhbGxvZmYgPSBwb3coZmFsbG9mZiwgZmFsbG9mZkZhY3Rvcik7XFxuIHZlYzMgSCA9IG5vcm1hbGl6ZShMICsgVik7XFxuIGZsb2F0IG5kbCA9IGNsYW1wKGRvdChOLCBMKSwgMC4wLCAxLjApO1xcbiBmbG9hdCBuZGggPSBjbGFtcChkb3QoTiwgSCksIDAuMCwgMS4wKTtcXG4gZmxvYXQgc2hhZG93Q29udHJpYiA9IDEuMDtcXG4jaWYgZGVmaW5lZChTUE9UX0xJR0hUX1NIQURPV01BUF9DT1VOVClcXG4gaWYgKHNoYWRvd0VuYWJsZWQpXFxuIHtcXG4gc2hhZG93Q29udHJpYiA9IHNoYWRvd0NvbnRyaWJzU3BvdFtpXTtcXG4gfVxcbiNlbmRpZlxcbiB2ZWMzIGxpID0gbGMgKiBhdHRlbnVhdGlvbiAqICgxLjAgLSBmYWxsb2ZmKSAqIHNoYWRvd0NvbnRyaWIgKiBuZGw7XFxuIGRpZmZ1c2VUZXJtICs9IGxpO1xcbiBzcGVjdWxhclRlcm0gKz0gbGkgKiBmcmVzbmVsVGVybSAqIERfUGhvbmcoZywgbmRoKTtcXG4gfVxcbiNlbmRpZlxcbiB2ZWM0IG91dENvbG9yID0gYWxiZWRvQ29sb3I7XFxuIG91dENvbG9yLnJnYiAqPSBtYXgoZGlmZnVzZVRlcm0sIHZlYzMoMC4wKSk7XFxuIG91dENvbG9yLnJnYiArPSBtYXgoc3BlY3VsYXJUZXJtLCB2ZWMzKDAuMCkpO1xcbiNpZmRlZiBBTUJJRU5UX0NVQkVNQVBfTElHSFRfQ09VTlRcXG4gdmVjMyBMID0gcmVmbGVjdCgtViwgTik7XFxuIGZsb2F0IHJvdWdoMiA9IGNsYW1wKDEuMCAtIGcsIDAuMCwgMS4wKTtcXG4gZmxvYXQgYmlhczIgPSByb3VnaDIgKiA1LjA7XFxuIHZlYzIgYnJkZlBhcmFtMiA9IHRleHR1cmUyRChhbWJpZW50Q3ViZW1hcExpZ2h0QlJERkxvb2t1cFswXSwgdmVjMihyb3VnaDIsIG5kdikpLnh5O1xcbiB2ZWMzIGVudldlaWdodDIgPSBzcGVjICogYnJkZlBhcmFtMi54ICsgYnJkZlBhcmFtMi55O1xcbiB2ZWMzIGVudlRleGVsMjtcXG4gZm9yKGludCBfaWR4XyA9IDA7IF9pZHhfIDwgQU1CSUVOVF9DVUJFTUFQX0xJR0hUX0NPVU5UOyBfaWR4XysrKVxcbiB7e1xcbiAjaWZkZWYgU1VQUE9SVF9URVhUVVJFX0xPRFxcbiBlbnZUZXhlbDIgPSBSR0JNRGVjb2RlKHRleHR1cmVDdWJlTG9kRVhUKGFtYmllbnRDdWJlbWFwTGlnaHRDdWJlbWFwW19pZHhfXSwgTCwgYmlhczIpLCA4LjEyKTtcXG4gI2Vsc2VcXG4gZW52VGV4ZWwyID0gUkdCTURlY29kZSh0ZXh0dXJlQ3ViZShhbWJpZW50Q3ViZW1hcExpZ2h0Q3ViZW1hcFtfaWR4X10sIEwpLCA4LjEyKTtcXG4gI2VuZGlmXFxuIG91dENvbG9yLnJnYiArPSBhbWJpZW50Q3ViZW1hcExpZ2h0Q29sb3JbX2lkeF9dICogZW52VGV4ZWwyICogZW52V2VpZ2h0MjtcXG4gfX1cXG4jZW5kaWZcXG4jaWZkZWYgRU5WSVJPTk1FTlRNQVBfRU5BQkxFRFxcbiB2ZWMzIGVudldlaWdodCA9IGcgKiBmcmVzbmVsVGVybTtcXG4gdmVjMyBMID0gcmVmbGVjdCgtViwgTik7XFxuICNpZmRlZiBQQVJBTExBWF9DT1JSRUNURURcXG4gTCA9IHBhcmFsbGF4Q29ycmVjdChMLCB2X1dvcmxkUG9zaXRpb24sIGVudmlyb25tZW50Qm94TWluLCBlbnZpcm9ubWVudEJveE1heCk7XFxuI2VuZGlmXFxuICNpZmRlZiBFTlZJUk9OTUVOVE1BUF9QUkVGSUxURVJcXG4gZmxvYXQgcm91Z2ggPSBjbGFtcCgxLjAgLSBnLCAwLjAsIDEuMCk7XFxuIGZsb2F0IGJpYXMgPSByb3VnaCAqIG1heE1pcG1hcExldmVsO1xcbiAjaWZkZWYgU1VQUE9SVF9URVhUVVJFX0xPRFxcbiB2ZWMzIGVudlRleGVsID0gZGVjb2RlSERSKHRleHR1cmVDdWJlTG9kRVhUKGVudmlyb25tZW50TWFwLCBMLCBiaWFzKSkucmdiO1xcbiAjZWxzZVxcbiB2ZWMzIGVudlRleGVsID0gZGVjb2RlSERSKHRleHR1cmVDdWJlKGVudmlyb25tZW50TWFwLCBMKSkucmdiO1xcbiAjZW5kaWZcXG4gI2lmZGVmIEJSREZMT09LVVBfRU5BQkxFRFxcbiB2ZWMyIGJyZGZQYXJhbSA9IHRleHR1cmUyRChicmRmTG9va3VwLCB2ZWMyKHJvdWdoLCBuZHYpKS54eTtcXG4gZW52V2VpZ2h0ID0gc3BlYyAqIGJyZGZQYXJhbS54ICsgYnJkZlBhcmFtLnk7XFxuICNlbmRpZlxcbiAjZWxzZVxcbiB2ZWMzIGVudlRleGVsID0gdGV4dHVyZUN1YmUoZW52aXJvbm1lbnRNYXAsIEwpLnh5ejtcXG4gI2VuZGlmXFxuIG91dENvbG9yLnJnYiArPSBlbnZUZXhlbCAqIGVudldlaWdodDtcXG4jZW5kaWZcXG4gZmxvYXQgYW9GYWN0b3IgPSAxLjA7XFxuI2lmZGVmIFNTQU9NQVBfRU5BQkxFRFxcbiBhb0ZhY3RvciA9IG1pbih0ZXh0dXJlMkQoc3Nhb01hcCwgKGdsX0ZyYWdDb29yZC54eSAtIHZpZXdwb3J0Lnh5KSAvIHZpZXdwb3J0Lnp3KS5yLCBhb0ZhY3Rvcik7XFxuI2VuZGlmXFxuI2lmZGVmIEFPTUFQX0VOQUJMRURcXG4gYW9GYWN0b3IgPSBtaW4oMS4wIC0gY2xhbXAoKDEuMCAtIHRleHR1cmUyRChhb01hcCwgdl9UZXhjb29yZDIpLnIpICogYW9JbnRlbnNpdHksIDAuMCwgMS4wKSwgYW9GYWN0b3IpO1xcbiNlbmRpZlxcbiNpZmRlZiBPQ0NMVVNJT05NQVBfRU5BQkxFRFxcbiBhb0ZhY3RvciA9IG1pbigxLjAgLSBjbGFtcCgoMS4wIC0gdGV4dHVyZTJEKG9jY2x1c2lvbk1hcCwgdl9UZXhjb29yZCkuciksIDAuMCwgMS4wKSwgYW9GYWN0b3IpO1xcbiNlbmRpZlxcbiBvdXRDb2xvci5yZ2IgKj0gYW9GYWN0b3I7XFxuIHZlYzMgbEVtaXNzaW9uID0gZW1pc3Npb247XFxuI2lmZGVmIEVNSVNTSVZFTUFQX0VOQUJMRURcXG4gbEVtaXNzaW9uICo9IHRleHR1cmUyRChlbWlzc2l2ZU1hcCwgdXYpLnJnYjtcXG4jZW5kaWZcXG4gb3V0Q29sb3IucmdiICs9IGxFbWlzc2lvbiAqIGVtaXNzaW9uSW50ZW5zaXR5O1xcbiBpZihsaW5lV2lkdGggPiAwLilcXG4ge1xcbiBvdXRDb2xvci5yZ2IgPSBtaXgob3V0Q29sb3IucmdiLCBsaW5lQ29sb3IucmdiLCAoMS4wIC0gZWRnZUZhY3RvcihsaW5lV2lkdGgpKSAqIGxpbmVDb2xvci5hKTtcXG4gfVxcbiNpZmRlZiBBTFBIQV9URVNUXFxuIGlmIChvdXRDb2xvci5hIDwgYWxwaGFDdXRvZmYpIHtcXG4gZGlzY2FyZDtcXG4gfVxcbiNlbmRpZlxcbiNpZmRlZiBUT05FTUFQUElOR1xcbiBvdXRDb2xvci5yZ2IgPSBBQ0VTVG9uZU1hcHBpbmcob3V0Q29sb3IucmdiKTtcXG4jZW5kaWZcXG4jaWZkZWYgU1JHQl9FTkNPREVcXG4gb3V0Q29sb3IgPSBsaW5lYXJUb3NSR0Iob3V0Q29sb3IpO1xcbiNlbmRpZlxcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIob3V0Q29sb3IpO1xcbiBAaW1wb3J0IGNsYXkudXRpbC5sb2dkZXB0aF9mcmFnbWVudF9tYWluXFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuc3RhbmRhcmRNUi52ZXJ0ZXhcXG5AaW1wb3J0IGNsYXkuc3RhbmRhcmQudmVydGV4XFxuQGVuZFxcbkBleHBvcnQgY2xheS5zdGFuZGFyZE1SLmZyYWdtZW50XFxuI2RlZmluZSBVU0VfTUVUQUxORVNTXFxuI2RlZmluZSBVU0VfUk9VR0hORVNTXFxuQGltcG9ydCBjbGF5LnN0YW5kYXJkLmZyYWdtZW50XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL3N0YW5kYXJkLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDg0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///84\n");

/***/ }),
/* 85 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Joint__ = __webpack_require__(58);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__glmatrix_quat__ = __webpack_require__(27);\n\n\n\n\n\n\n\n\n\n\n\n\nvar tmpBoundingBox = new __WEBPACK_IMPORTED_MODULE_4__math_BoundingBox__[\"a\" /* default */]();\nvar tmpMat4 = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n\n/**\n * @constructor clay.Skeleton\n */\nvar Skeleton = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Skeleton# */{\n\n        /**\n         * Relative root node that not affect transform of joint.\n         * @type {clay.Node}\n         */\n        relativeRootNode: null,\n        /**\n         * @type {string}\n         */\n        name: '',\n\n        /**\n         * joints\n         * @type {Array.<clay.Joint>}\n         */\n        joints: [],\n\n        /**\n         * bounding box with bound geometry.\n         * @type {clay.BoundingBox}\n         */\n        boundingBox: null,\n\n        _clips: [],\n\n        // Matrix to joint space (relative to root joint)\n        _invBindPoseMatricesArray: null,\n\n        // Use subarray instead of copy back each time computing matrix\n        // http://jsperf.com/subarray-vs-copy-for-array-transform/5\n        _jointMatricesSubArrays: [],\n\n        // jointMatrix * currentPoseMatrix\n        // worldTransform is relative to the root bone\n        // still in model space not world space\n        _skinMatricesArray: null,\n\n        _skinMatricesSubArrays: [],\n\n        _subSkinMatricesArray: {}\n    };\n},\n/** @lends clay.Skeleton.prototype */\n{\n\n    /**\n     * Add a skinning clip and create a map between clip and skeleton\n     * @param {clay.animation.SkinningClip} clip\n     * @param {Object} [mapRule] Map between joint name in skeleton and joint name in clip\n     */\n    addClip: function (clip, mapRule) {\n        // Clip have been exists in\n        for (var i = 0; i < this._clips.length; i++) {\n            if (this._clips[i].clip === clip) {\n                return;\n            }\n        }\n        // Map the joint index in skeleton to joint pose index in clip\n        var maps = [];\n        for (var i = 0; i < this.joints.length; i++) {\n            maps[i] = -1;\n        }\n        // Create avatar\n        for (var i = 0; i < clip.tracks.length; i++) {\n            for (var j = 0; j < this.joints.length; j++) {\n                var joint = this.joints[j];\n                var track = clip.tracks[i];\n                var jointName = joint.name;\n                if (mapRule) {\n                    jointName = mapRule[jointName];\n                }\n                if (track.name === jointName) {\n                    maps[j] = i;\n                    break;\n                }\n            }\n        }\n\n        this._clips.push({\n            maps: maps,\n            clip: clip\n        });\n\n        return this._clips.length - 1;\n    },\n\n    /**\n     * @param {clay.animation.SkinningClip} clip\n     */\n    removeClip: function (clip) {\n        var idx = -1;\n        for (var i = 0; i < this._clips.length; i++) {\n            if (this._clips[i].clip === clip) {\n                idx = i;\n                break;\n            }\n        }\n        if (idx > 0) {\n            this._clips.splice(idx, 1);\n        }\n    },\n    /**\n     * Remove all clips\n     */\n    removeClipsAll: function () {\n        this._clips = [];\n    },\n\n    /**\n     * Get clip by index\n     * @param  {number} index\n     */\n    getClip: function (index) {\n        if (this._clips[index]) {\n            return this._clips[index].clip;\n        }\n    },\n\n    /**\n     * @return {number}\n     */\n    getClipNumber: function () {\n        return this._clips.length;\n    },\n\n    /**\n     * Calculate joint matrices from node transform\n     * @function\n     */\n    updateJointMatrices: (function () {\n\n        var m4 = __WEBPACK_IMPORTED_MODULE_6__glmatrix_mat4__[\"a\" /* default */].create();\n\n        return function () {\n            this._invBindPoseMatricesArray = new Float32Array(this.joints.length * 16);\n            this._skinMatricesArray = new Float32Array(this.joints.length * 16);\n\n            for (var i = 0; i < this.joints.length; i++) {\n                var joint = this.joints[i];\n                __WEBPACK_IMPORTED_MODULE_6__glmatrix_mat4__[\"a\" /* default */].copy(m4, joint.node.worldTransform.array);\n                __WEBPACK_IMPORTED_MODULE_6__glmatrix_mat4__[\"a\" /* default */].invert(m4, m4);\n\n                var offset = i * 16;\n                for (var j = 0; j < 16; j++) {\n                    this._invBindPoseMatricesArray[offset + j] = m4[j];\n                }\n            }\n\n            this.updateMatricesSubArrays();\n        };\n    })(),\n\n    /**\n     * Update boundingBox of each joint bound to geometry.\n     * ASSUME skeleton and geometry joints are matched.\n     * @param {clay.Geometry} geometry\n     */\n    updateJointsBoundingBoxes: function (geometry) {\n        var attributes = geometry.attributes;\n        var positionAttr = attributes.position;\n        var jointAttr = attributes.joint;\n        var weightAttr = attributes.weight;\n\n        var jointsBoundingBoxes = [];\n        for (var i = 0; i < this.joints.length; i++) {\n            jointsBoundingBoxes[i] = new __WEBPACK_IMPORTED_MODULE_4__math_BoundingBox__[\"a\" /* default */]();\n            jointsBoundingBoxes[i].__updated = false;\n        }\n\n        var vtxJoint = [];\n        var vtxPos = [];\n        var vtxWeight = [];\n        var maxJointIdx = 0;\n        for (var i = 0; i < geometry.vertexCount; i++) {\n            jointAttr.get(i, vtxJoint);\n            positionAttr.get(i, vtxPos);\n            weightAttr.get(i, vtxWeight);\n\n            for (var k = 0; k < 4; k++) {\n                if (vtxWeight[k] > 0.01) {\n                    var jointIdx = vtxJoint[k];\n                    maxJointIdx = Math.max(maxJointIdx, jointIdx);\n\n                    var min = jointsBoundingBoxes[jointIdx].min.array;\n                    var max = jointsBoundingBoxes[jointIdx].max.array;\n\n                    jointsBoundingBoxes[jointIdx].__updated = true;\n\n                    min = __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__[\"a\" /* default */].min(min, min, vtxPos);\n                    max = __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__[\"a\" /* default */].max(max, max, vtxPos);\n                }\n            }\n        }\n\n        this._jointsBoundingBoxes = jointsBoundingBoxes;\n\n        this.boundingBox = new __WEBPACK_IMPORTED_MODULE_4__math_BoundingBox__[\"a\" /* default */]();\n\n        if (maxJointIdx < this.joints.length - 1) {\n            console.warn('Geometry joints and skeleton joints don\\'t match');\n        }\n    },\n\n    setJointMatricesArray: function (arr) {\n        this._invBindPoseMatricesArray = arr;\n        this._skinMatricesArray = new Float32Array(arr.length);\n        this.updateMatricesSubArrays();\n    },\n\n    updateMatricesSubArrays: function () {\n        for (var i = 0; i < this.joints.length; i++) {\n            this._jointMatricesSubArrays[i] = this._invBindPoseMatricesArray.subarray(i * 16, (i+1) * 16);\n            this._skinMatricesSubArrays[i] = this._skinMatricesArray.subarray(i * 16, (i+1) * 16);\n        }\n    },\n\n    /**\n     * Update skinning matrices\n     */\n    update: function () {\n\n        this._setPose();\n\n        var jointsBoundingBoxes = this._jointsBoundingBoxes;\n\n        for (var i = 0; i < this.joints.length; i++) {\n            var joint = this.joints[i];\n            __WEBPACK_IMPORTED_MODULE_6__glmatrix_mat4__[\"a\" /* default */].multiply(\n                this._skinMatricesSubArrays[i],\n                joint.node.worldTransform.array,\n                this._jointMatricesSubArrays[i]\n            );\n        }\n        if (this.boundingBox) {\n            this.boundingBox.min.set(Infinity, Infinity, Infinity);\n            this.boundingBox.max.set(-Infinity, -Infinity, -Infinity);\n            for (var i = 0; i < this.joints.length; i++) {\n                var joint = this.joints[i];\n                var bbox = jointsBoundingBoxes[i];\n                if (bbox.__updated) {\n                    tmpBoundingBox.copy(bbox);\n                    tmpMat4.array = this._skinMatricesSubArrays[i];\n                    tmpBoundingBox.applyTransform(tmpMat4);\n\n                    this.boundingBox.union(tmpBoundingBox);\n                }\n            }\n        }\n    },\n\n    getSubSkinMatrices: function (meshId, joints) {\n        var subArray = this._subSkinMatricesArray[meshId];\n        if (!subArray) {\n            subArray\n                = this._subSkinMatricesArray[meshId]\n                = new Float32Array(joints.length * 16);\n        }\n        var cursor = 0;\n        for (var i = 0; i < joints.length; i++) {\n            var idx = joints[i];\n            for (var j = 0; j < 16; j++) {\n                subArray[cursor++] = this._skinMatricesArray[idx * 16 + j];\n            }\n        }\n        return subArray;\n    },\n\n    getSubSkinMatricesTexture: function (meshId, joints) {\n        var skinMatrices = this.getSubSkinMatrices(meshId, joints);\n        var size;\n        var numJoints = this.joints.length;\n        if (numJoints > 256) {\n            size = 64;\n        }\n        else if (numJoints > 64) {\n            size = 32;\n        }\n        else if (numJoints > 16) {\n            size = 16;\n        }\n        else {\n            size = 8;\n        }\n\n        var texture = this._skinMatricesTexture = this._skinMatricesTexture || new __WEBPACK_IMPORTED_MODULE_2__Texture2D__[\"a\" /* default */]({\n            type: __WEBPACK_IMPORTED_MODULE_3__Texture__[\"a\" /* default */].FLOAT,\n            minFilter: __WEBPACK_IMPORTED_MODULE_3__Texture__[\"a\" /* default */].NEAREST,\n            magFilter: __WEBPACK_IMPORTED_MODULE_3__Texture__[\"a\" /* default */].NEAREST,\n            useMipmap: false,\n            flipY: false\n        });\n        texture.width = size;\n        texture.height = size;\n\n        if (!texture.pixels || texture.pixels.length !== size * size * 4) {\n            texture.pixels = new Float32Array(size * size * 4);\n        }\n        texture.pixels.set(skinMatrices);\n        texture.dirty();\n\n        return texture;\n    },\n\n    getSkinMatricesTexture: function () {\n\n\n        return this._skinMatricesTexture;\n    },\n\n    _setPose: function () {\n        if (this._clips[0]) {\n            var clip = this._clips[0].clip;\n            var maps = this._clips[0].maps;\n\n            for (var i = 0; i < this.joints.length; i++) {\n                var joint = this.joints[i];\n                if (maps[i] === -1) {\n                    continue;\n                }\n                var pose = clip.tracks[maps[i]];\n\n                // Not update if there is no data.\n                // PENDING If sync pose.position, pose.rotation, pose.scale\n                if (pose.channels.position) {\n                    __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__[\"a\" /* default */].copy(joint.node.position.array, pose.position);\n                }\n                if (pose.channels.rotation) {\n                    __WEBPACK_IMPORTED_MODULE_8__glmatrix_quat__[\"a\" /* default */].copy(joint.node.rotation.array, pose.rotation);\n                }\n                if (pose.channels.scale) {\n                    __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__[\"a\" /* default */].copy(joint.node.scale.array, pose.scale);\n                }\n\n                joint.node.position._dirty = true;\n                joint.node.rotation._dirty = true;\n                joint.node.scale._dirty = true;\n            }\n        }\n    },\n\n    clone: function (clonedNodesMap) {\n        var skeleton = new Skeleton();\n        skeleton.name = this.name;\n\n        for (var i = 0; i < this.joints.length; i++) {\n            var newJoint = new __WEBPACK_IMPORTED_MODULE_1__Joint__[\"a\" /* default */]();\n            var joint = this.joints[i];\n            newJoint.name = joint.name;\n            newJoint.index = joint.index;\n\n            if (clonedNodesMap) {\n                var newNode = clonedNodesMap[joint.node.__uid__];\n\n                if (!newNode) {\n                    // PENDING\n                    console.warn('Can\\'t find node');\n                }\n\n                newJoint.node = newNode || joint.node;\n            }\n            else {\n                newJoint.node = joint.node;\n            }\n\n            skeleton.joints.push(newJoint);\n        }\n\n        if (this._invBindPoseMatricesArray) {\n            var len = this._invBindPoseMatricesArray.length;\n            skeleton._invBindPoseMatricesArray = new Float32Array(len);\n            for (var i = 0; i < len; i++) {\n                skeleton._invBindPoseMatricesArray[i] = this._invBindPoseMatricesArray[i];\n            }\n\n            skeleton._skinMatricesArray = new Float32Array(len);\n\n            skeleton.updateMatricesSubArrays();\n        }\n\n        skeleton._jointsBoundingBoxe = (this._jointsBoundingBoxes || []).map(function (bbox) {\n            return bbox.clone();\n        });\n\n        skeleton.update();\n\n        return skeleton;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Skeleton);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9Ta2VsZXRvbi5qcz84OTQyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4vY29yZS9CYXNlJztcbmltcG9ydCBKb2ludCBmcm9tICcuL0pvaW50JztcbmltcG9ydCBUZXh0dXJlMkQgZnJvbSAnLi9UZXh0dXJlMkQnO1xuaW1wb3J0IFRleHR1cmUgZnJvbSAnLi9UZXh0dXJlJztcbmltcG9ydCBCb3VuZGluZ0JveCBmcm9tICcuL21hdGgvQm91bmRpbmdCb3gnO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSAnLi9tYXRoL01hdHJpeDQnO1xuXG5pbXBvcnQgbWF0NCBmcm9tICcuL2dsbWF0cml4L21hdDQnO1xuaW1wb3J0IHZlYzMgZnJvbSAnLi9nbG1hdHJpeC92ZWMzJztcbmltcG9ydCBxdWF0IGZyb20gJy4vZ2xtYXRyaXgvcXVhdCc7XG5cblxudmFyIHRtcEJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG52YXIgdG1wTWF0NCA9IG5ldyBNYXRyaXg0KCk7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuU2tlbGV0b25cbiAqL1xudmFyIFNrZWxldG9uID0gQmFzZS5leHRlbmQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuU2tlbGV0b24jICove1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWxhdGl2ZSByb290IG5vZGUgdGhhdCBub3QgYWZmZWN0IHRyYW5zZm9ybSBvZiBqb2ludC5cbiAgICAgICAgICogQHR5cGUge2NsYXkuTm9kZX1cbiAgICAgICAgICovXG4gICAgICAgIHJlbGF0aXZlUm9vdE5vZGU6IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgbmFtZTogJycsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGpvaW50c1xuICAgICAgICAgKiBAdHlwZSB7QXJyYXkuPGNsYXkuSm9pbnQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgam9pbnRzOiBbXSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogYm91bmRpbmcgYm94IHdpdGggYm91bmQgZ2VvbWV0cnkuXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LkJvdW5kaW5nQm94fVxuICAgICAgICAgKi9cbiAgICAgICAgYm91bmRpbmdCb3g6IG51bGwsXG5cbiAgICAgICAgX2NsaXBzOiBbXSxcblxuICAgICAgICAvLyBNYXRyaXggdG8gam9pbnQgc3BhY2UgKHJlbGF0aXZlIHRvIHJvb3Qgam9pbnQpXG4gICAgICAgIF9pbnZCaW5kUG9zZU1hdHJpY2VzQXJyYXk6IG51bGwsXG5cbiAgICAgICAgLy8gVXNlIHN1YmFycmF5IGluc3RlYWQgb2YgY29weSBiYWNrIGVhY2ggdGltZSBjb21wdXRpbmcgbWF0cml4XG4gICAgICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL3N1YmFycmF5LXZzLWNvcHktZm9yLWFycmF5LXRyYW5zZm9ybS81XG4gICAgICAgIF9qb2ludE1hdHJpY2VzU3ViQXJyYXlzOiBbXSxcblxuICAgICAgICAvLyBqb2ludE1hdHJpeCAqIGN1cnJlbnRQb3NlTWF0cml4XG4gICAgICAgIC8vIHdvcmxkVHJhbnNmb3JtIGlzIHJlbGF0aXZlIHRvIHRoZSByb290IGJvbmVcbiAgICAgICAgLy8gc3RpbGwgaW4gbW9kZWwgc3BhY2Ugbm90IHdvcmxkIHNwYWNlXG4gICAgICAgIF9za2luTWF0cmljZXNBcnJheTogbnVsbCxcblxuICAgICAgICBfc2tpbk1hdHJpY2VzU3ViQXJyYXlzOiBbXSxcblxuICAgICAgICBfc3ViU2tpbk1hdHJpY2VzQXJyYXk6IHt9XG4gICAgfTtcbn0sXG4vKiogQGxlbmRzIGNsYXkuU2tlbGV0b24ucHJvdG90eXBlICovXG57XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBza2lubmluZyBjbGlwIGFuZCBjcmVhdGUgYSBtYXAgYmV0d2VlbiBjbGlwIGFuZCBza2VsZXRvblxuICAgICAqIEBwYXJhbSB7Y2xheS5hbmltYXRpb24uU2tpbm5pbmdDbGlwfSBjbGlwXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFttYXBSdWxlXSBNYXAgYmV0d2VlbiBqb2ludCBuYW1lIGluIHNrZWxldG9uIGFuZCBqb2ludCBuYW1lIGluIGNsaXBcbiAgICAgKi9cbiAgICBhZGRDbGlwOiBmdW5jdGlvbiAoY2xpcCwgbWFwUnVsZSkge1xuICAgICAgICAvLyBDbGlwIGhhdmUgYmVlbiBleGlzdHMgaW5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jbGlwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NsaXBzW2ldLmNsaXAgPT09IGNsaXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFwIHRoZSBqb2ludCBpbmRleCBpbiBza2VsZXRvbiB0byBqb2ludCBwb3NlIGluZGV4IGluIGNsaXBcbiAgICAgICAgdmFyIG1hcHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmpvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbWFwc1tpXSA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIC8vIENyZWF0ZSBhdmF0YXJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGlwLnRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLmpvaW50cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciBqb2ludCA9IHRoaXMuam9pbnRzW2pdO1xuICAgICAgICAgICAgICAgIHZhciB0cmFjayA9IGNsaXAudHJhY2tzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBqb2ludE5hbWUgPSBqb2ludC5uYW1lO1xuICAgICAgICAgICAgICAgIGlmIChtYXBSdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGpvaW50TmFtZSA9IG1hcFJ1bGVbam9pbnROYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrLm5hbWUgPT09IGpvaW50TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBtYXBzW2pdID0gaTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY2xpcHMucHVzaCh7XG4gICAgICAgICAgICBtYXBzOiBtYXBzLFxuICAgICAgICAgICAgY2xpcDogY2xpcFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fY2xpcHMubGVuZ3RoIC0gMTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtjbGF5LmFuaW1hdGlvbi5Ta2lubmluZ0NsaXB9IGNsaXBcbiAgICAgKi9cbiAgICByZW1vdmVDbGlwOiBmdW5jdGlvbiAoY2xpcCkge1xuICAgICAgICB2YXIgaWR4ID0gLTE7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fY2xpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jbGlwc1tpXS5jbGlwID09PSBjbGlwKSB7XG4gICAgICAgICAgICAgICAgaWR4ID0gaTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaWR4ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fY2xpcHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbGwgY2xpcHNcbiAgICAgKi9cbiAgICByZW1vdmVDbGlwc0FsbDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9jbGlwcyA9IFtdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgY2xpcCBieSBpbmRleFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gaW5kZXhcbiAgICAgKi9cbiAgICBnZXRDbGlwOiBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NsaXBzW2luZGV4XSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NsaXBzW2luZGV4XS5jbGlwO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXRDbGlwTnVtYmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGlwcy5sZW5ndGg7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBqb2ludCBtYXRyaWNlcyBmcm9tIG5vZGUgdHJhbnNmb3JtXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICovXG4gICAgdXBkYXRlSm9pbnRNYXRyaWNlczogKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgbTQgPSBtYXQ0LmNyZWF0ZSgpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLl9pbnZCaW5kUG9zZU1hdHJpY2VzQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuam9pbnRzLmxlbmd0aCAqIDE2KTtcbiAgICAgICAgICAgIHRoaXMuX3NraW5NYXRyaWNlc0FycmF5ID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLmpvaW50cy5sZW5ndGggKiAxNik7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5qb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgam9pbnQgPSB0aGlzLmpvaW50c1tpXTtcbiAgICAgICAgICAgICAgICBtYXQ0LmNvcHkobTQsIGpvaW50Lm5vZGUud29ybGRUcmFuc2Zvcm0uYXJyYXkpO1xuICAgICAgICAgICAgICAgIG1hdDQuaW52ZXJ0KG00LCBtNCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gaSAqIDE2O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMTY7IGorKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbnZCaW5kUG9zZU1hdHJpY2VzQXJyYXlbb2Zmc2V0ICsgal0gPSBtNFtqXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlTWF0cmljZXNTdWJBcnJheXMoKTtcbiAgICAgICAgfTtcbiAgICB9KSgpLFxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGJvdW5kaW5nQm94IG9mIGVhY2ggam9pbnQgYm91bmQgdG8gZ2VvbWV0cnkuXG4gICAgICogQVNTVU1FIHNrZWxldG9uIGFuZCBnZW9tZXRyeSBqb2ludHMgYXJlIG1hdGNoZWQuXG4gICAgICogQHBhcmFtIHtjbGF5Lkdlb21ldHJ5fSBnZW9tZXRyeVxuICAgICAqL1xuICAgIHVwZGF0ZUpvaW50c0JvdW5kaW5nQm94ZXM6IGZ1bmN0aW9uIChnZW9tZXRyeSkge1xuICAgICAgICB2YXIgYXR0cmlidXRlcyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXM7XG4gICAgICAgIHZhciBwb3NpdGlvbkF0dHIgPSBhdHRyaWJ1dGVzLnBvc2l0aW9uO1xuICAgICAgICB2YXIgam9pbnRBdHRyID0gYXR0cmlidXRlcy5qb2ludDtcbiAgICAgICAgdmFyIHdlaWdodEF0dHIgPSBhdHRyaWJ1dGVzLndlaWdodDtcblxuICAgICAgICB2YXIgam9pbnRzQm91bmRpbmdCb3hlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuam9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBqb2ludHNCb3VuZGluZ0JveGVzW2ldID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgICAgICAgICBqb2ludHNCb3VuZGluZ0JveGVzW2ldLl9fdXBkYXRlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHZ0eEpvaW50ID0gW107XG4gICAgICAgIHZhciB2dHhQb3MgPSBbXTtcbiAgICAgICAgdmFyIHZ0eFdlaWdodCA9IFtdO1xuICAgICAgICB2YXIgbWF4Sm9pbnRJZHggPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdlb21ldHJ5LnZlcnRleENvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGpvaW50QXR0ci5nZXQoaSwgdnR4Sm9pbnQpO1xuICAgICAgICAgICAgcG9zaXRpb25BdHRyLmdldChpLCB2dHhQb3MpO1xuICAgICAgICAgICAgd2VpZ2h0QXR0ci5nZXQoaSwgdnR4V2VpZ2h0KTtcblxuICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCA0OyBrKyspIHtcbiAgICAgICAgICAgICAgICBpZiAodnR4V2VpZ2h0W2tdID4gMC4wMSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgam9pbnRJZHggPSB2dHhKb2ludFtrXTtcbiAgICAgICAgICAgICAgICAgICAgbWF4Sm9pbnRJZHggPSBNYXRoLm1heChtYXhKb2ludElkeCwgam9pbnRJZHgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtaW4gPSBqb2ludHNCb3VuZGluZ0JveGVzW2pvaW50SWR4XS5taW4uYXJyYXk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXggPSBqb2ludHNCb3VuZGluZ0JveGVzW2pvaW50SWR4XS5tYXguYXJyYXk7XG5cbiAgICAgICAgICAgICAgICAgICAgam9pbnRzQm91bmRpbmdCb3hlc1tqb2ludElkeF0uX191cGRhdGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBtaW4gPSB2ZWMzLm1pbihtaW4sIG1pbiwgdnR4UG9zKTtcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gdmVjMy5tYXgobWF4LCBtYXgsIHZ0eFBvcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fam9pbnRzQm91bmRpbmdCb3hlcyA9IGpvaW50c0JvdW5kaW5nQm94ZXM7XG5cbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuXG4gICAgICAgIGlmIChtYXhKb2ludElkeCA8IHRoaXMuam9pbnRzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignR2VvbWV0cnkgam9pbnRzIGFuZCBza2VsZXRvbiBqb2ludHMgZG9uXFwndCBtYXRjaCcpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHNldEpvaW50TWF0cmljZXNBcnJheTogZnVuY3Rpb24gKGFycikge1xuICAgICAgICB0aGlzLl9pbnZCaW5kUG9zZU1hdHJpY2VzQXJyYXkgPSBhcnI7XG4gICAgICAgIHRoaXMuX3NraW5NYXRyaWNlc0FycmF5ID0gbmV3IEZsb2F0MzJBcnJheShhcnIubGVuZ3RoKTtcbiAgICAgICAgdGhpcy51cGRhdGVNYXRyaWNlc1N1YkFycmF5cygpO1xuICAgIH0sXG5cbiAgICB1cGRhdGVNYXRyaWNlc1N1YkFycmF5czogZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuam9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl9qb2ludE1hdHJpY2VzU3ViQXJyYXlzW2ldID0gdGhpcy5faW52QmluZFBvc2VNYXRyaWNlc0FycmF5LnN1YmFycmF5KGkgKiAxNiwgKGkrMSkgKiAxNik7XG4gICAgICAgICAgICB0aGlzLl9za2luTWF0cmljZXNTdWJBcnJheXNbaV0gPSB0aGlzLl9za2luTWF0cmljZXNBcnJheS5zdWJhcnJheShpICogMTYsIChpKzEpICogMTYpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBza2lubmluZyBtYXRyaWNlc1xuICAgICAqL1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHRoaXMuX3NldFBvc2UoKTtcblxuICAgICAgICB2YXIgam9pbnRzQm91bmRpbmdCb3hlcyA9IHRoaXMuX2pvaW50c0JvdW5kaW5nQm94ZXM7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmpvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGpvaW50ID0gdGhpcy5qb2ludHNbaV07XG4gICAgICAgICAgICBtYXQ0Lm11bHRpcGx5KFxuICAgICAgICAgICAgICAgIHRoaXMuX3NraW5NYXRyaWNlc1N1YkFycmF5c1tpXSxcbiAgICAgICAgICAgICAgICBqb2ludC5ub2RlLndvcmxkVHJhbnNmb3JtLmFycmF5LFxuICAgICAgICAgICAgICAgIHRoaXMuX2pvaW50TWF0cmljZXNTdWJBcnJheXNbaV1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYm91bmRpbmdCb3gpIHtcbiAgICAgICAgICAgIHRoaXMuYm91bmRpbmdCb3gubWluLnNldChJbmZpbml0eSwgSW5maW5pdHksIEluZmluaXR5KTtcbiAgICAgICAgICAgIHRoaXMuYm91bmRpbmdCb3gubWF4LnNldCgtSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5qb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgam9pbnQgPSB0aGlzLmpvaW50c1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgYmJveCA9IGpvaW50c0JvdW5kaW5nQm94ZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGJib3guX191cGRhdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRtcEJvdW5kaW5nQm94LmNvcHkoYmJveCk7XG4gICAgICAgICAgICAgICAgICAgIHRtcE1hdDQuYXJyYXkgPSB0aGlzLl9za2luTWF0cmljZXNTdWJBcnJheXNbaV07XG4gICAgICAgICAgICAgICAgICAgIHRtcEJvdW5kaW5nQm94LmFwcGx5VHJhbnNmb3JtKHRtcE1hdDQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm91bmRpbmdCb3gudW5pb24odG1wQm91bmRpbmdCb3gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXRTdWJTa2luTWF0cmljZXM6IGZ1bmN0aW9uIChtZXNoSWQsIGpvaW50cykge1xuICAgICAgICB2YXIgc3ViQXJyYXkgPSB0aGlzLl9zdWJTa2luTWF0cmljZXNBcnJheVttZXNoSWRdO1xuICAgICAgICBpZiAoIXN1YkFycmF5KSB7XG4gICAgICAgICAgICBzdWJBcnJheVxuICAgICAgICAgICAgICAgID0gdGhpcy5fc3ViU2tpbk1hdHJpY2VzQXJyYXlbbWVzaElkXVxuICAgICAgICAgICAgICAgID0gbmV3IEZsb2F0MzJBcnJheShqb2ludHMubGVuZ3RoICogMTYpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjdXJzb3IgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGpvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGlkeCA9IGpvaW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMTY7IGorKykge1xuICAgICAgICAgICAgICAgIHN1YkFycmF5W2N1cnNvcisrXSA9IHRoaXMuX3NraW5NYXRyaWNlc0FycmF5W2lkeCAqIDE2ICsgal07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1YkFycmF5O1xuICAgIH0sXG5cbiAgICBnZXRTdWJTa2luTWF0cmljZXNUZXh0dXJlOiBmdW5jdGlvbiAobWVzaElkLCBqb2ludHMpIHtcbiAgICAgICAgdmFyIHNraW5NYXRyaWNlcyA9IHRoaXMuZ2V0U3ViU2tpbk1hdHJpY2VzKG1lc2hJZCwgam9pbnRzKTtcbiAgICAgICAgdmFyIHNpemU7XG4gICAgICAgIHZhciBudW1Kb2ludHMgPSB0aGlzLmpvaW50cy5sZW5ndGg7XG4gICAgICAgIGlmIChudW1Kb2ludHMgPiAyNTYpIHtcbiAgICAgICAgICAgIHNpemUgPSA2NDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChudW1Kb2ludHMgPiA2NCkge1xuICAgICAgICAgICAgc2l6ZSA9IDMyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG51bUpvaW50cyA+IDE2KSB7XG4gICAgICAgICAgICBzaXplID0gMTY7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaXplID0gODtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0ZXh0dXJlID0gdGhpcy5fc2tpbk1hdHJpY2VzVGV4dHVyZSA9IHRoaXMuX3NraW5NYXRyaWNlc1RleHR1cmUgfHwgbmV3IFRleHR1cmUyRCh7XG4gICAgICAgICAgICB0eXBlOiBUZXh0dXJlLkZMT0FULFxuICAgICAgICAgICAgbWluRmlsdGVyOiBUZXh0dXJlLk5FQVJFU1QsXG4gICAgICAgICAgICBtYWdGaWx0ZXI6IFRleHR1cmUuTkVBUkVTVCxcbiAgICAgICAgICAgIHVzZU1pcG1hcDogZmFsc2UsXG4gICAgICAgICAgICBmbGlwWTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHRleHR1cmUud2lkdGggPSBzaXplO1xuICAgICAgICB0ZXh0dXJlLmhlaWdodCA9IHNpemU7XG5cbiAgICAgICAgaWYgKCF0ZXh0dXJlLnBpeGVscyB8fCB0ZXh0dXJlLnBpeGVscy5sZW5ndGggIT09IHNpemUgKiBzaXplICogNCkge1xuICAgICAgICAgICAgdGV4dHVyZS5waXhlbHMgPSBuZXcgRmxvYXQzMkFycmF5KHNpemUgKiBzaXplICogNCk7XG4gICAgICAgIH1cbiAgICAgICAgdGV4dHVyZS5waXhlbHMuc2V0KHNraW5NYXRyaWNlcyk7XG4gICAgICAgIHRleHR1cmUuZGlydHkoKTtcblxuICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICB9LFxuXG4gICAgZ2V0U2tpbk1hdHJpY2VzVGV4dHVyZTogZnVuY3Rpb24gKCkge1xuXG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3NraW5NYXRyaWNlc1RleHR1cmU7XG4gICAgfSxcblxuICAgIF9zZXRQb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jbGlwc1swXSkge1xuICAgICAgICAgICAgdmFyIGNsaXAgPSB0aGlzLl9jbGlwc1swXS5jbGlwO1xuICAgICAgICAgICAgdmFyIG1hcHMgPSB0aGlzLl9jbGlwc1swXS5tYXBzO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuam9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGpvaW50ID0gdGhpcy5qb2ludHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKG1hcHNbaV0gPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcG9zZSA9IGNsaXAudHJhY2tzW21hcHNbaV1dO1xuXG4gICAgICAgICAgICAgICAgLy8gTm90IHVwZGF0ZSBpZiB0aGVyZSBpcyBubyBkYXRhLlxuICAgICAgICAgICAgICAgIC8vIFBFTkRJTkcgSWYgc3luYyBwb3NlLnBvc2l0aW9uLCBwb3NlLnJvdGF0aW9uLCBwb3NlLnNjYWxlXG4gICAgICAgICAgICAgICAgaWYgKHBvc2UuY2hhbm5lbHMucG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5jb3B5KGpvaW50Lm5vZGUucG9zaXRpb24uYXJyYXksIHBvc2UucG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocG9zZS5jaGFubmVscy5yb3RhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBxdWF0LmNvcHkoam9pbnQubm9kZS5yb3RhdGlvbi5hcnJheSwgcG9zZS5yb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwb3NlLmNoYW5uZWxzLnNjYWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZlYzMuY29weShqb2ludC5ub2RlLnNjYWxlLmFycmF5LCBwb3NlLnNjYWxlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBqb2ludC5ub2RlLnBvc2l0aW9uLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgam9pbnQubm9kZS5yb3RhdGlvbi5fZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGpvaW50Lm5vZGUuc2NhbGUuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBjbG9uZTogZnVuY3Rpb24gKGNsb25lZE5vZGVzTWFwKSB7XG4gICAgICAgIHZhciBza2VsZXRvbiA9IG5ldyBTa2VsZXRvbigpO1xuICAgICAgICBza2VsZXRvbi5uYW1lID0gdGhpcy5uYW1lO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5qb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBuZXdKb2ludCA9IG5ldyBKb2ludCgpO1xuICAgICAgICAgICAgdmFyIGpvaW50ID0gdGhpcy5qb2ludHNbaV07XG4gICAgICAgICAgICBuZXdKb2ludC5uYW1lID0gam9pbnQubmFtZTtcbiAgICAgICAgICAgIG5ld0pvaW50LmluZGV4ID0gam9pbnQuaW5kZXg7XG5cbiAgICAgICAgICAgIGlmIChjbG9uZWROb2Rlc01hcCkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdOb2RlID0gY2xvbmVkTm9kZXNNYXBbam9pbnQubm9kZS5fX3VpZF9fXTtcblxuICAgICAgICAgICAgICAgIGlmICghbmV3Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBQRU5ESU5HXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQ2FuXFwndCBmaW5kIG5vZGUnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBuZXdKb2ludC5ub2RlID0gbmV3Tm9kZSB8fCBqb2ludC5ub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3Sm9pbnQubm9kZSA9IGpvaW50Lm5vZGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNrZWxldG9uLmpvaW50cy5wdXNoKG5ld0pvaW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9pbnZCaW5kUG9zZU1hdHJpY2VzQXJyYXkpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSB0aGlzLl9pbnZCaW5kUG9zZU1hdHJpY2VzQXJyYXkubGVuZ3RoO1xuICAgICAgICAgICAgc2tlbGV0b24uX2ludkJpbmRQb3NlTWF0cmljZXNBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkobGVuKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBza2VsZXRvbi5faW52QmluZFBvc2VNYXRyaWNlc0FycmF5W2ldID0gdGhpcy5faW52QmluZFBvc2VNYXRyaWNlc0FycmF5W2ldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBza2VsZXRvbi5fc2tpbk1hdHJpY2VzQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KGxlbik7XG5cbiAgICAgICAgICAgIHNrZWxldG9uLnVwZGF0ZU1hdHJpY2VzU3ViQXJyYXlzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBza2VsZXRvbi5fam9pbnRzQm91bmRpbmdCb3hlID0gKHRoaXMuX2pvaW50c0JvdW5kaW5nQm94ZXMgfHwgW10pLm1hcChmdW5jdGlvbiAoYmJveCkge1xuICAgICAgICAgICAgcmV0dXJuIGJib3guY2xvbmUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2tlbGV0b24udXBkYXRlKCk7XG5cbiAgICAgICAgcmV0dXJuIHNrZWxldG9uO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBTa2VsZXRvbjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvU2tlbGV0b24uanNcbi8vIG1vZHVsZSBpZCA9IDg1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///85\n");

/***/ }),
/* 86 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__source_header_light__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__source_util_glsl_js__ = __webpack_require__(87);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__source_basic_glsl_js__ = __webpack_require__(134);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__source_lambert_glsl_js__ = __webpack_require__(135);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__source_standard_glsl_js__ = __webpack_require__(84);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__source_wireframe_glsl_js__ = __webpack_require__(136);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__source_skybox_glsl_js__ = __webpack_require__(88);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__source_prez_glsl_js__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__library__ = __webpack_require__(57);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__Shader__ = __webpack_require__(6);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_0__source_header_light__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_1__source_util_glsl_js__[\"a\" /* default */]);\n\n// Some build in shaders\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_2__source_basic_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_3__source_lambert_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_4__source_standard_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_5__source_wireframe_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_6__source_skybox_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_7__source_prez_glsl_js__[\"a\" /* default */]);\n\n__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */].template('clay.basic', __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.basic.vertex'), __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.basic.fragment'));\n__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */].template('clay.lambert', __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.lambert.vertex'), __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.lambert.fragment'));\n__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */].template('clay.wireframe', __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.wireframe.vertex'), __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.wireframe.fragment'));\n__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */].template('clay.skybox', __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.skybox.vertex'), __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.skybox.fragment'));\n__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */].template('clay.prez', __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.prez.vertex'), __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.prez.fragment'));\n__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */].template('clay.standard', __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.standard.vertex'), __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.standard.fragment'));\n__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */].template('clay.standardMR', __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.standardMR.vertex'), __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.standardMR.fragment'));\n\n// TODO Must export a module and be used in the other modules. Or it will be tree shaked\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvYnVpbHRpbi5qcz9iZDA4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsaWdodEVzc2wgZnJvbSAnLi9zb3VyY2UvaGVhZGVyL2xpZ2h0JztcbmltcG9ydCB1dGlsRXNzbCBmcm9tICcuL3NvdXJjZS91dGlsLmdsc2wuanMnO1xuXG5pbXBvcnQgYmFzaWNFc3NsIGZyb20gJy4vc291cmNlL2Jhc2ljLmdsc2wuanMnO1xuaW1wb3J0IGxhbWJlcnRFc3NsIGZyb20gJy4vc291cmNlL2xhbWJlcnQuZ2xzbC5qcyc7XG5pbXBvcnQgc3RhbmRhcmRFc3NsIGZyb20gJy4vc291cmNlL3N0YW5kYXJkLmdsc2wuanMnO1xuaW1wb3J0IHdpcmVmcmFtZUVzc2wgZnJvbSAnLi9zb3VyY2Uvd2lyZWZyYW1lLmdsc2wuanMnO1xuaW1wb3J0IHNreWJveEVzc2wgZnJvbSAnLi9zb3VyY2Uvc2t5Ym94Lmdsc2wuanMnO1xuaW1wb3J0IHByZXpFc3NsIGZyb20gJy4vc291cmNlL3ByZXouZ2xzbC5qcyc7XG5cbmltcG9ydCBsaWJyYXJ5IGZyb20gJy4vbGlicmFyeSc7XG5pbXBvcnQgU2hhZGVyIGZyb20gJy4uL1NoYWRlcic7XG5cblxuU2hhZGVyWydpbXBvcnQnXShsaWdodEVzc2wpO1xuU2hhZGVyWydpbXBvcnQnXSh1dGlsRXNzbCk7XG5cbi8vIFNvbWUgYnVpbGQgaW4gc2hhZGVyc1xuU2hhZGVyWydpbXBvcnQnXShiYXNpY0Vzc2wpO1xuU2hhZGVyWydpbXBvcnQnXShsYW1iZXJ0RXNzbCk7XG5TaGFkZXJbJ2ltcG9ydCddKHN0YW5kYXJkRXNzbCk7XG5TaGFkZXJbJ2ltcG9ydCddKHdpcmVmcmFtZUVzc2wpO1xuU2hhZGVyWydpbXBvcnQnXShza3lib3hFc3NsKTtcblNoYWRlclsnaW1wb3J0J10ocHJlekVzc2wpO1xuXG5saWJyYXJ5LnRlbXBsYXRlKCdjbGF5LmJhc2ljJywgU2hhZGVyLnNvdXJjZSgnY2xheS5iYXNpYy52ZXJ0ZXgnKSwgU2hhZGVyLnNvdXJjZSgnY2xheS5iYXNpYy5mcmFnbWVudCcpKTtcbmxpYnJhcnkudGVtcGxhdGUoJ2NsYXkubGFtYmVydCcsIFNoYWRlci5zb3VyY2UoJ2NsYXkubGFtYmVydC52ZXJ0ZXgnKSwgU2hhZGVyLnNvdXJjZSgnY2xheS5sYW1iZXJ0LmZyYWdtZW50JykpO1xubGlicmFyeS50ZW1wbGF0ZSgnY2xheS53aXJlZnJhbWUnLCBTaGFkZXIuc291cmNlKCdjbGF5LndpcmVmcmFtZS52ZXJ0ZXgnKSwgU2hhZGVyLnNvdXJjZSgnY2xheS53aXJlZnJhbWUuZnJhZ21lbnQnKSk7XG5saWJyYXJ5LnRlbXBsYXRlKCdjbGF5LnNreWJveCcsIFNoYWRlci5zb3VyY2UoJ2NsYXkuc2t5Ym94LnZlcnRleCcpLCBTaGFkZXIuc291cmNlKCdjbGF5LnNreWJveC5mcmFnbWVudCcpKTtcbmxpYnJhcnkudGVtcGxhdGUoJ2NsYXkucHJleicsIFNoYWRlci5zb3VyY2UoJ2NsYXkucHJlei52ZXJ0ZXgnKSwgU2hhZGVyLnNvdXJjZSgnY2xheS5wcmV6LmZyYWdtZW50JykpO1xubGlicmFyeS50ZW1wbGF0ZSgnY2xheS5zdGFuZGFyZCcsIFNoYWRlci5zb3VyY2UoJ2NsYXkuc3RhbmRhcmQudmVydGV4JyksIFNoYWRlci5zb3VyY2UoJ2NsYXkuc3RhbmRhcmQuZnJhZ21lbnQnKSk7XG5saWJyYXJ5LnRlbXBsYXRlKCdjbGF5LnN0YW5kYXJkTVInLCBTaGFkZXIuc291cmNlKCdjbGF5LnN0YW5kYXJkTVIudmVydGV4JyksIFNoYWRlci5zb3VyY2UoJ2NsYXkuc3RhbmRhcmRNUi5mcmFnbWVudCcpKTtcblxuLy8gVE9ETyBNdXN0IGV4cG9ydCBhIG1vZHVsZSBhbmQgYmUgdXNlZCBpbiB0aGUgb3RoZXIgbW9kdWxlcy4gT3IgaXQgd2lsbCBiZSB0cmVlIHNoYWtlZFxuZXhwb3J0IGRlZmF1bHQgbGlicmFyeTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3NoYWRlci9idWlsdGluLmpzXG4vLyBtb2R1bGUgaWQgPSA4NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///86\n");

/***/ }),
/* 87 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"\\n@export clay.util.rand\\nhighp float rand(vec2 uv) {\\n const highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);\\n return fract(sin(sn) * c);\\n}\\n@end\\n@export clay.util.calculate_attenuation\\nuniform float attenuationFactor : 5.0;\\nfloat lightAttenuation(float dist, float range)\\n{\\n float attenuation = 1.0;\\n attenuation = dist*dist/(range*range+1.0);\\n float att_s = attenuationFactor;\\n attenuation = 1.0/(attenuation*att_s+1.0);\\n att_s = 1.0/(att_s+1.0);\\n attenuation = attenuation - att_s;\\n attenuation /= 1.0 - att_s;\\n return clamp(attenuation, 0.0, 1.0);\\n}\\n@end\\n@export clay.util.edge_factor\\n#ifdef SUPPORT_STANDARD_DERIVATIVES\\nfloat edgeFactor(float width)\\n{\\n vec3 d = fwidth(v_Barycentric);\\n vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);\\n return min(min(a3.x, a3.y), a3.z);\\n}\\n#else\\nfloat edgeFactor(float width)\\n{\\n return 1.0;\\n}\\n#endif\\n@end\\n@export clay.util.encode_float\\nvec4 encodeFloat(const in float depth)\\n{\\n const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\\n const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\\n vec4 res = fract(depth * bitShifts);\\n res -= res.xxyz * bit_mask;\\n return res;\\n}\\n@end\\n@export clay.util.decode_float\\nfloat decodeFloat(const in vec4 color)\\n{\\n const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\\n return dot(color, bitShifts);\\n}\\n@end\\n@export clay.util.float\\n@import clay.util.encode_float\\n@import clay.util.decode_float\\n@end\\n@export clay.util.rgbm_decode\\nvec3 RGBMDecode(vec4 rgbm, float range) {\\n return range * rgbm.rgb * rgbm.a;\\n}\\n@end\\n@export clay.util.rgbm_encode\\nvec4 RGBMEncode(vec3 color, float range) {\\n if (dot(color, color) == 0.0) {\\n return vec4(0.0);\\n }\\n vec4 rgbm;\\n color /= range;\\n rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);\\n rgbm.a = ceil(rgbm.a * 255.0) / 255.0;\\n rgbm.rgb = color / rgbm.a;\\n return rgbm;\\n}\\n@end\\n@export clay.util.rgbm\\n@import clay.util.rgbm_decode\\n@import clay.util.rgbm_encode\\nvec4 decodeHDR(vec4 color)\\n{\\n#if defined(RGBM_DECODE) || defined(RGBM)\\n return vec4(RGBMDecode(color, 8.12), 1.0);\\n#else\\n return color;\\n#endif\\n}\\nvec4 encodeHDR(vec4 color)\\n{\\n#if defined(RGBM_ENCODE) || defined(RGBM)\\n return RGBMEncode(color.xyz, 8.12);\\n#else\\n return color;\\n#endif\\n}\\n@end\\n@export clay.util.srgb\\nvec4 sRGBToLinear(in vec4 value) {\\n return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);\\n}\\nvec4 linearTosRGB(in vec4 value) {\\n return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);\\n}\\n@end\\n@export clay.chunk.skinning_header\\n#ifdef SKINNING\\nattribute vec3 weight : WEIGHT;\\nattribute vec4 joint : JOINT;\\n#ifdef USE_SKIN_MATRICES_TEXTURE\\nuniform sampler2D skinMatricesTexture : ignore;\\nuniform float skinMatricesTextureSize: ignore;\\nmat4 getSkinMatrix(sampler2D tex, float idx) {\\n float j = idx * 4.0;\\n float x = mod(j, skinMatricesTextureSize);\\n float y = floor(j / skinMatricesTextureSize) + 0.5;\\n vec2 scale = vec2(skinMatricesTextureSize);\\n return mat4(\\n texture2D(tex, vec2(x + 0.5, y) / scale),\\n texture2D(tex, vec2(x + 1.5, y) / scale),\\n texture2D(tex, vec2(x + 2.5, y) / scale),\\n texture2D(tex, vec2(x + 3.5, y) / scale)\\n );\\n}\\nmat4 getSkinMatrix(float idx) {\\n return getSkinMatrix(skinMatricesTexture, idx);\\n}\\n#else\\nuniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;\\nmat4 getSkinMatrix(float idx) {\\n return skinMatrix[int(idx)];\\n}\\n#endif\\n#endif\\n@end\\n@export clay.chunk.skin_matrix\\nmat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;\\nif (weight.y > 1e-4)\\n{\\n skinMatrixWS += getSkinMatrix(joint.y) * weight.y;\\n}\\nif (weight.z > 1e-4)\\n{\\n skinMatrixWS += getSkinMatrix(joint.z) * weight.z;\\n}\\nfloat weightW = 1.0-weight.x-weight.y-weight.z;\\nif (weightW > 1e-4)\\n{\\n skinMatrixWS += getSkinMatrix(joint.w) * weightW;\\n}\\n@end\\n@export clay.chunk.instancing_header\\n#ifdef INSTANCING\\nattribute vec4 instanceMat1;\\nattribute vec4 instanceMat2;\\nattribute vec4 instanceMat3;\\n#endif\\n@end\\n@export clay.chunk.instancing_matrix\\nmat4 instanceMat = mat4(\\n vec4(instanceMat1.xyz, 0.0),\\n vec4(instanceMat2.xyz, 0.0),\\n vec4(instanceMat3.xyz, 0.0),\\n vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)\\n);\\n@end\\n@export clay.util.parallax_correct\\nvec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {\\n vec3 first = (boxMax - pos) / dir;\\n vec3 second = (boxMin - pos) / dir;\\n vec3 further = max(first, second);\\n float dist = min(further.x, min(further.y, further.z));\\n vec3 fixedPos = pos + dir * dist;\\n vec3 boxCenter = (boxMax + boxMin) * 0.5;\\n return normalize(fixedPos - boxCenter);\\n}\\n@end\\n@export clay.util.clamp_sample\\nvec4 clampSample(const in sampler2D texture, const in vec2 coord)\\n{\\n#ifdef STEREO\\n float eye = step(0.5, coord.x) * 0.5;\\n vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));\\n#else\\n vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));\\n#endif\\n return texture2D(texture, coordClamped);\\n}\\n@end\\n@export clay.util.ACES\\nvec3 ACESToneMapping(vec3 color)\\n{\\n const float A = 2.51;\\n const float B = 0.03;\\n const float C = 2.43;\\n const float D = 0.59;\\n const float E = 0.14;\\n return (color * (A * color + B)) / (color * (C * color + D) + E);\\n}\\n@end\\n@export clay.util.logdepth_vertex_header\\n#ifdef LOG_DEPTH\\n#ifdef SUPPORT_FRAG_DEPTH\\nvarying float v_FragDepth;\\n#else\\nuniform float logDepthBufFC: LOG_DEPTH_BUFFER_FC;\\n#endif\\n#endif\\n@end\\n@export clay.util.logdepth_vertex_main\\n#ifdef LOG_DEPTH\\n #ifdef SUPPORT_FRAG_DEPTH\\n v_FragDepth = 1.0 + gl_Position.w;\\n #else\\n gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC - 1.0;\\n gl_Position.z *= gl_Position.w;\\n #endif\\n#endif\\n@end\\n@export clay.util.logdepth_fragment_header\\n#if defined(LOG_DEPTH) && defined(SUPPORT_FRAG_DEPTH)\\nvarying float v_FragDepth;\\nuniform float logDepthBufFC : LOG_DEPTH_BUFFER_FC;\\n#endif\\n@end\\n@export clay.util.logdepth_fragment_main\\n#if defined(LOG_DEPTH) && defined(SUPPORT_FRAG_DEPTH)\\n gl_FragDepthEXT = log2(v_FragDepth) * logDepthBufFC * 0.5;\\n#endif\\n@end\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL3V0aWwuZ2xzbC5qcz83YzljIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiXFxuQGV4cG9ydCBjbGF5LnV0aWwucmFuZFxcbmhpZ2hwIGZsb2F0IHJhbmQodmVjMiB1dikge1xcbiBjb25zdCBoaWdocCBmbG9hdCBhID0gMTIuOTg5OCwgYiA9IDc4LjIzMywgYyA9IDQzNzU4LjU0NTM7XFxuIGhpZ2hwIGZsb2F0IGR0ID0gZG90KHV2Lnh5LCB2ZWMyKGEsYikpLCBzbiA9IG1vZChkdCwgMy4xNDE1OTI2NTM1ODk3OTMpO1xcbiByZXR1cm4gZnJhY3Qoc2luKHNuKSAqIGMpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnV0aWwuY2FsY3VsYXRlX2F0dGVudWF0aW9uXFxudW5pZm9ybSBmbG9hdCBhdHRlbnVhdGlvbkZhY3RvciA6IDUuMDtcXG5mbG9hdCBsaWdodEF0dGVudWF0aW9uKGZsb2F0IGRpc3QsIGZsb2F0IHJhbmdlKVxcbntcXG4gZmxvYXQgYXR0ZW51YXRpb24gPSAxLjA7XFxuIGF0dGVudWF0aW9uID0gZGlzdCpkaXN0LyhyYW5nZSpyYW5nZSsxLjApO1xcbiBmbG9hdCBhdHRfcyA9IGF0dGVudWF0aW9uRmFjdG9yO1xcbiBhdHRlbnVhdGlvbiA9IDEuMC8oYXR0ZW51YXRpb24qYXR0X3MrMS4wKTtcXG4gYXR0X3MgPSAxLjAvKGF0dF9zKzEuMCk7XFxuIGF0dGVudWF0aW9uID0gYXR0ZW51YXRpb24gLSBhdHRfcztcXG4gYXR0ZW51YXRpb24gLz0gMS4wIC0gYXR0X3M7XFxuIHJldHVybiBjbGFtcChhdHRlbnVhdGlvbiwgMC4wLCAxLjApO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnV0aWwuZWRnZV9mYWN0b3JcXG4jaWZkZWYgU1VQUE9SVF9TVEFOREFSRF9ERVJJVkFUSVZFU1xcbmZsb2F0IGVkZ2VGYWN0b3IoZmxvYXQgd2lkdGgpXFxue1xcbiB2ZWMzIGQgPSBmd2lkdGgodl9CYXJ5Y2VudHJpYyk7XFxuIHZlYzMgYTMgPSBzbW9vdGhzdGVwKHZlYzMoMC4wKSwgZCAqIHdpZHRoLCB2X0JhcnljZW50cmljKTtcXG4gcmV0dXJuIG1pbihtaW4oYTMueCwgYTMueSksIGEzLnopO1xcbn1cXG4jZWxzZVxcbmZsb2F0IGVkZ2VGYWN0b3IoZmxvYXQgd2lkdGgpXFxue1xcbiByZXR1cm4gMS4wO1xcbn1cXG4jZW5kaWZcXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnV0aWwuZW5jb2RlX2Zsb2F0XFxudmVjNCBlbmNvZGVGbG9hdChjb25zdCBpbiBmbG9hdCBkZXB0aClcXG57XFxuIGNvbnN0IHZlYzQgYml0U2hpZnRzID0gdmVjNCgyNTYuMCoyNTYuMCoyNTYuMCwgMjU2LjAqMjU2LjAsIDI1Ni4wLCAxLjApO1xcbiBjb25zdCB2ZWM0IGJpdF9tYXNrID0gdmVjNCgwLjAsIDEuMC8yNTYuMCwgMS4wLzI1Ni4wLCAxLjAvMjU2LjApO1xcbiB2ZWM0IHJlcyA9IGZyYWN0KGRlcHRoICogYml0U2hpZnRzKTtcXG4gcmVzIC09IHJlcy54eHl6ICogYml0X21hc2s7XFxuIHJldHVybiByZXM7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkudXRpbC5kZWNvZGVfZmxvYXRcXG5mbG9hdCBkZWNvZGVGbG9hdChjb25zdCBpbiB2ZWM0IGNvbG9yKVxcbntcXG4gY29uc3QgdmVjNCBiaXRTaGlmdHMgPSB2ZWM0KDEuMC8oMjU2LjAqMjU2LjAqMjU2LjApLCAxLjAvKDI1Ni4wKjI1Ni4wKSwgMS4wLzI1Ni4wLCAxLjApO1xcbiByZXR1cm4gZG90KGNvbG9yLCBiaXRTaGlmdHMpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnV0aWwuZmxvYXRcXG5AaW1wb3J0IGNsYXkudXRpbC5lbmNvZGVfZmxvYXRcXG5AaW1wb3J0IGNsYXkudXRpbC5kZWNvZGVfZmxvYXRcXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnV0aWwucmdibV9kZWNvZGVcXG52ZWMzIFJHQk1EZWNvZGUodmVjNCByZ2JtLCBmbG9hdCByYW5nZSkge1xcbiByZXR1cm4gcmFuZ2UgKiByZ2JtLnJnYiAqIHJnYm0uYTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS51dGlsLnJnYm1fZW5jb2RlXFxudmVjNCBSR0JNRW5jb2RlKHZlYzMgY29sb3IsIGZsb2F0IHJhbmdlKSB7XFxuIGlmIChkb3QoY29sb3IsIGNvbG9yKSA9PSAwLjApIHtcXG4gcmV0dXJuIHZlYzQoMC4wKTtcXG4gfVxcbiB2ZWM0IHJnYm07XFxuIGNvbG9yIC89IHJhbmdlO1xcbiByZ2JtLmEgPSBjbGFtcChtYXgobWF4KGNvbG9yLnIsIGNvbG9yLmcpLCBtYXgoY29sb3IuYiwgMWUtNikpLCAwLjAsIDEuMCk7XFxuIHJnYm0uYSA9IGNlaWwocmdibS5hICogMjU1LjApIC8gMjU1LjA7XFxuIHJnYm0ucmdiID0gY29sb3IgLyByZ2JtLmE7XFxuIHJldHVybiByZ2JtO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnV0aWwucmdibVxcbkBpbXBvcnQgY2xheS51dGlsLnJnYm1fZGVjb2RlXFxuQGltcG9ydCBjbGF5LnV0aWwucmdibV9lbmNvZGVcXG52ZWM0IGRlY29kZUhEUih2ZWM0IGNvbG9yKVxcbntcXG4jaWYgZGVmaW5lZChSR0JNX0RFQ09ERSkgfHwgZGVmaW5lZChSR0JNKVxcbiByZXR1cm4gdmVjNChSR0JNRGVjb2RlKGNvbG9yLCA4LjEyKSwgMS4wKTtcXG4jZWxzZVxcbiByZXR1cm4gY29sb3I7XFxuI2VuZGlmXFxufVxcbnZlYzQgZW5jb2RlSERSKHZlYzQgY29sb3IpXFxue1xcbiNpZiBkZWZpbmVkKFJHQk1fRU5DT0RFKSB8fCBkZWZpbmVkKFJHQk0pXFxuIHJldHVybiBSR0JNRW5jb2RlKGNvbG9yLnh5eiwgOC4xMik7XFxuI2Vsc2VcXG4gcmV0dXJuIGNvbG9yO1xcbiNlbmRpZlxcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnV0aWwuc3JnYlxcbnZlYzQgc1JHQlRvTGluZWFyKGluIHZlYzQgdmFsdWUpIHtcXG4gcmV0dXJuIHZlYzQobWl4KHBvdyh2YWx1ZS5yZ2IgKiAwLjk0Nzg2NzI5ODYgKyB2ZWMzKDAuMDUyMTMyNzAxNCksIHZlYzMoMi40KSksIHZhbHVlLnJnYiAqIDAuMDc3Mzk5MzgwOCwgdmVjMyhsZXNzVGhhbkVxdWFsKHZhbHVlLnJnYiwgdmVjMygwLjA0MDQ1KSkpKSwgdmFsdWUudyk7XFxufVxcbnZlYzQgbGluZWFyVG9zUkdCKGluIHZlYzQgdmFsdWUpIHtcXG4gcmV0dXJuIHZlYzQobWl4KHBvdyh2YWx1ZS5yZ2IsIHZlYzMoMC40MTY2NikpICogMS4wNTUgLSB2ZWMzKDAuMDU1KSwgdmFsdWUucmdiICogMTIuOTIsIHZlYzMobGVzc1RoYW5FcXVhbCh2YWx1ZS5yZ2IsIHZlYzMoMC4wMDMxMzA4KSkpKSwgdmFsdWUudyk7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuY2h1bmsuc2tpbm5pbmdfaGVhZGVyXFxuI2lmZGVmIFNLSU5OSU5HXFxuYXR0cmlidXRlIHZlYzMgd2VpZ2h0IDogV0VJR0hUO1xcbmF0dHJpYnV0ZSB2ZWM0IGpvaW50IDogSk9JTlQ7XFxuI2lmZGVmIFVTRV9TS0lOX01BVFJJQ0VTX1RFWFRVUkVcXG51bmlmb3JtIHNhbXBsZXIyRCBza2luTWF0cmljZXNUZXh0dXJlIDogaWdub3JlO1xcbnVuaWZvcm0gZmxvYXQgc2tpbk1hdHJpY2VzVGV4dHVyZVNpemU6IGlnbm9yZTtcXG5tYXQ0IGdldFNraW5NYXRyaXgoc2FtcGxlcjJEIHRleCwgZmxvYXQgaWR4KSB7XFxuIGZsb2F0IGogPSBpZHggKiA0LjA7XFxuIGZsb2F0IHggPSBtb2Qoaiwgc2tpbk1hdHJpY2VzVGV4dHVyZVNpemUpO1xcbiBmbG9hdCB5ID0gZmxvb3IoaiAvIHNraW5NYXRyaWNlc1RleHR1cmVTaXplKSArIDAuNTtcXG4gdmVjMiBzY2FsZSA9IHZlYzIoc2tpbk1hdHJpY2VzVGV4dHVyZVNpemUpO1xcbiByZXR1cm4gbWF0NChcXG4gdGV4dHVyZTJEKHRleCwgdmVjMih4ICsgMC41LCB5KSAvIHNjYWxlKSxcXG4gdGV4dHVyZTJEKHRleCwgdmVjMih4ICsgMS41LCB5KSAvIHNjYWxlKSxcXG4gdGV4dHVyZTJEKHRleCwgdmVjMih4ICsgMi41LCB5KSAvIHNjYWxlKSxcXG4gdGV4dHVyZTJEKHRleCwgdmVjMih4ICsgMy41LCB5KSAvIHNjYWxlKVxcbiApO1xcbn1cXG5tYXQ0IGdldFNraW5NYXRyaXgoZmxvYXQgaWR4KSB7XFxuIHJldHVybiBnZXRTa2luTWF0cml4KHNraW5NYXRyaWNlc1RleHR1cmUsIGlkeCk7XFxufVxcbiNlbHNlXFxudW5pZm9ybSBtYXQ0IHNraW5NYXRyaXhbSk9JTlRfQ09VTlRdIDogU0tJTl9NQVRSSVg7XFxubWF0NCBnZXRTa2luTWF0cml4KGZsb2F0IGlkeCkge1xcbiByZXR1cm4gc2tpbk1hdHJpeFtpbnQoaWR4KV07XFxufVxcbiNlbmRpZlxcbiNlbmRpZlxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuY2h1bmsuc2tpbl9tYXRyaXhcXG5tYXQ0IHNraW5NYXRyaXhXUyA9IGdldFNraW5NYXRyaXgoam9pbnQueCkgKiB3ZWlnaHQueDtcXG5pZiAod2VpZ2h0LnkgPiAxZS00KVxcbntcXG4gc2tpbk1hdHJpeFdTICs9IGdldFNraW5NYXRyaXgoam9pbnQueSkgKiB3ZWlnaHQueTtcXG59XFxuaWYgKHdlaWdodC56ID4gMWUtNClcXG57XFxuIHNraW5NYXRyaXhXUyArPSBnZXRTa2luTWF0cml4KGpvaW50LnopICogd2VpZ2h0Lno7XFxufVxcbmZsb2F0IHdlaWdodFcgPSAxLjAtd2VpZ2h0Lngtd2VpZ2h0Lnktd2VpZ2h0Lno7XFxuaWYgKHdlaWdodFcgPiAxZS00KVxcbntcXG4gc2tpbk1hdHJpeFdTICs9IGdldFNraW5NYXRyaXgoam9pbnQudykgKiB3ZWlnaHRXO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmNodW5rLmluc3RhbmNpbmdfaGVhZGVyXFxuI2lmZGVmIElOU1RBTkNJTkdcXG5hdHRyaWJ1dGUgdmVjNCBpbnN0YW5jZU1hdDE7XFxuYXR0cmlidXRlIHZlYzQgaW5zdGFuY2VNYXQyO1xcbmF0dHJpYnV0ZSB2ZWM0IGluc3RhbmNlTWF0MztcXG4jZW5kaWZcXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmNodW5rLmluc3RhbmNpbmdfbWF0cml4XFxubWF0NCBpbnN0YW5jZU1hdCA9IG1hdDQoXFxuIHZlYzQoaW5zdGFuY2VNYXQxLnh5eiwgMC4wKSxcXG4gdmVjNChpbnN0YW5jZU1hdDIueHl6LCAwLjApLFxcbiB2ZWM0KGluc3RhbmNlTWF0My54eXosIDAuMCksXFxuIHZlYzQoaW5zdGFuY2VNYXQxLncsIGluc3RhbmNlTWF0Mi53LCBpbnN0YW5jZU1hdDMudywgMS4wKVxcbik7XFxuQGVuZFxcbkBleHBvcnQgY2xheS51dGlsLnBhcmFsbGF4X2NvcnJlY3RcXG52ZWMzIHBhcmFsbGF4Q29ycmVjdChpbiB2ZWMzIGRpciwgaW4gdmVjMyBwb3MsIGluIHZlYzMgYm94TWluLCBpbiB2ZWMzIGJveE1heCkge1xcbiB2ZWMzIGZpcnN0ID0gKGJveE1heCAtIHBvcykgLyBkaXI7XFxuIHZlYzMgc2Vjb25kID0gKGJveE1pbiAtIHBvcykgLyBkaXI7XFxuIHZlYzMgZnVydGhlciA9IG1heChmaXJzdCwgc2Vjb25kKTtcXG4gZmxvYXQgZGlzdCA9IG1pbihmdXJ0aGVyLngsIG1pbihmdXJ0aGVyLnksIGZ1cnRoZXIueikpO1xcbiB2ZWMzIGZpeGVkUG9zID0gcG9zICsgZGlyICogZGlzdDtcXG4gdmVjMyBib3hDZW50ZXIgPSAoYm94TWF4ICsgYm94TWluKSAqIDAuNTtcXG4gcmV0dXJuIG5vcm1hbGl6ZShmaXhlZFBvcyAtIGJveENlbnRlcik7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkudXRpbC5jbGFtcF9zYW1wbGVcXG52ZWM0IGNsYW1wU2FtcGxlKGNvbnN0IGluIHNhbXBsZXIyRCB0ZXh0dXJlLCBjb25zdCBpbiB2ZWMyIGNvb3JkKVxcbntcXG4jaWZkZWYgU1RFUkVPXFxuIGZsb2F0IGV5ZSA9IHN0ZXAoMC41LCBjb29yZC54KSAqIDAuNTtcXG4gdmVjMiBjb29yZENsYW1wZWQgPSBjbGFtcChjb29yZCwgdmVjMihleWUsIDAuMCksIHZlYzIoMC41ICsgZXllLCAxLjApKTtcXG4jZWxzZVxcbiB2ZWMyIGNvb3JkQ2xhbXBlZCA9IGNsYW1wKGNvb3JkLCB2ZWMyKDAuMCksIHZlYzIoMS4wKSk7XFxuI2VuZGlmXFxuIHJldHVybiB0ZXh0dXJlMkQodGV4dHVyZSwgY29vcmRDbGFtcGVkKTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS51dGlsLkFDRVNcXG52ZWMzIEFDRVNUb25lTWFwcGluZyh2ZWMzIGNvbG9yKVxcbntcXG4gY29uc3QgZmxvYXQgQSA9IDIuNTE7XFxuIGNvbnN0IGZsb2F0IEIgPSAwLjAzO1xcbiBjb25zdCBmbG9hdCBDID0gMi40MztcXG4gY29uc3QgZmxvYXQgRCA9IDAuNTk7XFxuIGNvbnN0IGZsb2F0IEUgPSAwLjE0O1xcbiByZXR1cm4gKGNvbG9yICogKEEgKiBjb2xvciArIEIpKSAvIChjb2xvciAqIChDICogY29sb3IgKyBEKSArIEUpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfdmVydGV4X2hlYWRlclxcbiNpZmRlZiBMT0dfREVQVEhcXG4jaWZkZWYgU1VQUE9SVF9GUkFHX0RFUFRIXFxudmFyeWluZyBmbG9hdCB2X0ZyYWdEZXB0aDtcXG4jZWxzZVxcbnVuaWZvcm0gZmxvYXQgbG9nRGVwdGhCdWZGQzogTE9HX0RFUFRIX0JVRkZFUl9GQztcXG4jZW5kaWZcXG4jZW5kaWZcXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfdmVydGV4X21haW5cXG4jaWZkZWYgTE9HX0RFUFRIXFxuICNpZmRlZiBTVVBQT1JUX0ZSQUdfREVQVEhcXG4gdl9GcmFnRGVwdGggPSAxLjAgKyBnbF9Qb3NpdGlvbi53O1xcbiAjZWxzZVxcbiBnbF9Qb3NpdGlvbi56ID0gbG9nMihtYXgoMWUtNiwgZ2xfUG9zaXRpb24udyArIDEuMCkpICogbG9nRGVwdGhCdWZGQyAtIDEuMDtcXG4gZ2xfUG9zaXRpb24ueiAqPSBnbF9Qb3NpdGlvbi53O1xcbiAjZW5kaWZcXG4jZW5kaWZcXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfZnJhZ21lbnRfaGVhZGVyXFxuI2lmIGRlZmluZWQoTE9HX0RFUFRIKSAmJiBkZWZpbmVkKFNVUFBPUlRfRlJBR19ERVBUSClcXG52YXJ5aW5nIGZsb2F0IHZfRnJhZ0RlcHRoO1xcbnVuaWZvcm0gZmxvYXQgbG9nRGVwdGhCdWZGQyA6IExPR19ERVBUSF9CVUZGRVJfRkM7XFxuI2VuZGlmXFxuQGVuZFxcbkBleHBvcnQgY2xheS51dGlsLmxvZ2RlcHRoX2ZyYWdtZW50X21haW5cXG4jaWYgZGVmaW5lZChMT0dfREVQVEgpICYmIGRlZmluZWQoU1VQUE9SVF9GUkFHX0RFUFRIKVxcbiBnbF9GcmFnRGVwdGhFWFQgPSBsb2cyKHZfRnJhZ0RlcHRoKSAqIGxvZ0RlcHRoQnVmRkMgKiAwLjU7XFxuI2VuZGlmXFxuQGVuZFxcblwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL3V0aWwuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gODdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///87\n");

/***/ }),
/* 88 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.skybox.vertex\\n#define SHADER_NAME skybox\\nuniform mat4 world : WORLD;\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nattribute vec3 position : POSITION;\\nvarying vec3 v_WorldPosition;\\nvoid main()\\n{\\n v_WorldPosition = (world * vec4(position, 1.0)).xyz;\\n gl_Position = worldViewProjection * vec4(position, 1.0);\\n}\\n@end\\n@export clay.skybox.fragment\\n#define PI 3.1415926\\nuniform mat4 viewInverse : VIEWINVERSE;\\n#ifdef EQUIRECTANGULAR\\nuniform sampler2D environmentMap;\\n#else\\nuniform samplerCube environmentMap;\\n#endif\\nuniform float lod: 0.0;\\nvarying vec3 v_WorldPosition;\\n@import clay.util.rgbm\\n@import clay.util.srgb\\n@import clay.util.ACES\\nvoid main()\\n{\\n vec3 eyePos = viewInverse[3].xyz;\\n vec3 V = normalize(v_WorldPosition - eyePos);\\n#ifdef EQUIRECTANGULAR\\n float phi = acos(V.y);\\n float theta = atan(-V.x, V.z) + PI * 0.5;\\n vec2 uv = vec2(theta / 2.0 / PI, phi / PI);\\n vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));\\n#else\\n #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)\\n vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));\\n #else\\n vec4 texel = decodeHDR(textureCube(environmentMap, V));\\n #endif\\n#endif\\n#ifdef SRGB_DECODE\\n texel = sRGBToLinear(texel);\\n#endif\\n#ifdef TONEMAPPING\\n texel.rgb = ACESToneMapping(texel.rgb);\\n#endif\\n#ifdef SRGB_ENCODE\\n texel = linearTosRGB(texel);\\n#endif\\n gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL3NreWJveC5nbHNsLmpzP2NjODMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuc2t5Ym94LnZlcnRleFxcbiNkZWZpbmUgU0hBREVSX05BTUUgc2t5Ym94XFxudW5pZm9ybSBtYXQ0IHdvcmxkIDogV09STEQ7XFxudW5pZm9ybSBtYXQ0IHdvcmxkVmlld1Byb2plY3Rpb24gOiBXT1JMRFZJRVdQUk9KRUNUSU9OO1xcbmF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uIDogUE9TSVRJT047XFxudmFyeWluZyB2ZWMzIHZfV29ybGRQb3NpdGlvbjtcXG52b2lkIG1haW4oKVxcbntcXG4gdl9Xb3JsZFBvc2l0aW9uID0gKHdvcmxkICogdmVjNChwb3NpdGlvbiwgMS4wKSkueHl6O1xcbiBnbF9Qb3NpdGlvbiA9IHdvcmxkVmlld1Byb2plY3Rpb24gKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnNreWJveC5mcmFnbWVudFxcbiNkZWZpbmUgUEkgMy4xNDE1OTI2XFxudW5pZm9ybSBtYXQ0IHZpZXdJbnZlcnNlIDogVklFV0lOVkVSU0U7XFxuI2lmZGVmIEVRVUlSRUNUQU5HVUxBUlxcbnVuaWZvcm0gc2FtcGxlcjJEIGVudmlyb25tZW50TWFwO1xcbiNlbHNlXFxudW5pZm9ybSBzYW1wbGVyQ3ViZSBlbnZpcm9ubWVudE1hcDtcXG4jZW5kaWZcXG51bmlmb3JtIGZsb2F0IGxvZDogMC4wO1xcbnZhcnlpbmcgdmVjMyB2X1dvcmxkUG9zaXRpb247XFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbkBpbXBvcnQgY2xheS51dGlsLnNyZ2JcXG5AaW1wb3J0IGNsYXkudXRpbC5BQ0VTXFxudm9pZCBtYWluKClcXG57XFxuIHZlYzMgZXllUG9zID0gdmlld0ludmVyc2VbM10ueHl6O1xcbiB2ZWMzIFYgPSBub3JtYWxpemUodl9Xb3JsZFBvc2l0aW9uIC0gZXllUG9zKTtcXG4jaWZkZWYgRVFVSVJFQ1RBTkdVTEFSXFxuIGZsb2F0IHBoaSA9IGFjb3MoVi55KTtcXG4gZmxvYXQgdGhldGEgPSBhdGFuKC1WLngsIFYueikgKyBQSSAqIDAuNTtcXG4gdmVjMiB1diA9IHZlYzIodGhldGEgLyAyLjAgLyBQSSwgcGhpIC8gUEkpO1xcbiB2ZWM0IHRleGVsID0gZGVjb2RlSERSKHRleHR1cmUyRChlbnZpcm9ubWVudE1hcCwgZnJhY3QodXYpKSk7XFxuI2Vsc2VcXG4gI2lmIGRlZmluZWQoTE9EKSB8fCBkZWZpbmVkKFNVUFBPUlRfVEVYVFVSRV9MT0QpXFxuIHZlYzQgdGV4ZWwgPSBkZWNvZGVIRFIodGV4dHVyZUN1YmVMb2RFWFQoZW52aXJvbm1lbnRNYXAsIFYsIGxvZCkpO1xcbiAjZWxzZVxcbiB2ZWM0IHRleGVsID0gZGVjb2RlSERSKHRleHR1cmVDdWJlKGVudmlyb25tZW50TWFwLCBWKSk7XFxuICNlbmRpZlxcbiNlbmRpZlxcbiNpZmRlZiBTUkdCX0RFQ09ERVxcbiB0ZXhlbCA9IHNSR0JUb0xpbmVhcih0ZXhlbCk7XFxuI2VuZGlmXFxuI2lmZGVmIFRPTkVNQVBQSU5HXFxuIHRleGVsLnJnYiA9IEFDRVNUb25lTWFwcGluZyh0ZXhlbC5yZ2IpO1xcbiNlbmRpZlxcbiNpZmRlZiBTUkdCX0VOQ09ERVxcbiB0ZXhlbCA9IGxpbmVhclRvc1JHQih0ZXhlbCk7XFxuI2VuZGlmXFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUih2ZWM0KHRleGVsLnJnYiwgMS4wKSk7XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9za3lib3guZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gODhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///88\n");

/***/ }),
/* 89 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n\n\n\n/**\n * @constructor clay.light.Directional\n * @extends clay.Light\n *\n * @example\n *     var light = new clay.light.Directional({\n *         intensity: 0.5,\n *         color: [1.0, 0.0, 0.0]\n *     });\n *     light.position.set(10, 10, 10);\n *     light.lookAt(clay.Vector3.ZERO);\n *     scene.add(light);\n */\nvar DirectionalLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend(/** @lends clay.light.Directional# */ {\n    /**\n     * @type {number}\n     */\n    shadowBias: 0.001,\n    /**\n     * @type {number}\n     */\n    shadowSlopeScale: 2.0,\n    /**\n     * Shadow cascade.\n     * Use PSSM technique when it is larger than 1 and have a unique directional light in scene.\n     * @type {number}\n     */\n    shadowCascade: 1,\n\n    /**\n     * Available when shadowCascade is larger than 1 and have a unique directional light in scene.\n     * @type {number}\n     */\n    cascadeSplitLogFactor: 0.2\n}, {\n\n    type: 'DIRECTIONAL_LIGHT',\n\n    uniformTemplates: {\n        directionalLightDirection: {\n            type: '3f',\n            value: function (instance) {\n                instance.__dir = instance.__dir || new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]();\n                // Direction is target to eye\n                return instance.__dir.copy(instance.worldTransform.z).normalize().negate().array;\n            }\n        },\n        directionalLightColor: {\n            type: '3f',\n            value: function (instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0] * intensity, color[1] * intensity, color[2] * intensity];\n            }\n        }\n    },\n    /**\n     * @return {clay.light.Directional}\n     * @memberOf clay.light.Directional.prototype\n     */\n    clone: function () {\n        var light = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].prototype.clone.call(this);\n        light.shadowBias = this.shadowBias;\n        light.shadowSlopeScale = this.shadowSlopeScale;\n        return light;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (DirectionalLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9saWdodC9EaXJlY3Rpb25hbC5qcz85YTgwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMaWdodCBmcm9tICcuLi9MaWdodCc7XG5pbXBvcnQgVmVjdG9yMyBmcm9tICcuLi9tYXRoL1ZlY3RvcjMnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LmxpZ2h0LkRpcmVjdGlvbmFsXG4gKiBAZXh0ZW5kcyBjbGF5LkxpZ2h0XG4gKlxuICogQGV4YW1wbGVcbiAqICAgICB2YXIgbGlnaHQgPSBuZXcgY2xheS5saWdodC5EaXJlY3Rpb25hbCh7XG4gKiAgICAgICAgIGludGVuc2l0eTogMC41LFxuICogICAgICAgICBjb2xvcjogWzEuMCwgMC4wLCAwLjBdXG4gKiAgICAgfSk7XG4gKiAgICAgbGlnaHQucG9zaXRpb24uc2V0KDEwLCAxMCwgMTApO1xuICogICAgIGxpZ2h0Lmxvb2tBdChjbGF5LlZlY3RvcjMuWkVSTyk7XG4gKiAgICAgc2NlbmUuYWRkKGxpZ2h0KTtcbiAqL1xudmFyIERpcmVjdGlvbmFsTGlnaHQgPSBMaWdodC5leHRlbmQoLyoqIEBsZW5kcyBjbGF5LmxpZ2h0LkRpcmVjdGlvbmFsIyAqLyB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBzaGFkb3dCaWFzOiAwLjAwMSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNoYWRvd1Nsb3BlU2NhbGU6IDIuMCxcbiAgICAvKipcbiAgICAgKiBTaGFkb3cgY2FzY2FkZS5cbiAgICAgKiBVc2UgUFNTTSB0ZWNobmlxdWUgd2hlbiBpdCBpcyBsYXJnZXIgdGhhbiAxIGFuZCBoYXZlIGEgdW5pcXVlIGRpcmVjdGlvbmFsIGxpZ2h0IGluIHNjZW5lLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2hhZG93Q2FzY2FkZTogMSxcblxuICAgIC8qKlxuICAgICAqIEF2YWlsYWJsZSB3aGVuIHNoYWRvd0Nhc2NhZGUgaXMgbGFyZ2VyIHRoYW4gMSBhbmQgaGF2ZSBhIHVuaXF1ZSBkaXJlY3Rpb25hbCBsaWdodCBpbiBzY2VuZS5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGNhc2NhZGVTcGxpdExvZ0ZhY3RvcjogMC4yXG59LCB7XG5cbiAgICB0eXBlOiAnRElSRUNUSU9OQUxfTElHSFQnLFxuXG4gICAgdW5pZm9ybVRlbXBsYXRlczoge1xuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0RGlyZWN0aW9uOiB7XG4gICAgICAgICAgICB0eXBlOiAnM2YnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlLl9fZGlyID0gaW5zdGFuY2UuX19kaXIgfHwgbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICAvLyBEaXJlY3Rpb24gaXMgdGFyZ2V0IHRvIGV5ZVxuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZS5fX2Rpci5jb3B5KGluc3RhbmNlLndvcmxkVHJhbnNmb3JtLnopLm5vcm1hbGl6ZSgpLm5lZ2F0ZSgpLmFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkaXJlY3Rpb25hbExpZ2h0Q29sb3I6IHtcbiAgICAgICAgICAgIHR5cGU6ICczZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gaW5zdGFuY2UuY29sb3I7XG4gICAgICAgICAgICAgICAgdmFyIGludGVuc2l0eSA9IGluc3RhbmNlLmludGVuc2l0eTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2NvbG9yWzBdICogaW50ZW5zaXR5LCBjb2xvclsxXSAqIGludGVuc2l0eSwgY29sb3JbMl0gKiBpbnRlbnNpdHldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtjbGF5LmxpZ2h0LkRpcmVjdGlvbmFsfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmxpZ2h0LkRpcmVjdGlvbmFsLnByb3RvdHlwZVxuICAgICAqL1xuICAgIGNsb25lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsaWdodCA9IExpZ2h0LnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpO1xuICAgICAgICBsaWdodC5zaGFkb3dCaWFzID0gdGhpcy5zaGFkb3dCaWFzO1xuICAgICAgICBsaWdodC5zaGFkb3dTbG9wZVNjYWxlID0gdGhpcy5zaGFkb3dTbG9wZVNjYWxlO1xuICAgICAgICByZXR1cm4gbGlnaHQ7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IERpcmVjdGlvbmFsTGlnaHQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2xpZ2h0L0RpcmVjdGlvbmFsLmpzXG4vLyBtb2R1bGUgaWQgPSA4OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///89\n");

/***/ }),
/* 90 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n\n\n/**\n * @constructor clay.light.Point\n * @extends clay.Light\n */\nvar PointLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend(/** @lends clay.light.Point# */ {\n    /**\n     * @type {number}\n     */\n    range: 100,\n\n    /**\n     * @type {number}\n     */\n    castShadow: false\n}, {\n\n    type: 'POINT_LIGHT',\n\n    uniformTemplates: {\n        pointLightPosition: {\n            type: '3f',\n            value: function(instance) {\n                return instance.getWorldPosition().array;\n            }\n        },\n        pointLightRange: {\n            type: '1f',\n            value: function(instance) {\n                return instance.range;\n            }\n        },\n        pointLightColor: {\n            type: '3f',\n            value: function(instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0] * intensity, color[1] * intensity, color[2] * intensity];\n            }\n        }\n    },\n    /**\n     * @return {clay.light.Point}\n     * @memberOf clay.light.Point.prototype\n     */\n    clone: function() {\n        var light = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].prototype.clone.call(this);\n        light.range = this.range;\n        return light;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PointLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9saWdodC9Qb2ludC5qcz8wMjIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMaWdodCBmcm9tICcuLi9MaWdodCc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkubGlnaHQuUG9pbnRcbiAqIEBleHRlbmRzIGNsYXkuTGlnaHRcbiAqL1xudmFyIFBvaW50TGlnaHQgPSBMaWdodC5leHRlbmQoLyoqIEBsZW5kcyBjbGF5LmxpZ2h0LlBvaW50IyAqLyB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICByYW5nZTogMTAwLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBjYXN0U2hhZG93OiBmYWxzZVxufSwge1xuXG4gICAgdHlwZTogJ1BPSU5UX0xJR0hUJyxcblxuICAgIHVuaWZvcm1UZW1wbGF0ZXM6IHtcbiAgICAgICAgcG9pbnRMaWdodFBvc2l0aW9uOiB7XG4gICAgICAgICAgICB0eXBlOiAnM2YnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLmdldFdvcmxkUG9zaXRpb24oKS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcG9pbnRMaWdodFJhbmdlOiB7XG4gICAgICAgICAgICB0eXBlOiAnMWYnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLnJhbmdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwb2ludExpZ2h0Q29sb3I6IHtcbiAgICAgICAgICAgIHR5cGU6ICczZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBpbnN0YW5jZS5jb2xvcjtcbiAgICAgICAgICAgICAgICB2YXIgaW50ZW5zaXR5ID0gaW5zdGFuY2UuaW50ZW5zaXR5O1xuICAgICAgICAgICAgICAgIHJldHVybiBbY29sb3JbMF0gKiBpbnRlbnNpdHksIGNvbG9yWzFdICogaW50ZW5zaXR5LCBjb2xvclsyXSAqIGludGVuc2l0eV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2NsYXkubGlnaHQuUG9pbnR9XG4gICAgICogQG1lbWJlck9mIGNsYXkubGlnaHQuUG9pbnQucHJvdG90eXBlXG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbGlnaHQgPSBMaWdodC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTtcbiAgICAgICAgbGlnaHQucmFuZ2UgPSB0aGlzLnJhbmdlO1xuICAgICAgICByZXR1cm4gbGlnaHQ7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFBvaW50TGlnaHQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2xpZ2h0L1BvaW50LmpzXG4vLyBtb2R1bGUgaWQgPSA5MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///90\n");

/***/ }),
/* 91 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n\n\n\n/**\n * @constructor clay.light.Spot\n * @extends clay.Light\n */\nvar SpotLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend(/**@lends clay.light.Spot */ {\n    /**\n     * @type {number}\n     */\n    range: 20,\n    /**\n     * @type {number}\n     */\n    umbraAngle: 30,\n    /**\n     * @type {number}\n     */\n    penumbraAngle: 45,\n    /**\n     * @type {number}\n     */\n    falloffFactor: 2.0,\n    /**\n     * @type {number}\n     */\n    shadowBias: 0.001,\n    /**\n     * @type {number}\n     */\n    shadowSlopeScale: 2.0\n}, {\n\n    type: 'SPOT_LIGHT',\n\n    uniformTemplates: {\n        spotLightPosition: {\n            type: '3f',\n            value: function (instance) {\n                return instance.getWorldPosition().array;\n            }\n        },\n        spotLightRange: {\n            type: '1f',\n            value: function (instance) {\n                return instance.range;\n            }\n        },\n        spotLightUmbraAngleCosine: {\n            type: '1f',\n            value: function (instance) {\n                return Math.cos(instance.umbraAngle * Math.PI / 180);\n            }\n        },\n        spotLightPenumbraAngleCosine: {\n            type: '1f',\n            value: function (instance) {\n                return Math.cos(instance.penumbraAngle * Math.PI / 180);\n            }\n        },\n        spotLightFalloffFactor: {\n            type: '1f',\n            value: function (instance) {\n                return instance.falloffFactor;\n            }\n        },\n        spotLightDirection: {\n            type: '3f',\n            value: function (instance) {\n                instance.__dir = instance.__dir || new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]();\n                // Direction is target to eye\n                return instance.__dir.copy(instance.worldTransform.z).negate().array;\n            }\n        },\n        spotLightColor: {\n            type: '3f',\n            value: function (instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0] * intensity, color[1] * intensity, color[2] * intensity];\n            }\n        }\n    },\n    /**\n     * @return {clay.light.Spot}\n     * @memberOf clay.light.Spot.prototype\n     */\n    clone: function () {\n        var light = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].prototype.clone.call(this);\n        light.range = this.range;\n        light.umbraAngle = this.umbraAngle;\n        light.penumbraAngle = this.penumbraAngle;\n        light.falloffFactor = this.falloffFactor;\n        light.shadowBias = this.shadowBias;\n        light.shadowSlopeScale = this.shadowSlopeScale;\n        return light;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SpotLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9saWdodC9TcG90LmpzPzk5NDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExpZ2h0IGZyb20gJy4uL0xpZ2h0JztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4uL21hdGgvVmVjdG9yMyc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkubGlnaHQuU3BvdFxuICogQGV4dGVuZHMgY2xheS5MaWdodFxuICovXG52YXIgU3BvdExpZ2h0ID0gTGlnaHQuZXh0ZW5kKC8qKkBsZW5kcyBjbGF5LmxpZ2h0LlNwb3QgKi8ge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgcmFuZ2U6IDIwLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdW1icmFBbmdsZTogMzAsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBwZW51bWJyYUFuZ2xlOiA0NSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGZhbGxvZmZGYWN0b3I6IDIuMCxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNoYWRvd0JpYXM6IDAuMDAxLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2hhZG93U2xvcGVTY2FsZTogMi4wXG59LCB7XG5cbiAgICB0eXBlOiAnU1BPVF9MSUdIVCcsXG5cbiAgICB1bmlmb3JtVGVtcGxhdGVzOiB7XG4gICAgICAgIHNwb3RMaWdodFBvc2l0aW9uOiB7XG4gICAgICAgICAgICB0eXBlOiAnM2YnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZS5nZXRXb3JsZFBvc2l0aW9uKCkuYXJyYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNwb3RMaWdodFJhbmdlOiB7XG4gICAgICAgICAgICB0eXBlOiAnMWYnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZS5yYW5nZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3BvdExpZ2h0VW1icmFBbmdsZUNvc2luZToge1xuICAgICAgICAgICAgdHlwZTogJzFmJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5jb3MoaW5zdGFuY2UudW1icmFBbmdsZSAqIE1hdGguUEkgLyAxODApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzcG90TGlnaHRQZW51bWJyYUFuZ2xlQ29zaW5lOiB7XG4gICAgICAgICAgICB0eXBlOiAnMWYnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmNvcyhpbnN0YW5jZS5wZW51bWJyYUFuZ2xlICogTWF0aC5QSSAvIDE4MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNwb3RMaWdodEZhbGxvZmZGYWN0b3I6IHtcbiAgICAgICAgICAgIHR5cGU6ICcxZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLmZhbGxvZmZGYWN0b3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNwb3RMaWdodERpcmVjdGlvbjoge1xuICAgICAgICAgICAgdHlwZTogJzNmJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5fX2RpciA9IGluc3RhbmNlLl9fZGlyIHx8IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgICAgICAgICAgLy8gRGlyZWN0aW9uIGlzIHRhcmdldCB0byBleWVcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2UuX19kaXIuY29weShpbnN0YW5jZS53b3JsZFRyYW5zZm9ybS56KS5uZWdhdGUoKS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3BvdExpZ2h0Q29sb3I6IHtcbiAgICAgICAgICAgIHR5cGU6ICczZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gaW5zdGFuY2UuY29sb3I7XG4gICAgICAgICAgICAgICAgdmFyIGludGVuc2l0eSA9IGluc3RhbmNlLmludGVuc2l0eTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2NvbG9yWzBdICogaW50ZW5zaXR5LCBjb2xvclsxXSAqIGludGVuc2l0eSwgY29sb3JbMl0gKiBpbnRlbnNpdHldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtjbGF5LmxpZ2h0LlNwb3R9XG4gICAgICogQG1lbWJlck9mIGNsYXkubGlnaHQuU3BvdC5wcm90b3R5cGVcbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGlnaHQgPSBMaWdodC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTtcbiAgICAgICAgbGlnaHQucmFuZ2UgPSB0aGlzLnJhbmdlO1xuICAgICAgICBsaWdodC51bWJyYUFuZ2xlID0gdGhpcy51bWJyYUFuZ2xlO1xuICAgICAgICBsaWdodC5wZW51bWJyYUFuZ2xlID0gdGhpcy5wZW51bWJyYUFuZ2xlO1xuICAgICAgICBsaWdodC5mYWxsb2ZmRmFjdG9yID0gdGhpcy5mYWxsb2ZmRmFjdG9yO1xuICAgICAgICBsaWdodC5zaGFkb3dCaWFzID0gdGhpcy5zaGFkb3dCaWFzO1xuICAgICAgICBsaWdodC5zaGFkb3dTbG9wZVNjYWxlID0gdGhpcy5zaGFkb3dTbG9wZVNjYWxlO1xuICAgICAgICByZXR1cm4gbGlnaHQ7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFNwb3RMaWdodDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvbGlnaHQvU3BvdC5qc1xuLy8gbW9kdWxlIGlkID0gOTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///91\n");

/***/ }),
/* 92 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n\n\n/**\n * @constructor clay.light.Ambient\n * @extends clay.Light\n */\nvar AmbientLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend({\n\n    castShadow: false\n\n}, {\n\n    type: 'AMBIENT_LIGHT',\n\n    uniformTemplates: {\n        ambientLightColor: {\n            type: '3f',\n            value: function(instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0]*intensity, color[1]*intensity, color[2]*intensity];\n            }\n        }\n    }\n    /**\n     * @function\n     * @name clone\n     * @return {clay.light.Ambient}\n     * @memberOf clay.light.Ambient.prototype\n     */\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (AmbientLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9saWdodC9BbWJpZW50LmpzPzM1YzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExpZ2h0IGZyb20gJy4uL0xpZ2h0JztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5saWdodC5BbWJpZW50XG4gKiBAZXh0ZW5kcyBjbGF5LkxpZ2h0XG4gKi9cbnZhciBBbWJpZW50TGlnaHQgPSBMaWdodC5leHRlbmQoe1xuXG4gICAgY2FzdFNoYWRvdzogZmFsc2VcblxufSwge1xuXG4gICAgdHlwZTogJ0FNQklFTlRfTElHSFQnLFxuXG4gICAgdW5pZm9ybVRlbXBsYXRlczoge1xuICAgICAgICBhbWJpZW50TGlnaHRDb2xvcjoge1xuICAgICAgICAgICAgdHlwZTogJzNmJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbihpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGluc3RhbmNlLmNvbG9yO1xuICAgICAgICAgICAgICAgIHZhciBpbnRlbnNpdHkgPSBpbnN0YW5jZS5pbnRlbnNpdHk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtjb2xvclswXSppbnRlbnNpdHksIGNvbG9yWzFdKmludGVuc2l0eSwgY29sb3JbMl0qaW50ZW5zaXR5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAbmFtZSBjbG9uZVxuICAgICAqIEByZXR1cm4ge2NsYXkubGlnaHQuQW1iaWVudH1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5saWdodC5BbWJpZW50LnByb3RvdHlwZVxuICAgICAqL1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEFtYmllbnRMaWdodDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvbGlnaHQvQW1iaWVudC5qc1xuLy8gbW9kdWxlIGlkID0gOTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///92\n");

/***/ }),
/* 93 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util_cubemap__ = __webpack_require__(94);\n// https://docs.unrealengine.com/latest/INT/Engine/Rendering/LightingAndShadows/AmbientCubemap/\n\n\n\n/**\n * Ambient cubemap light provides specular parts of Image Based Lighting.\n * Which is a basic requirement for Physically Based Rendering\n * @constructor clay.light.AmbientCubemap\n * @extends clay.Light\n */\nvar AmbientCubemapLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend({\n\n    /**\n     * @type {clay.TextureCube}\n     * @memberOf clay.light.AmbientCubemap#\n     */\n    cubemap: null,\n\n    // TODO\n    // range: 100,\n\n    castShadow: false,\n\n    _normalDistribution: null,\n    _brdfLookup: null\n\n}, /** @lends clay.light.AmbientCubemap# */ {\n\n    type: 'AMBIENT_CUBEMAP_LIGHT',\n\n    /**\n     * Do prefitering the cubemap\n     * @param {clay.Renderer} renderer\n     * @param {number} [size=32]\n     */\n    prefilter: function (renderer, size) {\n        if (!renderer.getGLExtension('EXT_shader_texture_lod')) {\n            console.warn('Device not support textureCubeLodEXT');\n            return;\n        }\n        if (!this._brdfLookup) {\n            this._normalDistribution = __WEBPACK_IMPORTED_MODULE_1__util_cubemap__[\"a\" /* default */].generateNormalDistribution();\n            this._brdfLookup = __WEBPACK_IMPORTED_MODULE_1__util_cubemap__[\"a\" /* default */].integrateBRDF(renderer, this._normalDistribution);\n        }\n        var cubemap = this.cubemap;\n        if (cubemap.__prefiltered) {\n            return;\n        }\n\n        var result = __WEBPACK_IMPORTED_MODULE_1__util_cubemap__[\"a\" /* default */].prefilterEnvironmentMap(\n            renderer, cubemap, {\n                encodeRGBM: true,\n                width: size,\n                height: size\n            }, this._normalDistribution, this._brdfLookup\n        );\n        this.cubemap = result.environmentMap;\n        this.cubemap.__prefiltered = true;\n\n        cubemap.dispose(renderer);\n    },\n\n    getBRDFLookup: function () {\n        return this._brdfLookup;\n    },\n\n    uniformTemplates: {\n        ambientCubemapLightColor: {\n            type: '3f',\n            value: function (instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0]*intensity, color[1]*intensity, color[2]*intensity];\n            }\n        },\n\n        ambientCubemapLightCubemap: {\n            type: 't',\n            value: function (instance) {\n                return instance.cubemap;\n            }\n        },\n\n        ambientCubemapLightBRDFLookup: {\n            type: 't',\n            value: function (instance) {\n                return instance._brdfLookup;\n            }\n        }\n    }\n    /**\n     * @function\n     * @name clone\n     * @return {clay.light.AmbientCubemap}\n     * @memberOf clay.light.AmbientCubemap.prototype\n     */\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (AmbientCubemapLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9saWdodC9BbWJpZW50Q3ViZW1hcC5qcz9mMjkwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGh0dHBzOi8vZG9jcy51bnJlYWxlbmdpbmUuY29tL2xhdGVzdC9JTlQvRW5naW5lL1JlbmRlcmluZy9MaWdodGluZ0FuZFNoYWRvd3MvQW1iaWVudEN1YmVtYXAvXG5pbXBvcnQgTGlnaHQgZnJvbSAnLi4vTGlnaHQnO1xuaW1wb3J0IGN1YmVtYXBVdGlsIGZyb20gJy4uL3V0aWwvY3ViZW1hcCc7XG5cbi8qKlxuICogQW1iaWVudCBjdWJlbWFwIGxpZ2h0IHByb3ZpZGVzIHNwZWN1bGFyIHBhcnRzIG9mIEltYWdlIEJhc2VkIExpZ2h0aW5nLlxuICogV2hpY2ggaXMgYSBiYXNpYyByZXF1aXJlbWVudCBmb3IgUGh5c2ljYWxseSBCYXNlZCBSZW5kZXJpbmdcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LmxpZ2h0LkFtYmllbnRDdWJlbWFwXG4gKiBAZXh0ZW5kcyBjbGF5LkxpZ2h0XG4gKi9cbnZhciBBbWJpZW50Q3ViZW1hcExpZ2h0ID0gTGlnaHQuZXh0ZW5kKHtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5LlRleHR1cmVDdWJlfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmxpZ2h0LkFtYmllbnRDdWJlbWFwI1xuICAgICAqL1xuICAgIGN1YmVtYXA6IG51bGwsXG5cbiAgICAvLyBUT0RPXG4gICAgLy8gcmFuZ2U6IDEwMCxcblxuICAgIGNhc3RTaGFkb3c6IGZhbHNlLFxuXG4gICAgX25vcm1hbERpc3RyaWJ1dGlvbjogbnVsbCxcbiAgICBfYnJkZkxvb2t1cDogbnVsbFxuXG59LCAvKiogQGxlbmRzIGNsYXkubGlnaHQuQW1iaWVudEN1YmVtYXAjICovIHtcblxuICAgIHR5cGU6ICdBTUJJRU5UX0NVQkVNQVBfTElHSFQnLFxuXG4gICAgLyoqXG4gICAgICogRG8gcHJlZml0ZXJpbmcgdGhlIGN1YmVtYXBcbiAgICAgKiBAcGFyYW0ge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzaXplPTMyXVxuICAgICAqL1xuICAgIHByZWZpbHRlcjogZnVuY3Rpb24gKHJlbmRlcmVyLCBzaXplKSB7XG4gICAgICAgIGlmICghcmVuZGVyZXIuZ2V0R0xFeHRlbnNpb24oJ0VYVF9zaGFkZXJfdGV4dHVyZV9sb2QnKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdEZXZpY2Ugbm90IHN1cHBvcnQgdGV4dHVyZUN1YmVMb2RFWFQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2JyZGZMb29rdXApIHtcbiAgICAgICAgICAgIHRoaXMuX25vcm1hbERpc3RyaWJ1dGlvbiA9IGN1YmVtYXBVdGlsLmdlbmVyYXRlTm9ybWFsRGlzdHJpYnV0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLl9icmRmTG9va3VwID0gY3ViZW1hcFV0aWwuaW50ZWdyYXRlQlJERihyZW5kZXJlciwgdGhpcy5fbm9ybWFsRGlzdHJpYnV0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY3ViZW1hcCA9IHRoaXMuY3ViZW1hcDtcbiAgICAgICAgaWYgKGN1YmVtYXAuX19wcmVmaWx0ZXJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlc3VsdCA9IGN1YmVtYXBVdGlsLnByZWZpbHRlckVudmlyb25tZW50TWFwKFxuICAgICAgICAgICAgcmVuZGVyZXIsIGN1YmVtYXAsIHtcbiAgICAgICAgICAgICAgICBlbmNvZGVSR0JNOiB0cnVlLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBzaXplLFxuICAgICAgICAgICAgICAgIGhlaWdodDogc2l6ZVxuICAgICAgICAgICAgfSwgdGhpcy5fbm9ybWFsRGlzdHJpYnV0aW9uLCB0aGlzLl9icmRmTG9va3VwXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuY3ViZW1hcCA9IHJlc3VsdC5lbnZpcm9ubWVudE1hcDtcbiAgICAgICAgdGhpcy5jdWJlbWFwLl9fcHJlZmlsdGVyZWQgPSB0cnVlO1xuXG4gICAgICAgIGN1YmVtYXAuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgfSxcblxuICAgIGdldEJSREZMb29rdXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JyZGZMb29rdXA7XG4gICAgfSxcblxuICAgIHVuaWZvcm1UZW1wbGF0ZXM6IHtcbiAgICAgICAgYW1iaWVudEN1YmVtYXBMaWdodENvbG9yOiB7XG4gICAgICAgICAgICB0eXBlOiAnM2YnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGluc3RhbmNlLmNvbG9yO1xuICAgICAgICAgICAgICAgIHZhciBpbnRlbnNpdHkgPSBpbnN0YW5jZS5pbnRlbnNpdHk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtjb2xvclswXSppbnRlbnNpdHksIGNvbG9yWzFdKmludGVuc2l0eSwgY29sb3JbMl0qaW50ZW5zaXR5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBhbWJpZW50Q3ViZW1hcExpZ2h0Q3ViZW1hcDoge1xuICAgICAgICAgICAgdHlwZTogJ3QnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZS5jdWJlbWFwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGFtYmllbnRDdWJlbWFwTGlnaHRCUkRGTG9va3VwOiB7XG4gICAgICAgICAgICB0eXBlOiAndCcsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLl9icmRmTG9va3VwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBuYW1lIGNsb25lXG4gICAgICogQHJldHVybiB7Y2xheS5saWdodC5BbWJpZW50Q3ViZW1hcH1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5saWdodC5BbWJpZW50Q3ViZW1hcC5wcm90b3R5cGVcbiAgICAgKi9cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBBbWJpZW50Q3ViZW1hcExpZ2h0O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9saWdodC9BbWJpZW50Q3ViZW1hcC5qc1xuLy8gbW9kdWxlIGlkID0gOTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///93\n");

/***/ }),
/* 94 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TextureCube__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__FrameBuffer__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__compositor_Pass__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__plugin_Skybox__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__Scene__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__prePass_EnvironmentMap__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__texture__ = __webpack_require__(59);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__shader_integrateBRDF_glsl_js__ = __webpack_require__(138);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__shader_prefilter_glsl_js__ = __webpack_require__(139);\n// Cubemap prefilter utility\n// http://www.unrealengine.com/files/downloads/2013SiggraphPresentationsNotes.pdf\n// http://http.developer.nvidia.com/GPUGems3/gpugems3_ch20.html\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar cubemapUtil = {};\n\nvar targets = ['px', 'nx', 'py', 'ny', 'pz', 'nz'];\n\n// TODO Downsample\n/**\n * @name clay.util.cubemap.prefilterEnvironmentMap\n * @param  {clay.Renderer} renderer\n * @param  {clay.Texture} envMap\n * @param  {Object} [textureOpts]\n * @param  {number} [textureOpts.width=64]\n * @param  {number} [textureOpts.height=64]\n * @param  {number} [textureOpts.type]\n * @param  {boolean} [textureOpts.encodeRGBM=false]\n * @param  {boolean} [textureOpts.decodeRGBM=false]\n * @param  {clay.Texture2D} [normalDistribution]\n * @param  {clay.Texture2D} [brdfLookup]\n */\ncubemapUtil.prefilterEnvironmentMap = function (\n    renderer, envMap, textureOpts, normalDistribution, brdfLookup\n) {\n    // Not create other renderer, it is easy having issue of cross reference of resources like framebuffer\n    // PENDING preserveDrawingBuffer?\n    if (!brdfLookup || !normalDistribution) {\n        normalDistribution = cubemapUtil.generateNormalDistribution();\n        brdfLookup = cubemapUtil.integrateBRDF(renderer, normalDistribution);\n    }\n    textureOpts = textureOpts || {};\n\n    var width = textureOpts.width || 64;\n    var height = textureOpts.height || 64;\n\n    var textureType = textureOpts.type || envMap.type;\n\n    // Use same type with given envMap\n    var prefilteredCubeMap = new __WEBPACK_IMPORTED_MODULE_1__TextureCube__[\"a\" /* default */]({\n        width: width,\n        height: height,\n        type: textureType,\n        flipY: false,\n        mipmaps: []\n    });\n\n    if (!prefilteredCubeMap.isPowerOfTwo()) {\n        console.warn('Width and height must be power of two to enable mipmap.');\n    }\n\n    var size = Math.min(width, height);\n    var mipmapNum = Math.log(size) / Math.log(2) + 1;\n\n    var prefilterMaterial = new __WEBPACK_IMPORTED_MODULE_5__Material__[\"a\" /* default */]({\n        shader: new __WEBPACK_IMPORTED_MODULE_6__Shader__[\"a\" /* default */]({\n            vertex: __WEBPACK_IMPORTED_MODULE_6__Shader__[\"a\" /* default */].source('clay.skybox.vertex'),\n            fragment: __WEBPACK_IMPORTED_MODULE_13__shader_prefilter_glsl_js__[\"a\" /* default */]\n        })\n    });\n    prefilterMaterial.set('normalDistribution', normalDistribution);\n\n    textureOpts.encodeRGBM && prefilterMaterial.define('fragment', 'RGBM_ENCODE');\n    textureOpts.decodeRGBM && prefilterMaterial.define('fragment', 'RGBM_DECODE');\n\n    var dummyScene = new __WEBPACK_IMPORTED_MODULE_8__Scene__[\"a\" /* default */]();\n    var skyEnv;\n\n    if (envMap.textureType === 'texture2D') {\n        // Convert panorama to cubemap\n        var envCubemap = new __WEBPACK_IMPORTED_MODULE_1__TextureCube__[\"a\" /* default */]({\n            width: width,\n            height: height,\n            // FIXME FLOAT type will cause GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT error on iOS\n            type: textureType === __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].FLOAT ?\n                __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].HALF_FLOAT : textureType\n        });\n        __WEBPACK_IMPORTED_MODULE_11__texture__[\"a\" /* default */].panoramaToCubeMap(renderer, envMap, envCubemap, {\n            // PENDING encodeRGBM so it can be decoded as RGBM\n            encodeRGBM: textureOpts.decodeRGBM\n        });\n        envMap = envCubemap;\n    }\n    skyEnv = new __WEBPACK_IMPORTED_MODULE_7__plugin_Skybox__[\"a\" /* default */]({\n        scene: dummyScene,\n        material: prefilterMaterial\n    });\n    skyEnv.material.set('environmentMap', envMap);\n\n    var envMapPass = new __WEBPACK_IMPORTED_MODULE_9__prePass_EnvironmentMap__[\"a\" /* default */]({\n        texture: prefilteredCubeMap\n    });\n\n    // Force to be UNSIGNED_BYTE\n    if (textureOpts.encodeRGBM) {\n        textureType = prefilteredCubeMap.type = __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].UNSIGNED_BYTE;\n    }\n\n    var renderTargetTmp = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]({\n        width: width,\n        height: height,\n        type: textureType\n    });\n    var frameBuffer = new __WEBPACK_IMPORTED_MODULE_3__FrameBuffer__[\"a\" /* default */]({\n        depthBuffer: false\n    });\n    var ArrayCtor = __WEBPACK_IMPORTED_MODULE_10__core_vendor__[\"a\" /* default */][textureType === __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].UNSIGNED_BYTE ? 'Uint8Array' : 'Float32Array'];\n    for (var i = 0; i < mipmapNum; i++) {\n        // console.time('prefilter');\n        prefilteredCubeMap.mipmaps[i] = {\n            pixels: {}\n        };\n        skyEnv.material.set('roughness', i / (mipmapNum - 1));\n\n        // Tweak fov\n        // http://the-witness.net/news/2012/02/seamless-cube-map-filtering/\n        var n = renderTargetTmp.width;\n        var fov = 2 * Math.atan(n / (n - 0.5)) / Math.PI * 180;\n\n        for (var j = 0; j < targets.length; j++) {\n            var pixels = new ArrayCtor(renderTargetTmp.width * renderTargetTmp.height * 4);\n            frameBuffer.attach(renderTargetTmp);\n            frameBuffer.bind(renderer);\n\n            var camera = envMapPass.getCamera(targets[j]);\n            camera.fov = fov;\n            renderer.render(dummyScene, camera);\n            renderer.gl.readPixels(\n                0, 0, renderTargetTmp.width, renderTargetTmp.height,\n                __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].RGBA, textureType, pixels\n            );\n\n            // var canvas = document.createElement('canvas');\n            // var ctx = canvas.getContext('2d');\n            // canvas.width = renderTargetTmp.width;\n            // canvas.height = renderTargetTmp.height;\n            // var imageData = ctx.createImageData(renderTargetTmp.width, renderTargetTmp.height);\n            // for (var k = 0; k < pixels.length; k++) {\n            //     imageData.data[k] = pixels[k];\n            // }\n            // ctx.putImageData(imageData, 0, 0);\n            // document.body.appendChild(canvas);\n\n            frameBuffer.unbind(renderer);\n            prefilteredCubeMap.mipmaps[i].pixels[targets[j]] = pixels;\n        }\n\n        renderTargetTmp.width /= 2;\n        renderTargetTmp.height /= 2;\n        renderTargetTmp.dirty();\n        // console.timeEnd('prefilter');\n    }\n\n    frameBuffer.dispose(renderer);\n    renderTargetTmp.dispose(renderer);\n    skyEnv.dispose(renderer);\n    // Remove gpu resource allucated in renderer\n    normalDistribution.dispose(renderer);\n\n    // renderer.dispose();\n\n    return {\n        environmentMap: prefilteredCubeMap,\n        brdfLookup: brdfLookup,\n        normalDistribution: normalDistribution,\n        maxMipmapLevel: mipmapNum\n    };\n};\n\ncubemapUtil.integrateBRDF = function (renderer, normalDistribution) {\n    normalDistribution = normalDistribution || cubemapUtil.generateNormalDistribution();\n    var framebuffer = new __WEBPACK_IMPORTED_MODULE_3__FrameBuffer__[\"a\" /* default */]({\n        depthBuffer: false\n    });\n    var pass = new __WEBPACK_IMPORTED_MODULE_4__compositor_Pass__[\"a\" /* default */]({\n        fragment: __WEBPACK_IMPORTED_MODULE_12__shader_integrateBRDF_glsl_js__[\"a\" /* default */]\n    });\n\n    var texture = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]({\n        width: 512,\n        height: 256,\n        type: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].HALF_FLOAT,\n        wrapS: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].CLAMP_TO_EDGE,\n        wrapT: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].CLAMP_TO_EDGE,\n        minFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n        magFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n        useMipmap: false\n    });\n    pass.setUniform('normalDistribution', normalDistribution);\n    pass.setUniform('viewportSize', [512, 256]);\n    pass.attachOutput(texture);\n    pass.render(renderer, framebuffer);\n\n    // FIXME Only chrome and firefox can readPixels with float type.\n    // framebuffer.bind(renderer);\n    // var pixels = new Float32Array(512 * 256 * 4);\n    // renderer.gl.readPixels(\n    //     0, 0, texture.width, texture.height,\n    //     Texture.RGBA, Texture.FLOAT, pixels\n    // );\n    // texture.pixels = pixels;\n    // texture.flipY = false;\n    // texture.dirty();\n    // framebuffer.unbind(renderer);\n\n    framebuffer.dispose(renderer);\n\n    return texture;\n};\n\ncubemapUtil.generateNormalDistribution = function (roughnessLevels, sampleSize) {\n\n    // http://holger.dammertz.org/stuff/notes_HammersleyOnHemisphere.html\n    // GLSL not support bit operation, use lookup instead\n    // V -> i / N, U -> roughness\n    var roughnessLevels = roughnessLevels || 256;\n    var sampleSize = sampleSize || 1024;\n\n    var normalDistribution = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]({\n        width: roughnessLevels,\n        height: sampleSize,\n        type: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].FLOAT,\n        minFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n        magFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n        wrapS: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].CLAMP_TO_EDGE,\n        wrapT: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].CLAMP_TO_EDGE,\n        useMipmap: false\n    });\n    var pixels = new Float32Array(sampleSize * roughnessLevels * 4);\n    var tmp = [];\n\n    // function sortFunc(a, b) {\n    //     return Math.abs(b) - Math.abs(a);\n    // }\n    for (var j = 0; j < roughnessLevels; j++) {\n        var roughness = j / roughnessLevels;\n        var a = roughness * roughness;\n\n        for (var i = 0; i < sampleSize; i++) {\n            // http://holger.dammertz.org/stuff/notes_HammersleyOnHemisphere.html\n            // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators\n            // http://stackoverflow.com/questions/1908492/unsigned-integer-in-javascript\n            // http://stackoverflow.com/questions/1822350/what-is-the-javascript-operator-and-how-do-you-use-it\n            var y = (i << 16 | i >>> 16) >>> 0;\n            y = ((y & 1431655765) << 1 | (y & 2863311530) >>> 1) >>> 0;\n            y = ((y & 858993459) << 2 | (y & 3435973836) >>> 2) >>> 0;\n            y = ((y & 252645135) << 4 | (y & 4042322160) >>> 4) >>> 0;\n            y = (((y & 16711935) << 8 | (y & 4278255360) >>> 8) >>> 0) / 4294967296;\n\n            // CDF\n            var cosTheta = Math.sqrt((1 - y) / (1 + (a * a - 1.0) * y));\n            tmp[i] = cosTheta;\n        }\n\n        for (var i = 0; i < sampleSize; i++) {\n            var offset = (i * roughnessLevels + j) * 4;\n            var cosTheta = tmp[i];\n            var sinTheta = Math.sqrt(1.0 - cosTheta * cosTheta);\n            var x = i / sampleSize;\n            var phi = 2.0 * Math.PI * x;\n            pixels[offset] = sinTheta * Math.cos(phi);\n            pixels[offset + 1] = cosTheta;\n            pixels[offset + 2] = sinTheta * Math.sin(phi);\n            pixels[offset + 3] = 1.0;\n        }\n    }\n    normalDistribution.pixels = pixels;\n\n    return normalDistribution;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (cubemapUtil);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy91dGlsL2N1YmVtYXAuanM/MTg0MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDdWJlbWFwIHByZWZpbHRlciB1dGlsaXR5XG4vLyBodHRwOi8vd3d3LnVucmVhbGVuZ2luZS5jb20vZmlsZXMvZG93bmxvYWRzLzIwMTNTaWdncmFwaFByZXNlbnRhdGlvbnNOb3Rlcy5wZGZcbi8vIGh0dHA6Ly9odHRwLmRldmVsb3Blci5udmlkaWEuY29tL0dQVUdlbXMzL2dwdWdlbXMzX2NoMjAuaHRtbFxuaW1wb3J0IFRleHR1cmUyRCBmcm9tICcuLi9UZXh0dXJlMkQnO1xuaW1wb3J0IFRleHR1cmVDdWJlIGZyb20gJy4uL1RleHR1cmVDdWJlJztcbmltcG9ydCBUZXh0dXJlIGZyb20gJy4uL1RleHR1cmUnO1xuaW1wb3J0IEZyYW1lQnVmZmVyIGZyb20gJy4uL0ZyYW1lQnVmZmVyJztcbmltcG9ydCBQYXNzIGZyb20gJy4uL2NvbXBvc2l0b3IvUGFzcyc7XG5pbXBvcnQgTWF0ZXJpYWwgZnJvbSAnLi4vTWF0ZXJpYWwnO1xuaW1wb3J0IFNoYWRlciBmcm9tICcuLi9TaGFkZXInO1xuaW1wb3J0IFNreWJveCBmcm9tICcuLi9wbHVnaW4vU2t5Ym94JztcbmltcG9ydCBTY2VuZSBmcm9tICcuLi9TY2VuZSc7XG5pbXBvcnQgRW52aXJvbm1lbnRNYXBQYXNzIGZyb20gJy4uL3ByZVBhc3MvRW52aXJvbm1lbnRNYXAnO1xuaW1wb3J0IHZlbmRvciBmcm9tICcuLi9jb3JlL3ZlbmRvcic7XG5pbXBvcnQgdGV4dHVyZVV0aWwgZnJvbSAnLi90ZXh0dXJlJztcblxuaW1wb3J0IGludGVncmF0ZUJSREZTaGFkZXJDb2RlIGZyb20gJy4vc2hhZGVyL2ludGVncmF0ZUJSREYuZ2xzbC5qcyc7XG5pbXBvcnQgcHJlZmlsdGVyRnJhZ0NvZGUgZnJvbSAnLi9zaGFkZXIvcHJlZmlsdGVyLmdsc2wuanMnO1xuXG52YXIgY3ViZW1hcFV0aWwgPSB7fTtcblxudmFyIHRhcmdldHMgPSBbJ3B4JywgJ254JywgJ3B5JywgJ255JywgJ3B6JywgJ256J107XG5cbi8vIFRPRE8gRG93bnNhbXBsZVxuLyoqXG4gKiBAbmFtZSBjbGF5LnV0aWwuY3ViZW1hcC5wcmVmaWx0ZXJFbnZpcm9ubWVudE1hcFxuICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAqIEBwYXJhbSAge2NsYXkuVGV4dHVyZX0gZW52TWFwXG4gKiBAcGFyYW0gIHtPYmplY3R9IFt0ZXh0dXJlT3B0c11cbiAqIEBwYXJhbSAge251bWJlcn0gW3RleHR1cmVPcHRzLndpZHRoPTY0XVxuICogQHBhcmFtICB7bnVtYmVyfSBbdGV4dHVyZU9wdHMuaGVpZ2h0PTY0XVxuICogQHBhcmFtICB7bnVtYmVyfSBbdGV4dHVyZU9wdHMudHlwZV1cbiAqIEBwYXJhbSAge2Jvb2xlYW59IFt0ZXh0dXJlT3B0cy5lbmNvZGVSR0JNPWZhbHNlXVxuICogQHBhcmFtICB7Ym9vbGVhbn0gW3RleHR1cmVPcHRzLmRlY29kZVJHQk09ZmFsc2VdXG4gKiBAcGFyYW0gIHtjbGF5LlRleHR1cmUyRH0gW25vcm1hbERpc3RyaWJ1dGlvbl1cbiAqIEBwYXJhbSAge2NsYXkuVGV4dHVyZTJEfSBbYnJkZkxvb2t1cF1cbiAqL1xuY3ViZW1hcFV0aWwucHJlZmlsdGVyRW52aXJvbm1lbnRNYXAgPSBmdW5jdGlvbiAoXG4gICAgcmVuZGVyZXIsIGVudk1hcCwgdGV4dHVyZU9wdHMsIG5vcm1hbERpc3RyaWJ1dGlvbiwgYnJkZkxvb2t1cFxuKSB7XG4gICAgLy8gTm90IGNyZWF0ZSBvdGhlciByZW5kZXJlciwgaXQgaXMgZWFzeSBoYXZpbmcgaXNzdWUgb2YgY3Jvc3MgcmVmZXJlbmNlIG9mIHJlc291cmNlcyBsaWtlIGZyYW1lYnVmZmVyXG4gICAgLy8gUEVORElORyBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI/XG4gICAgaWYgKCFicmRmTG9va3VwIHx8ICFub3JtYWxEaXN0cmlidXRpb24pIHtcbiAgICAgICAgbm9ybWFsRGlzdHJpYnV0aW9uID0gY3ViZW1hcFV0aWwuZ2VuZXJhdGVOb3JtYWxEaXN0cmlidXRpb24oKTtcbiAgICAgICAgYnJkZkxvb2t1cCA9IGN1YmVtYXBVdGlsLmludGVncmF0ZUJSREYocmVuZGVyZXIsIG5vcm1hbERpc3RyaWJ1dGlvbik7XG4gICAgfVxuICAgIHRleHR1cmVPcHRzID0gdGV4dHVyZU9wdHMgfHwge307XG5cbiAgICB2YXIgd2lkdGggPSB0ZXh0dXJlT3B0cy53aWR0aCB8fCA2NDtcbiAgICB2YXIgaGVpZ2h0ID0gdGV4dHVyZU9wdHMuaGVpZ2h0IHx8IDY0O1xuXG4gICAgdmFyIHRleHR1cmVUeXBlID0gdGV4dHVyZU9wdHMudHlwZSB8fCBlbnZNYXAudHlwZTtcblxuICAgIC8vIFVzZSBzYW1lIHR5cGUgd2l0aCBnaXZlbiBlbnZNYXBcbiAgICB2YXIgcHJlZmlsdGVyZWRDdWJlTWFwID0gbmV3IFRleHR1cmVDdWJlKHtcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgdHlwZTogdGV4dHVyZVR5cGUsXG4gICAgICAgIGZsaXBZOiBmYWxzZSxcbiAgICAgICAgbWlwbWFwczogW11cbiAgICB9KTtcblxuICAgIGlmICghcHJlZmlsdGVyZWRDdWJlTWFwLmlzUG93ZXJPZlR3bygpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignV2lkdGggYW5kIGhlaWdodCBtdXN0IGJlIHBvd2VyIG9mIHR3byB0byBlbmFibGUgbWlwbWFwLicpO1xuICAgIH1cblxuICAgIHZhciBzaXplID0gTWF0aC5taW4od2lkdGgsIGhlaWdodCk7XG4gICAgdmFyIG1pcG1hcE51bSA9IE1hdGgubG9nKHNpemUpIC8gTWF0aC5sb2coMikgKyAxO1xuXG4gICAgdmFyIHByZWZpbHRlck1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgc2hhZGVyOiBuZXcgU2hhZGVyKHtcbiAgICAgICAgICAgIHZlcnRleDogU2hhZGVyLnNvdXJjZSgnY2xheS5za3lib3gudmVydGV4JyksXG4gICAgICAgICAgICBmcmFnbWVudDogcHJlZmlsdGVyRnJhZ0NvZGVcbiAgICAgICAgfSlcbiAgICB9KTtcbiAgICBwcmVmaWx0ZXJNYXRlcmlhbC5zZXQoJ25vcm1hbERpc3RyaWJ1dGlvbicsIG5vcm1hbERpc3RyaWJ1dGlvbik7XG5cbiAgICB0ZXh0dXJlT3B0cy5lbmNvZGVSR0JNICYmIHByZWZpbHRlck1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnUkdCTV9FTkNPREUnKTtcbiAgICB0ZXh0dXJlT3B0cy5kZWNvZGVSR0JNICYmIHByZWZpbHRlck1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnUkdCTV9ERUNPREUnKTtcblxuICAgIHZhciBkdW1teVNjZW5lID0gbmV3IFNjZW5lKCk7XG4gICAgdmFyIHNreUVudjtcblxuICAgIGlmIChlbnZNYXAudGV4dHVyZVR5cGUgPT09ICd0ZXh0dXJlMkQnKSB7XG4gICAgICAgIC8vIENvbnZlcnQgcGFub3JhbWEgdG8gY3ViZW1hcFxuICAgICAgICB2YXIgZW52Q3ViZW1hcCA9IG5ldyBUZXh0dXJlQ3ViZSh7XG4gICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgICAgIC8vIEZJWE1FIEZMT0FUIHR5cGUgd2lsbCBjYXVzZSBHTF9GUkFNRUJVRkZFUl9JTkNPTVBMRVRFX0FUVEFDSE1FTlQgZXJyb3Igb24gaU9TXG4gICAgICAgICAgICB0eXBlOiB0ZXh0dXJlVHlwZSA9PT0gVGV4dHVyZS5GTE9BVCA/XG4gICAgICAgICAgICAgICAgVGV4dHVyZS5IQUxGX0ZMT0FUIDogdGV4dHVyZVR5cGVcbiAgICAgICAgfSk7XG4gICAgICAgIHRleHR1cmVVdGlsLnBhbm9yYW1hVG9DdWJlTWFwKHJlbmRlcmVyLCBlbnZNYXAsIGVudkN1YmVtYXAsIHtcbiAgICAgICAgICAgIC8vIFBFTkRJTkcgZW5jb2RlUkdCTSBzbyBpdCBjYW4gYmUgZGVjb2RlZCBhcyBSR0JNXG4gICAgICAgICAgICBlbmNvZGVSR0JNOiB0ZXh0dXJlT3B0cy5kZWNvZGVSR0JNXG4gICAgICAgIH0pO1xuICAgICAgICBlbnZNYXAgPSBlbnZDdWJlbWFwO1xuICAgIH1cbiAgICBza3lFbnYgPSBuZXcgU2t5Ym94KHtcbiAgICAgICAgc2NlbmU6IGR1bW15U2NlbmUsXG4gICAgICAgIG1hdGVyaWFsOiBwcmVmaWx0ZXJNYXRlcmlhbFxuICAgIH0pO1xuICAgIHNreUVudi5tYXRlcmlhbC5zZXQoJ2Vudmlyb25tZW50TWFwJywgZW52TWFwKTtcblxuICAgIHZhciBlbnZNYXBQYXNzID0gbmV3IEVudmlyb25tZW50TWFwUGFzcyh7XG4gICAgICAgIHRleHR1cmU6IHByZWZpbHRlcmVkQ3ViZU1hcFxuICAgIH0pO1xuXG4gICAgLy8gRm9yY2UgdG8gYmUgVU5TSUdORURfQllURVxuICAgIGlmICh0ZXh0dXJlT3B0cy5lbmNvZGVSR0JNKSB7XG4gICAgICAgIHRleHR1cmVUeXBlID0gcHJlZmlsdGVyZWRDdWJlTWFwLnR5cGUgPSBUZXh0dXJlLlVOU0lHTkVEX0JZVEU7XG4gICAgfVxuXG4gICAgdmFyIHJlbmRlclRhcmdldFRtcCA9IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICB0eXBlOiB0ZXh0dXJlVHlwZVxuICAgIH0pO1xuICAgIHZhciBmcmFtZUJ1ZmZlciA9IG5ldyBGcmFtZUJ1ZmZlcih7XG4gICAgICAgIGRlcHRoQnVmZmVyOiBmYWxzZVxuICAgIH0pO1xuICAgIHZhciBBcnJheUN0b3IgPSB2ZW5kb3JbdGV4dHVyZVR5cGUgPT09IFRleHR1cmUuVU5TSUdORURfQllURSA/ICdVaW50OEFycmF5JyA6ICdGbG9hdDMyQXJyYXknXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1pcG1hcE51bTsgaSsrKSB7XG4gICAgICAgIC8vIGNvbnNvbGUudGltZSgncHJlZmlsdGVyJyk7XG4gICAgICAgIHByZWZpbHRlcmVkQ3ViZU1hcC5taXBtYXBzW2ldID0ge1xuICAgICAgICAgICAgcGl4ZWxzOiB7fVxuICAgICAgICB9O1xuICAgICAgICBza3lFbnYubWF0ZXJpYWwuc2V0KCdyb3VnaG5lc3MnLCBpIC8gKG1pcG1hcE51bSAtIDEpKTtcblxuICAgICAgICAvLyBUd2VhayBmb3ZcbiAgICAgICAgLy8gaHR0cDovL3RoZS13aXRuZXNzLm5ldC9uZXdzLzIwMTIvMDIvc2VhbWxlc3MtY3ViZS1tYXAtZmlsdGVyaW5nL1xuICAgICAgICB2YXIgbiA9IHJlbmRlclRhcmdldFRtcC53aWR0aDtcbiAgICAgICAgdmFyIGZvdiA9IDIgKiBNYXRoLmF0YW4obiAvIChuIC0gMC41KSkgLyBNYXRoLlBJICogMTgwO1xuXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGFyZ2V0cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIHBpeGVscyA9IG5ldyBBcnJheUN0b3IocmVuZGVyVGFyZ2V0VG1wLndpZHRoICogcmVuZGVyVGFyZ2V0VG1wLmhlaWdodCAqIDQpO1xuICAgICAgICAgICAgZnJhbWVCdWZmZXIuYXR0YWNoKHJlbmRlclRhcmdldFRtcCk7XG4gICAgICAgICAgICBmcmFtZUJ1ZmZlci5iaW5kKHJlbmRlcmVyKTtcblxuICAgICAgICAgICAgdmFyIGNhbWVyYSA9IGVudk1hcFBhc3MuZ2V0Q2FtZXJhKHRhcmdldHNbal0pO1xuICAgICAgICAgICAgY2FtZXJhLmZvdiA9IGZvdjtcbiAgICAgICAgICAgIHJlbmRlcmVyLnJlbmRlcihkdW1teVNjZW5lLCBjYW1lcmEpO1xuICAgICAgICAgICAgcmVuZGVyZXIuZ2wucmVhZFBpeGVscyhcbiAgICAgICAgICAgICAgICAwLCAwLCByZW5kZXJUYXJnZXRUbXAud2lkdGgsIHJlbmRlclRhcmdldFRtcC5oZWlnaHQsXG4gICAgICAgICAgICAgICAgVGV4dHVyZS5SR0JBLCB0ZXh0dXJlVHlwZSwgcGl4ZWxzXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICAvLyB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICAvLyBjYW52YXMud2lkdGggPSByZW5kZXJUYXJnZXRUbXAud2lkdGg7XG4gICAgICAgICAgICAvLyBjYW52YXMuaGVpZ2h0ID0gcmVuZGVyVGFyZ2V0VG1wLmhlaWdodDtcbiAgICAgICAgICAgIC8vIHZhciBpbWFnZURhdGEgPSBjdHguY3JlYXRlSW1hZ2VEYXRhKHJlbmRlclRhcmdldFRtcC53aWR0aCwgcmVuZGVyVGFyZ2V0VG1wLmhlaWdodCk7XG4gICAgICAgICAgICAvLyBmb3IgKHZhciBrID0gMDsgayA8IHBpeGVscy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgLy8gICAgIGltYWdlRGF0YS5kYXRhW2tdID0gcGl4ZWxzW2tdO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgLy8gY3R4LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xuICAgICAgICAgICAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG4gICAgICAgICAgICBmcmFtZUJ1ZmZlci51bmJpbmQocmVuZGVyZXIpO1xuICAgICAgICAgICAgcHJlZmlsdGVyZWRDdWJlTWFwLm1pcG1hcHNbaV0ucGl4ZWxzW3RhcmdldHNbal1dID0gcGl4ZWxzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVuZGVyVGFyZ2V0VG1wLndpZHRoIC89IDI7XG4gICAgICAgIHJlbmRlclRhcmdldFRtcC5oZWlnaHQgLz0gMjtcbiAgICAgICAgcmVuZGVyVGFyZ2V0VG1wLmRpcnR5KCk7XG4gICAgICAgIC8vIGNvbnNvbGUudGltZUVuZCgncHJlZmlsdGVyJyk7XG4gICAgfVxuXG4gICAgZnJhbWVCdWZmZXIuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgcmVuZGVyVGFyZ2V0VG1wLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgIHNreUVudi5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAvLyBSZW1vdmUgZ3B1IHJlc291cmNlIGFsbHVjYXRlZCBpbiByZW5kZXJlclxuICAgIG5vcm1hbERpc3RyaWJ1dGlvbi5kaXNwb3NlKHJlbmRlcmVyKTtcblxuICAgIC8vIHJlbmRlcmVyLmRpc3Bvc2UoKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGVudmlyb25tZW50TWFwOiBwcmVmaWx0ZXJlZEN1YmVNYXAsXG4gICAgICAgIGJyZGZMb29rdXA6IGJyZGZMb29rdXAsXG4gICAgICAgIG5vcm1hbERpc3RyaWJ1dGlvbjogbm9ybWFsRGlzdHJpYnV0aW9uLFxuICAgICAgICBtYXhNaXBtYXBMZXZlbDogbWlwbWFwTnVtXG4gICAgfTtcbn07XG5cbmN1YmVtYXBVdGlsLmludGVncmF0ZUJSREYgPSBmdW5jdGlvbiAocmVuZGVyZXIsIG5vcm1hbERpc3RyaWJ1dGlvbikge1xuICAgIG5vcm1hbERpc3RyaWJ1dGlvbiA9IG5vcm1hbERpc3RyaWJ1dGlvbiB8fCBjdWJlbWFwVXRpbC5nZW5lcmF0ZU5vcm1hbERpc3RyaWJ1dGlvbigpO1xuICAgIHZhciBmcmFtZWJ1ZmZlciA9IG5ldyBGcmFtZUJ1ZmZlcih7XG4gICAgICAgIGRlcHRoQnVmZmVyOiBmYWxzZVxuICAgIH0pO1xuICAgIHZhciBwYXNzID0gbmV3IFBhc3Moe1xuICAgICAgICBmcmFnbWVudDogaW50ZWdyYXRlQlJERlNoYWRlckNvZGVcbiAgICB9KTtcblxuICAgIHZhciB0ZXh0dXJlID0gbmV3IFRleHR1cmUyRCh7XG4gICAgICAgIHdpZHRoOiA1MTIsXG4gICAgICAgIGhlaWdodDogMjU2LFxuICAgICAgICB0eXBlOiBUZXh0dXJlLkhBTEZfRkxPQVQsXG4gICAgICAgIHdyYXBTOiBUZXh0dXJlLkNMQU1QX1RPX0VER0UsXG4gICAgICAgIHdyYXBUOiBUZXh0dXJlLkNMQU1QX1RPX0VER0UsXG4gICAgICAgIG1pbkZpbHRlcjogVGV4dHVyZS5ORUFSRVNULFxuICAgICAgICBtYWdGaWx0ZXI6IFRleHR1cmUuTkVBUkVTVCxcbiAgICAgICAgdXNlTWlwbWFwOiBmYWxzZVxuICAgIH0pO1xuICAgIHBhc3Muc2V0VW5pZm9ybSgnbm9ybWFsRGlzdHJpYnV0aW9uJywgbm9ybWFsRGlzdHJpYnV0aW9uKTtcbiAgICBwYXNzLnNldFVuaWZvcm0oJ3ZpZXdwb3J0U2l6ZScsIFs1MTIsIDI1Nl0pO1xuICAgIHBhc3MuYXR0YWNoT3V0cHV0KHRleHR1cmUpO1xuICAgIHBhc3MucmVuZGVyKHJlbmRlcmVyLCBmcmFtZWJ1ZmZlcik7XG5cbiAgICAvLyBGSVhNRSBPbmx5IGNocm9tZSBhbmQgZmlyZWZveCBjYW4gcmVhZFBpeGVscyB3aXRoIGZsb2F0IHR5cGUuXG4gICAgLy8gZnJhbWVidWZmZXIuYmluZChyZW5kZXJlcik7XG4gICAgLy8gdmFyIHBpeGVscyA9IG5ldyBGbG9hdDMyQXJyYXkoNTEyICogMjU2ICogNCk7XG4gICAgLy8gcmVuZGVyZXIuZ2wucmVhZFBpeGVscyhcbiAgICAvLyAgICAgMCwgMCwgdGV4dHVyZS53aWR0aCwgdGV4dHVyZS5oZWlnaHQsXG4gICAgLy8gICAgIFRleHR1cmUuUkdCQSwgVGV4dHVyZS5GTE9BVCwgcGl4ZWxzXG4gICAgLy8gKTtcbiAgICAvLyB0ZXh0dXJlLnBpeGVscyA9IHBpeGVscztcbiAgICAvLyB0ZXh0dXJlLmZsaXBZID0gZmFsc2U7XG4gICAgLy8gdGV4dHVyZS5kaXJ0eSgpO1xuICAgIC8vIGZyYW1lYnVmZmVyLnVuYmluZChyZW5kZXJlcik7XG5cbiAgICBmcmFtZWJ1ZmZlci5kaXNwb3NlKHJlbmRlcmVyKTtcblxuICAgIHJldHVybiB0ZXh0dXJlO1xufTtcblxuY3ViZW1hcFV0aWwuZ2VuZXJhdGVOb3JtYWxEaXN0cmlidXRpb24gPSBmdW5jdGlvbiAocm91Z2huZXNzTGV2ZWxzLCBzYW1wbGVTaXplKSB7XG5cbiAgICAvLyBodHRwOi8vaG9sZ2VyLmRhbW1lcnR6Lm9yZy9zdHVmZi9ub3Rlc19IYW1tZXJzbGV5T25IZW1pc3BoZXJlLmh0bWxcbiAgICAvLyBHTFNMIG5vdCBzdXBwb3J0IGJpdCBvcGVyYXRpb24sIHVzZSBsb29rdXAgaW5zdGVhZFxuICAgIC8vIFYgLT4gaSAvIE4sIFUgLT4gcm91Z2huZXNzXG4gICAgdmFyIHJvdWdobmVzc0xldmVscyA9IHJvdWdobmVzc0xldmVscyB8fCAyNTY7XG4gICAgdmFyIHNhbXBsZVNpemUgPSBzYW1wbGVTaXplIHx8IDEwMjQ7XG5cbiAgICB2YXIgbm9ybWFsRGlzdHJpYnV0aW9uID0gbmV3IFRleHR1cmUyRCh7XG4gICAgICAgIHdpZHRoOiByb3VnaG5lc3NMZXZlbHMsXG4gICAgICAgIGhlaWdodDogc2FtcGxlU2l6ZSxcbiAgICAgICAgdHlwZTogVGV4dHVyZS5GTE9BVCxcbiAgICAgICAgbWluRmlsdGVyOiBUZXh0dXJlLk5FQVJFU1QsXG4gICAgICAgIG1hZ0ZpbHRlcjogVGV4dHVyZS5ORUFSRVNULFxuICAgICAgICB3cmFwUzogVGV4dHVyZS5DTEFNUF9UT19FREdFLFxuICAgICAgICB3cmFwVDogVGV4dHVyZS5DTEFNUF9UT19FREdFLFxuICAgICAgICB1c2VNaXBtYXA6IGZhbHNlXG4gICAgfSk7XG4gICAgdmFyIHBpeGVscyA9IG5ldyBGbG9hdDMyQXJyYXkoc2FtcGxlU2l6ZSAqIHJvdWdobmVzc0xldmVscyAqIDQpO1xuICAgIHZhciB0bXAgPSBbXTtcblxuICAgIC8vIGZ1bmN0aW9uIHNvcnRGdW5jKGEsIGIpIHtcbiAgICAvLyAgICAgcmV0dXJuIE1hdGguYWJzKGIpIC0gTWF0aC5hYnMoYSk7XG4gICAgLy8gfVxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgcm91Z2huZXNzTGV2ZWxzOyBqKyspIHtcbiAgICAgICAgdmFyIHJvdWdobmVzcyA9IGogLyByb3VnaG5lc3NMZXZlbHM7XG4gICAgICAgIHZhciBhID0gcm91Z2huZXNzICogcm91Z2huZXNzO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2FtcGxlU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAvLyBodHRwOi8vaG9sZ2VyLmRhbW1lcnR6Lm9yZy9zdHVmZi9ub3Rlc19IYW1tZXJzbGV5T25IZW1pc3BoZXJlLmh0bWxcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL09wZXJhdG9ycy9CaXR3aXNlX09wZXJhdG9yc1xuICAgICAgICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xOTA4NDkyL3Vuc2lnbmVkLWludGVnZXItaW4tamF2YXNjcmlwdFxuICAgICAgICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xODIyMzUwL3doYXQtaXMtdGhlLWphdmFzY3JpcHQtb3BlcmF0b3ItYW5kLWhvdy1kby15b3UtdXNlLWl0XG4gICAgICAgICAgICB2YXIgeSA9IChpIDw8IDE2IHwgaSA+Pj4gMTYpID4+PiAwO1xuICAgICAgICAgICAgeSA9ICgoeSAmIDE0MzE2NTU3NjUpIDw8IDEgfCAoeSAmIDI4NjMzMTE1MzApID4+PiAxKSA+Pj4gMDtcbiAgICAgICAgICAgIHkgPSAoKHkgJiA4NTg5OTM0NTkpIDw8IDIgfCAoeSAmIDM0MzU5NzM4MzYpID4+PiAyKSA+Pj4gMDtcbiAgICAgICAgICAgIHkgPSAoKHkgJiAyNTI2NDUxMzUpIDw8IDQgfCAoeSAmIDQwNDIzMjIxNjApID4+PiA0KSA+Pj4gMDtcbiAgICAgICAgICAgIHkgPSAoKCh5ICYgMTY3MTE5MzUpIDw8IDggfCAoeSAmIDQyNzgyNTUzNjApID4+PiA4KSA+Pj4gMCkgLyA0Mjk0OTY3Mjk2O1xuXG4gICAgICAgICAgICAvLyBDREZcbiAgICAgICAgICAgIHZhciBjb3NUaGV0YSA9IE1hdGguc3FydCgoMSAtIHkpIC8gKDEgKyAoYSAqIGEgLSAxLjApICogeSkpO1xuICAgICAgICAgICAgdG1wW2ldID0gY29zVGhldGE7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNhbXBsZVNpemU7IGkrKykge1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IChpICogcm91Z2huZXNzTGV2ZWxzICsgaikgKiA0O1xuICAgICAgICAgICAgdmFyIGNvc1RoZXRhID0gdG1wW2ldO1xuICAgICAgICAgICAgdmFyIHNpblRoZXRhID0gTWF0aC5zcXJ0KDEuMCAtIGNvc1RoZXRhICogY29zVGhldGEpO1xuICAgICAgICAgICAgdmFyIHggPSBpIC8gc2FtcGxlU2l6ZTtcbiAgICAgICAgICAgIHZhciBwaGkgPSAyLjAgKiBNYXRoLlBJICogeDtcbiAgICAgICAgICAgIHBpeGVsc1tvZmZzZXRdID0gc2luVGhldGEgKiBNYXRoLmNvcyhwaGkpO1xuICAgICAgICAgICAgcGl4ZWxzW29mZnNldCArIDFdID0gY29zVGhldGE7XG4gICAgICAgICAgICBwaXhlbHNbb2Zmc2V0ICsgMl0gPSBzaW5UaGV0YSAqIE1hdGguc2luKHBoaSk7XG4gICAgICAgICAgICBwaXhlbHNbb2Zmc2V0ICsgM10gPSAxLjA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbm9ybWFsRGlzdHJpYnV0aW9uLnBpeGVscyA9IHBpeGVscztcblxuICAgIHJldHVybiBub3JtYWxEaXN0cmlidXRpb247XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjdWJlbWFwVXRpbDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvdXRpbC9jdWJlbWFwLmpzXG4vLyBtb2R1bGUgaWQgPSA5NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///94\n");

/***/ }),
/* 95 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__TextureCube__ = __webpack_require__(23);\n\n\n\n\n// http://msdn.microsoft.com/en-us/library/windows/desktop/bb943991(v=vs.85).aspx\n// https://github.com/toji/webgl-texture-utils/blob/master/texture-util/dds.js\nvar DDS_MAGIC = 0x20534444;\n\nvar DDSD_CAPS = 0x1;\nvar DDSD_HEIGHT = 0x2;\nvar DDSD_WIDTH = 0x4;\nvar DDSD_PITCH = 0x8;\nvar DDSD_PIXELFORMAT = 0x1000;\nvar DDSD_MIPMAPCOUNT = 0x20000;\nvar DDSD_LINEARSIZE = 0x80000;\nvar DDSD_DEPTH = 0x800000;\n\nvar DDSCAPS_COMPLEX = 0x8;\nvar DDSCAPS_MIPMAP = 0x400000;\nvar DDSCAPS_TEXTURE = 0x1000;\n\nvar DDSCAPS2_CUBEMAP = 0x200;\nvar DDSCAPS2_CUBEMAP_POSITIVEX = 0x400;\nvar DDSCAPS2_CUBEMAP_NEGATIVEX = 0x800;\nvar DDSCAPS2_CUBEMAP_POSITIVEY = 0x1000;\nvar DDSCAPS2_CUBEMAP_NEGATIVEY = 0x2000;\nvar DDSCAPS2_CUBEMAP_POSITIVEZ = 0x4000;\nvar DDSCAPS2_CUBEMAP_NEGATIVEZ = 0x8000;\nvar DDSCAPS2_VOLUME = 0x200000;\n\nvar DDPF_ALPHAPIXELS = 0x1;\nvar DDPF_ALPHA = 0x2;\nvar DDPF_FOURCC = 0x4;\nvar DDPF_RGB = 0x40;\nvar DDPF_YUV = 0x200;\nvar DDPF_LUMINANCE = 0x20000;\n\nfunction fourCCToInt32(value) {\n    return value.charCodeAt(0) +\n        (value.charCodeAt(1) << 8) +\n        (value.charCodeAt(2) << 16) +\n        (value.charCodeAt(3) << 24);\n}\n\nfunction int32ToFourCC(value) {\n    return String.fromCharCode(\n        value & 0xff,\n        (value >> 8) & 0xff,\n        (value >> 16) & 0xff,\n        (value >> 24) & 0xff\n    );\n}\n\nvar headerLengthInt = 31; // The header length in 32 bit ints\n\nvar FOURCC_DXT1 = fourCCToInt32('DXT1');\nvar FOURCC_DXT3 = fourCCToInt32('DXT3');\nvar FOURCC_DXT5 = fourCCToInt32('DXT5');\n// Offsets into the header array\nvar off_magic = 0;\n\nvar off_size = 1;\nvar off_flags = 2;\nvar off_height = 3;\nvar off_width = 4;\n\nvar off_mipmapCount = 7;\n\nvar off_pfFlags = 20;\nvar off_pfFourCC = 21;\n\nvar off_caps = 27;\nvar off_caps2 = 28;\nvar off_caps3 = 29;\nvar off_caps4 = 30;\n\nvar ret = {\n    parse: function(arrayBuffer, out) {\n        var header = new Int32Array(arrayBuffer, 0, headerLengthInt);\n        if (header[off_magic] !== DDS_MAGIC) {\n            return null;\n        }\n        if (!header(off_pfFlags) & DDPF_FOURCC) {\n            return null;\n        }\n\n        var fourCC = header(off_pfFourCC);\n        var width = header[off_width];\n        var height = header[off_height];\n        var isCubeMap = header[off_caps2] & DDSCAPS2_CUBEMAP;\n        var hasMipmap = header[off_flags] & DDSD_MIPMAPCOUNT;\n        var blockBytes, internalFormat;\n        switch(fourCC) {\n            case FOURCC_DXT1:\n                blockBytes = 8;\n                internalFormat = __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGB_S3TC_DXT1_EXT;\n                break;\n            case FOURCC_DXT3:\n                blockBytes = 16;\n                internalFormat = __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGBA_S3TC_DXT3_EXT;\n                break;\n            case FOURCC_DXT5:\n                blockBytes = 16;\n                internalFormat = __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGBA_S3TC_DXT5_EXT;\n                break;\n            default:\n                return null;\n        }\n        var dataOffset = header[off_size] + 4;\n        // TODO: Suppose all face are existed\n        var faceNumber = isCubeMap ? 6 : 1;\n        var mipmapCount = 1;\n        if (hasMipmap) {\n            mipmapCount = Math.max(1, header[off_mipmapCount]);\n        }\n\n        var textures = [];\n        for (var f = 0; f < faceNumber; f++) {\n            var _width = width;\n            var _height = height;\n            textures[f] = new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */]({\n                width: _width,\n                height: _height,\n                format: internalFormat\n            });\n            var mipmaps = [];\n            for (var i = 0; i < mipmapCount; i++) {\n                var dataLength = Math.max(4, _width) / 4 * Math.max(4, _height) / 4 * blockBytes;\n                var byteArray = new Uint8Array(arrayBuffer, dataOffset, dataLength);\n\n                dataOffset += dataLength;\n                _width *= 0.5;\n                _height *= 0.5;\n                mipmaps[i] = byteArray;\n            }\n            textures[f].pixels = mipmaps[0];\n            if (hasMipmap) {\n                textures[f].mipmaps = mipmaps;\n            }\n        }\n        // TODO\n        // return isCubeMap ? textures : textures[0];\n        if (out) {\n            out.width = textures[0].width;\n            out.height = textures[0].height;\n            out.format = textures[0].format;\n            out.pixels = textures[0].pixels;\n            out.mipmaps = textures[0].mipmaps;\n        }\n        else {\n            return textures[0];\n        }\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ret);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy91dGlsL2Rkcy5qcz8xMDdhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZXh0dXJlIGZyb20gJy4uL1RleHR1cmUnO1xuaW1wb3J0IFRleHR1cmUyRCBmcm9tICcuLi9UZXh0dXJlMkQnO1xuaW1wb3J0IFRleHR1cmVDdWJlIGZyb20gJy4uL1RleHR1cmVDdWJlJztcblxuLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L3dpbmRvd3MvZGVza3RvcC9iYjk0Mzk5MSh2PXZzLjg1KS5hc3B4XG4vLyBodHRwczovL2dpdGh1Yi5jb20vdG9qaS93ZWJnbC10ZXh0dXJlLXV0aWxzL2Jsb2IvbWFzdGVyL3RleHR1cmUtdXRpbC9kZHMuanNcbnZhciBERFNfTUFHSUMgPSAweDIwNTM0NDQ0O1xuXG52YXIgRERTRF9DQVBTID0gMHgxO1xudmFyIEREU0RfSEVJR0hUID0gMHgyO1xudmFyIEREU0RfV0lEVEggPSAweDQ7XG52YXIgRERTRF9QSVRDSCA9IDB4ODtcbnZhciBERFNEX1BJWEVMRk9STUFUID0gMHgxMDAwO1xudmFyIEREU0RfTUlQTUFQQ09VTlQgPSAweDIwMDAwO1xudmFyIEREU0RfTElORUFSU0laRSA9IDB4ODAwMDA7XG52YXIgRERTRF9ERVBUSCA9IDB4ODAwMDAwO1xuXG52YXIgRERTQ0FQU19DT01QTEVYID0gMHg4O1xudmFyIEREU0NBUFNfTUlQTUFQID0gMHg0MDAwMDA7XG52YXIgRERTQ0FQU19URVhUVVJFID0gMHgxMDAwO1xuXG52YXIgRERTQ0FQUzJfQ1VCRU1BUCA9IDB4MjAwO1xudmFyIEREU0NBUFMyX0NVQkVNQVBfUE9TSVRJVkVYID0gMHg0MDA7XG52YXIgRERTQ0FQUzJfQ1VCRU1BUF9ORUdBVElWRVggPSAweDgwMDtcbnZhciBERFNDQVBTMl9DVUJFTUFQX1BPU0lUSVZFWSA9IDB4MTAwMDtcbnZhciBERFNDQVBTMl9DVUJFTUFQX05FR0FUSVZFWSA9IDB4MjAwMDtcbnZhciBERFNDQVBTMl9DVUJFTUFQX1BPU0lUSVZFWiA9IDB4NDAwMDtcbnZhciBERFNDQVBTMl9DVUJFTUFQX05FR0FUSVZFWiA9IDB4ODAwMDtcbnZhciBERFNDQVBTMl9WT0xVTUUgPSAweDIwMDAwMDtcblxudmFyIEREUEZfQUxQSEFQSVhFTFMgPSAweDE7XG52YXIgRERQRl9BTFBIQSA9IDB4MjtcbnZhciBERFBGX0ZPVVJDQyA9IDB4NDtcbnZhciBERFBGX1JHQiA9IDB4NDA7XG52YXIgRERQRl9ZVVYgPSAweDIwMDtcbnZhciBERFBGX0xVTUlOQU5DRSA9IDB4MjAwMDA7XG5cbmZ1bmN0aW9uIGZvdXJDQ1RvSW50MzIodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUuY2hhckNvZGVBdCgwKSArXG4gICAgICAgICh2YWx1ZS5jaGFyQ29kZUF0KDEpIDw8IDgpICtcbiAgICAgICAgKHZhbHVlLmNoYXJDb2RlQXQoMikgPDwgMTYpICtcbiAgICAgICAgKHZhbHVlLmNoYXJDb2RlQXQoMykgPDwgMjQpO1xufVxuXG5mdW5jdGlvbiBpbnQzMlRvRm91ckNDKHZhbHVlKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoXG4gICAgICAgIHZhbHVlICYgMHhmZixcbiAgICAgICAgKHZhbHVlID4+IDgpICYgMHhmZixcbiAgICAgICAgKHZhbHVlID4+IDE2KSAmIDB4ZmYsXG4gICAgICAgICh2YWx1ZSA+PiAyNCkgJiAweGZmXG4gICAgKTtcbn1cblxudmFyIGhlYWRlckxlbmd0aEludCA9IDMxOyAvLyBUaGUgaGVhZGVyIGxlbmd0aCBpbiAzMiBiaXQgaW50c1xuXG52YXIgRk9VUkNDX0RYVDEgPSBmb3VyQ0NUb0ludDMyKCdEWFQxJyk7XG52YXIgRk9VUkNDX0RYVDMgPSBmb3VyQ0NUb0ludDMyKCdEWFQzJyk7XG52YXIgRk9VUkNDX0RYVDUgPSBmb3VyQ0NUb0ludDMyKCdEWFQ1Jyk7XG4vLyBPZmZzZXRzIGludG8gdGhlIGhlYWRlciBhcnJheVxudmFyIG9mZl9tYWdpYyA9IDA7XG5cbnZhciBvZmZfc2l6ZSA9IDE7XG52YXIgb2ZmX2ZsYWdzID0gMjtcbnZhciBvZmZfaGVpZ2h0ID0gMztcbnZhciBvZmZfd2lkdGggPSA0O1xuXG52YXIgb2ZmX21pcG1hcENvdW50ID0gNztcblxudmFyIG9mZl9wZkZsYWdzID0gMjA7XG52YXIgb2ZmX3BmRm91ckNDID0gMjE7XG5cbnZhciBvZmZfY2FwcyA9IDI3O1xudmFyIG9mZl9jYXBzMiA9IDI4O1xudmFyIG9mZl9jYXBzMyA9IDI5O1xudmFyIG9mZl9jYXBzNCA9IDMwO1xuXG52YXIgcmV0ID0ge1xuICAgIHBhcnNlOiBmdW5jdGlvbihhcnJheUJ1ZmZlciwgb3V0KSB7XG4gICAgICAgIHZhciBoZWFkZXIgPSBuZXcgSW50MzJBcnJheShhcnJheUJ1ZmZlciwgMCwgaGVhZGVyTGVuZ3RoSW50KTtcbiAgICAgICAgaWYgKGhlYWRlcltvZmZfbWFnaWNdICE9PSBERFNfTUFHSUMpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaGVhZGVyKG9mZl9wZkZsYWdzKSAmIEREUEZfRk9VUkNDKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmb3VyQ0MgPSBoZWFkZXIob2ZmX3BmRm91ckNDKTtcbiAgICAgICAgdmFyIHdpZHRoID0gaGVhZGVyW29mZl93aWR0aF07XG4gICAgICAgIHZhciBoZWlnaHQgPSBoZWFkZXJbb2ZmX2hlaWdodF07XG4gICAgICAgIHZhciBpc0N1YmVNYXAgPSBoZWFkZXJbb2ZmX2NhcHMyXSAmIEREU0NBUFMyX0NVQkVNQVA7XG4gICAgICAgIHZhciBoYXNNaXBtYXAgPSBoZWFkZXJbb2ZmX2ZsYWdzXSAmIEREU0RfTUlQTUFQQ09VTlQ7XG4gICAgICAgIHZhciBibG9ja0J5dGVzLCBpbnRlcm5hbEZvcm1hdDtcbiAgICAgICAgc3dpdGNoKGZvdXJDQykge1xuICAgICAgICAgICAgY2FzZSBGT1VSQ0NfRFhUMTpcbiAgICAgICAgICAgICAgICBibG9ja0J5dGVzID0gODtcbiAgICAgICAgICAgICAgICBpbnRlcm5hbEZvcm1hdCA9IFRleHR1cmUuQ09NUFJFU1NFRF9SR0JfUzNUQ19EWFQxX0VYVDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRk9VUkNDX0RYVDM6XG4gICAgICAgICAgICAgICAgYmxvY2tCeXRlcyA9IDE2O1xuICAgICAgICAgICAgICAgIGludGVybmFsRm9ybWF0ID0gVGV4dHVyZS5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQzX0VYVDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgRk9VUkNDX0RYVDU6XG4gICAgICAgICAgICAgICAgYmxvY2tCeXRlcyA9IDE2O1xuICAgICAgICAgICAgICAgIGludGVybmFsRm9ybWF0ID0gVGV4dHVyZS5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQ1X0VYVDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRhdGFPZmZzZXQgPSBoZWFkZXJbb2ZmX3NpemVdICsgNDtcbiAgICAgICAgLy8gVE9ETzogU3VwcG9zZSBhbGwgZmFjZSBhcmUgZXhpc3RlZFxuICAgICAgICB2YXIgZmFjZU51bWJlciA9IGlzQ3ViZU1hcCA/IDYgOiAxO1xuICAgICAgICB2YXIgbWlwbWFwQ291bnQgPSAxO1xuICAgICAgICBpZiAoaGFzTWlwbWFwKSB7XG4gICAgICAgICAgICBtaXBtYXBDb3VudCA9IE1hdGgubWF4KDEsIGhlYWRlcltvZmZfbWlwbWFwQ291bnRdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0ZXh0dXJlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBmID0gMDsgZiA8IGZhY2VOdW1iZXI7IGYrKykge1xuICAgICAgICAgICAgdmFyIF93aWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgdmFyIF9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgICAgICB0ZXh0dXJlc1tmXSA9IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICAgICAgICAgIHdpZHRoOiBfd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBfaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGZvcm1hdDogaW50ZXJuYWxGb3JtYXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIG1pcG1hcHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWlwbWFwQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhTGVuZ3RoID0gTWF0aC5tYXgoNCwgX3dpZHRoKSAvIDQgKiBNYXRoLm1heCg0LCBfaGVpZ2h0KSAvIDQgKiBibG9ja0J5dGVzO1xuICAgICAgICAgICAgICAgIHZhciBieXRlQXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlciwgZGF0YU9mZnNldCwgZGF0YUxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICBkYXRhT2Zmc2V0ICs9IGRhdGFMZW5ndGg7XG4gICAgICAgICAgICAgICAgX3dpZHRoICo9IDAuNTtcbiAgICAgICAgICAgICAgICBfaGVpZ2h0ICo9IDAuNTtcbiAgICAgICAgICAgICAgICBtaXBtYXBzW2ldID0gYnl0ZUFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGV4dHVyZXNbZl0ucGl4ZWxzID0gbWlwbWFwc1swXTtcbiAgICAgICAgICAgIGlmIChoYXNNaXBtYXApIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlc1tmXS5taXBtYXBzID0gbWlwbWFwcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPXG4gICAgICAgIC8vIHJldHVybiBpc0N1YmVNYXAgPyB0ZXh0dXJlcyA6IHRleHR1cmVzWzBdO1xuICAgICAgICBpZiAob3V0KSB7XG4gICAgICAgICAgICBvdXQud2lkdGggPSB0ZXh0dXJlc1swXS53aWR0aDtcbiAgICAgICAgICAgIG91dC5oZWlnaHQgPSB0ZXh0dXJlc1swXS5oZWlnaHQ7XG4gICAgICAgICAgICBvdXQuZm9ybWF0ID0gdGV4dHVyZXNbMF0uZm9ybWF0O1xuICAgICAgICAgICAgb3V0LnBpeGVscyA9IHRleHR1cmVzWzBdLnBpeGVscztcbiAgICAgICAgICAgIG91dC5taXBtYXBzID0gdGV4dHVyZXNbMF0ubWlwbWFwcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlc1swXTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHJldDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvdXRpbC9kZHMuanNcbi8vIG1vZHVsZSBpZCA9IDk1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///95\n");

/***/ }),
/* 96 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Texture2D__ = __webpack_require__(10);\n\n\nvar toChar = String.fromCharCode;\n\nvar MINELEN = 8;\nvar MAXELEN = 0x7fff;\nfunction rgbe2float(rgbe, buffer, offset, exposure) {\n    if (rgbe[3] > 0) {\n        var f = Math.pow(2.0, rgbe[3] - 128 - 8 + exposure);\n        buffer[offset + 0] = rgbe[0] * f;\n        buffer[offset + 1] = rgbe[1] * f;\n        buffer[offset + 2] = rgbe[2] * f;\n    }\n    else {\n        buffer[offset + 0] = 0;\n        buffer[offset + 1] = 0;\n        buffer[offset + 2] = 0;\n    }\n    buffer[offset + 3] = 1.0;\n    return buffer;\n}\n\nfunction uint82string(array, offset, size) {\n    var str = '';\n    for (var i = offset; i < size; i++) {\n        str += toChar(array[i]);\n    }\n    return str;\n}\n\nfunction copyrgbe(s, t) {\n    t[0] = s[0];\n    t[1] = s[1];\n    t[2] = s[2];\n    t[3] = s[3];\n}\n\n// TODO : check\nfunction oldReadColors(scan, buffer, offset, xmax) {\n    var rshift = 0, x = 0, len = xmax;\n    while (len > 0) {\n        scan[x][0] = buffer[offset++];\n        scan[x][1] = buffer[offset++];\n        scan[x][2] = buffer[offset++];\n        scan[x][3] = buffer[offset++];\n        if (scan[x][0] === 1 && scan[x][1] === 1 && scan[x][2] === 1) {\n            // exp is count of repeated pixels\n            for (var i = (scan[x][3] << rshift) >>> 0; i > 0; i--) {\n                copyrgbe(scan[x-1], scan[x]);\n                x++;\n                len--;\n            }\n            rshift += 8;\n        } else {\n            x++;\n            len--;\n            rshift = 0;\n        }\n    }\n    return offset;\n}\n\nfunction readColors(scan, buffer, offset, xmax) {\n    if ((xmax < MINELEN) | (xmax > MAXELEN)) {\n        return oldReadColors(scan, buffer, offset, xmax);\n    }\n    var i = buffer[offset++];\n    if (i != 2) {\n        return oldReadColors(scan, buffer, offset - 1, xmax);\n    }\n    scan[0][1] = buffer[offset++];\n    scan[0][2] = buffer[offset++];\n\n    i = buffer[offset++];\n    if ((((scan[0][2] << 8) >>> 0) | i) >>> 0 !== xmax) {\n        return null;\n    }\n    for (var i = 0; i < 4; i++) {\n        for (var x = 0; x < xmax;) {\n            var code = buffer[offset++];\n            if (code > 128) {\n                code = (code & 127) >>> 0;\n                var val = buffer[offset++];\n                while (code--) {\n                    scan[x++][i] = val;\n                }\n            } else {\n                while (code--) {\n                    scan[x++][i] = buffer[offset++];\n                }\n            }\n        }\n    }\n    return offset;\n}\n\n\nvar ret = {\n    // http://www.graphics.cornell.edu/~bjw/rgbe.html\n    // Blender source\n    // http://radsite.lbl.gov/radiance/refer/Notes/picture_format.html\n    parseRGBE: function(arrayBuffer, texture, exposure) {\n        if (exposure == null) {\n            exposure = 0;\n        }\n        var data = new Uint8Array(arrayBuffer);\n        var size = data.length;\n        if (uint82string(data, 0, 2) !== '#?') {\n            return;\n        }\n        // find empty line, next line is resolution info\n        for (var i = 2; i < size; i++) {\n            if (toChar(data[i]) === '\\n' && toChar(data[i+1]) === '\\n') {\n                break;\n            }\n        }\n        if (i >= size) { // not found\n            return;\n        }\n        // find resolution info line\n        i += 2;\n        var str = '';\n        for (; i < size; i++) {\n            var _char = toChar(data[i]);\n            if (_char === '\\n') {\n                break;\n            }\n            str += _char;\n        }\n        // -Y M +X N\n        var tmp = str.split(' ');\n        var height = parseInt(tmp[1]);\n        var width = parseInt(tmp[3]);\n        if (!width || !height) {\n            return;\n        }\n\n        // read and decode actual data\n        var offset = i+1;\n        var scanline = [];\n        // memzero\n        for (var x = 0; x < width; x++) {\n            scanline[x] = [];\n            for (var j = 0; j < 4; j++) {\n                scanline[x][j] = 0;\n            }\n        }\n        var pixels = new Float32Array(width * height * 4);\n        var offset2 = 0;\n        for (var y = 0; y < height; y++) {\n            var offset = readColors(scanline, data, offset, width);\n            if (!offset) {\n                return null;\n            }\n            for (var x = 0; x < width; x++) {\n                rgbe2float(scanline[x], pixels, offset2, exposure);\n                offset2 += 4;\n            }\n        }\n\n        if (!texture) {\n            texture = new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */]();\n        }\n        texture.width = width;\n        texture.height = height;\n        texture.pixels = pixels;\n        // HALF_FLOAT can't use Float32Array\n        texture.type = __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].FLOAT;\n        return texture;\n    },\n\n    parseRGBEFromPNG: function(png) {\n\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ret);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy91dGlsL2hkci5qcz80MzVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZXh0dXJlIGZyb20gJy4uL1RleHR1cmUnO1xuaW1wb3J0IFRleHR1cmUyRCBmcm9tICcuLi9UZXh0dXJlMkQnO1xudmFyIHRvQ2hhciA9IFN0cmluZy5mcm9tQ2hhckNvZGU7XG5cbnZhciBNSU5FTEVOID0gODtcbnZhciBNQVhFTEVOID0gMHg3ZmZmO1xuZnVuY3Rpb24gcmdiZTJmbG9hdChyZ2JlLCBidWZmZXIsIG9mZnNldCwgZXhwb3N1cmUpIHtcbiAgICBpZiAocmdiZVszXSA+IDApIHtcbiAgICAgICAgdmFyIGYgPSBNYXRoLnBvdygyLjAsIHJnYmVbM10gLSAxMjggLSA4ICsgZXhwb3N1cmUpO1xuICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMF0gPSByZ2JlWzBdICogZjtcbiAgICAgICAgYnVmZmVyW29mZnNldCArIDFdID0gcmdiZVsxXSAqIGY7XG4gICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAyXSA9IHJnYmVbMl0gKiBmO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYnVmZmVyW29mZnNldCArIDBdID0gMDtcbiAgICAgICAgYnVmZmVyW29mZnNldCArIDFdID0gMDtcbiAgICAgICAgYnVmZmVyW29mZnNldCArIDJdID0gMDtcbiAgICB9XG4gICAgYnVmZmVyW29mZnNldCArIDNdID0gMS4wO1xuICAgIHJldHVybiBidWZmZXI7XG59XG5cbmZ1bmN0aW9uIHVpbnQ4MnN0cmluZyhhcnJheSwgb2Zmc2V0LCBzaXplKSB7XG4gICAgdmFyIHN0ciA9ICcnO1xuICAgIGZvciAodmFyIGkgPSBvZmZzZXQ7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgc3RyICs9IHRvQ2hhcihhcnJheVtpXSk7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59XG5cbmZ1bmN0aW9uIGNvcHlyZ2JlKHMsIHQpIHtcbiAgICB0WzBdID0gc1swXTtcbiAgICB0WzFdID0gc1sxXTtcbiAgICB0WzJdID0gc1syXTtcbiAgICB0WzNdID0gc1szXTtcbn1cblxuLy8gVE9ETyA6IGNoZWNrXG5mdW5jdGlvbiBvbGRSZWFkQ29sb3JzKHNjYW4sIGJ1ZmZlciwgb2Zmc2V0LCB4bWF4KSB7XG4gICAgdmFyIHJzaGlmdCA9IDAsIHggPSAwLCBsZW4gPSB4bWF4O1xuICAgIHdoaWxlIChsZW4gPiAwKSB7XG4gICAgICAgIHNjYW5beF1bMF0gPSBidWZmZXJbb2Zmc2V0KytdO1xuICAgICAgICBzY2FuW3hdWzFdID0gYnVmZmVyW29mZnNldCsrXTtcbiAgICAgICAgc2Nhblt4XVsyXSA9IGJ1ZmZlcltvZmZzZXQrK107XG4gICAgICAgIHNjYW5beF1bM10gPSBidWZmZXJbb2Zmc2V0KytdO1xuICAgICAgICBpZiAoc2Nhblt4XVswXSA9PT0gMSAmJiBzY2FuW3hdWzFdID09PSAxICYmIHNjYW5beF1bMl0gPT09IDEpIHtcbiAgICAgICAgICAgIC8vIGV4cCBpcyBjb3VudCBvZiByZXBlYXRlZCBwaXhlbHNcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAoc2Nhblt4XVszXSA8PCByc2hpZnQpID4+PiAwOyBpID4gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgY29weXJnYmUoc2Nhblt4LTFdLCBzY2FuW3hdKTtcbiAgICAgICAgICAgICAgICB4Kys7XG4gICAgICAgICAgICAgICAgbGVuLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByc2hpZnQgKz0gODtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHgrKztcbiAgICAgICAgICAgIGxlbi0tO1xuICAgICAgICAgICAgcnNoaWZ0ID0gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuXG5mdW5jdGlvbiByZWFkQ29sb3JzKHNjYW4sIGJ1ZmZlciwgb2Zmc2V0LCB4bWF4KSB7XG4gICAgaWYgKCh4bWF4IDwgTUlORUxFTikgfCAoeG1heCA+IE1BWEVMRU4pKSB7XG4gICAgICAgIHJldHVybiBvbGRSZWFkQ29sb3JzKHNjYW4sIGJ1ZmZlciwgb2Zmc2V0LCB4bWF4KTtcbiAgICB9XG4gICAgdmFyIGkgPSBidWZmZXJbb2Zmc2V0KytdO1xuICAgIGlmIChpICE9IDIpIHtcbiAgICAgICAgcmV0dXJuIG9sZFJlYWRDb2xvcnMoc2NhbiwgYnVmZmVyLCBvZmZzZXQgLSAxLCB4bWF4KTtcbiAgICB9XG4gICAgc2NhblswXVsxXSA9IGJ1ZmZlcltvZmZzZXQrK107XG4gICAgc2NhblswXVsyXSA9IGJ1ZmZlcltvZmZzZXQrK107XG5cbiAgICBpID0gYnVmZmVyW29mZnNldCsrXTtcbiAgICBpZiAoKCgoc2NhblswXVsyXSA8PCA4KSA+Pj4gMCkgfCBpKSA+Pj4gMCAhPT0geG1heCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB4bWF4Oykge1xuICAgICAgICAgICAgdmFyIGNvZGUgPSBidWZmZXJbb2Zmc2V0KytdO1xuICAgICAgICAgICAgaWYgKGNvZGUgPiAxMjgpIHtcbiAgICAgICAgICAgICAgICBjb2RlID0gKGNvZGUgJiAxMjcpID4+PiAwO1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBidWZmZXJbb2Zmc2V0KytdO1xuICAgICAgICAgICAgICAgIHdoaWxlIChjb2RlLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgc2Nhblt4KytdW2ldID0gdmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGNvZGUtLSkge1xuICAgICAgICAgICAgICAgICAgICBzY2FuW3grK11baV0gPSBidWZmZXJbb2Zmc2V0KytdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuXG5cbnZhciByZXQgPSB7XG4gICAgLy8gaHR0cDovL3d3dy5ncmFwaGljcy5jb3JuZWxsLmVkdS9+Ymp3L3JnYmUuaHRtbFxuICAgIC8vIEJsZW5kZXIgc291cmNlXG4gICAgLy8gaHR0cDovL3JhZHNpdGUubGJsLmdvdi9yYWRpYW5jZS9yZWZlci9Ob3Rlcy9waWN0dXJlX2Zvcm1hdC5odG1sXG4gICAgcGFyc2VSR0JFOiBmdW5jdGlvbihhcnJheUJ1ZmZlciwgdGV4dHVyZSwgZXhwb3N1cmUpIHtcbiAgICAgICAgaWYgKGV4cG9zdXJlID09IG51bGwpIHtcbiAgICAgICAgICAgIGV4cG9zdXJlID0gMDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGF0YSA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKTtcbiAgICAgICAgdmFyIHNpemUgPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgaWYgKHVpbnQ4MnN0cmluZyhkYXRhLCAwLCAyKSAhPT0gJyM/Jykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZpbmQgZW1wdHkgbGluZSwgbmV4dCBsaW5lIGlzIHJlc29sdXRpb24gaW5mb1xuICAgICAgICBmb3IgKHZhciBpID0gMjsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRvQ2hhcihkYXRhW2ldKSA9PT0gJ1xcbicgJiYgdG9DaGFyKGRhdGFbaSsxXSkgPT09ICdcXG4nKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPj0gc2l6ZSkgeyAvLyBub3QgZm91bmRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBmaW5kIHJlc29sdXRpb24gaW5mbyBsaW5lXG4gICAgICAgIGkgKz0gMjtcbiAgICAgICAgdmFyIHN0ciA9ICcnO1xuICAgICAgICBmb3IgKDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICAgICAgdmFyIF9jaGFyID0gdG9DaGFyKGRhdGFbaV0pO1xuICAgICAgICAgICAgaWYgKF9jaGFyID09PSAnXFxuJykge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RyICs9IF9jaGFyO1xuICAgICAgICB9XG4gICAgICAgIC8vIC1ZIE0gK1ggTlxuICAgICAgICB2YXIgdG1wID0gc3RyLnNwbGl0KCcgJyk7XG4gICAgICAgIHZhciBoZWlnaHQgPSBwYXJzZUludCh0bXBbMV0pO1xuICAgICAgICB2YXIgd2lkdGggPSBwYXJzZUludCh0bXBbM10pO1xuICAgICAgICBpZiAoIXdpZHRoIHx8ICFoZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlYWQgYW5kIGRlY29kZSBhY3R1YWwgZGF0YVxuICAgICAgICB2YXIgb2Zmc2V0ID0gaSsxO1xuICAgICAgICB2YXIgc2NhbmxpbmUgPSBbXTtcbiAgICAgICAgLy8gbWVtemVyb1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgIHNjYW5saW5lW3hdID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDQ7IGorKykge1xuICAgICAgICAgICAgICAgIHNjYW5saW5lW3hdW2pdID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgcGl4ZWxzID0gbmV3IEZsb2F0MzJBcnJheSh3aWR0aCAqIGhlaWdodCAqIDQpO1xuICAgICAgICB2YXIgb2Zmc2V0MiA9IDA7XG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSByZWFkQ29sb3JzKHNjYW5saW5lLCBkYXRhLCBvZmZzZXQsIHdpZHRoKTtcbiAgICAgICAgICAgIGlmICghb2Zmc2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICByZ2JlMmZsb2F0KHNjYW5saW5lW3hdLCBwaXhlbHMsIG9mZnNldDIsIGV4cG9zdXJlKTtcbiAgICAgICAgICAgICAgICBvZmZzZXQyICs9IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRleHR1cmUpIHtcbiAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgVGV4dHVyZTJEKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGV4dHVyZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0ZXh0dXJlLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGV4dHVyZS5waXhlbHMgPSBwaXhlbHM7XG4gICAgICAgIC8vIEhBTEZfRkxPQVQgY2FuJ3QgdXNlIEZsb2F0MzJBcnJheVxuICAgICAgICB0ZXh0dXJlLnR5cGUgPSBUZXh0dXJlLkZMT0FUO1xuICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICB9LFxuXG4gICAgcGFyc2VSR0JFRnJvbVBORzogZnVuY3Rpb24ocG5nKSB7XG5cbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCByZXQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3V0aWwvaGRyLmpzXG4vLyBtb2R1bGUgaWQgPSA5NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///96\n");

/***/ }),
/* 97 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_vendor__ = __webpack_require__(4);\n\n\n\n/**\n * Spherical Harmonic Ambient Light\n * @constructor clay.light.AmbientSH\n * @extends clay.Light\n */\nvar AmbientSHLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend({\n\n    castShadow: false,\n\n    /**\n     * Spherical Harmonic Coefficients\n     * @type {Array.<number>}\n     * @memberOf clay.light.AmbientSH#\n     */\n    coefficients: [],\n\n}, function () {\n    this._coefficientsTmpArr = new __WEBPACK_IMPORTED_MODULE_1__core_vendor__[\"a\" /* default */].Float32Array(9 * 3);\n}, {\n\n    type: 'AMBIENT_SH_LIGHT',\n\n    uniformTemplates: {\n        ambientSHLightColor: {\n            type: '3f',\n            value: function (instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0] * intensity, color[1] * intensity, color[2] * intensity];\n            }\n        },\n\n        ambientSHLightCoefficients: {\n            type: '3f',\n            value: function (instance) {\n                var coefficientsTmpArr = instance._coefficientsTmpArr;\n                for (var i = 0; i < instance.coefficients.length; i++) {\n                    coefficientsTmpArr[i] = instance.coefficients[i];\n                }\n                return coefficientsTmpArr;\n            }\n        }\n    }\n    /**\n     * @function\n     * @name clone\n     * @return {clay.light.Ambient}\n     * @memberOf clay.light.Ambient.prototype\n     */\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (AmbientSHLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9saWdodC9BbWJpZW50U0guanM/NTY2MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGlnaHQgZnJvbSAnLi4vTGlnaHQnO1xuaW1wb3J0IHZlbmRvciBmcm9tICcuLi9jb3JlL3ZlbmRvcic7XG5cbi8qKlxuICogU3BoZXJpY2FsIEhhcm1vbmljIEFtYmllbnQgTGlnaHRcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LmxpZ2h0LkFtYmllbnRTSFxuICogQGV4dGVuZHMgY2xheS5MaWdodFxuICovXG52YXIgQW1iaWVudFNITGlnaHQgPSBMaWdodC5leHRlbmQoe1xuXG4gICAgY2FzdFNoYWRvdzogZmFsc2UsXG5cbiAgICAvKipcbiAgICAgKiBTcGhlcmljYWwgSGFybW9uaWMgQ29lZmZpY2llbnRzXG4gICAgICogQHR5cGUge0FycmF5LjxudW1iZXI+fVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmxpZ2h0LkFtYmllbnRTSCNcbiAgICAgKi9cbiAgICBjb2VmZmljaWVudHM6IFtdLFxuXG59LCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fY29lZmZpY2llbnRzVG1wQXJyID0gbmV3IHZlbmRvci5GbG9hdDMyQXJyYXkoOSAqIDMpO1xufSwge1xuXG4gICAgdHlwZTogJ0FNQklFTlRfU0hfTElHSFQnLFxuXG4gICAgdW5pZm9ybVRlbXBsYXRlczoge1xuICAgICAgICBhbWJpZW50U0hMaWdodENvbG9yOiB7XG4gICAgICAgICAgICB0eXBlOiAnM2YnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGluc3RhbmNlLmNvbG9yO1xuICAgICAgICAgICAgICAgIHZhciBpbnRlbnNpdHkgPSBpbnN0YW5jZS5pbnRlbnNpdHk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtjb2xvclswXSAqIGludGVuc2l0eSwgY29sb3JbMV0gKiBpbnRlbnNpdHksIGNvbG9yWzJdICogaW50ZW5zaXR5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBhbWJpZW50U0hMaWdodENvZWZmaWNpZW50czoge1xuICAgICAgICAgICAgdHlwZTogJzNmJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnRzVG1wQXJyID0gaW5zdGFuY2UuX2NvZWZmaWNpZW50c1RtcEFycjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluc3RhbmNlLmNvZWZmaWNpZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudHNUbXBBcnJbaV0gPSBpbnN0YW5jZS5jb2VmZmljaWVudHNbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBjb2VmZmljaWVudHNUbXBBcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQG5hbWUgY2xvbmVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LmxpZ2h0LkFtYmllbnR9XG4gICAgICogQG1lbWJlck9mIGNsYXkubGlnaHQuQW1iaWVudC5wcm90b3R5cGVcbiAgICAgKi9cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBBbWJpZW50U0hMaWdodDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvbGlnaHQvQW1iaWVudFNILmpzXG4vLyBtb2R1bGUgaWQgPSA5N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///97\n");

/***/ }),
/* 98 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__math_Frustum__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Renderer__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__FrameBuffer__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__TextureCube__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__camera_Orthographic__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__compositor_Pass__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__compositor_TexturePool__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__shader_source_shadowmap_glsl_js__ = __webpack_require__(140);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar targets = ['px', 'nx', 'py', 'ny', 'pz', 'nz'];\n\n\n__WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_18__shader_source_shadowmap_glsl_js__[\"a\" /* default */]);\n\nfunction getDepthMaterialUniform(renderable, depthMaterial, symbol) {\n    if (symbol === 'alphaMap') {\n        return renderable.material.get('diffuseMap');\n    }\n    else if (symbol === 'alphaCutoff') {\n        if (renderable.material.isDefined('fragment', 'ALPHA_TEST')\n            && renderable.material.get('diffuseMap')\n        ) {\n            var alphaCutoff = renderable.material.get('alphaCutoff');\n            return alphaCutoff || 0;\n        }\n        return 0;\n    }\n    else if (symbol === 'uvRepeat') {\n        return renderable.material.get('uvRepeat');\n    }\n    else if (symbol === 'uvOffset') {\n        return renderable.material.get('uvOffset');\n    }\n    else {\n        return depthMaterial.get(symbol);\n    }\n}\n\nfunction isDepthMaterialChanged(renderable, prevRenderable) {\n    var matA = renderable.material;\n    var matB = prevRenderable.material;\n    return matA.get('diffuseMap') !== matB.get('diffuseMap')\n        || (matA.get('alphaCutoff') || 0) !== (matB.get('alphaCutoff') || 0);\n}\n\n/**\n * Pass rendering shadow map.\n *\n * @constructor clay.prePass.ShadowMap\n * @extends clay.core.Base\n * @example\n *     var shadowMapPass = new clay.prePass.ShadowMap({\n *         softShadow: clay.prePass.ShadowMap.VSM\n *     });\n *     ...\n *     animation.on('frame', function (frameTime) {\n *         shadowMapPass.render(renderer, scene, camera);\n *         renderer.render(scene, camera);\n *     });\n */\nvar ShadowMapPass = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.prePass.ShadowMap# */ {\n        /**\n         * Soft shadow technique.\n         * Can be {@link clay.prePass.ShadowMap.PCF} or {@link clay.prePass.ShadowMap.VSM}\n         * @type {number}\n         */\n        softShadow: ShadowMapPass.PCF,\n\n        /**\n         * Soft shadow blur size\n         * @type {number}\n         */\n        shadowBlur: 1.0,\n\n        lightFrustumBias: 'auto',\n\n        kernelPCF: new Float32Array([\n            1, 0,\n            1, 1,\n            -1, 1,\n            0, 1,\n            -1, 0,\n            -1, -1,\n            1, -1,\n            0, -1\n        ]),\n\n        precision: 'highp',\n\n        _lastRenderNotCastShadow: false,\n\n        _frameBuffer: new __WEBPACK_IMPORTED_MODULE_9__FrameBuffer__[\"a\" /* default */](),\n\n        _textures: {},\n        _shadowMapNumber: {\n            'POINT_LIGHT': 0,\n            'DIRECTIONAL_LIGHT': 0,\n            'SPOT_LIGHT': 0\n        },\n\n        _depthMaterials: {},\n        _distanceMaterials: {},\n\n        _receivers: [],\n        _lightsCastShadow: [],\n\n        _lightCameras: {},\n        _lightMaterials: {},\n\n        _texturePool: new __WEBPACK_IMPORTED_MODULE_16__compositor_TexturePool__[\"a\" /* default */]()\n    };\n}, function () {\n    // Gaussian filter pass for VSM\n    this._gaussianPassH = new __WEBPACK_IMPORTED_MODULE_15__compositor_Pass__[\"a\" /* default */]({\n        fragment: __WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */].source('clay.compositor.gaussian_blur')\n    });\n    this._gaussianPassV = new __WEBPACK_IMPORTED_MODULE_15__compositor_Pass__[\"a\" /* default */]({\n        fragment: __WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */].source('clay.compositor.gaussian_blur')\n    });\n    this._gaussianPassH.setUniform('blurSize', this.shadowBlur);\n    this._gaussianPassH.setUniform('blurDir', 0.0);\n    this._gaussianPassV.setUniform('blurSize', this.shadowBlur);\n    this._gaussianPassV.setUniform('blurDir', 1.0);\n\n    this._outputDepthPass = new __WEBPACK_IMPORTED_MODULE_15__compositor_Pass__[\"a\" /* default */]({\n        fragment: __WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */].source('clay.sm.debug_depth')\n    });\n}, {\n    /**\n     * Render scene to shadow textures\n     * @param  {clay.Renderer} renderer\n     * @param  {clay.Scene} scene\n     * @param  {clay.Camera} sceneCamera\n     * @param  {boolean} [notUpdateScene=false]\n     * @memberOf clay.prePass.ShadowMap.prototype\n     */\n    render: function (renderer, scene, sceneCamera, notUpdateScene) {\n        if (!sceneCamera) {\n            sceneCamera = scene.getMainCamera();\n        }\n        this.trigger('beforerender', this, renderer, scene, sceneCamera);\n        this._renderShadowPass(renderer, scene, sceneCamera, notUpdateScene);\n        this.trigger('afterrender', this, renderer, scene, sceneCamera);\n    },\n\n    /**\n     * Debug rendering of shadow textures\n     * @param  {clay.Renderer} renderer\n     * @param  {number} size\n     * @memberOf clay.prePass.ShadowMap.prototype\n     */\n    renderDebug: function (renderer, size) {\n        renderer.saveClear();\n        var viewport = renderer.viewport;\n        var x = 0, y = 0;\n        var width = size || viewport.width / 4;\n        var height = width;\n        if (this.softShadow === ShadowMapPass.VSM) {\n            this._outputDepthPass.material.define('fragment', 'USE_VSM');\n        }\n        else {\n            this._outputDepthPass.material.undefine('fragment', 'USE_VSM');\n        }\n        for (var name in this._textures) {\n            var texture = this._textures[name];\n            renderer.setViewport(x, y, width * texture.width / texture.height, height);\n            this._outputDepthPass.setUniform('depthMap', texture);\n            this._outputDepthPass.render(renderer);\n            x += width * texture.width / texture.height;\n        }\n        renderer.setViewport(viewport);\n        renderer.restoreClear();\n    },\n\n    _updateReceivers: function (renderer, mesh) {\n        if (mesh.receiveShadow) {\n            this._receivers.push(mesh);\n            mesh.material.set('shadowEnabled', 1);\n\n            mesh.material.set('pcfKernel', this.kernelPCF);\n        }\n        else {\n            mesh.material.set('shadowEnabled', 0);\n        }\n\n        if (this.softShadow === ShadowMapPass.VSM) {\n            mesh.material.define('fragment', 'USE_VSM');\n            mesh.material.undefine('fragment', 'PCF_KERNEL_SIZE');\n        }\n        else {\n            mesh.material.undefine('fragment', 'USE_VSM');\n            var kernelPCF = this.kernelPCF;\n            if (kernelPCF && kernelPCF.length) {\n                mesh.material.define('fragment', 'PCF_KERNEL_SIZE', kernelPCF.length / 2);\n            }\n            else {\n                mesh.material.undefine('fragment', 'PCF_KERNEL_SIZE');\n            }\n        }\n    },\n\n    _update: function (renderer, scene) {\n        var self = this;\n        scene.traverse(function (renderable) {\n            if (renderable.isRenderable()) {\n                self._updateReceivers(renderer, renderable);\n            }\n        });\n\n        for (var i = 0; i < scene.lights.length; i++) {\n            var light = scene.lights[i];\n            if (light.castShadow && !light.invisible) {\n                this._lightsCastShadow.push(light);\n            }\n        }\n    },\n\n    _renderShadowPass: function (renderer, scene, sceneCamera, notUpdateScene) {\n        // reset\n        for (var name in this._shadowMapNumber) {\n            this._shadowMapNumber[name] = 0;\n        }\n        this._lightsCastShadow.length = 0;\n        this._receivers.length = 0;\n\n        var _gl = renderer.gl;\n\n        if (!notUpdateScene) {\n            scene.update();\n        }\n        if (sceneCamera) {\n            sceneCamera.update();\n        }\n\n        scene.updateLights();\n        this._update(renderer, scene);\n\n        // Needs to update the receivers again if shadows come from 1 to 0.\n        if (!this._lightsCastShadow.length && this._lastRenderNotCastShadow) {\n            return;\n        }\n\n        this._lastRenderNotCastShadow = this._lightsCastShadow === 0;\n\n        _gl.enable(_gl.DEPTH_TEST);\n        _gl.depthMask(true);\n        _gl.disable(_gl.BLEND);\n\n        // Clear with high-z, so the part not rendered will not been shadowed\n        // TODO\n        // TODO restore\n        _gl.clearColor(1.0, 1.0, 1.0, 1.0);\n\n        // Shadow uniforms\n        var spotLightShadowMaps = [];\n        var spotLightMatrices = [];\n        var directionalLightShadowMaps = [];\n        var directionalLightMatrices = [];\n        var shadowCascadeClips = [];\n        var pointLightShadowMaps = [];\n\n        var dirLightHasCascade;\n        // Create textures for shadow map\n        for (var i = 0; i < this._lightsCastShadow.length; i++) {\n            var light = this._lightsCastShadow[i];\n            if (light.type === 'DIRECTIONAL_LIGHT') {\n\n                if (dirLightHasCascade) {\n                    console.warn('Only one direectional light supported with shadow cascade');\n                    continue;\n                }\n                if (light.shadowCascade > 4) {\n                    console.warn('Support at most 4 cascade');\n                    continue;\n                }\n                if (light.shadowCascade > 1) {\n                    dirLightHasCascade = light;\n                }\n\n                this.renderDirectionalLightShadow(\n                    renderer,\n                    scene,\n                    sceneCamera,\n                    light,\n                    shadowCascadeClips,\n                    directionalLightMatrices,\n                    directionalLightShadowMaps\n                );\n            }\n            else if (light.type === 'SPOT_LIGHT') {\n                this.renderSpotLightShadow(\n                    renderer,\n                    scene,\n                    light,\n                    spotLightMatrices,\n                    spotLightShadowMaps\n                );\n            }\n            else if (light.type === 'POINT_LIGHT') {\n                this.renderPointLightShadow(\n                    renderer,\n                    scene,\n                    light,\n                    pointLightShadowMaps\n                );\n            }\n\n            this._shadowMapNumber[light.type]++;\n        }\n\n        for (var lightType in this._shadowMapNumber) {\n            var number = this._shadowMapNumber[lightType];\n            var key = lightType + '_SHADOWMAP_COUNT';\n            for (var i = 0; i < this._receivers.length; i++) {\n                var mesh = this._receivers[i];\n                var material = mesh.material;\n                if (material.fragmentDefines[key] !== number) {\n                    if (number > 0) {\n                        material.define('fragment', key, number);\n                    }\n                    else if (material.isDefined('fragment', key)) {\n                        material.undefine('fragment', key);\n                    }\n                }\n            }\n        }\n        for (var i = 0; i < this._receivers.length; i++) {\n            var mesh = this._receivers[i];\n            var material = mesh.material;\n            if (dirLightHasCascade) {\n                material.define('fragment', 'SHADOW_CASCADE', dirLightHasCascade.shadowCascade);\n            }\n            else {\n                material.undefine('fragment', 'SHADOW_CASCADE');\n            }\n        }\n\n        var shadowUniforms = scene.shadowUniforms;\n\n        function getSize(texture) {\n            return texture.height;\n        }\n        if (directionalLightShadowMaps.length > 0) {\n            var directionalLightShadowMapSizes = directionalLightShadowMaps.map(getSize);\n            shadowUniforms.directionalLightShadowMaps = { value: directionalLightShadowMaps, type: 'tv' };\n            shadowUniforms.directionalLightMatrices = { value: directionalLightMatrices, type: 'm4v' };\n            shadowUniforms.directionalLightShadowMapSizes = { value: directionalLightShadowMapSizes, type: '1fv' };\n            if (dirLightHasCascade) {\n                var shadowCascadeClipsNear = shadowCascadeClips.slice();\n                var shadowCascadeClipsFar = shadowCascadeClips.slice();\n                shadowCascadeClipsNear.pop();\n                shadowCascadeClipsFar.shift();\n\n                // Iterate from far to near\n                shadowCascadeClipsNear.reverse();\n                shadowCascadeClipsFar.reverse();\n                // directionalLightShadowMaps.reverse();\n                directionalLightMatrices.reverse();\n                shadowUniforms.shadowCascadeClipsNear = { value: shadowCascadeClipsNear, type: '1fv' };\n                shadowUniforms.shadowCascadeClipsFar = { value: shadowCascadeClipsFar, type: '1fv' };\n            }\n        }\n\n        if (spotLightShadowMaps.length > 0) {\n            var spotLightShadowMapSizes = spotLightShadowMaps.map(getSize);\n            var shadowUniforms = scene.shadowUniforms;\n            shadowUniforms.spotLightShadowMaps = { value: spotLightShadowMaps, type: 'tv' };\n            shadowUniforms.spotLightMatrices = { value: spotLightMatrices, type: 'm4v' };\n            shadowUniforms.spotLightShadowMapSizes = { value: spotLightShadowMapSizes, type: '1fv' };\n        }\n\n        if (pointLightShadowMaps.length > 0) {\n            shadowUniforms.pointLightShadowMaps = { value: pointLightShadowMaps, type: 'tv' };\n        }\n    },\n\n    renderDirectionalLightShadow: (function () {\n\n        var splitFrustum = new __WEBPACK_IMPORTED_MODULE_4__math_Frustum__[\"a\" /* default */]();\n        var splitProjMatrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n        var cropBBox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n        var cropMatrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n        var lightViewMatrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n        var lightViewProjMatrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n        var lightProjMatrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n\n        return function (renderer, scene, sceneCamera, light, shadowCascadeClips, directionalLightMatrices, directionalLightShadowMaps) {\n\n            var defaultShadowMaterial = this._getDepthMaterial(light);\n            var passConfig = {\n                getMaterial: function (renderable) {\n                    return renderable.shadowDepthMaterial || defaultShadowMaterial;\n                },\n                isMaterialChanged: isDepthMaterialChanged,\n                getUniform: getDepthMaterialUniform,\n                ifRender: function (renderable) {\n                    return renderable.castShadow;\n                },\n                sortCompare: __WEBPACK_IMPORTED_MODULE_6__Renderer__[\"a\" /* default */].opaqueSortCompare\n            };\n\n            // First frame\n            if (!scene.viewBoundingBoxLastFrame.isFinite()) {\n                var boundingBox = scene.getBoundingBox();\n                scene.viewBoundingBoxLastFrame\n                    .copy(boundingBox).applyTransform(sceneCamera.viewMatrix);\n            }\n            // Considering moving speed since the bounding box is from last frame\n            // TODO: add a bias\n            var clippedFar = Math.min(-scene.viewBoundingBoxLastFrame.min.z, sceneCamera.far);\n            var clippedNear = Math.max(-scene.viewBoundingBoxLastFrame.max.z, sceneCamera.near);\n\n            var lightCamera = this._getDirectionalLightCamera(light, scene, sceneCamera);\n\n            var lvpMat4Arr = lightViewProjMatrix.array;\n            lightProjMatrix.copy(lightCamera.projectionMatrix);\n            __WEBPACK_IMPORTED_MODULE_17__glmatrix_mat4__[\"a\" /* default */].invert(lightViewMatrix.array, lightCamera.worldTransform.array);\n            __WEBPACK_IMPORTED_MODULE_17__glmatrix_mat4__[\"a\" /* default */].multiply(lightViewMatrix.array, lightViewMatrix.array, sceneCamera.worldTransform.array);\n            __WEBPACK_IMPORTED_MODULE_17__glmatrix_mat4__[\"a\" /* default */].multiply(lvpMat4Arr, lightProjMatrix.array, lightViewMatrix.array);\n\n            var clipPlanes = [];\n            var isPerspective = sceneCamera instanceof __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */];\n\n            var scaleZ = (sceneCamera.near + sceneCamera.far) / (sceneCamera.near - sceneCamera.far);\n            var offsetZ = 2 * sceneCamera.near * sceneCamera.far / (sceneCamera.near - sceneCamera.far);\n            for (var i = 0; i <= light.shadowCascade; i++) {\n                var clog = clippedNear * Math.pow(clippedFar / clippedNear, i / light.shadowCascade);\n                var cuni = clippedNear + (clippedFar - clippedNear) * i / light.shadowCascade;\n                var c = clog * light.cascadeSplitLogFactor + cuni * (1 - light.cascadeSplitLogFactor);\n                clipPlanes.push(c);\n                shadowCascadeClips.push(-(-c * scaleZ + offsetZ) / -c);\n            }\n            var texture = this._getTexture(light, light.shadowCascade);\n            directionalLightShadowMaps.push(texture);\n\n            var viewport = renderer.viewport;\n\n            var _gl = renderer.gl;\n            this._frameBuffer.attach(texture);\n            this._frameBuffer.bind(renderer);\n            _gl.clear(_gl.COLOR_BUFFER_BIT | _gl.DEPTH_BUFFER_BIT);\n\n            for (var i = 0; i < light.shadowCascade; i++) {\n                // Get the splitted frustum\n                var nearPlane = clipPlanes[i];\n                var farPlane = clipPlanes[i + 1];\n                if (isPerspective) {\n                    __WEBPACK_IMPORTED_MODULE_17__glmatrix_mat4__[\"a\" /* default */].perspective(splitProjMatrix.array, sceneCamera.fov / 180 * Math.PI, sceneCamera.aspect, nearPlane, farPlane);\n                }\n                else {\n                    __WEBPACK_IMPORTED_MODULE_17__glmatrix_mat4__[\"a\" /* default */].ortho(\n                        splitProjMatrix.array,\n                        sceneCamera.left, sceneCamera.right, sceneCamera.bottom, sceneCamera.top,\n                        nearPlane, farPlane\n                    );\n                }\n                splitFrustum.setFromProjection(splitProjMatrix);\n                splitFrustum.getTransformedBoundingBox(cropBBox, lightViewMatrix);\n                cropBBox.applyProjection(lightProjMatrix);\n                var _min = cropBBox.min.array;\n                var _max = cropBBox.max.array;\n                _min[0] = Math.max(_min[0], -1);\n                _min[1] = Math.max(_min[1], -1);\n                _max[0] = Math.min(_max[0], 1);\n                _max[1] = Math.min(_max[1], 1);\n                cropMatrix.ortho(_min[0], _max[0], _min[1], _max[1], 1, -1);\n                lightCamera.projectionMatrix.multiplyLeft(cropMatrix);\n\n                var shadowSize = light.shadowResolution || 512;\n\n                // Reversed, left to right => far to near\n                renderer.setViewport((light.shadowCascade - i - 1) * shadowSize, 0, shadowSize, shadowSize, 1);\n\n                var renderList = scene.updateRenderList(lightCamera);\n                renderer.renderPass(renderList.opaque, lightCamera, passConfig);\n\n                // Filter for VSM\n                if (this.softShadow === ShadowMapPass.VSM) {\n                    this._gaussianFilter(renderer, texture, texture.width);\n                }\n\n                var matrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n                matrix.copy(lightCamera.viewMatrix)\n                    .multiplyLeft(lightCamera.projectionMatrix);\n\n                directionalLightMatrices.push(matrix.array);\n\n                lightCamera.projectionMatrix.copy(lightProjMatrix);\n            }\n\n            this._frameBuffer.unbind(renderer);\n\n            renderer.setViewport(viewport);\n        };\n    })(),\n\n    renderSpotLightShadow: function (renderer, scene, light, spotLightMatrices, spotLightShadowMaps) {\n\n        var texture = this._getTexture(light);\n        var lightCamera = this._getSpotLightCamera(light);\n        var _gl = renderer.gl;\n\n        this._frameBuffer.attach(texture);\n        this._frameBuffer.bind(renderer);\n\n        _gl.clear(_gl.COLOR_BUFFER_BIT | _gl.DEPTH_BUFFER_BIT);\n\n        var defaultShadowMaterial = this._getDepthMaterial(light);\n        var passConfig = {\n            getMaterial: function (renderable) {\n                return renderable.shadowDepthMaterial || defaultShadowMaterial;\n            },\n            isMaterialChanged: isDepthMaterialChanged,\n            getUniform: getDepthMaterialUniform,\n            ifRender: function (renderable) {\n                return renderable.castShadow;\n            },\n            sortCompare: __WEBPACK_IMPORTED_MODULE_6__Renderer__[\"a\" /* default */].opaqueSortCompare\n        };\n\n        var renderList = scene.updateRenderList(lightCamera);\n        renderer.renderPass(renderList.opaque, lightCamera, passConfig);\n\n        this._frameBuffer.unbind(renderer);\n\n        // Filter for VSM\n        if (this.softShadow === ShadowMapPass.VSM) {\n            this._gaussianFilter(renderer, texture, texture.width);\n        }\n\n        var matrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n        matrix.copy(lightCamera.worldTransform)\n            .invert()\n            .multiplyLeft(lightCamera.projectionMatrix);\n\n        spotLightShadowMaps.push(texture);\n        spotLightMatrices.push(matrix.array);\n    },\n\n    renderPointLightShadow: function (renderer, scene, light, pointLightShadowMaps) {\n        var texture = this._getTexture(light);\n        var _gl = renderer.gl;\n        pointLightShadowMaps.push(texture);\n\n        var defaultShadowMaterial = this._getDepthMaterial(light);\n        var passConfig = {\n            getMaterial: function (renderable) {\n                return renderable.shadowDepthMaterial || defaultShadowMaterial;\n            },\n            getUniform: getDepthMaterialUniform,\n            sortCompare: __WEBPACK_IMPORTED_MODULE_6__Renderer__[\"a\" /* default */].opaqueSortCompare\n        };\n\n        var renderListEachSide = {\n            px: [], py: [], pz: [], nx: [], ny: [], nz: []\n        };\n        var bbox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n        var lightWorldPosition = light.getWorldPosition().array;\n        var lightBBox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n        var range = light.range;\n        lightBBox.min.setArray(lightWorldPosition);\n        lightBBox.max.setArray(lightWorldPosition);\n        var extent = new __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */](range, range, range);\n        lightBBox.max.add(extent);\n        lightBBox.min.sub(extent);\n\n        var targetsNeedRender = { px: false, py: false, pz: false, nx: false, ny: false, nz: false };\n        scene.traverse(function (renderable) {\n            if (renderable.isRenderable() && renderable.castShadow) {\n                var geometry = renderable.geometry;\n                if (!geometry.boundingBox) {\n                    for (var i = 0; i < targets.length; i++) {\n                        renderListEachSide[targets[i]].push(renderable);\n                    }\n                    return;\n                }\n                bbox.transformFrom(geometry.boundingBox, renderable.worldTransform);\n                if (!bbox.intersectBoundingBox(lightBBox)) {\n                    return;\n                }\n\n                bbox.updateVertices();\n                for (var i = 0; i < targets.length; i++) {\n                    targetsNeedRender[targets[i]] = false;\n                }\n                for (var i = 0; i < 8; i++) {\n                    var vtx = bbox.vertices[i];\n                    var x = vtx[0] - lightWorldPosition[0];\n                    var y = vtx[1] - lightWorldPosition[1];\n                    var z = vtx[2] - lightWorldPosition[2];\n                    var absx = Math.abs(x);\n                    var absy = Math.abs(y);\n                    var absz = Math.abs(z);\n                    if (absx > absy) {\n                        if (absx > absz) {\n                            targetsNeedRender[x > 0 ? 'px' : 'nx'] = true;\n                        }\n                        else {\n                            targetsNeedRender[z > 0 ? 'pz' : 'nz'] = true;\n                        }\n                    }\n                    else {\n                        if (absy > absz) {\n                            targetsNeedRender[y > 0 ? 'py' : 'ny'] = true;\n                        }\n                        else {\n                            targetsNeedRender[z > 0 ? 'pz' : 'nz'] = true;\n                        }\n                    }\n                }\n                for (var i = 0; i < targets.length; i++) {\n                    if (targetsNeedRender[targets[i]]) {\n                        renderListEachSide[targets[i]].push(renderable);\n                    }\n                }\n            }\n        });\n\n        for (var i = 0; i < 6; i++) {\n            var target = targets[i];\n            var camera = this._getPointLightCamera(light, target);\n\n            this._frameBuffer.attach(texture, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i);\n            this._frameBuffer.bind(renderer);\n            _gl.clear(_gl.COLOR_BUFFER_BIT | _gl.DEPTH_BUFFER_BIT);\n\n            renderer.renderPass(renderListEachSide[target], camera, passConfig);\n        }\n\n        this._frameBuffer.unbind(renderer);\n    },\n\n    _getDepthMaterial: function (light) {\n        var shadowMaterial = this._lightMaterials[light.__uid__];\n        var isPointLight = light.type === 'POINT_LIGHT';\n        if (!shadowMaterial) {\n            var shaderPrefix = isPointLight ? 'clay.sm.distance.' : 'clay.sm.depth.';\n            shadowMaterial = new __WEBPACK_IMPORTED_MODULE_8__Material__[\"a\" /* default */]({\n                precision: this.precision,\n                shader: new __WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */].source(shaderPrefix + 'vertex'), __WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */].source(shaderPrefix + 'fragment'))\n            });\n\n            this._lightMaterials[light.__uid__] = shadowMaterial;\n        }\n        if (light.shadowSlopeScale != null) {\n            shadowMaterial.setUniform('slopeScale', light.shadowSlopeScale);\n        }\n        if (light.shadowBias != null) {\n            shadowMaterial.setUniform('bias', light.shadowBias);\n        }\n        if (this.softShadow === ShadowMapPass.VSM) {\n            shadowMaterial.define('fragment', 'USE_VSM');\n        }\n        else {\n            shadowMaterial.undefine('fragment', 'USE_VSM');\n        }\n\n        if (isPointLight) {\n            shadowMaterial.set('lightPosition', light.getWorldPosition().array);\n            shadowMaterial.set('range', light.range);\n        }\n\n        return shadowMaterial;\n    },\n\n    _gaussianFilter: function (renderer, texture, size) {\n        var parameter = {\n            width: size,\n            height: size,\n            type: __WEBPACK_IMPORTED_MODULE_10__Texture__[\"a\" /* default */].FLOAT\n        };\n        var tmpTexture = this._texturePool.get(parameter);\n\n        this._frameBuffer.attach(tmpTexture);\n        this._frameBuffer.bind(renderer);\n        this._gaussianPassH.setUniform('texture', texture);\n        this._gaussianPassH.setUniform('textureWidth', size);\n        this._gaussianPassH.render(renderer);\n\n        this._frameBuffer.attach(texture);\n        this._gaussianPassV.setUniform('texture', tmpTexture);\n        this._gaussianPassV.setUniform('textureHeight', size);\n        this._gaussianPassV.render(renderer);\n        this._frameBuffer.unbind(renderer);\n\n        this._texturePool.put(tmpTexture);\n    },\n\n    _getTexture: function (light, cascade) {\n        var key = light.__uid__;\n        var texture = this._textures[key];\n        var resolution = light.shadowResolution || 512;\n        cascade = cascade || 1;\n        if (!texture) {\n            if (light.type === 'POINT_LIGHT') {\n                texture = new __WEBPACK_IMPORTED_MODULE_12__TextureCube__[\"a\" /* default */]();\n            }\n            else {\n                texture = new __WEBPACK_IMPORTED_MODULE_11__Texture2D__[\"a\" /* default */]();\n            }\n            // At most 4 cascade\n            // TODO share with height ?\n            texture.width = resolution * cascade;\n            texture.height = resolution;\n            if (this.softShadow === ShadowMapPass.VSM) {\n                texture.type = __WEBPACK_IMPORTED_MODULE_10__Texture__[\"a\" /* default */].FLOAT;\n                texture.anisotropic = 4;\n            }\n            else {\n                texture.minFilter = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST;\n                texture.magFilter = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST;\n                texture.useMipmap = false;\n            }\n            this._textures[key] = texture;\n        }\n\n        return texture;\n    },\n\n    _getPointLightCamera: function (light, target) {\n        if (!this._lightCameras.point) {\n            this._lightCameras.point = {\n                px: new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */](),\n                nx: new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */](),\n                py: new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */](),\n                ny: new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */](),\n                pz: new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */](),\n                nz: new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */]()\n            };\n        }\n        var camera = this._lightCameras.point[target];\n\n        camera.far = light.range;\n        camera.fov = 90;\n        camera.position.set(0, 0, 0);\n        switch (target) {\n            case 'px':\n                camera.lookAt(__WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].POSITIVE_X, __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n                break;\n            case 'nx':\n                camera.lookAt(__WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_X, __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n                break;\n            case 'py':\n                camera.lookAt(__WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].POSITIVE_Y, __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].POSITIVE_Z);\n                break;\n            case 'ny':\n                camera.lookAt(__WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_Y, __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_Z);\n                break;\n            case 'pz':\n                camera.lookAt(__WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].POSITIVE_Z, __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n                break;\n            case 'nz':\n                camera.lookAt(__WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_Z, __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n                break;\n        }\n        light.getWorldPosition(camera.position);\n        camera.update();\n\n        return camera;\n    },\n\n    _getDirectionalLightCamera: (function () {\n        var lightViewMatrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n        var sceneViewBoundingBox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n        var lightViewBBox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n        // Camera of directional light will be adjusted\n        // to contain the view frustum and scene bounding box as tightly as possible\n        return function (light, scene, sceneCamera) {\n            if (!this._lightCameras.directional) {\n                this._lightCameras.directional = new __WEBPACK_IMPORTED_MODULE_14__camera_Orthographic__[\"a\" /* default */]();\n            }\n            var camera = this._lightCameras.directional;\n\n            sceneViewBoundingBox.copy(scene.viewBoundingBoxLastFrame);\n            sceneViewBoundingBox.intersection(sceneCamera.frustum.boundingBox);\n            // Move to the center of frustum(in world space)\n            camera.position\n                .copy(sceneViewBoundingBox.min)\n                .add(sceneViewBoundingBox.max)\n                .scale(0.5)\n                .transformMat4(sceneCamera.worldTransform);\n            camera.rotation.copy(light.rotation);\n            camera.scale.copy(light.scale);\n            camera.updateWorldTransform();\n\n            // Transform to light view space\n            __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */].invert(lightViewMatrix, camera.worldTransform);\n            __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */].multiply(lightViewMatrix, lightViewMatrix, sceneCamera.worldTransform);\n\n            lightViewBBox.copy(sceneViewBoundingBox).applyTransform(lightViewMatrix);\n\n            var min = lightViewBBox.min.array;\n            var max = lightViewBBox.max.array;\n\n            // Move camera to adjust the near to 0\n            camera.position.set((min[0] + max[0]) / 2, (min[1] + max[1]) / 2, max[2])\n                .transformMat4(camera.worldTransform);\n            camera.near = 0;\n            camera.far = -min[2] + max[2];\n            // Make sure receivers not in the frustum will stil receive the shadow.\n            if (isNaN(this.lightFrustumBias)) {\n                camera.far *= 4;\n            }\n            else {\n                camera.far += this.lightFrustumBias;\n            }\n            camera.left = min[0];\n            camera.right = max[0];\n            camera.top = max[1];\n            camera.bottom = min[1];\n            camera.update(true);\n\n            return camera;\n        };\n    })(),\n\n    _getSpotLightCamera: function (light) {\n        if (!this._lightCameras.spot) {\n            this._lightCameras.spot = new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */]();\n        }\n        var camera = this._lightCameras.spot;\n        // Update properties\n        camera.fov = light.penumbraAngle * 2;\n        camera.far = light.range;\n        camera.worldTransform.copy(light.worldTransform);\n        camera.updateProjectionMatrix();\n        __WEBPACK_IMPORTED_MODULE_17__glmatrix_mat4__[\"a\" /* default */].invert(camera.viewMatrix.array, camera.worldTransform.array);\n\n        return camera;\n    },\n\n    /**\n     * @param  {clay.Renderer|WebGLRenderingContext} [renderer]\n     * @memberOf clay.prePass.ShadowMap.prototype\n     */\n    // PENDING Renderer or WebGLRenderingContext\n    dispose: function (renderer) {\n        var _gl = renderer.gl || renderer;\n\n        if (this._frameBuffer) {\n            this._frameBuffer.dispose(_gl);\n        }\n\n        for (var name in this._textures) {\n            this._textures[name].dispose(_gl);\n        }\n\n        this._texturePool.clear(renderer.gl);\n\n        this._depthMaterials = {};\n        this._distanceMaterials = {};\n        this._textures = {};\n        this._lightCameras = {};\n        this._shadowMapNumber = {\n            'POINT_LIGHT': 0,\n            'DIRECTIONAL_LIGHT': 0,\n            'SPOT_LIGHT': 0\n        };\n        this._meshMaterials = {};\n\n        for (var i = 0; i < this._receivers.length; i++) {\n            var mesh = this._receivers[i];\n            // Mesh may be disposed\n            if (mesh.material) {\n                var material = mesh.material;\n                material.undefine('fragment', 'POINT_LIGHT_SHADOW_COUNT');\n                material.undefine('fragment', 'DIRECTIONAL_LIGHT_SHADOW_COUNT');\n                material.undefine('fragment', 'AMBIENT_LIGHT_SHADOW_COUNT');\n                material.set('shadowEnabled', 0);\n            }\n        }\n\n        this._receivers = [];\n        this._lightsCastShadow = [];\n    }\n});\n\n/**\n * @name clay.prePass.ShadowMap.VSM\n * @type {number}\n */\nShadowMapPass.VSM = 1;\n\n/**\n * @name clay.prePass.ShadowMap.PCF\n * @type {number}\n */\nShadowMapPass.PCF = 2;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ShadowMapPass);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9wcmVQYXNzL1NoYWRvd01hcC5qcz8yOWQwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4uL2NvcmUvQmFzZSc7XG5pbXBvcnQgZ2xlbnVtIGZyb20gJy4uL2NvcmUvZ2xlbnVtJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4uL21hdGgvVmVjdG9yMyc7XG5pbXBvcnQgQm91bmRpbmdCb3ggZnJvbSAnLi4vbWF0aC9Cb3VuZGluZ0JveCc7XG5pbXBvcnQgRnJ1c3R1bSBmcm9tICcuLi9tYXRoL0ZydXN0dW0nO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSAnLi4vbWF0aC9NYXRyaXg0JztcbmltcG9ydCBSZW5kZXJlciBmcm9tICcuLi9SZW5kZXJlcic7XG5pbXBvcnQgU2hhZGVyIGZyb20gJy4uL1NoYWRlcic7XG5pbXBvcnQgTWF0ZXJpYWwgZnJvbSAnLi4vTWF0ZXJpYWwnO1xuaW1wb3J0IEZyYW1lQnVmZmVyIGZyb20gJy4uL0ZyYW1lQnVmZmVyJztcbmltcG9ydCBUZXh0dXJlIGZyb20gJy4uL1RleHR1cmUnO1xuaW1wb3J0IFRleHR1cmUyRCBmcm9tICcuLi9UZXh0dXJlMkQnO1xuaW1wb3J0IFRleHR1cmVDdWJlIGZyb20gJy4uL1RleHR1cmVDdWJlJztcbmltcG9ydCBQZXJzcGVjdGl2ZUNhbWVyYSBmcm9tICcuLi9jYW1lcmEvUGVyc3BlY3RpdmUnO1xuaW1wb3J0IE9ydGhvQ2FtZXJhIGZyb20gJy4uL2NhbWVyYS9PcnRob2dyYXBoaWMnO1xuXG5pbXBvcnQgUGFzcyBmcm9tICcuLi9jb21wb3NpdG9yL1Bhc3MnO1xuaW1wb3J0IFRleHR1cmVQb29sIGZyb20gJy4uL2NvbXBvc2l0b3IvVGV4dHVyZVBvb2wnO1xuXG5pbXBvcnQgbWF0NCBmcm9tICcuLi9nbG1hdHJpeC9tYXQ0JztcblxudmFyIHRhcmdldHMgPSBbJ3B4JywgJ254JywgJ3B5JywgJ255JywgJ3B6JywgJ256J107XG5cbmltcG9ydCBzaGFkb3dtYXBFc3NsIGZyb20gJy4uL3NoYWRlci9zb3VyY2Uvc2hhZG93bWFwLmdsc2wuanMnO1xuU2hhZGVyWydpbXBvcnQnXShzaGFkb3dtYXBFc3NsKTtcblxuZnVuY3Rpb24gZ2V0RGVwdGhNYXRlcmlhbFVuaWZvcm0ocmVuZGVyYWJsZSwgZGVwdGhNYXRlcmlhbCwgc3ltYm9sKSB7XG4gICAgaWYgKHN5bWJvbCA9PT0gJ2FscGhhTWFwJykge1xuICAgICAgICByZXR1cm4gcmVuZGVyYWJsZS5tYXRlcmlhbC5nZXQoJ2RpZmZ1c2VNYXAnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc3ltYm9sID09PSAnYWxwaGFDdXRvZmYnKSB7XG4gICAgICAgIGlmIChyZW5kZXJhYmxlLm1hdGVyaWFsLmlzRGVmaW5lZCgnZnJhZ21lbnQnLCAnQUxQSEFfVEVTVCcpXG4gICAgICAgICAgICAmJiByZW5kZXJhYmxlLm1hdGVyaWFsLmdldCgnZGlmZnVzZU1hcCcpXG4gICAgICAgICkge1xuICAgICAgICAgICAgdmFyIGFscGhhQ3V0b2ZmID0gcmVuZGVyYWJsZS5tYXRlcmlhbC5nZXQoJ2FscGhhQ3V0b2ZmJyk7XG4gICAgICAgICAgICByZXR1cm4gYWxwaGFDdXRvZmYgfHwgMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZWxzZSBpZiAoc3ltYm9sID09PSAndXZSZXBlYXQnKSB7XG4gICAgICAgIHJldHVybiByZW5kZXJhYmxlLm1hdGVyaWFsLmdldCgndXZSZXBlYXQnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc3ltYm9sID09PSAndXZPZmZzZXQnKSB7XG4gICAgICAgIHJldHVybiByZW5kZXJhYmxlLm1hdGVyaWFsLmdldCgndXZPZmZzZXQnKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBkZXB0aE1hdGVyaWFsLmdldChzeW1ib2wpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNEZXB0aE1hdGVyaWFsQ2hhbmdlZChyZW5kZXJhYmxlLCBwcmV2UmVuZGVyYWJsZSkge1xuICAgIHZhciBtYXRBID0gcmVuZGVyYWJsZS5tYXRlcmlhbDtcbiAgICB2YXIgbWF0QiA9IHByZXZSZW5kZXJhYmxlLm1hdGVyaWFsO1xuICAgIHJldHVybiBtYXRBLmdldCgnZGlmZnVzZU1hcCcpICE9PSBtYXRCLmdldCgnZGlmZnVzZU1hcCcpXG4gICAgICAgIHx8IChtYXRBLmdldCgnYWxwaGFDdXRvZmYnKSB8fCAwKSAhPT0gKG1hdEIuZ2V0KCdhbHBoYUN1dG9mZicpIHx8IDApO1xufVxuXG4vKipcbiAqIFBhc3MgcmVuZGVyaW5nIHNoYWRvdyBtYXAuXG4gKlxuICogQGNvbnN0cnVjdG9yIGNsYXkucHJlUGFzcy5TaGFkb3dNYXBcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKiBAZXhhbXBsZVxuICogICAgIHZhciBzaGFkb3dNYXBQYXNzID0gbmV3IGNsYXkucHJlUGFzcy5TaGFkb3dNYXAoe1xuICogICAgICAgICBzb2Z0U2hhZG93OiBjbGF5LnByZVBhc3MuU2hhZG93TWFwLlZTTVxuICogICAgIH0pO1xuICogICAgIC4uLlxuICogICAgIGFuaW1hdGlvbi5vbignZnJhbWUnLCBmdW5jdGlvbiAoZnJhbWVUaW1lKSB7XG4gKiAgICAgICAgIHNoYWRvd01hcFBhc3MucmVuZGVyKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKTtcbiAqICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICogICAgIH0pO1xuICovXG52YXIgU2hhZG93TWFwUGFzcyA9IEJhc2UuZXh0ZW5kKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5LnByZVBhc3MuU2hhZG93TWFwIyAqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTb2Z0IHNoYWRvdyB0ZWNobmlxdWUuXG4gICAgICAgICAqIENhbiBiZSB7QGxpbmsgY2xheS5wcmVQYXNzLlNoYWRvd01hcC5QQ0Z9IG9yIHtAbGluayBjbGF5LnByZVBhc3MuU2hhZG93TWFwLlZTTX1cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHNvZnRTaGFkb3c6IFNoYWRvd01hcFBhc3MuUENGLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTb2Z0IHNoYWRvdyBibHVyIHNpemVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHNoYWRvd0JsdXI6IDEuMCxcblxuICAgICAgICBsaWdodEZydXN0dW1CaWFzOiAnYXV0bycsXG5cbiAgICAgICAga2VybmVsUENGOiBuZXcgRmxvYXQzMkFycmF5KFtcbiAgICAgICAgICAgIDEsIDAsXG4gICAgICAgICAgICAxLCAxLFxuICAgICAgICAgICAgLTEsIDEsXG4gICAgICAgICAgICAwLCAxLFxuICAgICAgICAgICAgLTEsIDAsXG4gICAgICAgICAgICAtMSwgLTEsXG4gICAgICAgICAgICAxLCAtMSxcbiAgICAgICAgICAgIDAsIC0xXG4gICAgICAgIF0pLFxuXG4gICAgICAgIHByZWNpc2lvbjogJ2hpZ2hwJyxcblxuICAgICAgICBfbGFzdFJlbmRlck5vdENhc3RTaGFkb3c6IGZhbHNlLFxuXG4gICAgICAgIF9mcmFtZUJ1ZmZlcjogbmV3IEZyYW1lQnVmZmVyKCksXG5cbiAgICAgICAgX3RleHR1cmVzOiB7fSxcbiAgICAgICAgX3NoYWRvd01hcE51bWJlcjoge1xuICAgICAgICAgICAgJ1BPSU5UX0xJR0hUJzogMCxcbiAgICAgICAgICAgICdESVJFQ1RJT05BTF9MSUdIVCc6IDAsXG4gICAgICAgICAgICAnU1BPVF9MSUdIVCc6IDBcbiAgICAgICAgfSxcblxuICAgICAgICBfZGVwdGhNYXRlcmlhbHM6IHt9LFxuICAgICAgICBfZGlzdGFuY2VNYXRlcmlhbHM6IHt9LFxuXG4gICAgICAgIF9yZWNlaXZlcnM6IFtdLFxuICAgICAgICBfbGlnaHRzQ2FzdFNoYWRvdzogW10sXG5cbiAgICAgICAgX2xpZ2h0Q2FtZXJhczoge30sXG4gICAgICAgIF9saWdodE1hdGVyaWFsczoge30sXG5cbiAgICAgICAgX3RleHR1cmVQb29sOiBuZXcgVGV4dHVyZVBvb2woKVxuICAgIH07XG59LCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gR2F1c3NpYW4gZmlsdGVyIHBhc3MgZm9yIFZTTVxuICAgIHRoaXMuX2dhdXNzaWFuUGFzc0ggPSBuZXcgUGFzcyh7XG4gICAgICAgIGZyYWdtZW50OiBTaGFkZXIuc291cmNlKCdjbGF5LmNvbXBvc2l0b3IuZ2F1c3NpYW5fYmx1cicpXG4gICAgfSk7XG4gICAgdGhpcy5fZ2F1c3NpYW5QYXNzViA9IG5ldyBQYXNzKHtcbiAgICAgICAgZnJhZ21lbnQ6IFNoYWRlci5zb3VyY2UoJ2NsYXkuY29tcG9zaXRvci5nYXVzc2lhbl9ibHVyJylcbiAgICB9KTtcbiAgICB0aGlzLl9nYXVzc2lhblBhc3NILnNldFVuaWZvcm0oJ2JsdXJTaXplJywgdGhpcy5zaGFkb3dCbHVyKTtcbiAgICB0aGlzLl9nYXVzc2lhblBhc3NILnNldFVuaWZvcm0oJ2JsdXJEaXInLCAwLjApO1xuICAgIHRoaXMuX2dhdXNzaWFuUGFzc1Yuc2V0VW5pZm9ybSgnYmx1clNpemUnLCB0aGlzLnNoYWRvd0JsdXIpO1xuICAgIHRoaXMuX2dhdXNzaWFuUGFzc1Yuc2V0VW5pZm9ybSgnYmx1ckRpcicsIDEuMCk7XG5cbiAgICB0aGlzLl9vdXRwdXREZXB0aFBhc3MgPSBuZXcgUGFzcyh7XG4gICAgICAgIGZyYWdtZW50OiBTaGFkZXIuc291cmNlKCdjbGF5LnNtLmRlYnVnX2RlcHRoJylcbiAgICB9KTtcbn0sIHtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIgc2NlbmUgdG8gc2hhZG93IHRleHR1cmVzXG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlNjZW5lfSBzY2VuZVxuICAgICAqIEBwYXJhbSAge2NsYXkuQ2FtZXJhfSBzY2VuZUNhbWVyYVxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IFtub3RVcGRhdGVTY2VuZT1mYWxzZV1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5wcmVQYXNzLlNoYWRvd01hcC5wcm90b3R5cGVcbiAgICAgKi9cbiAgICByZW5kZXI6IGZ1bmN0aW9uIChyZW5kZXJlciwgc2NlbmUsIHNjZW5lQ2FtZXJhLCBub3RVcGRhdGVTY2VuZSkge1xuICAgICAgICBpZiAoIXNjZW5lQ2FtZXJhKSB7XG4gICAgICAgICAgICBzY2VuZUNhbWVyYSA9IHNjZW5lLmdldE1haW5DYW1lcmEoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZXJlbmRlcicsIHRoaXMsIHJlbmRlcmVyLCBzY2VuZSwgc2NlbmVDYW1lcmEpO1xuICAgICAgICB0aGlzLl9yZW5kZXJTaGFkb3dQYXNzKHJlbmRlcmVyLCBzY2VuZSwgc2NlbmVDYW1lcmEsIG5vdFVwZGF0ZVNjZW5lKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdhZnRlcnJlbmRlcicsIHRoaXMsIHJlbmRlcmVyLCBzY2VuZSwgc2NlbmVDYW1lcmEpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEZWJ1ZyByZW5kZXJpbmcgb2Ygc2hhZG93IHRleHR1cmVzXG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHNpemVcbiAgICAgKiBAbWVtYmVyT2YgY2xheS5wcmVQYXNzLlNoYWRvd01hcC5wcm90b3R5cGVcbiAgICAgKi9cbiAgICByZW5kZXJEZWJ1ZzogZnVuY3Rpb24gKHJlbmRlcmVyLCBzaXplKSB7XG4gICAgICAgIHJlbmRlcmVyLnNhdmVDbGVhcigpO1xuICAgICAgICB2YXIgdmlld3BvcnQgPSByZW5kZXJlci52aWV3cG9ydDtcbiAgICAgICAgdmFyIHggPSAwLCB5ID0gMDtcbiAgICAgICAgdmFyIHdpZHRoID0gc2l6ZSB8fCB2aWV3cG9ydC53aWR0aCAvIDQ7XG4gICAgICAgIHZhciBoZWlnaHQgPSB3aWR0aDtcbiAgICAgICAgaWYgKHRoaXMuc29mdFNoYWRvdyA9PT0gU2hhZG93TWFwUGFzcy5WU00pIHtcbiAgICAgICAgICAgIHRoaXMuX291dHB1dERlcHRoUGFzcy5tYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ1VTRV9WU00nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX291dHB1dERlcHRoUGFzcy5tYXRlcmlhbC51bmRlZmluZSgnZnJhZ21lbnQnLCAnVVNFX1ZTTScpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5fdGV4dHVyZXMpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gdGhpcy5fdGV4dHVyZXNbbmFtZV07XG4gICAgICAgICAgICByZW5kZXJlci5zZXRWaWV3cG9ydCh4LCB5LCB3aWR0aCAqIHRleHR1cmUud2lkdGggLyB0ZXh0dXJlLmhlaWdodCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuX291dHB1dERlcHRoUGFzcy5zZXRVbmlmb3JtKCdkZXB0aE1hcCcsIHRleHR1cmUpO1xuICAgICAgICAgICAgdGhpcy5fb3V0cHV0RGVwdGhQYXNzLnJlbmRlcihyZW5kZXJlcik7XG4gICAgICAgICAgICB4ICs9IHdpZHRoICogdGV4dHVyZS53aWR0aCAvIHRleHR1cmUuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHJlbmRlcmVyLnNldFZpZXdwb3J0KHZpZXdwb3J0KTtcbiAgICAgICAgcmVuZGVyZXIucmVzdG9yZUNsZWFyKCk7XG4gICAgfSxcblxuICAgIF91cGRhdGVSZWNlaXZlcnM6IGZ1bmN0aW9uIChyZW5kZXJlciwgbWVzaCkge1xuICAgICAgICBpZiAobWVzaC5yZWNlaXZlU2hhZG93KSB7XG4gICAgICAgICAgICB0aGlzLl9yZWNlaXZlcnMucHVzaChtZXNoKTtcbiAgICAgICAgICAgIG1lc2gubWF0ZXJpYWwuc2V0KCdzaGFkb3dFbmFibGVkJywgMSk7XG5cbiAgICAgICAgICAgIG1lc2gubWF0ZXJpYWwuc2V0KCdwY2ZLZXJuZWwnLCB0aGlzLmtlcm5lbFBDRik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtZXNoLm1hdGVyaWFsLnNldCgnc2hhZG93RW5hYmxlZCcsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc29mdFNoYWRvdyA9PT0gU2hhZG93TWFwUGFzcy5WU00pIHtcbiAgICAgICAgICAgIG1lc2gubWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdVU0VfVlNNJyk7XG4gICAgICAgICAgICBtZXNoLm1hdGVyaWFsLnVuZGVmaW5lKCdmcmFnbWVudCcsICdQQ0ZfS0VSTkVMX1NJWkUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1lc2gubWF0ZXJpYWwudW5kZWZpbmUoJ2ZyYWdtZW50JywgJ1VTRV9WU00nKTtcbiAgICAgICAgICAgIHZhciBrZXJuZWxQQ0YgPSB0aGlzLmtlcm5lbFBDRjtcbiAgICAgICAgICAgIGlmIChrZXJuZWxQQ0YgJiYga2VybmVsUENGLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG1lc2gubWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdQQ0ZfS0VSTkVMX1NJWkUnLCBrZXJuZWxQQ0YubGVuZ3RoIC8gMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZXNoLm1hdGVyaWFsLnVuZGVmaW5lKCdmcmFnbWVudCcsICdQQ0ZfS0VSTkVMX1NJWkUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfdXBkYXRlOiBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgc2NlbmUudHJhdmVyc2UoZnVuY3Rpb24gKHJlbmRlcmFibGUpIHtcbiAgICAgICAgICAgIGlmIChyZW5kZXJhYmxlLmlzUmVuZGVyYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fdXBkYXRlUmVjZWl2ZXJzKHJlbmRlcmVyLCByZW5kZXJhYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY2VuZS5saWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBsaWdodCA9IHNjZW5lLmxpZ2h0c1tpXTtcbiAgICAgICAgICAgIGlmIChsaWdodC5jYXN0U2hhZG93ICYmICFsaWdodC5pbnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9saWdodHNDYXN0U2hhZG93LnB1c2gobGlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9yZW5kZXJTaGFkb3dQYXNzOiBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lLCBzY2VuZUNhbWVyYSwgbm90VXBkYXRlU2NlbmUpIHtcbiAgICAgICAgLy8gcmVzZXRcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLl9zaGFkb3dNYXBOdW1iZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX3NoYWRvd01hcE51bWJlcltuYW1lXSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbGlnaHRzQ2FzdFNoYWRvdy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLl9yZWNlaXZlcnMubGVuZ3RoID0gMDtcblxuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2w7XG5cbiAgICAgICAgaWYgKCFub3RVcGRhdGVTY2VuZSkge1xuICAgICAgICAgICAgc2NlbmUudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjZW5lQ2FtZXJhKSB7XG4gICAgICAgICAgICBzY2VuZUNhbWVyYS51cGRhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjZW5lLnVwZGF0ZUxpZ2h0cygpO1xuICAgICAgICB0aGlzLl91cGRhdGUocmVuZGVyZXIsIHNjZW5lKTtcblxuICAgICAgICAvLyBOZWVkcyB0byB1cGRhdGUgdGhlIHJlY2VpdmVycyBhZ2FpbiBpZiBzaGFkb3dzIGNvbWUgZnJvbSAxIHRvIDAuXG4gICAgICAgIGlmICghdGhpcy5fbGlnaHRzQ2FzdFNoYWRvdy5sZW5ndGggJiYgdGhpcy5fbGFzdFJlbmRlck5vdENhc3RTaGFkb3cpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2xhc3RSZW5kZXJOb3RDYXN0U2hhZG93ID0gdGhpcy5fbGlnaHRzQ2FzdFNoYWRvdyA9PT0gMDtcblxuICAgICAgICBfZ2wuZW5hYmxlKF9nbC5ERVBUSF9URVNUKTtcbiAgICAgICAgX2dsLmRlcHRoTWFzayh0cnVlKTtcbiAgICAgICAgX2dsLmRpc2FibGUoX2dsLkJMRU5EKTtcblxuICAgICAgICAvLyBDbGVhciB3aXRoIGhpZ2gteiwgc28gdGhlIHBhcnQgbm90IHJlbmRlcmVkIHdpbGwgbm90IGJlZW4gc2hhZG93ZWRcbiAgICAgICAgLy8gVE9ET1xuICAgICAgICAvLyBUT0RPIHJlc3RvcmVcbiAgICAgICAgX2dsLmNsZWFyQ29sb3IoMS4wLCAxLjAsIDEuMCwgMS4wKTtcblxuICAgICAgICAvLyBTaGFkb3cgdW5pZm9ybXNcbiAgICAgICAgdmFyIHNwb3RMaWdodFNoYWRvd01hcHMgPSBbXTtcbiAgICAgICAgdmFyIHNwb3RMaWdodE1hdHJpY2VzID0gW107XG4gICAgICAgIHZhciBkaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwcyA9IFtdO1xuICAgICAgICB2YXIgZGlyZWN0aW9uYWxMaWdodE1hdHJpY2VzID0gW107XG4gICAgICAgIHZhciBzaGFkb3dDYXNjYWRlQ2xpcHMgPSBbXTtcbiAgICAgICAgdmFyIHBvaW50TGlnaHRTaGFkb3dNYXBzID0gW107XG5cbiAgICAgICAgdmFyIGRpckxpZ2h0SGFzQ2FzY2FkZTtcbiAgICAgICAgLy8gQ3JlYXRlIHRleHR1cmVzIGZvciBzaGFkb3cgbWFwXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fbGlnaHRzQ2FzdFNoYWRvdy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGxpZ2h0ID0gdGhpcy5fbGlnaHRzQ2FzdFNoYWRvd1tpXTtcbiAgICAgICAgICAgIGlmIChsaWdodC50eXBlID09PSAnRElSRUNUSU9OQUxfTElHSFQnKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGlyTGlnaHRIYXNDYXNjYWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignT25seSBvbmUgZGlyZWVjdGlvbmFsIGxpZ2h0IHN1cHBvcnRlZCB3aXRoIHNoYWRvdyBjYXNjYWRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobGlnaHQuc2hhZG93Q2FzY2FkZSA+IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdTdXBwb3J0IGF0IG1vc3QgNCBjYXNjYWRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobGlnaHQuc2hhZG93Q2FzY2FkZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlyTGlnaHRIYXNDYXNjYWRlID0gbGlnaHQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJEaXJlY3Rpb25hbExpZ2h0U2hhZG93KFxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlcixcbiAgICAgICAgICAgICAgICAgICAgc2NlbmUsXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lQ2FtZXJhLFxuICAgICAgICAgICAgICAgICAgICBsaWdodCxcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93Q2FzY2FkZUNsaXBzLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb25hbExpZ2h0TWF0cmljZXMsXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dNYXBzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGxpZ2h0LnR5cGUgPT09ICdTUE9UX0xJR0hUJykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU3BvdExpZ2h0U2hhZG93KFxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlcixcbiAgICAgICAgICAgICAgICAgICAgc2NlbmUsXG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBzcG90TGlnaHRNYXRyaWNlcyxcbiAgICAgICAgICAgICAgICAgICAgc3BvdExpZ2h0U2hhZG93TWFwc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChsaWdodC50eXBlID09PSAnUE9JTlRfTElHSFQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJQb2ludExpZ2h0U2hhZG93KFxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlcixcbiAgICAgICAgICAgICAgICAgICAgc2NlbmUsXG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBwb2ludExpZ2h0U2hhZG93TWFwc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3NoYWRvd01hcE51bWJlcltsaWdodC50eXBlXSsrO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgbGlnaHRUeXBlIGluIHRoaXMuX3NoYWRvd01hcE51bWJlcikge1xuICAgICAgICAgICAgdmFyIG51bWJlciA9IHRoaXMuX3NoYWRvd01hcE51bWJlcltsaWdodFR5cGVdO1xuICAgICAgICAgICAgdmFyIGtleSA9IGxpZ2h0VHlwZSArICdfU0hBRE9XTUFQX0NPVU5UJztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fcmVjZWl2ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1lc2ggPSB0aGlzLl9yZWNlaXZlcnNbaV07XG4gICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gbWVzaC5tYXRlcmlhbDtcbiAgICAgICAgICAgICAgICBpZiAobWF0ZXJpYWwuZnJhZ21lbnREZWZpbmVzW2tleV0gIT09IG51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVtYmVyID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsIGtleSwgbnVtYmVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChtYXRlcmlhbC5pc0RlZmluZWQoJ2ZyYWdtZW50Jywga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwudW5kZWZpbmUoJ2ZyYWdtZW50Jywga2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3JlY2VpdmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG1lc2ggPSB0aGlzLl9yZWNlaXZlcnNbaV07XG4gICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBtZXNoLm1hdGVyaWFsO1xuICAgICAgICAgICAgaWYgKGRpckxpZ2h0SGFzQ2FzY2FkZSkge1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnU0hBRE9XX0NBU0NBREUnLCBkaXJMaWdodEhhc0Nhc2NhZGUuc2hhZG93Q2FzY2FkZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC51bmRlZmluZSgnZnJhZ21lbnQnLCAnU0hBRE9XX0NBU0NBREUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzaGFkb3dVbmlmb3JtcyA9IHNjZW5lLnNoYWRvd1VuaWZvcm1zO1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldFNpemUodGV4dHVyZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRleHR1cmUuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uYWxMaWdodFNoYWRvd01hcFNpemVzID0gZGlyZWN0aW9uYWxMaWdodFNoYWRvd01hcHMubWFwKGdldFNpemUpO1xuICAgICAgICAgICAgc2hhZG93VW5pZm9ybXMuZGlyZWN0aW9uYWxMaWdodFNoYWRvd01hcHMgPSB7IHZhbHVlOiBkaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwcywgdHlwZTogJ3R2JyB9O1xuICAgICAgICAgICAgc2hhZG93VW5pZm9ybXMuZGlyZWN0aW9uYWxMaWdodE1hdHJpY2VzID0geyB2YWx1ZTogZGlyZWN0aW9uYWxMaWdodE1hdHJpY2VzLCB0eXBlOiAnbTR2JyB9O1xuICAgICAgICAgICAgc2hhZG93VW5pZm9ybXMuZGlyZWN0aW9uYWxMaWdodFNoYWRvd01hcFNpemVzID0geyB2YWx1ZTogZGlyZWN0aW9uYWxMaWdodFNoYWRvd01hcFNpemVzLCB0eXBlOiAnMWZ2JyB9O1xuICAgICAgICAgICAgaWYgKGRpckxpZ2h0SGFzQ2FzY2FkZSkge1xuICAgICAgICAgICAgICAgIHZhciBzaGFkb3dDYXNjYWRlQ2xpcHNOZWFyID0gc2hhZG93Q2FzY2FkZUNsaXBzLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgdmFyIHNoYWRvd0Nhc2NhZGVDbGlwc0ZhciA9IHNoYWRvd0Nhc2NhZGVDbGlwcy5zbGljZSgpO1xuICAgICAgICAgICAgICAgIHNoYWRvd0Nhc2NhZGVDbGlwc05lYXIucG9wKCk7XG4gICAgICAgICAgICAgICAgc2hhZG93Q2FzY2FkZUNsaXBzRmFyLnNoaWZ0KCk7XG5cbiAgICAgICAgICAgICAgICAvLyBJdGVyYXRlIGZyb20gZmFyIHRvIG5lYXJcbiAgICAgICAgICAgICAgICBzaGFkb3dDYXNjYWRlQ2xpcHNOZWFyLnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICBzaGFkb3dDYXNjYWRlQ2xpcHNGYXIucmV2ZXJzZSgpO1xuICAgICAgICAgICAgICAgIC8vIGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dNYXBzLnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb25hbExpZ2h0TWF0cmljZXMucmV2ZXJzZSgpO1xuICAgICAgICAgICAgICAgIHNoYWRvd1VuaWZvcm1zLnNoYWRvd0Nhc2NhZGVDbGlwc05lYXIgPSB7IHZhbHVlOiBzaGFkb3dDYXNjYWRlQ2xpcHNOZWFyLCB0eXBlOiAnMWZ2JyB9O1xuICAgICAgICAgICAgICAgIHNoYWRvd1VuaWZvcm1zLnNoYWRvd0Nhc2NhZGVDbGlwc0ZhciA9IHsgdmFsdWU6IHNoYWRvd0Nhc2NhZGVDbGlwc0ZhciwgdHlwZTogJzFmdicgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzcG90TGlnaHRTaGFkb3dNYXBzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBzcG90TGlnaHRTaGFkb3dNYXBTaXplcyA9IHNwb3RMaWdodFNoYWRvd01hcHMubWFwKGdldFNpemUpO1xuICAgICAgICAgICAgdmFyIHNoYWRvd1VuaWZvcm1zID0gc2NlbmUuc2hhZG93VW5pZm9ybXM7XG4gICAgICAgICAgICBzaGFkb3dVbmlmb3Jtcy5zcG90TGlnaHRTaGFkb3dNYXBzID0geyB2YWx1ZTogc3BvdExpZ2h0U2hhZG93TWFwcywgdHlwZTogJ3R2JyB9O1xuICAgICAgICAgICAgc2hhZG93VW5pZm9ybXMuc3BvdExpZ2h0TWF0cmljZXMgPSB7IHZhbHVlOiBzcG90TGlnaHRNYXRyaWNlcywgdHlwZTogJ200dicgfTtcbiAgICAgICAgICAgIHNoYWRvd1VuaWZvcm1zLnNwb3RMaWdodFNoYWRvd01hcFNpemVzID0geyB2YWx1ZTogc3BvdExpZ2h0U2hhZG93TWFwU2l6ZXMsIHR5cGU6ICcxZnYnIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9pbnRMaWdodFNoYWRvd01hcHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgc2hhZG93VW5pZm9ybXMucG9pbnRMaWdodFNoYWRvd01hcHMgPSB7IHZhbHVlOiBwb2ludExpZ2h0U2hhZG93TWFwcywgdHlwZTogJ3R2JyB9O1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHJlbmRlckRpcmVjdGlvbmFsTGlnaHRTaGFkb3c6IChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmFyIHNwbGl0RnJ1c3R1bSA9IG5ldyBGcnVzdHVtKCk7XG4gICAgICAgIHZhciBzcGxpdFByb2pNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xuICAgICAgICB2YXIgY3JvcEJCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgICAgdmFyIGNyb3BNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xuICAgICAgICB2YXIgbGlnaHRWaWV3TWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcbiAgICAgICAgdmFyIGxpZ2h0Vmlld1Byb2pNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xuICAgICAgICB2YXIgbGlnaHRQcm9qTWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgc2NlbmVDYW1lcmEsIGxpZ2h0LCBzaGFkb3dDYXNjYWRlQ2xpcHMsIGRpcmVjdGlvbmFsTGlnaHRNYXRyaWNlcywgZGlyZWN0aW9uYWxMaWdodFNoYWRvd01hcHMpIHtcblxuICAgICAgICAgICAgdmFyIGRlZmF1bHRTaGFkb3dNYXRlcmlhbCA9IHRoaXMuX2dldERlcHRoTWF0ZXJpYWwobGlnaHQpO1xuICAgICAgICAgICAgdmFyIHBhc3NDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgZ2V0TWF0ZXJpYWw6IGZ1bmN0aW9uIChyZW5kZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJhYmxlLnNoYWRvd0RlcHRoTWF0ZXJpYWwgfHwgZGVmYXVsdFNoYWRvd01hdGVyaWFsO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXNNYXRlcmlhbENoYW5nZWQ6IGlzRGVwdGhNYXRlcmlhbENoYW5nZWQsXG4gICAgICAgICAgICAgICAgZ2V0VW5pZm9ybTogZ2V0RGVwdGhNYXRlcmlhbFVuaWZvcm0sXG4gICAgICAgICAgICAgICAgaWZSZW5kZXI6IGZ1bmN0aW9uIChyZW5kZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJhYmxlLmNhc3RTaGFkb3c7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzb3J0Q29tcGFyZTogUmVuZGVyZXIub3BhcXVlU29ydENvbXBhcmVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIEZpcnN0IGZyYW1lXG4gICAgICAgICAgICBpZiAoIXNjZW5lLnZpZXdCb3VuZGluZ0JveExhc3RGcmFtZS5pc0Zpbml0ZSgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJvdW5kaW5nQm94ID0gc2NlbmUuZ2V0Qm91bmRpbmdCb3goKTtcbiAgICAgICAgICAgICAgICBzY2VuZS52aWV3Qm91bmRpbmdCb3hMYXN0RnJhbWVcbiAgICAgICAgICAgICAgICAgICAgLmNvcHkoYm91bmRpbmdCb3gpLmFwcGx5VHJhbnNmb3JtKHNjZW5lQ2FtZXJhLnZpZXdNYXRyaXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ29uc2lkZXJpbmcgbW92aW5nIHNwZWVkIHNpbmNlIHRoZSBib3VuZGluZyBib3ggaXMgZnJvbSBsYXN0IGZyYW1lXG4gICAgICAgICAgICAvLyBUT0RPOiBhZGQgYSBiaWFzXG4gICAgICAgICAgICB2YXIgY2xpcHBlZEZhciA9IE1hdGgubWluKC1zY2VuZS52aWV3Qm91bmRpbmdCb3hMYXN0RnJhbWUubWluLnosIHNjZW5lQ2FtZXJhLmZhcik7XG4gICAgICAgICAgICB2YXIgY2xpcHBlZE5lYXIgPSBNYXRoLm1heCgtc2NlbmUudmlld0JvdW5kaW5nQm94TGFzdEZyYW1lLm1heC56LCBzY2VuZUNhbWVyYS5uZWFyKTtcblxuICAgICAgICAgICAgdmFyIGxpZ2h0Q2FtZXJhID0gdGhpcy5fZ2V0RGlyZWN0aW9uYWxMaWdodENhbWVyYShsaWdodCwgc2NlbmUsIHNjZW5lQ2FtZXJhKTtcblxuICAgICAgICAgICAgdmFyIGx2cE1hdDRBcnIgPSBsaWdodFZpZXdQcm9qTWF0cml4LmFycmF5O1xuICAgICAgICAgICAgbGlnaHRQcm9qTWF0cml4LmNvcHkobGlnaHRDYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7XG4gICAgICAgICAgICBtYXQ0LmludmVydChsaWdodFZpZXdNYXRyaXguYXJyYXksIGxpZ2h0Q2FtZXJhLndvcmxkVHJhbnNmb3JtLmFycmF5KTtcbiAgICAgICAgICAgIG1hdDQubXVsdGlwbHkobGlnaHRWaWV3TWF0cml4LmFycmF5LCBsaWdodFZpZXdNYXRyaXguYXJyYXksIHNjZW5lQ2FtZXJhLndvcmxkVHJhbnNmb3JtLmFycmF5KTtcbiAgICAgICAgICAgIG1hdDQubXVsdGlwbHkobHZwTWF0NEFyciwgbGlnaHRQcm9qTWF0cml4LmFycmF5LCBsaWdodFZpZXdNYXRyaXguYXJyYXkpO1xuXG4gICAgICAgICAgICB2YXIgY2xpcFBsYW5lcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGlzUGVyc3BlY3RpdmUgPSBzY2VuZUNhbWVyYSBpbnN0YW5jZW9mIFBlcnNwZWN0aXZlQ2FtZXJhO1xuXG4gICAgICAgICAgICB2YXIgc2NhbGVaID0gKHNjZW5lQ2FtZXJhLm5lYXIgKyBzY2VuZUNhbWVyYS5mYXIpIC8gKHNjZW5lQ2FtZXJhLm5lYXIgLSBzY2VuZUNhbWVyYS5mYXIpO1xuICAgICAgICAgICAgdmFyIG9mZnNldFogPSAyICogc2NlbmVDYW1lcmEubmVhciAqIHNjZW5lQ2FtZXJhLmZhciAvIChzY2VuZUNhbWVyYS5uZWFyIC0gc2NlbmVDYW1lcmEuZmFyKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGxpZ2h0LnNoYWRvd0Nhc2NhZGU7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjbG9nID0gY2xpcHBlZE5lYXIgKiBNYXRoLnBvdyhjbGlwcGVkRmFyIC8gY2xpcHBlZE5lYXIsIGkgLyBsaWdodC5zaGFkb3dDYXNjYWRlKTtcbiAgICAgICAgICAgICAgICB2YXIgY3VuaSA9IGNsaXBwZWROZWFyICsgKGNsaXBwZWRGYXIgLSBjbGlwcGVkTmVhcikgKiBpIC8gbGlnaHQuc2hhZG93Q2FzY2FkZTtcbiAgICAgICAgICAgICAgICB2YXIgYyA9IGNsb2cgKiBsaWdodC5jYXNjYWRlU3BsaXRMb2dGYWN0b3IgKyBjdW5pICogKDEgLSBsaWdodC5jYXNjYWRlU3BsaXRMb2dGYWN0b3IpO1xuICAgICAgICAgICAgICAgIGNsaXBQbGFuZXMucHVzaChjKTtcbiAgICAgICAgICAgICAgICBzaGFkb3dDYXNjYWRlQ2xpcHMucHVzaCgtKC1jICogc2NhbGVaICsgb2Zmc2V0WikgLyAtYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGV4dHVyZSA9IHRoaXMuX2dldFRleHR1cmUobGlnaHQsIGxpZ2h0LnNoYWRvd0Nhc2NhZGUpO1xuICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodFNoYWRvd01hcHMucHVzaCh0ZXh0dXJlKTtcblxuICAgICAgICAgICAgdmFyIHZpZXdwb3J0ID0gcmVuZGVyZXIudmlld3BvcnQ7XG5cbiAgICAgICAgICAgIHZhciBfZ2wgPSByZW5kZXJlci5nbDtcbiAgICAgICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmF0dGFjaCh0ZXh0dXJlKTtcbiAgICAgICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICAgICAgX2dsLmNsZWFyKF9nbC5DT0xPUl9CVUZGRVJfQklUIHwgX2dsLkRFUFRIX0JVRkZFUl9CSVQpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpZ2h0LnNoYWRvd0Nhc2NhZGU7IGkrKykge1xuICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgc3BsaXR0ZWQgZnJ1c3R1bVxuICAgICAgICAgICAgICAgIHZhciBuZWFyUGxhbmUgPSBjbGlwUGxhbmVzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBmYXJQbGFuZSA9IGNsaXBQbGFuZXNbaSArIDFdO1xuICAgICAgICAgICAgICAgIGlmIChpc1BlcnNwZWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdDQucGVyc3BlY3RpdmUoc3BsaXRQcm9qTWF0cml4LmFycmF5LCBzY2VuZUNhbWVyYS5mb3YgLyAxODAgKiBNYXRoLlBJLCBzY2VuZUNhbWVyYS5hc3BlY3QsIG5lYXJQbGFuZSwgZmFyUGxhbmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0NC5vcnRobyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwbGl0UHJvak1hdHJpeC5hcnJheSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lQ2FtZXJhLmxlZnQsIHNjZW5lQ2FtZXJhLnJpZ2h0LCBzY2VuZUNhbWVyYS5ib3R0b20sIHNjZW5lQ2FtZXJhLnRvcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lYXJQbGFuZSwgZmFyUGxhbmVcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3BsaXRGcnVzdHVtLnNldEZyb21Qcm9qZWN0aW9uKHNwbGl0UHJvak1hdHJpeCk7XG4gICAgICAgICAgICAgICAgc3BsaXRGcnVzdHVtLmdldFRyYW5zZm9ybWVkQm91bmRpbmdCb3goY3JvcEJCb3gsIGxpZ2h0Vmlld01hdHJpeCk7XG4gICAgICAgICAgICAgICAgY3JvcEJCb3guYXBwbHlQcm9qZWN0aW9uKGxpZ2h0UHJvak1hdHJpeCk7XG4gICAgICAgICAgICAgICAgdmFyIF9taW4gPSBjcm9wQkJveC5taW4uYXJyYXk7XG4gICAgICAgICAgICAgICAgdmFyIF9tYXggPSBjcm9wQkJveC5tYXguYXJyYXk7XG4gICAgICAgICAgICAgICAgX21pblswXSA9IE1hdGgubWF4KF9taW5bMF0sIC0xKTtcbiAgICAgICAgICAgICAgICBfbWluWzFdID0gTWF0aC5tYXgoX21pblsxXSwgLTEpO1xuICAgICAgICAgICAgICAgIF9tYXhbMF0gPSBNYXRoLm1pbihfbWF4WzBdLCAxKTtcbiAgICAgICAgICAgICAgICBfbWF4WzFdID0gTWF0aC5taW4oX21heFsxXSwgMSk7XG4gICAgICAgICAgICAgICAgY3JvcE1hdHJpeC5vcnRobyhfbWluWzBdLCBfbWF4WzBdLCBfbWluWzFdLCBfbWF4WzFdLCAxLCAtMSk7XG4gICAgICAgICAgICAgICAgbGlnaHRDYW1lcmEucHJvamVjdGlvbk1hdHJpeC5tdWx0aXBseUxlZnQoY3JvcE1hdHJpeCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2hhZG93U2l6ZSA9IGxpZ2h0LnNoYWRvd1Jlc29sdXRpb24gfHwgNTEyO1xuXG4gICAgICAgICAgICAgICAgLy8gUmV2ZXJzZWQsIGxlZnQgdG8gcmlnaHQgPT4gZmFyIHRvIG5lYXJcbiAgICAgICAgICAgICAgICByZW5kZXJlci5zZXRWaWV3cG9ydCgobGlnaHQuc2hhZG93Q2FzY2FkZSAtIGkgLSAxKSAqIHNoYWRvd1NpemUsIDAsIHNoYWRvd1NpemUsIHNoYWRvd1NpemUsIDEpO1xuXG4gICAgICAgICAgICAgICAgdmFyIHJlbmRlckxpc3QgPSBzY2VuZS51cGRhdGVSZW5kZXJMaXN0KGxpZ2h0Q2FtZXJhKTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5yZW5kZXJQYXNzKHJlbmRlckxpc3Qub3BhcXVlLCBsaWdodENhbWVyYSwgcGFzc0NvbmZpZyk7XG5cbiAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgZm9yIFZTTVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvZnRTaGFkb3cgPT09IFNoYWRvd01hcFBhc3MuVlNNKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2dhdXNzaWFuRmlsdGVyKHJlbmRlcmVyLCB0ZXh0dXJlLCB0ZXh0dXJlLndpZHRoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcbiAgICAgICAgICAgICAgICBtYXRyaXguY29weShsaWdodENhbWVyYS52aWV3TWF0cml4KVxuICAgICAgICAgICAgICAgICAgICAubXVsdGlwbHlMZWZ0KGxpZ2h0Q2FtZXJhLnByb2plY3Rpb25NYXRyaXgpO1xuXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodE1hdHJpY2VzLnB1c2gobWF0cml4LmFycmF5KTtcblxuICAgICAgICAgICAgICAgIGxpZ2h0Q2FtZXJhLnByb2plY3Rpb25NYXRyaXguY29weShsaWdodFByb2pNYXRyaXgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci51bmJpbmQocmVuZGVyZXIpO1xuXG4gICAgICAgICAgICByZW5kZXJlci5zZXRWaWV3cG9ydCh2aWV3cG9ydCk7XG4gICAgICAgIH07XG4gICAgfSkoKSxcblxuICAgIHJlbmRlclNwb3RMaWdodFNoYWRvdzogZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgbGlnaHQsIHNwb3RMaWdodE1hdHJpY2VzLCBzcG90TGlnaHRTaGFkb3dNYXBzKSB7XG5cbiAgICAgICAgdmFyIHRleHR1cmUgPSB0aGlzLl9nZXRUZXh0dXJlKGxpZ2h0KTtcbiAgICAgICAgdmFyIGxpZ2h0Q2FtZXJhID0gdGhpcy5fZ2V0U3BvdExpZ2h0Q2FtZXJhKGxpZ2h0KTtcbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuXG4gICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmF0dGFjaCh0ZXh0dXJlKTtcbiAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIuYmluZChyZW5kZXJlcik7XG5cbiAgICAgICAgX2dsLmNsZWFyKF9nbC5DT0xPUl9CVUZGRVJfQklUIHwgX2dsLkRFUFRIX0JVRkZFUl9CSVQpO1xuXG4gICAgICAgIHZhciBkZWZhdWx0U2hhZG93TWF0ZXJpYWwgPSB0aGlzLl9nZXREZXB0aE1hdGVyaWFsKGxpZ2h0KTtcbiAgICAgICAgdmFyIHBhc3NDb25maWcgPSB7XG4gICAgICAgICAgICBnZXRNYXRlcmlhbDogZnVuY3Rpb24gKHJlbmRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVuZGVyYWJsZS5zaGFkb3dEZXB0aE1hdGVyaWFsIHx8IGRlZmF1bHRTaGFkb3dNYXRlcmlhbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc01hdGVyaWFsQ2hhbmdlZDogaXNEZXB0aE1hdGVyaWFsQ2hhbmdlZCxcbiAgICAgICAgICAgIGdldFVuaWZvcm06IGdldERlcHRoTWF0ZXJpYWxVbmlmb3JtLFxuICAgICAgICAgICAgaWZSZW5kZXI6IGZ1bmN0aW9uIChyZW5kZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmFibGUuY2FzdFNoYWRvdztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzb3J0Q29tcGFyZTogUmVuZGVyZXIub3BhcXVlU29ydENvbXBhcmVcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgcmVuZGVyTGlzdCA9IHNjZW5lLnVwZGF0ZVJlbmRlckxpc3QobGlnaHRDYW1lcmEpO1xuICAgICAgICByZW5kZXJlci5yZW5kZXJQYXNzKHJlbmRlckxpc3Qub3BhcXVlLCBsaWdodENhbWVyYSwgcGFzc0NvbmZpZyk7XG5cbiAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIudW5iaW5kKHJlbmRlcmVyKTtcblxuICAgICAgICAvLyBGaWx0ZXIgZm9yIFZTTVxuICAgICAgICBpZiAodGhpcy5zb2Z0U2hhZG93ID09PSBTaGFkb3dNYXBQYXNzLlZTTSkge1xuICAgICAgICAgICAgdGhpcy5fZ2F1c3NpYW5GaWx0ZXIocmVuZGVyZXIsIHRleHR1cmUsIHRleHR1cmUud2lkdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XG4gICAgICAgIG1hdHJpeC5jb3B5KGxpZ2h0Q2FtZXJhLndvcmxkVHJhbnNmb3JtKVxuICAgICAgICAgICAgLmludmVydCgpXG4gICAgICAgICAgICAubXVsdGlwbHlMZWZ0KGxpZ2h0Q2FtZXJhLnByb2plY3Rpb25NYXRyaXgpO1xuXG4gICAgICAgIHNwb3RMaWdodFNoYWRvd01hcHMucHVzaCh0ZXh0dXJlKTtcbiAgICAgICAgc3BvdExpZ2h0TWF0cmljZXMucHVzaChtYXRyaXguYXJyYXkpO1xuICAgIH0sXG5cbiAgICByZW5kZXJQb2ludExpZ2h0U2hhZG93OiBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lLCBsaWdodCwgcG9pbnRMaWdodFNoYWRvd01hcHMpIHtcbiAgICAgICAgdmFyIHRleHR1cmUgPSB0aGlzLl9nZXRUZXh0dXJlKGxpZ2h0KTtcbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuICAgICAgICBwb2ludExpZ2h0U2hhZG93TWFwcy5wdXNoKHRleHR1cmUpO1xuXG4gICAgICAgIHZhciBkZWZhdWx0U2hhZG93TWF0ZXJpYWwgPSB0aGlzLl9nZXREZXB0aE1hdGVyaWFsKGxpZ2h0KTtcbiAgICAgICAgdmFyIHBhc3NDb25maWcgPSB7XG4gICAgICAgICAgICBnZXRNYXRlcmlhbDogZnVuY3Rpb24gKHJlbmRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVuZGVyYWJsZS5zaGFkb3dEZXB0aE1hdGVyaWFsIHx8IGRlZmF1bHRTaGFkb3dNYXRlcmlhbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRVbmlmb3JtOiBnZXREZXB0aE1hdGVyaWFsVW5pZm9ybSxcbiAgICAgICAgICAgIHNvcnRDb21wYXJlOiBSZW5kZXJlci5vcGFxdWVTb3J0Q29tcGFyZVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZW5kZXJMaXN0RWFjaFNpZGUgPSB7XG4gICAgICAgICAgICBweDogW10sIHB5OiBbXSwgcHo6IFtdLCBueDogW10sIG55OiBbXSwgbno6IFtdXG4gICAgICAgIH07XG4gICAgICAgIHZhciBiYm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgICAgIHZhciBsaWdodFdvcmxkUG9zaXRpb24gPSBsaWdodC5nZXRXb3JsZFBvc2l0aW9uKCkuYXJyYXk7XG4gICAgICAgIHZhciBsaWdodEJCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgICAgdmFyIHJhbmdlID0gbGlnaHQucmFuZ2U7XG4gICAgICAgIGxpZ2h0QkJveC5taW4uc2V0QXJyYXkobGlnaHRXb3JsZFBvc2l0aW9uKTtcbiAgICAgICAgbGlnaHRCQm94Lm1heC5zZXRBcnJheShsaWdodFdvcmxkUG9zaXRpb24pO1xuICAgICAgICB2YXIgZXh0ZW50ID0gbmV3IFZlY3RvcjMocmFuZ2UsIHJhbmdlLCByYW5nZSk7XG4gICAgICAgIGxpZ2h0QkJveC5tYXguYWRkKGV4dGVudCk7XG4gICAgICAgIGxpZ2h0QkJveC5taW4uc3ViKGV4dGVudCk7XG5cbiAgICAgICAgdmFyIHRhcmdldHNOZWVkUmVuZGVyID0geyBweDogZmFsc2UsIHB5OiBmYWxzZSwgcHo6IGZhbHNlLCBueDogZmFsc2UsIG55OiBmYWxzZSwgbno6IGZhbHNlIH07XG4gICAgICAgIHNjZW5lLnRyYXZlcnNlKGZ1bmN0aW9uIChyZW5kZXJhYmxlKSB7XG4gICAgICAgICAgICBpZiAocmVuZGVyYWJsZS5pc1JlbmRlcmFibGUoKSAmJiByZW5kZXJhYmxlLmNhc3RTaGFkb3cpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSByZW5kZXJhYmxlLmdlb21ldHJ5O1xuICAgICAgICAgICAgICAgIGlmICghZ2VvbWV0cnkuYm91bmRpbmdCb3gpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJMaXN0RWFjaFNpZGVbdGFyZ2V0c1tpXV0ucHVzaChyZW5kZXJhYmxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJib3gudHJhbnNmb3JtRnJvbShnZW9tZXRyeS5ib3VuZGluZ0JveCwgcmVuZGVyYWJsZS53b3JsZFRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgaWYgKCFiYm94LmludGVyc2VjdEJvdW5kaW5nQm94KGxpZ2h0QkJveCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJib3gudXBkYXRlVmVydGljZXMoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhcmdldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0c05lZWRSZW5kZXJbdGFyZ2V0c1tpXV0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZ0eCA9IGJib3gudmVydGljZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gdnR4WzBdIC0gbGlnaHRXb3JsZFBvc2l0aW9uWzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHZ0eFsxXSAtIGxpZ2h0V29ybGRQb3NpdGlvblsxXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHogPSB2dHhbMl0gLSBsaWdodFdvcmxkUG9zaXRpb25bMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBhYnN4ID0gTWF0aC5hYnMoeCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhYnN5ID0gTWF0aC5hYnMoeSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhYnN6ID0gTWF0aC5hYnMoeik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhYnN4ID4gYWJzeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFic3ggPiBhYnN6KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0c05lZWRSZW5kZXJbeCA+IDAgPyAncHgnIDogJ254J10gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0c05lZWRSZW5kZXJbeiA+IDAgPyAncHonIDogJ256J10gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFic3kgPiBhYnN6KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0c05lZWRSZW5kZXJbeSA+IDAgPyAncHknIDogJ255J10gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0c05lZWRSZW5kZXJbeiA+IDAgPyAncHonIDogJ256J10gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0c05lZWRSZW5kZXJbdGFyZ2V0c1tpXV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckxpc3RFYWNoU2lkZVt0YXJnZXRzW2ldXS5wdXNoKHJlbmRlcmFibGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDY7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRhcmdldHNbaV07XG4gICAgICAgICAgICB2YXIgY2FtZXJhID0gdGhpcy5fZ2V0UG9pbnRMaWdodENhbWVyYShsaWdodCwgdGFyZ2V0KTtcblxuICAgICAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIuYXR0YWNoKHRleHR1cmUsIF9nbC5DT0xPUl9BVFRBQ0hNRU5UMCwgX2dsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCArIGkpO1xuICAgICAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIuYmluZChyZW5kZXJlcik7XG4gICAgICAgICAgICBfZ2wuY2xlYXIoX2dsLkNPTE9SX0JVRkZFUl9CSVQgfCBfZ2wuREVQVEhfQlVGRkVSX0JJVCk7XG5cbiAgICAgICAgICAgIHJlbmRlcmVyLnJlbmRlclBhc3MocmVuZGVyTGlzdEVhY2hTaWRlW3RhcmdldF0sIGNhbWVyYSwgcGFzc0NvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci51bmJpbmQocmVuZGVyZXIpO1xuICAgIH0sXG5cbiAgICBfZ2V0RGVwdGhNYXRlcmlhbDogZnVuY3Rpb24gKGxpZ2h0KSB7XG4gICAgICAgIHZhciBzaGFkb3dNYXRlcmlhbCA9IHRoaXMuX2xpZ2h0TWF0ZXJpYWxzW2xpZ2h0Ll9fdWlkX19dO1xuICAgICAgICB2YXIgaXNQb2ludExpZ2h0ID0gbGlnaHQudHlwZSA9PT0gJ1BPSU5UX0xJR0hUJztcbiAgICAgICAgaWYgKCFzaGFkb3dNYXRlcmlhbCkge1xuICAgICAgICAgICAgdmFyIHNoYWRlclByZWZpeCA9IGlzUG9pbnRMaWdodCA/ICdjbGF5LnNtLmRpc3RhbmNlLicgOiAnY2xheS5zbS5kZXB0aC4nO1xuICAgICAgICAgICAgc2hhZG93TWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoe1xuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogdGhpcy5wcmVjaXNpb24sXG4gICAgICAgICAgICAgICAgc2hhZGVyOiBuZXcgU2hhZGVyKFNoYWRlci5zb3VyY2Uoc2hhZGVyUHJlZml4ICsgJ3ZlcnRleCcpLCBTaGFkZXIuc291cmNlKHNoYWRlclByZWZpeCArICdmcmFnbWVudCcpKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuX2xpZ2h0TWF0ZXJpYWxzW2xpZ2h0Ll9fdWlkX19dID0gc2hhZG93TWF0ZXJpYWw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpZ2h0LnNoYWRvd1Nsb3BlU2NhbGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2hhZG93TWF0ZXJpYWwuc2V0VW5pZm9ybSgnc2xvcGVTY2FsZScsIGxpZ2h0LnNoYWRvd1Nsb3BlU2NhbGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsaWdodC5zaGFkb3dCaWFzICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNoYWRvd01hdGVyaWFsLnNldFVuaWZvcm0oJ2JpYXMnLCBsaWdodC5zaGFkb3dCaWFzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zb2Z0U2hhZG93ID09PSBTaGFkb3dNYXBQYXNzLlZTTSkge1xuICAgICAgICAgICAgc2hhZG93TWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdVU0VfVlNNJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaGFkb3dNYXRlcmlhbC51bmRlZmluZSgnZnJhZ21lbnQnLCAnVVNFX1ZTTScpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzUG9pbnRMaWdodCkge1xuICAgICAgICAgICAgc2hhZG93TWF0ZXJpYWwuc2V0KCdsaWdodFBvc2l0aW9uJywgbGlnaHQuZ2V0V29ybGRQb3NpdGlvbigpLmFycmF5KTtcbiAgICAgICAgICAgIHNoYWRvd01hdGVyaWFsLnNldCgncmFuZ2UnLCBsaWdodC5yYW5nZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2hhZG93TWF0ZXJpYWw7XG4gICAgfSxcblxuICAgIF9nYXVzc2lhbkZpbHRlcjogZnVuY3Rpb24gKHJlbmRlcmVyLCB0ZXh0dXJlLCBzaXplKSB7XG4gICAgICAgIHZhciBwYXJhbWV0ZXIgPSB7XG4gICAgICAgICAgICB3aWR0aDogc2l6ZSxcbiAgICAgICAgICAgIGhlaWdodDogc2l6ZSxcbiAgICAgICAgICAgIHR5cGU6IFRleHR1cmUuRkxPQVRcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHRtcFRleHR1cmUgPSB0aGlzLl90ZXh0dXJlUG9vbC5nZXQocGFyYW1ldGVyKTtcblxuICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci5hdHRhY2godG1wVGV4dHVyZSk7XG4gICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICB0aGlzLl9nYXVzc2lhblBhc3NILnNldFVuaWZvcm0oJ3RleHR1cmUnLCB0ZXh0dXJlKTtcbiAgICAgICAgdGhpcy5fZ2F1c3NpYW5QYXNzSC5zZXRVbmlmb3JtKCd0ZXh0dXJlV2lkdGgnLCBzaXplKTtcbiAgICAgICAgdGhpcy5fZ2F1c3NpYW5QYXNzSC5yZW5kZXIocmVuZGVyZXIpO1xuXG4gICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmF0dGFjaCh0ZXh0dXJlKTtcbiAgICAgICAgdGhpcy5fZ2F1c3NpYW5QYXNzVi5zZXRVbmlmb3JtKCd0ZXh0dXJlJywgdG1wVGV4dHVyZSk7XG4gICAgICAgIHRoaXMuX2dhdXNzaWFuUGFzc1Yuc2V0VW5pZm9ybSgndGV4dHVyZUhlaWdodCcsIHNpemUpO1xuICAgICAgICB0aGlzLl9nYXVzc2lhblBhc3NWLnJlbmRlcihyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLnVuYmluZChyZW5kZXJlcik7XG5cbiAgICAgICAgdGhpcy5fdGV4dHVyZVBvb2wucHV0KHRtcFRleHR1cmUpO1xuICAgIH0sXG5cbiAgICBfZ2V0VGV4dHVyZTogZnVuY3Rpb24gKGxpZ2h0LCBjYXNjYWRlKSB7XG4gICAgICAgIHZhciBrZXkgPSBsaWdodC5fX3VpZF9fO1xuICAgICAgICB2YXIgdGV4dHVyZSA9IHRoaXMuX3RleHR1cmVzW2tleV07XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gbGlnaHQuc2hhZG93UmVzb2x1dGlvbiB8fCA1MTI7XG4gICAgICAgIGNhc2NhZGUgPSBjYXNjYWRlIHx8IDE7XG4gICAgICAgIGlmICghdGV4dHVyZSkge1xuICAgICAgICAgICAgaWYgKGxpZ2h0LnR5cGUgPT09ICdQT0lOVF9MSUdIVCcpIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlID0gbmV3IFRleHR1cmVDdWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlID0gbmV3IFRleHR1cmUyRCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQXQgbW9zdCA0IGNhc2NhZGVcbiAgICAgICAgICAgIC8vIFRPRE8gc2hhcmUgd2l0aCBoZWlnaHQgP1xuICAgICAgICAgICAgdGV4dHVyZS53aWR0aCA9IHJlc29sdXRpb24gKiBjYXNjYWRlO1xuICAgICAgICAgICAgdGV4dHVyZS5oZWlnaHQgPSByZXNvbHV0aW9uO1xuICAgICAgICAgICAgaWYgKHRoaXMuc29mdFNoYWRvdyA9PT0gU2hhZG93TWFwUGFzcy5WU00pIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLnR5cGUgPSBUZXh0dXJlLkZMT0FUO1xuICAgICAgICAgICAgICAgIHRleHR1cmUuYW5pc290cm9waWMgPSA0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5taW5GaWx0ZXIgPSBnbGVudW0uTkVBUkVTVDtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLm1hZ0ZpbHRlciA9IGdsZW51bS5ORUFSRVNUO1xuICAgICAgICAgICAgICAgIHRleHR1cmUudXNlTWlwbWFwID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl90ZXh0dXJlc1trZXldID0gdGV4dHVyZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIH0sXG5cbiAgICBfZ2V0UG9pbnRMaWdodENhbWVyYTogZnVuY3Rpb24gKGxpZ2h0LCB0YXJnZXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9saWdodENhbWVyYXMucG9pbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX2xpZ2h0Q2FtZXJhcy5wb2ludCA9IHtcbiAgICAgICAgICAgICAgICBweDogbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKCksXG4gICAgICAgICAgICAgICAgbng6IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSgpLFxuICAgICAgICAgICAgICAgIHB5OiBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoKSxcbiAgICAgICAgICAgICAgICBueTogbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKCksXG4gICAgICAgICAgICAgICAgcHo6IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSgpLFxuICAgICAgICAgICAgICAgIG56OiBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2FtZXJhID0gdGhpcy5fbGlnaHRDYW1lcmFzLnBvaW50W3RhcmdldF07XG5cbiAgICAgICAgY2FtZXJhLmZhciA9IGxpZ2h0LnJhbmdlO1xuICAgICAgICBjYW1lcmEuZm92ID0gOTA7XG4gICAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoMCwgMCwgMCk7XG4gICAgICAgIHN3aXRjaCAodGFyZ2V0KSB7XG4gICAgICAgICAgICBjYXNlICdweCc6XG4gICAgICAgICAgICAgICAgY2FtZXJhLmxvb2tBdChWZWN0b3IzLlBPU0lUSVZFX1gsIFZlY3RvcjMuTkVHQVRJVkVfWSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdueCc6XG4gICAgICAgICAgICAgICAgY2FtZXJhLmxvb2tBdChWZWN0b3IzLk5FR0FUSVZFX1gsIFZlY3RvcjMuTkVHQVRJVkVfWSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdweSc6XG4gICAgICAgICAgICAgICAgY2FtZXJhLmxvb2tBdChWZWN0b3IzLlBPU0lUSVZFX1ksIFZlY3RvcjMuUE9TSVRJVkVfWik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdueSc6XG4gICAgICAgICAgICAgICAgY2FtZXJhLmxvb2tBdChWZWN0b3IzLk5FR0FUSVZFX1ksIFZlY3RvcjMuTkVHQVRJVkVfWik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdweic6XG4gICAgICAgICAgICAgICAgY2FtZXJhLmxvb2tBdChWZWN0b3IzLlBPU0lUSVZFX1osIFZlY3RvcjMuTkVHQVRJVkVfWSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdueic6XG4gICAgICAgICAgICAgICAgY2FtZXJhLmxvb2tBdChWZWN0b3IzLk5FR0FUSVZFX1osIFZlY3RvcjMuTkVHQVRJVkVfWSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgbGlnaHQuZ2V0V29ybGRQb3NpdGlvbihjYW1lcmEucG9zaXRpb24pO1xuICAgICAgICBjYW1lcmEudXBkYXRlKCk7XG5cbiAgICAgICAgcmV0dXJuIGNhbWVyYTtcbiAgICB9LFxuXG4gICAgX2dldERpcmVjdGlvbmFsTGlnaHRDYW1lcmE6IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsaWdodFZpZXdNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xuICAgICAgICB2YXIgc2NlbmVWaWV3Qm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgICAgdmFyIGxpZ2h0Vmlld0JCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgICAgLy8gQ2FtZXJhIG9mIGRpcmVjdGlvbmFsIGxpZ2h0IHdpbGwgYmUgYWRqdXN0ZWRcbiAgICAgICAgLy8gdG8gY29udGFpbiB0aGUgdmlldyBmcnVzdHVtIGFuZCBzY2VuZSBib3VuZGluZyBib3ggYXMgdGlnaHRseSBhcyBwb3NzaWJsZVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGxpZ2h0LCBzY2VuZSwgc2NlbmVDYW1lcmEpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fbGlnaHRDYW1lcmFzLmRpcmVjdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbGlnaHRDYW1lcmFzLmRpcmVjdGlvbmFsID0gbmV3IE9ydGhvQ2FtZXJhKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2FtZXJhID0gdGhpcy5fbGlnaHRDYW1lcmFzLmRpcmVjdGlvbmFsO1xuXG4gICAgICAgICAgICBzY2VuZVZpZXdCb3VuZGluZ0JveC5jb3B5KHNjZW5lLnZpZXdCb3VuZGluZ0JveExhc3RGcmFtZSk7XG4gICAgICAgICAgICBzY2VuZVZpZXdCb3VuZGluZ0JveC5pbnRlcnNlY3Rpb24oc2NlbmVDYW1lcmEuZnJ1c3R1bS5ib3VuZGluZ0JveCk7XG4gICAgICAgICAgICAvLyBNb3ZlIHRvIHRoZSBjZW50ZXIgb2YgZnJ1c3R1bShpbiB3b3JsZCBzcGFjZSlcbiAgICAgICAgICAgIGNhbWVyYS5wb3NpdGlvblxuICAgICAgICAgICAgICAgIC5jb3B5KHNjZW5lVmlld0JvdW5kaW5nQm94Lm1pbilcbiAgICAgICAgICAgICAgICAuYWRkKHNjZW5lVmlld0JvdW5kaW5nQm94Lm1heClcbiAgICAgICAgICAgICAgICAuc2NhbGUoMC41KVxuICAgICAgICAgICAgICAgIC50cmFuc2Zvcm1NYXQ0KHNjZW5lQ2FtZXJhLndvcmxkVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIGNhbWVyYS5yb3RhdGlvbi5jb3B5KGxpZ2h0LnJvdGF0aW9uKTtcbiAgICAgICAgICAgIGNhbWVyYS5zY2FsZS5jb3B5KGxpZ2h0LnNjYWxlKTtcbiAgICAgICAgICAgIGNhbWVyYS51cGRhdGVXb3JsZFRyYW5zZm9ybSgpO1xuXG4gICAgICAgICAgICAvLyBUcmFuc2Zvcm0gdG8gbGlnaHQgdmlldyBzcGFjZVxuICAgICAgICAgICAgTWF0cml4NC5pbnZlcnQobGlnaHRWaWV3TWF0cml4LCBjYW1lcmEud29ybGRUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgTWF0cml4NC5tdWx0aXBseShsaWdodFZpZXdNYXRyaXgsIGxpZ2h0Vmlld01hdHJpeCwgc2NlbmVDYW1lcmEud29ybGRUcmFuc2Zvcm0pO1xuXG4gICAgICAgICAgICBsaWdodFZpZXdCQm94LmNvcHkoc2NlbmVWaWV3Qm91bmRpbmdCb3gpLmFwcGx5VHJhbnNmb3JtKGxpZ2h0Vmlld01hdHJpeCk7XG5cbiAgICAgICAgICAgIHZhciBtaW4gPSBsaWdodFZpZXdCQm94Lm1pbi5hcnJheTtcbiAgICAgICAgICAgIHZhciBtYXggPSBsaWdodFZpZXdCQm94Lm1heC5hcnJheTtcblxuICAgICAgICAgICAgLy8gTW92ZSBjYW1lcmEgdG8gYWRqdXN0IHRoZSBuZWFyIHRvIDBcbiAgICAgICAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoKG1pblswXSArIG1heFswXSkgLyAyLCAobWluWzFdICsgbWF4WzFdKSAvIDIsIG1heFsyXSlcbiAgICAgICAgICAgICAgICAudHJhbnNmb3JtTWF0NChjYW1lcmEud29ybGRUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgY2FtZXJhLm5lYXIgPSAwO1xuICAgICAgICAgICAgY2FtZXJhLmZhciA9IC1taW5bMl0gKyBtYXhbMl07XG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgcmVjZWl2ZXJzIG5vdCBpbiB0aGUgZnJ1c3R1bSB3aWxsIHN0aWwgcmVjZWl2ZSB0aGUgc2hhZG93LlxuICAgICAgICAgICAgaWYgKGlzTmFOKHRoaXMubGlnaHRGcnVzdHVtQmlhcykpIHtcbiAgICAgICAgICAgICAgICBjYW1lcmEuZmFyICo9IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYW1lcmEuZmFyICs9IHRoaXMubGlnaHRGcnVzdHVtQmlhcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbWVyYS5sZWZ0ID0gbWluWzBdO1xuICAgICAgICAgICAgY2FtZXJhLnJpZ2h0ID0gbWF4WzBdO1xuICAgICAgICAgICAgY2FtZXJhLnRvcCA9IG1heFsxXTtcbiAgICAgICAgICAgIGNhbWVyYS5ib3R0b20gPSBtaW5bMV07XG4gICAgICAgICAgICBjYW1lcmEudXBkYXRlKHRydWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gY2FtZXJhO1xuICAgICAgICB9O1xuICAgIH0pKCksXG5cbiAgICBfZ2V0U3BvdExpZ2h0Q2FtZXJhOiBmdW5jdGlvbiAobGlnaHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9saWdodENhbWVyYXMuc3BvdCkge1xuICAgICAgICAgICAgdGhpcy5fbGlnaHRDYW1lcmFzLnNwb3QgPSBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2FtZXJhID0gdGhpcy5fbGlnaHRDYW1lcmFzLnNwb3Q7XG4gICAgICAgIC8vIFVwZGF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIGNhbWVyYS5mb3YgPSBsaWdodC5wZW51bWJyYUFuZ2xlICogMjtcbiAgICAgICAgY2FtZXJhLmZhciA9IGxpZ2h0LnJhbmdlO1xuICAgICAgICBjYW1lcmEud29ybGRUcmFuc2Zvcm0uY29weShsaWdodC53b3JsZFRyYW5zZm9ybSk7XG4gICAgICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgICAgIG1hdDQuaW52ZXJ0KGNhbWVyYS52aWV3TWF0cml4LmFycmF5LCBjYW1lcmEud29ybGRUcmFuc2Zvcm0uYXJyYXkpO1xuXG4gICAgICAgIHJldHVybiBjYW1lcmE7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ8V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBbcmVuZGVyZXJdXG4gICAgICogQG1lbWJlck9mIGNsYXkucHJlUGFzcy5TaGFkb3dNYXAucHJvdG90eXBlXG4gICAgICovXG4gICAgLy8gUEVORElORyBSZW5kZXJlciBvciBXZWJHTFJlbmRlcmluZ0NvbnRleHRcbiAgICBkaXNwb3NlOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsIHx8IHJlbmRlcmVyO1xuXG4gICAgICAgIGlmICh0aGlzLl9mcmFtZUJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIuZGlzcG9zZShfZ2wpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLl90ZXh0dXJlcykge1xuICAgICAgICAgICAgdGhpcy5fdGV4dHVyZXNbbmFtZV0uZGlzcG9zZShfZ2wpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdGV4dHVyZVBvb2wuY2xlYXIocmVuZGVyZXIuZ2wpO1xuXG4gICAgICAgIHRoaXMuX2RlcHRoTWF0ZXJpYWxzID0ge307XG4gICAgICAgIHRoaXMuX2Rpc3RhbmNlTWF0ZXJpYWxzID0ge307XG4gICAgICAgIHRoaXMuX3RleHR1cmVzID0ge307XG4gICAgICAgIHRoaXMuX2xpZ2h0Q2FtZXJhcyA9IHt9O1xuICAgICAgICB0aGlzLl9zaGFkb3dNYXBOdW1iZXIgPSB7XG4gICAgICAgICAgICAnUE9JTlRfTElHSFQnOiAwLFxuICAgICAgICAgICAgJ0RJUkVDVElPTkFMX0xJR0hUJzogMCxcbiAgICAgICAgICAgICdTUE9UX0xJR0hUJzogMFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9tZXNoTWF0ZXJpYWxzID0ge307XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9yZWNlaXZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBtZXNoID0gdGhpcy5fcmVjZWl2ZXJzW2ldO1xuICAgICAgICAgICAgLy8gTWVzaCBtYXkgYmUgZGlzcG9zZWRcbiAgICAgICAgICAgIGlmIChtZXNoLm1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gbWVzaC5tYXRlcmlhbDtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC51bmRlZmluZSgnZnJhZ21lbnQnLCAnUE9JTlRfTElHSFRfU0hBRE9XX0NPVU5UJyk7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwudW5kZWZpbmUoJ2ZyYWdtZW50JywgJ0RJUkVDVElPTkFMX0xJR0hUX1NIQURPV19DT1VOVCcpO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsLnVuZGVmaW5lKCdmcmFnbWVudCcsICdBTUJJRU5UX0xJR0hUX1NIQURPV19DT1VOVCcpO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldCgnc2hhZG93RW5hYmxlZCcsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcmVjZWl2ZXJzID0gW107XG4gICAgICAgIHRoaXMuX2xpZ2h0c0Nhc3RTaGFkb3cgPSBbXTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAbmFtZSBjbGF5LnByZVBhc3MuU2hhZG93TWFwLlZTTVxuICogQHR5cGUge251bWJlcn1cbiAqL1xuU2hhZG93TWFwUGFzcy5WU00gPSAxO1xuXG4vKipcbiAqIEBuYW1lIGNsYXkucHJlUGFzcy5TaGFkb3dNYXAuUENGXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5TaGFkb3dNYXBQYXNzLlBDRiA9IDI7XG5cbmV4cG9ydCBkZWZhdWx0IFNoYWRvd01hcFBhc3M7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3ByZVBhc3MvU2hhZG93TWFwLmpzXG4vLyBtb2R1bGUgaWQgPSA5OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///98\n");

/***/ }),
/* 99 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Ray__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Vector2__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Renderable__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\n\n\n\n\n\n\n/**\n * @constructor clay.picking.RayPicking\n * @extends clay.core.Base\n */\nvar RayPicking = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(/** @lends clay.picking.RayPicking# */{\n    /**\n     * Target scene\n     * @type {clay.Scene}\n     */\n    scene: null,\n    /**\n     * Target camera\n     * @type {clay.Camera}\n     */\n    camera: null,\n    /**\n     * Target renderer\n     * @type {clay.Renderer}\n     */\n    renderer: null\n}, function () {\n    this._ray = new __WEBPACK_IMPORTED_MODULE_1__math_Ray__[\"a\" /* default */]();\n    this._ndc = new __WEBPACK_IMPORTED_MODULE_2__math_Vector2__[\"a\" /* default */]();\n},\n/** @lends clay.picking.RayPicking.prototype */\n{\n\n    /**\n     * Pick the nearest intersection object in the scene\n     * @param  {number} x Mouse position x\n     * @param  {number} y Mouse position y\n     * @param  {boolean} [forcePickAll=false] ignore ignorePicking\n     * @return {clay.picking.RayPicking~Intersection}\n     */\n    pick: function (x, y, forcePickAll) {\n        var out = this.pickAll(x, y, [], forcePickAll);\n        return out[0] || null;\n    },\n\n    /**\n     * Pick all intersection objects, wich will be sorted from near to far\n     * @param  {number} x Mouse position x\n     * @param  {number} y Mouse position y\n     * @param  {Array} [output]\n     * @param  {boolean} [forcePickAll=false] ignore ignorePicking\n     * @return {Array.<clay.picking.RayPicking~Intersection>}\n     */\n    pickAll: function (x, y, output, forcePickAll) {\n        this.renderer.screenToNDC(x, y, this._ndc);\n        this.camera.castRay(this._ndc, this._ray);\n\n        output = output || [];\n\n        this._intersectNode(this.scene, output, forcePickAll || false);\n\n        output.sort(this._intersectionCompareFunc);\n\n        return output;\n    },\n\n    _intersectNode: function (node, out, forcePickAll) {\n        if ((node instanceof __WEBPACK_IMPORTED_MODULE_5__Renderable__[\"a\" /* default */]) && node.isRenderable()) {\n            if ((!node.ignorePicking || forcePickAll)\n                && (\n                    // Only triangle mesh support ray picking\n                    (node.mode === __WEBPACK_IMPORTED_MODULE_6__core_glenum__[\"a\" /* default */].TRIANGLES && node.geometry.isUseIndices())\n                    // Or if geometry has it's own pickByRay, pick, implementation\n                    || node.geometry.pickByRay\n                    || node.geometry.pick\n                )\n            ) {\n                this._intersectRenderable(node, out);\n            }\n        }\n        for (var i = 0; i < node._children.length; i++) {\n            this._intersectNode(node._children[i], out, forcePickAll);\n        }\n    },\n\n    _intersectRenderable: (function () {\n\n        var v1 = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]();\n        var v2 = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]();\n        var v3 = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]();\n        var ray = new __WEBPACK_IMPORTED_MODULE_1__math_Ray__[\"a\" /* default */]();\n        var worldInverse = new __WEBPACK_IMPORTED_MODULE_4__math_Matrix4__[\"a\" /* default */]();\n\n        return function (renderable, out) {\n\n            var isSkinnedMesh = renderable.isSkinnedMesh();\n            ray.copy(this._ray);\n            __WEBPACK_IMPORTED_MODULE_4__math_Matrix4__[\"a\" /* default */].invert(worldInverse, renderable.worldTransform);\n\n            // Skinned mesh will ignore the world transform.\n            if (!isSkinnedMesh) {\n                ray.applyTransform(worldInverse);\n            }\n\n            var geometry = renderable.geometry;\n\n            var bbox = isSkinnedMesh ? renderable.skeleton.boundingBox : geometry.boundingBox;\n\n            if (bbox && !ray.intersectBoundingBox(bbox)) {\n                return;\n            }\n            // Use user defined picking algorithm\n            if (geometry.pick) {\n                geometry.pick(\n                    this._ndc.x, this._ndc.y,\n                    this.renderer,\n                    this.camera,\n                    renderable, out\n                );\n                return;\n            }\n            // Use user defined ray picking algorithm\n            else if (geometry.pickByRay) {\n                geometry.pickByRay(ray, renderable, out);\n                return;\n            }\n\n            var cullBack = (renderable.cullFace === __WEBPACK_IMPORTED_MODULE_6__core_glenum__[\"a\" /* default */].BACK && renderable.frontFace === __WEBPACK_IMPORTED_MODULE_6__core_glenum__[\"a\" /* default */].CCW)\n                        || (renderable.cullFace === __WEBPACK_IMPORTED_MODULE_6__core_glenum__[\"a\" /* default */].FRONT && renderable.frontFace === __WEBPACK_IMPORTED_MODULE_6__core_glenum__[\"a\" /* default */].CW);\n\n            var point;\n            var indices = geometry.indices;\n            var positionAttr = geometry.attributes.position;\n            var weightAttr = geometry.attributes.weight;\n            var jointAttr = geometry.attributes.joint;\n            var skinMatricesArray;\n            var skinMatrices = [];\n            // Check if valid.\n            if (!positionAttr || !positionAttr.value || !indices) {\n                return;\n            }\n            if (isSkinnedMesh) {\n                skinMatricesArray = renderable.skeleton.getSubSkinMatrices(renderable.__uid__, renderable.joints);\n                for (var i = 0; i < renderable.joints.length; i++) {\n                    skinMatrices[i] = skinMatrices[i] || [];\n                    for (var k = 0; k < 16; k++) {\n                        skinMatrices[i][k] = skinMatricesArray[i * 16 + k];\n                    }\n                }\n                var pos = [];\n                var weight = [];\n                var joint = [];\n                var skinnedPos = [];\n                var tmp = [];\n                var skinnedPositionAttr = geometry.attributes.skinnedPosition;\n                if (!skinnedPositionAttr || !skinnedPositionAttr.value) {\n                    geometry.createAttribute('skinnedPosition', 'f', 3);\n                    skinnedPositionAttr = geometry.attributes.skinnedPosition;\n                    skinnedPositionAttr.init(geometry.vertexCount);\n                }\n                for (var i = 0; i < geometry.vertexCount; i++) {\n                    positionAttr.get(i, pos);\n                    weightAttr.get(i, weight);\n                    jointAttr.get(i, joint);\n                    weight[3] = 1 - weight[0] - weight[1] - weight[2];\n                    __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__[\"a\" /* default */].set(skinnedPos, 0, 0, 0);\n                    for (var k = 0; k < 4; k++) {\n                        if (joint[k] >= 0 && weight[k] > 1e-4) {\n                            __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__[\"a\" /* default */].transformMat4(tmp, pos, skinMatrices[joint[k]]);\n                            __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(skinnedPos, skinnedPos, tmp, weight[k]);\n                        }\n                    }\n                    skinnedPositionAttr.set(i, skinnedPos);\n                }\n            }\n\n            for (var i = 0; i < indices.length; i += 3) {\n                var i1 = indices[i];\n                var i2 = indices[i + 1];\n                var i3 = indices[i + 2];\n                var finalPosAttr = isSkinnedMesh\n                    ? geometry.attributes.skinnedPosition\n                    : positionAttr;\n                finalPosAttr.get(i1, v1.array);\n                finalPosAttr.get(i2, v2.array);\n                finalPosAttr.get(i3, v3.array);\n\n                if (cullBack) {\n                    point = ray.intersectTriangle(v1, v2, v3, renderable.culling);\n                }\n                else {\n                    point = ray.intersectTriangle(v1, v3, v2, renderable.culling);\n                }\n                if (point) {\n                    var pointW = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]();\n                    if (!isSkinnedMesh) {\n                        __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].transformMat4(pointW, point, renderable.worldTransform);\n                    }\n                    else {\n                        // TODO point maybe not right.\n                        __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].copy(pointW, point);\n                    }\n                    out.push(new RayPicking.Intersection(\n                        point, pointW, renderable, [i1, i2, i3], i / 3,\n                        __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].dist(pointW, this._ray.origin)\n                    ));\n                }\n            }\n        };\n    })(),\n\n    _intersectionCompareFunc: function (a, b) {\n        return a.distance - b.distance;\n    }\n});\n\n/**\n * @constructor clay.picking.RayPicking~Intersection\n * @param {clay.Vector3} point\n * @param {clay.Vector3} pointWorld\n * @param {clay.Node} target\n * @param {Array.<number>} triangle\n * @param {number} triangleIndex\n * @param {number} distance\n */\nRayPicking.Intersection = function (point, pointWorld, target, triangle, triangleIndex, distance) {\n    /**\n     * Intersection point in local transform coordinates\n     * @type {clay.Vector3}\n     */\n    this.point = point;\n    /**\n     * Intersection point in world transform coordinates\n     * @type {clay.Vector3}\n     */\n    this.pointWorld = pointWorld;\n    /**\n     * Intersection scene node\n     * @type {clay.Node}\n     */\n    this.target = target;\n    /**\n     * Intersection triangle, which is an array of vertex index\n     * @type {Array.<number>}\n     */\n    this.triangle = triangle;\n    /**\n     * Index of intersection triangle.\n     */\n    this.triangleIndex = triangleIndex;\n    /**\n     * Distance from intersection point to ray origin\n     * @type {number}\n     */\n    this.distance = distance;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (RayPicking);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9waWNraW5nL1JheVBpY2tpbmcuanM/MTM1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZSBmcm9tICcuLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IFJheSBmcm9tICcuLi9tYXRoL1JheSc7XG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi9tYXRoL1ZlY3RvcjInO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi4vbWF0aC9WZWN0b3IzJztcbmltcG9ydCBNYXRyaXg0IGZyb20gJy4uL21hdGgvTWF0cml4NCc7XG5pbXBvcnQgUmVuZGVyYWJsZSBmcm9tICcuLi9SZW5kZXJhYmxlJztcbmltcG9ydCBnbGVudW0gZnJvbSAnLi4vY29yZS9nbGVudW0nO1xuaW1wb3J0IHZlYzMgZnJvbSAnLi4vZ2xtYXRyaXgvdmVjMyc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkucGlja2luZy5SYXlQaWNraW5nXG4gKiBAZXh0ZW5kcyBjbGF5LmNvcmUuQmFzZVxuICovXG52YXIgUmF5UGlja2luZyA9IEJhc2UuZXh0ZW5kKC8qKiBAbGVuZHMgY2xheS5waWNraW5nLlJheVBpY2tpbmcjICove1xuICAgIC8qKlxuICAgICAqIFRhcmdldCBzY2VuZVxuICAgICAqIEB0eXBlIHtjbGF5LlNjZW5lfVxuICAgICAqL1xuICAgIHNjZW5lOiBudWxsLFxuICAgIC8qKlxuICAgICAqIFRhcmdldCBjYW1lcmFcbiAgICAgKiBAdHlwZSB7Y2xheS5DYW1lcmF9XG4gICAgICovXG4gICAgY2FtZXJhOiBudWxsLFxuICAgIC8qKlxuICAgICAqIFRhcmdldCByZW5kZXJlclxuICAgICAqIEB0eXBlIHtjbGF5LlJlbmRlcmVyfVxuICAgICAqL1xuICAgIHJlbmRlcmVyOiBudWxsXG59LCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fcmF5ID0gbmV3IFJheSgpO1xuICAgIHRoaXMuX25kYyA9IG5ldyBWZWN0b3IyKCk7XG59LFxuLyoqIEBsZW5kcyBjbGF5LnBpY2tpbmcuUmF5UGlja2luZy5wcm90b3R5cGUgKi9cbntcblxuICAgIC8qKlxuICAgICAqIFBpY2sgdGhlIG5lYXJlc3QgaW50ZXJzZWN0aW9uIG9iamVjdCBpbiB0aGUgc2NlbmVcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHggTW91c2UgcG9zaXRpb24geFxuICAgICAqIEBwYXJhbSAge251bWJlcn0geSBNb3VzZSBwb3NpdGlvbiB5XG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gW2ZvcmNlUGlja0FsbD1mYWxzZV0gaWdub3JlIGlnbm9yZVBpY2tpbmdcbiAgICAgKiBAcmV0dXJuIHtjbGF5LnBpY2tpbmcuUmF5UGlja2luZ35JbnRlcnNlY3Rpb259XG4gICAgICovXG4gICAgcGljazogZnVuY3Rpb24gKHgsIHksIGZvcmNlUGlja0FsbCkge1xuICAgICAgICB2YXIgb3V0ID0gdGhpcy5waWNrQWxsKHgsIHksIFtdLCBmb3JjZVBpY2tBbGwpO1xuICAgICAgICByZXR1cm4gb3V0WzBdIHx8IG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBpY2sgYWxsIGludGVyc2VjdGlvbiBvYmplY3RzLCB3aWNoIHdpbGwgYmUgc29ydGVkIGZyb20gbmVhciB0byBmYXJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHggTW91c2UgcG9zaXRpb24geFxuICAgICAqIEBwYXJhbSAge251bWJlcn0geSBNb3VzZSBwb3NpdGlvbiB5XG4gICAgICogQHBhcmFtICB7QXJyYXl9IFtvdXRwdXRdXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gW2ZvcmNlUGlja0FsbD1mYWxzZV0gaWdub3JlIGlnbm9yZVBpY2tpbmdcbiAgICAgKiBAcmV0dXJuIHtBcnJheS48Y2xheS5waWNraW5nLlJheVBpY2tpbmd+SW50ZXJzZWN0aW9uPn1cbiAgICAgKi9cbiAgICBwaWNrQWxsOiBmdW5jdGlvbiAoeCwgeSwgb3V0cHV0LCBmb3JjZVBpY2tBbGwpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zY3JlZW5Ub05EQyh4LCB5LCB0aGlzLl9uZGMpO1xuICAgICAgICB0aGlzLmNhbWVyYS5jYXN0UmF5KHRoaXMuX25kYywgdGhpcy5fcmF5KTtcblxuICAgICAgICBvdXRwdXQgPSBvdXRwdXQgfHwgW107XG5cbiAgICAgICAgdGhpcy5faW50ZXJzZWN0Tm9kZSh0aGlzLnNjZW5lLCBvdXRwdXQsIGZvcmNlUGlja0FsbCB8fCBmYWxzZSk7XG5cbiAgICAgICAgb3V0cHV0LnNvcnQodGhpcy5faW50ZXJzZWN0aW9uQ29tcGFyZUZ1bmMpO1xuXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfSxcblxuICAgIF9pbnRlcnNlY3ROb2RlOiBmdW5jdGlvbiAobm9kZSwgb3V0LCBmb3JjZVBpY2tBbGwpIHtcbiAgICAgICAgaWYgKChub2RlIGluc3RhbmNlb2YgUmVuZGVyYWJsZSkgJiYgbm9kZS5pc1JlbmRlcmFibGUoKSkge1xuICAgICAgICAgICAgaWYgKCghbm9kZS5pZ25vcmVQaWNraW5nIHx8IGZvcmNlUGlja0FsbClcbiAgICAgICAgICAgICAgICAmJiAoXG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgdHJpYW5nbGUgbWVzaCBzdXBwb3J0IHJheSBwaWNraW5nXG4gICAgICAgICAgICAgICAgICAgIChub2RlLm1vZGUgPT09IGdsZW51bS5UUklBTkdMRVMgJiYgbm9kZS5nZW9tZXRyeS5pc1VzZUluZGljZXMoKSlcbiAgICAgICAgICAgICAgICAgICAgLy8gT3IgaWYgZ2VvbWV0cnkgaGFzIGl0J3Mgb3duIHBpY2tCeVJheSwgcGljaywgaW1wbGVtZW50YXRpb25cbiAgICAgICAgICAgICAgICAgICAgfHwgbm9kZS5nZW9tZXRyeS5waWNrQnlSYXlcbiAgICAgICAgICAgICAgICAgICAgfHwgbm9kZS5nZW9tZXRyeS5waWNrXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW50ZXJzZWN0UmVuZGVyYWJsZShub2RlLCBvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZS5fY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuX2ludGVyc2VjdE5vZGUobm9kZS5fY2hpbGRyZW5baV0sIG91dCwgZm9yY2VQaWNrQWxsKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfaW50ZXJzZWN0UmVuZGVyYWJsZTogKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgdjEgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB2YXIgdjIgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB2YXIgdjMgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB2YXIgcmF5ID0gbmV3IFJheSgpO1xuICAgICAgICB2YXIgd29ybGRJbnZlcnNlID0gbmV3IE1hdHJpeDQoKTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHJlbmRlcmFibGUsIG91dCkge1xuXG4gICAgICAgICAgICB2YXIgaXNTa2lubmVkTWVzaCA9IHJlbmRlcmFibGUuaXNTa2lubmVkTWVzaCgpO1xuICAgICAgICAgICAgcmF5LmNvcHkodGhpcy5fcmF5KTtcbiAgICAgICAgICAgIE1hdHJpeDQuaW52ZXJ0KHdvcmxkSW52ZXJzZSwgcmVuZGVyYWJsZS53b3JsZFRyYW5zZm9ybSk7XG5cbiAgICAgICAgICAgIC8vIFNraW5uZWQgbWVzaCB3aWxsIGlnbm9yZSB0aGUgd29ybGQgdHJhbnNmb3JtLlxuICAgICAgICAgICAgaWYgKCFpc1NraW5uZWRNZXNoKSB7XG4gICAgICAgICAgICAgICAgcmF5LmFwcGx5VHJhbnNmb3JtKHdvcmxkSW52ZXJzZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IHJlbmRlcmFibGUuZ2VvbWV0cnk7XG5cbiAgICAgICAgICAgIHZhciBiYm94ID0gaXNTa2lubmVkTWVzaCA/IHJlbmRlcmFibGUuc2tlbGV0b24uYm91bmRpbmdCb3ggOiBnZW9tZXRyeS5ib3VuZGluZ0JveDtcblxuICAgICAgICAgICAgaWYgKGJib3ggJiYgIXJheS5pbnRlcnNlY3RCb3VuZGluZ0JveChiYm94KSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFVzZSB1c2VyIGRlZmluZWQgcGlja2luZyBhbGdvcml0aG1cbiAgICAgICAgICAgIGlmIChnZW9tZXRyeS5waWNrKSB7XG4gICAgICAgICAgICAgICAgZ2VvbWV0cnkucGljayhcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbmRjLngsIHRoaXMuX25kYy55LFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYSxcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyYWJsZSwgb3V0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBVc2UgdXNlciBkZWZpbmVkIHJheSBwaWNraW5nIGFsZ29yaXRobVxuICAgICAgICAgICAgZWxzZSBpZiAoZ2VvbWV0cnkucGlja0J5UmF5KSB7XG4gICAgICAgICAgICAgICAgZ2VvbWV0cnkucGlja0J5UmF5KHJheSwgcmVuZGVyYWJsZSwgb3V0KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjdWxsQmFjayA9IChyZW5kZXJhYmxlLmN1bGxGYWNlID09PSBnbGVudW0uQkFDSyAmJiByZW5kZXJhYmxlLmZyb250RmFjZSA9PT0gZ2xlbnVtLkNDVylcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IChyZW5kZXJhYmxlLmN1bGxGYWNlID09PSBnbGVudW0uRlJPTlQgJiYgcmVuZGVyYWJsZS5mcm9udEZhY2UgPT09IGdsZW51bS5DVyk7XG5cbiAgICAgICAgICAgIHZhciBwb2ludDtcbiAgICAgICAgICAgIHZhciBpbmRpY2VzID0gZ2VvbWV0cnkuaW5kaWNlcztcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbkF0dHIgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uO1xuICAgICAgICAgICAgdmFyIHdlaWdodEF0dHIgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLndlaWdodDtcbiAgICAgICAgICAgIHZhciBqb2ludEF0dHIgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLmpvaW50O1xuICAgICAgICAgICAgdmFyIHNraW5NYXRyaWNlc0FycmF5O1xuICAgICAgICAgICAgdmFyIHNraW5NYXRyaWNlcyA9IFtdO1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdmFsaWQuXG4gICAgICAgICAgICBpZiAoIXBvc2l0aW9uQXR0ciB8fCAhcG9zaXRpb25BdHRyLnZhbHVlIHx8ICFpbmRpY2VzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzU2tpbm5lZE1lc2gpIHtcbiAgICAgICAgICAgICAgICBza2luTWF0cmljZXNBcnJheSA9IHJlbmRlcmFibGUuc2tlbGV0b24uZ2V0U3ViU2tpbk1hdHJpY2VzKHJlbmRlcmFibGUuX191aWRfXywgcmVuZGVyYWJsZS5qb2ludHMpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVuZGVyYWJsZS5qb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgc2tpbk1hdHJpY2VzW2ldID0gc2tpbk1hdHJpY2VzW2ldIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IDE2OyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraW5NYXRyaWNlc1tpXVtrXSA9IHNraW5NYXRyaWNlc0FycmF5W2kgKiAxNiArIGtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwb3MgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgd2VpZ2h0ID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGpvaW50ID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHNraW5uZWRQb3MgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgdG1wID0gW107XG4gICAgICAgICAgICAgICAgdmFyIHNraW5uZWRQb3NpdGlvbkF0dHIgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLnNraW5uZWRQb3NpdGlvbjtcbiAgICAgICAgICAgICAgICBpZiAoIXNraW5uZWRQb3NpdGlvbkF0dHIgfHwgIXNraW5uZWRQb3NpdGlvbkF0dHIudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuY3JlYXRlQXR0cmlidXRlKCdza2lubmVkUG9zaXRpb24nLCAnZicsIDMpO1xuICAgICAgICAgICAgICAgICAgICBza2lubmVkUG9zaXRpb25BdHRyID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5za2lubmVkUG9zaXRpb247XG4gICAgICAgICAgICAgICAgICAgIHNraW5uZWRQb3NpdGlvbkF0dHIuaW5pdChnZW9tZXRyeS52ZXJ0ZXhDb3VudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2VvbWV0cnkudmVydGV4Q291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbkF0dHIuZ2V0KGksIHBvcyk7XG4gICAgICAgICAgICAgICAgICAgIHdlaWdodEF0dHIuZ2V0KGksIHdlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGpvaW50QXR0ci5nZXQoaSwgam9pbnQpO1xuICAgICAgICAgICAgICAgICAgICB3ZWlnaHRbM10gPSAxIC0gd2VpZ2h0WzBdIC0gd2VpZ2h0WzFdIC0gd2VpZ2h0WzJdO1xuICAgICAgICAgICAgICAgICAgICB2ZWMzLnNldChza2lubmVkUG9zLCAwLCAwLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCA0OyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqb2ludFtrXSA+PSAwICYmIHdlaWdodFtrXSA+IDFlLTQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWMzLnRyYW5zZm9ybU1hdDQodG1wLCBwb3MsIHNraW5NYXRyaWNlc1tqb2ludFtrXV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQoc2tpbm5lZFBvcywgc2tpbm5lZFBvcywgdG1wLCB3ZWlnaHRba10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNraW5uZWRQb3NpdGlvbkF0dHIuc2V0KGksIHNraW5uZWRQb3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRpY2VzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkxID0gaW5kaWNlc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgaTIgPSBpbmRpY2VzW2kgKyAxXTtcbiAgICAgICAgICAgICAgICB2YXIgaTMgPSBpbmRpY2VzW2kgKyAyXTtcbiAgICAgICAgICAgICAgICB2YXIgZmluYWxQb3NBdHRyID0gaXNTa2lubmVkTWVzaFxuICAgICAgICAgICAgICAgICAgICA/IGdlb21ldHJ5LmF0dHJpYnV0ZXMuc2tpbm5lZFBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIDogcG9zaXRpb25BdHRyO1xuICAgICAgICAgICAgICAgIGZpbmFsUG9zQXR0ci5nZXQoaTEsIHYxLmFycmF5KTtcbiAgICAgICAgICAgICAgICBmaW5hbFBvc0F0dHIuZ2V0KGkyLCB2Mi5hcnJheSk7XG4gICAgICAgICAgICAgICAgZmluYWxQb3NBdHRyLmdldChpMywgdjMuYXJyYXkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1bGxCYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50ID0gcmF5LmludGVyc2VjdFRyaWFuZ2xlKHYxLCB2MiwgdjMsIHJlbmRlcmFibGUuY3VsbGluZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwb2ludCA9IHJheS5pbnRlcnNlY3RUcmlhbmdsZSh2MSwgdjMsIHYyLCByZW5kZXJhYmxlLmN1bGxpbmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50VyA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNTa2lubmVkTWVzaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy50cmFuc2Zvcm1NYXQ0KHBvaW50VywgcG9pbnQsIHJlbmRlcmFibGUud29ybGRUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyBwb2ludCBtYXliZSBub3QgcmlnaHQuXG4gICAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLmNvcHkocG9pbnRXLCBwb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb3V0LnB1c2gobmV3IFJheVBpY2tpbmcuSW50ZXJzZWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQsIHBvaW50VywgcmVuZGVyYWJsZSwgW2kxLCBpMiwgaTNdLCBpIC8gMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMuZGlzdChwb2ludFcsIHRoaXMuX3JheS5vcmlnaW4pXG4gICAgICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KSgpLFxuXG4gICAgX2ludGVyc2VjdGlvbkNvbXBhcmVGdW5jOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gYS5kaXN0YW5jZSAtIGIuZGlzdGFuY2U7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkucGlja2luZy5SYXlQaWNraW5nfkludGVyc2VjdGlvblxuICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IHBvaW50XG4gKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gcG9pbnRXb3JsZFxuICogQHBhcmFtIHtjbGF5Lk5vZGV9IHRhcmdldFxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPn0gdHJpYW5nbGVcbiAqIEBwYXJhbSB7bnVtYmVyfSB0cmlhbmdsZUluZGV4XG4gKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2VcbiAqL1xuUmF5UGlja2luZy5JbnRlcnNlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnQsIHBvaW50V29ybGQsIHRhcmdldCwgdHJpYW5nbGUsIHRyaWFuZ2xlSW5kZXgsIGRpc3RhbmNlKSB7XG4gICAgLyoqXG4gICAgICogSW50ZXJzZWN0aW9uIHBvaW50IGluIGxvY2FsIHRyYW5zZm9ybSBjb29yZGluYXRlc1xuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgdGhpcy5wb2ludCA9IHBvaW50O1xuICAgIC8qKlxuICAgICAqIEludGVyc2VjdGlvbiBwb2ludCBpbiB3b3JsZCB0cmFuc2Zvcm0gY29vcmRpbmF0ZXNcbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIHRoaXMucG9pbnRXb3JsZCA9IHBvaW50V29ybGQ7XG4gICAgLyoqXG4gICAgICogSW50ZXJzZWN0aW9uIHNjZW5lIG5vZGVcbiAgICAgKiBAdHlwZSB7Y2xheS5Ob2RlfVxuICAgICAqL1xuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgIC8qKlxuICAgICAqIEludGVyc2VjdGlvbiB0cmlhbmdsZSwgd2hpY2ggaXMgYW4gYXJyYXkgb2YgdmVydGV4IGluZGV4XG4gICAgICogQHR5cGUge0FycmF5LjxudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMudHJpYW5nbGUgPSB0cmlhbmdsZTtcbiAgICAvKipcbiAgICAgKiBJbmRleCBvZiBpbnRlcnNlY3Rpb24gdHJpYW5nbGUuXG4gICAgICovXG4gICAgdGhpcy50cmlhbmdsZUluZGV4ID0gdHJpYW5nbGVJbmRleDtcbiAgICAvKipcbiAgICAgKiBEaXN0YW5jZSBmcm9tIGludGVyc2VjdGlvbiBwb2ludCB0byByYXkgb3JpZ2luXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBSYXlQaWNraW5nO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9waWNraW5nL1JheVBpY2tpbmcuanNcbi8vIG1vZHVsZSBpZCA9IDk5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///99\n");

/***/ }),
/* 100 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__FrameBuffer__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__compositor_Pass__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__plugin_Skybox__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__plugin_Skydome__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__prePass_EnvironmentMap__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__Scene__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__shader_projectEnvMap_glsl_js__ = __webpack_require__(141);\n// Spherical Harmonic Helpers\n\n\n\n\n\n\n\n\n\n\nvar sh = {};\n\n\n\nvar targets = ['px', 'nx', 'py', 'ny', 'pz', 'nz'];\n\n// Project on gpu, but needs browser to support readPixels as Float32Array.\nfunction projectEnvironmentMapGPU(renderer, envMap) {\n    var shTexture = new __WEBPACK_IMPORTED_MODULE_2__Texture2D__[\"a\" /* default */]({\n        width: 9,\n        height: 1,\n        type: __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].FLOAT\n    });\n    var pass = new __WEBPACK_IMPORTED_MODULE_3__compositor_Pass__[\"a\" /* default */]({\n        fragment: __WEBPACK_IMPORTED_MODULE_10__shader_projectEnvMap_glsl_js__[\"a\" /* default */]\n    });\n    pass.material.define('fragment', 'TEXTURE_SIZE', envMap.width);\n    pass.setUniform('environmentMap', envMap);\n\n    var framebuffer = new __WEBPACK_IMPORTED_MODULE_1__FrameBuffer__[\"a\" /* default */]();\n    framebuffer.attach(shTexture);\n    pass.render(renderer, framebuffer);\n\n    framebuffer.bind(renderer);\n    // TODO Only chrome and firefox support Float32Array\n    var pixels = new __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].Float32Array(9 * 4);\n    renderer.gl.readPixels(0, 0, 9, 1, __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].RGBA, __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].FLOAT, pixels);\n\n    var coeff = new __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].Float32Array(9 * 3);\n    for (var i = 0; i < 9; i++) {\n        coeff[i * 3] = pixels[i * 4];\n        coeff[i * 3 + 1] = pixels[i * 4 + 1];\n        coeff[i * 3 + 2] = pixels[i * 4 + 2];\n    }\n    framebuffer.unbind(renderer);\n\n    framebuffer.dispose(renderer);\n    pass.dispose(renderer);\n    return coeff;\n}\n\nfunction harmonics(normal, index){\n    var x = normal[0];\n    var y = normal[1];\n    var z = normal[2];\n\n    if (index === 0) {\n        return 1.0;\n    }\n    else if (index === 1) {\n        return x;\n    }\n    else if (index === 2) {\n        return y;\n    }\n    else if (index === 3) {\n        return z;\n    }\n    else if (index === 4) {\n        return x * z;\n    }\n    else if (index === 5) {\n        return y * z;\n    }\n    else if (index === 6) {\n        return x * y;\n    }\n    else if (index === 7) {\n        return 3.0 * z * z - 1.0;\n    }\n    else {\n        return x * x - y * y;\n    }\n}\n\nvar normalTransform = {\n    px: [2, 1, 0, -1, -1, 1],\n    nx: [2, 1, 0, 1, -1, -1],\n    py: [0, 2, 1, 1, -1, -1],\n    ny: [0, 2, 1, 1, 1, 1],\n    pz: [0, 1, 2, -1, -1, -1],\n    nz: [0, 1, 2, 1, -1, 1]\n};\n\n// Project on cpu.\nfunction projectEnvironmentMapCPU(renderer, cubePixels, width, height) {\n    var coeff = new __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].Float32Array(9 * 3);\n    var normal = __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].create();\n    var texel = __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].create();\n    var fetchNormal = __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].create();\n    for (var m = 0; m < 9; m++) {\n        var result = __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].create();\n        for (var k = 0; k < targets.length; k++) {\n            var pixels = cubePixels[targets[k]];\n\n            var sideResult = __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].create();\n            var divider = 0;\n            var i = 0;\n            var transform = normalTransform[targets[k]];\n            for (var y = 0; y < height; y++) {\n                for (var x = 0; x < width; x++) {\n\n                    normal[0] = x / (width - 1.0) * 2.0 - 1.0;\n                    // TODO Flip y?\n                    normal[1] = y / (height - 1.0) * 2.0 - 1.0;\n                    normal[2] = -1.0;\n                    __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].normalize(normal, normal);\n\n                    fetchNormal[0] = normal[transform[0]] * transform[3];\n                    fetchNormal[1] = normal[transform[1]] * transform[4];\n                    fetchNormal[2] = normal[transform[2]] * transform[5];\n\n                    texel[0] = pixels[i++] / 255;\n                    texel[1] = pixels[i++] / 255;\n                    texel[2] = pixels[i++] / 255;\n                    // RGBM Decode\n                    var scale = pixels[i++] / 255 * 8.12;\n                    texel[0] *= scale;\n                    texel[1] *= scale;\n                    texel[2] *= scale;\n\n                    __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(sideResult, sideResult, texel, harmonics(fetchNormal, m) * -normal[2]);\n                    // -normal.z equals cos(theta) of Lambertian\n                    divider += -normal[2];\n                }\n            }\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(result, result, sideResult, 1 / divider);\n        }\n\n        coeff[m * 3] = result[0] / 6.0;\n        coeff[m * 3 + 1] = result[1] / 6.0;\n        coeff[m * 3 + 2] = result[2] / 6.0;\n    }\n    return coeff;\n}\n\n/**\n * @param  {clay.Renderer} renderer\n * @param  {clay.Texture} envMap\n * @param  {Object} [textureOpts]\n * @param  {Object} [textureOpts.lod]\n * @param  {boolean} [textureOpts.decodeRGBM]\n */\nsh.projectEnvironmentMap = function (renderer, envMap, opts) {\n\n    // TODO sRGB\n\n    opts = opts || {};\n    opts.lod = opts.lod || 0;\n\n    var skybox;\n    var dummyScene = new __WEBPACK_IMPORTED_MODULE_8__Scene__[\"a\" /* default */]();\n    var size = 64;\n    if (envMap.textureType === 'texture2D') {\n        skybox = new __WEBPACK_IMPORTED_MODULE_6__plugin_Skydome__[\"a\" /* default */]({\n            scene: dummyScene,\n            environmentMap: envMap\n        });\n    }\n    else {\n        size = (envMap.image && envMap.image.px) ? envMap.image.px.width : envMap.width;\n        skybox = new __WEBPACK_IMPORTED_MODULE_5__plugin_Skybox__[\"a\" /* default */]({\n            scene: dummyScene,\n            environmentMap: envMap\n        });\n    }\n    // Convert to rgbm\n    var width = Math.ceil(size / Math.pow(2, opts.lod));\n    var height = Math.ceil(size / Math.pow(2, opts.lod));\n    var rgbmTexture = new __WEBPACK_IMPORTED_MODULE_2__Texture2D__[\"a\" /* default */]({\n        width: width,\n        height: height\n    });\n    var framebuffer = new __WEBPACK_IMPORTED_MODULE_1__FrameBuffer__[\"a\" /* default */]();\n    skybox.material.define('fragment', 'RGBM_ENCODE');\n    if (opts.decodeRGBM) {\n        skybox.material.define('fragment', 'RGBM_DECODE');\n    }\n    skybox.material.set('lod', opts.lod);\n    var envMapPass = new __WEBPACK_IMPORTED_MODULE_7__prePass_EnvironmentMap__[\"a\" /* default */]({\n        texture: rgbmTexture\n    });\n    var cubePixels = {};\n    for (var i = 0; i < targets.length; i++) {\n        cubePixels[targets[i]] = new Uint8Array(width * height * 4);\n        var camera = envMapPass.getCamera(targets[i]);\n        camera.fov = 90;\n        framebuffer.attach(rgbmTexture);\n        framebuffer.bind(renderer);\n        renderer.render(dummyScene, camera);\n        renderer.gl.readPixels(\n            0, 0, width, height,\n            __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].RGBA, __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].UNSIGNED_BYTE, cubePixels[targets[i]]\n        );\n        framebuffer.unbind(renderer);\n    }\n\n    skybox.dispose(renderer);\n    framebuffer.dispose(renderer);\n    rgbmTexture.dispose(renderer);\n\n    return projectEnvironmentMapCPU(renderer, cubePixels, width, height);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (sh);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvdXRpbC9zaC5qcz84ZGZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNwaGVyaWNhbCBIYXJtb25pYyBIZWxwZXJzXG5pbXBvcnQgVGV4dHVyZSBmcm9tICcuLi9UZXh0dXJlJztcbmltcG9ydCBGcmFtZUJ1ZmZlciBmcm9tICcuLi9GcmFtZUJ1ZmZlcic7XG5pbXBvcnQgVGV4dHVyZTJEIGZyb20gJy4uL1RleHR1cmUyRCc7XG5pbXBvcnQgUGFzcyBmcm9tICcuLi9jb21wb3NpdG9yL1Bhc3MnO1xuaW1wb3J0IHZlbmRvciBmcm9tICcuLi9jb3JlL3ZlbmRvcic7XG5pbXBvcnQgU2t5Ym94IGZyb20gJy4uL3BsdWdpbi9Ta3lib3gnO1xuaW1wb3J0IFNreWRvbWUgZnJvbSAnLi4vcGx1Z2luL1NreWRvbWUnO1xuaW1wb3J0IEVudmlyb25tZW50TWFwUGFzcyBmcm9tICcuLi9wcmVQYXNzL0Vudmlyb25tZW50TWFwJztcbmltcG9ydCBTY2VuZSBmcm9tICcuLi9TY2VuZSc7XG5pbXBvcnQgdmVjMyBmcm9tICcuLi9nbG1hdHJpeC92ZWMzJztcbnZhciBzaCA9IHt9O1xuXG5pbXBvcnQgcHJvamVjdEVudk1hcFNoYWRlckNvZGUgZnJvbSAnLi9zaGFkZXIvcHJvamVjdEVudk1hcC5nbHNsLmpzJztcblxudmFyIHRhcmdldHMgPSBbJ3B4JywgJ254JywgJ3B5JywgJ255JywgJ3B6JywgJ256J107XG5cbi8vIFByb2plY3Qgb24gZ3B1LCBidXQgbmVlZHMgYnJvd3NlciB0byBzdXBwb3J0IHJlYWRQaXhlbHMgYXMgRmxvYXQzMkFycmF5LlxuZnVuY3Rpb24gcHJvamVjdEVudmlyb25tZW50TWFwR1BVKHJlbmRlcmVyLCBlbnZNYXApIHtcbiAgICB2YXIgc2hUZXh0dXJlID0gbmV3IFRleHR1cmUyRCh7XG4gICAgICAgIHdpZHRoOiA5LFxuICAgICAgICBoZWlnaHQ6IDEsXG4gICAgICAgIHR5cGU6IFRleHR1cmUuRkxPQVRcbiAgICB9KTtcbiAgICB2YXIgcGFzcyA9IG5ldyBQYXNzKHtcbiAgICAgICAgZnJhZ21lbnQ6IHByb2plY3RFbnZNYXBTaGFkZXJDb2RlXG4gICAgfSk7XG4gICAgcGFzcy5tYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ1RFWFRVUkVfU0laRScsIGVudk1hcC53aWR0aCk7XG4gICAgcGFzcy5zZXRVbmlmb3JtKCdlbnZpcm9ubWVudE1hcCcsIGVudk1hcCk7XG5cbiAgICB2YXIgZnJhbWVidWZmZXIgPSBuZXcgRnJhbWVCdWZmZXIoKTtcbiAgICBmcmFtZWJ1ZmZlci5hdHRhY2goc2hUZXh0dXJlKTtcbiAgICBwYXNzLnJlbmRlcihyZW5kZXJlciwgZnJhbWVidWZmZXIpO1xuXG4gICAgZnJhbWVidWZmZXIuYmluZChyZW5kZXJlcik7XG4gICAgLy8gVE9ETyBPbmx5IGNocm9tZSBhbmQgZmlyZWZveCBzdXBwb3J0IEZsb2F0MzJBcnJheVxuICAgIHZhciBwaXhlbHMgPSBuZXcgdmVuZG9yLkZsb2F0MzJBcnJheSg5ICogNCk7XG4gICAgcmVuZGVyZXIuZ2wucmVhZFBpeGVscygwLCAwLCA5LCAxLCBUZXh0dXJlLlJHQkEsIFRleHR1cmUuRkxPQVQsIHBpeGVscyk7XG5cbiAgICB2YXIgY29lZmYgPSBuZXcgdmVuZG9yLkZsb2F0MzJBcnJheSg5ICogMyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA5OyBpKyspIHtcbiAgICAgICAgY29lZmZbaSAqIDNdID0gcGl4ZWxzW2kgKiA0XTtcbiAgICAgICAgY29lZmZbaSAqIDMgKyAxXSA9IHBpeGVsc1tpICogNCArIDFdO1xuICAgICAgICBjb2VmZltpICogMyArIDJdID0gcGl4ZWxzW2kgKiA0ICsgMl07XG4gICAgfVxuICAgIGZyYW1lYnVmZmVyLnVuYmluZChyZW5kZXJlcik7XG5cbiAgICBmcmFtZWJ1ZmZlci5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICBwYXNzLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgIHJldHVybiBjb2VmZjtcbn1cblxuZnVuY3Rpb24gaGFybW9uaWNzKG5vcm1hbCwgaW5kZXgpe1xuICAgIHZhciB4ID0gbm9ybWFsWzBdO1xuICAgIHZhciB5ID0gbm9ybWFsWzFdO1xuICAgIHZhciB6ID0gbm9ybWFsWzJdO1xuXG4gICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgIHJldHVybiAxLjA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGluZGV4ID09PSAxKSB7XG4gICAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgICBlbHNlIGlmIChpbmRleCA9PT0gMikge1xuICAgICAgICByZXR1cm4geTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaW5kZXggPT09IDMpIHtcbiAgICAgICAgcmV0dXJuIHo7XG4gICAgfVxuICAgIGVsc2UgaWYgKGluZGV4ID09PSA0KSB7XG4gICAgICAgIHJldHVybiB4ICogejtcbiAgICB9XG4gICAgZWxzZSBpZiAoaW5kZXggPT09IDUpIHtcbiAgICAgICAgcmV0dXJuIHkgKiB6O1xuICAgIH1cbiAgICBlbHNlIGlmIChpbmRleCA9PT0gNikge1xuICAgICAgICByZXR1cm4geCAqIHk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGluZGV4ID09PSA3KSB7XG4gICAgICAgIHJldHVybiAzLjAgKiB6ICogeiAtIDEuMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB4ICogeCAtIHkgKiB5O1xuICAgIH1cbn1cblxudmFyIG5vcm1hbFRyYW5zZm9ybSA9IHtcbiAgICBweDogWzIsIDEsIDAsIC0xLCAtMSwgMV0sXG4gICAgbng6IFsyLCAxLCAwLCAxLCAtMSwgLTFdLFxuICAgIHB5OiBbMCwgMiwgMSwgMSwgLTEsIC0xXSxcbiAgICBueTogWzAsIDIsIDEsIDEsIDEsIDFdLFxuICAgIHB6OiBbMCwgMSwgMiwgLTEsIC0xLCAtMV0sXG4gICAgbno6IFswLCAxLCAyLCAxLCAtMSwgMV1cbn07XG5cbi8vIFByb2plY3Qgb24gY3B1LlxuZnVuY3Rpb24gcHJvamVjdEVudmlyb25tZW50TWFwQ1BVKHJlbmRlcmVyLCBjdWJlUGl4ZWxzLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgdmFyIGNvZWZmID0gbmV3IHZlbmRvci5GbG9hdDMyQXJyYXkoOSAqIDMpO1xuICAgIHZhciBub3JtYWwgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgIHZhciB0ZXhlbCA9IHZlYzMuY3JlYXRlKCk7XG4gICAgdmFyIGZldGNoTm9ybWFsID0gdmVjMy5jcmVhdGUoKTtcbiAgICBmb3IgKHZhciBtID0gMDsgbSA8IDk7IG0rKykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0YXJnZXRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICB2YXIgcGl4ZWxzID0gY3ViZVBpeGVsc1t0YXJnZXRzW2tdXTtcblxuICAgICAgICAgICAgdmFyIHNpZGVSZXN1bHQgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICAgICAgdmFyIGRpdmlkZXIgPSAwO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybSA9IG5vcm1hbFRyYW5zZm9ybVt0YXJnZXRzW2tdXTtcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcblxuICAgICAgICAgICAgICAgICAgICBub3JtYWxbMF0gPSB4IC8gKHdpZHRoIC0gMS4wKSAqIDIuMCAtIDEuMDtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyBGbGlwIHk/XG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbFsxXSA9IHkgLyAoaGVpZ2h0IC0gMS4wKSAqIDIuMCAtIDEuMDtcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsWzJdID0gLTEuMDtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUobm9ybWFsLCBub3JtYWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZldGNoTm9ybWFsWzBdID0gbm9ybWFsW3RyYW5zZm9ybVswXV0gKiB0cmFuc2Zvcm1bM107XG4gICAgICAgICAgICAgICAgICAgIGZldGNoTm9ybWFsWzFdID0gbm9ybWFsW3RyYW5zZm9ybVsxXV0gKiB0cmFuc2Zvcm1bNF07XG4gICAgICAgICAgICAgICAgICAgIGZldGNoTm9ybWFsWzJdID0gbm9ybWFsW3RyYW5zZm9ybVsyXV0gKiB0cmFuc2Zvcm1bNV07XG5cbiAgICAgICAgICAgICAgICAgICAgdGV4ZWxbMF0gPSBwaXhlbHNbaSsrXSAvIDI1NTtcbiAgICAgICAgICAgICAgICAgICAgdGV4ZWxbMV0gPSBwaXhlbHNbaSsrXSAvIDI1NTtcbiAgICAgICAgICAgICAgICAgICAgdGV4ZWxbMl0gPSBwaXhlbHNbaSsrXSAvIDI1NTtcbiAgICAgICAgICAgICAgICAgICAgLy8gUkdCTSBEZWNvZGVcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gcGl4ZWxzW2krK10gLyAyNTUgKiA4LjEyO1xuICAgICAgICAgICAgICAgICAgICB0ZXhlbFswXSAqPSBzY2FsZTtcbiAgICAgICAgICAgICAgICAgICAgdGV4ZWxbMV0gKj0gc2NhbGU7XG4gICAgICAgICAgICAgICAgICAgIHRleGVsWzJdICo9IHNjYWxlO1xuXG4gICAgICAgICAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQoc2lkZVJlc3VsdCwgc2lkZVJlc3VsdCwgdGV4ZWwsIGhhcm1vbmljcyhmZXRjaE5vcm1hbCwgbSkgKiAtbm9ybWFsWzJdKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gLW5vcm1hbC56IGVxdWFscyBjb3ModGhldGEpIG9mIExhbWJlcnRpYW5cbiAgICAgICAgICAgICAgICAgICAgZGl2aWRlciArPSAtbm9ybWFsWzJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQocmVzdWx0LCByZXN1bHQsIHNpZGVSZXN1bHQsIDEgLyBkaXZpZGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvZWZmW20gKiAzXSA9IHJlc3VsdFswXSAvIDYuMDtcbiAgICAgICAgY29lZmZbbSAqIDMgKyAxXSA9IHJlc3VsdFsxXSAvIDYuMDtcbiAgICAgICAgY29lZmZbbSAqIDMgKyAyXSA9IHJlc3VsdFsyXSAvIDYuMDtcbiAgICB9XG4gICAgcmV0dXJuIGNvZWZmO1xufVxuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gKiBAcGFyYW0gIHtjbGF5LlRleHR1cmV9IGVudk1hcFxuICogQHBhcmFtICB7T2JqZWN0fSBbdGV4dHVyZU9wdHNdXG4gKiBAcGFyYW0gIHtPYmplY3R9IFt0ZXh0dXJlT3B0cy5sb2RdXG4gKiBAcGFyYW0gIHtib29sZWFufSBbdGV4dHVyZU9wdHMuZGVjb2RlUkdCTV1cbiAqL1xuc2gucHJvamVjdEVudmlyb25tZW50TWFwID0gZnVuY3Rpb24gKHJlbmRlcmVyLCBlbnZNYXAsIG9wdHMpIHtcblxuICAgIC8vIFRPRE8gc1JHQlxuXG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgb3B0cy5sb2QgPSBvcHRzLmxvZCB8fCAwO1xuXG4gICAgdmFyIHNreWJveDtcbiAgICB2YXIgZHVtbXlTY2VuZSA9IG5ldyBTY2VuZSgpO1xuICAgIHZhciBzaXplID0gNjQ7XG4gICAgaWYgKGVudk1hcC50ZXh0dXJlVHlwZSA9PT0gJ3RleHR1cmUyRCcpIHtcbiAgICAgICAgc2t5Ym94ID0gbmV3IFNreWRvbWUoe1xuICAgICAgICAgICAgc2NlbmU6IGR1bW15U2NlbmUsXG4gICAgICAgICAgICBlbnZpcm9ubWVudE1hcDogZW52TWFwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2l6ZSA9IChlbnZNYXAuaW1hZ2UgJiYgZW52TWFwLmltYWdlLnB4KSA/IGVudk1hcC5pbWFnZS5weC53aWR0aCA6IGVudk1hcC53aWR0aDtcbiAgICAgICAgc2t5Ym94ID0gbmV3IFNreWJveCh7XG4gICAgICAgICAgICBzY2VuZTogZHVtbXlTY2VuZSxcbiAgICAgICAgICAgIGVudmlyb25tZW50TWFwOiBlbnZNYXBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIENvbnZlcnQgdG8gcmdibVxuICAgIHZhciB3aWR0aCA9IE1hdGguY2VpbChzaXplIC8gTWF0aC5wb3coMiwgb3B0cy5sb2QpKTtcbiAgICB2YXIgaGVpZ2h0ID0gTWF0aC5jZWlsKHNpemUgLyBNYXRoLnBvdygyLCBvcHRzLmxvZCkpO1xuICAgIHZhciByZ2JtVGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgfSk7XG4gICAgdmFyIGZyYW1lYnVmZmVyID0gbmV3IEZyYW1lQnVmZmVyKCk7XG4gICAgc2t5Ym94Lm1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnUkdCTV9FTkNPREUnKTtcbiAgICBpZiAob3B0cy5kZWNvZGVSR0JNKSB7XG4gICAgICAgIHNreWJveC5tYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ1JHQk1fREVDT0RFJyk7XG4gICAgfVxuICAgIHNreWJveC5tYXRlcmlhbC5zZXQoJ2xvZCcsIG9wdHMubG9kKTtcbiAgICB2YXIgZW52TWFwUGFzcyA9IG5ldyBFbnZpcm9ubWVudE1hcFBhc3Moe1xuICAgICAgICB0ZXh0dXJlOiByZ2JtVGV4dHVyZVxuICAgIH0pO1xuICAgIHZhciBjdWJlUGl4ZWxzID0ge307XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGN1YmVQaXhlbHNbdGFyZ2V0c1tpXV0gPSBuZXcgVWludDhBcnJheSh3aWR0aCAqIGhlaWdodCAqIDQpO1xuICAgICAgICB2YXIgY2FtZXJhID0gZW52TWFwUGFzcy5nZXRDYW1lcmEodGFyZ2V0c1tpXSk7XG4gICAgICAgIGNhbWVyYS5mb3YgPSA5MDtcbiAgICAgICAgZnJhbWVidWZmZXIuYXR0YWNoKHJnYm1UZXh0dXJlKTtcbiAgICAgICAgZnJhbWVidWZmZXIuYmluZChyZW5kZXJlcik7XG4gICAgICAgIHJlbmRlcmVyLnJlbmRlcihkdW1teVNjZW5lLCBjYW1lcmEpO1xuICAgICAgICByZW5kZXJlci5nbC5yZWFkUGl4ZWxzKFxuICAgICAgICAgICAgMCwgMCwgd2lkdGgsIGhlaWdodCxcbiAgICAgICAgICAgIFRleHR1cmUuUkdCQSwgVGV4dHVyZS5VTlNJR05FRF9CWVRFLCBjdWJlUGl4ZWxzW3RhcmdldHNbaV1dXG4gICAgICAgICk7XG4gICAgICAgIGZyYW1lYnVmZmVyLnVuYmluZChyZW5kZXJlcik7XG4gICAgfVxuXG4gICAgc2t5Ym94LmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgIGZyYW1lYnVmZmVyLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgIHJnYm1UZXh0dXJlLmRpc3Bvc2UocmVuZGVyZXIpO1xuXG4gICAgcmV0dXJuIHByb2plY3RFbnZpcm9ubWVudE1hcENQVShyZW5kZXJlciwgY3ViZVBpeGVscywgd2lkdGgsIGhlaWdodCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBzaDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvdXRpbC9zaC5qc1xuLy8gbW9kdWxlIGlkID0gMTAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///100\n");

/***/ }),
/* 101 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_mixin_notifier__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_util__ = __webpack_require__(11);\n\n\n\n\n/**\n * @constructor\n * @alias clay.async.Task\n * @mixes clay.core.mixin.notifier\n */\nfunction Task() {\n    this._fullfilled = false;\n    this._rejected = false;\n};\n/**\n * Task successed\n * @param {} data\n */\nTask.prototype.resolve = function(data) {\n    this._fullfilled = true;\n    this._rejected = false;\n    this.trigger('success', data);\n};\n/**\n * Task failed\n * @param {} err\n */\nTask.prototype.reject = function(err) {\n    this._rejected = true;\n    this._fullfilled = false;\n    this.trigger('error', err);\n};\n/**\n * If task successed\n * @return {boolean}\n */\nTask.prototype.isFullfilled = function() {\n    return this._fullfilled;\n};\n/**\n * If task failed\n * @return {boolean}\n */\nTask.prototype.isRejected = function() {\n    return this._rejected;\n};\n/**\n * If task finished, either successed or failed\n * @return {boolean}\n */\nTask.prototype.isSettled = function() {\n    return this._fullfilled || this._rejected;\n};\n\n__WEBPACK_IMPORTED_MODULE_2__core_util__[\"a\" /* default */].extend(Task.prototype, __WEBPACK_IMPORTED_MODULE_0__core_mixin_notifier__[\"a\" /* default */]);\n\nfunction makeRequestTask(url, responseType) {\n    var task = new Task();\n    __WEBPACK_IMPORTED_MODULE_1__core_vendor__[\"a\" /* default */].request.get({\n        url: url,\n        responseType: responseType,\n        onload: function(res) {\n            task.resolve(res);\n        },\n        onerror: function(error) {\n            task.reject(error);\n        }\n    });\n    return task;\n}\n/**\n * Make a vendor.request task\n * @param  {string|object|object[]|string[]} url\n * @param  {string} [responseType]\n * @example\n *     var task = Task.makeRequestTask('./a.json');\n *     var task = Task.makeRequestTask({\n *         url: 'b.bin',\n *         responseType: 'arraybuffer'\n *     });\n *     var tasks = Task.makeRequestTask(['./a.json', './b.json']);\n *     var tasks = Task.makeRequestTask([\n *         {url: 'a.json'},\n *         {url: 'b.bin', responseType: 'arraybuffer'}\n *     ]);\n * @return {clay.async.Task|clay.async.Task[]}\n */\nTask.makeRequestTask = function(url, responseType) {\n    if (typeof url === 'string') {\n        return makeRequestTask(url, responseType);\n    }\n    else if (url.url) {   //  Configure object\n        var obj = url;\n        return makeRequestTask(obj.url, obj.responseType);\n    }\n    else if (Array.isArray(url)) {  // Url list\n        var urlList = url;\n        var tasks = [];\n        urlList.forEach(function(obj) {\n            var url, responseType;\n            if (typeof obj === 'string') {\n                url = obj;\n            }\n            else if (Object(obj) === obj) {\n                url = obj.url;\n                responseType = obj.responseType;\n            }\n            tasks.push(makeRequestTask(url, responseType));\n        });\n        return tasks;\n    }\n};\n/**\n * @return {clay.async.Task}\n */\nTask.makeTask = function() {\n    return new Task();\n};\n\n__WEBPACK_IMPORTED_MODULE_2__core_util__[\"a\" /* default */].extend(Task.prototype, __WEBPACK_IMPORTED_MODULE_0__core_mixin_notifier__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Task);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvYXN5bmMvVGFzay5qcz85YjZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBub3RpZmllciBmcm9tICcuLi9jb3JlL21peGluL25vdGlmaWVyJztcbmltcG9ydCB2ZW5kb3IgZnJvbSAnLi4vY29yZS92ZW5kb3InO1xuaW1wb3J0IHV0aWwgIGZyb20gJy4uL2NvcmUvdXRpbCc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5hc3luYy5UYXNrXG4gKiBAbWl4ZXMgY2xheS5jb3JlLm1peGluLm5vdGlmaWVyXG4gKi9cbmZ1bmN0aW9uIFRhc2soKSB7XG4gICAgdGhpcy5fZnVsbGZpbGxlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3JlamVjdGVkID0gZmFsc2U7XG59O1xuLyoqXG4gKiBUYXNrIHN1Y2Nlc3NlZFxuICogQHBhcmFtIHt9IGRhdGFcbiAqL1xuVGFzay5wcm90b3R5cGUucmVzb2x2ZSA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICB0aGlzLl9mdWxsZmlsbGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9yZWplY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMudHJpZ2dlcignc3VjY2VzcycsIGRhdGEpO1xufTtcbi8qKlxuICogVGFzayBmYWlsZWRcbiAqIEBwYXJhbSB7fSBlcnJcbiAqL1xuVGFzay5wcm90b3R5cGUucmVqZWN0ID0gZnVuY3Rpb24oZXJyKSB7XG4gICAgdGhpcy5fcmVqZWN0ZWQgPSB0cnVlO1xuICAgIHRoaXMuX2Z1bGxmaWxsZWQgPSBmYWxzZTtcbiAgICB0aGlzLnRyaWdnZXIoJ2Vycm9yJywgZXJyKTtcbn07XG4vKipcbiAqIElmIHRhc2sgc3VjY2Vzc2VkXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5UYXNrLnByb3RvdHlwZS5pc0Z1bGxmaWxsZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fZnVsbGZpbGxlZDtcbn07XG4vKipcbiAqIElmIHRhc2sgZmFpbGVkXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5UYXNrLnByb3RvdHlwZS5pc1JlamVjdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlamVjdGVkO1xufTtcbi8qKlxuICogSWYgdGFzayBmaW5pc2hlZCwgZWl0aGVyIHN1Y2Nlc3NlZCBvciBmYWlsZWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cblRhc2sucHJvdG90eXBlLmlzU2V0dGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9mdWxsZmlsbGVkIHx8IHRoaXMuX3JlamVjdGVkO1xufTtcblxudXRpbC5leHRlbmQoVGFzay5wcm90b3R5cGUsIG5vdGlmaWVyKTtcblxuZnVuY3Rpb24gbWFrZVJlcXVlc3RUYXNrKHVybCwgcmVzcG9uc2VUeXBlKSB7XG4gICAgdmFyIHRhc2sgPSBuZXcgVGFzaygpO1xuICAgIHZlbmRvci5yZXF1ZXN0LmdldCh7XG4gICAgICAgIHVybDogdXJsLFxuICAgICAgICByZXNwb25zZVR5cGU6IHJlc3BvbnNlVHlwZSxcbiAgICAgICAgb25sb2FkOiBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgIHRhc2sucmVzb2x2ZShyZXMpO1xuICAgICAgICB9LFxuICAgICAgICBvbmVycm9yOiBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgdGFzay5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRhc2s7XG59XG4vKipcbiAqIE1ha2UgYSB2ZW5kb3IucmVxdWVzdCB0YXNrXG4gKiBAcGFyYW0gIHtzdHJpbmd8b2JqZWN0fG9iamVjdFtdfHN0cmluZ1tdfSB1cmxcbiAqIEBwYXJhbSAge3N0cmluZ30gW3Jlc3BvbnNlVHlwZV1cbiAqIEBleGFtcGxlXG4gKiAgICAgdmFyIHRhc2sgPSBUYXNrLm1ha2VSZXF1ZXN0VGFzaygnLi9hLmpzb24nKTtcbiAqICAgICB2YXIgdGFzayA9IFRhc2subWFrZVJlcXVlc3RUYXNrKHtcbiAqICAgICAgICAgdXJsOiAnYi5iaW4nLFxuICogICAgICAgICByZXNwb25zZVR5cGU6ICdhcnJheWJ1ZmZlcidcbiAqICAgICB9KTtcbiAqICAgICB2YXIgdGFza3MgPSBUYXNrLm1ha2VSZXF1ZXN0VGFzayhbJy4vYS5qc29uJywgJy4vYi5qc29uJ10pO1xuICogICAgIHZhciB0YXNrcyA9IFRhc2subWFrZVJlcXVlc3RUYXNrKFtcbiAqICAgICAgICAge3VybDogJ2EuanNvbid9LFxuICogICAgICAgICB7dXJsOiAnYi5iaW4nLCByZXNwb25zZVR5cGU6ICdhcnJheWJ1ZmZlcid9XG4gKiAgICAgXSk7XG4gKiBAcmV0dXJuIHtjbGF5LmFzeW5jLlRhc2t8Y2xheS5hc3luYy5UYXNrW119XG4gKi9cblRhc2subWFrZVJlcXVlc3RUYXNrID0gZnVuY3Rpb24odXJsLCByZXNwb25zZVR5cGUpIHtcbiAgICBpZiAodHlwZW9mIHVybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIG1ha2VSZXF1ZXN0VGFzayh1cmwsIHJlc3BvbnNlVHlwZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHVybC51cmwpIHsgICAvLyAgQ29uZmlndXJlIG9iamVjdFxuICAgICAgICB2YXIgb2JqID0gdXJsO1xuICAgICAgICByZXR1cm4gbWFrZVJlcXVlc3RUYXNrKG9iai51cmwsIG9iai5yZXNwb25zZVR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHVybCkpIHsgIC8vIFVybCBsaXN0XG4gICAgICAgIHZhciB1cmxMaXN0ID0gdXJsO1xuICAgICAgICB2YXIgdGFza3MgPSBbXTtcbiAgICAgICAgdXJsTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIHVybCwgcmVzcG9uc2VUeXBlO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdXJsID0gb2JqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoT2JqZWN0KG9iaikgPT09IG9iaikge1xuICAgICAgICAgICAgICAgIHVybCA9IG9iai51cmw7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlID0gb2JqLnJlc3BvbnNlVHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhc2tzLnB1c2gobWFrZVJlcXVlc3RUYXNrKHVybCwgcmVzcG9uc2VUeXBlKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGFza3M7XG4gICAgfVxufTtcbi8qKlxuICogQHJldHVybiB7Y2xheS5hc3luYy5UYXNrfVxuICovXG5UYXNrLm1ha2VUYXNrID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBUYXNrKCk7XG59O1xuXG51dGlsLmV4dGVuZChUYXNrLnByb3RvdHlwZSwgbm90aWZpZXIpO1xuXG5leHBvcnQgZGVmYXVsdCBUYXNrO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9hc3luYy9UYXNrLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///101\n");

/***/ }),
/* 102 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Graph__ = __webpack_require__(103);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TexturePool__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__FrameBuffer__ = __webpack_require__(18);\n\n\n\n\n/**\n * Compositor provide graph based post processing\n *\n * @constructor clay.compositor.Compositor\n * @extends clay.compositor.Graph\n *\n */\nvar Compositor = __WEBPACK_IMPORTED_MODULE_0__Graph__[\"a\" /* default */].extend(function() {\n    return {\n        // Output node\n        _outputs: [],\n\n        _texturePool: new __WEBPACK_IMPORTED_MODULE_1__TexturePool__[\"a\" /* default */](),\n\n        _frameBuffer: new __WEBPACK_IMPORTED_MODULE_2__FrameBuffer__[\"a\" /* default */]({\n            depthBuffer: false\n        })\n    };\n},\n/** @lends clay.compositor.Compositor.prototype */\n{\n    addNode: function(node) {\n        __WEBPACK_IMPORTED_MODULE_0__Graph__[\"a\" /* default */].prototype.addNode.call(this, node);\n        node._compositor = this;\n    },\n    /**\n     * @param  {clay.Renderer} renderer\n     */\n    render: function(renderer, frameBuffer) {\n        if (this._dirty) {\n            this.update();\n            this._dirty = false;\n\n            this._outputs.length = 0;\n            for (var i = 0; i < this.nodes.length; i++) {\n                if (!this.nodes[i].outputs) {\n                    this._outputs.push(this.nodes[i]);\n                }\n            }\n        }\n\n        for (var i = 0; i < this.nodes.length; i++) {\n            // Update the reference number of each output texture\n            this.nodes[i].beforeFrame();\n        }\n\n        for (var i = 0; i < this._outputs.length; i++) {\n            this._outputs[i].updateReference();\n        }\n\n        for (var i = 0; i < this._outputs.length; i++) {\n            this._outputs[i].render(renderer, frameBuffer);\n        }\n\n        for (var i = 0; i < this.nodes.length; i++) {\n            // Clear up\n            this.nodes[i].afterFrame();\n        }\n    },\n\n    allocateTexture: function (parameters) {\n        return this._texturePool.get(parameters);\n    },\n\n    releaseTexture: function (parameters) {\n        this._texturePool.put(parameters);\n    },\n\n    getFrameBuffer: function () {\n        return this._frameBuffer;\n    },\n\n    /**\n     * Dispose compositor\n     * @param {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n        this._texturePool.clear(renderer);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Compositor);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvY29tcG9zaXRvci9Db21wb3NpdG9yLmpzP2ZlNWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEdyYXBoIGZyb20gJy4vR3JhcGgnO1xuaW1wb3J0IFRleHR1cmVQb29sIGZyb20gJy4vVGV4dHVyZVBvb2wnO1xuaW1wb3J0IEZyYW1lQnVmZmVyIGZyb20gJy4uL0ZyYW1lQnVmZmVyJztcblxuLyoqXG4gKiBDb21wb3NpdG9yIHByb3ZpZGUgZ3JhcGggYmFzZWQgcG9zdCBwcm9jZXNzaW5nXG4gKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuY29tcG9zaXRvci5Db21wb3NpdG9yXG4gKiBAZXh0ZW5kcyBjbGF5LmNvbXBvc2l0b3IuR3JhcGhcbiAqXG4gKi9cbnZhciBDb21wb3NpdG9yID0gR3JhcGguZXh0ZW5kKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIC8vIE91dHB1dCBub2RlXG4gICAgICAgIF9vdXRwdXRzOiBbXSxcblxuICAgICAgICBfdGV4dHVyZVBvb2w6IG5ldyBUZXh0dXJlUG9vbCgpLFxuXG4gICAgICAgIF9mcmFtZUJ1ZmZlcjogbmV3IEZyYW1lQnVmZmVyKHtcbiAgICAgICAgICAgIGRlcHRoQnVmZmVyOiBmYWxzZVxuICAgICAgICB9KVxuICAgIH07XG59LFxuLyoqIEBsZW5kcyBjbGF5LmNvbXBvc2l0b3IuQ29tcG9zaXRvci5wcm90b3R5cGUgKi9cbntcbiAgICBhZGROb2RlOiBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgIEdyYXBoLnByb3RvdHlwZS5hZGROb2RlLmNhbGwodGhpcywgbm9kZSk7XG4gICAgICAgIG5vZGUuX2NvbXBvc2l0b3IgPSB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKi9cbiAgICByZW5kZXI6IGZ1bmN0aW9uKHJlbmRlcmVyLCBmcmFtZUJ1ZmZlcikge1xuICAgICAgICBpZiAodGhpcy5fZGlydHkpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLl9vdXRwdXRzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubm9kZXNbaV0ub3V0cHV0cykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vdXRwdXRzLnB1c2godGhpcy5ub2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHJlZmVyZW5jZSBudW1iZXIgb2YgZWFjaCBvdXRwdXQgdGV4dHVyZVxuICAgICAgICAgICAgdGhpcy5ub2Rlc1tpXS5iZWZvcmVGcmFtZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9vdXRwdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl9vdXRwdXRzW2ldLnVwZGF0ZVJlZmVyZW5jZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9vdXRwdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl9vdXRwdXRzW2ldLnJlbmRlcihyZW5kZXJlciwgZnJhbWVCdWZmZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBDbGVhciB1cFxuICAgICAgICAgICAgdGhpcy5ub2Rlc1tpXS5hZnRlckZyYW1lKCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgYWxsb2NhdGVUZXh0dXJlOiBmdW5jdGlvbiAocGFyYW1ldGVycykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dHVyZVBvb2wuZ2V0KHBhcmFtZXRlcnMpO1xuICAgIH0sXG5cbiAgICByZWxlYXNlVGV4dHVyZTogZnVuY3Rpb24gKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgdGhpcy5fdGV4dHVyZVBvb2wucHV0KHBhcmFtZXRlcnMpO1xuICAgIH0sXG5cbiAgICBnZXRGcmFtZUJ1ZmZlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZnJhbWVCdWZmZXI7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2UgY29tcG9zaXRvclxuICAgICAqIEBwYXJhbSB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKi9cbiAgICBkaXNwb3NlOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5fdGV4dHVyZVBvb2wuY2xlYXIocmVuZGVyZXIpO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBDb21wb3NpdG9yO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb21wb3NpdG9yL0NvbXBvc2l0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDEwMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///102\n");

/***/ }),
/* 103 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__CompositorNode__ = __webpack_require__(35);\n\n\n\n/**\n * @constructor clay.compositor.Graph\n * @extends clay.core.Base\n */\nvar Graph = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.compositor.Graph# */ {\n        /**\n         * @type {Array.<clay.compositor.CompositorNode>}\n         */\n        nodes: []\n    };\n},\n/** @lends clay.compositor.Graph.prototype */\n{\n\n    /**\n     * Mark to update\n     */\n    dirty: function () {\n        this._dirty = true;\n    },\n    /**\n     * @param {clay.compositor.CompositorNode} node\n     */\n    addNode: function (node) {\n\n        if (this.nodes.indexOf(node) >= 0) {\n            return;\n        }\n\n        this.nodes.push(node);\n\n        this._dirty = true;\n    },\n    /**\n     * @param  {clay.compositor.CompositorNode|string} node\n     */\n    removeNode: function (node) {\n        if (typeof node === 'string') {\n            node = this.getNodeByName(node);\n        }\n        var idx = this.nodes.indexOf(node);\n        if (idx >= 0) {\n            this.nodes.splice(idx, 1);\n            this._dirty = true;\n        }\n    },\n    /**\n     * @param {string} name\n     * @return {clay.compositor.CompositorNode}\n     */\n    getNodeByName: function (name) {\n        for (var i = 0; i < this.nodes.length; i++) {\n            if (this.nodes[i].name === name) {\n                return this.nodes[i];\n            }\n        }\n    },\n    /**\n     * Update links of graph\n     */\n    update: function () {\n        for (var i = 0; i < this.nodes.length; i++) {\n            this.nodes[i].clear();\n        }\n        // Traverse all the nodes and build the graph\n        for (var i = 0; i < this.nodes.length; i++) {\n            var node = this.nodes[i];\n\n            if (!node.inputs) {\n                continue;\n            }\n            for (var inputName in node.inputs) {\n                if (!node.inputs[inputName]) {\n                    continue;\n                }\n                if (node.pass && !node.pass.material.isUniformEnabled(inputName)) {\n                    console.warn('Pin '  + node.name + '.' + inputName + ' not used.');\n                    continue;\n                }\n                var fromPinInfo = node.inputs[inputName];\n\n                var fromPin = this.findPin(fromPinInfo);\n                if (fromPin) {\n                    node.link(inputName, fromPin.node, fromPin.pin);\n                }\n                else {\n                    if (typeof fromPinInfo === 'string') {\n                        console.warn('Node ' + fromPinInfo + ' not exist');\n                    }\n                    else {\n                        console.warn('Pin of ' + fromPinInfo.node + '.' + fromPinInfo.pin + ' not exist');\n                    }\n                }\n            }\n        }\n    },\n\n    findPin: function (input) {\n        var node;\n        // Try to take input as a directly a node\n        if (typeof input === 'string' || input instanceof __WEBPACK_IMPORTED_MODULE_1__CompositorNode__[\"a\" /* default */]) {\n            input = {\n                node: input\n            };\n        }\n\n        if (typeof input.node === 'string') {\n            for (var i = 0; i < this.nodes.length; i++) {\n                var tmp = this.nodes[i];\n                if (tmp.name === input.node) {\n                    node = tmp;\n                }\n            }\n        }\n        else {\n            node = input.node;\n        }\n        if (node) {\n            var inputPin = input.pin;\n            if (!inputPin) {\n                // Use first pin defaultly\n                if (node.outputs) {\n                    inputPin = Object.keys(node.outputs)[0];\n                }\n            }\n            if (node.outputs[inputPin]) {\n                return {\n                    node: node,\n                    pin: inputPin\n                };\n            }\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Graph);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvY29tcG9zaXRvci9HcmFwaC5qcz8wMmQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4uL2NvcmUvQmFzZSc7XG5pbXBvcnQgR3JhcGhOb2RlIGZyb20gJy4vQ29tcG9zaXRvck5vZGUnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LmNvbXBvc2l0b3IuR3JhcGhcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKi9cbnZhciBHcmFwaCA9IEJhc2UuZXh0ZW5kKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5LmNvbXBvc2l0b3IuR3JhcGgjICovIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheS48Y2xheS5jb21wb3NpdG9yLkNvbXBvc2l0b3JOb2RlPn1cbiAgICAgICAgICovXG4gICAgICAgIG5vZGVzOiBbXVxuICAgIH07XG59LFxuLyoqIEBsZW5kcyBjbGF5LmNvbXBvc2l0b3IuR3JhcGgucHJvdG90eXBlICovXG57XG5cbiAgICAvKipcbiAgICAgKiBNYXJrIHRvIHVwZGF0ZVxuICAgICAqL1xuICAgIGRpcnR5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Y2xheS5jb21wb3NpdG9yLkNvbXBvc2l0b3JOb2RlfSBub2RlXG4gICAgICovXG4gICAgYWRkTm9kZTogZnVuY3Rpb24gKG5vZGUpIHtcblxuICAgICAgICBpZiAodGhpcy5ub2Rlcy5pbmRleE9mKG5vZGUpID49IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubm9kZXMucHVzaChub2RlKTtcblxuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtjbGF5LmNvbXBvc2l0b3IuQ29tcG9zaXRvck5vZGV8c3RyaW5nfSBub2RlXG4gICAgICovXG4gICAgcmVtb3ZlTm9kZTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBub2RlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbm9kZSA9IHRoaXMuZ2V0Tm9kZUJ5TmFtZShub2RlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaWR4ID0gdGhpcy5ub2Rlcy5pbmRleE9mKG5vZGUpO1xuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMubm9kZXMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHJldHVybiB7Y2xheS5jb21wb3NpdG9yLkNvbXBvc2l0b3JOb2RlfVxuICAgICAqL1xuICAgIGdldE5vZGVCeU5hbWU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMubm9kZXNbaV0ubmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5vZGVzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgbGlua3Mgb2YgZ3JhcGhcbiAgICAgKi9cbiAgICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLm5vZGVzW2ldLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVHJhdmVyc2UgYWxsIHRoZSBub2RlcyBhbmQgYnVpbGQgdGhlIGdyYXBoXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLm5vZGVzW2ldO1xuXG4gICAgICAgICAgICBpZiAoIW5vZGUuaW5wdXRzKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpbnB1dE5hbWUgaW4gbm9kZS5pbnB1dHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5vZGUuaW5wdXRzW2lucHV0TmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub2RlLnBhc3MgJiYgIW5vZGUucGFzcy5tYXRlcmlhbC5pc1VuaWZvcm1FbmFibGVkKGlucHV0TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdQaW4gJyAgKyBub2RlLm5hbWUgKyAnLicgKyBpbnB1dE5hbWUgKyAnIG5vdCB1c2VkLicpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGZyb21QaW5JbmZvID0gbm9kZS5pbnB1dHNbaW5wdXROYW1lXTtcblxuICAgICAgICAgICAgICAgIHZhciBmcm9tUGluID0gdGhpcy5maW5kUGluKGZyb21QaW5JbmZvKTtcbiAgICAgICAgICAgICAgICBpZiAoZnJvbVBpbikge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmxpbmsoaW5wdXROYW1lLCBmcm9tUGluLm5vZGUsIGZyb21QaW4ucGluKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZnJvbVBpbkluZm8gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ05vZGUgJyArIGZyb21QaW5JbmZvICsgJyBub3QgZXhpc3QnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignUGluIG9mICcgKyBmcm9tUGluSW5mby5ub2RlICsgJy4nICsgZnJvbVBpbkluZm8ucGluICsgJyBub3QgZXhpc3QnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBmaW5kUGluOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgdmFyIG5vZGU7XG4gICAgICAgIC8vIFRyeSB0byB0YWtlIGlucHV0IGFzIGEgZGlyZWN0bHkgYSBub2RlXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IGlucHV0IGluc3RhbmNlb2YgR3JhcGhOb2RlKSB7XG4gICAgICAgICAgICBpbnB1dCA9IHtcbiAgICAgICAgICAgICAgICBub2RlOiBpbnB1dFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQubm9kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciB0bXAgPSB0aGlzLm5vZGVzW2ldO1xuICAgICAgICAgICAgICAgIGlmICh0bXAubmFtZSA9PT0gaW5wdXQubm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlID0gdG1wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUgPSBpbnB1dC5ub2RlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICB2YXIgaW5wdXRQaW4gPSBpbnB1dC5waW47XG4gICAgICAgICAgICBpZiAoIWlucHV0UGluKSB7XG4gICAgICAgICAgICAgICAgLy8gVXNlIGZpcnN0IHBpbiBkZWZhdWx0bHlcbiAgICAgICAgICAgICAgICBpZiAobm9kZS5vdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0UGluID0gT2JqZWN0LmtleXMobm9kZS5vdXRwdXRzKVswXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm9kZS5vdXRwdXRzW2lucHV0UGluXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUsXG4gICAgICAgICAgICAgICAgICAgIHBpbjogaW5wdXRQaW5cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEdyYXBoO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb21wb3NpdG9yL0dyYXBoLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///103\n");

/***/ }),
/* 104 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__CompositorNode__ = __webpack_require__(35);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__FrameBuffer__ = __webpack_require__(18);\n\n\n\n\n/**\n * @constructor clay.compositor.SceneNode\n * @extends clay.compositor.CompositorNode\n */\nvar SceneNode = __WEBPACK_IMPORTED_MODULE_0__CompositorNode__[\"a\" /* default */].extend(\n/** @lends clay.compositor.SceneNode# */\n{\n    name: 'scene',\n    /**\n     * @type {clay.Scene}\n     */\n    scene: null,\n    /**\n     * @type {clay.Camera}\n     */\n    camera: null,\n    /**\n     * @type {boolean}\n     */\n    autoUpdateScene: true,\n    /**\n     * @type {boolean}\n     */\n    preZ: false\n\n}, function() {\n    this.frameBuffer = new __WEBPACK_IMPORTED_MODULE_2__FrameBuffer__[\"a\" /* default */]();\n}, {\n    render: function(renderer) {\n\n        this._rendering = true;\n        var _gl = renderer.gl;\n\n        this.trigger('beforerender');\n\n        var renderInfo;\n\n        if (!this.outputs) {\n\n            renderInfo = renderer.render(this.scene, this.camera, !this.autoUpdateScene, this.preZ);\n\n        }\n        else {\n\n            var frameBuffer = this.frameBuffer;\n            for (var name in this.outputs) {\n                var parameters = this.updateParameter(name, renderer);\n                var outputInfo = this.outputs[name];\n                var texture = this._compositor.allocateTexture(parameters);\n                this._outputTextures[name] = texture;\n\n                var attachment = outputInfo.attachment || _gl.COLOR_ATTACHMENT0;\n                if (typeof(attachment) == 'string') {\n                    attachment = _gl[attachment];\n                }\n                frameBuffer.attach(texture, attachment);\n            }\n            frameBuffer.bind(renderer);\n\n            // MRT Support in chrome\n            // https://www.khronos.org/registry/webgl/sdk/tests/conformance/extensions/ext-draw-buffers.html\n            var ext = renderer.getGLExtension('EXT_draw_buffers');\n            if (ext) {\n                var bufs = [];\n                for (var attachment in this.outputs) {\n                    attachment = parseInt(attachment);\n                    if (attachment >= _gl.COLOR_ATTACHMENT0 && attachment <= _gl.COLOR_ATTACHMENT0 + 8) {\n                        bufs.push(attachment);\n                    }\n                }\n                ext.drawBuffersEXT(bufs);\n            }\n\n            // Always clear\n            // PENDING\n            renderer.saveClear();\n            renderer.clearBit = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].DEPTH_BUFFER_BIT | __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].COLOR_BUFFER_BIT;\n            renderInfo = renderer.render(this.scene, this.camera, !this.autoUpdateScene, this.preZ);\n            renderer.restoreClear();\n\n            frameBuffer.unbind(renderer);\n        }\n\n        this.trigger('afterrender', renderInfo);\n\n        this._rendering = false;\n        this._rendered = true;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SceneNode);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvY29tcG9zaXRvci9TY2VuZU5vZGUuanM/YmJlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29tcG9zaXRvck5vZGUgZnJvbSAnLi9Db21wb3NpdG9yTm9kZSc7XG5pbXBvcnQgZ2xlbnVtIGZyb20gJy4uL2NvcmUvZ2xlbnVtJztcbmltcG9ydCBGcmFtZUJ1ZmZlciBmcm9tICcuLi9GcmFtZUJ1ZmZlcic7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuY29tcG9zaXRvci5TY2VuZU5vZGVcbiAqIEBleHRlbmRzIGNsYXkuY29tcG9zaXRvci5Db21wb3NpdG9yTm9kZVxuICovXG52YXIgU2NlbmVOb2RlID0gQ29tcG9zaXRvck5vZGUuZXh0ZW5kKFxuLyoqIEBsZW5kcyBjbGF5LmNvbXBvc2l0b3IuU2NlbmVOb2RlIyAqL1xue1xuICAgIG5hbWU6ICdzY2VuZScsXG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuU2NlbmV9XG4gICAgICovXG4gICAgc2NlbmU6IG51bGwsXG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuQ2FtZXJhfVxuICAgICAqL1xuICAgIGNhbWVyYTogbnVsbCxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBhdXRvVXBkYXRlU2NlbmU6IHRydWUsXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgcHJlWjogZmFsc2VcblxufSwgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5mcmFtZUJ1ZmZlciA9IG5ldyBGcmFtZUJ1ZmZlcigpO1xufSwge1xuICAgIHJlbmRlcjogZnVuY3Rpb24ocmVuZGVyZXIpIHtcblxuICAgICAgICB0aGlzLl9yZW5kZXJpbmcgPSB0cnVlO1xuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2w7XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVyZW5kZXInKTtcblxuICAgICAgICB2YXIgcmVuZGVySW5mbztcblxuICAgICAgICBpZiAoIXRoaXMub3V0cHV0cykge1xuXG4gICAgICAgICAgICByZW5kZXJJbmZvID0gcmVuZGVyZXIucmVuZGVyKHRoaXMuc2NlbmUsIHRoaXMuY2FtZXJhLCAhdGhpcy5hdXRvVXBkYXRlU2NlbmUsIHRoaXMucHJlWik7XG5cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcblxuICAgICAgICAgICAgdmFyIGZyYW1lQnVmZmVyID0gdGhpcy5mcmFtZUJ1ZmZlcjtcbiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5vdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSB0aGlzLnVwZGF0ZVBhcmFtZXRlcihuYW1lLCByZW5kZXJlcik7XG4gICAgICAgICAgICAgICAgdmFyIG91dHB1dEluZm8gPSB0aGlzLm91dHB1dHNbbmFtZV07XG4gICAgICAgICAgICAgICAgdmFyIHRleHR1cmUgPSB0aGlzLl9jb21wb3NpdG9yLmFsbG9jYXRlVGV4dHVyZShwYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vdXRwdXRUZXh0dXJlc1tuYW1lXSA9IHRleHR1cmU7XG5cbiAgICAgICAgICAgICAgICB2YXIgYXR0YWNobWVudCA9IG91dHB1dEluZm8uYXR0YWNobWVudCB8fCBfZ2wuQ09MT1JfQVRUQUNITUVOVDA7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihhdHRhY2htZW50KSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50ID0gX2dsW2F0dGFjaG1lbnRdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmcmFtZUJ1ZmZlci5hdHRhY2godGV4dHVyZSwgYXR0YWNobWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmcmFtZUJ1ZmZlci5iaW5kKHJlbmRlcmVyKTtcblxuICAgICAgICAgICAgLy8gTVJUIFN1cHBvcnQgaW4gY2hyb21lXG4gICAgICAgICAgICAvLyBodHRwczovL3d3dy5raHJvbm9zLm9yZy9yZWdpc3RyeS93ZWJnbC9zZGsvdGVzdHMvY29uZm9ybWFuY2UvZXh0ZW5zaW9ucy9leHQtZHJhdy1idWZmZXJzLmh0bWxcbiAgICAgICAgICAgIHZhciBleHQgPSByZW5kZXJlci5nZXRHTEV4dGVuc2lvbignRVhUX2RyYXdfYnVmZmVycycpO1xuICAgICAgICAgICAgaWYgKGV4dCkge1xuICAgICAgICAgICAgICAgIHZhciBidWZzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYXR0YWNobWVudCBpbiB0aGlzLm91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudCA9IHBhcnNlSW50KGF0dGFjaG1lbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXR0YWNobWVudCA+PSBfZ2wuQ09MT1JfQVRUQUNITUVOVDAgJiYgYXR0YWNobWVudCA8PSBfZ2wuQ09MT1JfQVRUQUNITUVOVDAgKyA4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZzLnB1c2goYXR0YWNobWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXh0LmRyYXdCdWZmZXJzRVhUKGJ1ZnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBbHdheXMgY2xlYXJcbiAgICAgICAgICAgIC8vIFBFTkRJTkdcbiAgICAgICAgICAgIHJlbmRlcmVyLnNhdmVDbGVhcigpO1xuICAgICAgICAgICAgcmVuZGVyZXIuY2xlYXJCaXQgPSBnbGVudW0uREVQVEhfQlVGRkVSX0JJVCB8IGdsZW51bS5DT0xPUl9CVUZGRVJfQklUO1xuICAgICAgICAgICAgcmVuZGVySW5mbyA9IHJlbmRlcmVyLnJlbmRlcih0aGlzLnNjZW5lLCB0aGlzLmNhbWVyYSwgIXRoaXMuYXV0b1VwZGF0ZVNjZW5lLCB0aGlzLnByZVopO1xuICAgICAgICAgICAgcmVuZGVyZXIucmVzdG9yZUNsZWFyKCk7XG5cbiAgICAgICAgICAgIGZyYW1lQnVmZmVyLnVuYmluZChyZW5kZXJlcik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2FmdGVycmVuZGVyJywgcmVuZGVySW5mbyk7XG5cbiAgICAgICAgdGhpcy5fcmVuZGVyaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVkID0gdHJ1ZTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgU2NlbmVOb2RlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb21wb3NpdG9yL1NjZW5lTm9kZS5qc1xuLy8gbW9kdWxlIGlkID0gMTA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///104\n");

/***/ }),
/* 105 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__CompositorNode__ = __webpack_require__(35);\n\n\n/**\n * @constructor clay.compositor.TextureNode\n * @extends clay.compositor.CompositorNode\n */\nvar TextureNode = __WEBPACK_IMPORTED_MODULE_0__CompositorNode__[\"a\" /* default */].extend(function() {\n    return /** @lends clay.compositor.TextureNode# */ {\n        /**\n         * @type {clay.Texture2D}\n         */\n        texture: null,\n\n        // Texture node must have output without parameters\n        outputs: {\n            color: {}\n        }\n    };\n}, function () {\n}, {\n\n    getOutput: function (renderer, name) {\n        return this.texture;\n    },\n\n    // Do nothing\n    beforeFrame: function () {},\n    afterFrame: function () {}\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TextureNode);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvY29tcG9zaXRvci9UZXh0dXJlTm9kZS5qcz83YzQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb21wb3NpdG9yTm9kZSBmcm9tICcuL0NvbXBvc2l0b3JOb2RlJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5jb21wb3NpdG9yLlRleHR1cmVOb2RlXG4gKiBAZXh0ZW5kcyBjbGF5LmNvbXBvc2l0b3IuQ29tcG9zaXRvck5vZGVcbiAqL1xudmFyIFRleHR1cmVOb2RlID0gQ29tcG9zaXRvck5vZGUuZXh0ZW5kKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuY29tcG9zaXRvci5UZXh0dXJlTm9kZSMgKi8ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2NsYXkuVGV4dHVyZTJEfVxuICAgICAgICAgKi9cbiAgICAgICAgdGV4dHVyZTogbnVsbCxcblxuICAgICAgICAvLyBUZXh0dXJlIG5vZGUgbXVzdCBoYXZlIG91dHB1dCB3aXRob3V0IHBhcmFtZXRlcnNcbiAgICAgICAgb3V0cHV0czoge1xuICAgICAgICAgICAgY29sb3I6IHt9XG4gICAgICAgIH1cbiAgICB9O1xufSwgZnVuY3Rpb24gKCkge1xufSwge1xuXG4gICAgZ2V0T3V0cHV0OiBmdW5jdGlvbiAocmVuZGVyZXIsIG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dHVyZTtcbiAgICB9LFxuXG4gICAgLy8gRG8gbm90aGluZ1xuICAgIGJlZm9yZUZyYW1lOiBmdW5jdGlvbiAoKSB7fSxcbiAgICBhZnRlckZyYW1lOiBmdW5jdGlvbiAoKSB7fVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFRleHR1cmVOb2RlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9jb21wb3NpdG9yL1RleHR1cmVOb2RlLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///105\n");

/***/ }),
/* 106 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Pass__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__CompositorNode__ = __webpack_require__(35);\n// TODO Shader library\n\n\n\n// TODO curlnoise demo wrong\n\n// PENDING\n// Use topological sort ?\n\n/**\n * Filter node\n *\n * @constructor clay.compositor.FilterNode\n * @extends clay.compositor.CompositorNode\n *\n * @example\n    var node = new clay.compositor.FilterNode({\n        name: 'fxaa',\n        shader: clay.Shader.source('clay.compositor.fxaa'),\n        inputs: {\n            texture: {\n                    node: 'scene',\n                    pin: 'color'\n            }\n        },\n        // Multiple outputs is preserved for MRT support in WebGL2.0\n        outputs: {\n            color: {\n                attachment: clay.FrameBuffer.COLOR_ATTACHMENT0\n                parameters: {\n                    format: clay.Texture.RGBA,\n                    width: 512,\n                    height: 512\n                },\n                // Node will keep the RTT rendered in last frame\n                keepLastFrame: true,\n                // Force the node output the RTT rendered in last frame\n                outputLastFrame: true\n            }\n        }\n    });\n    *\n    */\nvar FilterNode = __WEBPACK_IMPORTED_MODULE_1__CompositorNode__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.compositor.FilterNode# */ {\n        /**\n         * @type {string}\n         */\n        name: '',\n\n        /**\n         * @type {Object}\n         */\n        inputs: {},\n\n        /**\n         * @type {Object}\n         */\n        outputs: null,\n\n        /**\n         * @type {string}\n         */\n        shader: '',\n\n        /**\n         * Input links, will be updated by the graph\n         * @example:\n         *     inputName: {\n         *         node: someNode,\n         *         pin: 'xxxx'\n         *     }\n         * @type {Object}\n         */\n        inputLinks: {},\n\n        /**\n         * Output links, will be updated by the graph\n         * @example:\n         *     outputName: {\n         *         node: someNode,\n         *         pin: 'xxxx'\n         *     }\n         * @type {Object}\n         */\n        outputLinks: {},\n\n        /**\n         * @type {clay.compositor.Pass}\n         */\n        pass: null,\n\n        // Save the output texture of previous frame\n        // Will be used when there exist a circular reference\n        _prevOutputTextures: {},\n        _outputTextures: {},\n\n        // Example: { name: 2 }\n        _outputReferences: {},\n\n        _rendering: false,\n        // If rendered in this frame\n        _rendered: false,\n\n        _compositor: null\n    };\n}, function () {\n\n    var pass = new __WEBPACK_IMPORTED_MODULE_0__Pass__[\"a\" /* default */]({\n        fragment: this.shader\n    });\n    this.pass = pass;\n},\n/** @lends clay.compositor.FilterNode.prototype */\n{\n    /**\n     * @param  {clay.Renderer} renderer\n     */\n    render: function (renderer, frameBuffer) {\n        this.trigger('beforerender', renderer);\n\n        this._rendering = true;\n\n        var _gl = renderer.gl;\n\n        for (var inputName in this.inputLinks) {\n            var link = this.inputLinks[inputName];\n            var inputTexture = link.node.getOutput(renderer, link.pin);\n            this.pass.setUniform(inputName, inputTexture);\n        }\n        // Output\n        if (!this.outputs) {\n            this.pass.outputs = null;\n\n            this._compositor.getFrameBuffer().unbind(renderer);\n\n            this.pass.render(renderer, frameBuffer);\n        }\n        else {\n            this.pass.outputs = {};\n\n            var attachedTextures = {};\n            for (var name in this.outputs) {\n                var parameters = this.updateParameter(name, renderer);\n                if (isNaN(parameters.width)) {\n                    this.updateParameter(name, renderer);\n                }\n                var outputInfo = this.outputs[name];\n                var texture = this._compositor.allocateTexture(parameters);\n                this._outputTextures[name] = texture;\n                var attachment = outputInfo.attachment || _gl.COLOR_ATTACHMENT0;\n                if (typeof(attachment) === 'string') {\n                    attachment = _gl[attachment];\n                }\n                attachedTextures[attachment] = texture;\n            }\n            this._compositor.getFrameBuffer().bind(renderer);\n\n            for (var attachment in attachedTextures) {\n                // FIXME attachment changes in different nodes\n                this._compositor.getFrameBuffer().attach(\n                    attachedTextures[attachment], attachment\n                );\n            }\n\n            this.pass.render(renderer);\n\n            // Because the data of texture is changed over time,\n            // Here update the mipmaps of texture each time after rendered;\n            this._compositor.getFrameBuffer().updateMipmap(renderer);\n        }\n\n        for (var inputName in this.inputLinks) {\n            var link = this.inputLinks[inputName];\n            link.node.removeReference(link.pin);\n        }\n\n        this._rendering = false;\n        this._rendered = true;\n\n        this.trigger('afterrender', renderer);\n    },\n\n    // TODO Remove parameter function callback\n    updateParameter: function (outputName, renderer) {\n        var outputInfo = this.outputs[outputName];\n        var parameters = outputInfo.parameters;\n        var parametersCopy = outputInfo._parametersCopy;\n        if (!parametersCopy) {\n            parametersCopy = outputInfo._parametersCopy = {};\n        }\n        if (parameters) {\n            for (var key in parameters) {\n                if (key !== 'width' && key !== 'height') {\n                    parametersCopy[key] = parameters[key];\n                }\n            }\n        }\n        var width, height;\n        if (typeof parameters.width === 'function') {\n            width = parameters.width.call(this, renderer);\n        }\n        else {\n            width = parameters.width;\n        }\n        if (typeof parameters.height === 'function') {\n            height = parameters.height.call(this, renderer);\n        }\n        else {\n            height = parameters.height;\n        }\n        width = Math.ceil(width);\n        height = Math.ceil(height);\n        if (\n            parametersCopy.width !== width\n            || parametersCopy.height !== height\n        ) {\n            if (this._outputTextures[outputName]) {\n                this._outputTextures[outputName].dispose(renderer);\n            }\n        }\n        parametersCopy.width = width;\n        parametersCopy.height = height;\n\n        return parametersCopy;\n    },\n\n    /**\n     * Set parameter\n     * @param {string} name\n     * @param {} value\n     */\n    setParameter: function (name, value) {\n        this.pass.setUniform(name, value);\n    },\n    /**\n     * Get parameter value\n     * @param  {string} name\n     * @return {}\n     */\n    getParameter: function (name) {\n        return this.pass.getUniform(name);\n    },\n    /**\n     * Set parameters\n     * @param {Object} obj\n     */\n    setParameters: function (obj) {\n        for (var name in obj) {\n            this.setParameter(name, obj[name]);\n        }\n    },\n    // /**\n    //  * Set shader code\n    //  * @param {string} shaderStr\n    //  */\n    // setShader: function (shaderStr) {\n    //     var material = this.pass.material;\n    //     material.shader.setFragment(shaderStr);\n    //     material.attachShader(material.shader, true);\n    // },\n    /**\n     * Proxy of pass.material.define('fragment', xxx);\n     * @param  {string} symbol\n     * @param  {number} [val]\n     */\n    define: function (symbol, val) {\n        this.pass.material.define('fragment', symbol, val);\n    },\n\n    /**\n     * Proxy of pass.material.undefine('fragment', xxx)\n     * @param  {string} symbol\n     */\n    undefine: function (symbol) {\n        this.pass.material.undefine('fragment', symbol);\n    },\n\n    removeReference: function (outputName) {\n        this._outputReferences[outputName]--;\n        if (this._outputReferences[outputName] === 0) {\n            var outputInfo = this.outputs[outputName];\n            if (outputInfo.keepLastFrame) {\n                if (this._prevOutputTextures[outputName]) {\n                    this._compositor.releaseTexture(this._prevOutputTextures[outputName]);\n                }\n                this._prevOutputTextures[outputName] = this._outputTextures[outputName];\n            }\n            else {\n                // Output of this node have alreay been used by all other nodes\n                // Put the texture back to the pool.\n                this._compositor.releaseTexture(this._outputTextures[outputName]);\n            }\n        }\n    },\n\n    clear: function () {\n        __WEBPACK_IMPORTED_MODULE_1__CompositorNode__[\"a\" /* default */].prototype.clear.call(this);\n\n        // Default disable all texture\n        this.pass.material.disableTexturesAll();\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (FilterNode);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvY29tcG9zaXRvci9GaWx0ZXJOb2RlLmpzP2RkOGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVE9ETyBTaGFkZXIgbGlicmFyeVxuaW1wb3J0IFBhc3MgZnJvbSAnLi9QYXNzJztcbmltcG9ydCBDb21wb3NpdG9yTm9kZSBmcm9tICcuL0NvbXBvc2l0b3JOb2RlJztcblxuLy8gVE9ETyBjdXJsbm9pc2UgZGVtbyB3cm9uZ1xuXG4vLyBQRU5ESU5HXG4vLyBVc2UgdG9wb2xvZ2ljYWwgc29ydCA/XG5cbi8qKlxuICogRmlsdGVyIG5vZGVcbiAqXG4gKiBAY29uc3RydWN0b3IgY2xheS5jb21wb3NpdG9yLkZpbHRlck5vZGVcbiAqIEBleHRlbmRzIGNsYXkuY29tcG9zaXRvci5Db21wb3NpdG9yTm9kZVxuICpcbiAqIEBleGFtcGxlXG4gICAgdmFyIG5vZGUgPSBuZXcgY2xheS5jb21wb3NpdG9yLkZpbHRlck5vZGUoe1xuICAgICAgICBuYW1lOiAnZnhhYScsXG4gICAgICAgIHNoYWRlcjogY2xheS5TaGFkZXIuc291cmNlKCdjbGF5LmNvbXBvc2l0b3IuZnhhYScpLFxuICAgICAgICBpbnB1dHM6IHtcbiAgICAgICAgICAgIHRleHR1cmU6IHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogJ3NjZW5lJyxcbiAgICAgICAgICAgICAgICAgICAgcGluOiAnY29sb3InXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8vIE11bHRpcGxlIG91dHB1dHMgaXMgcHJlc2VydmVkIGZvciBNUlQgc3VwcG9ydCBpbiBXZWJHTDIuMFxuICAgICAgICBvdXRwdXRzOiB7XG4gICAgICAgICAgICBjb2xvcjoge1xuICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQ6IGNsYXkuRnJhbWVCdWZmZXIuQ09MT1JfQVRUQUNITUVOVDBcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogY2xheS5UZXh0dXJlLlJHQkEsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiA1MTIsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogNTEyXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBOb2RlIHdpbGwga2VlcCB0aGUgUlRUIHJlbmRlcmVkIGluIGxhc3QgZnJhbWVcbiAgICAgICAgICAgICAgICBrZWVwTGFzdEZyYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgIC8vIEZvcmNlIHRoZSBub2RlIG91dHB1dCB0aGUgUlRUIHJlbmRlcmVkIGluIGxhc3QgZnJhbWVcbiAgICAgICAgICAgICAgICBvdXRwdXRMYXN0RnJhbWU6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgICpcbiAgICAqL1xudmFyIEZpbHRlck5vZGUgPSBDb21wb3NpdG9yTm9kZS5leHRlbmQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuY29tcG9zaXRvci5GaWx0ZXJOb2RlIyAqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgbmFtZTogJycsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICBpbnB1dHM6IHt9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgb3V0cHV0czogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHNoYWRlcjogJycsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElucHV0IGxpbmtzLCB3aWxsIGJlIHVwZGF0ZWQgYnkgdGhlIGdyYXBoXG4gICAgICAgICAqIEBleGFtcGxlOlxuICAgICAgICAgKiAgICAgaW5wdXROYW1lOiB7XG4gICAgICAgICAqICAgICAgICAgbm9kZTogc29tZU5vZGUsXG4gICAgICAgICAqICAgICAgICAgcGluOiAneHh4eCdcbiAgICAgICAgICogICAgIH1cbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIGlucHV0TGlua3M6IHt9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPdXRwdXQgbGlua3MsIHdpbGwgYmUgdXBkYXRlZCBieSB0aGUgZ3JhcGhcbiAgICAgICAgICogQGV4YW1wbGU6XG4gICAgICAgICAqICAgICBvdXRwdXROYW1lOiB7XG4gICAgICAgICAqICAgICAgICAgbm9kZTogc29tZU5vZGUsXG4gICAgICAgICAqICAgICAgICAgcGluOiAneHh4eCdcbiAgICAgICAgICogICAgIH1cbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIG91dHB1dExpbmtzOiB7fSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2NsYXkuY29tcG9zaXRvci5QYXNzfVxuICAgICAgICAgKi9cbiAgICAgICAgcGFzczogbnVsbCxcblxuICAgICAgICAvLyBTYXZlIHRoZSBvdXRwdXQgdGV4dHVyZSBvZiBwcmV2aW91cyBmcmFtZVxuICAgICAgICAvLyBXaWxsIGJlIHVzZWQgd2hlbiB0aGVyZSBleGlzdCBhIGNpcmN1bGFyIHJlZmVyZW5jZVxuICAgICAgICBfcHJldk91dHB1dFRleHR1cmVzOiB7fSxcbiAgICAgICAgX291dHB1dFRleHR1cmVzOiB7fSxcblxuICAgICAgICAvLyBFeGFtcGxlOiB7IG5hbWU6IDIgfVxuICAgICAgICBfb3V0cHV0UmVmZXJlbmNlczoge30sXG5cbiAgICAgICAgX3JlbmRlcmluZzogZmFsc2UsXG4gICAgICAgIC8vIElmIHJlbmRlcmVkIGluIHRoaXMgZnJhbWVcbiAgICAgICAgX3JlbmRlcmVkOiBmYWxzZSxcblxuICAgICAgICBfY29tcG9zaXRvcjogbnVsbFxuICAgIH07XG59LCBmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgcGFzcyA9IG5ldyBQYXNzKHtcbiAgICAgICAgZnJhZ21lbnQ6IHRoaXMuc2hhZGVyXG4gICAgfSk7XG4gICAgdGhpcy5wYXNzID0gcGFzcztcbn0sXG4vKiogQGxlbmRzIGNsYXkuY29tcG9zaXRvci5GaWx0ZXJOb2RlLnByb3RvdHlwZSAqL1xue1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICovXG4gICAgcmVuZGVyOiBmdW5jdGlvbiAocmVuZGVyZXIsIGZyYW1lQnVmZmVyKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlcmVuZGVyJywgcmVuZGVyZXIpO1xuXG4gICAgICAgIHRoaXMuX3JlbmRlcmluZyA9IHRydWU7XG5cbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuXG4gICAgICAgIGZvciAodmFyIGlucHV0TmFtZSBpbiB0aGlzLmlucHV0TGlua3MpIHtcbiAgICAgICAgICAgIHZhciBsaW5rID0gdGhpcy5pbnB1dExpbmtzW2lucHV0TmFtZV07XG4gICAgICAgICAgICB2YXIgaW5wdXRUZXh0dXJlID0gbGluay5ub2RlLmdldE91dHB1dChyZW5kZXJlciwgbGluay5waW4pO1xuICAgICAgICAgICAgdGhpcy5wYXNzLnNldFVuaWZvcm0oaW5wdXROYW1lLCBpbnB1dFRleHR1cmUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE91dHB1dFxuICAgICAgICBpZiAoIXRoaXMub3V0cHV0cykge1xuICAgICAgICAgICAgdGhpcy5wYXNzLm91dHB1dHMgPSBudWxsO1xuXG4gICAgICAgICAgICB0aGlzLl9jb21wb3NpdG9yLmdldEZyYW1lQnVmZmVyKCkudW5iaW5kKHJlbmRlcmVyKTtcblxuICAgICAgICAgICAgdGhpcy5wYXNzLnJlbmRlcihyZW5kZXJlciwgZnJhbWVCdWZmZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYXNzLm91dHB1dHMgPSB7fTtcblxuICAgICAgICAgICAgdmFyIGF0dGFjaGVkVGV4dHVyZXMgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5vdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSB0aGlzLnVwZGF0ZVBhcmFtZXRlcihuYW1lLCByZW5kZXJlcik7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKHBhcmFtZXRlcnMud2lkdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUGFyYW1ldGVyKG5hbWUsIHJlbmRlcmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIG91dHB1dEluZm8gPSB0aGlzLm91dHB1dHNbbmFtZV07XG4gICAgICAgICAgICAgICAgdmFyIHRleHR1cmUgPSB0aGlzLl9jb21wb3NpdG9yLmFsbG9jYXRlVGV4dHVyZShwYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9vdXRwdXRUZXh0dXJlc1tuYW1lXSA9IHRleHR1cmU7XG4gICAgICAgICAgICAgICAgdmFyIGF0dGFjaG1lbnQgPSBvdXRwdXRJbmZvLmF0dGFjaG1lbnQgfHwgX2dsLkNPTE9SX0FUVEFDSE1FTlQwO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoYXR0YWNobWVudCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQgPSBfZ2xbYXR0YWNobWVudF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF0dGFjaGVkVGV4dHVyZXNbYXR0YWNobWVudF0gPSB0ZXh0dXJlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fY29tcG9zaXRvci5nZXRGcmFtZUJ1ZmZlcigpLmJpbmQocmVuZGVyZXIpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBhdHRhY2htZW50IGluIGF0dGFjaGVkVGV4dHVyZXMpIHtcbiAgICAgICAgICAgICAgICAvLyBGSVhNRSBhdHRhY2htZW50IGNoYW5nZXMgaW4gZGlmZmVyZW50IG5vZGVzXG4gICAgICAgICAgICAgICAgdGhpcy5fY29tcG9zaXRvci5nZXRGcmFtZUJ1ZmZlcigpLmF0dGFjaChcbiAgICAgICAgICAgICAgICAgICAgYXR0YWNoZWRUZXh0dXJlc1thdHRhY2htZW50XSwgYXR0YWNobWVudFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucGFzcy5yZW5kZXIocmVuZGVyZXIpO1xuXG4gICAgICAgICAgICAvLyBCZWNhdXNlIHRoZSBkYXRhIG9mIHRleHR1cmUgaXMgY2hhbmdlZCBvdmVyIHRpbWUsXG4gICAgICAgICAgICAvLyBIZXJlIHVwZGF0ZSB0aGUgbWlwbWFwcyBvZiB0ZXh0dXJlIGVhY2ggdGltZSBhZnRlciByZW5kZXJlZDtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBvc2l0b3IuZ2V0RnJhbWVCdWZmZXIoKS51cGRhdGVNaXBtYXAocmVuZGVyZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaW5wdXROYW1lIGluIHRoaXMuaW5wdXRMaW5rcykge1xuICAgICAgICAgICAgdmFyIGxpbmsgPSB0aGlzLmlucHV0TGlua3NbaW5wdXROYW1lXTtcbiAgICAgICAgICAgIGxpbmsubm9kZS5yZW1vdmVSZWZlcmVuY2UobGluay5waW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcmVuZGVyaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVkID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2FmdGVycmVuZGVyJywgcmVuZGVyZXIpO1xuICAgIH0sXG5cbiAgICAvLyBUT0RPIFJlbW92ZSBwYXJhbWV0ZXIgZnVuY3Rpb24gY2FsbGJhY2tcbiAgICB1cGRhdGVQYXJhbWV0ZXI6IGZ1bmN0aW9uIChvdXRwdXROYW1lLCByZW5kZXJlcikge1xuICAgICAgICB2YXIgb3V0cHV0SW5mbyA9IHRoaXMub3V0cHV0c1tvdXRwdXROYW1lXTtcbiAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSBvdXRwdXRJbmZvLnBhcmFtZXRlcnM7XG4gICAgICAgIHZhciBwYXJhbWV0ZXJzQ29weSA9IG91dHB1dEluZm8uX3BhcmFtZXRlcnNDb3B5O1xuICAgICAgICBpZiAoIXBhcmFtZXRlcnNDb3B5KSB7XG4gICAgICAgICAgICBwYXJhbWV0ZXJzQ29weSA9IG91dHB1dEluZm8uX3BhcmFtZXRlcnNDb3B5ID0ge307XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSAhPT0gJ3dpZHRoJyAmJiBrZXkgIT09ICdoZWlnaHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnNDb3B5W2tleV0gPSBwYXJhbWV0ZXJzW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciB3aWR0aCwgaGVpZ2h0O1xuICAgICAgICBpZiAodHlwZW9mIHBhcmFtZXRlcnMud2lkdGggPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHdpZHRoID0gcGFyYW1ldGVycy53aWR0aC5jYWxsKHRoaXMsIHJlbmRlcmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdpZHRoID0gcGFyYW1ldGVycy53aWR0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHBhcmFtZXRlcnMuaGVpZ2h0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBoZWlnaHQgPSBwYXJhbWV0ZXJzLmhlaWdodC5jYWxsKHRoaXMsIHJlbmRlcmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhlaWdodCA9IHBhcmFtZXRlcnMuaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHdpZHRoID0gTWF0aC5jZWlsKHdpZHRoKTtcbiAgICAgICAgaGVpZ2h0ID0gTWF0aC5jZWlsKGhlaWdodCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHBhcmFtZXRlcnNDb3B5LndpZHRoICE9PSB3aWR0aFxuICAgICAgICAgICAgfHwgcGFyYW1ldGVyc0NvcHkuaGVpZ2h0ICE9PSBoZWlnaHRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fb3V0cHV0VGV4dHVyZXNbb3V0cHV0TmFtZV0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vdXRwdXRUZXh0dXJlc1tvdXRwdXROYW1lXS5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwYXJhbWV0ZXJzQ29weS53aWR0aCA9IHdpZHRoO1xuICAgICAgICBwYXJhbWV0ZXJzQ29weS5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgICAgcmV0dXJuIHBhcmFtZXRlcnNDb3B5O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgcGFyYW1ldGVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0ge30gdmFsdWVcbiAgICAgKi9cbiAgICBzZXRQYXJhbWV0ZXI6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLnBhc3Muc2V0VW5pZm9ybShuYW1lLCB2YWx1ZSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBHZXQgcGFyYW1ldGVyIHZhbHVlXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBuYW1lXG4gICAgICogQHJldHVybiB7fVxuICAgICAqL1xuICAgIGdldFBhcmFtZXRlcjogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFzcy5nZXRVbmlmb3JtKG5hbWUpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogU2V0IHBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gICAgICovXG4gICAgc2V0UGFyYW1ldGVyczogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIG9iaikge1xuICAgICAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXIobmFtZSwgb2JqW25hbWVdKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLy8gLyoqXG4gICAgLy8gICogU2V0IHNoYWRlciBjb2RlXG4gICAgLy8gICogQHBhcmFtIHtzdHJpbmd9IHNoYWRlclN0clxuICAgIC8vICAqL1xuICAgIC8vIHNldFNoYWRlcjogZnVuY3Rpb24gKHNoYWRlclN0cikge1xuICAgIC8vICAgICB2YXIgbWF0ZXJpYWwgPSB0aGlzLnBhc3MubWF0ZXJpYWw7XG4gICAgLy8gICAgIG1hdGVyaWFsLnNoYWRlci5zZXRGcmFnbWVudChzaGFkZXJTdHIpO1xuICAgIC8vICAgICBtYXRlcmlhbC5hdHRhY2hTaGFkZXIobWF0ZXJpYWwuc2hhZGVyLCB0cnVlKTtcbiAgICAvLyB9LFxuICAgIC8qKlxuICAgICAqIFByb3h5IG9mIHBhc3MubWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsIHh4eCk7XG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBzeW1ib2xcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IFt2YWxdXG4gICAgICovXG4gICAgZGVmaW5lOiBmdW5jdGlvbiAoc3ltYm9sLCB2YWwpIHtcbiAgICAgICAgdGhpcy5wYXNzLm1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCBzeW1ib2wsIHZhbCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFByb3h5IG9mIHBhc3MubWF0ZXJpYWwudW5kZWZpbmUoJ2ZyYWdtZW50JywgeHh4KVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gc3ltYm9sXG4gICAgICovXG4gICAgdW5kZWZpbmU6IGZ1bmN0aW9uIChzeW1ib2wpIHtcbiAgICAgICAgdGhpcy5wYXNzLm1hdGVyaWFsLnVuZGVmaW5lKCdmcmFnbWVudCcsIHN5bWJvbCk7XG4gICAgfSxcblxuICAgIHJlbW92ZVJlZmVyZW5jZTogZnVuY3Rpb24gKG91dHB1dE5hbWUpIHtcbiAgICAgICAgdGhpcy5fb3V0cHV0UmVmZXJlbmNlc1tvdXRwdXROYW1lXS0tO1xuICAgICAgICBpZiAodGhpcy5fb3V0cHV0UmVmZXJlbmNlc1tvdXRwdXROYW1lXSA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIG91dHB1dEluZm8gPSB0aGlzLm91dHB1dHNbb3V0cHV0TmFtZV07XG4gICAgICAgICAgICBpZiAob3V0cHV0SW5mby5rZWVwTGFzdEZyYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3ByZXZPdXRwdXRUZXh0dXJlc1tvdXRwdXROYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb21wb3NpdG9yLnJlbGVhc2VUZXh0dXJlKHRoaXMuX3ByZXZPdXRwdXRUZXh0dXJlc1tvdXRwdXROYW1lXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX3ByZXZPdXRwdXRUZXh0dXJlc1tvdXRwdXROYW1lXSA9IHRoaXMuX291dHB1dFRleHR1cmVzW291dHB1dE5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gT3V0cHV0IG9mIHRoaXMgbm9kZSBoYXZlIGFscmVheSBiZWVuIHVzZWQgYnkgYWxsIG90aGVyIG5vZGVzXG4gICAgICAgICAgICAgICAgLy8gUHV0IHRoZSB0ZXh0dXJlIGJhY2sgdG8gdGhlIHBvb2wuXG4gICAgICAgICAgICAgICAgdGhpcy5fY29tcG9zaXRvci5yZWxlYXNlVGV4dHVyZSh0aGlzLl9vdXRwdXRUZXh0dXJlc1tvdXRwdXROYW1lXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgQ29tcG9zaXRvck5vZGUucHJvdG90eXBlLmNsZWFyLmNhbGwodGhpcyk7XG5cbiAgICAgICAgLy8gRGVmYXVsdCBkaXNhYmxlIGFsbCB0ZXh0dXJlXG4gICAgICAgIHRoaXMucGFzcy5tYXRlcmlhbC5kaXNhYmxlVGV4dHVyZXNBbGwoKTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgRmlsdGVyTm9kZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvY29tcG9zaXRvci9GaWx0ZXJOb2RlLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///106\n");

/***/ }),
/* 107 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"a\"] = register;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__source_compositor_coloradjust_glsl_js__ = __webpack_require__(144);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__source_compositor_blur_glsl_js__ = __webpack_require__(145);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__source_compositor_lum_glsl_js__ = __webpack_require__(146);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__source_compositor_lut_glsl_js__ = __webpack_require__(147);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__source_compositor_vignette_glsl_js__ = __webpack_require__(148);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__source_compositor_output_glsl_js__ = __webpack_require__(149);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__source_compositor_bright_glsl_js__ = __webpack_require__(150);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__source_compositor_downsample_glsl_js__ = __webpack_require__(151);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__source_compositor_upsample_glsl_js__ = __webpack_require__(152);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__source_compositor_hdr_glsl_js__ = __webpack_require__(153);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__source_compositor_lensflare_glsl_js__ = __webpack_require__(154);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__source_compositor_blend_glsl_js__ = __webpack_require__(155);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__source_compositor_fxaa_glsl_js__ = __webpack_require__(156);\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import fxaa3Essl from './source/compositor/fxaa3.glsl.js';\n\n// TODO Must export a module and be used in the other modules. Or it will be tree shaked\nfunction register(Shader) {\n    // Some build in shaders\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_0__source_compositor_coloradjust_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_1__source_compositor_blur_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_2__source_compositor_lum_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_3__source_compositor_lut_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_4__source_compositor_vignette_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_5__source_compositor_output_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_6__source_compositor_bright_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_7__source_compositor_downsample_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_8__source_compositor_upsample_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_9__source_compositor_hdr_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_10__source_compositor_lensflare_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_11__source_compositor_blend_glsl_js__[\"a\" /* default */]);\n\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_12__source_compositor_fxaa_glsl_js__[\"a\" /* default */]);\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3JlZ2lzdGVyQnVpbHRpbkNvbXBvc2l0b3IuanM/OGUxZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JhZGp1c3RFc3NsIGZyb20gJy4vc291cmNlL2NvbXBvc2l0b3IvY29sb3JhZGp1c3QuZ2xzbC5qcyc7XG5pbXBvcnQgYmx1ckVzc2wgZnJvbSAnLi9zb3VyY2UvY29tcG9zaXRvci9ibHVyLmdsc2wuanMnO1xuaW1wb3J0IGx1bUVzc2wgZnJvbSAnLi9zb3VyY2UvY29tcG9zaXRvci9sdW0uZ2xzbC5qcyc7XG5pbXBvcnQgbHV0RXNzbCBmcm9tICcuL3NvdXJjZS9jb21wb3NpdG9yL2x1dC5nbHNsLmpzJztcbmltcG9ydCB2aWdlbnR0ZUVzc2wgZnJvbSAnLi9zb3VyY2UvY29tcG9zaXRvci92aWduZXR0ZS5nbHNsLmpzJztcbmltcG9ydCBvdXRwdXRFc3NsIGZyb20gJy4vc291cmNlL2NvbXBvc2l0b3Ivb3V0cHV0Lmdsc2wuanMnO1xuaW1wb3J0IGJyaWdodEVzc2wgZnJvbSAnLi9zb3VyY2UvY29tcG9zaXRvci9icmlnaHQuZ2xzbC5qcyc7XG5pbXBvcnQgZG93bnNhbXBsZUVzc2wgZnJvbSAnLi9zb3VyY2UvY29tcG9zaXRvci9kb3duc2FtcGxlLmdsc2wuanMnO1xuaW1wb3J0IHVwc2FtcGxlRXNzbCBmcm9tICcuL3NvdXJjZS9jb21wb3NpdG9yL3Vwc2FtcGxlLmdsc2wuanMnO1xuaW1wb3J0IGhkckVzc2wgZnJvbSAnLi9zb3VyY2UvY29tcG9zaXRvci9oZHIuZ2xzbC5qcyc7XG5pbXBvcnQgbGVuc2ZsYXJlRXNzbCBmcm9tICcuL3NvdXJjZS9jb21wb3NpdG9yL2xlbnNmbGFyZS5nbHNsLmpzJztcbmltcG9ydCBibGVuZEVzc2wgZnJvbSAnLi9zb3VyY2UvY29tcG9zaXRvci9ibGVuZC5nbHNsLmpzJztcbmltcG9ydCBmeGFhRXNzbCBmcm9tICcuL3NvdXJjZS9jb21wb3NpdG9yL2Z4YWEuZ2xzbC5qcyc7XG4vLyBpbXBvcnQgZnhhYTNFc3NsIGZyb20gJy4vc291cmNlL2NvbXBvc2l0b3IvZnhhYTMuZ2xzbC5qcyc7XG5cbi8vIFRPRE8gTXVzdCBleHBvcnQgYSBtb2R1bGUgYW5kIGJlIHVzZWQgaW4gdGhlIG90aGVyIG1vZHVsZXMuIE9yIGl0IHdpbGwgYmUgdHJlZSBzaGFrZWRcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlZ2lzdGVyKFNoYWRlcikge1xuICAgIC8vIFNvbWUgYnVpbGQgaW4gc2hhZGVyc1xuICAgIFNoYWRlclsnaW1wb3J0J10oY29sb3JhZGp1c3RFc3NsKTtcbiAgICBTaGFkZXJbJ2ltcG9ydCddKGJsdXJFc3NsKTtcbiAgICBTaGFkZXJbJ2ltcG9ydCddKGx1bUVzc2wpO1xuICAgIFNoYWRlclsnaW1wb3J0J10obHV0RXNzbCk7XG4gICAgU2hhZGVyWydpbXBvcnQnXSh2aWdlbnR0ZUVzc2wpO1xuICAgIFNoYWRlclsnaW1wb3J0J10ob3V0cHV0RXNzbCk7XG4gICAgU2hhZGVyWydpbXBvcnQnXShicmlnaHRFc3NsKTtcbiAgICBTaGFkZXJbJ2ltcG9ydCddKGRvd25zYW1wbGVFc3NsKTtcbiAgICBTaGFkZXJbJ2ltcG9ydCddKHVwc2FtcGxlRXNzbCk7XG4gICAgU2hhZGVyWydpbXBvcnQnXShoZHJFc3NsKTtcbiAgICBTaGFkZXJbJ2ltcG9ydCddKGxlbnNmbGFyZUVzc2wpO1xuICAgIFNoYWRlclsnaW1wb3J0J10oYmxlbmRFc3NsKTtcblxuICAgIFNoYWRlclsnaW1wb3J0J10oZnhhYUVzc2wpO1xuXG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvcmVnaXN0ZXJCdWlsdGluQ29tcG9zaXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMTA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///107\n");

/***/ }),
/* 108 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__FrameBuffer__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__compositor_Pass__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__shader_source_deferred_gbuffer_glsl_js__ = __webpack_require__(157);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__shader_source_deferred_chunk_glsl_js__ = __webpack_require__(158);\n\n\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_9__shader_source_deferred_gbuffer_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_10__shader_source_deferred_chunk_glsl_js__[\"a\" /* default */]);\n\nfunction createFillCanvas(color) {\n    var canvas = document.createElement('canvas');\n    canvas.width = canvas.height = 1;\n    var ctx = canvas.getContext('2d');\n    ctx.fillStyle = color || '#000';\n    ctx.fillRect(0, 0, 1, 1);\n\n    return canvas;\n}\n\n// TODO specularColor\n// TODO Performance improvement\nfunction getGetUniformHook1(defaultNormalMap, defaultRoughnessMap, defaultDiffuseMap) {\n\n    return function (renderable, gBufferMat, symbol) {\n        var standardMaterial = renderable.material;\n        if (symbol === 'doubleSided') {\n            return standardMaterial.isDefined('fragment', 'DOUBLE_SIDED');\n        }\n        else if (symbol === 'uvRepeat' || symbol === 'uvOffset' || symbol === 'alpha') {\n            return standardMaterial.get(symbol);\n        }\n        else if (symbol === 'normalMap') {\n            return standardMaterial.get(symbol) || defaultNormalMap;\n        }\n        else if (symbol === 'diffuseMap') {\n            return standardMaterial.get(symbol) || defaultDiffuseMap;\n        }\n        else if (symbol === 'alphaCutoff') {\n            // TODO DIFFUSEMAP_ALPHA_ALPHA\n            if (standardMaterial.isDefined('fragment', 'ALPHA_TEST')) {\n                var alphaCutoff = standardMaterial.get('alphaCutoff');\n                return alphaCutoff || 0;\n            }\n            return 0;\n        }\n        else {\n            var useRoughnessWorkflow = standardMaterial.isDefined('fragment', 'USE_ROUGHNESS');\n            var roughGlossMap = useRoughnessWorkflow ? standardMaterial.get('roughnessMap') : standardMaterial.get('glossinessMap');\n            switch (symbol) {\n                case 'glossiness':\n                    return useRoughnessWorkflow ? (1.0 - standardMaterial.get('roughness')) : standardMaterial.get('glossiness');\n                case 'roughGlossMap':\n                    return roughGlossMap;\n                case 'useRoughGlossMap':\n                    return !!roughGlossMap;\n                case 'useRoughness':\n                    return useRoughnessWorkflow;\n                case 'roughGlossChannel':\n                    return useRoughnessWorkflow\n                        ? standardMaterial.getDefine('fragment', 'ROUGHNESS_CHANNEL')\n                        : standardMaterial.getDefine('fragment', 'GLOSSINESS_CHANNEL');\n            }\n        }\n    };\n}\n\nfunction getGetUniformHook2(defaultDiffuseMap, defaultMetalnessMap) {\n    return function (renderable, gBufferMat, symbol) {\n        var standardMaterial = renderable.material;\n        switch (symbol) {\n            case 'color':\n            case 'uvRepeat':\n            case 'uvOffset':\n            case 'alpha':\n                return standardMaterial.get(symbol);\n            case 'metalness':\n                return standardMaterial.get('metalness') || 0;\n            case 'diffuseMap':\n                return standardMaterial.get(symbol) || defaultDiffuseMap;\n            case 'metalnessMap':\n                return standardMaterial.get(symbol) || defaultMetalnessMap;\n            case 'useMetalnessMap':\n                return !!standardMaterial.get('metalnessMap');\n            case 'linear':\n                return standardMaterial.isDefined('SRGB_DECODE');\n            case 'alphaCutoff':\n                // TODO DIFFUSEMAP_ALPHA_ALPHA\n                if (standardMaterial.isDefined('fragment', 'ALPHA_TEST')) {\n                    var alphaCutoff = standardMaterial.get('alphaCutoff');\n                    return alphaCutoff || 0.0;\n                }\n                return 0.0;\n        }\n    };\n}\n\n/**\n * GBuffer is provided for deferred rendering and SSAO, SSR pass.\n * It will do three passes rendering to four target textures. See\n * + {@link clay.deferred.GBuffer#getTargetTexture1}\n * + {@link clay.deferred.GBuffer#getTargetTexture2}\n * + {@link clay.deferred.GBuffer#getTargetTexture3}\n * + {@link clay.deferred.GBuffer#getTargetTexture4}\n * @constructor\n * @alias clay.deferred.GBuffer\n * @extends clay.core.Base\n */\nvar GBuffer = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n\n    var commonTextureOpts = {\n        minFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n        magFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n        wrapS: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].CLAMP_TO_EDGE,\n        wrapT: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].CLAMP_TO_EDGE,\n    };\n\n    return /** @lends clay.deferred.GBuffer# */ {\n\n        /**\n         * If enable gbuffer texture 1.\n         * @type {boolean}\n         */\n        enableTargetTexture1: true,\n\n        /**\n         * If enable gbuffer texture 2.\n         * @type {boolean}\n         */\n        enableTargetTexture2: true,\n\n        /**\n         * If enable gbuffer texture 3.\n         * @type {boolean}\n         */\n        enableTargetTexture3: true,\n\n        /**\n         * If enable gbuffer texture 4.\n         * @type {boolean}\n         */\n        enableTargetTexture4: false,\n\n        renderTransparent: false,\n\n        _gBufferRenderList: [],\n        // - R: normal.x\n        // - G: normal.y\n        // - B: normal.z\n        // - A: glossiness\n        _gBufferTex1: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */](Object.assign({\n            // PENDING\n            type: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].HALF_FLOAT\n        }, commonTextureOpts)),\n\n        // - R: depth\n        _gBufferTex2: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */](Object.assign({\n            // format: Texture.DEPTH_COMPONENT,\n            // type: Texture.UNSIGNED_INT\n\n            format: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].DEPTH_STENCIL,\n            type: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].UNSIGNED_INT_24_8_WEBGL\n        }, commonTextureOpts)),\n\n        // - R: albedo.r\n        // - G: albedo.g\n        // - B: albedo.b\n        // - A: metalness\n        _gBufferTex3: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */](commonTextureOpts),\n\n        _gBufferTex4: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */](Object.assign({\n            // FLOAT Texture has bug on iOS. is HALF_FLOAT enough?\n            type: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].HALF_FLOAT\n        }, commonTextureOpts)),\n\n        _defaultNormalMap: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */]({\n            image: createFillCanvas('#000')\n        }),\n        _defaultRoughnessMap: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */]({\n            image: createFillCanvas('#fff')\n        }),\n        _defaultMetalnessMap: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */]({\n            image: createFillCanvas('#fff')\n        }),\n        _defaultDiffuseMap: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */]({\n            image: createFillCanvas('#fff')\n        }),\n\n        _frameBuffer: new __WEBPACK_IMPORTED_MODULE_4__FrameBuffer__[\"a\" /* default */](),\n\n        _gBufferMaterial1: new __WEBPACK_IMPORTED_MODULE_3__Material__[\"a\" /* default */]({\n            shader: new __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */](\n                __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source('clay.deferred.gbuffer.vertex'),\n                __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source('clay.deferred.gbuffer1.fragment')\n            ),\n            vertexDefines: {\n                FIRST_PASS: null\n            },\n            fragmentDefines: {\n                FIRST_PASS: null\n            }\n        }),\n        _gBufferMaterial2: new __WEBPACK_IMPORTED_MODULE_3__Material__[\"a\" /* default */]({\n            shader: new __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */](\n                __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source('clay.deferred.gbuffer.vertex'),\n                __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source('clay.deferred.gbuffer2.fragment')\n            ),\n            vertexDefines: {\n                SECOND_PASS: null\n            },\n            fragmentDefines: {\n                SECOND_PASS: null\n            }\n        }),\n        _gBufferMaterial3: new __WEBPACK_IMPORTED_MODULE_3__Material__[\"a\" /* default */]({\n            shader: new __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */](\n                __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source('clay.deferred.gbuffer.vertex'),\n                __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source('clay.deferred.gbuffer3.fragment')\n            ),\n            vertexDefines: {\n                THIRD_PASS: null\n            },\n            fragmentDefines: {\n                THIRD_PASS: null\n            }\n        }),\n\n        _debugPass: new __WEBPACK_IMPORTED_MODULE_6__compositor_Pass__[\"a\" /* default */]({\n            fragment: __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source('clay.deferred.gbuffer.debug')\n        })\n    };\n}, /** @lends clay.deferred.GBuffer# */{\n\n    /**\n     * Set G Buffer size.\n     * @param {number} width\n     * @param {number} height\n     */\n    resize: function (width, height) {\n        if (this._gBufferTex1.width === width\n            && this._gBufferTex1.height === height\n        ) {\n            return;\n        }\n        this._gBufferTex1.width = width;\n        this._gBufferTex1.height = height;\n\n        this._gBufferTex2.width = width;\n        this._gBufferTex2.height = height;\n\n        this._gBufferTex3.width = width;\n        this._gBufferTex3.height = height;\n\n        this._gBufferTex4.width = width;\n        this._gBufferTex4.height = height;\n    },\n\n    // TODO is dpr needed?\n    setViewport: function (x, y, width, height, dpr) {\n        var viewport;\n        if (typeof x === 'object') {\n            viewport = x;\n        }\n        else {\n            viewport = {\n                x: x, y: y,\n                width: width, height: height,\n                devicePixelRatio: dpr || 1\n            };\n        }\n        this._frameBuffer.viewport = viewport;\n    },\n\n    getViewport: function () {\n        if (this._frameBuffer.viewport) {\n            return this._frameBuffer.viewport;\n        }\n        else {\n            return {\n                x: 0, y: 0,\n                width: this._gBufferTex1.width,\n                height: this._gBufferTex1.height,\n                devicePixelRatio: 1\n            };\n        }\n    },\n\n    /**\n     * Update GBuffer\n     * @param {clay.Renderer} renderer\n     * @param {clay.Scene} scene\n     * @param {clay.Camera} camera\n     * @param {Object} opts\n     */\n    update: function (renderer, scene, camera, opts) {\n        opts = opts || {};\n\n        var gl = renderer.gl;\n\n        var frameBuffer = this._frameBuffer;\n        var viewport = frameBuffer.viewport;\n\n        var renderList = scene.updateRenderList(camera, true);\n\n        var opaqueList = renderList.opaque;\n        var transparentList = renderList.transparent;\n\n        var offset = 0;\n        var gBufferRenderList = this._gBufferRenderList;\n        for (var i = 0; i < opaqueList.length; i++) {\n            if (!opaqueList[i].ignoreGBuffer) {\n                gBufferRenderList[offset++] = opaqueList[i];\n            }\n        }\n        if (this.renderTransparent) {\n            for (var i = 0; i < transparentList.length; i++) {\n                if (!transparentList[i].ignoreGBuffer) {\n                    gBufferRenderList[offset++] = transparentList[i];\n                }\n            }\n        }\n        gBufferRenderList.length = offset;\n\n        gl.clearColor(0, 0, 0, 0);\n        gl.depthMask(true);\n        gl.colorMask(true, true, true, true);\n        gl.disable(gl.BLEND);\n\n        var enableTargetTexture1 = this.enableTargetTexture1;\n        var enableTargetTexture2 = this.enableTargetTexture2;\n        var enableTargetTexture3 = this.enableTargetTexture3;\n        var enableTargetTexture4 = this.enableTargetTexture4;\n        if (!enableTargetTexture1 && !enableTargetTexture3 && !enableTargetTexture4) {\n            console.warn('Can\\'t disable targetTexture1, targetTexture3, targetTexture4 both');\n            enableTargetTexture1 = true;\n        }\n\n        if (enableTargetTexture2) {\n            frameBuffer.attach(opts.targetTexture2 || this._gBufferTex2, renderer.gl.DEPTH_STENCIL_ATTACHMENT);\n        }\n\n        function clearViewport() {\n            if (viewport) {\n                var dpr = viewport.devicePixelRatio;\n                // use scissor to make sure only clear the viewport\n                gl.enable(gl.SCISSOR_TEST);\n                gl.scissor(viewport.x * dpr, viewport.y * dpr, viewport.width * dpr, viewport.height * dpr);\n            }\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n            if (viewport) {\n                gl.disable(gl.SCISSOR_TEST);\n            }\n        }\n\n        function isMaterialChanged(renderable, prevRenderable) {\n            return renderable.material !== prevRenderable.material;\n        }\n\n        // PENDING, scene.boundingBoxLastFrame needs be updated if have shadow\n        renderer.bindSceneRendering(scene);\n        if (enableTargetTexture1) {\n            // Pass 1\n            frameBuffer.attach(opts.targetTexture1 || this._gBufferTex1);\n            frameBuffer.bind(renderer);\n\n            clearViewport();\n\n            var gBufferMaterial1 = this._gBufferMaterial1;\n            var passConfig = {\n                getMaterial: function () {\n                    return gBufferMaterial1;\n                },\n                getUniform: getGetUniformHook1(this._defaultNormalMap, this._defaultRoughnessMap, this._defaultDiffuseMap),\n                isMaterialChanged: isMaterialChanged,\n                sortCompare: renderer.opaqueSortCompare\n            };\n            // FIXME Use MRT if possible\n            renderer.renderPass(gBufferRenderList, camera, passConfig);\n\n        }\n        if (enableTargetTexture3) {\n\n            // Pass 2\n            frameBuffer.attach(opts.targetTexture3 || this._gBufferTex3);\n            frameBuffer.bind(renderer);\n\n            clearViewport();\n\n            var gBufferMaterial2 = this._gBufferMaterial2;\n            var passConfig = {\n                getMaterial: function () {\n                    return gBufferMaterial2;\n                },\n                getUniform: getGetUniformHook2(this._defaultDiffuseMap, this._defaultMetalnessMap),\n                isMaterialChanged: isMaterialChanged,\n                sortCompare: renderer.opaqueSortCompare\n            };\n            renderer.renderPass(gBufferRenderList, camera, passConfig);\n        }\n\n        if (enableTargetTexture4) {\n            frameBuffer.bind(renderer);\n            frameBuffer.attach(opts.targetTexture4 || this._gBufferTex4);\n\n            clearViewport();\n\n            // Remove jittering in temporal aa.\n            // PENDING. Better solution?\n            camera.update();\n\n            var gBufferMaterial3 = this._gBufferMaterial3;\n            var cameraViewProj = __WEBPACK_IMPORTED_MODULE_8__glmatrix_mat4__[\"a\" /* default */].create();\n            __WEBPACK_IMPORTED_MODULE_8__glmatrix_mat4__[\"a\" /* default */].multiply(cameraViewProj, camera.projectionMatrix.array, camera.viewMatrix.array);\n            var passConfig = {\n                getMaterial: function () {\n                    return gBufferMaterial3;\n                },\n                afterRender: function (renderer, renderable) {\n                    var isSkinnedMesh = renderable.isSkinnedMesh();\n                    if (isSkinnedMesh) {\n                        var skeleton = renderable.skeleton;\n                        var joints = renderable.joints;\n                        if (joints.length > renderer.getMaxJointNumber()) {\n                            var skinMatricesTexture = skeleton.getSubSkinMatricesTexture(renderable.__uid__, joints);\n                            var prevSkinMatricesTexture = renderable.__prevSkinMatricesTexture;\n                            if (!prevSkinMatricesTexture) {\n                                prevSkinMatricesTexture = renderable.__prevSkinMatricesTexture = new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */]({\n                                    type: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].FLOAT,\n                                    minFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n                                    magFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n                                    useMipmap: false,\n                                    flipY: false\n                                });\n                            }\n                            if (!prevSkinMatricesTexture.pixels\n                                || prevSkinMatricesTexture.pixels.length !== skinMatricesTexture.pixels.length\n                            ) {\n                                prevSkinMatricesTexture.pixels = new Float32Array(skinMatricesTexture.pixels);\n                            }\n                            else {\n                                for (var i = 0; i < skinMatricesTexture.pixels.length; i++) {\n                                    prevSkinMatricesTexture.pixels[i] = skinMatricesTexture.pixels[i];\n                                }\n                            }\n                            prevSkinMatricesTexture.width = skinMatricesTexture.width;\n                            prevSkinMatricesTexture.height = skinMatricesTexture.height;\n                        }\n                        else {\n                            var skinMatricesArray = skeleton.getSubSkinMatrices(renderable.__uid__, joints);\n                            if (!renderable.__prevSkinMatricesArray || renderable.__prevSkinMatricesArray.length !== skinMatricesArray.length) {\n                                renderable.__prevSkinMatricesArray = new Float32Array(skinMatricesArray.length);\n                            }\n                            renderable.__prevSkinMatricesArray.set(skinMatricesArray);\n                        }\n                    }\n                    renderable.__prevWorldViewProjection = renderable.__prevWorldViewProjection || __WEBPACK_IMPORTED_MODULE_8__glmatrix_mat4__[\"a\" /* default */].create();\n                    if (isSkinnedMesh) {\n                        // Ignore world transform of skinned mesh.\n                        __WEBPACK_IMPORTED_MODULE_8__glmatrix_mat4__[\"a\" /* default */].copy(renderable.__prevWorldViewProjection, cameraViewProj);\n                    }\n                    else {\n                        __WEBPACK_IMPORTED_MODULE_8__glmatrix_mat4__[\"a\" /* default */].multiply(renderable.__prevWorldViewProjection, cameraViewProj, renderable.worldTransform.array);\n                    }\n                },\n                getUniform: function (renderable, gBufferMat, symbol) {\n                    if (symbol === 'prevWorldViewProjection') {\n                        return renderable.__prevWorldViewProjection;\n                    }\n                    else if (symbol === 'prevSkinMatrix') {\n                        return renderable.__prevSkinMatricesArray;\n                    }\n                    else if (symbol === 'prevSkinMatricesTexture') {\n                        return renderable.__prevSkinMatricesTexture;\n                    }\n                    else if (symbol === 'firstRender') {\n                        return !renderable.__prevWorldViewProjection;\n                    }\n                    else {\n                        return gBufferMat.get(symbol);\n                    }\n                },\n                isMaterialChanged: function () {\n                    // Always update prevWorldViewProjection\n                    return true;\n                },\n                sortCompare: renderer.opaqueSortCompare\n            };\n\n            renderer.renderPass(gBufferRenderList, camera, passConfig);\n        }\n\n        renderer.bindSceneRendering(null);\n        frameBuffer.unbind(renderer);\n    },\n\n    /**\n     * Debug output of gBuffer. Use `type` parameter to choos the debug output type, which can be:\n     *\n     * + 'normal'\n     * + 'depth'\n     * + 'position'\n     * + 'glossiness'\n     * + 'metalness'\n     * + 'albedo'\n     * + 'velocity'\n     *\n     * @param {clay.Renderer} renderer\n     * @param {clay.Camera} camera\n     * @param {string} [type='normal']\n     */\n    renderDebug: function (renderer, camera, type, viewport) {\n        var debugTypes = {\n            normal: 0,\n            depth: 1,\n            position: 2,\n            glossiness: 3,\n            metalness: 4,\n            albedo: 5,\n            velocity: 6\n        };\n        if (debugTypes[type] == null) {\n            console.warn('Unkown type \"' + type + '\"');\n            // Default use normal\n            type = 'normal';\n        }\n\n        renderer.saveClear();\n        renderer.saveViewport();\n        renderer.clearBit = renderer.gl.DEPTH_BUFFER_BIT;\n\n        if (viewport) {\n            renderer.setViewport(viewport);\n        }\n        var viewProjectionInv = new __WEBPACK_IMPORTED_MODULE_7__math_Matrix4__[\"a\" /* default */]();\n        __WEBPACK_IMPORTED_MODULE_7__math_Matrix4__[\"a\" /* default */].multiply(viewProjectionInv, camera.worldTransform, camera.invProjectionMatrix);\n\n        var debugPass = this._debugPass;\n        debugPass.setUniform('viewportSize', [renderer.getWidth(), renderer.getHeight()]);\n        debugPass.setUniform('gBufferTexture1', this._gBufferTex1);\n        debugPass.setUniform('gBufferTexture2', this._gBufferTex2);\n        debugPass.setUniform('gBufferTexture3', this._gBufferTex3);\n        debugPass.setUniform('gBufferTexture4', this._gBufferTex4);\n        debugPass.setUniform('debug', debugTypes[type]);\n        debugPass.setUniform('viewProjectionInv', viewProjectionInv.array);\n        debugPass.render(renderer);\n\n        renderer.restoreViewport();\n        renderer.restoreClear();\n    },\n\n    /**\n     * Get first target texture.\n     * Channel storage:\n     * + R: normal.x * 0.5 + 0.5\n     * + G: normal.y * 0.5 + 0.5\n     * + B: normal.z * 0.5 + 0.5\n     * + A: glossiness\n     * @return {clay.Texture2D}\n     */\n    getTargetTexture1: function () {\n        return this._gBufferTex1;\n    },\n\n    /**\n     * Get second target texture.\n     * Channel storage:\n     * + R: depth\n     * @return {clay.Texture2D}\n     */\n    getTargetTexture2: function () {\n        return this._gBufferTex2;\n    },\n\n    /**\n     * Get third target texture.\n     * Channel storage:\n     * + R: albedo.r\n     * + G: albedo.g\n     * + B: albedo.b\n     * + A: metalness\n     * @return {clay.Texture2D}\n     */\n    getTargetTexture3: function () {\n        return this._gBufferTex3;\n    },\n\n    /**\n     * Get fourth target texture.\n     * Channel storage:\n     * + R: velocity.r\n     * + G: velocity.g\n     * @return {clay.Texture2D}\n     */\n    getTargetTexture4: function () {\n        return this._gBufferTex4;\n    },\n\n\n    /**\n     * @param  {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n        this._gBufferTex1.dispose(renderer);\n        this._gBufferTex2.dispose(renderer);\n        this._gBufferTex3.dispose(renderer);\n\n        this._defaultNormalMap.dispose(renderer);\n        this._defaultRoughnessMap.dispose(renderer);\n        this._defaultMetalnessMap.dispose(renderer);\n        this._defaultDiffuseMap.dispose(renderer);\n        this._frameBuffer.dispose(renderer);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GBuffer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZGVmZXJyZWQvR0J1ZmZlci5qcz8yODg4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4uL2NvcmUvQmFzZSc7XG5pbXBvcnQgVGV4dHVyZTJEIGZyb20gJy4uL1RleHR1cmUyRCc7XG5pbXBvcnQgVGV4dHVyZSBmcm9tICcuLi9UZXh0dXJlJztcbmltcG9ydCBNYXRlcmlhbCBmcm9tICcuLi9NYXRlcmlhbCc7XG5pbXBvcnQgRnJhbWVCdWZmZXIgZnJvbSAnLi4vRnJhbWVCdWZmZXInO1xuaW1wb3J0IFNoYWRlciBmcm9tICcuLi9TaGFkZXInO1xuaW1wb3J0IFBhc3MgZnJvbSAnLi4vY29tcG9zaXRvci9QYXNzJztcbmltcG9ydCBNYXRyaXg0IGZyb20gJy4uL21hdGgvTWF0cml4NCc7XG5pbXBvcnQgbWF0NCBmcm9tICcuLi9nbG1hdHJpeC9tYXQ0JztcblxuaW1wb3J0IGdidWZmZXJFc3NsIGZyb20gJy4uL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvZ2J1ZmZlci5nbHNsLmpzJztcbmltcG9ydCBjaHVua0Vzc2wgZnJvbSAnLi4vc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9jaHVuay5nbHNsLmpzJztcblxuU2hhZGVyLmltcG9ydChnYnVmZmVyRXNzbCk7XG5TaGFkZXIuaW1wb3J0KGNodW5rRXNzbCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUZpbGxDYW52YXMoY29sb3IpIHtcbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgY2FudmFzLndpZHRoID0gY2FudmFzLmhlaWdodCA9IDE7XG4gICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvciB8fCAnIzAwMCc7XG4gICAgY3R4LmZpbGxSZWN0KDAsIDAsIDEsIDEpO1xuXG4gICAgcmV0dXJuIGNhbnZhcztcbn1cblxuLy8gVE9ETyBzcGVjdWxhckNvbG9yXG4vLyBUT0RPIFBlcmZvcm1hbmNlIGltcHJvdmVtZW50XG5mdW5jdGlvbiBnZXRHZXRVbmlmb3JtSG9vazEoZGVmYXVsdE5vcm1hbE1hcCwgZGVmYXVsdFJvdWdobmVzc01hcCwgZGVmYXVsdERpZmZ1c2VNYXApIHtcblxuICAgIHJldHVybiBmdW5jdGlvbiAocmVuZGVyYWJsZSwgZ0J1ZmZlck1hdCwgc3ltYm9sKSB7XG4gICAgICAgIHZhciBzdGFuZGFyZE1hdGVyaWFsID0gcmVuZGVyYWJsZS5tYXRlcmlhbDtcbiAgICAgICAgaWYgKHN5bWJvbCA9PT0gJ2RvdWJsZVNpZGVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHN0YW5kYXJkTWF0ZXJpYWwuaXNEZWZpbmVkKCdmcmFnbWVudCcsICdET1VCTEVfU0lERUQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzeW1ib2wgPT09ICd1dlJlcGVhdCcgfHwgc3ltYm9sID09PSAndXZPZmZzZXQnIHx8IHN5bWJvbCA9PT0gJ2FscGhhJykge1xuICAgICAgICAgICAgcmV0dXJuIHN0YW5kYXJkTWF0ZXJpYWwuZ2V0KHN5bWJvbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3ltYm9sID09PSAnbm9ybWFsTWFwJykge1xuICAgICAgICAgICAgcmV0dXJuIHN0YW5kYXJkTWF0ZXJpYWwuZ2V0KHN5bWJvbCkgfHwgZGVmYXVsdE5vcm1hbE1hcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzeW1ib2wgPT09ICdkaWZmdXNlTWFwJykge1xuICAgICAgICAgICAgcmV0dXJuIHN0YW5kYXJkTWF0ZXJpYWwuZ2V0KHN5bWJvbCkgfHwgZGVmYXVsdERpZmZ1c2VNYXA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3ltYm9sID09PSAnYWxwaGFDdXRvZmYnKSB7XG4gICAgICAgICAgICAvLyBUT0RPIERJRkZVU0VNQVBfQUxQSEFfQUxQSEFcbiAgICAgICAgICAgIGlmIChzdGFuZGFyZE1hdGVyaWFsLmlzRGVmaW5lZCgnZnJhZ21lbnQnLCAnQUxQSEFfVEVTVCcpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFscGhhQ3V0b2ZmID0gc3RhbmRhcmRNYXRlcmlhbC5nZXQoJ2FscGhhQ3V0b2ZmJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFscGhhQ3V0b2ZmIHx8IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB1c2VSb3VnaG5lc3NXb3JrZmxvdyA9IHN0YW5kYXJkTWF0ZXJpYWwuaXNEZWZpbmVkKCdmcmFnbWVudCcsICdVU0VfUk9VR0hORVNTJyk7XG4gICAgICAgICAgICB2YXIgcm91Z2hHbG9zc01hcCA9IHVzZVJvdWdobmVzc1dvcmtmbG93ID8gc3RhbmRhcmRNYXRlcmlhbC5nZXQoJ3JvdWdobmVzc01hcCcpIDogc3RhbmRhcmRNYXRlcmlhbC5nZXQoJ2dsb3NzaW5lc3NNYXAnKTtcbiAgICAgICAgICAgIHN3aXRjaCAoc3ltYm9sKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZ2xvc3NpbmVzcyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VSb3VnaG5lc3NXb3JrZmxvdyA/ICgxLjAgLSBzdGFuZGFyZE1hdGVyaWFsLmdldCgncm91Z2huZXNzJykpIDogc3RhbmRhcmRNYXRlcmlhbC5nZXQoJ2dsb3NzaW5lc3MnKTtcbiAgICAgICAgICAgICAgICBjYXNlICdyb3VnaEdsb3NzTWFwJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvdWdoR2xvc3NNYXA7XG4gICAgICAgICAgICAgICAgY2FzZSAndXNlUm91Z2hHbG9zc01hcCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhIXJvdWdoR2xvc3NNYXA7XG4gICAgICAgICAgICAgICAgY2FzZSAndXNlUm91Z2huZXNzJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZVJvdWdobmVzc1dvcmtmbG93O1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JvdWdoR2xvc3NDaGFubmVsJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZVJvdWdobmVzc1dvcmtmbG93XG4gICAgICAgICAgICAgICAgICAgICAgICA/IHN0YW5kYXJkTWF0ZXJpYWwuZ2V0RGVmaW5lKCdmcmFnbWVudCcsICdST1VHSE5FU1NfQ0hBTk5FTCcpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHN0YW5kYXJkTWF0ZXJpYWwuZ2V0RGVmaW5lKCdmcmFnbWVudCcsICdHTE9TU0lORVNTX0NIQU5ORUwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGdldEdldFVuaWZvcm1Ib29rMihkZWZhdWx0RGlmZnVzZU1hcCwgZGVmYXVsdE1ldGFsbmVzc01hcCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocmVuZGVyYWJsZSwgZ0J1ZmZlck1hdCwgc3ltYm9sKSB7XG4gICAgICAgIHZhciBzdGFuZGFyZE1hdGVyaWFsID0gcmVuZGVyYWJsZS5tYXRlcmlhbDtcbiAgICAgICAgc3dpdGNoIChzeW1ib2wpIHtcbiAgICAgICAgICAgIGNhc2UgJ2NvbG9yJzpcbiAgICAgICAgICAgIGNhc2UgJ3V2UmVwZWF0JzpcbiAgICAgICAgICAgIGNhc2UgJ3V2T2Zmc2V0JzpcbiAgICAgICAgICAgIGNhc2UgJ2FscGhhJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhbmRhcmRNYXRlcmlhbC5nZXQoc3ltYm9sKTtcbiAgICAgICAgICAgIGNhc2UgJ21ldGFsbmVzcyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YW5kYXJkTWF0ZXJpYWwuZ2V0KCdtZXRhbG5lc3MnKSB8fCAwO1xuICAgICAgICAgICAgY2FzZSAnZGlmZnVzZU1hcCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YW5kYXJkTWF0ZXJpYWwuZ2V0KHN5bWJvbCkgfHwgZGVmYXVsdERpZmZ1c2VNYXA7XG4gICAgICAgICAgICBjYXNlICdtZXRhbG5lc3NNYXAnOlxuICAgICAgICAgICAgICAgIHJldHVybiBzdGFuZGFyZE1hdGVyaWFsLmdldChzeW1ib2wpIHx8IGRlZmF1bHRNZXRhbG5lc3NNYXA7XG4gICAgICAgICAgICBjYXNlICd1c2VNZXRhbG5lc3NNYXAnOlxuICAgICAgICAgICAgICAgIHJldHVybiAhIXN0YW5kYXJkTWF0ZXJpYWwuZ2V0KCdtZXRhbG5lc3NNYXAnKTtcbiAgICAgICAgICAgIGNhc2UgJ2xpbmVhcic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YW5kYXJkTWF0ZXJpYWwuaXNEZWZpbmVkKCdTUkdCX0RFQ09ERScpO1xuICAgICAgICAgICAgY2FzZSAnYWxwaGFDdXRvZmYnOlxuICAgICAgICAgICAgICAgIC8vIFRPRE8gRElGRlVTRU1BUF9BTFBIQV9BTFBIQVxuICAgICAgICAgICAgICAgIGlmIChzdGFuZGFyZE1hdGVyaWFsLmlzRGVmaW5lZCgnZnJhZ21lbnQnLCAnQUxQSEFfVEVTVCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhbHBoYUN1dG9mZiA9IHN0YW5kYXJkTWF0ZXJpYWwuZ2V0KCdhbHBoYUN1dG9mZicpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWxwaGFDdXRvZmYgfHwgMC4wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gMC4wO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqXG4gKiBHQnVmZmVyIGlzIHByb3ZpZGVkIGZvciBkZWZlcnJlZCByZW5kZXJpbmcgYW5kIFNTQU8sIFNTUiBwYXNzLlxuICogSXQgd2lsbCBkbyB0aHJlZSBwYXNzZXMgcmVuZGVyaW5nIHRvIGZvdXIgdGFyZ2V0IHRleHR1cmVzLiBTZWVcbiAqICsge0BsaW5rIGNsYXkuZGVmZXJyZWQuR0J1ZmZlciNnZXRUYXJnZXRUZXh0dXJlMX1cbiAqICsge0BsaW5rIGNsYXkuZGVmZXJyZWQuR0J1ZmZlciNnZXRUYXJnZXRUZXh0dXJlMn1cbiAqICsge0BsaW5rIGNsYXkuZGVmZXJyZWQuR0J1ZmZlciNnZXRUYXJnZXRUZXh0dXJlM31cbiAqICsge0BsaW5rIGNsYXkuZGVmZXJyZWQuR0J1ZmZlciNnZXRUYXJnZXRUZXh0dXJlNH1cbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuZGVmZXJyZWQuR0J1ZmZlclxuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqL1xudmFyIEdCdWZmZXIgPSBCYXNlLmV4dGVuZChmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgY29tbW9uVGV4dHVyZU9wdHMgPSB7XG4gICAgICAgIG1pbkZpbHRlcjogVGV4dHVyZS5ORUFSRVNULFxuICAgICAgICBtYWdGaWx0ZXI6IFRleHR1cmUuTkVBUkVTVCxcbiAgICAgICAgd3JhcFM6IFRleHR1cmUuQ0xBTVBfVE9fRURHRSxcbiAgICAgICAgd3JhcFQ6IFRleHR1cmUuQ0xBTVBfVE9fRURHRSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIC8qKiBAbGVuZHMgY2xheS5kZWZlcnJlZC5HQnVmZmVyIyAqLyB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGVuYWJsZSBnYnVmZmVyIHRleHR1cmUgMS5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBlbmFibGVUYXJnZXRUZXh0dXJlMTogdHJ1ZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgZW5hYmxlIGdidWZmZXIgdGV4dHVyZSAyLlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGVuYWJsZVRhcmdldFRleHR1cmUyOiB0cnVlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBlbmFibGUgZ2J1ZmZlciB0ZXh0dXJlIDMuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZW5hYmxlVGFyZ2V0VGV4dHVyZTM6IHRydWUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGVuYWJsZSBnYnVmZmVyIHRleHR1cmUgNC5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBlbmFibGVUYXJnZXRUZXh0dXJlNDogZmFsc2UsXG5cbiAgICAgICAgcmVuZGVyVHJhbnNwYXJlbnQ6IGZhbHNlLFxuXG4gICAgICAgIF9nQnVmZmVyUmVuZGVyTGlzdDogW10sXG4gICAgICAgIC8vIC0gUjogbm9ybWFsLnhcbiAgICAgICAgLy8gLSBHOiBub3JtYWwueVxuICAgICAgICAvLyAtIEI6IG5vcm1hbC56XG4gICAgICAgIC8vIC0gQTogZ2xvc3NpbmVzc1xuICAgICAgICBfZ0J1ZmZlclRleDE6IG5ldyBUZXh0dXJlMkQoT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAvLyBQRU5ESU5HXG4gICAgICAgICAgICB0eXBlOiBUZXh0dXJlLkhBTEZfRkxPQVRcbiAgICAgICAgfSwgY29tbW9uVGV4dHVyZU9wdHMpKSxcblxuICAgICAgICAvLyAtIFI6IGRlcHRoXG4gICAgICAgIF9nQnVmZmVyVGV4MjogbmV3IFRleHR1cmUyRChPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIC8vIGZvcm1hdDogVGV4dHVyZS5ERVBUSF9DT01QT05FTlQsXG4gICAgICAgICAgICAvLyB0eXBlOiBUZXh0dXJlLlVOU0lHTkVEX0lOVFxuXG4gICAgICAgICAgICBmb3JtYXQ6IFRleHR1cmUuREVQVEhfU1RFTkNJTCxcbiAgICAgICAgICAgIHR5cGU6IFRleHR1cmUuVU5TSUdORURfSU5UXzI0XzhfV0VCR0xcbiAgICAgICAgfSwgY29tbW9uVGV4dHVyZU9wdHMpKSxcblxuICAgICAgICAvLyAtIFI6IGFsYmVkby5yXG4gICAgICAgIC8vIC0gRzogYWxiZWRvLmdcbiAgICAgICAgLy8gLSBCOiBhbGJlZG8uYlxuICAgICAgICAvLyAtIEE6IG1ldGFsbmVzc1xuICAgICAgICBfZ0J1ZmZlclRleDM6IG5ldyBUZXh0dXJlMkQoY29tbW9uVGV4dHVyZU9wdHMpLFxuXG4gICAgICAgIF9nQnVmZmVyVGV4NDogbmV3IFRleHR1cmUyRChPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIC8vIEZMT0FUIFRleHR1cmUgaGFzIGJ1ZyBvbiBpT1MuIGlzIEhBTEZfRkxPQVQgZW5vdWdoP1xuICAgICAgICAgICAgdHlwZTogVGV4dHVyZS5IQUxGX0ZMT0FUXG4gICAgICAgIH0sIGNvbW1vblRleHR1cmVPcHRzKSksXG5cbiAgICAgICAgX2RlZmF1bHROb3JtYWxNYXA6IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICAgICAgaW1hZ2U6IGNyZWF0ZUZpbGxDYW52YXMoJyMwMDAnKVxuICAgICAgICB9KSxcbiAgICAgICAgX2RlZmF1bHRSb3VnaG5lc3NNYXA6IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICAgICAgaW1hZ2U6IGNyZWF0ZUZpbGxDYW52YXMoJyNmZmYnKVxuICAgICAgICB9KSxcbiAgICAgICAgX2RlZmF1bHRNZXRhbG5lc3NNYXA6IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICAgICAgaW1hZ2U6IGNyZWF0ZUZpbGxDYW52YXMoJyNmZmYnKVxuICAgICAgICB9KSxcbiAgICAgICAgX2RlZmF1bHREaWZmdXNlTWFwOiBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgICAgIGltYWdlOiBjcmVhdGVGaWxsQ2FudmFzKCcjZmZmJylcbiAgICAgICAgfSksXG5cbiAgICAgICAgX2ZyYW1lQnVmZmVyOiBuZXcgRnJhbWVCdWZmZXIoKSxcblxuICAgICAgICBfZ0J1ZmZlck1hdGVyaWFsMTogbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgICAgIHNoYWRlcjogbmV3IFNoYWRlcihcbiAgICAgICAgICAgICAgICBTaGFkZXIuc291cmNlKCdjbGF5LmRlZmVycmVkLmdidWZmZXIudmVydGV4JyksXG4gICAgICAgICAgICAgICAgU2hhZGVyLnNvdXJjZSgnY2xheS5kZWZlcnJlZC5nYnVmZmVyMS5mcmFnbWVudCcpXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgdmVydGV4RGVmaW5lczoge1xuICAgICAgICAgICAgICAgIEZJUlNUX1BBU1M6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmcmFnbWVudERlZmluZXM6IHtcbiAgICAgICAgICAgICAgICBGSVJTVF9QQVNTOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBfZ0J1ZmZlck1hdGVyaWFsMjogbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgICAgIHNoYWRlcjogbmV3IFNoYWRlcihcbiAgICAgICAgICAgICAgICBTaGFkZXIuc291cmNlKCdjbGF5LmRlZmVycmVkLmdidWZmZXIudmVydGV4JyksXG4gICAgICAgICAgICAgICAgU2hhZGVyLnNvdXJjZSgnY2xheS5kZWZlcnJlZC5nYnVmZmVyMi5mcmFnbWVudCcpXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgdmVydGV4RGVmaW5lczoge1xuICAgICAgICAgICAgICAgIFNFQ09ORF9QQVNTOiBudWxsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnJhZ21lbnREZWZpbmVzOiB7XG4gICAgICAgICAgICAgICAgU0VDT05EX1BBU1M6IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIF9nQnVmZmVyTWF0ZXJpYWwzOiBuZXcgTWF0ZXJpYWwoe1xuICAgICAgICAgICAgc2hhZGVyOiBuZXcgU2hhZGVyKFxuICAgICAgICAgICAgICAgIFNoYWRlci5zb3VyY2UoJ2NsYXkuZGVmZXJyZWQuZ2J1ZmZlci52ZXJ0ZXgnKSxcbiAgICAgICAgICAgICAgICBTaGFkZXIuc291cmNlKCdjbGF5LmRlZmVycmVkLmdidWZmZXIzLmZyYWdtZW50JylcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB2ZXJ0ZXhEZWZpbmVzOiB7XG4gICAgICAgICAgICAgICAgVEhJUkRfUEFTUzogbnVsbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZyYWdtZW50RGVmaW5lczoge1xuICAgICAgICAgICAgICAgIFRISVJEX1BBU1M6IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksXG5cbiAgICAgICAgX2RlYnVnUGFzczogbmV3IFBhc3Moe1xuICAgICAgICAgICAgZnJhZ21lbnQ6IFNoYWRlci5zb3VyY2UoJ2NsYXkuZGVmZXJyZWQuZ2J1ZmZlci5kZWJ1ZycpXG4gICAgICAgIH0pXG4gICAgfTtcbn0sIC8qKiBAbGVuZHMgY2xheS5kZWZlcnJlZC5HQnVmZmVyIyAqL3tcblxuICAgIC8qKlxuICAgICAqIFNldCBHIEJ1ZmZlciBzaXplLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICAgKi9cbiAgICByZXNpemU6IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIGlmICh0aGlzLl9nQnVmZmVyVGV4MS53aWR0aCA9PT0gd2lkdGhcbiAgICAgICAgICAgICYmIHRoaXMuX2dCdWZmZXJUZXgxLmhlaWdodCA9PT0gaGVpZ2h0XG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2dCdWZmZXJUZXgxLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuX2dCdWZmZXJUZXgxLmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICB0aGlzLl9nQnVmZmVyVGV4Mi53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLl9nQnVmZmVyVGV4Mi5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5fZ0J1ZmZlclRleDMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5fZ0J1ZmZlclRleDMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgIHRoaXMuX2dCdWZmZXJUZXg0LndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuX2dCdWZmZXJUZXg0LmhlaWdodCA9IGhlaWdodDtcbiAgICB9LFxuXG4gICAgLy8gVE9ETyBpcyBkcHIgbmVlZGVkP1xuICAgIHNldFZpZXdwb3J0OiBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZHByKSB7XG4gICAgICAgIHZhciB2aWV3cG9ydDtcbiAgICAgICAgaWYgKHR5cGVvZiB4ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdmlld3BvcnQgPSB4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmlld3BvcnQgPSB7XG4gICAgICAgICAgICAgICAgeDogeCwgeTogeSxcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGRldmljZVBpeGVsUmF0aW86IGRwciB8fCAxXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gICAgfSxcblxuICAgIGdldFZpZXdwb3J0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9mcmFtZUJ1ZmZlci52aWV3cG9ydCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZyYW1lQnVmZmVyLnZpZXdwb3J0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB4OiAwLCB5OiAwLFxuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLl9nQnVmZmVyVGV4MS53aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuX2dCdWZmZXJUZXgxLmhlaWdodCxcbiAgICAgICAgICAgICAgICBkZXZpY2VQaXhlbFJhdGlvOiAxXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBHQnVmZmVyXG4gICAgICogQHBhcmFtIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqIEBwYXJhbSB7Y2xheS5TY2VuZX0gc2NlbmVcbiAgICAgKiBAcGFyYW0ge2NsYXkuQ2FtZXJhfSBjYW1lcmFcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0c1xuICAgICAqL1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCBvcHRzKSB7XG4gICAgICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuXG4gICAgICAgIHZhciBnbCA9IHJlbmRlcmVyLmdsO1xuXG4gICAgICAgIHZhciBmcmFtZUJ1ZmZlciA9IHRoaXMuX2ZyYW1lQnVmZmVyO1xuICAgICAgICB2YXIgdmlld3BvcnQgPSBmcmFtZUJ1ZmZlci52aWV3cG9ydDtcblxuICAgICAgICB2YXIgcmVuZGVyTGlzdCA9IHNjZW5lLnVwZGF0ZVJlbmRlckxpc3QoY2FtZXJhLCB0cnVlKTtcblxuICAgICAgICB2YXIgb3BhcXVlTGlzdCA9IHJlbmRlckxpc3Qub3BhcXVlO1xuICAgICAgICB2YXIgdHJhbnNwYXJlbnRMaXN0ID0gcmVuZGVyTGlzdC50cmFuc3BhcmVudDtcblxuICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgICAgdmFyIGdCdWZmZXJSZW5kZXJMaXN0ID0gdGhpcy5fZ0J1ZmZlclJlbmRlckxpc3Q7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3BhcXVlTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFvcGFxdWVMaXN0W2ldLmlnbm9yZUdCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICBnQnVmZmVyUmVuZGVyTGlzdFtvZmZzZXQrK10gPSBvcGFxdWVMaXN0W2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJlbmRlclRyYW5zcGFyZW50KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYW5zcGFyZW50TGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghdHJhbnNwYXJlbnRMaXN0W2ldLmlnbm9yZUdCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgZ0J1ZmZlclJlbmRlckxpc3Rbb2Zmc2V0KytdID0gdHJhbnNwYXJlbnRMaXN0W2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBnQnVmZmVyUmVuZGVyTGlzdC5sZW5ndGggPSBvZmZzZXQ7XG5cbiAgICAgICAgZ2wuY2xlYXJDb2xvcigwLCAwLCAwLCAwKTtcbiAgICAgICAgZ2wuZGVwdGhNYXNrKHRydWUpO1xuICAgICAgICBnbC5jb2xvck1hc2sodHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIGdsLmRpc2FibGUoZ2wuQkxFTkQpO1xuXG4gICAgICAgIHZhciBlbmFibGVUYXJnZXRUZXh0dXJlMSA9IHRoaXMuZW5hYmxlVGFyZ2V0VGV4dHVyZTE7XG4gICAgICAgIHZhciBlbmFibGVUYXJnZXRUZXh0dXJlMiA9IHRoaXMuZW5hYmxlVGFyZ2V0VGV4dHVyZTI7XG4gICAgICAgIHZhciBlbmFibGVUYXJnZXRUZXh0dXJlMyA9IHRoaXMuZW5hYmxlVGFyZ2V0VGV4dHVyZTM7XG4gICAgICAgIHZhciBlbmFibGVUYXJnZXRUZXh0dXJlNCA9IHRoaXMuZW5hYmxlVGFyZ2V0VGV4dHVyZTQ7XG4gICAgICAgIGlmICghZW5hYmxlVGFyZ2V0VGV4dHVyZTEgJiYgIWVuYWJsZVRhcmdldFRleHR1cmUzICYmICFlbmFibGVUYXJnZXRUZXh0dXJlNCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdDYW5cXCd0IGRpc2FibGUgdGFyZ2V0VGV4dHVyZTEsIHRhcmdldFRleHR1cmUzLCB0YXJnZXRUZXh0dXJlNCBib3RoJyk7XG4gICAgICAgICAgICBlbmFibGVUYXJnZXRUZXh0dXJlMSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW5hYmxlVGFyZ2V0VGV4dHVyZTIpIHtcbiAgICAgICAgICAgIGZyYW1lQnVmZmVyLmF0dGFjaChvcHRzLnRhcmdldFRleHR1cmUyIHx8IHRoaXMuX2dCdWZmZXJUZXgyLCByZW5kZXJlci5nbC5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2xlYXJWaWV3cG9ydCgpIHtcbiAgICAgICAgICAgIGlmICh2aWV3cG9ydCkge1xuICAgICAgICAgICAgICAgIHZhciBkcHIgPSB2aWV3cG9ydC5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICAgICAgICAgIC8vIHVzZSBzY2lzc29yIHRvIG1ha2Ugc3VyZSBvbmx5IGNsZWFyIHRoZSB2aWV3cG9ydFxuICAgICAgICAgICAgICAgIGdsLmVuYWJsZShnbC5TQ0lTU09SX1RFU1QpO1xuICAgICAgICAgICAgICAgIGdsLnNjaXNzb3Iodmlld3BvcnQueCAqIGRwciwgdmlld3BvcnQueSAqIGRwciwgdmlld3BvcnQud2lkdGggKiBkcHIsIHZpZXdwb3J0LmhlaWdodCAqIGRwcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUIHwgZ2wuREVQVEhfQlVGRkVSX0JJVCk7XG4gICAgICAgICAgICBpZiAodmlld3BvcnQpIHtcbiAgICAgICAgICAgICAgICBnbC5kaXNhYmxlKGdsLlNDSVNTT1JfVEVTVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpc01hdGVyaWFsQ2hhbmdlZChyZW5kZXJhYmxlLCBwcmV2UmVuZGVyYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmFibGUubWF0ZXJpYWwgIT09IHByZXZSZW5kZXJhYmxlLm1hdGVyaWFsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUEVORElORywgc2NlbmUuYm91bmRpbmdCb3hMYXN0RnJhbWUgbmVlZHMgYmUgdXBkYXRlZCBpZiBoYXZlIHNoYWRvd1xuICAgICAgICByZW5kZXJlci5iaW5kU2NlbmVSZW5kZXJpbmcoc2NlbmUpO1xuICAgICAgICBpZiAoZW5hYmxlVGFyZ2V0VGV4dHVyZTEpIHtcbiAgICAgICAgICAgIC8vIFBhc3MgMVxuICAgICAgICAgICAgZnJhbWVCdWZmZXIuYXR0YWNoKG9wdHMudGFyZ2V0VGV4dHVyZTEgfHwgdGhpcy5fZ0J1ZmZlclRleDEpO1xuICAgICAgICAgICAgZnJhbWVCdWZmZXIuYmluZChyZW5kZXJlcik7XG5cbiAgICAgICAgICAgIGNsZWFyVmlld3BvcnQoKTtcblxuICAgICAgICAgICAgdmFyIGdCdWZmZXJNYXRlcmlhbDEgPSB0aGlzLl9nQnVmZmVyTWF0ZXJpYWwxO1xuICAgICAgICAgICAgdmFyIHBhc3NDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgZ2V0TWF0ZXJpYWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdCdWZmZXJNYXRlcmlhbDE7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRVbmlmb3JtOiBnZXRHZXRVbmlmb3JtSG9vazEodGhpcy5fZGVmYXVsdE5vcm1hbE1hcCwgdGhpcy5fZGVmYXVsdFJvdWdobmVzc01hcCwgdGhpcy5fZGVmYXVsdERpZmZ1c2VNYXApLFxuICAgICAgICAgICAgICAgIGlzTWF0ZXJpYWxDaGFuZ2VkOiBpc01hdGVyaWFsQ2hhbmdlZCxcbiAgICAgICAgICAgICAgICBzb3J0Q29tcGFyZTogcmVuZGVyZXIub3BhcXVlU29ydENvbXBhcmVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBGSVhNRSBVc2UgTVJUIGlmIHBvc3NpYmxlXG4gICAgICAgICAgICByZW5kZXJlci5yZW5kZXJQYXNzKGdCdWZmZXJSZW5kZXJMaXN0LCBjYW1lcmEsIHBhc3NDb25maWcpO1xuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVuYWJsZVRhcmdldFRleHR1cmUzKSB7XG5cbiAgICAgICAgICAgIC8vIFBhc3MgMlxuICAgICAgICAgICAgZnJhbWVCdWZmZXIuYXR0YWNoKG9wdHMudGFyZ2V0VGV4dHVyZTMgfHwgdGhpcy5fZ0J1ZmZlclRleDMpO1xuICAgICAgICAgICAgZnJhbWVCdWZmZXIuYmluZChyZW5kZXJlcik7XG5cbiAgICAgICAgICAgIGNsZWFyVmlld3BvcnQoKTtcblxuICAgICAgICAgICAgdmFyIGdCdWZmZXJNYXRlcmlhbDIgPSB0aGlzLl9nQnVmZmVyTWF0ZXJpYWwyO1xuICAgICAgICAgICAgdmFyIHBhc3NDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgZ2V0TWF0ZXJpYWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdCdWZmZXJNYXRlcmlhbDI7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRVbmlmb3JtOiBnZXRHZXRVbmlmb3JtSG9vazIodGhpcy5fZGVmYXVsdERpZmZ1c2VNYXAsIHRoaXMuX2RlZmF1bHRNZXRhbG5lc3NNYXApLFxuICAgICAgICAgICAgICAgIGlzTWF0ZXJpYWxDaGFuZ2VkOiBpc01hdGVyaWFsQ2hhbmdlZCxcbiAgICAgICAgICAgICAgICBzb3J0Q29tcGFyZTogcmVuZGVyZXIub3BhcXVlU29ydENvbXBhcmVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZW5kZXJlci5yZW5kZXJQYXNzKGdCdWZmZXJSZW5kZXJMaXN0LCBjYW1lcmEsIHBhc3NDb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVuYWJsZVRhcmdldFRleHR1cmU0KSB7XG4gICAgICAgICAgICBmcmFtZUJ1ZmZlci5iaW5kKHJlbmRlcmVyKTtcbiAgICAgICAgICAgIGZyYW1lQnVmZmVyLmF0dGFjaChvcHRzLnRhcmdldFRleHR1cmU0IHx8IHRoaXMuX2dCdWZmZXJUZXg0KTtcblxuICAgICAgICAgICAgY2xlYXJWaWV3cG9ydCgpO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgaml0dGVyaW5nIGluIHRlbXBvcmFsIGFhLlxuICAgICAgICAgICAgLy8gUEVORElORy4gQmV0dGVyIHNvbHV0aW9uP1xuICAgICAgICAgICAgY2FtZXJhLnVwZGF0ZSgpO1xuXG4gICAgICAgICAgICB2YXIgZ0J1ZmZlck1hdGVyaWFsMyA9IHRoaXMuX2dCdWZmZXJNYXRlcmlhbDM7XG4gICAgICAgICAgICB2YXIgY2FtZXJhVmlld1Byb2ogPSBtYXQ0LmNyZWF0ZSgpO1xuICAgICAgICAgICAgbWF0NC5tdWx0aXBseShjYW1lcmFWaWV3UHJvaiwgY2FtZXJhLnByb2plY3Rpb25NYXRyaXguYXJyYXksIGNhbWVyYS52aWV3TWF0cml4LmFycmF5KTtcbiAgICAgICAgICAgIHZhciBwYXNzQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgIGdldE1hdGVyaWFsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnQnVmZmVyTWF0ZXJpYWwzO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWZ0ZXJSZW5kZXI6IGZ1bmN0aW9uIChyZW5kZXJlciwgcmVuZGVyYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXNTa2lubmVkTWVzaCA9IHJlbmRlcmFibGUuaXNTa2lubmVkTWVzaCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNTa2lubmVkTWVzaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNrZWxldG9uID0gcmVuZGVyYWJsZS5za2VsZXRvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqb2ludHMgPSByZW5kZXJhYmxlLmpvaW50cztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqb2ludHMubGVuZ3RoID4gcmVuZGVyZXIuZ2V0TWF4Sm9pbnROdW1iZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBza2luTWF0cmljZXNUZXh0dXJlID0gc2tlbGV0b24uZ2V0U3ViU2tpbk1hdHJpY2VzVGV4dHVyZShyZW5kZXJhYmxlLl9fdWlkX18sIGpvaW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZTa2luTWF0cmljZXNUZXh0dXJlID0gcmVuZGVyYWJsZS5fX3ByZXZTa2luTWF0cmljZXNUZXh0dXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcHJldlNraW5NYXRyaWNlc1RleHR1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldlNraW5NYXRyaWNlc1RleHR1cmUgPSByZW5kZXJhYmxlLl9fcHJldlNraW5NYXRyaWNlc1RleHR1cmUgPSBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFRleHR1cmUuRkxPQVQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5GaWx0ZXI6IFRleHR1cmUuTkVBUkVTVCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hZ0ZpbHRlcjogVGV4dHVyZS5ORUFSRVNULFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlTWlwbWFwOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsaXBZOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2U2tpbk1hdHJpY2VzVGV4dHVyZS5waXhlbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgcHJldlNraW5NYXRyaWNlc1RleHR1cmUucGl4ZWxzLmxlbmd0aCAhPT0gc2tpbk1hdHJpY2VzVGV4dHVyZS5waXhlbHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZTa2luTWF0cmljZXNUZXh0dXJlLnBpeGVscyA9IG5ldyBGbG9hdDMyQXJyYXkoc2tpbk1hdHJpY2VzVGV4dHVyZS5waXhlbHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBza2luTWF0cmljZXNUZXh0dXJlLnBpeGVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldlNraW5NYXRyaWNlc1RleHR1cmUucGl4ZWxzW2ldID0gc2tpbk1hdHJpY2VzVGV4dHVyZS5waXhlbHNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldlNraW5NYXRyaWNlc1RleHR1cmUud2lkdGggPSBza2luTWF0cmljZXNUZXh0dXJlLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZTa2luTWF0cmljZXNUZXh0dXJlLmhlaWdodCA9IHNraW5NYXRyaWNlc1RleHR1cmUuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNraW5NYXRyaWNlc0FycmF5ID0gc2tlbGV0b24uZ2V0U3ViU2tpbk1hdHJpY2VzKHJlbmRlcmFibGUuX191aWRfXywgam9pbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlbmRlcmFibGUuX19wcmV2U2tpbk1hdHJpY2VzQXJyYXkgfHwgcmVuZGVyYWJsZS5fX3ByZXZTa2luTWF0cmljZXNBcnJheS5sZW5ndGggIT09IHNraW5NYXRyaWNlc0FycmF5Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJhYmxlLl9fcHJldlNraW5NYXRyaWNlc0FycmF5ID0gbmV3IEZsb2F0MzJBcnJheShza2luTWF0cmljZXNBcnJheS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJhYmxlLl9fcHJldlNraW5NYXRyaWNlc0FycmF5LnNldChza2luTWF0cmljZXNBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyYWJsZS5fX3ByZXZXb3JsZFZpZXdQcm9qZWN0aW9uID0gcmVuZGVyYWJsZS5fX3ByZXZXb3JsZFZpZXdQcm9qZWN0aW9uIHx8IG1hdDQuY3JlYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1NraW5uZWRNZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgd29ybGQgdHJhbnNmb3JtIG9mIHNraW5uZWQgbWVzaC5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdDQuY29weShyZW5kZXJhYmxlLl9fcHJldldvcmxkVmlld1Byb2plY3Rpb24sIGNhbWVyYVZpZXdQcm9qKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdDQubXVsdGlwbHkocmVuZGVyYWJsZS5fX3ByZXZXb3JsZFZpZXdQcm9qZWN0aW9uLCBjYW1lcmFWaWV3UHJvaiwgcmVuZGVyYWJsZS53b3JsZFRyYW5zZm9ybS5hcnJheSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldFVuaWZvcm06IGZ1bmN0aW9uIChyZW5kZXJhYmxlLCBnQnVmZmVyTWF0LCBzeW1ib2wpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN5bWJvbCA9PT0gJ3ByZXZXb3JsZFZpZXdQcm9qZWN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmFibGUuX19wcmV2V29ybGRWaWV3UHJvamVjdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzeW1ib2wgPT09ICdwcmV2U2tpbk1hdHJpeCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJhYmxlLl9fcHJldlNraW5NYXRyaWNlc0FycmF5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN5bWJvbCA9PT0gJ3ByZXZTa2luTWF0cmljZXNUZXh0dXJlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmFibGUuX19wcmV2U2tpbk1hdHJpY2VzVGV4dHVyZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzeW1ib2wgPT09ICdmaXJzdFJlbmRlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhcmVuZGVyYWJsZS5fX3ByZXZXb3JsZFZpZXdQcm9qZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdCdWZmZXJNYXQuZ2V0KHN5bWJvbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlzTWF0ZXJpYWxDaGFuZ2VkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFsd2F5cyB1cGRhdGUgcHJldldvcmxkVmlld1Byb2plY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzb3J0Q29tcGFyZTogcmVuZGVyZXIub3BhcXVlU29ydENvbXBhcmVcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJlbmRlcmVyLnJlbmRlclBhc3MoZ0J1ZmZlclJlbmRlckxpc3QsIGNhbWVyYSwgcGFzc0NvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICByZW5kZXJlci5iaW5kU2NlbmVSZW5kZXJpbmcobnVsbCk7XG4gICAgICAgIGZyYW1lQnVmZmVyLnVuYmluZChyZW5kZXJlcik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERlYnVnIG91dHB1dCBvZiBnQnVmZmVyLiBVc2UgYHR5cGVgIHBhcmFtZXRlciB0byBjaG9vcyB0aGUgZGVidWcgb3V0cHV0IHR5cGUsIHdoaWNoIGNhbiBiZTpcbiAgICAgKlxuICAgICAqICsgJ25vcm1hbCdcbiAgICAgKiArICdkZXB0aCdcbiAgICAgKiArICdwb3NpdGlvbidcbiAgICAgKiArICdnbG9zc2luZXNzJ1xuICAgICAqICsgJ21ldGFsbmVzcydcbiAgICAgKiArICdhbGJlZG8nXG4gICAgICogKyAndmVsb2NpdHknXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICogQHBhcmFtIHtjbGF5LkNhbWVyYX0gY2FtZXJhXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt0eXBlPSdub3JtYWwnXVxuICAgICAqL1xuICAgIHJlbmRlckRlYnVnOiBmdW5jdGlvbiAocmVuZGVyZXIsIGNhbWVyYSwgdHlwZSwgdmlld3BvcnQpIHtcbiAgICAgICAgdmFyIGRlYnVnVHlwZXMgPSB7XG4gICAgICAgICAgICBub3JtYWw6IDAsXG4gICAgICAgICAgICBkZXB0aDogMSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiAyLFxuICAgICAgICAgICAgZ2xvc3NpbmVzczogMyxcbiAgICAgICAgICAgIG1ldGFsbmVzczogNCxcbiAgICAgICAgICAgIGFsYmVkbzogNSxcbiAgICAgICAgICAgIHZlbG9jaXR5OiA2XG4gICAgICAgIH07XG4gICAgICAgIGlmIChkZWJ1Z1R5cGVzW3R5cGVdID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVW5rb3duIHR5cGUgXCInICsgdHlwZSArICdcIicpO1xuICAgICAgICAgICAgLy8gRGVmYXVsdCB1c2Ugbm9ybWFsXG4gICAgICAgICAgICB0eXBlID0gJ25vcm1hbCc7XG4gICAgICAgIH1cblxuICAgICAgICByZW5kZXJlci5zYXZlQ2xlYXIoKTtcbiAgICAgICAgcmVuZGVyZXIuc2F2ZVZpZXdwb3J0KCk7XG4gICAgICAgIHJlbmRlcmVyLmNsZWFyQml0ID0gcmVuZGVyZXIuZ2wuREVQVEhfQlVGRkVSX0JJVDtcblxuICAgICAgICBpZiAodmlld3BvcnQpIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLnNldFZpZXdwb3J0KHZpZXdwb3J0KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdmlld1Byb2plY3Rpb25JbnYgPSBuZXcgTWF0cml4NCgpO1xuICAgICAgICBNYXRyaXg0Lm11bHRpcGx5KHZpZXdQcm9qZWN0aW9uSW52LCBjYW1lcmEud29ybGRUcmFuc2Zvcm0sIGNhbWVyYS5pbnZQcm9qZWN0aW9uTWF0cml4KTtcblxuICAgICAgICB2YXIgZGVidWdQYXNzID0gdGhpcy5fZGVidWdQYXNzO1xuICAgICAgICBkZWJ1Z1Bhc3Muc2V0VW5pZm9ybSgndmlld3BvcnRTaXplJywgW3JlbmRlcmVyLmdldFdpZHRoKCksIHJlbmRlcmVyLmdldEhlaWdodCgpXSk7XG4gICAgICAgIGRlYnVnUGFzcy5zZXRVbmlmb3JtKCdnQnVmZmVyVGV4dHVyZTEnLCB0aGlzLl9nQnVmZmVyVGV4MSk7XG4gICAgICAgIGRlYnVnUGFzcy5zZXRVbmlmb3JtKCdnQnVmZmVyVGV4dHVyZTInLCB0aGlzLl9nQnVmZmVyVGV4Mik7XG4gICAgICAgIGRlYnVnUGFzcy5zZXRVbmlmb3JtKCdnQnVmZmVyVGV4dHVyZTMnLCB0aGlzLl9nQnVmZmVyVGV4Myk7XG4gICAgICAgIGRlYnVnUGFzcy5zZXRVbmlmb3JtKCdnQnVmZmVyVGV4dHVyZTQnLCB0aGlzLl9nQnVmZmVyVGV4NCk7XG4gICAgICAgIGRlYnVnUGFzcy5zZXRVbmlmb3JtKCdkZWJ1ZycsIGRlYnVnVHlwZXNbdHlwZV0pO1xuICAgICAgICBkZWJ1Z1Bhc3Muc2V0VW5pZm9ybSgndmlld1Byb2plY3Rpb25JbnYnLCB2aWV3UHJvamVjdGlvbkludi5hcnJheSk7XG4gICAgICAgIGRlYnVnUGFzcy5yZW5kZXIocmVuZGVyZXIpO1xuXG4gICAgICAgIHJlbmRlcmVyLnJlc3RvcmVWaWV3cG9ydCgpO1xuICAgICAgICByZW5kZXJlci5yZXN0b3JlQ2xlYXIoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGZpcnN0IHRhcmdldCB0ZXh0dXJlLlxuICAgICAqIENoYW5uZWwgc3RvcmFnZTpcbiAgICAgKiArIFI6IG5vcm1hbC54ICogMC41ICsgMC41XG4gICAgICogKyBHOiBub3JtYWwueSAqIDAuNSArIDAuNVxuICAgICAqICsgQjogbm9ybWFsLnogKiAwLjUgKyAwLjVcbiAgICAgKiArIEE6IGdsb3NzaW5lc3NcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlRleHR1cmUyRH1cbiAgICAgKi9cbiAgICBnZXRUYXJnZXRUZXh0dXJlMTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ0J1ZmZlclRleDE7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBzZWNvbmQgdGFyZ2V0IHRleHR1cmUuXG4gICAgICogQ2hhbm5lbCBzdG9yYWdlOlxuICAgICAqICsgUjogZGVwdGhcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlRleHR1cmUyRH1cbiAgICAgKi9cbiAgICBnZXRUYXJnZXRUZXh0dXJlMjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ0J1ZmZlclRleDI7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGlyZCB0YXJnZXQgdGV4dHVyZS5cbiAgICAgKiBDaGFubmVsIHN0b3JhZ2U6XG4gICAgICogKyBSOiBhbGJlZG8uclxuICAgICAqICsgRzogYWxiZWRvLmdcbiAgICAgKiArIEI6IGFsYmVkby5iXG4gICAgICogKyBBOiBtZXRhbG5lc3NcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlRleHR1cmUyRH1cbiAgICAgKi9cbiAgICBnZXRUYXJnZXRUZXh0dXJlMzogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ0J1ZmZlclRleDM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBmb3VydGggdGFyZ2V0IHRleHR1cmUuXG4gICAgICogQ2hhbm5lbCBzdG9yYWdlOlxuICAgICAqICsgUjogdmVsb2NpdHkuclxuICAgICAqICsgRzogdmVsb2NpdHkuZ1xuICAgICAqIEByZXR1cm4ge2NsYXkuVGV4dHVyZTJEfVxuICAgICAqL1xuICAgIGdldFRhcmdldFRleHR1cmU0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nQnVmZmVyVGV4NDtcbiAgICB9LFxuXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqL1xuICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICB0aGlzLl9nQnVmZmVyVGV4MS5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5fZ0J1ZmZlclRleDIuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX2dCdWZmZXJUZXgzLmRpc3Bvc2UocmVuZGVyZXIpO1xuXG4gICAgICAgIHRoaXMuX2RlZmF1bHROb3JtYWxNYXAuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX2RlZmF1bHRSb3VnaG5lc3NNYXAuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX2RlZmF1bHRNZXRhbG5lc3NNYXAuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX2RlZmF1bHREaWZmdXNlTWFwLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgR0J1ZmZlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2RlZmVycmVkL0dCdWZmZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEwOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///108\n");

/***/ }),
/* 109 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Cone__ = __webpack_require__(63);\n\n\n\n/**\n * @constructor clay.geometry.Cylinder\n * @extends clay.Geometry\n * @param {Object} [opt]\n * @param {number} [opt.radius]\n * @param {number} [opt.height]\n * @param {number} [opt.capSegments]\n * @param {number} [opt.heightSegments]\n */\nvar Cylinder = __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */].extend(\n/** @lends clay.geometry.Cylinder# */\n{\n    dynamic: false,\n    /**\n     * @type {number}\n     */\n    radius: 1,\n\n    /**\n     * @type {number}\n     */\n    height: 2,\n\n    /**\n     * @type {number}\n     */\n    capSegments: 50,\n\n    /**\n     * @type {number}\n     */\n    heightSegments: 1\n}, function() {\n    this.build();\n},\n/** @lends clay.geometry.Cylinder.prototype */\n{\n    /**\n     * Build cylinder geometry\n     */\n    build: function() {\n        var cone = new __WEBPACK_IMPORTED_MODULE_1__Cone__[\"a\" /* default */]({\n            topRadius: this.radius,\n            bottomRadius: this.radius,\n            capSegments: this.capSegments,\n            heightSegments: this.heightSegments,\n            height: this.height\n        });\n\n        this.attributes.position.value = cone.attributes.position.value;\n        this.attributes.normal.value = cone.attributes.normal.value;\n        this.attributes.texcoord0.value = cone.attributes.texcoord0.value;\n        this.indices = cone.indices;\n\n        this.boundingBox = cone.boundingBox;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Cylinder);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZ2VvbWV0cnkvQ3lsaW5kZXIuanM/ZTdkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi4vR2VvbWV0cnknO1xuaW1wb3J0IENvbmVHZW9tZXRyeSBmcm9tICcuL0NvbmUnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5Lmdlb21ldHJ5LkN5bGluZGVyXG4gKiBAZXh0ZW5kcyBjbGF5Lkdlb21ldHJ5XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LnJhZGl1c11cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LmhlaWdodF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LmNhcFNlZ21lbnRzXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHQuaGVpZ2h0U2VnbWVudHNdXG4gKi9cbnZhciBDeWxpbmRlciA9IEdlb21ldHJ5LmV4dGVuZChcbi8qKiBAbGVuZHMgY2xheS5nZW9tZXRyeS5DeWxpbmRlciMgKi9cbntcbiAgICBkeW5hbWljOiBmYWxzZSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHJhZGl1czogMSxcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgaGVpZ2h0OiAyLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBjYXBTZWdtZW50czogNTAsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGhlaWdodFNlZ21lbnRzOiAxXG59LCBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmJ1aWxkKCk7XG59LFxuLyoqIEBsZW5kcyBjbGF5Lmdlb21ldHJ5LkN5bGluZGVyLnByb3RvdHlwZSAqL1xue1xuICAgIC8qKlxuICAgICAqIEJ1aWxkIGN5bGluZGVyIGdlb21ldHJ5XG4gICAgICovXG4gICAgYnVpbGQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY29uZSA9IG5ldyBDb25lR2VvbWV0cnkoe1xuICAgICAgICAgICAgdG9wUmFkaXVzOiB0aGlzLnJhZGl1cyxcbiAgICAgICAgICAgIGJvdHRvbVJhZGl1czogdGhpcy5yYWRpdXMsXG4gICAgICAgICAgICBjYXBTZWdtZW50czogdGhpcy5jYXBTZWdtZW50cyxcbiAgICAgICAgICAgIGhlaWdodFNlZ21lbnRzOiB0aGlzLmhlaWdodFNlZ21lbnRzLFxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWUgPSBjb25lLmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWU7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcy5ub3JtYWwudmFsdWUgPSBjb25lLmF0dHJpYnV0ZXMubm9ybWFsLnZhbHVlO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMudGV4Y29vcmQwLnZhbHVlID0gY29uZS5hdHRyaWJ1dGVzLnRleGNvb3JkMC52YWx1ZTtcbiAgICAgICAgdGhpcy5pbmRpY2VzID0gY29uZS5pbmRpY2VzO1xuXG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3ggPSBjb25lLmJvdW5kaW5nQm94O1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBDeWxpbmRlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZ2VvbWV0cnkvQ3lsaW5kZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEwOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///109\n");

/***/ }),
/* 110 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n/**\n * @class 2x2 Matrix\n * @name mat2\n */\n\nvar mat2 = {};\n\n/**\n * Creates a new identity mat2\n *\n * @returns {mat2} a new 2x2 matrix\n */\nmat2.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](4);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n};\n\n/**\n * Creates a new mat2 initialized with values from an existing matrix\n *\n * @param {mat2} a matrix to clone\n * @returns {mat2} a new 2x2 matrix\n */\nmat2.clone = function(a) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](4);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Copy the values from one mat2 to another\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nmat2.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Set a mat2 to the identity matrix\n *\n * @param {mat2} out the receiving matrix\n * @returns {mat2} out\n */\nmat2.identity = function(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n};\n\n/**\n * Transpose the values of a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nmat2.transpose = function(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a1 = a[1];\n        out[1] = a[2];\n        out[2] = a1;\n    } else {\n        out[0] = a[0];\n        out[1] = a[2];\n        out[2] = a[1];\n        out[3] = a[3];\n    }\n\n    return out;\n};\n\n/**\n * Inverts a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nmat2.invert = function(out, a) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3],\n\n        // Calculate the determinant\n        det = a0 * a3 - a2 * a1;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] =  a3 * det;\n    out[1] = -a1 * det;\n    out[2] = -a2 * det;\n    out[3] =  a0 * det;\n\n    return out;\n};\n\n/**\n * Calculates the adjugate of a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nmat2.adjoint = function(out, a) {\n    // Caching this value is nessecary if out == a\n    var a0 = a[0];\n    out[0] =  a[3];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    out[3] =  a0;\n\n    return out;\n};\n\n/**\n * Calculates the determinant of a mat2\n *\n * @param {mat2} a the source matrix\n * @returns {Number} determinant of a\n */\nmat2.determinant = function (a) {\n    return a[0] * a[3] - a[2] * a[1];\n};\n\n/**\n * Multiplies two mat2's\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the first operand\n * @param {mat2} b the second operand\n * @returns {mat2} out\n */\nmat2.multiply = function (out, a, b) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n    out[0] = a0 * b0 + a2 * b1;\n    out[1] = a1 * b0 + a3 * b1;\n    out[2] = a0 * b2 + a2 * b3;\n    out[3] = a1 * b2 + a3 * b3;\n    return out;\n};\n\n/**\n * Alias for {@link mat2.multiply}\n * @function\n */\nmat2.mul = mat2.multiply;\n\n/**\n * Rotates a mat2 by the given angle\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2} out\n */\nmat2.rotate = function (out, a, rad) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3],\n        s = Math.sin(rad),\n        c = Math.cos(rad);\n    out[0] = a0 *  c + a2 * s;\n    out[1] = a1 *  c + a3 * s;\n    out[2] = a0 * -s + a2 * c;\n    out[3] = a1 * -s + a3 * c;\n    return out;\n};\n\n/**\n * Scales the mat2 by the dimensions in the given vec2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the matrix to rotate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat2} out\n **/\nmat2.scale = function(out, a, v) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3],\n        v0 = v[0], v1 = v[1];\n    out[0] = a0 * v0;\n    out[1] = a1 * v0;\n    out[2] = a2 * v1;\n    out[3] = a3 * v1;\n    return out;\n};\n\n/**\n * Returns Frobenius norm of a mat2\n *\n * @param {mat2} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nmat2.frob = function (a) {\n    return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2)))\n};\n\n/**\n * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\n * @param {mat2} L the lower triangular matrix\n * @param {mat2} D the diagonal matrix\n * @param {mat2} U the upper triangular matrix\n * @param {mat2} a the input matrix to factorize\n */\n\nmat2.LDU = function (L, D, U, a) {\n    L[2] = a[2]/a[0];\n    U[0] = a[0];\n    U[1] = a[1];\n    U[3] = a[3] - L[2] * U[1];\n    return [L, D, U];\n};\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (mat2);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZ2xtYXRyaXgvbWF0Mi5qcz81NGQ5Il0sInNvdXJjZXNDb250ZW50IjpbIlxuXG4vKiBDb3B5cmlnaHQgKGMpIDIwMTMsIEJyYW5kb24gSm9uZXMsIENvbGluIE1hY0tlbnppZSBJVi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0IG1vZGlmaWNhdGlvbixcbmFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcblxuICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpc1xuICAgIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbiAgICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZSBkb2N1bWVudGF0aW9uXG4gICAgYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG5cblRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORFxuQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRURcbldBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcbkRJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SXG5BTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVNcbihJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUztcbkxPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTlxuQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcbihJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTXG5TT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4gKi9cblxuaW1wb3J0IHsgR0xNQVRfQVJSQVlfVFlQRSB9IGZyb20gJy4vY29tbW9uJztcblxuLyoqXG4gKiBAY2xhc3MgMngyIE1hdHJpeFxuICogQG5hbWUgbWF0MlxuICovXG5cbnZhciBtYXQyID0ge307XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBtYXQyXG4gKlxuICogQHJldHVybnMge21hdDJ9IGEgbmV3IDJ4MiBtYXRyaXhcbiAqL1xubWF0Mi5jcmVhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgb3V0ID0gbmV3IEdMTUFUX0FSUkFZX1RZUEUoNCk7XG4gICAgb3V0WzBdID0gMTtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1hdDIgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge21hdDJ9IGEgbWF0cml4IHRvIGNsb25lXG4gKiBAcmV0dXJucyB7bWF0Mn0gYSBuZXcgMngyIG1hdHJpeFxuICovXG5tYXQyLmNsb25lID0gZnVuY3Rpb24oYSkge1xuICAgIHZhciBvdXQgPSBuZXcgR0xNQVRfQVJSQVlfVFlQRSg0KTtcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbMV07XG4gICAgb3V0WzJdID0gYVsyXTtcbiAgICBvdXRbM10gPSBhWzNdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSBtYXQyIHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge21hdDJ9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQyfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0Mn0gb3V0XG4gKi9cbm1hdDIuY29weSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICBvdXRbMl0gPSBhWzJdO1xuICAgIG91dFszXSA9IGFbM107XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogU2V0IGEgbWF0MiB0byB0aGUgaWRlbnRpdHkgbWF0cml4XG4gKlxuICogQHBhcmFtIHttYXQyfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQyfSBvdXRcbiAqL1xubWF0Mi5pZGVudGl0eSA9IGZ1bmN0aW9uKG91dCkge1xuICAgIG91dFswXSA9IDE7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDE7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogVHJhbnNwb3NlIHRoZSB2YWx1ZXMgb2YgYSBtYXQyXG4gKlxuICogQHBhcmFtIHttYXQyfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0Mn0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDJ9IG91dFxuICovXG5tYXQyLnRyYW5zcG9zZSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIC8vIElmIHdlIGFyZSB0cmFuc3Bvc2luZyBvdXJzZWx2ZXMgd2UgY2FuIHNraXAgYSBmZXcgc3RlcHMgYnV0IGhhdmUgdG8gY2FjaGUgc29tZSB2YWx1ZXNcbiAgICBpZiAob3V0ID09PSBhKSB7XG4gICAgICAgIHZhciBhMSA9IGFbMV07XG4gICAgICAgIG91dFsxXSA9IGFbMl07XG4gICAgICAgIG91dFsyXSA9IGExO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG91dFswXSA9IGFbMF07XG4gICAgICAgIG91dFsxXSA9IGFbMl07XG4gICAgICAgIG91dFsyXSA9IGFbMV07XG4gICAgICAgIG91dFszXSA9IGFbM107XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogSW52ZXJ0cyBhIG1hdDJcbiAqXG4gKiBAcGFyYW0ge21hdDJ9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQyfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0Mn0gb3V0XG4gKi9cbm1hdDIuaW52ZXJ0ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgdmFyIGEwID0gYVswXSwgYTEgPSBhWzFdLCBhMiA9IGFbMl0sIGEzID0gYVszXSxcblxuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG4gICAgICAgIGRldCA9IGEwICogYTMgLSBhMiAqIGExO1xuXG4gICAgaWYgKCFkZXQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGRldCA9IDEuMCAvIGRldDtcblxuICAgIG91dFswXSA9ICBhMyAqIGRldDtcbiAgICBvdXRbMV0gPSAtYTEgKiBkZXQ7XG4gICAgb3V0WzJdID0gLWEyICogZGV0O1xuICAgIG91dFszXSA9ICBhMCAqIGRldDtcblxuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGFkanVnYXRlIG9mIGEgbWF0MlxuICpcbiAqIEBwYXJhbSB7bWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDJ9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQyfSBvdXRcbiAqL1xubWF0Mi5hZGpvaW50ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgLy8gQ2FjaGluZyB0aGlzIHZhbHVlIGlzIG5lc3NlY2FyeSBpZiBvdXQgPT0gYVxuICAgIHZhciBhMCA9IGFbMF07XG4gICAgb3V0WzBdID0gIGFbM107XG4gICAgb3V0WzFdID0gLWFbMV07XG4gICAgb3V0WzJdID0gLWFbMl07XG4gICAgb3V0WzNdID0gIGEwO1xuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZGV0ZXJtaW5hbnQgb2YgYSBtYXQyXG4gKlxuICogQHBhcmFtIHttYXQyfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkZXRlcm1pbmFudCBvZiBhXG4gKi9cbm1hdDIuZGV0ZXJtaW5hbnQgPSBmdW5jdGlvbiAoYSkge1xuICAgIHJldHVybiBhWzBdICogYVszXSAtIGFbMl0gKiBhWzFdO1xufTtcblxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBtYXQyJ3NcbiAqXG4gKiBAcGFyYW0ge21hdDJ9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge21hdDJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0Mn0gb3V0XG4gKi9cbm1hdDIubXVsdGlwbHkgPSBmdW5jdGlvbiAob3V0LCBhLCBiKSB7XG4gICAgdmFyIGEwID0gYVswXSwgYTEgPSBhWzFdLCBhMiA9IGFbMl0sIGEzID0gYVszXTtcbiAgICB2YXIgYjAgPSBiWzBdLCBiMSA9IGJbMV0sIGIyID0gYlsyXSwgYjMgPSBiWzNdO1xuICAgIG91dFswXSA9IGEwICogYjAgKyBhMiAqIGIxO1xuICAgIG91dFsxXSA9IGExICogYjAgKyBhMyAqIGIxO1xuICAgIG91dFsyXSA9IGEwICogYjIgKyBhMiAqIGIzO1xuICAgIG91dFszXSA9IGExICogYjIgKyBhMyAqIGIzO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgbWF0Mi5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5tYXQyLm11bCA9IG1hdDIubXVsdGlwbHk7XG5cbi8qKlxuICogUm90YXRlcyBhIG1hdDIgYnkgdGhlIGdpdmVuIGFuZ2xlXG4gKlxuICogQHBhcmFtIHttYXQyfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0Mn0gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQyfSBvdXRcbiAqL1xubWF0Mi5yb3RhdGUgPSBmdW5jdGlvbiAob3V0LCBhLCByYWQpIHtcbiAgICB2YXIgYTAgPSBhWzBdLCBhMSA9IGFbMV0sIGEyID0gYVsyXSwgYTMgPSBhWzNdLFxuICAgICAgICBzID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgICAgYyA9IE1hdGguY29zKHJhZCk7XG4gICAgb3V0WzBdID0gYTAgKiAgYyArIGEyICogcztcbiAgICBvdXRbMV0gPSBhMSAqICBjICsgYTMgKiBzO1xuICAgIG91dFsyXSA9IGEwICogLXMgKyBhMiAqIGM7XG4gICAgb3V0WzNdID0gYTEgKiAtcyArIGEzICogYztcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBTY2FsZXMgdGhlIG1hdDIgYnkgdGhlIGRpbWVuc2lvbnMgaW4gdGhlIGdpdmVuIHZlYzJcbiAqXG4gKiBAcGFyYW0ge21hdDJ9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQyfSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge3ZlYzJ9IHYgdGhlIHZlYzIgdG8gc2NhbGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDJ9IG91dFxuICoqL1xubWF0Mi5zY2FsZSA9IGZ1bmN0aW9uKG91dCwgYSwgdikge1xuICAgIHZhciBhMCA9IGFbMF0sIGExID0gYVsxXSwgYTIgPSBhWzJdLCBhMyA9IGFbM10sXG4gICAgICAgIHYwID0gdlswXSwgdjEgPSB2WzFdO1xuICAgIG91dFswXSA9IGEwICogdjA7XG4gICAgb3V0WzFdID0gYTEgKiB2MDtcbiAgICBvdXRbMl0gPSBhMiAqIHYxO1xuICAgIG91dFszXSA9IGEzICogdjE7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUmV0dXJucyBGcm9iZW5pdXMgbm9ybSBvZiBhIG1hdDJcbiAqXG4gKiBAcGFyYW0ge21hdDJ9IGEgdGhlIG1hdHJpeCB0byBjYWxjdWxhdGUgRnJvYmVuaXVzIG5vcm0gb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IEZyb2Jlbml1cyBub3JtXG4gKi9cbm1hdDIuZnJvYiA9IGZ1bmN0aW9uIChhKSB7XG4gICAgcmV0dXJuKE1hdGguc3FydChNYXRoLnBvdyhhWzBdLCAyKSArIE1hdGgucG93KGFbMV0sIDIpICsgTWF0aC5wb3coYVsyXSwgMikgKyBNYXRoLnBvdyhhWzNdLCAyKSkpXG59O1xuXG4vKipcbiAqIFJldHVybnMgTCwgRCBhbmQgVSBtYXRyaWNlcyAoTG93ZXIgdHJpYW5ndWxhciwgRGlhZ29uYWwgYW5kIFVwcGVyIHRyaWFuZ3VsYXIpIGJ5IGZhY3Rvcml6aW5nIHRoZSBpbnB1dCBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0Mn0gTCB0aGUgbG93ZXIgdHJpYW5ndWxhciBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0Mn0gRCB0aGUgZGlhZ29uYWwgbWF0cml4XG4gKiBAcGFyYW0ge21hdDJ9IFUgdGhlIHVwcGVyIHRyaWFuZ3VsYXIgbWF0cml4XG4gKiBAcGFyYW0ge21hdDJ9IGEgdGhlIGlucHV0IG1hdHJpeCB0byBmYWN0b3JpemVcbiAqL1xuXG5tYXQyLkxEVSA9IGZ1bmN0aW9uIChMLCBELCBVLCBhKSB7XG4gICAgTFsyXSA9IGFbMl0vYVswXTtcbiAgICBVWzBdID0gYVswXTtcbiAgICBVWzFdID0gYVsxXTtcbiAgICBVWzNdID0gYVszXSAtIExbMl0gKiBVWzFdO1xuICAgIHJldHVybiBbTCwgRCwgVV07XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IG1hdDI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9nbG1hdHJpeC9tYXQyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///110\n");

/***/ }),
/* 111 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n/**\n * @class 2x3 Matrix\n * @name mat2d\n *\n * @description\n * A mat2d contains six elements defined as:\n * <pre>\n * [a, c, tx,\n *  b, d, ty]\n * </pre>\n * This is a short form for the 3x3 matrix:\n * <pre>\n * [a, c, tx,\n *  b, d, ty,\n *  0, 0, 1]\n * </pre>\n * The last row is ignored so the array is shorter and operations are faster.\n */\n\nvar mat2d = {};\n\n/**\n * Creates a new identity mat2d\n *\n * @returns {mat2d} a new 2x3 matrix\n */\nmat2d.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](6);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n};\n\n/**\n * Creates a new mat2d initialized with values from an existing matrix\n *\n * @param {mat2d} a matrix to clone\n * @returns {mat2d} a new 2x3 matrix\n */\nmat2d.clone = function(a) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](6);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    return out;\n};\n\n/**\n * Copy the values from one mat2d to another\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the source matrix\n * @returns {mat2d} out\n */\nmat2d.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    return out;\n};\n\n/**\n * Set a mat2d to the identity matrix\n *\n * @param {mat2d} out the receiving matrix\n * @returns {mat2d} out\n */\nmat2d.identity = function(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n};\n\n/**\n * Inverts a mat2d\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the source matrix\n * @returns {mat2d} out\n */\nmat2d.invert = function(out, a) {\n    var aa = a[0], ab = a[1], ac = a[2], ad = a[3],\n        atx = a[4], aty = a[5];\n\n    var det = aa * ad - ab * ac;\n    if(!det){\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = ad * det;\n    out[1] = -ab * det;\n    out[2] = -ac * det;\n    out[3] = aa * det;\n    out[4] = (ac * aty - ad * atx) * det;\n    out[5] = (ab * atx - aa * aty) * det;\n    return out;\n};\n\n/**\n * Calculates the determinant of a mat2d\n *\n * @param {mat2d} a the source matrix\n * @returns {Number} determinant of a\n */\nmat2d.determinant = function (a) {\n    return a[0] * a[3] - a[1] * a[2];\n};\n\n/**\n * Multiplies two mat2d's\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the first operand\n * @param {mat2d} b the second operand\n * @returns {mat2d} out\n */\nmat2d.multiply = function (out, a, b) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5],\n        b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3], b4 = b[4], b5 = b[5];\n    out[0] = a0 * b0 + a2 * b1;\n    out[1] = a1 * b0 + a3 * b1;\n    out[2] = a0 * b2 + a2 * b3;\n    out[3] = a1 * b2 + a3 * b3;\n    out[4] = a0 * b4 + a2 * b5 + a4;\n    out[5] = a1 * b4 + a3 * b5 + a5;\n    return out;\n};\n\n/**\n * Alias for {@link mat2d.multiply}\n * @function\n */\nmat2d.mul = mat2d.multiply;\n\n\n/**\n * Rotates a mat2d by the given angle\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2d} out\n */\nmat2d.rotate = function (out, a, rad) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5],\n        s = Math.sin(rad),\n        c = Math.cos(rad);\n    out[0] = a0 *  c + a2 * s;\n    out[1] = a1 *  c + a3 * s;\n    out[2] = a0 * -s + a2 * c;\n    out[3] = a1 * -s + a3 * c;\n    out[4] = a4;\n    out[5] = a5;\n    return out;\n};\n\n/**\n * Scales the mat2d by the dimensions in the given vec2\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to translate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat2d} out\n **/\nmat2d.scale = function(out, a, v) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5],\n        v0 = v[0], v1 = v[1];\n    out[0] = a0 * v0;\n    out[1] = a1 * v0;\n    out[2] = a2 * v1;\n    out[3] = a3 * v1;\n    out[4] = a4;\n    out[5] = a5;\n    return out;\n};\n\n/**\n * Translates the mat2d by the dimensions in the given vec2\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to translate\n * @param {vec2} v the vec2 to translate the matrix by\n * @returns {mat2d} out\n **/\nmat2d.translate = function(out, a, v) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5],\n        v0 = v[0], v1 = v[1];\n    out[0] = a0;\n    out[1] = a1;\n    out[2] = a2;\n    out[3] = a3;\n    out[4] = a0 * v0 + a2 * v1 + a4;\n    out[5] = a1 * v0 + a3 * v1 + a5;\n    return out;\n};\n\n/**\n * Returns Frobenius norm of a mat2d\n *\n * @param {mat2d} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nmat2d.frob = function (a) {\n    return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + 1))\n};\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (mat2d);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTExLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZ2xtYXRyaXgvbWF0MmQuanM/MTAxYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qIENvcHlyaWdodCAoYykgMjAxMywgQnJhbmRvbiBKb25lcywgQ29saW4gTWFjS2VuemllIElWLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5SZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuXG4gICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gICAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAgICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXG5BTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1JcbkFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xuKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xuTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OXG5BTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcblNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLiAqL1xuXG5pbXBvcnQgeyBHTE1BVF9BUlJBWV9UWVBFIH0gZnJvbSAnLi9jb21tb24nO1xuXG4vKipcbiAqIEBjbGFzcyAyeDMgTWF0cml4XG4gKiBAbmFtZSBtYXQyZFxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQSBtYXQyZCBjb250YWlucyBzaXggZWxlbWVudHMgZGVmaW5lZCBhczpcbiAqIDxwcmU+XG4gKiBbYSwgYywgdHgsXG4gKiAgYiwgZCwgdHldXG4gKiA8L3ByZT5cbiAqIFRoaXMgaXMgYSBzaG9ydCBmb3JtIGZvciB0aGUgM3gzIG1hdHJpeDpcbiAqIDxwcmU+XG4gKiBbYSwgYywgdHgsXG4gKiAgYiwgZCwgdHksXG4gKiAgMCwgMCwgMV1cbiAqIDwvcHJlPlxuICogVGhlIGxhc3Qgcm93IGlzIGlnbm9yZWQgc28gdGhlIGFycmF5IGlzIHNob3J0ZXIgYW5kIG9wZXJhdGlvbnMgYXJlIGZhc3Rlci5cbiAqL1xuXG52YXIgbWF0MmQgPSB7fTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IG1hdDJkXG4gKlxuICogQHJldHVybnMge21hdDJkfSBhIG5ldyAyeDMgbWF0cml4XG4gKi9cbm1hdDJkLmNyZWF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvdXQgPSBuZXcgR0xNQVRfQVJSQVlfVFlQRSg2KTtcbiAgICBvdXRbMF0gPSAxO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAxO1xuICAgIG91dFs0XSA9IDA7XG4gICAgb3V0WzVdID0gMDtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1hdDJkIGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgbWF0cml4XG4gKlxuICogQHBhcmFtIHttYXQyZH0gYSBtYXRyaXggdG8gY2xvbmVcbiAqIEByZXR1cm5zIHttYXQyZH0gYSBuZXcgMngzIG1hdHJpeFxuICovXG5tYXQyZC5jbG9uZSA9IGZ1bmN0aW9uKGEpIHtcbiAgICB2YXIgb3V0ID0gbmV3IEdMTUFUX0FSUkFZX1RZUEUoNik7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzFdO1xuICAgIG91dFsyXSA9IGFbMl07XG4gICAgb3V0WzNdID0gYVszXTtcbiAgICBvdXRbNF0gPSBhWzRdO1xuICAgIG91dFs1XSA9IGFbNV07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIG1hdDJkIHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge21hdDJkfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0MmR9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQyZH0gb3V0XG4gKi9cbm1hdDJkLmNvcHkgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbMV07XG4gICAgb3V0WzJdID0gYVsyXTtcbiAgICBvdXRbM10gPSBhWzNdO1xuICAgIG91dFs0XSA9IGFbNF07XG4gICAgb3V0WzVdID0gYVs1XTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBTZXQgYSBtYXQyZCB0byB0aGUgaWRlbnRpdHkgbWF0cml4XG4gKlxuICogQHBhcmFtIHttYXQyZH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0MmR9IG91dFxuICovXG5tYXQyZC5pZGVudGl0eSA9IGZ1bmN0aW9uKG91dCkge1xuICAgIG91dFswXSA9IDE7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDE7XG4gICAgb3V0WzRdID0gMDtcbiAgICBvdXRbNV0gPSAwO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEludmVydHMgYSBtYXQyZFxuICpcbiAqIEBwYXJhbSB7bWF0MmR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQyZH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDJkfSBvdXRcbiAqL1xubWF0MmQuaW52ZXJ0ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgdmFyIGFhID0gYVswXSwgYWIgPSBhWzFdLCBhYyA9IGFbMl0sIGFkID0gYVszXSxcbiAgICAgICAgYXR4ID0gYVs0XSwgYXR5ID0gYVs1XTtcblxuICAgIHZhciBkZXQgPSBhYSAqIGFkIC0gYWIgKiBhYztcbiAgICBpZighZGV0KXtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGRldCA9IDEuMCAvIGRldDtcblxuICAgIG91dFswXSA9IGFkICogZGV0O1xuICAgIG91dFsxXSA9IC1hYiAqIGRldDtcbiAgICBvdXRbMl0gPSAtYWMgKiBkZXQ7XG4gICAgb3V0WzNdID0gYWEgKiBkZXQ7XG4gICAgb3V0WzRdID0gKGFjICogYXR5IC0gYWQgKiBhdHgpICogZGV0O1xuICAgIG91dFs1XSA9IChhYiAqIGF0eCAtIGFhICogYXR5KSAqIGRldDtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkZXRlcm1pbmFudCBvZiBhIG1hdDJkXG4gKlxuICogQHBhcmFtIHttYXQyZH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge051bWJlcn0gZGV0ZXJtaW5hbnQgb2YgYVxuICovXG5tYXQyZC5kZXRlcm1pbmFudCA9IGZ1bmN0aW9uIChhKSB7XG4gICAgcmV0dXJuIGFbMF0gKiBhWzNdIC0gYVsxXSAqIGFbMl07XG59O1xuXG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIG1hdDJkJ3NcbiAqXG4gKiBAcGFyYW0ge21hdDJkfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0MmR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7bWF0MmR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7bWF0MmR9IG91dFxuICovXG5tYXQyZC5tdWx0aXBseSA9IGZ1bmN0aW9uIChvdXQsIGEsIGIpIHtcbiAgICB2YXIgYTAgPSBhWzBdLCBhMSA9IGFbMV0sIGEyID0gYVsyXSwgYTMgPSBhWzNdLCBhNCA9IGFbNF0sIGE1ID0gYVs1XSxcbiAgICAgICAgYjAgPSBiWzBdLCBiMSA9IGJbMV0sIGIyID0gYlsyXSwgYjMgPSBiWzNdLCBiNCA9IGJbNF0sIGI1ID0gYls1XTtcbiAgICBvdXRbMF0gPSBhMCAqIGIwICsgYTIgKiBiMTtcbiAgICBvdXRbMV0gPSBhMSAqIGIwICsgYTMgKiBiMTtcbiAgICBvdXRbMl0gPSBhMCAqIGIyICsgYTIgKiBiMztcbiAgICBvdXRbM10gPSBhMSAqIGIyICsgYTMgKiBiMztcbiAgICBvdXRbNF0gPSBhMCAqIGI0ICsgYTIgKiBiNSArIGE0O1xuICAgIG91dFs1XSA9IGExICogYjQgKyBhMyAqIGI1ICsgYTU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQyZC5tdWx0aXBseX1cbiAqIEBmdW5jdGlvblxuICovXG5tYXQyZC5tdWwgPSBtYXQyZC5tdWx0aXBseTtcblxuXG4vKipcbiAqIFJvdGF0ZXMgYSBtYXQyZCBieSB0aGUgZ2l2ZW4gYW5nbGVcbiAqXG4gKiBAcGFyYW0ge21hdDJkfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0MmR9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0MmR9IG91dFxuICovXG5tYXQyZC5yb3RhdGUgPSBmdW5jdGlvbiAob3V0LCBhLCByYWQpIHtcbiAgICB2YXIgYTAgPSBhWzBdLCBhMSA9IGFbMV0sIGEyID0gYVsyXSwgYTMgPSBhWzNdLCBhNCA9IGFbNF0sIGE1ID0gYVs1XSxcbiAgICAgICAgcyA9IE1hdGguc2luKHJhZCksXG4gICAgICAgIGMgPSBNYXRoLmNvcyhyYWQpO1xuICAgIG91dFswXSA9IGEwICogIGMgKyBhMiAqIHM7XG4gICAgb3V0WzFdID0gYTEgKiAgYyArIGEzICogcztcbiAgICBvdXRbMl0gPSBhMCAqIC1zICsgYTIgKiBjO1xuICAgIG91dFszXSA9IGExICogLXMgKyBhMyAqIGM7XG4gICAgb3V0WzRdID0gYTQ7XG4gICAgb3V0WzVdID0gYTU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogU2NhbGVzIHRoZSBtYXQyZCBieSB0aGUgZGltZW5zaW9ucyBpbiB0aGUgZ2l2ZW4gdmVjMlxuICpcbiAqIEBwYXJhbSB7bWF0MmR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQyZH0gYSB0aGUgbWF0cml4IHRvIHRyYW5zbGF0ZVxuICogQHBhcmFtIHt2ZWMyfSB2IHRoZSB2ZWMyIHRvIHNjYWxlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQyZH0gb3V0XG4gKiovXG5tYXQyZC5zY2FsZSA9IGZ1bmN0aW9uKG91dCwgYSwgdikge1xuICAgIHZhciBhMCA9IGFbMF0sIGExID0gYVsxXSwgYTIgPSBhWzJdLCBhMyA9IGFbM10sIGE0ID0gYVs0XSwgYTUgPSBhWzVdLFxuICAgICAgICB2MCA9IHZbMF0sIHYxID0gdlsxXTtcbiAgICBvdXRbMF0gPSBhMCAqIHYwO1xuICAgIG91dFsxXSA9IGExICogdjA7XG4gICAgb3V0WzJdID0gYTIgKiB2MTtcbiAgICBvdXRbM10gPSBhMyAqIHYxO1xuICAgIG91dFs0XSA9IGE0O1xuICAgIG91dFs1XSA9IGE1O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFRyYW5zbGF0ZXMgdGhlIG1hdDJkIGJ5IHRoZSBkaW1lbnNpb25zIGluIHRoZSBnaXZlbiB2ZWMyXG4gKlxuICogQHBhcmFtIHttYXQyZH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDJkfSBhIHRoZSBtYXRyaXggdG8gdHJhbnNsYXRlXG4gKiBAcGFyYW0ge3ZlYzJ9IHYgdGhlIHZlYzIgdG8gdHJhbnNsYXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQyZH0gb3V0XG4gKiovXG5tYXQyZC50cmFuc2xhdGUgPSBmdW5jdGlvbihvdXQsIGEsIHYpIHtcbiAgICB2YXIgYTAgPSBhWzBdLCBhMSA9IGFbMV0sIGEyID0gYVsyXSwgYTMgPSBhWzNdLCBhNCA9IGFbNF0sIGE1ID0gYVs1XSxcbiAgICAgICAgdjAgPSB2WzBdLCB2MSA9IHZbMV07XG4gICAgb3V0WzBdID0gYTA7XG4gICAgb3V0WzFdID0gYTE7XG4gICAgb3V0WzJdID0gYTI7XG4gICAgb3V0WzNdID0gYTM7XG4gICAgb3V0WzRdID0gYTAgKiB2MCArIGEyICogdjEgKyBhNDtcbiAgICBvdXRbNV0gPSBhMSAqIHYwICsgYTMgKiB2MSArIGE1O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFJldHVybnMgRnJvYmVuaXVzIG5vcm0gb2YgYSBtYXQyZFxuICpcbiAqIEBwYXJhbSB7bWF0MmR9IGEgdGhlIG1hdHJpeCB0byBjYWxjdWxhdGUgRnJvYmVuaXVzIG5vcm0gb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IEZyb2Jlbml1cyBub3JtXG4gKi9cbm1hdDJkLmZyb2IgPSBmdW5jdGlvbiAoYSkge1xuICAgIHJldHVybihNYXRoLnNxcnQoTWF0aC5wb3coYVswXSwgMikgKyBNYXRoLnBvdyhhWzFdLCAyKSArIE1hdGgucG93KGFbMl0sIDIpICsgTWF0aC5wb3coYVszXSwgMikgKyBNYXRoLnBvdyhhWzRdLCAyKSArIE1hdGgucG93KGFbNV0sIDIpICsgMSkpXG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IG1hdDJkO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZ2xtYXRyaXgvbWF0MmQuanNcbi8vIG1vZHVsZSBpZCA9IDExMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///111\n");

/***/ }),
/* 112 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Vector2__ = __webpack_require__(26);\n\n\n\n/**\n * Random or constant 1d, 2d, 3d vector generator\n * @constructor\n * @alias clay.Value\n */\nvar Value = function() {};\n\n/**\n * @function\n * @param {number|clay.Vector2|clay.Vector3} [out]\n * @return {number|clay.Vector2|clay.Vector3}\n */\nValue.prototype.get = function(out) {};\n\n// Constant\nvar ConstantValue = function(val) {\n    this.get = function() {\n        return val;\n    };\n};\nConstantValue.prototype = new Value();\nConstantValue.prototype.constructor = ConstantValue;\n\n// Vector\nvar VectorValue = function(val) {\n    var Constructor = val.constructor;\n    this.get = function(out) {\n        if (!out) {\n            out = new Constructor();\n        }\n        out.copy(val);\n        return out;\n    };\n};\nVectorValue.prototype = new Value();\nVectorValue.prototype.constructor = VectorValue;\n//Random 1D\nvar Random1D = function(min, max) {\n    var range = max - min;\n    this.get = function() {\n        return Math.random() * range + min;\n    };\n};\nRandom1D.prototype = new Value();\nRandom1D.prototype.constructor = Random1D;\n\n// Random2D\nvar Random2D = function(min, max) {\n    var rangeX = max.x - min.x;\n    var rangeY = max.y - min.y;\n\n    this.get = function(out) {\n        if (!out) {\n            out = new __WEBPACK_IMPORTED_MODULE_1__Vector2__[\"a\" /* default */]();\n        }\n        __WEBPACK_IMPORTED_MODULE_1__Vector2__[\"a\" /* default */].set(\n            out,\n            rangeX * Math.random() + min.array[0],\n            rangeY * Math.random() + min.array[1]\n        );\n\n        return out;\n    };\n};\nRandom2D.prototype = new Value();\nRandom2D.prototype.constructor = Random2D;\n\nvar Random3D = function(min, max) {\n    var rangeX = max.x - min.x;\n    var rangeY = max.y - min.y;\n    var rangeZ = max.z - min.z;\n\n    this.get = function(out) {\n        if (!out) {\n            out = new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n        }\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].set(\n            out,\n            rangeX * Math.random() + min.array[0],\n            rangeY * Math.random() + min.array[1],\n            rangeZ * Math.random() + min.array[2]\n        );\n\n        return out;\n    };\n};\nRandom3D.prototype = new Value();\nRandom3D.prototype.constructor = Random3D;\n\n// Factory methods\n\n/**\n * Create a constant 1d value generator\n * @param  {number} constant\n * @return {clay.Value}\n */\nValue.constant = function(constant) {\n    return new ConstantValue(constant);\n};\n\n/**\n * Create a constant vector value(2d or 3d) generator\n * @param  {clay.Vector2|clay.Vector3} vector\n * @return {clay.Value}\n */\nValue.vector = function(vector) {\n    return new VectorValue(vector);\n};\n\n/**\n * Create a random 1d value generator\n * @param  {number} min\n * @param  {number} max\n * @return {clay.Value}\n */\nValue.random1D = function(min, max) {\n    return new Random1D(min, max);\n};\n\n/**\n * Create a random 2d value generator\n * @param  {clay.Vector2} min\n * @param  {clay.Vector2} max\n * @return {clay.Value}\n */\nValue.random2D = function(min, max) {\n    return new Random2D(min, max);\n};\n\n/**\n * Create a random 3d value generator\n * @param  {clay.Vector3} min\n * @param  {clay.Vector3} max\n * @return {clay.Value}\n */\nValue.random3D = function(min, max) {\n    return new Random3D(min, max);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Value);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvbWF0aC9WYWx1ZS5qcz82MGJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBWZWN0b3IzIGZyb20gJy4vVmVjdG9yMyc7XG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuL1ZlY3RvcjInO1xuXG4vKipcbiAqIFJhbmRvbSBvciBjb25zdGFudCAxZCwgMmQsIDNkIHZlY3RvciBnZW5lcmF0b3JcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuVmFsdWVcbiAqL1xudmFyIFZhbHVlID0gZnVuY3Rpb24oKSB7fTtcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7bnVtYmVyfGNsYXkuVmVjdG9yMnxjbGF5LlZlY3RvcjN9IFtvdXRdXG4gKiBAcmV0dXJuIHtudW1iZXJ8Y2xheS5WZWN0b3IyfGNsYXkuVmVjdG9yM31cbiAqL1xuVmFsdWUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKG91dCkge307XG5cbi8vIENvbnN0YW50XG52YXIgQ29uc3RhbnRWYWx1ZSA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcbn07XG5Db25zdGFudFZhbHVlLnByb3RvdHlwZSA9IG5ldyBWYWx1ZSgpO1xuQ29uc3RhbnRWYWx1ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDb25zdGFudFZhbHVlO1xuXG4vLyBWZWN0b3JcbnZhciBWZWN0b3JWYWx1ZSA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHZhciBDb25zdHJ1Y3RvciA9IHZhbC5jb25zdHJ1Y3RvcjtcbiAgICB0aGlzLmdldCA9IGZ1bmN0aW9uKG91dCkge1xuICAgICAgICBpZiAoIW91dCkge1xuICAgICAgICAgICAgb3V0ID0gbmV3IENvbnN0cnVjdG9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgb3V0LmNvcHkodmFsKTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcblZlY3RvclZhbHVlLnByb3RvdHlwZSA9IG5ldyBWYWx1ZSgpO1xuVmVjdG9yVmFsdWUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVmVjdG9yVmFsdWU7XG4vL1JhbmRvbSAxRFxudmFyIFJhbmRvbTFEID0gZnVuY3Rpb24obWluLCBtYXgpIHtcbiAgICB2YXIgcmFuZ2UgPSBtYXggLSBtaW47XG4gICAgdGhpcy5nZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiByYW5nZSArIG1pbjtcbiAgICB9O1xufTtcblJhbmRvbTFELnByb3RvdHlwZSA9IG5ldyBWYWx1ZSgpO1xuUmFuZG9tMUQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUmFuZG9tMUQ7XG5cbi8vIFJhbmRvbTJEXG52YXIgUmFuZG9tMkQgPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIHZhciByYW5nZVggPSBtYXgueCAtIG1pbi54O1xuICAgIHZhciByYW5nZVkgPSBtYXgueSAtIG1pbi55O1xuXG4gICAgdGhpcy5nZXQgPSBmdW5jdGlvbihvdXQpIHtcbiAgICAgICAgaWYgKCFvdXQpIHtcbiAgICAgICAgICAgIG91dCA9IG5ldyBWZWN0b3IyKCk7XG4gICAgICAgIH1cbiAgICAgICAgVmVjdG9yMi5zZXQoXG4gICAgICAgICAgICBvdXQsXG4gICAgICAgICAgICByYW5nZVggKiBNYXRoLnJhbmRvbSgpICsgbWluLmFycmF5WzBdLFxuICAgICAgICAgICAgcmFuZ2VZICogTWF0aC5yYW5kb20oKSArIG1pbi5hcnJheVsxXVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG5SYW5kb20yRC5wcm90b3R5cGUgPSBuZXcgVmFsdWUoKTtcblJhbmRvbTJELnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJhbmRvbTJEO1xuXG52YXIgUmFuZG9tM0QgPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIHZhciByYW5nZVggPSBtYXgueCAtIG1pbi54O1xuICAgIHZhciByYW5nZVkgPSBtYXgueSAtIG1pbi55O1xuICAgIHZhciByYW5nZVogPSBtYXgueiAtIG1pbi56O1xuXG4gICAgdGhpcy5nZXQgPSBmdW5jdGlvbihvdXQpIHtcbiAgICAgICAgaWYgKCFvdXQpIHtcbiAgICAgICAgICAgIG91dCA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgIH1cbiAgICAgICAgVmVjdG9yMy5zZXQoXG4gICAgICAgICAgICBvdXQsXG4gICAgICAgICAgICByYW5nZVggKiBNYXRoLnJhbmRvbSgpICsgbWluLmFycmF5WzBdLFxuICAgICAgICAgICAgcmFuZ2VZICogTWF0aC5yYW5kb20oKSArIG1pbi5hcnJheVsxXSxcbiAgICAgICAgICAgIHJhbmdlWiAqIE1hdGgucmFuZG9tKCkgKyBtaW4uYXJyYXlbMl1cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuUmFuZG9tM0QucHJvdG90eXBlID0gbmV3IFZhbHVlKCk7XG5SYW5kb20zRC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSYW5kb20zRDtcblxuLy8gRmFjdG9yeSBtZXRob2RzXG5cbi8qKlxuICogQ3JlYXRlIGEgY29uc3RhbnQgMWQgdmFsdWUgZ2VuZXJhdG9yXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGNvbnN0YW50XG4gKiBAcmV0dXJuIHtjbGF5LlZhbHVlfVxuICovXG5WYWx1ZS5jb25zdGFudCA9IGZ1bmN0aW9uKGNvbnN0YW50KSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdGFudFZhbHVlKGNvbnN0YW50KTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgY29uc3RhbnQgdmVjdG9yIHZhbHVlKDJkIG9yIDNkKSBnZW5lcmF0b3JcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMnxjbGF5LlZlY3RvcjN9IHZlY3RvclxuICogQHJldHVybiB7Y2xheS5WYWx1ZX1cbiAqL1xuVmFsdWUudmVjdG9yID0gZnVuY3Rpb24odmVjdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3JWYWx1ZSh2ZWN0b3IpO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSByYW5kb20gMWQgdmFsdWUgZ2VuZXJhdG9yXG4gKiBAcGFyYW0gIHtudW1iZXJ9IG1pblxuICogQHBhcmFtICB7bnVtYmVyfSBtYXhcbiAqIEByZXR1cm4ge2NsYXkuVmFsdWV9XG4gKi9cblZhbHVlLnJhbmRvbTFEID0gZnVuY3Rpb24obWluLCBtYXgpIHtcbiAgICByZXR1cm4gbmV3IFJhbmRvbTFEKG1pbiwgbWF4KTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgcmFuZG9tIDJkIHZhbHVlIGdlbmVyYXRvclxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBtaW5cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gbWF4XG4gKiBAcmV0dXJuIHtjbGF5LlZhbHVlfVxuICovXG5WYWx1ZS5yYW5kb20yRCA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIG5ldyBSYW5kb20yRChtaW4sIG1heCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIHJhbmRvbSAzZCB2YWx1ZSBnZW5lcmF0b3JcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gbWluXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG1heFxuICogQHJldHVybiB7Y2xheS5WYWx1ZX1cbiAqL1xuVmFsdWUucmFuZG9tM0QgPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIHJldHVybiBuZXcgUmFuZG9tM0QobWluLCBtYXgpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgVmFsdWU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL21hdGgvVmFsdWUuanNcbi8vIG1vZHVsZSBpZCA9IDExMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///112\n");

/***/ }),
/* 113 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\n/**\n * @constructor\n * @alias clay.particle.Particle\n */\nvar Particle = function() {\n    /**\n     * @type {clay.Vector3}\n     */\n    this.position = new __WEBPACK_IMPORTED_MODULE_0__math_Vector3__[\"a\" /* default */]();\n\n    /**\n     * Use euler angle to represent particle rotation\n     * @type {clay.Vector3}\n     */\n    this.rotation = new __WEBPACK_IMPORTED_MODULE_0__math_Vector3__[\"a\" /* default */]();\n\n    /**\n     * @type {?clay.Vector3}\n     */\n    this.velocity = null;\n\n    /**\n     * @type {?clay.Vector3}\n     */\n    this.angularVelocity = null;\n\n    /**\n     * @type {number}\n     */\n    this.life = 1;\n\n    /**\n     * @type {number}\n     */\n    this.age = 0;\n\n    /**\n     * @type {number}\n     */\n    this.spriteSize = 1;\n\n    /**\n     * @type {number}\n     */\n    this.weight = 1;\n\n    /**\n     * @type {clay.particle.Emitter}\n     */\n    this.emitter = null;\n};\n\n/**\n * Update particle position\n * @param  {number} deltaTime\n */\nParticle.prototype.update = function(deltaTime) {\n    if (this.velocity) {\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(this.position.array, this.position.array, this.velocity.array, deltaTime);\n    }\n    if (this.angularVelocity) {\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(this.rotation.array, this.rotation.array, this.angularVelocity.array, deltaTime);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Particle);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGFydGljbGUvUGFydGljbGUuanM/OTNiMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVmVjdG9yMyBmcm9tICcuLi9tYXRoL1ZlY3RvcjMnO1xuaW1wb3J0IHZlYzMgZnJvbSAnLi4vZ2xtYXRyaXgvdmVjMyc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5wYXJ0aWNsZS5QYXJ0aWNsZVxuICovXG52YXIgUGFydGljbGUgPSBmdW5jdGlvbigpIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjdG9yMygpO1xuXG4gICAgLyoqXG4gICAgICogVXNlIGV1bGVyIGFuZ2xlIHRvIHJlcHJlc2VudCBwYXJ0aWNsZSByb3RhdGlvblxuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgdGhpcy5yb3RhdGlvbiA9IG5ldyBWZWN0b3IzKCk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7P2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICB0aGlzLnZlbG9jaXR5ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5saWZlID0gMTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5hZ2UgPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnNwcml0ZVNpemUgPSAxO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLndlaWdodCA9IDE7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5wYXJ0aWNsZS5FbWl0dGVyfVxuICAgICAqL1xuICAgIHRoaXMuZW1pdHRlciA9IG51bGw7XG59O1xuXG4vKipcbiAqIFVwZGF0ZSBwYXJ0aWNsZSBwb3NpdGlvblxuICogQHBhcmFtICB7bnVtYmVyfSBkZWx0YVRpbWVcbiAqL1xuUGFydGljbGUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKGRlbHRhVGltZSkge1xuICAgIGlmICh0aGlzLnZlbG9jaXR5KSB7XG4gICAgICAgIHZlYzMuc2NhbGVBbmRBZGQodGhpcy5wb3NpdGlvbi5hcnJheSwgdGhpcy5wb3NpdGlvbi5hcnJheSwgdGhpcy52ZWxvY2l0eS5hcnJheSwgZGVsdGFUaW1lKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuYW5ndWxhclZlbG9jaXR5KSB7XG4gICAgICAgIHZlYzMuc2NhbGVBbmRBZGQodGhpcy5yb3RhdGlvbi5hcnJheSwgdGhpcy5yb3RhdGlvbi5hcnJheSwgdGhpcy5hbmd1bGFyVmVsb2NpdHkuYXJyYXksIGRlbHRhVGltZSk7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgUGFydGljbGU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3BhcnRpY2xlL1BhcnRpY2xlLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///113\n");

/***/ }),
/* 114 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n\n/**\n * @constructor clay.particle.Field\n * @extends clay.core.Base\n */\nvar Field = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend({}, {\n    /**\n     * Apply a field to the particle and update the particle velocity\n     * @param  {clay.Vector3} velocity\n     * @param  {clay.Vector3} position\n     * @param  {number} weight\n     * @param  {number} deltaTime\n     * @memberOf clay.particle.Field.prototype\n     */\n    applyTo: function(velocity, position, weight, deltaTime) {}\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Field);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGFydGljbGUvRmllbGQuanM/MzUxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZSBmcm9tICcuLi9jb3JlL0Jhc2UnO1xuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5wYXJ0aWNsZS5GaWVsZFxuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqL1xudmFyIEZpZWxkID0gQmFzZS5leHRlbmQoe30sIHtcbiAgICAvKipcbiAgICAgKiBBcHBseSBhIGZpZWxkIHRvIHRoZSBwYXJ0aWNsZSBhbmQgdXBkYXRlIHRoZSBwYXJ0aWNsZSB2ZWxvY2l0eVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gdmVsb2NpdHlcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IHBvc2l0aW9uXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB3ZWlnaHRcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRlbHRhVGltZVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LnBhcnRpY2xlLkZpZWxkLnByb3RvdHlwZVxuICAgICAqL1xuICAgIGFwcGx5VG86IGZ1bmN0aW9uKHZlbG9jaXR5LCBwb3NpdGlvbiwgd2VpZ2h0LCBkZWx0YVRpbWUpIHt9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgRmllbGQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3BhcnRpY2xlL0ZpZWxkLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///114\n");

/***/ }),
/* 115 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("var GestureMgr = function () {\n\n    this._track = [];\n};\n\nGestureMgr.prototype = {\n\n    constructor: GestureMgr,\n\n    recognize: function (event, target, root) {\n        this._doTrack(event, target, root);\n        return this._recognize(event);\n    },\n\n    clear: function () {\n        this._track.length = 0;\n        return this;\n    },\n\n    _doTrack: function (event, target, root) {\n        var touches = event.targetTouches;\n\n        if (!touches) {\n            return;\n        }\n\n        var trackItem = {\n            points: [],\n            touches: [],\n            target: target,\n            event: event\n        };\n\n        for (var i = 0, len = touches.length; i < len; i++) {\n            var touch = touches[i];\n            trackItem.points.push([touch.clientX, touch.clientY]);\n            trackItem.touches.push(touch);\n        }\n\n        this._track.push(trackItem);\n    },\n\n    _recognize: function (event) {\n        for (var eventName in recognizers) {\n            if (recognizers.hasOwnProperty(eventName)) {\n                var gestureInfo = recognizers[eventName](this._track, event);\n                if (gestureInfo) {\n                    return gestureInfo;\n                }\n            }\n        }\n    }\n};\n\nfunction dist(pointPair) {\n    var dx = pointPair[1][0] - pointPair[0][0];\n    var dy = pointPair[1][1] - pointPair[0][1];\n\n    return Math.sqrt(dx * dx + dy * dy);\n}\n\nfunction center(pointPair) {\n    return [\n        (pointPair[0][0] + pointPair[1][0]) / 2,\n        (pointPair[0][1] + pointPair[1][1]) / 2\n    ];\n}\n\nvar recognizers = {\n\n    pinch: function (track, event) {\n        var trackLen = track.length;\n\n        if (!trackLen) {\n            return;\n        }\n\n        var pinchEnd = (track[trackLen - 1] || {}).points;\n        var pinchPre = (track[trackLen - 2] || {}).points || pinchEnd;\n\n        if (pinchPre\n            && pinchPre.length > 1\n            && pinchEnd\n            && pinchEnd.length > 1\n        ) {\n            var pinchScale = dist(pinchEnd) / dist(pinchPre);\n            !isFinite(pinchScale) && (pinchScale = 1);\n\n            event.pinchScale = pinchScale;\n\n            var pinchCenter = center(pinchEnd);\n            event.pinchX = pinchCenter[0];\n            event.pinchY = pinchCenter[1];\n\n            return {\n                type: 'pinch',\n                target: track[0].target,\n                event: event\n            };\n        }\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GestureMgr);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGx1Z2luL0dlc3R1cmVNZ3IuanM/YWJlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgR2VzdHVyZU1nciA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHRoaXMuX3RyYWNrID0gW107XG59O1xuXG5HZXN0dXJlTWdyLnByb3RvdHlwZSA9IHtcblxuICAgIGNvbnN0cnVjdG9yOiBHZXN0dXJlTWdyLFxuXG4gICAgcmVjb2duaXplOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCwgcm9vdCkge1xuICAgICAgICB0aGlzLl9kb1RyYWNrKGV2ZW50LCB0YXJnZXQsIHJvb3QpO1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVjb2duaXplKGV2ZW50KTtcbiAgICB9LFxuXG4gICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdHJhY2subGVuZ3RoID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIF9kb1RyYWNrOiBmdW5jdGlvbiAoZXZlbnQsIHRhcmdldCwgcm9vdCkge1xuICAgICAgICB2YXIgdG91Y2hlcyA9IGV2ZW50LnRhcmdldFRvdWNoZXM7XG5cbiAgICAgICAgaWYgKCF0b3VjaGVzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdHJhY2tJdGVtID0ge1xuICAgICAgICAgICAgcG9pbnRzOiBbXSxcbiAgICAgICAgICAgIHRvdWNoZXM6IFtdLFxuICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICAgICAgICBldmVudDogZXZlbnRcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdG91Y2hlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIHRvdWNoID0gdG91Y2hlc1tpXTtcbiAgICAgICAgICAgIHRyYWNrSXRlbS5wb2ludHMucHVzaChbdG91Y2guY2xpZW50WCwgdG91Y2guY2xpZW50WV0pO1xuICAgICAgICAgICAgdHJhY2tJdGVtLnRvdWNoZXMucHVzaCh0b3VjaCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl90cmFjay5wdXNoKHRyYWNrSXRlbSk7XG4gICAgfSxcblxuICAgIF9yZWNvZ25pemU6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBmb3IgKHZhciBldmVudE5hbWUgaW4gcmVjb2duaXplcnMpIHtcbiAgICAgICAgICAgIGlmIChyZWNvZ25pemVycy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdlc3R1cmVJbmZvID0gcmVjb2duaXplcnNbZXZlbnROYW1lXSh0aGlzLl90cmFjaywgZXZlbnQpO1xuICAgICAgICAgICAgICAgIGlmIChnZXN0dXJlSW5mbykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2VzdHVyZUluZm87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuZnVuY3Rpb24gZGlzdChwb2ludFBhaXIpIHtcbiAgICB2YXIgZHggPSBwb2ludFBhaXJbMV1bMF0gLSBwb2ludFBhaXJbMF1bMF07XG4gICAgdmFyIGR5ID0gcG9pbnRQYWlyWzFdWzFdIC0gcG9pbnRQYWlyWzBdWzFdO1xuXG4gICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG59XG5cbmZ1bmN0aW9uIGNlbnRlcihwb2ludFBhaXIpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICAocG9pbnRQYWlyWzBdWzBdICsgcG9pbnRQYWlyWzFdWzBdKSAvIDIsXG4gICAgICAgIChwb2ludFBhaXJbMF1bMV0gKyBwb2ludFBhaXJbMV1bMV0pIC8gMlxuICAgIF07XG59XG5cbnZhciByZWNvZ25pemVycyA9IHtcblxuICAgIHBpbmNoOiBmdW5jdGlvbiAodHJhY2ssIGV2ZW50KSB7XG4gICAgICAgIHZhciB0cmFja0xlbiA9IHRyYWNrLmxlbmd0aDtcblxuICAgICAgICBpZiAoIXRyYWNrTGVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcGluY2hFbmQgPSAodHJhY2tbdHJhY2tMZW4gLSAxXSB8fCB7fSkucG9pbnRzO1xuICAgICAgICB2YXIgcGluY2hQcmUgPSAodHJhY2tbdHJhY2tMZW4gLSAyXSB8fCB7fSkucG9pbnRzIHx8IHBpbmNoRW5kO1xuXG4gICAgICAgIGlmIChwaW5jaFByZVxuICAgICAgICAgICAgJiYgcGluY2hQcmUubGVuZ3RoID4gMVxuICAgICAgICAgICAgJiYgcGluY2hFbmRcbiAgICAgICAgICAgICYmIHBpbmNoRW5kLmxlbmd0aCA+IDFcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB2YXIgcGluY2hTY2FsZSA9IGRpc3QocGluY2hFbmQpIC8gZGlzdChwaW5jaFByZSk7XG4gICAgICAgICAgICAhaXNGaW5pdGUocGluY2hTY2FsZSkgJiYgKHBpbmNoU2NhbGUgPSAxKTtcblxuICAgICAgICAgICAgZXZlbnQucGluY2hTY2FsZSA9IHBpbmNoU2NhbGU7XG5cbiAgICAgICAgICAgIHZhciBwaW5jaENlbnRlciA9IGNlbnRlcihwaW5jaEVuZCk7XG4gICAgICAgICAgICBldmVudC5waW5jaFggPSBwaW5jaENlbnRlclswXTtcbiAgICAgICAgICAgIGV2ZW50LnBpbmNoWSA9IHBpbmNoQ2VudGVyWzFdO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdwaW5jaCcsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0cmFja1swXS50YXJnZXQsXG4gICAgICAgICAgICAgICAgZXZlbnQ6IGV2ZW50XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgR2VzdHVyZU1ncjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGx1Z2luL0dlc3R1cmVNZ3IuanNcbi8vIG1vZHVsZSBpZCA9IDExNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///115\n");

/***/ }),
/* 116 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return deg2rad; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return rad2deg; });\nvar deg2rad = Math.PI / 180;\nvar rad2deg = 180 / Math.PI;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWNvbG9yL3NyYy9tYXRoLmpzPzBjOGYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHZhciBkZWcycmFkID0gTWF0aC5QSSAvIDE4MDtcbmV4cG9ydCB2YXIgcmFkMmRlZyA9IDE4MCAvIE1hdGguUEk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1jb2xvci9zcmMvbWF0aC5qc1xuLy8gbW9kdWxlIGlkID0gMTE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///116\n");

/***/ }),
/* 117 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return rgbBasis; });\n/* unused harmony export rgbBasisClosed */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__basis__ = __webpack_require__(69);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__basisClosed__ = __webpack_require__(118);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__color__ = __webpack_require__(29);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ((function rgbGamma(y) {\n  var color = Object(__WEBPACK_IMPORTED_MODULE_3__color__[\"b\" /* gamma */])(y);\n\n  function rgb(start, end) {\n    var r = color((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"f\" /* rgb */])(start)).r, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"f\" /* rgb */])(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = Object(__WEBPACK_IMPORTED_MODULE_3__color__[\"a\" /* default */])(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1));\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"f\" /* rgb */])(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nvar rgbBasis = rgbSpline(__WEBPACK_IMPORTED_MODULE_1__basis__[\"b\" /* default */]);\nvar rgbBasisClosed = rgbSpline(__WEBPACK_IMPORTED_MODULE_2__basisClosed__[\"a\" /* default */]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9yZ2IuanM/ZDIwNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3JnYiBhcyBjb2xvclJnYn0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgYmFzaXMgZnJvbSBcIi4vYmFzaXNcIjtcbmltcG9ydCBiYXNpc0Nsb3NlZCBmcm9tIFwiLi9iYXNpc0Nsb3NlZFwiO1xuaW1wb3J0IG5vZ2FtbWEsIHtnYW1tYX0gZnJvbSBcIi4vY29sb3JcIjtcblxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIHJnYkdhbW1hKHkpIHtcbiAgdmFyIGNvbG9yID0gZ2FtbWEoeSk7XG5cbiAgZnVuY3Rpb24gcmdiKHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgciA9IGNvbG9yKChzdGFydCA9IGNvbG9yUmdiKHN0YXJ0KSkuciwgKGVuZCA9IGNvbG9yUmdiKGVuZCkpLnIpLFxuICAgICAgICBnID0gY29sb3Ioc3RhcnQuZywgZW5kLmcpLFxuICAgICAgICBiID0gY29sb3Ioc3RhcnQuYiwgZW5kLmIpLFxuICAgICAgICBvcGFjaXR5ID0gbm9nYW1tYShzdGFydC5vcGFjaXR5LCBlbmQub3BhY2l0eSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHN0YXJ0LnIgPSByKHQpO1xuICAgICAgc3RhcnQuZyA9IGcodCk7XG4gICAgICBzdGFydC5iID0gYih0KTtcbiAgICAgIHN0YXJ0Lm9wYWNpdHkgPSBvcGFjaXR5KHQpO1xuICAgICAgcmV0dXJuIHN0YXJ0ICsgXCJcIjtcbiAgICB9O1xuICB9XG5cbiAgcmdiLmdhbW1hID0gcmdiR2FtbWE7XG5cbiAgcmV0dXJuIHJnYjtcbn0pKDEpO1xuXG5mdW5jdGlvbiByZ2JTcGxpbmUoc3BsaW5lKSB7XG4gIHJldHVybiBmdW5jdGlvbihjb2xvcnMpIHtcbiAgICB2YXIgbiA9IGNvbG9ycy5sZW5ndGgsXG4gICAgICAgIHIgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGcgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGIgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGksIGNvbG9yO1xuICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGNvbG9yID0gY29sb3JSZ2IoY29sb3JzW2ldKTtcbiAgICAgIHJbaV0gPSBjb2xvci5yIHx8IDA7XG4gICAgICBnW2ldID0gY29sb3IuZyB8fCAwO1xuICAgICAgYltpXSA9IGNvbG9yLmIgfHwgMDtcbiAgICB9XG4gICAgciA9IHNwbGluZShyKTtcbiAgICBnID0gc3BsaW5lKGcpO1xuICAgIGIgPSBzcGxpbmUoYik7XG4gICAgY29sb3Iub3BhY2l0eSA9IDE7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIGNvbG9yLnIgPSByKHQpO1xuICAgICAgY29sb3IuZyA9IGcodCk7XG4gICAgICBjb2xvci5iID0gYih0KTtcbiAgICAgIHJldHVybiBjb2xvciArIFwiXCI7XG4gICAgfTtcbiAgfTtcbn1cblxuZXhwb3J0IHZhciByZ2JCYXNpcyA9IHJnYlNwbGluZShiYXNpcyk7XG5leHBvcnQgdmFyIHJnYkJhc2lzQ2xvc2VkID0gcmdiU3BsaW5lKGJhc2lzQ2xvc2VkKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9yZ2IuanNcbi8vIG1vZHVsZSBpZCA9IDExN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///117\n");

/***/ }),
/* 118 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basis__ = __webpack_require__(69);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return Object(__WEBPACK_IMPORTED_MODULE_0__basis__[\"a\" /* basis */])((t - i / n) * n, v0, v1, v2, v3);\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9iYXNpc0Nsb3NlZC5qcz81YzRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YmFzaXN9IGZyb20gXCIuL2Jhc2lzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlcykge1xuICB2YXIgbiA9IHZhbHVlcy5sZW5ndGg7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdmFyIGkgPSBNYXRoLmZsb29yKCgodCAlPSAxKSA8IDAgPyArK3QgOiB0KSAqIG4pLFxuICAgICAgICB2MCA9IHZhbHVlc1soaSArIG4gLSAxKSAlIG5dLFxuICAgICAgICB2MSA9IHZhbHVlc1tpICUgbl0sXG4gICAgICAgIHYyID0gdmFsdWVzWyhpICsgMSkgJSBuXSxcbiAgICAgICAgdjMgPSB2YWx1ZXNbKGkgKyAyKSAlIG5dO1xuICAgIHJldHVybiBiYXNpcygodCAtIGkgLyBuKSAqIG4sIHYwLCB2MSwgdjIsIHYzKTtcbiAgfTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9iYXNpc0Nsb3NlZC5qc1xuLy8gbW9kdWxlIGlkID0gMTE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///118\n");

/***/ }),
/* 119 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (function(x) {\n  return function() {\n    return x;\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9jb25zdGFudC5qcz9iZmI2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB4O1xuICB9O1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2NvbnN0YW50LmpzXG4vLyBtb2R1bGUgaWQgPSAxMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///119\n");

/***/ }),
/* 120 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__value__ = __webpack_require__(66);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = Object(__WEBPACK_IMPORTED_MODULE_0__value__[\"a\" /* default */])(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9hcnJheS5qcz9iMDllIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB2YWx1ZSBmcm9tIFwiLi92YWx1ZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciBuYiA9IGIgPyBiLmxlbmd0aCA6IDAsXG4gICAgICBuYSA9IGEgPyBNYXRoLm1pbihuYiwgYS5sZW5ndGgpIDogMCxcbiAgICAgIHggPSBuZXcgQXJyYXkobmEpLFxuICAgICAgYyA9IG5ldyBBcnJheShuYiksXG4gICAgICBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBuYTsgKytpKSB4W2ldID0gdmFsdWUoYVtpXSwgYltpXSk7XG4gIGZvciAoOyBpIDwgbmI7ICsraSkgY1tpXSA9IGJbaV07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbmE7ICsraSkgY1tpXSA9IHhbaV0odCk7XG4gICAgcmV0dXJuIGM7XG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvYXJyYXkuanNcbi8vIG1vZHVsZSBpZCA9IDEyMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///120\n");

/***/ }),
/* 121 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (function(a, b) {\n  var d = new Date;\n  return a = +a, b -= a, function(t) {\n    return d.setTime(a + b * t), d;\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9kYXRlLmpzP2QyNzgiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgZCA9IG5ldyBEYXRlO1xuICByZXR1cm4gYSA9ICthLCBiIC09IGEsIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gZC5zZXRUaW1lKGEgKyBiICogdCksIGQ7XG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvZGF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gMTIxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///121\n");

/***/ }),
/* 122 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__value__ = __webpack_require__(66);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = Object(__WEBPACK_IMPORTED_MODULE_0__value__[\"a\" /* default */])(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9vYmplY3QuanM/YTZkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdmFsdWUgZnJvbSBcIi4vdmFsdWVcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgaSA9IHt9LFxuICAgICAgYyA9IHt9LFxuICAgICAgaztcblxuICBpZiAoYSA9PT0gbnVsbCB8fCB0eXBlb2YgYSAhPT0gXCJvYmplY3RcIikgYSA9IHt9O1xuICBpZiAoYiA9PT0gbnVsbCB8fCB0eXBlb2YgYiAhPT0gXCJvYmplY3RcIikgYiA9IHt9O1xuXG4gIGZvciAoayBpbiBiKSB7XG4gICAgaWYgKGsgaW4gYSkge1xuICAgICAgaVtrXSA9IHZhbHVlKGFba10sIGJba10pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjW2tdID0gYltrXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIGZvciAoayBpbiBpKSBjW2tdID0gaVtrXSh0KTtcbiAgICByZXR1cm4gYztcbiAgfTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9vYmplY3QuanNcbi8vIG1vZHVsZSBpZCA9IDEyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///122\n");

/***/ }),
/* 123 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__number__ = __webpack_require__(43);\n\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__[\"a\" /* default */])(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9zdHJpbmcuanM/NTc4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbnVtYmVyIGZyb20gXCIuL251bWJlclwiO1xuXG52YXIgcmVBID0gL1stK10/KD86XFxkK1xcLj9cXGQqfFxcLj9cXGQrKSg/OltlRV1bLStdP1xcZCspPy9nLFxuICAgIHJlQiA9IG5ldyBSZWdFeHAocmVBLnNvdXJjZSwgXCJnXCIpO1xuXG5mdW5jdGlvbiB6ZXJvKGIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBiO1xuICB9O1xufVxuXG5mdW5jdGlvbiBvbmUoYikge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBiKHQpICsgXCJcIjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgYmkgPSByZUEubGFzdEluZGV4ID0gcmVCLmxhc3RJbmRleCA9IDAsIC8vIHNjYW4gaW5kZXggZm9yIG5leHQgbnVtYmVyIGluIGJcbiAgICAgIGFtLCAvLyBjdXJyZW50IG1hdGNoIGluIGFcbiAgICAgIGJtLCAvLyBjdXJyZW50IG1hdGNoIGluIGJcbiAgICAgIGJzLCAvLyBzdHJpbmcgcHJlY2VkaW5nIGN1cnJlbnQgbnVtYmVyIGluIGIsIGlmIGFueVxuICAgICAgaSA9IC0xLCAvLyBpbmRleCBpbiBzXG4gICAgICBzID0gW10sIC8vIHN0cmluZyBjb25zdGFudHMgYW5kIHBsYWNlaG9sZGVyc1xuICAgICAgcSA9IFtdOyAvLyBudW1iZXIgaW50ZXJwb2xhdG9yc1xuXG4gIC8vIENvZXJjZSBpbnB1dHMgdG8gc3RyaW5ncy5cbiAgYSA9IGEgKyBcIlwiLCBiID0gYiArIFwiXCI7XG5cbiAgLy8gSW50ZXJwb2xhdGUgcGFpcnMgb2YgbnVtYmVycyBpbiBhICYgYi5cbiAgd2hpbGUgKChhbSA9IHJlQS5leGVjKGEpKVxuICAgICAgJiYgKGJtID0gcmVCLmV4ZWMoYikpKSB7XG4gICAgaWYgKChicyA9IGJtLmluZGV4KSA+IGJpKSB7IC8vIGEgc3RyaW5nIHByZWNlZGVzIHRoZSBuZXh0IG51bWJlciBpbiBiXG4gICAgICBicyA9IGIuc2xpY2UoYmksIGJzKTtcbiAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgICAgZWxzZSBzWysraV0gPSBicztcbiAgICB9XG4gICAgaWYgKChhbSA9IGFtWzBdKSA9PT0gKGJtID0gYm1bMF0pKSB7IC8vIG51bWJlcnMgaW4gYSAmIGIgbWF0Y2hcbiAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJtOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgICAgZWxzZSBzWysraV0gPSBibTtcbiAgICB9IGVsc2UgeyAvLyBpbnRlcnBvbGF0ZSBub24tbWF0Y2hpbmcgbnVtYmVyc1xuICAgICAgc1srK2ldID0gbnVsbDtcbiAgICAgIHEucHVzaCh7aTogaSwgeDogbnVtYmVyKGFtLCBibSl9KTtcbiAgICB9XG4gICAgYmkgPSByZUIubGFzdEluZGV4O1xuICB9XG5cbiAgLy8gQWRkIHJlbWFpbnMgb2YgYi5cbiAgaWYgKGJpIDwgYi5sZW5ndGgpIHtcbiAgICBicyA9IGIuc2xpY2UoYmkpO1xuICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgIGVsc2Ugc1srK2ldID0gYnM7XG4gIH1cblxuICAvLyBTcGVjaWFsIG9wdGltaXphdGlvbiBmb3Igb25seSBhIHNpbmdsZSBtYXRjaC5cbiAgLy8gT3RoZXJ3aXNlLCBpbnRlcnBvbGF0ZSBlYWNoIG9mIHRoZSBudW1iZXJzIGFuZCByZWpvaW4gdGhlIHN0cmluZy5cbiAgcmV0dXJuIHMubGVuZ3RoIDwgMiA/IChxWzBdXG4gICAgICA/IG9uZShxWzBdLngpXG4gICAgICA6IHplcm8oYikpXG4gICAgICA6IChiID0gcS5sZW5ndGgsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbzsgaSA8IGI7ICsraSkgc1sobyA9IHFbaV0pLmldID0gby54KHQpO1xuICAgICAgICAgIHJldHVybiBzLmpvaW4oXCJcIik7XG4gICAgICAgIH0pO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3N0cmluZy5qc1xuLy8gbW9kdWxlIGlkID0gMTIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///123\n");

/***/ }),
/* 124 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_claygl_advanced_renderer__ = __webpack_require__(125);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_claygl__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_zrender_src_tool_color__ = __webpack_require__(210);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ui_Texture__ = __webpack_require__(212);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_d3_scale_chromatic__ = __webpack_require__(213);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_geometry_extrude__ = __webpack_require__(272);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__generator_circle__ = __webpack_require__(276);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__generator_perlin__ = __webpack_require__(277);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__extrude__ = __webpack_require__(279);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_lodash_debounce__ = __webpack_require__(280);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_lodash_debounce___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_lodash_debounce__);\n\n\n\n\n\n\n\n\n\n\n\n\nvar brewerMethods = [\n    'BrBG', 'PRGn', 'PiYG', 'PuOr', 'RdBu', 'RdGy', 'RdYlBu', 'RdYlGn', 'Spectral',\n    'Viridis', 'Inferno', 'Magma', 'Plasma', 'Warm', 'Cool', 'Rainbow', 'YlGnBu', 'RdPu', 'PuRd',\n].map(function (a) {\n    return 'interpolate' + a;\n});\n// var brewerMethods = Object.keys(colorBrewer);\n\n// import standardExtCode from './standard_extend.glsl';\n// Shader.import(standardExtCode);\n\nvar shader = new __WEBPACK_IMPORTED_MODULE_1_claygl__[\"g\" /* Shader */](__WEBPACK_IMPORTED_MODULE_1_claygl__[\"g\" /* Shader */].source('clay.standardMR.vertex'), __WEBPACK_IMPORTED_MODULE_1_claygl__[\"g\" /* Shader */].source('clay.standardMR.fragment'));\n\nfunction createDefaultConfig() {\n    var config = {\n        seed: Math.random(),\n\n        thickness: 0.01,\n        height: 1,\n\n        number: 800,\n        trail: 100,\n        noiseScale: 3,\n\n        shadowDirection: [0.2, 0.2],\n        shadowKernelSize: 16,\n        shadowBlurSize: 2,\n\n        cameraPosition: [0, 0],\n        cameraDistance: 10,\n\n        baseColor: [150, 150, 150],\n\n        paperDetail: './img/paper-detail.png',\n        paperDetailTiling: 8,\n\n        layers: []\n    };\n    // TODO Layer Count\n    for (var i = 0; i < 10; i++) {\n        config.layers.push({\n            color: null,\n            intensity: 1\n        });\n    }\n    return config;\n}\n\nfunction createRandomColors() {\n    var method = __WEBPACK_IMPORTED_MODULE_4_d3_scale_chromatic__[brewerMethods[Math.round(Math.random() * (brewerMethods.length - 1))]];\n    config.layers.forEach(function (layer, idx) {\n        layer.color = Object(__WEBPACK_IMPORTED_MODULE_2_zrender_src_tool_color__[\"a\" /* parse */])(method(1 - idx / 9)).slice(0, 3);\n    });\n};\n\nvar config = createDefaultConfig();\ncreateRandomColors();\n\nvar app = __WEBPACK_IMPORTED_MODULE_1_claygl__[\"l\" /* application */].create('#main', {\n\n    autoRender: false,\n\n    devicePixelRatio: 1,\n\n    init(app) {\n        app.renderer.logDepthBuffer = true;\n\n        this._rootNode = new __WEBPACK_IMPORTED_MODULE_1_claygl__[\"f\" /* Node */]();\n        app.scene.add(this._rootNode);\n\n        this._advancedRenderer = new __WEBPACK_IMPORTED_MODULE_0_claygl_advanced_renderer__[\"a\" /* default */](app.renderer, app.scene, app.timeline, {\n            temporalSuperSampling: {\n                dynamic: false\n            },\n            shadow: {\n                enable: true\n            },\n            postEffect: {\n                bloom: {\n                    enable: true\n                },\n                screenSpaceAmbientOcclusion: {\n                    enable: true,\n                    radius: 1,\n                    intensity: 1.2,\n                    quality: 'high'\n                },\n                screenSpaceReflection: {\n                    enable: true\n                }\n            }\n        });\n        // TODO\n        // this._advancedRenderer._renderMain._compositor._compositeNode.undefine('TONEMAPPING');\n\n        this._camera = app.createCamera([0, 0, 10], [0, 0, 0]);\n        this._camera.far = 50;\n\n        this._dirLight = app.createDirectionalLight([0, 0, 0], '#fff', 0.7);\n        this._dirLight.shadowResolution = 1024;\n        this._dirLight.shadowBias = 0.001;\n\n        app.createAmbientCubemapLight('img/pisa.hdr', 1, 1, 2);\n\n        this._groundPlane = app.createPlane({\n            shader: shader\n        });\n        this._groundPlane.scale.set(11, 11, 1);\n        this._rootNode.add(this._groundPlane);\n\n        app.methods.updateShadow();\n        app.methods.updateCamera();\n\n        this._paperMesh;\n        app.methods.updateScrollingPapers();\n        app.methods.updatePaperColors();\n        app.methods.updateBaseColor();\n        app.methods.changePaperDetailTexture(app);\n    },\n\n    loop() {\n        // this._advancedRenderer.render();\n    },\n\n    methods: {\n        render() {\n            this._advancedRenderer.render();\n        },\n\n        updateShadow() {\n            var x = -config.shadowDirection[0];\n            var y = -config.shadowDirection[1];\n            var lightDir = new __WEBPACK_IMPORTED_MODULE_1_claygl__[\"k\" /* Vector3 */](x, y, 1).normalize();\n            var normal = __WEBPACK_IMPORTED_MODULE_1_claygl__[\"k\" /* Vector3 */].POSITIVE_Z;\n            var ndl = __WEBPACK_IMPORTED_MODULE_1_claygl__[\"k\" /* Vector3 */].dot(lightDir, normal);\n            this._dirLight.intensity = 0.7 / ndl;\n\n            this._dirLight.position.set(x, y, 1);\n            this._dirLight.lookAt(__WEBPACK_IMPORTED_MODULE_1_claygl__[\"k\" /* Vector3 */].ZERO, __WEBPACK_IMPORTED_MODULE_1_claygl__[\"k\" /* Vector3 */].UP);\n            this._advancedRenderer.setShadow({\n                kernelSize: config.shadowKernelSize,\n                blurSize: Math.max(config.shadowBlurSize, 1)\n            });\n            this._advancedRenderer.render();\n        },\n\n        updateCamera() {\n            // TODO RESET CAMERA\n            var z = config.cameraDistance;\n            var x = config.cameraPosition[0] * z;\n            var y = config.cameraPosition[1] * z;\n\n            this._camera.position.set(x, y, z);\n            this._camera.lookAt(__WEBPACK_IMPORTED_MODULE_1_claygl__[\"k\" /* Vector3 */].ZERO, __WEBPACK_IMPORTED_MODULE_1_claygl__[\"k\" /* Vector3 */].UP);\n\n            this._advancedRenderer.render();\n        },\n\n        updateScrollingPapers() {\n            if (!this._paperMesh) {\n                this._paperMesh = new __WEBPACK_IMPORTED_MODULE_1_claygl__[\"e\" /* Mesh */]({\n                    material: new __WEBPACK_IMPORTED_MODULE_1_claygl__[\"c\" /* Material */]({ shader })\n                });\n                this._paperMesh.culling = false;\n                this._paperMesh.material.define('fragment', 'DOUBLE_SIDED');\n                this._paperMesh.material.define('VERTEX_COLOR');\n                this._rootNode.add(this._paperMesh);\n\n                this._paperMesh.geometry = new __WEBPACK_IMPORTED_MODULE_1_claygl__[\"b\" /* Geometry */]();\n            }\n            Object(__WEBPACK_IMPORTED_MODULE_7__generator_perlin__[\"b\" /* perlinSeed */])(config.seed);\n            // let polylines = generateCircle([0, 0], 0.1, 10, 0.5);\n            let polylines = Object(__WEBPACK_IMPORTED_MODULE_7__generator_perlin__[\"a\" /* generatePerlin */])(\n                [-11, -11], [11, 11], config.number, config.trail, config.noiseScale\n            );\n            let geometryData = [];\n            let vertexCount = 0;\n            let indicesCount = 0;\n            let geo = this._paperMesh.geometry;\n            polylines.forEach(polyline => {\n                // let {indices, position, normal} = extrude(polyline, 1);\n                let {indices, position, normal, uv} = Object(__WEBPACK_IMPORTED_MODULE_5_geometry_extrude__[\"a\" /* extrudePolyline */])([polyline], {\n                    // TODO Configuration\n                    lineWidth: config.thickness, depth: config.height\n                });\n                geometryData.push({\n                    indices, position, normal, uv,\n                    vertexOffset: vertexCount,\n                    indicesOffset: indicesCount,\n                    vertexCount: position.length / 3\n                });\n                vertexCount += position.length / 3;\n                indicesCount += indices.length;\n            });\n            let positionTotal = new Float32Array(vertexCount * 3);\n            let normalTotal = new Float32Array(vertexCount * 3);\n            let uvTotal = new Float32Array(vertexCount * 2);\n            let indicesTotal = new (vertexCount > 65536 ? Uint32Array : Uint16Array)(indicesCount);\n            geometryData.forEach(item => {\n                positionTotal.set(item.position, item.vertexOffset * 3);\n                normalTotal.set(item.normal, item.vertexOffset * 3);\n                uvTotal.set(item.uv, item.vertexOffset * 2);\n                for (let i = 0; i < item.indices.length; i++) {\n                    indicesTotal[item.indicesOffset + i] = item.vertexOffset + item.indices[i];\n                }\n            });\n            geo.attributes.position.value = positionTotal;\n            geo.attributes.normal.value = normalTotal;\n            geo.attributes.texcoord0.value = uvTotal;\n            geo.indices = indicesTotal;\n            geo.updateBoundingBox();\n            geo.dirty();\n\n            this._geometryData = geometryData;\n        },\n\n        updateBaseColor() {\n            this._groundPlane.material.set('color', Object(__WEBPACK_IMPORTED_MODULE_2_zrender_src_tool_color__[\"b\" /* stringify */])(config.baseColor, 'rgb'));\n            this._advancedRenderer.render();\n        },\n\n        updatePaperColors() {\n            let colors = config.layers.map(layer => layer.color.map(channel => channel / 255));\n            // this._scrollingPapers.forEach((mesh, idx) => {\n            //     let color = lerp((idx / (this._scrollingPapers.length - 1) * 4) % 1, colors);\n            //     mesh.material.set('color', color);\n            // });\n            if (this._paperMesh) {\n                let colorValue = new Float32Array(this._paperMesh.geometry.vertexCount * 4);\n                let off = 0;\n                let paperCount = this._geometryData.length;\n                for (let idx = 0; idx < paperCount; idx++) {\n                    let colorPercent =  (idx / (paperCount - 1) * 4) % 1;\n                    let colorIndex = Math.floor(colorPercent * (colors.length - 1));\n                    // let color = parse(lerp(, colors));\n                    let color = colors[colorIndex];\n                    let intensity = config.layers[colorIndex].intensity;\n                    // color[0] /= 255;\n                    // color[1] /= 255;\n                    // color[2] /= 255;\n                    for (let k = 0; k < this._geometryData[idx].vertexCount; k++) {\n                        for (let i = 0; i < 3; i++) {\n                            colorValue[off++] = color[i] * intensity;\n                        }\n                        colorValue[off++] = 1;\n                    }\n                }\n                this._paperMesh.geometry.attributes.color.value = colorValue;\n                this._paperMesh.geometry.dirtyAttribute('color');\n            }\n            this._advancedRenderer.render();\n        },\n\n        changePaperDetailTexture(app) {\n            var self = this;\n            function setDetailTexture(detailTexture) {\n                let tiling = [config.paperDetailTiling, config.paperDetailTiling];\n                self._paperMesh.material.set('roughness', 1);\n                self._groundPlane.material.set('diffuseMap', detailTexture);\n                self._paperMesh.material.set('uvRepeat', tiling);\n                self._paperMesh.material.set('roughness', 1);\n                self._groundPlane.material.set('roughness', 1);\n                self._groundPlane.material.set('diffuseMap', detailTexture);\n                self._groundPlane.material.set('uvRepeat', tiling);\n\n                self._advancedRenderer.render();\n            }\n            if (config.paperDetail && config.paperDetail !== 'none') {\n                app.loadTexture(config.paperDetail, {\n                    convertToPOT: true\n                }).then(setDetailTexture);\n            }\n            else {\n                setDetailTexture(null);\n            }\n        }\n    }\n});\n\nvar updateScrollingPapers = __WEBPACK_IMPORTED_MODULE_9_lodash_debounce___default()(function () {\n    app.methods.updateScrollingPapers();\n    app.methods.updatePaperColors();\n}, 500);\n\nvar controlKit = new ControlKit({\n    loadAndSave: false,\n    useExternalStyle: true\n});\n\nvar scenePanel = controlKit.addPanel({ label: 'Settings', width: 250 });\n\nscenePanel.addGroup({ label: 'Generate' })\n    .addNumberInput(config, 'thickness', { label: 'Thickness', onChange: updateScrollingPapers, step: 0.005, min: 0.01 })\n    .addNumberInput(config, 'height', { label: 'Height', onChange: updateScrollingPapers, step: 0.1, min: 0.1 })\n    .addNumberInput(config, 'number', { label: 'Number', onChange: updateScrollingPapers, step: 10, min: 50 })\n    // .addNumberInput(config, 'trail', { label: 'Trail', onChange: updateScrollingPapers, step: 5, min: 50 })\n    .addNumberInput(config, 'noiseScale', { label: 'Noise Scale', onChange: updateScrollingPapers, step: 1, min: 1 })\n    .addButton('Random', function () {\n        config.seed = Math.random();\n\n        updateScrollingPapers();\n    });\n\nscenePanel.addGroup({ label: 'Details', enable: false })\n    .addCustomComponent(__WEBPACK_IMPORTED_MODULE_3__ui_Texture__[\"a\" /* default */], config, 'paperDetail', { label: 'Detail', onChange: app.methods.changePaperDetailTexture })\n    .addNumberInput(config, 'paperDetailTiling', { label: 'Tiling', onChange: app.methods.updatePapers, step: 0.5, min: 0 });\n\n\nscenePanel.addGroup({ label: 'Shadow', enable: false })\n    .addPad(config, 'shadowDirection', { label: 'Direction', onChange: app.methods.updateShadow })\n    .addNumberInput(config, 'shadowBlurSize', { label: 'Blur Size', onChange: app.methods.updateShadow, step: 0.5, min: 0 });\n\nscenePanel.addGroup({ label: 'Camera', enable: false })\n    .addPad(config, 'cameraPosition', { label: 'Position', onChange: app.methods.updateCamera })\n    .addNumberInput(config, 'cameraDistance', { label: 'Distance', onChange: app.methods.updateCamera, step: 0.5, min: 0 });\n\nvar colorGroup = scenePanel.addGroup({ label: 'Colors' });\ncolorGroup.addColor(config, 'baseColor', { label: 'Base Color', colorMode: 'rgb', onChange: app.methods.updateBaseColor });\ncolorGroup.addButton('Random Colors', function () {\n    createRandomColors();\n    app.methods.updatePaperColors();\n    controlKit.update();\n});\nfor (var i = 0; i < config.layers.length; i++) {\n    colorGroup.addColor(config.layers[i], 'color', { label: 'Color ' + (i + 1), colorMode: 'rgb', onChange: app.methods.updatePaperColors  });\n    colorGroup.addNumberInput(config.layers[i], 'intensity', { label: 'Intensity', onChange: app.methods.updatePaperColors, step: 0.1, min: 0  });\n}\ncolorGroup.addButton('Revert Colors', function () {\n    var colors = config.layers.map(function (layer) {\n        return layer.color;\n    }).reverse();\n    config.layers.forEach(function (layer, idx) {\n        layer.color = colors[idx];\n    });\n    app.methods.updatePaperColors();\n    controlKit.update();\n});\n\nwindow.addEventListener('resize', function () { app.resize(); app.methods.render(); } );\n\ndocument.getElementById('loading').style.display = 'none';//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanM/MzQ3OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2xheUFkdmFuY2VkUmVuZGVyZXIgZnJvbSAnY2xheWdsLWFkdmFuY2VkLXJlbmRlcmVyJztcbmltcG9ydCB7IGFwcGxpY2F0aW9uLCBWZWN0b3IzLCB1dGlsLCBTaGFkZXIsIE5vZGUsIEdlb21ldHJ5LCBNZXNoLCBNYXRlcmlhbCB9IGZyb20gJ2NsYXlnbCc7XG5pbXBvcnQgeyBwYXJzZSwgc3RyaW5naWZ5LCBsZXJwIH0gZnJvbSAnenJlbmRlci9zcmMvdG9vbC9jb2xvcic7XG5pbXBvcnQgVGV4dHVyZVVJIGZyb20gJy4vdWkvVGV4dHVyZSc7XG5pbXBvcnQgKiBhcyBjb2xvckJyZXdlciBmcm9tICdkMy1zY2FsZS1jaHJvbWF0aWMnO1xuaW1wb3J0IHtleHRydWRlUG9seWxpbmV9IGZyb20gJ2dlb21ldHJ5LWV4dHJ1ZGUnO1xuaW1wb3J0IHtnZW5lcmF0ZUNpcmNsZX0gZnJvbSAnLi9nZW5lcmF0b3IvY2lyY2xlJztcbmltcG9ydCB7Z2VuZXJhdGVQZXJsaW4sIHBlcmxpblNlZWR9IGZyb20gJy4vZ2VuZXJhdG9yL3Blcmxpbic7XG5pbXBvcnQge2V4dHJ1ZGV9IGZyb20gJy4vZXh0cnVkZSc7XG5pbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoLmRlYm91bmNlJztcblxuXG52YXIgYnJld2VyTWV0aG9kcyA9IFtcbiAgICAnQnJCRycsICdQUkduJywgJ1BpWUcnLCAnUHVPcicsICdSZEJ1JywgJ1JkR3knLCAnUmRZbEJ1JywgJ1JkWWxHbicsICdTcGVjdHJhbCcsXG4gICAgJ1ZpcmlkaXMnLCAnSW5mZXJubycsICdNYWdtYScsICdQbGFzbWEnLCAnV2FybScsICdDb29sJywgJ1JhaW5ib3cnLCAnWWxHbkJ1JywgJ1JkUHUnLCAnUHVSZCcsXG5dLm1hcChmdW5jdGlvbiAoYSkge1xuICAgIHJldHVybiAnaW50ZXJwb2xhdGUnICsgYTtcbn0pO1xuLy8gdmFyIGJyZXdlck1ldGhvZHMgPSBPYmplY3Qua2V5cyhjb2xvckJyZXdlcik7XG5cbi8vIGltcG9ydCBzdGFuZGFyZEV4dENvZGUgZnJvbSAnLi9zdGFuZGFyZF9leHRlbmQuZ2xzbCc7XG4vLyBTaGFkZXIuaW1wb3J0KHN0YW5kYXJkRXh0Q29kZSk7XG5cbnZhciBzaGFkZXIgPSBuZXcgU2hhZGVyKFNoYWRlci5zb3VyY2UoJ2NsYXkuc3RhbmRhcmRNUi52ZXJ0ZXgnKSwgU2hhZGVyLnNvdXJjZSgnY2xheS5zdGFuZGFyZE1SLmZyYWdtZW50JykpO1xuXG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0Q29uZmlnKCkge1xuICAgIHZhciBjb25maWcgPSB7XG4gICAgICAgIHNlZWQ6IE1hdGgucmFuZG9tKCksXG5cbiAgICAgICAgdGhpY2tuZXNzOiAwLjAxLFxuICAgICAgICBoZWlnaHQ6IDEsXG5cbiAgICAgICAgbnVtYmVyOiA4MDAsXG4gICAgICAgIHRyYWlsOiAxMDAsXG4gICAgICAgIG5vaXNlU2NhbGU6IDMsXG5cbiAgICAgICAgc2hhZG93RGlyZWN0aW9uOiBbMC4yLCAwLjJdLFxuICAgICAgICBzaGFkb3dLZXJuZWxTaXplOiAxNixcbiAgICAgICAgc2hhZG93Qmx1clNpemU6IDIsXG5cbiAgICAgICAgY2FtZXJhUG9zaXRpb246IFswLCAwXSxcbiAgICAgICAgY2FtZXJhRGlzdGFuY2U6IDEwLFxuXG4gICAgICAgIGJhc2VDb2xvcjogWzE1MCwgMTUwLCAxNTBdLFxuXG4gICAgICAgIHBhcGVyRGV0YWlsOiAnLi9pbWcvcGFwZXItZGV0YWlsLnBuZycsXG4gICAgICAgIHBhcGVyRGV0YWlsVGlsaW5nOiA4LFxuXG4gICAgICAgIGxheWVyczogW11cbiAgICB9O1xuICAgIC8vIFRPRE8gTGF5ZXIgQ291bnRcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgICAgY29uZmlnLmxheWVycy5wdXNoKHtcbiAgICAgICAgICAgIGNvbG9yOiBudWxsLFxuICAgICAgICAgICAgaW50ZW5zaXR5OiAxXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gY29uZmlnO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVSYW5kb21Db2xvcnMoKSB7XG4gICAgdmFyIG1ldGhvZCA9IGNvbG9yQnJld2VyW2JyZXdlck1ldGhvZHNbTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKGJyZXdlck1ldGhvZHMubGVuZ3RoIC0gMSkpXV07XG4gICAgY29uZmlnLmxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllciwgaWR4KSB7XG4gICAgICAgIGxheWVyLmNvbG9yID0gcGFyc2UobWV0aG9kKDEgLSBpZHggLyA5KSkuc2xpY2UoMCwgMyk7XG4gICAgfSk7XG59O1xuXG52YXIgY29uZmlnID0gY3JlYXRlRGVmYXVsdENvbmZpZygpO1xuY3JlYXRlUmFuZG9tQ29sb3JzKCk7XG5cbnZhciBhcHAgPSBhcHBsaWNhdGlvbi5jcmVhdGUoJyNtYWluJywge1xuXG4gICAgYXV0b1JlbmRlcjogZmFsc2UsXG5cbiAgICBkZXZpY2VQaXhlbFJhdGlvOiAxLFxuXG4gICAgaW5pdChhcHApIHtcbiAgICAgICAgYXBwLnJlbmRlcmVyLmxvZ0RlcHRoQnVmZmVyID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLl9yb290Tm9kZSA9IG5ldyBOb2RlKCk7XG4gICAgICAgIGFwcC5zY2VuZS5hZGQodGhpcy5fcm9vdE5vZGUpO1xuXG4gICAgICAgIHRoaXMuX2FkdmFuY2VkUmVuZGVyZXIgPSBuZXcgQ2xheUFkdmFuY2VkUmVuZGVyZXIoYXBwLnJlbmRlcmVyLCBhcHAuc2NlbmUsIGFwcC50aW1lbGluZSwge1xuICAgICAgICAgICAgdGVtcG9yYWxTdXBlclNhbXBsaW5nOiB7XG4gICAgICAgICAgICAgICAgZHluYW1pYzogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzaGFkb3c6IHtcbiAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwb3N0RWZmZWN0OiB7XG4gICAgICAgICAgICAgICAgYmxvb206IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzY3JlZW5TcGFjZUFtYmllbnRPY2NsdXNpb246IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEsXG4gICAgICAgICAgICAgICAgICAgIGludGVuc2l0eTogMS4yLFxuICAgICAgICAgICAgICAgICAgICBxdWFsaXR5OiAnaGlnaCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNjcmVlblNwYWNlUmVmbGVjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBUT0RPXG4gICAgICAgIC8vIHRoaXMuX2FkdmFuY2VkUmVuZGVyZXIuX3JlbmRlck1haW4uX2NvbXBvc2l0b3IuX2NvbXBvc2l0ZU5vZGUudW5kZWZpbmUoJ1RPTkVNQVBQSU5HJyk7XG5cbiAgICAgICAgdGhpcy5fY2FtZXJhID0gYXBwLmNyZWF0ZUNhbWVyYShbMCwgMCwgMTBdLCBbMCwgMCwgMF0pO1xuICAgICAgICB0aGlzLl9jYW1lcmEuZmFyID0gNTA7XG5cbiAgICAgICAgdGhpcy5fZGlyTGlnaHQgPSBhcHAuY3JlYXRlRGlyZWN0aW9uYWxMaWdodChbMCwgMCwgMF0sICcjZmZmJywgMC43KTtcbiAgICAgICAgdGhpcy5fZGlyTGlnaHQuc2hhZG93UmVzb2x1dGlvbiA9IDEwMjQ7XG4gICAgICAgIHRoaXMuX2RpckxpZ2h0LnNoYWRvd0JpYXMgPSAwLjAwMTtcblxuICAgICAgICBhcHAuY3JlYXRlQW1iaWVudEN1YmVtYXBMaWdodCgnaW1nL3Bpc2EuaGRyJywgMSwgMSwgMik7XG5cbiAgICAgICAgdGhpcy5fZ3JvdW5kUGxhbmUgPSBhcHAuY3JlYXRlUGxhbmUoe1xuICAgICAgICAgICAgc2hhZGVyOiBzaGFkZXJcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2dyb3VuZFBsYW5lLnNjYWxlLnNldCgxMSwgMTEsIDEpO1xuICAgICAgICB0aGlzLl9yb290Tm9kZS5hZGQodGhpcy5fZ3JvdW5kUGxhbmUpO1xuXG4gICAgICAgIGFwcC5tZXRob2RzLnVwZGF0ZVNoYWRvdygpO1xuICAgICAgICBhcHAubWV0aG9kcy51cGRhdGVDYW1lcmEoKTtcblxuICAgICAgICB0aGlzLl9wYXBlck1lc2g7XG4gICAgICAgIGFwcC5tZXRob2RzLnVwZGF0ZVNjcm9sbGluZ1BhcGVycygpO1xuICAgICAgICBhcHAubWV0aG9kcy51cGRhdGVQYXBlckNvbG9ycygpO1xuICAgICAgICBhcHAubWV0aG9kcy51cGRhdGVCYXNlQ29sb3IoKTtcbiAgICAgICAgYXBwLm1ldGhvZHMuY2hhbmdlUGFwZXJEZXRhaWxUZXh0dXJlKGFwcCk7XG4gICAgfSxcblxuICAgIGxvb3AoKSB7XG4gICAgICAgIC8vIHRoaXMuX2FkdmFuY2VkUmVuZGVyZXIucmVuZGVyKCk7XG4gICAgfSxcblxuICAgIG1ldGhvZHM6IHtcbiAgICAgICAgcmVuZGVyKCkge1xuICAgICAgICAgICAgdGhpcy5fYWR2YW5jZWRSZW5kZXJlci5yZW5kZXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVTaGFkb3coKSB7XG4gICAgICAgICAgICB2YXIgeCA9IC1jb25maWcuc2hhZG93RGlyZWN0aW9uWzBdO1xuICAgICAgICAgICAgdmFyIHkgPSAtY29uZmlnLnNoYWRvd0RpcmVjdGlvblsxXTtcbiAgICAgICAgICAgIHZhciBsaWdodERpciA9IG5ldyBWZWN0b3IzKHgsIHksIDEpLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgdmFyIG5vcm1hbCA9IFZlY3RvcjMuUE9TSVRJVkVfWjtcbiAgICAgICAgICAgIHZhciBuZGwgPSBWZWN0b3IzLmRvdChsaWdodERpciwgbm9ybWFsKTtcbiAgICAgICAgICAgIHRoaXMuX2RpckxpZ2h0LmludGVuc2l0eSA9IDAuNyAvIG5kbDtcblxuICAgICAgICAgICAgdGhpcy5fZGlyTGlnaHQucG9zaXRpb24uc2V0KHgsIHksIDEpO1xuICAgICAgICAgICAgdGhpcy5fZGlyTGlnaHQubG9va0F0KFZlY3RvcjMuWkVSTywgVmVjdG9yMy5VUCk7XG4gICAgICAgICAgICB0aGlzLl9hZHZhbmNlZFJlbmRlcmVyLnNldFNoYWRvdyh7XG4gICAgICAgICAgICAgICAga2VybmVsU2l6ZTogY29uZmlnLnNoYWRvd0tlcm5lbFNpemUsXG4gICAgICAgICAgICAgICAgYmx1clNpemU6IE1hdGgubWF4KGNvbmZpZy5zaGFkb3dCbHVyU2l6ZSwgMSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fYWR2YW5jZWRSZW5kZXJlci5yZW5kZXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVDYW1lcmEoKSB7XG4gICAgICAgICAgICAvLyBUT0RPIFJFU0VUIENBTUVSQVxuICAgICAgICAgICAgdmFyIHogPSBjb25maWcuY2FtZXJhRGlzdGFuY2U7XG4gICAgICAgICAgICB2YXIgeCA9IGNvbmZpZy5jYW1lcmFQb3NpdGlvblswXSAqIHo7XG4gICAgICAgICAgICB2YXIgeSA9IGNvbmZpZy5jYW1lcmFQb3NpdGlvblsxXSAqIHo7XG5cbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYS5wb3NpdGlvbi5zZXQoeCwgeSwgeik7XG4gICAgICAgICAgICB0aGlzLl9jYW1lcmEubG9va0F0KFZlY3RvcjMuWkVSTywgVmVjdG9yMy5VUCk7XG5cbiAgICAgICAgICAgIHRoaXMuX2FkdmFuY2VkUmVuZGVyZXIucmVuZGVyKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlU2Nyb2xsaW5nUGFwZXJzKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9wYXBlck1lc2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXBlck1lc2ggPSBuZXcgTWVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBuZXcgTWF0ZXJpYWwoeyBzaGFkZXIgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXBlck1lc2guY3VsbGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhcGVyTWVzaC5tYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ0RPVUJMRV9TSURFRCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhcGVyTWVzaC5tYXRlcmlhbC5kZWZpbmUoJ1ZFUlRFWF9DT0xPUicpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jvb3ROb2RlLmFkZCh0aGlzLl9wYXBlck1lc2gpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFwZXJNZXNoLmdlb21ldHJ5ID0gbmV3IEdlb21ldHJ5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwZXJsaW5TZWVkKGNvbmZpZy5zZWVkKTtcbiAgICAgICAgICAgIC8vIGxldCBwb2x5bGluZXMgPSBnZW5lcmF0ZUNpcmNsZShbMCwgMF0sIDAuMSwgMTAsIDAuNSk7XG4gICAgICAgICAgICBsZXQgcG9seWxpbmVzID0gZ2VuZXJhdGVQZXJsaW4oXG4gICAgICAgICAgICAgICAgWy0xMSwgLTExXSwgWzExLCAxMV0sIGNvbmZpZy5udW1iZXIsIGNvbmZpZy50cmFpbCwgY29uZmlnLm5vaXNlU2NhbGVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBsZXQgZ2VvbWV0cnlEYXRhID0gW107XG4gICAgICAgICAgICBsZXQgdmVydGV4Q291bnQgPSAwO1xuICAgICAgICAgICAgbGV0IGluZGljZXNDb3VudCA9IDA7XG4gICAgICAgICAgICBsZXQgZ2VvID0gdGhpcy5fcGFwZXJNZXNoLmdlb21ldHJ5O1xuICAgICAgICAgICAgcG9seWxpbmVzLmZvckVhY2gocG9seWxpbmUgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGxldCB7aW5kaWNlcywgcG9zaXRpb24sIG5vcm1hbH0gPSBleHRydWRlKHBvbHlsaW5lLCAxKTtcbiAgICAgICAgICAgICAgICBsZXQge2luZGljZXMsIHBvc2l0aW9uLCBub3JtYWwsIHV2fSA9IGV4dHJ1ZGVQb2x5bGluZShbcG9seWxpbmVdLCB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gQ29uZmlndXJhdGlvblxuICAgICAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IGNvbmZpZy50aGlja25lc3MsIGRlcHRoOiBjb25maWcuaGVpZ2h0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZ2VvbWV0cnlEYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpbmRpY2VzLCBwb3NpdGlvbiwgbm9ybWFsLCB1dixcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4T2Zmc2V0OiB2ZXJ0ZXhDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgaW5kaWNlc09mZnNldDogaW5kaWNlc0NvdW50LFxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhDb3VudDogcG9zaXRpb24ubGVuZ3RoIC8gM1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZlcnRleENvdW50ICs9IHBvc2l0aW9uLmxlbmd0aCAvIDM7XG4gICAgICAgICAgICAgICAgaW5kaWNlc0NvdW50ICs9IGluZGljZXMubGVuZ3RoO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgcG9zaXRpb25Ub3RhbCA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQgKiAzKTtcbiAgICAgICAgICAgIGxldCBub3JtYWxUb3RhbCA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQgKiAzKTtcbiAgICAgICAgICAgIGxldCB1dlRvdGFsID0gbmV3IEZsb2F0MzJBcnJheSh2ZXJ0ZXhDb3VudCAqIDIpO1xuICAgICAgICAgICAgbGV0IGluZGljZXNUb3RhbCA9IG5ldyAodmVydGV4Q291bnQgPiA2NTUzNiA/IFVpbnQzMkFycmF5IDogVWludDE2QXJyYXkpKGluZGljZXNDb3VudCk7XG4gICAgICAgICAgICBnZW9tZXRyeURhdGEuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvblRvdGFsLnNldChpdGVtLnBvc2l0aW9uLCBpdGVtLnZlcnRleE9mZnNldCAqIDMpO1xuICAgICAgICAgICAgICAgIG5vcm1hbFRvdGFsLnNldChpdGVtLm5vcm1hbCwgaXRlbS52ZXJ0ZXhPZmZzZXQgKiAzKTtcbiAgICAgICAgICAgICAgICB1dlRvdGFsLnNldChpdGVtLnV2LCBpdGVtLnZlcnRleE9mZnNldCAqIDIpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbS5pbmRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGljZXNUb3RhbFtpdGVtLmluZGljZXNPZmZzZXQgKyBpXSA9IGl0ZW0udmVydGV4T2Zmc2V0ICsgaXRlbS5pbmRpY2VzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZ2VvLmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWUgPSBwb3NpdGlvblRvdGFsO1xuICAgICAgICAgICAgZ2VvLmF0dHJpYnV0ZXMubm9ybWFsLnZhbHVlID0gbm9ybWFsVG90YWw7XG4gICAgICAgICAgICBnZW8uYXR0cmlidXRlcy50ZXhjb29yZDAudmFsdWUgPSB1dlRvdGFsO1xuICAgICAgICAgICAgZ2VvLmluZGljZXMgPSBpbmRpY2VzVG90YWw7XG4gICAgICAgICAgICBnZW8udXBkYXRlQm91bmRpbmdCb3goKTtcbiAgICAgICAgICAgIGdlby5kaXJ0eSgpO1xuXG4gICAgICAgICAgICB0aGlzLl9nZW9tZXRyeURhdGEgPSBnZW9tZXRyeURhdGE7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlQmFzZUNvbG9yKCkge1xuICAgICAgICAgICAgdGhpcy5fZ3JvdW5kUGxhbmUubWF0ZXJpYWwuc2V0KCdjb2xvcicsIHN0cmluZ2lmeShjb25maWcuYmFzZUNvbG9yLCAncmdiJykpO1xuICAgICAgICAgICAgdGhpcy5fYWR2YW5jZWRSZW5kZXJlci5yZW5kZXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVQYXBlckNvbG9ycygpIHtcbiAgICAgICAgICAgIGxldCBjb2xvcnMgPSBjb25maWcubGF5ZXJzLm1hcChsYXllciA9PiBsYXllci5jb2xvci5tYXAoY2hhbm5lbCA9PiBjaGFubmVsIC8gMjU1KSk7XG4gICAgICAgICAgICAvLyB0aGlzLl9zY3JvbGxpbmdQYXBlcnMuZm9yRWFjaCgobWVzaCwgaWR4KSA9PiB7XG4gICAgICAgICAgICAvLyAgICAgbGV0IGNvbG9yID0gbGVycCgoaWR4IC8gKHRoaXMuX3Njcm9sbGluZ1BhcGVycy5sZW5ndGggLSAxKSAqIDQpICUgMSwgY29sb3JzKTtcbiAgICAgICAgICAgIC8vICAgICBtZXNoLm1hdGVyaWFsLnNldCgnY29sb3InLCBjb2xvcik7XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9wYXBlck1lc2gpIHtcbiAgICAgICAgICAgICAgICBsZXQgY29sb3JWYWx1ZSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5fcGFwZXJNZXNoLmdlb21ldHJ5LnZlcnRleENvdW50ICogNCk7XG4gICAgICAgICAgICAgICAgbGV0IG9mZiA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IHBhcGVyQ291bnQgPSB0aGlzLl9nZW9tZXRyeURhdGEubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IHBhcGVyQ291bnQ7IGlkeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2xvclBlcmNlbnQgPSAgKGlkeCAvIChwYXBlckNvdW50IC0gMSkgKiA0KSAlIDE7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2xvckluZGV4ID0gTWF0aC5mbG9vcihjb2xvclBlcmNlbnQgKiAoY29sb3JzLmxlbmd0aCAtIDEpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGNvbG9yID0gcGFyc2UobGVycCgsIGNvbG9ycykpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29sb3IgPSBjb2xvcnNbY29sb3JJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnRlbnNpdHkgPSBjb25maWcubGF5ZXJzW2NvbG9ySW5kZXhdLmludGVuc2l0eTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29sb3JbMF0gLz0gMjU1O1xuICAgICAgICAgICAgICAgICAgICAvLyBjb2xvclsxXSAvPSAyNTU7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbG9yWzJdIC89IDI1NTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLl9nZW9tZXRyeURhdGFbaWR4XS52ZXJ0ZXhDb3VudDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yVmFsdWVbb2ZmKytdID0gY29sb3JbaV0gKiBpbnRlbnNpdHk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvclZhbHVlW29mZisrXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fcGFwZXJNZXNoLmdlb21ldHJ5LmF0dHJpYnV0ZXMuY29sb3IudmFsdWUgPSBjb2xvclZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhcGVyTWVzaC5nZW9tZXRyeS5kaXJ0eUF0dHJpYnV0ZSgnY29sb3InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2FkdmFuY2VkUmVuZGVyZXIucmVuZGVyKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2hhbmdlUGFwZXJEZXRhaWxUZXh0dXJlKGFwcCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgZnVuY3Rpb24gc2V0RGV0YWlsVGV4dHVyZShkZXRhaWxUZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRpbGluZyA9IFtjb25maWcucGFwZXJEZXRhaWxUaWxpbmcsIGNvbmZpZy5wYXBlckRldGFpbFRpbGluZ107XG4gICAgICAgICAgICAgICAgc2VsZi5fcGFwZXJNZXNoLm1hdGVyaWFsLnNldCgncm91Z2huZXNzJywgMSk7XG4gICAgICAgICAgICAgICAgc2VsZi5fZ3JvdW5kUGxhbmUubWF0ZXJpYWwuc2V0KCdkaWZmdXNlTWFwJywgZGV0YWlsVGV4dHVyZSk7XG4gICAgICAgICAgICAgICAgc2VsZi5fcGFwZXJNZXNoLm1hdGVyaWFsLnNldCgndXZSZXBlYXQnLCB0aWxpbmcpO1xuICAgICAgICAgICAgICAgIHNlbGYuX3BhcGVyTWVzaC5tYXRlcmlhbC5zZXQoJ3JvdWdobmVzcycsIDEpO1xuICAgICAgICAgICAgICAgIHNlbGYuX2dyb3VuZFBsYW5lLm1hdGVyaWFsLnNldCgncm91Z2huZXNzJywgMSk7XG4gICAgICAgICAgICAgICAgc2VsZi5fZ3JvdW5kUGxhbmUubWF0ZXJpYWwuc2V0KCdkaWZmdXNlTWFwJywgZGV0YWlsVGV4dHVyZSk7XG4gICAgICAgICAgICAgICAgc2VsZi5fZ3JvdW5kUGxhbmUubWF0ZXJpYWwuc2V0KCd1dlJlcGVhdCcsIHRpbGluZyk7XG5cbiAgICAgICAgICAgICAgICBzZWxmLl9hZHZhbmNlZFJlbmRlcmVyLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbmZpZy5wYXBlckRldGFpbCAmJiBjb25maWcucGFwZXJEZXRhaWwgIT09ICdub25lJykge1xuICAgICAgICAgICAgICAgIGFwcC5sb2FkVGV4dHVyZShjb25maWcucGFwZXJEZXRhaWwsIHtcbiAgICAgICAgICAgICAgICAgICAgY29udmVydFRvUE9UOiB0cnVlXG4gICAgICAgICAgICAgICAgfSkudGhlbihzZXREZXRhaWxUZXh0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNldERldGFpbFRleHR1cmUobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxudmFyIHVwZGF0ZVNjcm9sbGluZ1BhcGVycyA9IGRlYm91bmNlKGZ1bmN0aW9uICgpIHtcbiAgICBhcHAubWV0aG9kcy51cGRhdGVTY3JvbGxpbmdQYXBlcnMoKTtcbiAgICBhcHAubWV0aG9kcy51cGRhdGVQYXBlckNvbG9ycygpO1xufSwgNTAwKTtcblxudmFyIGNvbnRyb2xLaXQgPSBuZXcgQ29udHJvbEtpdCh7XG4gICAgbG9hZEFuZFNhdmU6IGZhbHNlLFxuICAgIHVzZUV4dGVybmFsU3R5bGU6IHRydWVcbn0pO1xuXG52YXIgc2NlbmVQYW5lbCA9IGNvbnRyb2xLaXQuYWRkUGFuZWwoeyBsYWJlbDogJ1NldHRpbmdzJywgd2lkdGg6IDI1MCB9KTtcblxuc2NlbmVQYW5lbC5hZGRHcm91cCh7IGxhYmVsOiAnR2VuZXJhdGUnIH0pXG4gICAgLmFkZE51bWJlcklucHV0KGNvbmZpZywgJ3RoaWNrbmVzcycsIHsgbGFiZWw6ICdUaGlja25lc3MnLCBvbkNoYW5nZTogdXBkYXRlU2Nyb2xsaW5nUGFwZXJzLCBzdGVwOiAwLjAwNSwgbWluOiAwLjAxIH0pXG4gICAgLmFkZE51bWJlcklucHV0KGNvbmZpZywgJ2hlaWdodCcsIHsgbGFiZWw6ICdIZWlnaHQnLCBvbkNoYW5nZTogdXBkYXRlU2Nyb2xsaW5nUGFwZXJzLCBzdGVwOiAwLjEsIG1pbjogMC4xIH0pXG4gICAgLmFkZE51bWJlcklucHV0KGNvbmZpZywgJ251bWJlcicsIHsgbGFiZWw6ICdOdW1iZXInLCBvbkNoYW5nZTogdXBkYXRlU2Nyb2xsaW5nUGFwZXJzLCBzdGVwOiAxMCwgbWluOiA1MCB9KVxuICAgIC8vIC5hZGROdW1iZXJJbnB1dChjb25maWcsICd0cmFpbCcsIHsgbGFiZWw6ICdUcmFpbCcsIG9uQ2hhbmdlOiB1cGRhdGVTY3JvbGxpbmdQYXBlcnMsIHN0ZXA6IDUsIG1pbjogNTAgfSlcbiAgICAuYWRkTnVtYmVySW5wdXQoY29uZmlnLCAnbm9pc2VTY2FsZScsIHsgbGFiZWw6ICdOb2lzZSBTY2FsZScsIG9uQ2hhbmdlOiB1cGRhdGVTY3JvbGxpbmdQYXBlcnMsIHN0ZXA6IDEsIG1pbjogMSB9KVxuICAgIC5hZGRCdXR0b24oJ1JhbmRvbScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uZmlnLnNlZWQgPSBNYXRoLnJhbmRvbSgpO1xuXG4gICAgICAgIHVwZGF0ZVNjcm9sbGluZ1BhcGVycygpO1xuICAgIH0pO1xuXG5zY2VuZVBhbmVsLmFkZEdyb3VwKHsgbGFiZWw6ICdEZXRhaWxzJywgZW5hYmxlOiBmYWxzZSB9KVxuICAgIC5hZGRDdXN0b21Db21wb25lbnQoVGV4dHVyZVVJLCBjb25maWcsICdwYXBlckRldGFpbCcsIHsgbGFiZWw6ICdEZXRhaWwnLCBvbkNoYW5nZTogYXBwLm1ldGhvZHMuY2hhbmdlUGFwZXJEZXRhaWxUZXh0dXJlIH0pXG4gICAgLmFkZE51bWJlcklucHV0KGNvbmZpZywgJ3BhcGVyRGV0YWlsVGlsaW5nJywgeyBsYWJlbDogJ1RpbGluZycsIG9uQ2hhbmdlOiBhcHAubWV0aG9kcy51cGRhdGVQYXBlcnMsIHN0ZXA6IDAuNSwgbWluOiAwIH0pO1xuXG5cbnNjZW5lUGFuZWwuYWRkR3JvdXAoeyBsYWJlbDogJ1NoYWRvdycsIGVuYWJsZTogZmFsc2UgfSlcbiAgICAuYWRkUGFkKGNvbmZpZywgJ3NoYWRvd0RpcmVjdGlvbicsIHsgbGFiZWw6ICdEaXJlY3Rpb24nLCBvbkNoYW5nZTogYXBwLm1ldGhvZHMudXBkYXRlU2hhZG93IH0pXG4gICAgLmFkZE51bWJlcklucHV0KGNvbmZpZywgJ3NoYWRvd0JsdXJTaXplJywgeyBsYWJlbDogJ0JsdXIgU2l6ZScsIG9uQ2hhbmdlOiBhcHAubWV0aG9kcy51cGRhdGVTaGFkb3csIHN0ZXA6IDAuNSwgbWluOiAwIH0pO1xuXG5zY2VuZVBhbmVsLmFkZEdyb3VwKHsgbGFiZWw6ICdDYW1lcmEnLCBlbmFibGU6IGZhbHNlIH0pXG4gICAgLmFkZFBhZChjb25maWcsICdjYW1lcmFQb3NpdGlvbicsIHsgbGFiZWw6ICdQb3NpdGlvbicsIG9uQ2hhbmdlOiBhcHAubWV0aG9kcy51cGRhdGVDYW1lcmEgfSlcbiAgICAuYWRkTnVtYmVySW5wdXQoY29uZmlnLCAnY2FtZXJhRGlzdGFuY2UnLCB7IGxhYmVsOiAnRGlzdGFuY2UnLCBvbkNoYW5nZTogYXBwLm1ldGhvZHMudXBkYXRlQ2FtZXJhLCBzdGVwOiAwLjUsIG1pbjogMCB9KTtcblxudmFyIGNvbG9yR3JvdXAgPSBzY2VuZVBhbmVsLmFkZEdyb3VwKHsgbGFiZWw6ICdDb2xvcnMnIH0pO1xuY29sb3JHcm91cC5hZGRDb2xvcihjb25maWcsICdiYXNlQ29sb3InLCB7IGxhYmVsOiAnQmFzZSBDb2xvcicsIGNvbG9yTW9kZTogJ3JnYicsIG9uQ2hhbmdlOiBhcHAubWV0aG9kcy51cGRhdGVCYXNlQ29sb3IgfSk7XG5jb2xvckdyb3VwLmFkZEJ1dHRvbignUmFuZG9tIENvbG9ycycsIGZ1bmN0aW9uICgpIHtcbiAgICBjcmVhdGVSYW5kb21Db2xvcnMoKTtcbiAgICBhcHAubWV0aG9kcy51cGRhdGVQYXBlckNvbG9ycygpO1xuICAgIGNvbnRyb2xLaXQudXBkYXRlKCk7XG59KTtcbmZvciAodmFyIGkgPSAwOyBpIDwgY29uZmlnLmxheWVycy5sZW5ndGg7IGkrKykge1xuICAgIGNvbG9yR3JvdXAuYWRkQ29sb3IoY29uZmlnLmxheWVyc1tpXSwgJ2NvbG9yJywgeyBsYWJlbDogJ0NvbG9yICcgKyAoaSArIDEpLCBjb2xvck1vZGU6ICdyZ2InLCBvbkNoYW5nZTogYXBwLm1ldGhvZHMudXBkYXRlUGFwZXJDb2xvcnMgIH0pO1xuICAgIGNvbG9yR3JvdXAuYWRkTnVtYmVySW5wdXQoY29uZmlnLmxheWVyc1tpXSwgJ2ludGVuc2l0eScsIHsgbGFiZWw6ICdJbnRlbnNpdHknLCBvbkNoYW5nZTogYXBwLm1ldGhvZHMudXBkYXRlUGFwZXJDb2xvcnMsIHN0ZXA6IDAuMSwgbWluOiAwICB9KTtcbn1cbmNvbG9yR3JvdXAuYWRkQnV0dG9uKCdSZXZlcnQgQ29sb3JzJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb2xvcnMgPSBjb25maWcubGF5ZXJzLm1hcChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgcmV0dXJuIGxheWVyLmNvbG9yO1xuICAgIH0pLnJldmVyc2UoKTtcbiAgICBjb25maWcubGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyLCBpZHgpIHtcbiAgICAgICAgbGF5ZXIuY29sb3IgPSBjb2xvcnNbaWR4XTtcbiAgICB9KTtcbiAgICBhcHAubWV0aG9kcy51cGRhdGVQYXBlckNvbG9ycygpO1xuICAgIGNvbnRyb2xLaXQudXBkYXRlKCk7XG59KTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHsgYXBwLnJlc2l6ZSgpOyBhcHAubWV0aG9kcy5yZW5kZXIoKTsgfSApO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbWFpbi5qc1xuLy8gbW9kdWxlIGlkID0gMTI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///124\n");

/***/ }),
/* 125 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_RenderMain__ = __webpack_require__(126);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_defaultGraphicConfig__ = __webpack_require__(208);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_zrender_src_core_util__ = __webpack_require__(209);\n\n\n\n\n\nfunction ClayAdvancedRenderer(renderer, scene, timeline, graphicOpts) {\n    graphicOpts = __WEBPACK_IMPORTED_MODULE_2_zrender_src_core_util__[\"a\" /* merge */]({}, graphicOpts);\n    if (typeof graphicOpts.shadow === 'boolean') {\n        graphicOpts.shadow = {\n            enable: graphicOpts.shadow\n        };\n    }\n    graphicOpts = __WEBPACK_IMPORTED_MODULE_2_zrender_src_core_util__[\"a\" /* merge */](graphicOpts, __WEBPACK_IMPORTED_MODULE_1__src_defaultGraphicConfig__[\"a\" /* default */]);\n\n    this._renderMain = new __WEBPACK_IMPORTED_MODULE_0__src_RenderMain__[\"a\" /* default */](renderer, scene, graphicOpts.shadow);\n\n    this._renderMain.setShadow(graphicOpts.shadow);\n    this._renderMain.setPostEffect(graphicOpts.postEffect);\n    this._renderMain.setTemporalSuperSampling(graphicOpts.temporalSuperSampling);\n\n    this._needsRefresh = false;\n\n    this._graphicOpts = graphicOpts;\n\n    timeline.on('frame', this._loop, this);\n\n    scene.on('click', function (e) {\n        this.setPostEffect({\n            depthOfField: {\n                focalDistance: e.distance\n            }\n        });\n        this.render();\n    }, this);\n}\n\nClayAdvancedRenderer.prototype.render = function (renderImmediately) {\n    this._needsRefresh = true;\n};\n\nClayAdvancedRenderer.prototype.setPostEffect = function (opts) {\n    __WEBPACK_IMPORTED_MODULE_2_zrender_src_core_util__[\"a\" /* merge */](this._graphicOpts.postEffect, opts, true);\n    this._renderMain.setPostEffect(this._graphicOpts.postEffect);\n};\n\nClayAdvancedRenderer.prototype.setShadow = function (opts) {\n    __WEBPACK_IMPORTED_MODULE_2_zrender_src_core_util__[\"a\" /* merge */](this._graphicOpts.shadow, opts, true);\n    this._renderMain.setShadow(this._graphicOpts.shadow);\n};\n\nClayAdvancedRenderer.prototype._loop = function (frameTime) {\n    if (this._disposed) {\n        return;\n    }\n    if (!this._needsRefresh) {\n        return;\n    }\n\n    this._needsRefresh = false;\n\n    this._renderMain.prepareRender();\n    this._renderMain.render();\n\n    this._startAccumulating();\n};\n\nvar accumulatingId = 1;\nClayAdvancedRenderer.prototype._stopAccumulating = function () {\n    this._accumulatingId = 0;\n    clearTimeout(this._accumulatingTimeout);\n};\n\nClayAdvancedRenderer.prototype._startAccumulating = function (immediate) {\n    var self = this;\n    this._stopAccumulating();\n\n    var needsAccumulate = self._renderMain.needsAccumulate();\n    if (!needsAccumulate) {\n        return;\n    }\n\n    function accumulate(id) {\n        if (!self._accumulatingId || id !== self._accumulatingId || self._disposed) {\n            return;\n        }\n\n        var isFinished = self._renderMain.isAccumulateFinished() && needsAccumulate;\n\n        if (!isFinished) {\n            self._renderMain.render(true);\n\n            if (immediate) {\n                accumulate(id);\n            }\n            else {\n                requestAnimationFrame(function () {\n                    accumulate(id);\n                });\n            }\n        }\n    }\n\n    this._accumulatingId = accumulatingId++;\n\n    if (immediate) {\n        accumulate(self._accumulatingId);\n    }\n    else {\n        this._accumulatingTimeout = setTimeout(function () {\n            accumulate(self._accumulatingId);\n        }, 50);\n    }\n};\n\nClayAdvancedRenderer.prototype.dispose = function () {\n    this._disposed = true;\n\n    this._renderMain.dispose();\n};\n\nClayAdvancedRenderer.version = '0.1.1';\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ClayAdvancedRenderer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9pbmRleC5qcz80NWUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZW5kZXJNYWluIGZyb20gJy4vc3JjL1JlbmRlck1haW4nO1xuaW1wb3J0IGRlZmF1bHRHcmFwaGljQ29uZmlnIGZyb20gJy4vc3JjL2RlZmF1bHRHcmFwaGljQ29uZmlnJztcbmltcG9ydCAqIGFzIHpyVXRpbCBmcm9tICd6cmVuZGVyL3NyYy9jb3JlL3V0aWwnO1xuXG5cbmZ1bmN0aW9uIENsYXlBZHZhbmNlZFJlbmRlcmVyKHJlbmRlcmVyLCBzY2VuZSwgdGltZWxpbmUsIGdyYXBoaWNPcHRzKSB7XG4gICAgZ3JhcGhpY09wdHMgPSB6clV0aWwubWVyZ2Uoe30sIGdyYXBoaWNPcHRzKTtcbiAgICBpZiAodHlwZW9mIGdyYXBoaWNPcHRzLnNoYWRvdyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGdyYXBoaWNPcHRzLnNoYWRvdyA9IHtcbiAgICAgICAgICAgIGVuYWJsZTogZ3JhcGhpY09wdHMuc2hhZG93XG4gICAgICAgIH07XG4gICAgfVxuICAgIGdyYXBoaWNPcHRzID0genJVdGlsLm1lcmdlKGdyYXBoaWNPcHRzLCBkZWZhdWx0R3JhcGhpY0NvbmZpZyk7XG5cbiAgICB0aGlzLl9yZW5kZXJNYWluID0gbmV3IFJlbmRlck1haW4ocmVuZGVyZXIsIHNjZW5lLCBncmFwaGljT3B0cy5zaGFkb3cpO1xuXG4gICAgdGhpcy5fcmVuZGVyTWFpbi5zZXRTaGFkb3coZ3JhcGhpY09wdHMuc2hhZG93KTtcbiAgICB0aGlzLl9yZW5kZXJNYWluLnNldFBvc3RFZmZlY3QoZ3JhcGhpY09wdHMucG9zdEVmZmVjdCk7XG4gICAgdGhpcy5fcmVuZGVyTWFpbi5zZXRUZW1wb3JhbFN1cGVyU2FtcGxpbmcoZ3JhcGhpY09wdHMudGVtcG9yYWxTdXBlclNhbXBsaW5nKTtcblxuICAgIHRoaXMuX25lZWRzUmVmcmVzaCA9IGZhbHNlO1xuXG4gICAgdGhpcy5fZ3JhcGhpY09wdHMgPSBncmFwaGljT3B0cztcblxuICAgIHRpbWVsaW5lLm9uKCdmcmFtZScsIHRoaXMuX2xvb3AsIHRoaXMpO1xuXG4gICAgc2NlbmUub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdGhpcy5zZXRQb3N0RWZmZWN0KHtcbiAgICAgICAgICAgIGRlcHRoT2ZGaWVsZDoge1xuICAgICAgICAgICAgICAgIGZvY2FsRGlzdGFuY2U6IGUuZGlzdGFuY2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfSwgdGhpcyk7XG59XG5cbkNsYXlBZHZhbmNlZFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAocmVuZGVySW1tZWRpYXRlbHkpIHtcbiAgICB0aGlzLl9uZWVkc1JlZnJlc2ggPSB0cnVlO1xufTtcblxuQ2xheUFkdmFuY2VkUmVuZGVyZXIucHJvdG90eXBlLnNldFBvc3RFZmZlY3QgPSBmdW5jdGlvbiAob3B0cykge1xuICAgIHpyVXRpbC5tZXJnZSh0aGlzLl9ncmFwaGljT3B0cy5wb3N0RWZmZWN0LCBvcHRzLCB0cnVlKTtcbiAgICB0aGlzLl9yZW5kZXJNYWluLnNldFBvc3RFZmZlY3QodGhpcy5fZ3JhcGhpY09wdHMucG9zdEVmZmVjdCk7XG59O1xuXG5DbGF5QWR2YW5jZWRSZW5kZXJlci5wcm90b3R5cGUuc2V0U2hhZG93ID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgICB6clV0aWwubWVyZ2UodGhpcy5fZ3JhcGhpY09wdHMuc2hhZG93LCBvcHRzLCB0cnVlKTtcbiAgICB0aGlzLl9yZW5kZXJNYWluLnNldFNoYWRvdyh0aGlzLl9ncmFwaGljT3B0cy5zaGFkb3cpO1xufTtcblxuQ2xheUFkdmFuY2VkUmVuZGVyZXIucHJvdG90eXBlLl9sb29wID0gZnVuY3Rpb24gKGZyYW1lVGltZSkge1xuICAgIGlmICh0aGlzLl9kaXNwb3NlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghdGhpcy5fbmVlZHNSZWZyZXNoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9uZWVkc1JlZnJlc2ggPSBmYWxzZTtcblxuICAgIHRoaXMuX3JlbmRlck1haW4ucHJlcGFyZVJlbmRlcigpO1xuICAgIHRoaXMuX3JlbmRlck1haW4ucmVuZGVyKCk7XG5cbiAgICB0aGlzLl9zdGFydEFjY3VtdWxhdGluZygpO1xufTtcblxudmFyIGFjY3VtdWxhdGluZ0lkID0gMTtcbkNsYXlBZHZhbmNlZFJlbmRlcmVyLnByb3RvdHlwZS5fc3RvcEFjY3VtdWxhdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9hY2N1bXVsYXRpbmdJZCA9IDA7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuX2FjY3VtdWxhdGluZ1RpbWVvdXQpO1xufTtcblxuQ2xheUFkdmFuY2VkUmVuZGVyZXIucHJvdG90eXBlLl9zdGFydEFjY3VtdWxhdGluZyA9IGZ1bmN0aW9uIChpbW1lZGlhdGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5fc3RvcEFjY3VtdWxhdGluZygpO1xuXG4gICAgdmFyIG5lZWRzQWNjdW11bGF0ZSA9IHNlbGYuX3JlbmRlck1haW4ubmVlZHNBY2N1bXVsYXRlKCk7XG4gICAgaWYgKCFuZWVkc0FjY3VtdWxhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFjY3VtdWxhdGUoaWQpIHtcbiAgICAgICAgaWYgKCFzZWxmLl9hY2N1bXVsYXRpbmdJZCB8fCBpZCAhPT0gc2VsZi5fYWNjdW11bGF0aW5nSWQgfHwgc2VsZi5fZGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpc0ZpbmlzaGVkID0gc2VsZi5fcmVuZGVyTWFpbi5pc0FjY3VtdWxhdGVGaW5pc2hlZCgpICYmIG5lZWRzQWNjdW11bGF0ZTtcblxuICAgICAgICBpZiAoIWlzRmluaXNoZWQpIHtcbiAgICAgICAgICAgIHNlbGYuX3JlbmRlck1haW4ucmVuZGVyKHRydWUpO1xuXG4gICAgICAgICAgICBpZiAoaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZShpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlKGlkKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2FjY3VtdWxhdGluZ0lkID0gYWNjdW11bGF0aW5nSWQrKztcblxuICAgIGlmIChpbW1lZGlhdGUpIHtcbiAgICAgICAgYWNjdW11bGF0ZShzZWxmLl9hY2N1bXVsYXRpbmdJZCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLl9hY2N1bXVsYXRpbmdUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhY2N1bXVsYXRlKHNlbGYuX2FjY3VtdWxhdGluZ0lkKTtcbiAgICAgICAgfSwgNTApO1xuICAgIH1cbn07XG5cbkNsYXlBZHZhbmNlZFJlbmRlcmVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2Rpc3Bvc2VkID0gdHJ1ZTtcblxuICAgIHRoaXMuX3JlbmRlck1haW4uZGlzcG9zZSgpO1xufTtcblxuQ2xheUFkdmFuY2VkUmVuZGVyZXIudmVyc2lvbiA9ICcwLjEuMSc7XG5cbmV4cG9ydCBkZWZhdWx0IENsYXlBZHZhbmNlZFJlbmRlcmVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///125\n");

/***/ }),
/* 126 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_claygl__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__EffectCompositor__ = __webpack_require__(197);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__TemporalSuperSampling__ = __webpack_require__(206);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__halton__ = __webpack_require__(64);\n\n\nvar ShadowMapPass = __WEBPACK_IMPORTED_MODULE_0_claygl__[\"p\" /* prePass */].ShadowMap;\n\n\n\n\n\nfunction RenderMain(renderer, scene, enableShadow) {\n\n    this.renderer = renderer;\n    this.scene = scene;\n\n    this.preZ = true;\n\n    this._compositor = new __WEBPACK_IMPORTED_MODULE_1__EffectCompositor__[\"a\" /* default */]();\n\n    this._temporalSS = new __WEBPACK_IMPORTED_MODULE_2__TemporalSuperSampling__[\"a\" /* default */]({\n        velocityTexture: this._compositor.getVelocityTexture(),\n        depthTexture: this._compositor.getDepthTexture()\n    });\n\n    if (enableShadow) {\n        this._shadowMapPass = new ShadowMapPass({\n            lightFrustumBias: 20\n        });\n    }\n\n    this._enableTemporalSS = 'auto';\n\n    scene.on('beforerender', function (renderer, scene, camera) {\n        if (this.needsTemporalSS()) {\n            this._temporalSS.jitterProjection(renderer, camera);\n        }\n    }, this);\n\n\n    this._framebuffer = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"a\" /* FrameBuffer */]();\n    this._sourceTex = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        type: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].HALF_FLOAT\n    });\n    this._depthTex = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        format: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].DEPTH_COMPONENT,\n        type: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].UNSIGNED_INT\n    });\n}\n\n/**\n * Cast a ray\n * @param {number} x offsetX\n * @param {number} y offsetY\n * @param {clay.math.Ray} out\n * @return {clay.math.Ray}\n */\nvar ndc = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"j\" /* Vector2 */]();\nRenderMain.prototype.castRay = function (x, y, out) {\n    var renderer = this.layer.renderer;\n\n    var oldViewport = renderer.viewport;\n    renderer.viewport = this.viewport;\n    renderer.screenToNDC(x, y, ndc);\n    this.camera.castRay(ndc, out);\n    renderer.viewport = oldViewport;\n\n    return out;\n};\n\n/**\n * Prepare and update scene before render\n */\nRenderMain.prototype.prepareRender = function () {\n    var scene = this.scene;\n    var camera = scene.getMainCamera();\n    var renderer = this.renderer;\n\n    camera.aspect = renderer.getViewportAspect();\n\n    scene.update();\n    scene.updateLights();\n    var renderList = scene.updateRenderList(camera);\n\n    this._updateSRGBOfList(renderList.opaque);\n    this._updateSRGBOfList(renderList.transparent);\n\n    this._frame = 0;\n    if (!this._temporalSupportDynamic) {\n        this._temporalSS.resetFrame();\n    }\n\n    // var lights = scene.getLights();\n    // for (var i = 0; i < lights.length; i++) {\n    //     if (lights[i].cubemap) {\n    //         if (this._compositor && this._compositor.isSSREnabled()) {\n    //             lights[i].invisible = true;\n    //         }\n    //         else {\n    //             lights[i].invisible = false;\n    //         }\n    //     }\n    // }\n\n    if (this._enablePostEffect) {\n        this._compositor.resize(renderer.getWidth(), renderer.getHeight(), renderer.getDevicePixelRatio());\n    }\n    if (this._temporalSS) {\n        this._temporalSS.resize(renderer.getWidth(), renderer.getHeight());\n    }\n};\n\nRenderMain.prototype.render = function (accumulating) {\n    var scene = this.scene;\n    var camera = scene.getMainCamera();\n    this._doRender(scene, camera, accumulating, this._frame);\n    this._frame++;\n};\n\nRenderMain.prototype.needsAccumulate = function () {\n    return this.needsTemporalSS();\n};\n\nRenderMain.prototype.needsTemporalSS = function () {\n    var enableTemporalSS = this._enableTemporalSS;\n    if (enableTemporalSS === 'auto') {\n        enableTemporalSS = this._enablePostEffect;\n    }\n    return enableTemporalSS;\n};\n\nRenderMain.prototype.hasDOF = function () {\n    return this._enableDOF;\n};\n\nRenderMain.prototype.isAccumulateFinished = function () {\n    var frame = this._frame;\n    return !(this.needsTemporalSS() && !this._temporalSS.isFinished(frame))\n        && !(this._compositor && !this._compositor.isSSAOFinished(frame))\n        && !(this._compositor && !this._compositor.isSSRFinished(frame))\n        && !(this._compositor && frame < 30);\n};\n\nRenderMain.prototype._doRender = function (scene, camera, accumulating, accumFrame) {\n\n    var renderer = this.renderer;\n\n    accumFrame = accumFrame || 0;\n\n    if (!accumulating && this._shadowMapPass) {\n        this._shadowMapPass.kernelPCF = this._pcfKernels[0];\n        // Not render shadowmap pass in accumulating frame.\n        this._shadowMapPass.render(renderer, scene, camera, true);\n    }\n\n    this._updateShadowPCFKernel(scene, camera, accumFrame);\n\n    // Shadowmap will set clearColor.\n    renderer.gl.clearColor(0.0, 0.0, 0.0, 0.0);\n\n    if (this._enablePostEffect) {\n        // normal render also needs to be jittered when have edge pass.\n        if (this.needsTemporalSS()) {\n            this._temporalSS.jitterProjection(renderer, camera);\n        }\n        this._compositor.updateGBuffer(renderer, scene, camera, this._temporalSS.getFrame());\n    }\n\n    // Always update SSAO to make sure have correct ssaoMap status\n    // TODO TRANSPARENT OBJECTS.\n    this._updateSSAO(renderer, scene, camera, accumulating ? this._temporalSS.getFrame() : 0);\n\n    var frameBuffer;\n\n    var needTemporalPass = this.needsTemporalSS() && (this._temporalSupportDynamic || accumulating);\n    var needPostEffect = this._enablePostEffect;\n\n    if (!needTemporalPass && !needPostEffect) {\n        renderer.render(scene, camera, true, this.preZ);\n        this.afterRenderScene(renderer, scene, camera);\n    }\n    else {\n        var isSSREnabled = this._compositor.isSSREnabled();\n\n        var sourceTex = this._sourceTex;\n        var depthTex = this._depthTex;\n        var frameBuffer = this._framebuffer;\n        depthTex.width = sourceTex.width = renderer.getWidth();\n        depthTex.height = sourceTex.height = renderer.getHeight();\n\n        frameBuffer.attach(sourceTex);\n        frameBuffer.attach(depthTex, __WEBPACK_IMPORTED_MODULE_0_claygl__[\"a\" /* FrameBuffer */].DEPTH_ATTACHMENT);\n        frameBuffer.bind(renderer);\n        renderer.gl.clear(renderer.gl.DEPTH_BUFFER_BIT | renderer.gl.COLOR_BUFFER_BIT);\n        renderer.render(scene, camera, true, this.preZ);\n        this.afterRenderScene(renderer, scene, camera);\n        frameBuffer.unbind(renderer);\n\n        if (isSSREnabled && needPostEffect) {\n            this._compositor.updateSSR(\n                renderer, scene, camera,\n                sourceTex,\n                // TODO reprojection\n                sourceTex,\n                // needTemporalPass ? this._temporalSS.getTargetTexture() : sourceTex,\n                this._temporalSS.getFrame()\n            );\n            sourceTex = this._compositor.getSSRTexture();\n        }\n\n        if (needTemporalPass) {\n            var directOutput = !needPostEffect;\n            this._temporalSS.render(renderer, camera, sourceTex, accumulating, directOutput);\n            sourceTex = this._temporalSS.getTargetTexture();\n        }\n        if (needPostEffect) {\n            this._compositor.composite(\n                renderer, scene, camera, sourceTex, depthTex,\n                needTemporalPass ? this._temporalSS.getFrame() : 0,\n                accumulating\n            );\n        }\n    }\n\n    this.afterRenderAll(renderer, scene, camera);\n};\n\nRenderMain.prototype._updateSRGBOfList = function (list) {\n    var isLinearSpace = this.isLinearSpace();\n    for (var i = 0; i < list.length; i++) {\n        list[i].material[isLinearSpace ? 'define' : 'undefine']('fragment', 'SRGB_DECODE');\n    };\n};\n\nRenderMain.prototype.afterRenderScene = function (renderer, scene, camera) {};\nRenderMain.prototype.afterRenderAll = function (renderer, scene, camera) {};\n\nRenderMain.prototype._updateSSAO = function (renderer, scene, camera, frame) {\n    var ifEnableSSAO = this._enableSSAO && this._enablePostEffect;\n    var compositor = this._compositor;\n    if (ifEnableSSAO) {\n        this._compositor.updateSSAO(renderer, scene, camera, this._temporalSS.getFrame());\n    }\n\n    function updateQueue(queue) {\n        for (var i = 0; i < queue.length; i++) {\n            var renderable = queue[i];\n            renderable.material[ifEnableSSAO ? 'enableTexture' : 'disableTexture']('ssaoMap');\n            if (ifEnableSSAO) {\n                renderable.material.set('ssaoMap', compositor.getSSAOTexture());\n            }\n        }\n    }\n    updateQueue(scene.getRenderList(camera).opaque);\n    updateQueue(scene.getRenderList(camera).transparent);\n};\n\nRenderMain.prototype._updateShadowPCFKernel = function (scene, camera, frame) {\n    var pcfKernel = this._pcfKernels[frame % this._pcfKernels.length];\n    function updateQueue(queue) {\n        for (var i = 0; i < queue.length; i++) {\n            if (queue[i].receiveShadow) {\n                queue[i].material.set('pcfKernel', pcfKernel);\n                if (queue[i].material) {\n                    queue[i].material.define('fragment', 'PCF_KERNEL_SIZE', pcfKernel.length / 2);\n                }\n            }\n        }\n    }\n    updateQueue(scene.getRenderList(camera).opaque);\n    updateQueue(scene.getRenderList(camera).transparent);\n};\n\nRenderMain.prototype.dispose = function () {\n    var renderer = this.renderer;\n    this._compositor.dispose(renderer);\n    this._temporalSS.dispose(renderer);\n    if (this._shadowMapPass) {\n        this._shadowMapPass.dispose(renderer);\n    }\n    renderer.dispose();\n};\n\nRenderMain.prototype.setPostEffect = function (opts, api) {\n    var compositor = this._compositor;\n    opts = opts || {};\n    this._enablePostEffect = !!opts.enable;\n    var bloomOpts = opts.bloom || {};\n    var edgeOpts = opts.edge || {};\n    var dofOpts = opts.depthOfField || {};\n    var ssaoOpts = opts.screenSpaceAmbientOcclusion || {};\n    var ssrOpts = opts.screenSpaceReflection || {};\n    var fxaaOpts = opts.FXAA || {};\n    var colorCorrOpts = opts.colorCorrection || {};\n    bloomOpts.enable ? compositor.enableBloom() : compositor.disableBloom();\n    dofOpts.enable ? compositor.enableDOF() : compositor.disableDOF();\n    ssrOpts.enable ? compositor.enableSSR() : compositor.disableSSR();\n    colorCorrOpts.enable ? compositor.enableColorCorrection() : compositor.disableColorCorrection();\n    edgeOpts.enable ? compositor.enableEdge() : compositor.disableEdge();\n    fxaaOpts.enable ? compositor.enableFXAA() : compositor.disableFXAA();\n\n    this._enableDOF = dofOpts.enable;\n    this._enableSSAO = ssaoOpts.enable;\n\n    this._enableSSAO ? compositor.enableSSAO() : compositor.disableSSAO();\n\n    compositor.setBloomIntensity(bloomOpts.intensity);\n    compositor.setEdgeColor(edgeOpts.color);\n    compositor.setColorLookupTexture(colorCorrOpts.lookupTexture, api);\n    compositor.setExposure(colorCorrOpts.exposure);\n\n    ['radius', 'quality', 'intensity', 'temporalFilter'].forEach(function (name) {\n        compositor.setSSAOParameter(name, ssaoOpts[name]);\n    });\n    ['quality', 'maxRoughness'].forEach(function (name) {\n        compositor.setSSRParameter(name, ssrOpts[name]);\n    });\n    ['quality', 'focalDistance', 'focalRange', 'blurRadius', 'aperture'].forEach(function (name) {\n        compositor.setDOFParameter(name, dofOpts[name]);\n    });\n    ['brightness', 'contrast', 'saturation'].forEach(function (name) {\n        compositor.setColorCorrection(name, colorCorrOpts[name]);\n    });\n};\n\nRenderMain.prototype.setShadow = function (opts) {\n    var pcfKernels = [];\n    var off = 0;\n    for (var i = 0; i < 30; i++) {\n        var pcfKernel = [];\n        for (var k = 0; k < opts.kernelSize; k++) {\n            pcfKernel.push((Object(__WEBPACK_IMPORTED_MODULE_3__halton__[\"a\" /* default */])(off, 2) * 2.0 - 1.0) * opts.blurSize);\n            pcfKernel.push((Object(__WEBPACK_IMPORTED_MODULE_3__halton__[\"a\" /* default */])(off, 3) * 2.0 - 1.0) * opts.blurSize);\n            off++;\n        }\n        pcfKernels.push(pcfKernel);\n    }\n    this._pcfKernels = pcfKernels;\n};\n\nRenderMain.prototype.isDOFEnabled = function () {\n    return this._enablePostEffect && this._enableDOF;\n};\n\nRenderMain.prototype.setDOFFocusOnPoint = function (depth) {\n    if (this._enablePostEffect) {\n\n        if (depth > this.camera.far || depth < this.camera.near) {\n            return;\n        }\n\n        this._compositor.setDOFParameter('focalDistance', depth);\n        return true;\n    }\n};\n\nRenderMain.prototype.setTemporalSuperSampling = function (temporalSuperSamplingOpt) {\n    temporalSuperSamplingOpt = temporalSuperSamplingOpt || {};\n    this._enableTemporalSS = temporalSuperSamplingOpt.enable;\n    this._temporalSupportDynamic = temporalSuperSamplingOpt.dynamic;\n\n    if (this._enableTemporalSS && this._temporalSupportDynamic) {\n        this._compositor.enableVelocityBuffer();\n    }\n    else {\n        this._compositor.disableVelocityBuffer();\n    }\n};\n\nRenderMain.prototype.isLinearSpace = function () {\n    return this._enablePostEffect;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (RenderMain);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvUmVuZGVyTWFpbi5qcz81MzMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByZVBhc3MsIFZlY3RvcjIsIEZyYW1lQnVmZmVyLCBUZXh0dXJlMkQsIFRleHR1cmUgfSBmcm9tICdjbGF5Z2wnO1xuXG52YXIgU2hhZG93TWFwUGFzcyA9IHByZVBhc3MuU2hhZG93TWFwO1xuXG5pbXBvcnQgRWZmZWN0Q29tcG9zaXRvciBmcm9tICcuL0VmZmVjdENvbXBvc2l0b3InO1xuaW1wb3J0IFRlbXBvcmFsU3VwZXJTYW1wbGluZyBmcm9tICcuL1RlbXBvcmFsU3VwZXJTYW1wbGluZyc7XG5pbXBvcnQgaGFsdG9uIGZyb20gJy4vaGFsdG9uJztcblxuZnVuY3Rpb24gUmVuZGVyTWFpbihyZW5kZXJlciwgc2NlbmUsIGVuYWJsZVNoYWRvdykge1xuXG4gICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcblxuICAgIHRoaXMucHJlWiA9IHRydWU7XG5cbiAgICB0aGlzLl9jb21wb3NpdG9yID0gbmV3IEVmZmVjdENvbXBvc2l0b3IoKTtcblxuICAgIHRoaXMuX3RlbXBvcmFsU1MgPSBuZXcgVGVtcG9yYWxTdXBlclNhbXBsaW5nKHtcbiAgICAgICAgdmVsb2NpdHlUZXh0dXJlOiB0aGlzLl9jb21wb3NpdG9yLmdldFZlbG9jaXR5VGV4dHVyZSgpLFxuICAgICAgICBkZXB0aFRleHR1cmU6IHRoaXMuX2NvbXBvc2l0b3IuZ2V0RGVwdGhUZXh0dXJlKClcbiAgICB9KTtcblxuICAgIGlmIChlbmFibGVTaGFkb3cpIHtcbiAgICAgICAgdGhpcy5fc2hhZG93TWFwUGFzcyA9IG5ldyBTaGFkb3dNYXBQYXNzKHtcbiAgICAgICAgICAgIGxpZ2h0RnJ1c3R1bUJpYXM6IDIwXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX2VuYWJsZVRlbXBvcmFsU1MgPSAnYXV0byc7XG5cbiAgICBzY2VuZS5vbignYmVmb3JlcmVuZGVyJywgZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKSB7XG4gICAgICAgIGlmICh0aGlzLm5lZWRzVGVtcG9yYWxTUygpKSB7XG4gICAgICAgICAgICB0aGlzLl90ZW1wb3JhbFNTLmppdHRlclByb2plY3Rpb24ocmVuZGVyZXIsIGNhbWVyYSk7XG4gICAgICAgIH1cbiAgICB9LCB0aGlzKTtcblxuXG4gICAgdGhpcy5fZnJhbWVidWZmZXIgPSBuZXcgRnJhbWVCdWZmZXIoKTtcbiAgICB0aGlzLl9zb3VyY2VUZXggPSBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgdHlwZTogVGV4dHVyZS5IQUxGX0ZMT0FUXG4gICAgfSk7XG4gICAgdGhpcy5fZGVwdGhUZXggPSBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgZm9ybWF0OiBUZXh0dXJlLkRFUFRIX0NPTVBPTkVOVCxcbiAgICAgICAgdHlwZTogVGV4dHVyZS5VTlNJR05FRF9JTlRcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBDYXN0IGEgcmF5XG4gKiBAcGFyYW0ge251bWJlcn0geCBvZmZzZXRYXG4gKiBAcGFyYW0ge251bWJlcn0geSBvZmZzZXRZXG4gKiBAcGFyYW0ge2NsYXkubWF0aC5SYXl9IG91dFxuICogQHJldHVybiB7Y2xheS5tYXRoLlJheX1cbiAqL1xudmFyIG5kYyA9IG5ldyBWZWN0b3IyKCk7XG5SZW5kZXJNYWluLnByb3RvdHlwZS5jYXN0UmF5ID0gZnVuY3Rpb24gKHgsIHksIG91dCkge1xuICAgIHZhciByZW5kZXJlciA9IHRoaXMubGF5ZXIucmVuZGVyZXI7XG5cbiAgICB2YXIgb2xkVmlld3BvcnQgPSByZW5kZXJlci52aWV3cG9ydDtcbiAgICByZW5kZXJlci52aWV3cG9ydCA9IHRoaXMudmlld3BvcnQ7XG4gICAgcmVuZGVyZXIuc2NyZWVuVG9OREMoeCwgeSwgbmRjKTtcbiAgICB0aGlzLmNhbWVyYS5jYXN0UmF5KG5kYywgb3V0KTtcbiAgICByZW5kZXJlci52aWV3cG9ydCA9IG9sZFZpZXdwb3J0O1xuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUHJlcGFyZSBhbmQgdXBkYXRlIHNjZW5lIGJlZm9yZSByZW5kZXJcbiAqL1xuUmVuZGVyTWFpbi5wcm90b3R5cGUucHJlcGFyZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2NlbmUgPSB0aGlzLnNjZW5lO1xuICAgIHZhciBjYW1lcmEgPSBzY2VuZS5nZXRNYWluQ2FtZXJhKCk7XG4gICAgdmFyIHJlbmRlcmVyID0gdGhpcy5yZW5kZXJlcjtcblxuICAgIGNhbWVyYS5hc3BlY3QgPSByZW5kZXJlci5nZXRWaWV3cG9ydEFzcGVjdCgpO1xuXG4gICAgc2NlbmUudXBkYXRlKCk7XG4gICAgc2NlbmUudXBkYXRlTGlnaHRzKCk7XG4gICAgdmFyIHJlbmRlckxpc3QgPSBzY2VuZS51cGRhdGVSZW5kZXJMaXN0KGNhbWVyYSk7XG5cbiAgICB0aGlzLl91cGRhdGVTUkdCT2ZMaXN0KHJlbmRlckxpc3Qub3BhcXVlKTtcbiAgICB0aGlzLl91cGRhdGVTUkdCT2ZMaXN0KHJlbmRlckxpc3QudHJhbnNwYXJlbnQpO1xuXG4gICAgdGhpcy5fZnJhbWUgPSAwO1xuICAgIGlmICghdGhpcy5fdGVtcG9yYWxTdXBwb3J0RHluYW1pYykge1xuICAgICAgICB0aGlzLl90ZW1wb3JhbFNTLnJlc2V0RnJhbWUoKTtcbiAgICB9XG5cbiAgICAvLyB2YXIgbGlnaHRzID0gc2NlbmUuZ2V0TGlnaHRzKCk7XG4gICAgLy8gZm9yICh2YXIgaSA9IDA7IGkgPCBsaWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAvLyAgICAgaWYgKGxpZ2h0c1tpXS5jdWJlbWFwKSB7XG4gICAgLy8gICAgICAgICBpZiAodGhpcy5fY29tcG9zaXRvciAmJiB0aGlzLl9jb21wb3NpdG9yLmlzU1NSRW5hYmxlZCgpKSB7XG4gICAgLy8gICAgICAgICAgICAgbGlnaHRzW2ldLmludmlzaWJsZSA9IHRydWU7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgICAgICBlbHNlIHtcbiAgICAvLyAgICAgICAgICAgICBsaWdodHNbaV0uaW52aXNpYmxlID0gZmFsc2U7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgIH1cbiAgICAvLyB9XG5cbiAgICBpZiAodGhpcy5fZW5hYmxlUG9zdEVmZmVjdCkge1xuICAgICAgICB0aGlzLl9jb21wb3NpdG9yLnJlc2l6ZShyZW5kZXJlci5nZXRXaWR0aCgpLCByZW5kZXJlci5nZXRIZWlnaHQoKSwgcmVuZGVyZXIuZ2V0RGV2aWNlUGl4ZWxSYXRpbygpKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3RlbXBvcmFsU1MpIHtcbiAgICAgICAgdGhpcy5fdGVtcG9yYWxTUy5yZXNpemUocmVuZGVyZXIuZ2V0V2lkdGgoKSwgcmVuZGVyZXIuZ2V0SGVpZ2h0KCkpO1xuICAgIH1cbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChhY2N1bXVsYXRpbmcpIHtcbiAgICB2YXIgc2NlbmUgPSB0aGlzLnNjZW5lO1xuICAgIHZhciBjYW1lcmEgPSBzY2VuZS5nZXRNYWluQ2FtZXJhKCk7XG4gICAgdGhpcy5fZG9SZW5kZXIoc2NlbmUsIGNhbWVyYSwgYWNjdW11bGF0aW5nLCB0aGlzLl9mcmFtZSk7XG4gICAgdGhpcy5fZnJhbWUrKztcbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLm5lZWRzQWNjdW11bGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5uZWVkc1RlbXBvcmFsU1MoKTtcbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLm5lZWRzVGVtcG9yYWxTUyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZW5hYmxlVGVtcG9yYWxTUyA9IHRoaXMuX2VuYWJsZVRlbXBvcmFsU1M7XG4gICAgaWYgKGVuYWJsZVRlbXBvcmFsU1MgPT09ICdhdXRvJykge1xuICAgICAgICBlbmFibGVUZW1wb3JhbFNTID0gdGhpcy5fZW5hYmxlUG9zdEVmZmVjdDtcbiAgICB9XG4gICAgcmV0dXJuIGVuYWJsZVRlbXBvcmFsU1M7XG59O1xuXG5SZW5kZXJNYWluLnByb3RvdHlwZS5oYXNET0YgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VuYWJsZURPRjtcbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLmlzQWNjdW11bGF0ZUZpbmlzaGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBmcmFtZSA9IHRoaXMuX2ZyYW1lO1xuICAgIHJldHVybiAhKHRoaXMubmVlZHNUZW1wb3JhbFNTKCkgJiYgIXRoaXMuX3RlbXBvcmFsU1MuaXNGaW5pc2hlZChmcmFtZSkpXG4gICAgICAgICYmICEodGhpcy5fY29tcG9zaXRvciAmJiAhdGhpcy5fY29tcG9zaXRvci5pc1NTQU9GaW5pc2hlZChmcmFtZSkpXG4gICAgICAgICYmICEodGhpcy5fY29tcG9zaXRvciAmJiAhdGhpcy5fY29tcG9zaXRvci5pc1NTUkZpbmlzaGVkKGZyYW1lKSlcbiAgICAgICAgJiYgISh0aGlzLl9jb21wb3NpdG9yICYmIGZyYW1lIDwgMzApO1xufTtcblxuUmVuZGVyTWFpbi5wcm90b3R5cGUuX2RvUmVuZGVyID0gZnVuY3Rpb24gKHNjZW5lLCBjYW1lcmEsIGFjY3VtdWxhdGluZywgYWNjdW1GcmFtZSkge1xuXG4gICAgdmFyIHJlbmRlcmVyID0gdGhpcy5yZW5kZXJlcjtcblxuICAgIGFjY3VtRnJhbWUgPSBhY2N1bUZyYW1lIHx8IDA7XG5cbiAgICBpZiAoIWFjY3VtdWxhdGluZyAmJiB0aGlzLl9zaGFkb3dNYXBQYXNzKSB7XG4gICAgICAgIHRoaXMuX3NoYWRvd01hcFBhc3Mua2VybmVsUENGID0gdGhpcy5fcGNmS2VybmVsc1swXTtcbiAgICAgICAgLy8gTm90IHJlbmRlciBzaGFkb3dtYXAgcGFzcyBpbiBhY2N1bXVsYXRpbmcgZnJhbWUuXG4gICAgICAgIHRoaXMuX3NoYWRvd01hcFBhc3MucmVuZGVyKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCB0cnVlKTtcbiAgICB9XG5cbiAgICB0aGlzLl91cGRhdGVTaGFkb3dQQ0ZLZXJuZWwoc2NlbmUsIGNhbWVyYSwgYWNjdW1GcmFtZSk7XG5cbiAgICAvLyBTaGFkb3dtYXAgd2lsbCBzZXQgY2xlYXJDb2xvci5cbiAgICByZW5kZXJlci5nbC5jbGVhckNvbG9yKDAuMCwgMC4wLCAwLjAsIDAuMCk7XG5cbiAgICBpZiAodGhpcy5fZW5hYmxlUG9zdEVmZmVjdCkge1xuICAgICAgICAvLyBub3JtYWwgcmVuZGVyIGFsc28gbmVlZHMgdG8gYmUgaml0dGVyZWQgd2hlbiBoYXZlIGVkZ2UgcGFzcy5cbiAgICAgICAgaWYgKHRoaXMubmVlZHNUZW1wb3JhbFNTKCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3RlbXBvcmFsU1Muaml0dGVyUHJvamVjdGlvbihyZW5kZXJlciwgY2FtZXJhKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jb21wb3NpdG9yLnVwZGF0ZUdCdWZmZXIocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIHRoaXMuX3RlbXBvcmFsU1MuZ2V0RnJhbWUoKSk7XG4gICAgfVxuXG4gICAgLy8gQWx3YXlzIHVwZGF0ZSBTU0FPIHRvIG1ha2Ugc3VyZSBoYXZlIGNvcnJlY3Qgc3Nhb01hcCBzdGF0dXNcbiAgICAvLyBUT0RPIFRSQU5TUEFSRU5UIE9CSkVDVFMuXG4gICAgdGhpcy5fdXBkYXRlU1NBTyhyZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgYWNjdW11bGF0aW5nID8gdGhpcy5fdGVtcG9yYWxTUy5nZXRGcmFtZSgpIDogMCk7XG5cbiAgICB2YXIgZnJhbWVCdWZmZXI7XG5cbiAgICB2YXIgbmVlZFRlbXBvcmFsUGFzcyA9IHRoaXMubmVlZHNUZW1wb3JhbFNTKCkgJiYgKHRoaXMuX3RlbXBvcmFsU3VwcG9ydER5bmFtaWMgfHwgYWNjdW11bGF0aW5nKTtcbiAgICB2YXIgbmVlZFBvc3RFZmZlY3QgPSB0aGlzLl9lbmFibGVQb3N0RWZmZWN0O1xuXG4gICAgaWYgKCFuZWVkVGVtcG9yYWxQYXNzICYmICFuZWVkUG9zdEVmZmVjdCkge1xuICAgICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSwgdHJ1ZSwgdGhpcy5wcmVaKTtcbiAgICAgICAgdGhpcy5hZnRlclJlbmRlclNjZW5lKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBpc1NTUkVuYWJsZWQgPSB0aGlzLl9jb21wb3NpdG9yLmlzU1NSRW5hYmxlZCgpO1xuXG4gICAgICAgIHZhciBzb3VyY2VUZXggPSB0aGlzLl9zb3VyY2VUZXg7XG4gICAgICAgIHZhciBkZXB0aFRleCA9IHRoaXMuX2RlcHRoVGV4O1xuICAgICAgICB2YXIgZnJhbWVCdWZmZXIgPSB0aGlzLl9mcmFtZWJ1ZmZlcjtcbiAgICAgICAgZGVwdGhUZXgud2lkdGggPSBzb3VyY2VUZXgud2lkdGggPSByZW5kZXJlci5nZXRXaWR0aCgpO1xuICAgICAgICBkZXB0aFRleC5oZWlnaHQgPSBzb3VyY2VUZXguaGVpZ2h0ID0gcmVuZGVyZXIuZ2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgZnJhbWVCdWZmZXIuYXR0YWNoKHNvdXJjZVRleCk7XG4gICAgICAgIGZyYW1lQnVmZmVyLmF0dGFjaChkZXB0aFRleCwgRnJhbWVCdWZmZXIuREVQVEhfQVRUQUNITUVOVCk7XG4gICAgICAgIGZyYW1lQnVmZmVyLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICByZW5kZXJlci5nbC5jbGVhcihyZW5kZXJlci5nbC5ERVBUSF9CVUZGRVJfQklUIHwgcmVuZGVyZXIuZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG4gICAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhLCB0cnVlLCB0aGlzLnByZVopO1xuICAgICAgICB0aGlzLmFmdGVyUmVuZGVyU2NlbmUocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEpO1xuICAgICAgICBmcmFtZUJ1ZmZlci51bmJpbmQocmVuZGVyZXIpO1xuXG4gICAgICAgIGlmIChpc1NTUkVuYWJsZWQgJiYgbmVlZFBvc3RFZmZlY3QpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBvc2l0b3IudXBkYXRlU1NSKFxuICAgICAgICAgICAgICAgIHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLFxuICAgICAgICAgICAgICAgIHNvdXJjZVRleCxcbiAgICAgICAgICAgICAgICAvLyBUT0RPIHJlcHJvamVjdGlvblxuICAgICAgICAgICAgICAgIHNvdXJjZVRleCxcbiAgICAgICAgICAgICAgICAvLyBuZWVkVGVtcG9yYWxQYXNzID8gdGhpcy5fdGVtcG9yYWxTUy5nZXRUYXJnZXRUZXh0dXJlKCkgOiBzb3VyY2VUZXgsXG4gICAgICAgICAgICAgICAgdGhpcy5fdGVtcG9yYWxTUy5nZXRGcmFtZSgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgc291cmNlVGV4ID0gdGhpcy5fY29tcG9zaXRvci5nZXRTU1JUZXh0dXJlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmVlZFRlbXBvcmFsUGFzcykge1xuICAgICAgICAgICAgdmFyIGRpcmVjdE91dHB1dCA9ICFuZWVkUG9zdEVmZmVjdDtcbiAgICAgICAgICAgIHRoaXMuX3RlbXBvcmFsU1MucmVuZGVyKHJlbmRlcmVyLCBjYW1lcmEsIHNvdXJjZVRleCwgYWNjdW11bGF0aW5nLCBkaXJlY3RPdXRwdXQpO1xuICAgICAgICAgICAgc291cmNlVGV4ID0gdGhpcy5fdGVtcG9yYWxTUy5nZXRUYXJnZXRUZXh0dXJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5lZWRQb3N0RWZmZWN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jb21wb3NpdG9yLmNvbXBvc2l0ZShcbiAgICAgICAgICAgICAgICByZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgc291cmNlVGV4LCBkZXB0aFRleCxcbiAgICAgICAgICAgICAgICBuZWVkVGVtcG9yYWxQYXNzID8gdGhpcy5fdGVtcG9yYWxTUy5nZXRGcmFtZSgpIDogMCxcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRpbmdcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmFmdGVyUmVuZGVyQWxsKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKTtcbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLl91cGRhdGVTUkdCT2ZMaXN0ID0gZnVuY3Rpb24gKGxpc3QpIHtcbiAgICB2YXIgaXNMaW5lYXJTcGFjZSA9IHRoaXMuaXNMaW5lYXJTcGFjZSgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBsaXN0W2ldLm1hdGVyaWFsW2lzTGluZWFyU3BhY2UgPyAnZGVmaW5lJyA6ICd1bmRlZmluZSddKCdmcmFnbWVudCcsICdTUkdCX0RFQ09ERScpO1xuICAgIH07XG59O1xuXG5SZW5kZXJNYWluLnByb3RvdHlwZS5hZnRlclJlbmRlclNjZW5lID0gZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKSB7fTtcblJlbmRlck1haW4ucHJvdG90eXBlLmFmdGVyUmVuZGVyQWxsID0gZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKSB7fTtcblxuUmVuZGVyTWFpbi5wcm90b3R5cGUuX3VwZGF0ZVNTQU8gPSBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIGZyYW1lKSB7XG4gICAgdmFyIGlmRW5hYmxlU1NBTyA9IHRoaXMuX2VuYWJsZVNTQU8gJiYgdGhpcy5fZW5hYmxlUG9zdEVmZmVjdDtcbiAgICB2YXIgY29tcG9zaXRvciA9IHRoaXMuX2NvbXBvc2l0b3I7XG4gICAgaWYgKGlmRW5hYmxlU1NBTykge1xuICAgICAgICB0aGlzLl9jb21wb3NpdG9yLnVwZGF0ZVNTQU8ocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIHRoaXMuX3RlbXBvcmFsU1MuZ2V0RnJhbWUoKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlUXVldWUocXVldWUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHJlbmRlcmFibGUgPSBxdWV1ZVtpXTtcbiAgICAgICAgICAgIHJlbmRlcmFibGUubWF0ZXJpYWxbaWZFbmFibGVTU0FPID8gJ2VuYWJsZVRleHR1cmUnIDogJ2Rpc2FibGVUZXh0dXJlJ10oJ3NzYW9NYXAnKTtcbiAgICAgICAgICAgIGlmIChpZkVuYWJsZVNTQU8pIHtcbiAgICAgICAgICAgICAgICByZW5kZXJhYmxlLm1hdGVyaWFsLnNldCgnc3Nhb01hcCcsIGNvbXBvc2l0b3IuZ2V0U1NBT1RleHR1cmUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlUXVldWUoc2NlbmUuZ2V0UmVuZGVyTGlzdChjYW1lcmEpLm9wYXF1ZSk7XG4gICAgdXBkYXRlUXVldWUoc2NlbmUuZ2V0UmVuZGVyTGlzdChjYW1lcmEpLnRyYW5zcGFyZW50KTtcbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLl91cGRhdGVTaGFkb3dQQ0ZLZXJuZWwgPSBmdW5jdGlvbiAoc2NlbmUsIGNhbWVyYSwgZnJhbWUpIHtcbiAgICB2YXIgcGNmS2VybmVsID0gdGhpcy5fcGNmS2VybmVsc1tmcmFtZSAlIHRoaXMuX3BjZktlcm5lbHMubGVuZ3RoXTtcbiAgICBmdW5jdGlvbiB1cGRhdGVRdWV1ZShxdWV1ZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocXVldWVbaV0ucmVjZWl2ZVNoYWRvdykge1xuICAgICAgICAgICAgICAgIHF1ZXVlW2ldLm1hdGVyaWFsLnNldCgncGNmS2VybmVsJywgcGNmS2VybmVsKTtcbiAgICAgICAgICAgICAgICBpZiAocXVldWVbaV0ubWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWVbaV0ubWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdQQ0ZfS0VSTkVMX1NJWkUnLCBwY2ZLZXJuZWwubGVuZ3RoIC8gMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXVlKHNjZW5lLmdldFJlbmRlckxpc3QoY2FtZXJhKS5vcGFxdWUpO1xuICAgIHVwZGF0ZVF1ZXVlKHNjZW5lLmdldFJlbmRlckxpc3QoY2FtZXJhKS50cmFuc3BhcmVudCk7XG59O1xuXG5SZW5kZXJNYWluLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XG4gICAgdGhpcy5fY29tcG9zaXRvci5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICB0aGlzLl90ZW1wb3JhbFNTLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgIGlmICh0aGlzLl9zaGFkb3dNYXBQYXNzKSB7XG4gICAgICAgIHRoaXMuX3NoYWRvd01hcFBhc3MuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgfVxuICAgIHJlbmRlcmVyLmRpc3Bvc2UoKTtcbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLnNldFBvc3RFZmZlY3QgPSBmdW5jdGlvbiAob3B0cywgYXBpKSB7XG4gICAgdmFyIGNvbXBvc2l0b3IgPSB0aGlzLl9jb21wb3NpdG9yO1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIHRoaXMuX2VuYWJsZVBvc3RFZmZlY3QgPSAhIW9wdHMuZW5hYmxlO1xuICAgIHZhciBibG9vbU9wdHMgPSBvcHRzLmJsb29tIHx8IHt9O1xuICAgIHZhciBlZGdlT3B0cyA9IG9wdHMuZWRnZSB8fCB7fTtcbiAgICB2YXIgZG9mT3B0cyA9IG9wdHMuZGVwdGhPZkZpZWxkIHx8IHt9O1xuICAgIHZhciBzc2FvT3B0cyA9IG9wdHMuc2NyZWVuU3BhY2VBbWJpZW50T2NjbHVzaW9uIHx8IHt9O1xuICAgIHZhciBzc3JPcHRzID0gb3B0cy5zY3JlZW5TcGFjZVJlZmxlY3Rpb24gfHwge307XG4gICAgdmFyIGZ4YWFPcHRzID0gb3B0cy5GWEFBIHx8IHt9O1xuICAgIHZhciBjb2xvckNvcnJPcHRzID0gb3B0cy5jb2xvckNvcnJlY3Rpb24gfHwge307XG4gICAgYmxvb21PcHRzLmVuYWJsZSA/IGNvbXBvc2l0b3IuZW5hYmxlQmxvb20oKSA6IGNvbXBvc2l0b3IuZGlzYWJsZUJsb29tKCk7XG4gICAgZG9mT3B0cy5lbmFibGUgPyBjb21wb3NpdG9yLmVuYWJsZURPRigpIDogY29tcG9zaXRvci5kaXNhYmxlRE9GKCk7XG4gICAgc3NyT3B0cy5lbmFibGUgPyBjb21wb3NpdG9yLmVuYWJsZVNTUigpIDogY29tcG9zaXRvci5kaXNhYmxlU1NSKCk7XG4gICAgY29sb3JDb3JyT3B0cy5lbmFibGUgPyBjb21wb3NpdG9yLmVuYWJsZUNvbG9yQ29ycmVjdGlvbigpIDogY29tcG9zaXRvci5kaXNhYmxlQ29sb3JDb3JyZWN0aW9uKCk7XG4gICAgZWRnZU9wdHMuZW5hYmxlID8gY29tcG9zaXRvci5lbmFibGVFZGdlKCkgOiBjb21wb3NpdG9yLmRpc2FibGVFZGdlKCk7XG4gICAgZnhhYU9wdHMuZW5hYmxlID8gY29tcG9zaXRvci5lbmFibGVGWEFBKCkgOiBjb21wb3NpdG9yLmRpc2FibGVGWEFBKCk7XG5cbiAgICB0aGlzLl9lbmFibGVET0YgPSBkb2ZPcHRzLmVuYWJsZTtcbiAgICB0aGlzLl9lbmFibGVTU0FPID0gc3Nhb09wdHMuZW5hYmxlO1xuXG4gICAgdGhpcy5fZW5hYmxlU1NBTyA/IGNvbXBvc2l0b3IuZW5hYmxlU1NBTygpIDogY29tcG9zaXRvci5kaXNhYmxlU1NBTygpO1xuXG4gICAgY29tcG9zaXRvci5zZXRCbG9vbUludGVuc2l0eShibG9vbU9wdHMuaW50ZW5zaXR5KTtcbiAgICBjb21wb3NpdG9yLnNldEVkZ2VDb2xvcihlZGdlT3B0cy5jb2xvcik7XG4gICAgY29tcG9zaXRvci5zZXRDb2xvckxvb2t1cFRleHR1cmUoY29sb3JDb3JyT3B0cy5sb29rdXBUZXh0dXJlLCBhcGkpO1xuICAgIGNvbXBvc2l0b3Iuc2V0RXhwb3N1cmUoY29sb3JDb3JyT3B0cy5leHBvc3VyZSk7XG5cbiAgICBbJ3JhZGl1cycsICdxdWFsaXR5JywgJ2ludGVuc2l0eScsICd0ZW1wb3JhbEZpbHRlciddLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgY29tcG9zaXRvci5zZXRTU0FPUGFyYW1ldGVyKG5hbWUsIHNzYW9PcHRzW25hbWVdKTtcbiAgICB9KTtcbiAgICBbJ3F1YWxpdHknLCAnbWF4Um91Z2huZXNzJ10uZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBjb21wb3NpdG9yLnNldFNTUlBhcmFtZXRlcihuYW1lLCBzc3JPcHRzW25hbWVdKTtcbiAgICB9KTtcbiAgICBbJ3F1YWxpdHknLCAnZm9jYWxEaXN0YW5jZScsICdmb2NhbFJhbmdlJywgJ2JsdXJSYWRpdXMnLCAnYXBlcnR1cmUnXS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGNvbXBvc2l0b3Iuc2V0RE9GUGFyYW1ldGVyKG5hbWUsIGRvZk9wdHNbbmFtZV0pO1xuICAgIH0pO1xuICAgIFsnYnJpZ2h0bmVzcycsICdjb250cmFzdCcsICdzYXR1cmF0aW9uJ10uZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBjb21wb3NpdG9yLnNldENvbG9yQ29ycmVjdGlvbihuYW1lLCBjb2xvckNvcnJPcHRzW25hbWVdKTtcbiAgICB9KTtcbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLnNldFNoYWRvdyA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgdmFyIHBjZktlcm5lbHMgPSBbXTtcbiAgICB2YXIgb2ZmID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDMwOyBpKyspIHtcbiAgICAgICAgdmFyIHBjZktlcm5lbCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG9wdHMua2VybmVsU2l6ZTsgaysrKSB7XG4gICAgICAgICAgICBwY2ZLZXJuZWwucHVzaCgoaGFsdG9uKG9mZiwgMikgKiAyLjAgLSAxLjApICogb3B0cy5ibHVyU2l6ZSk7XG4gICAgICAgICAgICBwY2ZLZXJuZWwucHVzaCgoaGFsdG9uKG9mZiwgMykgKiAyLjAgLSAxLjApICogb3B0cy5ibHVyU2l6ZSk7XG4gICAgICAgICAgICBvZmYrKztcbiAgICAgICAgfVxuICAgICAgICBwY2ZLZXJuZWxzLnB1c2gocGNmS2VybmVsKTtcbiAgICB9XG4gICAgdGhpcy5fcGNmS2VybmVscyA9IHBjZktlcm5lbHM7XG59O1xuXG5SZW5kZXJNYWluLnByb3RvdHlwZS5pc0RPRkVuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VuYWJsZVBvc3RFZmZlY3QgJiYgdGhpcy5fZW5hYmxlRE9GO1xufTtcblxuUmVuZGVyTWFpbi5wcm90b3R5cGUuc2V0RE9GRm9jdXNPblBvaW50ID0gZnVuY3Rpb24gKGRlcHRoKSB7XG4gICAgaWYgKHRoaXMuX2VuYWJsZVBvc3RFZmZlY3QpIHtcblxuICAgICAgICBpZiAoZGVwdGggPiB0aGlzLmNhbWVyYS5mYXIgfHwgZGVwdGggPCB0aGlzLmNhbWVyYS5uZWFyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jb21wb3NpdG9yLnNldERPRlBhcmFtZXRlcignZm9jYWxEaXN0YW5jZScsIGRlcHRoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufTtcblxuUmVuZGVyTWFpbi5wcm90b3R5cGUuc2V0VGVtcG9yYWxTdXBlclNhbXBsaW5nID0gZnVuY3Rpb24gKHRlbXBvcmFsU3VwZXJTYW1wbGluZ09wdCkge1xuICAgIHRlbXBvcmFsU3VwZXJTYW1wbGluZ09wdCA9IHRlbXBvcmFsU3VwZXJTYW1wbGluZ09wdCB8fCB7fTtcbiAgICB0aGlzLl9lbmFibGVUZW1wb3JhbFNTID0gdGVtcG9yYWxTdXBlclNhbXBsaW5nT3B0LmVuYWJsZTtcbiAgICB0aGlzLl90ZW1wb3JhbFN1cHBvcnREeW5hbWljID0gdGVtcG9yYWxTdXBlclNhbXBsaW5nT3B0LmR5bmFtaWM7XG5cbiAgICBpZiAodGhpcy5fZW5hYmxlVGVtcG9yYWxTUyAmJiB0aGlzLl90ZW1wb3JhbFN1cHBvcnREeW5hbWljKSB7XG4gICAgICAgIHRoaXMuX2NvbXBvc2l0b3IuZW5hYmxlVmVsb2NpdHlCdWZmZXIoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMuX2NvbXBvc2l0b3IuZGlzYWJsZVZlbG9jaXR5QnVmZmVyKCk7XG4gICAgfVxufTtcblxuUmVuZGVyTWFpbi5wcm90b3R5cGUuaXNMaW5lYXJTcGFjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fZW5hYmxlUG9zdEVmZmVjdDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlck1haW47XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsLWFkdmFuY2VkLXJlbmRlcmVyL3NyYy9SZW5kZXJNYWluLmpzXG4vLyBtb2R1bGUgaWQgPSAxMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///126\n");

/***/ }),
/* 127 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Clip__ = __webpack_require__(30);\n// 1D Blend clip of blend tree\n// http://docs.unity3d.com/Documentation/Manual/1DBlending.html\n\n\n\nvar clipSortFunc = function (a, b) {\n    return a.position < b.position;\n};\n\n/**\n * @typedef {Object} clay.animation.Blend1DClip.IClipInput\n * @property {number} position\n * @property {clay.animation.Clip} clip\n * @property {number} offset\n */\n\n/**\n * 1d blending node in animation blend tree.\n * output clip must have blend1D and copy method\n * @constructor\n * @alias clay.animation.Blend1DClip\n * @extends clay.animation.Clip\n *\n * @param {Object} [opts]\n * @param {string} [opts.name]\n * @param {Object} [opts.target]\n * @param {number} [opts.life]\n * @param {number} [opts.delay]\n * @param {number} [opts.gap]\n * @param {number} [opts.playbackRatio]\n * @param {boolean|number} [opts.loop] If loop is a number, it indicate the loop count of animation\n * @param {string|Function} [opts.easing]\n * @param {Function} [opts.onframe]\n * @param {Function} [opts.onfinish]\n * @param {Function} [opts.onrestart]\n * @param {object[]} [opts.inputs]\n * @param {number} [opts.position]\n * @param {clay.animation.Clip} [opts.output]\n */\nvar Blend1DClip = function (opts) {\n\n    opts = opts || {};\n\n    __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].call(this, opts);\n    /**\n     * Output clip must have blend1D and copy method\n     * @type {clay.animation.Clip}\n     */\n    this.output = opts.output || null;\n    /**\n     * @type {clay.animation.Blend1DClip.IClipInput[]}\n     */\n    this.inputs = opts.inputs || [];\n    /**\n     * @type {number}\n     */\n    this.position = 0;\n\n    this._cacheKey = 0;\n    this._cachePosition = -Infinity;\n\n    this.inputs.sort(clipSortFunc);\n};\n\nBlend1DClip.prototype = new __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */]();\nBlend1DClip.prototype.constructor = Blend1DClip;\n\n/**\n * @param {number} position\n * @param {clay.animation.Clip} inputClip\n * @param {number} [offset]\n * @return {clay.animation.Blend1DClip.IClipInput}\n */\nBlend1DClip.prototype.addInput = function (position, inputClip, offset) {\n    var obj = {\n        position: position,\n        clip: inputClip,\n        offset: offset || 0\n    };\n    this.life = Math.max(inputClip.life, this.life);\n\n    if (!this.inputs.length) {\n        this.inputs.push(obj);\n        return obj;\n    }\n    var len = this.inputs.length;\n    if (this.inputs[0].position > position) {\n        this.inputs.unshift(obj);\n    } else if (this.inputs[len - 1].position <= position) {\n        this.inputs.push(obj);\n    } else {\n        var key = this._findKey(position);\n        this.inputs.splice(key, obj);\n    }\n\n    return obj;\n};\n\nBlend1DClip.prototype.step = function (time, dTime, silent) {\n\n    var ret = __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].prototype.step.call(this, time);\n\n    if (ret !== 'finish') {\n        this.setTime(this.getElapsedTime());\n    }\n\n    // PENDING Schedule\n    if (!silent && ret !== 'paused') {\n        this.fire('frame');\n    }\n    return ret;\n};\n\nBlend1DClip.prototype.setTime = function (time) {\n    var position = this.position;\n    var inputs = this.inputs;\n    var len = inputs.length;\n    var min = inputs[0].position;\n    var max = inputs[len-1].position;\n\n    if (position <= min || position >= max) {\n        var in0 = position <= min ? inputs[0] : inputs[len-1];\n        var clip = in0.clip;\n        var offset = in0.offset;\n        clip.setTime((time + offset) % clip.life);\n        // Input clip is a blend clip\n        // PENDING\n        if (clip.output instanceof __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */]) {\n            this.output.copy(clip.output);\n        } else {\n            this.output.copy(clip);\n        }\n    } else {\n        var key = this._findKey(position);\n        var in1 = inputs[key];\n        var in2 = inputs[key + 1];\n        var clip1 = in1.clip;\n        var clip2 = in2.clip;\n        // Set time on input clips\n        clip1.setTime((time + in1.offset) % clip1.life);\n        clip2.setTime((time + in2.offset) % clip2.life);\n\n        var w = (this.position - in1.position) / (in2.position - in1.position);\n\n        var c1 = clip1.output instanceof __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */] ? clip1.output : clip1;\n        var c2 = clip2.output instanceof __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */] ? clip2.output : clip2;\n        this.output.blend1D(c1, c2, w);\n    }\n};\n\n/**\n * Clone a new Blend1D clip\n * @param {boolean} cloneInputs True if clone the input clips\n * @return {clay.animation.Blend1DClip}\n */\nBlend1DClip.prototype.clone = function (cloneInputs) {\n    var clip = __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].prototype.clone.call(this);\n    clip.output = this.output.clone();\n    for (var i = 0; i < this.inputs.length; i++) {\n        var inputClip = cloneInputs ? this.inputs[i].clip.clone(true) : this.inputs[i].clip;\n        clip.addInput(this.inputs[i].position, inputClip, this.inputs[i].offset);\n    }\n    return clip;\n};\n\n// Find the key where position in range [inputs[key].position, inputs[key+1].position)\nBlend1DClip.prototype._findKey = function (position) {\n    var key = -1;\n    var inputs = this.inputs;\n    var len = inputs.length;\n    if (this._cachePosition < position) {\n        for (var i = this._cacheKey; i < len-1; i++) {\n            if (position >= inputs[i].position && position < inputs[i+1].position) {\n                key = i;\n            }\n        }\n    } else {\n        var s = Math.min(len-2, this._cacheKey);\n        for (var i = s; i >= 0; i--) {\n            if (position >= inputs[i].position && position < inputs[i+1].position) {\n                key = i;\n            }\n        }\n    }\n    if (key >= 0) {\n        this._cacheKey = key;\n        this._cachePosition = position;\n    }\n\n    return key;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Blend1DClip);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvYW5pbWF0aW9uL0JsZW5kMURDbGlwLmpzPzIxNjYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gMUQgQmxlbmQgY2xpcCBvZiBibGVuZCB0cmVlXG4vLyBodHRwOi8vZG9jcy51bml0eTNkLmNvbS9Eb2N1bWVudGF0aW9uL01hbnVhbC8xREJsZW5kaW5nLmh0bWxcblxuaW1wb3J0IENsaXAgZnJvbSAnLi9DbGlwJztcblxudmFyIGNsaXBTb3J0RnVuYyA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGEucG9zaXRpb24gPCBiLnBvc2l0aW9uO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBjbGF5LmFuaW1hdGlvbi5CbGVuZDFEQ2xpcC5JQ2xpcElucHV0XG4gKiBAcHJvcGVydHkge251bWJlcn0gcG9zaXRpb25cbiAqIEBwcm9wZXJ0eSB7Y2xheS5hbmltYXRpb24uQ2xpcH0gY2xpcFxuICogQHByb3BlcnR5IHtudW1iZXJ9IG9mZnNldFxuICovXG5cbi8qKlxuICogMWQgYmxlbmRpbmcgbm9kZSBpbiBhbmltYXRpb24gYmxlbmQgdHJlZS5cbiAqIG91dHB1dCBjbGlwIG11c3QgaGF2ZSBibGVuZDFEIGFuZCBjb3B5IG1ldGhvZFxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5hbmltYXRpb24uQmxlbmQxRENsaXBcbiAqIEBleHRlbmRzIGNsYXkuYW5pbWF0aW9uLkNsaXBcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHNdXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubmFtZV1cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy50YXJnZXRdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMubGlmZV1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5kZWxheV1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5nYXBdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMucGxheWJhY2tSYXRpb11cbiAqIEBwYXJhbSB7Ym9vbGVhbnxudW1iZXJ9IFtvcHRzLmxvb3BdIElmIGxvb3AgaXMgYSBudW1iZXIsIGl0IGluZGljYXRlIHRoZSBsb29wIGNvdW50IG9mIGFuaW1hdGlvblxuICogQHBhcmFtIHtzdHJpbmd8RnVuY3Rpb259IFtvcHRzLmVhc2luZ11cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLm9uZnJhbWVdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5vbmZpbmlzaF1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLm9ucmVzdGFydF1cbiAqIEBwYXJhbSB7b2JqZWN0W119IFtvcHRzLmlucHV0c11cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5wb3NpdGlvbl1cbiAqIEBwYXJhbSB7Y2xheS5hbmltYXRpb24uQ2xpcH0gW29wdHMub3V0cHV0XVxuICovXG52YXIgQmxlbmQxRENsaXAgPSBmdW5jdGlvbiAob3B0cykge1xuXG4gICAgb3B0cyA9IG9wdHMgfHwge307XG5cbiAgICBDbGlwLmNhbGwodGhpcywgb3B0cyk7XG4gICAgLyoqXG4gICAgICogT3V0cHV0IGNsaXAgbXVzdCBoYXZlIGJsZW5kMUQgYW5kIGNvcHkgbWV0aG9kXG4gICAgICogQHR5cGUge2NsYXkuYW5pbWF0aW9uLkNsaXB9XG4gICAgICovXG4gICAgdGhpcy5vdXRwdXQgPSBvcHRzLm91dHB1dCB8fCBudWxsO1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5LmFuaW1hdGlvbi5CbGVuZDFEQ2xpcC5JQ2xpcElucHV0W119XG4gICAgICovXG4gICAgdGhpcy5pbnB1dHMgPSBvcHRzLmlucHV0cyB8fCBbXTtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucG9zaXRpb24gPSAwO1xuXG4gICAgdGhpcy5fY2FjaGVLZXkgPSAwO1xuICAgIHRoaXMuX2NhY2hlUG9zaXRpb24gPSAtSW5maW5pdHk7XG5cbiAgICB0aGlzLmlucHV0cy5zb3J0KGNsaXBTb3J0RnVuYyk7XG59O1xuXG5CbGVuZDFEQ2xpcC5wcm90b3R5cGUgPSBuZXcgQ2xpcCgpO1xuQmxlbmQxRENsaXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmxlbmQxRENsaXA7XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHBvc2l0aW9uXG4gKiBAcGFyYW0ge2NsYXkuYW5pbWF0aW9uLkNsaXB9IGlucHV0Q2xpcFxuICogQHBhcmFtIHtudW1iZXJ9IFtvZmZzZXRdXG4gKiBAcmV0dXJuIHtjbGF5LmFuaW1hdGlvbi5CbGVuZDFEQ2xpcC5JQ2xpcElucHV0fVxuICovXG5CbGVuZDFEQ2xpcC5wcm90b3R5cGUuYWRkSW5wdXQgPSBmdW5jdGlvbiAocG9zaXRpb24sIGlucHV0Q2xpcCwgb2Zmc2V0KSB7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgICBjbGlwOiBpbnB1dENsaXAsXG4gICAgICAgIG9mZnNldDogb2Zmc2V0IHx8IDBcbiAgICB9O1xuICAgIHRoaXMubGlmZSA9IE1hdGgubWF4KGlucHV0Q2xpcC5saWZlLCB0aGlzLmxpZmUpO1xuXG4gICAgaWYgKCF0aGlzLmlucHV0cy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5pbnB1dHMucHVzaChvYmopO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgICB2YXIgbGVuID0gdGhpcy5pbnB1dHMubGVuZ3RoO1xuICAgIGlmICh0aGlzLmlucHV0c1swXS5wb3NpdGlvbiA+IHBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMuaW5wdXRzLnVuc2hpZnQob2JqKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5wdXRzW2xlbiAtIDFdLnBvc2l0aW9uIDw9IHBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMuaW5wdXRzLnB1c2gob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5fZmluZEtleShwb3NpdGlvbik7XG4gICAgICAgIHRoaXMuaW5wdXRzLnNwbGljZShrZXksIG9iaik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iajtcbn07XG5cbkJsZW5kMURDbGlwLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKHRpbWUsIGRUaW1lLCBzaWxlbnQpIHtcblxuICAgIHZhciByZXQgPSBDbGlwLnByb3RvdHlwZS5zdGVwLmNhbGwodGhpcywgdGltZSk7XG5cbiAgICBpZiAocmV0ICE9PSAnZmluaXNoJykge1xuICAgICAgICB0aGlzLnNldFRpbWUodGhpcy5nZXRFbGFwc2VkVGltZSgpKTtcbiAgICB9XG5cbiAgICAvLyBQRU5ESU5HIFNjaGVkdWxlXG4gICAgaWYgKCFzaWxlbnQgJiYgcmV0ICE9PSAncGF1c2VkJykge1xuICAgICAgICB0aGlzLmZpcmUoJ2ZyYW1lJyk7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuXG5CbGVuZDFEQ2xpcC5wcm90b3R5cGUuc2V0VGltZSA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gICAgdmFyIHBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbjtcbiAgICB2YXIgaW5wdXRzID0gdGhpcy5pbnB1dHM7XG4gICAgdmFyIGxlbiA9IGlucHV0cy5sZW5ndGg7XG4gICAgdmFyIG1pbiA9IGlucHV0c1swXS5wb3NpdGlvbjtcbiAgICB2YXIgbWF4ID0gaW5wdXRzW2xlbi0xXS5wb3NpdGlvbjtcblxuICAgIGlmIChwb3NpdGlvbiA8PSBtaW4gfHwgcG9zaXRpb24gPj0gbWF4KSB7XG4gICAgICAgIHZhciBpbjAgPSBwb3NpdGlvbiA8PSBtaW4gPyBpbnB1dHNbMF0gOiBpbnB1dHNbbGVuLTFdO1xuICAgICAgICB2YXIgY2xpcCA9IGluMC5jbGlwO1xuICAgICAgICB2YXIgb2Zmc2V0ID0gaW4wLm9mZnNldDtcbiAgICAgICAgY2xpcC5zZXRUaW1lKCh0aW1lICsgb2Zmc2V0KSAlIGNsaXAubGlmZSk7XG4gICAgICAgIC8vIElucHV0IGNsaXAgaXMgYSBibGVuZCBjbGlwXG4gICAgICAgIC8vIFBFTkRJTkdcbiAgICAgICAgaWYgKGNsaXAub3V0cHV0IGluc3RhbmNlb2YgQ2xpcCkge1xuICAgICAgICAgICAgdGhpcy5vdXRwdXQuY29weShjbGlwLm91dHB1dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm91dHB1dC5jb3B5KGNsaXApO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGtleSA9IHRoaXMuX2ZpbmRLZXkocG9zaXRpb24pO1xuICAgICAgICB2YXIgaW4xID0gaW5wdXRzW2tleV07XG4gICAgICAgIHZhciBpbjIgPSBpbnB1dHNba2V5ICsgMV07XG4gICAgICAgIHZhciBjbGlwMSA9IGluMS5jbGlwO1xuICAgICAgICB2YXIgY2xpcDIgPSBpbjIuY2xpcDtcbiAgICAgICAgLy8gU2V0IHRpbWUgb24gaW5wdXQgY2xpcHNcbiAgICAgICAgY2xpcDEuc2V0VGltZSgodGltZSArIGluMS5vZmZzZXQpICUgY2xpcDEubGlmZSk7XG4gICAgICAgIGNsaXAyLnNldFRpbWUoKHRpbWUgKyBpbjIub2Zmc2V0KSAlIGNsaXAyLmxpZmUpO1xuXG4gICAgICAgIHZhciB3ID0gKHRoaXMucG9zaXRpb24gLSBpbjEucG9zaXRpb24pIC8gKGluMi5wb3NpdGlvbiAtIGluMS5wb3NpdGlvbik7XG5cbiAgICAgICAgdmFyIGMxID0gY2xpcDEub3V0cHV0IGluc3RhbmNlb2YgQ2xpcCA/IGNsaXAxLm91dHB1dCA6IGNsaXAxO1xuICAgICAgICB2YXIgYzIgPSBjbGlwMi5vdXRwdXQgaW5zdGFuY2VvZiBDbGlwID8gY2xpcDIub3V0cHV0IDogY2xpcDI7XG4gICAgICAgIHRoaXMub3V0cHV0LmJsZW5kMUQoYzEsIGMyLCB3KTtcbiAgICB9XG59O1xuXG4vKipcbiAqIENsb25lIGEgbmV3IEJsZW5kMUQgY2xpcFxuICogQHBhcmFtIHtib29sZWFufSBjbG9uZUlucHV0cyBUcnVlIGlmIGNsb25lIHRoZSBpbnB1dCBjbGlwc1xuICogQHJldHVybiB7Y2xheS5hbmltYXRpb24uQmxlbmQxRENsaXB9XG4gKi9cbkJsZW5kMURDbGlwLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uIChjbG9uZUlucHV0cykge1xuICAgIHZhciBjbGlwID0gQ2xpcC5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTtcbiAgICBjbGlwLm91dHB1dCA9IHRoaXMub3V0cHV0LmNsb25lKCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmlucHV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgaW5wdXRDbGlwID0gY2xvbmVJbnB1dHMgPyB0aGlzLmlucHV0c1tpXS5jbGlwLmNsb25lKHRydWUpIDogdGhpcy5pbnB1dHNbaV0uY2xpcDtcbiAgICAgICAgY2xpcC5hZGRJbnB1dCh0aGlzLmlucHV0c1tpXS5wb3NpdGlvbiwgaW5wdXRDbGlwLCB0aGlzLmlucHV0c1tpXS5vZmZzZXQpO1xuICAgIH1cbiAgICByZXR1cm4gY2xpcDtcbn07XG5cbi8vIEZpbmQgdGhlIGtleSB3aGVyZSBwb3NpdGlvbiBpbiByYW5nZSBbaW5wdXRzW2tleV0ucG9zaXRpb24sIGlucHV0c1trZXkrMV0ucG9zaXRpb24pXG5CbGVuZDFEQ2xpcC5wcm90b3R5cGUuX2ZpbmRLZXkgPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICB2YXIga2V5ID0gLTE7XG4gICAgdmFyIGlucHV0cyA9IHRoaXMuaW5wdXRzO1xuICAgIHZhciBsZW4gPSBpbnB1dHMubGVuZ3RoO1xuICAgIGlmICh0aGlzLl9jYWNoZVBvc2l0aW9uIDwgcG9zaXRpb24pIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuX2NhY2hlS2V5OyBpIDwgbGVuLTE7IGkrKykge1xuICAgICAgICAgICAgaWYgKHBvc2l0aW9uID49IGlucHV0c1tpXS5wb3NpdGlvbiAmJiBwb3NpdGlvbiA8IGlucHV0c1tpKzFdLnBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBzID0gTWF0aC5taW4obGVuLTIsIHRoaXMuX2NhY2hlS2V5KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHM7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBpZiAocG9zaXRpb24gPj0gaW5wdXRzW2ldLnBvc2l0aW9uICYmIHBvc2l0aW9uIDwgaW5wdXRzW2krMV0ucG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChrZXkgPj0gMCkge1xuICAgICAgICB0aGlzLl9jYWNoZUtleSA9IGtleTtcbiAgICAgICAgdGhpcy5fY2FjaGVQb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIH1cblxuICAgIHJldHVybiBrZXk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBCbGVuZDFEQ2xpcDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2FuaW1hdGlvbi9CbGVuZDFEQ2xpcC5qc1xuLy8gbW9kdWxlIGlkID0gMTI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///127\n");

/***/ }),
/* 128 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Clip__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util_delaunay__ = __webpack_require__(71);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Vector2__ = __webpack_require__(26);\n// 2D Blend clip of blend tree\n// http://docs.unity3d.com/Documentation/Manual/2DBlending.html\n\n\n\n\n/**\n * @typedef {Object} clay.animation.Blend2DClip.IClipInput\n * @property {clay.Vector2} position\n * @property {clay.animation.Clip} clip\n * @property {number} offset\n */\n\n/**\n * 2d blending node in animation blend tree.\n * output clip must have blend2D method\n * @constructor\n * @alias clay.animation.Blend2DClip\n * @extends clay.animation.Clip\n *\n * @param {Object} [opts]\n * @param {string} [opts.name]\n * @param {Object} [opts.target]\n * @param {number} [opts.life]\n * @param {number} [opts.delay]\n * @param {number} [opts.gap]\n * @param {number} [opts.playbackRatio]\n * @param {boolean|number} [opts.loop] If loop is a number, it indicate the loop count of animation\n * @param {string|Function} [opts.easing]\n * @param {Function} [opts.onframe]\n * @param {Function} [opts.onfinish]\n * @param {Function} [opts.onrestart]\n * @param {object[]} [opts.inputs]\n * @param {clay.Vector2} [opts.position]\n * @param {clay.animation.Clip} [opts.output]\n */\nvar Blend2DClip = function (opts) {\n\n    opts = opts || {};\n\n    __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].call(this, opts);\n    /**\n     * Output clip must have blend2D method\n     * @type {clay.animation.Clip}\n     */\n    this.output = opts.output || null;\n    /**\n     * @type {clay.animation.Blend2DClip.IClipInput[]}\n     */\n    this.inputs = opts.inputs || [];\n    /**\n     * @type {clay.Vector2}\n     */\n    this.position = new __WEBPACK_IMPORTED_MODULE_2__math_Vector2__[\"a\" /* default */]();\n\n    this._cacheTriangle = null;\n\n    this._triangles = [];\n\n    this._updateTriangles();\n};\n\nBlend2DClip.prototype = new __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */]();\nBlend2DClip.prototype.constructor = Blend2DClip;\n/**\n * @param {clay.Vector2} position\n * @param {clay.animation.Clip} inputClip\n * @param {number} [offset]\n * @return {clay.animation.Blend2DClip.IClipInput}\n */\nBlend2DClip.prototype.addInput = function (position, inputClip, offset) {\n    var obj = {\n        position : position,\n        clip : inputClip,\n        offset : offset || 0\n    };\n    this.inputs.push(obj);\n    this.life = Math.max(inputClip.life, this.life);\n    // TODO Change to incrementally adding\n    this._updateTriangles();\n\n    return obj;\n};\n\n// Delaunay triangulate\nBlend2DClip.prototype._updateTriangles = function () {\n    var inputs = this.inputs.map(function (a) {\n        return a.position;\n    });\n    this._triangles = __WEBPACK_IMPORTED_MODULE_1__util_delaunay__[\"a\" /* default */].triangulate(inputs, 'array');\n};\n\nBlend2DClip.prototype.step = function (time, dTime, silent) {\n\n    var ret = __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].prototype.step.call(this, time);\n\n    if (ret !== 'finish') {\n        this.setTime(this.getElapsedTime());\n    }\n\n    // PENDING Schedule\n    if (!silent && ret !== 'paused') {\n        this.fire('frame');\n    }\n    return ret;\n};\n\nBlend2DClip.prototype.setTime = function (time) {\n    var res = this._findTriangle(this.position);\n    if (!res) {\n        return;\n    }\n    // In Barycentric\n    var a = res[1]; // Percent of clip2\n    var b = res[2]; // Percent of clip3\n\n    var tri = res[0];\n\n    var in1 = this.inputs[tri.indices[0]];\n    var in2 = this.inputs[tri.indices[1]];\n    var in3 = this.inputs[tri.indices[2]];\n    var clip1 = in1.clip;\n    var clip2 = in2.clip;\n    var clip3 = in3.clip;\n\n    clip1.setTime((time + in1.offset) % clip1.life);\n    clip2.setTime((time + in2.offset) % clip2.life);\n    clip3.setTime((time + in3.offset) % clip3.life);\n\n    var c1 = clip1.output instanceof __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */] ? clip1.output : clip1;\n    var c2 = clip2.output instanceof __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */] ? clip2.output : clip2;\n    var c3 = clip3.output instanceof __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */] ? clip3.output : clip3;\n\n    this.output.blend2D(c1, c2, c3, a, b);\n};\n\n/**\n * Clone a new Blend2D clip\n * @param {boolean} cloneInputs True if clone the input clips\n * @return {clay.animation.Blend2DClip}\n */\nBlend2DClip.prototype.clone = function (cloneInputs) {\n    var clip = __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].prototype.clone.call(this);\n    clip.output = this.output.clone();\n    for (var i = 0; i < this.inputs.length; i++) {\n        var inputClip = cloneInputs ? this.inputs[i].clip.clone(true) : this.inputs[i].clip;\n        clip.addInput(this.inputs[i].position, inputClip, this.inputs[i].offset);\n    }\n    return clip;\n};\n\nBlend2DClip.prototype._findTriangle = function (position) {\n    if (this._cacheTriangle) {\n        var res = __WEBPACK_IMPORTED_MODULE_1__util_delaunay__[\"a\" /* default */].contains(this._cacheTriangle.vertices, position.array);\n        if (res) {\n            return [this._cacheTriangle, res[0], res[1]];\n        }\n    }\n    for (var i = 0; i < this._triangles.length; i++) {\n        var tri = this._triangles[i];\n        var res = __WEBPACK_IMPORTED_MODULE_1__util_delaunay__[\"a\" /* default */].contains(tri.vertices, this.position.array);\n        if (res) {\n            this._cacheTriangle = tri;\n            return [tri, res[0], res[1]];\n        }\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Blend2DClip);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvYW5pbWF0aW9uL0JsZW5kMkRDbGlwLmpzP2VkMGUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gMkQgQmxlbmQgY2xpcCBvZiBibGVuZCB0cmVlXG4vLyBodHRwOi8vZG9jcy51bml0eTNkLmNvbS9Eb2N1bWVudGF0aW9uL01hbnVhbC8yREJsZW5kaW5nLmh0bWxcbmltcG9ydCBDbGlwIGZyb20gJy4vQ2xpcCc7XG5pbXBvcnQgZGVsYXVuYXkgZnJvbSAnLi4vdXRpbC9kZWxhdW5heSc7XG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi9tYXRoL1ZlY3RvcjInO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IGNsYXkuYW5pbWF0aW9uLkJsZW5kMkRDbGlwLklDbGlwSW5wdXRcbiAqIEBwcm9wZXJ0eSB7Y2xheS5WZWN0b3IyfSBwb3NpdGlvblxuICogQHByb3BlcnR5IHtjbGF5LmFuaW1hdGlvbi5DbGlwfSBjbGlwXG4gKiBAcHJvcGVydHkge251bWJlcn0gb2Zmc2V0XG4gKi9cblxuLyoqXG4gKiAyZCBibGVuZGluZyBub2RlIGluIGFuaW1hdGlvbiBibGVuZCB0cmVlLlxuICogb3V0cHV0IGNsaXAgbXVzdCBoYXZlIGJsZW5kMkQgbWV0aG9kXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5CbGVuZDJEQ2xpcFxuICogQGV4dGVuZHMgY2xheS5hbmltYXRpb24uQ2xpcFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c11cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5uYW1lXVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLnRhcmdldF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5saWZlXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmRlbGF5XVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmdhcF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5wbGF5YmFja1JhdGlvXVxuICogQHBhcmFtIHtib29sZWFufG51bWJlcn0gW29wdHMubG9vcF0gSWYgbG9vcCBpcyBhIG51bWJlciwgaXQgaW5kaWNhdGUgdGhlIGxvb3AgY291bnQgb2YgYW5pbWF0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xGdW5jdGlvbn0gW29wdHMuZWFzaW5nXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMub25mcmFtZV1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLm9uZmluaXNoXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMub25yZXN0YXJ0XVxuICogQHBhcmFtIHtvYmplY3RbXX0gW29wdHMuaW5wdXRzXVxuICogQHBhcmFtIHtjbGF5LlZlY3RvcjJ9IFtvcHRzLnBvc2l0aW9uXVxuICogQHBhcmFtIHtjbGF5LmFuaW1hdGlvbi5DbGlwfSBbb3B0cy5vdXRwdXRdXG4gKi9cbnZhciBCbGVuZDJEQ2xpcCA9IGZ1bmN0aW9uIChvcHRzKSB7XG5cbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICAgIENsaXAuY2FsbCh0aGlzLCBvcHRzKTtcbiAgICAvKipcbiAgICAgKiBPdXRwdXQgY2xpcCBtdXN0IGhhdmUgYmxlbmQyRCBtZXRob2RcbiAgICAgKiBAdHlwZSB7Y2xheS5hbmltYXRpb24uQ2xpcH1cbiAgICAgKi9cbiAgICB0aGlzLm91dHB1dCA9IG9wdHMub3V0cHV0IHx8IG51bGw7XG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuYW5pbWF0aW9uLkJsZW5kMkRDbGlwLklDbGlwSW5wdXRbXX1cbiAgICAgKi9cbiAgICB0aGlzLmlucHV0cyA9IG9wdHMuaW5wdXRzIHx8IFtdO1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWN0b3IyKCk7XG5cbiAgICB0aGlzLl9jYWNoZVRyaWFuZ2xlID0gbnVsbDtcblxuICAgIHRoaXMuX3RyaWFuZ2xlcyA9IFtdO1xuXG4gICAgdGhpcy5fdXBkYXRlVHJpYW5nbGVzKCk7XG59O1xuXG5CbGVuZDJEQ2xpcC5wcm90b3R5cGUgPSBuZXcgQ2xpcCgpO1xuQmxlbmQyRENsaXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmxlbmQyRENsaXA7XG4vKipcbiAqIEBwYXJhbSB7Y2xheS5WZWN0b3IyfSBwb3NpdGlvblxuICogQHBhcmFtIHtjbGF5LmFuaW1hdGlvbi5DbGlwfSBpbnB1dENsaXBcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb2Zmc2V0XVxuICogQHJldHVybiB7Y2xheS5hbmltYXRpb24uQmxlbmQyRENsaXAuSUNsaXBJbnB1dH1cbiAqL1xuQmxlbmQyRENsaXAucHJvdG90eXBlLmFkZElucHV0ID0gZnVuY3Rpb24gKHBvc2l0aW9uLCBpbnB1dENsaXAsIG9mZnNldCkge1xuICAgIHZhciBvYmogPSB7XG4gICAgICAgIHBvc2l0aW9uIDogcG9zaXRpb24sXG4gICAgICAgIGNsaXAgOiBpbnB1dENsaXAsXG4gICAgICAgIG9mZnNldCA6IG9mZnNldCB8fCAwXG4gICAgfTtcbiAgICB0aGlzLmlucHV0cy5wdXNoKG9iaik7XG4gICAgdGhpcy5saWZlID0gTWF0aC5tYXgoaW5wdXRDbGlwLmxpZmUsIHRoaXMubGlmZSk7XG4gICAgLy8gVE9ETyBDaGFuZ2UgdG8gaW5jcmVtZW50YWxseSBhZGRpbmdcbiAgICB0aGlzLl91cGRhdGVUcmlhbmdsZXMoKTtcblxuICAgIHJldHVybiBvYmo7XG59O1xuXG4vLyBEZWxhdW5heSB0cmlhbmd1bGF0ZVxuQmxlbmQyRENsaXAucHJvdG90eXBlLl91cGRhdGVUcmlhbmdsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGlucHV0cyA9IHRoaXMuaW5wdXRzLm1hcChmdW5jdGlvbiAoYSkge1xuICAgICAgICByZXR1cm4gYS5wb3NpdGlvbjtcbiAgICB9KTtcbiAgICB0aGlzLl90cmlhbmdsZXMgPSBkZWxhdW5heS50cmlhbmd1bGF0ZShpbnB1dHMsICdhcnJheScpO1xufTtcblxuQmxlbmQyRENsaXAucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAodGltZSwgZFRpbWUsIHNpbGVudCkge1xuXG4gICAgdmFyIHJldCA9IENsaXAucHJvdG90eXBlLnN0ZXAuY2FsbCh0aGlzLCB0aW1lKTtcblxuICAgIGlmIChyZXQgIT09ICdmaW5pc2gnKSB7XG4gICAgICAgIHRoaXMuc2V0VGltZSh0aGlzLmdldEVsYXBzZWRUaW1lKCkpO1xuICAgIH1cblxuICAgIC8vIFBFTkRJTkcgU2NoZWR1bGVcbiAgICBpZiAoIXNpbGVudCAmJiByZXQgIT09ICdwYXVzZWQnKSB7XG4gICAgICAgIHRoaXMuZmlyZSgnZnJhbWUnKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cbkJsZW5kMkRDbGlwLnByb3RvdHlwZS5zZXRUaW1lID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICB2YXIgcmVzID0gdGhpcy5fZmluZFRyaWFuZ2xlKHRoaXMucG9zaXRpb24pO1xuICAgIGlmICghcmVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gSW4gQmFyeWNlbnRyaWNcbiAgICB2YXIgYSA9IHJlc1sxXTsgLy8gUGVyY2VudCBvZiBjbGlwMlxuICAgIHZhciBiID0gcmVzWzJdOyAvLyBQZXJjZW50IG9mIGNsaXAzXG5cbiAgICB2YXIgdHJpID0gcmVzWzBdO1xuXG4gICAgdmFyIGluMSA9IHRoaXMuaW5wdXRzW3RyaS5pbmRpY2VzWzBdXTtcbiAgICB2YXIgaW4yID0gdGhpcy5pbnB1dHNbdHJpLmluZGljZXNbMV1dO1xuICAgIHZhciBpbjMgPSB0aGlzLmlucHV0c1t0cmkuaW5kaWNlc1syXV07XG4gICAgdmFyIGNsaXAxID0gaW4xLmNsaXA7XG4gICAgdmFyIGNsaXAyID0gaW4yLmNsaXA7XG4gICAgdmFyIGNsaXAzID0gaW4zLmNsaXA7XG5cbiAgICBjbGlwMS5zZXRUaW1lKCh0aW1lICsgaW4xLm9mZnNldCkgJSBjbGlwMS5saWZlKTtcbiAgICBjbGlwMi5zZXRUaW1lKCh0aW1lICsgaW4yLm9mZnNldCkgJSBjbGlwMi5saWZlKTtcbiAgICBjbGlwMy5zZXRUaW1lKCh0aW1lICsgaW4zLm9mZnNldCkgJSBjbGlwMy5saWZlKTtcblxuICAgIHZhciBjMSA9IGNsaXAxLm91dHB1dCBpbnN0YW5jZW9mIENsaXAgPyBjbGlwMS5vdXRwdXQgOiBjbGlwMTtcbiAgICB2YXIgYzIgPSBjbGlwMi5vdXRwdXQgaW5zdGFuY2VvZiBDbGlwID8gY2xpcDIub3V0cHV0IDogY2xpcDI7XG4gICAgdmFyIGMzID0gY2xpcDMub3V0cHV0IGluc3RhbmNlb2YgQ2xpcCA/IGNsaXAzLm91dHB1dCA6IGNsaXAzO1xuXG4gICAgdGhpcy5vdXRwdXQuYmxlbmQyRChjMSwgYzIsIGMzLCBhLCBiKTtcbn07XG5cbi8qKlxuICogQ2xvbmUgYSBuZXcgQmxlbmQyRCBjbGlwXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGNsb25lSW5wdXRzIFRydWUgaWYgY2xvbmUgdGhlIGlucHV0IGNsaXBzXG4gKiBAcmV0dXJuIHtjbGF5LmFuaW1hdGlvbi5CbGVuZDJEQ2xpcH1cbiAqL1xuQmxlbmQyRENsaXAucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKGNsb25lSW5wdXRzKSB7XG4gICAgdmFyIGNsaXAgPSBDbGlwLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpO1xuICAgIGNsaXAub3V0cHV0ID0gdGhpcy5vdXRwdXQuY2xvbmUoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaW5wdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBpbnB1dENsaXAgPSBjbG9uZUlucHV0cyA/IHRoaXMuaW5wdXRzW2ldLmNsaXAuY2xvbmUodHJ1ZSkgOiB0aGlzLmlucHV0c1tpXS5jbGlwO1xuICAgICAgICBjbGlwLmFkZElucHV0KHRoaXMuaW5wdXRzW2ldLnBvc2l0aW9uLCBpbnB1dENsaXAsIHRoaXMuaW5wdXRzW2ldLm9mZnNldCk7XG4gICAgfVxuICAgIHJldHVybiBjbGlwO1xufTtcblxuQmxlbmQyRENsaXAucHJvdG90eXBlLl9maW5kVHJpYW5nbGUgPSBmdW5jdGlvbiAocG9zaXRpb24pIHtcbiAgICBpZiAodGhpcy5fY2FjaGVUcmlhbmdsZSkge1xuICAgICAgICB2YXIgcmVzID0gZGVsYXVuYXkuY29udGFpbnModGhpcy5fY2FjaGVUcmlhbmdsZS52ZXJ0aWNlcywgcG9zaXRpb24uYXJyYXkpO1xuICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuX2NhY2hlVHJpYW5nbGUsIHJlc1swXSwgcmVzWzFdXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3RyaWFuZ2xlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdHJpID0gdGhpcy5fdHJpYW5nbGVzW2ldO1xuICAgICAgICB2YXIgcmVzID0gZGVsYXVuYXkuY29udGFpbnModHJpLnZlcnRpY2VzLCB0aGlzLnBvc2l0aW9uLmFycmF5KTtcbiAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGVUcmlhbmdsZSA9IHRyaTtcbiAgICAgICAgICAgIHJldHVybiBbdHJpLCByZXNbMF0sIHJlc1sxXV07XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBCbGVuZDJEQ2xpcDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2FuaW1hdGlvbi9CbGVuZDJEQ2xpcC5qc1xuLy8gbW9kdWxlIGlkID0gMTI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///128\n");

/***/ }),
/* 129 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Timeline__ = __webpack_require__(46);\n// DEPRECATED\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0__Timeline__[\"a\" /* default */]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvYW5pbWF0aW9uL1RpbWVsaW5lLmpzPzg4ZGMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gREVQUkVDQVRFRFxuaW1wb3J0IFRpbWVsaW5lIGZyb20gJy4uL1RpbWVsaW5lJztcbmV4cG9ydCBkZWZhdWx0IFRpbWVsaW5lO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvYW5pbWF0aW9uL1RpbWVsaW5lLmpzXG4vLyBtb2R1bGUgaWQgPSAxMjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///129\n");

/***/ }),
/* 130 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Renderer__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Scene__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Timeline__ = __webpack_require__(46);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__geometry_Cube__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__geometry_Sphere__ = __webpack_require__(55);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__geometry_Plane__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__geometry_ParametricSurface__ = __webpack_require__(81);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__TextureCube__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__camera_Orthographic__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__loader_GLTF__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__light_Directional__ = __webpack_require__(89);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__light_Point__ = __webpack_require__(90);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__light_Spot__ = __webpack_require__(91);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__light_Ambient__ = __webpack_require__(92);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__light_AmbientCubemap__ = __webpack_require__(93);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__light_AmbientSH__ = __webpack_require__(97);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__prePass_ShadowMap__ = __webpack_require__(98);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__picking_RayPicking__ = __webpack_require__(99);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__core_LRU__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__util_sh__ = __webpack_require__(100);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__util_texture__ = __webpack_require__(59);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__core_color__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__shader_builtin__ = __webpack_require__(86);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__Shader__ = __webpack_require__(6);\n\n/**\n * Helpers for creating a common 3d application.\n * @namespace clay.application\n */\n\n // TODO createCompositor\n // TODO Dispose test. geoCache test.\n // TODO Tonemapping exposure\n // TODO fitModel.\n // TODO Particle ?\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar parseColor = __WEBPACK_IMPORTED_MODULE_30__core_color__[\"a\" /* default */].parseToFloat;\n\n\n\n\n\nvar EVE_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove',\n    'touchstart', 'touchend', 'touchmove',\n    'mousewheel', 'DOMMouseScroll'\n];\n\n/**\n * @typedef {string|HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} ImageLike\n */\n/**\n * @typedef {string|HTMLCanvasElement|HTMLImageElement|HTMLVideoElement|clay.Texture2D} TextureLike\n */\n/**\n * @typedef {string|Array.<number>} Color\n */\n/**\n * @typedef {HTMLElement|string} DomQuery\n */\n\n\n/**\n * @typedef {Object} GLAttributes\n * @param {boolean} [alpha=true]\n * @param {boolean} [depth=true]\n * @param {boolean} [stencil=true]\n * @param {boolean} [antialias=true]\n * @param {boolean} [premultipliedAlpha=true]\n * @param {boolean} [preserveDrawingBuffer=false]\n */\n\n/**\n * @typedef {Object} App3DNamespace\n * @property {Function} init Initialization callback that will be called when initing app.\n *                      You can return a promise in init to start the loop asynchronously when the promise is resolved.\n * @property {Function} loop Loop callback that will be called each frame.\n * @property {boolean} [autoRender=true] If render automatically each frame.\n * @property {Function} [beforeRender]\n * @property {Function} [afterRender]\n * @property {number} [width] Container width.\n * @property {number} [height] Container height.\n * @property {number} [devicePixelRatio]\n * @property {GLAttributes} [glAttributes] Attributes for creating gl context\n * @property {Object.<string, Function>} [methods] Methods that will be injected to App3D#methods.\n * @property {Object} [graphic] Graphic configuration including shadow, color space.\n * @property {boolean} [graphic.shadow=false] If enable shadow\n * @property {boolean} [graphic.linear=false] If use linear color space\n * @property {boolean} [graphic.tonemapping=false] If enable ACES tone mapping.\n * @property {boolean} [event=false] If enable mouse/touch event. It will slow down the system if geometries are complex.\n */\n\n/**\n * @typedef {Object} StandardMaterialMRConfig\n * @property {string} [name]\n * @property {string} [shader='standardMR']\n * @property {Color} [color]\n * @property {number} [alpha]\n * @property {number} [metalness]\n * @property {number} [roughness]\n * @property {Color} [emission]\n * @property {number} [emissionIntensity]\n * @property {boolean} [transparent]\n * @property {TextureLike} [diffuseMap]\n * @property {TextureLike} [normalMap]\n * @property {TextureLike} [roughnessMap]\n * @property {TextureLike} [metalnessMap]\n * @property {TextureLike} [emissiveMap]\n */\n\n/**\n * Using App3D is a much more convenient way to create and manage your 3D application.\n *\n * It provides the abilities to:\n *\n * + Manage application loop and rendering.\n * + Collect GPU resource automatically without memory leak concern.\n * + Mouse event management.\n * + Create scene objects, materials, textures with simpler code.\n * + Load models with one line of code.\n * + Promised interfaces.\n *\n * Here is a basic example to create a rotating cube.\n *\n```js\nvar app = clay.application.create('#viewport', {\n    init: function (app) {\n        // Create a perspective camera.\n        // First parameter is the camera position. Which is in front of the cube.\n        // Second parameter is the camera lookAt target. Which is the origin of the world, and where the cube puts.\n        this._camera = app.createCamera([0, 2, 5], [0, 0, 0]);\n        // Create a sample cube\n        this._cube = app.createCube();\n        // Create a directional light. The direction is from top right to left bottom, away from camera.\n        this._mainLight = app.createDirectionalLight([-1, -1, -1]);\n    },\n    loop: function (app) {\n        // Simply rotating the cube every frame.\n        this._cube.rotation.rotateY(app.frameTime / 1000);\n    }\n});\n```\n * @constructor\n * @alias clay.application.App3D\n * @param {DomQuery} dom Container dom element or a selector string that can be used in `querySelector`\n * @param {App3DNamespace} appNS Options and namespace used in creating app3D\n */\nfunction App3D(dom, appNS) {\n\n    appNS = appNS || {};\n    appNS.graphic = appNS.graphic || {};\n\n    appNS.glAttributes = appNS.glAttributes || {};\n\n    if (appNS.autoRender == null) {\n        appNS.autoRender = true;\n    }\n\n    if (typeof dom === 'string') {\n        dom = document.querySelector(dom);\n    }\n\n    if (!dom) { throw new Error('Invalid dom'); }\n\n    var isDomCanvas = !dom.nodeName  // Not in dom environment\n        || dom.nodeName.toUpperCase() === 'CANVAS';\n\n    var rendererOpts = {};\n    isDomCanvas && (rendererOpts.canvas = dom);\n    appNS.devicePixelRatio && (rendererOpts.devicePixelRatio = appNS.devicePixelRatio);\n\n    [\n        'alpha', 'depth', 'stencil', 'antialias', 'premultipliedAlpha', 'preserveDrawingBuffer'\n    ].forEach(function (attrName) {\n        if (appNS.glAttributes[attrName] != null) {\n            rendererOpts[attrName] = appNS.glAttributes[attrName];\n        }\n    });\n\n    var gRenderer = new __WEBPACK_IMPORTED_MODULE_0__Renderer__[\"a\" /* default */](rendererOpts);\n    var gWidth = appNS.width || dom.clientWidth;\n    var gHeight = appNS.height || dom.clientHeight;\n\n    var gScene = new __WEBPACK_IMPORTED_MODULE_1__Scene__[\"a\" /* default */]();\n    var gTimeline = new __WEBPACK_IMPORTED_MODULE_2__Timeline__[\"a\" /* default */]();\n    var gShadowPass = appNS.graphic.shadow && new __WEBPACK_IMPORTED_MODULE_23__prePass_ShadowMap__[\"a\" /* default */]();\n    var gRayPicking = appNS.event && new __WEBPACK_IMPORTED_MODULE_24__picking_RayPicking__[\"a\" /* default */]({\n        scene: gScene,\n        renderer: gRenderer\n    });\n\n    !isDomCanvas && dom.appendChild(gRenderer.canvas);\n\n    gRenderer.resize(gWidth, gHeight);\n\n    var gFrameTime = 0;\n    var gElapsedTime = 0;\n\n    gTimeline.start();\n\n    var userMethods = {};\n    for (var key in appNS.methods) {\n        userMethods[key] = appNS.methods[key].bind(appNS, this);\n    }\n\n    Object.defineProperties(this, {\n        /**\n         * Container dom element\n         * @name clay.application.App3D#container\n         * @type {HTMLElement}\n         */\n        container: { get: function () { return dom; } },\n        /**\n         * @name clay.application.App3D#renderer\n         * @type {clay.Renderer}\n         */\n        renderer: { get: function () { return gRenderer; }},\n        /**\n         * @name clay.application.App3D#scene\n         * @type {clay.Renderer}\n         */\n        scene: { get: function () { return gScene; }},\n        /**\n         * @name clay.application.App3D#timeline\n         * @type {clay.Renderer}\n         */\n        timeline: { get: function () { return gTimeline; }},\n        /**\n         * Time elapsed since last frame. Can be used in loop to calculate the movement.\n         * @name clay.application.App3D#frameTime\n         * @type {number}\n         */\n        frameTime: { get: function () { return gFrameTime; }},\n        /**\n         * Time elapsed since application created.\n         * @name clay.application.App3D#elapsedTime\n         * @type {number}\n         */\n        elapsedTime: { get: function () { return gElapsedTime; }},\n\n        /**\n         * Width of viewport.\n         * @name clay.application.App3D#width\n         * @type {number}\n         */\n        width: { get: function () { return gRenderer.getWidth(); }},\n        /**\n         * Height of viewport.\n         * @name clay.application.App3D#height\n         * @type {number}\n         */\n        height: { get: function () { return gRenderer.getHeight(); }},\n\n        /**\n         * Methods from {@link clay.application.create}\n         * @name clay.application.App3D#methods\n         * @type {number}\n         */\n        methods: { get: function () { return userMethods; } },\n\n        _shadowPass: { get: function () { return gShadowPass; } },\n\n        _appNS: { get: function () { return appNS; } },\n    });\n\n    /**\n     * Resize the application. Will use the container clientWidth/clientHeight if width/height in parameters are not given.\n     * @function\n     * @memberOf {clay.application.App3D}\n     * @param {number} [width]\n     * @param {number} [height]\n     */\n    this.resize = function (width, height) {\n        gWidth = width || appNS.width || dom.clientWidth;\n        gHeight = height || dom.height || dom.clientHeight;\n        gRenderer.resize(gWidth, gHeight);\n    };\n\n    /**\n     * Dispose the application\n     * @function\n     */\n    this.dispose = function () {\n        this._disposed = true;\n\n        if (appNS.dispose) {\n            appNS.dispose(this);\n        }\n        gTimeline.stop();\n        gRenderer.disposeScene(gScene);\n        gShadowPass && gShadowPass.dispose(gRenderer);\n\n        dom.innerHTML = '';\n        EVE_NAMES.forEach(function (eveType) {\n            this[makeHandlerName(eveType)] && __WEBPACK_IMPORTED_MODULE_29__core_vendor__[\"a\" /* default */].removeEventListener(dom, makeHandlerName(eveType));\n        }, this);\n    };\n\n    gRayPicking && this._initMouseEvents(gRayPicking);\n\n    this._geoCache = new __WEBPACK_IMPORTED_MODULE_25__core_LRU__[\"a\" /* default */](20);\n    this._texCache = new __WEBPACK_IMPORTED_MODULE_25__core_LRU__[\"a\" /* default */](20);\n\n    // GPU Resources.\n    this._texturesList = {};\n    this._geometriesList = {};\n\n    // Do init the application.\n    var initPromise = Promise.resolve(appNS.init && appNS.init(this));\n    // Use the inited camera.\n    gRayPicking && (gRayPicking.camera = gScene.getMainCamera());\n\n    if (!appNS.loop) {\n        console.warn('Miss loop method.');\n    }\n\n    var self = this;\n    initPromise.then(function () {\n        gTimeline.on('frame', function (frameTime) {\n            gFrameTime = frameTime;\n            gElapsedTime += frameTime;\n\n            var camera = gScene.getMainCamera();\n            if (camera) {\n                camera.aspect = gRenderer.getViewportAspect();\n            }\n            gRayPicking && (gRayPicking.camera = camera);\n\n            appNS.loop && appNS.loop(self);\n\n            if (appNS.autoRender) {\n                self.render();\n            }\n\n            self.collectResources();\n        }, this);\n    });\n\n    gScene.on('beforerender', function (renderer, scene, camera, renderList) {\n        if (this._inRender) {\n            // Only update graphic options when using #render function.\n            this._updateGraphicOptions(appNS.graphic, renderList.opaque, false);\n            this._updateGraphicOptions(appNS.graphic, renderList.transparent, false);\n        }\n    }, this);\n}\n\nfunction isImageLikeElement(val) {\n    return (typeof Image !== 'undefined' && val instanceof Image)\n        || (typeof HTMLCanvasElement !== 'undefined' && val instanceof HTMLCanvasElement)\n        || (typeof HTMLVideoElement !== 'undefined' && val instanceof HTMLVideoElement);\n}\n\nfunction getKeyFromImageLike(val) {\n    return typeof val === 'string'\n        ? val : (val.__key__ || (val.__key__ = __WEBPACK_IMPORTED_MODULE_26__core_util__[\"a\" /* default */].genGUID()));\n}\n\nfunction makeHandlerName(eveType) {\n    return '_' + eveType + 'Handler';\n}\n\nfunction packageEvent(eventType, pickResult, offsetX, offsetY, wheelDelta) {\n    var event = __WEBPACK_IMPORTED_MODULE_26__core_util__[\"a\" /* default */].clone(pickResult);\n    event.type = eventType;\n    event.offsetX = offsetX;\n    event.offsetY = offsetY;\n    if (wheelDelta !== null) {\n        event.wheelDelta = wheelDelta;\n    }\n    return event;\n}\n\nfunction bubblingEvent(target, event) {\n    while (target && !event.cancelBubble) {\n        target.trigger(event.type, event);\n        target = target.getParent();\n    }\n}\n\nApp3D.prototype._initMouseEvents = function (rayPicking) {\n    var dom = this.container;\n\n    var oldTarget = null;\n    EVE_NAMES.forEach(function (_eveType) {\n        __WEBPACK_IMPORTED_MODULE_29__core_vendor__[\"a\" /* default */].addEventListener(dom, _eveType, this[makeHandlerName(_eveType)] = function (e) {\n            if (!rayPicking.camera) { // Not have camera yet.\n                return;\n            }\n            e.preventDefault && e.preventDefault();\n\n            var box = dom.getBoundingClientRect();\n            var offsetX, offsetY;\n            var eveType = _eveType;\n\n            if (eveType.indexOf('touch') >= 0) {\n                var touch = eveType !== 'touchend'\n                    ? e.targetTouches[0]\n                    : e.changedTouches[0];\n                if (eveType === 'touchstart') {\n                    eveType = 'mousedown';\n                }\n                else if (eveType === 'touchend') {\n                    eveType = 'mouseup';\n                }\n                else if (eveType === 'touchmove') {\n                    eveType = 'mousemove';\n                }\n                offsetX = touch.clientX - box.left;\n                offsetY = touch.clientY - box.top;\n            }\n            else {\n                offsetX = e.clientX - box.left;\n                offsetY = e.clientY - box.top;\n            }\n\n            var pickResult = rayPicking.pick(offsetX, offsetY);\n\n            var delta;\n            if (eveType === 'DOMMouseScroll' || eveType === 'mousewheel') {\n                delta = (e.wheelDelta) ? e.wheelDelta / 120 : -(e.detail || 0) / 3;\n            }\n\n            if (pickResult) {\n                // Just ignore silent element.\n                if (pickResult.target.silent) {\n                    return;\n                }\n\n                if (eveType === 'mousemove') {\n                    // PENDING touchdown should trigger mouseover event ?\n                    var targetChanged = pickResult.target !== oldTarget;\n                    if (targetChanged) {\n                        oldTarget && bubblingEvent(oldTarget, packageEvent('mouseout', {\n                            target: oldTarget\n                        }, offsetX, offsetY));\n                    }\n                    bubblingEvent(pickResult.target, packageEvent('mousemove', pickResult, offsetX, offsetY));\n                    if (targetChanged) {\n                        bubblingEvent(pickResult.target, packageEvent('mouseover', pickResult, offsetX, offsetY));\n                    }\n                }\n                else {\n                    bubblingEvent(pickResult.target, packageEvent(eveType, pickResult, offsetX, offsetY, delta));\n                }\n                oldTarget = pickResult.target;\n            }\n            else if (oldTarget) {\n                bubblingEvent(oldTarget, packageEvent('mouseout', {\n                    target: oldTarget\n                }, offsetX, offsetY));\n                oldTarget = null;\n            }\n        });\n    }, this);\n};\n\nApp3D.prototype._updateGraphicOptions = function (graphicOpts, list, isSkybox) {\n    var enableTonemapping = !!graphicOpts.tonemapping;\n    var isLinearSpace = !!graphicOpts.linear;\n\n    var prevMaterial;\n\n    for (var i = 0; i < list.length; i++) {\n        var mat = list[i].material;\n        if (mat === prevMaterial) {\n            continue;\n        }\n\n        enableTonemapping ? mat.define('fragment', 'TONEMAPPING') : mat.undefine('fragment', 'TONEMAPPING');\n        if (isLinearSpace) {\n            var decodeSRGB = true;\n            if (isSkybox && mat.get('environmentMap') && !mat.get('environmentMap').sRGB) {\n                decodeSRGB = false;\n            }\n            decodeSRGB && mat.define('fragment', 'SRGB_DECODE');\n            mat.define('fragment', 'SRGB_ENCODE');\n        }\n        else {\n            mat.undefine('fragment', 'SRGB_DECODE');\n            mat.undefine('fragment', 'SRGB_ENCODE');\n        }\n\n        prevMaterial = mat;\n    }\n};\n\nApp3D.prototype._doRender = function (renderer, scene) {\n    var camera = scene.getMainCamera();\n    renderer.render(scene, camera, true);\n};\n\n/**\n * Do render\n */\nApp3D.prototype.render = function () {\n    this._inRender = true;\n    var appNS = this._appNS;\n    appNS.beforeRender && appNS.beforeRender(self);\n\n    var scene = this.scene;\n    var renderer = this.renderer;\n    var shadowPass = this._shadowPass;\n\n    scene.update();\n    var skyboxList = [];\n    scene.skybox && skyboxList.push(scene.skybox);\n    scene.skydome && skyboxList.push(scene.skydome);\n\n    this._updateGraphicOptions(appNS.graphic, skyboxList, true);\n    // Render shadow pass\n    shadowPass && shadowPass.render(renderer, scene, null, true);\n\n    this._doRender(renderer, scene, true);\n\n    appNS.afterRender && appNS.afterRender(self);\n    this._inRender = false;\n};\n\nApp3D.prototype.collectResources = function () {\n    var renderer = this.renderer;\n    var scene = this.scene;\n    var texturesList = this._texturesList;\n    var geometriesList = this._geometriesList;\n    // Mark all resources unused;\n    markUnused(texturesList);\n    markUnused(geometriesList);\n\n    // Collect resources used in this frame.\n    var newTexturesList = [];\n    var newGeometriesList = [];\n    collectResources(scene, newTexturesList, newGeometriesList);\n\n    // Dispose those unsed resources.\n    checkAndDispose(renderer, texturesList);\n    checkAndDispose(renderer, geometriesList);\n\n    this._texturesList = newTexturesList;\n    this._geometriesList = newGeometriesList;\n};\n\n\nfunction markUnused(resourceList) {\n    for (var i = 0; i < resourceList.length; i++) {\n        resourceList[i].__used = 0;\n    }\n}\n\nfunction checkAndDispose(renderer, resourceList) {\n    for (var i = 0; i < resourceList.length; i++) {\n        if (!resourceList[i].__used) {\n            resourceList[i].dispose(renderer);\n        }\n    }\n}\n\nfunction updateUsed(resource, list) {\n    resource.__used = resource.__used || 0;\n    resource.__used++;\n    if (resource.__used === 1) {\n        // Don't push to the list twice.\n        list.push(resource);\n    }\n}\nfunction collectResources(scene, textureResourceList, geometryResourceList) {\n    var prevMaterial;\n    var prevGeometry;\n    scene.traverse(function (renderable) {\n        if (renderable.isRenderable()) {\n            var geometry = renderable.geometry;\n            var material = renderable.material;\n\n            // TODO optimize!!\n            if (material !== prevMaterial) {\n                var textureUniforms = material.getTextureUniforms();\n                for (var u = 0; u < textureUniforms.length; u++) {\n                    var uniformName = textureUniforms[u];\n                    var val = material.uniforms[uniformName].value;\n                    var uniformType = material.uniforms[uniformName].type;\n                    if (!val) {\n                        continue;\n                    }\n                    if (uniformType === 't') {\n                        updateUsed(val, textureResourceList);\n                    }\n                    else if (uniformType === 'tv') {\n                        for (var k = 0; k < val.length; k++) {\n                            if (val[k]) {\n                                updateUsed(val[k], textureResourceList);\n                            }\n                        }\n                    }\n                }\n            }\n            if (geometry !== prevGeometry) {\n                updateUsed(geometry, geometryResourceList);\n            }\n\n            prevMaterial = material;\n            prevGeometry = geometry;\n        }\n    });\n\n    for (var k = 0; k < scene.lights.length; k++) {\n        // Track AmbientCubemap\n        if (scene.lights[k].cubemap) {\n            updateUsed(scene.lights[k].cubemap, textureResourceList);\n        }\n    }\n}\n/**\n * Load a texture from image or string.\n * @param {ImageLike} img\n * @param {Object} [opts] Texture options.\n * @param {boolean} [opts.flipY=true] If flipY. See {@link clay.Texture.flipY}\n * @param {boolean} [opts.convertToPOT=false] Force convert None Power of Two texture to Power of two so it can be tiled.\n * @param {number} [opts.anisotropic] Anisotropic filtering. See {@link clay.Texture.anisotropic}\n * @param {number} [opts.wrapS=clay.Texture.REPEAT] See {@link clay.Texture.wrapS}\n * @param {number} [opts.wrapT=clay.Texture.REPEAT] See {@link clay.Texture.wrapT}\n * @param {number} [opts.minFilter=clay.Texture.LINEAR_MIPMAP_LINEAR] See {@link clay.Texture.minFilter}\n * @param {number} [opts.magFilter=clay.Texture.LINEAR] See {@link clay.Texture.magFilter}\n * @param {number} [opts.exposure] Only be used when source is a HDR image.\n * @param {boolean} [useCache] If use cache.\n * @return {Promise}\n * @example\n *  app.loadTexture('diffuseMap.jpg')\n *      .then(function (texture) {\n *          material.set('diffuseMap', texture);\n *      });\n */\nApp3D.prototype.loadTexture = function (urlOrImg, opts, useCache) {\n    var self = this;\n    var key = getKeyFromImageLike(urlOrImg);\n    if (useCache) {\n        if (this._texCache.get(key)) {\n            return this._texCache.get(key);\n        }\n    }\n    // TODO Promise ?\n    var promise = new Promise(function (resolve, reject) {\n        var texture = self.loadTextureSync(urlOrImg, opts);\n        if (!texture.isRenderable()) {\n            texture.success(function () {\n                if (self._disposed) {\n                    return;\n                }\n                resolve(texture);\n            });\n            texture.error(function () {\n                if (self._disposed) {\n                    return;\n                }\n                reject();\n            });\n        }\n        else {\n            resolve(texture);\n        }\n    });\n    if (useCache) {\n        this._texCache.put(key, promise);\n    }\n    return promise;\n};\n\n/**\n * Create a texture from image or string synchronously. Texture can be use directly and don't have to wait for it's loaded.\n * @param {ImageLike} img\n * @param {Object} [opts] Texture options.\n * @param {boolean} [opts.flipY=true] If flipY. See {@link clay.Texture.flipY}\n * @param {boolean} [opts.convertToPOT=false] Force convert None Power of Two texture to Power of two so it can be tiled.\n * @param {number} [opts.anisotropic] Anisotropic filtering. See {@link clay.Texture.anisotropic}\n * @param {number} [opts.wrapS=clay.Texture.REPEAT] See {@link clay.Texture.wrapS}\n * @param {number} [opts.wrapT=clay.Texture.REPEAT] See {@link clay.Texture.wrapT}\n * @param {number} [opts.minFilter=clay.Texture.LINEAR_MIPMAP_LINEAR] See {@link clay.Texture.minFilter}\n * @param {number} [opts.magFilter=clay.Texture.LINEAR] See {@link clay.Texture.magFilter}\n * @param {number} [opts.exposure] Only be used when source is a HDR image.\n * @return {clay.Texture2D}\n * @example\n *  var texture = app.loadTexture('diffuseMap.jpg', {\n *      anisotropic: 8,\n *      flipY: false\n *  });\n *  material.set('diffuseMap', texture);\n */\nApp3D.prototype.loadTextureSync = function (urlOrImg, opts) {\n    var texture = new __WEBPACK_IMPORTED_MODULE_7__Texture2D__[\"a\" /* default */](opts);\n    if (typeof urlOrImg === 'string') {\n        if (urlOrImg.match(/.hdr$|^data:application\\/octet-stream/)) {\n            texture = __WEBPACK_IMPORTED_MODULE_28__util_texture__[\"a\" /* default */].loadTexture(urlOrImg, {\n                exposure: opts && opts.exposure,\n                fileType: 'hdr'\n            }, function () {\n                texture.dirty();\n                texture.trigger('success');\n            });\n            for (var key in opts) {\n                texture[key] = opts[key];\n            }\n        }\n        else {\n            texture.load(urlOrImg);\n        }\n    }\n    else if (isImageLikeElement(urlOrImg)) {\n        texture.image = urlOrImg;\n        texture.dynamic = urlOrImg instanceof HTMLVideoElement;\n    }\n    return texture;\n};\n\n/**\n * Create a texture from image or string synchronously. Texture can be use directly and don't have to wait for it's loaded.\n * @param {ImageLike} img\n * @param {Object} [opts] Texture options.\n * @param {boolean} [opts.flipY=false] If flipY. See {@link clay.Texture.flipY}\n * @return {Promise}\n * @example\n *  app.loadTextureCube({\n *      px: 'skybox/px.jpg', py: 'skybox/py.jpg', pz: 'skybox/pz.jpg',\n *      nx: 'skybox/nx.jpg', ny: 'skybox/ny.jpg', nz: 'skybox/nz.jpg'\n *  }).then(function (texture) {\n *      skybox.setEnvironmentMap(texture);\n *  })\n */\nApp3D.prototype.loadTextureCube = function (imgList, opts) {\n    var textureCube = this.loadTextureCubeSync(imgList, opts);\n    return new Promise(function (resolve, reject) {\n        if (textureCube.isRenderable()) {\n            resolve(textureCube);\n        }\n        else {\n            textureCube.success(function () {\n                resolve(textureCube);\n            }).error(function () {\n                reject();\n            });\n        }\n    });\n};\n\n/**\n * Create a texture from image or string synchronously. Texture can be use directly and don't have to wait for it's loaded.\n * @param {ImageLike} img\n * @param {Object} [opts] Texture options.\n * @param {boolean} [opts.flipY=false] If flipY. See {@link clay.Texture.flipY}\n * @return {clay.TextureCube}\n * @example\n *  var texture = app.loadTextureCubeSync({\n *      px: 'skybox/px.jpg', py: 'skybox/py.jpg', pz: 'skybox/pz.jpg',\n *      nx: 'skybox/nx.jpg', ny: 'skybox/ny.jpg', nz: 'skybox/nz.jpg'\n *  });\n *  skybox.setEnvironmentMap(texture);\n */\nApp3D.prototype.loadTextureCubeSync = function (imgList, opts) {\n    opts = opts || {};\n    opts.flipY = opts.flipY || false;\n    var textureCube = new __WEBPACK_IMPORTED_MODULE_8__TextureCube__[\"a\" /* default */](opts);\n    if (!imgList || !imgList.px || !imgList.nx || !imgList.py || !imgList.ny || !imgList.pz || !imgList.nz) {\n        throw new Error('Invalid cubemap format. Should be an object including px,nx,py,ny,pz,nz');\n    }\n    if (typeof imgList.px === 'string') {\n        textureCube.load(imgList);\n    }\n    else {\n        textureCube.image = __WEBPACK_IMPORTED_MODULE_26__core_util__[\"a\" /* default */].clone(imgList);\n    }\n    return textureCube;\n};\n\n/**\n * Create a material.\n * @param {Object|StandardMaterialMRConfig} materialConfig. materialConfig contains `shader`, `transparent` and uniforms that used in corresponding uniforms.\n *                                 Uniforms can be `color`, `alpha` `diffuseMap` etc.\n * @param {string|clay.Shader} [shader='clay.standardMR'] Default to be standard shader with metalness and roughness workflow.\n * @param {boolean} [transparent=false] If material is transparent.\n * @param {boolean} [textureConvertToPOT=false] Force convert None Power of Two texture to Power of two so it can be tiled.\n * @param {boolean} [textureFlipY=true] If flip y of texture.\n * @param {Function} [textureLoaded] Callback when single texture loaded.\n * @param {Function} [texturesReady] Callback when all texture loaded.\n * @return {clay.Material}\n */\nApp3D.prototype.createMaterial = function (matConfig) {\n    matConfig = matConfig || {};\n    matConfig.shader = matConfig.shader || 'clay.standardMR';\n    var shader = matConfig.shader instanceof __WEBPACK_IMPORTED_MODULE_32__Shader__[\"a\" /* default */] ? matConfig.shader : __WEBPACK_IMPORTED_MODULE_31__shader_builtin__[\"a\" /* default */].get(matConfig.shader);\n    var material = new __WEBPACK_IMPORTED_MODULE_11__Material__[\"a\" /* default */]({\n        shader: shader\n    });\n    if (matConfig.name) {\n        material.name = matConfig.name;\n    }\n\n    var texturesLoading = [];\n    function makeTextureSetter(key) {\n        return function (texture) {\n            material.setUniform(key, texture);\n            matConfig.textureLoaded && matConfig.textureLoaded(key, texture);\n            return texture;\n        };\n    }\n    for (var key in matConfig) {\n        if (material.uniforms[key]) {\n            var val = matConfig[key];\n            if ((material.uniforms[key].type === 't' || isImageLikeElement(val))\n                && !(val instanceof __WEBPACK_IMPORTED_MODULE_9__Texture__[\"a\" /* default */])\n            ) {\n                // Try to load a texture.\n                texturesLoading.push(this.loadTexture(val, {\n                    convertToPOT: matConfig.textureConvertToPOT || false,\n                    flipY: matConfig.textureFlipY == null ? true : matConfig.textureFlipY\n                }).then(makeTextureSetter(key)));\n            }\n            else {\n                material.setUniform(key, val);\n            }\n        }\n    }\n\n    if (matConfig.transparent) {\n        matConfig.depthMask = false;\n        matConfig.transparent = true;\n    }\n\n\n    if (matConfig.texturesReady) {\n        Promise.all(texturesLoading).then(function (textures) {\n            matConfig.texturesReady(textures);\n        });\n    }\n\n    return material;\n};\n\n/**\n * Create a cube mesh and add it to the scene or the given parent node.\n * @function\n * @param {Object|clay.Material} [material]\n * @param {clay.Node} [parentNode] Parent node to append. Default to be scene.\n * @param {Array.<number>|number} [subdivision=1] Subdivision of cube.\n *          Can be a number to represent both width, height and depth dimensions. Or an array to represent them respectively.\n * @return {clay.Mesh}\n * @example\n *  // Create a white cube.\n *  app.createCube()\n */\nApp3D.prototype.createCube = function (material, parentNode, subdiv) {\n    if (subdiv == null) {\n        subdiv = 1;\n    }\n    if (typeof subdiv === 'number') {\n        subdiv = [subdiv, subdiv, subdiv];\n    }\n\n    var geoKey = 'cube-' + subdiv.join('-');\n    var cube = this._geoCache.get(geoKey);\n    if (!cube) {\n        cube = new __WEBPACK_IMPORTED_MODULE_3__geometry_Cube__[\"a\" /* default */]({\n            widthSegments: subdiv[0],\n            heightSegments: subdiv[1],\n            depthSegments: subdiv[2]\n        });\n        cube.generateTangents();\n        this._geoCache.put(geoKey, cube);\n    }\n    return this.createMesh(cube, material, parentNode);\n};\n\n/**\n * Create a cube mesh that camera is inside the cube.\n * @function\n * @param {Object|clay.Material} [material]\n * @param {clay.Node} [parentNode] Parent node to append. Default to be scene.\n * @param {Array.<number>|number} [subdivision=1] Subdivision of cube.\n *          Can be a number to represent both width, height and depth dimensions. Or an array to represent them respectively.\n * @return {clay.Mesh}\n * @example\n *  // Create a white cube inside.\n *  app.createCubeInside()\n */\nApp3D.prototype.createCubeInside = function (material, parentNode, subdiv) {\n    if (subdiv == null) {\n        subdiv = 1;\n    }\n    if (typeof subdiv === 'number') {\n        subdiv = [subdiv, subdiv, subdiv];\n    }\n    var geoKey = 'cubeInside-' + subdiv.join('-');\n    var cube = this._geoCache.get(geoKey);\n    if (!cube) {\n        cube = new __WEBPACK_IMPORTED_MODULE_3__geometry_Cube__[\"a\" /* default */]({\n            inside: true,\n            widthSegments: subdiv[0],\n            heightSegments: subdiv[1],\n            depthSegments: subdiv[2]\n        });\n        cube.generateTangents();\n        this._geoCache.put(geoKey, cube);\n    }\n\n    return this.createMesh(cube, material, parentNode);\n};\n\n/**\n * Create a sphere mesh and add it to the scene or the given parent node.\n * @function\n * @param {Object|clay.Material} [material]\n * @param {clay.Node} [parentNode] Parent node to append. Default to be scene.\n * @param {number} [subdivision=20] Subdivision of sphere.\n * @return {clay.Mesh}\n * @example\n *  // Create a semi-transparent sphere.\n *  app.createSphere({\n *      color: [0, 0, 1],\n *      transparent: true,\n *      alpha: 0.5\n *  })\n */\nApp3D.prototype.createSphere = function (material, parentNode, subdivision) {\n    if (subdivision == null) {\n        subdivision = 20;\n    }\n    var geoKey = 'sphere-' + subdivision;\n    var sphere = this._geoCache.get(geoKey);\n    if (!sphere) {\n        sphere = new __WEBPACK_IMPORTED_MODULE_4__geometry_Sphere__[\"a\" /* default */]({\n            widthSegments: subdivision * 2,\n            heightSegments: subdivision\n        });\n        sphere.generateTangents();\n        this._geoCache.put(geoKey, sphere);\n    }\n    return this.createMesh(sphere, material, parentNode);\n};\n\n// TODO may be modified?\n/**\n * Create a plane mesh and add it to the scene or the given parent node.\n * @function\n * @param {Object|clay.Material} [material]\n * @param {clay.Node} [parentNode] Parent node to append. Default to be scene.\n * @param {Array.<number>|number} [subdivision=1] Subdivision of plane.\n *          Can be a number to represent both width and height dimensions. Or an array to represent them respectively.\n * @return {clay.Mesh}\n * @example\n *  // Create a red color plane.\n *  app.createPlane({\n *      color: [1, 0, 0]\n *  })\n */\nApp3D.prototype.createPlane = function (material, parentNode, subdiv) {\n    if (subdiv == null) {\n        subdiv = 1;\n    }\n    if (typeof subdiv === 'number') {\n        subdiv = [subdiv, subdiv];\n    }\n    var geoKey = 'plane-' + subdiv.join('-');\n    var planeGeo = this._geoCache.get(geoKey);\n    if (!planeGeo) {\n        planeGeo = new __WEBPACK_IMPORTED_MODULE_5__geometry_Plane__[\"a\" /* default */]({\n            widthSegments: subdiv[0],\n            heightSegments: subdiv[1]\n        });\n        planeGeo.generateTangents();\n        this._geoCache.put(geoKey, planeGeo);\n    }\n    return this.createMesh(planeGeo, material, parentNode);\n};\n\n/**\n * Create mesh with parametric surface function\n * @param {Object|clay.Material} [material]\n * @param {clay.Node} [parentNode] Parent node to append. Default to be scene.\n * @param {Object} generator\n * @param {Function} generator.x\n * @param {Function} generator.y\n * @param {Function} generator.z\n * @param {Array} [generator.u=[0, 1, 0.05]]\n * @param {Array} [generator.v=[0, 1, 0.05]]\n * @return {clay.Mesh}\n */\nApp3D.prototype.createParametricSurface = function (material, parentNode, generator) {\n    var geo = new __WEBPACK_IMPORTED_MODULE_6__geometry_ParametricSurface__[\"a\" /* default */]({\n        generator: generator\n    });\n    geo.generateTangents();\n    return this.createMesh(geo, material, parentNode);\n};\n\n\n/**\n * Create a general mesh with given geometry instance and material config.\n * @param {clay.Geometry} geometry\n * @return {clay.Mesh}\n */\nApp3D.prototype.createMesh = function (geometry, mat, parentNode) {\n    var mesh = new __WEBPACK_IMPORTED_MODULE_10__Mesh__[\"a\" /* default */]({\n        geometry: geometry,\n        material: mat instanceof __WEBPACK_IMPORTED_MODULE_11__Material__[\"a\" /* default */] ? mat : this.createMaterial(mat)\n    });\n    parentNode = parentNode || this.scene;\n    parentNode.add(mesh);\n    return mesh;\n};\n\n/**\n * Create an empty node\n * @param {clay.Node} parentNode\n * @return {clay.Node}\n */\nApp3D.prototype.createNode = function (parentNode) {\n    var node = new __WEBPACK_IMPORTED_MODULE_16__Node__[\"a\" /* default */]();\n    parentNode = parentNode || this.scene;\n    parentNode.add(node);\n    return node;\n};\n\n/**\n * Create a perspective or orthographic camera and add it to the scene.\n * @param {Array.<number>|clay.Vector3} position\n * @param {Array.<number>|clay.Vector3} target\n * @param {string} [type=\"perspective\"] Can be 'perspective' or 'orthographic'(in short 'ortho')\n * @param {Array.<number>|clay.Vector3} [extent] Extent is available only if type is orthographic.\n * @return {clay.camera.Perspective|clay.camera.Orthographic}\n */\nApp3D.prototype.createCamera = function (position, target, type, extent) {\n    var CameraCtor;\n    var isOrtho = false;\n    if (type === 'ortho' || type === 'orthographic') {\n        isOrtho = true;\n        CameraCtor = __WEBPACK_IMPORTED_MODULE_13__camera_Orthographic__[\"a\" /* default */];\n    }\n    else {\n        if (type && type !== 'perspective') {\n            console.error('Unkown camera type ' + type + '. Use default perspective camera');\n        }\n        CameraCtor = __WEBPACK_IMPORTED_MODULE_12__camera_Perspective__[\"a\" /* default */];\n    }\n\n    var camera = new CameraCtor();\n    if (position instanceof __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */]) {\n        camera.position.copy(position);\n    }\n    else if (position instanceof Array) {\n        camera.position.setArray(position);\n    }\n\n    if (target instanceof Array) {\n        target = new __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */](target[0], target[1], target[2]);\n    }\n    if (target instanceof __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */]) {\n        camera.lookAt(target);\n    }\n\n    if (extent && isOrtho) {\n        extent = extent.array || extent;\n        camera.left = -extent[0] / 2;\n        camera.right = extent[0] / 2;\n        camera.top = extent[1] / 2;\n        camera.bottom = -extent[1] / 2;\n        camera.near = 0;\n        camera.far = extent[2];\n    }\n    else {\n        camera.aspect = this.renderer.getViewportAspect();\n    }\n\n    this.scene.add(camera);\n\n    return camera;\n};\n\n/**\n * Create a directional light and add it to the scene.\n * @param {Array.<number>|clay.Vector3} dir A Vector3 or array to represent the direction.\n * @param {Color} [color='#fff'] Color of directional light, default to be white.\n * @param {number} [intensity] Intensity of directional light, default to be 1.\n *\n * @example\n *  app.createDirectionalLight([-1, -1, -1], '#fff', 2);\n */\nApp3D.prototype.createDirectionalLight = function (dir, color, intensity) {\n    var light = new __WEBPACK_IMPORTED_MODULE_17__light_Directional__[\"a\" /* default */]();\n    if (dir instanceof __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */]) {\n        dir = dir.array;\n    }\n    light.position.setArray(dir).negate();\n    light.lookAt(__WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */].ZERO);\n    if (typeof color === 'string') {\n        color = parseColor(color);\n    }\n    color != null && (light.color = color);\n    intensity != null && (light.intensity = intensity);\n\n    this.scene.add(light);\n    return light;\n};\n\n/**\n * Create a spot light and add it to the scene.\n * @param {Array.<number>|clay.Vector3} position Position of the spot light.\n * @param {Array.<number>|clay.Vector3} [target] Target position where spot light points to.\n * @param {number} [range=20] Falloff range of spot light. Default to be 20.\n * @param {Color} [color='#fff'] Color of spot light, default to be white.\n * @param {number} [intensity=1] Intensity of spot light, default to be 1.\n * @param {number} [umbraAngle=30] Umbra angle of spot light. Default to be 30 degree from the middle line.\n * @param {number} [penumbraAngle=45] Penumbra angle of spot light. Default to be 45 degree from the middle line.\n *\n * @example\n *  app.createSpotLight([5, 5, 5], [0, 0, 0], 20, #900);\n */\nApp3D.prototype.createSpotLight = function (position, target, range, color, intensity, umbraAngle, penumbraAngle) {\n    var light = new __WEBPACK_IMPORTED_MODULE_19__light_Spot__[\"a\" /* default */]();\n    light.position.setArray(position instanceof __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */] ? position.array : position);\n\n    if (target instanceof Array) {\n        target = new __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */](target[0], target[1], target[2]);\n    }\n    if (target instanceof __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */]) {\n        light.lookAt(target);\n    }\n\n    if (typeof color === 'string') {\n        color = parseColor(color);\n    }\n    range != null && (light.range = range);\n    color != null && (light.color = color);\n    intensity != null && (light.intensity = intensity);\n    umbraAngle != null && (light.umbraAngle = umbraAngle);\n    penumbraAngle != null && (light.penumbraAngle = penumbraAngle);\n\n    this.scene.add(light);\n\n    return light;\n};\n\n/**\n * Create a point light.\n * @param {Array.<number>|clay.Vector3} position Position of point light..\n * @param {number} [range=100] Falloff range of point light.\n * @param {Color} [color='#fff'] Color of point light.\n * @param {number} [intensity=1] Intensity of point light.\n */\nApp3D.prototype.createPointLight = function (position, range, color, intensity) {\n    var light = new __WEBPACK_IMPORTED_MODULE_18__light_Point__[\"a\" /* default */]();\n    light.position.setArray(position instanceof __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */] ? position.array : position);\n\n    if (typeof color === 'string') {\n        color = parseColor(color);\n    }\n    range != null && (light.range = range);\n    color != null && (light.color = color);\n    intensity != null && (light.intensity = intensity);\n\n    this.scene.add(light);\n\n    return light;\n};\n\n/**\n * Create a ambient light.\n * @param {Color} [color='#fff'] Color of ambient light.\n * @param {number} [intensity=1] Intensity of ambient light.\n */\nApp3D.prototype.createAmbientLight = function (color, intensity) {\n    var light = new __WEBPACK_IMPORTED_MODULE_20__light_Ambient__[\"a\" /* default */]();\n\n    if (typeof color === 'string') {\n        color = parseColor(color);\n    }\n    color != null && (light.color = color);\n    intensity != null && (light.intensity = intensity);\n\n    this.scene.add(light);\n\n    return light;\n};\n\n/**\n * Create an cubemap ambient light and an spherical harmonic ambient light\n * for specular and diffuse lighting in PBR rendering\n * @param {ImageLike|TextureCube} [envImage] Panorama environment image, HDR format is better. Or a pre loaded texture cube\n * @param {number} [specularIntenstity=0.7] Intensity of specular light.\n * @param {number} [diffuseIntenstity=0.7] Intensity of diffuse light.\n * @param {number} [exposure=1] Exposure of HDR image. Only if image in first paramter is HDR.\n * @param {number} [prefilteredCubemapSize=32] The size of prefilerted cubemap. Larger value will take more time to do expensive prefiltering.\n * @return {Promise}\n */\nApp3D.prototype.createAmbientCubemapLight = function (envImage, specIntensity, diffIntensity, exposure, prefilteredCubemapSize) {\n    var self = this;\n    if (exposure == null) {\n        exposure = 0;\n    }\n    if (prefilteredCubemapSize == null) {\n        prefilteredCubemapSize = 32;\n    }\n\n    var scene = this.scene;\n\n    var loadPromise;\n    if (envImage.textureType === 'textureCube') {\n        loadPromise = envImage.isRenderable()\n            ? Promise.resolve(envImage)\n            : new Promise(function (resolve, reject) {\n                envImage.success(function () {\n                    resolve(envImage);\n                });\n            });\n    }\n    else {\n        loadPromise = this.loadTexture(envImage, {\n            exposure: exposure\n        });\n    }\n\n    return loadPromise.then(function (envTexture) {\n        var specLight = new __WEBPACK_IMPORTED_MODULE_21__light_AmbientCubemap__[\"a\" /* default */]({\n            intensity: specIntensity != null ? specIntensity : 0.7\n        });\n        specLight.cubemap = envTexture;\n        envTexture.flipY = false;\n        // TODO Cache prefilter ?\n        specLight.prefilter(self.renderer, 32);\n\n        var diffLight = new __WEBPACK_IMPORTED_MODULE_22__light_AmbientSH__[\"a\" /* default */]({\n            intensity: diffIntensity != null ? diffIntensity : 0.7,\n            coefficients: __WEBPACK_IMPORTED_MODULE_27__util_sh__[\"a\" /* default */].projectEnvironmentMap(\n                self.renderer, specLight.cubemap, {\n                    lod: 1\n                }\n            )\n        });\n        scene.add(specLight);\n        scene.add(diffLight);\n\n        return {\n            specular: specLight,\n            diffuse: diffLight,\n            // Original environment map\n            environmentMap: envTexture\n        };\n    });\n};\n\n/**\n * Load a [glTF](https://github.com/KhronosGroup/glTF) format model.\n * You can convert FBX/DAE/OBJ format models to [glTF](https://github.com/KhronosGroup/glTF) with [fbx2gltf](https://github.com/pissang/claygl#fbx-to-gltf20-converter) python script,\n * or simply using the [Clay Viewer](https://github.com/pissang/clay-viewer) client application.\n * @param {string} url\n * @param {Object} opts\n * @param {string|clay.Shader} [opts.shader='clay.standard'] 'basic'|'lambert'|'standard'.\n * @param {boolean} [opts.waitTextureLoaded=false] If add to scene util textures are all loaded.\n * @param {boolean} [opts.autoPlayAnimation=true] If autoplay the animation of model.\n * @param {boolean} [opts.upAxis='y'] Change model to y up if upAxis is 'z'\n * @param {boolean} [opts.textureFlipY=false]\n * @param {boolean} [opts.textureConvertToPOT=false] If convert texture to power-of-two\n * @param {string} [opts.textureRootPath] Root path of texture. Default to be relative with glTF file.\n * @param {clay.Node} [parentNode] Parent node that model will be mounted. Default to be scene\n * @return {Promise}\n */\nApp3D.prototype.loadModel = function (url, opts, parentNode) {\n    if (typeof url !== 'string') {\n        throw new Error('Invalid URL.');\n    }\n\n    opts = opts || {};\n    if (opts.autoPlayAnimation == null) {\n        opts.autoPlayAnimation = true;\n    }\n    var shader = opts.shader || 'clay.standard';\n\n    var loaderOpts = {\n        rootNode: new __WEBPACK_IMPORTED_MODULE_16__Node__[\"a\" /* default */](),\n        shader: shader,\n        textureRootPath: opts.textureRootPath,\n        crossOrigin: 'Anonymous',\n        textureFlipY: opts.textureFlipY,\n        textureConvertToPOT: opts.textureConvertToPOT\n    };\n    if (opts.upAxis && opts.upAxis.toLowerCase() === 'z') {\n        loaderOpts.rootNode.rotation.identity().rotateX(-Math.PI / 2);\n    }\n\n    var loader = new __WEBPACK_IMPORTED_MODULE_15__loader_GLTF__[\"a\" /* default */](loaderOpts);\n\n    parentNode = parentNode || this.scene;\n    var timeline = this.timeline;\n    var self = this;\n\n    return new Promise(function (resolve, reject) {\n        function afterLoad(result) {\n            if (self._disposed) {\n                return;\n            }\n\n            parentNode.add(result.rootNode);\n            if (opts.autoPlayAnimation) {\n                result.clips.forEach(function (clip) {\n                    timeline.addClip(clip);\n                });\n            }\n            resolve(result);\n        }\n        loader.success(function (result) {\n            if (self._disposed) {\n                return;\n            }\n\n            if (!opts.waitTextureLoaded) {\n                afterLoad(result);\n            }\n            else {\n                Promise.all(result.textures.map(function (texture) {\n                    if (texture.isRenderable()) {\n                        return Promise.resolve(texture);\n                    }\n                    return new Promise(function (resolve) {\n                        texture.success(resolve);\n                        texture.error(resolve);\n                    });\n                })).then(function () {\n                    afterLoad(result);\n                }).catch(function () {\n                    afterLoad(result);\n                });\n            }\n        });\n        loader.error(function () {\n            reject();\n        });\n        loader.load(url);\n    });\n};\n\n\n// TODO cloneModel\n\n/**\n * Similar to `app.scene.cloneNode`, except it will mount the cloned node to the scene automatically.\n * See more in {@link clay.Scene#cloneNode}\n *\n * @param {clay.Node} node\n * @param {clay.Node} [parentNode] Parent node that new cloned node will be mounted.\n *          Default to have same parent with source node.\n * @return {clay.Node}\n */\nApp3D.prototype.cloneNode = function (node, parentNode) {\n    parentNode = parentNode || node.getParent();\n\n    var newNode = this.scene.cloneNode(node, parentNode);\n    if (parentNode) {\n        parentNode.add(newNode);\n    }\n\n    return newNode;\n};\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    App3D: App3D,\n    /**\n     * Create a 3D application that will manage the app initialization and loop.\n     *\n     * See more details at {@link clay.application.App3D}\n     *\n     * @name clay.application.create\n     * @method\n     * @param {HTMLElement|string} dom Container dom element or a selector string that can be used in `querySelector`\n     * @param {App3DNamespace} appNS Options and namespace used in creating app3D\n     *\n     * @return {clay.application.App3D}\n     *\n     * @example\n     *  clay.application.create('#app', {\n     *      init: function (app) {\n     *          app.createCube();\n     *          var camera = app.createCamera();\n     *          camera.position.set(0, 0, 2);\n     *      },\n     *      loop: function () { // noop }\n     *  })\n     */\n    create: function (dom, appNS) {\n        return new App3D(dom, appNS);\n    }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvYXBwbGljYXRpb24uanM/YzlmMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qKlxuICogSGVscGVycyBmb3IgY3JlYXRpbmcgYSBjb21tb24gM2QgYXBwbGljYXRpb24uXG4gKiBAbmFtZXNwYWNlIGNsYXkuYXBwbGljYXRpb25cbiAqL1xuXG4gLy8gVE9ETyBjcmVhdGVDb21wb3NpdG9yXG4gLy8gVE9ETyBEaXNwb3NlIHRlc3QuIGdlb0NhY2hlIHRlc3QuXG4gLy8gVE9ETyBUb25lbWFwcGluZyBleHBvc3VyZVxuIC8vIFRPRE8gZml0TW9kZWwuXG4gLy8gVE9ETyBQYXJ0aWNsZSA/XG5pbXBvcnQgUmVuZGVyZXIgZnJvbSAnLi9SZW5kZXJlcic7XG5pbXBvcnQgU2NlbmUgZnJvbSAnLi9TY2VuZSc7XG5pbXBvcnQgVGltZWxpbmUgZnJvbSAnLi9UaW1lbGluZSc7XG5pbXBvcnQgQ3ViZUdlbyBmcm9tICcuL2dlb21ldHJ5L0N1YmUnO1xuaW1wb3J0IFNwaGVyZUdlbyBmcm9tICcuL2dlb21ldHJ5L1NwaGVyZSc7XG5pbXBvcnQgUGxhbmVHZW8gZnJvbSAnLi9nZW9tZXRyeS9QbGFuZSc7XG5pbXBvcnQgUGFyYW1ldHJpY1N1cmZhY2VHZW8gZnJvbSAnLi9nZW9tZXRyeS9QYXJhbWV0cmljU3VyZmFjZSc7XG5pbXBvcnQgVGV4dHVyZTJEIGZyb20gJy4vVGV4dHVyZTJEJztcbmltcG9ydCBUZXh0dXJlQ3ViZSBmcm9tICcuL1RleHR1cmVDdWJlJztcbmltcG9ydCBUZXh0dXJlIGZyb20gJy4vVGV4dHVyZSc7XG5pbXBvcnQgTWVzaCBmcm9tICcuL01lc2gnO1xuaW1wb3J0IE1hdGVyaWFsIGZyb20gJy4vTWF0ZXJpYWwnO1xuaW1wb3J0IFBlcnNwZWN0aXZlQ2FtZXJhIGZyb20gJy4vY2FtZXJhL1BlcnNwZWN0aXZlJztcbmltcG9ydCBPcnRob2dyYXBoaWNDYW1lcmEgZnJvbSAnLi9jYW1lcmEvT3J0aG9ncmFwaGljJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4vbWF0aC9WZWN0b3IzJztcbmltcG9ydCBHTFRGTG9hZGVyIGZyb20gJy4vbG9hZGVyL0dMVEYnO1xuaW1wb3J0IE5vZGUgZnJvbSAnLi9Ob2RlJztcbmltcG9ydCBEaXJlY3Rpb25hbExpZ2h0IGZyb20gJy4vbGlnaHQvRGlyZWN0aW9uYWwnO1xuaW1wb3J0IFBvaW50TGlnaHQgZnJvbSAnLi9saWdodC9Qb2ludCc7XG5pbXBvcnQgU3BvdExpZ2h0IGZyb20gJy4vbGlnaHQvU3BvdCc7XG5pbXBvcnQgQW1iaWVudExpZ2h0IGZyb20gJy4vbGlnaHQvQW1iaWVudCc7XG5pbXBvcnQgQW1iaWVudEN1YmVtYXBMaWdodCBmcm9tICcuL2xpZ2h0L0FtYmllbnRDdWJlbWFwJztcbmltcG9ydCBBbWJpZW50U0hMaWdodCBmcm9tICcuL2xpZ2h0L0FtYmllbnRTSCc7XG5pbXBvcnQgU2hhZG93TWFwUGFzcyBmcm9tICcuL3ByZVBhc3MvU2hhZG93TWFwJztcbmltcG9ydCBSYXlQaWNraW5nIGZyb20gJy4vcGlja2luZy9SYXlQaWNraW5nJztcbmltcG9ydCBMUlVDYWNoZSBmcm9tICcuL2NvcmUvTFJVJztcbmltcG9ydCB1dGlsIGZyb20gJy4vY29yZS91dGlsJztcbmltcG9ydCBzaFV0aWwgZnJvbSAnLi91dGlsL3NoJztcbmltcG9ydCB0ZXh0dXJlVXRpbCBmcm9tICcuL3V0aWwvdGV4dHVyZSc7XG5pbXBvcnQgdmVuZG9yIGZyb20gJy4vY29yZS92ZW5kb3InO1xuXG5pbXBvcnQgY29sb3JVdGlsIGZyb20gJy4vY29yZS9jb2xvcic7XG52YXIgcGFyc2VDb2xvciA9IGNvbG9yVXRpbC5wYXJzZVRvRmxvYXQ7XG5cbmltcG9ydCBzaGFkZXJMaWJyYXJ5IGZyb20gJy4vc2hhZGVyL2J1aWx0aW4nO1xuaW1wb3J0IFNoYWRlciBmcm9tICcuL1NoYWRlcic7XG5cblxudmFyIEVWRV9OQU1FUyA9IFsnY2xpY2snLCAnZGJsY2xpY2snLCAnbW91c2VvdmVyJywgJ21vdXNlb3V0JywgJ21vdXNlbW92ZScsXG4gICAgJ3RvdWNoc3RhcnQnLCAndG91Y2hlbmQnLCAndG91Y2htb3ZlJyxcbiAgICAnbW91c2V3aGVlbCcsICdET01Nb3VzZVNjcm9sbCdcbl07XG5cbi8qKlxuICogQHR5cGVkZWYge3N0cmluZ3xIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IEltYWdlTGlrZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtzdHJpbmd8SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fGNsYXkuVGV4dHVyZTJEfSBUZXh0dXJlTGlrZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtzdHJpbmd8QXJyYXkuPG51bWJlcj59IENvbG9yXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge0hUTUxFbGVtZW50fHN0cmluZ30gRG9tUXVlcnlcbiAqL1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gR0xBdHRyaWJ1dGVzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFthbHBoYT10cnVlXVxuICogQHBhcmFtIHtib29sZWFufSBbZGVwdGg9dHJ1ZV1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3N0ZW5jaWw9dHJ1ZV1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2FudGlhbGlhcz10cnVlXVxuICogQHBhcmFtIHtib29sZWFufSBbcHJlbXVsdGlwbGllZEFscGhhPXRydWVdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtwcmVzZXJ2ZURyYXdpbmdCdWZmZXI9ZmFsc2VdXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBcHAzRE5hbWVzcGFjZVxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gaW5pdCBJbml0aWFsaXphdGlvbiBjYWxsYmFjayB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gaW5pdGluZyBhcHAuXG4gKiAgICAgICAgICAgICAgICAgICAgICBZb3UgY2FuIHJldHVybiBhIHByb21pc2UgaW4gaW5pdCB0byBzdGFydCB0aGUgbG9vcCBhc3luY2hyb25vdXNseSB3aGVuIHRoZSBwcm9taXNlIGlzIHJlc29sdmVkLlxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gbG9vcCBMb29wIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBjYWxsZWQgZWFjaCBmcmFtZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F1dG9SZW5kZXI9dHJ1ZV0gSWYgcmVuZGVyIGF1dG9tYXRpY2FsbHkgZWFjaCBmcmFtZS5cbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IFtiZWZvcmVSZW5kZXJdXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBbYWZ0ZXJSZW5kZXJdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3dpZHRoXSBDb250YWluZXIgd2lkdGguXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2hlaWdodF0gQ29udGFpbmVyIGhlaWdodC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGV2aWNlUGl4ZWxSYXRpb11cbiAqIEBwcm9wZXJ0eSB7R0xBdHRyaWJ1dGVzfSBbZ2xBdHRyaWJ1dGVzXSBBdHRyaWJ1dGVzIGZvciBjcmVhdGluZyBnbCBjb250ZXh0XG4gKiBAcHJvcGVydHkge09iamVjdC48c3RyaW5nLCBGdW5jdGlvbj59IFttZXRob2RzXSBNZXRob2RzIHRoYXQgd2lsbCBiZSBpbmplY3RlZCB0byBBcHAzRCNtZXRob2RzLlxuICogQHByb3BlcnR5IHtPYmplY3R9IFtncmFwaGljXSBHcmFwaGljIGNvbmZpZ3VyYXRpb24gaW5jbHVkaW5nIHNoYWRvdywgY29sb3Igc3BhY2UuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtncmFwaGljLnNoYWRvdz1mYWxzZV0gSWYgZW5hYmxlIHNoYWRvd1xuICogQHByb3BlcnR5IHtib29sZWFufSBbZ3JhcGhpYy5saW5lYXI9ZmFsc2VdIElmIHVzZSBsaW5lYXIgY29sb3Igc3BhY2VcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2dyYXBoaWMudG9uZW1hcHBpbmc9ZmFsc2VdIElmIGVuYWJsZSBBQ0VTIHRvbmUgbWFwcGluZy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2V2ZW50PWZhbHNlXSBJZiBlbmFibGUgbW91c2UvdG91Y2ggZXZlbnQuIEl0IHdpbGwgc2xvdyBkb3duIHRoZSBzeXN0ZW0gaWYgZ2VvbWV0cmllcyBhcmUgY29tcGxleC5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0YW5kYXJkTWF0ZXJpYWxNUkNvbmZpZ1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtuYW1lXVxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtzaGFkZXI9J3N0YW5kYXJkTVInXVxuICogQHByb3BlcnR5IHtDb2xvcn0gW2NvbG9yXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFthbHBoYV1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWV0YWxuZXNzXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyb3VnaG5lc3NdXG4gKiBAcHJvcGVydHkge0NvbG9yfSBbZW1pc3Npb25dXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2VtaXNzaW9uSW50ZW5zaXR5XVxuICogQHByb3BlcnR5IHtib29sZWFufSBbdHJhbnNwYXJlbnRdXG4gKiBAcHJvcGVydHkge1RleHR1cmVMaWtlfSBbZGlmZnVzZU1hcF1cbiAqIEBwcm9wZXJ0eSB7VGV4dHVyZUxpa2V9IFtub3JtYWxNYXBdXG4gKiBAcHJvcGVydHkge1RleHR1cmVMaWtlfSBbcm91Z2huZXNzTWFwXVxuICogQHByb3BlcnR5IHtUZXh0dXJlTGlrZX0gW21ldGFsbmVzc01hcF1cbiAqIEBwcm9wZXJ0eSB7VGV4dHVyZUxpa2V9IFtlbWlzc2l2ZU1hcF1cbiAqL1xuXG4vKipcbiAqIFVzaW5nIEFwcDNEIGlzIGEgbXVjaCBtb3JlIGNvbnZlbmllbnQgd2F5IHRvIGNyZWF0ZSBhbmQgbWFuYWdlIHlvdXIgM0QgYXBwbGljYXRpb24uXG4gKlxuICogSXQgcHJvdmlkZXMgdGhlIGFiaWxpdGllcyB0bzpcbiAqXG4gKiArIE1hbmFnZSBhcHBsaWNhdGlvbiBsb29wIGFuZCByZW5kZXJpbmcuXG4gKiArIENvbGxlY3QgR1BVIHJlc291cmNlIGF1dG9tYXRpY2FsbHkgd2l0aG91dCBtZW1vcnkgbGVhayBjb25jZXJuLlxuICogKyBNb3VzZSBldmVudCBtYW5hZ2VtZW50LlxuICogKyBDcmVhdGUgc2NlbmUgb2JqZWN0cywgbWF0ZXJpYWxzLCB0ZXh0dXJlcyB3aXRoIHNpbXBsZXIgY29kZS5cbiAqICsgTG9hZCBtb2RlbHMgd2l0aCBvbmUgbGluZSBvZiBjb2RlLlxuICogKyBQcm9taXNlZCBpbnRlcmZhY2VzLlxuICpcbiAqIEhlcmUgaXMgYSBiYXNpYyBleGFtcGxlIHRvIGNyZWF0ZSBhIHJvdGF0aW5nIGN1YmUuXG4gKlxuYGBganNcbnZhciBhcHAgPSBjbGF5LmFwcGxpY2F0aW9uLmNyZWF0ZSgnI3ZpZXdwb3J0Jywge1xuICAgIGluaXQ6IGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgcGVyc3BlY3RpdmUgY2FtZXJhLlxuICAgICAgICAvLyBGaXJzdCBwYXJhbWV0ZXIgaXMgdGhlIGNhbWVyYSBwb3NpdGlvbi4gV2hpY2ggaXMgaW4gZnJvbnQgb2YgdGhlIGN1YmUuXG4gICAgICAgIC8vIFNlY29uZCBwYXJhbWV0ZXIgaXMgdGhlIGNhbWVyYSBsb29rQXQgdGFyZ2V0LiBXaGljaCBpcyB0aGUgb3JpZ2luIG9mIHRoZSB3b3JsZCwgYW5kIHdoZXJlIHRoZSBjdWJlIHB1dHMuXG4gICAgICAgIHRoaXMuX2NhbWVyYSA9IGFwcC5jcmVhdGVDYW1lcmEoWzAsIDIsIDVdLCBbMCwgMCwgMF0pO1xuICAgICAgICAvLyBDcmVhdGUgYSBzYW1wbGUgY3ViZVxuICAgICAgICB0aGlzLl9jdWJlID0gYXBwLmNyZWF0ZUN1YmUoKTtcbiAgICAgICAgLy8gQ3JlYXRlIGEgZGlyZWN0aW9uYWwgbGlnaHQuIFRoZSBkaXJlY3Rpb24gaXMgZnJvbSB0b3AgcmlnaHQgdG8gbGVmdCBib3R0b20sIGF3YXkgZnJvbSBjYW1lcmEuXG4gICAgICAgIHRoaXMuX21haW5MaWdodCA9IGFwcC5jcmVhdGVEaXJlY3Rpb25hbExpZ2h0KFstMSwgLTEsIC0xXSk7XG4gICAgfSxcbiAgICBsb29wOiBmdW5jdGlvbiAoYXBwKSB7XG4gICAgICAgIC8vIFNpbXBseSByb3RhdGluZyB0aGUgY3ViZSBldmVyeSBmcmFtZS5cbiAgICAgICAgdGhpcy5fY3ViZS5yb3RhdGlvbi5yb3RhdGVZKGFwcC5mcmFtZVRpbWUgLyAxMDAwKTtcbiAgICB9XG59KTtcbmBgYFxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5hcHBsaWNhdGlvbi5BcHAzRFxuICogQHBhcmFtIHtEb21RdWVyeX0gZG9tIENvbnRhaW5lciBkb20gZWxlbWVudCBvciBhIHNlbGVjdG9yIHN0cmluZyB0aGF0IGNhbiBiZSB1c2VkIGluIGBxdWVyeVNlbGVjdG9yYFxuICogQHBhcmFtIHtBcHAzRE5hbWVzcGFjZX0gYXBwTlMgT3B0aW9ucyBhbmQgbmFtZXNwYWNlIHVzZWQgaW4gY3JlYXRpbmcgYXBwM0RcbiAqL1xuZnVuY3Rpb24gQXBwM0QoZG9tLCBhcHBOUykge1xuXG4gICAgYXBwTlMgPSBhcHBOUyB8fCB7fTtcbiAgICBhcHBOUy5ncmFwaGljID0gYXBwTlMuZ3JhcGhpYyB8fCB7fTtcblxuICAgIGFwcE5TLmdsQXR0cmlidXRlcyA9IGFwcE5TLmdsQXR0cmlidXRlcyB8fCB7fTtcblxuICAgIGlmIChhcHBOUy5hdXRvUmVuZGVyID09IG51bGwpIHtcbiAgICAgICAgYXBwTlMuYXV0b1JlbmRlciA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkb20gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZG9tKTtcbiAgICB9XG5cbiAgICBpZiAoIWRvbSkgeyB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZG9tJyk7IH1cblxuICAgIHZhciBpc0RvbUNhbnZhcyA9ICFkb20ubm9kZU5hbWUgIC8vIE5vdCBpbiBkb20gZW52aXJvbm1lbnRcbiAgICAgICAgfHwgZG9tLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09ICdDQU5WQVMnO1xuXG4gICAgdmFyIHJlbmRlcmVyT3B0cyA9IHt9O1xuICAgIGlzRG9tQ2FudmFzICYmIChyZW5kZXJlck9wdHMuY2FudmFzID0gZG9tKTtcbiAgICBhcHBOUy5kZXZpY2VQaXhlbFJhdGlvICYmIChyZW5kZXJlck9wdHMuZGV2aWNlUGl4ZWxSYXRpbyA9IGFwcE5TLmRldmljZVBpeGVsUmF0aW8pO1xuXG4gICAgW1xuICAgICAgICAnYWxwaGEnLCAnZGVwdGgnLCAnc3RlbmNpbCcsICdhbnRpYWxpYXMnLCAncHJlbXVsdGlwbGllZEFscGhhJywgJ3ByZXNlcnZlRHJhd2luZ0J1ZmZlcidcbiAgICBdLmZvckVhY2goZnVuY3Rpb24gKGF0dHJOYW1lKSB7XG4gICAgICAgIGlmIChhcHBOUy5nbEF0dHJpYnV0ZXNbYXR0ck5hbWVdICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJlbmRlcmVyT3B0c1thdHRyTmFtZV0gPSBhcHBOUy5nbEF0dHJpYnV0ZXNbYXR0ck5hbWVdO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgZ1JlbmRlcmVyID0gbmV3IFJlbmRlcmVyKHJlbmRlcmVyT3B0cyk7XG4gICAgdmFyIGdXaWR0aCA9IGFwcE5TLndpZHRoIHx8IGRvbS5jbGllbnRXaWR0aDtcbiAgICB2YXIgZ0hlaWdodCA9IGFwcE5TLmhlaWdodCB8fCBkb20uY2xpZW50SGVpZ2h0O1xuXG4gICAgdmFyIGdTY2VuZSA9IG5ldyBTY2VuZSgpO1xuICAgIHZhciBnVGltZWxpbmUgPSBuZXcgVGltZWxpbmUoKTtcbiAgICB2YXIgZ1NoYWRvd1Bhc3MgPSBhcHBOUy5ncmFwaGljLnNoYWRvdyAmJiBuZXcgU2hhZG93TWFwUGFzcygpO1xuICAgIHZhciBnUmF5UGlja2luZyA9IGFwcE5TLmV2ZW50ICYmIG5ldyBSYXlQaWNraW5nKHtcbiAgICAgICAgc2NlbmU6IGdTY2VuZSxcbiAgICAgICAgcmVuZGVyZXI6IGdSZW5kZXJlclxuICAgIH0pO1xuXG4gICAgIWlzRG9tQ2FudmFzICYmIGRvbS5hcHBlbmRDaGlsZChnUmVuZGVyZXIuY2FudmFzKTtcblxuICAgIGdSZW5kZXJlci5yZXNpemUoZ1dpZHRoLCBnSGVpZ2h0KTtcblxuICAgIHZhciBnRnJhbWVUaW1lID0gMDtcbiAgICB2YXIgZ0VsYXBzZWRUaW1lID0gMDtcblxuICAgIGdUaW1lbGluZS5zdGFydCgpO1xuXG4gICAgdmFyIHVzZXJNZXRob2RzID0ge307XG4gICAgZm9yICh2YXIga2V5IGluIGFwcE5TLm1ldGhvZHMpIHtcbiAgICAgICAgdXNlck1ldGhvZHNba2V5XSA9IGFwcE5TLm1ldGhvZHNba2V5XS5iaW5kKGFwcE5TLCB0aGlzKTtcbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250YWluZXIgZG9tIGVsZW1lbnRcbiAgICAgICAgICogQG5hbWUgY2xheS5hcHBsaWNhdGlvbi5BcHAzRCNjb250YWluZXJcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgY29udGFpbmVyOiB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9tOyB9IH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmFtZSBjbGF5LmFwcGxpY2F0aW9uLkFwcDNEI3JlbmRlcmVyXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlJlbmRlcmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgcmVuZGVyZXI6IHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBnUmVuZGVyZXI7IH19LFxuICAgICAgICAvKipcbiAgICAgICAgICogQG5hbWUgY2xheS5hcHBsaWNhdGlvbi5BcHAzRCNzY2VuZVxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5SZW5kZXJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHNjZW5lOiB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZ1NjZW5lOyB9fSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuYW1lIGNsYXkuYXBwbGljYXRpb24uQXBwM0QjdGltZWxpbmVcbiAgICAgICAgICogQHR5cGUge2NsYXkuUmVuZGVyZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aW1lbGluZTogeyBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdUaW1lbGluZTsgfX0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaW1lIGVsYXBzZWQgc2luY2UgbGFzdCBmcmFtZS4gQ2FuIGJlIHVzZWQgaW4gbG9vcCB0byBjYWxjdWxhdGUgdGhlIG1vdmVtZW50LlxuICAgICAgICAgKiBAbmFtZSBjbGF5LmFwcGxpY2F0aW9uLkFwcDNEI2ZyYW1lVGltZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgZnJhbWVUaW1lOiB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZ0ZyYW1lVGltZTsgfX0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaW1lIGVsYXBzZWQgc2luY2UgYXBwbGljYXRpb24gY3JlYXRlZC5cbiAgICAgICAgICogQG5hbWUgY2xheS5hcHBsaWNhdGlvbi5BcHAzRCNlbGFwc2VkVGltZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgZWxhcHNlZFRpbWU6IHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBnRWxhcHNlZFRpbWU7IH19LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaWR0aCBvZiB2aWV3cG9ydC5cbiAgICAgICAgICogQG5hbWUgY2xheS5hcHBsaWNhdGlvbi5BcHAzRCN3aWR0aFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgd2lkdGg6IHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBnUmVuZGVyZXIuZ2V0V2lkdGgoKTsgfX0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIZWlnaHQgb2Ygdmlld3BvcnQuXG4gICAgICAgICAqIEBuYW1lIGNsYXkuYXBwbGljYXRpb24uQXBwM0QjaGVpZ2h0XG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBoZWlnaHQ6IHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBnUmVuZGVyZXIuZ2V0SGVpZ2h0KCk7IH19LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNZXRob2RzIGZyb20ge0BsaW5rIGNsYXkuYXBwbGljYXRpb24uY3JlYXRlfVxuICAgICAgICAgKiBAbmFtZSBjbGF5LmFwcGxpY2F0aW9uLkFwcDNEI21ldGhvZHNcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIG1ldGhvZHM6IHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB1c2VyTWV0aG9kczsgfSB9LFxuXG4gICAgICAgIF9zaGFkb3dQYXNzOiB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZ1NoYWRvd1Bhc3M7IH0gfSxcblxuICAgICAgICBfYXBwTlM6IHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBhcHBOUzsgfSB9LFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmVzaXplIHRoZSBhcHBsaWNhdGlvbi4gV2lsbCB1c2UgdGhlIGNvbnRhaW5lciBjbGllbnRXaWR0aC9jbGllbnRIZWlnaHQgaWYgd2lkdGgvaGVpZ2h0IGluIHBhcmFtZXRlcnMgYXJlIG5vdCBnaXZlbi5cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAbWVtYmVyT2Yge2NsYXkuYXBwbGljYXRpb24uQXBwM0R9XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt3aWR0aF1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2hlaWdodF1cbiAgICAgKi9cbiAgICB0aGlzLnJlc2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIGdXaWR0aCA9IHdpZHRoIHx8IGFwcE5TLndpZHRoIHx8IGRvbS5jbGllbnRXaWR0aDtcbiAgICAgICAgZ0hlaWdodCA9IGhlaWdodCB8fCBkb20uaGVpZ2h0IHx8IGRvbS5jbGllbnRIZWlnaHQ7XG4gICAgICAgIGdSZW5kZXJlci5yZXNpemUoZ1dpZHRoLCBnSGVpZ2h0KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGlzcG9zZSB0aGUgYXBwbGljYXRpb25cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKi9cbiAgICB0aGlzLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VkID0gdHJ1ZTtcblxuICAgICAgICBpZiAoYXBwTlMuZGlzcG9zZSkge1xuICAgICAgICAgICAgYXBwTlMuZGlzcG9zZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBnVGltZWxpbmUuc3RvcCgpO1xuICAgICAgICBnUmVuZGVyZXIuZGlzcG9zZVNjZW5lKGdTY2VuZSk7XG4gICAgICAgIGdTaGFkb3dQYXNzICYmIGdTaGFkb3dQYXNzLmRpc3Bvc2UoZ1JlbmRlcmVyKTtcblxuICAgICAgICBkb20uaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIEVWRV9OQU1FUy5mb3JFYWNoKGZ1bmN0aW9uIChldmVUeXBlKSB7XG4gICAgICAgICAgICB0aGlzW21ha2VIYW5kbGVyTmFtZShldmVUeXBlKV0gJiYgdmVuZG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9tLCBtYWtlSGFuZGxlck5hbWUoZXZlVHlwZSkpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9O1xuXG4gICAgZ1JheVBpY2tpbmcgJiYgdGhpcy5faW5pdE1vdXNlRXZlbnRzKGdSYXlQaWNraW5nKTtcblxuICAgIHRoaXMuX2dlb0NhY2hlID0gbmV3IExSVUNhY2hlKDIwKTtcbiAgICB0aGlzLl90ZXhDYWNoZSA9IG5ldyBMUlVDYWNoZSgyMCk7XG5cbiAgICAvLyBHUFUgUmVzb3VyY2VzLlxuICAgIHRoaXMuX3RleHR1cmVzTGlzdCA9IHt9O1xuICAgIHRoaXMuX2dlb21ldHJpZXNMaXN0ID0ge307XG5cbiAgICAvLyBEbyBpbml0IHRoZSBhcHBsaWNhdGlvbi5cbiAgICB2YXIgaW5pdFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoYXBwTlMuaW5pdCAmJiBhcHBOUy5pbml0KHRoaXMpKTtcbiAgICAvLyBVc2UgdGhlIGluaXRlZCBjYW1lcmEuXG4gICAgZ1JheVBpY2tpbmcgJiYgKGdSYXlQaWNraW5nLmNhbWVyYSA9IGdTY2VuZS5nZXRNYWluQ2FtZXJhKCkpO1xuXG4gICAgaWYgKCFhcHBOUy5sb29wKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTWlzcyBsb29wIG1ldGhvZC4nKTtcbiAgICB9XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaW5pdFByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGdUaW1lbGluZS5vbignZnJhbWUnLCBmdW5jdGlvbiAoZnJhbWVUaW1lKSB7XG4gICAgICAgICAgICBnRnJhbWVUaW1lID0gZnJhbWVUaW1lO1xuICAgICAgICAgICAgZ0VsYXBzZWRUaW1lICs9IGZyYW1lVGltZTtcblxuICAgICAgICAgICAgdmFyIGNhbWVyYSA9IGdTY2VuZS5nZXRNYWluQ2FtZXJhKCk7XG4gICAgICAgICAgICBpZiAoY2FtZXJhKSB7XG4gICAgICAgICAgICAgICAgY2FtZXJhLmFzcGVjdCA9IGdSZW5kZXJlci5nZXRWaWV3cG9ydEFzcGVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ1JheVBpY2tpbmcgJiYgKGdSYXlQaWNraW5nLmNhbWVyYSA9IGNhbWVyYSk7XG5cbiAgICAgICAgICAgIGFwcE5TLmxvb3AgJiYgYXBwTlMubG9vcChzZWxmKTtcblxuICAgICAgICAgICAgaWYgKGFwcE5TLmF1dG9SZW5kZXIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxmLmNvbGxlY3RSZXNvdXJjZXMoKTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfSk7XG5cbiAgICBnU2NlbmUub24oJ2JlZm9yZXJlbmRlcicsIGZ1bmN0aW9uIChyZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgcmVuZGVyTGlzdCkge1xuICAgICAgICBpZiAodGhpcy5faW5SZW5kZXIpIHtcbiAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIGdyYXBoaWMgb3B0aW9ucyB3aGVuIHVzaW5nICNyZW5kZXIgZnVuY3Rpb24uXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVHcmFwaGljT3B0aW9ucyhhcHBOUy5ncmFwaGljLCByZW5kZXJMaXN0Lm9wYXF1ZSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlR3JhcGhpY09wdGlvbnMoYXBwTlMuZ3JhcGhpYywgcmVuZGVyTGlzdC50cmFuc3BhcmVudCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfSwgdGhpcyk7XG59XG5cbmZ1bmN0aW9uIGlzSW1hZ2VMaWtlRWxlbWVudCh2YWwpIHtcbiAgICByZXR1cm4gKHR5cGVvZiBJbWFnZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsIGluc3RhbmNlb2YgSW1hZ2UpXG4gICAgICAgIHx8ICh0eXBlb2YgSFRNTENhbnZhc0VsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHZhbCBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KVxuICAgICAgICB8fCAodHlwZW9mIEhUTUxWaWRlb0VsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHZhbCBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiBnZXRLZXlGcm9tSW1hZ2VMaWtlKHZhbCkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJ1xuICAgICAgICA/IHZhbCA6ICh2YWwuX19rZXlfXyB8fCAodmFsLl9fa2V5X18gPSB1dGlsLmdlbkdVSUQoKSkpO1xufVxuXG5mdW5jdGlvbiBtYWtlSGFuZGxlck5hbWUoZXZlVHlwZSkge1xuICAgIHJldHVybiAnXycgKyBldmVUeXBlICsgJ0hhbmRsZXInO1xufVxuXG5mdW5jdGlvbiBwYWNrYWdlRXZlbnQoZXZlbnRUeXBlLCBwaWNrUmVzdWx0LCBvZmZzZXRYLCBvZmZzZXRZLCB3aGVlbERlbHRhKSB7XG4gICAgdmFyIGV2ZW50ID0gdXRpbC5jbG9uZShwaWNrUmVzdWx0KTtcbiAgICBldmVudC50eXBlID0gZXZlbnRUeXBlO1xuICAgIGV2ZW50Lm9mZnNldFggPSBvZmZzZXRYO1xuICAgIGV2ZW50Lm9mZnNldFkgPSBvZmZzZXRZO1xuICAgIGlmICh3aGVlbERlbHRhICE9PSBudWxsKSB7XG4gICAgICAgIGV2ZW50LndoZWVsRGVsdGEgPSB3aGVlbERlbHRhO1xuICAgIH1cbiAgICByZXR1cm4gZXZlbnQ7XG59XG5cbmZ1bmN0aW9uIGJ1YmJsaW5nRXZlbnQodGFyZ2V0LCBldmVudCkge1xuICAgIHdoaWxlICh0YXJnZXQgJiYgIWV2ZW50LmNhbmNlbEJ1YmJsZSkge1xuICAgICAgICB0YXJnZXQudHJpZ2dlcihldmVudC50eXBlLCBldmVudCk7XG4gICAgICAgIHRhcmdldCA9IHRhcmdldC5nZXRQYXJlbnQoKTtcbiAgICB9XG59XG5cbkFwcDNELnByb3RvdHlwZS5faW5pdE1vdXNlRXZlbnRzID0gZnVuY3Rpb24gKHJheVBpY2tpbmcpIHtcbiAgICB2YXIgZG9tID0gdGhpcy5jb250YWluZXI7XG5cbiAgICB2YXIgb2xkVGFyZ2V0ID0gbnVsbDtcbiAgICBFVkVfTkFNRVMuZm9yRWFjaChmdW5jdGlvbiAoX2V2ZVR5cGUpIHtcbiAgICAgICAgdmVuZG9yLmFkZEV2ZW50TGlzdGVuZXIoZG9tLCBfZXZlVHlwZSwgdGhpc1ttYWtlSGFuZGxlck5hbWUoX2V2ZVR5cGUpXSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIXJheVBpY2tpbmcuY2FtZXJhKSB7IC8vIE5vdCBoYXZlIGNhbWVyYSB5ZXQuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCAmJiBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBib3ggPSBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0WCwgb2Zmc2V0WTtcbiAgICAgICAgICAgIHZhciBldmVUeXBlID0gX2V2ZVR5cGU7XG5cbiAgICAgICAgICAgIGlmIChldmVUeXBlLmluZGV4T2YoJ3RvdWNoJykgPj0gMCkge1xuICAgICAgICAgICAgICAgIHZhciB0b3VjaCA9IGV2ZVR5cGUgIT09ICd0b3VjaGVuZCdcbiAgICAgICAgICAgICAgICAgICAgPyBlLnRhcmdldFRvdWNoZXNbMF1cbiAgICAgICAgICAgICAgICAgICAgOiBlLmNoYW5nZWRUb3VjaGVzWzBdO1xuICAgICAgICAgICAgICAgIGlmIChldmVUeXBlID09PSAndG91Y2hzdGFydCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlVHlwZSA9ICdtb3VzZWRvd24nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVUeXBlID09PSAndG91Y2hlbmQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZVR5cGUgPSAnbW91c2V1cCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZVR5cGUgPT09ICd0b3VjaG1vdmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZVR5cGUgPSAnbW91c2Vtb3ZlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2Zmc2V0WCA9IHRvdWNoLmNsaWVudFggLSBib3gubGVmdDtcbiAgICAgICAgICAgICAgICBvZmZzZXRZID0gdG91Y2guY2xpZW50WSAtIGJveC50b3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvZmZzZXRYID0gZS5jbGllbnRYIC0gYm94LmxlZnQ7XG4gICAgICAgICAgICAgICAgb2Zmc2V0WSA9IGUuY2xpZW50WSAtIGJveC50b3A7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwaWNrUmVzdWx0ID0gcmF5UGlja2luZy5waWNrKG9mZnNldFgsIG9mZnNldFkpO1xuXG4gICAgICAgICAgICB2YXIgZGVsdGE7XG4gICAgICAgICAgICBpZiAoZXZlVHlwZSA9PT0gJ0RPTU1vdXNlU2Nyb2xsJyB8fCBldmVUeXBlID09PSAnbW91c2V3aGVlbCcpIHtcbiAgICAgICAgICAgICAgICBkZWx0YSA9IChlLndoZWVsRGVsdGEpID8gZS53aGVlbERlbHRhIC8gMTIwIDogLShlLmRldGFpbCB8fCAwKSAvIDM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwaWNrUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgLy8gSnVzdCBpZ25vcmUgc2lsZW50IGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgaWYgKHBpY2tSZXN1bHQudGFyZ2V0LnNpbGVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGV2ZVR5cGUgPT09ICdtb3VzZW1vdmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBFTkRJTkcgdG91Y2hkb3duIHNob3VsZCB0cmlnZ2VyIG1vdXNlb3ZlciBldmVudCA/XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRDaGFuZ2VkID0gcGlja1Jlc3VsdC50YXJnZXQgIT09IG9sZFRhcmdldDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldENoYW5nZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZFRhcmdldCAmJiBidWJibGluZ0V2ZW50KG9sZFRhcmdldCwgcGFja2FnZUV2ZW50KCdtb3VzZW91dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IG9sZFRhcmdldFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgb2Zmc2V0WCwgb2Zmc2V0WSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJ1YmJsaW5nRXZlbnQocGlja1Jlc3VsdC50YXJnZXQsIHBhY2thZ2VFdmVudCgnbW91c2Vtb3ZlJywgcGlja1Jlc3VsdCwgb2Zmc2V0WCwgb2Zmc2V0WSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Q2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnViYmxpbmdFdmVudChwaWNrUmVzdWx0LnRhcmdldCwgcGFja2FnZUV2ZW50KCdtb3VzZW92ZXInLCBwaWNrUmVzdWx0LCBvZmZzZXRYLCBvZmZzZXRZKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1YmJsaW5nRXZlbnQocGlja1Jlc3VsdC50YXJnZXQsIHBhY2thZ2VFdmVudChldmVUeXBlLCBwaWNrUmVzdWx0LCBvZmZzZXRYLCBvZmZzZXRZLCBkZWx0YSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvbGRUYXJnZXQgPSBwaWNrUmVzdWx0LnRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9sZFRhcmdldCkge1xuICAgICAgICAgICAgICAgIGJ1YmJsaW5nRXZlbnQob2xkVGFyZ2V0LCBwYWNrYWdlRXZlbnQoJ21vdXNlb3V0Jywge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IG9sZFRhcmdldFxuICAgICAgICAgICAgICAgIH0sIG9mZnNldFgsIG9mZnNldFkpKTtcbiAgICAgICAgICAgICAgICBvbGRUYXJnZXQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LCB0aGlzKTtcbn07XG5cbkFwcDNELnByb3RvdHlwZS5fdXBkYXRlR3JhcGhpY09wdGlvbnMgPSBmdW5jdGlvbiAoZ3JhcGhpY09wdHMsIGxpc3QsIGlzU2t5Ym94KSB7XG4gICAgdmFyIGVuYWJsZVRvbmVtYXBwaW5nID0gISFncmFwaGljT3B0cy50b25lbWFwcGluZztcbiAgICB2YXIgaXNMaW5lYXJTcGFjZSA9ICEhZ3JhcGhpY09wdHMubGluZWFyO1xuXG4gICAgdmFyIHByZXZNYXRlcmlhbDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbWF0ID0gbGlzdFtpXS5tYXRlcmlhbDtcbiAgICAgICAgaWYgKG1hdCA9PT0gcHJldk1hdGVyaWFsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVuYWJsZVRvbmVtYXBwaW5nID8gbWF0LmRlZmluZSgnZnJhZ21lbnQnLCAnVE9ORU1BUFBJTkcnKSA6IG1hdC51bmRlZmluZSgnZnJhZ21lbnQnLCAnVE9ORU1BUFBJTkcnKTtcbiAgICAgICAgaWYgKGlzTGluZWFyU3BhY2UpIHtcbiAgICAgICAgICAgIHZhciBkZWNvZGVTUkdCID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChpc1NreWJveCAmJiBtYXQuZ2V0KCdlbnZpcm9ubWVudE1hcCcpICYmICFtYXQuZ2V0KCdlbnZpcm9ubWVudE1hcCcpLnNSR0IpIHtcbiAgICAgICAgICAgICAgICBkZWNvZGVTUkdCID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWNvZGVTUkdCICYmIG1hdC5kZWZpbmUoJ2ZyYWdtZW50JywgJ1NSR0JfREVDT0RFJyk7XG4gICAgICAgICAgICBtYXQuZGVmaW5lKCdmcmFnbWVudCcsICdTUkdCX0VOQ09ERScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWF0LnVuZGVmaW5lKCdmcmFnbWVudCcsICdTUkdCX0RFQ09ERScpO1xuICAgICAgICAgICAgbWF0LnVuZGVmaW5lKCdmcmFnbWVudCcsICdTUkdCX0VOQ09ERScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJldk1hdGVyaWFsID0gbWF0O1xuICAgIH1cbn07XG5cbkFwcDNELnByb3RvdHlwZS5fZG9SZW5kZXIgPSBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lKSB7XG4gICAgdmFyIGNhbWVyYSA9IHNjZW5lLmdldE1haW5DYW1lcmEoKTtcbiAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSwgdHJ1ZSk7XG59O1xuXG4vKipcbiAqIERvIHJlbmRlclxuICovXG5BcHAzRC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2luUmVuZGVyID0gdHJ1ZTtcbiAgICB2YXIgYXBwTlMgPSB0aGlzLl9hcHBOUztcbiAgICBhcHBOUy5iZWZvcmVSZW5kZXIgJiYgYXBwTlMuYmVmb3JlUmVuZGVyKHNlbGYpO1xuXG4gICAgdmFyIHNjZW5lID0gdGhpcy5zY2VuZTtcbiAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyO1xuICAgIHZhciBzaGFkb3dQYXNzID0gdGhpcy5fc2hhZG93UGFzcztcblxuICAgIHNjZW5lLnVwZGF0ZSgpO1xuICAgIHZhciBza3lib3hMaXN0ID0gW107XG4gICAgc2NlbmUuc2t5Ym94ICYmIHNreWJveExpc3QucHVzaChzY2VuZS5za3lib3gpO1xuICAgIHNjZW5lLnNreWRvbWUgJiYgc2t5Ym94TGlzdC5wdXNoKHNjZW5lLnNreWRvbWUpO1xuXG4gICAgdGhpcy5fdXBkYXRlR3JhcGhpY09wdGlvbnMoYXBwTlMuZ3JhcGhpYywgc2t5Ym94TGlzdCwgdHJ1ZSk7XG4gICAgLy8gUmVuZGVyIHNoYWRvdyBwYXNzXG4gICAgc2hhZG93UGFzcyAmJiBzaGFkb3dQYXNzLnJlbmRlcihyZW5kZXJlciwgc2NlbmUsIG51bGwsIHRydWUpO1xuXG4gICAgdGhpcy5fZG9SZW5kZXIocmVuZGVyZXIsIHNjZW5lLCB0cnVlKTtcblxuICAgIGFwcE5TLmFmdGVyUmVuZGVyICYmIGFwcE5TLmFmdGVyUmVuZGVyKHNlbGYpO1xuICAgIHRoaXMuX2luUmVuZGVyID0gZmFsc2U7XG59O1xuXG5BcHAzRC5wcm90b3R5cGUuY29sbGVjdFJlc291cmNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyO1xuICAgIHZhciBzY2VuZSA9IHRoaXMuc2NlbmU7XG4gICAgdmFyIHRleHR1cmVzTGlzdCA9IHRoaXMuX3RleHR1cmVzTGlzdDtcbiAgICB2YXIgZ2VvbWV0cmllc0xpc3QgPSB0aGlzLl9nZW9tZXRyaWVzTGlzdDtcbiAgICAvLyBNYXJrIGFsbCByZXNvdXJjZXMgdW51c2VkO1xuICAgIG1hcmtVbnVzZWQodGV4dHVyZXNMaXN0KTtcbiAgICBtYXJrVW51c2VkKGdlb21ldHJpZXNMaXN0KTtcblxuICAgIC8vIENvbGxlY3QgcmVzb3VyY2VzIHVzZWQgaW4gdGhpcyBmcmFtZS5cbiAgICB2YXIgbmV3VGV4dHVyZXNMaXN0ID0gW107XG4gICAgdmFyIG5ld0dlb21ldHJpZXNMaXN0ID0gW107XG4gICAgY29sbGVjdFJlc291cmNlcyhzY2VuZSwgbmV3VGV4dHVyZXNMaXN0LCBuZXdHZW9tZXRyaWVzTGlzdCk7XG5cbiAgICAvLyBEaXNwb3NlIHRob3NlIHVuc2VkIHJlc291cmNlcy5cbiAgICBjaGVja0FuZERpc3Bvc2UocmVuZGVyZXIsIHRleHR1cmVzTGlzdCk7XG4gICAgY2hlY2tBbmREaXNwb3NlKHJlbmRlcmVyLCBnZW9tZXRyaWVzTGlzdCk7XG5cbiAgICB0aGlzLl90ZXh0dXJlc0xpc3QgPSBuZXdUZXh0dXJlc0xpc3Q7XG4gICAgdGhpcy5fZ2VvbWV0cmllc0xpc3QgPSBuZXdHZW9tZXRyaWVzTGlzdDtcbn07XG5cblxuZnVuY3Rpb24gbWFya1VudXNlZChyZXNvdXJjZUxpc3QpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc291cmNlTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXNvdXJjZUxpc3RbaV0uX191c2VkID0gMDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrQW5kRGlzcG9zZShyZW5kZXJlciwgcmVzb3VyY2VMaXN0KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNvdXJjZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFyZXNvdXJjZUxpc3RbaV0uX191c2VkKSB7XG4gICAgICAgICAgICByZXNvdXJjZUxpc3RbaV0uZGlzcG9zZShyZW5kZXJlcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVVzZWQocmVzb3VyY2UsIGxpc3QpIHtcbiAgICByZXNvdXJjZS5fX3VzZWQgPSByZXNvdXJjZS5fX3VzZWQgfHwgMDtcbiAgICByZXNvdXJjZS5fX3VzZWQrKztcbiAgICBpZiAocmVzb3VyY2UuX191c2VkID09PSAxKSB7XG4gICAgICAgIC8vIERvbid0IHB1c2ggdG8gdGhlIGxpc3QgdHdpY2UuXG4gICAgICAgIGxpc3QucHVzaChyZXNvdXJjZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY29sbGVjdFJlc291cmNlcyhzY2VuZSwgdGV4dHVyZVJlc291cmNlTGlzdCwgZ2VvbWV0cnlSZXNvdXJjZUxpc3QpIHtcbiAgICB2YXIgcHJldk1hdGVyaWFsO1xuICAgIHZhciBwcmV2R2VvbWV0cnk7XG4gICAgc2NlbmUudHJhdmVyc2UoZnVuY3Rpb24gKHJlbmRlcmFibGUpIHtcbiAgICAgICAgaWYgKHJlbmRlcmFibGUuaXNSZW5kZXJhYmxlKCkpIHtcbiAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IHJlbmRlcmFibGUuZ2VvbWV0cnk7XG4gICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSByZW5kZXJhYmxlLm1hdGVyaWFsO1xuXG4gICAgICAgICAgICAvLyBUT0RPIG9wdGltaXplISFcbiAgICAgICAgICAgIGlmIChtYXRlcmlhbCAhPT0gcHJldk1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRleHR1cmVVbmlmb3JtcyA9IG1hdGVyaWFsLmdldFRleHR1cmVVbmlmb3JtcygpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHUgPSAwOyB1IDwgdGV4dHVyZVVuaWZvcm1zLmxlbmd0aDsgdSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1bmlmb3JtTmFtZSA9IHRleHR1cmVVbmlmb3Jtc1t1XTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IG1hdGVyaWFsLnVuaWZvcm1zW3VuaWZvcm1OYW1lXS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVuaWZvcm1UeXBlID0gbWF0ZXJpYWwudW5pZm9ybXNbdW5pZm9ybU5hbWVdLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodW5pZm9ybVR5cGUgPT09ICd0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVXNlZCh2YWwsIHRleHR1cmVSZXNvdXJjZUxpc3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHVuaWZvcm1UeXBlID09PSAndHYnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHZhbC5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxba10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVXNlZCh2YWxba10sIHRleHR1cmVSZXNvdXJjZUxpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnZW9tZXRyeSAhPT0gcHJldkdlb21ldHJ5KSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlVXNlZChnZW9tZXRyeSwgZ2VvbWV0cnlSZXNvdXJjZUxpc3QpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwcmV2TWF0ZXJpYWwgPSBtYXRlcmlhbDtcbiAgICAgICAgICAgIHByZXZHZW9tZXRyeSA9IGdlb21ldHJ5O1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBmb3IgKHZhciBrID0gMDsgayA8IHNjZW5lLmxpZ2h0cy5sZW5ndGg7IGsrKykge1xuICAgICAgICAvLyBUcmFjayBBbWJpZW50Q3ViZW1hcFxuICAgICAgICBpZiAoc2NlbmUubGlnaHRzW2tdLmN1YmVtYXApIHtcbiAgICAgICAgICAgIHVwZGF0ZVVzZWQoc2NlbmUubGlnaHRzW2tdLmN1YmVtYXAsIHRleHR1cmVSZXNvdXJjZUxpc3QpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBMb2FkIGEgdGV4dHVyZSBmcm9tIGltYWdlIG9yIHN0cmluZy5cbiAqIEBwYXJhbSB7SW1hZ2VMaWtlfSBpbWdcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c10gVGV4dHVyZSBvcHRpb25zLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5mbGlwWT10cnVlXSBJZiBmbGlwWS4gU2VlIHtAbGluayBjbGF5LlRleHR1cmUuZmxpcFl9XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmNvbnZlcnRUb1BPVD1mYWxzZV0gRm9yY2UgY29udmVydCBOb25lIFBvd2VyIG9mIFR3byB0ZXh0dXJlIHRvIFBvd2VyIG9mIHR3byBzbyBpdCBjYW4gYmUgdGlsZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuYW5pc290cm9waWNdIEFuaXNvdHJvcGljIGZpbHRlcmluZy4gU2VlIHtAbGluayBjbGF5LlRleHR1cmUuYW5pc290cm9waWN9XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMud3JhcFM9Y2xheS5UZXh0dXJlLlJFUEVBVF0gU2VlIHtAbGluayBjbGF5LlRleHR1cmUud3JhcFN9XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMud3JhcFQ9Y2xheS5UZXh0dXJlLlJFUEVBVF0gU2VlIHtAbGluayBjbGF5LlRleHR1cmUud3JhcFR9XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMubWluRmlsdGVyPWNsYXkuVGV4dHVyZS5MSU5FQVJfTUlQTUFQX0xJTkVBUl0gU2VlIHtAbGluayBjbGF5LlRleHR1cmUubWluRmlsdGVyfVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLm1hZ0ZpbHRlcj1jbGF5LlRleHR1cmUuTElORUFSXSBTZWUge0BsaW5rIGNsYXkuVGV4dHVyZS5tYWdGaWx0ZXJ9XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuZXhwb3N1cmVdIE9ubHkgYmUgdXNlZCB3aGVuIHNvdXJjZSBpcyBhIEhEUiBpbWFnZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3VzZUNhY2hlXSBJZiB1c2UgY2FjaGUuXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICogQGV4YW1wbGVcbiAqICBhcHAubG9hZFRleHR1cmUoJ2RpZmZ1c2VNYXAuanBnJylcbiAqICAgICAgLnRoZW4oZnVuY3Rpb24gKHRleHR1cmUpIHtcbiAqICAgICAgICAgIG1hdGVyaWFsLnNldCgnZGlmZnVzZU1hcCcsIHRleHR1cmUpO1xuICogICAgICB9KTtcbiAqL1xuQXBwM0QucHJvdG90eXBlLmxvYWRUZXh0dXJlID0gZnVuY3Rpb24gKHVybE9ySW1nLCBvcHRzLCB1c2VDYWNoZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIga2V5ID0gZ2V0S2V5RnJvbUltYWdlTGlrZSh1cmxPckltZyk7XG4gICAgaWYgKHVzZUNhY2hlKSB7XG4gICAgICAgIGlmICh0aGlzLl90ZXhDYWNoZS5nZXQoa2V5KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RleENhY2hlLmdldChrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFRPRE8gUHJvbWlzZSA/XG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciB0ZXh0dXJlID0gc2VsZi5sb2FkVGV4dHVyZVN5bmModXJsT3JJbWcsIG9wdHMpO1xuICAgICAgICBpZiAoIXRleHR1cmUuaXNSZW5kZXJhYmxlKCkpIHtcbiAgICAgICAgICAgIHRleHR1cmUuc3VjY2VzcyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuX2Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0ZXh0dXJlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGV4dHVyZS5lcnJvcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuX2Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdmUodGV4dHVyZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAodXNlQ2FjaGUpIHtcbiAgICAgICAgdGhpcy5fdGV4Q2FjaGUucHV0KGtleSwgcHJvbWlzZSk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSB0ZXh0dXJlIGZyb20gaW1hZ2Ugb3Igc3RyaW5nIHN5bmNocm9ub3VzbHkuIFRleHR1cmUgY2FuIGJlIHVzZSBkaXJlY3RseSBhbmQgZG9uJ3QgaGF2ZSB0byB3YWl0IGZvciBpdCdzIGxvYWRlZC5cbiAqIEBwYXJhbSB7SW1hZ2VMaWtlfSBpbWdcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c10gVGV4dHVyZSBvcHRpb25zLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5mbGlwWT10cnVlXSBJZiBmbGlwWS4gU2VlIHtAbGluayBjbGF5LlRleHR1cmUuZmxpcFl9XG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmNvbnZlcnRUb1BPVD1mYWxzZV0gRm9yY2UgY29udmVydCBOb25lIFBvd2VyIG9mIFR3byB0ZXh0dXJlIHRvIFBvd2VyIG9mIHR3byBzbyBpdCBjYW4gYmUgdGlsZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuYW5pc290cm9waWNdIEFuaXNvdHJvcGljIGZpbHRlcmluZy4gU2VlIHtAbGluayBjbGF5LlRleHR1cmUuYW5pc290cm9waWN9XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMud3JhcFM9Y2xheS5UZXh0dXJlLlJFUEVBVF0gU2VlIHtAbGluayBjbGF5LlRleHR1cmUud3JhcFN9XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMud3JhcFQ9Y2xheS5UZXh0dXJlLlJFUEVBVF0gU2VlIHtAbGluayBjbGF5LlRleHR1cmUud3JhcFR9XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMubWluRmlsdGVyPWNsYXkuVGV4dHVyZS5MSU5FQVJfTUlQTUFQX0xJTkVBUl0gU2VlIHtAbGluayBjbGF5LlRleHR1cmUubWluRmlsdGVyfVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLm1hZ0ZpbHRlcj1jbGF5LlRleHR1cmUuTElORUFSXSBTZWUge0BsaW5rIGNsYXkuVGV4dHVyZS5tYWdGaWx0ZXJ9XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuZXhwb3N1cmVdIE9ubHkgYmUgdXNlZCB3aGVuIHNvdXJjZSBpcyBhIEhEUiBpbWFnZS5cbiAqIEByZXR1cm4ge2NsYXkuVGV4dHVyZTJEfVxuICogQGV4YW1wbGVcbiAqICB2YXIgdGV4dHVyZSA9IGFwcC5sb2FkVGV4dHVyZSgnZGlmZnVzZU1hcC5qcGcnLCB7XG4gKiAgICAgIGFuaXNvdHJvcGljOiA4LFxuICogICAgICBmbGlwWTogZmFsc2VcbiAqICB9KTtcbiAqICBtYXRlcmlhbC5zZXQoJ2RpZmZ1c2VNYXAnLCB0ZXh0dXJlKTtcbiAqL1xuQXBwM0QucHJvdG90eXBlLmxvYWRUZXh0dXJlU3luYyA9IGZ1bmN0aW9uICh1cmxPckltZywgb3B0cykge1xuICAgIHZhciB0ZXh0dXJlID0gbmV3IFRleHR1cmUyRChvcHRzKTtcbiAgICBpZiAodHlwZW9mIHVybE9ySW1nID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAodXJsT3JJbWcubWF0Y2goLy5oZHIkfF5kYXRhOmFwcGxpY2F0aW9uXFwvb2N0ZXQtc3RyZWFtLykpIHtcbiAgICAgICAgICAgIHRleHR1cmUgPSB0ZXh0dXJlVXRpbC5sb2FkVGV4dHVyZSh1cmxPckltZywge1xuICAgICAgICAgICAgICAgIGV4cG9zdXJlOiBvcHRzICYmIG9wdHMuZXhwb3N1cmUsXG4gICAgICAgICAgICAgICAgZmlsZVR5cGU6ICdoZHInXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIHRleHR1cmUudHJpZ2dlcignc3VjY2VzcycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0cykge1xuICAgICAgICAgICAgICAgIHRleHR1cmVba2V5XSA9IG9wdHNba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRleHR1cmUubG9hZCh1cmxPckltZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaXNJbWFnZUxpa2VFbGVtZW50KHVybE9ySW1nKSkge1xuICAgICAgICB0ZXh0dXJlLmltYWdlID0gdXJsT3JJbWc7XG4gICAgICAgIHRleHR1cmUuZHluYW1pYyA9IHVybE9ySW1nIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIHRleHR1cmU7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIHRleHR1cmUgZnJvbSBpbWFnZSBvciBzdHJpbmcgc3luY2hyb25vdXNseS4gVGV4dHVyZSBjYW4gYmUgdXNlIGRpcmVjdGx5IGFuZCBkb24ndCBoYXZlIHRvIHdhaXQgZm9yIGl0J3MgbG9hZGVkLlxuICogQHBhcmFtIHtJbWFnZUxpa2V9IGltZ1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSBUZXh0dXJlIG9wdGlvbnMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmZsaXBZPWZhbHNlXSBJZiBmbGlwWS4gU2VlIHtAbGluayBjbGF5LlRleHR1cmUuZmxpcFl9XG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICogQGV4YW1wbGVcbiAqICBhcHAubG9hZFRleHR1cmVDdWJlKHtcbiAqICAgICAgcHg6ICdza3lib3gvcHguanBnJywgcHk6ICdza3lib3gvcHkuanBnJywgcHo6ICdza3lib3gvcHouanBnJyxcbiAqICAgICAgbng6ICdza3lib3gvbnguanBnJywgbnk6ICdza3lib3gvbnkuanBnJywgbno6ICdza3lib3gvbnouanBnJ1xuICogIH0pLnRoZW4oZnVuY3Rpb24gKHRleHR1cmUpIHtcbiAqICAgICAgc2t5Ym94LnNldEVudmlyb25tZW50TWFwKHRleHR1cmUpO1xuICogIH0pXG4gKi9cbkFwcDNELnByb3RvdHlwZS5sb2FkVGV4dHVyZUN1YmUgPSBmdW5jdGlvbiAoaW1nTGlzdCwgb3B0cykge1xuICAgIHZhciB0ZXh0dXJlQ3ViZSA9IHRoaXMubG9hZFRleHR1cmVDdWJlU3luYyhpbWdMaXN0LCBvcHRzKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBpZiAodGV4dHVyZUN1YmUuaXNSZW5kZXJhYmxlKCkpIHtcbiAgICAgICAgICAgIHJlc29sdmUodGV4dHVyZUN1YmUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGV4dHVyZUN1YmUuc3VjY2VzcyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0ZXh0dXJlQ3ViZSk7XG4gICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSB0ZXh0dXJlIGZyb20gaW1hZ2Ugb3Igc3RyaW5nIHN5bmNocm9ub3VzbHkuIFRleHR1cmUgY2FuIGJlIHVzZSBkaXJlY3RseSBhbmQgZG9uJ3QgaGF2ZSB0byB3YWl0IGZvciBpdCdzIGxvYWRlZC5cbiAqIEBwYXJhbSB7SW1hZ2VMaWtlfSBpbWdcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c10gVGV4dHVyZSBvcHRpb25zLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5mbGlwWT1mYWxzZV0gSWYgZmxpcFkuIFNlZSB7QGxpbmsgY2xheS5UZXh0dXJlLmZsaXBZfVxuICogQHJldHVybiB7Y2xheS5UZXh0dXJlQ3ViZX1cbiAqIEBleGFtcGxlXG4gKiAgdmFyIHRleHR1cmUgPSBhcHAubG9hZFRleHR1cmVDdWJlU3luYyh7XG4gKiAgICAgIHB4OiAnc2t5Ym94L3B4LmpwZycsIHB5OiAnc2t5Ym94L3B5LmpwZycsIHB6OiAnc2t5Ym94L3B6LmpwZycsXG4gKiAgICAgIG54OiAnc2t5Ym94L254LmpwZycsIG55OiAnc2t5Ym94L255LmpwZycsIG56OiAnc2t5Ym94L256LmpwZydcbiAqICB9KTtcbiAqICBza3lib3guc2V0RW52aXJvbm1lbnRNYXAodGV4dHVyZSk7XG4gKi9cbkFwcDNELnByb3RvdHlwZS5sb2FkVGV4dHVyZUN1YmVTeW5jID0gZnVuY3Rpb24gKGltZ0xpc3QsIG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICBvcHRzLmZsaXBZID0gb3B0cy5mbGlwWSB8fCBmYWxzZTtcbiAgICB2YXIgdGV4dHVyZUN1YmUgPSBuZXcgVGV4dHVyZUN1YmUob3B0cyk7XG4gICAgaWYgKCFpbWdMaXN0IHx8ICFpbWdMaXN0LnB4IHx8ICFpbWdMaXN0Lm54IHx8ICFpbWdMaXN0LnB5IHx8ICFpbWdMaXN0Lm55IHx8ICFpbWdMaXN0LnB6IHx8ICFpbWdMaXN0Lm56KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjdWJlbWFwIGZvcm1hdC4gU2hvdWxkIGJlIGFuIG9iamVjdCBpbmNsdWRpbmcgcHgsbngscHksbnkscHosbnonKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBpbWdMaXN0LnB4ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0ZXh0dXJlQ3ViZS5sb2FkKGltZ0xpc3QpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGV4dHVyZUN1YmUuaW1hZ2UgPSB1dGlsLmNsb25lKGltZ0xpc3QpO1xuICAgIH1cbiAgICByZXR1cm4gdGV4dHVyZUN1YmU7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIG1hdGVyaWFsLlxuICogQHBhcmFtIHtPYmplY3R8U3RhbmRhcmRNYXRlcmlhbE1SQ29uZmlnfSBtYXRlcmlhbENvbmZpZy4gbWF0ZXJpYWxDb25maWcgY29udGFpbnMgYHNoYWRlcmAsIGB0cmFuc3BhcmVudGAgYW5kIHVuaWZvcm1zIHRoYXQgdXNlZCBpbiBjb3JyZXNwb25kaW5nIHVuaWZvcm1zLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVbmlmb3JtcyBjYW4gYmUgYGNvbG9yYCwgYGFscGhhYCBgZGlmZnVzZU1hcGAgZXRjLlxuICogQHBhcmFtIHtzdHJpbmd8Y2xheS5TaGFkZXJ9IFtzaGFkZXI9J2NsYXkuc3RhbmRhcmRNUiddIERlZmF1bHQgdG8gYmUgc3RhbmRhcmQgc2hhZGVyIHdpdGggbWV0YWxuZXNzIGFuZCByb3VnaG5lc3Mgd29ya2Zsb3cuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFt0cmFuc3BhcmVudD1mYWxzZV0gSWYgbWF0ZXJpYWwgaXMgdHJhbnNwYXJlbnQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFt0ZXh0dXJlQ29udmVydFRvUE9UPWZhbHNlXSBGb3JjZSBjb252ZXJ0IE5vbmUgUG93ZXIgb2YgVHdvIHRleHR1cmUgdG8gUG93ZXIgb2YgdHdvIHNvIGl0IGNhbiBiZSB0aWxlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3RleHR1cmVGbGlwWT10cnVlXSBJZiBmbGlwIHkgb2YgdGV4dHVyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFt0ZXh0dXJlTG9hZGVkXSBDYWxsYmFjayB3aGVuIHNpbmdsZSB0ZXh0dXJlIGxvYWRlZC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFt0ZXh0dXJlc1JlYWR5XSBDYWxsYmFjayB3aGVuIGFsbCB0ZXh0dXJlIGxvYWRlZC5cbiAqIEByZXR1cm4ge2NsYXkuTWF0ZXJpYWx9XG4gKi9cbkFwcDNELnByb3RvdHlwZS5jcmVhdGVNYXRlcmlhbCA9IGZ1bmN0aW9uIChtYXRDb25maWcpIHtcbiAgICBtYXRDb25maWcgPSBtYXRDb25maWcgfHwge307XG4gICAgbWF0Q29uZmlnLnNoYWRlciA9IG1hdENvbmZpZy5zaGFkZXIgfHwgJ2NsYXkuc3RhbmRhcmRNUic7XG4gICAgdmFyIHNoYWRlciA9IG1hdENvbmZpZy5zaGFkZXIgaW5zdGFuY2VvZiBTaGFkZXIgPyBtYXRDb25maWcuc2hhZGVyIDogc2hhZGVyTGlicmFyeS5nZXQobWF0Q29uZmlnLnNoYWRlcik7XG4gICAgdmFyIG1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgc2hhZGVyOiBzaGFkZXJcbiAgICB9KTtcbiAgICBpZiAobWF0Q29uZmlnLm5hbWUpIHtcbiAgICAgICAgbWF0ZXJpYWwubmFtZSA9IG1hdENvbmZpZy5uYW1lO1xuICAgIH1cblxuICAgIHZhciB0ZXh0dXJlc0xvYWRpbmcgPSBbXTtcbiAgICBmdW5jdGlvbiBtYWtlVGV4dHVyZVNldHRlcihrZXkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0ZXh0dXJlKSB7XG4gICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKGtleSwgdGV4dHVyZSk7XG4gICAgICAgICAgICBtYXRDb25maWcudGV4dHVyZUxvYWRlZCAmJiBtYXRDb25maWcudGV4dHVyZUxvYWRlZChrZXksIHRleHR1cmUpO1xuICAgICAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZvciAodmFyIGtleSBpbiBtYXRDb25maWcpIHtcbiAgICAgICAgaWYgKG1hdGVyaWFsLnVuaWZvcm1zW2tleV0pIHtcbiAgICAgICAgICAgIHZhciB2YWwgPSBtYXRDb25maWdba2V5XTtcbiAgICAgICAgICAgIGlmICgobWF0ZXJpYWwudW5pZm9ybXNba2V5XS50eXBlID09PSAndCcgfHwgaXNJbWFnZUxpa2VFbGVtZW50KHZhbCkpXG4gICAgICAgICAgICAgICAgJiYgISh2YWwgaW5zdGFuY2VvZiBUZXh0dXJlKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgLy8gVHJ5IHRvIGxvYWQgYSB0ZXh0dXJlLlxuICAgICAgICAgICAgICAgIHRleHR1cmVzTG9hZGluZy5wdXNoKHRoaXMubG9hZFRleHR1cmUodmFsLCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnRUb1BPVDogbWF0Q29uZmlnLnRleHR1cmVDb252ZXJ0VG9QT1QgfHwgZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGZsaXBZOiBtYXRDb25maWcudGV4dHVyZUZsaXBZID09IG51bGwgPyB0cnVlIDogbWF0Q29uZmlnLnRleHR1cmVGbGlwWVxuICAgICAgICAgICAgICAgIH0pLnRoZW4obWFrZVRleHR1cmVTZXR0ZXIoa2V5KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybShrZXksIHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWF0Q29uZmlnLnRyYW5zcGFyZW50KSB7XG4gICAgICAgIG1hdENvbmZpZy5kZXB0aE1hc2sgPSBmYWxzZTtcbiAgICAgICAgbWF0Q29uZmlnLnRyYW5zcGFyZW50ID0gdHJ1ZTtcbiAgICB9XG5cblxuICAgIGlmIChtYXRDb25maWcudGV4dHVyZXNSZWFkeSkge1xuICAgICAgICBQcm9taXNlLmFsbCh0ZXh0dXJlc0xvYWRpbmcpLnRoZW4oZnVuY3Rpb24gKHRleHR1cmVzKSB7XG4gICAgICAgICAgICBtYXRDb25maWcudGV4dHVyZXNSZWFkeSh0ZXh0dXJlcyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBtYXRlcmlhbDtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgY3ViZSBtZXNoIGFuZCBhZGQgaXQgdG8gdGhlIHNjZW5lIG9yIHRoZSBnaXZlbiBwYXJlbnQgbm9kZS5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtPYmplY3R8Y2xheS5NYXRlcmlhbH0gW21hdGVyaWFsXVxuICogQHBhcmFtIHtjbGF5Lk5vZGV9IFtwYXJlbnROb2RlXSBQYXJlbnQgbm9kZSB0byBhcHBlbmQuIERlZmF1bHQgdG8gYmUgc2NlbmUuXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fG51bWJlcn0gW3N1YmRpdmlzaW9uPTFdIFN1YmRpdmlzaW9uIG9mIGN1YmUuXG4gKiAgICAgICAgICBDYW4gYmUgYSBudW1iZXIgdG8gcmVwcmVzZW50IGJvdGggd2lkdGgsIGhlaWdodCBhbmQgZGVwdGggZGltZW5zaW9ucy4gT3IgYW4gYXJyYXkgdG8gcmVwcmVzZW50IHRoZW0gcmVzcGVjdGl2ZWx5LlxuICogQHJldHVybiB7Y2xheS5NZXNofVxuICogQGV4YW1wbGVcbiAqICAvLyBDcmVhdGUgYSB3aGl0ZSBjdWJlLlxuICogIGFwcC5jcmVhdGVDdWJlKClcbiAqL1xuQXBwM0QucHJvdG90eXBlLmNyZWF0ZUN1YmUgPSBmdW5jdGlvbiAobWF0ZXJpYWwsIHBhcmVudE5vZGUsIHN1YmRpdikge1xuICAgIGlmIChzdWJkaXYgPT0gbnVsbCkge1xuICAgICAgICBzdWJkaXYgPSAxO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHN1YmRpdiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc3ViZGl2ID0gW3N1YmRpdiwgc3ViZGl2LCBzdWJkaXZdO1xuICAgIH1cblxuICAgIHZhciBnZW9LZXkgPSAnY3ViZS0nICsgc3ViZGl2LmpvaW4oJy0nKTtcbiAgICB2YXIgY3ViZSA9IHRoaXMuX2dlb0NhY2hlLmdldChnZW9LZXkpO1xuICAgIGlmICghY3ViZSkge1xuICAgICAgICBjdWJlID0gbmV3IEN1YmVHZW8oe1xuICAgICAgICAgICAgd2lkdGhTZWdtZW50czogc3ViZGl2WzBdLFxuICAgICAgICAgICAgaGVpZ2h0U2VnbWVudHM6IHN1YmRpdlsxXSxcbiAgICAgICAgICAgIGRlcHRoU2VnbWVudHM6IHN1YmRpdlsyXVxuICAgICAgICB9KTtcbiAgICAgICAgY3ViZS5nZW5lcmF0ZVRhbmdlbnRzKCk7XG4gICAgICAgIHRoaXMuX2dlb0NhY2hlLnB1dChnZW9LZXksIGN1YmUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVNZXNoKGN1YmUsIG1hdGVyaWFsLCBwYXJlbnROb2RlKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgY3ViZSBtZXNoIHRoYXQgY2FtZXJhIGlzIGluc2lkZSB0aGUgY3ViZS5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtPYmplY3R8Y2xheS5NYXRlcmlhbH0gW21hdGVyaWFsXVxuICogQHBhcmFtIHtjbGF5Lk5vZGV9IFtwYXJlbnROb2RlXSBQYXJlbnQgbm9kZSB0byBhcHBlbmQuIERlZmF1bHQgdG8gYmUgc2NlbmUuXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fG51bWJlcn0gW3N1YmRpdmlzaW9uPTFdIFN1YmRpdmlzaW9uIG9mIGN1YmUuXG4gKiAgICAgICAgICBDYW4gYmUgYSBudW1iZXIgdG8gcmVwcmVzZW50IGJvdGggd2lkdGgsIGhlaWdodCBhbmQgZGVwdGggZGltZW5zaW9ucy4gT3IgYW4gYXJyYXkgdG8gcmVwcmVzZW50IHRoZW0gcmVzcGVjdGl2ZWx5LlxuICogQHJldHVybiB7Y2xheS5NZXNofVxuICogQGV4YW1wbGVcbiAqICAvLyBDcmVhdGUgYSB3aGl0ZSBjdWJlIGluc2lkZS5cbiAqICBhcHAuY3JlYXRlQ3ViZUluc2lkZSgpXG4gKi9cbkFwcDNELnByb3RvdHlwZS5jcmVhdGVDdWJlSW5zaWRlID0gZnVuY3Rpb24gKG1hdGVyaWFsLCBwYXJlbnROb2RlLCBzdWJkaXYpIHtcbiAgICBpZiAoc3ViZGl2ID09IG51bGwpIHtcbiAgICAgICAgc3ViZGl2ID0gMTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzdWJkaXYgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHN1YmRpdiA9IFtzdWJkaXYsIHN1YmRpdiwgc3ViZGl2XTtcbiAgICB9XG4gICAgdmFyIGdlb0tleSA9ICdjdWJlSW5zaWRlLScgKyBzdWJkaXYuam9pbignLScpO1xuICAgIHZhciBjdWJlID0gdGhpcy5fZ2VvQ2FjaGUuZ2V0KGdlb0tleSk7XG4gICAgaWYgKCFjdWJlKSB7XG4gICAgICAgIGN1YmUgPSBuZXcgQ3ViZUdlbyh7XG4gICAgICAgICAgICBpbnNpZGU6IHRydWUsXG4gICAgICAgICAgICB3aWR0aFNlZ21lbnRzOiBzdWJkaXZbMF0sXG4gICAgICAgICAgICBoZWlnaHRTZWdtZW50czogc3ViZGl2WzFdLFxuICAgICAgICAgICAgZGVwdGhTZWdtZW50czogc3ViZGl2WzJdXG4gICAgICAgIH0pO1xuICAgICAgICBjdWJlLmdlbmVyYXRlVGFuZ2VudHMoKTtcbiAgICAgICAgdGhpcy5fZ2VvQ2FjaGUucHV0KGdlb0tleSwgY3ViZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlTWVzaChjdWJlLCBtYXRlcmlhbCwgcGFyZW50Tm9kZSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIHNwaGVyZSBtZXNoIGFuZCBhZGQgaXQgdG8gdGhlIHNjZW5lIG9yIHRoZSBnaXZlbiBwYXJlbnQgbm9kZS5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtPYmplY3R8Y2xheS5NYXRlcmlhbH0gW21hdGVyaWFsXVxuICogQHBhcmFtIHtjbGF5Lk5vZGV9IFtwYXJlbnROb2RlXSBQYXJlbnQgbm9kZSB0byBhcHBlbmQuIERlZmF1bHQgdG8gYmUgc2NlbmUuXG4gKiBAcGFyYW0ge251bWJlcn0gW3N1YmRpdmlzaW9uPTIwXSBTdWJkaXZpc2lvbiBvZiBzcGhlcmUuXG4gKiBAcmV0dXJuIHtjbGF5Lk1lc2h9XG4gKiBAZXhhbXBsZVxuICogIC8vIENyZWF0ZSBhIHNlbWktdHJhbnNwYXJlbnQgc3BoZXJlLlxuICogIGFwcC5jcmVhdGVTcGhlcmUoe1xuICogICAgICBjb2xvcjogWzAsIDAsIDFdLFxuICogICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcbiAqICAgICAgYWxwaGE6IDAuNVxuICogIH0pXG4gKi9cbkFwcDNELnByb3RvdHlwZS5jcmVhdGVTcGhlcmUgPSBmdW5jdGlvbiAobWF0ZXJpYWwsIHBhcmVudE5vZGUsIHN1YmRpdmlzaW9uKSB7XG4gICAgaWYgKHN1YmRpdmlzaW9uID09IG51bGwpIHtcbiAgICAgICAgc3ViZGl2aXNpb24gPSAyMDtcbiAgICB9XG4gICAgdmFyIGdlb0tleSA9ICdzcGhlcmUtJyArIHN1YmRpdmlzaW9uO1xuICAgIHZhciBzcGhlcmUgPSB0aGlzLl9nZW9DYWNoZS5nZXQoZ2VvS2V5KTtcbiAgICBpZiAoIXNwaGVyZSkge1xuICAgICAgICBzcGhlcmUgPSBuZXcgU3BoZXJlR2VvKHtcbiAgICAgICAgICAgIHdpZHRoU2VnbWVudHM6IHN1YmRpdmlzaW9uICogMixcbiAgICAgICAgICAgIGhlaWdodFNlZ21lbnRzOiBzdWJkaXZpc2lvblxuICAgICAgICB9KTtcbiAgICAgICAgc3BoZXJlLmdlbmVyYXRlVGFuZ2VudHMoKTtcbiAgICAgICAgdGhpcy5fZ2VvQ2FjaGUucHV0KGdlb0tleSwgc3BoZXJlKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlTWVzaChzcGhlcmUsIG1hdGVyaWFsLCBwYXJlbnROb2RlKTtcbn07XG5cbi8vIFRPRE8gbWF5IGJlIG1vZGlmaWVkP1xuLyoqXG4gKiBDcmVhdGUgYSBwbGFuZSBtZXNoIGFuZCBhZGQgaXQgdG8gdGhlIHNjZW5lIG9yIHRoZSBnaXZlbiBwYXJlbnQgbm9kZS5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtPYmplY3R8Y2xheS5NYXRlcmlhbH0gW21hdGVyaWFsXVxuICogQHBhcmFtIHtjbGF5Lk5vZGV9IFtwYXJlbnROb2RlXSBQYXJlbnQgbm9kZSB0byBhcHBlbmQuIERlZmF1bHQgdG8gYmUgc2NlbmUuXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fG51bWJlcn0gW3N1YmRpdmlzaW9uPTFdIFN1YmRpdmlzaW9uIG9mIHBsYW5lLlxuICogICAgICAgICAgQ2FuIGJlIGEgbnVtYmVyIHRvIHJlcHJlc2VudCBib3RoIHdpZHRoIGFuZCBoZWlnaHQgZGltZW5zaW9ucy4gT3IgYW4gYXJyYXkgdG8gcmVwcmVzZW50IHRoZW0gcmVzcGVjdGl2ZWx5LlxuICogQHJldHVybiB7Y2xheS5NZXNofVxuICogQGV4YW1wbGVcbiAqICAvLyBDcmVhdGUgYSByZWQgY29sb3IgcGxhbmUuXG4gKiAgYXBwLmNyZWF0ZVBsYW5lKHtcbiAqICAgICAgY29sb3I6IFsxLCAwLCAwXVxuICogIH0pXG4gKi9cbkFwcDNELnByb3RvdHlwZS5jcmVhdGVQbGFuZSA9IGZ1bmN0aW9uIChtYXRlcmlhbCwgcGFyZW50Tm9kZSwgc3ViZGl2KSB7XG4gICAgaWYgKHN1YmRpdiA9PSBudWxsKSB7XG4gICAgICAgIHN1YmRpdiA9IDE7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc3ViZGl2ID09PSAnbnVtYmVyJykge1xuICAgICAgICBzdWJkaXYgPSBbc3ViZGl2LCBzdWJkaXZdO1xuICAgIH1cbiAgICB2YXIgZ2VvS2V5ID0gJ3BsYW5lLScgKyBzdWJkaXYuam9pbignLScpO1xuICAgIHZhciBwbGFuZUdlbyA9IHRoaXMuX2dlb0NhY2hlLmdldChnZW9LZXkpO1xuICAgIGlmICghcGxhbmVHZW8pIHtcbiAgICAgICAgcGxhbmVHZW8gPSBuZXcgUGxhbmVHZW8oe1xuICAgICAgICAgICAgd2lkdGhTZWdtZW50czogc3ViZGl2WzBdLFxuICAgICAgICAgICAgaGVpZ2h0U2VnbWVudHM6IHN1YmRpdlsxXVxuICAgICAgICB9KTtcbiAgICAgICAgcGxhbmVHZW8uZ2VuZXJhdGVUYW5nZW50cygpO1xuICAgICAgICB0aGlzLl9nZW9DYWNoZS5wdXQoZ2VvS2V5LCBwbGFuZUdlbyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNyZWF0ZU1lc2gocGxhbmVHZW8sIG1hdGVyaWFsLCBwYXJlbnROb2RlKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIG1lc2ggd2l0aCBwYXJhbWV0cmljIHN1cmZhY2UgZnVuY3Rpb25cbiAqIEBwYXJhbSB7T2JqZWN0fGNsYXkuTWF0ZXJpYWx9IFttYXRlcmlhbF1cbiAqIEBwYXJhbSB7Y2xheS5Ob2RlfSBbcGFyZW50Tm9kZV0gUGFyZW50IG5vZGUgdG8gYXBwZW5kLiBEZWZhdWx0IHRvIGJlIHNjZW5lLlxuICogQHBhcmFtIHtPYmplY3R9IGdlbmVyYXRvclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZ2VuZXJhdG9yLnhcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGdlbmVyYXRvci55XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBnZW5lcmF0b3IuelxuICogQHBhcmFtIHtBcnJheX0gW2dlbmVyYXRvci51PVswLCAxLCAwLjA1XV1cbiAqIEBwYXJhbSB7QXJyYXl9IFtnZW5lcmF0b3Iudj1bMCwgMSwgMC4wNV1dXG4gKiBAcmV0dXJuIHtjbGF5Lk1lc2h9XG4gKi9cbkFwcDNELnByb3RvdHlwZS5jcmVhdGVQYXJhbWV0cmljU3VyZmFjZSA9IGZ1bmN0aW9uIChtYXRlcmlhbCwgcGFyZW50Tm9kZSwgZ2VuZXJhdG9yKSB7XG4gICAgdmFyIGdlbyA9IG5ldyBQYXJhbWV0cmljU3VyZmFjZUdlbyh7XG4gICAgICAgIGdlbmVyYXRvcjogZ2VuZXJhdG9yXG4gICAgfSk7XG4gICAgZ2VvLmdlbmVyYXRlVGFuZ2VudHMoKTtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVNZXNoKGdlbywgbWF0ZXJpYWwsIHBhcmVudE5vZGUpO1xufTtcblxuXG4vKipcbiAqIENyZWF0ZSBhIGdlbmVyYWwgbWVzaCB3aXRoIGdpdmVuIGdlb21ldHJ5IGluc3RhbmNlIGFuZCBtYXRlcmlhbCBjb25maWcuXG4gKiBAcGFyYW0ge2NsYXkuR2VvbWV0cnl9IGdlb21ldHJ5XG4gKiBAcmV0dXJuIHtjbGF5Lk1lc2h9XG4gKi9cbkFwcDNELnByb3RvdHlwZS5jcmVhdGVNZXNoID0gZnVuY3Rpb24gKGdlb21ldHJ5LCBtYXQsIHBhcmVudE5vZGUpIHtcbiAgICB2YXIgbWVzaCA9IG5ldyBNZXNoKHtcbiAgICAgICAgZ2VvbWV0cnk6IGdlb21ldHJ5LFxuICAgICAgICBtYXRlcmlhbDogbWF0IGluc3RhbmNlb2YgTWF0ZXJpYWwgPyBtYXQgOiB0aGlzLmNyZWF0ZU1hdGVyaWFsKG1hdClcbiAgICB9KTtcbiAgICBwYXJlbnROb2RlID0gcGFyZW50Tm9kZSB8fCB0aGlzLnNjZW5lO1xuICAgIHBhcmVudE5vZGUuYWRkKG1lc2gpO1xuICAgIHJldHVybiBtZXNoO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gZW1wdHkgbm9kZVxuICogQHBhcmFtIHtjbGF5Lk5vZGV9IHBhcmVudE5vZGVcbiAqIEByZXR1cm4ge2NsYXkuTm9kZX1cbiAqL1xuQXBwM0QucHJvdG90eXBlLmNyZWF0ZU5vZGUgPSBmdW5jdGlvbiAocGFyZW50Tm9kZSkge1xuICAgIHZhciBub2RlID0gbmV3IE5vZGUoKTtcbiAgICBwYXJlbnROb2RlID0gcGFyZW50Tm9kZSB8fCB0aGlzLnNjZW5lO1xuICAgIHBhcmVudE5vZGUuYWRkKG5vZGUpO1xuICAgIHJldHVybiBub2RlO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBwZXJzcGVjdGl2ZSBvciBvcnRob2dyYXBoaWMgY2FtZXJhIGFuZCBhZGQgaXQgdG8gdGhlIHNjZW5lLlxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPnxjbGF5LlZlY3RvcjN9IHBvc2l0aW9uXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fGNsYXkuVmVjdG9yM30gdGFyZ2V0XG4gKiBAcGFyYW0ge3N0cmluZ30gW3R5cGU9XCJwZXJzcGVjdGl2ZVwiXSBDYW4gYmUgJ3BlcnNwZWN0aXZlJyBvciAnb3J0aG9ncmFwaGljJyhpbiBzaG9ydCAnb3J0aG8nKVxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPnxjbGF5LlZlY3RvcjN9IFtleHRlbnRdIEV4dGVudCBpcyBhdmFpbGFibGUgb25seSBpZiB0eXBlIGlzIG9ydGhvZ3JhcGhpYy5cbiAqIEByZXR1cm4ge2NsYXkuY2FtZXJhLlBlcnNwZWN0aXZlfGNsYXkuY2FtZXJhLk9ydGhvZ3JhcGhpY31cbiAqL1xuQXBwM0QucHJvdG90eXBlLmNyZWF0ZUNhbWVyYSA9IGZ1bmN0aW9uIChwb3NpdGlvbiwgdGFyZ2V0LCB0eXBlLCBleHRlbnQpIHtcbiAgICB2YXIgQ2FtZXJhQ3RvcjtcbiAgICB2YXIgaXNPcnRobyA9IGZhbHNlO1xuICAgIGlmICh0eXBlID09PSAnb3J0aG8nIHx8IHR5cGUgPT09ICdvcnRob2dyYXBoaWMnKSB7XG4gICAgICAgIGlzT3J0aG8gPSB0cnVlO1xuICAgICAgICBDYW1lcmFDdG9yID0gT3J0aG9ncmFwaGljQ2FtZXJhO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKHR5cGUgJiYgdHlwZSAhPT0gJ3BlcnNwZWN0aXZlJykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5rb3duIGNhbWVyYSB0eXBlICcgKyB0eXBlICsgJy4gVXNlIGRlZmF1bHQgcGVyc3BlY3RpdmUgY2FtZXJhJyk7XG4gICAgICAgIH1cbiAgICAgICAgQ2FtZXJhQ3RvciA9IFBlcnNwZWN0aXZlQ2FtZXJhO1xuICAgIH1cblxuICAgIHZhciBjYW1lcmEgPSBuZXcgQ2FtZXJhQ3RvcigpO1xuICAgIGlmIChwb3NpdGlvbiBpbnN0YW5jZW9mIFZlY3RvcjMpIHtcbiAgICAgICAgY2FtZXJhLnBvc2l0aW9uLmNvcHkocG9zaXRpb24pO1xuICAgIH1cbiAgICBlbHNlIGlmIChwb3NpdGlvbiBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXRBcnJheShwb3NpdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIHRhcmdldCA9IG5ldyBWZWN0b3IzKHRhcmdldFswXSwgdGFyZ2V0WzFdLCB0YXJnZXRbMl0pO1xuICAgIH1cbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgVmVjdG9yMykge1xuICAgICAgICBjYW1lcmEubG9va0F0KHRhcmdldCk7XG4gICAgfVxuXG4gICAgaWYgKGV4dGVudCAmJiBpc09ydGhvKSB7XG4gICAgICAgIGV4dGVudCA9IGV4dGVudC5hcnJheSB8fCBleHRlbnQ7XG4gICAgICAgIGNhbWVyYS5sZWZ0ID0gLWV4dGVudFswXSAvIDI7XG4gICAgICAgIGNhbWVyYS5yaWdodCA9IGV4dGVudFswXSAvIDI7XG4gICAgICAgIGNhbWVyYS50b3AgPSBleHRlbnRbMV0gLyAyO1xuICAgICAgICBjYW1lcmEuYm90dG9tID0gLWV4dGVudFsxXSAvIDI7XG4gICAgICAgIGNhbWVyYS5uZWFyID0gMDtcbiAgICAgICAgY2FtZXJhLmZhciA9IGV4dGVudFsyXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNhbWVyYS5hc3BlY3QgPSB0aGlzLnJlbmRlcmVyLmdldFZpZXdwb3J0QXNwZWN0KCk7XG4gICAgfVxuXG4gICAgdGhpcy5zY2VuZS5hZGQoY2FtZXJhKTtcblxuICAgIHJldHVybiBjYW1lcmE7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIGRpcmVjdGlvbmFsIGxpZ2h0IGFuZCBhZGQgaXQgdG8gdGhlIHNjZW5lLlxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPnxjbGF5LlZlY3RvcjN9IGRpciBBIFZlY3RvcjMgb3IgYXJyYXkgdG8gcmVwcmVzZW50IHRoZSBkaXJlY3Rpb24uXG4gKiBAcGFyYW0ge0NvbG9yfSBbY29sb3I9JyNmZmYnXSBDb2xvciBvZiBkaXJlY3Rpb25hbCBsaWdodCwgZGVmYXVsdCB0byBiZSB3aGl0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbaW50ZW5zaXR5XSBJbnRlbnNpdHkgb2YgZGlyZWN0aW9uYWwgbGlnaHQsIGRlZmF1bHQgdG8gYmUgMS5cbiAqXG4gKiBAZXhhbXBsZVxuICogIGFwcC5jcmVhdGVEaXJlY3Rpb25hbExpZ2h0KFstMSwgLTEsIC0xXSwgJyNmZmYnLCAyKTtcbiAqL1xuQXBwM0QucHJvdG90eXBlLmNyZWF0ZURpcmVjdGlvbmFsTGlnaHQgPSBmdW5jdGlvbiAoZGlyLCBjb2xvciwgaW50ZW5zaXR5KSB7XG4gICAgdmFyIGxpZ2h0ID0gbmV3IERpcmVjdGlvbmFsTGlnaHQoKTtcbiAgICBpZiAoZGlyIGluc3RhbmNlb2YgVmVjdG9yMykge1xuICAgICAgICBkaXIgPSBkaXIuYXJyYXk7XG4gICAgfVxuICAgIGxpZ2h0LnBvc2l0aW9uLnNldEFycmF5KGRpcikubmVnYXRlKCk7XG4gICAgbGlnaHQubG9va0F0KFZlY3RvcjMuWkVSTyk7XG4gICAgaWYgKHR5cGVvZiBjb2xvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29sb3IgPSBwYXJzZUNvbG9yKGNvbG9yKTtcbiAgICB9XG4gICAgY29sb3IgIT0gbnVsbCAmJiAobGlnaHQuY29sb3IgPSBjb2xvcik7XG4gICAgaW50ZW5zaXR5ICE9IG51bGwgJiYgKGxpZ2h0LmludGVuc2l0eSA9IGludGVuc2l0eSk7XG5cbiAgICB0aGlzLnNjZW5lLmFkZChsaWdodCk7XG4gICAgcmV0dXJuIGxpZ2h0O1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBzcG90IGxpZ2h0IGFuZCBhZGQgaXQgdG8gdGhlIHNjZW5lLlxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPnxjbGF5LlZlY3RvcjN9IHBvc2l0aW9uIFBvc2l0aW9uIG9mIHRoZSBzcG90IGxpZ2h0LlxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPnxjbGF5LlZlY3RvcjN9IFt0YXJnZXRdIFRhcmdldCBwb3NpdGlvbiB3aGVyZSBzcG90IGxpZ2h0IHBvaW50cyB0by5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbcmFuZ2U9MjBdIEZhbGxvZmYgcmFuZ2Ugb2Ygc3BvdCBsaWdodC4gRGVmYXVsdCB0byBiZSAyMC5cbiAqIEBwYXJhbSB7Q29sb3J9IFtjb2xvcj0nI2ZmZiddIENvbG9yIG9mIHNwb3QgbGlnaHQsIGRlZmF1bHQgdG8gYmUgd2hpdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW2ludGVuc2l0eT0xXSBJbnRlbnNpdHkgb2Ygc3BvdCBsaWdodCwgZGVmYXVsdCB0byBiZSAxLlxuICogQHBhcmFtIHtudW1iZXJ9IFt1bWJyYUFuZ2xlPTMwXSBVbWJyYSBhbmdsZSBvZiBzcG90IGxpZ2h0LiBEZWZhdWx0IHRvIGJlIDMwIGRlZ3JlZSBmcm9tIHRoZSBtaWRkbGUgbGluZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbcGVudW1icmFBbmdsZT00NV0gUGVudW1icmEgYW5nbGUgb2Ygc3BvdCBsaWdodC4gRGVmYXVsdCB0byBiZSA0NSBkZWdyZWUgZnJvbSB0aGUgbWlkZGxlIGxpbmUuXG4gKlxuICogQGV4YW1wbGVcbiAqICBhcHAuY3JlYXRlU3BvdExpZ2h0KFs1LCA1LCA1XSwgWzAsIDAsIDBdLCAyMCwgIzkwMCk7XG4gKi9cbkFwcDNELnByb3RvdHlwZS5jcmVhdGVTcG90TGlnaHQgPSBmdW5jdGlvbiAocG9zaXRpb24sIHRhcmdldCwgcmFuZ2UsIGNvbG9yLCBpbnRlbnNpdHksIHVtYnJhQW5nbGUsIHBlbnVtYnJhQW5nbGUpIHtcbiAgICB2YXIgbGlnaHQgPSBuZXcgU3BvdExpZ2h0KCk7XG4gICAgbGlnaHQucG9zaXRpb24uc2V0QXJyYXkocG9zaXRpb24gaW5zdGFuY2VvZiBWZWN0b3IzID8gcG9zaXRpb24uYXJyYXkgOiBwb3NpdGlvbik7XG5cbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlY3RvcjModGFyZ2V0WzBdLCB0YXJnZXRbMV0sIHRhcmdldFsyXSk7XG4gICAgfVxuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBWZWN0b3IzKSB7XG4gICAgICAgIGxpZ2h0Lmxvb2tBdCh0YXJnZXQpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgY29sb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbG9yID0gcGFyc2VDb2xvcihjb2xvcik7XG4gICAgfVxuICAgIHJhbmdlICE9IG51bGwgJiYgKGxpZ2h0LnJhbmdlID0gcmFuZ2UpO1xuICAgIGNvbG9yICE9IG51bGwgJiYgKGxpZ2h0LmNvbG9yID0gY29sb3IpO1xuICAgIGludGVuc2l0eSAhPSBudWxsICYmIChsaWdodC5pbnRlbnNpdHkgPSBpbnRlbnNpdHkpO1xuICAgIHVtYnJhQW5nbGUgIT0gbnVsbCAmJiAobGlnaHQudW1icmFBbmdsZSA9IHVtYnJhQW5nbGUpO1xuICAgIHBlbnVtYnJhQW5nbGUgIT0gbnVsbCAmJiAobGlnaHQucGVudW1icmFBbmdsZSA9IHBlbnVtYnJhQW5nbGUpO1xuXG4gICAgdGhpcy5zY2VuZS5hZGQobGlnaHQpO1xuXG4gICAgcmV0dXJuIGxpZ2h0O1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBwb2ludCBsaWdodC5cbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj58Y2xheS5WZWN0b3IzfSBwb3NpdGlvbiBQb3NpdGlvbiBvZiBwb2ludCBsaWdodC4uXG4gKiBAcGFyYW0ge251bWJlcn0gW3JhbmdlPTEwMF0gRmFsbG9mZiByYW5nZSBvZiBwb2ludCBsaWdodC5cbiAqIEBwYXJhbSB7Q29sb3J9IFtjb2xvcj0nI2ZmZiddIENvbG9yIG9mIHBvaW50IGxpZ2h0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtpbnRlbnNpdHk9MV0gSW50ZW5zaXR5IG9mIHBvaW50IGxpZ2h0LlxuICovXG5BcHAzRC5wcm90b3R5cGUuY3JlYXRlUG9pbnRMaWdodCA9IGZ1bmN0aW9uIChwb3NpdGlvbiwgcmFuZ2UsIGNvbG9yLCBpbnRlbnNpdHkpIHtcbiAgICB2YXIgbGlnaHQgPSBuZXcgUG9pbnRMaWdodCgpO1xuICAgIGxpZ2h0LnBvc2l0aW9uLnNldEFycmF5KHBvc2l0aW9uIGluc3RhbmNlb2YgVmVjdG9yMyA/IHBvc2l0aW9uLmFycmF5IDogcG9zaXRpb24pO1xuXG4gICAgaWYgKHR5cGVvZiBjb2xvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29sb3IgPSBwYXJzZUNvbG9yKGNvbG9yKTtcbiAgICB9XG4gICAgcmFuZ2UgIT0gbnVsbCAmJiAobGlnaHQucmFuZ2UgPSByYW5nZSk7XG4gICAgY29sb3IgIT0gbnVsbCAmJiAobGlnaHQuY29sb3IgPSBjb2xvcik7XG4gICAgaW50ZW5zaXR5ICE9IG51bGwgJiYgKGxpZ2h0LmludGVuc2l0eSA9IGludGVuc2l0eSk7XG5cbiAgICB0aGlzLnNjZW5lLmFkZChsaWdodCk7XG5cbiAgICByZXR1cm4gbGlnaHQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIGFtYmllbnQgbGlnaHQuXG4gKiBAcGFyYW0ge0NvbG9yfSBbY29sb3I9JyNmZmYnXSBDb2xvciBvZiBhbWJpZW50IGxpZ2h0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtpbnRlbnNpdHk9MV0gSW50ZW5zaXR5IG9mIGFtYmllbnQgbGlnaHQuXG4gKi9cbkFwcDNELnByb3RvdHlwZS5jcmVhdGVBbWJpZW50TGlnaHQgPSBmdW5jdGlvbiAoY29sb3IsIGludGVuc2l0eSkge1xuICAgIHZhciBsaWdodCA9IG5ldyBBbWJpZW50TGlnaHQoKTtcblxuICAgIGlmICh0eXBlb2YgY29sb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbG9yID0gcGFyc2VDb2xvcihjb2xvcik7XG4gICAgfVxuICAgIGNvbG9yICE9IG51bGwgJiYgKGxpZ2h0LmNvbG9yID0gY29sb3IpO1xuICAgIGludGVuc2l0eSAhPSBudWxsICYmIChsaWdodC5pbnRlbnNpdHkgPSBpbnRlbnNpdHkpO1xuXG4gICAgdGhpcy5zY2VuZS5hZGQobGlnaHQpO1xuXG4gICAgcmV0dXJuIGxpZ2h0O1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gY3ViZW1hcCBhbWJpZW50IGxpZ2h0IGFuZCBhbiBzcGhlcmljYWwgaGFybW9uaWMgYW1iaWVudCBsaWdodFxuICogZm9yIHNwZWN1bGFyIGFuZCBkaWZmdXNlIGxpZ2h0aW5nIGluIFBCUiByZW5kZXJpbmdcbiAqIEBwYXJhbSB7SW1hZ2VMaWtlfFRleHR1cmVDdWJlfSBbZW52SW1hZ2VdIFBhbm9yYW1hIGVudmlyb25tZW50IGltYWdlLCBIRFIgZm9ybWF0IGlzIGJldHRlci4gT3IgYSBwcmUgbG9hZGVkIHRleHR1cmUgY3ViZVxuICogQHBhcmFtIHtudW1iZXJ9IFtzcGVjdWxhckludGVuc3RpdHk9MC43XSBJbnRlbnNpdHkgb2Ygc3BlY3VsYXIgbGlnaHQuXG4gKiBAcGFyYW0ge251bWJlcn0gW2RpZmZ1c2VJbnRlbnN0aXR5PTAuN10gSW50ZW5zaXR5IG9mIGRpZmZ1c2UgbGlnaHQuXG4gKiBAcGFyYW0ge251bWJlcn0gW2V4cG9zdXJlPTFdIEV4cG9zdXJlIG9mIEhEUiBpbWFnZS4gT25seSBpZiBpbWFnZSBpbiBmaXJzdCBwYXJhbXRlciBpcyBIRFIuXG4gKiBAcGFyYW0ge251bWJlcn0gW3ByZWZpbHRlcmVkQ3ViZW1hcFNpemU9MzJdIFRoZSBzaXplIG9mIHByZWZpbGVydGVkIGN1YmVtYXAuIExhcmdlciB2YWx1ZSB3aWxsIHRha2UgbW9yZSB0aW1lIHRvIGRvIGV4cGVuc2l2ZSBwcmVmaWx0ZXJpbmcuXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5BcHAzRC5wcm90b3R5cGUuY3JlYXRlQW1iaWVudEN1YmVtYXBMaWdodCA9IGZ1bmN0aW9uIChlbnZJbWFnZSwgc3BlY0ludGVuc2l0eSwgZGlmZkludGVuc2l0eSwgZXhwb3N1cmUsIHByZWZpbHRlcmVkQ3ViZW1hcFNpemUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYgKGV4cG9zdXJlID09IG51bGwpIHtcbiAgICAgICAgZXhwb3N1cmUgPSAwO1xuICAgIH1cbiAgICBpZiAocHJlZmlsdGVyZWRDdWJlbWFwU2l6ZSA9PSBudWxsKSB7XG4gICAgICAgIHByZWZpbHRlcmVkQ3ViZW1hcFNpemUgPSAzMjtcbiAgICB9XG5cbiAgICB2YXIgc2NlbmUgPSB0aGlzLnNjZW5lO1xuXG4gICAgdmFyIGxvYWRQcm9taXNlO1xuICAgIGlmIChlbnZJbWFnZS50ZXh0dXJlVHlwZSA9PT0gJ3RleHR1cmVDdWJlJykge1xuICAgICAgICBsb2FkUHJvbWlzZSA9IGVudkltYWdlLmlzUmVuZGVyYWJsZSgpXG4gICAgICAgICAgICA/IFByb21pc2UucmVzb2x2ZShlbnZJbWFnZSlcbiAgICAgICAgICAgIDogbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIGVudkltYWdlLnN1Y2Nlc3MoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGVudkltYWdlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbG9hZFByb21pc2UgPSB0aGlzLmxvYWRUZXh0dXJlKGVudkltYWdlLCB7XG4gICAgICAgICAgICBleHBvc3VyZTogZXhwb3N1cmVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxvYWRQcm9taXNlLnRoZW4oZnVuY3Rpb24gKGVudlRleHR1cmUpIHtcbiAgICAgICAgdmFyIHNwZWNMaWdodCA9IG5ldyBBbWJpZW50Q3ViZW1hcExpZ2h0KHtcbiAgICAgICAgICAgIGludGVuc2l0eTogc3BlY0ludGVuc2l0eSAhPSBudWxsID8gc3BlY0ludGVuc2l0eSA6IDAuN1xuICAgICAgICB9KTtcbiAgICAgICAgc3BlY0xpZ2h0LmN1YmVtYXAgPSBlbnZUZXh0dXJlO1xuICAgICAgICBlbnZUZXh0dXJlLmZsaXBZID0gZmFsc2U7XG4gICAgICAgIC8vIFRPRE8gQ2FjaGUgcHJlZmlsdGVyID9cbiAgICAgICAgc3BlY0xpZ2h0LnByZWZpbHRlcihzZWxmLnJlbmRlcmVyLCAzMik7XG5cbiAgICAgICAgdmFyIGRpZmZMaWdodCA9IG5ldyBBbWJpZW50U0hMaWdodCh7XG4gICAgICAgICAgICBpbnRlbnNpdHk6IGRpZmZJbnRlbnNpdHkgIT0gbnVsbCA/IGRpZmZJbnRlbnNpdHkgOiAwLjcsXG4gICAgICAgICAgICBjb2VmZmljaWVudHM6IHNoVXRpbC5wcm9qZWN0RW52aXJvbm1lbnRNYXAoXG4gICAgICAgICAgICAgICAgc2VsZi5yZW5kZXJlciwgc3BlY0xpZ2h0LmN1YmVtYXAsIHtcbiAgICAgICAgICAgICAgICAgICAgbG9kOiAxXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICB9KTtcbiAgICAgICAgc2NlbmUuYWRkKHNwZWNMaWdodCk7XG4gICAgICAgIHNjZW5lLmFkZChkaWZmTGlnaHQpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzcGVjdWxhcjogc3BlY0xpZ2h0LFxuICAgICAgICAgICAgZGlmZnVzZTogZGlmZkxpZ2h0LFxuICAgICAgICAgICAgLy8gT3JpZ2luYWwgZW52aXJvbm1lbnQgbWFwXG4gICAgICAgICAgICBlbnZpcm9ubWVudE1hcDogZW52VGV4dHVyZVxuICAgICAgICB9O1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBMb2FkIGEgW2dsVEZdKGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURikgZm9ybWF0IG1vZGVsLlxuICogWW91IGNhbiBjb252ZXJ0IEZCWC9EQUUvT0JKIGZvcm1hdCBtb2RlbHMgdG8gW2dsVEZdKGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURikgd2l0aCBbZmJ4MmdsdGZdKGh0dHBzOi8vZ2l0aHViLmNvbS9waXNzYW5nL2NsYXlnbCNmYngtdG8tZ2x0ZjIwLWNvbnZlcnRlcikgcHl0aG9uIHNjcmlwdCxcbiAqIG9yIHNpbXBseSB1c2luZyB0aGUgW0NsYXkgVmlld2VyXShodHRwczovL2dpdGh1Yi5jb20vcGlzc2FuZy9jbGF5LXZpZXdlcikgY2xpZW50IGFwcGxpY2F0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtPYmplY3R9IG9wdHNcbiAqIEBwYXJhbSB7c3RyaW5nfGNsYXkuU2hhZGVyfSBbb3B0cy5zaGFkZXI9J2NsYXkuc3RhbmRhcmQnXSAnYmFzaWMnfCdsYW1iZXJ0J3wnc3RhbmRhcmQnLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0cy53YWl0VGV4dHVyZUxvYWRlZD1mYWxzZV0gSWYgYWRkIHRvIHNjZW5lIHV0aWwgdGV4dHVyZXMgYXJlIGFsbCBsb2FkZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmF1dG9QbGF5QW5pbWF0aW9uPXRydWVdIElmIGF1dG9wbGF5IHRoZSBhbmltYXRpb24gb2YgbW9kZWwuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnVwQXhpcz0neSddIENoYW5nZSBtb2RlbCB0byB5IHVwIGlmIHVwQXhpcyBpcyAneidcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMudGV4dHVyZUZsaXBZPWZhbHNlXVxuICogQHBhcmFtIHtib29sZWFufSBbb3B0cy50ZXh0dXJlQ29udmVydFRvUE9UPWZhbHNlXSBJZiBjb252ZXJ0IHRleHR1cmUgdG8gcG93ZXItb2YtdHdvXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdHMudGV4dHVyZVJvb3RQYXRoXSBSb290IHBhdGggb2YgdGV4dHVyZS4gRGVmYXVsdCB0byBiZSByZWxhdGl2ZSB3aXRoIGdsVEYgZmlsZS5cbiAqIEBwYXJhbSB7Y2xheS5Ob2RlfSBbcGFyZW50Tm9kZV0gUGFyZW50IG5vZGUgdGhhdCBtb2RlbCB3aWxsIGJlIG1vdW50ZWQuIERlZmF1bHQgdG8gYmUgc2NlbmVcbiAqIEByZXR1cm4ge1Byb21pc2V9XG4gKi9cbkFwcDNELnByb3RvdHlwZS5sb2FkTW9kZWwgPSBmdW5jdGlvbiAodXJsLCBvcHRzLCBwYXJlbnROb2RlKSB7XG4gICAgaWYgKHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBVUkwuJyk7XG4gICAgfVxuXG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgaWYgKG9wdHMuYXV0b1BsYXlBbmltYXRpb24gPT0gbnVsbCkge1xuICAgICAgICBvcHRzLmF1dG9QbGF5QW5pbWF0aW9uID0gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIHNoYWRlciA9IG9wdHMuc2hhZGVyIHx8ICdjbGF5LnN0YW5kYXJkJztcblxuICAgIHZhciBsb2FkZXJPcHRzID0ge1xuICAgICAgICByb290Tm9kZTogbmV3IE5vZGUoKSxcbiAgICAgICAgc2hhZGVyOiBzaGFkZXIsXG4gICAgICAgIHRleHR1cmVSb290UGF0aDogb3B0cy50ZXh0dXJlUm9vdFBhdGgsXG4gICAgICAgIGNyb3NzT3JpZ2luOiAnQW5vbnltb3VzJyxcbiAgICAgICAgdGV4dHVyZUZsaXBZOiBvcHRzLnRleHR1cmVGbGlwWSxcbiAgICAgICAgdGV4dHVyZUNvbnZlcnRUb1BPVDogb3B0cy50ZXh0dXJlQ29udmVydFRvUE9UXG4gICAgfTtcbiAgICBpZiAob3B0cy51cEF4aXMgJiYgb3B0cy51cEF4aXMudG9Mb3dlckNhc2UoKSA9PT0gJ3onKSB7XG4gICAgICAgIGxvYWRlck9wdHMucm9vdE5vZGUucm90YXRpb24uaWRlbnRpdHkoKS5yb3RhdGVYKC1NYXRoLlBJIC8gMik7XG4gICAgfVxuXG4gICAgdmFyIGxvYWRlciA9IG5ldyBHTFRGTG9hZGVyKGxvYWRlck9wdHMpO1xuXG4gICAgcGFyZW50Tm9kZSA9IHBhcmVudE5vZGUgfHwgdGhpcy5zY2VuZTtcbiAgICB2YXIgdGltZWxpbmUgPSB0aGlzLnRpbWVsaW5lO1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGFmdGVyTG9hZChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl9kaXNwb3NlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcGFyZW50Tm9kZS5hZGQocmVzdWx0LnJvb3ROb2RlKTtcbiAgICAgICAgICAgIGlmIChvcHRzLmF1dG9QbGF5QW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmNsaXBzLmZvckVhY2goZnVuY3Rpb24gKGNsaXApIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZWxpbmUuYWRkQ2xpcChjbGlwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBsb2FkZXIuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fZGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghb3B0cy53YWl0VGV4dHVyZUxvYWRlZCkge1xuICAgICAgICAgICAgICAgIGFmdGVyTG9hZChyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwocmVzdWx0LnRleHR1cmVzLm1hcChmdW5jdGlvbiAodGV4dHVyZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGV4dHVyZS5pc1JlbmRlcmFibGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0ZXh0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUuc3VjY2VzcyhyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUuZXJyb3IocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJMb2FkKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBhZnRlckxvYWQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGxvYWRlci5lcnJvcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxvYWRlci5sb2FkKHVybCk7XG4gICAgfSk7XG59O1xuXG5cbi8vIFRPRE8gY2xvbmVNb2RlbFxuXG4vKipcbiAqIFNpbWlsYXIgdG8gYGFwcC5zY2VuZS5jbG9uZU5vZGVgLCBleGNlcHQgaXQgd2lsbCBtb3VudCB0aGUgY2xvbmVkIG5vZGUgdG8gdGhlIHNjZW5lIGF1dG9tYXRpY2FsbHkuXG4gKiBTZWUgbW9yZSBpbiB7QGxpbmsgY2xheS5TY2VuZSNjbG9uZU5vZGV9XG4gKlxuICogQHBhcmFtIHtjbGF5Lk5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7Y2xheS5Ob2RlfSBbcGFyZW50Tm9kZV0gUGFyZW50IG5vZGUgdGhhdCBuZXcgY2xvbmVkIG5vZGUgd2lsbCBiZSBtb3VudGVkLlxuICogICAgICAgICAgRGVmYXVsdCB0byBoYXZlIHNhbWUgcGFyZW50IHdpdGggc291cmNlIG5vZGUuXG4gKiBAcmV0dXJuIHtjbGF5Lk5vZGV9XG4gKi9cbkFwcDNELnByb3RvdHlwZS5jbG9uZU5vZGUgPSBmdW5jdGlvbiAobm9kZSwgcGFyZW50Tm9kZSkge1xuICAgIHBhcmVudE5vZGUgPSBwYXJlbnROb2RlIHx8IG5vZGUuZ2V0UGFyZW50KCk7XG5cbiAgICB2YXIgbmV3Tm9kZSA9IHRoaXMuc2NlbmUuY2xvbmVOb2RlKG5vZGUsIHBhcmVudE5vZGUpO1xuICAgIGlmIChwYXJlbnROb2RlKSB7XG4gICAgICAgIHBhcmVudE5vZGUuYWRkKG5ld05vZGUpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdOb2RlO1xufTtcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgQXBwM0Q6IEFwcDNELFxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIDNEIGFwcGxpY2F0aW9uIHRoYXQgd2lsbCBtYW5hZ2UgdGhlIGFwcCBpbml0aWFsaXphdGlvbiBhbmQgbG9vcC5cbiAgICAgKlxuICAgICAqIFNlZSBtb3JlIGRldGFpbHMgYXQge0BsaW5rIGNsYXkuYXBwbGljYXRpb24uQXBwM0R9XG4gICAgICpcbiAgICAgKiBAbmFtZSBjbGF5LmFwcGxpY2F0aW9uLmNyZWF0ZVxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fHN0cmluZ30gZG9tIENvbnRhaW5lciBkb20gZWxlbWVudCBvciBhIHNlbGVjdG9yIHN0cmluZyB0aGF0IGNhbiBiZSB1c2VkIGluIGBxdWVyeVNlbGVjdG9yYFxuICAgICAqIEBwYXJhbSB7QXBwM0ROYW1lc3BhY2V9IGFwcE5TIE9wdGlvbnMgYW5kIG5hbWVzcGFjZSB1c2VkIGluIGNyZWF0aW5nIGFwcDNEXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtjbGF5LmFwcGxpY2F0aW9uLkFwcDNEfVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgY2xheS5hcHBsaWNhdGlvbi5jcmVhdGUoJyNhcHAnLCB7XG4gICAgICogICAgICBpbml0OiBmdW5jdGlvbiAoYXBwKSB7XG4gICAgICogICAgICAgICAgYXBwLmNyZWF0ZUN1YmUoKTtcbiAgICAgKiAgICAgICAgICB2YXIgY2FtZXJhID0gYXBwLmNyZWF0ZUNhbWVyYSgpO1xuICAgICAqICAgICAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoMCwgMCwgMik7XG4gICAgICogICAgICB9LFxuICAgICAqICAgICAgbG9vcDogZnVuY3Rpb24gKCkgeyAvLyBub29wIH1cbiAgICAgKiAgfSlcbiAgICAgKi9cbiAgICBjcmVhdGU6IGZ1bmN0aW9uIChkb20sIGFwcE5TKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXBwM0QoZG9tLCBhcHBOUyk7XG4gICAgfVxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2FwcGxpY2F0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAxMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///130\n");

/***/ }),
/* 131 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__GLProgram__ = __webpack_require__(132);\n\n\nvar loopRegex = /for\\s*?\\(int\\s*?_idx_\\s*\\=\\s*([\\w-]+)\\;\\s*_idx_\\s*<\\s*([\\w-]+);\\s*_idx_\\s*\\+\\+\\s*\\)\\s*\\{\\{([\\s\\S]+?)(?=\\}\\})\\}\\}/g;\n\nfunction unrollLoop(shaderStr, defines, lightsNumbers) {\n    // Loop unroll from three.js, https://github.com/mrdoob/three.js/blob/master/src/renderers/webgl/WebGLProgram.js#L175\n    // In some case like shadowMap in loop use 'i' to index value much slower.\n\n    // Loop use _idx_ and increased with _idx_++ will be unrolled\n    // Use {{ }} to match the pair so the if statement will not be affected\n    // Write like following\n    // for (int _idx_ = 0; _idx_ < 4; _idx_++) {{\n    //     vec3 color = texture2D(textures[_idx_], uv).rgb;\n    // }}\n    function replace(match, start, end, snippet) {\n        var unroll = '';\n        // Try to treat as define\n        if (isNaN(start)) {\n            if (start in defines) {\n                start = defines[start];\n            }\n            else {\n                start = lightNumberDefines[start];\n            }\n        }\n        if (isNaN(end)) {\n            if (end in defines) {\n                end = defines[end];\n            }\n            else {\n                end = lightNumberDefines[end];\n            }\n        }\n        // TODO Error checking\n\n        for (var idx = parseInt(start); idx < parseInt(end); idx++) {\n            // PENDING Add scope?\n            unroll += '{'\n                + snippet\n                    .replace(/float\\s*\\(\\s*_idx_\\s*\\)/g, idx.toFixed(1))\n                    .replace(/_idx_/g, idx)\n            + '}';\n        }\n\n        return unroll;\n    }\n\n    var lightNumberDefines = {};\n    for (var lightType in lightsNumbers) {\n        lightNumberDefines[lightType + '_COUNT'] = lightsNumbers[lightType];\n    }\n    return shaderStr.replace(loopRegex, replace);\n}\n\nfunction getDefineCode(defines, lightsNumbers, enabledTextures) {\n    var defineStr = [];\n    if (lightsNumbers) {\n        for (var lightType in lightsNumbers) {\n            var count = lightsNumbers[lightType];\n            if (count > 0) {\n                defineStr.push('#define ' + lightType.toUpperCase() + '_COUNT ' + count);\n            }\n        }\n    }\n    if (enabledTextures) {\n        for (var i = 0; i < enabledTextures.length; i++) {\n            var symbol = enabledTextures[i];\n            defineStr.push('#define ' + symbol.toUpperCase() + '_ENABLED');\n        }\n    }\n    // Custom Defines\n    for (var symbol in defines) {\n        var value = defines[symbol];\n        if (value === null) {\n            defineStr.push('#define ' + symbol);\n        }\n        else{\n            defineStr.push('#define ' + symbol + ' ' + value.toString());\n        }\n    }\n    return defineStr.join('\\n');\n}\n\nfunction getExtensionCode(exts) {\n    // Extension declaration must before all non-preprocessor codes\n    // TODO vertex ? extension enum ?\n    var extensionStr = [];\n    for (var i = 0; i < exts.length; i++) {\n        extensionStr.push('#extension GL_' + exts[i][0] + ' : enable');\n    }\n    return extensionStr.join('\\n');\n}\n\nfunction getPrecisionCode(precision) {\n    return ['precision', precision, 'float'].join(' ') + ';\\n'\n        + ['precision', precision, 'int'].join(' ') + ';\\n'\n        // depth texture may have precision problem on iOS device.\n        + ['precision', precision, 'sampler2D'].join(' ') + ';\\n';\n}\n\nfunction ProgramManager(renderer) {\n    this._renderer = renderer;\n    this._cache = {};\n}\n\nProgramManager.prototype.getProgram = function (renderable, material, scene, renderer) {\n    var cache = this._cache;\n\n    var isSkinnedMesh = renderable.isSkinnedMesh && renderable.isSkinnedMesh();\n    var isInstancedMesh = renderable.isInstancedMesh && renderable.isInstancedMesh();\n    var key = 's' + material.shader.shaderID + 'm' + material.getProgramKey();\n    if (scene) {\n        key += 'se' + scene.getProgramKey(renderable.lightGroup);\n    }\n    if (isSkinnedMesh) {\n        key += ',sk' + renderable.joints.length;\n    }\n    if (isInstancedMesh) {\n        key += ',is';\n    }\n    if (renderer.logDepthBuffer) {\n        key += ',ld';\n    }\n    var program = cache[key];\n\n    if (program) {\n        return program;\n    }\n\n    var lightsNumbers = scene ? scene.getLightsNumbers(renderable.lightGroup) : {};\n    var renderer = this._renderer;\n    var _gl = renderer.gl;\n    var enabledTextures = material.getEnabledTextures();\n    var extraDefineCode = '';\n    if (isSkinnedMesh) {\n        var skinDefines = {\n            SKINNING: null,\n            JOINT_COUNT: renderable.joints.length\n        };\n        if (renderable.joints.length > renderer.getMaxJointNumber()) {\n            skinDefines.USE_SKIN_MATRICES_TEXTURE = null;\n        }\n        // TODO Add skinning code?\n        extraDefineCode += '\\n' + getDefineCode(skinDefines) + '\\n';\n    }\n    if (isInstancedMesh) {\n        extraDefineCode += '\\n#define INSTANCING\\n';\n    }\n    if (renderer.logDepthBuffer) {\n        extraDefineCode += '\\n#define LOG_DEPTH\\n';\n    }\n    // TODO Optimize key generation\n    // VERTEX\n    var vertexDefineStr = extraDefineCode + getDefineCode(material.vertexDefines, lightsNumbers, enabledTextures);\n    // FRAGMENT\n    var fragmentDefineStr = extraDefineCode + getDefineCode(material.fragmentDefines, lightsNumbers, enabledTextures);\n\n    var extensions = [\n        ['OES_standard_derivatives', 'TEXTURE_LOD'],\n        ['EXT_shader_texture_lod', 'STANDARD_DERIVATIVES'],\n        ['EXT_frag_depth', 'FRAG_DEPTH']\n    ].filter(function (ext) {\n        return renderer.getGLExtension(ext[0]) != null;\n    });\n\n    for (var i = 0; i < extensions.length; i++) {\n        var extDefineCode = '\\n#define SUPPORT_' + extensions[i][1];\n        fragmentDefineStr += extDefineCode;\n        vertexDefineStr += extDefineCode;\n    };\n\n    var vertexCode = vertexDefineStr + '\\n' + material.shader.vertex;\n\n    var fragmentCode = getExtensionCode(extensions) + '\\n'\n        + getPrecisionCode(material.precision) + '\\n'\n        + fragmentDefineStr + '\\n'\n        + material.shader.fragment;\n\n    var finalVertexCode = unrollLoop(vertexCode, material.vertexDefines, lightsNumbers);\n    var finalFragmentCode = unrollLoop(fragmentCode, material.fragmentDefines, lightsNumbers);\n\n    var program = new __WEBPACK_IMPORTED_MODULE_0__GLProgram__[\"a\" /* default */]();\n    program.uniformSemantics = material.shader.uniformSemantics;\n    program.attributes = material.shader.attributes;\n    var errorMsg = program.buildProgram(_gl, material.shader, finalVertexCode, finalFragmentCode);\n    program.__error = errorMsg;\n\n    cache[key] = program;\n\n    return program;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ProgramManager);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZ3B1L1Byb2dyYW1NYW5hZ2VyLmpzP2ZkNDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEdMUHJvZ3JhbSBmcm9tICcuL0dMUHJvZ3JhbSc7XG5cbnZhciBsb29wUmVnZXggPSAvZm9yXFxzKj9cXChpbnRcXHMqP19pZHhfXFxzKlxcPVxccyooW1xcdy1dKylcXDtcXHMqX2lkeF9cXHMqPFxccyooW1xcdy1dKyk7XFxzKl9pZHhfXFxzKlxcK1xcK1xccypcXClcXHMqXFx7XFx7KFtcXHNcXFNdKz8pKD89XFx9XFx9KVxcfVxcfS9nO1xuXG5mdW5jdGlvbiB1bnJvbGxMb29wKHNoYWRlclN0ciwgZGVmaW5lcywgbGlnaHRzTnVtYmVycykge1xuICAgIC8vIExvb3AgdW5yb2xsIGZyb20gdGhyZWUuanMsIGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvYmxvYi9tYXN0ZXIvc3JjL3JlbmRlcmVycy93ZWJnbC9XZWJHTFByb2dyYW0uanMjTDE3NVxuICAgIC8vIEluIHNvbWUgY2FzZSBsaWtlIHNoYWRvd01hcCBpbiBsb29wIHVzZSAnaScgdG8gaW5kZXggdmFsdWUgbXVjaCBzbG93ZXIuXG5cbiAgICAvLyBMb29wIHVzZSBfaWR4XyBhbmQgaW5jcmVhc2VkIHdpdGggX2lkeF8rKyB3aWxsIGJlIHVucm9sbGVkXG4gICAgLy8gVXNlIHt7IH19IHRvIG1hdGNoIHRoZSBwYWlyIHNvIHRoZSBpZiBzdGF0ZW1lbnQgd2lsbCBub3QgYmUgYWZmZWN0ZWRcbiAgICAvLyBXcml0ZSBsaWtlIGZvbGxvd2luZ1xuICAgIC8vIGZvciAoaW50IF9pZHhfID0gMDsgX2lkeF8gPCA0OyBfaWR4XysrKSB7e1xuICAgIC8vICAgICB2ZWMzIGNvbG9yID0gdGV4dHVyZTJEKHRleHR1cmVzW19pZHhfXSwgdXYpLnJnYjtcbiAgICAvLyB9fVxuICAgIGZ1bmN0aW9uIHJlcGxhY2UobWF0Y2gsIHN0YXJ0LCBlbmQsIHNuaXBwZXQpIHtcbiAgICAgICAgdmFyIHVucm9sbCA9ICcnO1xuICAgICAgICAvLyBUcnkgdG8gdHJlYXQgYXMgZGVmaW5lXG4gICAgICAgIGlmIChpc05hTihzdGFydCkpIHtcbiAgICAgICAgICAgIGlmIChzdGFydCBpbiBkZWZpbmVzKSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBkZWZpbmVzW3N0YXJ0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0gbGlnaHROdW1iZXJEZWZpbmVzW3N0YXJ0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOYU4oZW5kKSkge1xuICAgICAgICAgICAgaWYgKGVuZCBpbiBkZWZpbmVzKSB7XG4gICAgICAgICAgICAgICAgZW5kID0gZGVmaW5lc1tlbmRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZW5kID0gbGlnaHROdW1iZXJEZWZpbmVzW2VuZF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETyBFcnJvciBjaGVja2luZ1xuXG4gICAgICAgIGZvciAodmFyIGlkeCA9IHBhcnNlSW50KHN0YXJ0KTsgaWR4IDwgcGFyc2VJbnQoZW5kKTsgaWR4KyspIHtcbiAgICAgICAgICAgIC8vIFBFTkRJTkcgQWRkIHNjb3BlP1xuICAgICAgICAgICAgdW5yb2xsICs9ICd7J1xuICAgICAgICAgICAgICAgICsgc25pcHBldFxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvZmxvYXRcXHMqXFwoXFxzKl9pZHhfXFxzKlxcKS9nLCBpZHgudG9GaXhlZCgxKSlcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL19pZHhfL2csIGlkeClcbiAgICAgICAgICAgICsgJ30nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVucm9sbDtcbiAgICB9XG5cbiAgICB2YXIgbGlnaHROdW1iZXJEZWZpbmVzID0ge307XG4gICAgZm9yICh2YXIgbGlnaHRUeXBlIGluIGxpZ2h0c051bWJlcnMpIHtcbiAgICAgICAgbGlnaHROdW1iZXJEZWZpbmVzW2xpZ2h0VHlwZSArICdfQ09VTlQnXSA9IGxpZ2h0c051bWJlcnNbbGlnaHRUeXBlXTtcbiAgICB9XG4gICAgcmV0dXJuIHNoYWRlclN0ci5yZXBsYWNlKGxvb3BSZWdleCwgcmVwbGFjZSk7XG59XG5cbmZ1bmN0aW9uIGdldERlZmluZUNvZGUoZGVmaW5lcywgbGlnaHRzTnVtYmVycywgZW5hYmxlZFRleHR1cmVzKSB7XG4gICAgdmFyIGRlZmluZVN0ciA9IFtdO1xuICAgIGlmIChsaWdodHNOdW1iZXJzKSB7XG4gICAgICAgIGZvciAodmFyIGxpZ2h0VHlwZSBpbiBsaWdodHNOdW1iZXJzKSB7XG4gICAgICAgICAgICB2YXIgY291bnQgPSBsaWdodHNOdW1iZXJzW2xpZ2h0VHlwZV07XG4gICAgICAgICAgICBpZiAoY291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgZGVmaW5lU3RyLnB1c2goJyNkZWZpbmUgJyArIGxpZ2h0VHlwZS50b1VwcGVyQ2FzZSgpICsgJ19DT1VOVCAnICsgY291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChlbmFibGVkVGV4dHVyZXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbmFibGVkVGV4dHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzeW1ib2wgPSBlbmFibGVkVGV4dHVyZXNbaV07XG4gICAgICAgICAgICBkZWZpbmVTdHIucHVzaCgnI2RlZmluZSAnICsgc3ltYm9sLnRvVXBwZXJDYXNlKCkgKyAnX0VOQUJMRUQnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBDdXN0b20gRGVmaW5lc1xuICAgIGZvciAodmFyIHN5bWJvbCBpbiBkZWZpbmVzKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGRlZmluZXNbc3ltYm9sXTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICBkZWZpbmVTdHIucHVzaCgnI2RlZmluZSAnICsgc3ltYm9sKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgZGVmaW5lU3RyLnB1c2goJyNkZWZpbmUgJyArIHN5bWJvbCArICcgJyArIHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkZWZpbmVTdHIuam9pbignXFxuJyk7XG59XG5cbmZ1bmN0aW9uIGdldEV4dGVuc2lvbkNvZGUoZXh0cykge1xuICAgIC8vIEV4dGVuc2lvbiBkZWNsYXJhdGlvbiBtdXN0IGJlZm9yZSBhbGwgbm9uLXByZXByb2Nlc3NvciBjb2Rlc1xuICAgIC8vIFRPRE8gdmVydGV4ID8gZXh0ZW5zaW9uIGVudW0gP1xuICAgIHZhciBleHRlbnNpb25TdHIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4dHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZXh0ZW5zaW9uU3RyLnB1c2goJyNleHRlbnNpb24gR0xfJyArIGV4dHNbaV1bMF0gKyAnIDogZW5hYmxlJyk7XG4gICAgfVxuICAgIHJldHVybiBleHRlbnNpb25TdHIuam9pbignXFxuJyk7XG59XG5cbmZ1bmN0aW9uIGdldFByZWNpc2lvbkNvZGUocHJlY2lzaW9uKSB7XG4gICAgcmV0dXJuIFsncHJlY2lzaW9uJywgcHJlY2lzaW9uLCAnZmxvYXQnXS5qb2luKCcgJykgKyAnO1xcbidcbiAgICAgICAgKyBbJ3ByZWNpc2lvbicsIHByZWNpc2lvbiwgJ2ludCddLmpvaW4oJyAnKSArICc7XFxuJ1xuICAgICAgICAvLyBkZXB0aCB0ZXh0dXJlIG1heSBoYXZlIHByZWNpc2lvbiBwcm9ibGVtIG9uIGlPUyBkZXZpY2UuXG4gICAgICAgICsgWydwcmVjaXNpb24nLCBwcmVjaXNpb24sICdzYW1wbGVyMkQnXS5qb2luKCcgJykgKyAnO1xcbic7XG59XG5cbmZ1bmN0aW9uIFByb2dyYW1NYW5hZ2VyKHJlbmRlcmVyKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jYWNoZSA9IHt9O1xufVxuXG5Qcm9ncmFtTWFuYWdlci5wcm90b3R5cGUuZ2V0UHJvZ3JhbSA9IGZ1bmN0aW9uIChyZW5kZXJhYmxlLCBtYXRlcmlhbCwgc2NlbmUsIHJlbmRlcmVyKSB7XG4gICAgdmFyIGNhY2hlID0gdGhpcy5fY2FjaGU7XG5cbiAgICB2YXIgaXNTa2lubmVkTWVzaCA9IHJlbmRlcmFibGUuaXNTa2lubmVkTWVzaCAmJiByZW5kZXJhYmxlLmlzU2tpbm5lZE1lc2goKTtcbiAgICB2YXIgaXNJbnN0YW5jZWRNZXNoID0gcmVuZGVyYWJsZS5pc0luc3RhbmNlZE1lc2ggJiYgcmVuZGVyYWJsZS5pc0luc3RhbmNlZE1lc2goKTtcbiAgICB2YXIga2V5ID0gJ3MnICsgbWF0ZXJpYWwuc2hhZGVyLnNoYWRlcklEICsgJ20nICsgbWF0ZXJpYWwuZ2V0UHJvZ3JhbUtleSgpO1xuICAgIGlmIChzY2VuZSkge1xuICAgICAgICBrZXkgKz0gJ3NlJyArIHNjZW5lLmdldFByb2dyYW1LZXkocmVuZGVyYWJsZS5saWdodEdyb3VwKTtcbiAgICB9XG4gICAgaWYgKGlzU2tpbm5lZE1lc2gpIHtcbiAgICAgICAga2V5ICs9ICcsc2snICsgcmVuZGVyYWJsZS5qb2ludHMubGVuZ3RoO1xuICAgIH1cbiAgICBpZiAoaXNJbnN0YW5jZWRNZXNoKSB7XG4gICAgICAgIGtleSArPSAnLGlzJztcbiAgICB9XG4gICAgaWYgKHJlbmRlcmVyLmxvZ0RlcHRoQnVmZmVyKSB7XG4gICAgICAgIGtleSArPSAnLGxkJztcbiAgICB9XG4gICAgdmFyIHByb2dyYW0gPSBjYWNoZVtrZXldO1xuXG4gICAgaWYgKHByb2dyYW0pIHtcbiAgICAgICAgcmV0dXJuIHByb2dyYW07XG4gICAgfVxuXG4gICAgdmFyIGxpZ2h0c051bWJlcnMgPSBzY2VuZSA/IHNjZW5lLmdldExpZ2h0c051bWJlcnMocmVuZGVyYWJsZS5saWdodEdyb3VwKSA6IHt9O1xuICAgIHZhciByZW5kZXJlciA9IHRoaXMuX3JlbmRlcmVyO1xuICAgIHZhciBfZ2wgPSByZW5kZXJlci5nbDtcbiAgICB2YXIgZW5hYmxlZFRleHR1cmVzID0gbWF0ZXJpYWwuZ2V0RW5hYmxlZFRleHR1cmVzKCk7XG4gICAgdmFyIGV4dHJhRGVmaW5lQ29kZSA9ICcnO1xuICAgIGlmIChpc1NraW5uZWRNZXNoKSB7XG4gICAgICAgIHZhciBza2luRGVmaW5lcyA9IHtcbiAgICAgICAgICAgIFNLSU5OSU5HOiBudWxsLFxuICAgICAgICAgICAgSk9JTlRfQ09VTlQ6IHJlbmRlcmFibGUuam9pbnRzLmxlbmd0aFxuICAgICAgICB9O1xuICAgICAgICBpZiAocmVuZGVyYWJsZS5qb2ludHMubGVuZ3RoID4gcmVuZGVyZXIuZ2V0TWF4Sm9pbnROdW1iZXIoKSkge1xuICAgICAgICAgICAgc2tpbkRlZmluZXMuVVNFX1NLSU5fTUFUUklDRVNfVEVYVFVSRSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETyBBZGQgc2tpbm5pbmcgY29kZT9cbiAgICAgICAgZXh0cmFEZWZpbmVDb2RlICs9ICdcXG4nICsgZ2V0RGVmaW5lQ29kZShza2luRGVmaW5lcykgKyAnXFxuJztcbiAgICB9XG4gICAgaWYgKGlzSW5zdGFuY2VkTWVzaCkge1xuICAgICAgICBleHRyYURlZmluZUNvZGUgKz0gJ1xcbiNkZWZpbmUgSU5TVEFOQ0lOR1xcbic7XG4gICAgfVxuICAgIGlmIChyZW5kZXJlci5sb2dEZXB0aEJ1ZmZlcikge1xuICAgICAgICBleHRyYURlZmluZUNvZGUgKz0gJ1xcbiNkZWZpbmUgTE9HX0RFUFRIXFxuJztcbiAgICB9XG4gICAgLy8gVE9ETyBPcHRpbWl6ZSBrZXkgZ2VuZXJhdGlvblxuICAgIC8vIFZFUlRFWFxuICAgIHZhciB2ZXJ0ZXhEZWZpbmVTdHIgPSBleHRyYURlZmluZUNvZGUgKyBnZXREZWZpbmVDb2RlKG1hdGVyaWFsLnZlcnRleERlZmluZXMsIGxpZ2h0c051bWJlcnMsIGVuYWJsZWRUZXh0dXJlcyk7XG4gICAgLy8gRlJBR01FTlRcbiAgICB2YXIgZnJhZ21lbnREZWZpbmVTdHIgPSBleHRyYURlZmluZUNvZGUgKyBnZXREZWZpbmVDb2RlKG1hdGVyaWFsLmZyYWdtZW50RGVmaW5lcywgbGlnaHRzTnVtYmVycywgZW5hYmxlZFRleHR1cmVzKTtcblxuICAgIHZhciBleHRlbnNpb25zID0gW1xuICAgICAgICBbJ09FU19zdGFuZGFyZF9kZXJpdmF0aXZlcycsICdURVhUVVJFX0xPRCddLFxuICAgICAgICBbJ0VYVF9zaGFkZXJfdGV4dHVyZV9sb2QnLCAnU1RBTkRBUkRfREVSSVZBVElWRVMnXSxcbiAgICAgICAgWydFWFRfZnJhZ19kZXB0aCcsICdGUkFHX0RFUFRIJ11cbiAgICBdLmZpbHRlcihmdW5jdGlvbiAoZXh0KSB7XG4gICAgICAgIHJldHVybiByZW5kZXJlci5nZXRHTEV4dGVuc2lvbihleHRbMF0pICE9IG51bGw7XG4gICAgfSk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4dGVuc2lvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGV4dERlZmluZUNvZGUgPSAnXFxuI2RlZmluZSBTVVBQT1JUXycgKyBleHRlbnNpb25zW2ldWzFdO1xuICAgICAgICBmcmFnbWVudERlZmluZVN0ciArPSBleHREZWZpbmVDb2RlO1xuICAgICAgICB2ZXJ0ZXhEZWZpbmVTdHIgKz0gZXh0RGVmaW5lQ29kZTtcbiAgICB9O1xuXG4gICAgdmFyIHZlcnRleENvZGUgPSB2ZXJ0ZXhEZWZpbmVTdHIgKyAnXFxuJyArIG1hdGVyaWFsLnNoYWRlci52ZXJ0ZXg7XG5cbiAgICB2YXIgZnJhZ21lbnRDb2RlID0gZ2V0RXh0ZW5zaW9uQ29kZShleHRlbnNpb25zKSArICdcXG4nXG4gICAgICAgICsgZ2V0UHJlY2lzaW9uQ29kZShtYXRlcmlhbC5wcmVjaXNpb24pICsgJ1xcbidcbiAgICAgICAgKyBmcmFnbWVudERlZmluZVN0ciArICdcXG4nXG4gICAgICAgICsgbWF0ZXJpYWwuc2hhZGVyLmZyYWdtZW50O1xuXG4gICAgdmFyIGZpbmFsVmVydGV4Q29kZSA9IHVucm9sbExvb3AodmVydGV4Q29kZSwgbWF0ZXJpYWwudmVydGV4RGVmaW5lcywgbGlnaHRzTnVtYmVycyk7XG4gICAgdmFyIGZpbmFsRnJhZ21lbnRDb2RlID0gdW5yb2xsTG9vcChmcmFnbWVudENvZGUsIG1hdGVyaWFsLmZyYWdtZW50RGVmaW5lcywgbGlnaHRzTnVtYmVycyk7XG5cbiAgICB2YXIgcHJvZ3JhbSA9IG5ldyBHTFByb2dyYW0oKTtcbiAgICBwcm9ncmFtLnVuaWZvcm1TZW1hbnRpY3MgPSBtYXRlcmlhbC5zaGFkZXIudW5pZm9ybVNlbWFudGljcztcbiAgICBwcm9ncmFtLmF0dHJpYnV0ZXMgPSBtYXRlcmlhbC5zaGFkZXIuYXR0cmlidXRlcztcbiAgICB2YXIgZXJyb3JNc2cgPSBwcm9ncmFtLmJ1aWxkUHJvZ3JhbShfZ2wsIG1hdGVyaWFsLnNoYWRlciwgZmluYWxWZXJ0ZXhDb2RlLCBmaW5hbEZyYWdtZW50Q29kZSk7XG4gICAgcHJvZ3JhbS5fX2Vycm9yID0gZXJyb3JNc2c7XG5cbiAgICBjYWNoZVtrZXldID0gcHJvZ3JhbTtcblxuICAgIHJldHVybiBwcm9ncmFtO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUHJvZ3JhbU1hbmFnZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9ncHUvUHJvZ3JhbU1hbmFnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEzMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///131\n");

/***/ }),
/* 132 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_Base__ = __webpack_require__(1);\n\n\n\nvar SHADER_STATE_TO_ENABLE = 1;\nvar SHADER_STATE_KEEP_ENABLE = 2;\nvar SHADER_STATE_PENDING = 3;\n\n// Enable attribute operation is global to all programs\n// Here saved the list of all enabled attribute index\n// http://www.mjbshaw.com/2013/03/webgl-fixing-invalidoperation.html\nvar enabledAttributeList = {};\n\n// some util functions\nfunction addLineNumbers(string) {\n    var chunks = string.split('\\n');\n    for (var i = 0, il = chunks.length; i < il; i ++) {\n        // Chrome reports shader errors on lines\n        // starting counting from 1\n        chunks[i] = (i + 1) + ': ' + chunks[i];\n    }\n    return chunks.join('\\n');\n}\n\n// Return true or error msg if error happened\nfunction checkShaderErrorMsg(_gl, shader, shaderString) {\n    if (!_gl.getShaderParameter(shader, _gl.COMPILE_STATUS)) {\n        return [_gl.getShaderInfoLog(shader), addLineNumbers(shaderString)].join('\\n');\n    }\n}\n\nvar tmpFloat32Array16 = new __WEBPACK_IMPORTED_MODULE_0__core_vendor__[\"a\" /* default */].Float32Array(16);\n\nvar GLProgram = __WEBPACK_IMPORTED_MODULE_1__core_Base__[\"a\" /* default */].extend({\n\n    uniformSemantics: {},\n    attributes: {}\n\n}, function () {\n    this._locations = {};\n\n    this._textureSlot = 0;\n\n    this._program = null;\n}, {\n\n    bind: function (renderer) {\n        this._textureSlot = 0;\n        renderer.gl.useProgram(this._program);\n    },\n\n    hasUniform: function (symbol) {\n        var location = this._locations[symbol];\n        return location !== null && location !== undefined;\n    },\n\n    useTextureSlot: function (renderer, texture, slot) {\n        if (texture) {\n            renderer.gl.activeTexture(renderer.gl.TEXTURE0 + slot);\n            // Maybe texture is not loaded yet;\n            if (texture.isRenderable()) {\n                texture.bind(renderer);\n            }\n            else {\n                // Bind texture to null\n                texture.unbind(renderer);\n            }\n        }\n    },\n\n    currentTextureSlot: function () {\n        return this._textureSlot;\n    },\n\n    resetTextureSlot: function (slot) {\n        this._textureSlot = slot || 0;\n    },\n\n    takeCurrentTextureSlot: function (renderer, texture) {\n        var textureSlot = this._textureSlot;\n\n        this.useTextureSlot(renderer, texture, textureSlot);\n\n        this._textureSlot++;\n\n        return textureSlot;\n    },\n\n    setUniform: function (_gl, type, symbol, value) {\n        var locationMap = this._locations;\n        var location = locationMap[symbol];\n        // Uniform is not existed in the shader\n        if (location === null || location === undefined) {\n            return false;\n        }\n\n        switch (type) {\n            case 'm4':\n                if (!(value instanceof Float32Array)) {\n                    // Use Float32Array is much faster than array when uniformMatrix4fv.\n                    for (var i = 0; i < value.length; i++) {\n                        tmpFloat32Array16[i] = value[i];\n                    }\n                    value = tmpFloat32Array16;\n                }\n                _gl.uniformMatrix4fv(location, false, value);\n                break;\n            case '2i':\n                _gl.uniform2i(location, value[0], value[1]);\n                break;\n            case '2f':\n                _gl.uniform2f(location, value[0], value[1]);\n                break;\n            case '3i':\n                _gl.uniform3i(location, value[0], value[1], value[2]);\n                break;\n            case '3f':\n                _gl.uniform3f(location, value[0], value[1], value[2]);\n                break;\n            case '4i':\n                _gl.uniform4i(location, value[0], value[1], value[2], value[3]);\n                break;\n            case '4f':\n                _gl.uniform4f(location, value[0], value[1], value[2], value[3]);\n                break;\n            case '1i':\n                _gl.uniform1i(location, value);\n                break;\n            case '1f':\n                _gl.uniform1f(location, value);\n                break;\n            case '1fv':\n                _gl.uniform1fv(location, value);\n                break;\n            case '1iv':\n                _gl.uniform1iv(location, value);\n                break;\n            case '2iv':\n                _gl.uniform2iv(location, value);\n                break;\n            case '2fv':\n                _gl.uniform2fv(location, value);\n                break;\n            case '3iv':\n                _gl.uniform3iv(location, value);\n                break;\n            case '3fv':\n                _gl.uniform3fv(location, value);\n                break;\n            case '4iv':\n                _gl.uniform4iv(location, value);\n                break;\n            case '4fv':\n                _gl.uniform4fv(location, value);\n                break;\n            case 'm2':\n            case 'm2v':\n                _gl.uniformMatrix2fv(location, false, value);\n                break;\n            case 'm3':\n            case 'm3v':\n                _gl.uniformMatrix3fv(location, false, value);\n                break;\n            case 'm4v':\n                // Raw value\n                if (Array.isArray(value) && Array.isArray(value[0])) {\n                    var array = new __WEBPACK_IMPORTED_MODULE_0__core_vendor__[\"a\" /* default */].Float32Array(value.length * 16);\n                    var cursor = 0;\n                    for (var i = 0; i < value.length; i++) {\n                        var item = value[i];\n                        for (var j = 0; j < 16; j++) {\n                            array[cursor++] = item[j];\n                        }\n                    }\n                    _gl.uniformMatrix4fv(location, false, array);\n                }\n                else {   // ArrayBufferView\n                    _gl.uniformMatrix4fv(location, false, value);\n                }\n                break;\n        }\n        return true;\n    },\n\n    setUniformOfSemantic: function (_gl, semantic, val) {\n        var semanticInfo = this.uniformSemantics[semantic];\n        if (semanticInfo) {\n            return this.setUniform(_gl, semanticInfo.type, semanticInfo.symbol, val);\n        }\n        return false;\n    },\n\n    // Used for creating VAO\n    // Enable the attributes passed in and disable the rest\n    // Example Usage:\n    // enableAttributes(renderer, [\"position\", \"texcoords\"])\n    enableAttributes: function (renderer, attribList, vao) {\n        var _gl = renderer.gl;\n        var program = this._program;\n\n        var locationMap = this._locations;\n\n        var enabledAttributeListInContext;\n        if (vao) {\n            enabledAttributeListInContext = vao.__enabledAttributeList;\n        }\n        else {\n            enabledAttributeListInContext = enabledAttributeList[renderer.__uid__];\n        }\n        if (!enabledAttributeListInContext) {\n            // In vertex array object context\n            // PENDING Each vao object needs to enable attributes again?\n            if (vao) {\n                enabledAttributeListInContext\n                    = vao.__enabledAttributeList\n                    = [];\n            }\n            else {\n                enabledAttributeListInContext\n                    = enabledAttributeList[renderer.__uid__]\n                    = [];\n            }\n        }\n        var locationList = [];\n        for (var i = 0; i < attribList.length; i++) {\n            var symbol = attribList[i];\n            if (!this.attributes[symbol]) {\n                locationList[i] = -1;\n                continue;\n            }\n            var location = locationMap[symbol];\n            if (location == null) {\n                location = _gl.getAttribLocation(program, symbol);\n                // Attrib location is a number from 0 to ...\n                if (location === -1) {\n                    locationList[i] = -1;\n                    continue;\n                }\n                locationMap[symbol] = location;\n            }\n            locationList[i] = location;\n\n            if (!enabledAttributeListInContext[location]) {\n                enabledAttributeListInContext[location] = SHADER_STATE_TO_ENABLE;\n            }\n            else {\n                enabledAttributeListInContext[location] = SHADER_STATE_KEEP_ENABLE;\n            }\n        }\n\n        for (var i = 0; i < enabledAttributeListInContext.length; i++) {\n            switch (enabledAttributeListInContext[i]){\n                case SHADER_STATE_TO_ENABLE:\n                    _gl.enableVertexAttribArray(i);\n                    enabledAttributeListInContext[i] = SHADER_STATE_PENDING;\n                    break;\n                case SHADER_STATE_KEEP_ENABLE:\n                    enabledAttributeListInContext[i] = SHADER_STATE_PENDING;\n                    break;\n                // Expired\n                case SHADER_STATE_PENDING:\n                    _gl.disableVertexAttribArray(i);\n                    enabledAttributeListInContext[i] = 0;\n                    break;\n            }\n        }\n\n        return locationList;\n    },\n\n    getAttribLocation: function (_gl, symbol) {\n        var locationMap = this._locations;\n\n        var location = locationMap[symbol];\n        if (location == null) {\n            location = _gl.getAttribLocation(this._program, symbol);\n            locationMap[symbol] = location;\n        }\n\n        return location;\n    },\n\n    isAttribEnabled: function (renderer, location) {\n        var enabledAttributeListInContext\n            = enabledAttributeList[renderer.__uid__]\n            || [];\n\n        return !!enabledAttributeListInContext[location];\n    },\n\n    buildProgram: function (_gl, shader, vertexShaderCode, fragmentShaderCode) {\n        var vertexShader = _gl.createShader(_gl.VERTEX_SHADER);\n        var program = _gl.createProgram();\n\n        _gl.shaderSource(vertexShader, vertexShaderCode);\n        _gl.compileShader(vertexShader);\n\n        var fragmentShader = _gl.createShader(_gl.FRAGMENT_SHADER);\n        _gl.shaderSource(fragmentShader, fragmentShaderCode);\n        _gl.compileShader(fragmentShader);\n\n        var msg = checkShaderErrorMsg(_gl, vertexShader, vertexShaderCode);\n        if (msg) {\n            return msg;\n        }\n        msg = checkShaderErrorMsg(_gl, fragmentShader, fragmentShaderCode);\n        if (msg) {\n            return msg;\n        }\n\n        _gl.attachShader(program, vertexShader);\n        _gl.attachShader(program, fragmentShader);\n        // Force the position bind to location 0;\n        if (shader.attributeSemantics['POSITION']) {\n            _gl.bindAttribLocation(program, 0, shader.attributeSemantics['POSITION'].symbol);\n        }\n        else {\n            // Else choose an attribute and bind to location 0;\n            var keys = Object.keys(this.attributes);\n            _gl.bindAttribLocation(program, 0, keys[0]);\n        }\n\n        _gl.linkProgram(program);\n\n        _gl.deleteShader(vertexShader);\n        _gl.deleteShader(fragmentShader);\n\n        this._program = program;\n\n        // Save code.\n        this.vertexCode = vertexShaderCode;\n        this.fragmentCode = fragmentShaderCode;\n\n        if (!_gl.getProgramParameter(program, _gl.LINK_STATUS)) {\n            return 'Could not link program\\n' + _gl.getProgramInfoLog(program);\n        }\n\n        // Cache uniform locations\n        for (var i = 0; i < shader.uniforms.length; i++) {\n            var uniformSymbol = shader.uniforms[i];\n            this._locations[uniformSymbol] = _gl.getUniformLocation(program, uniformSymbol);\n        }\n\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GLProgram);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZ3B1L0dMUHJvZ3JhbS5qcz9mM2E0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB2ZW5kb3IgZnJvbSAnLi4vY29yZS92ZW5kb3InO1xuaW1wb3J0IEJhc2UgZnJvbSAnLi4vY29yZS9CYXNlJztcblxudmFyIFNIQURFUl9TVEFURV9UT19FTkFCTEUgPSAxO1xudmFyIFNIQURFUl9TVEFURV9LRUVQX0VOQUJMRSA9IDI7XG52YXIgU0hBREVSX1NUQVRFX1BFTkRJTkcgPSAzO1xuXG4vLyBFbmFibGUgYXR0cmlidXRlIG9wZXJhdGlvbiBpcyBnbG9iYWwgdG8gYWxsIHByb2dyYW1zXG4vLyBIZXJlIHNhdmVkIHRoZSBsaXN0IG9mIGFsbCBlbmFibGVkIGF0dHJpYnV0ZSBpbmRleFxuLy8gaHR0cDovL3d3dy5tamJzaGF3LmNvbS8yMDEzLzAzL3dlYmdsLWZpeGluZy1pbnZhbGlkb3BlcmF0aW9uLmh0bWxcbnZhciBlbmFibGVkQXR0cmlidXRlTGlzdCA9IHt9O1xuXG4vLyBzb21lIHV0aWwgZnVuY3Rpb25zXG5mdW5jdGlvbiBhZGRMaW5lTnVtYmVycyhzdHJpbmcpIHtcbiAgICB2YXIgY2h1bmtzID0gc3RyaW5nLnNwbGl0KCdcXG4nKTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWwgPSBjaHVua3MubGVuZ3RoOyBpIDwgaWw7IGkgKyspIHtcbiAgICAgICAgLy8gQ2hyb21lIHJlcG9ydHMgc2hhZGVyIGVycm9ycyBvbiBsaW5lc1xuICAgICAgICAvLyBzdGFydGluZyBjb3VudGluZyBmcm9tIDFcbiAgICAgICAgY2h1bmtzW2ldID0gKGkgKyAxKSArICc6ICcgKyBjaHVua3NbaV07XG4gICAgfVxuICAgIHJldHVybiBjaHVua3Muam9pbignXFxuJyk7XG59XG5cbi8vIFJldHVybiB0cnVlIG9yIGVycm9yIG1zZyBpZiBlcnJvciBoYXBwZW5lZFxuZnVuY3Rpb24gY2hlY2tTaGFkZXJFcnJvck1zZyhfZ2wsIHNoYWRlciwgc2hhZGVyU3RyaW5nKSB7XG4gICAgaWYgKCFfZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgX2dsLkNPTVBJTEVfU1RBVFVTKSkge1xuICAgICAgICByZXR1cm4gW19nbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlciksIGFkZExpbmVOdW1iZXJzKHNoYWRlclN0cmluZyldLmpvaW4oJ1xcbicpO1xuICAgIH1cbn1cblxudmFyIHRtcEZsb2F0MzJBcnJheTE2ID0gbmV3IHZlbmRvci5GbG9hdDMyQXJyYXkoMTYpO1xuXG52YXIgR0xQcm9ncmFtID0gQmFzZS5leHRlbmQoe1xuXG4gICAgdW5pZm9ybVNlbWFudGljczoge30sXG4gICAgYXR0cmlidXRlczoge31cblxufSwgZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2xvY2F0aW9ucyA9IHt9O1xuXG4gICAgdGhpcy5fdGV4dHVyZVNsb3QgPSAwO1xuXG4gICAgdGhpcy5fcHJvZ3JhbSA9IG51bGw7XG59LCB7XG5cbiAgICBiaW5kOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5fdGV4dHVyZVNsb3QgPSAwO1xuICAgICAgICByZW5kZXJlci5nbC51c2VQcm9ncmFtKHRoaXMuX3Byb2dyYW0pO1xuICAgIH0sXG5cbiAgICBoYXNVbmlmb3JtOiBmdW5jdGlvbiAoc3ltYm9sKSB7XG4gICAgICAgIHZhciBsb2NhdGlvbiA9IHRoaXMuX2xvY2F0aW9uc1tzeW1ib2xdO1xuICAgICAgICByZXR1cm4gbG9jYXRpb24gIT09IG51bGwgJiYgbG9jYXRpb24gIT09IHVuZGVmaW5lZDtcbiAgICB9LFxuXG4gICAgdXNlVGV4dHVyZVNsb3Q6IGZ1bmN0aW9uIChyZW5kZXJlciwgdGV4dHVyZSwgc2xvdCkge1xuICAgICAgICBpZiAodGV4dHVyZSkge1xuICAgICAgICAgICAgcmVuZGVyZXIuZ2wuYWN0aXZlVGV4dHVyZShyZW5kZXJlci5nbC5URVhUVVJFMCArIHNsb3QpO1xuICAgICAgICAgICAgLy8gTWF5YmUgdGV4dHVyZSBpcyBub3QgbG9hZGVkIHlldDtcbiAgICAgICAgICAgIGlmICh0ZXh0dXJlLmlzUmVuZGVyYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5iaW5kKHJlbmRlcmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEJpbmQgdGV4dHVyZSB0byBudWxsXG4gICAgICAgICAgICAgICAgdGV4dHVyZS51bmJpbmQocmVuZGVyZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGN1cnJlbnRUZXh0dXJlU2xvdDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dHVyZVNsb3Q7XG4gICAgfSxcblxuICAgIHJlc2V0VGV4dHVyZVNsb3Q6IGZ1bmN0aW9uIChzbG90KSB7XG4gICAgICAgIHRoaXMuX3RleHR1cmVTbG90ID0gc2xvdCB8fCAwO1xuICAgIH0sXG5cbiAgICB0YWtlQ3VycmVudFRleHR1cmVTbG90OiBmdW5jdGlvbiAocmVuZGVyZXIsIHRleHR1cmUpIHtcbiAgICAgICAgdmFyIHRleHR1cmVTbG90ID0gdGhpcy5fdGV4dHVyZVNsb3Q7XG5cbiAgICAgICAgdGhpcy51c2VUZXh0dXJlU2xvdChyZW5kZXJlciwgdGV4dHVyZSwgdGV4dHVyZVNsb3QpO1xuXG4gICAgICAgIHRoaXMuX3RleHR1cmVTbG90Kys7XG5cbiAgICAgICAgcmV0dXJuIHRleHR1cmVTbG90O1xuICAgIH0sXG5cbiAgICBzZXRVbmlmb3JtOiBmdW5jdGlvbiAoX2dsLCB0eXBlLCBzeW1ib2wsIHZhbHVlKSB7XG4gICAgICAgIHZhciBsb2NhdGlvbk1hcCA9IHRoaXMuX2xvY2F0aW9ucztcbiAgICAgICAgdmFyIGxvY2F0aW9uID0gbG9jYXRpb25NYXBbc3ltYm9sXTtcbiAgICAgICAgLy8gVW5pZm9ybSBpcyBub3QgZXhpc3RlZCBpbiB0aGUgc2hhZGVyXG4gICAgICAgIGlmIChsb2NhdGlvbiA9PT0gbnVsbCB8fCBsb2NhdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ200JzpcbiAgICAgICAgICAgICAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIEZsb2F0MzJBcnJheSBpcyBtdWNoIGZhc3RlciB0aGFuIGFycmF5IHdoZW4gdW5pZm9ybU1hdHJpeDRmdi5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG1wRmxvYXQzMkFycmF5MTZbaV0gPSB2YWx1ZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRtcEZsb2F0MzJBcnJheTE2O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybU1hdHJpeDRmdihsb2NhdGlvbiwgZmFsc2UsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJzJpJzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybTJpKGxvY2F0aW9uLCB2YWx1ZVswXSwgdmFsdWVbMV0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnMmYnOlxuICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtMmYobG9jYXRpb24sIHZhbHVlWzBdLCB2YWx1ZVsxXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICczaSc6XG4gICAgICAgICAgICAgICAgX2dsLnVuaWZvcm0zaShsb2NhdGlvbiwgdmFsdWVbMF0sIHZhbHVlWzFdLCB2YWx1ZVsyXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICczZic6XG4gICAgICAgICAgICAgICAgX2dsLnVuaWZvcm0zZihsb2NhdGlvbiwgdmFsdWVbMF0sIHZhbHVlWzFdLCB2YWx1ZVsyXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICc0aSc6XG4gICAgICAgICAgICAgICAgX2dsLnVuaWZvcm00aShsb2NhdGlvbiwgdmFsdWVbMF0sIHZhbHVlWzFdLCB2YWx1ZVsyXSwgdmFsdWVbM10pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnNGYnOlxuICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtNGYobG9jYXRpb24sIHZhbHVlWzBdLCB2YWx1ZVsxXSwgdmFsdWVbMl0sIHZhbHVlWzNdKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJzFpJzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybTFpKGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICcxZic6XG4gICAgICAgICAgICAgICAgX2dsLnVuaWZvcm0xZihsb2NhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnMWZ2JzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybTFmdihsb2NhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnMWl2JzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybTFpdihsb2NhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnMml2JzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybTJpdihsb2NhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnMmZ2JzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybTJmdihsb2NhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnM2l2JzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybTNpdihsb2NhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnM2Z2JzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybTNmdihsb2NhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnNGl2JzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybTRpdihsb2NhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnNGZ2JzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybTRmdihsb2NhdGlvbiwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbTInOlxuICAgICAgICAgICAgY2FzZSAnbTJ2JzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybU1hdHJpeDJmdihsb2NhdGlvbiwgZmFsc2UsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ20zJzpcbiAgICAgICAgICAgIGNhc2UgJ20zdic6XG4gICAgICAgICAgICAgICAgX2dsLnVuaWZvcm1NYXRyaXgzZnYobG9jYXRpb24sIGZhbHNlLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtNHYnOlxuICAgICAgICAgICAgICAgIC8vIFJhdyB2YWx1ZVxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiBBcnJheS5pc0FycmF5KHZhbHVlWzBdKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBuZXcgdmVuZG9yLkZsb2F0MzJBcnJheSh2YWx1ZS5sZW5ndGggKiAxNik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJzb3IgPSAwO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHZhbHVlW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAxNjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlbY3Vyc29yKytdID0gaXRlbVtqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybU1hdHJpeDRmdihsb2NhdGlvbiwgZmFsc2UsIGFycmF5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7ICAgLy8gQXJyYXlCdWZmZXJWaWV3XG4gICAgICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtTWF0cml4NGZ2KGxvY2F0aW9uLCBmYWxzZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuXG4gICAgc2V0VW5pZm9ybU9mU2VtYW50aWM6IGZ1bmN0aW9uIChfZ2wsIHNlbWFudGljLCB2YWwpIHtcbiAgICAgICAgdmFyIHNlbWFudGljSW5mbyA9IHRoaXMudW5pZm9ybVNlbWFudGljc1tzZW1hbnRpY107XG4gICAgICAgIGlmIChzZW1hbnRpY0luZm8pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldFVuaWZvcm0oX2dsLCBzZW1hbnRpY0luZm8udHlwZSwgc2VtYW50aWNJbmZvLnN5bWJvbCwgdmFsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8vIFVzZWQgZm9yIGNyZWF0aW5nIFZBT1xuICAgIC8vIEVuYWJsZSB0aGUgYXR0cmlidXRlcyBwYXNzZWQgaW4gYW5kIGRpc2FibGUgdGhlIHJlc3RcbiAgICAvLyBFeGFtcGxlIFVzYWdlOlxuICAgIC8vIGVuYWJsZUF0dHJpYnV0ZXMocmVuZGVyZXIsIFtcInBvc2l0aW9uXCIsIFwidGV4Y29vcmRzXCJdKVxuICAgIGVuYWJsZUF0dHJpYnV0ZXM6IGZ1bmN0aW9uIChyZW5kZXJlciwgYXR0cmliTGlzdCwgdmFvKSB7XG4gICAgICAgIHZhciBfZ2wgPSByZW5kZXJlci5nbDtcbiAgICAgICAgdmFyIHByb2dyYW0gPSB0aGlzLl9wcm9ncmFtO1xuXG4gICAgICAgIHZhciBsb2NhdGlvbk1hcCA9IHRoaXMuX2xvY2F0aW9ucztcblxuICAgICAgICB2YXIgZW5hYmxlZEF0dHJpYnV0ZUxpc3RJbkNvbnRleHQ7XG4gICAgICAgIGlmICh2YW8pIHtcbiAgICAgICAgICAgIGVuYWJsZWRBdHRyaWJ1dGVMaXN0SW5Db250ZXh0ID0gdmFvLl9fZW5hYmxlZEF0dHJpYnV0ZUxpc3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbmFibGVkQXR0cmlidXRlTGlzdEluQ29udGV4dCA9IGVuYWJsZWRBdHRyaWJ1dGVMaXN0W3JlbmRlcmVyLl9fdWlkX19dO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZW5hYmxlZEF0dHJpYnV0ZUxpc3RJbkNvbnRleHQpIHtcbiAgICAgICAgICAgIC8vIEluIHZlcnRleCBhcnJheSBvYmplY3QgY29udGV4dFxuICAgICAgICAgICAgLy8gUEVORElORyBFYWNoIHZhbyBvYmplY3QgbmVlZHMgdG8gZW5hYmxlIGF0dHJpYnV0ZXMgYWdhaW4/XG4gICAgICAgICAgICBpZiAodmFvKSB7XG4gICAgICAgICAgICAgICAgZW5hYmxlZEF0dHJpYnV0ZUxpc3RJbkNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgPSB2YW8uX19lbmFibGVkQXR0cmlidXRlTGlzdFxuICAgICAgICAgICAgICAgICAgICA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZW5hYmxlZEF0dHJpYnV0ZUxpc3RJbkNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgPSBlbmFibGVkQXR0cmlidXRlTGlzdFtyZW5kZXJlci5fX3VpZF9fXVxuICAgICAgICAgICAgICAgICAgICA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBsb2NhdGlvbkxpc3QgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRyaWJMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc3ltYm9sID0gYXR0cmliTGlzdFtpXTtcbiAgICAgICAgICAgIGlmICghdGhpcy5hdHRyaWJ1dGVzW3N5bWJvbF0pIHtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbkxpc3RbaV0gPSAtMTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IGxvY2F0aW9uTWFwW3N5bWJvbF07XG4gICAgICAgICAgICBpZiAobG9jYXRpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gX2dsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIHN5bWJvbCk7XG4gICAgICAgICAgICAgICAgLy8gQXR0cmliIGxvY2F0aW9uIGlzIGEgbnVtYmVyIGZyb20gMCB0byAuLi5cbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24gPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uTGlzdFtpXSA9IC0xO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbG9jYXRpb25NYXBbc3ltYm9sXSA9IGxvY2F0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYXRpb25MaXN0W2ldID0gbG9jYXRpb247XG5cbiAgICAgICAgICAgIGlmICghZW5hYmxlZEF0dHJpYnV0ZUxpc3RJbkNvbnRleHRbbG9jYXRpb25dKSB7XG4gICAgICAgICAgICAgICAgZW5hYmxlZEF0dHJpYnV0ZUxpc3RJbkNvbnRleHRbbG9jYXRpb25dID0gU0hBREVSX1NUQVRFX1RPX0VOQUJMRTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVuYWJsZWRBdHRyaWJ1dGVMaXN0SW5Db250ZXh0W2xvY2F0aW9uXSA9IFNIQURFUl9TVEFURV9LRUVQX0VOQUJMRTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZW5hYmxlZEF0dHJpYnV0ZUxpc3RJbkNvbnRleHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZW5hYmxlZEF0dHJpYnV0ZUxpc3RJbkNvbnRleHRbaV0pe1xuICAgICAgICAgICAgICAgIGNhc2UgU0hBREVSX1NUQVRFX1RPX0VOQUJMRTpcbiAgICAgICAgICAgICAgICAgICAgX2dsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGkpO1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkQXR0cmlidXRlTGlzdEluQ29udGV4dFtpXSA9IFNIQURFUl9TVEFURV9QRU5ESU5HO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFNIQURFUl9TVEFURV9LRUVQX0VOQUJMRTpcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZEF0dHJpYnV0ZUxpc3RJbkNvbnRleHRbaV0gPSBTSEFERVJfU1RBVEVfUEVORElORztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgLy8gRXhwaXJlZFxuICAgICAgICAgICAgICAgIGNhc2UgU0hBREVSX1NUQVRFX1BFTkRJTkc6XG4gICAgICAgICAgICAgICAgICAgIF9nbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoaSk7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWRBdHRyaWJ1dGVMaXN0SW5Db250ZXh0W2ldID0gMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbG9jYXRpb25MaXN0O1xuICAgIH0sXG5cbiAgICBnZXRBdHRyaWJMb2NhdGlvbjogZnVuY3Rpb24gKF9nbCwgc3ltYm9sKSB7XG4gICAgICAgIHZhciBsb2NhdGlvbk1hcCA9IHRoaXMuX2xvY2F0aW9ucztcblxuICAgICAgICB2YXIgbG9jYXRpb24gPSBsb2NhdGlvbk1hcFtzeW1ib2xdO1xuICAgICAgICBpZiAobG9jYXRpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9jYXRpb24gPSBfZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5fcHJvZ3JhbSwgc3ltYm9sKTtcbiAgICAgICAgICAgIGxvY2F0aW9uTWFwW3N5bWJvbF0gPSBsb2NhdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsb2NhdGlvbjtcbiAgICB9LFxuXG4gICAgaXNBdHRyaWJFbmFibGVkOiBmdW5jdGlvbiAocmVuZGVyZXIsIGxvY2F0aW9uKSB7XG4gICAgICAgIHZhciBlbmFibGVkQXR0cmlidXRlTGlzdEluQ29udGV4dFxuICAgICAgICAgICAgPSBlbmFibGVkQXR0cmlidXRlTGlzdFtyZW5kZXJlci5fX3VpZF9fXVxuICAgICAgICAgICAgfHwgW107XG5cbiAgICAgICAgcmV0dXJuICEhZW5hYmxlZEF0dHJpYnV0ZUxpc3RJbkNvbnRleHRbbG9jYXRpb25dO1xuICAgIH0sXG5cbiAgICBidWlsZFByb2dyYW06IGZ1bmN0aW9uIChfZ2wsIHNoYWRlciwgdmVydGV4U2hhZGVyQ29kZSwgZnJhZ21lbnRTaGFkZXJDb2RlKSB7XG4gICAgICAgIHZhciB2ZXJ0ZXhTaGFkZXIgPSBfZ2wuY3JlYXRlU2hhZGVyKF9nbC5WRVJURVhfU0hBREVSKTtcbiAgICAgICAgdmFyIHByb2dyYW0gPSBfZ2wuY3JlYXRlUHJvZ3JhbSgpO1xuXG4gICAgICAgIF9nbC5zaGFkZXJTb3VyY2UodmVydGV4U2hhZGVyLCB2ZXJ0ZXhTaGFkZXJDb2RlKTtcbiAgICAgICAgX2dsLmNvbXBpbGVTaGFkZXIodmVydGV4U2hhZGVyKTtcblxuICAgICAgICB2YXIgZnJhZ21lbnRTaGFkZXIgPSBfZ2wuY3JlYXRlU2hhZGVyKF9nbC5GUkFHTUVOVF9TSEFERVIpO1xuICAgICAgICBfZ2wuc2hhZGVyU291cmNlKGZyYWdtZW50U2hhZGVyLCBmcmFnbWVudFNoYWRlckNvZGUpO1xuICAgICAgICBfZ2wuY29tcGlsZVNoYWRlcihmcmFnbWVudFNoYWRlcik7XG5cbiAgICAgICAgdmFyIG1zZyA9IGNoZWNrU2hhZGVyRXJyb3JNc2coX2dsLCB2ZXJ0ZXhTaGFkZXIsIHZlcnRleFNoYWRlckNvZGUpO1xuICAgICAgICBpZiAobXNnKSB7XG4gICAgICAgICAgICByZXR1cm4gbXNnO1xuICAgICAgICB9XG4gICAgICAgIG1zZyA9IGNoZWNrU2hhZGVyRXJyb3JNc2coX2dsLCBmcmFnbWVudFNoYWRlciwgZnJhZ21lbnRTaGFkZXJDb2RlKTtcbiAgICAgICAgaWYgKG1zZykge1xuICAgICAgICAgICAgcmV0dXJuIG1zZztcbiAgICAgICAgfVxuXG4gICAgICAgIF9nbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdmVydGV4U2hhZGVyKTtcbiAgICAgICAgX2dsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcik7XG4gICAgICAgIC8vIEZvcmNlIHRoZSBwb3NpdGlvbiBiaW5kIHRvIGxvY2F0aW9uIDA7XG4gICAgICAgIGlmIChzaGFkZXIuYXR0cmlidXRlU2VtYW50aWNzWydQT1NJVElPTiddKSB7XG4gICAgICAgICAgICBfZ2wuYmluZEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIDAsIHNoYWRlci5hdHRyaWJ1dGVTZW1hbnRpY3NbJ1BPU0lUSU9OJ10uc3ltYm9sKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEVsc2UgY2hvb3NlIGFuIGF0dHJpYnV0ZSBhbmQgYmluZCB0byBsb2NhdGlvbiAwO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLmF0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgX2dsLmJpbmRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCAwLCBrZXlzWzBdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF9nbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcblxuICAgICAgICBfZ2wuZGVsZXRlU2hhZGVyKHZlcnRleFNoYWRlcik7XG4gICAgICAgIF9nbC5kZWxldGVTaGFkZXIoZnJhZ21lbnRTaGFkZXIpO1xuXG4gICAgICAgIHRoaXMuX3Byb2dyYW0gPSBwcm9ncmFtO1xuXG4gICAgICAgIC8vIFNhdmUgY29kZS5cbiAgICAgICAgdGhpcy52ZXJ0ZXhDb2RlID0gdmVydGV4U2hhZGVyQ29kZTtcbiAgICAgICAgdGhpcy5mcmFnbWVudENvZGUgPSBmcmFnbWVudFNoYWRlckNvZGU7XG5cbiAgICAgICAgaWYgKCFfZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBfZ2wuTElOS19TVEFUVVMpKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0NvdWxkIG5vdCBsaW5rIHByb2dyYW1cXG4nICsgX2dsLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FjaGUgdW5pZm9ybSBsb2NhdGlvbnNcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaGFkZXIudW5pZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB1bmlmb3JtU3ltYm9sID0gc2hhZGVyLnVuaWZvcm1zW2ldO1xuICAgICAgICAgICAgdGhpcy5fbG9jYXRpb25zW3VuaWZvcm1TeW1ib2xdID0gX2dsLmdldFVuaWZvcm1Mb2NhdGlvbihwcm9ncmFtLCB1bmlmb3JtU3ltYm9sKTtcbiAgICAgICAgfVxuXG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEdMUHJvZ3JhbTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2dwdS9HTFByb2dyYW0uanNcbi8vIG1vZHVsZSBpZCA9IDEzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///132\n");

/***/ }),
/* 133 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"vec3 calcAmbientSHLight(int idx, vec3 N) {\\n int offset = 9 * idx;\\n return ambientSHLightCoefficients[0]\\n + ambientSHLightCoefficients[1] * N.x\\n + ambientSHLightCoefficients[2] * N.y\\n + ambientSHLightCoefficients[3] * N.z\\n + ambientSHLightCoefficients[4] * N.x * N.z\\n + ambientSHLightCoefficients[5] * N.z * N.y\\n + ambientSHLightCoefficients[6] * N.y * N.x\\n + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)\\n + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);\\n}\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9oZWFkZXIvY2FsY0FtYmllbnRTSExpZ2h0Lmdsc2wuanM/YWRkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcInZlYzMgY2FsY0FtYmllbnRTSExpZ2h0KGludCBpZHgsIHZlYzMgTikge1xcbiBpbnQgb2Zmc2V0ID0gOSAqIGlkeDtcXG4gcmV0dXJuIGFtYmllbnRTSExpZ2h0Q29lZmZpY2llbnRzWzBdXFxuICsgYW1iaWVudFNITGlnaHRDb2VmZmljaWVudHNbMV0gKiBOLnhcXG4gKyBhbWJpZW50U0hMaWdodENvZWZmaWNpZW50c1syXSAqIE4ueVxcbiArIGFtYmllbnRTSExpZ2h0Q29lZmZpY2llbnRzWzNdICogTi56XFxuICsgYW1iaWVudFNITGlnaHRDb2VmZmljaWVudHNbNF0gKiBOLnggKiBOLnpcXG4gKyBhbWJpZW50U0hMaWdodENvZWZmaWNpZW50c1s1XSAqIE4ueiAqIE4ueVxcbiArIGFtYmllbnRTSExpZ2h0Q29lZmZpY2llbnRzWzZdICogTi55ICogTi54XFxuICsgYW1iaWVudFNITGlnaHRDb2VmZmljaWVudHNbN10gKiAoMy4wICogTi56ICogTi56IC0gMS4wKVxcbiArIGFtYmllbnRTSExpZ2h0Q29lZmZpY2llbnRzWzhdICogKE4ueCAqIE4ueCAtIE4ueSAqIE4ueSk7XFxufVwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2hlYWRlci9jYWxjQW1iaWVudFNITGlnaHQuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///133\n");

/***/ }),
/* 134 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.basic.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nuniform vec2 uvRepeat : [1.0, 1.0];\\nuniform vec2 uvOffset : [0.0, 0.0];\\nattribute vec2 texcoord : TEXCOORD_0;\\nattribute vec3 position : POSITION;\\nattribute vec3 barycentric;\\n@import clay.chunk.skinning_header\\n@import clay.chunk.instancing_header\\n@import clay.util.logdepth_vertex_header\\nvarying vec2 v_Texcoord;\\nvarying vec3 v_Barycentric;\\n#ifdef VERTEX_COLOR\\nattribute vec4 a_Color : COLOR;\\nvarying vec4 v_Color;\\n#endif\\nvoid main()\\n{\\n vec4 skinnedPosition = vec4(position, 1.0);\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n skinnedPosition = skinMatrixWS * skinnedPosition;\\n#endif\\n#ifdef INSTANCING\\n @import clay.chunk.instancing_matrix\\n skinnedPosition = instanceMat * skinnedPosition;\\n#endif\\n v_Texcoord = texcoord * uvRepeat + uvOffset;\\n v_Barycentric = barycentric;\\n gl_Position = worldViewProjection * skinnedPosition;\\n#ifdef VERTEX_COLOR\\n v_Color = a_Color;\\n#endif\\n @import clay.util.logdepth_vertex_main\\n}\\n@end\\n@export clay.basic.fragment\\n#define DIFFUSEMAP_ALPHA_ALPHA\\nvarying vec2 v_Texcoord;\\nuniform sampler2D diffuseMap;\\nuniform vec3 color : [1.0, 1.0, 1.0];\\nuniform vec3 emission : [0.0, 0.0, 0.0];\\nuniform float alpha : 1.0;\\n#ifdef ALPHA_TEST\\nuniform float alphaCutoff: 0.9;\\n#endif\\n#ifdef VERTEX_COLOR\\nvarying vec4 v_Color;\\n#endif\\nuniform float lineWidth : 0.0;\\nuniform vec4 lineColor : [0.0, 0.0, 0.0, 0.6];\\nvarying vec3 v_Barycentric;\\n@import clay.util.logdepth_fragment_header\\n@import clay.util.edge_factor\\n@import clay.util.rgbm\\n@import clay.util.srgb\\n@import clay.util.ACES\\nvoid main()\\n{\\n gl_FragColor = vec4(color, alpha);\\n#ifdef VERTEX_COLOR\\n gl_FragColor *= v_Color;\\n#endif\\n#ifdef SRGB_DECODE\\n gl_FragColor = sRGBToLinear(gl_FragColor);\\n#endif\\n#ifdef DIFFUSEMAP_ENABLED\\n vec4 texel = decodeHDR(texture2D(diffuseMap, v_Texcoord));\\n#ifdef SRGB_DECODE\\n texel = sRGBToLinear(texel);\\n#endif\\n#if defined(DIFFUSEMAP_ALPHA_ALPHA)\\n gl_FragColor.a = texel.a;\\n#endif\\n gl_FragColor.rgb *= texel.rgb;\\n#endif\\n gl_FragColor.rgb += emission;\\n if( lineWidth > 0.)\\n {\\n gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor(lineWidth)) * lineColor.a);\\n }\\n#ifdef ALPHA_TEST\\n if (gl_FragColor.a < alphaCutoff) {\\n discard;\\n }\\n#endif\\n#ifdef TONEMAPPING\\n gl_FragColor.rgb = ACESToneMapping(gl_FragColor.rgb);\\n#endif\\n#ifdef SRGB_ENCODE\\n gl_FragColor = linearTosRGB(gl_FragColor);\\n#endif\\n gl_FragColor = encodeHDR(gl_FragColor);\\n @import clay.util.logdepth_fragment_main\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9iYXNpYy5nbHNsLmpzPzFjOGQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuYmFzaWMudmVydGV4XFxudW5pZm9ybSBtYXQ0IHdvcmxkVmlld1Byb2plY3Rpb24gOiBXT1JMRFZJRVdQUk9KRUNUSU9OO1xcbnVuaWZvcm0gdmVjMiB1dlJlcGVhdCA6IFsxLjAsIDEuMF07XFxudW5pZm9ybSB2ZWMyIHV2T2Zmc2V0IDogWzAuMCwgMC4wXTtcXG5hdHRyaWJ1dGUgdmVjMiB0ZXhjb29yZCA6IFRFWENPT1JEXzA7XFxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb24gOiBQT1NJVElPTjtcXG5hdHRyaWJ1dGUgdmVjMyBiYXJ5Y2VudHJpYztcXG5AaW1wb3J0IGNsYXkuY2h1bmsuc2tpbm5pbmdfaGVhZGVyXFxuQGltcG9ydCBjbGF5LmNodW5rLmluc3RhbmNpbmdfaGVhZGVyXFxuQGltcG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfdmVydGV4X2hlYWRlclxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnZhcnlpbmcgdmVjMyB2X0JhcnljZW50cmljO1xcbiNpZmRlZiBWRVJURVhfQ09MT1JcXG5hdHRyaWJ1dGUgdmVjNCBhX0NvbG9yIDogQ09MT1I7XFxudmFyeWluZyB2ZWM0IHZfQ29sb3I7XFxuI2VuZGlmXFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgc2tpbm5lZFBvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMS4wKTtcXG4jaWZkZWYgU0tJTk5JTkdcXG4gQGltcG9ydCBjbGF5LmNodW5rLnNraW5fbWF0cml4XFxuIHNraW5uZWRQb3NpdGlvbiA9IHNraW5NYXRyaXhXUyAqIHNraW5uZWRQb3NpdGlvbjtcXG4jZW5kaWZcXG4jaWZkZWYgSU5TVEFOQ0lOR1xcbiBAaW1wb3J0IGNsYXkuY2h1bmsuaW5zdGFuY2luZ19tYXRyaXhcXG4gc2tpbm5lZFBvc2l0aW9uID0gaW5zdGFuY2VNYXQgKiBza2lubmVkUG9zaXRpb247XFxuI2VuZGlmXFxuIHZfVGV4Y29vcmQgPSB0ZXhjb29yZCAqIHV2UmVwZWF0ICsgdXZPZmZzZXQ7XFxuIHZfQmFyeWNlbnRyaWMgPSBiYXJ5Y2VudHJpYztcXG4gZ2xfUG9zaXRpb24gPSB3b3JsZFZpZXdQcm9qZWN0aW9uICogc2tpbm5lZFBvc2l0aW9uO1xcbiNpZmRlZiBWRVJURVhfQ09MT1JcXG4gdl9Db2xvciA9IGFfQ29sb3I7XFxuI2VuZGlmXFxuIEBpbXBvcnQgY2xheS51dGlsLmxvZ2RlcHRoX3ZlcnRleF9tYWluXFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuYmFzaWMuZnJhZ21lbnRcXG4jZGVmaW5lIERJRkZVU0VNQVBfQUxQSEFfQUxQSEFcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG51bmlmb3JtIHNhbXBsZXIyRCBkaWZmdXNlTWFwO1xcbnVuaWZvcm0gdmVjMyBjb2xvciA6IFsxLjAsIDEuMCwgMS4wXTtcXG51bmlmb3JtIHZlYzMgZW1pc3Npb24gOiBbMC4wLCAwLjAsIDAuMF07XFxudW5pZm9ybSBmbG9hdCBhbHBoYSA6IDEuMDtcXG4jaWZkZWYgQUxQSEFfVEVTVFxcbnVuaWZvcm0gZmxvYXQgYWxwaGFDdXRvZmY6IDAuOTtcXG4jZW5kaWZcXG4jaWZkZWYgVkVSVEVYX0NPTE9SXFxudmFyeWluZyB2ZWM0IHZfQ29sb3I7XFxuI2VuZGlmXFxudW5pZm9ybSBmbG9hdCBsaW5lV2lkdGggOiAwLjA7XFxudW5pZm9ybSB2ZWM0IGxpbmVDb2xvciA6IFswLjAsIDAuMCwgMC4wLCAwLjZdO1xcbnZhcnlpbmcgdmVjMyB2X0JhcnljZW50cmljO1xcbkBpbXBvcnQgY2xheS51dGlsLmxvZ2RlcHRoX2ZyYWdtZW50X2hlYWRlclxcbkBpbXBvcnQgY2xheS51dGlsLmVkZ2VfZmFjdG9yXFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbkBpbXBvcnQgY2xheS51dGlsLnNyZ2JcXG5AaW1wb3J0IGNsYXkudXRpbC5BQ0VTXFxudm9pZCBtYWluKClcXG57XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsIGFscGhhKTtcXG4jaWZkZWYgVkVSVEVYX0NPTE9SXFxuIGdsX0ZyYWdDb2xvciAqPSB2X0NvbG9yO1xcbiNlbmRpZlxcbiNpZmRlZiBTUkdCX0RFQ09ERVxcbiBnbF9GcmFnQ29sb3IgPSBzUkdCVG9MaW5lYXIoZ2xfRnJhZ0NvbG9yKTtcXG4jZW5kaWZcXG4jaWZkZWYgRElGRlVTRU1BUF9FTkFCTEVEXFxuIHZlYzQgdGV4ZWwgPSBkZWNvZGVIRFIodGV4dHVyZTJEKGRpZmZ1c2VNYXAsIHZfVGV4Y29vcmQpKTtcXG4jaWZkZWYgU1JHQl9ERUNPREVcXG4gdGV4ZWwgPSBzUkdCVG9MaW5lYXIodGV4ZWwpO1xcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKERJRkZVU0VNQVBfQUxQSEFfQUxQSEEpXFxuIGdsX0ZyYWdDb2xvci5hID0gdGV4ZWwuYTtcXG4jZW5kaWZcXG4gZ2xfRnJhZ0NvbG9yLnJnYiAqPSB0ZXhlbC5yZ2I7XFxuI2VuZGlmXFxuIGdsX0ZyYWdDb2xvci5yZ2IgKz0gZW1pc3Npb247XFxuIGlmKCBsaW5lV2lkdGggPiAwLilcXG4ge1xcbiBnbF9GcmFnQ29sb3IucmdiID0gbWl4KGdsX0ZyYWdDb2xvci5yZ2IsIGxpbmVDb2xvci5yZ2IsICgxLjAgLSBlZGdlRmFjdG9yKGxpbmVXaWR0aCkpICogbGluZUNvbG9yLmEpO1xcbiB9XFxuI2lmZGVmIEFMUEhBX1RFU1RcXG4gaWYgKGdsX0ZyYWdDb2xvci5hIDwgYWxwaGFDdXRvZmYpIHtcXG4gZGlzY2FyZDtcXG4gfVxcbiNlbmRpZlxcbiNpZmRlZiBUT05FTUFQUElOR1xcbiBnbF9GcmFnQ29sb3IucmdiID0gQUNFU1RvbmVNYXBwaW5nKGdsX0ZyYWdDb2xvci5yZ2IpO1xcbiNlbmRpZlxcbiNpZmRlZiBTUkdCX0VOQ09ERVxcbiBnbF9GcmFnQ29sb3IgPSBsaW5lYXJUb3NSR0IoZ2xfRnJhZ0NvbG9yKTtcXG4jZW5kaWZcXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKGdsX0ZyYWdDb2xvcik7XFxuIEBpbXBvcnQgY2xheS51dGlsLmxvZ2RlcHRoX2ZyYWdtZW50X21haW5cXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2Jhc2ljLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDEzNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///134\n");

/***/ }),
/* 135 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"\\n@export clay.lambert.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\\nuniform mat4 world : WORLD;\\nuniform vec2 uvRepeat : [1.0, 1.0];\\nuniform vec2 uvOffset : [0.0, 0.0];\\nattribute vec3 position : POSITION;\\nattribute vec2 texcoord : TEXCOORD_0;\\nattribute vec3 normal : NORMAL;\\nattribute vec3 barycentric;\\n#ifdef VERTEX_COLOR\\nattribute vec4 a_Color : COLOR;\\nvarying vec4 v_Color;\\n#endif\\n@import clay.chunk.skinning_header\\n@import clay.chunk.instancing_header\\n@import clay.util.logdepth_vertex_header\\nvarying vec2 v_Texcoord;\\nvarying vec3 v_Normal;\\nvarying vec3 v_WorldPosition;\\nvarying vec3 v_Barycentric;\\nvoid main()\\n{\\n vec4 skinnedPosition = vec4(position, 1.0);\\n vec4 skinnedNormal = vec4(normal, 0.0);\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n skinnedPosition = skinMatrixWS * skinnedPosition;\\n skinnedNormal = skinMatrixWS * skinnedNormal;\\n#endif\\n#ifdef INSTANCING\\n @import clay.chunk.instancing_matrix\\n skinnedPosition = instanceMat * skinnedPosition;\\n skinnedNormal = instanceMat * skinnedNormal;\\n#endif\\n gl_Position = worldViewProjection * skinnedPosition;\\n v_Texcoord = texcoord * uvRepeat + uvOffset;\\n v_Normal = normalize((worldInverseTranspose * skinnedNormal).xyz);\\n v_WorldPosition = ( world * skinnedPosition ).xyz;\\n v_Barycentric = barycentric;\\n#ifdef VERTEX_COLOR\\n v_Color = a_Color;\\n#endif\\n @import clay.util.logdepth_vertex_main\\n}\\n@end\\n@export clay.lambert.fragment\\n#define DIFFUSEMAP_ALPHA_ALPHA\\nvarying vec2 v_Texcoord;\\nvarying vec3 v_Normal;\\nvarying vec3 v_WorldPosition;\\nuniform sampler2D diffuseMap;\\nuniform sampler2D alphaMap;\\nuniform vec3 color : [1.0, 1.0, 1.0];\\nuniform vec3 emission : [0.0, 0.0, 0.0];\\nuniform float alpha : 1.0;\\n#ifdef ALPHA_TEST\\nuniform float alphaCutoff: 0.9;\\n#endif\\nuniform float lineWidth : 0.0;\\nuniform vec4 lineColor : [0.0, 0.0, 0.0, 0.6];\\nvarying vec3 v_Barycentric;\\n#ifdef VERTEX_COLOR\\nvarying vec4 v_Color;\\n#endif\\n#ifdef AMBIENT_LIGHT_COUNT\\n@import clay.header.ambient_light\\n#endif\\n#ifdef AMBIENT_SH_LIGHT_COUNT\\n@import clay.header.ambient_sh_light\\n#endif\\n#ifdef POINT_LIGHT_COUNT\\n@import clay.header.point_light\\n#endif\\n#ifdef DIRECTIONAL_LIGHT_COUNT\\n@import clay.header.directional_light\\n#endif\\n#ifdef SPOT_LIGHT_COUNT\\n@import clay.header.spot_light\\n#endif\\n@import clay.util.logdepth_fragment_header\\n@import clay.util.calculate_attenuation\\n@import clay.util.edge_factor\\n@import clay.util.rgbm\\n@import clay.plugin.compute_shadow_map\\n@import clay.util.ACES\\nvoid main()\\n{\\n gl_FragColor = vec4(color, alpha);\\n#ifdef VERTEX_COLOR\\n gl_FragColor *= v_Color;\\n#endif\\n#ifdef SRGB_DECODE\\n gl_FragColor = sRGBToLinear(gl_FragColor);\\n#endif\\n#ifdef DIFFUSEMAP_ENABLED\\n vec4 tex = texture2D( diffuseMap, v_Texcoord );\\n#ifdef SRGB_DECODE\\n tex.rgb = pow(tex.rgb, vec3(2.2));\\n#endif\\n gl_FragColor.rgb *= tex.rgb;\\n#ifdef DIFFUSEMAP_ALPHA_ALPHA\\n gl_FragColor.a *= tex.a;\\n#endif\\n#endif\\n vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\\n#ifdef AMBIENT_LIGHT_COUNT\\n for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)\\n {\\n diffuseColor += ambientLightColor[_idx_];\\n }\\n#endif\\n#ifdef AMBIENT_SH_LIGHT_COUNT\\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\\n {{\\n diffuseColor += calcAmbientSHLight(_idx_, v_Normal) * ambientSHLightColor[_idx_];\\n }}\\n#endif\\n#ifdef POINT_LIGHT_COUNT\\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\\n float shadowContribsPoint[POINT_LIGHT_COUNT];\\n if( shadowEnabled )\\n {\\n computeShadowOfPointLights(v_WorldPosition, shadowContribsPoint);\\n }\\n#endif\\n for(int i = 0; i < POINT_LIGHT_COUNT; i++)\\n {\\n vec3 lightPosition = pointLightPosition[i];\\n vec3 lightColor = pointLightColor[i];\\n float range = pointLightRange[i];\\n vec3 lightDirection = lightPosition - v_WorldPosition;\\n float dist = length(lightDirection);\\n float attenuation = lightAttenuation(dist, range);\\n lightDirection /= dist;\\n float ndl = dot( v_Normal, lightDirection );\\n float shadowContrib = 1.0;\\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\\n if( shadowEnabled )\\n {\\n shadowContrib = shadowContribsPoint[i];\\n }\\n#endif\\n diffuseColor += lightColor * clamp(ndl, 0.0, 1.0) * attenuation * shadowContrib;\\n }\\n#endif\\n#ifdef DIRECTIONAL_LIGHT_COUNT\\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\\n if(shadowEnabled)\\n {\\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\\n }\\n#endif\\n for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)\\n {\\n vec3 lightDirection = -directionalLightDirection[i];\\n vec3 lightColor = directionalLightColor[i];\\n float ndl = dot(v_Normal, normalize(lightDirection));\\n float shadowContrib = 1.0;\\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\\n if( shadowEnabled )\\n {\\n shadowContrib = shadowContribsDir[i];\\n }\\n#endif\\n diffuseColor += lightColor * clamp(ndl, 0.0, 1.0) * shadowContrib;\\n }\\n#endif\\n#ifdef SPOT_LIGHT_COUNT\\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\\n float shadowContribsSpot[SPOT_LIGHT_COUNT];\\n if(shadowEnabled)\\n {\\n computeShadowOfSpotLights(v_WorldPosition, shadowContribsSpot);\\n }\\n#endif\\n for(int i = 0; i < SPOT_LIGHT_COUNT; i++)\\n {\\n vec3 lightPosition = -spotLightPosition[i];\\n vec3 spotLightDirection = -normalize( spotLightDirection[i] );\\n vec3 lightColor = spotLightColor[i];\\n float range = spotLightRange[i];\\n float a = spotLightUmbraAngleCosine[i];\\n float b = spotLightPenumbraAngleCosine[i];\\n float falloffFactor = spotLightFalloffFactor[i];\\n vec3 lightDirection = lightPosition - v_WorldPosition;\\n float dist = length(lightDirection);\\n float attenuation = lightAttenuation(dist, range);\\n lightDirection /= dist;\\n float c = dot(spotLightDirection, lightDirection);\\n float falloff;\\n falloff = clamp((c - a) /( b - a), 0.0, 1.0);\\n falloff = pow(falloff, falloffFactor);\\n float ndl = dot(v_Normal, lightDirection);\\n ndl = clamp(ndl, 0.0, 1.0);\\n float shadowContrib = 1.0;\\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\\n if( shadowEnabled )\\n {\\n shadowContrib = shadowContribsSpot[i];\\n }\\n#endif\\n diffuseColor += lightColor * ndl * attenuation * (1.0-falloff) * shadowContrib;\\n }\\n#endif\\n gl_FragColor.rgb *= diffuseColor;\\n gl_FragColor.rgb += emission;\\n if(lineWidth > 0.)\\n {\\n gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor(lineWidth)) * lineColor.a);\\n }\\n#ifdef ALPHA_TEST\\n if (gl_FragColor.a < alphaCutoff) {\\n discard;\\n }\\n#endif\\n#ifdef TONEMAPPING\\n gl_FragColor.rgb = ACESToneMapping(gl_FragColor.rgb);\\n#endif\\n#ifdef SRGB_ENCODE\\n gl_FragColor = linearTosRGB(gl_FragColor);\\n#endif\\n gl_FragColor = encodeHDR(gl_FragColor);\\n @import clay.util.logdepth_fragment_main\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9sYW1iZXJ0Lmdsc2wuanM/YjAwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIlxcbkBleHBvcnQgY2xheS5sYW1iZXJ0LnZlcnRleFxcbnVuaWZvcm0gbWF0NCB3b3JsZFZpZXdQcm9qZWN0aW9uIDogV09STERWSUVXUFJPSkVDVElPTjtcXG51bmlmb3JtIG1hdDQgd29ybGRJbnZlcnNlVHJhbnNwb3NlIDogV09STERJTlZFUlNFVFJBTlNQT1NFO1xcbnVuaWZvcm0gbWF0NCB3b3JsZCA6IFdPUkxEO1xcbnVuaWZvcm0gdmVjMiB1dlJlcGVhdCA6IFsxLjAsIDEuMF07XFxudW5pZm9ybSB2ZWMyIHV2T2Zmc2V0IDogWzAuMCwgMC4wXTtcXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbiA6IFBPU0lUSU9OO1xcbmF0dHJpYnV0ZSB2ZWMyIHRleGNvb3JkIDogVEVYQ09PUkRfMDtcXG5hdHRyaWJ1dGUgdmVjMyBub3JtYWwgOiBOT1JNQUw7XFxuYXR0cmlidXRlIHZlYzMgYmFyeWNlbnRyaWM7XFxuI2lmZGVmIFZFUlRFWF9DT0xPUlxcbmF0dHJpYnV0ZSB2ZWM0IGFfQ29sb3IgOiBDT0xPUjtcXG52YXJ5aW5nIHZlYzQgdl9Db2xvcjtcXG4jZW5kaWZcXG5AaW1wb3J0IGNsYXkuY2h1bmsuc2tpbm5pbmdfaGVhZGVyXFxuQGltcG9ydCBjbGF5LmNodW5rLmluc3RhbmNpbmdfaGVhZGVyXFxuQGltcG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfdmVydGV4X2hlYWRlclxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnZhcnlpbmcgdmVjMyB2X05vcm1hbDtcXG52YXJ5aW5nIHZlYzMgdl9Xb3JsZFBvc2l0aW9uO1xcbnZhcnlpbmcgdmVjMyB2X0JhcnljZW50cmljO1xcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWM0IHNraW5uZWRQb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDEuMCk7XFxuIHZlYzQgc2tpbm5lZE5vcm1hbCA9IHZlYzQobm9ybWFsLCAwLjApO1xcbiNpZmRlZiBTS0lOTklOR1xcbiBAaW1wb3J0IGNsYXkuY2h1bmsuc2tpbl9tYXRyaXhcXG4gc2tpbm5lZFBvc2l0aW9uID0gc2tpbk1hdHJpeFdTICogc2tpbm5lZFBvc2l0aW9uO1xcbiBza2lubmVkTm9ybWFsID0gc2tpbk1hdHJpeFdTICogc2tpbm5lZE5vcm1hbDtcXG4jZW5kaWZcXG4jaWZkZWYgSU5TVEFOQ0lOR1xcbiBAaW1wb3J0IGNsYXkuY2h1bmsuaW5zdGFuY2luZ19tYXRyaXhcXG4gc2tpbm5lZFBvc2l0aW9uID0gaW5zdGFuY2VNYXQgKiBza2lubmVkUG9zaXRpb247XFxuIHNraW5uZWROb3JtYWwgPSBpbnN0YW5jZU1hdCAqIHNraW5uZWROb3JtYWw7XFxuI2VuZGlmXFxuIGdsX1Bvc2l0aW9uID0gd29ybGRWaWV3UHJvamVjdGlvbiAqIHNraW5uZWRQb3NpdGlvbjtcXG4gdl9UZXhjb29yZCA9IHRleGNvb3JkICogdXZSZXBlYXQgKyB1dk9mZnNldDtcXG4gdl9Ob3JtYWwgPSBub3JtYWxpemUoKHdvcmxkSW52ZXJzZVRyYW5zcG9zZSAqIHNraW5uZWROb3JtYWwpLnh5eik7XFxuIHZfV29ybGRQb3NpdGlvbiA9ICggd29ybGQgKiBza2lubmVkUG9zaXRpb24gKS54eXo7XFxuIHZfQmFyeWNlbnRyaWMgPSBiYXJ5Y2VudHJpYztcXG4jaWZkZWYgVkVSVEVYX0NPTE9SXFxuIHZfQ29sb3IgPSBhX0NvbG9yO1xcbiNlbmRpZlxcbiBAaW1wb3J0IGNsYXkudXRpbC5sb2dkZXB0aF92ZXJ0ZXhfbWFpblxcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmxhbWJlcnQuZnJhZ21lbnRcXG4jZGVmaW5lIERJRkZVU0VNQVBfQUxQSEFfQUxQSEFcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG52YXJ5aW5nIHZlYzMgdl9Ob3JtYWw7XFxudmFyeWluZyB2ZWMzIHZfV29ybGRQb3NpdGlvbjtcXG51bmlmb3JtIHNhbXBsZXIyRCBkaWZmdXNlTWFwO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGFscGhhTWFwO1xcbnVuaWZvcm0gdmVjMyBjb2xvciA6IFsxLjAsIDEuMCwgMS4wXTtcXG51bmlmb3JtIHZlYzMgZW1pc3Npb24gOiBbMC4wLCAwLjAsIDAuMF07XFxudW5pZm9ybSBmbG9hdCBhbHBoYSA6IDEuMDtcXG4jaWZkZWYgQUxQSEFfVEVTVFxcbnVuaWZvcm0gZmxvYXQgYWxwaGFDdXRvZmY6IDAuOTtcXG4jZW5kaWZcXG51bmlmb3JtIGZsb2F0IGxpbmVXaWR0aCA6IDAuMDtcXG51bmlmb3JtIHZlYzQgbGluZUNvbG9yIDogWzAuMCwgMC4wLCAwLjAsIDAuNl07XFxudmFyeWluZyB2ZWMzIHZfQmFyeWNlbnRyaWM7XFxuI2lmZGVmIFZFUlRFWF9DT0xPUlxcbnZhcnlpbmcgdmVjNCB2X0NvbG9yO1xcbiNlbmRpZlxcbiNpZmRlZiBBTUJJRU5UX0xJR0hUX0NPVU5UXFxuQGltcG9ydCBjbGF5LmhlYWRlci5hbWJpZW50X2xpZ2h0XFxuI2VuZGlmXFxuI2lmZGVmIEFNQklFTlRfU0hfTElHSFRfQ09VTlRcXG5AaW1wb3J0IGNsYXkuaGVhZGVyLmFtYmllbnRfc2hfbGlnaHRcXG4jZW5kaWZcXG4jaWZkZWYgUE9JTlRfTElHSFRfQ09VTlRcXG5AaW1wb3J0IGNsYXkuaGVhZGVyLnBvaW50X2xpZ2h0XFxuI2VuZGlmXFxuI2lmZGVmIERJUkVDVElPTkFMX0xJR0hUX0NPVU5UXFxuQGltcG9ydCBjbGF5LmhlYWRlci5kaXJlY3Rpb25hbF9saWdodFxcbiNlbmRpZlxcbiNpZmRlZiBTUE9UX0xJR0hUX0NPVU5UXFxuQGltcG9ydCBjbGF5LmhlYWRlci5zcG90X2xpZ2h0XFxuI2VuZGlmXFxuQGltcG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfZnJhZ21lbnRfaGVhZGVyXFxuQGltcG9ydCBjbGF5LnV0aWwuY2FsY3VsYXRlX2F0dGVudWF0aW9uXFxuQGltcG9ydCBjbGF5LnV0aWwuZWRnZV9mYWN0b3JcXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxuQGltcG9ydCBjbGF5LnBsdWdpbi5jb21wdXRlX3NoYWRvd19tYXBcXG5AaW1wb3J0IGNsYXkudXRpbC5BQ0VTXFxudm9pZCBtYWluKClcXG57XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsIGFscGhhKTtcXG4jaWZkZWYgVkVSVEVYX0NPTE9SXFxuIGdsX0ZyYWdDb2xvciAqPSB2X0NvbG9yO1xcbiNlbmRpZlxcbiNpZmRlZiBTUkdCX0RFQ09ERVxcbiBnbF9GcmFnQ29sb3IgPSBzUkdCVG9MaW5lYXIoZ2xfRnJhZ0NvbG9yKTtcXG4jZW5kaWZcXG4jaWZkZWYgRElGRlVTRU1BUF9FTkFCTEVEXFxuIHZlYzQgdGV4ID0gdGV4dHVyZTJEKCBkaWZmdXNlTWFwLCB2X1RleGNvb3JkICk7XFxuI2lmZGVmIFNSR0JfREVDT0RFXFxuIHRleC5yZ2IgPSBwb3codGV4LnJnYiwgdmVjMygyLjIpKTtcXG4jZW5kaWZcXG4gZ2xfRnJhZ0NvbG9yLnJnYiAqPSB0ZXgucmdiO1xcbiNpZmRlZiBESUZGVVNFTUFQX0FMUEhBX0FMUEhBXFxuIGdsX0ZyYWdDb2xvci5hICo9IHRleC5hO1xcbiNlbmRpZlxcbiNlbmRpZlxcbiB2ZWMzIGRpZmZ1c2VDb2xvciA9IHZlYzMoMC4wLCAwLjAsIDAuMCk7XFxuI2lmZGVmIEFNQklFTlRfTElHSFRfQ09VTlRcXG4gZm9yKGludCBfaWR4XyA9IDA7IF9pZHhfIDwgQU1CSUVOVF9MSUdIVF9DT1VOVDsgX2lkeF8rKylcXG4ge1xcbiBkaWZmdXNlQ29sb3IgKz0gYW1iaWVudExpZ2h0Q29sb3JbX2lkeF9dO1xcbiB9XFxuI2VuZGlmXFxuI2lmZGVmIEFNQklFTlRfU0hfTElHSFRfQ09VTlRcXG4gZm9yKGludCBfaWR4XyA9IDA7IF9pZHhfIDwgQU1CSUVOVF9TSF9MSUdIVF9DT1VOVDsgX2lkeF8rKylcXG4ge3tcXG4gZGlmZnVzZUNvbG9yICs9IGNhbGNBbWJpZW50U0hMaWdodChfaWR4Xywgdl9Ob3JtYWwpICogYW1iaWVudFNITGlnaHRDb2xvcltfaWR4X107XFxuIH19XFxuI2VuZGlmXFxuI2lmZGVmIFBPSU5UX0xJR0hUX0NPVU5UXFxuI2lmIGRlZmluZWQoUE9JTlRfTElHSFRfU0hBRE9XTUFQX0NPVU5UKVxcbiBmbG9hdCBzaGFkb3dDb250cmlic1BvaW50W1BPSU5UX0xJR0hUX0NPVU5UXTtcXG4gaWYoIHNoYWRvd0VuYWJsZWQgKVxcbiB7XFxuIGNvbXB1dGVTaGFkb3dPZlBvaW50TGlnaHRzKHZfV29ybGRQb3NpdGlvbiwgc2hhZG93Q29udHJpYnNQb2ludCk7XFxuIH1cXG4jZW5kaWZcXG4gZm9yKGludCBpID0gMDsgaSA8IFBPSU5UX0xJR0hUX0NPVU5UOyBpKyspXFxuIHtcXG4gdmVjMyBsaWdodFBvc2l0aW9uID0gcG9pbnRMaWdodFBvc2l0aW9uW2ldO1xcbiB2ZWMzIGxpZ2h0Q29sb3IgPSBwb2ludExpZ2h0Q29sb3JbaV07XFxuIGZsb2F0IHJhbmdlID0gcG9pbnRMaWdodFJhbmdlW2ldO1xcbiB2ZWMzIGxpZ2h0RGlyZWN0aW9uID0gbGlnaHRQb3NpdGlvbiAtIHZfV29ybGRQb3NpdGlvbjtcXG4gZmxvYXQgZGlzdCA9IGxlbmd0aChsaWdodERpcmVjdGlvbik7XFxuIGZsb2F0IGF0dGVudWF0aW9uID0gbGlnaHRBdHRlbnVhdGlvbihkaXN0LCByYW5nZSk7XFxuIGxpZ2h0RGlyZWN0aW9uIC89IGRpc3Q7XFxuIGZsb2F0IG5kbCA9IGRvdCggdl9Ob3JtYWwsIGxpZ2h0RGlyZWN0aW9uICk7XFxuIGZsb2F0IHNoYWRvd0NvbnRyaWIgPSAxLjA7XFxuI2lmIGRlZmluZWQoUE9JTlRfTElHSFRfU0hBRE9XTUFQX0NPVU5UKVxcbiBpZiggc2hhZG93RW5hYmxlZCApXFxuIHtcXG4gc2hhZG93Q29udHJpYiA9IHNoYWRvd0NvbnRyaWJzUG9pbnRbaV07XFxuIH1cXG4jZW5kaWZcXG4gZGlmZnVzZUNvbG9yICs9IGxpZ2h0Q29sb3IgKiBjbGFtcChuZGwsIDAuMCwgMS4wKSAqIGF0dGVudWF0aW9uICogc2hhZG93Q29udHJpYjtcXG4gfVxcbiNlbmRpZlxcbiNpZmRlZiBESVJFQ1RJT05BTF9MSUdIVF9DT1VOVFxcbiNpZiBkZWZpbmVkKERJUkVDVElPTkFMX0xJR0hUX1NIQURPV01BUF9DT1VOVClcXG4gZmxvYXQgc2hhZG93Q29udHJpYnNEaXJbRElSRUNUSU9OQUxfTElHSFRfQ09VTlRdO1xcbiBpZihzaGFkb3dFbmFibGVkKVxcbiB7XFxuIGNvbXB1dGVTaGFkb3dPZkRpcmVjdGlvbmFsTGlnaHRzKHZfV29ybGRQb3NpdGlvbiwgc2hhZG93Q29udHJpYnNEaXIpO1xcbiB9XFxuI2VuZGlmXFxuIGZvcihpbnQgaSA9IDA7IGkgPCBESVJFQ1RJT05BTF9MSUdIVF9DT1VOVDsgaSsrKVxcbiB7XFxuIHZlYzMgbGlnaHREaXJlY3Rpb24gPSAtZGlyZWN0aW9uYWxMaWdodERpcmVjdGlvbltpXTtcXG4gdmVjMyBsaWdodENvbG9yID0gZGlyZWN0aW9uYWxMaWdodENvbG9yW2ldO1xcbiBmbG9hdCBuZGwgPSBkb3Qodl9Ob3JtYWwsIG5vcm1hbGl6ZShsaWdodERpcmVjdGlvbikpO1xcbiBmbG9hdCBzaGFkb3dDb250cmliID0gMS4wO1xcbiNpZiBkZWZpbmVkKERJUkVDVElPTkFMX0xJR0hUX1NIQURPV01BUF9DT1VOVClcXG4gaWYoIHNoYWRvd0VuYWJsZWQgKVxcbiB7XFxuIHNoYWRvd0NvbnRyaWIgPSBzaGFkb3dDb250cmlic0RpcltpXTtcXG4gfVxcbiNlbmRpZlxcbiBkaWZmdXNlQ29sb3IgKz0gbGlnaHRDb2xvciAqIGNsYW1wKG5kbCwgMC4wLCAxLjApICogc2hhZG93Q29udHJpYjtcXG4gfVxcbiNlbmRpZlxcbiNpZmRlZiBTUE9UX0xJR0hUX0NPVU5UXFxuI2lmIGRlZmluZWQoU1BPVF9MSUdIVF9TSEFET1dNQVBfQ09VTlQpXFxuIGZsb2F0IHNoYWRvd0NvbnRyaWJzU3BvdFtTUE9UX0xJR0hUX0NPVU5UXTtcXG4gaWYoc2hhZG93RW5hYmxlZClcXG4ge1xcbiBjb21wdXRlU2hhZG93T2ZTcG90TGlnaHRzKHZfV29ybGRQb3NpdGlvbiwgc2hhZG93Q29udHJpYnNTcG90KTtcXG4gfVxcbiNlbmRpZlxcbiBmb3IoaW50IGkgPSAwOyBpIDwgU1BPVF9MSUdIVF9DT1VOVDsgaSsrKVxcbiB7XFxuIHZlYzMgbGlnaHRQb3NpdGlvbiA9IC1zcG90TGlnaHRQb3NpdGlvbltpXTtcXG4gdmVjMyBzcG90TGlnaHREaXJlY3Rpb24gPSAtbm9ybWFsaXplKCBzcG90TGlnaHREaXJlY3Rpb25baV0gKTtcXG4gdmVjMyBsaWdodENvbG9yID0gc3BvdExpZ2h0Q29sb3JbaV07XFxuIGZsb2F0IHJhbmdlID0gc3BvdExpZ2h0UmFuZ2VbaV07XFxuIGZsb2F0IGEgPSBzcG90TGlnaHRVbWJyYUFuZ2xlQ29zaW5lW2ldO1xcbiBmbG9hdCBiID0gc3BvdExpZ2h0UGVudW1icmFBbmdsZUNvc2luZVtpXTtcXG4gZmxvYXQgZmFsbG9mZkZhY3RvciA9IHNwb3RMaWdodEZhbGxvZmZGYWN0b3JbaV07XFxuIHZlYzMgbGlnaHREaXJlY3Rpb24gPSBsaWdodFBvc2l0aW9uIC0gdl9Xb3JsZFBvc2l0aW9uO1xcbiBmbG9hdCBkaXN0ID0gbGVuZ3RoKGxpZ2h0RGlyZWN0aW9uKTtcXG4gZmxvYXQgYXR0ZW51YXRpb24gPSBsaWdodEF0dGVudWF0aW9uKGRpc3QsIHJhbmdlKTtcXG4gbGlnaHREaXJlY3Rpb24gLz0gZGlzdDtcXG4gZmxvYXQgYyA9IGRvdChzcG90TGlnaHREaXJlY3Rpb24sIGxpZ2h0RGlyZWN0aW9uKTtcXG4gZmxvYXQgZmFsbG9mZjtcXG4gZmFsbG9mZiA9IGNsYW1wKChjIC0gYSkgLyggYiAtIGEpLCAwLjAsIDEuMCk7XFxuIGZhbGxvZmYgPSBwb3coZmFsbG9mZiwgZmFsbG9mZkZhY3Rvcik7XFxuIGZsb2F0IG5kbCA9IGRvdCh2X05vcm1hbCwgbGlnaHREaXJlY3Rpb24pO1xcbiBuZGwgPSBjbGFtcChuZGwsIDAuMCwgMS4wKTtcXG4gZmxvYXQgc2hhZG93Q29udHJpYiA9IDEuMDtcXG4jaWYgZGVmaW5lZChTUE9UX0xJR0hUX1NIQURPV01BUF9DT1VOVClcXG4gaWYoIHNoYWRvd0VuYWJsZWQgKVxcbiB7XFxuIHNoYWRvd0NvbnRyaWIgPSBzaGFkb3dDb250cmlic1Nwb3RbaV07XFxuIH1cXG4jZW5kaWZcXG4gZGlmZnVzZUNvbG9yICs9IGxpZ2h0Q29sb3IgKiBuZGwgKiBhdHRlbnVhdGlvbiAqICgxLjAtZmFsbG9mZikgKiBzaGFkb3dDb250cmliO1xcbiB9XFxuI2VuZGlmXFxuIGdsX0ZyYWdDb2xvci5yZ2IgKj0gZGlmZnVzZUNvbG9yO1xcbiBnbF9GcmFnQ29sb3IucmdiICs9IGVtaXNzaW9uO1xcbiBpZihsaW5lV2lkdGggPiAwLilcXG4ge1xcbiBnbF9GcmFnQ29sb3IucmdiID0gbWl4KGdsX0ZyYWdDb2xvci5yZ2IsIGxpbmVDb2xvci5yZ2IsICgxLjAgLSBlZGdlRmFjdG9yKGxpbmVXaWR0aCkpICogbGluZUNvbG9yLmEpO1xcbiB9XFxuI2lmZGVmIEFMUEhBX1RFU1RcXG4gaWYgKGdsX0ZyYWdDb2xvci5hIDwgYWxwaGFDdXRvZmYpIHtcXG4gZGlzY2FyZDtcXG4gfVxcbiNlbmRpZlxcbiNpZmRlZiBUT05FTUFQUElOR1xcbiBnbF9GcmFnQ29sb3IucmdiID0gQUNFU1RvbmVNYXBwaW5nKGdsX0ZyYWdDb2xvci5yZ2IpO1xcbiNlbmRpZlxcbiNpZmRlZiBTUkdCX0VOQ09ERVxcbiBnbF9GcmFnQ29sb3IgPSBsaW5lYXJUb3NSR0IoZ2xfRnJhZ0NvbG9yKTtcXG4jZW5kaWZcXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKGdsX0ZyYWdDb2xvcik7XFxuIEBpbXBvcnQgY2xheS51dGlsLmxvZ2RlcHRoX2ZyYWdtZW50X21haW5cXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2xhbWJlcnQuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///135\n");

/***/ }),
/* 136 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.wireframe.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nuniform mat4 world : WORLD;\\nattribute vec3 position : POSITION;\\nattribute vec3 barycentric;\\n@import clay.chunk.skinning_header\\nvarying vec3 v_Barycentric;\\nvoid main()\\n{\\n vec3 skinnedPosition = position;\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n skinnedPosition = (skinMatrixWS * vec4(position, 1.0)).xyz;\\n#endif\\n gl_Position = worldViewProjection * vec4(skinnedPosition, 1.0 );\\n v_Barycentric = barycentric;\\n}\\n@end\\n@export clay.wireframe.fragment\\nuniform vec3 color : [0.0, 0.0, 0.0];\\nuniform float alpha : 1.0;\\nuniform float lineWidth : 1.0;\\nvarying vec3 v_Barycentric;\\n@import clay.util.edge_factor\\nvoid main()\\n{\\n gl_FragColor.rgb = color;\\n gl_FragColor.a = (1.0-edgeFactor(lineWidth)) * alpha;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS93aXJlZnJhbWUuZ2xzbC5qcz8yYjdjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LndpcmVmcmFtZS52ZXJ0ZXhcXG51bmlmb3JtIG1hdDQgd29ybGRWaWV3UHJvamVjdGlvbiA6IFdPUkxEVklFV1BST0pFQ1RJT047XFxudW5pZm9ybSBtYXQ0IHdvcmxkIDogV09STEQ7XFxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb24gOiBQT1NJVElPTjtcXG5hdHRyaWJ1dGUgdmVjMyBiYXJ5Y2VudHJpYztcXG5AaW1wb3J0IGNsYXkuY2h1bmsuc2tpbm5pbmdfaGVhZGVyXFxudmFyeWluZyB2ZWMzIHZfQmFyeWNlbnRyaWM7XFxudm9pZCBtYWluKClcXG57XFxuIHZlYzMgc2tpbm5lZFBvc2l0aW9uID0gcG9zaXRpb247XFxuI2lmZGVmIFNLSU5OSU5HXFxuIEBpbXBvcnQgY2xheS5jaHVuay5za2luX21hdHJpeFxcbiBza2lubmVkUG9zaXRpb24gPSAoc2tpbk1hdHJpeFdTICogdmVjNChwb3NpdGlvbiwgMS4wKSkueHl6O1xcbiNlbmRpZlxcbiBnbF9Qb3NpdGlvbiA9IHdvcmxkVmlld1Byb2plY3Rpb24gKiB2ZWM0KHNraW5uZWRQb3NpdGlvbiwgMS4wICk7XFxuIHZfQmFyeWNlbnRyaWMgPSBiYXJ5Y2VudHJpYztcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS53aXJlZnJhbWUuZnJhZ21lbnRcXG51bmlmb3JtIHZlYzMgY29sb3IgOiBbMC4wLCAwLjAsIDAuMF07XFxudW5pZm9ybSBmbG9hdCBhbHBoYSA6IDEuMDtcXG51bmlmb3JtIGZsb2F0IGxpbmVXaWR0aCA6IDEuMDtcXG52YXJ5aW5nIHZlYzMgdl9CYXJ5Y2VudHJpYztcXG5AaW1wb3J0IGNsYXkudXRpbC5lZGdlX2ZhY3RvclxcbnZvaWQgbWFpbigpXFxue1xcbiBnbF9GcmFnQ29sb3IucmdiID0gY29sb3I7XFxuIGdsX0ZyYWdDb2xvci5hID0gKDEuMC1lZGdlRmFjdG9yKGxpbmVXaWR0aCkpICogYWxwaGE7XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS93aXJlZnJhbWUuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///136\n");

/***/ }),
/* 137 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"\\n@export clay.compositor.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nattribute vec3 position : POSITION;\\nattribute vec2 texcoord : TEXCOORD_0;\\nvarying vec2 v_Texcoord;\\nvoid main()\\n{\\n v_Texcoord = texcoord;\\n gl_Position = worldViewProjection * vec4(position, 1.0);\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL3ZlcnRleC5nbHNsLmpzPzZjNTIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJcXG5AZXhwb3J0IGNsYXkuY29tcG9zaXRvci52ZXJ0ZXhcXG51bmlmb3JtIG1hdDQgd29ybGRWaWV3UHJvamVjdGlvbiA6IFdPUkxEVklFV1BST0pFQ1RJT047XFxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb24gOiBQT1NJVElPTjtcXG5hdHRyaWJ1dGUgdmVjMiB0ZXhjb29yZCA6IFRFWENPT1JEXzA7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudm9pZCBtYWluKClcXG57XFxuIHZfVGV4Y29vcmQgPSB0ZXhjb29yZDtcXG4gZ2xfUG9zaXRpb24gPSB3b3JsZFZpZXdQcm9qZWN0aW9uICogdmVjNChwb3NpdGlvbiwgMS4wKTtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvdmVydGV4Lmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDEzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///137\n");

/***/ }),
/* 138 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"#define SAMPLE_NUMBER 1024\\n#define PI 3.14159265358979\\nuniform sampler2D normalDistribution;\\nuniform vec2 viewportSize : [512, 256];\\nconst vec3 N = vec3(0.0, 0.0, 1.0);\\nconst float fSampleNumber = float(SAMPLE_NUMBER);\\nvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\\n vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\\n vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\\n vec3 tangentX = normalize(cross(N, upVector));\\n vec3 tangentZ = cross(N, tangentX);\\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\\n}\\nfloat G_Smith(float roughness, float NoV, float NoL) {\\n float k = roughness * roughness / 2.0;\\n float G1V = NoV / (NoV * (1.0 - k) + k);\\n float G1L = NoL / (NoL * (1.0 - k) + k);\\n return G1L * G1V;\\n}\\nvoid main() {\\n vec2 uv = gl_FragCoord.xy / viewportSize;\\n float NoV = uv.x;\\n float roughness = uv.y;\\n vec3 V;\\n V.x = sqrt(1.0 - NoV * NoV);\\n V.y = 0.0;\\n V.z = NoV;\\n float A = 0.0;\\n float B = 0.0;\\n for (int i = 0; i < SAMPLE_NUMBER; i++) {\\n vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);\\n vec3 L = reflect(-V, H);\\n float NoL = clamp(L.z, 0.0, 1.0);\\n float NoH = clamp(H.z, 0.0, 1.0);\\n float VoH = clamp(dot(V, H), 0.0, 1.0);\\n if (NoL > 0.0) {\\n float G = G_Smith(roughness, NoV, NoL);\\n float G_Vis = G * VoH / (NoH * NoV);\\n float Fc = pow(1.0 - VoH, 5.0);\\n A += (1.0 - Fc) * G_Vis;\\n B += Fc * G_Vis;\\n }\\n }\\n gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);\\n}\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvdXRpbC9zaGFkZXIvaW50ZWdyYXRlQlJERi5nbHNsLmpzPzRjNmEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCIjZGVmaW5lIFNBTVBMRV9OVU1CRVIgMTAyNFxcbiNkZWZpbmUgUEkgMy4xNDE1OTI2NTM1ODk3OVxcbnVuaWZvcm0gc2FtcGxlcjJEIG5vcm1hbERpc3RyaWJ1dGlvbjtcXG51bmlmb3JtIHZlYzIgdmlld3BvcnRTaXplIDogWzUxMiwgMjU2XTtcXG5jb25zdCB2ZWMzIE4gPSB2ZWMzKDAuMCwgMC4wLCAxLjApO1xcbmNvbnN0IGZsb2F0IGZTYW1wbGVOdW1iZXIgPSBmbG9hdChTQU1QTEVfTlVNQkVSKTtcXG52ZWMzIGltcG9ydGFuY2VTYW1wbGVOb3JtYWwoZmxvYXQgaSwgZmxvYXQgcm91Z2huZXNzLCB2ZWMzIE4pIHtcXG4gdmVjMyBIID0gdGV4dHVyZTJEKG5vcm1hbERpc3RyaWJ1dGlvbiwgdmVjMihyb3VnaG5lc3MsIGkpKS5yZ2I7XFxuIHZlYzMgdXBWZWN0b3IgPSBhYnMoTi55KSA+IDAuOTk5ID8gdmVjMygxLjAsIDAuMCwgMC4wKSA6IHZlYzMoMC4wLCAxLjAsIDAuMCk7XFxuIHZlYzMgdGFuZ2VudFggPSBub3JtYWxpemUoY3Jvc3MoTiwgdXBWZWN0b3IpKTtcXG4gdmVjMyB0YW5nZW50WiA9IGNyb3NzKE4sIHRhbmdlbnRYKTtcXG4gcmV0dXJuIG5vcm1hbGl6ZSh0YW5nZW50WCAqIEgueCArIE4gKiBILnkgKyB0YW5nZW50WiAqIEgueik7XFxufVxcbmZsb2F0IEdfU21pdGgoZmxvYXQgcm91Z2huZXNzLCBmbG9hdCBOb1YsIGZsb2F0IE5vTCkge1xcbiBmbG9hdCBrID0gcm91Z2huZXNzICogcm91Z2huZXNzIC8gMi4wO1xcbiBmbG9hdCBHMVYgPSBOb1YgLyAoTm9WICogKDEuMCAtIGspICsgayk7XFxuIGZsb2F0IEcxTCA9IE5vTCAvIChOb0wgKiAoMS4wIC0gaykgKyBrKTtcXG4gcmV0dXJuIEcxTCAqIEcxVjtcXG59XFxudm9pZCBtYWluKCkge1xcbiB2ZWMyIHV2ID0gZ2xfRnJhZ0Nvb3JkLnh5IC8gdmlld3BvcnRTaXplO1xcbiBmbG9hdCBOb1YgPSB1di54O1xcbiBmbG9hdCByb3VnaG5lc3MgPSB1di55O1xcbiB2ZWMzIFY7XFxuIFYueCA9IHNxcnQoMS4wIC0gTm9WICogTm9WKTtcXG4gVi55ID0gMC4wO1xcbiBWLnogPSBOb1Y7XFxuIGZsb2F0IEEgPSAwLjA7XFxuIGZsb2F0IEIgPSAwLjA7XFxuIGZvciAoaW50IGkgPSAwOyBpIDwgU0FNUExFX05VTUJFUjsgaSsrKSB7XFxuIHZlYzMgSCA9IGltcG9ydGFuY2VTYW1wbGVOb3JtYWwoZmxvYXQoaSkgLyBmU2FtcGxlTnVtYmVyLCByb3VnaG5lc3MsIE4pO1xcbiB2ZWMzIEwgPSByZWZsZWN0KC1WLCBIKTtcXG4gZmxvYXQgTm9MID0gY2xhbXAoTC56LCAwLjAsIDEuMCk7XFxuIGZsb2F0IE5vSCA9IGNsYW1wKEgueiwgMC4wLCAxLjApO1xcbiBmbG9hdCBWb0ggPSBjbGFtcChkb3QoViwgSCksIDAuMCwgMS4wKTtcXG4gaWYgKE5vTCA+IDAuMCkge1xcbiBmbG9hdCBHID0gR19TbWl0aChyb3VnaG5lc3MsIE5vViwgTm9MKTtcXG4gZmxvYXQgR19WaXMgPSBHICogVm9IIC8gKE5vSCAqIE5vVik7XFxuIGZsb2F0IEZjID0gcG93KDEuMCAtIFZvSCwgNS4wKTtcXG4gQSArPSAoMS4wIC0gRmMpICogR19WaXM7XFxuIEIgKz0gRmMgKiBHX1ZpcztcXG4gfVxcbiB9XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQodmVjMihBLCBCKSAvIGZTYW1wbGVOdW1iZXIsIDAuMCwgMS4wKTtcXG59XFxuXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3V0aWwvc2hhZGVyL2ludGVncmF0ZUJSREYuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///138\n");

/***/ }),
/* 139 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"#define SHADER_NAME prefilter\\n#define SAMPLE_NUMBER 1024\\n#define PI 3.14159265358979\\nuniform mat4 viewInverse : VIEWINVERSE;\\nuniform samplerCube environmentMap;\\nuniform sampler2D normalDistribution;\\nuniform float roughness : 0.5;\\nvarying vec2 v_Texcoord;\\nvarying vec3 v_WorldPosition;\\n@import clay.util.rgbm\\nvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\\n vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\\n vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\\n vec3 tangentX = normalize(cross(N, upVector));\\n vec3 tangentZ = cross(N, tangentX);\\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\\n}\\nvoid main() {\\n vec3 eyePos = viewInverse[3].xyz;\\n vec3 V = normalize(v_WorldPosition - eyePos);\\n vec3 N = V;\\n vec3 prefilteredColor = vec3(0.0);\\n float totalWeight = 0.0;\\n float fMaxSampleNumber = float(SAMPLE_NUMBER);\\n for (int i = 0; i < SAMPLE_NUMBER; i++) {\\n vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);\\n vec3 L = reflect(-V, H);\\n float NoL = clamp(dot(N, L), 0.0, 1.0);\\n if (NoL > 0.0) {\\n prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;\\n totalWeight += NoL;\\n }\\n }\\n gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));\\n}\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvdXRpbC9zaGFkZXIvcHJlZmlsdGVyLmdsc2wuanM/MDFhNCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIiNkZWZpbmUgU0hBREVSX05BTUUgcHJlZmlsdGVyXFxuI2RlZmluZSBTQU1QTEVfTlVNQkVSIDEwMjRcXG4jZGVmaW5lIFBJIDMuMTQxNTkyNjUzNTg5NzlcXG51bmlmb3JtIG1hdDQgdmlld0ludmVyc2UgOiBWSUVXSU5WRVJTRTtcXG51bmlmb3JtIHNhbXBsZXJDdWJlIGVudmlyb25tZW50TWFwO1xcbnVuaWZvcm0gc2FtcGxlcjJEIG5vcm1hbERpc3RyaWJ1dGlvbjtcXG51bmlmb3JtIGZsb2F0IHJvdWdobmVzcyA6IDAuNTtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG52YXJ5aW5nIHZlYzMgdl9Xb3JsZFBvc2l0aW9uO1xcbkBpbXBvcnQgY2xheS51dGlsLnJnYm1cXG52ZWMzIGltcG9ydGFuY2VTYW1wbGVOb3JtYWwoZmxvYXQgaSwgZmxvYXQgcm91Z2huZXNzLCB2ZWMzIE4pIHtcXG4gdmVjMyBIID0gdGV4dHVyZTJEKG5vcm1hbERpc3RyaWJ1dGlvbiwgdmVjMihyb3VnaG5lc3MsIGkpKS5yZ2I7XFxuIHZlYzMgdXBWZWN0b3IgPSBhYnMoTi55KSA+IDAuOTk5ID8gdmVjMygxLjAsIDAuMCwgMC4wKSA6IHZlYzMoMC4wLCAxLjAsIDAuMCk7XFxuIHZlYzMgdGFuZ2VudFggPSBub3JtYWxpemUoY3Jvc3MoTiwgdXBWZWN0b3IpKTtcXG4gdmVjMyB0YW5nZW50WiA9IGNyb3NzKE4sIHRhbmdlbnRYKTtcXG4gcmV0dXJuIG5vcm1hbGl6ZSh0YW5nZW50WCAqIEgueCArIE4gKiBILnkgKyB0YW5nZW50WiAqIEgueik7XFxufVxcbnZvaWQgbWFpbigpIHtcXG4gdmVjMyBleWVQb3MgPSB2aWV3SW52ZXJzZVszXS54eXo7XFxuIHZlYzMgViA9IG5vcm1hbGl6ZSh2X1dvcmxkUG9zaXRpb24gLSBleWVQb3MpO1xcbiB2ZWMzIE4gPSBWO1xcbiB2ZWMzIHByZWZpbHRlcmVkQ29sb3IgPSB2ZWMzKDAuMCk7XFxuIGZsb2F0IHRvdGFsV2VpZ2h0ID0gMC4wO1xcbiBmbG9hdCBmTWF4U2FtcGxlTnVtYmVyID0gZmxvYXQoU0FNUExFX05VTUJFUik7XFxuIGZvciAoaW50IGkgPSAwOyBpIDwgU0FNUExFX05VTUJFUjsgaSsrKSB7XFxuIHZlYzMgSCA9IGltcG9ydGFuY2VTYW1wbGVOb3JtYWwoZmxvYXQoaSkgLyBmTWF4U2FtcGxlTnVtYmVyLCByb3VnaG5lc3MsIE4pO1xcbiB2ZWMzIEwgPSByZWZsZWN0KC1WLCBIKTtcXG4gZmxvYXQgTm9MID0gY2xhbXAoZG90KE4sIEwpLCAwLjAsIDEuMCk7XFxuIGlmIChOb0wgPiAwLjApIHtcXG4gcHJlZmlsdGVyZWRDb2xvciArPSBkZWNvZGVIRFIodGV4dHVyZUN1YmUoZW52aXJvbm1lbnRNYXAsIEwpKS5yZ2IgKiBOb0w7XFxuIHRvdGFsV2VpZ2h0ICs9IE5vTDtcXG4gfVxcbiB9XFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUih2ZWM0KHByZWZpbHRlcmVkQ29sb3IgLyB0b3RhbFdlaWdodCwgMS4wKSk7XFxufVxcblwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy91dGlsL3NoYWRlci9wcmVmaWx0ZXIuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTM5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///139\n");

/***/ }),
/* 140 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.sm.depth.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nattribute vec3 position : POSITION;\\nattribute vec2 texcoord : TEXCOORD_0;\\nuniform vec2 uvRepeat = vec2(1.0, 1.0);\\nuniform vec2 uvOffset = vec2(0.0, 0.0);\\n@import clay.chunk.skinning_header\\n@import clay.chunk.instancing_header\\nvarying vec4 v_ViewPosition;\\nvarying vec2 v_Texcoord;\\nvoid main(){\\n vec4 P = vec4(position, 1.0);\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n P = skinMatrixWS * P;\\n#endif\\n#ifdef INSTANCING\\n @import clay.chunk.instancing_matrix\\n P = instanceMat * P;\\n#endif\\n v_ViewPosition = worldViewProjection * P;\\n gl_Position = v_ViewPosition;\\n v_Texcoord = texcoord * uvRepeat + uvOffset;\\n}\\n@end\\n@export clay.sm.depth.fragment\\nvarying vec4 v_ViewPosition;\\nvarying vec2 v_Texcoord;\\nuniform float bias : 0.001;\\nuniform float slopeScale : 1.0;\\nuniform sampler2D alphaMap;\\nuniform float alphaCutoff: 0.0;\\n@import clay.util.encode_float\\nvoid main(){\\n float depth = v_ViewPosition.z / v_ViewPosition.w;\\n if (alphaCutoff > 0.0) {\\n if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {\\n discard;\\n }\\n }\\n#ifdef USE_VSM\\n depth = depth * 0.5 + 0.5;\\n float moment1 = depth;\\n float moment2 = depth * depth;\\n #ifdef SUPPORT_STANDARD_DERIVATIVES\\n float dx = dFdx(depth);\\n float dy = dFdy(depth);\\n moment2 += 0.25*(dx*dx+dy*dy);\\n #endif\\n gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);\\n#else\\n #ifdef SUPPORT_STANDARD_DERIVATIVES\\n float dx = dFdx(depth);\\n float dy = dFdy(depth);\\n depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;\\n #else\\n depth += bias;\\n #endif\\n gl_FragColor = encodeFloat(depth * 0.5 + 0.5);\\n#endif\\n}\\n@end\\n@export clay.sm.debug_depth\\nuniform sampler2D depthMap;\\nvarying vec2 v_Texcoord;\\n@import clay.util.decode_float\\nvoid main() {\\n vec4 tex = texture2D(depthMap, v_Texcoord);\\n#ifdef USE_VSM\\n gl_FragColor = vec4(tex.rgb, 1.0);\\n#else\\n float depth = decodeFloat(tex);\\n gl_FragColor = vec4(depth, depth, depth, 1.0);\\n#endif\\n}\\n@end\\n@export clay.sm.distance.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nuniform mat4 world : WORLD;\\nattribute vec3 position : POSITION;\\n@import clay.chunk.skinning_header\\nvarying vec3 v_WorldPosition;\\nvoid main (){\\n vec4 P = vec4(position, 1.0);\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n P = skinMatrixWS * P;\\n#endif\\n#ifdef INSTANCING\\n @import clay.chunk.instancing_matrix\\n P = instanceMat * P;\\n#endif\\n gl_Position = worldViewProjection * P;\\n v_WorldPosition = (world * P).xyz;\\n}\\n@end\\n@export clay.sm.distance.fragment\\nuniform vec3 lightPosition;\\nuniform float range : 100;\\nvarying vec3 v_WorldPosition;\\n@import clay.util.encode_float\\nvoid main(){\\n float dist = distance(lightPosition, v_WorldPosition);\\n#ifdef USE_VSM\\n gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);\\n#else\\n dist = dist / range;\\n gl_FragColor = encodeFloat(dist);\\n#endif\\n}\\n@end\\n@export clay.plugin.shadow_map_common\\n@import clay.util.decode_float\\nfloat tapShadowMap(sampler2D map, vec2 uv, float z){\\n vec4 tex = texture2D(map, uv);\\n return step(z, decodeFloat(tex) * 2.0 - 1.0);\\n}\\nfloat pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {\\n float shadowContrib = tapShadowMap(map, uv, z);\\n vec2 offset = vec2(1.0 / textureSize) * scale;\\n#ifdef PCF_KERNEL_SIZE\\n for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{\\n shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);\\n }}\\n return shadowContrib / float(PCF_KERNEL_SIZE + 1);\\n#else\\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);\\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);\\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);\\n shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);\\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);\\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);\\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);\\n shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);\\n return shadowContrib / 9.0;\\n#endif\\n}\\nfloat pcf(sampler2D map, vec2 uv, float z, float textureSize) {\\n return pcf(map, uv, z, textureSize, vec2(1.0));\\n}\\nfloat chebyshevUpperBound(vec2 moments, float z){\\n float p = 0.0;\\n z = z * 0.5 + 0.5;\\n if (z <= moments.x) {\\n p = 1.0;\\n }\\n float variance = moments.y - moments.x * moments.x;\\n variance = max(variance, 0.0000001);\\n float mD = moments.x - z;\\n float pMax = variance / (variance + mD * mD);\\n pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);\\n return max(p, pMax);\\n}\\nfloat computeShadowContrib(\\n sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset\\n) {\\n vec4 posInLightSpace = lightVPM * vec4(position, 1.0);\\n posInLightSpace.xyz /= posInLightSpace.w;\\n float z = posInLightSpace.z;\\n if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&\\n all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){\\n vec2 uv = (posInLightSpace.xy+1.0) / 2.0;\\n #ifdef USE_VSM\\n vec2 moments = texture2D(map, uv * scale + offset).xy;\\n return chebyshevUpperBound(moments, z);\\n #else\\n return pcf(map, uv * scale + offset, z, textureSize, scale);\\n #endif\\n }\\n return 1.0;\\n}\\nfloat computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {\\n return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));\\n}\\nfloat computeShadowContribOmni(samplerCube map, vec3 direction, float range)\\n{\\n float dist = length(direction);\\n vec4 shadowTex = textureCube(map, direction);\\n#ifdef USE_VSM\\n vec2 moments = shadowTex.xy;\\n float variance = moments.y - moments.x * moments.x;\\n float mD = moments.x - dist;\\n float p = variance / (variance + mD * mD);\\n if(moments.x + 0.001 < dist){\\n return clamp(p, 0.0, 1.0);\\n }else{\\n return 1.0;\\n }\\n#else\\n return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);\\n#endif\\n}\\n@end\\n@export clay.plugin.compute_shadow_map\\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)\\n#ifdef SPOT_LIGHT_SHADOWMAP_COUNT\\nuniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\\nuniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\\nuniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\\n#endif\\n#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT\\n#if defined(SHADOW_CASCADE)\\nuniform sampler2D directionalLightShadowMaps[1]:unconfigurable;\\nuniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;\\nuniform float directionalLightShadowMapSizes[1]:unconfigurable;\\nuniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;\\nuniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;\\n#else\\nuniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\\nuniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\\nuniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\\n#endif\\n#endif\\n#ifdef POINT_LIGHT_SHADOWMAP_COUNT\\nuniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\\n#endif\\nuniform bool shadowEnabled : true;\\n#ifdef PCF_KERNEL_SIZE\\nuniform vec2 pcfKernel[PCF_KERNEL_SIZE];\\n#endif\\n@import clay.plugin.shadow_map_common\\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\\nvoid computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {\\n float shadowContrib;\\n for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\\n shadowContrib = computeShadowContrib(\\n spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,\\n spotLightShadowMapSizes[_idx_]\\n );\\n shadowContribs[_idx_] = shadowContrib;\\n }}\\n for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{\\n shadowContribs[_idx_] = 1.0;\\n }}\\n}\\n#endif\\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\\n#ifdef SHADOW_CASCADE\\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){\\n float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)\\n / (gl_DepthRange.far - gl_DepthRange.near);\\n float shadowContrib;\\n shadowContribs[0] = 1.0;\\n for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{\\n if (\\n depth >= shadowCascadeClipsNear[_idx_] &&\\n depth <= shadowCascadeClipsFar[_idx_]\\n ) {\\n shadowContrib = computeShadowContrib(\\n directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,\\n directionalLightShadowMapSizes[0],\\n vec2(1.0 / float(SHADOW_CASCADE), 1.0),\\n vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)\\n );\\n shadowContribs[0] = shadowContrib;\\n }\\n }}\\n for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{\\n shadowContribs[_idx_] = 1.0;\\n }}\\n}\\n#else\\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){\\n float shadowContrib;\\n for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\\n shadowContrib = computeShadowContrib(\\n directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,\\n directionalLightShadowMapSizes[_idx_]\\n );\\n shadowContribs[_idx_] = shadowContrib;\\n }}\\n for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{\\n shadowContribs[_idx_] = 1.0;\\n }}\\n}\\n#endif\\n#endif\\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\\nvoid computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){\\n vec3 lightPosition;\\n vec3 direction;\\n for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\\n lightPosition = pointLightPosition[_idx_];\\n direction = position - lightPosition;\\n shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);\\n }}\\n for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{\\n shadowContribs[_idx_] = 1.0;\\n }}\\n}\\n#endif\\n#endif\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9zaGFkb3dtYXAuZ2xzbC5qcz85ZWE2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LnNtLmRlcHRoLnZlcnRleFxcbnVuaWZvcm0gbWF0NCB3b3JsZFZpZXdQcm9qZWN0aW9uIDogV09STERWSUVXUFJPSkVDVElPTjtcXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbiA6IFBPU0lUSU9OO1xcbmF0dHJpYnV0ZSB2ZWMyIHRleGNvb3JkIDogVEVYQ09PUkRfMDtcXG51bmlmb3JtIHZlYzIgdXZSZXBlYXQgPSB2ZWMyKDEuMCwgMS4wKTtcXG51bmlmb3JtIHZlYzIgdXZPZmZzZXQgPSB2ZWMyKDAuMCwgMC4wKTtcXG5AaW1wb3J0IGNsYXkuY2h1bmsuc2tpbm5pbmdfaGVhZGVyXFxuQGltcG9ydCBjbGF5LmNodW5rLmluc3RhbmNpbmdfaGVhZGVyXFxudmFyeWluZyB2ZWM0IHZfVmlld1Bvc2l0aW9uO1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnZvaWQgbWFpbigpe1xcbiB2ZWM0IFAgPSB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbiNpZmRlZiBTS0lOTklOR1xcbiBAaW1wb3J0IGNsYXkuY2h1bmsuc2tpbl9tYXRyaXhcXG4gUCA9IHNraW5NYXRyaXhXUyAqIFA7XFxuI2VuZGlmXFxuI2lmZGVmIElOU1RBTkNJTkdcXG4gQGltcG9ydCBjbGF5LmNodW5rLmluc3RhbmNpbmdfbWF0cml4XFxuIFAgPSBpbnN0YW5jZU1hdCAqIFA7XFxuI2VuZGlmXFxuIHZfVmlld1Bvc2l0aW9uID0gd29ybGRWaWV3UHJvamVjdGlvbiAqIFA7XFxuIGdsX1Bvc2l0aW9uID0gdl9WaWV3UG9zaXRpb247XFxuIHZfVGV4Y29vcmQgPSB0ZXhjb29yZCAqIHV2UmVwZWF0ICsgdXZPZmZzZXQ7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuc20uZGVwdGguZnJhZ21lbnRcXG52YXJ5aW5nIHZlYzQgdl9WaWV3UG9zaXRpb247XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudW5pZm9ybSBmbG9hdCBiaWFzIDogMC4wMDE7XFxudW5pZm9ybSBmbG9hdCBzbG9wZVNjYWxlIDogMS4wO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGFscGhhTWFwO1xcbnVuaWZvcm0gZmxvYXQgYWxwaGFDdXRvZmY6IDAuMDtcXG5AaW1wb3J0IGNsYXkudXRpbC5lbmNvZGVfZmxvYXRcXG52b2lkIG1haW4oKXtcXG4gZmxvYXQgZGVwdGggPSB2X1ZpZXdQb3NpdGlvbi56IC8gdl9WaWV3UG9zaXRpb24udztcXG4gaWYgKGFscGhhQ3V0b2ZmID4gMC4wKSB7XFxuIGlmICh0ZXh0dXJlMkQoYWxwaGFNYXAsIHZfVGV4Y29vcmQpLmEgPD0gYWxwaGFDdXRvZmYpIHtcXG4gZGlzY2FyZDtcXG4gfVxcbiB9XFxuI2lmZGVmIFVTRV9WU01cXG4gZGVwdGggPSBkZXB0aCAqIDAuNSArIDAuNTtcXG4gZmxvYXQgbW9tZW50MSA9IGRlcHRoO1xcbiBmbG9hdCBtb21lbnQyID0gZGVwdGggKiBkZXB0aDtcXG4gI2lmZGVmIFNVUFBPUlRfU1RBTkRBUkRfREVSSVZBVElWRVNcXG4gZmxvYXQgZHggPSBkRmR4KGRlcHRoKTtcXG4gZmxvYXQgZHkgPSBkRmR5KGRlcHRoKTtcXG4gbW9tZW50MiArPSAwLjI1KihkeCpkeCtkeSpkeSk7XFxuICNlbmRpZlxcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KG1vbWVudDEsIG1vbWVudDIsIDAuMCwgMS4wKTtcXG4jZWxzZVxcbiAjaWZkZWYgU1VQUE9SVF9TVEFOREFSRF9ERVJJVkFUSVZFU1xcbiBmbG9hdCBkeCA9IGRGZHgoZGVwdGgpO1xcbiBmbG9hdCBkeSA9IGRGZHkoZGVwdGgpO1xcbiBkZXB0aCArPSBzcXJ0KGR4KmR4ICsgZHkqZHkpICogc2xvcGVTY2FsZSArIGJpYXM7XFxuICNlbHNlXFxuIGRlcHRoICs9IGJpYXM7XFxuICNlbmRpZlxcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVGbG9hdChkZXB0aCAqIDAuNSArIDAuNSk7XFxuI2VuZGlmXFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuc20uZGVidWdfZGVwdGhcXG51bmlmb3JtIHNhbXBsZXIyRCBkZXB0aE1hcDtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG5AaW1wb3J0IGNsYXkudXRpbC5kZWNvZGVfZmxvYXRcXG52b2lkIG1haW4oKSB7XFxuIHZlYzQgdGV4ID0gdGV4dHVyZTJEKGRlcHRoTWFwLCB2X1RleGNvb3JkKTtcXG4jaWZkZWYgVVNFX1ZTTVxcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KHRleC5yZ2IsIDEuMCk7XFxuI2Vsc2VcXG4gZmxvYXQgZGVwdGggPSBkZWNvZGVGbG9hdCh0ZXgpO1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KGRlcHRoLCBkZXB0aCwgZGVwdGgsIDEuMCk7XFxuI2VuZGlmXFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuc20uZGlzdGFuY2UudmVydGV4XFxudW5pZm9ybSBtYXQ0IHdvcmxkVmlld1Byb2plY3Rpb24gOiBXT1JMRFZJRVdQUk9KRUNUSU9OO1xcbnVuaWZvcm0gbWF0NCB3b3JsZCA6IFdPUkxEO1xcbmF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uIDogUE9TSVRJT047XFxuQGltcG9ydCBjbGF5LmNodW5rLnNraW5uaW5nX2hlYWRlclxcbnZhcnlpbmcgdmVjMyB2X1dvcmxkUG9zaXRpb247XFxudm9pZCBtYWluICgpe1xcbiB2ZWM0IFAgPSB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbiNpZmRlZiBTS0lOTklOR1xcbiBAaW1wb3J0IGNsYXkuY2h1bmsuc2tpbl9tYXRyaXhcXG4gUCA9IHNraW5NYXRyaXhXUyAqIFA7XFxuI2VuZGlmXFxuI2lmZGVmIElOU1RBTkNJTkdcXG4gQGltcG9ydCBjbGF5LmNodW5rLmluc3RhbmNpbmdfbWF0cml4XFxuIFAgPSBpbnN0YW5jZU1hdCAqIFA7XFxuI2VuZGlmXFxuIGdsX1Bvc2l0aW9uID0gd29ybGRWaWV3UHJvamVjdGlvbiAqIFA7XFxuIHZfV29ybGRQb3NpdGlvbiA9ICh3b3JsZCAqIFApLnh5ejtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5zbS5kaXN0YW5jZS5mcmFnbWVudFxcbnVuaWZvcm0gdmVjMyBsaWdodFBvc2l0aW9uO1xcbnVuaWZvcm0gZmxvYXQgcmFuZ2UgOiAxMDA7XFxudmFyeWluZyB2ZWMzIHZfV29ybGRQb3NpdGlvbjtcXG5AaW1wb3J0IGNsYXkudXRpbC5lbmNvZGVfZmxvYXRcXG52b2lkIG1haW4oKXtcXG4gZmxvYXQgZGlzdCA9IGRpc3RhbmNlKGxpZ2h0UG9zaXRpb24sIHZfV29ybGRQb3NpdGlvbik7XFxuI2lmZGVmIFVTRV9WU01cXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNChkaXN0LCBkaXN0ICogZGlzdCwgMC4wLCAwLjApO1xcbiNlbHNlXFxuIGRpc3QgPSBkaXN0IC8gcmFuZ2U7XFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUZsb2F0KGRpc3QpO1xcbiNlbmRpZlxcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnBsdWdpbi5zaGFkb3dfbWFwX2NvbW1vblxcbkBpbXBvcnQgY2xheS51dGlsLmRlY29kZV9mbG9hdFxcbmZsb2F0IHRhcFNoYWRvd01hcChzYW1wbGVyMkQgbWFwLCB2ZWMyIHV2LCBmbG9hdCB6KXtcXG4gdmVjNCB0ZXggPSB0ZXh0dXJlMkQobWFwLCB1dik7XFxuIHJldHVybiBzdGVwKHosIGRlY29kZUZsb2F0KHRleCkgKiAyLjAgLSAxLjApO1xcbn1cXG5mbG9hdCBwY2Yoc2FtcGxlcjJEIG1hcCwgdmVjMiB1diwgZmxvYXQgeiwgZmxvYXQgdGV4dHVyZVNpemUsIHZlYzIgc2NhbGUpIHtcXG4gZmxvYXQgc2hhZG93Q29udHJpYiA9IHRhcFNoYWRvd01hcChtYXAsIHV2LCB6KTtcXG4gdmVjMiBvZmZzZXQgPSB2ZWMyKDEuMCAvIHRleHR1cmVTaXplKSAqIHNjYWxlO1xcbiNpZmRlZiBQQ0ZfS0VSTkVMX1NJWkVcXG4gZm9yIChpbnQgX2lkeF8gPSAwOyBfaWR4XyA8IFBDRl9LRVJORUxfU0laRTsgX2lkeF8rKykge3tcXG4gc2hhZG93Q29udHJpYiArPSB0YXBTaGFkb3dNYXAobWFwLCB1diArIG9mZnNldCAqIHBjZktlcm5lbFtfaWR4X10sIHopO1xcbiB9fVxcbiByZXR1cm4gc2hhZG93Q29udHJpYiAvIGZsb2F0KFBDRl9LRVJORUxfU0laRSArIDEpO1xcbiNlbHNlXFxuIHNoYWRvd0NvbnRyaWIgKz0gdGFwU2hhZG93TWFwKG1hcCwgdXYrdmVjMihvZmZzZXQueCwgMC4wKSwgeik7XFxuIHNoYWRvd0NvbnRyaWIgKz0gdGFwU2hhZG93TWFwKG1hcCwgdXYrdmVjMihvZmZzZXQueCwgb2Zmc2V0LnkpLCB6KTtcXG4gc2hhZG93Q29udHJpYiArPSB0YXBTaGFkb3dNYXAobWFwLCB1dit2ZWMyKC1vZmZzZXQueCwgb2Zmc2V0LnkpLCB6KTtcXG4gc2hhZG93Q29udHJpYiArPSB0YXBTaGFkb3dNYXAobWFwLCB1dit2ZWMyKDAuMCwgb2Zmc2V0LnkpLCB6KTtcXG4gc2hhZG93Q29udHJpYiArPSB0YXBTaGFkb3dNYXAobWFwLCB1dit2ZWMyKC1vZmZzZXQueCwgMC4wKSwgeik7XFxuIHNoYWRvd0NvbnRyaWIgKz0gdGFwU2hhZG93TWFwKG1hcCwgdXYrdmVjMigtb2Zmc2V0LngsIC1vZmZzZXQueSksIHopO1xcbiBzaGFkb3dDb250cmliICs9IHRhcFNoYWRvd01hcChtYXAsIHV2K3ZlYzIob2Zmc2V0LngsIC1vZmZzZXQueSksIHopO1xcbiBzaGFkb3dDb250cmliICs9IHRhcFNoYWRvd01hcChtYXAsIHV2K3ZlYzIoMC4wLCAtb2Zmc2V0LnkpLCB6KTtcXG4gcmV0dXJuIHNoYWRvd0NvbnRyaWIgLyA5LjA7XFxuI2VuZGlmXFxufVxcbmZsb2F0IHBjZihzYW1wbGVyMkQgbWFwLCB2ZWMyIHV2LCBmbG9hdCB6LCBmbG9hdCB0ZXh0dXJlU2l6ZSkge1xcbiByZXR1cm4gcGNmKG1hcCwgdXYsIHosIHRleHR1cmVTaXplLCB2ZWMyKDEuMCkpO1xcbn1cXG5mbG9hdCBjaGVieXNoZXZVcHBlckJvdW5kKHZlYzIgbW9tZW50cywgZmxvYXQgeil7XFxuIGZsb2F0IHAgPSAwLjA7XFxuIHogPSB6ICogMC41ICsgMC41O1xcbiBpZiAoeiA8PSBtb21lbnRzLngpIHtcXG4gcCA9IDEuMDtcXG4gfVxcbiBmbG9hdCB2YXJpYW5jZSA9IG1vbWVudHMueSAtIG1vbWVudHMueCAqIG1vbWVudHMueDtcXG4gdmFyaWFuY2UgPSBtYXgodmFyaWFuY2UsIDAuMDAwMDAwMSk7XFxuIGZsb2F0IG1EID0gbW9tZW50cy54IC0gejtcXG4gZmxvYXQgcE1heCA9IHZhcmlhbmNlIC8gKHZhcmlhbmNlICsgbUQgKiBtRCk7XFxuIHBNYXggPSBjbGFtcCgocE1heC0wLjQpLygxLjAtMC40KSwgMC4wLCAxLjApO1xcbiByZXR1cm4gbWF4KHAsIHBNYXgpO1xcbn1cXG5mbG9hdCBjb21wdXRlU2hhZG93Q29udHJpYihcXG4gc2FtcGxlcjJEIG1hcCwgbWF0NCBsaWdodFZQTSwgdmVjMyBwb3NpdGlvbiwgZmxvYXQgdGV4dHVyZVNpemUsIHZlYzIgc2NhbGUsIHZlYzIgb2Zmc2V0XFxuKSB7XFxuIHZlYzQgcG9zSW5MaWdodFNwYWNlID0gbGlnaHRWUE0gKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbiBwb3NJbkxpZ2h0U3BhY2UueHl6IC89IHBvc0luTGlnaHRTcGFjZS53O1xcbiBmbG9hdCB6ID0gcG9zSW5MaWdodFNwYWNlLno7XFxuIGlmKGFsbChncmVhdGVyVGhhbihwb3NJbkxpZ2h0U3BhY2UueHl6LCB2ZWMzKC0wLjk5LCAtMC45OSwgLTEuMCkpKSAmJlxcbiBhbGwobGVzc1RoYW4ocG9zSW5MaWdodFNwYWNlLnh5eiwgdmVjMygwLjk5LCAwLjk5LCAxLjApKSkpe1xcbiB2ZWMyIHV2ID0gKHBvc0luTGlnaHRTcGFjZS54eSsxLjApIC8gMi4wO1xcbiAjaWZkZWYgVVNFX1ZTTVxcbiB2ZWMyIG1vbWVudHMgPSB0ZXh0dXJlMkQobWFwLCB1diAqIHNjYWxlICsgb2Zmc2V0KS54eTtcXG4gcmV0dXJuIGNoZWJ5c2hldlVwcGVyQm91bmQobW9tZW50cywgeik7XFxuICNlbHNlXFxuIHJldHVybiBwY2YobWFwLCB1diAqIHNjYWxlICsgb2Zmc2V0LCB6LCB0ZXh0dXJlU2l6ZSwgc2NhbGUpO1xcbiAjZW5kaWZcXG4gfVxcbiByZXR1cm4gMS4wO1xcbn1cXG5mbG9hdCBjb21wdXRlU2hhZG93Q29udHJpYihzYW1wbGVyMkQgbWFwLCBtYXQ0IGxpZ2h0VlBNLCB2ZWMzIHBvc2l0aW9uLCBmbG9hdCB0ZXh0dXJlU2l6ZSkge1xcbiByZXR1cm4gY29tcHV0ZVNoYWRvd0NvbnRyaWIobWFwLCBsaWdodFZQTSwgcG9zaXRpb24sIHRleHR1cmVTaXplLCB2ZWMyKDEuMCksIHZlYzIoMC4wKSk7XFxufVxcbmZsb2F0IGNvbXB1dGVTaGFkb3dDb250cmliT21uaShzYW1wbGVyQ3ViZSBtYXAsIHZlYzMgZGlyZWN0aW9uLCBmbG9hdCByYW5nZSlcXG57XFxuIGZsb2F0IGRpc3QgPSBsZW5ndGgoZGlyZWN0aW9uKTtcXG4gdmVjNCBzaGFkb3dUZXggPSB0ZXh0dXJlQ3ViZShtYXAsIGRpcmVjdGlvbik7XFxuI2lmZGVmIFVTRV9WU01cXG4gdmVjMiBtb21lbnRzID0gc2hhZG93VGV4Lnh5O1xcbiBmbG9hdCB2YXJpYW5jZSA9IG1vbWVudHMueSAtIG1vbWVudHMueCAqIG1vbWVudHMueDtcXG4gZmxvYXQgbUQgPSBtb21lbnRzLnggLSBkaXN0O1xcbiBmbG9hdCBwID0gdmFyaWFuY2UgLyAodmFyaWFuY2UgKyBtRCAqIG1EKTtcXG4gaWYobW9tZW50cy54ICsgMC4wMDEgPCBkaXN0KXtcXG4gcmV0dXJuIGNsYW1wKHAsIDAuMCwgMS4wKTtcXG4gfWVsc2V7XFxuIHJldHVybiAxLjA7XFxuIH1cXG4jZWxzZVxcbiByZXR1cm4gc3RlcChkaXN0LCAoZGVjb2RlRmxvYXQoc2hhZG93VGV4KSArIDAuMDAwMikgKiByYW5nZSk7XFxuI2VuZGlmXFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkucGx1Z2luLmNvbXB1dGVfc2hhZG93X21hcFxcbiNpZiBkZWZpbmVkKFNQT1RfTElHSFRfU0hBRE9XTUFQX0NPVU5UKSB8fCBkZWZpbmVkKERJUkVDVElPTkFMX0xJR0hUX1NIQURPV01BUF9DT1VOVCkgfHwgZGVmaW5lZChQT0lOVF9MSUdIVF9TSEFET1dNQVBfQ09VTlQpXFxuI2lmZGVmIFNQT1RfTElHSFRfU0hBRE9XTUFQX0NPVU5UXFxudW5pZm9ybSBzYW1wbGVyMkQgc3BvdExpZ2h0U2hhZG93TWFwc1tTUE9UX0xJR0hUX1NIQURPV01BUF9DT1VOVF06dW5jb25maWd1cmFibGU7XFxudW5pZm9ybSBtYXQ0IHNwb3RMaWdodE1hdHJpY2VzW1NQT1RfTElHSFRfU0hBRE9XTUFQX0NPVU5UXTp1bmNvbmZpZ3VyYWJsZTtcXG51bmlmb3JtIGZsb2F0IHNwb3RMaWdodFNoYWRvd01hcFNpemVzW1NQT1RfTElHSFRfU0hBRE9XTUFQX0NPVU5UXTp1bmNvbmZpZ3VyYWJsZTtcXG4jZW5kaWZcXG4jaWZkZWYgRElSRUNUSU9OQUxfTElHSFRfU0hBRE9XTUFQX0NPVU5UXFxuI2lmIGRlZmluZWQoU0hBRE9XX0NBU0NBREUpXFxudW5pZm9ybSBzYW1wbGVyMkQgZGlyZWN0aW9uYWxMaWdodFNoYWRvd01hcHNbMV06dW5jb25maWd1cmFibGU7XFxudW5pZm9ybSBtYXQ0IGRpcmVjdGlvbmFsTGlnaHRNYXRyaWNlc1tTSEFET1dfQ0FTQ0FERV06dW5jb25maWd1cmFibGU7XFxudW5pZm9ybSBmbG9hdCBkaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwU2l6ZXNbMV06dW5jb25maWd1cmFibGU7XFxudW5pZm9ybSBmbG9hdCBzaGFkb3dDYXNjYWRlQ2xpcHNOZWFyW1NIQURPV19DQVNDQURFXTp1bmNvbmZpZ3VyYWJsZTtcXG51bmlmb3JtIGZsb2F0IHNoYWRvd0Nhc2NhZGVDbGlwc0ZhcltTSEFET1dfQ0FTQ0FERV06dW5jb25maWd1cmFibGU7XFxuI2Vsc2VcXG51bmlmb3JtIHNhbXBsZXIyRCBkaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwc1tESVJFQ1RJT05BTF9MSUdIVF9TSEFET1dNQVBfQ09VTlRdOnVuY29uZmlndXJhYmxlO1xcbnVuaWZvcm0gbWF0NCBkaXJlY3Rpb25hbExpZ2h0TWF0cmljZXNbRElSRUNUSU9OQUxfTElHSFRfU0hBRE9XTUFQX0NPVU5UXTp1bmNvbmZpZ3VyYWJsZTtcXG51bmlmb3JtIGZsb2F0IGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dNYXBTaXplc1tESVJFQ1RJT05BTF9MSUdIVF9TSEFET1dNQVBfQ09VTlRdOnVuY29uZmlndXJhYmxlO1xcbiNlbmRpZlxcbiNlbmRpZlxcbiNpZmRlZiBQT0lOVF9MSUdIVF9TSEFET1dNQVBfQ09VTlRcXG51bmlmb3JtIHNhbXBsZXJDdWJlIHBvaW50TGlnaHRTaGFkb3dNYXBzW1BPSU5UX0xJR0hUX1NIQURPV01BUF9DT1VOVF06dW5jb25maWd1cmFibGU7XFxuI2VuZGlmXFxudW5pZm9ybSBib29sIHNoYWRvd0VuYWJsZWQgOiB0cnVlO1xcbiNpZmRlZiBQQ0ZfS0VSTkVMX1NJWkVcXG51bmlmb3JtIHZlYzIgcGNmS2VybmVsW1BDRl9LRVJORUxfU0laRV07XFxuI2VuZGlmXFxuQGltcG9ydCBjbGF5LnBsdWdpbi5zaGFkb3dfbWFwX2NvbW1vblxcbiNpZiBkZWZpbmVkKFNQT1RfTElHSFRfU0hBRE9XTUFQX0NPVU5UKVxcbnZvaWQgY29tcHV0ZVNoYWRvd09mU3BvdExpZ2h0cyh2ZWMzIHBvc2l0aW9uLCBpbm91dCBmbG9hdCBzaGFkb3dDb250cmlic1tTUE9UX0xJR0hUX0NPVU5UXSApIHtcXG4gZmxvYXQgc2hhZG93Q29udHJpYjtcXG4gZm9yKGludCBfaWR4XyA9IDA7IF9pZHhfIDwgU1BPVF9MSUdIVF9TSEFET1dNQVBfQ09VTlQ7IF9pZHhfKyspIHt7XFxuIHNoYWRvd0NvbnRyaWIgPSBjb21wdXRlU2hhZG93Q29udHJpYihcXG4gc3BvdExpZ2h0U2hhZG93TWFwc1tfaWR4X10sIHNwb3RMaWdodE1hdHJpY2VzW19pZHhfXSwgcG9zaXRpb24sXFxuIHNwb3RMaWdodFNoYWRvd01hcFNpemVzW19pZHhfXVxcbiApO1xcbiBzaGFkb3dDb250cmlic1tfaWR4X10gPSBzaGFkb3dDb250cmliO1xcbiB9fVxcbiBmb3IoaW50IF9pZHhfID0gU1BPVF9MSUdIVF9TSEFET1dNQVBfQ09VTlQ7IF9pZHhfIDwgU1BPVF9MSUdIVF9DT1VOVDsgX2lkeF8rKyl7e1xcbiBzaGFkb3dDb250cmlic1tfaWR4X10gPSAxLjA7XFxuIH19XFxufVxcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKERJUkVDVElPTkFMX0xJR0hUX1NIQURPV01BUF9DT1VOVClcXG4jaWZkZWYgU0hBRE9XX0NBU0NBREVcXG52b2lkIGNvbXB1dGVTaGFkb3dPZkRpcmVjdGlvbmFsTGlnaHRzKHZlYzMgcG9zaXRpb24sIGlub3V0IGZsb2F0IHNoYWRvd0NvbnRyaWJzW0RJUkVDVElPTkFMX0xJR0hUX0NPVU5UXSl7XFxuIGZsb2F0IGRlcHRoID0gKDIuMCAqIGdsX0ZyYWdDb29yZC56IC0gZ2xfRGVwdGhSYW5nZS5uZWFyIC0gZ2xfRGVwdGhSYW5nZS5mYXIpXFxuIC8gKGdsX0RlcHRoUmFuZ2UuZmFyIC0gZ2xfRGVwdGhSYW5nZS5uZWFyKTtcXG4gZmxvYXQgc2hhZG93Q29udHJpYjtcXG4gc2hhZG93Q29udHJpYnNbMF0gPSAxLjA7XFxuIGZvciAoaW50IF9pZHhfID0gMDsgX2lkeF8gPCBTSEFET1dfQ0FTQ0FERTsgX2lkeF8rKykge3tcXG4gaWYgKFxcbiBkZXB0aCA+PSBzaGFkb3dDYXNjYWRlQ2xpcHNOZWFyW19pZHhfXSAmJlxcbiBkZXB0aCA8PSBzaGFkb3dDYXNjYWRlQ2xpcHNGYXJbX2lkeF9dXFxuICkge1xcbiBzaGFkb3dDb250cmliID0gY29tcHV0ZVNoYWRvd0NvbnRyaWIoXFxuIGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dNYXBzWzBdLCBkaXJlY3Rpb25hbExpZ2h0TWF0cmljZXNbX2lkeF9dLCBwb3NpdGlvbixcXG4gZGlyZWN0aW9uYWxMaWdodFNoYWRvd01hcFNpemVzWzBdLFxcbiB2ZWMyKDEuMCAvIGZsb2F0KFNIQURPV19DQVNDQURFKSwgMS4wKSxcXG4gdmVjMihmbG9hdChfaWR4XykgLyBmbG9hdChTSEFET1dfQ0FTQ0FERSksIDAuMClcXG4gKTtcXG4gc2hhZG93Q29udHJpYnNbMF0gPSBzaGFkb3dDb250cmliO1xcbiB9XFxuIH19XFxuIGZvcihpbnQgX2lkeF8gPSBESVJFQ1RJT05BTF9MSUdIVF9TSEFET1dNQVBfQ09VTlQ7IF9pZHhfIDwgRElSRUNUSU9OQUxfTElHSFRfQ09VTlQ7IF9pZHhfKyspIHt7XFxuIHNoYWRvd0NvbnRyaWJzW19pZHhfXSA9IDEuMDtcXG4gfX1cXG59XFxuI2Vsc2VcXG52b2lkIGNvbXB1dGVTaGFkb3dPZkRpcmVjdGlvbmFsTGlnaHRzKHZlYzMgcG9zaXRpb24sIGlub3V0IGZsb2F0IHNoYWRvd0NvbnRyaWJzW0RJUkVDVElPTkFMX0xJR0hUX0NPVU5UXSl7XFxuIGZsb2F0IHNoYWRvd0NvbnRyaWI7XFxuIGZvcihpbnQgX2lkeF8gPSAwOyBfaWR4XyA8IERJUkVDVElPTkFMX0xJR0hUX1NIQURPV01BUF9DT1VOVDsgX2lkeF8rKykge3tcXG4gc2hhZG93Q29udHJpYiA9IGNvbXB1dGVTaGFkb3dDb250cmliKFxcbiBkaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwc1tfaWR4X10sIGRpcmVjdGlvbmFsTGlnaHRNYXRyaWNlc1tfaWR4X10sIHBvc2l0aW9uLFxcbiBkaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwU2l6ZXNbX2lkeF9dXFxuICk7XFxuIHNoYWRvd0NvbnRyaWJzW19pZHhfXSA9IHNoYWRvd0NvbnRyaWI7XFxuIH19XFxuIGZvcihpbnQgX2lkeF8gPSBESVJFQ1RJT05BTF9MSUdIVF9TSEFET1dNQVBfQ09VTlQ7IF9pZHhfIDwgRElSRUNUSU9OQUxfTElHSFRfQ09VTlQ7IF9pZHhfKyspIHt7XFxuIHNoYWRvd0NvbnRyaWJzW19pZHhfXSA9IDEuMDtcXG4gfX1cXG59XFxuI2VuZGlmXFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoUE9JTlRfTElHSFRfU0hBRE9XTUFQX0NPVU5UKVxcbnZvaWQgY29tcHV0ZVNoYWRvd09mUG9pbnRMaWdodHModmVjMyBwb3NpdGlvbiwgaW5vdXQgZmxvYXQgc2hhZG93Q29udHJpYnNbUE9JTlRfTElHSFRfQ09VTlRdICl7XFxuIHZlYzMgbGlnaHRQb3NpdGlvbjtcXG4gdmVjMyBkaXJlY3Rpb247XFxuIGZvcihpbnQgX2lkeF8gPSAwOyBfaWR4XyA8IFBPSU5UX0xJR0hUX1NIQURPV01BUF9DT1VOVDsgX2lkeF8rKykge3tcXG4gbGlnaHRQb3NpdGlvbiA9IHBvaW50TGlnaHRQb3NpdGlvbltfaWR4X107XFxuIGRpcmVjdGlvbiA9IHBvc2l0aW9uIC0gbGlnaHRQb3NpdGlvbjtcXG4gc2hhZG93Q29udHJpYnNbX2lkeF9dID0gY29tcHV0ZVNoYWRvd0NvbnRyaWJPbW5pKHBvaW50TGlnaHRTaGFkb3dNYXBzW19pZHhfXSwgZGlyZWN0aW9uLCBwb2ludExpZ2h0UmFuZ2VbX2lkeF9dKTtcXG4gfX1cXG4gZm9yKGludCBfaWR4XyA9IFBPSU5UX0xJR0hUX1NIQURPV01BUF9DT1VOVDsgX2lkeF8gPCBQT0lOVF9MSUdIVF9DT1VOVDsgX2lkeF8rKykge3tcXG4gc2hhZG93Q29udHJpYnNbX2lkeF9dID0gMS4wO1xcbiB9fVxcbn1cXG4jZW5kaWZcXG4jZW5kaWZcXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2Uvc2hhZG93bWFwLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE0MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///140\n");

/***/ }),
/* 141 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"uniform samplerCube environmentMap;\\nvarying vec2 v_Texcoord;\\n#define TEXTURE_SIZE 16\\nmat3 front = mat3(\\n 1.0, 0.0, 0.0,\\n 0.0, 1.0, 0.0,\\n 0.0, 0.0, 1.0\\n);\\nmat3 back = mat3(\\n -1.0, 0.0, 0.0,\\n 0.0, 1.0, 0.0,\\n 0.0, 0.0, -1.0\\n);\\nmat3 left = mat3(\\n 0.0, 0.0, -1.0,\\n 0.0, 1.0, 0.0,\\n 1.0, 0.0, 0.0\\n);\\nmat3 right = mat3(\\n 0.0, 0.0, 1.0,\\n 0.0, 1.0, 0.0,\\n -1.0, 0.0, 0.0\\n);\\nmat3 up = mat3(\\n 1.0, 0.0, 0.0,\\n 0.0, 0.0, 1.0,\\n 0.0, -1.0, 0.0\\n);\\nmat3 down = mat3(\\n 1.0, 0.0, 0.0,\\n 0.0, 0.0, -1.0,\\n 0.0, 1.0, 0.0\\n);\\nfloat harmonics(vec3 normal){\\n int index = int(gl_FragCoord.x);\\n float x = normal.x;\\n float y = normal.y;\\n float z = normal.z;\\n if(index==0){\\n return 1.0;\\n }\\n else if(index==1){\\n return x;\\n }\\n else if(index==2){\\n return y;\\n }\\n else if(index==3){\\n return z;\\n }\\n else if(index==4){\\n return x*z;\\n }\\n else if(index==5){\\n return y*z;\\n }\\n else if(index==6){\\n return x*y;\\n }\\n else if(index==7){\\n return 3.0*z*z - 1.0;\\n }\\n else{\\n return x*x - y*y;\\n }\\n}\\nvec3 sampleSide(mat3 rot)\\n{\\n vec3 result = vec3(0.0);\\n float divider = 0.0;\\n for (int i = 0; i < TEXTURE_SIZE * TEXTURE_SIZE; i++) {\\n float x = mod(float(i), float(TEXTURE_SIZE));\\n float y = float(i / TEXTURE_SIZE);\\n vec2 sidecoord = ((vec2(x, y) + vec2(0.5, 0.5)) / vec2(TEXTURE_SIZE)) * 2.0 - 1.0;\\n vec3 normal = normalize(vec3(sidecoord, -1.0));\\n vec3 fetchNormal = rot * normal;\\n vec3 texel = textureCube(environmentMap, fetchNormal).rgb;\\n result += harmonics(fetchNormal) * texel * -normal.z;\\n divider += -normal.z;\\n }\\n return result / divider;\\n}\\nvoid main()\\n{\\n vec3 result = (\\n sampleSide(front) +\\n sampleSide(back) +\\n sampleSide(left) +\\n sampleSide(right) +\\n sampleSide(up) +\\n sampleSide(down)\\n ) / 6.0;\\n gl_FragColor = vec4(result, 1.0);\\n}\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvdXRpbC9zaGFkZXIvcHJvamVjdEVudk1hcC5nbHNsLmpzP2VjY2UiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJ1bmlmb3JtIHNhbXBsZXJDdWJlIGVudmlyb25tZW50TWFwO1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbiNkZWZpbmUgVEVYVFVSRV9TSVpFIDE2XFxubWF0MyBmcm9udCA9IG1hdDMoXFxuIDEuMCwgMC4wLCAwLjAsXFxuIDAuMCwgMS4wLCAwLjAsXFxuIDAuMCwgMC4wLCAxLjBcXG4pO1xcbm1hdDMgYmFjayA9IG1hdDMoXFxuIC0xLjAsIDAuMCwgMC4wLFxcbiAwLjAsIDEuMCwgMC4wLFxcbiAwLjAsIDAuMCwgLTEuMFxcbik7XFxubWF0MyBsZWZ0ID0gbWF0MyhcXG4gMC4wLCAwLjAsIC0xLjAsXFxuIDAuMCwgMS4wLCAwLjAsXFxuIDEuMCwgMC4wLCAwLjBcXG4pO1xcbm1hdDMgcmlnaHQgPSBtYXQzKFxcbiAwLjAsIDAuMCwgMS4wLFxcbiAwLjAsIDEuMCwgMC4wLFxcbiAtMS4wLCAwLjAsIDAuMFxcbik7XFxubWF0MyB1cCA9IG1hdDMoXFxuIDEuMCwgMC4wLCAwLjAsXFxuIDAuMCwgMC4wLCAxLjAsXFxuIDAuMCwgLTEuMCwgMC4wXFxuKTtcXG5tYXQzIGRvd24gPSBtYXQzKFxcbiAxLjAsIDAuMCwgMC4wLFxcbiAwLjAsIDAuMCwgLTEuMCxcXG4gMC4wLCAxLjAsIDAuMFxcbik7XFxuZmxvYXQgaGFybW9uaWNzKHZlYzMgbm9ybWFsKXtcXG4gaW50IGluZGV4ID0gaW50KGdsX0ZyYWdDb29yZC54KTtcXG4gZmxvYXQgeCA9IG5vcm1hbC54O1xcbiBmbG9hdCB5ID0gbm9ybWFsLnk7XFxuIGZsb2F0IHogPSBub3JtYWwuejtcXG4gaWYoaW5kZXg9PTApe1xcbiByZXR1cm4gMS4wO1xcbiB9XFxuIGVsc2UgaWYoaW5kZXg9PTEpe1xcbiByZXR1cm4geDtcXG4gfVxcbiBlbHNlIGlmKGluZGV4PT0yKXtcXG4gcmV0dXJuIHk7XFxuIH1cXG4gZWxzZSBpZihpbmRleD09Myl7XFxuIHJldHVybiB6O1xcbiB9XFxuIGVsc2UgaWYoaW5kZXg9PTQpe1xcbiByZXR1cm4geCp6O1xcbiB9XFxuIGVsc2UgaWYoaW5kZXg9PTUpe1xcbiByZXR1cm4geSp6O1xcbiB9XFxuIGVsc2UgaWYoaW5kZXg9PTYpe1xcbiByZXR1cm4geCp5O1xcbiB9XFxuIGVsc2UgaWYoaW5kZXg9PTcpe1xcbiByZXR1cm4gMy4wKnoqeiAtIDEuMDtcXG4gfVxcbiBlbHNle1xcbiByZXR1cm4geCp4IC0geSp5O1xcbiB9XFxufVxcbnZlYzMgc2FtcGxlU2lkZShtYXQzIHJvdClcXG57XFxuIHZlYzMgcmVzdWx0ID0gdmVjMygwLjApO1xcbiBmbG9hdCBkaXZpZGVyID0gMC4wO1xcbiBmb3IgKGludCBpID0gMDsgaSA8IFRFWFRVUkVfU0laRSAqIFRFWFRVUkVfU0laRTsgaSsrKSB7XFxuIGZsb2F0IHggPSBtb2QoZmxvYXQoaSksIGZsb2F0KFRFWFRVUkVfU0laRSkpO1xcbiBmbG9hdCB5ID0gZmxvYXQoaSAvIFRFWFRVUkVfU0laRSk7XFxuIHZlYzIgc2lkZWNvb3JkID0gKCh2ZWMyKHgsIHkpICsgdmVjMigwLjUsIDAuNSkpIC8gdmVjMihURVhUVVJFX1NJWkUpKSAqIDIuMCAtIDEuMDtcXG4gdmVjMyBub3JtYWwgPSBub3JtYWxpemUodmVjMyhzaWRlY29vcmQsIC0xLjApKTtcXG4gdmVjMyBmZXRjaE5vcm1hbCA9IHJvdCAqIG5vcm1hbDtcXG4gdmVjMyB0ZXhlbCA9IHRleHR1cmVDdWJlKGVudmlyb25tZW50TWFwLCBmZXRjaE5vcm1hbCkucmdiO1xcbiByZXN1bHQgKz0gaGFybW9uaWNzKGZldGNoTm9ybWFsKSAqIHRleGVsICogLW5vcm1hbC56O1xcbiBkaXZpZGVyICs9IC1ub3JtYWwuejtcXG4gfVxcbiByZXR1cm4gcmVzdWx0IC8gZGl2aWRlcjtcXG59XFxudm9pZCBtYWluKClcXG57XFxuIHZlYzMgcmVzdWx0ID0gKFxcbiBzYW1wbGVTaWRlKGZyb250KSArXFxuIHNhbXBsZVNpZGUoYmFjaykgK1xcbiBzYW1wbGVTaWRlKGxlZnQpICtcXG4gc2FtcGxlU2lkZShyaWdodCkgK1xcbiBzYW1wbGVTaWRlKHVwKSArXFxuIHNhbXBsZVNpZGUoZG93bilcXG4gKSAvIDYuMDtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNChyZXN1bHQsIDEuMCk7XFxufVwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy91dGlsL3NoYWRlci9wcm9qZWN0RW52TWFwLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///141\n");

/***/ }),
/* 142 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Task__ = __webpack_require__(101);\n\n\n\n/**\n * @constructor\n * @alias clay.async.TaskGroup\n * @extends clay.async.Task\n */\nvar TaskGroup = function () {\n\n    __WEBPACK_IMPORTED_MODULE_1__Task__[\"a\" /* default */].apply(this, arguments);\n\n    this._tasks = [];\n\n    this._fulfilledNumber = 0;\n\n    this._rejectedNumber = 0;\n};\n\nvar Ctor = function (){};\nCtor.prototype = __WEBPACK_IMPORTED_MODULE_1__Task__[\"a\" /* default */].prototype;\nTaskGroup.prototype = new Ctor();\n\nTaskGroup.prototype.constructor = TaskGroup;\n\n/**\n * Wait for all given tasks successed, task can also be any notifier object which will trigger success and error events. Like {@link clay.Texture2D}, {@link clay.TextureCube}, {@link clay.loader.GLTF}.\n * @param  {Array.<clay.async.Task>} tasks\n * @chainable\n * @example\n *     // Load texture list\n *     var list = ['a.jpg', 'b.jpg', 'c.jpg']\n *     var textures = list.map(function (src) {\n *         var texture = new clay.Texture2D();\n *         texture.load(src);\n *         return texture;\n *     });\n *     var taskGroup = new clay.async.TaskGroup();\n *     taskGroup.all(textures).success(function () {\n *         // Do some thing after all textures loaded\n *     });\n */\nTaskGroup.prototype.all = function (tasks) {\n    var count = 0;\n    var self = this;\n    var data = [];\n    this._tasks = tasks;\n    this._fulfilledNumber = 0;\n    this._rejectedNumber = 0;\n\n    __WEBPACK_IMPORTED_MODULE_0__core_util__[\"a\" /* default */].each(tasks, function (task, idx) {\n        if (!task || !task.once) {\n            return;\n        }\n        count++;\n        task.once('success', function (res) {\n            count--;\n\n            self._fulfilledNumber++;\n            // TODO\n            // Some tasks like texture, loader are not inherited from task\n            // We need to set the states here\n            task._fulfilled = true;\n            task._rejected = false;\n\n            data[idx] = res;\n            if (count === 0) {\n                self.resolve(data);\n            }\n        });\n        task.once('error', function () {\n\n            self._rejectedNumber ++;\n\n            task._fulfilled = false;\n            task._rejected = true;\n\n            self.reject(task);\n        });\n    });\n    if (count === 0) {\n        setTimeout(function () {\n            self.resolve(data);\n        });\n        return this;\n    }\n    return this;\n};\n/**\n * Wait for all given tasks finished, either successed or failed\n * @param  {Array.<clay.async.Task>} tasks\n * @return {clay.async.TaskGroup}\n */\nTaskGroup.prototype.allSettled = function (tasks) {\n    var count = 0;\n    var self = this;\n    var data = [];\n    if (tasks.length === 0) {\n        setTimeout(function () {\n            self.trigger('success', data);\n        });\n        return this;\n    }\n    this._tasks = tasks;\n\n    __WEBPACK_IMPORTED_MODULE_0__core_util__[\"a\" /* default */].each(tasks, function (task, idx) {\n        if (!task || !task.once) {\n            return;\n        }\n        count++;\n        task.once('success', function (res) {\n            count--;\n\n            self._fulfilledNumber++;\n\n            task._fulfilled = true;\n            task._rejected = false;\n\n            data[idx] = res;\n            if (count === 0) {\n                self.resolve(data);\n            }\n        });\n        task.once('error', function (err) {\n            count--;\n\n            self._rejectedNumber++;\n\n            task._fulfilled = false;\n            task._rejected = true;\n\n            // TODO\n            data[idx] = null;\n            if (count === 0) {\n                self.resolve(data);\n            }\n        });\n    });\n    return this;\n};\n/**\n * Get successed sub tasks number, recursive can be true if sub task is also a TaskGroup.\n * @param  {boolean} [recursive]\n * @return {number}\n */\nTaskGroup.prototype.getFulfilledNumber = function (recursive) {\n    if (recursive) {\n        var nFulfilled = 0;\n        for (var i = 0; i < this._tasks.length; i++) {\n            var task = this._tasks[i];\n            if (task instanceof TaskGroup) {\n                nFulfilled += task.getFulfilledNumber(recursive);\n            } else if(task._fulfilled) {\n                nFulfilled += 1;\n            }\n        }\n        return nFulfilled;\n    } else {\n        return this._fulfilledNumber;\n    }\n};\n\n/**\n * Get failed sub tasks number, recursive can be true if sub task is also a TaskGroup.\n * @param  {boolean} [recursive]\n * @return {number}\n */\nTaskGroup.prototype.getRejectedNumber = function (recursive) {\n    if (recursive) {\n        var nRejected = 0;\n        for (var i = 0; i < this._tasks.length; i++) {\n            var task = this._tasks[i];\n            if (task instanceof TaskGroup) {\n                nRejected += task.getRejectedNumber(recursive);\n            } else if(task._rejected) {\n                nRejected += 1;\n            }\n        }\n        return nRejected;\n    } else {\n        return this._rejectedNumber;\n    }\n};\n\n/**\n * Get finished sub tasks number, recursive can be true if sub task is also a TaskGroup.\n * @param  {boolean} [recursive]\n * @return {number}\n */\nTaskGroup.prototype.getSettledNumber = function (recursive) {\n\n    if (recursive) {\n        var nSettled = 0;\n        for (var i = 0; i < this._tasks.length; i++) {\n            var task = this._tasks[i];\n            if (task instanceof TaskGroup) {\n                nSettled += task.getSettledNumber(recursive);\n            } else if(task._rejected || task._fulfilled) {\n                nSettled += 1;\n            }\n        }\n        return nSettled;\n    } else {\n        return this._fulfilledNumber + this._rejectedNumber;\n    }\n};\n\n/**\n * Get all sub tasks number, recursive can be true if sub task is also a TaskGroup.\n * @param  {boolean} [recursive]\n * @return {number}\n */\nTaskGroup.prototype.getTaskNumber = function (recursive) {\n    if (recursive) {\n        var nTask = 0;\n        for (var i = 0; i < this._tasks.length; i++) {\n            var task = this._tasks[i];\n            if (task instanceof TaskGroup) {\n                nTask += task.getTaskNumber(recursive);\n            } else {\n                nTask += 1;\n            }\n        }\n        return nTask;\n    } else {\n        return this._tasks.length;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TaskGroup);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvYXN5bmMvVGFza0dyb3VwLmpzP2JmOTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHV0aWwgZnJvbSAnLi4vY29yZS91dGlsJztcbmltcG9ydCBUYXNrIGZyb20gJy4vVGFzayc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5hc3luYy5UYXNrR3JvdXBcbiAqIEBleHRlbmRzIGNsYXkuYXN5bmMuVGFza1xuICovXG52YXIgVGFza0dyb3VwID0gZnVuY3Rpb24gKCkge1xuXG4gICAgVGFzay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdGhpcy5fdGFza3MgPSBbXTtcblxuICAgIHRoaXMuX2Z1bGZpbGxlZE51bWJlciA9IDA7XG5cbiAgICB0aGlzLl9yZWplY3RlZE51bWJlciA9IDA7XG59O1xuXG52YXIgQ3RvciA9IGZ1bmN0aW9uICgpe307XG5DdG9yLnByb3RvdHlwZSA9IFRhc2sucHJvdG90eXBlO1xuVGFza0dyb3VwLnByb3RvdHlwZSA9IG5ldyBDdG9yKCk7XG5cblRhc2tHcm91cC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUYXNrR3JvdXA7XG5cbi8qKlxuICogV2FpdCBmb3IgYWxsIGdpdmVuIHRhc2tzIHN1Y2Nlc3NlZCwgdGFzayBjYW4gYWxzbyBiZSBhbnkgbm90aWZpZXIgb2JqZWN0IHdoaWNoIHdpbGwgdHJpZ2dlciBzdWNjZXNzIGFuZCBlcnJvciBldmVudHMuIExpa2Uge0BsaW5rIGNsYXkuVGV4dHVyZTJEfSwge0BsaW5rIGNsYXkuVGV4dHVyZUN1YmV9LCB7QGxpbmsgY2xheS5sb2FkZXIuR0xURn0uXG4gKiBAcGFyYW0gIHtBcnJheS48Y2xheS5hc3luYy5UYXNrPn0gdGFza3NcbiAqIEBjaGFpbmFibGVcbiAqIEBleGFtcGxlXG4gKiAgICAgLy8gTG9hZCB0ZXh0dXJlIGxpc3RcbiAqICAgICB2YXIgbGlzdCA9IFsnYS5qcGcnLCAnYi5qcGcnLCAnYy5qcGcnXVxuICogICAgIHZhciB0ZXh0dXJlcyA9IGxpc3QubWFwKGZ1bmN0aW9uIChzcmMpIHtcbiAqICAgICAgICAgdmFyIHRleHR1cmUgPSBuZXcgY2xheS5UZXh0dXJlMkQoKTtcbiAqICAgICAgICAgdGV4dHVyZS5sb2FkKHNyYyk7XG4gKiAgICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICogICAgIH0pO1xuICogICAgIHZhciB0YXNrR3JvdXAgPSBuZXcgY2xheS5hc3luYy5UYXNrR3JvdXAoKTtcbiAqICAgICB0YXNrR3JvdXAuYWxsKHRleHR1cmVzKS5zdWNjZXNzKGZ1bmN0aW9uICgpIHtcbiAqICAgICAgICAgLy8gRG8gc29tZSB0aGluZyBhZnRlciBhbGwgdGV4dHVyZXMgbG9hZGVkXG4gKiAgICAgfSk7XG4gKi9cblRhc2tHcm91cC5wcm90b3R5cGUuYWxsID0gZnVuY3Rpb24gKHRhc2tzKSB7XG4gICAgdmFyIGNvdW50ID0gMDtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGRhdGEgPSBbXTtcbiAgICB0aGlzLl90YXNrcyA9IHRhc2tzO1xuICAgIHRoaXMuX2Z1bGZpbGxlZE51bWJlciA9IDA7XG4gICAgdGhpcy5fcmVqZWN0ZWROdW1iZXIgPSAwO1xuXG4gICAgdXRpbC5lYWNoKHRhc2tzLCBmdW5jdGlvbiAodGFzaywgaWR4KSB7XG4gICAgICAgIGlmICghdGFzayB8fCAhdGFzay5vbmNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY291bnQrKztcbiAgICAgICAgdGFzay5vbmNlKCdzdWNjZXNzJywgZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgY291bnQtLTtcblxuICAgICAgICAgICAgc2VsZi5fZnVsZmlsbGVkTnVtYmVyKys7XG4gICAgICAgICAgICAvLyBUT0RPXG4gICAgICAgICAgICAvLyBTb21lIHRhc2tzIGxpa2UgdGV4dHVyZSwgbG9hZGVyIGFyZSBub3QgaW5oZXJpdGVkIGZyb20gdGFza1xuICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBzZXQgdGhlIHN0YXRlcyBoZXJlXG4gICAgICAgICAgICB0YXNrLl9mdWxmaWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGFzay5fcmVqZWN0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgZGF0YVtpZHhdID0gcmVzO1xuICAgICAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGFzay5vbmNlKCdlcnJvcicsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgc2VsZi5fcmVqZWN0ZWROdW1iZXIgKys7XG5cbiAgICAgICAgICAgIHRhc2suX2Z1bGZpbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGFzay5fcmVqZWN0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICBzZWxmLnJlamVjdCh0YXNrKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5yZXNvbHZlKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcbi8qKlxuICogV2FpdCBmb3IgYWxsIGdpdmVuIHRhc2tzIGZpbmlzaGVkLCBlaXRoZXIgc3VjY2Vzc2VkIG9yIGZhaWxlZFxuICogQHBhcmFtICB7QXJyYXkuPGNsYXkuYXN5bmMuVGFzaz59IHRhc2tzXG4gKiBAcmV0dXJuIHtjbGF5LmFzeW5jLlRhc2tHcm91cH1cbiAqL1xuVGFza0dyb3VwLnByb3RvdHlwZS5hbGxTZXR0bGVkID0gZnVuY3Rpb24gKHRhc2tzKSB7XG4gICAgdmFyIGNvdW50ID0gMDtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGRhdGEgPSBbXTtcbiAgICBpZiAodGFza3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdzdWNjZXNzJywgZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgdGhpcy5fdGFza3MgPSB0YXNrcztcblxuICAgIHV0aWwuZWFjaCh0YXNrcywgZnVuY3Rpb24gKHRhc2ssIGlkeCkge1xuICAgICAgICBpZiAoIXRhc2sgfHwgIXRhc2sub25jZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvdW50Kys7XG4gICAgICAgIHRhc2sub25jZSgnc3VjY2VzcycsIGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGNvdW50LS07XG5cbiAgICAgICAgICAgIHNlbGYuX2Z1bGZpbGxlZE51bWJlcisrO1xuXG4gICAgICAgICAgICB0YXNrLl9mdWxmaWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGFzay5fcmVqZWN0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgZGF0YVtpZHhdID0gcmVzO1xuICAgICAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGFzay5vbmNlKCdlcnJvcicsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIGNvdW50LS07XG5cbiAgICAgICAgICAgIHNlbGYuX3JlamVjdGVkTnVtYmVyKys7XG5cbiAgICAgICAgICAgIHRhc2suX2Z1bGZpbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGFzay5fcmVqZWN0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBUT0RPXG4gICAgICAgICAgICBkYXRhW2lkeF0gPSBudWxsO1xuICAgICAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbn07XG4vKipcbiAqIEdldCBzdWNjZXNzZWQgc3ViIHRhc2tzIG51bWJlciwgcmVjdXJzaXZlIGNhbiBiZSB0cnVlIGlmIHN1YiB0YXNrIGlzIGFsc28gYSBUYXNrR3JvdXAuXG4gKiBAcGFyYW0gIHtib29sZWFufSBbcmVjdXJzaXZlXVxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5UYXNrR3JvdXAucHJvdG90eXBlLmdldEZ1bGZpbGxlZE51bWJlciA9IGZ1bmN0aW9uIChyZWN1cnNpdmUpIHtcbiAgICBpZiAocmVjdXJzaXZlKSB7XG4gICAgICAgIHZhciBuRnVsZmlsbGVkID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl90YXNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0aGlzLl90YXNrc1tpXTtcbiAgICAgICAgICAgIGlmICh0YXNrIGluc3RhbmNlb2YgVGFza0dyb3VwKSB7XG4gICAgICAgICAgICAgICAgbkZ1bGZpbGxlZCArPSB0YXNrLmdldEZ1bGZpbGxlZE51bWJlcihyZWN1cnNpdmUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHRhc2suX2Z1bGZpbGxlZCkge1xuICAgICAgICAgICAgICAgIG5GdWxmaWxsZWQgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbkZ1bGZpbGxlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5fZnVsZmlsbGVkTnVtYmVyO1xuICAgIH1cbn07XG5cbi8qKlxuICogR2V0IGZhaWxlZCBzdWIgdGFza3MgbnVtYmVyLCByZWN1cnNpdmUgY2FuIGJlIHRydWUgaWYgc3ViIHRhc2sgaXMgYWxzbyBhIFRhc2tHcm91cC5cbiAqIEBwYXJhbSAge2Jvb2xlYW59IFtyZWN1cnNpdmVdXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblRhc2tHcm91cC5wcm90b3R5cGUuZ2V0UmVqZWN0ZWROdW1iZXIgPSBmdW5jdGlvbiAocmVjdXJzaXZlKSB7XG4gICAgaWYgKHJlY3Vyc2l2ZSkge1xuICAgICAgICB2YXIgblJlamVjdGVkID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl90YXNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0aGlzLl90YXNrc1tpXTtcbiAgICAgICAgICAgIGlmICh0YXNrIGluc3RhbmNlb2YgVGFza0dyb3VwKSB7XG4gICAgICAgICAgICAgICAgblJlamVjdGVkICs9IHRhc2suZ2V0UmVqZWN0ZWROdW1iZXIocmVjdXJzaXZlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih0YXNrLl9yZWplY3RlZCkge1xuICAgICAgICAgICAgICAgIG5SZWplY3RlZCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuUmVqZWN0ZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlamVjdGVkTnVtYmVyO1xuICAgIH1cbn07XG5cbi8qKlxuICogR2V0IGZpbmlzaGVkIHN1YiB0YXNrcyBudW1iZXIsIHJlY3Vyc2l2ZSBjYW4gYmUgdHJ1ZSBpZiBzdWIgdGFzayBpcyBhbHNvIGEgVGFza0dyb3VwLlxuICogQHBhcmFtICB7Ym9vbGVhbn0gW3JlY3Vyc2l2ZV1cbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVGFza0dyb3VwLnByb3RvdHlwZS5nZXRTZXR0bGVkTnVtYmVyID0gZnVuY3Rpb24gKHJlY3Vyc2l2ZSkge1xuXG4gICAgaWYgKHJlY3Vyc2l2ZSkge1xuICAgICAgICB2YXIgblNldHRsZWQgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3Rhc2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRoaXMuX3Rhc2tzW2ldO1xuICAgICAgICAgICAgaWYgKHRhc2sgaW5zdGFuY2VvZiBUYXNrR3JvdXApIHtcbiAgICAgICAgICAgICAgICBuU2V0dGxlZCArPSB0YXNrLmdldFNldHRsZWROdW1iZXIocmVjdXJzaXZlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih0YXNrLl9yZWplY3RlZCB8fCB0YXNrLl9mdWxmaWxsZWQpIHtcbiAgICAgICAgICAgICAgICBuU2V0dGxlZCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuU2V0dGxlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5fZnVsZmlsbGVkTnVtYmVyICsgdGhpcy5fcmVqZWN0ZWROdW1iZXI7XG4gICAgfVxufTtcblxuLyoqXG4gKiBHZXQgYWxsIHN1YiB0YXNrcyBudW1iZXIsIHJlY3Vyc2l2ZSBjYW4gYmUgdHJ1ZSBpZiBzdWIgdGFzayBpcyBhbHNvIGEgVGFza0dyb3VwLlxuICogQHBhcmFtICB7Ym9vbGVhbn0gW3JlY3Vyc2l2ZV1cbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVGFza0dyb3VwLnByb3RvdHlwZS5nZXRUYXNrTnVtYmVyID0gZnVuY3Rpb24gKHJlY3Vyc2l2ZSkge1xuICAgIGlmIChyZWN1cnNpdmUpIHtcbiAgICAgICAgdmFyIG5UYXNrID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl90YXNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0aGlzLl90YXNrc1tpXTtcbiAgICAgICAgICAgIGlmICh0YXNrIGluc3RhbmNlb2YgVGFza0dyb3VwKSB7XG4gICAgICAgICAgICAgICAgblRhc2sgKz0gdGFzay5nZXRUYXNrTnVtYmVyKHJlY3Vyc2l2ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5UYXNrICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5UYXNrO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrcy5sZW5ndGg7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgVGFza0dyb3VwO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9hc3luYy9UYXNrR3JvdXAuanNcbi8vIG1vZHVsZSBpZCA9IDE0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///142\n");

/***/ }),
/* 143 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__createCompositor__ = __webpack_require__(62);\n// DEPRECATED\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0__createCompositor__[\"a\" /* default */]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvY29tcG9zaXRvci9jcmVhdGVDb21wb3NpdG9yLmpzP2MxNjUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gREVQUkVDQVRFRFxuaW1wb3J0IGNyZWF0ZUNvbXBvc2l0b3IgZnJvbSAnLi4vY3JlYXRlQ29tcG9zaXRvcic7XG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb3NpdG9yO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvY29tcG9zaXRvci9jcmVhdGVDb21wb3NpdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///143\n");

/***/ }),
/* 144 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.coloradjust\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform float brightness : 0.0;\\nuniform float contrast : 1.0;\\nuniform float exposure : 0.0;\\nuniform float gamma : 1.0;\\nuniform float saturation : 1.0;\\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\\nvoid main()\\n{\\n vec4 tex = texture2D( texture, v_Texcoord);\\n vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);\\n color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\\n color = clamp( color * pow(2.0, exposure), 0.0, 1.0);\\n color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);\\n float luminance = dot( color, w );\\n color = mix(vec3(luminance), color, saturation);\\n gl_FragColor = vec4(color, tex.a);\\n}\\n@end\\n@export clay.compositor.brightness\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform float brightness : 0.0;\\nvoid main()\\n{\\n vec4 tex = texture2D( texture, v_Texcoord);\\n vec3 color = tex.rgb + vec3(brightness);\\n gl_FragColor = vec4(color, tex.a);\\n}\\n@end\\n@export clay.compositor.contrast\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform float contrast : 1.0;\\nvoid main()\\n{\\n vec4 tex = texture2D( texture, v_Texcoord);\\n vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);\\n gl_FragColor = vec4(color, tex.a);\\n}\\n@end\\n@export clay.compositor.exposure\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform float exposure : 0.0;\\nvoid main()\\n{\\n vec4 tex = texture2D(texture, v_Texcoord);\\n vec3 color = tex.rgb * pow(2.0, exposure);\\n gl_FragColor = vec4(color, tex.a);\\n}\\n@end\\n@export clay.compositor.gamma\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform float gamma : 1.0;\\nvoid main()\\n{\\n vec4 tex = texture2D(texture, v_Texcoord);\\n vec3 color = pow(tex.rgb, vec3(gamma));\\n gl_FragColor = vec4(color, tex.a);\\n}\\n@end\\n@export clay.compositor.saturation\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform float saturation : 1.0;\\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\\nvoid main()\\n{\\n vec4 tex = texture2D(texture, v_Texcoord);\\n vec3 color = tex.rgb;\\n float luminance = dot(color, w);\\n color = mix(vec3(luminance), color, saturation);\\n gl_FragColor = vec4(color, tex.a);\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2NvbG9yYWRqdXN0Lmdsc2wuanM/MmUwZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5jb21wb3NpdG9yLmNvbG9yYWRqdXN0XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcXG51bmlmb3JtIGZsb2F0IGJyaWdodG5lc3MgOiAwLjA7XFxudW5pZm9ybSBmbG9hdCBjb250cmFzdCA6IDEuMDtcXG51bmlmb3JtIGZsb2F0IGV4cG9zdXJlIDogMC4wO1xcbnVuaWZvcm0gZmxvYXQgZ2FtbWEgOiAxLjA7XFxudW5pZm9ybSBmbG9hdCBzYXR1cmF0aW9uIDogMS4wO1xcbmNvbnN0IHZlYzMgdyA9IHZlYzMoMC4yMTI1LCAwLjcxNTQsIDAuMDcyMSk7XFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgdGV4ID0gdGV4dHVyZTJEKCB0ZXh0dXJlLCB2X1RleGNvb3JkKTtcXG4gdmVjMyBjb2xvciA9IGNsYW1wKHRleC5yZ2IgKyB2ZWMzKGJyaWdodG5lc3MpLCAwLjAsIDEuMCk7XFxuIGNvbG9yID0gY2xhbXAoIChjb2xvci12ZWMzKDAuNSkpKmNvbnRyYXN0K3ZlYzMoMC41KSwgMC4wLCAxLjApO1xcbiBjb2xvciA9IGNsYW1wKCBjb2xvciAqIHBvdygyLjAsIGV4cG9zdXJlKSwgMC4wLCAxLjApO1xcbiBjb2xvciA9IGNsYW1wKCBwb3coY29sb3IsIHZlYzMoZ2FtbWEpKSwgMC4wLCAxLjApO1xcbiBmbG9hdCBsdW1pbmFuY2UgPSBkb3QoIGNvbG9yLCB3ICk7XFxuIGNvbG9yID0gbWl4KHZlYzMobHVtaW5hbmNlKSwgY29sb3IsIHNhdHVyYXRpb24pO1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KGNvbG9yLCB0ZXguYSk7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuY29tcG9zaXRvci5icmlnaHRuZXNzXFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcXG51bmlmb3JtIGZsb2F0IGJyaWdodG5lc3MgOiAwLjA7XFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgdGV4ID0gdGV4dHVyZTJEKCB0ZXh0dXJlLCB2X1RleGNvb3JkKTtcXG4gdmVjMyBjb2xvciA9IHRleC5yZ2IgKyB2ZWMzKGJyaWdodG5lc3MpO1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KGNvbG9yLCB0ZXguYSk7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuY29tcG9zaXRvci5jb250cmFzdFxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XFxudW5pZm9ybSBmbG9hdCBjb250cmFzdCA6IDEuMDtcXG52b2lkIG1haW4oKVxcbntcXG4gdmVjNCB0ZXggPSB0ZXh0dXJlMkQoIHRleHR1cmUsIHZfVGV4Y29vcmQpO1xcbiB2ZWMzIGNvbG9yID0gKHRleC5yZ2ItdmVjMygwLjUpKSpjb250cmFzdCt2ZWMzKDAuNSk7XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsIHRleC5hKTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5jb21wb3NpdG9yLmV4cG9zdXJlXFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcXG51bmlmb3JtIGZsb2F0IGV4cG9zdXJlIDogMC4wO1xcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWM0IHRleCA9IHRleHR1cmUyRCh0ZXh0dXJlLCB2X1RleGNvb3JkKTtcXG4gdmVjMyBjb2xvciA9IHRleC5yZ2IgKiBwb3coMi4wLCBleHBvc3VyZSk7XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsIHRleC5hKTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5jb21wb3NpdG9yLmdhbW1hXFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcXG51bmlmb3JtIGZsb2F0IGdhbW1hIDogMS4wO1xcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWM0IHRleCA9IHRleHR1cmUyRCh0ZXh0dXJlLCB2X1RleGNvb3JkKTtcXG4gdmVjMyBjb2xvciA9IHBvdyh0ZXgucmdiLCB2ZWMzKGdhbW1hKSk7XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsIHRleC5hKTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5jb21wb3NpdG9yLnNhdHVyYXRpb25cXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgc2F0dXJhdGlvbiA6IDEuMDtcXG5jb25zdCB2ZWMzIHcgPSB2ZWMzKDAuMjEyNSwgMC43MTU0LCAwLjA3MjEpO1xcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWM0IHRleCA9IHRleHR1cmUyRCh0ZXh0dXJlLCB2X1RleGNvb3JkKTtcXG4gdmVjMyBjb2xvciA9IHRleC5yZ2I7XFxuIGZsb2F0IGx1bWluYW5jZSA9IGRvdChjb2xvciwgdyk7XFxuIGNvbG9yID0gbWl4KHZlYzMobHVtaW5hbmNlKSwgY29sb3IsIHNhdHVyYXRpb24pO1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KGNvbG9yLCB0ZXguYSk7XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2NvbG9yYWRqdXN0Lmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE0NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///144\n");

/***/ }),
/* 145 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.kernel.gaussian_9\\nfloat gaussianKernel[9];\\ngaussianKernel[0] = 0.07;\\ngaussianKernel[1] = 0.09;\\ngaussianKernel[2] = 0.12;\\ngaussianKernel[3] = 0.14;\\ngaussianKernel[4] = 0.16;\\ngaussianKernel[5] = 0.14;\\ngaussianKernel[6] = 0.12;\\ngaussianKernel[7] = 0.09;\\ngaussianKernel[8] = 0.07;\\n@end\\n@export clay.compositor.kernel.gaussian_13\\nfloat gaussianKernel[13];\\ngaussianKernel[0] = 0.02;\\ngaussianKernel[1] = 0.03;\\ngaussianKernel[2] = 0.06;\\ngaussianKernel[3] = 0.08;\\ngaussianKernel[4] = 0.11;\\ngaussianKernel[5] = 0.13;\\ngaussianKernel[6] = 0.14;\\ngaussianKernel[7] = 0.13;\\ngaussianKernel[8] = 0.11;\\ngaussianKernel[9] = 0.08;\\ngaussianKernel[10] = 0.06;\\ngaussianKernel[11] = 0.03;\\ngaussianKernel[12] = 0.02;\\n@end\\n@export clay.compositor.gaussian_blur\\n#define SHADER_NAME gaussian_blur\\nuniform sampler2D texture;varying vec2 v_Texcoord;\\nuniform float blurSize : 2.0;\\nuniform vec2 textureSize : [512.0, 512.0];\\nuniform float blurDir : 0.0;\\n@import clay.util.rgbm\\n@import clay.util.clamp_sample\\nvoid main (void)\\n{\\n @import clay.compositor.kernel.gaussian_9\\n vec2 off = blurSize / textureSize;\\n off *= vec2(1.0 - blurDir, blurDir);\\n vec4 sum = vec4(0.0);\\n float weightAll = 0.0;\\n for (int i = 0; i < 9; i++) {\\n float w = gaussianKernel[i];\\n vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));\\n sum += texel * w;\\n weightAll += w;\\n }\\n gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));\\n}\\n@end\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2JsdXIuZ2xzbC5qcz8wNTcwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LmNvbXBvc2l0b3Iua2VybmVsLmdhdXNzaWFuXzlcXG5mbG9hdCBnYXVzc2lhbktlcm5lbFs5XTtcXG5nYXVzc2lhbktlcm5lbFswXSA9IDAuMDc7XFxuZ2F1c3NpYW5LZXJuZWxbMV0gPSAwLjA5O1xcbmdhdXNzaWFuS2VybmVsWzJdID0gMC4xMjtcXG5nYXVzc2lhbktlcm5lbFszXSA9IDAuMTQ7XFxuZ2F1c3NpYW5LZXJuZWxbNF0gPSAwLjE2O1xcbmdhdXNzaWFuS2VybmVsWzVdID0gMC4xNDtcXG5nYXVzc2lhbktlcm5lbFs2XSA9IDAuMTI7XFxuZ2F1c3NpYW5LZXJuZWxbN10gPSAwLjA5O1xcbmdhdXNzaWFuS2VybmVsWzhdID0gMC4wNztcXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmNvbXBvc2l0b3Iua2VybmVsLmdhdXNzaWFuXzEzXFxuZmxvYXQgZ2F1c3NpYW5LZXJuZWxbMTNdO1xcbmdhdXNzaWFuS2VybmVsWzBdID0gMC4wMjtcXG5nYXVzc2lhbktlcm5lbFsxXSA9IDAuMDM7XFxuZ2F1c3NpYW5LZXJuZWxbMl0gPSAwLjA2O1xcbmdhdXNzaWFuS2VybmVsWzNdID0gMC4wODtcXG5nYXVzc2lhbktlcm5lbFs0XSA9IDAuMTE7XFxuZ2F1c3NpYW5LZXJuZWxbNV0gPSAwLjEzO1xcbmdhdXNzaWFuS2VybmVsWzZdID0gMC4xNDtcXG5nYXVzc2lhbktlcm5lbFs3XSA9IDAuMTM7XFxuZ2F1c3NpYW5LZXJuZWxbOF0gPSAwLjExO1xcbmdhdXNzaWFuS2VybmVsWzldID0gMC4wODtcXG5nYXVzc2lhbktlcm5lbFsxMF0gPSAwLjA2O1xcbmdhdXNzaWFuS2VybmVsWzExXSA9IDAuMDM7XFxuZ2F1c3NpYW5LZXJuZWxbMTJdID0gMC4wMjtcXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmNvbXBvc2l0b3IuZ2F1c3NpYW5fYmx1clxcbiNkZWZpbmUgU0hBREVSX05BTUUgZ2F1c3NpYW5fYmx1clxcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7dmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudW5pZm9ybSBmbG9hdCBibHVyU2l6ZSA6IDIuMDtcXG51bmlmb3JtIHZlYzIgdGV4dHVyZVNpemUgOiBbNTEyLjAsIDUxMi4wXTtcXG51bmlmb3JtIGZsb2F0IGJsdXJEaXIgOiAwLjA7XFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbkBpbXBvcnQgY2xheS51dGlsLmNsYW1wX3NhbXBsZVxcbnZvaWQgbWFpbiAodm9pZClcXG57XFxuIEBpbXBvcnQgY2xheS5jb21wb3NpdG9yLmtlcm5lbC5nYXVzc2lhbl85XFxuIHZlYzIgb2ZmID0gYmx1clNpemUgLyB0ZXh0dXJlU2l6ZTtcXG4gb2ZmICo9IHZlYzIoMS4wIC0gYmx1ckRpciwgYmx1ckRpcik7XFxuIHZlYzQgc3VtID0gdmVjNCgwLjApO1xcbiBmbG9hdCB3ZWlnaHRBbGwgPSAwLjA7XFxuIGZvciAoaW50IGkgPSAwOyBpIDwgOTsgaSsrKSB7XFxuIGZsb2F0IHcgPSBnYXVzc2lhbktlcm5lbFtpXTtcXG4gdmVjNCB0ZXhlbCA9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkICsgZmxvYXQoaSAtIDQpICogb2ZmKSk7XFxuIHN1bSArPSB0ZXhlbCAqIHc7XFxuIHdlaWdodEFsbCArPSB3O1xcbiB9XFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUihzdW0gLyBtYXgod2VpZ2h0QWxsLCAwLjAxKSk7XFxufVxcbkBlbmRcXG5cIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2JsdXIuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTQ1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///145\n");

/***/ }),
/* 146 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.hdr.log_lum\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));\\n float luminance = dot(tex.rgb, w);\\n luminance = log(luminance + 0.001);\\n gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));\\n}\\n@end\\n@export clay.compositor.hdr.lum_adaption\\nvarying vec2 v_Texcoord;\\nuniform sampler2D adaptedLum;\\nuniform sampler2D currentLum;\\nuniform float frameTime : 0.02;\\n@import clay.util.rgbm\\nvoid main()\\n{\\n float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;\\n float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);\\n fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));\\n gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));\\n}\\n@end\\n@export clay.compositor.lum\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\\nvoid main()\\n{\\n vec4 tex = texture2D( texture, v_Texcoord );\\n float luminance = dot(tex.rgb, w);\\n gl_FragColor = vec4(vec3(luminance), 1.0);\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2x1bS5nbHNsLmpzPzg4ZDUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuY29tcG9zaXRvci5oZHIubG9nX2x1bVxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XFxuY29uc3QgdmVjMyB3ID0gdmVjMygwLjIxMjUsIDAuNzE1NCwgMC4wNzIxKTtcXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgdGV4ID0gZGVjb2RlSERSKHRleHR1cmUyRCh0ZXh0dXJlLCB2X1RleGNvb3JkKSk7XFxuIGZsb2F0IGx1bWluYW5jZSA9IGRvdCh0ZXgucmdiLCB3KTtcXG4gbHVtaW5hbmNlID0gbG9nKGx1bWluYW5jZSArIDAuMDAxKTtcXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKHZlYzQodmVjMyhsdW1pbmFuY2UpLCAxLjApKTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5jb21wb3NpdG9yLmhkci5sdW1fYWRhcHRpb25cXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG51bmlmb3JtIHNhbXBsZXIyRCBhZGFwdGVkTHVtO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGN1cnJlbnRMdW07XFxudW5pZm9ybSBmbG9hdCBmcmFtZVRpbWUgOiAwLjAyO1xcbkBpbXBvcnQgY2xheS51dGlsLnJnYm1cXG52b2lkIG1haW4oKVxcbntcXG4gZmxvYXQgZkFkYXB0ZWRMdW0gPSBkZWNvZGVIRFIodGV4dHVyZTJEKGFkYXB0ZWRMdW0sIHZlYzIoMC41LCAwLjUpKSkucjtcXG4gZmxvYXQgZkN1cnJlbnRMdW0gPSBleHAoZW5jb2RlSERSKHRleHR1cmUyRChjdXJyZW50THVtLCB2ZWMyKDAuNSwgMC41KSkpLnIpO1xcbiBmQWRhcHRlZEx1bSArPSAoZkN1cnJlbnRMdW0gLSBmQWRhcHRlZEx1bSkgKiAoMS4wIC0gcG93KDAuOTgsIDMwLjAgKiBmcmFtZVRpbWUpKTtcXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKHZlYzQodmVjMyhmQWRhcHRlZEx1bSksIDEuMCkpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmNvbXBvc2l0b3IubHVtXFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcXG5jb25zdCB2ZWMzIHcgPSB2ZWMzKDAuMjEyNSwgMC43MTU0LCAwLjA3MjEpO1xcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWM0IHRleCA9IHRleHR1cmUyRCggdGV4dHVyZSwgdl9UZXhjb29yZCApO1xcbiBmbG9hdCBsdW1pbmFuY2UgPSBkb3QodGV4LnJnYiwgdyk7XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQodmVjMyhsdW1pbmFuY2UpLCAxLjApO1xcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvY29tcG9zaXRvci9sdW0uZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///146\n");

/***/ }),
/* 147 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"\\n@export clay.compositor.lut\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform sampler2D lookup;\\nvoid main()\\n{\\n vec4 tex = texture2D(texture, v_Texcoord);\\n float blueColor = tex.b * 63.0;\\n vec2 quad1;\\n quad1.y = floor(floor(blueColor) / 8.0);\\n quad1.x = floor(blueColor) - (quad1.y * 8.0);\\n vec2 quad2;\\n quad2.y = floor(ceil(blueColor) / 8.0);\\n quad2.x = ceil(blueColor) - (quad2.y * 8.0);\\n vec2 texPos1;\\n texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\\n texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\\n vec2 texPos2;\\n texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\\n texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\\n vec4 newColor1 = texture2D(lookup, texPos1);\\n vec4 newColor2 = texture2D(lookup, texPos2);\\n vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\\n gl_FragColor = vec4(newColor.rgb, tex.w);\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2x1dC5nbHNsLmpzP2U0NDciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJcXG5AZXhwb3J0IGNsYXkuY29tcG9zaXRvci5sdXRcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGxvb2t1cDtcXG52b2lkIG1haW4oKVxcbntcXG4gdmVjNCB0ZXggPSB0ZXh0dXJlMkQodGV4dHVyZSwgdl9UZXhjb29yZCk7XFxuIGZsb2F0IGJsdWVDb2xvciA9IHRleC5iICogNjMuMDtcXG4gdmVjMiBxdWFkMTtcXG4gcXVhZDEueSA9IGZsb29yKGZsb29yKGJsdWVDb2xvcikgLyA4LjApO1xcbiBxdWFkMS54ID0gZmxvb3IoYmx1ZUNvbG9yKSAtIChxdWFkMS55ICogOC4wKTtcXG4gdmVjMiBxdWFkMjtcXG4gcXVhZDIueSA9IGZsb29yKGNlaWwoYmx1ZUNvbG9yKSAvIDguMCk7XFxuIHF1YWQyLnggPSBjZWlsKGJsdWVDb2xvcikgLSAocXVhZDIueSAqIDguMCk7XFxuIHZlYzIgdGV4UG9zMTtcXG4gdGV4UG9zMS54ID0gKHF1YWQxLnggKiAwLjEyNSkgKyAwLjUvNTEyLjAgKyAoKDAuMTI1IC0gMS4wLzUxMi4wKSAqIHRleC5yKTtcXG4gdGV4UG9zMS55ID0gKHF1YWQxLnkgKiAwLjEyNSkgKyAwLjUvNTEyLjAgKyAoKDAuMTI1IC0gMS4wLzUxMi4wKSAqIHRleC5nKTtcXG4gdmVjMiB0ZXhQb3MyO1xcbiB0ZXhQb3MyLnggPSAocXVhZDIueCAqIDAuMTI1KSArIDAuNS81MTIuMCArICgoMC4xMjUgLSAxLjAvNTEyLjApICogdGV4LnIpO1xcbiB0ZXhQb3MyLnkgPSAocXVhZDIueSAqIDAuMTI1KSArIDAuNS81MTIuMCArICgoMC4xMjUgLSAxLjAvNTEyLjApICogdGV4LmcpO1xcbiB2ZWM0IG5ld0NvbG9yMSA9IHRleHR1cmUyRChsb29rdXAsIHRleFBvczEpO1xcbiB2ZWM0IG5ld0NvbG9yMiA9IHRleHR1cmUyRChsb29rdXAsIHRleFBvczIpO1xcbiB2ZWM0IG5ld0NvbG9yID0gbWl4KG5ld0NvbG9yMSwgbmV3Q29sb3IyLCBmcmFjdChibHVlQ29sb3IpKTtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNChuZXdDb2xvci5yZ2IsIHRleC53KTtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvbHV0Lmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE0N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///147\n");

/***/ }),
/* 148 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.vignette\\n#define OUTPUT_ALPHA\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform float darkness: 1;\\nuniform float offset: 1;\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));\\n gl_FragColor.rgb = texel.rgb;\\n vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);\\n gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL3ZpZ25ldHRlLmdsc2wuanM/OTM5YiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5jb21wb3NpdG9yLnZpZ25ldHRlXFxuI2RlZmluZSBPVVRQVVRfQUxQSEFcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgZGFya25lc3M6IDE7XFxudW5pZm9ybSBmbG9hdCBvZmZzZXQ6IDE7XFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWM0IHRleGVsID0gZGVjb2RlSERSKHRleHR1cmUyRCh0ZXh0dXJlLCB2X1RleGNvb3JkKSk7XFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSB0ZXhlbC5yZ2I7XFxuIHZlYzIgdXYgPSAodl9UZXhjb29yZCAtIHZlYzIoMC41KSkgKiB2ZWMyKG9mZnNldCk7XFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUih2ZWM0KG1peCh0ZXhlbC5yZ2IsIHZlYzMoMS4wIC0gZGFya25lc3MpLCBkb3QodXYsIHV2KSksIHRleGVsLmEpKTtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvdmlnbmV0dGUuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTQ4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///148\n");

/***/ }),
/* 149 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.output\\n#define OUTPUT_ALPHA\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));\\n gl_FragColor.rgb = tex.rgb;\\n#ifdef OUTPUT_ALPHA\\n gl_FragColor.a = tex.a;\\n#else\\n gl_FragColor.a = 1.0;\\n#endif\\n gl_FragColor = encodeHDR(gl_FragColor);\\n#ifdef PREMULTIPLY_ALPHA\\n gl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL291dHB1dC5nbHNsLmpzPzA3YjMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuY29tcG9zaXRvci5vdXRwdXRcXG4jZGVmaW5lIE9VVFBVVF9BTFBIQVxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWM0IHRleCA9IGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZSwgdl9UZXhjb29yZCkpO1xcbiBnbF9GcmFnQ29sb3IucmdiID0gdGV4LnJnYjtcXG4jaWZkZWYgT1VUUFVUX0FMUEhBXFxuIGdsX0ZyYWdDb2xvci5hID0gdGV4LmE7XFxuI2Vsc2VcXG4gZ2xfRnJhZ0NvbG9yLmEgPSAxLjA7XFxuI2VuZGlmXFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUihnbF9GcmFnQ29sb3IpO1xcbiNpZmRlZiBQUkVNVUxUSVBMWV9BTFBIQVxcbiBnbF9GcmFnQ29sb3IucmdiICo9IGdsX0ZyYWdDb2xvci5hO1xcbiNlbmRpZlxcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvY29tcG9zaXRvci9vdXRwdXQuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTQ5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///149\n");

/***/ }),
/* 150 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.bright\\nuniform sampler2D texture;\\nuniform float threshold : 1;\\nuniform float scale : 1.0;\\nuniform vec2 textureSize: [512, 512];\\nvarying vec2 v_Texcoord;\\nconst vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);\\n@import clay.util.rgbm\\nvec4 median(vec4 a, vec4 b, vec4 c)\\n{\\n return a + b + c - min(min(a, b), c) - max(max(a, b), c);\\n}\\nvoid main()\\n{\\n vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));\\n#ifdef ANTI_FLICKER\\n vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);\\n vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));\\n vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));\\n vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));\\n vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));\\n texel = median(median(texel, s1, s2), s3, s4);\\n#endif\\n float lum = dot(texel.rgb , lumWeight);\\n vec4 color;\\n if (lum > threshold && texel.a > 0.0)\\n {\\n color = vec4(texel.rgb * scale, texel.a * scale);\\n }\\n else\\n {\\n color = vec4(0.0);\\n }\\n gl_FragColor = encodeHDR(color);\\n}\\n@end\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2JyaWdodC5nbHNsLmpzP2MyOWQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuY29tcG9zaXRvci5icmlnaHRcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgdGhyZXNob2xkIDogMTtcXG51bmlmb3JtIGZsb2F0IHNjYWxlIDogMS4wO1xcbnVuaWZvcm0gdmVjMiB0ZXh0dXJlU2l6ZTogWzUxMiwgNTEyXTtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG5jb25zdCB2ZWMzIGx1bVdlaWdodCA9IHZlYzMoMC4yMTI1LCAwLjcxNTQsIDAuMDcyMSk7XFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbnZlYzQgbWVkaWFuKHZlYzQgYSwgdmVjNCBiLCB2ZWM0IGMpXFxue1xcbiByZXR1cm4gYSArIGIgKyBjIC0gbWluKG1pbihhLCBiKSwgYykgLSBtYXgobWF4KGEsIGIpLCBjKTtcXG59XFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgdGV4ZWwgPSBkZWNvZGVIRFIodGV4dHVyZTJEKHRleHR1cmUsIHZfVGV4Y29vcmQpKTtcXG4jaWZkZWYgQU5USV9GTElDS0VSXFxuIHZlYzMgZCA9IDEuMCAvIHRleHR1cmVTaXplLnh5eCAqIHZlYzMoMS4wLCAxLjAsIDAuMCk7XFxuIHZlYzQgczEgPSBkZWNvZGVIRFIodGV4dHVyZTJEKHRleHR1cmUsIHZfVGV4Y29vcmQgLSBkLnh6KSk7XFxuIHZlYzQgczIgPSBkZWNvZGVIRFIodGV4dHVyZTJEKHRleHR1cmUsIHZfVGV4Y29vcmQgKyBkLnh6KSk7XFxuIHZlYzQgczMgPSBkZWNvZGVIRFIodGV4dHVyZTJEKHRleHR1cmUsIHZfVGV4Y29vcmQgLSBkLnp5KSk7XFxuIHZlYzQgczQgPSBkZWNvZGVIRFIodGV4dHVyZTJEKHRleHR1cmUsIHZfVGV4Y29vcmQgKyBkLnp5KSk7XFxuIHRleGVsID0gbWVkaWFuKG1lZGlhbih0ZXhlbCwgczEsIHMyKSwgczMsIHM0KTtcXG4jZW5kaWZcXG4gZmxvYXQgbHVtID0gZG90KHRleGVsLnJnYiAsIGx1bVdlaWdodCk7XFxuIHZlYzQgY29sb3I7XFxuIGlmIChsdW0gPiB0aHJlc2hvbGQgJiYgdGV4ZWwuYSA+IDAuMClcXG4ge1xcbiBjb2xvciA9IHZlYzQodGV4ZWwucmdiICogc2NhbGUsIHRleGVsLmEgKiBzY2FsZSk7XFxuIH1cXG4gZWxzZVxcbiB7XFxuIGNvbG9yID0gdmVjNCgwLjApO1xcbiB9XFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUihjb2xvcik7XFxufVxcbkBlbmRcXG5cIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2JyaWdodC5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///150\n");

/***/ }),
/* 151 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.downsample\\nuniform sampler2D texture;\\nuniform vec2 textureSize : [512, 512];\\nvarying vec2 v_Texcoord;\\n@import clay.util.rgbm\\nfloat brightness(vec3 c)\\n{\\n return max(max(c.r, c.g), c.b);\\n}\\n@import clay.util.clamp_sample\\nvoid main()\\n{\\n vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;\\n#ifdef ANTI_FLICKER\\n vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;\\n vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;\\n vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;\\n vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;\\n float s1w = 1.0 / (brightness(s1) + 1.0);\\n float s2w = 1.0 / (brightness(s2) + 1.0);\\n float s3w = 1.0 / (brightness(s3) + 1.0);\\n float s4w = 1.0 / (brightness(s4) + 1.0);\\n float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);\\n vec4 color = vec4(\\n (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,\\n 1.0\\n );\\n#else\\n vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));\\n color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\\n color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));\\n color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));\\n color *= 0.25;\\n#endif\\n gl_FragColor = encodeHDR(color);\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2Rvd25zYW1wbGUuZ2xzbC5qcz9hMDZmIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LmNvbXBvc2l0b3IuZG93bnNhbXBsZVxcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XFxudW5pZm9ybSB2ZWMyIHRleHR1cmVTaXplIDogWzUxMiwgNTEyXTtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxuZmxvYXQgYnJpZ2h0bmVzcyh2ZWMzIGMpXFxue1xcbiByZXR1cm4gbWF4KG1heChjLnIsIGMuZyksIGMuYik7XFxufVxcbkBpbXBvcnQgY2xheS51dGlsLmNsYW1wX3NhbXBsZVxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWM0IGQgPSB2ZWM0KC0xLjAsIC0xLjAsIDEuMCwgMS4wKSAvIHRleHR1cmVTaXplLnh5eHk7XFxuI2lmZGVmIEFOVElfRkxJQ0tFUlxcbiB2ZWMzIHMxID0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgKyBkLnh5KSkucmdiO1xcbiB2ZWMzIHMyID0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgKyBkLnp5KSkucmdiO1xcbiB2ZWMzIHMzID0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgKyBkLnh3KSkucmdiO1xcbiB2ZWMzIHM0ID0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgKyBkLnp3KSkucmdiO1xcbiBmbG9hdCBzMXcgPSAxLjAgLyAoYnJpZ2h0bmVzcyhzMSkgKyAxLjApO1xcbiBmbG9hdCBzMncgPSAxLjAgLyAoYnJpZ2h0bmVzcyhzMikgKyAxLjApO1xcbiBmbG9hdCBzM3cgPSAxLjAgLyAoYnJpZ2h0bmVzcyhzMykgKyAxLjApO1xcbiBmbG9hdCBzNHcgPSAxLjAgLyAoYnJpZ2h0bmVzcyhzNCkgKyAxLjApO1xcbiBmbG9hdCBvbmVEaXZpZGVTdW0gPSAxLjAgLyAoczF3ICsgczJ3ICsgczN3ICsgczR3KTtcXG4gdmVjNCBjb2xvciA9IHZlYzQoXFxuIChzMSAqIHMxdyArIHMyICogczJ3ICsgczMgKiBzM3cgKyBzNCAqIHM0dykgKiBvbmVEaXZpZGVTdW0sXFxuIDEuMFxcbiApO1xcbiNlbHNlXFxuIHZlYzQgY29sb3IgPSBkZWNvZGVIRFIoY2xhbXBTYW1wbGUodGV4dHVyZSwgdl9UZXhjb29yZCArIGQueHkpKTtcXG4gY29sb3IgKz0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgKyBkLnp5KSk7XFxuIGNvbG9yICs9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkICsgZC54dykpO1xcbiBjb2xvciArPSBkZWNvZGVIRFIoY2xhbXBTYW1wbGUodGV4dHVyZSwgdl9UZXhjb29yZCArIGQuencpKTtcXG4gY29sb3IgKj0gMC4yNTtcXG4jZW5kaWZcXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKGNvbG9yKTtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvZG93bnNhbXBsZS5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///151\n");

/***/ }),
/* 152 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"\\n@export clay.compositor.upsample\\n#define HIGH_QUALITY\\nuniform sampler2D texture;\\nuniform vec2 textureSize : [512, 512];\\nuniform float sampleScale: 0.5;\\nvarying vec2 v_Texcoord;\\n@import clay.util.rgbm\\n@import clay.util.clamp_sample\\nvoid main()\\n{\\n#ifdef HIGH_QUALITY\\n vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;\\n vec4 s;\\n s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));\\n s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;\\n s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;\\n s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));\\n gl_FragColor = encodeHDR(s / 16.0);\\n#else\\n vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;\\n vec4 s;\\n s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));\\n gl_FragColor = encodeHDR(s / 4.0);\\n#endif\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL3Vwc2FtcGxlLmdsc2wuanM/OTA1NCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIlxcbkBleHBvcnQgY2xheS5jb21wb3NpdG9yLnVwc2FtcGxlXFxuI2RlZmluZSBISUdIX1FVQUxJVFlcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xcbnVuaWZvcm0gdmVjMiB0ZXh0dXJlU2l6ZSA6IFs1MTIsIDUxMl07XFxudW5pZm9ybSBmbG9hdCBzYW1wbGVTY2FsZTogMC41O1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbkBpbXBvcnQgY2xheS51dGlsLnJnYm1cXG5AaW1wb3J0IGNsYXkudXRpbC5jbGFtcF9zYW1wbGVcXG52b2lkIG1haW4oKVxcbntcXG4jaWZkZWYgSElHSF9RVUFMSVRZXFxuIHZlYzQgZCA9IHZlYzQoMS4wLCAxLjAsIC0xLjAsIDAuMCkgLyB0ZXh0dXJlU2l6ZS54eXh5ICogc2FtcGxlU2NhbGU7XFxuIHZlYzQgcztcXG4gcyA9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkIC0gZC54eSkpO1xcbiBzICs9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkIC0gZC53eSkpICogMi4wO1xcbiBzICs9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkIC0gZC56eSkpO1xcbiBzICs9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkICsgZC56dykpICogMi4wO1xcbiBzICs9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkICkpICogNC4wO1xcbiBzICs9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkICsgZC54dykpICogMi4wO1xcbiBzICs9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkICsgZC56eSkpO1xcbiBzICs9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkICsgZC53eSkpICogMi4wO1xcbiBzICs9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkICsgZC54eSkpO1xcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIocyAvIDE2LjApO1xcbiNlbHNlXFxuIHZlYzQgZCA9IHZlYzQoLTEuMCwgLTEuMCwgKzEuMCwgKzEuMCkgLyB0ZXh0dXJlU2l6ZS54eXh5O1xcbiB2ZWM0IHM7XFxuIHMgPSBkZWNvZGVIRFIoY2xhbXBTYW1wbGUodGV4dHVyZSwgdl9UZXhjb29yZCArIGQueHkpKTtcXG4gcyArPSBkZWNvZGVIRFIoY2xhbXBTYW1wbGUodGV4dHVyZSwgdl9UZXhjb29yZCArIGQuenkpKTtcXG4gcyArPSBkZWNvZGVIRFIoY2xhbXBTYW1wbGUodGV4dHVyZSwgdl9UZXhjb29yZCArIGQueHcpKTtcXG4gcyArPSBkZWNvZGVIRFIoY2xhbXBTYW1wbGUodGV4dHVyZSwgdl9UZXhjb29yZCArIGQuencpKTtcXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKHMgLyA0LjApO1xcbiNlbmRpZlxcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvY29tcG9zaXRvci91cHNhbXBsZS5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///152\n");

/***/ }),
/* 153 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.hdr.composite\\n#define TONEMAPPING\\nuniform sampler2D texture;\\n#ifdef BLOOM_ENABLED\\nuniform sampler2D bloom;\\n#endif\\n#ifdef LENSFLARE_ENABLED\\nuniform sampler2D lensflare;\\nuniform sampler2D lensdirt;\\n#endif\\n#ifdef LUM_ENABLED\\nuniform sampler2D lum;\\n#endif\\n#ifdef LUT_ENABLED\\nuniform sampler2D lut;\\n#endif\\n#ifdef COLOR_CORRECTION\\nuniform float brightness : 0.0;\\nuniform float contrast : 1.0;\\nuniform float saturation : 1.0;\\n#endif\\n#ifdef VIGNETTE\\nuniform float vignetteDarkness: 1.0;\\nuniform float vignetteOffset: 1.0;\\n#endif\\nuniform float exposure : 1.0;\\nuniform float bloomIntensity : 0.25;\\nuniform float lensflareIntensity : 1;\\nvarying vec2 v_Texcoord;\\n@import clay.util.srgb\\nvec3 ACESToneMapping(vec3 color)\\n{\\n const float A = 2.51;\\n const float B = 0.03;\\n const float C = 2.43;\\n const float D = 0.59;\\n const float E = 0.14;\\n return (color * (A * color + B)) / (color * (C * color + D) + E);\\n}\\nfloat eyeAdaption(float fLum)\\n{\\n return mix(0.2, fLum, 0.5);\\n}\\n#ifdef LUT_ENABLED\\nvec3 lutTransform(vec3 color) {\\n float blueColor = color.b * 63.0;\\n vec2 quad1;\\n quad1.y = floor(floor(blueColor) / 8.0);\\n quad1.x = floor(blueColor) - (quad1.y * 8.0);\\n vec2 quad2;\\n quad2.y = floor(ceil(blueColor) / 8.0);\\n quad2.x = ceil(blueColor) - (quad2.y * 8.0);\\n vec2 texPos1;\\n texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\\n texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\\n vec2 texPos2;\\n texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\\n texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\\n vec4 newColor1 = texture2D(lut, texPos1);\\n vec4 newColor2 = texture2D(lut, texPos2);\\n vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\\n return newColor.rgb;\\n}\\n#endif\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec4 texel = vec4(0.0);\\n vec4 originalTexel = vec4(0.0);\\n#ifdef TEXTURE_ENABLED\\n texel = decodeHDR(texture2D(texture, v_Texcoord));\\n originalTexel = texel;\\n#endif\\n#ifdef BLOOM_ENABLED\\n vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));\\n texel.rgb += bloomTexel.rgb * bloomIntensity;\\n texel.a += bloomTexel.a * bloomIntensity;\\n#endif\\n#ifdef LENSFLARE_ENABLED\\n texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;\\n#endif\\n texel.a = min(texel.a, 1.0);\\n#ifdef LUM_ENABLED\\n float fLum = texture2D(lum, vec2(0.5, 0.5)).r;\\n float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));\\n float exposureBias = adaptedLumDest * exposure;\\n#else\\n float exposureBias = exposure;\\n#endif\\n#ifdef TONEMAPPING\\n texel.rgb *= exposureBias;\\n texel.rgb = ACESToneMapping(texel.rgb);\\n#endif\\n texel = linearTosRGB(texel);\\n#ifdef LUT_ENABLED\\n texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));\\n#endif\\n#ifdef COLOR_CORRECTION\\n texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);\\n texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\\n float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));\\n texel.rgb = mix(vec3(lum), texel.rgb, saturation);\\n#endif\\n#ifdef VIGNETTE\\n vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);\\n texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));\\n#endif\\n gl_FragColor = encodeHDR(texel);\\n#ifdef DEBUG\\n #if DEBUG == 1\\n gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));\\n #elif DEBUG == 2\\n gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);\\n #elif DEBUG == 3\\n gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));\\n #endif\\n#endif\\n if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {\\n gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));\\n }\\n#ifdef PREMULTIPLY_ALPHA\\n gl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2hkci5nbHNsLmpzPzVhYTgiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuY29tcG9zaXRvci5oZHIuY29tcG9zaXRlXFxuI2RlZmluZSBUT05FTUFQUElOR1xcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XFxuI2lmZGVmIEJMT09NX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCBibG9vbTtcXG4jZW5kaWZcXG4jaWZkZWYgTEVOU0ZMQVJFX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCBsZW5zZmxhcmU7XFxudW5pZm9ybSBzYW1wbGVyMkQgbGVuc2RpcnQ7XFxuI2VuZGlmXFxuI2lmZGVmIExVTV9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgbHVtO1xcbiNlbmRpZlxcbiNpZmRlZiBMVVRfRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIGx1dDtcXG4jZW5kaWZcXG4jaWZkZWYgQ09MT1JfQ09SUkVDVElPTlxcbnVuaWZvcm0gZmxvYXQgYnJpZ2h0bmVzcyA6IDAuMDtcXG51bmlmb3JtIGZsb2F0IGNvbnRyYXN0IDogMS4wO1xcbnVuaWZvcm0gZmxvYXQgc2F0dXJhdGlvbiA6IDEuMDtcXG4jZW5kaWZcXG4jaWZkZWYgVklHTkVUVEVcXG51bmlmb3JtIGZsb2F0IHZpZ25ldHRlRGFya25lc3M6IDEuMDtcXG51bmlmb3JtIGZsb2F0IHZpZ25ldHRlT2Zmc2V0OiAxLjA7XFxuI2VuZGlmXFxudW5pZm9ybSBmbG9hdCBleHBvc3VyZSA6IDEuMDtcXG51bmlmb3JtIGZsb2F0IGJsb29tSW50ZW5zaXR5IDogMC4yNTtcXG51bmlmb3JtIGZsb2F0IGxlbnNmbGFyZUludGVuc2l0eSA6IDE7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxuQGltcG9ydCBjbGF5LnV0aWwuc3JnYlxcbnZlYzMgQUNFU1RvbmVNYXBwaW5nKHZlYzMgY29sb3IpXFxue1xcbiBjb25zdCBmbG9hdCBBID0gMi41MTtcXG4gY29uc3QgZmxvYXQgQiA9IDAuMDM7XFxuIGNvbnN0IGZsb2F0IEMgPSAyLjQzO1xcbiBjb25zdCBmbG9hdCBEID0gMC41OTtcXG4gY29uc3QgZmxvYXQgRSA9IDAuMTQ7XFxuIHJldHVybiAoY29sb3IgKiAoQSAqIGNvbG9yICsgQikpIC8gKGNvbG9yICogKEMgKiBjb2xvciArIEQpICsgRSk7XFxufVxcbmZsb2F0IGV5ZUFkYXB0aW9uKGZsb2F0IGZMdW0pXFxue1xcbiByZXR1cm4gbWl4KDAuMiwgZkx1bSwgMC41KTtcXG59XFxuI2lmZGVmIExVVF9FTkFCTEVEXFxudmVjMyBsdXRUcmFuc2Zvcm0odmVjMyBjb2xvcikge1xcbiBmbG9hdCBibHVlQ29sb3IgPSBjb2xvci5iICogNjMuMDtcXG4gdmVjMiBxdWFkMTtcXG4gcXVhZDEueSA9IGZsb29yKGZsb29yKGJsdWVDb2xvcikgLyA4LjApO1xcbiBxdWFkMS54ID0gZmxvb3IoYmx1ZUNvbG9yKSAtIChxdWFkMS55ICogOC4wKTtcXG4gdmVjMiBxdWFkMjtcXG4gcXVhZDIueSA9IGZsb29yKGNlaWwoYmx1ZUNvbG9yKSAvIDguMCk7XFxuIHF1YWQyLnggPSBjZWlsKGJsdWVDb2xvcikgLSAocXVhZDIueSAqIDguMCk7XFxuIHZlYzIgdGV4UG9zMTtcXG4gdGV4UG9zMS54ID0gKHF1YWQxLnggKiAwLjEyNSkgKyAwLjUvNTEyLjAgKyAoKDAuMTI1IC0gMS4wLzUxMi4wKSAqIGNvbG9yLnIpO1xcbiB0ZXhQb3MxLnkgPSAocXVhZDEueSAqIDAuMTI1KSArIDAuNS81MTIuMCArICgoMC4xMjUgLSAxLjAvNTEyLjApICogY29sb3IuZyk7XFxuIHZlYzIgdGV4UG9zMjtcXG4gdGV4UG9zMi54ID0gKHF1YWQyLnggKiAwLjEyNSkgKyAwLjUvNTEyLjAgKyAoKDAuMTI1IC0gMS4wLzUxMi4wKSAqIGNvbG9yLnIpO1xcbiB0ZXhQb3MyLnkgPSAocXVhZDIueSAqIDAuMTI1KSArIDAuNS81MTIuMCArICgoMC4xMjUgLSAxLjAvNTEyLjApICogY29sb3IuZyk7XFxuIHZlYzQgbmV3Q29sb3IxID0gdGV4dHVyZTJEKGx1dCwgdGV4UG9zMSk7XFxuIHZlYzQgbmV3Q29sb3IyID0gdGV4dHVyZTJEKGx1dCwgdGV4UG9zMik7XFxuIHZlYzQgbmV3Q29sb3IgPSBtaXgobmV3Q29sb3IxLCBuZXdDb2xvcjIsIGZyYWN0KGJsdWVDb2xvcikpO1xcbiByZXR1cm4gbmV3Q29sb3IucmdiO1xcbn1cXG4jZW5kaWZcXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgdGV4ZWwgPSB2ZWM0KDAuMCk7XFxuIHZlYzQgb3JpZ2luYWxUZXhlbCA9IHZlYzQoMC4wKTtcXG4jaWZkZWYgVEVYVFVSRV9FTkFCTEVEXFxuIHRleGVsID0gZGVjb2RlSERSKHRleHR1cmUyRCh0ZXh0dXJlLCB2X1RleGNvb3JkKSk7XFxuIG9yaWdpbmFsVGV4ZWwgPSB0ZXhlbDtcXG4jZW5kaWZcXG4jaWZkZWYgQkxPT01fRU5BQkxFRFxcbiB2ZWM0IGJsb29tVGV4ZWwgPSBkZWNvZGVIRFIodGV4dHVyZTJEKGJsb29tLCB2X1RleGNvb3JkKSk7XFxuIHRleGVsLnJnYiArPSBibG9vbVRleGVsLnJnYiAqIGJsb29tSW50ZW5zaXR5O1xcbiB0ZXhlbC5hICs9IGJsb29tVGV4ZWwuYSAqIGJsb29tSW50ZW5zaXR5O1xcbiNlbmRpZlxcbiNpZmRlZiBMRU5TRkxBUkVfRU5BQkxFRFxcbiB0ZXhlbCArPSBkZWNvZGVIRFIodGV4dHVyZTJEKGxlbnNmbGFyZSwgdl9UZXhjb29yZCkpICogdGV4dHVyZTJEKGxlbnNkaXJ0LCB2X1RleGNvb3JkKSAqIGxlbnNmbGFyZUludGVuc2l0eTtcXG4jZW5kaWZcXG4gdGV4ZWwuYSA9IG1pbih0ZXhlbC5hLCAxLjApO1xcbiNpZmRlZiBMVU1fRU5BQkxFRFxcbiBmbG9hdCBmTHVtID0gdGV4dHVyZTJEKGx1bSwgdmVjMigwLjUsIDAuNSkpLnI7XFxuIGZsb2F0IGFkYXB0ZWRMdW1EZXN0ID0gMy4wIC8gKG1heCgwLjEsIDEuMCArIDEwLjAqZXllQWRhcHRpb24oZkx1bSkpKTtcXG4gZmxvYXQgZXhwb3N1cmVCaWFzID0gYWRhcHRlZEx1bURlc3QgKiBleHBvc3VyZTtcXG4jZWxzZVxcbiBmbG9hdCBleHBvc3VyZUJpYXMgPSBleHBvc3VyZTtcXG4jZW5kaWZcXG4jaWZkZWYgVE9ORU1BUFBJTkdcXG4gdGV4ZWwucmdiICo9IGV4cG9zdXJlQmlhcztcXG4gdGV4ZWwucmdiID0gQUNFU1RvbmVNYXBwaW5nKHRleGVsLnJnYik7XFxuI2VuZGlmXFxuIHRleGVsID0gbGluZWFyVG9zUkdCKHRleGVsKTtcXG4jaWZkZWYgTFVUX0VOQUJMRURcXG4gdGV4ZWwucmdiID0gbHV0VHJhbnNmb3JtKGNsYW1wKHRleGVsLnJnYix2ZWMzKDAuMCksdmVjMygxLjApKSk7XFxuI2VuZGlmXFxuI2lmZGVmIENPTE9SX0NPUlJFQ1RJT05cXG4gdGV4ZWwucmdiID0gY2xhbXAodGV4ZWwucmdiICsgdmVjMyhicmlnaHRuZXNzKSwgMC4wLCAxLjApO1xcbiB0ZXhlbC5yZ2IgPSBjbGFtcCgodGV4ZWwucmdiIC0gdmVjMygwLjUpKSpjb250cmFzdCt2ZWMzKDAuNSksIDAuMCwgMS4wKTtcXG4gZmxvYXQgbHVtID0gZG90KHRleGVsLnJnYiwgdmVjMygwLjIxMjUsIDAuNzE1NCwgMC4wNzIxKSk7XFxuIHRleGVsLnJnYiA9IG1peCh2ZWMzKGx1bSksIHRleGVsLnJnYiwgc2F0dXJhdGlvbik7XFxuI2VuZGlmXFxuI2lmZGVmIFZJR05FVFRFXFxuIHZlYzIgdXYgPSAodl9UZXhjb29yZCAtIHZlYzIoMC41KSkgKiB2ZWMyKHZpZ25ldHRlT2Zmc2V0KTtcXG4gdGV4ZWwucmdiID0gbWl4KHRleGVsLnJnYiwgdmVjMygxLjAgLSB2aWduZXR0ZURhcmtuZXNzKSwgZG90KHV2LCB1dikpO1xcbiNlbmRpZlxcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIodGV4ZWwpO1xcbiNpZmRlZiBERUJVR1xcbiAjaWYgREVCVUcgPT0gMVxcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIoZGVjb2RlSERSKHRleHR1cmUyRCh0ZXh0dXJlLCB2X1RleGNvb3JkKSkpO1xcbiAjZWxpZiBERUJVRyA9PSAyXFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUihkZWNvZGVIRFIodGV4dHVyZTJEKGJsb29tLCB2X1RleGNvb3JkKSkgKiBibG9vbUludGVuc2l0eSk7XFxuICNlbGlmIERFQlVHID09IDNcXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKGRlY29kZUhEUih0ZXh0dXJlMkQobGVuc2ZsYXJlLCB2X1RleGNvb3JkKSAqIGxlbnNmbGFyZUludGVuc2l0eSkpO1xcbiAjZW5kaWZcXG4jZW5kaWZcXG4gaWYgKG9yaWdpbmFsVGV4ZWwuYSA8PSAwLjAxICYmIGdsX0ZyYWdDb2xvci5hID4gMWUtNSkge1xcbiBnbF9GcmFnQ29sb3IuYSA9IGRvdChnbF9GcmFnQ29sb3IucmdiLCB2ZWMzKDAuMjEyNSwgMC43MTU0LCAwLjA3MjEpKTtcXG4gfVxcbiNpZmRlZiBQUkVNVUxUSVBMWV9BTFBIQVxcbiBnbF9GcmFnQ29sb3IucmdiICo9IGdsX0ZyYWdDb2xvci5hO1xcbiNlbmRpZlxcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvY29tcG9zaXRvci9oZHIuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTUzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///153\n");

/***/ }),
/* 154 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.lensflare\\n#define SAMPLE_NUMBER 8\\nuniform sampler2D texture;\\nuniform sampler2D lenscolor;\\nuniform vec2 textureSize : [512, 512];\\nuniform float dispersal : 0.3;\\nuniform float haloWidth : 0.4;\\nuniform float distortion : 1.0;\\nvarying vec2 v_Texcoord;\\n@import clay.util.rgbm\\nvec4 textureDistorted(\\n in vec2 texcoord,\\n in vec2 direction,\\n in vec3 distortion\\n) {\\n return vec4(\\n decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,\\n decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,\\n decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,\\n 1.0\\n );\\n}\\nvoid main()\\n{\\n vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;\\n vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;\\n vec2 haloVec = normalize(ghostVec) * haloWidth;\\n vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);\\n vec4 result = vec4(0.0);\\n for (int i = 0; i < SAMPLE_NUMBER; i++)\\n {\\n vec2 offset = fract(texcoord + ghostVec * float(i));\\n float weight = length(vec2(0.5) - offset) / length(vec2(0.5));\\n weight = pow(1.0 - weight, 10.0);\\n result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\\n }\\n result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));\\n float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));\\n weight = pow(1.0 - weight, 10.0);\\n vec2 offset = fract(texcoord + haloVec);\\n result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\\n gl_FragColor = result;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2xlbnNmbGFyZS5nbHNsLmpzPzRkZTMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuY29tcG9zaXRvci5sZW5zZmxhcmVcXG4jZGVmaW5lIFNBTVBMRV9OVU1CRVIgOFxcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XFxudW5pZm9ybSBzYW1wbGVyMkQgbGVuc2NvbG9yO1xcbnVuaWZvcm0gdmVjMiB0ZXh0dXJlU2l6ZSA6IFs1MTIsIDUxMl07XFxudW5pZm9ybSBmbG9hdCBkaXNwZXJzYWwgOiAwLjM7XFxudW5pZm9ybSBmbG9hdCBoYWxvV2lkdGggOiAwLjQ7XFxudW5pZm9ybSBmbG9hdCBkaXN0b3J0aW9uIDogMS4wO1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbkBpbXBvcnQgY2xheS51dGlsLnJnYm1cXG52ZWM0IHRleHR1cmVEaXN0b3J0ZWQoXFxuIGluIHZlYzIgdGV4Y29vcmQsXFxuIGluIHZlYzIgZGlyZWN0aW9uLFxcbiBpbiB2ZWMzIGRpc3RvcnRpb25cXG4pIHtcXG4gcmV0dXJuIHZlYzQoXFxuIGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZSwgdGV4Y29vcmQgKyBkaXJlY3Rpb24gKiBkaXN0b3J0aW9uLnIpKS5yLFxcbiBkZWNvZGVIRFIodGV4dHVyZTJEKHRleHR1cmUsIHRleGNvb3JkICsgZGlyZWN0aW9uICogZGlzdG9ydGlvbi5nKSkuZyxcXG4gZGVjb2RlSERSKHRleHR1cmUyRCh0ZXh0dXJlLCB0ZXhjb29yZCArIGRpcmVjdGlvbiAqIGRpc3RvcnRpb24uYikpLmIsXFxuIDEuMFxcbiApO1xcbn1cXG52b2lkIG1haW4oKVxcbntcXG4gdmVjMiB0ZXhjb29yZCA9IC12X1RleGNvb3JkICsgdmVjMigxLjApOyB2ZWMyIHRleHR1cmVPZmZzZXQgPSAxLjAgLyB0ZXh0dXJlU2l6ZTtcXG4gdmVjMiBnaG9zdFZlYyA9ICh2ZWMyKDAuNSkgLSB0ZXhjb29yZCkgKiBkaXNwZXJzYWw7XFxuIHZlYzIgaGFsb1ZlYyA9IG5vcm1hbGl6ZShnaG9zdFZlYykgKiBoYWxvV2lkdGg7XFxuIHZlYzMgZGlzdG9ydGlvbiA9IHZlYzMoLXRleHR1cmVPZmZzZXQueCAqIGRpc3RvcnRpb24sIDAuMCwgdGV4dHVyZU9mZnNldC54ICogZGlzdG9ydGlvbik7XFxuIHZlYzQgcmVzdWx0ID0gdmVjNCgwLjApO1xcbiBmb3IgKGludCBpID0gMDsgaSA8IFNBTVBMRV9OVU1CRVI7IGkrKylcXG4ge1xcbiB2ZWMyIG9mZnNldCA9IGZyYWN0KHRleGNvb3JkICsgZ2hvc3RWZWMgKiBmbG9hdChpKSk7XFxuIGZsb2F0IHdlaWdodCA9IGxlbmd0aCh2ZWMyKDAuNSkgLSBvZmZzZXQpIC8gbGVuZ3RoKHZlYzIoMC41KSk7XFxuIHdlaWdodCA9IHBvdygxLjAgLSB3ZWlnaHQsIDEwLjApO1xcbiByZXN1bHQgKz0gdGV4dHVyZURpc3RvcnRlZChvZmZzZXQsIG5vcm1hbGl6ZShnaG9zdFZlYyksIGRpc3RvcnRpb24pICogd2VpZ2h0O1xcbiB9XFxuIHJlc3VsdCAqPSB0ZXh0dXJlMkQobGVuc2NvbG9yLCB2ZWMyKGxlbmd0aCh2ZWMyKDAuNSkgLSB0ZXhjb29yZCkpIC8gbGVuZ3RoKHZlYzIoMC41KSkpO1xcbiBmbG9hdCB3ZWlnaHQgPSBsZW5ndGgodmVjMigwLjUpIC0gZnJhY3QodGV4Y29vcmQgKyBoYWxvVmVjKSkgLyBsZW5ndGgodmVjMigwLjUpKTtcXG4gd2VpZ2h0ID0gcG93KDEuMCAtIHdlaWdodCwgMTAuMCk7XFxuIHZlYzIgb2Zmc2V0ID0gZnJhY3QodGV4Y29vcmQgKyBoYWxvVmVjKTtcXG4gcmVzdWx0ICs9IHRleHR1cmVEaXN0b3J0ZWQob2Zmc2V0LCBub3JtYWxpemUoZ2hvc3RWZWMpLCBkaXN0b3J0aW9uKSAqIHdlaWdodDtcXG4gZ2xfRnJhZ0NvbG9yID0gcmVzdWx0O1xcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvY29tcG9zaXRvci9sZW5zZmxhcmUuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTU0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///154\n");

/***/ }),
/* 155 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.blend\\n#define SHADER_NAME blend\\n#ifdef TEXTURE1_ENABLED\\nuniform sampler2D texture1;\\nuniform float weight1 : 1.0;\\n#endif\\n#ifdef TEXTURE2_ENABLED\\nuniform sampler2D texture2;\\nuniform float weight2 : 1.0;\\n#endif\\n#ifdef TEXTURE3_ENABLED\\nuniform sampler2D texture3;\\nuniform float weight3 : 1.0;\\n#endif\\n#ifdef TEXTURE4_ENABLED\\nuniform sampler2D texture4;\\nuniform float weight4 : 1.0;\\n#endif\\n#ifdef TEXTURE5_ENABLED\\nuniform sampler2D texture5;\\nuniform float weight5 : 1.0;\\n#endif\\n#ifdef TEXTURE6_ENABLED\\nuniform sampler2D texture6;\\nuniform float weight6 : 1.0;\\n#endif\\nvarying vec2 v_Texcoord;\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec4 tex = vec4(0.0);\\n#ifdef TEXTURE1_ENABLED\\n tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;\\n#endif\\n#ifdef TEXTURE2_ENABLED\\n tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;\\n#endif\\n#ifdef TEXTURE3_ENABLED\\n tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;\\n#endif\\n#ifdef TEXTURE4_ENABLED\\n tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;\\n#endif\\n#ifdef TEXTURE5_ENABLED\\n tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;\\n#endif\\n#ifdef TEXTURE6_ENABLED\\n tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;\\n#endif\\n gl_FragColor = encodeHDR(tex);\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2JsZW5kLmdsc2wuanM/OGIyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5jb21wb3NpdG9yLmJsZW5kXFxuI2RlZmluZSBTSEFERVJfTkFNRSBibGVuZFxcbiNpZmRlZiBURVhUVVJFMV9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTE7XFxudW5pZm9ybSBmbG9hdCB3ZWlnaHQxIDogMS4wO1xcbiNlbmRpZlxcbiNpZmRlZiBURVhUVVJFMl9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTI7XFxudW5pZm9ybSBmbG9hdCB3ZWlnaHQyIDogMS4wO1xcbiNlbmRpZlxcbiNpZmRlZiBURVhUVVJFM19FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTM7XFxudW5pZm9ybSBmbG9hdCB3ZWlnaHQzIDogMS4wO1xcbiNlbmRpZlxcbiNpZmRlZiBURVhUVVJFNF9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTQ7XFxudW5pZm9ybSBmbG9hdCB3ZWlnaHQ0IDogMS4wO1xcbiNlbmRpZlxcbiNpZmRlZiBURVhUVVJFNV9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTU7XFxudW5pZm9ybSBmbG9hdCB3ZWlnaHQ1IDogMS4wO1xcbiNlbmRpZlxcbiNpZmRlZiBURVhUVVJFNl9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTY7XFxudW5pZm9ybSBmbG9hdCB3ZWlnaHQ2IDogMS4wO1xcbiNlbmRpZlxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbkBpbXBvcnQgY2xheS51dGlsLnJnYm1cXG52b2lkIG1haW4oKVxcbntcXG4gdmVjNCB0ZXggPSB2ZWM0KDAuMCk7XFxuI2lmZGVmIFRFWFRVUkUxX0VOQUJMRURcXG4gdGV4ICs9IGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZTEsIHZfVGV4Y29vcmQpKSAqIHdlaWdodDE7XFxuI2VuZGlmXFxuI2lmZGVmIFRFWFRVUkUyX0VOQUJMRURcXG4gdGV4ICs9IGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZTIsIHZfVGV4Y29vcmQpKSAqIHdlaWdodDI7XFxuI2VuZGlmXFxuI2lmZGVmIFRFWFRVUkUzX0VOQUJMRURcXG4gdGV4ICs9IGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZTMsIHZfVGV4Y29vcmQpKSAqIHdlaWdodDM7XFxuI2VuZGlmXFxuI2lmZGVmIFRFWFRVUkU0X0VOQUJMRURcXG4gdGV4ICs9IGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZTQsIHZfVGV4Y29vcmQpKSAqIHdlaWdodDQ7XFxuI2VuZGlmXFxuI2lmZGVmIFRFWFRVUkU1X0VOQUJMRURcXG4gdGV4ICs9IGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZTUsIHZfVGV4Y29vcmQpKSAqIHdlaWdodDU7XFxuI2VuZGlmXFxuI2lmZGVmIFRFWFRVUkU2X0VOQUJMRURcXG4gdGV4ICs9IGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZTYsIHZfVGV4Y29vcmQpKSAqIHdlaWdodDY7XFxuI2VuZGlmXFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUih0ZXgpO1xcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvY29tcG9zaXRvci9ibGVuZC5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///155\n");

/***/ }),
/* 156 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.fxaa\\nuniform sampler2D texture;\\nuniform vec4 viewport : VIEWPORT;\\nvarying vec2 v_Texcoord;\\n#define FXAA_REDUCE_MIN (1.0/128.0)\\n#define FXAA_REDUCE_MUL (1.0/8.0)\\n#define FXAA_SPAN_MAX 8.0\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec2 resolution = 1.0 / viewport.zw;\\n vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;\\n vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;\\n vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;\\n vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;\\n vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );\\n vec3 rgbM = rgbaM.xyz;\\n float opacity = rgbaM.w;\\n vec3 luma = vec3( 0.299, 0.587, 0.114 );\\n float lumaNW = dot( rgbNW, luma );\\n float lumaNE = dot( rgbNE, luma );\\n float lumaSW = dot( rgbSW, luma );\\n float lumaSE = dot( rgbSE, luma );\\n float lumaM = dot( rgbM, luma );\\n float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\\n float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\\n vec2 dir;\\n dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\\n dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));\\n float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\\n float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\\n dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),\\n max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\\n dir * rcpDirMin)) * resolution;\\n vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;\\n rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;\\n rgbA *= 0.5;\\n vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;\\n rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;\\n rgbB *= 0.25;\\n rgbB += rgbA * 0.5;\\n float lumaB = dot( rgbB, luma );\\n if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )\\n {\\n gl_FragColor = vec4( rgbA, opacity );\\n }\\n else {\\n gl_FragColor = vec4( rgbB, opacity );\\n }\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2Z4YWEuZ2xzbC5qcz81NGUyIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LmNvbXBvc2l0b3IuZnhhYVxcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XFxudW5pZm9ybSB2ZWM0IHZpZXdwb3J0IDogVklFV1BPUlQ7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxuI2RlZmluZSBGWEFBX1JFRFVDRV9NSU4gKDEuMC8xMjguMClcXG4jZGVmaW5lIEZYQUFfUkVEVUNFX01VTCAoMS4wLzguMClcXG4jZGVmaW5lIEZYQUFfU1BBTl9NQVggOC4wXFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWMyIHJlc29sdXRpb24gPSAxLjAgLyB2aWV3cG9ydC56dztcXG4gdmVjMyByZ2JOVyA9IGRlY29kZUhEUiggdGV4dHVyZTJEKCB0ZXh0dXJlLCAoIGdsX0ZyYWdDb29yZC54eSArIHZlYzIoIC0xLjAsIC0xLjAgKSApICogcmVzb2x1dGlvbiApICkueHl6O1xcbiB2ZWMzIHJnYk5FID0gZGVjb2RlSERSKCB0ZXh0dXJlMkQoIHRleHR1cmUsICggZ2xfRnJhZ0Nvb3JkLnh5ICsgdmVjMiggMS4wLCAtMS4wICkgKSAqIHJlc29sdXRpb24gKSApLnh5ejtcXG4gdmVjMyByZ2JTVyA9IGRlY29kZUhEUiggdGV4dHVyZTJEKCB0ZXh0dXJlLCAoIGdsX0ZyYWdDb29yZC54eSArIHZlYzIoIC0xLjAsIDEuMCApICkgKiByZXNvbHV0aW9uICkgKS54eXo7XFxuIHZlYzMgcmdiU0UgPSBkZWNvZGVIRFIoIHRleHR1cmUyRCggdGV4dHVyZSwgKCBnbF9GcmFnQ29vcmQueHkgKyB2ZWMyKCAxLjAsIDEuMCApICkgKiByZXNvbHV0aW9uICkgKS54eXo7XFxuIHZlYzQgcmdiYU0gPSBkZWNvZGVIRFIoIHRleHR1cmUyRCggdGV4dHVyZSwgZ2xfRnJhZ0Nvb3JkLnh5ICogcmVzb2x1dGlvbiApICk7XFxuIHZlYzMgcmdiTSA9IHJnYmFNLnh5ejtcXG4gZmxvYXQgb3BhY2l0eSA9IHJnYmFNLnc7XFxuIHZlYzMgbHVtYSA9IHZlYzMoIDAuMjk5LCAwLjU4NywgMC4xMTQgKTtcXG4gZmxvYXQgbHVtYU5XID0gZG90KCByZ2JOVywgbHVtYSApO1xcbiBmbG9hdCBsdW1hTkUgPSBkb3QoIHJnYk5FLCBsdW1hICk7XFxuIGZsb2F0IGx1bWFTVyA9IGRvdCggcmdiU1csIGx1bWEgKTtcXG4gZmxvYXQgbHVtYVNFID0gZG90KCByZ2JTRSwgbHVtYSApO1xcbiBmbG9hdCBsdW1hTSA9IGRvdCggcmdiTSwgbHVtYSApO1xcbiBmbG9hdCBsdW1hTWluID0gbWluKCBsdW1hTSwgbWluKCBtaW4oIGx1bWFOVywgbHVtYU5FICksIG1pbiggbHVtYVNXLCBsdW1hU0UgKSApICk7XFxuIGZsb2F0IGx1bWFNYXggPSBtYXgoIGx1bWFNLCBtYXgoIG1heCggbHVtYU5XLCBsdW1hTkUpICwgbWF4KCBsdW1hU1csIGx1bWFTRSApICkgKTtcXG4gdmVjMiBkaXI7XFxuIGRpci54ID0gLSgobHVtYU5XICsgbHVtYU5FKSAtIChsdW1hU1cgKyBsdW1hU0UpKTtcXG4gZGlyLnkgPSAoKGx1bWFOVyArIGx1bWFTVykgLSAobHVtYU5FICsgbHVtYVNFKSk7XFxuIGZsb2F0IGRpclJlZHVjZSA9IG1heCggKCBsdW1hTlcgKyBsdW1hTkUgKyBsdW1hU1cgKyBsdW1hU0UgKSAqICggMC4yNSAqIEZYQUFfUkVEVUNFX01VTCApLCBGWEFBX1JFRFVDRV9NSU4gKTtcXG4gZmxvYXQgcmNwRGlyTWluID0gMS4wIC8gKCBtaW4oIGFicyggZGlyLnggKSwgYWJzKCBkaXIueSApICkgKyBkaXJSZWR1Y2UgKTtcXG4gZGlyID0gbWluKCB2ZWMyKCBGWEFBX1NQQU5fTUFYLCBGWEFBX1NQQU5fTUFYKSxcXG4gbWF4KCB2ZWMyKC1GWEFBX1NQQU5fTUFYLCAtRlhBQV9TUEFOX01BWCksXFxuIGRpciAqIHJjcERpck1pbikpICogcmVzb2x1dGlvbjtcXG4gdmVjMyByZ2JBID0gZGVjb2RlSERSKCB0ZXh0dXJlMkQoIHRleHR1cmUsIGdsX0ZyYWdDb29yZC54eSAqIHJlc29sdXRpb24gKyBkaXIgKiAoIDEuMCAvIDMuMCAtIDAuNSApICkgKS54eXo7XFxuIHJnYkEgKz0gZGVjb2RlSERSKCB0ZXh0dXJlMkQoIHRleHR1cmUsIGdsX0ZyYWdDb29yZC54eSAqIHJlc29sdXRpb24gKyBkaXIgKiAoIDIuMCAvIDMuMCAtIDAuNSApICkgKS54eXo7XFxuIHJnYkEgKj0gMC41O1xcbiB2ZWMzIHJnYkIgPSBkZWNvZGVIRFIoIHRleHR1cmUyRCggdGV4dHVyZSwgZ2xfRnJhZ0Nvb3JkLnh5ICogcmVzb2x1dGlvbiArIGRpciAqIC0wLjUgKSApLnh5ejtcXG4gcmdiQiArPSBkZWNvZGVIRFIoIHRleHR1cmUyRCggdGV4dHVyZSwgZ2xfRnJhZ0Nvb3JkLnh5ICogcmVzb2x1dGlvbiArIGRpciAqIDAuNSApICkueHl6O1xcbiByZ2JCICo9IDAuMjU7XFxuIHJnYkIgKz0gcmdiQSAqIDAuNTtcXG4gZmxvYXQgbHVtYUIgPSBkb3QoIHJnYkIsIGx1bWEgKTtcXG4gaWYgKCAoIGx1bWFCIDwgbHVtYU1pbiApIHx8ICggbHVtYUIgPiBsdW1hTWF4ICkgKVxcbiB7XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQoIHJnYkEsIG9wYWNpdHkgKTtcXG4gfVxcbiBlbHNlIHtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCggcmdiQiwgb3BhY2l0eSApO1xcbiB9XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2Z4YWEuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTU2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///156\n");

/***/ }),
/* 157 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.gbuffer.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nattribute vec3 position : POSITION;\\n#if defined(SECOND_PASS) || defined(FIRST_PASS)\\nattribute vec2 texcoord : TEXCOORD_0;\\nuniform vec2 uvRepeat;\\nuniform vec2 uvOffset;\\nvarying vec2 v_Texcoord;\\n#endif\\n#ifdef FIRST_PASS\\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\\nuniform mat4 world : WORLD;\\nvarying vec3 v_Normal;\\nattribute vec3 normal : NORMAL;\\nattribute vec4 tangent : TANGENT;\\nvarying vec3 v_Tangent;\\nvarying vec3 v_Bitangent;\\nvarying vec3 v_WorldPosition;\\n#endif\\n@import clay.chunk.skinning_header\\n#ifdef THIRD_PASS\\nuniform mat4 prevWorldViewProjection;\\nvarying vec4 v_ViewPosition;\\nvarying vec4 v_PrevViewPosition;\\n#ifdef SKINNING\\n#ifdef USE_SKIN_MATRICES_TEXTURE\\nuniform sampler2D prevSkinMatricesTexture;\\nmat4 getPrevSkinMatrix(float idx) {\\n return getSkinMatrix(prevSkinMatricesTexture, idx);\\n}\\n#else\\nuniform mat4 prevSkinMatrix[JOINT_COUNT];\\nmat4 getPrevSkinMatrix(float idx) {\\n return prevSkinMatrix[int(idx)];\\n}\\n#endif\\n#endif\\n#endif\\nvoid main()\\n{\\n vec3 skinnedPosition = position;\\n vec3 prevSkinnedPosition = position;\\n#ifdef FIRST_PASS\\n vec3 skinnedNormal = normal;\\n vec3 skinnedTangent = tangent.xyz;\\n bool hasTangent = dot(tangent, tangent) > 0.0;\\n#endif\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n skinnedPosition = (skinMatrixWS * vec4(position, 1.0)).xyz;\\n #ifdef FIRST_PASS\\n skinnedNormal = (skinMatrixWS * vec4(normal, 0.0)).xyz;\\n if (hasTangent) {\\n skinnedTangent = (skinMatrixWS * vec4(tangent.xyz, 0.0)).xyz;\\n }\\n #endif\\n #ifdef THIRD_PASS\\n {\\n mat4 prevSkinMatrixWS = getPrevSkinMatrix(joint.x) * weight.x;\\n if (weight.y > 1e-4) { prevSkinMatrixWS += getPrevSkinMatrix(joint.y) * weight.y; }\\n if (weight.z > 1e-4) { prevSkinMatrixWS += getPrevSkinMatrix(joint.z) * weight.z; }\\n float weightW = 1.0-weight.x-weight.y-weight.z;\\n if (weightW > 1e-4) { prevSkinMatrixWS += getPrevSkinMatrix(joint.w) * weightW; }\\n prevSkinnedPosition = (prevSkinMatrixWS * vec4(position, 1.0)).xyz;\\n }\\n #endif\\n#endif\\n#if defined(SECOND_PASS) || defined(FIRST_PASS)\\n v_Texcoord = texcoord * uvRepeat + uvOffset;\\n#endif\\n#ifdef FIRST_PASS\\n v_Normal = normalize((worldInverseTranspose * vec4(skinnedNormal, 0.0)).xyz);\\n if (hasTangent) {\\n v_Tangent = normalize((worldInverseTranspose * vec4(skinnedTangent, 0.0)).xyz);\\n v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\\n }\\n v_WorldPosition = (world * vec4(skinnedPosition, 1.0)).xyz;\\n#endif\\n#ifdef THIRD_PASS\\n v_ViewPosition = worldViewProjection * vec4(skinnedPosition, 1.0);\\n v_PrevViewPosition = prevWorldViewProjection * vec4(prevSkinnedPosition, 1.0);\\n#endif\\n gl_Position = worldViewProjection * vec4(skinnedPosition, 1.0);\\n}\\n@end\\n@export clay.deferred.gbuffer1.fragment\\nuniform mat4 viewInverse : VIEWINVERSE;\\nuniform float glossiness;\\nvarying vec2 v_Texcoord;\\nvarying vec3 v_Normal;\\nvarying vec3 v_WorldPosition;\\nuniform sampler2D normalMap;\\nuniform sampler2D diffuseMap;\\nvarying vec3 v_Tangent;\\nvarying vec3 v_Bitangent;\\nuniform sampler2D roughGlossMap;\\nuniform bool useRoughGlossMap;\\nuniform bool useRoughness;\\nuniform bool doubleSided;\\nuniform float alphaCutoff: 0.0;\\nuniform float alpha: 1.0;\\nuniform int roughGlossChannel: 0;\\nfloat indexingTexel(in vec4 texel, in int idx) {\\n if (idx == 3) return texel.a;\\n else if (idx == 1) return texel.g;\\n else if (idx == 2) return texel.b;\\n else return texel.r;\\n}\\nvoid main()\\n{\\n vec3 N = v_Normal;\\n if (doubleSided) {\\n vec3 eyePos = viewInverse[3].xyz;\\n vec3 V = eyePos - v_WorldPosition;\\n if (dot(N, V) < 0.0) {\\n N = -N;\\n }\\n }\\n if (alphaCutoff > 0.0) {\\n float a = texture2D(diffuseMap, v_Texcoord).a * alpha;\\n if (a < alphaCutoff) {\\n discard;\\n }\\n }\\n if (dot(v_Tangent, v_Tangent) > 0.0) {\\n vec3 normalTexel = texture2D(normalMap, v_Texcoord).xyz;\\n if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;\\n mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);\\n N = normalize(tbn * N);\\n }\\n }\\n gl_FragColor.rgb = (N + 1.0) * 0.5;\\n float g = glossiness;\\n if (useRoughGlossMap) {\\n float g2 = indexingTexel(texture2D(roughGlossMap, v_Texcoord), roughGlossChannel);\\n if (useRoughness) {\\n g2 = 1.0 - g2;\\n }\\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\\n }\\n gl_FragColor.a = g + 0.005;\\n}\\n@end\\n@export clay.deferred.gbuffer2.fragment\\nuniform sampler2D diffuseMap;\\nuniform sampler2D metalnessMap;\\nuniform vec3 color;\\nuniform float metalness;\\nuniform bool useMetalnessMap;\\nuniform bool linear;\\nuniform float alphaCutoff: 0.0;\\nuniform float alpha: 1.0;\\nvarying vec2 v_Texcoord;\\n@import clay.util.srgb\\nvoid main()\\n{\\n float m = metalness;\\n if (useMetalnessMap) {\\n vec4 metalnessTexel = texture2D(metalnessMap, v_Texcoord);\\n m = clamp(metalnessTexel.r + (m * 2.0 - 1.0), 0.0, 1.0);\\n }\\n vec4 texel = texture2D(diffuseMap, v_Texcoord);\\n if (linear) {\\n texel = sRGBToLinear(texel);\\n }\\n if (alphaCutoff > 0.0) {\\n float a = texel.a * alpha;\\n if (a < alphaCutoff) {\\n discard;\\n }\\n }\\n gl_FragColor.rgb = texel.rgb * color;\\n gl_FragColor.a = m + 0.005;\\n}\\n@end\\n@export clay.deferred.gbuffer3.fragment\\nuniform bool firstRender;\\nvarying vec4 v_ViewPosition;\\nvarying vec4 v_PrevViewPosition;\\nvoid main()\\n{\\n vec2 a = v_ViewPosition.xy / v_ViewPosition.w;\\n vec2 b = v_PrevViewPosition.xy / v_PrevViewPosition.w;\\n if (firstRender) {\\n gl_FragColor = vec4(0.0);\\n }\\n else {\\n gl_FragColor = vec4((a - b) * 0.5 + 0.5, 0.0, 1.0);\\n }\\n}\\n@end\\n@export clay.deferred.gbuffer.debug\\n@import clay.deferred.chunk.light_head\\nuniform sampler2D gBufferTexture4;\\nuniform int debug: 0;\\nvoid main ()\\n{\\n @import clay.deferred.chunk.gbuffer_read\\n if (debug == 0) {\\n gl_FragColor = vec4(N, 1.0);\\n }\\n else if (debug == 1) {\\n gl_FragColor = vec4(vec3(z), 1.0);\\n }\\n else if (debug == 2) {\\n gl_FragColor = vec4(position, 1.0);\\n }\\n else if (debug == 3) {\\n gl_FragColor = vec4(vec3(glossiness), 1.0);\\n }\\n else if (debug == 4) {\\n gl_FragColor = vec4(vec3(metalness), 1.0);\\n }\\n else if (debug == 5) {\\n gl_FragColor = vec4(albedo, 1.0);\\n }\\n else {\\n vec4 color = texture2D(gBufferTexture4, uv);\\n color.rg -= 0.5;\\n color.rg *= 2.0;\\n gl_FragColor = color;\\n }\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9nYnVmZmVyLmdsc2wuanM/MGVmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5kZWZlcnJlZC5nYnVmZmVyLnZlcnRleFxcbnVuaWZvcm0gbWF0NCB3b3JsZFZpZXdQcm9qZWN0aW9uIDogV09STERWSUVXUFJPSkVDVElPTjtcXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbiA6IFBPU0lUSU9OO1xcbiNpZiBkZWZpbmVkKFNFQ09ORF9QQVNTKSB8fCBkZWZpbmVkKEZJUlNUX1BBU1MpXFxuYXR0cmlidXRlIHZlYzIgdGV4Y29vcmQgOiBURVhDT09SRF8wO1xcbnVuaWZvcm0gdmVjMiB1dlJlcGVhdDtcXG51bmlmb3JtIHZlYzIgdXZPZmZzZXQ7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxuI2VuZGlmXFxuI2lmZGVmIEZJUlNUX1BBU1NcXG51bmlmb3JtIG1hdDQgd29ybGRJbnZlcnNlVHJhbnNwb3NlIDogV09STERJTlZFUlNFVFJBTlNQT1NFO1xcbnVuaWZvcm0gbWF0NCB3b3JsZCA6IFdPUkxEO1xcbnZhcnlpbmcgdmVjMyB2X05vcm1hbDtcXG5hdHRyaWJ1dGUgdmVjMyBub3JtYWwgOiBOT1JNQUw7XFxuYXR0cmlidXRlIHZlYzQgdGFuZ2VudCA6IFRBTkdFTlQ7XFxudmFyeWluZyB2ZWMzIHZfVGFuZ2VudDtcXG52YXJ5aW5nIHZlYzMgdl9CaXRhbmdlbnQ7XFxudmFyeWluZyB2ZWMzIHZfV29ybGRQb3NpdGlvbjtcXG4jZW5kaWZcXG5AaW1wb3J0IGNsYXkuY2h1bmsuc2tpbm5pbmdfaGVhZGVyXFxuI2lmZGVmIFRISVJEX1BBU1NcXG51bmlmb3JtIG1hdDQgcHJldldvcmxkVmlld1Byb2plY3Rpb247XFxudmFyeWluZyB2ZWM0IHZfVmlld1Bvc2l0aW9uO1xcbnZhcnlpbmcgdmVjNCB2X1ByZXZWaWV3UG9zaXRpb247XFxuI2lmZGVmIFNLSU5OSU5HXFxuI2lmZGVmIFVTRV9TS0lOX01BVFJJQ0VTX1RFWFRVUkVcXG51bmlmb3JtIHNhbXBsZXIyRCBwcmV2U2tpbk1hdHJpY2VzVGV4dHVyZTtcXG5tYXQ0IGdldFByZXZTa2luTWF0cml4KGZsb2F0IGlkeCkge1xcbiByZXR1cm4gZ2V0U2tpbk1hdHJpeChwcmV2U2tpbk1hdHJpY2VzVGV4dHVyZSwgaWR4KTtcXG59XFxuI2Vsc2VcXG51bmlmb3JtIG1hdDQgcHJldlNraW5NYXRyaXhbSk9JTlRfQ09VTlRdO1xcbm1hdDQgZ2V0UHJldlNraW5NYXRyaXgoZmxvYXQgaWR4KSB7XFxuIHJldHVybiBwcmV2U2tpbk1hdHJpeFtpbnQoaWR4KV07XFxufVxcbiNlbmRpZlxcbiNlbmRpZlxcbiNlbmRpZlxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWMzIHNraW5uZWRQb3NpdGlvbiA9IHBvc2l0aW9uO1xcbiB2ZWMzIHByZXZTa2lubmVkUG9zaXRpb24gPSBwb3NpdGlvbjtcXG4jaWZkZWYgRklSU1RfUEFTU1xcbiB2ZWMzIHNraW5uZWROb3JtYWwgPSBub3JtYWw7XFxuIHZlYzMgc2tpbm5lZFRhbmdlbnQgPSB0YW5nZW50Lnh5ejtcXG4gYm9vbCBoYXNUYW5nZW50ID0gZG90KHRhbmdlbnQsIHRhbmdlbnQpID4gMC4wO1xcbiNlbmRpZlxcbiNpZmRlZiBTS0lOTklOR1xcbiBAaW1wb3J0IGNsYXkuY2h1bmsuc2tpbl9tYXRyaXhcXG4gc2tpbm5lZFBvc2l0aW9uID0gKHNraW5NYXRyaXhXUyAqIHZlYzQocG9zaXRpb24sIDEuMCkpLnh5ejtcXG4gI2lmZGVmIEZJUlNUX1BBU1NcXG4gc2tpbm5lZE5vcm1hbCA9IChza2luTWF0cml4V1MgKiB2ZWM0KG5vcm1hbCwgMC4wKSkueHl6O1xcbiBpZiAoaGFzVGFuZ2VudCkge1xcbiBza2lubmVkVGFuZ2VudCA9IChza2luTWF0cml4V1MgKiB2ZWM0KHRhbmdlbnQueHl6LCAwLjApKS54eXo7XFxuIH1cXG4gI2VuZGlmXFxuICNpZmRlZiBUSElSRF9QQVNTXFxuIHtcXG4gbWF0NCBwcmV2U2tpbk1hdHJpeFdTID0gZ2V0UHJldlNraW5NYXRyaXgoam9pbnQueCkgKiB3ZWlnaHQueDtcXG4gaWYgKHdlaWdodC55ID4gMWUtNCkgeyBwcmV2U2tpbk1hdHJpeFdTICs9IGdldFByZXZTa2luTWF0cml4KGpvaW50LnkpICogd2VpZ2h0Lnk7IH1cXG4gaWYgKHdlaWdodC56ID4gMWUtNCkgeyBwcmV2U2tpbk1hdHJpeFdTICs9IGdldFByZXZTa2luTWF0cml4KGpvaW50LnopICogd2VpZ2h0Lno7IH1cXG4gZmxvYXQgd2VpZ2h0VyA9IDEuMC13ZWlnaHQueC13ZWlnaHQueS13ZWlnaHQuejtcXG4gaWYgKHdlaWdodFcgPiAxZS00KSB7IHByZXZTa2luTWF0cml4V1MgKz0gZ2V0UHJldlNraW5NYXRyaXgoam9pbnQudykgKiB3ZWlnaHRXOyB9XFxuIHByZXZTa2lubmVkUG9zaXRpb24gPSAocHJldlNraW5NYXRyaXhXUyAqIHZlYzQocG9zaXRpb24sIDEuMCkpLnh5ejtcXG4gfVxcbiAjZW5kaWZcXG4jZW5kaWZcXG4jaWYgZGVmaW5lZChTRUNPTkRfUEFTUykgfHwgZGVmaW5lZChGSVJTVF9QQVNTKVxcbiB2X1RleGNvb3JkID0gdGV4Y29vcmQgKiB1dlJlcGVhdCArIHV2T2Zmc2V0O1xcbiNlbmRpZlxcbiNpZmRlZiBGSVJTVF9QQVNTXFxuIHZfTm9ybWFsID0gbm9ybWFsaXplKCh3b3JsZEludmVyc2VUcmFuc3Bvc2UgKiB2ZWM0KHNraW5uZWROb3JtYWwsIDAuMCkpLnh5eik7XFxuIGlmIChoYXNUYW5nZW50KSB7XFxuIHZfVGFuZ2VudCA9IG5vcm1hbGl6ZSgod29ybGRJbnZlcnNlVHJhbnNwb3NlICogdmVjNChza2lubmVkVGFuZ2VudCwgMC4wKSkueHl6KTtcXG4gdl9CaXRhbmdlbnQgPSBub3JtYWxpemUoY3Jvc3Modl9Ob3JtYWwsIHZfVGFuZ2VudCkgKiB0YW5nZW50LncpO1xcbiB9XFxuIHZfV29ybGRQb3NpdGlvbiA9ICh3b3JsZCAqIHZlYzQoc2tpbm5lZFBvc2l0aW9uLCAxLjApKS54eXo7XFxuI2VuZGlmXFxuI2lmZGVmIFRISVJEX1BBU1NcXG4gdl9WaWV3UG9zaXRpb24gPSB3b3JsZFZpZXdQcm9qZWN0aW9uICogdmVjNChza2lubmVkUG9zaXRpb24sIDEuMCk7XFxuIHZfUHJldlZpZXdQb3NpdGlvbiA9IHByZXZXb3JsZFZpZXdQcm9qZWN0aW9uICogdmVjNChwcmV2U2tpbm5lZFBvc2l0aW9uLCAxLjApO1xcbiNlbmRpZlxcbiBnbF9Qb3NpdGlvbiA9IHdvcmxkVmlld1Byb2plY3Rpb24gKiB2ZWM0KHNraW5uZWRQb3NpdGlvbiwgMS4wKTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5kZWZlcnJlZC5nYnVmZmVyMS5mcmFnbWVudFxcbnVuaWZvcm0gbWF0NCB2aWV3SW52ZXJzZSA6IFZJRVdJTlZFUlNFO1xcbnVuaWZvcm0gZmxvYXQgZ2xvc3NpbmVzcztcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG52YXJ5aW5nIHZlYzMgdl9Ob3JtYWw7XFxudmFyeWluZyB2ZWMzIHZfV29ybGRQb3NpdGlvbjtcXG51bmlmb3JtIHNhbXBsZXIyRCBub3JtYWxNYXA7XFxudW5pZm9ybSBzYW1wbGVyMkQgZGlmZnVzZU1hcDtcXG52YXJ5aW5nIHZlYzMgdl9UYW5nZW50O1xcbnZhcnlpbmcgdmVjMyB2X0JpdGFuZ2VudDtcXG51bmlmb3JtIHNhbXBsZXIyRCByb3VnaEdsb3NzTWFwO1xcbnVuaWZvcm0gYm9vbCB1c2VSb3VnaEdsb3NzTWFwO1xcbnVuaWZvcm0gYm9vbCB1c2VSb3VnaG5lc3M7XFxudW5pZm9ybSBib29sIGRvdWJsZVNpZGVkO1xcbnVuaWZvcm0gZmxvYXQgYWxwaGFDdXRvZmY6IDAuMDtcXG51bmlmb3JtIGZsb2F0IGFscGhhOiAxLjA7XFxudW5pZm9ybSBpbnQgcm91Z2hHbG9zc0NoYW5uZWw6IDA7XFxuZmxvYXQgaW5kZXhpbmdUZXhlbChpbiB2ZWM0IHRleGVsLCBpbiBpbnQgaWR4KSB7XFxuIGlmIChpZHggPT0gMykgcmV0dXJuIHRleGVsLmE7XFxuIGVsc2UgaWYgKGlkeCA9PSAxKSByZXR1cm4gdGV4ZWwuZztcXG4gZWxzZSBpZiAoaWR4ID09IDIpIHJldHVybiB0ZXhlbC5iO1xcbiBlbHNlIHJldHVybiB0ZXhlbC5yO1xcbn1cXG52b2lkIG1haW4oKVxcbntcXG4gdmVjMyBOID0gdl9Ob3JtYWw7XFxuIGlmIChkb3VibGVTaWRlZCkge1xcbiB2ZWMzIGV5ZVBvcyA9IHZpZXdJbnZlcnNlWzNdLnh5ejtcXG4gdmVjMyBWID0gZXllUG9zIC0gdl9Xb3JsZFBvc2l0aW9uO1xcbiBpZiAoZG90KE4sIFYpIDwgMC4wKSB7XFxuIE4gPSAtTjtcXG4gfVxcbiB9XFxuIGlmIChhbHBoYUN1dG9mZiA+IDAuMCkge1xcbiBmbG9hdCBhID0gdGV4dHVyZTJEKGRpZmZ1c2VNYXAsIHZfVGV4Y29vcmQpLmEgKiBhbHBoYTtcXG4gaWYgKGEgPCBhbHBoYUN1dG9mZikge1xcbiBkaXNjYXJkO1xcbiB9XFxuIH1cXG4gaWYgKGRvdCh2X1RhbmdlbnQsIHZfVGFuZ2VudCkgPiAwLjApIHtcXG4gdmVjMyBub3JtYWxUZXhlbCA9IHRleHR1cmUyRChub3JtYWxNYXAsIHZfVGV4Y29vcmQpLnh5ejtcXG4gaWYgKGRvdChub3JtYWxUZXhlbCwgbm9ybWFsVGV4ZWwpID4gMC4wKSB7IE4gPSBub3JtYWxUZXhlbCAqIDIuMCAtIDEuMDtcXG4gbWF0MyB0Ym4gPSBtYXQzKHZfVGFuZ2VudCwgdl9CaXRhbmdlbnQsIHZfTm9ybWFsKTtcXG4gTiA9IG5vcm1hbGl6ZSh0Ym4gKiBOKTtcXG4gfVxcbiB9XFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSAoTiArIDEuMCkgKiAwLjU7XFxuIGZsb2F0IGcgPSBnbG9zc2luZXNzO1xcbiBpZiAodXNlUm91Z2hHbG9zc01hcCkge1xcbiBmbG9hdCBnMiA9IGluZGV4aW5nVGV4ZWwodGV4dHVyZTJEKHJvdWdoR2xvc3NNYXAsIHZfVGV4Y29vcmQpLCByb3VnaEdsb3NzQ2hhbm5lbCk7XFxuIGlmICh1c2VSb3VnaG5lc3MpIHtcXG4gZzIgPSAxLjAgLSBnMjtcXG4gfVxcbiBnID0gY2xhbXAoZzIgKyAoZyAtIDAuNSkgKiAyLjAsIDAuMCwgMS4wKTtcXG4gfVxcbiBnbF9GcmFnQ29sb3IuYSA9IGcgKyAwLjAwNTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5kZWZlcnJlZC5nYnVmZmVyMi5mcmFnbWVudFxcbnVuaWZvcm0gc2FtcGxlcjJEIGRpZmZ1c2VNYXA7XFxudW5pZm9ybSBzYW1wbGVyMkQgbWV0YWxuZXNzTWFwO1xcbnVuaWZvcm0gdmVjMyBjb2xvcjtcXG51bmlmb3JtIGZsb2F0IG1ldGFsbmVzcztcXG51bmlmb3JtIGJvb2wgdXNlTWV0YWxuZXNzTWFwO1xcbnVuaWZvcm0gYm9vbCBsaW5lYXI7XFxudW5pZm9ybSBmbG9hdCBhbHBoYUN1dG9mZjogMC4wO1xcbnVuaWZvcm0gZmxvYXQgYWxwaGE6IDEuMDtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG5AaW1wb3J0IGNsYXkudXRpbC5zcmdiXFxudm9pZCBtYWluKClcXG57XFxuIGZsb2F0IG0gPSBtZXRhbG5lc3M7XFxuIGlmICh1c2VNZXRhbG5lc3NNYXApIHtcXG4gdmVjNCBtZXRhbG5lc3NUZXhlbCA9IHRleHR1cmUyRChtZXRhbG5lc3NNYXAsIHZfVGV4Y29vcmQpO1xcbiBtID0gY2xhbXAobWV0YWxuZXNzVGV4ZWwuciArIChtICogMi4wIC0gMS4wKSwgMC4wLCAxLjApO1xcbiB9XFxuIHZlYzQgdGV4ZWwgPSB0ZXh0dXJlMkQoZGlmZnVzZU1hcCwgdl9UZXhjb29yZCk7XFxuIGlmIChsaW5lYXIpIHtcXG4gdGV4ZWwgPSBzUkdCVG9MaW5lYXIodGV4ZWwpO1xcbiB9XFxuIGlmIChhbHBoYUN1dG9mZiA+IDAuMCkge1xcbiBmbG9hdCBhID0gdGV4ZWwuYSAqIGFscGhhO1xcbiBpZiAoYSA8IGFscGhhQ3V0b2ZmKSB7XFxuIGRpc2NhcmQ7XFxuIH1cXG4gfVxcbiBnbF9GcmFnQ29sb3IucmdiID0gdGV4ZWwucmdiICogY29sb3I7XFxuIGdsX0ZyYWdDb2xvci5hID0gbSArIDAuMDA1O1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmRlZmVycmVkLmdidWZmZXIzLmZyYWdtZW50XFxudW5pZm9ybSBib29sIGZpcnN0UmVuZGVyO1xcbnZhcnlpbmcgdmVjNCB2X1ZpZXdQb3NpdGlvbjtcXG52YXJ5aW5nIHZlYzQgdl9QcmV2Vmlld1Bvc2l0aW9uO1xcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWMyIGEgPSB2X1ZpZXdQb3NpdGlvbi54eSAvIHZfVmlld1Bvc2l0aW9uLnc7XFxuIHZlYzIgYiA9IHZfUHJldlZpZXdQb3NpdGlvbi54eSAvIHZfUHJldlZpZXdQb3NpdGlvbi53O1xcbiBpZiAoZmlyc3RSZW5kZXIpIHtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCgwLjApO1xcbiB9XFxuIGVsc2Uge1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KChhIC0gYikgKiAwLjUgKyAwLjUsIDAuMCwgMS4wKTtcXG4gfVxcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmRlZmVycmVkLmdidWZmZXIuZGVidWdcXG5AaW1wb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsubGlnaHRfaGVhZFxcbnVuaWZvcm0gc2FtcGxlcjJEIGdCdWZmZXJUZXh0dXJlNDtcXG51bmlmb3JtIGludCBkZWJ1ZzogMDtcXG52b2lkIG1haW4gKClcXG57XFxuIEBpbXBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5nYnVmZmVyX3JlYWRcXG4gaWYgKGRlYnVnID09IDApIHtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNChOLCAxLjApO1xcbiB9XFxuIGVsc2UgaWYgKGRlYnVnID09IDEpIHtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKHopLCAxLjApO1xcbiB9XFxuIGVsc2UgaWYgKGRlYnVnID09IDIpIHtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNChwb3NpdGlvbiwgMS4wKTtcXG4gfVxcbiBlbHNlIGlmIChkZWJ1ZyA9PSAzKSB7XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQodmVjMyhnbG9zc2luZXNzKSwgMS4wKTtcXG4gfVxcbiBlbHNlIGlmIChkZWJ1ZyA9PSA0KSB7XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQodmVjMyhtZXRhbG5lc3MpLCAxLjApO1xcbiB9XFxuIGVsc2UgaWYgKGRlYnVnID09IDUpIHtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNChhbGJlZG8sIDEuMCk7XFxuIH1cXG4gZWxzZSB7XFxuIHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQoZ0J1ZmZlclRleHR1cmU0LCB1dik7XFxuIGNvbG9yLnJnIC09IDAuNTtcXG4gY29sb3IucmcgKj0gMi4wO1xcbiBnbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG4gfVxcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvZ2J1ZmZlci5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///157\n");

/***/ }),
/* 158 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.chunk.light_head\\nuniform sampler2D gBufferTexture1;\\nuniform sampler2D gBufferTexture2;\\nuniform sampler2D gBufferTexture3;\\nuniform vec2 windowSize: WINDOW_SIZE;\\nuniform vec4 viewport: VIEWPORT;\\nuniform mat4 viewProjectionInv;\\n#ifdef DEPTH_ENCODED\\n@import clay.util.decode_float\\n#endif\\n@end\\n@export clay.deferred.chunk.gbuffer_read\\n vec2 uv = gl_FragCoord.xy / windowSize;\\n vec2 uv2 = (gl_FragCoord.xy - viewport.xy) / viewport.zw;\\n vec4 texel1 = texture2D(gBufferTexture1, uv);\\n vec4 texel3 = texture2D(gBufferTexture3, uv);\\n if (dot(texel1.rgb, vec3(1.0)) == 0.0) {\\n discard;\\n }\\n float glossiness = texel1.a;\\n float metalness = texel3.a;\\n vec3 N = texel1.rgb * 2.0 - 1.0;\\n float z = texture2D(gBufferTexture2, uv).r * 2.0 - 1.0;\\n vec2 xy = uv2 * 2.0 - 1.0;\\n vec4 projectedPos = vec4(xy, z, 1.0);\\n vec4 p4 = viewProjectionInv * projectedPos;\\n vec3 position = p4.xyz / p4.w;\\n vec3 albedo = texel3.rgb;\\n vec3 diffuseColor = albedo * (1.0 - metalness);\\n vec3 specularColor = mix(vec3(0.04), albedo, metalness);\\n@end\\n@export clay.deferred.chunk.light_equation\\nfloat D_Phong(in float g, in float ndh) {\\n float a = pow(8192.0, g);\\n return (a + 2.0) / 8.0 * pow(ndh, a);\\n}\\nfloat D_GGX(in float g, in float ndh) {\\n float r = 1.0 - g;\\n float a = r * r;\\n float tmp = ndh * ndh * (a - 1.0) + 1.0;\\n return a / (3.1415926 * tmp * tmp);\\n}\\nvec3 F_Schlick(in float ndv, vec3 spec) {\\n return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);\\n}\\nvec3 lightEquation(\\n in vec3 lightColor, in vec3 diffuseColor, in vec3 specularColor,\\n in float ndl, in float ndh, in float ndv, in float g\\n)\\n{\\n return ndl * lightColor\\n * (diffuseColor + D_Phong(g, ndh) * F_Schlick(ndv, specularColor));\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9jaHVuay5nbHNsLmpzPzk5ZjEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsubGlnaHRfaGVhZFxcbnVuaWZvcm0gc2FtcGxlcjJEIGdCdWZmZXJUZXh0dXJlMTtcXG51bmlmb3JtIHNhbXBsZXIyRCBnQnVmZmVyVGV4dHVyZTI7XFxudW5pZm9ybSBzYW1wbGVyMkQgZ0J1ZmZlclRleHR1cmUzO1xcbnVuaWZvcm0gdmVjMiB3aW5kb3dTaXplOiBXSU5ET1dfU0laRTtcXG51bmlmb3JtIHZlYzQgdmlld3BvcnQ6IFZJRVdQT1JUO1xcbnVuaWZvcm0gbWF0NCB2aWV3UHJvamVjdGlvbkludjtcXG4jaWZkZWYgREVQVEhfRU5DT0RFRFxcbkBpbXBvcnQgY2xheS51dGlsLmRlY29kZV9mbG9hdFxcbiNlbmRpZlxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsuZ2J1ZmZlcl9yZWFkXFxuIHZlYzIgdXYgPSBnbF9GcmFnQ29vcmQueHkgLyB3aW5kb3dTaXplO1xcbiB2ZWMyIHV2MiA9IChnbF9GcmFnQ29vcmQueHkgLSB2aWV3cG9ydC54eSkgLyB2aWV3cG9ydC56dztcXG4gdmVjNCB0ZXhlbDEgPSB0ZXh0dXJlMkQoZ0J1ZmZlclRleHR1cmUxLCB1dik7XFxuIHZlYzQgdGV4ZWwzID0gdGV4dHVyZTJEKGdCdWZmZXJUZXh0dXJlMywgdXYpO1xcbiBpZiAoZG90KHRleGVsMS5yZ2IsIHZlYzMoMS4wKSkgPT0gMC4wKSB7XFxuIGRpc2NhcmQ7XFxuIH1cXG4gZmxvYXQgZ2xvc3NpbmVzcyA9IHRleGVsMS5hO1xcbiBmbG9hdCBtZXRhbG5lc3MgPSB0ZXhlbDMuYTtcXG4gdmVjMyBOID0gdGV4ZWwxLnJnYiAqIDIuMCAtIDEuMDtcXG4gZmxvYXQgeiA9IHRleHR1cmUyRChnQnVmZmVyVGV4dHVyZTIsIHV2KS5yICogMi4wIC0gMS4wO1xcbiB2ZWMyIHh5ID0gdXYyICogMi4wIC0gMS4wO1xcbiB2ZWM0IHByb2plY3RlZFBvcyA9IHZlYzQoeHksIHosIDEuMCk7XFxuIHZlYzQgcDQgPSB2aWV3UHJvamVjdGlvbkludiAqIHByb2plY3RlZFBvcztcXG4gdmVjMyBwb3NpdGlvbiA9IHA0Lnh5eiAvIHA0Lnc7XFxuIHZlYzMgYWxiZWRvID0gdGV4ZWwzLnJnYjtcXG4gdmVjMyBkaWZmdXNlQ29sb3IgPSBhbGJlZG8gKiAoMS4wIC0gbWV0YWxuZXNzKTtcXG4gdmVjMyBzcGVjdWxhckNvbG9yID0gbWl4KHZlYzMoMC4wNCksIGFsYmVkbywgbWV0YWxuZXNzKTtcXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmRlZmVycmVkLmNodW5rLmxpZ2h0X2VxdWF0aW9uXFxuZmxvYXQgRF9QaG9uZyhpbiBmbG9hdCBnLCBpbiBmbG9hdCBuZGgpIHtcXG4gZmxvYXQgYSA9IHBvdyg4MTkyLjAsIGcpO1xcbiByZXR1cm4gKGEgKyAyLjApIC8gOC4wICogcG93KG5kaCwgYSk7XFxufVxcbmZsb2F0IERfR0dYKGluIGZsb2F0IGcsIGluIGZsb2F0IG5kaCkge1xcbiBmbG9hdCByID0gMS4wIC0gZztcXG4gZmxvYXQgYSA9IHIgKiByO1xcbiBmbG9hdCB0bXAgPSBuZGggKiBuZGggKiAoYSAtIDEuMCkgKyAxLjA7XFxuIHJldHVybiBhIC8gKDMuMTQxNTkyNiAqIHRtcCAqIHRtcCk7XFxufVxcbnZlYzMgRl9TY2hsaWNrKGluIGZsb2F0IG5kdiwgdmVjMyBzcGVjKSB7XFxuIHJldHVybiBzcGVjICsgKDEuMCAtIHNwZWMpICogcG93KDEuMCAtIG5kdiwgNS4wKTtcXG59XFxudmVjMyBsaWdodEVxdWF0aW9uKFxcbiBpbiB2ZWMzIGxpZ2h0Q29sb3IsIGluIHZlYzMgZGlmZnVzZUNvbG9yLCBpbiB2ZWMzIHNwZWN1bGFyQ29sb3IsXFxuIGluIGZsb2F0IG5kbCwgaW4gZmxvYXQgbmRoLCBpbiBmbG9hdCBuZHYsIGluIGZsb2F0IGdcXG4pXFxue1xcbiByZXR1cm4gbmRsICogbGlnaHRDb2xvclxcbiAqIChkaWZmdXNlQ29sb3IgKyBEX1Bob25nKGcsIG5kaCkgKiBGX1NjaGxpY2sobmR2LCBzcGVjdWxhckNvbG9yKSk7XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9jaHVuay5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///158\n");

/***/ }),
/* 159 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__FrameBuffer__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__compositor_Pass__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__geometry_Sphere__ = __webpack_require__(55);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__geometry_Cone__ = __webpack_require__(63);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__geometry_Cylinder__ = __webpack_require__(109);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__GBuffer__ = __webpack_require__(108);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__shader_source_prez_glsl_js__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__shader_source_util_glsl_js__ = __webpack_require__(87);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__shader_source_deferred_lightvolume_glsl_js__ = __webpack_require__(160);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__shader_source_deferred_spot_glsl_js__ = __webpack_require__(161);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__shader_source_deferred_directional_glsl_js__ = __webpack_require__(162);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__shader_source_deferred_ambient_glsl_js__ = __webpack_require__(163);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__shader_source_deferred_ambientsh_glsl_js__ = __webpack_require__(164);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__shader_source_deferred_ambientcubemap_glsl_js__ = __webpack_require__(165);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__shader_source_deferred_point_glsl_js__ = __webpack_require__(166);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__shader_source_deferred_sphere_glsl_js__ = __webpack_require__(167);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__shader_source_deferred_tube_glsl_js__ = __webpack_require__(168);\n// Light-pre pass deferred rendering\n// http://www.realtimerendering.com/blog/deferred-lighting-approaches/\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Light shaders\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_14__shader_source_prez_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_15__shader_source_util_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_16__shader_source_deferred_lightvolume_glsl_js__[\"a\" /* default */]);\n\n// Light shaders\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_17__shader_source_deferred_spot_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_18__shader_source_deferred_directional_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_19__shader_source_deferred_ambient_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_20__shader_source_deferred_ambientsh_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_21__shader_source_deferred_ambientcubemap_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_22__shader_source_deferred_point_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_23__shader_source_deferred_sphere_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_24__shader_source_deferred_tube_glsl_js__[\"a\" /* default */]);\n\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_14__shader_source_prez_glsl_js__[\"a\" /* default */]);\n\n/**\n * Deferred renderer\n * @constructor\n * @alias clay.deferred.Renderer\n * @extends clay.core.Base\n */\nvar DeferredRenderer = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n\n    var fullQuadVertex = __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.compositor.vertex');\n    var lightVolumeVertex = __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.deferred.light_volume.vertex');\n\n    var directionalLightShader = new __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */](fullQuadVertex, __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.deferred.directional_light'));\n\n    var lightAccumulateBlendFunc = function (gl) {\n        gl.blendEquation(gl.FUNC_ADD);\n        gl.blendFuncSeparate(gl.ONE, gl.ONE, gl.ONE, gl.ONE);\n    };\n\n    var createLightPassMat = function (shader) {\n        return new __WEBPACK_IMPORTED_MODULE_2__Material__[\"a\" /* default */]({\n            shader: shader,\n            blend: lightAccumulateBlendFunc,\n            transparent: true,\n            depthMask: false\n        });\n    };\n\n    var createVolumeShader = function (name) {\n        return new __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */](lightVolumeVertex, __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.deferred.' + name));\n    };\n\n    // Rotate and positioning to fit the spot light\n    // Which the cusp of cone pointing to the positive z\n    // and positioned on the origin\n    var coneGeo = new __WEBPACK_IMPORTED_MODULE_9__geometry_Cone__[\"a\" /* default */]({\n        capSegments: 10\n    });\n    var mat = new __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */]();\n    mat.rotateX(Math.PI / 2)\n        .translate(new __WEBPACK_IMPORTED_MODULE_12__math_Vector3__[\"a\" /* default */](0, -1, 0));\n\n    coneGeo.applyTransform(mat);\n\n    var cylinderGeo = new __WEBPACK_IMPORTED_MODULE_10__geometry_Cylinder__[\"a\" /* default */]({\n        capSegments: 10\n    });\n    // Align with x axis\n    mat.identity().rotateZ(Math.PI / 2);\n    cylinderGeo.applyTransform(mat);\n\n    return /** @lends clay.deferred.Renderer# */ {\n\n        /**\n         * Provide ShadowMapPass for shadow rendering.\n         * @type {clay.prePass.ShadowMap}\n         */\n        shadowMapPass: null,\n        /**\n         * If enable auto resizing from given defualt renderer size.\n         * @type {boolean}\n         */\n        autoResize: true,\n\n        _createLightPassMat: createLightPassMat,\n\n        _gBuffer: new __WEBPACK_IMPORTED_MODULE_13__GBuffer__[\"a\" /* default */](),\n\n        _lightAccumFrameBuffer: new __WEBPACK_IMPORTED_MODULE_3__FrameBuffer__[\"a\" /* default */](),\n\n        _lightAccumTex: new __WEBPACK_IMPORTED_MODULE_5__Texture2D__[\"a\" /* default */]({\n            // FIXME Device not support float texture\n            type: __WEBPACK_IMPORTED_MODULE_6__Texture__[\"a\" /* default */].HALF_FLOAT,\n            minFilter: __WEBPACK_IMPORTED_MODULE_6__Texture__[\"a\" /* default */].NEAREST,\n            magFilter: __WEBPACK_IMPORTED_MODULE_6__Texture__[\"a\" /* default */].NEAREST\n        }),\n\n        _fullQuadPass: new __WEBPACK_IMPORTED_MODULE_4__compositor_Pass__[\"a\" /* default */]({\n            blendWithPrevious: true\n        }),\n\n        _directionalLightMat: createLightPassMat(directionalLightShader),\n\n        _ambientMat: createLightPassMat(new __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */](\n            fullQuadVertex, __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.deferred.ambient_light')\n        )),\n        _ambientSHMat: createLightPassMat(new __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */](\n            fullQuadVertex, __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.deferred.ambient_sh_light')\n        )),\n        _ambientCubemapMat: createLightPassMat(new __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */](\n            fullQuadVertex, __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.deferred.ambient_cubemap_light')\n        )),\n\n        _spotLightShader: createVolumeShader('spot_light'),\n        _pointLightShader: createVolumeShader('point_light'),\n\n        _sphereLightShader: createVolumeShader('sphere_light'),\n        _tubeLightShader: createVolumeShader('tube_light'),\n\n        _lightSphereGeo: new __WEBPACK_IMPORTED_MODULE_8__geometry_Sphere__[\"a\" /* default */]({\n            widthSegments: 10,\n            heightSegements: 10\n        }),\n\n        _lightConeGeo: coneGeo,\n\n        _lightCylinderGeo: cylinderGeo,\n\n        _outputPass: new __WEBPACK_IMPORTED_MODULE_4__compositor_Pass__[\"a\" /* default */]({\n            fragment: __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.compositor.output')\n        })\n    };\n}, /** @lends clay.deferred.Renderer# */ {\n    /**\n     * Do render\n     * @param {clay.Renderer} renderer\n     * @param {clay.Scene} scene\n     * @param {clay.Camera} camera\n     * @param {Object} [opts]\n     * @param {boolean} [opts.renderToTarget = false] If not ouput and render to the target texture\n     * @param {boolean} [opts.notUpdateShadow = true] If not update the shadow.\n     * @param {boolean} [opts.notUpdateScene = true] If not update the scene.\n     */\n    render: function (renderer, scene, camera, opts) {\n\n        opts = opts || {};\n        opts.renderToTarget = opts.renderToTarget || false;\n        opts.notUpdateShadow = opts.notUpdateShadow || false;\n        opts.notUpdateScene = opts.notUpdateScene || false;\n\n        if (!opts.notUpdateScene) {\n            scene.update(false, true);\n        }\n        scene.updateLights();\n        // Render list will be updated in gbuffer.\n\n        camera.update(true);\n\n        // PENDING For stereo rendering\n        var dpr = renderer.getDevicePixelRatio();\n        if (this.autoResize\n            && (renderer.getWidth() * dpr !== this._lightAccumTex.width\n            || renderer.getHeight() * dpr !== this._lightAccumTex.height)\n        ) {\n            this.resize(renderer.getWidth() * dpr, renderer.getHeight() * dpr);\n        }\n\n        this._gBuffer.update(renderer, scene, camera);\n\n        // Accumulate light buffer\n        this._accumulateLightBuffer(renderer, scene, camera, !opts.notUpdateShadow);\n\n        if (!opts.renderToTarget) {\n            this._outputPass.setUniform('texture', this._lightAccumTex);\n\n            this._outputPass.render(renderer);\n            // this._gBuffer.renderDebug(renderer, camera, 'normal');\n        }\n    },\n\n    /**\n     * @return {clay.Texture2D}\n     */\n    getTargetTexture: function () {\n        return this._lightAccumTex;\n    },\n\n    /**\n     * @return {clay.FrameBuffer}\n     */\n    getTargetFrameBuffer: function () {\n        return this._lightAccumFrameBuffer;\n    },\n\n    /**\n     * @return {clay.deferred.GBuffer}\n     */\n    getGBuffer: function () {\n        return this._gBuffer;\n    },\n\n    // TODO is dpr needed?\n    setViewport: function (x, y, width, height, dpr) {\n        this._gBuffer.setViewport(x, y, width, height, dpr);\n        this._lightAccumFrameBuffer.viewport = this._gBuffer.getViewport();\n    },\n\n    // getFullQuadLightPass: function () {\n    //     return this._fullQuadPass;\n    // },\n\n    /**\n     * Set renderer size.\n     * @param {number} width\n     * @param {number} height\n     */\n    resize: function (width, height) {\n        this._lightAccumTex.width = width;\n        this._lightAccumTex.height = height;\n\n        // PENDING viewport ?\n        this._gBuffer.resize(width, height);\n    },\n\n    _accumulateLightBuffer: function (renderer, scene, camera, updateShadow) {\n        var gl = renderer.gl;\n        var lightAccumTex = this._lightAccumTex;\n        var lightAccumFrameBuffer = this._lightAccumFrameBuffer;\n\n        var eyePosition = camera.getWorldPosition().array;\n\n        // Update volume meshes\n        for (var i = 0; i < scene.lights.length; i++) {\n            if (!scene.lights[i].invisible) {\n                this._updateLightProxy(scene.lights[i]);\n            }\n        }\n\n        var shadowMapPass = this.shadowMapPass;\n        if (shadowMapPass && updateShadow) {\n            gl.clearColor(1, 1, 1, 1);\n            this._prepareLightShadow(renderer, scene, camera);\n        }\n\n        this.trigger('beforelightaccumulate', renderer, scene, camera, updateShadow);\n\n        lightAccumFrameBuffer.attach(lightAccumTex);\n        lightAccumFrameBuffer.bind(renderer);\n        var clearColor = renderer.clearColor;\n\n        var viewport = lightAccumFrameBuffer.viewport;\n        if (viewport) {\n            var dpr = viewport.devicePixelRatio;\n            // use scissor to make sure only clear the viewport\n            gl.enable(gl.SCISSOR_TEST);\n            gl.scissor(viewport.x * dpr, viewport.y * dpr, viewport.width * dpr, viewport.height * dpr);\n        }\n        gl.clearColor(clearColor[0], clearColor[1], clearColor[2], clearColor[3]);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.enable(gl.BLEND);\n        if (viewport) {\n            gl.disable(gl.SCISSOR_TEST);\n        }\n\n        this.trigger('startlightaccumulate', renderer, scene, camera);\n\n        var viewProjectionInv = new __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */]();\n        __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */].multiply(viewProjectionInv, camera.worldTransform, camera.invProjectionMatrix);\n\n        var volumeMeshList = [];\n\n        for (var i = 0; i < scene.lights.length; i++) {\n            var light = scene.lights[i];\n            if (light.invisible) {\n                continue;\n            }\n\n            var uTpl = light.uniformTemplates;\n\n            var volumeMesh = light.volumeMesh || light.__volumeMesh;\n\n            if (volumeMesh) {\n                var material = volumeMesh.material;\n                // Volume mesh will affect the scene bounding box when rendering\n                // if castShadow is true\n                volumeMesh.castShadow = false;\n\n                var unknownLightType = false;\n                switch (light.type) {\n                    case 'POINT_LIGHT':\n                        material.setUniform('lightColor', uTpl.pointLightColor.value(light));\n                        material.setUniform('lightRange', uTpl.pointLightRange.value(light));\n                        material.setUniform('lightPosition', uTpl.pointLightPosition.value(light));\n                        break;\n                    case 'SPOT_LIGHT':\n                        material.setUniform('lightPosition', uTpl.spotLightPosition.value(light));\n                        material.setUniform('lightColor', uTpl.spotLightColor.value(light));\n                        material.setUniform('lightRange', uTpl.spotLightRange.value(light));\n                        material.setUniform('lightDirection', uTpl.spotLightDirection.value(light));\n                        material.setUniform('umbraAngleCosine', uTpl.spotLightUmbraAngleCosine.value(light));\n                        material.setUniform('penumbraAngleCosine', uTpl.spotLightPenumbraAngleCosine.value(light));\n                        material.setUniform('falloffFactor', uTpl.spotLightFalloffFactor.value(light));\n                        break;\n                    case 'SPHERE_LIGHT':\n                        material.setUniform('lightColor', uTpl.sphereLightColor.value(light));\n                        material.setUniform('lightRange', uTpl.sphereLightRange.value(light));\n                        material.setUniform('lightRadius', uTpl.sphereLightRadius.value(light));\n                        material.setUniform('lightPosition', uTpl.sphereLightPosition.value(light));\n                        break;\n                    case 'TUBE_LIGHT':\n                        material.setUniform('lightColor', uTpl.tubeLightColor.value(light));\n                        material.setUniform('lightRange', uTpl.tubeLightRange.value(light));\n                        material.setUniform('lightExtend', uTpl.tubeLightExtend.value(light));\n                        material.setUniform('lightPosition', uTpl.tubeLightPosition.value(light));\n                        break;\n                    default:\n                        unknownLightType = true;\n                }\n\n                if (unknownLightType) {\n                    continue;\n                }\n\n                material.setUniform('eyePosition', eyePosition);\n                material.setUniform('viewProjectionInv', viewProjectionInv.array);\n                material.setUniform('gBufferTexture1', this._gBuffer.getTargetTexture1());\n                material.setUniform('gBufferTexture2', this._gBuffer.getTargetTexture2());\n                material.setUniform('gBufferTexture3', this._gBuffer.getTargetTexture3());\n\n                volumeMeshList.push(volumeMesh);\n\n            }\n            else {\n                var pass = this._fullQuadPass;\n                var unknownLightType = false;\n                // Full quad light\n                switch (light.type) {\n                    case 'AMBIENT_LIGHT':\n                        pass.material = this._ambientMat;\n                        pass.material.setUniform('lightColor', uTpl.ambientLightColor.value(light));\n                        break;\n                    case 'AMBIENT_SH_LIGHT':\n                        pass.material = this._ambientSHMat;\n                        pass.material.setUniform('lightColor', uTpl.ambientSHLightColor.value(light));\n                        pass.material.setUniform('lightCoefficients', uTpl.ambientSHLightCoefficients.value(light));\n                        break;\n                    case 'AMBIENT_CUBEMAP_LIGHT':\n                        pass.material = this._ambientCubemapMat;\n                        pass.material.setUniform('lightColor', uTpl.ambientCubemapLightColor.value(light));\n                        pass.material.setUniform('lightCubemap', uTpl.ambientCubemapLightCubemap.value(light));\n                        pass.material.setUniform('brdfLookup', uTpl.ambientCubemapLightBRDFLookup.value(light));\n                        break;\n                    case 'DIRECTIONAL_LIGHT':\n                        var hasShadow = shadowMapPass && light.castShadow;\n                        pass.material = this._directionalLightMat;\n                        pass.material[hasShadow ? 'define' : 'undefine']('fragment', 'SHADOWMAP_ENABLED');\n                        if (hasShadow) {\n                            pass.material.define('fragment', 'SHADOW_CASCADE', light.shadowCascade);\n                        }\n                        pass.material.setUniform('lightColor', uTpl.directionalLightColor.value(light));\n                        pass.material.setUniform('lightDirection', uTpl.directionalLightDirection.value(light));\n                        break;\n                    default:\n                        // Unkonw light type\n                        unknownLightType = true;\n                }\n                if (unknownLightType) {\n                    continue;\n                }\n\n                var passMaterial = pass.material;\n                passMaterial.setUniform('eyePosition', eyePosition);\n                passMaterial.setUniform('viewProjectionInv', viewProjectionInv.array);\n                passMaterial.setUniform('gBufferTexture1', this._gBuffer.getTargetTexture1());\n                passMaterial.setUniform('gBufferTexture2', this._gBuffer.getTargetTexture2());\n                passMaterial.setUniform('gBufferTexture3', this._gBuffer.getTargetTexture3());\n\n                // TODO\n                if (shadowMapPass && light.castShadow) {\n                    passMaterial.setUniform('lightShadowMap', light.__shadowMap);\n                    passMaterial.setUniform('lightMatrices', light.__lightMatrices);\n                    passMaterial.setUniform('shadowCascadeClipsNear', light.__cascadeClipsNear);\n                    passMaterial.setUniform('shadowCascadeClipsFar', light.__cascadeClipsFar);\n\n                    passMaterial.setUniform('lightShadowMapSize', light.shadowResolution);\n                }\n\n                pass.renderQuad(renderer);\n            }\n        }\n\n        this._renderVolumeMeshList(renderer, scene, camera, volumeMeshList);\n\n        this.trigger('lightaccumulate', renderer, scene, camera);\n\n        lightAccumFrameBuffer.unbind(renderer);\n\n        this.trigger('afterlightaccumulate', renderer, scene, camera);\n\n    },\n\n    _prepareLightShadow: (function () {\n        var worldView = new __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */]();\n        return function (renderer, scene, camera) {\n\n            for (var i = 0; i < scene.lights.length; i++) {\n                var light = scene.lights[i];\n                var volumeMesh = light.volumeMesh || light.__volumeMesh;\n                if (!light.castShadow || light.invisible) {\n                    continue;\n                }\n\n                switch (light.type) {\n                    case 'POINT_LIGHT':\n                    case 'SPOT_LIGHT':\n                        // Frustum culling\n                        __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */].multiply(worldView, camera.viewMatrix, volumeMesh.worldTransform);\n                        if (scene.isFrustumCulled(volumeMesh, camera, worldView.array)) {\n                            continue;\n                        }\n\n                        this._prepareSingleLightShadow(\n                            renderer, scene, camera, light, volumeMesh.material\n                        );\n                        break;\n                    case 'DIRECTIONAL_LIGHT':\n                        this._prepareSingleLightShadow(\n                            renderer, scene, camera, light, null\n                        );\n                }\n            }\n        };\n    })(),\n\n    _prepareSingleLightShadow: function (renderer, scene, camera, light, material) {\n        switch (light.type) {\n            case 'POINT_LIGHT':\n                var shadowMaps = [];\n                this.shadowMapPass.renderPointLightShadow(\n                    renderer, scene, light, shadowMaps\n                );\n                material.setUniform('lightShadowMap', shadowMaps[0]);\n                material.setUniform('lightShadowMapSize', light.shadowResolution);\n                break;\n            case 'SPOT_LIGHT':\n                var shadowMaps = [];\n                var lightMatrices = [];\n                this.shadowMapPass.renderSpotLightShadow(\n                    renderer, scene, light, lightMatrices, shadowMaps\n                );\n                material.setUniform('lightShadowMap', shadowMaps[0]);\n                material.setUniform('lightMatrix', lightMatrices[0]);\n                material.setUniform('lightShadowMapSize', light.shadowResolution);\n                break;\n            case 'DIRECTIONAL_LIGHT':\n                var shadowMaps = [];\n                var lightMatrices = [];\n                var cascadeClips = [];\n                this.shadowMapPass.renderDirectionalLightShadow(\n                    renderer, scene, camera, light, cascadeClips, lightMatrices, shadowMaps\n                );\n                var cascadeClipsNear = cascadeClips.slice();\n                var cascadeClipsFar = cascadeClips.slice();\n                cascadeClipsNear.pop();\n                cascadeClipsFar.shift();\n\n                // Iterate from far to near\n                cascadeClipsNear.reverse();\n                cascadeClipsFar.reverse();\n                lightMatrices.reverse();\n\n                light.__cascadeClipsNear = cascadeClipsNear;\n                light.__cascadeClipsFar = cascadeClipsFar;\n                light.__shadowMap = shadowMaps[0];\n                light.__lightMatrices = lightMatrices;\n                break;\n        }\n    },\n\n    // Update light volume mesh\n    // Light volume mesh is rendered in light accumulate pass instead of full quad.\n    // It will reduce pixels significantly when local light is relatively small.\n    // And we can use custom volume mesh to shape the light.\n    //\n    // See \"Deferred Shading Optimizations\" in GDC2011\n    _updateLightProxy: function (light) {\n        var volumeMesh;\n        if (light.volumeMesh) {\n            volumeMesh = light.volumeMesh;\n        }\n        else {\n            switch (light.type) {\n                // Only local light (point and spot) needs volume mesh.\n                // Directional and ambient light renders in full quad\n                case 'POINT_LIGHT':\n                case 'SPHERE_LIGHT':\n                    var shader = light.type === 'SPHERE_LIGHT'\n                        ? this._sphereLightShader : this._pointLightShader;\n                    // Volume mesh created automatically\n                    if (!light.__volumeMesh) {\n                        light.__volumeMesh = new __WEBPACK_IMPORTED_MODULE_7__Mesh__[\"a\" /* default */]({\n                            material: this._createLightPassMat(shader),\n                            geometry: this._lightSphereGeo,\n                            // Disable culling\n                            // if light volume mesh intersect camera near plane\n                            // We need mesh inside can still be rendered\n                            culling: false\n                        });\n                    }\n                    volumeMesh = light.__volumeMesh;\n                    var r = light.range + (light.radius || 0);\n                    volumeMesh.scale.set(r, r, r);\n                    break;\n                case 'SPOT_LIGHT':\n                    light.__volumeMesh = light.__volumeMesh || new __WEBPACK_IMPORTED_MODULE_7__Mesh__[\"a\" /* default */]({\n                        material: this._createLightPassMat(this._spotLightShader),\n                        geometry: this._lightConeGeo,\n                        culling: false\n                    });\n                    volumeMesh = light.__volumeMesh;\n                    var aspect = Math.tan(light.penumbraAngle * Math.PI / 180);\n                    var range = light.range;\n                    volumeMesh.scale.set(aspect * range, aspect * range, range / 2);\n                    break;\n                case 'TUBE_LIGHT':\n                    light.__volumeMesh = light.__volumeMesh || new __WEBPACK_IMPORTED_MODULE_7__Mesh__[\"a\" /* default */]({\n                        material: this._createLightPassMat(this._tubeLightShader),\n                        geometry: this._lightCylinderGeo,\n                        culling: false\n                    });\n                    volumeMesh = light.__volumeMesh;\n                    var range = light.range;\n                    volumeMesh.scale.set(light.length / 2 + range, range, range);\n                    break;\n            }\n        }\n        if (volumeMesh) {\n            volumeMesh.update();\n            // Apply light transform\n            __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */].multiply(volumeMesh.worldTransform, light.worldTransform, volumeMesh.worldTransform);\n            var hasShadow = this.shadowMapPass && light.castShadow;\n            volumeMesh.material[hasShadow ? 'define' : 'undefine']('fragment', 'SHADOWMAP_ENABLED');\n        }\n    },\n\n    _renderVolumeMeshList: (function () {\n        var worldView = new __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */]();\n        var preZMaterial = new __WEBPACK_IMPORTED_MODULE_2__Material__[\"a\" /* default */]({\n            shader: new __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.prez.vertex'), __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.prez.fragment'))\n        });\n        function getPreZMaterial() {\n            return preZMaterial;\n        }\n        return function (renderer, scene, camera, volumeMeshList) {\n            var gl = renderer.gl;\n\n            gl.depthFunc(gl.LEQUAL);\n\n            for (var i = 0; i < volumeMeshList.length; i++) {\n                var volumeMesh = volumeMeshList[i];\n\n                // Frustum culling\n                __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */].multiply(worldView, camera.viewMatrix, volumeMesh.worldTransform);\n                if (scene.isFrustumCulled(volumeMesh, camera, worldView.array)) {\n                    continue;\n                }\n\n                // Use prez to avoid one pixel rendered twice\n                gl.colorMask(false, false, false, false);\n                gl.depthMask(true);\n                // depthMask must be enabled before clear DEPTH_BUFFER\n                gl.clear(gl.DEPTH_BUFFER_BIT);\n\n                renderer.renderPass([volumeMesh], camera, {\n                    getMaterial: getPreZMaterial\n                });\n\n                // Render light\n                gl.colorMask(true, true, true, true);\n\n                volumeMesh.material.depthMask = true;\n                renderer.renderPass([volumeMesh], camera);\n            }\n\n            gl.depthFunc(gl.LESS);\n        };\n    })(),\n\n    /**\n     * @param  {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n        this._gBuffer.dispose(renderer);\n\n        this._lightAccumFrameBuffer.dispose(renderer);\n        this._lightAccumTex.dispose(renderer);\n\n        this._lightConeGeo.dispose(renderer);\n        this._lightCylinderGeo.dispose(renderer);\n        this._lightSphereGeo.dispose(renderer);\n\n        this._fullQuadPass.dispose(renderer);\n        this._outputPass.dispose(renderer);\n\n        this._directionalLightMat.dispose(renderer);\n\n        this.shadowMapPass.dispose(renderer);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (DeferredRenderer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZGVmZXJyZWQvUmVuZGVyZXIuanM/NjNiNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMaWdodC1wcmUgcGFzcyBkZWZlcnJlZCByZW5kZXJpbmdcbi8vIGh0dHA6Ly93d3cucmVhbHRpbWVyZW5kZXJpbmcuY29tL2Jsb2cvZGVmZXJyZWQtbGlnaHRpbmctYXBwcm9hY2hlcy9cbmltcG9ydCBCYXNlIGZyb20gJy4uL2NvcmUvQmFzZSc7XG5pbXBvcnQgU2hhZGVyIGZyb20gJy4uL1NoYWRlcic7XG5pbXBvcnQgTWF0ZXJpYWwgZnJvbSAnLi4vTWF0ZXJpYWwnO1xuaW1wb3J0IEZyYW1lQnVmZmVyIGZyb20gJy4uL0ZyYW1lQnVmZmVyJztcbmltcG9ydCBGdWxsUXVhZFBhc3MgZnJvbSAnLi4vY29tcG9zaXRvci9QYXNzJztcbmltcG9ydCBUZXh0dXJlMkQgZnJvbSAnLi4vVGV4dHVyZTJEJztcbmltcG9ydCBUZXh0dXJlIGZyb20gJy4uL1RleHR1cmUnO1xuaW1wb3J0IE1lc2ggZnJvbSAnLi4vTWVzaCc7XG5pbXBvcnQgU3BoZXJlR2VvIGZyb20gJy4uL2dlb21ldHJ5L1NwaGVyZSc7XG5pbXBvcnQgQ29uZUdlbyBmcm9tICcuLi9nZW9tZXRyeS9Db25lJztcbmltcG9ydCBDeWxpbmRlckdlbyBmcm9tICcuLi9nZW9tZXRyeS9DeWxpbmRlcic7XG5pbXBvcnQgTWF0cml4NCBmcm9tICcuLi9tYXRoL01hdHJpeDQnO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi4vbWF0aC9WZWN0b3IzJztcbmltcG9ydCBHQnVmZmVyIGZyb20gJy4vR0J1ZmZlcic7XG5cbmltcG9ydCBwcmV6R2xzbCBmcm9tICcuLi9zaGFkZXIvc291cmNlL3ByZXouZ2xzbC5qcyc7XG5pbXBvcnQgdXRpbEdsc2wgZnJvbSAnLi4vc2hhZGVyL3NvdXJjZS91dGlsLmdsc2wuanMnO1xuXG5pbXBvcnQgbGlnaHR2b2x1bWVHbHNsIGZyb20gJy4uL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvbGlnaHR2b2x1bWUuZ2xzbC5qcyc7XG4vLyBMaWdodCBzaGFkZXJzXG5pbXBvcnQgc3BvdEdsc2wgZnJvbSAnLi4vc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9zcG90Lmdsc2wuanMnO1xuaW1wb3J0IGRpcmVjdGlvbmFsR2xzbCBmcm9tICcuLi9zaGFkZXIvc291cmNlL2RlZmVycmVkL2RpcmVjdGlvbmFsLmdsc2wuanMnO1xuaW1wb3J0IGFtYmllbnRHbHNsIGZyb20gJy4uL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvYW1iaWVudC5nbHNsLmpzJztcbmltcG9ydCBhbWJpZW50c2hHbHNsIGZyb20gJy4uL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvYW1iaWVudHNoLmdsc2wuanMnO1xuaW1wb3J0IGFtYmllbnRjdWJlbWFwR2xzbCBmcm9tICcuLi9zaGFkZXIvc291cmNlL2RlZmVycmVkL2FtYmllbnRjdWJlbWFwLmdsc2wuanMnO1xuaW1wb3J0IHBvaW50R2xzbCBmcm9tICcuLi9zaGFkZXIvc291cmNlL2RlZmVycmVkL3BvaW50Lmdsc2wuanMnO1xuaW1wb3J0IHNwaGVyZUdsc2wgZnJvbSAnLi4vc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9zcGhlcmUuZ2xzbC5qcyc7XG5pbXBvcnQgdHViZUdsc2wgZnJvbSAnLi4vc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC90dWJlLmdsc2wuanMnO1xuXG5TaGFkZXIuaW1wb3J0KHByZXpHbHNsKTtcblNoYWRlci5pbXBvcnQodXRpbEdsc2wpO1xuU2hhZGVyLmltcG9ydChsaWdodHZvbHVtZUdsc2wpO1xuXG4vLyBMaWdodCBzaGFkZXJzXG5TaGFkZXIuaW1wb3J0KHNwb3RHbHNsKTtcblNoYWRlci5pbXBvcnQoZGlyZWN0aW9uYWxHbHNsKTtcblNoYWRlci5pbXBvcnQoYW1iaWVudEdsc2wpO1xuU2hhZGVyLmltcG9ydChhbWJpZW50c2hHbHNsKTtcblNoYWRlci5pbXBvcnQoYW1iaWVudGN1YmVtYXBHbHNsKTtcblNoYWRlci5pbXBvcnQocG9pbnRHbHNsKTtcblNoYWRlci5pbXBvcnQoc3BoZXJlR2xzbCk7XG5TaGFkZXIuaW1wb3J0KHR1YmVHbHNsKTtcblxuU2hhZGVyLmltcG9ydChwcmV6R2xzbCk7XG5cbi8qKlxuICogRGVmZXJyZWQgcmVuZGVyZXJcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuZGVmZXJyZWQuUmVuZGVyZXJcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKi9cbnZhciBEZWZlcnJlZFJlbmRlcmVyID0gQmFzZS5leHRlbmQoZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIGZ1bGxRdWFkVmVydGV4ID0gU2hhZGVyLnNvdXJjZSgnY2xheS5jb21wb3NpdG9yLnZlcnRleCcpO1xuICAgIHZhciBsaWdodFZvbHVtZVZlcnRleCA9IFNoYWRlci5zb3VyY2UoJ2NsYXkuZGVmZXJyZWQubGlnaHRfdm9sdW1lLnZlcnRleCcpO1xuXG4gICAgdmFyIGRpcmVjdGlvbmFsTGlnaHRTaGFkZXIgPSBuZXcgU2hhZGVyKGZ1bGxRdWFkVmVydGV4LCBTaGFkZXIuc291cmNlKCdjbGF5LmRlZmVycmVkLmRpcmVjdGlvbmFsX2xpZ2h0JykpO1xuXG4gICAgdmFyIGxpZ2h0QWNjdW11bGF0ZUJsZW5kRnVuYyA9IGZ1bmN0aW9uIChnbCkge1xuICAgICAgICBnbC5ibGVuZEVxdWF0aW9uKGdsLkZVTkNfQUREKTtcbiAgICAgICAgZ2wuYmxlbmRGdW5jU2VwYXJhdGUoZ2wuT05FLCBnbC5PTkUsIGdsLk9ORSwgZ2wuT05FKTtcbiAgICB9O1xuXG4gICAgdmFyIGNyZWF0ZUxpZ2h0UGFzc01hdCA9IGZ1bmN0aW9uIChzaGFkZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNYXRlcmlhbCh7XG4gICAgICAgICAgICBzaGFkZXI6IHNoYWRlcixcbiAgICAgICAgICAgIGJsZW5kOiBsaWdodEFjY3VtdWxhdGVCbGVuZEZ1bmMsXG4gICAgICAgICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcbiAgICAgICAgICAgIGRlcHRoTWFzazogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBjcmVhdGVWb2x1bWVTaGFkZXIgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNoYWRlcihsaWdodFZvbHVtZVZlcnRleCwgU2hhZGVyLnNvdXJjZSgnY2xheS5kZWZlcnJlZC4nICsgbmFtZSkpO1xuICAgIH07XG5cbiAgICAvLyBSb3RhdGUgYW5kIHBvc2l0aW9uaW5nIHRvIGZpdCB0aGUgc3BvdCBsaWdodFxuICAgIC8vIFdoaWNoIHRoZSBjdXNwIG9mIGNvbmUgcG9pbnRpbmcgdG8gdGhlIHBvc2l0aXZlIHpcbiAgICAvLyBhbmQgcG9zaXRpb25lZCBvbiB0aGUgb3JpZ2luXG4gICAgdmFyIGNvbmVHZW8gPSBuZXcgQ29uZUdlbyh7XG4gICAgICAgIGNhcFNlZ21lbnRzOiAxMFxuICAgIH0pO1xuICAgIHZhciBtYXQgPSBuZXcgTWF0cml4NCgpO1xuICAgIG1hdC5yb3RhdGVYKE1hdGguUEkgLyAyKVxuICAgICAgICAudHJhbnNsYXRlKG5ldyBWZWN0b3IzKDAsIC0xLCAwKSk7XG5cbiAgICBjb25lR2VvLmFwcGx5VHJhbnNmb3JtKG1hdCk7XG5cbiAgICB2YXIgY3lsaW5kZXJHZW8gPSBuZXcgQ3lsaW5kZXJHZW8oe1xuICAgICAgICBjYXBTZWdtZW50czogMTBcbiAgICB9KTtcbiAgICAvLyBBbGlnbiB3aXRoIHggYXhpc1xuICAgIG1hdC5pZGVudGl0eSgpLnJvdGF0ZVooTWF0aC5QSSAvIDIpO1xuICAgIGN5bGluZGVyR2VvLmFwcGx5VHJhbnNmb3JtKG1hdCk7XG5cbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5LmRlZmVycmVkLlJlbmRlcmVyIyAqLyB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb3ZpZGUgU2hhZG93TWFwUGFzcyBmb3Igc2hhZG93IHJlbmRlcmluZy5cbiAgICAgICAgICogQHR5cGUge2NsYXkucHJlUGFzcy5TaGFkb3dNYXB9XG4gICAgICAgICAqL1xuICAgICAgICBzaGFkb3dNYXBQYXNzOiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgZW5hYmxlIGF1dG8gcmVzaXppbmcgZnJvbSBnaXZlbiBkZWZ1YWx0IHJlbmRlcmVyIHNpemUuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgYXV0b1Jlc2l6ZTogdHJ1ZSxcblxuICAgICAgICBfY3JlYXRlTGlnaHRQYXNzTWF0OiBjcmVhdGVMaWdodFBhc3NNYXQsXG5cbiAgICAgICAgX2dCdWZmZXI6IG5ldyBHQnVmZmVyKCksXG5cbiAgICAgICAgX2xpZ2h0QWNjdW1GcmFtZUJ1ZmZlcjogbmV3IEZyYW1lQnVmZmVyKCksXG5cbiAgICAgICAgX2xpZ2h0QWNjdW1UZXg6IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICAgICAgLy8gRklYTUUgRGV2aWNlIG5vdCBzdXBwb3J0IGZsb2F0IHRleHR1cmVcbiAgICAgICAgICAgIHR5cGU6IFRleHR1cmUuSEFMRl9GTE9BVCxcbiAgICAgICAgICAgIG1pbkZpbHRlcjogVGV4dHVyZS5ORUFSRVNULFxuICAgICAgICAgICAgbWFnRmlsdGVyOiBUZXh0dXJlLk5FQVJFU1RcbiAgICAgICAgfSksXG5cbiAgICAgICAgX2Z1bGxRdWFkUGFzczogbmV3IEZ1bGxRdWFkUGFzcyh7XG4gICAgICAgICAgICBibGVuZFdpdGhQcmV2aW91czogdHJ1ZVxuICAgICAgICB9KSxcblxuICAgICAgICBfZGlyZWN0aW9uYWxMaWdodE1hdDogY3JlYXRlTGlnaHRQYXNzTWF0KGRpcmVjdGlvbmFsTGlnaHRTaGFkZXIpLFxuXG4gICAgICAgIF9hbWJpZW50TWF0OiBjcmVhdGVMaWdodFBhc3NNYXQobmV3IFNoYWRlcihcbiAgICAgICAgICAgIGZ1bGxRdWFkVmVydGV4LCBTaGFkZXIuc291cmNlKCdjbGF5LmRlZmVycmVkLmFtYmllbnRfbGlnaHQnKVxuICAgICAgICApKSxcbiAgICAgICAgX2FtYmllbnRTSE1hdDogY3JlYXRlTGlnaHRQYXNzTWF0KG5ldyBTaGFkZXIoXG4gICAgICAgICAgICBmdWxsUXVhZFZlcnRleCwgU2hhZGVyLnNvdXJjZSgnY2xheS5kZWZlcnJlZC5hbWJpZW50X3NoX2xpZ2h0JylcbiAgICAgICAgKSksXG4gICAgICAgIF9hbWJpZW50Q3ViZW1hcE1hdDogY3JlYXRlTGlnaHRQYXNzTWF0KG5ldyBTaGFkZXIoXG4gICAgICAgICAgICBmdWxsUXVhZFZlcnRleCwgU2hhZGVyLnNvdXJjZSgnY2xheS5kZWZlcnJlZC5hbWJpZW50X2N1YmVtYXBfbGlnaHQnKVxuICAgICAgICApKSxcblxuICAgICAgICBfc3BvdExpZ2h0U2hhZGVyOiBjcmVhdGVWb2x1bWVTaGFkZXIoJ3Nwb3RfbGlnaHQnKSxcbiAgICAgICAgX3BvaW50TGlnaHRTaGFkZXI6IGNyZWF0ZVZvbHVtZVNoYWRlcigncG9pbnRfbGlnaHQnKSxcblxuICAgICAgICBfc3BoZXJlTGlnaHRTaGFkZXI6IGNyZWF0ZVZvbHVtZVNoYWRlcignc3BoZXJlX2xpZ2h0JyksXG4gICAgICAgIF90dWJlTGlnaHRTaGFkZXI6IGNyZWF0ZVZvbHVtZVNoYWRlcigndHViZV9saWdodCcpLFxuXG4gICAgICAgIF9saWdodFNwaGVyZUdlbzogbmV3IFNwaGVyZUdlbyh7XG4gICAgICAgICAgICB3aWR0aFNlZ21lbnRzOiAxMCxcbiAgICAgICAgICAgIGhlaWdodFNlZ2VtZW50czogMTBcbiAgICAgICAgfSksXG5cbiAgICAgICAgX2xpZ2h0Q29uZUdlbzogY29uZUdlbyxcblxuICAgICAgICBfbGlnaHRDeWxpbmRlckdlbzogY3lsaW5kZXJHZW8sXG5cbiAgICAgICAgX291dHB1dFBhc3M6IG5ldyBGdWxsUXVhZFBhc3Moe1xuICAgICAgICAgICAgZnJhZ21lbnQ6IFNoYWRlci5zb3VyY2UoJ2NsYXkuY29tcG9zaXRvci5vdXRwdXQnKVxuICAgICAgICB9KVxuICAgIH07XG59LCAvKiogQGxlbmRzIGNsYXkuZGVmZXJyZWQuUmVuZGVyZXIjICovIHtcbiAgICAvKipcbiAgICAgKiBEbyByZW5kZXJcbiAgICAgKiBAcGFyYW0ge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICogQHBhcmFtIHtjbGF5LlNjZW5lfSBzY2VuZVxuICAgICAqIEBwYXJhbSB7Y2xheS5DYW1lcmF9IGNhbWVyYVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c11cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnJlbmRlclRvVGFyZ2V0ID0gZmFsc2VdIElmIG5vdCBvdXB1dCBhbmQgcmVuZGVyIHRvIHRoZSB0YXJnZXQgdGV4dHVyZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMubm90VXBkYXRlU2hhZG93ID0gdHJ1ZV0gSWYgbm90IHVwZGF0ZSB0aGUgc2hhZG93LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMubm90VXBkYXRlU2NlbmUgPSB0cnVlXSBJZiBub3QgdXBkYXRlIHRoZSBzY2VuZS5cbiAgICAgKi9cbiAgICByZW5kZXI6IGZ1bmN0aW9uIChyZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgb3B0cykge1xuXG4gICAgICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgICAgICBvcHRzLnJlbmRlclRvVGFyZ2V0ID0gb3B0cy5yZW5kZXJUb1RhcmdldCB8fCBmYWxzZTtcbiAgICAgICAgb3B0cy5ub3RVcGRhdGVTaGFkb3cgPSBvcHRzLm5vdFVwZGF0ZVNoYWRvdyB8fCBmYWxzZTtcbiAgICAgICAgb3B0cy5ub3RVcGRhdGVTY2VuZSA9IG9wdHMubm90VXBkYXRlU2NlbmUgfHwgZmFsc2U7XG5cbiAgICAgICAgaWYgKCFvcHRzLm5vdFVwZGF0ZVNjZW5lKSB7XG4gICAgICAgICAgICBzY2VuZS51cGRhdGUoZmFsc2UsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHNjZW5lLnVwZGF0ZUxpZ2h0cygpO1xuICAgICAgICAvLyBSZW5kZXIgbGlzdCB3aWxsIGJlIHVwZGF0ZWQgaW4gZ2J1ZmZlci5cblxuICAgICAgICBjYW1lcmEudXBkYXRlKHRydWUpO1xuXG4gICAgICAgIC8vIFBFTkRJTkcgRm9yIHN0ZXJlbyByZW5kZXJpbmdcbiAgICAgICAgdmFyIGRwciA9IHJlbmRlcmVyLmdldERldmljZVBpeGVsUmF0aW8oKTtcbiAgICAgICAgaWYgKHRoaXMuYXV0b1Jlc2l6ZVxuICAgICAgICAgICAgJiYgKHJlbmRlcmVyLmdldFdpZHRoKCkgKiBkcHIgIT09IHRoaXMuX2xpZ2h0QWNjdW1UZXgud2lkdGhcbiAgICAgICAgICAgIHx8IHJlbmRlcmVyLmdldEhlaWdodCgpICogZHByICE9PSB0aGlzLl9saWdodEFjY3VtVGV4LmhlaWdodClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZShyZW5kZXJlci5nZXRXaWR0aCgpICogZHByLCByZW5kZXJlci5nZXRIZWlnaHQoKSAqIGRwcik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9nQnVmZmVyLnVwZGF0ZShyZW5kZXJlciwgc2NlbmUsIGNhbWVyYSk7XG5cbiAgICAgICAgLy8gQWNjdW11bGF0ZSBsaWdodCBidWZmZXJcbiAgICAgICAgdGhpcy5fYWNjdW11bGF0ZUxpZ2h0QnVmZmVyKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCAhb3B0cy5ub3RVcGRhdGVTaGFkb3cpO1xuXG4gICAgICAgIGlmICghb3B0cy5yZW5kZXJUb1RhcmdldCkge1xuICAgICAgICAgICAgdGhpcy5fb3V0cHV0UGFzcy5zZXRVbmlmb3JtKCd0ZXh0dXJlJywgdGhpcy5fbGlnaHRBY2N1bVRleCk7XG5cbiAgICAgICAgICAgIHRoaXMuX291dHB1dFBhc3MucmVuZGVyKHJlbmRlcmVyKTtcbiAgICAgICAgICAgIC8vIHRoaXMuX2dCdWZmZXIucmVuZGVyRGVidWcocmVuZGVyZXIsIGNhbWVyYSwgJ25vcm1hbCcpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2NsYXkuVGV4dHVyZTJEfVxuICAgICAqL1xuICAgIGdldFRhcmdldFRleHR1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpZ2h0QWNjdW1UZXg7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2NsYXkuRnJhbWVCdWZmZXJ9XG4gICAgICovXG4gICAgZ2V0VGFyZ2V0RnJhbWVCdWZmZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpZ2h0QWNjdW1GcmFtZUJ1ZmZlcjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Y2xheS5kZWZlcnJlZC5HQnVmZmVyfVxuICAgICAqL1xuICAgIGdldEdCdWZmZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dCdWZmZXI7XG4gICAgfSxcblxuICAgIC8vIFRPRE8gaXMgZHByIG5lZWRlZD9cbiAgICBzZXRWaWV3cG9ydDogZnVuY3Rpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQsIGRwcikge1xuICAgICAgICB0aGlzLl9nQnVmZmVyLnNldFZpZXdwb3J0KHgsIHksIHdpZHRoLCBoZWlnaHQsIGRwcik7XG4gICAgICAgIHRoaXMuX2xpZ2h0QWNjdW1GcmFtZUJ1ZmZlci52aWV3cG9ydCA9IHRoaXMuX2dCdWZmZXIuZ2V0Vmlld3BvcnQoKTtcbiAgICB9LFxuXG4gICAgLy8gZ2V0RnVsbFF1YWRMaWdodFBhc3M6IGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMuX2Z1bGxRdWFkUGFzcztcbiAgICAvLyB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHJlbmRlcmVyIHNpemUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxuICAgICAqL1xuICAgIHJlc2l6ZTogZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdGhpcy5fbGlnaHRBY2N1bVRleC53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLl9saWdodEFjY3VtVGV4LmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICAvLyBQRU5ESU5HIHZpZXdwb3J0ID9cbiAgICAgICAgdGhpcy5fZ0J1ZmZlci5yZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgfSxcblxuICAgIF9hY2N1bXVsYXRlTGlnaHRCdWZmZXI6IGZ1bmN0aW9uIChyZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgdXBkYXRlU2hhZG93KSB7XG4gICAgICAgIHZhciBnbCA9IHJlbmRlcmVyLmdsO1xuICAgICAgICB2YXIgbGlnaHRBY2N1bVRleCA9IHRoaXMuX2xpZ2h0QWNjdW1UZXg7XG4gICAgICAgIHZhciBsaWdodEFjY3VtRnJhbWVCdWZmZXIgPSB0aGlzLl9saWdodEFjY3VtRnJhbWVCdWZmZXI7XG5cbiAgICAgICAgdmFyIGV5ZVBvc2l0aW9uID0gY2FtZXJhLmdldFdvcmxkUG9zaXRpb24oKS5hcnJheTtcblxuICAgICAgICAvLyBVcGRhdGUgdm9sdW1lIG1lc2hlc1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjZW5lLmxpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFzY2VuZS5saWdodHNbaV0uaW52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlTGlnaHRQcm94eShzY2VuZS5saWdodHNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNoYWRvd01hcFBhc3MgPSB0aGlzLnNoYWRvd01hcFBhc3M7XG4gICAgICAgIGlmIChzaGFkb3dNYXBQYXNzICYmIHVwZGF0ZVNoYWRvdykge1xuICAgICAgICAgICAgZ2wuY2xlYXJDb2xvcigxLCAxLCAxLCAxKTtcbiAgICAgICAgICAgIHRoaXMuX3ByZXBhcmVMaWdodFNoYWRvdyhyZW5kZXJlciwgc2NlbmUsIGNhbWVyYSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZWxpZ2h0YWNjdW11bGF0ZScsIHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCB1cGRhdGVTaGFkb3cpO1xuXG4gICAgICAgIGxpZ2h0QWNjdW1GcmFtZUJ1ZmZlci5hdHRhY2gobGlnaHRBY2N1bVRleCk7XG4gICAgICAgIGxpZ2h0QWNjdW1GcmFtZUJ1ZmZlci5iaW5kKHJlbmRlcmVyKTtcbiAgICAgICAgdmFyIGNsZWFyQ29sb3IgPSByZW5kZXJlci5jbGVhckNvbG9yO1xuXG4gICAgICAgIHZhciB2aWV3cG9ydCA9IGxpZ2h0QWNjdW1GcmFtZUJ1ZmZlci52aWV3cG9ydDtcbiAgICAgICAgaWYgKHZpZXdwb3J0KSB7XG4gICAgICAgICAgICB2YXIgZHByID0gdmlld3BvcnQuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgICAgIC8vIHVzZSBzY2lzc29yIHRvIG1ha2Ugc3VyZSBvbmx5IGNsZWFyIHRoZSB2aWV3cG9ydFxuICAgICAgICAgICAgZ2wuZW5hYmxlKGdsLlNDSVNTT1JfVEVTVCk7XG4gICAgICAgICAgICBnbC5zY2lzc29yKHZpZXdwb3J0LnggKiBkcHIsIHZpZXdwb3J0LnkgKiBkcHIsIHZpZXdwb3J0LndpZHRoICogZHByLCB2aWV3cG9ydC5oZWlnaHQgKiBkcHIpO1xuICAgICAgICB9XG4gICAgICAgIGdsLmNsZWFyQ29sb3IoY2xlYXJDb2xvclswXSwgY2xlYXJDb2xvclsxXSwgY2xlYXJDb2xvclsyXSwgY2xlYXJDb2xvclszXSk7XG4gICAgICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xuICAgICAgICBnbC5lbmFibGUoZ2wuQkxFTkQpO1xuICAgICAgICBpZiAodmlld3BvcnQpIHtcbiAgICAgICAgICAgIGdsLmRpc2FibGUoZ2wuU0NJU1NPUl9URVNUKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignc3RhcnRsaWdodGFjY3VtdWxhdGUnLCByZW5kZXJlciwgc2NlbmUsIGNhbWVyYSk7XG5cbiAgICAgICAgdmFyIHZpZXdQcm9qZWN0aW9uSW52ID0gbmV3IE1hdHJpeDQoKTtcbiAgICAgICAgTWF0cml4NC5tdWx0aXBseSh2aWV3UHJvamVjdGlvbkludiwgY2FtZXJhLndvcmxkVHJhbnNmb3JtLCBjYW1lcmEuaW52UHJvamVjdGlvbk1hdHJpeCk7XG5cbiAgICAgICAgdmFyIHZvbHVtZU1lc2hMaXN0ID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY2VuZS5saWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBsaWdodCA9IHNjZW5lLmxpZ2h0c1tpXTtcbiAgICAgICAgICAgIGlmIChsaWdodC5pbnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHVUcGwgPSBsaWdodC51bmlmb3JtVGVtcGxhdGVzO1xuXG4gICAgICAgICAgICB2YXIgdm9sdW1lTWVzaCA9IGxpZ2h0LnZvbHVtZU1lc2ggfHwgbGlnaHQuX192b2x1bWVNZXNoO1xuXG4gICAgICAgICAgICBpZiAodm9sdW1lTWVzaCkge1xuICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IHZvbHVtZU1lc2gubWF0ZXJpYWw7XG4gICAgICAgICAgICAgICAgLy8gVm9sdW1lIG1lc2ggd2lsbCBhZmZlY3QgdGhlIHNjZW5lIGJvdW5kaW5nIGJveCB3aGVuIHJlbmRlcmluZ1xuICAgICAgICAgICAgICAgIC8vIGlmIGNhc3RTaGFkb3cgaXMgdHJ1ZVxuICAgICAgICAgICAgICAgIHZvbHVtZU1lc2guY2FzdFNoYWRvdyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgdmFyIHVua25vd25MaWdodFR5cGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGxpZ2h0LnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUE9JTlRfTElHSFQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRDb2xvcicsIHVUcGwucG9pbnRMaWdodENvbG9yLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodFJhbmdlJywgdVRwbC5wb2ludExpZ2h0UmFuZ2UudmFsdWUobGlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0UG9zaXRpb24nLCB1VHBsLnBvaW50TGlnaHRQb3NpdGlvbi52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1NQT1RfTElHSFQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRQb3NpdGlvbicsIHVUcGwuc3BvdExpZ2h0UG9zaXRpb24udmFsdWUobGlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0Q29sb3InLCB1VHBsLnNwb3RMaWdodENvbG9yLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodFJhbmdlJywgdVRwbC5zcG90TGlnaHRSYW5nZS52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHREaXJlY3Rpb24nLCB1VHBsLnNwb3RMaWdodERpcmVjdGlvbi52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgndW1icmFBbmdsZUNvc2luZScsIHVUcGwuc3BvdExpZ2h0VW1icmFBbmdsZUNvc2luZS52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgncGVudW1icmFBbmdsZUNvc2luZScsIHVUcGwuc3BvdExpZ2h0UGVudW1icmFBbmdsZUNvc2luZS52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnZmFsbG9mZkZhY3RvcicsIHVUcGwuc3BvdExpZ2h0RmFsbG9mZkZhY3Rvci52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1NQSEVSRV9MSUdIVCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodENvbG9yJywgdVRwbC5zcGhlcmVMaWdodENvbG9yLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodFJhbmdlJywgdVRwbC5zcGhlcmVMaWdodFJhbmdlLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodFJhZGl1cycsIHVUcGwuc3BoZXJlTGlnaHRSYWRpdXMudmFsdWUobGlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0UG9zaXRpb24nLCB1VHBsLnNwaGVyZUxpZ2h0UG9zaXRpb24udmFsdWUobGlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdUVUJFX0xJR0hUJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0Q29sb3InLCB1VHBsLnR1YmVMaWdodENvbG9yLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodFJhbmdlJywgdVRwbC50dWJlTGlnaHRSYW5nZS52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRFeHRlbmQnLCB1VHBsLnR1YmVMaWdodEV4dGVuZC52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRQb3NpdGlvbicsIHVUcGwudHViZUxpZ2h0UG9zaXRpb24udmFsdWUobGlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdW5rbm93bkxpZ2h0VHlwZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHVua25vd25MaWdodFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnZXllUG9zaXRpb24nLCBleWVQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgndmlld1Byb2plY3Rpb25JbnYnLCB2aWV3UHJvamVjdGlvbkludi5hcnJheSk7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnZ0J1ZmZlclRleHR1cmUxJywgdGhpcy5fZ0J1ZmZlci5nZXRUYXJnZXRUZXh0dXJlMSgpKTtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdnQnVmZmVyVGV4dHVyZTInLCB0aGlzLl9nQnVmZmVyLmdldFRhcmdldFRleHR1cmUyKCkpO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2dCdWZmZXJUZXh0dXJlMycsIHRoaXMuX2dCdWZmZXIuZ2V0VGFyZ2V0VGV4dHVyZTMoKSk7XG5cbiAgICAgICAgICAgICAgICB2b2x1bWVNZXNoTGlzdC5wdXNoKHZvbHVtZU1lc2gpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFzcyA9IHRoaXMuX2Z1bGxRdWFkUGFzcztcbiAgICAgICAgICAgICAgICB2YXIgdW5rbm93bkxpZ2h0VHlwZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vIEZ1bGwgcXVhZCBsaWdodFxuICAgICAgICAgICAgICAgIHN3aXRjaCAobGlnaHQudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdBTUJJRU5UX0xJR0hUJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MubWF0ZXJpYWwgPSB0aGlzLl9hbWJpZW50TWF0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFzcy5tYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodENvbG9yJywgdVRwbC5hbWJpZW50TGlnaHRDb2xvci52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0FNQklFTlRfU0hfTElHSFQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFzcy5tYXRlcmlhbCA9IHRoaXMuX2FtYmllbnRTSE1hdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MubWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRDb2xvcicsIHVUcGwuYW1iaWVudFNITGlnaHRDb2xvci52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFzcy5tYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodENvZWZmaWNpZW50cycsIHVUcGwuYW1iaWVudFNITGlnaHRDb2VmZmljaWVudHMudmFsdWUobGlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdBTUJJRU5UX0NVQkVNQVBfTElHSFQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFzcy5tYXRlcmlhbCA9IHRoaXMuX2FtYmllbnRDdWJlbWFwTWF0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFzcy5tYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodENvbG9yJywgdVRwbC5hbWJpZW50Q3ViZW1hcExpZ2h0Q29sb3IudmFsdWUobGlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MubWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRDdWJlbWFwJywgdVRwbC5hbWJpZW50Q3ViZW1hcExpZ2h0Q3ViZW1hcC52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFzcy5tYXRlcmlhbC5zZXRVbmlmb3JtKCdicmRmTG9va3VwJywgdVRwbC5hbWJpZW50Q3ViZW1hcExpZ2h0QlJERkxvb2t1cC52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0RJUkVDVElPTkFMX0xJR0hUJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYXNTaGFkb3cgPSBzaGFkb3dNYXBQYXNzICYmIGxpZ2h0LmNhc3RTaGFkb3c7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzLm1hdGVyaWFsID0gdGhpcy5fZGlyZWN0aW9uYWxMaWdodE1hdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MubWF0ZXJpYWxbaGFzU2hhZG93ID8gJ2RlZmluZScgOiAndW5kZWZpbmUnXSgnZnJhZ21lbnQnLCAnU0hBRE9XTUFQX0VOQUJMRUQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNTaGFkb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzLm1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnU0hBRE9XX0NBU0NBREUnLCBsaWdodC5zaGFkb3dDYXNjYWRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MubWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRDb2xvcicsIHVUcGwuZGlyZWN0aW9uYWxMaWdodENvbG9yLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzLm1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0RGlyZWN0aW9uJywgdVRwbC5kaXJlY3Rpb25hbExpZ2h0RGlyZWN0aW9uLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVua29udyBsaWdodCB0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmtub3duTGlnaHRUeXBlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHVua25vd25MaWdodFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHBhc3NNYXRlcmlhbCA9IHBhc3MubWF0ZXJpYWw7XG4gICAgICAgICAgICAgICAgcGFzc01hdGVyaWFsLnNldFVuaWZvcm0oJ2V5ZVBvc2l0aW9uJywgZXllUG9zaXRpb24pO1xuICAgICAgICAgICAgICAgIHBhc3NNYXRlcmlhbC5zZXRVbmlmb3JtKCd2aWV3UHJvamVjdGlvbkludicsIHZpZXdQcm9qZWN0aW9uSW52LmFycmF5KTtcbiAgICAgICAgICAgICAgICBwYXNzTWF0ZXJpYWwuc2V0VW5pZm9ybSgnZ0J1ZmZlclRleHR1cmUxJywgdGhpcy5fZ0J1ZmZlci5nZXRUYXJnZXRUZXh0dXJlMSgpKTtcbiAgICAgICAgICAgICAgICBwYXNzTWF0ZXJpYWwuc2V0VW5pZm9ybSgnZ0J1ZmZlclRleHR1cmUyJywgdGhpcy5fZ0J1ZmZlci5nZXRUYXJnZXRUZXh0dXJlMigpKTtcbiAgICAgICAgICAgICAgICBwYXNzTWF0ZXJpYWwuc2V0VW5pZm9ybSgnZ0J1ZmZlclRleHR1cmUzJywgdGhpcy5fZ0J1ZmZlci5nZXRUYXJnZXRUZXh0dXJlMygpKTtcblxuICAgICAgICAgICAgICAgIC8vIFRPRE9cbiAgICAgICAgICAgICAgICBpZiAoc2hhZG93TWFwUGFzcyAmJiBsaWdodC5jYXN0U2hhZG93KSB7XG4gICAgICAgICAgICAgICAgICAgIHBhc3NNYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodFNoYWRvd01hcCcsIGxpZ2h0Ll9fc2hhZG93TWFwKTtcbiAgICAgICAgICAgICAgICAgICAgcGFzc01hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0TWF0cmljZXMnLCBsaWdodC5fX2xpZ2h0TWF0cmljZXMpO1xuICAgICAgICAgICAgICAgICAgICBwYXNzTWF0ZXJpYWwuc2V0VW5pZm9ybSgnc2hhZG93Q2FzY2FkZUNsaXBzTmVhcicsIGxpZ2h0Ll9fY2FzY2FkZUNsaXBzTmVhcik7XG4gICAgICAgICAgICAgICAgICAgIHBhc3NNYXRlcmlhbC5zZXRVbmlmb3JtKCdzaGFkb3dDYXNjYWRlQ2xpcHNGYXInLCBsaWdodC5fX2Nhc2NhZGVDbGlwc0Zhcik7XG5cbiAgICAgICAgICAgICAgICAgICAgcGFzc01hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0U2hhZG93TWFwU2l6ZScsIGxpZ2h0LnNoYWRvd1Jlc29sdXRpb24pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHBhc3MucmVuZGVyUXVhZChyZW5kZXJlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9yZW5kZXJWb2x1bWVNZXNoTGlzdChyZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgdm9sdW1lTWVzaExpc3QpO1xuXG4gICAgICAgIHRoaXMudHJpZ2dlcignbGlnaHRhY2N1bXVsYXRlJywgcmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEpO1xuXG4gICAgICAgIGxpZ2h0QWNjdW1GcmFtZUJ1ZmZlci51bmJpbmQocmVuZGVyZXIpO1xuXG4gICAgICAgIHRoaXMudHJpZ2dlcignYWZ0ZXJsaWdodGFjY3VtdWxhdGUnLCByZW5kZXJlciwgc2NlbmUsIGNhbWVyYSk7XG5cbiAgICB9LFxuXG4gICAgX3ByZXBhcmVMaWdodFNoYWRvdzogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHdvcmxkVmlldyA9IG5ldyBNYXRyaXg0KCk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEpIHtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY2VuZS5saWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbGlnaHQgPSBzY2VuZS5saWdodHNbaV07XG4gICAgICAgICAgICAgICAgdmFyIHZvbHVtZU1lc2ggPSBsaWdodC52b2x1bWVNZXNoIHx8IGxpZ2h0Ll9fdm9sdW1lTWVzaDtcbiAgICAgICAgICAgICAgICBpZiAoIWxpZ2h0LmNhc3RTaGFkb3cgfHwgbGlnaHQuaW52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHN3aXRjaCAobGlnaHQudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdQT0lOVF9MSUdIVCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1NQT1RfTElHSFQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRnJ1c3R1bSBjdWxsaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRyaXg0Lm11bHRpcGx5KHdvcmxkVmlldywgY2FtZXJhLnZpZXdNYXRyaXgsIHZvbHVtZU1lc2gud29ybGRUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjZW5lLmlzRnJ1c3R1bUN1bGxlZCh2b2x1bWVNZXNoLCBjYW1lcmEsIHdvcmxkVmlldy5hcnJheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJlcGFyZVNpbmdsZUxpZ2h0U2hhZG93KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCBsaWdodCwgdm9sdW1lTWVzaC5tYXRlcmlhbFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdESVJFQ1RJT05BTF9MSUdIVCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcmVwYXJlU2luZ2xlTGlnaHRTaGFkb3coXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIGxpZ2h0LCBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KSgpLFxuXG4gICAgX3ByZXBhcmVTaW5nbGVMaWdodFNoYWRvdzogZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCBsaWdodCwgbWF0ZXJpYWwpIHtcbiAgICAgICAgc3dpdGNoIChsaWdodC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdQT0lOVF9MSUdIVCc6XG4gICAgICAgICAgICAgICAgdmFyIHNoYWRvd01hcHMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd01hcFBhc3MucmVuZGVyUG9pbnRMaWdodFNoYWRvdyhcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIsIHNjZW5lLCBsaWdodCwgc2hhZG93TWFwc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRTaGFkb3dNYXAnLCBzaGFkb3dNYXBzWzBdKTtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodFNoYWRvd01hcFNpemUnLCBsaWdodC5zaGFkb3dSZXNvbHV0aW9uKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ1NQT1RfTElHSFQnOlxuICAgICAgICAgICAgICAgIHZhciBzaGFkb3dNYXBzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGxpZ2h0TWF0cmljZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd01hcFBhc3MucmVuZGVyU3BvdExpZ2h0U2hhZG93KFxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlciwgc2NlbmUsIGxpZ2h0LCBsaWdodE1hdHJpY2VzLCBzaGFkb3dNYXBzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodFNoYWRvd01hcCcsIHNoYWRvd01hcHNbMF0pO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0TWF0cml4JywgbGlnaHRNYXRyaWNlc1swXSk7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRTaGFkb3dNYXBTaXplJywgbGlnaHQuc2hhZG93UmVzb2x1dGlvbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdESVJFQ1RJT05BTF9MSUdIVCc6XG4gICAgICAgICAgICAgICAgdmFyIHNoYWRvd01hcHMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgbGlnaHRNYXRyaWNlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBjYXNjYWRlQ2xpcHMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd01hcFBhc3MucmVuZGVyRGlyZWN0aW9uYWxMaWdodFNoYWRvdyhcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIGxpZ2h0LCBjYXNjYWRlQ2xpcHMsIGxpZ2h0TWF0cmljZXMsIHNoYWRvd01hcHNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHZhciBjYXNjYWRlQ2xpcHNOZWFyID0gY2FzY2FkZUNsaXBzLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgdmFyIGNhc2NhZGVDbGlwc0ZhciA9IGNhc2NhZGVDbGlwcy5zbGljZSgpO1xuICAgICAgICAgICAgICAgIGNhc2NhZGVDbGlwc05lYXIucG9wKCk7XG4gICAgICAgICAgICAgICAgY2FzY2FkZUNsaXBzRmFyLnNoaWZ0KCk7XG5cbiAgICAgICAgICAgICAgICAvLyBJdGVyYXRlIGZyb20gZmFyIHRvIG5lYXJcbiAgICAgICAgICAgICAgICBjYXNjYWRlQ2xpcHNOZWFyLnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICBjYXNjYWRlQ2xpcHNGYXIucmV2ZXJzZSgpO1xuICAgICAgICAgICAgICAgIGxpZ2h0TWF0cmljZXMucmV2ZXJzZSgpO1xuXG4gICAgICAgICAgICAgICAgbGlnaHQuX19jYXNjYWRlQ2xpcHNOZWFyID0gY2FzY2FkZUNsaXBzTmVhcjtcbiAgICAgICAgICAgICAgICBsaWdodC5fX2Nhc2NhZGVDbGlwc0ZhciA9IGNhc2NhZGVDbGlwc0ZhcjtcbiAgICAgICAgICAgICAgICBsaWdodC5fX3NoYWRvd01hcCA9IHNoYWRvd01hcHNbMF07XG4gICAgICAgICAgICAgICAgbGlnaHQuX19saWdodE1hdHJpY2VzID0gbGlnaHRNYXRyaWNlcztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBVcGRhdGUgbGlnaHQgdm9sdW1lIG1lc2hcbiAgICAvLyBMaWdodCB2b2x1bWUgbWVzaCBpcyByZW5kZXJlZCBpbiBsaWdodCBhY2N1bXVsYXRlIHBhc3MgaW5zdGVhZCBvZiBmdWxsIHF1YWQuXG4gICAgLy8gSXQgd2lsbCByZWR1Y2UgcGl4ZWxzIHNpZ25pZmljYW50bHkgd2hlbiBsb2NhbCBsaWdodCBpcyByZWxhdGl2ZWx5IHNtYWxsLlxuICAgIC8vIEFuZCB3ZSBjYW4gdXNlIGN1c3RvbSB2b2x1bWUgbWVzaCB0byBzaGFwZSB0aGUgbGlnaHQuXG4gICAgLy9cbiAgICAvLyBTZWUgXCJEZWZlcnJlZCBTaGFkaW5nIE9wdGltaXphdGlvbnNcIiBpbiBHREMyMDExXG4gICAgX3VwZGF0ZUxpZ2h0UHJveHk6IGZ1bmN0aW9uIChsaWdodCkge1xuICAgICAgICB2YXIgdm9sdW1lTWVzaDtcbiAgICAgICAgaWYgKGxpZ2h0LnZvbHVtZU1lc2gpIHtcbiAgICAgICAgICAgIHZvbHVtZU1lc2ggPSBsaWdodC52b2x1bWVNZXNoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3dpdGNoIChsaWdodC50eXBlKSB7XG4gICAgICAgICAgICAgICAgLy8gT25seSBsb2NhbCBsaWdodCAocG9pbnQgYW5kIHNwb3QpIG5lZWRzIHZvbHVtZSBtZXNoLlxuICAgICAgICAgICAgICAgIC8vIERpcmVjdGlvbmFsIGFuZCBhbWJpZW50IGxpZ2h0IHJlbmRlcnMgaW4gZnVsbCBxdWFkXG4gICAgICAgICAgICAgICAgY2FzZSAnUE9JTlRfTElHSFQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ1NQSEVSRV9MSUdIVCc6XG4gICAgICAgICAgICAgICAgICAgIHZhciBzaGFkZXIgPSBsaWdodC50eXBlID09PSAnU1BIRVJFX0xJR0hUJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9zcGhlcmVMaWdodFNoYWRlciA6IHRoaXMuX3BvaW50TGlnaHRTaGFkZXI7XG4gICAgICAgICAgICAgICAgICAgIC8vIFZvbHVtZSBtZXNoIGNyZWF0ZWQgYXV0b21hdGljYWxseVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWxpZ2h0Ll9fdm9sdW1lTWVzaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGlnaHQuX192b2x1bWVNZXNoID0gbmV3IE1lc2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiB0aGlzLl9jcmVhdGVMaWdodFBhc3NNYXQoc2hhZGVyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeTogdGhpcy5fbGlnaHRTcGhlcmVHZW8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGlzYWJsZSBjdWxsaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbGlnaHQgdm9sdW1lIG1lc2ggaW50ZXJzZWN0IGNhbWVyYSBuZWFyIHBsYW5lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCBtZXNoIGluc2lkZSBjYW4gc3RpbGwgYmUgcmVuZGVyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdWxsaW5nOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdm9sdW1lTWVzaCA9IGxpZ2h0Ll9fdm9sdW1lTWVzaDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBsaWdodC5yYW5nZSArIChsaWdodC5yYWRpdXMgfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgIHZvbHVtZU1lc2guc2NhbGUuc2V0KHIsIHIsIHIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdTUE9UX0xJR0hUJzpcbiAgICAgICAgICAgICAgICAgICAgbGlnaHQuX192b2x1bWVNZXNoID0gbGlnaHQuX192b2x1bWVNZXNoIHx8IG5ldyBNZXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiB0aGlzLl9jcmVhdGVMaWdodFBhc3NNYXQodGhpcy5fc3BvdExpZ2h0U2hhZGVyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5OiB0aGlzLl9saWdodENvbmVHZW8sXG4gICAgICAgICAgICAgICAgICAgICAgICBjdWxsaW5nOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdm9sdW1lTWVzaCA9IGxpZ2h0Ll9fdm9sdW1lTWVzaDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzcGVjdCA9IE1hdGgudGFuKGxpZ2h0LnBlbnVtYnJhQW5nbGUgKiBNYXRoLlBJIC8gMTgwKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gbGlnaHQucmFuZ2U7XG4gICAgICAgICAgICAgICAgICAgIHZvbHVtZU1lc2guc2NhbGUuc2V0KGFzcGVjdCAqIHJhbmdlLCBhc3BlY3QgKiByYW5nZSwgcmFuZ2UgLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnVFVCRV9MSUdIVCc6XG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0Ll9fdm9sdW1lTWVzaCA9IGxpZ2h0Ll9fdm9sdW1lTWVzaCB8fCBuZXcgTWVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbDogdGhpcy5fY3JlYXRlTGlnaHRQYXNzTWF0KHRoaXMuX3R1YmVMaWdodFNoYWRlciksXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeTogdGhpcy5fbGlnaHRDeWxpbmRlckdlbyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1bGxpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2b2x1bWVNZXNoID0gbGlnaHQuX192b2x1bWVNZXNoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZ2UgPSBsaWdodC5yYW5nZTtcbiAgICAgICAgICAgICAgICAgICAgdm9sdW1lTWVzaC5zY2FsZS5zZXQobGlnaHQubGVuZ3RoIC8gMiArIHJhbmdlLCByYW5nZSwgcmFuZ2UpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodm9sdW1lTWVzaCkge1xuICAgICAgICAgICAgdm9sdW1lTWVzaC51cGRhdGUoKTtcbiAgICAgICAgICAgIC8vIEFwcGx5IGxpZ2h0IHRyYW5zZm9ybVxuICAgICAgICAgICAgTWF0cml4NC5tdWx0aXBseSh2b2x1bWVNZXNoLndvcmxkVHJhbnNmb3JtLCBsaWdodC53b3JsZFRyYW5zZm9ybSwgdm9sdW1lTWVzaC53b3JsZFRyYW5zZm9ybSk7XG4gICAgICAgICAgICB2YXIgaGFzU2hhZG93ID0gdGhpcy5zaGFkb3dNYXBQYXNzICYmIGxpZ2h0LmNhc3RTaGFkb3c7XG4gICAgICAgICAgICB2b2x1bWVNZXNoLm1hdGVyaWFsW2hhc1NoYWRvdyA/ICdkZWZpbmUnIDogJ3VuZGVmaW5lJ10oJ2ZyYWdtZW50JywgJ1NIQURPV01BUF9FTkFCTEVEJyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX3JlbmRlclZvbHVtZU1lc2hMaXN0OiAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgd29ybGRWaWV3ID0gbmV3IE1hdHJpeDQoKTtcbiAgICAgICAgdmFyIHByZVpNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCh7XG4gICAgICAgICAgICBzaGFkZXI6IG5ldyBTaGFkZXIoU2hhZGVyLnNvdXJjZSgnY2xheS5wcmV6LnZlcnRleCcpLCBTaGFkZXIuc291cmNlKCdjbGF5LnByZXouZnJhZ21lbnQnKSlcbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIGdldFByZVpNYXRlcmlhbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBwcmVaTWF0ZXJpYWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgdm9sdW1lTWVzaExpc3QpIHtcbiAgICAgICAgICAgIHZhciBnbCA9IHJlbmRlcmVyLmdsO1xuXG4gICAgICAgICAgICBnbC5kZXB0aEZ1bmMoZ2wuTEVRVUFMKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2b2x1bWVNZXNoTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciB2b2x1bWVNZXNoID0gdm9sdW1lTWVzaExpc3RbaV07XG5cbiAgICAgICAgICAgICAgICAvLyBGcnVzdHVtIGN1bGxpbmdcbiAgICAgICAgICAgICAgICBNYXRyaXg0Lm11bHRpcGx5KHdvcmxkVmlldywgY2FtZXJhLnZpZXdNYXRyaXgsIHZvbHVtZU1lc2gud29ybGRUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgIGlmIChzY2VuZS5pc0ZydXN0dW1DdWxsZWQodm9sdW1lTWVzaCwgY2FtZXJhLCB3b3JsZFZpZXcuYXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFVzZSBwcmV6IHRvIGF2b2lkIG9uZSBwaXhlbCByZW5kZXJlZCB0d2ljZVxuICAgICAgICAgICAgICAgIGdsLmNvbG9yTWFzayhmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgZ2wuZGVwdGhNYXNrKHRydWUpO1xuICAgICAgICAgICAgICAgIC8vIGRlcHRoTWFzayBtdXN0IGJlIGVuYWJsZWQgYmVmb3JlIGNsZWFyIERFUFRIX0JVRkZFUlxuICAgICAgICAgICAgICAgIGdsLmNsZWFyKGdsLkRFUFRIX0JVRkZFUl9CSVQpO1xuXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyUGFzcyhbdm9sdW1lTWVzaF0sIGNhbWVyYSwge1xuICAgICAgICAgICAgICAgICAgICBnZXRNYXRlcmlhbDogZ2V0UHJlWk1hdGVyaWFsXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZW5kZXIgbGlnaHRcbiAgICAgICAgICAgICAgICBnbC5jb2xvck1hc2sodHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICB2b2x1bWVNZXNoLm1hdGVyaWFsLmRlcHRoTWFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyUGFzcyhbdm9sdW1lTWVzaF0sIGNhbWVyYSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGdsLmRlcHRoRnVuYyhnbC5MRVNTKTtcbiAgICAgICAgfTtcbiAgICB9KSgpLFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKi9cbiAgICBkaXNwb3NlOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5fZ0J1ZmZlci5kaXNwb3NlKHJlbmRlcmVyKTtcblxuICAgICAgICB0aGlzLl9saWdodEFjY3VtRnJhbWVCdWZmZXIuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX2xpZ2h0QWNjdW1UZXguZGlzcG9zZShyZW5kZXJlcik7XG5cbiAgICAgICAgdGhpcy5fbGlnaHRDb25lR2VvLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgICAgICB0aGlzLl9saWdodEN5bGluZGVyR2VvLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgICAgICB0aGlzLl9saWdodFNwaGVyZUdlby5kaXNwb3NlKHJlbmRlcmVyKTtcblxuICAgICAgICB0aGlzLl9mdWxsUXVhZFBhc3MuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX291dHB1dFBhc3MuZGlzcG9zZShyZW5kZXJlcik7XG5cbiAgICAgICAgdGhpcy5fZGlyZWN0aW9uYWxMaWdodE1hdC5kaXNwb3NlKHJlbmRlcmVyKTtcblxuICAgICAgICB0aGlzLnNoYWRvd01hcFBhc3MuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IERlZmVycmVkUmVuZGVyZXI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2RlZmVycmVkL1JlbmRlcmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxNTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///159\n");

/***/ }),
/* 160 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.light_volume.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nattribute vec3 position : POSITION;\\nvarying vec3 v_Position;\\nvoid main()\\n{\\n gl_Position = worldViewProjection * vec4(position, 1.0);\\n v_Position = position;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9saWdodHZvbHVtZS5nbHNsLmpzPzAwNzciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuZGVmZXJyZWQubGlnaHRfdm9sdW1lLnZlcnRleFxcbnVuaWZvcm0gbWF0NCB3b3JsZFZpZXdQcm9qZWN0aW9uIDogV09STERWSUVXUFJPSkVDVElPTjtcXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbiA6IFBPU0lUSU9OO1xcbnZhcnlpbmcgdmVjMyB2X1Bvc2l0aW9uO1xcbnZvaWQgbWFpbigpXFxue1xcbiBnbF9Qb3NpdGlvbiA9IHdvcmxkVmlld1Byb2plY3Rpb24gKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbiB2X1Bvc2l0aW9uID0gcG9zaXRpb247XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9saWdodHZvbHVtZS5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///160\n");

/***/ }),
/* 161 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.spot_light\\n@import clay.deferred.chunk.light_head\\n@import clay.deferred.chunk.light_equation\\n@import clay.util.calculate_attenuation\\nuniform vec3 lightPosition;\\nuniform vec3 lightDirection;\\nuniform vec3 lightColor;\\nuniform float umbraAngleCosine;\\nuniform float penumbraAngleCosine;\\nuniform float lightRange;\\nuniform float falloffFactor;\\nuniform vec3 eyePosition;\\n#ifdef SHADOWMAP_ENABLED\\nuniform sampler2D lightShadowMap;\\nuniform mat4 lightMatrix;\\nuniform float lightShadowMapSize;\\n#endif\\n@import clay.plugin.shadow_map_common\\nvoid main()\\n{\\n @import clay.deferred.chunk.gbuffer_read\\n vec3 L = lightPosition - position;\\n vec3 V = normalize(eyePosition - position);\\n float dist = length(L);\\n L /= dist;\\n float attenuation = lightAttenuation(dist, lightRange);\\n float c = dot(-normalize(lightDirection), L);\\n float falloff = clamp((c - umbraAngleCosine) / (penumbraAngleCosine - umbraAngleCosine), 0.0, 1.0);\\n falloff = pow(falloff, falloffFactor);\\n vec3 H = normalize(L + V);\\n float ndl = clamp(dot(N, L), 0.0, 1.0);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float ndv = clamp(dot(N, V), 0.0, 1.0);\\n gl_FragColor.rgb = (1.0 - falloff) * attenuation * lightEquation(\\n lightColor, diffuseColor, specularColor, ndl, ndh, ndv, glossiness\\n );\\n#ifdef SHADOWMAP_ENABLED\\n float shadowContrib = computeShadowContrib(\\n lightShadowMap, lightMatrix, position, lightShadowMapSize\\n );\\n gl_FragColor.rgb *= shadowContrib;\\n#endif\\n gl_FragColor.a = 1.0;\\n}\\n@end\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9zcG90Lmdsc2wuanM/MWRlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5kZWZlcnJlZC5zcG90X2xpZ2h0XFxuQGltcG9ydCBjbGF5LmRlZmVycmVkLmNodW5rLmxpZ2h0X2hlYWRcXG5AaW1wb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsubGlnaHRfZXF1YXRpb25cXG5AaW1wb3J0IGNsYXkudXRpbC5jYWxjdWxhdGVfYXR0ZW51YXRpb25cXG51bmlmb3JtIHZlYzMgbGlnaHRQb3NpdGlvbjtcXG51bmlmb3JtIHZlYzMgbGlnaHREaXJlY3Rpb247XFxudW5pZm9ybSB2ZWMzIGxpZ2h0Q29sb3I7XFxudW5pZm9ybSBmbG9hdCB1bWJyYUFuZ2xlQ29zaW5lO1xcbnVuaWZvcm0gZmxvYXQgcGVudW1icmFBbmdsZUNvc2luZTtcXG51bmlmb3JtIGZsb2F0IGxpZ2h0UmFuZ2U7XFxudW5pZm9ybSBmbG9hdCBmYWxsb2ZmRmFjdG9yO1xcbnVuaWZvcm0gdmVjMyBleWVQb3NpdGlvbjtcXG4jaWZkZWYgU0hBRE9XTUFQX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCBsaWdodFNoYWRvd01hcDtcXG51bmlmb3JtIG1hdDQgbGlnaHRNYXRyaXg7XFxudW5pZm9ybSBmbG9hdCBsaWdodFNoYWRvd01hcFNpemU7XFxuI2VuZGlmXFxuQGltcG9ydCBjbGF5LnBsdWdpbi5zaGFkb3dfbWFwX2NvbW1vblxcbnZvaWQgbWFpbigpXFxue1xcbiBAaW1wb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsuZ2J1ZmZlcl9yZWFkXFxuIHZlYzMgTCA9IGxpZ2h0UG9zaXRpb24gLSBwb3NpdGlvbjtcXG4gdmVjMyBWID0gbm9ybWFsaXplKGV5ZVBvc2l0aW9uIC0gcG9zaXRpb24pO1xcbiBmbG9hdCBkaXN0ID0gbGVuZ3RoKEwpO1xcbiBMIC89IGRpc3Q7XFxuIGZsb2F0IGF0dGVudWF0aW9uID0gbGlnaHRBdHRlbnVhdGlvbihkaXN0LCBsaWdodFJhbmdlKTtcXG4gZmxvYXQgYyA9IGRvdCgtbm9ybWFsaXplKGxpZ2h0RGlyZWN0aW9uKSwgTCk7XFxuIGZsb2F0IGZhbGxvZmYgPSBjbGFtcCgoYyAtIHVtYnJhQW5nbGVDb3NpbmUpIC8gKHBlbnVtYnJhQW5nbGVDb3NpbmUgLSB1bWJyYUFuZ2xlQ29zaW5lKSwgMC4wLCAxLjApO1xcbiBmYWxsb2ZmID0gcG93KGZhbGxvZmYsIGZhbGxvZmZGYWN0b3IpO1xcbiB2ZWMzIEggPSBub3JtYWxpemUoTCArIFYpO1xcbiBmbG9hdCBuZGwgPSBjbGFtcChkb3QoTiwgTCksIDAuMCwgMS4wKTtcXG4gZmxvYXQgbmRoID0gY2xhbXAoZG90KE4sIEgpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IG5kdiA9IGNsYW1wKGRvdChOLCBWKSwgMC4wLCAxLjApO1xcbiBnbF9GcmFnQ29sb3IucmdiID0gKDEuMCAtIGZhbGxvZmYpICogYXR0ZW51YXRpb24gKiBsaWdodEVxdWF0aW9uKFxcbiBsaWdodENvbG9yLCBkaWZmdXNlQ29sb3IsIHNwZWN1bGFyQ29sb3IsIG5kbCwgbmRoLCBuZHYsIGdsb3NzaW5lc3NcXG4gKTtcXG4jaWZkZWYgU0hBRE9XTUFQX0VOQUJMRURcXG4gZmxvYXQgc2hhZG93Q29udHJpYiA9IGNvbXB1dGVTaGFkb3dDb250cmliKFxcbiBsaWdodFNoYWRvd01hcCwgbGlnaHRNYXRyaXgsIHBvc2l0aW9uLCBsaWdodFNoYWRvd01hcFNpemVcXG4gKTtcXG4gZ2xfRnJhZ0NvbG9yLnJnYiAqPSBzaGFkb3dDb250cmliO1xcbiNlbmRpZlxcbiBnbF9GcmFnQ29sb3IuYSA9IDEuMDtcXG59XFxuQGVuZFxcblwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL3Nwb3QuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTYxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///161\n");

/***/ }),
/* 162 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.directional_light\\n@import clay.deferred.chunk.light_head\\n@import clay.deferred.chunk.light_equation\\nuniform vec3 lightDirection;\\nuniform vec3 lightColor;\\nuniform vec3 eyePosition;\\n#ifdef SHADOWMAP_ENABLED\\nuniform sampler2D lightShadowMap;\\nuniform float lightShadowMapSize;\\nuniform mat4 lightMatrices[SHADOW_CASCADE];\\nuniform float shadowCascadeClipsNear[SHADOW_CASCADE];\\nuniform float shadowCascadeClipsFar[SHADOW_CASCADE];\\n#endif\\n@import clay.plugin.shadow_map_common\\nvoid main()\\n{\\n @import clay.deferred.chunk.gbuffer_read\\n vec3 L = -normalize(lightDirection);\\n vec3 V = normalize(eyePosition - position);\\n vec3 H = normalize(L + V);\\n float ndl = clamp(dot(N, L), 0.0, 1.0);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float ndv = clamp(dot(N, V), 0.0, 1.0);\\n gl_FragColor.rgb = lightEquation(\\n lightColor, diffuseColor, specularColor, ndl, ndh, ndv, glossiness\\n );\\n#ifdef SHADOWMAP_ENABLED\\n float shadowContrib = 1.0;\\n for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{\\n if (\\n z >= shadowCascadeClipsNear[_idx_] &&\\n z <= shadowCascadeClipsFar[_idx_]\\n ) {\\n shadowContrib = computeShadowContrib(\\n lightShadowMap, lightMatrices[_idx_], position, lightShadowMapSize,\\n vec2(1.0 / float(SHADOW_CASCADE), 1.0),\\n vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)\\n );\\n }\\n }}\\n gl_FragColor.rgb *= shadowContrib;\\n#endif\\n gl_FragColor.a = 1.0;\\n}\\n@end\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9kaXJlY3Rpb25hbC5nbHNsLmpzP2YzNzgiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuZGVmZXJyZWQuZGlyZWN0aW9uYWxfbGlnaHRcXG5AaW1wb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsubGlnaHRfaGVhZFxcbkBpbXBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5saWdodF9lcXVhdGlvblxcbnVuaWZvcm0gdmVjMyBsaWdodERpcmVjdGlvbjtcXG51bmlmb3JtIHZlYzMgbGlnaHRDb2xvcjtcXG51bmlmb3JtIHZlYzMgZXllUG9zaXRpb247XFxuI2lmZGVmIFNIQURPV01BUF9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgbGlnaHRTaGFkb3dNYXA7XFxudW5pZm9ybSBmbG9hdCBsaWdodFNoYWRvd01hcFNpemU7XFxudW5pZm9ybSBtYXQ0IGxpZ2h0TWF0cmljZXNbU0hBRE9XX0NBU0NBREVdO1xcbnVuaWZvcm0gZmxvYXQgc2hhZG93Q2FzY2FkZUNsaXBzTmVhcltTSEFET1dfQ0FTQ0FERV07XFxudW5pZm9ybSBmbG9hdCBzaGFkb3dDYXNjYWRlQ2xpcHNGYXJbU0hBRE9XX0NBU0NBREVdO1xcbiNlbmRpZlxcbkBpbXBvcnQgY2xheS5wbHVnaW4uc2hhZG93X21hcF9jb21tb25cXG52b2lkIG1haW4oKVxcbntcXG4gQGltcG9ydCBjbGF5LmRlZmVycmVkLmNodW5rLmdidWZmZXJfcmVhZFxcbiB2ZWMzIEwgPSAtbm9ybWFsaXplKGxpZ2h0RGlyZWN0aW9uKTtcXG4gdmVjMyBWID0gbm9ybWFsaXplKGV5ZVBvc2l0aW9uIC0gcG9zaXRpb24pO1xcbiB2ZWMzIEggPSBub3JtYWxpemUoTCArIFYpO1xcbiBmbG9hdCBuZGwgPSBjbGFtcChkb3QoTiwgTCksIDAuMCwgMS4wKTtcXG4gZmxvYXQgbmRoID0gY2xhbXAoZG90KE4sIEgpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IG5kdiA9IGNsYW1wKGRvdChOLCBWKSwgMC4wLCAxLjApO1xcbiBnbF9GcmFnQ29sb3IucmdiID0gbGlnaHRFcXVhdGlvbihcXG4gbGlnaHRDb2xvciwgZGlmZnVzZUNvbG9yLCBzcGVjdWxhckNvbG9yLCBuZGwsIG5kaCwgbmR2LCBnbG9zc2luZXNzXFxuICk7XFxuI2lmZGVmIFNIQURPV01BUF9FTkFCTEVEXFxuIGZsb2F0IHNoYWRvd0NvbnRyaWIgPSAxLjA7XFxuIGZvciAoaW50IF9pZHhfID0gMDsgX2lkeF8gPCBTSEFET1dfQ0FTQ0FERTsgX2lkeF8rKykge3tcXG4gaWYgKFxcbiB6ID49IHNoYWRvd0Nhc2NhZGVDbGlwc05lYXJbX2lkeF9dICYmXFxuIHogPD0gc2hhZG93Q2FzY2FkZUNsaXBzRmFyW19pZHhfXVxcbiApIHtcXG4gc2hhZG93Q29udHJpYiA9IGNvbXB1dGVTaGFkb3dDb250cmliKFxcbiBsaWdodFNoYWRvd01hcCwgbGlnaHRNYXRyaWNlc1tfaWR4X10sIHBvc2l0aW9uLCBsaWdodFNoYWRvd01hcFNpemUsXFxuIHZlYzIoMS4wIC8gZmxvYXQoU0hBRE9XX0NBU0NBREUpLCAxLjApLFxcbiB2ZWMyKGZsb2F0KF9pZHhfKSAvIGZsb2F0KFNIQURPV19DQVNDQURFKSwgMC4wKVxcbiApO1xcbiB9XFxuIH19XFxuIGdsX0ZyYWdDb2xvci5yZ2IgKj0gc2hhZG93Q29udHJpYjtcXG4jZW5kaWZcXG4gZ2xfRnJhZ0NvbG9yLmEgPSAxLjA7XFxufVxcbkBlbmRcXG5cIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9kaXJlY3Rpb25hbC5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///162\n");

/***/ }),
/* 163 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.ambient_light\\nuniform sampler2D gBufferTexture1;\\nuniform sampler2D gBufferTexture3;\\nuniform vec3 lightColor;\\nuniform vec2 windowSize: WINDOW_SIZE;\\nvoid main()\\n{\\n vec2 uv = gl_FragCoord.xy / windowSize;\\n vec4 texel1 = texture2D(gBufferTexture1, uv);\\n if (dot(texel1.rgb, vec3(1.0)) == 0.0) {\\n discard;\\n }\\n vec3 albedo = texture2D(gBufferTexture3, uv).rgb;\\n gl_FragColor.rgb = lightColor * albedo;\\n gl_FragColor.a = 1.0;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9hbWJpZW50Lmdsc2wuanM/ZTIwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5kZWZlcnJlZC5hbWJpZW50X2xpZ2h0XFxudW5pZm9ybSBzYW1wbGVyMkQgZ0J1ZmZlclRleHR1cmUxO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGdCdWZmZXJUZXh0dXJlMztcXG51bmlmb3JtIHZlYzMgbGlnaHRDb2xvcjtcXG51bmlmb3JtIHZlYzIgd2luZG93U2l6ZTogV0lORE9XX1NJWkU7XFxudm9pZCBtYWluKClcXG57XFxuIHZlYzIgdXYgPSBnbF9GcmFnQ29vcmQueHkgLyB3aW5kb3dTaXplO1xcbiB2ZWM0IHRleGVsMSA9IHRleHR1cmUyRChnQnVmZmVyVGV4dHVyZTEsIHV2KTtcXG4gaWYgKGRvdCh0ZXhlbDEucmdiLCB2ZWMzKDEuMCkpID09IDAuMCkge1xcbiBkaXNjYXJkO1xcbiB9XFxuIHZlYzMgYWxiZWRvID0gdGV4dHVyZTJEKGdCdWZmZXJUZXh0dXJlMywgdXYpLnJnYjtcXG4gZ2xfRnJhZ0NvbG9yLnJnYiA9IGxpZ2h0Q29sb3IgKiBhbGJlZG87XFxuIGdsX0ZyYWdDb2xvci5hID0gMS4wO1xcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvYW1iaWVudC5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///163\n");

/***/ }),
/* 164 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.ambient_sh_light\\nuniform sampler2D gBufferTexture1;\\nuniform sampler2D gBufferTexture3;\\nuniform vec3 lightColor;\\nuniform vec3 lightCoefficients[9];\\nuniform vec2 windowSize: WINDOW_SIZE;\\nvec3 calcAmbientSHLight(vec3 N) {\\n return lightCoefficients[0]\\n + lightCoefficients[1] * N.x\\n + lightCoefficients[2] * N.y\\n + lightCoefficients[3] * N.z\\n + lightCoefficients[4] * N.x * N.z\\n + lightCoefficients[5] * N.z * N.y\\n + lightCoefficients[6] * N.y * N.x\\n + lightCoefficients[7] * (3.0 * N.z * N.z - 1.0)\\n + lightCoefficients[8] * (N.x * N.x - N.y * N.y);\\n}\\nvoid main()\\n{\\n vec2 uv = gl_FragCoord.xy / windowSize;\\n vec4 texel1 = texture2D(gBufferTexture1, uv);\\n if (dot(texel1.rgb, vec3(1.0)) == 0.0) {\\n discard;\\n }\\n vec3 N = texel1.rgb * 2.0 - 1.0;\\n vec3 albedo = texture2D(gBufferTexture3, uv).rgb;\\n gl_FragColor.rgb = lightColor * albedo * calcAmbientSHLight(N);\\n gl_FragColor.a = 1.0;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTY0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9hbWJpZW50c2guZ2xzbC5qcz9lMWQ0Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LmRlZmVycmVkLmFtYmllbnRfc2hfbGlnaHRcXG51bmlmb3JtIHNhbXBsZXIyRCBnQnVmZmVyVGV4dHVyZTE7XFxudW5pZm9ybSBzYW1wbGVyMkQgZ0J1ZmZlclRleHR1cmUzO1xcbnVuaWZvcm0gdmVjMyBsaWdodENvbG9yO1xcbnVuaWZvcm0gdmVjMyBsaWdodENvZWZmaWNpZW50c1s5XTtcXG51bmlmb3JtIHZlYzIgd2luZG93U2l6ZTogV0lORE9XX1NJWkU7XFxudmVjMyBjYWxjQW1iaWVudFNITGlnaHQodmVjMyBOKSB7XFxuIHJldHVybiBsaWdodENvZWZmaWNpZW50c1swXVxcbiArIGxpZ2h0Q29lZmZpY2llbnRzWzFdICogTi54XFxuICsgbGlnaHRDb2VmZmljaWVudHNbMl0gKiBOLnlcXG4gKyBsaWdodENvZWZmaWNpZW50c1szXSAqIE4uelxcbiArIGxpZ2h0Q29lZmZpY2llbnRzWzRdICogTi54ICogTi56XFxuICsgbGlnaHRDb2VmZmljaWVudHNbNV0gKiBOLnogKiBOLnlcXG4gKyBsaWdodENvZWZmaWNpZW50c1s2XSAqIE4ueSAqIE4ueFxcbiArIGxpZ2h0Q29lZmZpY2llbnRzWzddICogKDMuMCAqIE4ueiAqIE4ueiAtIDEuMClcXG4gKyBsaWdodENvZWZmaWNpZW50c1s4XSAqIChOLnggKiBOLnggLSBOLnkgKiBOLnkpO1xcbn1cXG52b2lkIG1haW4oKVxcbntcXG4gdmVjMiB1diA9IGdsX0ZyYWdDb29yZC54eSAvIHdpbmRvd1NpemU7XFxuIHZlYzQgdGV4ZWwxID0gdGV4dHVyZTJEKGdCdWZmZXJUZXh0dXJlMSwgdXYpO1xcbiBpZiAoZG90KHRleGVsMS5yZ2IsIHZlYzMoMS4wKSkgPT0gMC4wKSB7XFxuIGRpc2NhcmQ7XFxuIH1cXG4gdmVjMyBOID0gdGV4ZWwxLnJnYiAqIDIuMCAtIDEuMDtcXG4gdmVjMyBhbGJlZG8gPSB0ZXh0dXJlMkQoZ0J1ZmZlclRleHR1cmUzLCB1dikucmdiO1xcbiBnbF9GcmFnQ29sb3IucmdiID0gbGlnaHRDb2xvciAqIGFsYmVkbyAqIGNhbGNBbWJpZW50U0hMaWdodChOKTtcXG4gZ2xfRnJhZ0NvbG9yLmEgPSAxLjA7XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9hbWJpZW50c2guZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTY0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///164\n");

/***/ }),
/* 165 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.ambient_cubemap_light\\n@import clay.deferred.chunk.light_head\\nuniform vec3 lightColor;\\nuniform samplerCube lightCubemap;\\nuniform sampler2D brdfLookup;\\nuniform vec3 eyePosition;\\n@import clay.util.rgbm\\nvoid main()\\n{\\n @import clay.deferred.chunk.gbuffer_read\\n vec3 V = normalize(eyePosition - position);\\n vec3 L = reflect(-V, N);\\n float ndv = clamp(dot(N, V), 0.0, 1.0);\\n float rough = clamp(1.0 - glossiness, 0.0, 1.0);\\n float bias = rough * 5.0;\\n vec2 brdfParam = texture2D(brdfLookup, vec2(rough, ndv)).xy;\\n vec3 envWeight = specularColor * brdfParam.x + brdfParam.y;\\n vec3 envTexel = RGBMDecode(textureCubeLodEXT(lightCubemap, L, bias), 8.12);\\n gl_FragColor.rgb = lightColor * envTexel * envWeight;\\n gl_FragColor.a = 1.0;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTY1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9hbWJpZW50Y3ViZW1hcC5nbHNsLmpzPzQ2YjciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuZGVmZXJyZWQuYW1iaWVudF9jdWJlbWFwX2xpZ2h0XFxuQGltcG9ydCBjbGF5LmRlZmVycmVkLmNodW5rLmxpZ2h0X2hlYWRcXG51bmlmb3JtIHZlYzMgbGlnaHRDb2xvcjtcXG51bmlmb3JtIHNhbXBsZXJDdWJlIGxpZ2h0Q3ViZW1hcDtcXG51bmlmb3JtIHNhbXBsZXIyRCBicmRmTG9va3VwO1xcbnVuaWZvcm0gdmVjMyBleWVQb3NpdGlvbjtcXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxudm9pZCBtYWluKClcXG57XFxuIEBpbXBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5nYnVmZmVyX3JlYWRcXG4gdmVjMyBWID0gbm9ybWFsaXplKGV5ZVBvc2l0aW9uIC0gcG9zaXRpb24pO1xcbiB2ZWMzIEwgPSByZWZsZWN0KC1WLCBOKTtcXG4gZmxvYXQgbmR2ID0gY2xhbXAoZG90KE4sIFYpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IHJvdWdoID0gY2xhbXAoMS4wIC0gZ2xvc3NpbmVzcywgMC4wLCAxLjApO1xcbiBmbG9hdCBiaWFzID0gcm91Z2ggKiA1LjA7XFxuIHZlYzIgYnJkZlBhcmFtID0gdGV4dHVyZTJEKGJyZGZMb29rdXAsIHZlYzIocm91Z2gsIG5kdikpLnh5O1xcbiB2ZWMzIGVudldlaWdodCA9IHNwZWN1bGFyQ29sb3IgKiBicmRmUGFyYW0ueCArIGJyZGZQYXJhbS55O1xcbiB2ZWMzIGVudlRleGVsID0gUkdCTURlY29kZSh0ZXh0dXJlQ3ViZUxvZEVYVChsaWdodEN1YmVtYXAsIEwsIGJpYXMpLCA4LjEyKTtcXG4gZ2xfRnJhZ0NvbG9yLnJnYiA9IGxpZ2h0Q29sb3IgKiBlbnZUZXhlbCAqIGVudldlaWdodDtcXG4gZ2xfRnJhZ0NvbG9yLmEgPSAxLjA7XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9hbWJpZW50Y3ViZW1hcC5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///165\n");

/***/ }),
/* 166 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.point_light\\n@import clay.deferred.chunk.light_head\\n@import clay.util.calculate_attenuation\\n@import clay.deferred.chunk.light_equation\\nuniform vec3 lightPosition;\\nuniform vec3 lightColor;\\nuniform float lightRange;\\nuniform vec3 eyePosition;\\n#ifdef SHADOWMAP_ENABLED\\nuniform samplerCube lightShadowMap;\\nuniform float lightShadowMapSize;\\n#endif\\nvarying vec3 v_Position;\\n@import clay.plugin.shadow_map_common\\nvoid main()\\n{\\n @import clay.deferred.chunk.gbuffer_read\\n vec3 L = lightPosition - position;\\n vec3 V = normalize(eyePosition - position);\\n float dist = length(L);\\n L /= dist;\\n vec3 H = normalize(L + V);\\n float ndl = clamp(dot(N, L), 0.0, 1.0);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float ndv = clamp(dot(N, V), 0.0, 1.0);\\n float attenuation = lightAttenuation(dist, lightRange);\\n gl_FragColor.rgb = attenuation * lightEquation(\\n lightColor, diffuseColor, specularColor, ndl, ndh, ndv, glossiness\\n );\\n#ifdef SHADOWMAP_ENABLED\\n float shadowContrib = computeShadowContribOmni(\\n lightShadowMap, -L * dist, lightRange\\n );\\n gl_FragColor.rgb *= clamp(shadowContrib, 0.0, 1.0);\\n#endif\\n gl_FragColor.a = 1.0;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTY2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9wb2ludC5nbHNsLmpzPzgwMDkiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuZGVmZXJyZWQucG9pbnRfbGlnaHRcXG5AaW1wb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsubGlnaHRfaGVhZFxcbkBpbXBvcnQgY2xheS51dGlsLmNhbGN1bGF0ZV9hdHRlbnVhdGlvblxcbkBpbXBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5saWdodF9lcXVhdGlvblxcbnVuaWZvcm0gdmVjMyBsaWdodFBvc2l0aW9uO1xcbnVuaWZvcm0gdmVjMyBsaWdodENvbG9yO1xcbnVuaWZvcm0gZmxvYXQgbGlnaHRSYW5nZTtcXG51bmlmb3JtIHZlYzMgZXllUG9zaXRpb247XFxuI2lmZGVmIFNIQURPV01BUF9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyQ3ViZSBsaWdodFNoYWRvd01hcDtcXG51bmlmb3JtIGZsb2F0IGxpZ2h0U2hhZG93TWFwU2l6ZTtcXG4jZW5kaWZcXG52YXJ5aW5nIHZlYzMgdl9Qb3NpdGlvbjtcXG5AaW1wb3J0IGNsYXkucGx1Z2luLnNoYWRvd19tYXBfY29tbW9uXFxudm9pZCBtYWluKClcXG57XFxuIEBpbXBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5nYnVmZmVyX3JlYWRcXG4gdmVjMyBMID0gbGlnaHRQb3NpdGlvbiAtIHBvc2l0aW9uO1xcbiB2ZWMzIFYgPSBub3JtYWxpemUoZXllUG9zaXRpb24gLSBwb3NpdGlvbik7XFxuIGZsb2F0IGRpc3QgPSBsZW5ndGgoTCk7XFxuIEwgLz0gZGlzdDtcXG4gdmVjMyBIID0gbm9ybWFsaXplKEwgKyBWKTtcXG4gZmxvYXQgbmRsID0gY2xhbXAoZG90KE4sIEwpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IG5kaCA9IGNsYW1wKGRvdChOLCBIKSwgMC4wLCAxLjApO1xcbiBmbG9hdCBuZHYgPSBjbGFtcChkb3QoTiwgViksIDAuMCwgMS4wKTtcXG4gZmxvYXQgYXR0ZW51YXRpb24gPSBsaWdodEF0dGVudWF0aW9uKGRpc3QsIGxpZ2h0UmFuZ2UpO1xcbiBnbF9GcmFnQ29sb3IucmdiID0gYXR0ZW51YXRpb24gKiBsaWdodEVxdWF0aW9uKFxcbiBsaWdodENvbG9yLCBkaWZmdXNlQ29sb3IsIHNwZWN1bGFyQ29sb3IsIG5kbCwgbmRoLCBuZHYsIGdsb3NzaW5lc3NcXG4gKTtcXG4jaWZkZWYgU0hBRE9XTUFQX0VOQUJMRURcXG4gZmxvYXQgc2hhZG93Q29udHJpYiA9IGNvbXB1dGVTaGFkb3dDb250cmliT21uaShcXG4gbGlnaHRTaGFkb3dNYXAsIC1MICogZGlzdCwgbGlnaHRSYW5nZVxcbiApO1xcbiBnbF9GcmFnQ29sb3IucmdiICo9IGNsYW1wKHNoYWRvd0NvbnRyaWIsIDAuMCwgMS4wKTtcXG4jZW5kaWZcXG4gZ2xfRnJhZ0NvbG9yLmEgPSAxLjA7XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9wb2ludC5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///166\n");

/***/ }),
/* 167 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.sphere_light\\n@import clay.deferred.chunk.light_head\\n@import clay.util.calculate_attenuation\\n@import clay.deferred.chunk.light_equation\\nuniform vec3 lightPosition;\\nuniform vec3 lightColor;\\nuniform float lightRange;\\nuniform float lightRadius;\\nuniform vec3 eyePosition;\\nvarying vec3 v_Position;\\nvoid main()\\n{\\n @import clay.deferred.chunk.gbuffer_read\\n vec3 L = lightPosition - position;\\n vec3 V = normalize(eyePosition - position);\\n float dist = length(L);\\n vec3 R = reflect(V, N);\\n float tmp = dot(L, R);\\n vec3 cToR = tmp * R - L;\\n float d = length(cToR);\\n L = L + cToR * clamp(lightRadius / d, 0.0, 1.0);\\n L = normalize(L);\\n vec3 H = normalize(L + V);\\n float ndl = clamp(dot(N, L), 0.0, 1.0);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float ndv = clamp(dot(N, V), 0.0, 1.0);\\n float attenuation = lightAttenuation(dist, lightRange);\\n gl_FragColor.rgb = lightColor * ndl * attenuation;\\n glossiness = clamp(glossiness - lightRadius / 2.0 / dist, 0.0, 1.0);\\n gl_FragColor.rgb = attenuation * lightEquation(\\n lightColor, diffuseColor, specularColor, ndl, ndh, ndv, glossiness\\n );\\n gl_FragColor.a = 1.0;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTY3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9zcGhlcmUuZ2xzbC5qcz81NGE1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LmRlZmVycmVkLnNwaGVyZV9saWdodFxcbkBpbXBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5saWdodF9oZWFkXFxuQGltcG9ydCBjbGF5LnV0aWwuY2FsY3VsYXRlX2F0dGVudWF0aW9uXFxuQGltcG9ydCBjbGF5LmRlZmVycmVkLmNodW5rLmxpZ2h0X2VxdWF0aW9uXFxudW5pZm9ybSB2ZWMzIGxpZ2h0UG9zaXRpb247XFxudW5pZm9ybSB2ZWMzIGxpZ2h0Q29sb3I7XFxudW5pZm9ybSBmbG9hdCBsaWdodFJhbmdlO1xcbnVuaWZvcm0gZmxvYXQgbGlnaHRSYWRpdXM7XFxudW5pZm9ybSB2ZWMzIGV5ZVBvc2l0aW9uO1xcbnZhcnlpbmcgdmVjMyB2X1Bvc2l0aW9uO1xcbnZvaWQgbWFpbigpXFxue1xcbiBAaW1wb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsuZ2J1ZmZlcl9yZWFkXFxuIHZlYzMgTCA9IGxpZ2h0UG9zaXRpb24gLSBwb3NpdGlvbjtcXG4gdmVjMyBWID0gbm9ybWFsaXplKGV5ZVBvc2l0aW9uIC0gcG9zaXRpb24pO1xcbiBmbG9hdCBkaXN0ID0gbGVuZ3RoKEwpO1xcbiB2ZWMzIFIgPSByZWZsZWN0KFYsIE4pO1xcbiBmbG9hdCB0bXAgPSBkb3QoTCwgUik7XFxuIHZlYzMgY1RvUiA9IHRtcCAqIFIgLSBMO1xcbiBmbG9hdCBkID0gbGVuZ3RoKGNUb1IpO1xcbiBMID0gTCArIGNUb1IgKiBjbGFtcChsaWdodFJhZGl1cyAvIGQsIDAuMCwgMS4wKTtcXG4gTCA9IG5vcm1hbGl6ZShMKTtcXG4gdmVjMyBIID0gbm9ybWFsaXplKEwgKyBWKTtcXG4gZmxvYXQgbmRsID0gY2xhbXAoZG90KE4sIEwpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IG5kaCA9IGNsYW1wKGRvdChOLCBIKSwgMC4wLCAxLjApO1xcbiBmbG9hdCBuZHYgPSBjbGFtcChkb3QoTiwgViksIDAuMCwgMS4wKTtcXG4gZmxvYXQgYXR0ZW51YXRpb24gPSBsaWdodEF0dGVudWF0aW9uKGRpc3QsIGxpZ2h0UmFuZ2UpO1xcbiBnbF9GcmFnQ29sb3IucmdiID0gbGlnaHRDb2xvciAqIG5kbCAqIGF0dGVudWF0aW9uO1xcbiBnbG9zc2luZXNzID0gY2xhbXAoZ2xvc3NpbmVzcyAtIGxpZ2h0UmFkaXVzIC8gMi4wIC8gZGlzdCwgMC4wLCAxLjApO1xcbiBnbF9GcmFnQ29sb3IucmdiID0gYXR0ZW51YXRpb24gKiBsaWdodEVxdWF0aW9uKFxcbiBsaWdodENvbG9yLCBkaWZmdXNlQ29sb3IsIHNwZWN1bGFyQ29sb3IsIG5kbCwgbmRoLCBuZHYsIGdsb3NzaW5lc3NcXG4gKTtcXG4gZ2xfRnJhZ0NvbG9yLmEgPSAxLjA7XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9zcGhlcmUuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTY3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///167\n");

/***/ }),
/* 168 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.tube_light\\n@import clay.deferred.chunk.light_head\\n@import clay.util.calculate_attenuation\\n@import clay.deferred.chunk.light_equation\\nuniform vec3 lightPosition;\\nuniform vec3 lightColor;\\nuniform float lightRange;\\nuniform vec3 lightExtend;\\nuniform vec3 eyePosition;\\nvarying vec3 v_Position;\\nvoid main()\\n{\\n @import clay.deferred.chunk.gbuffer_read\\n vec3 L = lightPosition - position;\\n vec3 V = normalize(eyePosition - position);\\n vec3 R = reflect(V, N);\\n vec3 L0 = lightPosition - lightExtend - position;\\n vec3 L1 = lightPosition + lightExtend - position;\\n vec3 LD = L1 - L0;\\n float len0 = length(L0);\\n float len1 = length(L1);\\n float irra = 2.0 * clamp(dot(N, L0) / (2.0 * len0) + dot(N, L1) / (2.0 * len1), 0.0, 1.0);\\n float LDDotR = dot(R, LD);\\n float t = (LDDotR * dot(R, L0) - dot(L0, LD)) / (dot(LD, LD) - LDDotR * LDDotR);\\n t = clamp(t, 0.0, 1.0);\\n L = L0 + t * LD;\\n float dist = length(L);\\n L /= dist;\\n vec3 H = normalize(L + V);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float ndv = clamp(dot(N, V), 0.0, 1.0);\\n glossiness = clamp(glossiness - 0.0 / 2.0 / dist, 0.0, 1.0);\\n gl_FragColor.rgb = lightColor * irra * lightAttenuation(dist, lightRange)\\n * (diffuseColor + D_Phong(glossiness, ndh) * F_Schlick(ndv, specularColor));\\n gl_FragColor.a = 1.0;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTY4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC90dWJlLmdsc2wuanM/NzRjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5kZWZlcnJlZC50dWJlX2xpZ2h0XFxuQGltcG9ydCBjbGF5LmRlZmVycmVkLmNodW5rLmxpZ2h0X2hlYWRcXG5AaW1wb3J0IGNsYXkudXRpbC5jYWxjdWxhdGVfYXR0ZW51YXRpb25cXG5AaW1wb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsubGlnaHRfZXF1YXRpb25cXG51bmlmb3JtIHZlYzMgbGlnaHRQb3NpdGlvbjtcXG51bmlmb3JtIHZlYzMgbGlnaHRDb2xvcjtcXG51bmlmb3JtIGZsb2F0IGxpZ2h0UmFuZ2U7XFxudW5pZm9ybSB2ZWMzIGxpZ2h0RXh0ZW5kO1xcbnVuaWZvcm0gdmVjMyBleWVQb3NpdGlvbjtcXG52YXJ5aW5nIHZlYzMgdl9Qb3NpdGlvbjtcXG52b2lkIG1haW4oKVxcbntcXG4gQGltcG9ydCBjbGF5LmRlZmVycmVkLmNodW5rLmdidWZmZXJfcmVhZFxcbiB2ZWMzIEwgPSBsaWdodFBvc2l0aW9uIC0gcG9zaXRpb247XFxuIHZlYzMgViA9IG5vcm1hbGl6ZShleWVQb3NpdGlvbiAtIHBvc2l0aW9uKTtcXG4gdmVjMyBSID0gcmVmbGVjdChWLCBOKTtcXG4gdmVjMyBMMCA9IGxpZ2h0UG9zaXRpb24gLSBsaWdodEV4dGVuZCAtIHBvc2l0aW9uO1xcbiB2ZWMzIEwxID0gbGlnaHRQb3NpdGlvbiArIGxpZ2h0RXh0ZW5kIC0gcG9zaXRpb247XFxuIHZlYzMgTEQgPSBMMSAtIEwwO1xcbiBmbG9hdCBsZW4wID0gbGVuZ3RoKEwwKTtcXG4gZmxvYXQgbGVuMSA9IGxlbmd0aChMMSk7XFxuIGZsb2F0IGlycmEgPSAyLjAgKiBjbGFtcChkb3QoTiwgTDApIC8gKDIuMCAqIGxlbjApICsgZG90KE4sIEwxKSAvICgyLjAgKiBsZW4xKSwgMC4wLCAxLjApO1xcbiBmbG9hdCBMRERvdFIgPSBkb3QoUiwgTEQpO1xcbiBmbG9hdCB0ID0gKExERG90UiAqIGRvdChSLCBMMCkgLSBkb3QoTDAsIExEKSkgLyAoZG90KExELCBMRCkgLSBMRERvdFIgKiBMRERvdFIpO1xcbiB0ID0gY2xhbXAodCwgMC4wLCAxLjApO1xcbiBMID0gTDAgKyB0ICogTEQ7XFxuIGZsb2F0IGRpc3QgPSBsZW5ndGgoTCk7XFxuIEwgLz0gZGlzdDtcXG4gdmVjMyBIID0gbm9ybWFsaXplKEwgKyBWKTtcXG4gZmxvYXQgbmRoID0gY2xhbXAoZG90KE4sIEgpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IG5kdiA9IGNsYW1wKGRvdChOLCBWKSwgMC4wLCAxLjApO1xcbiBnbG9zc2luZXNzID0gY2xhbXAoZ2xvc3NpbmVzcyAtIDAuMCAvIDIuMCAvIGRpc3QsIDAuMCwgMS4wKTtcXG4gZ2xfRnJhZ0NvbG9yLnJnYiA9IGxpZ2h0Q29sb3IgKiBpcnJhICogbGlnaHRBdHRlbnVhdGlvbihkaXN0LCBsaWdodFJhbmdlKVxcbiAqIChkaWZmdXNlQ29sb3IgKyBEX1Bob25nKGdsb3NzaW5lc3MsIG5kaCkgKiBGX1NjaGxpY2sobmR2LCBzcGVjdWxhckNvbG9yKSk7XFxuIGdsX0ZyYWdDb2xvci5hID0gMS4wO1xcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvdHViZS5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///168\n");

/***/ }),
/* 169 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix__ = __webpack_require__(170);\n// DEPRECATED\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0__glmatrix__[\"a\" /* default */]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTY5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZGVwL2dsbWF0cml4LmpzPzZiNTciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gREVQUkVDQVRFRFxuaW1wb3J0IGdsbWF0cml4IGZyb20gJy4uL2dsbWF0cml4JztcblxuZXhwb3J0IGRlZmF1bHQgZ2xtYXRyaXg7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2RlcC9nbG1hdHJpeC5qc1xuLy8gbW9kdWxlIGlkID0gMTY5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///169\n");

/***/ }),
/* 170 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__vec2__ = __webpack_require__(45);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__vec4__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__mat2__ = __webpack_require__(110);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__mat2d__ = __webpack_require__(111);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__mat3__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__quat__ = __webpack_require__(27);\n/**\n * @fileoverview gl-matrix - High performance matrix and vector operations\n * @author Brandon Jones\n * @author Colin MacKenzie IV\n * @version 2.2.2\n */\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    vec2: __WEBPACK_IMPORTED_MODULE_0__vec2__[\"a\" /* default */],\n    vec3: __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */],\n    vec4: __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */],\n    mat2: __WEBPACK_IMPORTED_MODULE_3__mat2__[\"a\" /* default */],\n    mat2d: __WEBPACK_IMPORTED_MODULE_4__mat2d__[\"a\" /* default */],\n    mat3: __WEBPACK_IMPORTED_MODULE_5__mat3__[\"a\" /* default */],\n    mat4: __WEBPACK_IMPORTED_MODULE_6__mat4__[\"a\" /* default */],\n    quat: __WEBPACK_IMPORTED_MODULE_7__quat__[\"a\" /* default */]\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvZ2xtYXRyaXgvaW5kZXguanM/OWEzNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlb3ZlcnZpZXcgZ2wtbWF0cml4IC0gSGlnaCBwZXJmb3JtYW5jZSBtYXRyaXggYW5kIHZlY3RvciBvcGVyYXRpb25zXG4gKiBAYXV0aG9yIEJyYW5kb24gSm9uZXNcbiAqIEBhdXRob3IgQ29saW4gTWFjS2VuemllIElWXG4gKiBAdmVyc2lvbiAyLjIuMlxuICovXG5cbi8qIENvcHlyaWdodCAoYykgMjAxMywgQnJhbmRvbiBKb25lcywgQ29saW4gTWFjS2VuemllIElWLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5SZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuXG4gICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gICAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAgICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXG5BTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1JcbkFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xuKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xuTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OXG5BTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcblNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLiAqL1xuXG5pbXBvcnQgdmVjMiBmcm9tICcuL3ZlYzInO1xuaW1wb3J0IHZlYzMgZnJvbSAnLi92ZWMzJztcbmltcG9ydCB2ZWM0IGZyb20gJy4vdmVjNCc7XG5pbXBvcnQgbWF0MiBmcm9tICcuL21hdDInO1xuaW1wb3J0IG1hdDJkIGZyb20gJy4vbWF0MmQnO1xuaW1wb3J0IG1hdDMgZnJvbSAnLi9tYXQzJztcbmltcG9ydCBtYXQ0IGZyb20gJy4vbWF0NCc7XG5pbXBvcnQgcXVhdCBmcm9tICcuL3F1YXQnO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgdmVjMjogdmVjMixcbiAgICB2ZWMzOiB2ZWMzLFxuICAgIHZlYzQ6IHZlYzQsXG4gICAgbWF0MjogbWF0MixcbiAgICBtYXQyZDogbWF0MmQsXG4gICAgbWF0MzogbWF0MyxcbiAgICBtYXQ0OiBtYXQ0LFxuICAgIHF1YXQ6IHF1YXRcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2dsbWF0cml4L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxNzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///170\n");

/***/ }),
/* 171 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_Cache__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_BoundingBox__ = __webpack_require__(9);\n\n\n\n\nvar tmpBoundingBox = new __WEBPACK_IMPORTED_MODULE_2__math_BoundingBox__[\"a\" /* default */]();\n\n\n/**\n * @constructor clay.InstancedMesh\n * @extends clay.Mesh\n */\nvar InstancedMesh = __WEBPACK_IMPORTED_MODULE_0__Mesh__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.InstancedMesh# */ {\n\n        /**\n         * Instances array. Each object in array must have node property\n         * @type Array\n         * @example\n         *  var node = new clay.Node()\n         *  instancedMesh.instances.push({\n         *      node: node\n         *  });\n         */\n        instances: [],\n\n        instancedAttributes: {},\n\n        _attributesSymbols: []\n    };\n}, function () {\n    this._cache = new __WEBPACK_IMPORTED_MODULE_1__core_Cache__[\"a\" /* default */]();\n\n    this.createInstancedAttribute('instanceMat1', 'float', 4, 1);\n    this.createInstancedAttribute('instanceMat2', 'float', 4, 1);\n    this.createInstancedAttribute('instanceMat3', 'float', 4, 1);\n}, {\n\n    isInstancedMesh: function () { return true; },\n\n    getInstanceCount: function () {\n        return this.instances.length;\n    },\n\n    removeAttribute: function (symbol) {\n        var idx = this._attributesSymbols.indexOf(symbol);\n        if (idx >= 0) {\n            this._attributesSymbols.splice(idx, 1);\n        }\n        delete this.instancedAttributes[symbol];\n    },\n\n    createInstancedAttribute: function (symbol, type, size, divisor) {\n        if (this.instancedAttributes[symbol]) {\n            return;\n        }\n        this.instancedAttributes[symbol] = {\n            symbol: symbol,\n            type: type,\n            size: size,\n            divisor: divisor == null ? 1 : divisor,\n            value: null\n        };\n\n        this._attributesSymbols.push(symbol);\n    },\n\n    getInstancedAttributesBuffers: function (renderer) {\n\n        var cache = this._cache;\n\n        cache.use(renderer.__uid__);\n\n        var buffers = cache.get('buffers') || [];\n\n        if (cache.isDirty('dirty')) {\n            var gl = renderer.gl;\n\n            for (var i = 0; i < this._attributesSymbols.length; i++) {\n                var attr = this.instancedAttributes[this._attributesSymbols[i]];\n\n                var bufferObj = buffers[i];\n                if (!bufferObj) {\n                    bufferObj = {\n                        buffer: gl.createBuffer()\n                    };\n                    buffers[i] = bufferObj;\n                }\n                bufferObj.symbol = attr.symbol;\n                bufferObj.divisor = attr.divisor;\n                bufferObj.size = attr.size;\n                bufferObj.type = attr.type;\n\n                gl.bindBuffer(gl.ARRAY_BUFFER, bufferObj.buffer);\n                gl.bufferData(gl.ARRAY_BUFFER, attr.value, gl.DYNAMIC_DRAW);\n            }\n\n            cache.fresh('dirty');\n\n            cache.put('buffers', buffers);\n        }\n\n        return buffers;\n    },\n\n    update: function (forceUpdateWorld) {\n        __WEBPACK_IMPORTED_MODULE_0__Mesh__[\"a\" /* default */].prototype.update.call(this, forceUpdateWorld);\n\n        var arraySize = this.getInstanceCount() * 4;\n        var instancedAttributes = this.instancedAttributes;\n\n        var instanceMat1 = instancedAttributes.instanceMat1.value;\n        var instanceMat2 = instancedAttributes.instanceMat2.value;\n        var instanceMat3 = instancedAttributes.instanceMat3.value;\n        if (!instanceMat1 || instanceMat1.length !== arraySize) {\n            instanceMat1 = instancedAttributes.instanceMat1.value = new Float32Array(arraySize);\n            instanceMat2 = instancedAttributes.instanceMat2.value = new Float32Array(arraySize);\n            instanceMat3 = instancedAttributes.instanceMat3.value = new Float32Array(arraySize);\n        }\n\n        var sourceBoundingBox = (this.skeleton && this.skeleton.boundingBox) || this.geometry.boundingBox;\n        var needUpdateBoundingBox = sourceBoundingBox != null && (this.castShadow || this.frustumCulling);\n        if (needUpdateBoundingBox && this.instances.length > 0) {\n            this.boundingBox = this.boundingBox || new __WEBPACK_IMPORTED_MODULE_2__math_BoundingBox__[\"a\" /* default */]();\n\n            this.boundingBox.min.set(Infinity, Infinity, Infinity);\n            this.boundingBox.max.set(-Infinity, -Infinity, -Infinity);\n        }\n        else {\n            this.boundingBox = null;\n        }\n\n        for (var i = 0; i < this.instances.length; i++) {\n            var instance = this.instances[i];\n            var node = instance.node;\n\n            if (!node) {\n                throw new Error('Instance must include node');\n            }\n            var transform = node.worldTransform.array;\n            var i4 = i * 4;\n            instanceMat1[i4] = transform[0];\n            instanceMat1[i4 + 1] = transform[1];\n            instanceMat1[i4 + 2] = transform[2];\n            instanceMat1[i4 + 3] = transform[12];\n\n            instanceMat2[i4] = transform[4];\n            instanceMat2[i4 + 1] = transform[5];\n            instanceMat2[i4 + 2] = transform[6];\n            instanceMat2[i4 + 3] = transform[13];\n\n            instanceMat3[i4] = transform[8];\n            instanceMat3[i4 + 1] = transform[9];\n            instanceMat3[i4 + 2] = transform[10];\n            instanceMat3[i4 + 3] = transform[14];\n\n            // Update bounding box\n            if (needUpdateBoundingBox) {\n                tmpBoundingBox.transformFrom(sourceBoundingBox, node.worldTransform);\n                this.boundingBox.union(tmpBoundingBox, this.boundingBox);\n            }\n        }\n\n        this._cache.dirty('dirty');\n    }\n});\n\n/* unused harmony default export */ var _unused_webpack_default_export = (InstancedMesh);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvSW5zdGFuY2VkTWVzaC5qcz85OTI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNZXNoIGZyb20gJy4vTWVzaCc7XG5pbXBvcnQgQ2FjaGUgZnJvbSAnLi9jb3JlL0NhY2hlJztcbmltcG9ydCBCb3VuZGluZ0JveCBmcm9tICcuL21hdGgvQm91bmRpbmdCb3gnO1xuXG52YXIgdG1wQm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcblxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5Lkluc3RhbmNlZE1lc2hcbiAqIEBleHRlbmRzIGNsYXkuTWVzaFxuICovXG52YXIgSW5zdGFuY2VkTWVzaCA9IE1lc2guZXh0ZW5kKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5Lkluc3RhbmNlZE1lc2gjICovIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5zdGFuY2VzIGFycmF5LiBFYWNoIG9iamVjdCBpbiBhcnJheSBtdXN0IGhhdmUgbm9kZSBwcm9wZXJ0eVxuICAgICAgICAgKiBAdHlwZSBBcnJheVxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiAgdmFyIG5vZGUgPSBuZXcgY2xheS5Ob2RlKClcbiAgICAgICAgICogIGluc3RhbmNlZE1lc2guaW5zdGFuY2VzLnB1c2goe1xuICAgICAgICAgKiAgICAgIG5vZGU6IG5vZGVcbiAgICAgICAgICogIH0pO1xuICAgICAgICAgKi9cbiAgICAgICAgaW5zdGFuY2VzOiBbXSxcblxuICAgICAgICBpbnN0YW5jZWRBdHRyaWJ1dGVzOiB7fSxcblxuICAgICAgICBfYXR0cmlidXRlc1N5bWJvbHM6IFtdXG4gICAgfTtcbn0sIGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9jYWNoZSA9IG5ldyBDYWNoZSgpO1xuXG4gICAgdGhpcy5jcmVhdGVJbnN0YW5jZWRBdHRyaWJ1dGUoJ2luc3RhbmNlTWF0MScsICdmbG9hdCcsIDQsIDEpO1xuICAgIHRoaXMuY3JlYXRlSW5zdGFuY2VkQXR0cmlidXRlKCdpbnN0YW5jZU1hdDInLCAnZmxvYXQnLCA0LCAxKTtcbiAgICB0aGlzLmNyZWF0ZUluc3RhbmNlZEF0dHJpYnV0ZSgnaW5zdGFuY2VNYXQzJywgJ2Zsb2F0JywgNCwgMSk7XG59LCB7XG5cbiAgICBpc0luc3RhbmNlZE1lc2g6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH0sXG5cbiAgICBnZXRJbnN0YW5jZUNvdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5sZW5ndGg7XG4gICAgfSxcblxuICAgIHJlbW92ZUF0dHJpYnV0ZTogZnVuY3Rpb24gKHN5bWJvbCkge1xuICAgICAgICB2YXIgaWR4ID0gdGhpcy5fYXR0cmlidXRlc1N5bWJvbHMuaW5kZXhPZihzeW1ib2wpO1xuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2F0dHJpYnV0ZXNTeW1ib2xzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLmluc3RhbmNlZEF0dHJpYnV0ZXNbc3ltYm9sXTtcbiAgICB9LFxuXG4gICAgY3JlYXRlSW5zdGFuY2VkQXR0cmlidXRlOiBmdW5jdGlvbiAoc3ltYm9sLCB0eXBlLCBzaXplLCBkaXZpc29yKSB7XG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlZEF0dHJpYnV0ZXNbc3ltYm9sXSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5zdGFuY2VkQXR0cmlidXRlc1tzeW1ib2xdID0ge1xuICAgICAgICAgICAgc3ltYm9sOiBzeW1ib2wsXG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgICAgIGRpdmlzb3I6IGRpdmlzb3IgPT0gbnVsbCA/IDEgOiBkaXZpc29yLFxuICAgICAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9hdHRyaWJ1dGVzU3ltYm9scy5wdXNoKHN5bWJvbCk7XG4gICAgfSxcblxuICAgIGdldEluc3RhbmNlZEF0dHJpYnV0ZXNCdWZmZXJzOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcblxuICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLl9jYWNoZTtcblxuICAgICAgICBjYWNoZS51c2UocmVuZGVyZXIuX191aWRfXyk7XG5cbiAgICAgICAgdmFyIGJ1ZmZlcnMgPSBjYWNoZS5nZXQoJ2J1ZmZlcnMnKSB8fCBbXTtcblxuICAgICAgICBpZiAoY2FjaGUuaXNEaXJ0eSgnZGlydHknKSkge1xuICAgICAgICAgICAgdmFyIGdsID0gcmVuZGVyZXIuZ2w7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fYXR0cmlidXRlc1N5bWJvbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYXR0ciA9IHRoaXMuaW5zdGFuY2VkQXR0cmlidXRlc1t0aGlzLl9hdHRyaWJ1dGVzU3ltYm9sc1tpXV07XG5cbiAgICAgICAgICAgICAgICB2YXIgYnVmZmVyT2JqID0gYnVmZmVyc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoIWJ1ZmZlck9iaikge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXJPYmogPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXI6IGdsLmNyZWF0ZUJ1ZmZlcigpXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlcnNbaV0gPSBidWZmZXJPYmo7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJ1ZmZlck9iai5zeW1ib2wgPSBhdHRyLnN5bWJvbDtcbiAgICAgICAgICAgICAgICBidWZmZXJPYmouZGl2aXNvciA9IGF0dHIuZGl2aXNvcjtcbiAgICAgICAgICAgICAgICBidWZmZXJPYmouc2l6ZSA9IGF0dHIuc2l6ZTtcbiAgICAgICAgICAgICAgICBidWZmZXJPYmoudHlwZSA9IGF0dHIudHlwZTtcblxuICAgICAgICAgICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXJPYmouYnVmZmVyKTtcbiAgICAgICAgICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgYXR0ci52YWx1ZSwgZ2wuRFlOQU1JQ19EUkFXKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FjaGUuZnJlc2goJ2RpcnR5Jyk7XG5cbiAgICAgICAgICAgIGNhY2hlLnB1dCgnYnVmZmVycycsIGJ1ZmZlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJ1ZmZlcnM7XG4gICAgfSxcblxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKGZvcmNlVXBkYXRlV29ybGQpIHtcbiAgICAgICAgTWVzaC5wcm90b3R5cGUudXBkYXRlLmNhbGwodGhpcywgZm9yY2VVcGRhdGVXb3JsZCk7XG5cbiAgICAgICAgdmFyIGFycmF5U2l6ZSA9IHRoaXMuZ2V0SW5zdGFuY2VDb3VudCgpICogNDtcbiAgICAgICAgdmFyIGluc3RhbmNlZEF0dHJpYnV0ZXMgPSB0aGlzLmluc3RhbmNlZEF0dHJpYnV0ZXM7XG5cbiAgICAgICAgdmFyIGluc3RhbmNlTWF0MSA9IGluc3RhbmNlZEF0dHJpYnV0ZXMuaW5zdGFuY2VNYXQxLnZhbHVlO1xuICAgICAgICB2YXIgaW5zdGFuY2VNYXQyID0gaW5zdGFuY2VkQXR0cmlidXRlcy5pbnN0YW5jZU1hdDIudmFsdWU7XG4gICAgICAgIHZhciBpbnN0YW5jZU1hdDMgPSBpbnN0YW5jZWRBdHRyaWJ1dGVzLmluc3RhbmNlTWF0My52YWx1ZTtcbiAgICAgICAgaWYgKCFpbnN0YW5jZU1hdDEgfHwgaW5zdGFuY2VNYXQxLmxlbmd0aCAhPT0gYXJyYXlTaXplKSB7XG4gICAgICAgICAgICBpbnN0YW5jZU1hdDEgPSBpbnN0YW5jZWRBdHRyaWJ1dGVzLmluc3RhbmNlTWF0MS52YWx1ZSA9IG5ldyBGbG9hdDMyQXJyYXkoYXJyYXlTaXplKTtcbiAgICAgICAgICAgIGluc3RhbmNlTWF0MiA9IGluc3RhbmNlZEF0dHJpYnV0ZXMuaW5zdGFuY2VNYXQyLnZhbHVlID0gbmV3IEZsb2F0MzJBcnJheShhcnJheVNpemUpO1xuICAgICAgICAgICAgaW5zdGFuY2VNYXQzID0gaW5zdGFuY2VkQXR0cmlidXRlcy5pbnN0YW5jZU1hdDMudmFsdWUgPSBuZXcgRmxvYXQzMkFycmF5KGFycmF5U2l6ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc291cmNlQm91bmRpbmdCb3ggPSAodGhpcy5za2VsZXRvbiAmJiB0aGlzLnNrZWxldG9uLmJvdW5kaW5nQm94KSB8fCB0aGlzLmdlb21ldHJ5LmJvdW5kaW5nQm94O1xuICAgICAgICB2YXIgbmVlZFVwZGF0ZUJvdW5kaW5nQm94ID0gc291cmNlQm91bmRpbmdCb3ggIT0gbnVsbCAmJiAodGhpcy5jYXN0U2hhZG93IHx8IHRoaXMuZnJ1c3R1bUN1bGxpbmcpO1xuICAgICAgICBpZiAobmVlZFVwZGF0ZUJvdW5kaW5nQm94ICYmIHRoaXMuaW5zdGFuY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuYm91bmRpbmdCb3ggPSB0aGlzLmJvdW5kaW5nQm94IHx8IG5ldyBCb3VuZGluZ0JveCgpO1xuXG4gICAgICAgICAgICB0aGlzLmJvdW5kaW5nQm94Lm1pbi5zZXQoSW5maW5pdHksIEluZmluaXR5LCBJbmZpbml0eSk7XG4gICAgICAgICAgICB0aGlzLmJvdW5kaW5nQm94Lm1heC5zZXQoLUluZmluaXR5LCAtSW5maW5pdHksIC1JbmZpbml0eSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJvdW5kaW5nQm94ID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pbnN0YW5jZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzW2ldO1xuICAgICAgICAgICAgdmFyIG5vZGUgPSBpbnN0YW5jZS5ub2RlO1xuXG4gICAgICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luc3RhbmNlIG11c3QgaW5jbHVkZSBub2RlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gbm9kZS53b3JsZFRyYW5zZm9ybS5hcnJheTtcbiAgICAgICAgICAgIHZhciBpNCA9IGkgKiA0O1xuICAgICAgICAgICAgaW5zdGFuY2VNYXQxW2k0XSA9IHRyYW5zZm9ybVswXTtcbiAgICAgICAgICAgIGluc3RhbmNlTWF0MVtpNCArIDFdID0gdHJhbnNmb3JtWzFdO1xuICAgICAgICAgICAgaW5zdGFuY2VNYXQxW2k0ICsgMl0gPSB0cmFuc2Zvcm1bMl07XG4gICAgICAgICAgICBpbnN0YW5jZU1hdDFbaTQgKyAzXSA9IHRyYW5zZm9ybVsxMl07XG5cbiAgICAgICAgICAgIGluc3RhbmNlTWF0MltpNF0gPSB0cmFuc2Zvcm1bNF07XG4gICAgICAgICAgICBpbnN0YW5jZU1hdDJbaTQgKyAxXSA9IHRyYW5zZm9ybVs1XTtcbiAgICAgICAgICAgIGluc3RhbmNlTWF0MltpNCArIDJdID0gdHJhbnNmb3JtWzZdO1xuICAgICAgICAgICAgaW5zdGFuY2VNYXQyW2k0ICsgM10gPSB0cmFuc2Zvcm1bMTNdO1xuXG4gICAgICAgICAgICBpbnN0YW5jZU1hdDNbaTRdID0gdHJhbnNmb3JtWzhdO1xuICAgICAgICAgICAgaW5zdGFuY2VNYXQzW2k0ICsgMV0gPSB0cmFuc2Zvcm1bOV07XG4gICAgICAgICAgICBpbnN0YW5jZU1hdDNbaTQgKyAyXSA9IHRyYW5zZm9ybVsxMF07XG4gICAgICAgICAgICBpbnN0YW5jZU1hdDNbaTQgKyAzXSA9IHRyYW5zZm9ybVsxNF07XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBib3VuZGluZyBib3hcbiAgICAgICAgICAgIGlmIChuZWVkVXBkYXRlQm91bmRpbmdCb3gpIHtcbiAgICAgICAgICAgICAgICB0bXBCb3VuZGluZ0JveC50cmFuc2Zvcm1Gcm9tKHNvdXJjZUJvdW5kaW5nQm94LCBub2RlLndvcmxkVHJhbnNmb3JtKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJvdW5kaW5nQm94LnVuaW9uKHRtcEJvdW5kaW5nQm94LCB0aGlzLmJvdW5kaW5nQm94KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2NhY2hlLmRpcnR5KCdkaXJ0eScpO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBJbnN0YW5jZWRNZXNoO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvSW5zdGFuY2VkTWVzaC5qc1xuLy8gbW9kdWxlIGlkID0gMTcxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///171\n");

/***/ }),
/* 172 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n\n\n/**\n * @constructor clay.light.Sphere\n * @extends {clay.Light}\n */\nvar SphereLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend(\n/** @lends clay.light.Sphere# */\n{\n    /**\n     * @type {number}\n     */\n    range: 100,\n\n    /**\n     * @type {number}\n     */\n    radius: 5\n}, {\n\n    type: 'SPHERE_LIGHT',\n\n    uniformTemplates: {\n        sphereLightPosition: {\n            type: '3f',\n            value: function(instance) {\n                return instance.getWorldPosition().array;\n            }\n        },\n        sphereLightRange: {\n            type: '1f',\n            value: function(instance) {\n                return instance.range;\n            }\n        },\n        sphereLightRadius: {\n            type: '1f',\n            value: function(instance) {\n                return instance.radius;\n            }\n        },\n        sphereLightColor: {\n            type: '3f',\n            value: function(instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0]*intensity, color[1]*intensity, color[2]*intensity];\n            }\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SphereLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvbGlnaHQvU3BoZXJlLmpzPzkwMzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExpZ2h0IGZyb20gJy4uL0xpZ2h0JztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5saWdodC5TcGhlcmVcbiAqIEBleHRlbmRzIHtjbGF5LkxpZ2h0fVxuICovXG52YXIgU3BoZXJlTGlnaHQgPSBMaWdodC5leHRlbmQoXG4vKiogQGxlbmRzIGNsYXkubGlnaHQuU3BoZXJlIyAqL1xue1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgcmFuZ2U6IDEwMCxcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgcmFkaXVzOiA1XG59LCB7XG5cbiAgICB0eXBlOiAnU1BIRVJFX0xJR0hUJyxcblxuICAgIHVuaWZvcm1UZW1wbGF0ZXM6IHtcbiAgICAgICAgc3BoZXJlTGlnaHRQb3NpdGlvbjoge1xuICAgICAgICAgICAgdHlwZTogJzNmJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbihpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZS5nZXRXb3JsZFBvc2l0aW9uKCkuYXJyYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNwaGVyZUxpZ2h0UmFuZ2U6IHtcbiAgICAgICAgICAgIHR5cGU6ICcxZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2UucmFuZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNwaGVyZUxpZ2h0UmFkaXVzOiB7XG4gICAgICAgICAgICB0eXBlOiAnMWYnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLnJhZGl1cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3BoZXJlTGlnaHRDb2xvcjoge1xuICAgICAgICAgICAgdHlwZTogJzNmJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbihpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGluc3RhbmNlLmNvbG9yO1xuICAgICAgICAgICAgICAgIHZhciBpbnRlbnNpdHkgPSBpbnN0YW5jZS5pbnRlbnNpdHk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtjb2xvclswXSppbnRlbnNpdHksIGNvbG9yWzFdKmludGVuc2l0eSwgY29sb3JbMl0qaW50ZW5zaXR5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBTcGhlcmVMaWdodDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvbGlnaHQvU3BoZXJlLmpzXG4vLyBtb2R1bGUgaWQgPSAxNzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///172\n");

/***/ }),
/* 173 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n\n\n\n/**\n * @constructor clay.light.Tube\n * @extends {clay.Light}\n */\nvar TubeLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend(\n/** @lends clay.light.Tube# */\n{\n    /**\n     * @type {number}\n     */\n    range: 100,\n\n    /**\n     * @type {number}\n     */\n    length: 10\n}, {\n\n    type: 'TUBE_LIGHT',\n\n    uniformTemplates: {\n        tubeLightPosition: {\n            type: '3f',\n            value: function(instance) {\n                return instance.getWorldPosition().array;\n            }\n        },\n\n        tubeLightExtend: {\n            type: '3f',\n            value: (function() {\n                var x = new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]();\n                return function(instance) {\n                    // Extend in x axis\n                    return x.copy(instance.worldTransform.x)\n                        .normalize().scale(instance.length / 2).array;\n                };\n            })()\n        },\n\n        tubeLightRange: {\n            type: '1f',\n            value: function(instance) {\n                return instance.range;\n            }\n        },\n\n        tubeLightColor: {\n            type: '3f',\n            value: function(instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0]*intensity, color[1]*intensity, color[2]*intensity];\n            }\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TubeLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTczLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvbGlnaHQvVHViZS5qcz83ZWM2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMaWdodCBmcm9tICcuLi9MaWdodCc7XG5pbXBvcnQgVmVjdG9yMyBmcm9tICcuLi9tYXRoL1ZlY3RvcjMnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LmxpZ2h0LlR1YmVcbiAqIEBleHRlbmRzIHtjbGF5LkxpZ2h0fVxuICovXG52YXIgVHViZUxpZ2h0ID0gTGlnaHQuZXh0ZW5kKFxuLyoqIEBsZW5kcyBjbGF5LmxpZ2h0LlR1YmUjICovXG57XG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICByYW5nZTogMTAwLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBsZW5ndGg6IDEwXG59LCB7XG5cbiAgICB0eXBlOiAnVFVCRV9MSUdIVCcsXG5cbiAgICB1bmlmb3JtVGVtcGxhdGVzOiB7XG4gICAgICAgIHR1YmVMaWdodFBvc2l0aW9uOiB7XG4gICAgICAgICAgICB0eXBlOiAnM2YnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLmdldFdvcmxkUG9zaXRpb24oKS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB0dWJlTGlnaHRFeHRlbmQ6IHtcbiAgICAgICAgICAgIHR5cGU6ICczZicsXG4gICAgICAgICAgICB2YWx1ZTogKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB4ID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRXh0ZW5kIGluIHggYXhpc1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5jb3B5KGluc3RhbmNlLndvcmxkVHJhbnNmb3JtLngpXG4gICAgICAgICAgICAgICAgICAgICAgICAubm9ybWFsaXplKCkuc2NhbGUoaW5zdGFuY2UubGVuZ3RoIC8gMikuYXJyYXk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKClcbiAgICAgICAgfSxcblxuICAgICAgICB0dWJlTGlnaHRSYW5nZToge1xuICAgICAgICAgICAgdHlwZTogJzFmJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbihpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZS5yYW5nZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB0dWJlTGlnaHRDb2xvcjoge1xuICAgICAgICAgICAgdHlwZTogJzNmJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbihpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGluc3RhbmNlLmNvbG9yO1xuICAgICAgICAgICAgICAgIHZhciBpbnRlbnNpdHkgPSBpbnN0YW5jZS5pbnRlbnNpdHk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtjb2xvclswXSppbnRlbnNpdHksIGNvbG9yWzFdKmludGVuc2l0eSwgY29sb3JbMl0qaW50ZW5zaXR5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBUdWJlTGlnaHQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2xpZ2h0L1R1YmUuanNcbi8vIG1vZHVsZSBpZCA9IDE3M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///173\n");

/***/ }),
/* 174 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__createCompositor__ = __webpack_require__(62);\n\n\n\n\n/**\n * @constructor clay.loader.FX\n * @extends clay.core.Base\n */\nvar FXLoader = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(/** @lends clay.loader.FX# */ {\n    /**\n     * @type {string}\n     */\n    rootPath: '',\n    /**\n     * @type {string}\n     */\n    textureRootPath: '',\n    /**\n     * @type {string}\n     */\n    shaderRootPath: '',\n\n    /**\n     * @type {clay.Scene}\n     */\n    scene: null,\n\n    /**\n     * @type {clay.Camera}\n     */\n    camera: null\n},\n/** @lends clay.loader.FX.prototype */\n{\n    /**\n     * @param  {string} url\n     */\n    load: function(url) {\n        var self = this;\n\n        if (!this.rootPath) {\n            this.rootPath = url.slice(0, url.lastIndexOf('/'));\n        }\n\n        __WEBPACK_IMPORTED_MODULE_1__core_vendor__[\"a\" /* default */].request.get({\n            url: url,\n            onprogress: function(percent, loaded, total) {\n                self.trigger('progress', percent, loaded, total);\n            },\n            onerror: function(e) {\n                self.trigger('error', e);\n            },\n            responseType: 'text',\n            onload: function (data) {\n                Object(__WEBPACK_IMPORTED_MODULE_2__createCompositor__[\"a\" /* default */])(JSON.parse(data), {\n                    textureRootPath: this.textureRootPath || this.rootPath,\n                    camera: this.camera,\n                    scene: this.scene\n                });\n            }\n        });\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (FXLoader);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTc0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvbG9hZGVyL0ZYLmpzP2JmMTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi4vY29yZS9CYXNlJztcbmltcG9ydCB2ZW5kb3IgZnJvbSAnLi4vY29yZS92ZW5kb3InO1xuaW1wb3J0IGNyZWF0ZUNvbXBvc2l0b3IgZnJvbSAnLi4vY3JlYXRlQ29tcG9zaXRvcic7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkubG9hZGVyLkZYXG4gKiBAZXh0ZW5kcyBjbGF5LmNvcmUuQmFzZVxuICovXG52YXIgRlhMb2FkZXIgPSBCYXNlLmV4dGVuZCgvKiogQGxlbmRzIGNsYXkubG9hZGVyLkZYIyAqLyB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICByb290UGF0aDogJycsXG4gICAgLyoqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0ZXh0dXJlUm9vdFBhdGg6ICcnLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgc2hhZGVyUm9vdFBhdGg6ICcnLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuU2NlbmV9XG4gICAgICovXG4gICAgc2NlbmU6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5DYW1lcmF9XG4gICAgICovXG4gICAgY2FtZXJhOiBudWxsXG59LFxuLyoqIEBsZW5kcyBjbGF5LmxvYWRlci5GWC5wcm90b3R5cGUgKi9cbntcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHVybFxuICAgICAqL1xuICAgIGxvYWQ6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCF0aGlzLnJvb3RQYXRoKSB7XG4gICAgICAgICAgICB0aGlzLnJvb3RQYXRoID0gdXJsLnNsaWNlKDAsIHVybC5sYXN0SW5kZXhPZignLycpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZlbmRvci5yZXF1ZXN0LmdldCh7XG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIG9ucHJvZ3Jlc3M6IGZ1bmN0aW9uKHBlcmNlbnQsIGxvYWRlZCwgdG90YWwpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnRyaWdnZXIoJ3Byb2dyZXNzJywgcGVyY2VudCwgbG9hZGVkLCB0b3RhbCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25lcnJvcjogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcignZXJyb3InLCBlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXNwb25zZVR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVDb21wb3NpdG9yKEpTT04ucGFyc2UoZGF0YSksIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZVJvb3RQYXRoOiB0aGlzLnRleHR1cmVSb290UGF0aCB8fCB0aGlzLnJvb3RQYXRoLFxuICAgICAgICAgICAgICAgICAgICBjYW1lcmE6IHRoaXMuY2FtZXJhLFxuICAgICAgICAgICAgICAgICAgICBzY2VuZTogdGhpcy5zY2VuZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgRlhMb2FkZXI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL2xvYWRlci9GWC5qc1xuLy8gbW9kdWxlIGlkID0gMTc0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///174\n");

/***/ }),
/* 175 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__ = __webpack_require__(110);\n\n\n/**\n * @constructor\n * @alias clay.Matrix2\n */\nvar Matrix2 = function() {\n\n    /**\n     * Storage of Matrix2\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Matrix2#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].create();\n\n    /**\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Matrix2#\n     */\n    this._dirty = true;\n};\n\nMatrix2.prototype = {\n\n    constructor: Matrix2,\n\n    /**\n     * Set components from array\n     * @param  {Float32Array|number[]} arr\n     */\n    setArray: function (arr) {\n        for (var i = 0; i < this.array.length; i++) {\n            this.array[i] = arr[i];\n        }\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Clone a new Matrix2\n     * @return {clay.Matrix2}\n     */\n    clone: function() {\n        return (new Matrix2()).copy(this);\n    },\n\n    /**\n     * Copy from b\n     * @param  {clay.Matrix2} b\n     * @return {clay.Matrix2}\n     */\n    copy: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].copy(this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Calculate the adjugate of self, in-place\n     * @return {clay.Matrix2}\n     */\n    adjoint: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].adjoint(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Calculate matrix determinant\n     * @return {number}\n     */\n    determinant: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].determinant(this.array);\n    },\n\n    /**\n     * Set to a identity matrix\n     * @return {clay.Matrix2}\n     */\n    identity: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].identity(this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Invert self\n     * @return {clay.Matrix2}\n     */\n    invert: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].invert(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for mutiply\n     * @param  {clay.Matrix2} b\n     * @return {clay.Matrix2}\n     */\n    mul: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiplyLeft\n     * @param  {clay.Matrix2} a\n     * @return {clay.Matrix2}\n     */\n    mulLeft: function(a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].mul(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply self and b\n     * @param  {clay.Matrix2} b\n     * @return {clay.Matrix2}\n     */\n    multiply: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply a and self, a is on the left\n     * @param  {clay.Matrix2} a\n     * @return {clay.Matrix2}\n     */\n    multiplyLeft: function(a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].multiply(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian\n     * @param  {number}   rad\n     * @return {clay.Matrix2}\n     */\n    rotate: function(rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].rotate(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale self by s\n     * @param  {clay.Vector2}  s\n     * @return {clay.Matrix2}\n     */\n    scale: function(v) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].scale(this.array, this.array, v.array);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Transpose self, in-place.\n     * @return {clay.Matrix2}\n     */\n    transpose: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].transpose(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    toString: function() {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n\n/**\n * @param  {Matrix2} out\n * @param  {Matrix2} a\n * @return {Matrix2}\n */\nMatrix2.adjoint = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].adjoint(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2} out\n * @param  {clay.Matrix2} a\n * @return {clay.Matrix2}\n */\nMatrix2.copy = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].copy(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2} a\n * @return {number}\n */\nMatrix2.determinant = function(a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].determinant(a.array);\n};\n\n/**\n * @param  {clay.Matrix2} out\n * @return {clay.Matrix2}\n */\nMatrix2.identity = function(out) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].identity(out.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2} out\n * @param  {clay.Matrix2} a\n * @return {clay.Matrix2}\n */\nMatrix2.invert = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].invert(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2} out\n * @param  {clay.Matrix2} a\n * @param  {clay.Matrix2} b\n * @return {clay.Matrix2}\n */\nMatrix2.mul = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].mul(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Matrix2} out\n * @param  {clay.Matrix2} a\n * @param  {clay.Matrix2} b\n * @return {clay.Matrix2}\n */\nMatrix2.multiply = Matrix2.mul;\n\n/**\n * @param  {clay.Matrix2} out\n * @param  {clay.Matrix2} a\n * @param  {number}   rad\n * @return {clay.Matrix2}\n */\nMatrix2.rotate = function(out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].rotate(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2} out\n * @param  {clay.Matrix2} a\n * @param  {clay.Vector2}  v\n * @return {clay.Matrix2}\n */\nMatrix2.scale = function(out, a, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].scale(out.array, a.array, v.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {Matrix2} out\n * @param  {Matrix2} a\n * @return {Matrix2}\n */\nMatrix2.transpose = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].transpose(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Matrix2);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTc1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvbWF0aC9NYXRyaXgyLmpzPzc2NjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1hdDIgZnJvbSAnLi4vZ2xtYXRyaXgvbWF0Mic7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5NYXRyaXgyXG4gKi9cbnZhciBNYXRyaXgyID0gZnVuY3Rpb24oKSB7XG5cbiAgICAvKipcbiAgICAgKiBTdG9yYWdlIG9mIE1hdHJpeDJcbiAgICAgKiBAbmFtZSBhcnJheVxuICAgICAqIEB0eXBlIHtGbG9hdDMyQXJyYXl9XG4gICAgICogQG1lbWJlck9mIGNsYXkuTWF0cml4MiNcbiAgICAgKi9cbiAgICB0aGlzLmFycmF5ID0gbWF0Mi5jcmVhdGUoKTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lIF9kaXJ0eVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBtZW1iZXJPZiBjbGF5Lk1hdHJpeDIjXG4gICAgICovXG4gICAgdGhpcy5fZGlydHkgPSB0cnVlO1xufTtcblxuTWF0cml4Mi5wcm90b3R5cGUgPSB7XG5cbiAgICBjb25zdHJ1Y3RvcjogTWF0cml4MixcblxuICAgIC8qKlxuICAgICAqIFNldCBjb21wb25lbnRzIGZyb20gYXJyYXlcbiAgICAgKiBAcGFyYW0gIHtGbG9hdDMyQXJyYXl8bnVtYmVyW119IGFyclxuICAgICAqL1xuICAgIHNldEFycmF5OiBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5hcnJheVtpXSA9IGFycltpXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ2xvbmUgYSBuZXcgTWF0cml4MlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4Mn1cbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAobmV3IE1hdHJpeDIoKSkuY29weSh0aGlzKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ29weSBmcm9tIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJ9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gICAgICovXG4gICAgY29weTogZnVuY3Rpb24oYikge1xuICAgICAgICBtYXQyLmNvcHkodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgYWRqdWdhdGUgb2Ygc2VsZiwgaW4tcGxhY2VcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gICAgICovXG4gICAgYWRqb2ludDogZnVuY3Rpb24oKSB7XG4gICAgICAgIG1hdDIuYWRqb2ludCh0aGlzLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIG1hdHJpeCBkZXRlcm1pbmFudFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBkZXRlcm1pbmFudDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBtYXQyLmRldGVybWluYW50KHRoaXMuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgdG8gYSBpZGVudGl0eSBtYXRyaXhcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gICAgICovXG4gICAgaWRlbnRpdHk6IGZ1bmN0aW9uKCkge1xuICAgICAgICBtYXQyLmlkZW50aXR5KHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJbnZlcnQgc2VsZlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4Mn1cbiAgICAgKi9cbiAgICBpbnZlcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICBtYXQyLmludmVydCh0aGlzLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIG11dGlwbHlcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJ9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gICAgICovXG4gICAgbXVsOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIG1hdDIubXVsKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgbXVsdGlwbHlMZWZ0XG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBhXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyfVxuICAgICAqL1xuICAgIG11bExlZnQ6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgbWF0Mi5tdWwodGhpcy5hcnJheSwgYS5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJ9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gICAgICovXG4gICAgbXVsdGlwbHk6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgbWF0Mi5tdWx0aXBseSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgYSBhbmQgc2VsZiwgYSBpcyBvbiB0aGUgbGVmdFxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gYVxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4Mn1cbiAgICAgKi9cbiAgICBtdWx0aXBseUxlZnQ6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgbWF0Mi5tdWx0aXBseSh0aGlzLmFycmF5LCBhLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUm90YXRlIHNlbGYgYnkgYSBnaXZlbiByYWRpYW5cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICAgcmFkXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyfVxuICAgICAqL1xuICAgIHJvdGF0ZTogZnVuY3Rpb24ocmFkKSB7XG4gICAgICAgIG1hdDIucm90YXRlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHJhZCk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNjYWxlIHNlbGYgYnkgc1xuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gIHNcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gICAgICovXG4gICAgc2NhbGU6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgbWF0Mi5zY2FsZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCB2LmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFRyYW5zcG9zZSBzZWxmLCBpbi1wbGFjZS5cbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gICAgICovXG4gICAgdHJhbnNwb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgbWF0Mi50cmFuc3Bvc2UodGhpcy5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICdbJyArIEFycmF5LnByb3RvdHlwZS5qb2luLmNhbGwodGhpcy5hcnJheSwgJywnKSArICddJztcbiAgICB9LFxuXG4gICAgdG9BcnJheTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5hcnJheSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtNYXRyaXgyfSBvdXRcbiAqIEBwYXJhbSAge01hdHJpeDJ9IGFcbiAqIEByZXR1cm4ge01hdHJpeDJ9XG4gKi9cbk1hdHJpeDIuYWRqb2ludCA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIG1hdDIuYWRqb2ludChvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJ9IGFcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4Mn1cbiAqL1xuTWF0cml4Mi5jb3B5ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgbWF0Mi5jb3B5KG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbk1hdHJpeDIuZGV0ZXJtaW5hbnQgPSBmdW5jdGlvbihhKSB7XG4gICAgcmV0dXJuIG1hdDIuZGV0ZXJtaW5hbnQoYS5hcnJheSk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gb3V0XG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gKi9cbk1hdHJpeDIuaWRlbnRpdHkgPSBmdW5jdGlvbihvdXQpIHtcbiAgICBtYXQyLmlkZW50aXR5KG91dC5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gYVxuICogQHJldHVybiB7Y2xheS5NYXRyaXgyfVxuICovXG5NYXRyaXgyLmludmVydCA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIG1hdDIuaW52ZXJ0KG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gYVxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBiXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gKi9cbk1hdHJpeDIubXVsID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgbWF0Mi5tdWwob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gYlxuICogQHJldHVybiB7Y2xheS5NYXRyaXgyfVxuICovXG5NYXRyaXgyLm11bHRpcGx5ID0gTWF0cml4Mi5tdWw7XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gYVxuICogQHBhcmFtICB7bnVtYmVyfSAgIHJhZFxuICogQHJldHVybiB7Y2xheS5NYXRyaXgyfVxuICovXG5NYXRyaXgyLnJvdGF0ZSA9IGZ1bmN0aW9uKG91dCwgYSwgcmFkKSB7XG4gICAgbWF0Mi5yb3RhdGUob3V0LmFycmF5LCBhLmFycmF5LCByYWQpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gIHZcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4Mn1cbiAqL1xuTWF0cml4Mi5zY2FsZSA9IGZ1bmN0aW9uKG91dCwgYSwgdikge1xuICAgIG1hdDIuc2NhbGUob3V0LmFycmF5LCBhLmFycmF5LCB2LmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQHBhcmFtICB7TWF0cml4Mn0gb3V0XG4gKiBAcGFyYW0gIHtNYXRyaXgyfSBhXG4gKiBAcmV0dXJuIHtNYXRyaXgyfVxuICovXG5NYXRyaXgyLnRyYW5zcG9zZSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIG1hdDIudHJhbnNwb3NlKG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE1hdHJpeDI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL21hdGgvTWF0cml4Mi5qc1xuLy8gbW9kdWxlIGlkID0gMTc1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///175\n");

/***/ }),
/* 176 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__ = __webpack_require__(111);\n\n\n/**\n * @constructor\n * @alias clay.Matrix2d\n */\nvar Matrix2d = function() {\n    /**\n     * Storage of Matrix2d\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Matrix2d#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].create();\n\n    /**\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Matrix2d#\n     */\n    this._dirty = true;\n};\n\nMatrix2d.prototype = {\n\n    constructor: Matrix2d,\n\n    /**\n     * Set components from array\n     * @param  {Float32Array|number[]} arr\n     */\n    setArray: function (arr) {\n        for (var i = 0; i < this.array.length; i++) {\n            this.array[i] = arr[i];\n        }\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Clone a new Matrix2d\n     * @return {clay.Matrix2d}\n     */\n    clone: function() {\n        return (new Matrix2d()).copy(this);\n    },\n\n    /**\n     * Copy from b\n     * @param  {clay.Matrix2d} b\n     * @return {clay.Matrix2d}\n     */\n    copy: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].copy(this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Calculate matrix determinant\n     * @return {number}\n     */\n    determinant: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].determinant(this.array);\n    },\n\n    /**\n     * Set to a identity matrix\n     * @return {clay.Matrix2d}\n     */\n    identity: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].identity(this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Invert self\n     * @return {clay.Matrix2d}\n     */\n    invert: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].invert(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for mutiply\n     * @param  {clay.Matrix2d} b\n     * @return {clay.Matrix2d}\n     */\n    mul: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiplyLeft\n     * @param  {clay.Matrix2d} a\n     * @return {clay.Matrix2d}\n     */\n    mulLeft: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].mul(this.array, b.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply self and b\n     * @param  {clay.Matrix2d} b\n     * @return {clay.Matrix2d}\n     */\n    multiply: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply a and self, a is on the left\n     * @param  {clay.Matrix2d} a\n     * @return {clay.Matrix2d}\n     */\n    multiplyLeft: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].multiply(this.array, b.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian\n     * @param  {number}   rad\n     * @return {clay.Matrix2d}\n     */\n    rotate: function(rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].rotate(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale self by s\n     * @param  {clay.Vector2}  s\n     * @return {clay.Matrix2d}\n     */\n    scale: function(s) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].scale(this.array, this.array, s.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Translate self by v\n     * @param  {clay.Vector2}  v\n     * @return {clay.Matrix2d}\n     */\n    translate: function(v) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].translate(this.array, this.array, v.array);\n        this._dirty = true;\n        return this;\n    },\n\n    toString: function() {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n\n/**\n * @param  {clay.Matrix2d} out\n * @param  {clay.Matrix2d} a\n * @return {clay.Matrix2d}\n */\nMatrix2d.copy = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].copy(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2d} a\n * @return {number}\n */\nMatrix2d.determinant = function(a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].determinant(a.array);\n};\n\n/**\n * @param  {clay.Matrix2d} out\n * @return {clay.Matrix2d}\n */\nMatrix2d.identity = function(out) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].identity(out.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2d} out\n * @param  {clay.Matrix2d} a\n * @return {clay.Matrix2d}\n */\nMatrix2d.invert = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].invert(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2d} out\n * @param  {clay.Matrix2d} a\n * @param  {clay.Matrix2d} b\n * @return {clay.Matrix2d}\n */\nMatrix2d.mul = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].mul(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Matrix2d} out\n * @param  {clay.Matrix2d} a\n * @param  {clay.Matrix2d} b\n * @return {clay.Matrix2d}\n */\nMatrix2d.multiply = Matrix2d.mul;\n\n/**\n * @param  {clay.Matrix2d} out\n * @param  {clay.Matrix2d} a\n * @param  {number}   rad\n * @return {clay.Matrix2d}\n */\nMatrix2d.rotate = function(out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].rotate(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2d} out\n * @param  {clay.Matrix2d} a\n * @param  {clay.Vector2}  v\n * @return {clay.Matrix2d}\n */\nMatrix2d.scale = function(out, a, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].scale(out.array, a.array, v.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2d} out\n * @param  {clay.Matrix2d} a\n * @param  {clay.Vector2}  v\n * @return {clay.Matrix2d}\n */\nMatrix2d.translate = function(out, a, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].translate(out.array, a.array, v.array);\n    out._dirty = true;\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Matrix2d);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTc2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvbWF0aC9NYXRyaXgyZC5qcz80NTY0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtYXQyZCBmcm9tICcuLi9nbG1hdHJpeC9tYXQyZCc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5NYXRyaXgyZFxuICovXG52YXIgTWF0cml4MmQgPSBmdW5jdGlvbigpIHtcbiAgICAvKipcbiAgICAgKiBTdG9yYWdlIG9mIE1hdHJpeDJkXG4gICAgICogQG5hbWUgYXJyYXlcbiAgICAgKiBAdHlwZSB7RmxvYXQzMkFycmF5fVxuICAgICAqIEBtZW1iZXJPZiBjbGF5Lk1hdHJpeDJkI1xuICAgICAqL1xuICAgIHRoaXMuYXJyYXkgPSBtYXQyZC5jcmVhdGUoKTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lIF9kaXJ0eVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBtZW1iZXJPZiBjbGF5Lk1hdHJpeDJkI1xuICAgICAqL1xuICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbn07XG5cbk1hdHJpeDJkLnByb3RvdHlwZSA9IHtcblxuICAgIGNvbnN0cnVjdG9yOiBNYXRyaXgyZCxcblxuICAgIC8qKlxuICAgICAqIFNldCBjb21wb25lbnRzIGZyb20gYXJyYXlcbiAgICAgKiBAcGFyYW0gIHtGbG9hdDMyQXJyYXl8bnVtYmVyW119IGFyclxuICAgICAqL1xuICAgIHNldEFycmF5OiBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5hcnJheVtpXSA9IGFycltpXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ2xvbmUgYSBuZXcgTWF0cml4MmRcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJkfVxuICAgICAqL1xuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgTWF0cml4MmQoKSkuY29weSh0aGlzKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ29weSBmcm9tIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAgICAgKi9cbiAgICBjb3B5OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIG1hdDJkLmNvcHkodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBtYXRyaXggZGV0ZXJtaW5hbnRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZGV0ZXJtaW5hbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbWF0MmQuZGV0ZXJtaW5hbnQodGhpcy5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB0byBhIGlkZW50aXR5IG1hdHJpeFxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4MmR9XG4gICAgICovXG4gICAgaWRlbnRpdHk6IGZ1bmN0aW9uKCkge1xuICAgICAgICBtYXQyZC5pZGVudGl0eSh0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSW52ZXJ0IHNlbGZcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJkfVxuICAgICAqL1xuICAgIGludmVydDogZnVuY3Rpb24oKSB7XG4gICAgICAgIG1hdDJkLmludmVydCh0aGlzLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIG11dGlwbHlcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAgICAgKi9cbiAgICBtdWw6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgbWF0MmQubXVsKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgbXVsdGlwbHlMZWZ0XG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gYVxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4MmR9XG4gICAgICovXG4gICAgbXVsTGVmdDogZnVuY3Rpb24oYikge1xuICAgICAgICBtYXQyZC5tdWwodGhpcy5hcnJheSwgYi5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAgICAgKi9cbiAgICBtdWx0aXBseTogZnVuY3Rpb24oYikge1xuICAgICAgICBtYXQyZC5tdWx0aXBseSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgYSBhbmQgc2VsZiwgYSBpcyBvbiB0aGUgbGVmdFxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IGFcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJkfVxuICAgICAqL1xuICAgIG11bHRpcGx5TGVmdDogZnVuY3Rpb24oYikge1xuICAgICAgICBtYXQyZC5tdWx0aXBseSh0aGlzLmFycmF5LCBiLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUm90YXRlIHNlbGYgYnkgYSBnaXZlbiByYWRpYW5cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICAgcmFkXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAgICAgKi9cbiAgICByb3RhdGU6IGZ1bmN0aW9uKHJhZCkge1xuICAgICAgICBtYXQyZC5yb3RhdGUodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgcmFkKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2NhbGUgc2VsZiBieSBzXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSAgc1xuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4MmR9XG4gICAgICovXG4gICAgc2NhbGU6IGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgbWF0MmQuc2NhbGUodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZSBzZWxmIGJ5IHZcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9ICB2XG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAgICAgKi9cbiAgICB0cmFuc2xhdGU6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgbWF0MmQudHJhbnNsYXRlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHYuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnWycgKyBBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKHRoaXMuYXJyYXksICcsJykgKyAnXSc7XG4gICAgfSxcblxuICAgIHRvQXJyYXk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuYXJyYXkpO1xuICAgIH1cbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBhXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJkfVxuICovXG5NYXRyaXgyZC5jb3B5ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgbWF0MmQuY29weShvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IGFcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuTWF0cml4MmQuZGV0ZXJtaW5hbnQgPSBmdW5jdGlvbihhKSB7XG4gICAgcmV0dXJuIG1hdDJkLmRldGVybWluYW50KGEuYXJyYXkpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBvdXRcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4MmR9XG4gKi9cbk1hdHJpeDJkLmlkZW50aXR5ID0gZnVuY3Rpb24ob3V0KSB7XG4gICAgbWF0MmQuaWRlbnRpdHkob3V0LmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IGFcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4MmR9XG4gKi9cbk1hdHJpeDJkLmludmVydCA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIG1hdDJkLmludmVydChvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gYVxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gYlxuICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAqL1xuTWF0cml4MmQubXVsID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgbWF0MmQubXVsKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IGFcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IGJcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4MmR9XG4gKi9cbk1hdHJpeDJkLm11bHRpcGx5ID0gTWF0cml4MmQubXVsO1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gYVxuICogQHBhcmFtICB7bnVtYmVyfSAgIHJhZFxuICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAqL1xuTWF0cml4MmQucm90YXRlID0gZnVuY3Rpb24ob3V0LCBhLCByYWQpIHtcbiAgICBtYXQyZC5yb3RhdGUob3V0LmFycmF5LCBhLmFycmF5LCByYWQpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSAgdlxuICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAqL1xuTWF0cml4MmQuc2NhbGUgPSBmdW5jdGlvbihvdXQsIGEsIHYpIHtcbiAgICBtYXQyZC5zY2FsZShvdXQuYXJyYXksIGEuYXJyYXksIHYuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSAgdlxuICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAqL1xuTWF0cml4MmQudHJhbnNsYXRlID0gZnVuY3Rpb24ob3V0LCBhLCB2KSB7XG4gICAgbWF0MmQudHJhbnNsYXRlKG91dC5hcnJheSwgYS5hcnJheSwgdi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE1hdHJpeDJkO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL01hdHJpeDJkLmpzXG4vLyBtb2R1bGUgaWQgPSAxNzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///176\n");

/***/ }),
/* 177 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__ = __webpack_require__(32);\n\n\n/**\n * @constructor\n * @alias clay.Matrix3\n */\nvar Matrix3 = function () {\n\n    /**\n     * Storage of Matrix3\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Matrix3#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].create();\n\n    /**\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Matrix3#\n     */\n    this._dirty = true;\n};\n\nMatrix3.prototype = {\n\n    constructor: Matrix3,\n\n    /**\n     * Set components from array\n     * @param  {Float32Array|number[]} arr\n     */\n    setArray: function (arr) {\n        for (var i = 0; i < this.array.length; i++) {\n            this.array[i] = arr[i];\n        }\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Calculate the adjugate of self, in-place\n     * @return {clay.Matrix3}\n     */\n    adjoint: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].adjoint(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Clone a new Matrix3\n     * @return {clay.Matrix3}\n     */\n    clone: function () {\n        return (new Matrix3()).copy(this);\n    },\n\n    /**\n     * Copy from b\n     * @param  {clay.Matrix3} b\n     * @return {clay.Matrix3}\n     */\n    copy: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].copy(this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Calculate matrix determinant\n     * @return {number}\n     */\n    determinant: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].determinant(this.array);\n    },\n\n    /**\n     * Copy the values from Matrix2d a\n     * @param  {clay.Matrix2d} a\n     * @return {clay.Matrix3}\n     */\n    fromMat2d: function (a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].fromMat2d(this.array, a.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Copies the upper-left 3x3 values of Matrix4\n     * @param  {clay.Matrix4} a\n     * @return {clay.Matrix3}\n     */\n    fromMat4: function (a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].fromMat4(this.array, a.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Calculates a rotation matrix from the given quaternion\n     * @param  {clay.Quaternion} q\n     * @return {clay.Matrix3}\n     */\n    fromQuat: function (q) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].fromQuat(this.array, q.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set to a identity matrix\n     * @return {clay.Matrix3}\n     */\n    identity: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].identity(this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Invert self\n     * @return {clay.Matrix3}\n     */\n    invert: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].invert(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for mutiply\n     * @param  {clay.Matrix3} b\n     * @return {clay.Matrix3}\n     */\n    mul: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiplyLeft\n     * @param  {clay.Matrix3} a\n     * @return {clay.Matrix3}\n     */\n    mulLeft: function (a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].mul(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply self and b\n     * @param  {clay.Matrix3} b\n     * @return {clay.Matrix3}\n     */\n    multiply: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply a and self, a is on the left\n     * @param  {clay.Matrix3} a\n     * @return {clay.Matrix3}\n     */\n    multiplyLeft: function (a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].multiply(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian\n     * @param  {number}   rad\n     * @return {clay.Matrix3}\n     */\n    rotate: function (rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].rotate(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale self by s\n     * @param  {clay.Vector2}  s\n     * @return {clay.Matrix3}\n     */\n    scale: function (v) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].scale(this.array, this.array, v.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Translate self by v\n     * @param  {clay.Vector2}  v\n     * @return {clay.Matrix3}\n     */\n    translate: function (v) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].translate(this.array, this.array, v.array);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n     * @param {clay.Matrix4} a\n     */\n    normalFromMat4: function (a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].normalFromMat4(this.array, a.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transpose self, in-place.\n     * @return {clay.Matrix2}\n     */\n    transpose: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].transpose(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    toString: function () {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @return {clay.Matrix3}\n */\nMatrix3.adjoint = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].adjoint(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @return {clay.Matrix3}\n */\nMatrix3.copy = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].copy(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} a\n * @return {number}\n */\nMatrix3.determinant = function (a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].determinant(a.array);\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @return {clay.Matrix3}\n */\nMatrix3.identity = function (out) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].identity(out.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @return {clay.Matrix3}\n */\nMatrix3.invert = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].invert(out.array, a.array);\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @param  {clay.Matrix3} b\n * @return {clay.Matrix3}\n */\nMatrix3.mul = function (out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].mul(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @param  {clay.Matrix3} b\n * @return {clay.Matrix3}\n */\nMatrix3.multiply = Matrix3.mul;\n\n/**\n * @param  {clay.Matrix3}  out\n * @param  {clay.Matrix2d} a\n * @return {clay.Matrix3}\n */\nMatrix3.fromMat2d = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].fromMat2d(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix4} a\n * @return {clay.Matrix3}\n */\nMatrix3.fromMat4 = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].fromMat4(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3}    out\n * @param  {clay.Quaternion} a\n * @return {clay.Matrix3}\n */\nMatrix3.fromQuat = function (out, q) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].fromQuat(out.array, q.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix4} a\n * @return {clay.Matrix3}\n */\nMatrix3.normalFromMat4 = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].normalFromMat4(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @param  {number}  rad\n * @return {clay.Matrix3}\n */\nMatrix3.rotate = function (out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].rotate(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @param  {clay.Vector2} v\n * @return {clay.Matrix3}\n */\nMatrix3.scale = function (out, a, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].scale(out.array, a.array, v.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @return {clay.Matrix3}\n */\nMatrix3.transpose = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].transpose(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @param  {clay.Vector2} v\n * @return {clay.Matrix3}\n */\nMatrix3.translate = function (out, a, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].translate(out.array, a.array, v.array);\n    out._dirty = true;\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Matrix3);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTc3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvbWF0aC9NYXRyaXgzLmpzPzQzOWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1hdDMgZnJvbSAnLi4vZ2xtYXRyaXgvbWF0Myc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5NYXRyaXgzXG4gKi9cbnZhciBNYXRyaXgzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgLyoqXG4gICAgICogU3RvcmFnZSBvZiBNYXRyaXgzXG4gICAgICogQG5hbWUgYXJyYXlcbiAgICAgKiBAdHlwZSB7RmxvYXQzMkFycmF5fVxuICAgICAqIEBtZW1iZXJPZiBjbGF5Lk1hdHJpeDMjXG4gICAgICovXG4gICAgdGhpcy5hcnJheSA9IG1hdDMuY3JlYXRlKCk7XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSBfZGlydHlcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5NYXRyaXgzI1xuICAgICAqL1xuICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbn07XG5cbk1hdHJpeDMucHJvdG90eXBlID0ge1xuXG4gICAgY29uc3RydWN0b3I6IE1hdHJpeDMsXG5cbiAgICAvKipcbiAgICAgKiBTZXQgY29tcG9uZW50cyBmcm9tIGFycmF5XG4gICAgICogQHBhcmFtICB7RmxvYXQzMkFycmF5fG51bWJlcltdfSBhcnJcbiAgICAgKi9cbiAgICBzZXRBcnJheTogZnVuY3Rpb24gKGFycikge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYXJyYXlbaV0gPSBhcnJbaV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgYWRqdWdhdGUgb2Ygc2VsZiwgaW4tcGxhY2VcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gICAgICovXG4gICAgYWRqb2ludDogZnVuY3Rpb24gKCkge1xuICAgICAgICBtYXQzLmFkam9pbnQodGhpcy5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENsb25lIGEgbmV3IE1hdHJpeDNcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgTWF0cml4MygpKS5jb3B5KHRoaXMpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDb3B5IGZyb20gYlxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAgICAgKi9cbiAgICBjb3B5OiBmdW5jdGlvbiAoYikge1xuICAgICAgICBtYXQzLmNvcHkodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBtYXRyaXggZGV0ZXJtaW5hbnRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZGV0ZXJtaW5hbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG1hdDMuZGV0ZXJtaW5hbnQodGhpcy5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIE1hdHJpeDJkIGFcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBhXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICAgICAqL1xuICAgIGZyb21NYXQyZDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgbWF0My5mcm9tTWF0MmQodGhpcy5hcnJheSwgYS5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENvcGllcyB0aGUgdXBwZXItbGVmdCAzeDMgdmFsdWVzIG9mIE1hdHJpeDRcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGFcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gICAgICovXG4gICAgZnJvbU1hdDQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIG1hdDMuZnJvbU1hdDQodGhpcy5hcnJheSwgYS5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgYSByb3RhdGlvbiBtYXRyaXggZnJvbSB0aGUgZ2l2ZW4gcXVhdGVybmlvblxuICAgICAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gcVxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAgICAgKi9cbiAgICBmcm9tUXVhdDogZnVuY3Rpb24gKHEpIHtcbiAgICAgICAgbWF0My5mcm9tUXVhdCh0aGlzLmFycmF5LCBxLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHRvIGEgaWRlbnRpdHkgbWF0cml4XG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICAgICAqL1xuICAgIGlkZW50aXR5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1hdDMuaWRlbnRpdHkodGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEludmVydCBzZWxmXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICAgICAqL1xuICAgIGludmVydDogZnVuY3Rpb24gKCkge1xuICAgICAgICBtYXQzLmludmVydCh0aGlzLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIG11dGlwbHlcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gICAgICovXG4gICAgbXVsOiBmdW5jdGlvbiAoYikge1xuICAgICAgICBtYXQzLm11bCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIG11bHRpcGx5TGVmdFxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gYVxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAgICAgKi9cbiAgICBtdWxMZWZ0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICBtYXQzLm11bCh0aGlzLmFycmF5LCBhLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgc2VsZiBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAgICAgKi9cbiAgICBtdWx0aXBseTogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgbWF0My5tdWx0aXBseSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgYSBhbmQgc2VsZiwgYSBpcyBvbiB0aGUgbGVmdFxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gYVxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAgICAgKi9cbiAgICBtdWx0aXBseUxlZnQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIG1hdDMubXVsdGlwbHkodGhpcy5hcnJheSwgYS5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBzZWxmIGJ5IGEgZ2l2ZW4gcmFkaWFuXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgIHJhZFxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAgICAgKi9cbiAgICByb3RhdGU6IGZ1bmN0aW9uIChyYWQpIHtcbiAgICAgICAgbWF0My5yb3RhdGUodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgcmFkKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2NhbGUgc2VsZiBieSBzXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSAgc1xuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAgICAgKi9cbiAgICBzY2FsZTogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgbWF0My5zY2FsZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCB2LmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVHJhbnNsYXRlIHNlbGYgYnkgdlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gIHZcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gICAgICovXG4gICAgdHJhbnNsYXRlOiBmdW5jdGlvbiAodikge1xuICAgICAgICBtYXQzLnRyYW5zbGF0ZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCB2LmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgYSAzeDMgbm9ybWFsIG1hdHJpeCAodHJhbnNwb3NlIGludmVyc2UpIGZyb20gdGhlIDR4NCBtYXRyaXhcbiAgICAgKiBAcGFyYW0ge2NsYXkuTWF0cml4NH0gYVxuICAgICAqL1xuICAgIG5vcm1hbEZyb21NYXQ0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICBtYXQzLm5vcm1hbEZyb21NYXQ0KHRoaXMuYXJyYXksIGEuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUcmFuc3Bvc2Ugc2VsZiwgaW4tcGxhY2UuXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyfVxuICAgICAqL1xuICAgIHRyYW5zcG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICBtYXQzLnRyYW5zcG9zZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgdG9TdHJpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICdbJyArIEFycmF5LnByb3RvdHlwZS5qb2luLmNhbGwodGhpcy5hcnJheSwgJywnKSArICddJztcbiAgICB9LFxuXG4gICAgdG9BcnJheTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5hcnJheSk7XG4gICAgfVxufTtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gYVxuICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICovXG5NYXRyaXgzLmFkam9pbnQgPSBmdW5jdGlvbiAob3V0LCBhKSB7XG4gICAgbWF0My5hZGpvaW50KG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gYVxuICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICovXG5NYXRyaXgzLmNvcHkgPSBmdW5jdGlvbiAob3V0LCBhKSB7XG4gICAgbWF0My5jb3B5KG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbk1hdHJpeDMuZGV0ZXJtaW5hbnQgPSBmdW5jdGlvbiAoYSkge1xuICAgIHJldHVybiBtYXQzLmRldGVybWluYW50KGEuYXJyYXkpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IG91dFxuICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICovXG5NYXRyaXgzLmlkZW50aXR5ID0gZnVuY3Rpb24gKG91dCkge1xuICAgIG1hdDMuaWRlbnRpdHkob3V0LmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBhXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gKi9cbk1hdHJpeDMuaW52ZXJ0ID0gZnVuY3Rpb24gKG91dCwgYSkge1xuICAgIG1hdDMuaW52ZXJ0KG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gYVxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBiXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gKi9cbk1hdHJpeDMubXVsID0gZnVuY3Rpb24gKG91dCwgYSwgYikge1xuICAgIG1hdDMubXVsKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBhXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IGJcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAqL1xuTWF0cml4My5tdWx0aXBseSA9IE1hdHJpeDMubXVsO1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gIG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gYVxuICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICovXG5NYXRyaXgzLmZyb21NYXQyZCA9IGZ1bmN0aW9uIChvdXQsIGEpIHtcbiAgICBtYXQzLmZyb21NYXQyZChvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGFcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAqL1xuTWF0cml4My5mcm9tTWF0NCA9IGZ1bmN0aW9uIChvdXQsIGEpIHtcbiAgICBtYXQzLmZyb21NYXQ0KG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSAgICBvdXRcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYVxuICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICovXG5NYXRyaXgzLmZyb21RdWF0ID0gZnVuY3Rpb24gKG91dCwgcSkge1xuICAgIG1hdDMuZnJvbVF1YXQob3V0LmFycmF5LCBxLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBhXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gKi9cbk1hdHJpeDMubm9ybWFsRnJvbU1hdDQgPSBmdW5jdGlvbiAob3V0LCBhKSB7XG4gICAgbWF0My5ub3JtYWxGcm9tTWF0NChvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IGFcbiAqIEBwYXJhbSAge251bWJlcn0gIHJhZFxuICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICovXG5NYXRyaXgzLnJvdGF0ZSA9IGZ1bmN0aW9uIChvdXQsIGEsIHJhZCkge1xuICAgIG1hdDMucm90YXRlKG91dC5hcnJheSwgYS5hcnJheSwgcmFkKTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IHZcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAqL1xuTWF0cml4My5zY2FsZSA9IGZ1bmN0aW9uIChvdXQsIGEsIHYpIHtcbiAgICBtYXQzLnNjYWxlKG91dC5hcnJheSwgYS5hcnJheSwgdi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gYVxuICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICovXG5NYXRyaXgzLnRyYW5zcG9zZSA9IGZ1bmN0aW9uIChvdXQsIGEpIHtcbiAgICBtYXQzLnRyYW5zcG9zZShvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gdlxuICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICovXG5NYXRyaXgzLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChvdXQsIGEsIHYpIHtcbiAgICBtYXQzLnRyYW5zbGF0ZShvdXQuYXJyYXksIGEuYXJyYXksIHYuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBNYXRyaXgzO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL01hdHJpeDMuanNcbi8vIG1vZHVsZSBpZCA9IDE3N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///177\n");

/***/ }),
/* 178 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__ = __webpack_require__(31);\n\n\n/**\n * @constructor\n * @alias clay.Vector4\n * @param {number} x\n * @param {number} y\n * @param {number} z\n * @param {number} w\n */\nvar Vector4 = function(x, y, z, w) {\n\n    x = x || 0;\n    y = y || 0;\n    z = z || 0;\n    w = w || 0;\n\n    /**\n     * Storage of Vector4, read and write of x, y, z, w will change the values in array\n     * All methods also operate on the array instead of x, y, z, w components\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Vector4#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].fromValues(x, y, z, w);\n\n    /**\n     * Dirty flag is used by the Node to determine\n     * if the matrix is updated to latest\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Vector4#\n     */\n    this._dirty = true;\n};\n\nVector4.prototype = {\n\n    constructor: Vector4,\n\n    /**\n     * Add b to self\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    add: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].add(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x, y and z components\n     * @param  {number}  x\n     * @param  {number}  y\n     * @param  {number}  z\n     * @param  {number}  w\n     * @return {clay.Vector4}\n     */\n    set: function(x, y, z, w) {\n        this.array[0] = x;\n        this.array[1] = y;\n        this.array[2] = z;\n        this.array[3] = w;\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x, y, z and w components from array\n     * @param  {Float32Array|number[]} arr\n     * @return {clay.Vector4}\n     */\n    setArray: function(arr) {\n        this.array[0] = arr[0];\n        this.array[1] = arr[1];\n        this.array[2] = arr[2];\n        this.array[3] = arr[3];\n\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Clone a new Vector4\n     * @return {clay.Vector4}\n     */\n    clone: function() {\n        return new Vector4(this.x, this.y, this.z, this.w);\n    },\n\n    /**\n     * Copy from b\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    copy: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].copy(this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for distance\n     * @param  {clay.Vector4} b\n     * @return {number}\n     */\n    dist: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].dist(this.array, b.array);\n    },\n\n    /**\n     * Distance between self and b\n     * @param  {clay.Vector4} b\n     * @return {number}\n     */\n    distance: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].distance(this.array, b.array);\n    },\n\n    /**\n     * Alias for divide\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    div: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].div(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Divide self by b\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    divide: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].divide(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Dot product of self and b\n     * @param  {clay.Vector4} b\n     * @return {number}\n     */\n    dot: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].dot(this.array, b.array);\n    },\n\n    /**\n     * Alias of length\n     * @return {number}\n     */\n    len: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].len(this.array);\n    },\n\n    /**\n     * Calculate the length\n     * @return {number}\n     */\n    length: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].length(this.array);\n    },\n    /**\n     * Linear interpolation between a and b\n     * @param  {clay.Vector4} a\n     * @param  {clay.Vector4} b\n     * @param  {number}  t\n     * @return {clay.Vector4}\n     */\n    lerp: function(a, b, t) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].lerp(this.array, a.array, b.array, t);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Minimum of self and b\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    min: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].min(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Maximum of self and b\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    max: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].max(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiply\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    mul: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Mutiply self and b\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    multiply: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Negate self\n     * @return {clay.Vector4}\n     */\n    negate: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].negate(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Normalize self\n     * @return {clay.Vector4}\n     */\n    normalize: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].normalize(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Generate random x, y, z, w components with a given scale\n     * @param  {number} scale\n     * @return {clay.Vector4}\n     */\n    random: function(scale) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].random(this.array, scale);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale self\n     * @param  {number}  scale\n     * @return {clay.Vector4}\n     */\n    scale: function(s) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].scale(this.array, this.array, s);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Scale b and add to self\n     * @param  {clay.Vector4} b\n     * @param  {number}  scale\n     * @return {clay.Vector4}\n     */\n    scaleAndAdd: function(b, s) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].scaleAndAdd(this.array, this.array, b.array, s);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for squaredDistance\n     * @param  {clay.Vector4} b\n     * @return {number}\n     */\n    sqrDist: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].sqrDist(this.array, b.array);\n    },\n\n    /**\n     * Squared distance between self and b\n     * @param  {clay.Vector4} b\n     * @return {number}\n     */\n    squaredDistance: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].squaredDistance(this.array, b.array);\n    },\n\n    /**\n     * Alias for squaredLength\n     * @return {number}\n     */\n    sqrLen: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].sqrLen(this.array);\n    },\n\n    /**\n     * Squared length of self\n     * @return {number}\n     */\n    squaredLength: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].squaredLength(this.array);\n    },\n\n    /**\n     * Alias for subtract\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    sub: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].sub(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Subtract b from self\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    subtract: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].subtract(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Matrix4 m\n     * @param  {clay.Matrix4} m\n     * @return {clay.Vector4}\n     */\n    transformMat4: function(m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].transformMat4(this.array, this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Quaternion q\n     * @param  {clay.Quaternion} q\n     * @return {clay.Vector4}\n     */\n    transformQuat: function(q) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].transformQuat(this.array, this.array, q.array);\n        this._dirty = true;\n        return this;\n    },\n\n    toString: function() {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n\nvar defineProperty = Object.defineProperty;\n// Getter and Setter\nif (defineProperty) {\n\n    var proto = Vector4.prototype;\n    /**\n     * @name x\n     * @type {number}\n     * @memberOf clay.Vector4\n     * @instance\n     */\n    defineProperty(proto, 'x', {\n        get: function () {\n            return this.array[0];\n        },\n        set: function (value) {\n            this.array[0] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name y\n     * @type {number}\n     * @memberOf clay.Vector4\n     * @instance\n     */\n    defineProperty(proto, 'y', {\n        get: function () {\n            return this.array[1];\n        },\n        set: function (value) {\n            this.array[1] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name z\n     * @type {number}\n     * @memberOf clay.Vector4\n     * @instance\n     */\n    defineProperty(proto, 'z', {\n        get: function () {\n            return this.array[2];\n        },\n        set: function (value) {\n            this.array[2] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name w\n     * @type {number}\n     * @memberOf clay.Vector4\n     * @instance\n     */\n    defineProperty(proto, 'w', {\n        get: function () {\n            return this.array[3];\n        },\n        set: function (value) {\n            this.array[3] = value;\n            this._dirty = true;\n        }\n    });\n}\n\n// Supply methods that are not in place\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.add = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].add(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {number}  x\n * @param  {number}  y\n * @param  {number}  z\n * @return {clay.Vector4}\n */\nVector4.set = function(out, x, y, z, w) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].set(out.array, x, y, z, w);\n    out._dirty = true;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.copy = function(out, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].copy(out.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {number}\n */\nVector4.dist = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].distance(a.array, b.array);\n};\n\n/**\n * @function\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {number}\n */\nVector4.distance = Vector4.dist;\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.div = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].divide(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.divide = Vector4.div;\n\n/**\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {number}\n */\nVector4.dot = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].dot(a.array, b.array);\n};\n\n/**\n * @param  {clay.Vector4} a\n * @return {number}\n */\nVector4.len = function(b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].length(b.array);\n};\n\n// Vector4.length = Vector4.len;\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @param  {number}  t\n * @return {clay.Vector4}\n */\nVector4.lerp = function(out, a, b, t) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].lerp(out.array, a.array, b.array, t);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.min = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].min(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.max = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].max(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.mul = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].multiply(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.multiply = Vector4.mul;\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @return {clay.Vector4}\n */\nVector4.negate = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].negate(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @return {clay.Vector4}\n */\nVector4.normalize = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].normalize(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {number}  scale\n * @return {clay.Vector4}\n */\nVector4.random = function(out, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].random(out.array, scale);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {number}  scale\n * @return {clay.Vector4}\n */\nVector4.scale = function(out, a, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].scale(out.array, a.array, scale);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @param  {number}  scale\n * @return {clay.Vector4}\n */\nVector4.scaleAndAdd = function(out, a, b, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].scaleAndAdd(out.array, a.array, b.array, scale);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {number}\n */\nVector4.sqrDist = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].sqrDist(a.array, b.array);\n};\n\n/**\n * @function\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {number}\n */\nVector4.squaredDistance = Vector4.sqrDist;\n\n/**\n * @param  {clay.Vector4} a\n * @return {number}\n */\nVector4.sqrLen = function(a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].sqrLen(a.array);\n};\n/**\n * @function\n * @param  {clay.Vector4} a\n * @return {number}\n */\nVector4.squaredLength = Vector4.sqrLen;\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.sub = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].subtract(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @function\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.subtract = Vector4.sub;\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Matrix4} m\n * @return {clay.Vector4}\n */\nVector4.transformMat4 = function(out, a, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].transformMat4(out.array, a.array, m.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Quaternion} q\n * @return {clay.Vector4}\n */\nVector4.transformQuat = function(out, a, q) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].transformQuat(out.array, a.array, q.array);\n    out._dirty = true;\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Vector4);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTc4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvbWF0aC9WZWN0b3I0LmpzPzQxZjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHZlYzQgZnJvbSAnLi4vZ2xtYXRyaXgvdmVjNCc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5WZWN0b3I0XG4gKiBAcGFyYW0ge251bWJlcn0geFxuICogQHBhcmFtIHtudW1iZXJ9IHlcbiAqIEBwYXJhbSB7bnVtYmVyfSB6XG4gKiBAcGFyYW0ge251bWJlcn0gd1xuICovXG52YXIgVmVjdG9yNCA9IGZ1bmN0aW9uKHgsIHksIHosIHcpIHtcblxuICAgIHggPSB4IHx8IDA7XG4gICAgeSA9IHkgfHwgMDtcbiAgICB6ID0geiB8fCAwO1xuICAgIHcgPSB3IHx8IDA7XG5cbiAgICAvKipcbiAgICAgKiBTdG9yYWdlIG9mIFZlY3RvcjQsIHJlYWQgYW5kIHdyaXRlIG9mIHgsIHksIHosIHcgd2lsbCBjaGFuZ2UgdGhlIHZhbHVlcyBpbiBhcnJheVxuICAgICAqIEFsbCBtZXRob2RzIGFsc28gb3BlcmF0ZSBvbiB0aGUgYXJyYXkgaW5zdGVhZCBvZiB4LCB5LCB6LCB3IGNvbXBvbmVudHNcbiAgICAgKiBAbmFtZSBhcnJheVxuICAgICAqIEB0eXBlIHtGbG9hdDMyQXJyYXl9XG4gICAgICogQG1lbWJlck9mIGNsYXkuVmVjdG9yNCNcbiAgICAgKi9cbiAgICB0aGlzLmFycmF5ID0gdmVjNC5mcm9tVmFsdWVzKHgsIHksIHosIHcpO1xuXG4gICAgLyoqXG4gICAgICogRGlydHkgZmxhZyBpcyB1c2VkIGJ5IHRoZSBOb2RlIHRvIGRldGVybWluZVxuICAgICAqIGlmIHRoZSBtYXRyaXggaXMgdXBkYXRlZCB0byBsYXRlc3RcbiAgICAgKiBAbmFtZSBfZGlydHlcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3I0I1xuICAgICAqL1xuICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbn07XG5cblZlY3RvcjQucHJvdG90eXBlID0ge1xuXG4gICAgY29uc3RydWN0b3I6IFZlY3RvcjQsXG5cbiAgICAvKipcbiAgICAgKiBBZGQgYiB0byBzZWxmXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIGFkZDogZnVuY3Rpb24oYikge1xuICAgICAgICB2ZWM0LmFkZCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHgsIHkgYW5kIHogY29tcG9uZW50c1xuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHhcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB5XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgelxuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHdcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gICAgICovXG4gICAgc2V0OiBmdW5jdGlvbih4LCB5LCB6LCB3KSB7XG4gICAgICAgIHRoaXMuYXJyYXlbMF0gPSB4O1xuICAgICAgICB0aGlzLmFycmF5WzFdID0geTtcbiAgICAgICAgdGhpcy5hcnJheVsyXSA9IHo7XG4gICAgICAgIHRoaXMuYXJyYXlbM10gPSB3O1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgeCwgeSwgeiBhbmQgdyBjb21wb25lbnRzIGZyb20gYXJyYXlcbiAgICAgKiBAcGFyYW0gIHtGbG9hdDMyQXJyYXl8bnVtYmVyW119IGFyclxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAgICAgKi9cbiAgICBzZXRBcnJheTogZnVuY3Rpb24oYXJyKSB7XG4gICAgICAgIHRoaXMuYXJyYXlbMF0gPSBhcnJbMF07XG4gICAgICAgIHRoaXMuYXJyYXlbMV0gPSBhcnJbMV07XG4gICAgICAgIHRoaXMuYXJyYXlbMl0gPSBhcnJbMl07XG4gICAgICAgIHRoaXMuYXJyYXlbM10gPSBhcnJbM107XG5cbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xvbmUgYSBuZXcgVmVjdG9yNFxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yNCh0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLncpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDb3B5IGZyb20gYlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAgICAgKi9cbiAgICBjb3B5OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzQuY29weSh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIGRpc3RhbmNlXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGRpc3Q6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgcmV0dXJuIHZlYzQuZGlzdCh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGlzdGFuY2UgYmV0d2VlbiBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGRpc3RhbmNlOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHJldHVybiB2ZWM0LmRpc3RhbmNlKHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgZGl2aWRlXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIGRpdjogZnVuY3Rpb24oYikge1xuICAgICAgICB2ZWM0LmRpdih0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGl2aWRlIHNlbGYgYnkgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAgICAgKi9cbiAgICBkaXZpZGU6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgdmVjNC5kaXZpZGUodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERvdCBwcm9kdWN0IG9mIHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZG90OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHJldHVybiB2ZWM0LmRvdCh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2YgbGVuZ3RoXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGxlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB2ZWM0Lmxlbih0aGlzLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBsZW5ndGhcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgbGVuZ3RoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHZlYzQubGVuZ3RoKHRoaXMuYXJyYXkpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogTGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiBhIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgdFxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAgICAgKi9cbiAgICBsZXJwOiBmdW5jdGlvbihhLCBiLCB0KSB7XG4gICAgICAgIHZlYzQubGVycCh0aGlzLmFycmF5LCBhLmFycmF5LCBiLmFycmF5LCB0KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTWluaW11bSBvZiBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIG1pbjogZnVuY3Rpb24oYikge1xuICAgICAgICB2ZWM0Lm1pbih0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTWF4aW11bSBvZiBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIG1heDogZnVuY3Rpb24oYikge1xuICAgICAgICB2ZWM0Lm1heCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIG11bHRpcGx5XG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIG11bDogZnVuY3Rpb24oYikge1xuICAgICAgICB2ZWM0Lm11bCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXV0aXBseSBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIG11bHRpcGx5OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzQubXVsdGlwbHkodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE5lZ2F0ZSBzZWxmXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIG5lZ2F0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZlYzQubmVnYXRlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBOb3JtYWxpemUgc2VsZlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAgICAgKi9cbiAgICBub3JtYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2ZWM0Lm5vcm1hbGl6ZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgcmFuZG9tIHgsIHksIHosIHcgY29tcG9uZW50cyB3aXRoIGEgZ2l2ZW4gc2NhbGVcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHNjYWxlXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIHJhbmRvbTogZnVuY3Rpb24oc2NhbGUpIHtcbiAgICAgICAgdmVjNC5yYW5kb20odGhpcy5hcnJheSwgc2NhbGUpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTY2FsZSBzZWxmXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gICAgICovXG4gICAgc2NhbGU6IGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgdmVjNC5zY2FsZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBzKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFNjYWxlIGIgYW5kIGFkZCB0byBzZWxmXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gICAgICovXG4gICAgc2NhbGVBbmRBZGQ6IGZ1bmN0aW9uKGIsIHMpIHtcbiAgICAgICAgdmVjNC5zY2FsZUFuZEFkZCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5LCBzKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIHNxdWFyZWREaXN0YW5jZVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBzcXJEaXN0OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHJldHVybiB2ZWM0LnNxckRpc3QodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNxdWFyZWQgZGlzdGFuY2UgYmV0d2VlbiBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNxdWFyZWREaXN0YW5jZTogZnVuY3Rpb24oYikge1xuICAgICAgICByZXR1cm4gdmVjNC5zcXVhcmVkRGlzdGFuY2UodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBzcXVhcmVkTGVuZ3RoXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNxckxlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB2ZWM0LnNxckxlbih0aGlzLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3F1YXJlZCBsZW5ndGggb2Ygc2VsZlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBzcXVhcmVkTGVuZ3RoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHZlYzQuc3F1YXJlZExlbmd0aCh0aGlzLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIHN1YnRyYWN0XG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIHN1YjogZnVuY3Rpb24oYikge1xuICAgICAgICB2ZWM0LnN1Yih0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3VidHJhY3QgYiBmcm9tIHNlbGZcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gICAgICovXG4gICAgc3VidHJhY3Q6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgdmVjNC5zdWJ0cmFjdCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHNlbGYgd2l0aCBhIE1hdHJpeDQgbVxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gbVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1NYXQ0OiBmdW5jdGlvbihtKSB7XG4gICAgICAgIHZlYzQudHJhbnNmb3JtTWF0NCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBtLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHNlbGYgd2l0aCBhIFF1YXRlcm5pb24gcVxuICAgICAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gcVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1RdWF0OiBmdW5jdGlvbihxKSB7XG4gICAgICAgIHZlYzQudHJhbnNmb3JtUXVhdCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBxLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJ1snICsgQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbCh0aGlzLmFycmF5LCAnLCcpICsgJ10nO1xuICAgIH0sXG5cbiAgICB0b0FycmF5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLmFycmF5KTtcbiAgICB9XG59O1xuXG52YXIgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG4vLyBHZXR0ZXIgYW5kIFNldHRlclxuaWYgKGRlZmluZVByb3BlcnR5KSB7XG5cbiAgICB2YXIgcHJvdG8gPSBWZWN0b3I0LnByb3RvdHlwZTtcbiAgICAvKipcbiAgICAgKiBAbmFtZSB4XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3I0XG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICd4Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5WzBdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hcnJheVswXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSB5XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3I0XG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICd5Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5WzFdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hcnJheVsxXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSB6XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3I0XG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICd6Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5WzJdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hcnJheVsyXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSB3XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3I0XG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICd3Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5WzNdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hcnJheVszXSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8vIFN1cHBseSBtZXRob2RzIHRoYXQgYXJlIG5vdCBpbiBwbGFjZVxuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICovXG5WZWN0b3I0LmFkZCA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIHZlYzQuYWRkKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBvdXRcbiAqIEBwYXJhbSAge251bWJlcn0gIHhcbiAqIEBwYXJhbSAge251bWJlcn0gIHlcbiAqIEBwYXJhbSAge251bWJlcn0gIHpcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC5zZXQgPSBmdW5jdGlvbihvdXQsIHgsIHksIHosIHcpIHtcbiAgICB2ZWM0LnNldChvdXQuYXJyYXksIHgsIHksIHosIHcpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gKi9cblZlY3RvcjQuY29weSA9IGZ1bmN0aW9uKG91dCwgYikge1xuICAgIHZlYzQuY29weShvdXQuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjQuZGlzdCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gdmVjNC5kaXN0YW5jZShhLmFycmF5LCBiLmFycmF5KTtcbn07XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5WZWN0b3I0LmRpc3RhbmNlID0gVmVjdG9yNC5kaXN0O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICovXG5WZWN0b3I0LmRpdiA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIHZlYzQuZGl2aWRlKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC5kaXZpZGUgPSBWZWN0b3I0LmRpdjtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5WZWN0b3I0LmRvdCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gdmVjNC5kb3QoYS5hcnJheSwgYi5hcnJheSk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5WZWN0b3I0LmxlbiA9IGZ1bmN0aW9uKGIpIHtcbiAgICByZXR1cm4gdmVjNC5sZW5ndGgoYi5hcnJheSk7XG59O1xuXG4vLyBWZWN0b3I0Lmxlbmd0aCA9IFZlY3RvcjQubGVuO1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICogQHBhcmFtICB7bnVtYmVyfSAgdFxuICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICovXG5WZWN0b3I0LmxlcnAgPSBmdW5jdGlvbihvdXQsIGEsIGIsIHQpIHtcbiAgICB2ZWM0LmxlcnAob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5LCB0KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC5taW4gPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2ZWM0Lm1pbihvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICovXG5WZWN0b3I0Lm1heCA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIHZlYzQubWF4KG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gKi9cblZlY3RvcjQubXVsID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjNC5tdWx0aXBseShvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gKi9cblZlY3RvcjQubXVsdGlwbHkgPSBWZWN0b3I0Lm11bDtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gKi9cblZlY3RvcjQubmVnYXRlID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgdmVjNC5uZWdhdGUob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gKi9cblZlY3RvcjQubm9ybWFsaXplID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgdmVjNC5ub3JtYWxpemUob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IG91dFxuICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGVcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC5yYW5kb20gPSBmdW5jdGlvbihvdXQsIHNjYWxlKSB7XG4gICAgdmVjNC5yYW5kb20ob3V0LmFycmF5LCBzY2FsZSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGVcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC5zY2FsZSA9IGZ1bmN0aW9uKG91dCwgYSwgc2NhbGUpIHtcbiAgICB2ZWM0LnNjYWxlKG91dC5hcnJheSwgYS5hcnJheSwgc2NhbGUpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGVcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC5zY2FsZUFuZEFkZCA9IGZ1bmN0aW9uKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgICB2ZWM0LnNjYWxlQW5kQWRkKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSwgc2NhbGUpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjQuc3FyRGlzdCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gdmVjNC5zcXJEaXN0KGEuYXJyYXksIGIuYXJyYXkpO1xufTtcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjQuc3F1YXJlZERpc3RhbmNlID0gVmVjdG9yNC5zcXJEaXN0O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5WZWN0b3I0LnNxckxlbiA9IGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gdmVjNC5zcXJMZW4oYS5hcnJheSk7XG59O1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5WZWN0b3I0LnNxdWFyZWRMZW5ndGggPSBWZWN0b3I0LnNxckxlbjtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC5zdWIgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2ZWM0LnN1YnRyYWN0KG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gKi9cblZlY3RvcjQuc3VidHJhY3QgPSBWZWN0b3I0LnN1YjtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG1cbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC50cmFuc2Zvcm1NYXQ0ID0gZnVuY3Rpb24ob3V0LCBhLCBtKSB7XG4gICAgdmVjNC50cmFuc2Zvcm1NYXQ0KG91dC5hcnJheSwgYS5hcnJheSwgbS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBxXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gKi9cblZlY3RvcjQudHJhbnNmb3JtUXVhdCA9IGZ1bmN0aW9uKG91dCwgYSwgcSkge1xuICAgIHZlYzQudHJhbnNmb3JtUXVhdChvdXQuYXJyYXksIGEuYXJyYXksIHEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBWZWN0b3I0O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9tYXRoL1ZlY3RvcjQuanNcbi8vIG1vZHVsZSBpZCA9IDE3OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///178\n");

/***/ }),
/* 179 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Particle__ = __webpack_require__(113);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_Value__ = __webpack_require__(112);\n\n\n\n\n\n/**\n * @constructor clay.particle.Emitter\n * @extends clay.core.Base\n */\nvar Emitter = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend( /** @lends clay.particle.Emitter# */ {\n    /**\n     * Maximum number of particles created by this emitter\n     * @type {number}\n     */\n    max: 1000,\n    /**\n     * Number of particles created by this emitter each shot\n     * @type {number}\n     */\n    amount: 20,\n\n    // Init status for each particle\n    /**\n     * Particle life generator\n     * @type {?clay.Value.<number>}\n     */\n    life: null,\n    /**\n     * Particle position generator\n     * @type {?clay.Value.<clay.Vector3>}\n     */\n    position: null,\n    /**\n     * Particle rotation generator\n     * @type {?clay.Value.<clay.Vector3>}\n     */\n    rotation: null,\n    /**\n     * Particle velocity generator\n     * @type {?clay.Value.<clay.Vector3>}\n     */\n    velocity: null,\n    /**\n     * Particle angular velocity generator\n     * @type {?clay.Value.<clay.Vector3>}\n     */\n    angularVelocity: null,\n    /**\n     * Particle sprite size generator\n     * @type {?clay.Value.<number>}\n     */\n    spriteSize: null,\n    /**\n     * Particle weight generator\n     * @type {?clay.Value.<number>}\n     */\n    weight: null,\n\n    _particlePool: null\n\n}, function() {\n\n    this._particlePool = [];\n\n    // TODO Reduce heap memory\n    for (var i = 0; i < this.max; i++) {\n        var particle = new __WEBPACK_IMPORTED_MODULE_2__Particle__[\"a\" /* default */]();\n        particle.emitter = this;\n        this._particlePool.push(particle);\n\n        if (this.velocity) {\n            particle.velocity = new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]();\n        }\n        if (this.angularVelocity) {\n            particle.angularVelocity = new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]();\n        }\n    }\n},\n/** @lends clay.particle.Emitter.prototype */\n{\n    /**\n     * Emitter number of particles and push them to a given particle list. Emmit number is defined by amount property\n     * @param  {Array.<clay.particle.Particle>} out\n     */\n    emit: function(out) {\n        var amount = Math.min(this._particlePool.length, this.amount);\n\n        var particle;\n        for (var i = 0; i < amount; i++) {\n            particle = this._particlePool.pop();\n            // Initialize particle status\n            if (this.position) {\n                this.position.get(particle.position);\n            }\n            if (this.rotation) {\n                this.rotation.get(particle.rotation);\n            }\n            if (this.velocity) {\n                this.velocity.get(particle.velocity);\n            }\n            if (this.angularVelocity) {\n                this.angularVelocity.get(particle.angularVelocity);\n            }\n            if (this.life) {\n                particle.life = this.life.get();\n            }\n            if (this.spriteSize) {\n                particle.spriteSize = this.spriteSize.get();\n            }\n            if (this.weight) {\n                particle.weight = this.weight.get();\n            }\n            particle.age = 0;\n\n            out.push(particle);\n        }\n    },\n    /**\n     * Kill a dead particle and put it back in the pool\n     * @param  {clay.particle.Particle} particle\n     */\n    kill: function(particle) {\n        this._particlePool.push(particle);\n    }\n});\n\n/**\n * Create a constant 1d value generator. Alias for {@link clay.Value.constant}\n * @function clay.particle.Emitter.constant\n */\nEmitter.constant = __WEBPACK_IMPORTED_MODULE_3__math_Value__[\"a\" /* default */].constant;\n\n/**\n * Create a constant vector value(2d or 3d) generator. Alias for {@link clay.Value.vector}\n * @function clay.particle.Emitter.vector\n */\nEmitter.vector = __WEBPACK_IMPORTED_MODULE_3__math_Value__[\"a\" /* default */].vector;\n\n/**\n * Create a random 1d value generator. Alias for {@link clay.Value.random1D}\n * @function clay.particle.Emitter.random1D\n */\nEmitter.random1D = __WEBPACK_IMPORTED_MODULE_3__math_Value__[\"a\" /* default */].random1D;\n\n/**\n * Create a random 2d value generator. Alias for {@link clay.Value.random2D}\n * @function clay.particle.Emitter.random2D\n */\nEmitter.random2D = __WEBPACK_IMPORTED_MODULE_3__math_Value__[\"a\" /* default */].random2D;\n\n/**\n * Create a random 3d value generator. Alias for {@link clay.Value.random3D}\n * @function clay.particle.Emitter.random3D\n */\nEmitter.random3D = __WEBPACK_IMPORTED_MODULE_3__math_Value__[\"a\" /* default */].random3D;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Emitter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTc5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGFydGljbGUvRW1pdHRlci5qcz9kMWFiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4uL2NvcmUvQmFzZSc7XG5pbXBvcnQgVmVjdG9yMyBmcm9tICcuLi9tYXRoL1ZlY3RvcjMnO1xuaW1wb3J0IFBhcnRpY2xlIGZyb20gJy4vUGFydGljbGUnO1xuaW1wb3J0IFZhbHVlIGZyb20gJy4uL21hdGgvVmFsdWUnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LnBhcnRpY2xlLkVtaXR0ZXJcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKi9cbnZhciBFbWl0dGVyID0gQmFzZS5leHRlbmQoIC8qKiBAbGVuZHMgY2xheS5wYXJ0aWNsZS5FbWl0dGVyIyAqLyB7XG4gICAgLyoqXG4gICAgICogTWF4aW11bSBudW1iZXIgb2YgcGFydGljbGVzIGNyZWF0ZWQgYnkgdGhpcyBlbWl0dGVyXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBtYXg6IDEwMDAsXG4gICAgLyoqXG4gICAgICogTnVtYmVyIG9mIHBhcnRpY2xlcyBjcmVhdGVkIGJ5IHRoaXMgZW1pdHRlciBlYWNoIHNob3RcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGFtb3VudDogMjAsXG5cbiAgICAvLyBJbml0IHN0YXR1cyBmb3IgZWFjaCBwYXJ0aWNsZVxuICAgIC8qKlxuICAgICAqIFBhcnRpY2xlIGxpZmUgZ2VuZXJhdG9yXG4gICAgICogQHR5cGUgez9jbGF5LlZhbHVlLjxudW1iZXI+fVxuICAgICAqL1xuICAgIGxpZmU6IG51bGwsXG4gICAgLyoqXG4gICAgICogUGFydGljbGUgcG9zaXRpb24gZ2VuZXJhdG9yXG4gICAgICogQHR5cGUgez9jbGF5LlZhbHVlLjxjbGF5LlZlY3RvcjM+fVxuICAgICAqL1xuICAgIHBvc2l0aW9uOiBudWxsLFxuICAgIC8qKlxuICAgICAqIFBhcnRpY2xlIHJvdGF0aW9uIGdlbmVyYXRvclxuICAgICAqIEB0eXBlIHs/Y2xheS5WYWx1ZS48Y2xheS5WZWN0b3IzPn1cbiAgICAgKi9cbiAgICByb3RhdGlvbjogbnVsbCxcbiAgICAvKipcbiAgICAgKiBQYXJ0aWNsZSB2ZWxvY2l0eSBnZW5lcmF0b3JcbiAgICAgKiBAdHlwZSB7P2NsYXkuVmFsdWUuPGNsYXkuVmVjdG9yMz59XG4gICAgICovXG4gICAgdmVsb2NpdHk6IG51bGwsXG4gICAgLyoqXG4gICAgICogUGFydGljbGUgYW5ndWxhciB2ZWxvY2l0eSBnZW5lcmF0b3JcbiAgICAgKiBAdHlwZSB7P2NsYXkuVmFsdWUuPGNsYXkuVmVjdG9yMz59XG4gICAgICovXG4gICAgYW5ndWxhclZlbG9jaXR5OiBudWxsLFxuICAgIC8qKlxuICAgICAqIFBhcnRpY2xlIHNwcml0ZSBzaXplIGdlbmVyYXRvclxuICAgICAqIEB0eXBlIHs/Y2xheS5WYWx1ZS48bnVtYmVyPn1cbiAgICAgKi9cbiAgICBzcHJpdGVTaXplOiBudWxsLFxuICAgIC8qKlxuICAgICAqIFBhcnRpY2xlIHdlaWdodCBnZW5lcmF0b3JcbiAgICAgKiBAdHlwZSB7P2NsYXkuVmFsdWUuPG51bWJlcj59XG4gICAgICovXG4gICAgd2VpZ2h0OiBudWxsLFxuXG4gICAgX3BhcnRpY2xlUG9vbDogbnVsbFxuXG59LCBmdW5jdGlvbigpIHtcblxuICAgIHRoaXMuX3BhcnRpY2xlUG9vbCA9IFtdO1xuXG4gICAgLy8gVE9ETyBSZWR1Y2UgaGVhcCBtZW1vcnlcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubWF4OyBpKyspIHtcbiAgICAgICAgdmFyIHBhcnRpY2xlID0gbmV3IFBhcnRpY2xlKCk7XG4gICAgICAgIHBhcnRpY2xlLmVtaXR0ZXIgPSB0aGlzO1xuICAgICAgICB0aGlzLl9wYXJ0aWNsZVBvb2wucHVzaChwYXJ0aWNsZSk7XG5cbiAgICAgICAgaWYgKHRoaXMudmVsb2NpdHkpIHtcbiAgICAgICAgICAgIHBhcnRpY2xlLnZlbG9jaXR5ID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hbmd1bGFyVmVsb2NpdHkpIHtcbiAgICAgICAgICAgIHBhcnRpY2xlLmFuZ3VsYXJWZWxvY2l0eSA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgIH1cbiAgICB9XG59LFxuLyoqIEBsZW5kcyBjbGF5LnBhcnRpY2xlLkVtaXR0ZXIucHJvdG90eXBlICovXG57XG4gICAgLyoqXG4gICAgICogRW1pdHRlciBudW1iZXIgb2YgcGFydGljbGVzIGFuZCBwdXNoIHRoZW0gdG8gYSBnaXZlbiBwYXJ0aWNsZSBsaXN0LiBFbW1pdCBudW1iZXIgaXMgZGVmaW5lZCBieSBhbW91bnQgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0gIHtBcnJheS48Y2xheS5wYXJ0aWNsZS5QYXJ0aWNsZT59IG91dFxuICAgICAqL1xuICAgIGVtaXQ6IGZ1bmN0aW9uKG91dCkge1xuICAgICAgICB2YXIgYW1vdW50ID0gTWF0aC5taW4odGhpcy5fcGFydGljbGVQb29sLmxlbmd0aCwgdGhpcy5hbW91bnQpO1xuXG4gICAgICAgIHZhciBwYXJ0aWNsZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbW91bnQ7IGkrKykge1xuICAgICAgICAgICAgcGFydGljbGUgPSB0aGlzLl9wYXJ0aWNsZVBvb2wucG9wKCk7XG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIHBhcnRpY2xlIHN0YXR1c1xuICAgICAgICAgICAgaWYgKHRoaXMucG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uLmdldChwYXJ0aWNsZS5wb3NpdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5yb3RhdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMucm90YXRpb24uZ2V0KHBhcnRpY2xlLnJvdGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnZlbG9jaXR5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy52ZWxvY2l0eS5nZXQocGFydGljbGUudmVsb2NpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYW5ndWxhclZlbG9jaXR5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuZ2V0KHBhcnRpY2xlLmFuZ3VsYXJWZWxvY2l0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5saWZlKSB7XG4gICAgICAgICAgICAgICAgcGFydGljbGUubGlmZSA9IHRoaXMubGlmZS5nZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNwcml0ZVNpemUpIHtcbiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5zcHJpdGVTaXplID0gdGhpcy5zcHJpdGVTaXplLmdldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMud2VpZ2h0KSB7XG4gICAgICAgICAgICAgICAgcGFydGljbGUud2VpZ2h0ID0gdGhpcy53ZWlnaHQuZ2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJ0aWNsZS5hZ2UgPSAwO1xuXG4gICAgICAgICAgICBvdXQucHVzaChwYXJ0aWNsZSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEtpbGwgYSBkZWFkIHBhcnRpY2xlIGFuZCBwdXQgaXQgYmFjayBpbiB0aGUgcG9vbFxuICAgICAqIEBwYXJhbSAge2NsYXkucGFydGljbGUuUGFydGljbGV9IHBhcnRpY2xlXG4gICAgICovXG4gICAga2lsbDogZnVuY3Rpb24ocGFydGljbGUpIHtcbiAgICAgICAgdGhpcy5fcGFydGljbGVQb29sLnB1c2gocGFydGljbGUpO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIENyZWF0ZSBhIGNvbnN0YW50IDFkIHZhbHVlIGdlbmVyYXRvci4gQWxpYXMgZm9yIHtAbGluayBjbGF5LlZhbHVlLmNvbnN0YW50fVxuICogQGZ1bmN0aW9uIGNsYXkucGFydGljbGUuRW1pdHRlci5jb25zdGFudFxuICovXG5FbWl0dGVyLmNvbnN0YW50ID0gVmFsdWUuY29uc3RhbnQ7XG5cbi8qKlxuICogQ3JlYXRlIGEgY29uc3RhbnQgdmVjdG9yIHZhbHVlKDJkIG9yIDNkKSBnZW5lcmF0b3IuIEFsaWFzIGZvciB7QGxpbmsgY2xheS5WYWx1ZS52ZWN0b3J9XG4gKiBAZnVuY3Rpb24gY2xheS5wYXJ0aWNsZS5FbWl0dGVyLnZlY3RvclxuICovXG5FbWl0dGVyLnZlY3RvciA9IFZhbHVlLnZlY3RvcjtcblxuLyoqXG4gKiBDcmVhdGUgYSByYW5kb20gMWQgdmFsdWUgZ2VuZXJhdG9yLiBBbGlhcyBmb3Ige0BsaW5rIGNsYXkuVmFsdWUucmFuZG9tMUR9XG4gKiBAZnVuY3Rpb24gY2xheS5wYXJ0aWNsZS5FbWl0dGVyLnJhbmRvbTFEXG4gKi9cbkVtaXR0ZXIucmFuZG9tMUQgPSBWYWx1ZS5yYW5kb20xRDtcblxuLyoqXG4gKiBDcmVhdGUgYSByYW5kb20gMmQgdmFsdWUgZ2VuZXJhdG9yLiBBbGlhcyBmb3Ige0BsaW5rIGNsYXkuVmFsdWUucmFuZG9tMkR9XG4gKiBAZnVuY3Rpb24gY2xheS5wYXJ0aWNsZS5FbWl0dGVyLnJhbmRvbTJEXG4gKi9cbkVtaXR0ZXIucmFuZG9tMkQgPSBWYWx1ZS5yYW5kb20yRDtcblxuLyoqXG4gKiBDcmVhdGUgYSByYW5kb20gM2QgdmFsdWUgZ2VuZXJhdG9yLiBBbGlhcyBmb3Ige0BsaW5rIGNsYXkuVmFsdWUucmFuZG9tM0R9XG4gKiBAZnVuY3Rpb24gY2xheS5wYXJ0aWNsZS5FbWl0dGVyLnJhbmRvbTNEXG4gKi9cbkVtaXR0ZXIucmFuZG9tM0QgPSBWYWx1ZS5yYW5kb20zRDtcblxuZXhwb3J0IGRlZmF1bHQgRW1pdHRlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGFydGljbGUvRW1pdHRlci5qc1xuLy8gbW9kdWxlIGlkID0gMTc5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///179\n");

/***/ }),
/* 180 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Field__ = __webpack_require__(114);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\n\n/**\n * @constructor clay.particle.ForceField\n * @extends clay.particle.Field\n */\nvar ForceField = __WEBPACK_IMPORTED_MODULE_0__Field__[\"a\" /* default */].extend(function() {\n    return {\n        force: new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]()\n    };\n}, {\n    applyTo: function(velocity, position, weight, deltaTime) {\n        if (weight > 0) {\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(velocity.array, velocity.array, this.force.array, deltaTime / weight);\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ForceField);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTgwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGFydGljbGUvRm9yY2VGaWVsZC5qcz9jN2YxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBGaWVsZCBmcm9tICcuL0ZpZWxkJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4uL21hdGgvVmVjdG9yMyc7XG5pbXBvcnQgdmVjMyBmcm9tICcuLi9nbG1hdHJpeC92ZWMzJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5wYXJ0aWNsZS5Gb3JjZUZpZWxkXG4gKiBAZXh0ZW5kcyBjbGF5LnBhcnRpY2xlLkZpZWxkXG4gKi9cbnZhciBGb3JjZUZpZWxkID0gRmllbGQuZXh0ZW5kKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGZvcmNlOiBuZXcgVmVjdG9yMygpXG4gICAgfTtcbn0sIHtcbiAgICBhcHBseVRvOiBmdW5jdGlvbih2ZWxvY2l0eSwgcG9zaXRpb24sIHdlaWdodCwgZGVsdGFUaW1lKSB7XG4gICAgICAgIGlmICh3ZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICB2ZWMzLnNjYWxlQW5kQWRkKHZlbG9jaXR5LmFycmF5LCB2ZWxvY2l0eS5hcnJheSwgdGhpcy5mb3JjZS5hcnJheSwgZGVsdGFUaW1lIC8gd2VpZ2h0KTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBGb3JjZUZpZWxkO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9wYXJ0aWNsZS9Gb3JjZUZpZWxkLmpzXG4vLyBtb2R1bGUgaWQgPSAxODBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///180\n");

/***/ }),
/* 181 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Renderable__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__particle_glsl_js__ = __webpack_require__(182);\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_4__particle_glsl_js__[\"a\" /* default */]);\n\nvar particleShader = new __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].source('clay.particle.vertex'), __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].source('clay.particle.fragment'));\n\n/**\n * @constructor clay.particle.ParticleRenderable\n * @extends clay.Renderable\n *\n * @example\n *     var particleRenderable = new clay.particle.ParticleRenderable({\n *         spriteAnimationTileX: 4,\n *         spriteAnimationTileY: 4,\n *         spriteAnimationRepeat: 1\n *     });\n *     scene.add(particleRenderable);\n *     // Enable uv animation in the shader\n *     particleRenderable.material.define('both', 'UV_ANIMATION');\n *     var Emitter = clay.particle.Emitter;\n *     var Vector3 = clay.Vector3;\n *     var emitter = new Emitter({\n *         max: 2000,\n *         amount: 100,\n *         life: Emitter.random1D(10, 20),\n *         position: Emitter.vector(new Vector3()),\n *         velocity: Emitter.random3D(new Vector3(-10, 0, -10), new Vector3(10, 0, 10));\n *     });\n *     particleRenderable.addEmitter(emitter);\n *     var gravityField = new clay.particle.ForceField();\n *     gravityField.force.y = -10;\n *     particleRenderable.addField(gravityField);\n *     ...\n *     animation.on('frame', function(frameTime) {\n *         particleRenderable.updateParticles(frameTime);\n *         renderer.render(scene, camera);\n *     });\n */\nvar ParticleRenderable = __WEBPACK_IMPORTED_MODULE_0__Renderable__[\"a\" /* default */].extend(/** @lends clay.particle.ParticleRenderable# */ {\n    /**\n     * @type {boolean}\n     */\n    loop: true,\n    /**\n     * @type {boolean}\n     */\n    oneshot: false,\n    /**\n     * Duration of particle system in milliseconds\n     * @type {number}\n     */\n    duration: 1,\n\n    // UV Animation\n    /**\n     * @type {number}\n     */\n    spriteAnimationTileX: 1,\n    /**\n     * @type {number}\n     */\n    spriteAnimationTileY: 1,\n    /**\n     * @type {number}\n     */\n    spriteAnimationRepeat: 0,\n\n    mode: __WEBPACK_IMPORTED_MODULE_0__Renderable__[\"a\" /* default */].POINTS,\n\n    ignorePicking: true,\n\n    _elapsedTime: 0,\n\n    _emitting: true\n\n}, function(){\n\n    this.geometry = new __WEBPACK_IMPORTED_MODULE_1__Geometry__[\"a\" /* default */]({\n        dynamic: true\n    });\n\n    if (!this.material) {\n        this.material = new __WEBPACK_IMPORTED_MODULE_2__Material__[\"a\" /* default */]({\n            shader: particleShader,\n            transparent: true,\n            depthMask: false\n        });\n\n        this.material.enableTexture('sprite');\n    }\n\n    this._particles = [];\n    this._fields = [];\n    this._emitters = [];\n},\n/** @lends clay.particle.ParticleRenderable.prototype */\n{\n\n    culling: false,\n\n    frustumCulling: false,\n\n    castShadow: false,\n    receiveShadow: false,\n\n    /**\n     * Add emitter\n     * @param {clay.particle.Emitter} emitter\n     */\n    addEmitter: function(emitter) {\n        this._emitters.push(emitter);\n    },\n\n    /**\n     * Remove emitter\n     * @param {clay.particle.Emitter} emitter\n     */\n    removeEmitter: function(emitter) {\n        this._emitters.splice(this._emitters.indexOf(emitter), 1);\n    },\n\n    /**\n     * Add field\n     * @param {clay.particle.Field} field\n     */\n    addField: function(field) {\n        this._fields.push(field);\n    },\n\n    /**\n     * Remove field\n     * @param {clay.particle.Field} field\n     */\n    removeField: function(field) {\n        this._fields.splice(this._fields.indexOf(field), 1);\n    },\n\n    /**\n     * Reset the particle system.\n     */\n    reset: function() {\n        // Put all the particles back\n        for (var i = 0; i < this._particles.length; i++) {\n            var p = this._particles[i];\n            p.emitter.kill(p);\n        }\n        this._particles.length = 0;\n        this._elapsedTime = 0;\n        this._emitting = true;\n    },\n\n    /**\n     * @param  {number} deltaTime\n     */\n    updateParticles: function(deltaTime) {\n\n        // MS => Seconds\n        deltaTime /= 1000;\n        this._elapsedTime += deltaTime;\n\n        var particles = this._particles;\n\n        if (this._emitting) {\n            for (var i = 0; i < this._emitters.length; i++) {\n                this._emitters[i].emit(particles);\n            }\n            if (this.oneshot) {\n                this._emitting = false;\n            }\n        }\n\n        // Aging\n        var len = particles.length;\n        for (var i = 0; i < len;) {\n            var p = particles[i];\n            p.age += deltaTime;\n            if (p.age >= p.life) {\n                p.emitter.kill(p);\n                particles[i] = particles[len-1];\n                particles.pop();\n                len--;\n            } else {\n                i++;\n            }\n        }\n\n        for (var i = 0; i < len; i++) {\n            // Update\n            var p = particles[i];\n            if (this._fields.length > 0) {\n                for (var j = 0; j < this._fields.length; j++) {\n                    this._fields[j].applyTo(p.velocity, p.position, p.weight, deltaTime);\n                }\n            }\n            p.update(deltaTime);\n        }\n\n        this._updateVertices();\n    },\n\n    _updateVertices: function() {\n        var geometry = this.geometry;\n        // If has uv animation\n        var animTileX = this.spriteAnimationTileX;\n        var animTileY = this.spriteAnimationTileY;\n        var animRepeat = this.spriteAnimationRepeat;\n        var nUvAnimFrame = animTileY * animTileX * animRepeat;\n        var hasUvAnimation = nUvAnimFrame > 1;\n        var positions = geometry.attributes.position.value;\n        // Put particle status in normal\n        var normals = geometry.attributes.normal.value;\n        var uvs = geometry.attributes.texcoord0.value;\n        var uvs2 = geometry.attributes.texcoord1.value;\n\n        var len = this._particles.length;\n        if (!positions || positions.length !== len * 3) {\n            // TODO Optimize\n            positions = geometry.attributes.position.value = new Float32Array(len * 3);\n            normals = geometry.attributes.normal.value = new Float32Array(len * 3);\n            if (hasUvAnimation) {\n                uvs = geometry.attributes.texcoord0.value = new Float32Array(len * 2);\n                uvs2 = geometry.attributes.texcoord1.value = new Float32Array(len * 2);\n            }\n        }\n\n        var invAnimTileX = 1 / animTileX;\n        for (var i = 0; i < len; i++) {\n            var particle = this._particles[i];\n            var offset = i * 3;\n            for (var j = 0; j < 3; j++) {\n                positions[offset + j] = particle.position.array[j];\n                normals[offset] = particle.age / particle.life;\n                // normals[offset + 1] = particle.rotation;\n                normals[offset + 1] = 0;\n                normals[offset + 2] = particle.spriteSize;\n            }\n            var offset2 = i * 2;\n            if (hasUvAnimation) {\n                // TODO\n                var p = particle.age / particle.life;\n                var stage = Math.round(p * (nUvAnimFrame - 1)) * animRepeat;\n                var v = Math.floor(stage * invAnimTileX);\n                var u = stage - v * animTileX;\n                uvs[offset2] = u / animTileX;\n                uvs[offset2 + 1] = 1 - v / animTileY;\n                uvs2[offset2] = (u + 1) / animTileX;\n                uvs2[offset2 + 1] = 1 - (v + 1) / animTileY;\n            }\n        }\n\n        geometry.dirty();\n    },\n\n    /**\n     * @return {boolean}\n     */\n    isFinished: function() {\n        return this._elapsedTime > this.duration && !this.loop;\n    },\n\n    /**\n     * @param  {clay.Renderer} renderer\n     */\n    dispose: function(renderer) {\n        // Put all the particles back\n        for (var i = 0; i < this._particles.length; i++) {\n            var p = this._particles[i];\n            p.emitter.kill(p);\n        }\n        this.geometry.dispose(renderer);\n        // TODO Dispose texture ?\n    },\n\n    /**\n     * @return {clay.particle.ParticleRenderable}\n     */\n    clone: function() {\n        var particleRenderable = new ParticleRenderable({\n            material: this.material\n        });\n        particleRenderable.loop = this.loop;\n        particleRenderable.duration = this.duration;\n        particleRenderable.oneshot = this.oneshot;\n        particleRenderable.spriteAnimationRepeat = this.spriteAnimationRepeat;\n        particleRenderable.spriteAnimationTileY = this.spriteAnimationTileY;\n        particleRenderable.spriteAnimationTileX = this.spriteAnimationTileX;\n\n        particleRenderable.position.copy(this.position);\n        particleRenderable.rotation.copy(this.rotation);\n        particleRenderable.scale.copy(this.scale);\n\n        for (var i = 0; i < this._children.length; i++) {\n            particleRenderable.add(this._children[i].clone());\n        }\n        return particleRenderable;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ParticleRenderable);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTgxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGFydGljbGUvUGFydGljbGVSZW5kZXJhYmxlLmpzPzhiMjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlbmRlcmFibGUgZnJvbSAnLi4vUmVuZGVyYWJsZSc7XG5cbmltcG9ydCBHZW9tZXRyeSBmcm9tICcuLi9HZW9tZXRyeSc7XG5pbXBvcnQgTWF0ZXJpYWwgZnJvbSAnLi4vTWF0ZXJpYWwnO1xuaW1wb3J0IFNoYWRlciBmcm9tICcuLi9TaGFkZXInO1xuXG5pbXBvcnQgcGFydGljbGVFc3NsIGZyb20gJy4vcGFydGljbGUuZ2xzbC5qcyc7XG5TaGFkZXJbJ2ltcG9ydCddKHBhcnRpY2xlRXNzbCk7XG5cbnZhciBwYXJ0aWNsZVNoYWRlciA9IG5ldyBTaGFkZXIoU2hhZGVyLnNvdXJjZSgnY2xheS5wYXJ0aWNsZS52ZXJ0ZXgnKSwgU2hhZGVyLnNvdXJjZSgnY2xheS5wYXJ0aWNsZS5mcmFnbWVudCcpKTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5wYXJ0aWNsZS5QYXJ0aWNsZVJlbmRlcmFibGVcbiAqIEBleHRlbmRzIGNsYXkuUmVuZGVyYWJsZVxuICpcbiAqIEBleGFtcGxlXG4gKiAgICAgdmFyIHBhcnRpY2xlUmVuZGVyYWJsZSA9IG5ldyBjbGF5LnBhcnRpY2xlLlBhcnRpY2xlUmVuZGVyYWJsZSh7XG4gKiAgICAgICAgIHNwcml0ZUFuaW1hdGlvblRpbGVYOiA0LFxuICogICAgICAgICBzcHJpdGVBbmltYXRpb25UaWxlWTogNCxcbiAqICAgICAgICAgc3ByaXRlQW5pbWF0aW9uUmVwZWF0OiAxXG4gKiAgICAgfSk7XG4gKiAgICAgc2NlbmUuYWRkKHBhcnRpY2xlUmVuZGVyYWJsZSk7XG4gKiAgICAgLy8gRW5hYmxlIHV2IGFuaW1hdGlvbiBpbiB0aGUgc2hhZGVyXG4gKiAgICAgcGFydGljbGVSZW5kZXJhYmxlLm1hdGVyaWFsLmRlZmluZSgnYm90aCcsICdVVl9BTklNQVRJT04nKTtcbiAqICAgICB2YXIgRW1pdHRlciA9IGNsYXkucGFydGljbGUuRW1pdHRlcjtcbiAqICAgICB2YXIgVmVjdG9yMyA9IGNsYXkuVmVjdG9yMztcbiAqICAgICB2YXIgZW1pdHRlciA9IG5ldyBFbWl0dGVyKHtcbiAqICAgICAgICAgbWF4OiAyMDAwLFxuICogICAgICAgICBhbW91bnQ6IDEwMCxcbiAqICAgICAgICAgbGlmZTogRW1pdHRlci5yYW5kb20xRCgxMCwgMjApLFxuICogICAgICAgICBwb3NpdGlvbjogRW1pdHRlci52ZWN0b3IobmV3IFZlY3RvcjMoKSksXG4gKiAgICAgICAgIHZlbG9jaXR5OiBFbWl0dGVyLnJhbmRvbTNEKG5ldyBWZWN0b3IzKC0xMCwgMCwgLTEwKSwgbmV3IFZlY3RvcjMoMTAsIDAsIDEwKSk7XG4gKiAgICAgfSk7XG4gKiAgICAgcGFydGljbGVSZW5kZXJhYmxlLmFkZEVtaXR0ZXIoZW1pdHRlcik7XG4gKiAgICAgdmFyIGdyYXZpdHlGaWVsZCA9IG5ldyBjbGF5LnBhcnRpY2xlLkZvcmNlRmllbGQoKTtcbiAqICAgICBncmF2aXR5RmllbGQuZm9yY2UueSA9IC0xMDtcbiAqICAgICBwYXJ0aWNsZVJlbmRlcmFibGUuYWRkRmllbGQoZ3Jhdml0eUZpZWxkKTtcbiAqICAgICAuLi5cbiAqICAgICBhbmltYXRpb24ub24oJ2ZyYW1lJywgZnVuY3Rpb24oZnJhbWVUaW1lKSB7XG4gKiAgICAgICAgIHBhcnRpY2xlUmVuZGVyYWJsZS51cGRhdGVQYXJ0aWNsZXMoZnJhbWVUaW1lKTtcbiAqICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICogICAgIH0pO1xuICovXG52YXIgUGFydGljbGVSZW5kZXJhYmxlID0gUmVuZGVyYWJsZS5leHRlbmQoLyoqIEBsZW5kcyBjbGF5LnBhcnRpY2xlLlBhcnRpY2xlUmVuZGVyYWJsZSMgKi8ge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGxvb3A6IHRydWUsXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgb25lc2hvdDogZmFsc2UsXG4gICAgLyoqXG4gICAgICogRHVyYXRpb24gb2YgcGFydGljbGUgc3lzdGVtIGluIG1pbGxpc2Vjb25kc1xuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZHVyYXRpb246IDEsXG5cbiAgICAvLyBVViBBbmltYXRpb25cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNwcml0ZUFuaW1hdGlvblRpbGVYOiAxLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3ByaXRlQW5pbWF0aW9uVGlsZVk6IDEsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBzcHJpdGVBbmltYXRpb25SZXBlYXQ6IDAsXG5cbiAgICBtb2RlOiBSZW5kZXJhYmxlLlBPSU5UUyxcblxuICAgIGlnbm9yZVBpY2tpbmc6IHRydWUsXG5cbiAgICBfZWxhcHNlZFRpbWU6IDAsXG5cbiAgICBfZW1pdHRpbmc6IHRydWVcblxufSwgZnVuY3Rpb24oKXtcblxuICAgIHRoaXMuZ2VvbWV0cnkgPSBuZXcgR2VvbWV0cnkoe1xuICAgICAgICBkeW5hbWljOiB0cnVlXG4gICAgfSk7XG5cbiAgICBpZiAoIXRoaXMubWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCh7XG4gICAgICAgICAgICBzaGFkZXI6IHBhcnRpY2xlU2hhZGVyLFxuICAgICAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXG4gICAgICAgICAgICBkZXB0aE1hc2s6IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubWF0ZXJpYWwuZW5hYmxlVGV4dHVyZSgnc3ByaXRlJyk7XG4gICAgfVxuXG4gICAgdGhpcy5fcGFydGljbGVzID0gW107XG4gICAgdGhpcy5fZmllbGRzID0gW107XG4gICAgdGhpcy5fZW1pdHRlcnMgPSBbXTtcbn0sXG4vKiogQGxlbmRzIGNsYXkucGFydGljbGUuUGFydGljbGVSZW5kZXJhYmxlLnByb3RvdHlwZSAqL1xue1xuXG4gICAgY3VsbGluZzogZmFsc2UsXG5cbiAgICBmcnVzdHVtQ3VsbGluZzogZmFsc2UsXG5cbiAgICBjYXN0U2hhZG93OiBmYWxzZSxcbiAgICByZWNlaXZlU2hhZG93OiBmYWxzZSxcblxuICAgIC8qKlxuICAgICAqIEFkZCBlbWl0dGVyXG4gICAgICogQHBhcmFtIHtjbGF5LnBhcnRpY2xlLkVtaXR0ZXJ9IGVtaXR0ZXJcbiAgICAgKi9cbiAgICBhZGRFbWl0dGVyOiBmdW5jdGlvbihlbWl0dGVyKSB7XG4gICAgICAgIHRoaXMuX2VtaXR0ZXJzLnB1c2goZW1pdHRlcik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBlbWl0dGVyXG4gICAgICogQHBhcmFtIHtjbGF5LnBhcnRpY2xlLkVtaXR0ZXJ9IGVtaXR0ZXJcbiAgICAgKi9cbiAgICByZW1vdmVFbWl0dGVyOiBmdW5jdGlvbihlbWl0dGVyKSB7XG4gICAgICAgIHRoaXMuX2VtaXR0ZXJzLnNwbGljZSh0aGlzLl9lbWl0dGVycy5pbmRleE9mKGVtaXR0ZXIpLCAxKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWRkIGZpZWxkXG4gICAgICogQHBhcmFtIHtjbGF5LnBhcnRpY2xlLkZpZWxkfSBmaWVsZFxuICAgICAqL1xuICAgIGFkZEZpZWxkOiBmdW5jdGlvbihmaWVsZCkge1xuICAgICAgICB0aGlzLl9maWVsZHMucHVzaChmaWVsZCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBmaWVsZFxuICAgICAqIEBwYXJhbSB7Y2xheS5wYXJ0aWNsZS5GaWVsZH0gZmllbGRcbiAgICAgKi9cbiAgICByZW1vdmVGaWVsZDogZnVuY3Rpb24oZmllbGQpIHtcbiAgICAgICAgdGhpcy5fZmllbGRzLnNwbGljZSh0aGlzLl9maWVsZHMuaW5kZXhPZihmaWVsZCksIDEpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXNldCB0aGUgcGFydGljbGUgc3lzdGVtLlxuICAgICAqL1xuICAgIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gUHV0IGFsbCB0aGUgcGFydGljbGVzIGJhY2tcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9wYXJ0aWNsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwID0gdGhpcy5fcGFydGljbGVzW2ldO1xuICAgICAgICAgICAgcC5lbWl0dGVyLmtpbGwocCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcGFydGljbGVzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX2VsYXBzZWRUaW1lID0gMDtcbiAgICAgICAgdGhpcy5fZW1pdHRpbmcgPSB0cnVlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRlbHRhVGltZVxuICAgICAqL1xuICAgIHVwZGF0ZVBhcnRpY2xlczogZnVuY3Rpb24oZGVsdGFUaW1lKSB7XG5cbiAgICAgICAgLy8gTVMgPT4gU2Vjb25kc1xuICAgICAgICBkZWx0YVRpbWUgLz0gMTAwMDtcbiAgICAgICAgdGhpcy5fZWxhcHNlZFRpbWUgKz0gZGVsdGFUaW1lO1xuXG4gICAgICAgIHZhciBwYXJ0aWNsZXMgPSB0aGlzLl9wYXJ0aWNsZXM7XG5cbiAgICAgICAgaWYgKHRoaXMuX2VtaXR0aW5nKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2VtaXR0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW1pdHRlcnNbaV0uZW1pdChwYXJ0aWNsZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMub25lc2hvdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VtaXR0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZ2luZ1xuICAgICAgICB2YXIgbGVuID0gcGFydGljbGVzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47KSB7XG4gICAgICAgICAgICB2YXIgcCA9IHBhcnRpY2xlc1tpXTtcbiAgICAgICAgICAgIHAuYWdlICs9IGRlbHRhVGltZTtcbiAgICAgICAgICAgIGlmIChwLmFnZSA+PSBwLmxpZmUpIHtcbiAgICAgICAgICAgICAgICBwLmVtaXR0ZXIua2lsbChwKTtcbiAgICAgICAgICAgICAgICBwYXJ0aWNsZXNbaV0gPSBwYXJ0aWNsZXNbbGVuLTFdO1xuICAgICAgICAgICAgICAgIHBhcnRpY2xlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBsZW4tLTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgLy8gVXBkYXRlXG4gICAgICAgICAgICB2YXIgcCA9IHBhcnRpY2xlc1tpXTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9maWVsZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5fZmllbGRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZpZWxkc1tqXS5hcHBseVRvKHAudmVsb2NpdHksIHAucG9zaXRpb24sIHAud2VpZ2h0LCBkZWx0YVRpbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHAudXBkYXRlKGRlbHRhVGltZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl91cGRhdGVWZXJ0aWNlcygpO1xuICAgIH0sXG5cbiAgICBfdXBkYXRlVmVydGljZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSB0aGlzLmdlb21ldHJ5O1xuICAgICAgICAvLyBJZiBoYXMgdXYgYW5pbWF0aW9uXG4gICAgICAgIHZhciBhbmltVGlsZVggPSB0aGlzLnNwcml0ZUFuaW1hdGlvblRpbGVYO1xuICAgICAgICB2YXIgYW5pbVRpbGVZID0gdGhpcy5zcHJpdGVBbmltYXRpb25UaWxlWTtcbiAgICAgICAgdmFyIGFuaW1SZXBlYXQgPSB0aGlzLnNwcml0ZUFuaW1hdGlvblJlcGVhdDtcbiAgICAgICAgdmFyIG5VdkFuaW1GcmFtZSA9IGFuaW1UaWxlWSAqIGFuaW1UaWxlWCAqIGFuaW1SZXBlYXQ7XG4gICAgICAgIHZhciBoYXNVdkFuaW1hdGlvbiA9IG5VdkFuaW1GcmFtZSA+IDE7XG4gICAgICAgIHZhciBwb3NpdGlvbnMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLnZhbHVlO1xuICAgICAgICAvLyBQdXQgcGFydGljbGUgc3RhdHVzIGluIG5vcm1hbFxuICAgICAgICB2YXIgbm9ybWFscyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMubm9ybWFsLnZhbHVlO1xuICAgICAgICB2YXIgdXZzID0gZ2VvbWV0cnkuYXR0cmlidXRlcy50ZXhjb29yZDAudmFsdWU7XG4gICAgICAgIHZhciB1dnMyID0gZ2VvbWV0cnkuYXR0cmlidXRlcy50ZXhjb29yZDEudmFsdWU7XG5cbiAgICAgICAgdmFyIGxlbiA9IHRoaXMuX3BhcnRpY2xlcy5sZW5ndGg7XG4gICAgICAgIGlmICghcG9zaXRpb25zIHx8IHBvc2l0aW9ucy5sZW5ndGggIT09IGxlbiAqIDMpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gT3B0aW1pemVcbiAgICAgICAgICAgIHBvc2l0aW9ucyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWUgPSBuZXcgRmxvYXQzMkFycmF5KGxlbiAqIDMpO1xuICAgICAgICAgICAgbm9ybWFscyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMubm9ybWFsLnZhbHVlID0gbmV3IEZsb2F0MzJBcnJheShsZW4gKiAzKTtcbiAgICAgICAgICAgIGlmIChoYXNVdkFuaW1hdGlvbikge1xuICAgICAgICAgICAgICAgIHV2cyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMudGV4Y29vcmQwLnZhbHVlID0gbmV3IEZsb2F0MzJBcnJheShsZW4gKiAyKTtcbiAgICAgICAgICAgICAgICB1dnMyID0gZ2VvbWV0cnkuYXR0cmlidXRlcy50ZXhjb29yZDEudmFsdWUgPSBuZXcgRmxvYXQzMkFycmF5KGxlbiAqIDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGludkFuaW1UaWxlWCA9IDEgLyBhbmltVGlsZVg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwYXJ0aWNsZSA9IHRoaXMuX3BhcnRpY2xlc1tpXTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBpICogMztcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb25zW29mZnNldCArIGpdID0gcGFydGljbGUucG9zaXRpb24uYXJyYXlbal07XG4gICAgICAgICAgICAgICAgbm9ybWFsc1tvZmZzZXRdID0gcGFydGljbGUuYWdlIC8gcGFydGljbGUubGlmZTtcbiAgICAgICAgICAgICAgICAvLyBub3JtYWxzW29mZnNldCArIDFdID0gcGFydGljbGUucm90YXRpb247XG4gICAgICAgICAgICAgICAgbm9ybWFsc1tvZmZzZXQgKyAxXSA9IDA7XG4gICAgICAgICAgICAgICAgbm9ybWFsc1tvZmZzZXQgKyAyXSA9IHBhcnRpY2xlLnNwcml0ZVNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb2Zmc2V0MiA9IGkgKiAyO1xuICAgICAgICAgICAgaWYgKGhhc1V2QW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ET1xuICAgICAgICAgICAgICAgIHZhciBwID0gcGFydGljbGUuYWdlIC8gcGFydGljbGUubGlmZTtcbiAgICAgICAgICAgICAgICB2YXIgc3RhZ2UgPSBNYXRoLnJvdW5kKHAgKiAoblV2QW5pbUZyYW1lIC0gMSkpICogYW5pbVJlcGVhdDtcbiAgICAgICAgICAgICAgICB2YXIgdiA9IE1hdGguZmxvb3Ioc3RhZ2UgKiBpbnZBbmltVGlsZVgpO1xuICAgICAgICAgICAgICAgIHZhciB1ID0gc3RhZ2UgLSB2ICogYW5pbVRpbGVYO1xuICAgICAgICAgICAgICAgIHV2c1tvZmZzZXQyXSA9IHUgLyBhbmltVGlsZVg7XG4gICAgICAgICAgICAgICAgdXZzW29mZnNldDIgKyAxXSA9IDEgLSB2IC8gYW5pbVRpbGVZO1xuICAgICAgICAgICAgICAgIHV2czJbb2Zmc2V0Ml0gPSAodSArIDEpIC8gYW5pbVRpbGVYO1xuICAgICAgICAgICAgICAgIHV2czJbb2Zmc2V0MiArIDFdID0gMSAtICh2ICsgMSkgLyBhbmltVGlsZVk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBnZW9tZXRyeS5kaXJ0eSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGlzRmluaXNoZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxhcHNlZFRpbWUgPiB0aGlzLmR1cmF0aW9uICYmICF0aGlzLmxvb3A7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICovXG4gICAgZGlzcG9zZTogZnVuY3Rpb24ocmVuZGVyZXIpIHtcbiAgICAgICAgLy8gUHV0IGFsbCB0aGUgcGFydGljbGVzIGJhY2tcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9wYXJ0aWNsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwID0gdGhpcy5fcGFydGljbGVzW2ldO1xuICAgICAgICAgICAgcC5lbWl0dGVyLmtpbGwocCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5nZW9tZXRyeS5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAgICAgLy8gVE9ETyBEaXNwb3NlIHRleHR1cmUgP1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtjbGF5LnBhcnRpY2xlLlBhcnRpY2xlUmVuZGVyYWJsZX1cbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBwYXJ0aWNsZVJlbmRlcmFibGUgPSBuZXcgUGFydGljbGVSZW5kZXJhYmxlKHtcbiAgICAgICAgICAgIG1hdGVyaWFsOiB0aGlzLm1hdGVyaWFsXG4gICAgICAgIH0pO1xuICAgICAgICBwYXJ0aWNsZVJlbmRlcmFibGUubG9vcCA9IHRoaXMubG9vcDtcbiAgICAgICAgcGFydGljbGVSZW5kZXJhYmxlLmR1cmF0aW9uID0gdGhpcy5kdXJhdGlvbjtcbiAgICAgICAgcGFydGljbGVSZW5kZXJhYmxlLm9uZXNob3QgPSB0aGlzLm9uZXNob3Q7XG4gICAgICAgIHBhcnRpY2xlUmVuZGVyYWJsZS5zcHJpdGVBbmltYXRpb25SZXBlYXQgPSB0aGlzLnNwcml0ZUFuaW1hdGlvblJlcGVhdDtcbiAgICAgICAgcGFydGljbGVSZW5kZXJhYmxlLnNwcml0ZUFuaW1hdGlvblRpbGVZID0gdGhpcy5zcHJpdGVBbmltYXRpb25UaWxlWTtcbiAgICAgICAgcGFydGljbGVSZW5kZXJhYmxlLnNwcml0ZUFuaW1hdGlvblRpbGVYID0gdGhpcy5zcHJpdGVBbmltYXRpb25UaWxlWDtcblxuICAgICAgICBwYXJ0aWNsZVJlbmRlcmFibGUucG9zaXRpb24uY29weSh0aGlzLnBvc2l0aW9uKTtcbiAgICAgICAgcGFydGljbGVSZW5kZXJhYmxlLnJvdGF0aW9uLmNvcHkodGhpcy5yb3RhdGlvbik7XG4gICAgICAgIHBhcnRpY2xlUmVuZGVyYWJsZS5zY2FsZS5jb3B5KHRoaXMuc2NhbGUpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHBhcnRpY2xlUmVuZGVyYWJsZS5hZGQodGhpcy5fY2hpbGRyZW5baV0uY2xvbmUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnRpY2xlUmVuZGVyYWJsZTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgUGFydGljbGVSZW5kZXJhYmxlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9wYXJ0aWNsZS9QYXJ0aWNsZVJlbmRlcmFibGUuanNcbi8vIG1vZHVsZSBpZCA9IDE4MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///181\n");

/***/ }),
/* 182 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.particle.vertex\\nuniform mat4 worldView : WORLDVIEW;\\nuniform mat4 projection : PROJECTION;\\nattribute vec3 position : POSITION;\\nattribute vec3 normal : NORMAL;\\n#ifdef UV_ANIMATION\\nattribute vec2 texcoord0 : TEXCOORD_0;\\nattribute vec2 texcoord1 : TEXCOORD_1;\\nvarying vec2 v_Uv0;\\nvarying vec2 v_Uv1;\\n#endif\\nvarying float v_Age;\\nvoid main() {\\n v_Age = normal.x;\\n float rotation = normal.y;\\n vec4 worldViewPosition = worldView * vec4(position, 1.0);\\n gl_Position = projection * worldViewPosition;\\n float w = gl_Position.w;\\n gl_PointSize = normal.z * projection[0].x / w;\\n #ifdef UV_ANIMATION\\n v_Uv0 = texcoord0;\\n v_Uv1 = texcoord1;\\n #endif\\n}\\n@end\\n@export clay.particle.fragment\\nuniform sampler2D sprite;\\nuniform sampler2D gradient;\\nuniform vec3 color : [1.0, 1.0, 1.0];\\nuniform float alpha : 1.0;\\nvarying float v_Age;\\n#ifdef UV_ANIMATION\\nvarying vec2 v_Uv0;\\nvarying vec2 v_Uv1;\\n#endif\\nvoid main() {\\n vec4 color = vec4(color, alpha);\\n #ifdef SPRITE_ENABLED\\n #ifdef UV_ANIMATION\\n color *= texture2D(sprite, mix(v_Uv0, v_Uv1, gl_PointCoord));\\n #else\\n color *= texture2D(sprite, gl_PointCoord);\\n #endif\\n #endif\\n #ifdef GRADIENT_ENABLED\\n color *= texture2D(gradient, vec2(v_Age, 0.5));\\n #endif\\n gl_FragColor = color;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTgyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGFydGljbGUvcGFydGljbGUuZ2xzbC5qcz8zM2UxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LnBhcnRpY2xlLnZlcnRleFxcbnVuaWZvcm0gbWF0NCB3b3JsZFZpZXcgOiBXT1JMRFZJRVc7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb24gOiBQUk9KRUNUSU9OO1xcbmF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uIDogUE9TSVRJT047XFxuYXR0cmlidXRlIHZlYzMgbm9ybWFsIDogTk9STUFMO1xcbiNpZmRlZiBVVl9BTklNQVRJT05cXG5hdHRyaWJ1dGUgdmVjMiB0ZXhjb29yZDAgOiBURVhDT09SRF8wO1xcbmF0dHJpYnV0ZSB2ZWMyIHRleGNvb3JkMSA6IFRFWENPT1JEXzE7XFxudmFyeWluZyB2ZWMyIHZfVXYwO1xcbnZhcnlpbmcgdmVjMiB2X1V2MTtcXG4jZW5kaWZcXG52YXJ5aW5nIGZsb2F0IHZfQWdlO1xcbnZvaWQgbWFpbigpIHtcXG4gdl9BZ2UgPSBub3JtYWwueDtcXG4gZmxvYXQgcm90YXRpb24gPSBub3JtYWwueTtcXG4gdmVjNCB3b3JsZFZpZXdQb3NpdGlvbiA9IHdvcmxkVmlldyAqIHZlYzQocG9zaXRpb24sIDEuMCk7XFxuIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbiAqIHdvcmxkVmlld1Bvc2l0aW9uO1xcbiBmbG9hdCB3ID0gZ2xfUG9zaXRpb24udztcXG4gZ2xfUG9pbnRTaXplID0gbm9ybWFsLnogKiBwcm9qZWN0aW9uWzBdLnggLyB3O1xcbiAjaWZkZWYgVVZfQU5JTUFUSU9OXFxuIHZfVXYwID0gdGV4Y29vcmQwO1xcbiB2X1V2MSA9IHRleGNvb3JkMTtcXG4gI2VuZGlmXFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkucGFydGljbGUuZnJhZ21lbnRcXG51bmlmb3JtIHNhbXBsZXIyRCBzcHJpdGU7XFxudW5pZm9ybSBzYW1wbGVyMkQgZ3JhZGllbnQ7XFxudW5pZm9ybSB2ZWMzIGNvbG9yIDogWzEuMCwgMS4wLCAxLjBdO1xcbnVuaWZvcm0gZmxvYXQgYWxwaGEgOiAxLjA7XFxudmFyeWluZyBmbG9hdCB2X0FnZTtcXG4jaWZkZWYgVVZfQU5JTUFUSU9OXFxudmFyeWluZyB2ZWMyIHZfVXYwO1xcbnZhcnlpbmcgdmVjMiB2X1V2MTtcXG4jZW5kaWZcXG52b2lkIG1haW4oKSB7XFxuIHZlYzQgY29sb3IgPSB2ZWM0KGNvbG9yLCBhbHBoYSk7XFxuICNpZmRlZiBTUFJJVEVfRU5BQkxFRFxcbiAjaWZkZWYgVVZfQU5JTUFUSU9OXFxuIGNvbG9yICo9IHRleHR1cmUyRChzcHJpdGUsIG1peCh2X1V2MCwgdl9VdjEsIGdsX1BvaW50Q29vcmQpKTtcXG4gI2Vsc2VcXG4gY29sb3IgKj0gdGV4dHVyZTJEKHNwcml0ZSwgZ2xfUG9pbnRDb29yZCk7XFxuICNlbmRpZlxcbiAjZW5kaWZcXG4gI2lmZGVmIEdSQURJRU5UX0VOQUJMRURcXG4gY29sb3IgKj0gdGV4dHVyZTJEKGdyYWRpZW50LCB2ZWMyKHZfQWdlLCAwLjUpKTtcXG4gI2VuZGlmXFxuIGdsX0ZyYWdDb2xvciA9IGNvbG9yO1xcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3BhcnRpY2xlL3BhcnRpY2xlLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE4MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///182\n");

/***/ }),
/* 183 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__FrameBuffer__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__color_glsl_js__ = __webpack_require__(184);\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_5__color_glsl_js__[\"a\" /* default */]);\n\n/**\n * Pixel picking is gpu based picking, which is fast and accurate.\n * But not like ray picking, it can't get the intersection point and triangle.\n * @constructor clay.picking.PixelPicking\n * @extends clay.core.Base\n */\nvar PixelPicking = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function() {\n    return /** @lends clay.picking.PixelPicking# */ {\n        /**\n         * Target renderer\n         * @type {clay.Renderer}\n         */\n        renderer: null,\n        /**\n         * Downsample ratio of hidden frame buffer\n         * @type {number}\n         */\n        downSampleRatio: 1,\n\n        width: 100,\n        height: 100,\n\n        lookupOffset: 1,\n\n        _frameBuffer: null,\n        _texture: null,\n        _shader: null,\n\n        _idMaterials: [],\n        _lookupTable: [],\n\n        _meshMaterials: [],\n\n        _idOffset: 0\n    };\n}, function() {\n    if (this.renderer) {\n        this.width = this.renderer.getWidth();\n        this.height = this.renderer.getHeight();\n    }\n    this._init();\n}, /** @lends clay.picking.PixelPicking.prototype */ {\n    _init: function() {\n        this._texture = new __WEBPACK_IMPORTED_MODULE_2__Texture2D__[\"a\" /* default */]({\n            width: this.width * this.downSampleRatio,\n            height: this.height * this.downSampleRatio\n        });\n        this._frameBuffer = new __WEBPACK_IMPORTED_MODULE_1__FrameBuffer__[\"a\" /* default */]();\n\n        this._shader = new __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].source('clay.picking.color.vertex'), __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].source('clay.picking.color.fragment'));\n    },\n    /**\n     * Set picking presision\n     * @param {number} ratio\n     */\n    setPrecision: function(ratio) {\n        this._texture.width = this.width * ratio;\n        this._texture.height = this.height * ratio;\n        this.downSampleRatio = ratio;\n    },\n    resize: function(width, height) {\n        this._texture.width = width * this.downSampleRatio;\n        this._texture.height = height * this.downSampleRatio;\n        this.width = width;\n        this.height = height;\n        this._texture.dirty();\n    },\n    /**\n     * Update the picking framebuffer\n     * @param {number} ratio\n     */\n    update: function(scene, camera) {\n        var renderer = this.renderer;\n        if (renderer.getWidth() !== this.width || renderer.getHeight() !== this.height) {\n            this.resize(renderer.width, renderer.height);\n        }\n\n        this._frameBuffer.attach(this._texture);\n        this._frameBuffer.bind(renderer);\n        this._idOffset = this.lookupOffset;\n        this._setMaterial(scene);\n        renderer.render(scene, camera);\n        this._restoreMaterial();\n        this._frameBuffer.unbind(renderer);\n    },\n\n    _setMaterial: function(root) {\n        for (var i =0; i < root._children.length; i++) {\n            var child = root._children[i];\n            if (child.geometry && child.material && child.material.shader) {\n                var id = this._idOffset++;\n                var idx = id - this.lookupOffset;\n                var material = this._idMaterials[idx];\n                if (!material) {\n                    material = new __WEBPACK_IMPORTED_MODULE_4__Material__[\"a\" /* default */]({\n                        shader: this._shader\n                    });\n                    var color = packID(id);\n                    color[0] /= 255;\n                    color[1] /= 255;\n                    color[2] /= 255;\n                    color[3] = 1.0;\n                    material.set('color', color);\n                    this._idMaterials[idx] = material;\n                }\n                this._meshMaterials[idx] = child.material;\n                this._lookupTable[idx] = child;\n                child.material = material;\n            }\n            if (child._children.length) {\n                this._setMaterial(child);\n            }\n        }\n    },\n\n    /**\n     * Pick the object\n     * @param  {number} x Mouse position x\n     * @param  {number} y Mouse position y\n     * @return {clay.Node}\n     */\n    pick: function(x, y) {\n        var renderer = this.renderer;\n\n        var ratio = this.downSampleRatio;\n        x = Math.ceil(ratio * x);\n        y = Math.ceil(ratio * (this.height - y));\n\n        this._frameBuffer.bind(renderer);\n        var pixel = new Uint8Array(4);\n        var _gl = renderer.gl;\n        // TODO out of bounds ?\n        // preserveDrawingBuffer ?\n        _gl.readPixels(x, y, 1, 1, _gl.RGBA, _gl.UNSIGNED_BYTE, pixel);\n        this._frameBuffer.unbind(renderer);\n        // Skip interpolated pixel because of anti alias\n        if (pixel[3] === 255) {\n            var id = unpackID(pixel[0], pixel[1], pixel[2]);\n            if (id) {\n                var el = this._lookupTable[id - this.lookupOffset];\n                return el;\n            }\n        }\n    },\n\n    _restoreMaterial: function() {\n        for (var i = 0; i < this._lookupTable.length; i++) {\n            this._lookupTable[i].material = this._meshMaterials[i];\n        }\n    },\n\n    dispose: function(renderer) {\n        this._frameBuffer.dispose(renderer);\n    }\n});\n\nfunction packID(id){\n    var r = id >> 16;\n    var g = (id - (r << 8)) >> 8;\n    var b = id - (r << 16) - (g<<8);\n    return [r, g, b];\n}\n\nfunction unpackID(r, g, b){\n    return (r << 16) + (g<<8) + b;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PixelPicking);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTgzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGlja2luZy9QaXhlbFBpY2tpbmcuanM/ZmFiMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZSBmcm9tICcuLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IEZyYW1lQnVmZmVyIGZyb20gJy4uL0ZyYW1lQnVmZmVyJztcbmltcG9ydCBUZXh0dXJlMkQgZnJvbSAnLi4vVGV4dHVyZTJEJztcbmltcG9ydCBTaGFkZXIgZnJvbSAnLi4vU2hhZGVyJztcbmltcG9ydCBNYXRlcmlhbCBmcm9tICcuLi9NYXRlcmlhbCc7XG5cbmltcG9ydCBjb2xvckVzc2wgZnJvbSAnLi9jb2xvci5nbHNsLmpzJztcblNoYWRlci5pbXBvcnQoY29sb3JFc3NsKTtcblxuLyoqXG4gKiBQaXhlbCBwaWNraW5nIGlzIGdwdSBiYXNlZCBwaWNraW5nLCB3aGljaCBpcyBmYXN0IGFuZCBhY2N1cmF0ZS5cbiAqIEJ1dCBub3QgbGlrZSByYXkgcGlja2luZywgaXQgY2FuJ3QgZ2V0IHRoZSBpbnRlcnNlY3Rpb24gcG9pbnQgYW5kIHRyaWFuZ2xlLlxuICogQGNvbnN0cnVjdG9yIGNsYXkucGlja2luZy5QaXhlbFBpY2tpbmdcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKi9cbnZhciBQaXhlbFBpY2tpbmcgPSBCYXNlLmV4dGVuZChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5LnBpY2tpbmcuUGl4ZWxQaWNraW5nIyAqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUYXJnZXQgcmVuZGVyZXJcbiAgICAgICAgICogQHR5cGUge2NsYXkuUmVuZGVyZXJ9XG4gICAgICAgICAqL1xuICAgICAgICByZW5kZXJlcjogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERvd25zYW1wbGUgcmF0aW8gb2YgaGlkZGVuIGZyYW1lIGJ1ZmZlclxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgZG93blNhbXBsZVJhdGlvOiAxLFxuXG4gICAgICAgIHdpZHRoOiAxMDAsXG4gICAgICAgIGhlaWdodDogMTAwLFxuXG4gICAgICAgIGxvb2t1cE9mZnNldDogMSxcblxuICAgICAgICBfZnJhbWVCdWZmZXI6IG51bGwsXG4gICAgICAgIF90ZXh0dXJlOiBudWxsLFxuICAgICAgICBfc2hhZGVyOiBudWxsLFxuXG4gICAgICAgIF9pZE1hdGVyaWFsczogW10sXG4gICAgICAgIF9sb29rdXBUYWJsZTogW10sXG5cbiAgICAgICAgX21lc2hNYXRlcmlhbHM6IFtdLFxuXG4gICAgICAgIF9pZE9mZnNldDogMFxuICAgIH07XG59LCBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5yZW5kZXJlcikge1xuICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5yZW5kZXJlci5nZXRXaWR0aCgpO1xuICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMucmVuZGVyZXIuZ2V0SGVpZ2h0KCk7XG4gICAgfVxuICAgIHRoaXMuX2luaXQoKTtcbn0sIC8qKiBAbGVuZHMgY2xheS5waWNraW5nLlBpeGVsUGlja2luZy5wcm90b3R5cGUgKi8ge1xuICAgIF9pbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5fdGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICAgICAgd2lkdGg6IHRoaXMud2lkdGggKiB0aGlzLmRvd25TYW1wbGVSYXRpbyxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQgKiB0aGlzLmRvd25TYW1wbGVSYXRpb1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIgPSBuZXcgRnJhbWVCdWZmZXIoKTtcblxuICAgICAgICB0aGlzLl9zaGFkZXIgPSBuZXcgU2hhZGVyKFNoYWRlci5zb3VyY2UoJ2NsYXkucGlja2luZy5jb2xvci52ZXJ0ZXgnKSwgU2hhZGVyLnNvdXJjZSgnY2xheS5waWNraW5nLmNvbG9yLmZyYWdtZW50JykpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogU2V0IHBpY2tpbmcgcHJlc2lzaW9uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvXG4gICAgICovXG4gICAgc2V0UHJlY2lzaW9uOiBmdW5jdGlvbihyYXRpbykge1xuICAgICAgICB0aGlzLl90ZXh0dXJlLndpZHRoID0gdGhpcy53aWR0aCAqIHJhdGlvO1xuICAgICAgICB0aGlzLl90ZXh0dXJlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICogcmF0aW87XG4gICAgICAgIHRoaXMuZG93blNhbXBsZVJhdGlvID0gcmF0aW87XG4gICAgfSxcbiAgICByZXNpemU6IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdGhpcy5fdGV4dHVyZS53aWR0aCA9IHdpZHRoICogdGhpcy5kb3duU2FtcGxlUmF0aW87XG4gICAgICAgIHRoaXMuX3RleHR1cmUuaGVpZ2h0ID0gaGVpZ2h0ICogdGhpcy5kb3duU2FtcGxlUmF0aW87XG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMuX3RleHR1cmUuZGlydHkoKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgcGlja2luZyBmcmFtZWJ1ZmZlclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByYXRpb1xuICAgICAqL1xuICAgIHVwZGF0ZTogZnVuY3Rpb24oc2NlbmUsIGNhbWVyYSkge1xuICAgICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyO1xuICAgICAgICBpZiAocmVuZGVyZXIuZ2V0V2lkdGgoKSAhPT0gdGhpcy53aWR0aCB8fCByZW5kZXJlci5nZXRIZWlnaHQoKSAhPT0gdGhpcy5oZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzaXplKHJlbmRlcmVyLndpZHRoLCByZW5kZXJlci5oZWlnaHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIuYXR0YWNoKHRoaXMuX3RleHR1cmUpO1xuICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci5iaW5kKHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5faWRPZmZzZXQgPSB0aGlzLmxvb2t1cE9mZnNldDtcbiAgICAgICAgdGhpcy5fc2V0TWF0ZXJpYWwoc2NlbmUpO1xuICAgICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XG4gICAgICAgIHRoaXMuX3Jlc3RvcmVNYXRlcmlhbCgpO1xuICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci51bmJpbmQocmVuZGVyZXIpO1xuICAgIH0sXG5cbiAgICBfc2V0TWF0ZXJpYWw6IGZ1bmN0aW9uKHJvb3QpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9MDsgaSA8IHJvb3QuX2NoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2hpbGQgPSByb290Ll9jaGlsZHJlbltpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC5nZW9tZXRyeSAmJiBjaGlsZC5tYXRlcmlhbCAmJiBjaGlsZC5tYXRlcmlhbC5zaGFkZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSB0aGlzLl9pZE9mZnNldCsrO1xuICAgICAgICAgICAgICAgIHZhciBpZHggPSBpZCAtIHRoaXMubG9va3VwT2Zmc2V0O1xuICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IHRoaXMuX2lkTWF0ZXJpYWxzW2lkeF07XG4gICAgICAgICAgICAgICAgaWYgKCFtYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkZXI6IHRoaXMuX3NoYWRlclxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gcGFja0lEKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgY29sb3JbMF0gLz0gMjU1O1xuICAgICAgICAgICAgICAgICAgICBjb2xvclsxXSAvPSAyNTU7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yWzJdIC89IDI1NTtcbiAgICAgICAgICAgICAgICAgICAgY29sb3JbM10gPSAxLjA7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldCgnY29sb3InLCBjb2xvcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lkTWF0ZXJpYWxzW2lkeF0gPSBtYXRlcmlhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fbWVzaE1hdGVyaWFsc1tpZHhdID0gY2hpbGQubWF0ZXJpYWw7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9va3VwVGFibGVbaWR4XSA9IGNoaWxkO1xuICAgICAgICAgICAgICAgIGNoaWxkLm1hdGVyaWFsID0gbWF0ZXJpYWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hpbGQuX2NoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldE1hdGVyaWFsKGNoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQaWNrIHRoZSBvYmplY3RcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHggTW91c2UgcG9zaXRpb24geFxuICAgICAqIEBwYXJhbSAge251bWJlcn0geSBNb3VzZSBwb3NpdGlvbiB5XG4gICAgICogQHJldHVybiB7Y2xheS5Ob2RlfVxuICAgICAqL1xuICAgIHBpY2s6IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgdmFyIHJlbmRlcmVyID0gdGhpcy5yZW5kZXJlcjtcblxuICAgICAgICB2YXIgcmF0aW8gPSB0aGlzLmRvd25TYW1wbGVSYXRpbztcbiAgICAgICAgeCA9IE1hdGguY2VpbChyYXRpbyAqIHgpO1xuICAgICAgICB5ID0gTWF0aC5jZWlsKHJhdGlvICogKHRoaXMuaGVpZ2h0IC0geSkpO1xuXG4gICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICB2YXIgcGl4ZWwgPSBuZXcgVWludDhBcnJheSg0KTtcbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuICAgICAgICAvLyBUT0RPIG91dCBvZiBib3VuZHMgP1xuICAgICAgICAvLyBwcmVzZXJ2ZURyYXdpbmdCdWZmZXIgP1xuICAgICAgICBfZ2wucmVhZFBpeGVscyh4LCB5LCAxLCAxLCBfZ2wuUkdCQSwgX2dsLlVOU0lHTkVEX0JZVEUsIHBpeGVsKTtcbiAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIudW5iaW5kKHJlbmRlcmVyKTtcbiAgICAgICAgLy8gU2tpcCBpbnRlcnBvbGF0ZWQgcGl4ZWwgYmVjYXVzZSBvZiBhbnRpIGFsaWFzXG4gICAgICAgIGlmIChwaXhlbFszXSA9PT0gMjU1KSB7XG4gICAgICAgICAgICB2YXIgaWQgPSB1bnBhY2tJRChwaXhlbFswXSwgcGl4ZWxbMV0sIHBpeGVsWzJdKTtcbiAgICAgICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgICAgIHZhciBlbCA9IHRoaXMuX2xvb2t1cFRhYmxlW2lkIC0gdGhpcy5sb29rdXBPZmZzZXRdO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfcmVzdG9yZU1hdGVyaWFsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9sb29rdXBUYWJsZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5fbG9va3VwVGFibGVbaV0ubWF0ZXJpYWwgPSB0aGlzLl9tZXNoTWF0ZXJpYWxzW2ldO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGRpc3Bvc2U6IGZ1bmN0aW9uKHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiBwYWNrSUQoaWQpe1xuICAgIHZhciByID0gaWQgPj4gMTY7XG4gICAgdmFyIGcgPSAoaWQgLSAociA8PCA4KSkgPj4gODtcbiAgICB2YXIgYiA9IGlkIC0gKHIgPDwgMTYpIC0gKGc8PDgpO1xuICAgIHJldHVybiBbciwgZywgYl07XG59XG5cbmZ1bmN0aW9uIHVucGFja0lEKHIsIGcsIGIpe1xuICAgIHJldHVybiAociA8PCAxNikgKyAoZzw8OCkgKyBiO1xufVxuXG5leHBvcnQgZGVmYXVsdCBQaXhlbFBpY2tpbmc7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3BpY2tpbmcvUGl4ZWxQaWNraW5nLmpzXG4vLyBtb2R1bGUgaWQgPSAxODNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///183\n");

/***/ }),
/* 184 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.picking.color.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nattribute vec3 position : POSITION;\\n@import clay.chunk.skinning_header\\nvoid main(){\\n vec3 skinnedPosition = position;\\n #ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n skinnedPosition = (skinMatrixWS * vec4(position, 1.0)).xyz;\\n #endif\\n gl_Position = worldViewProjection * vec4(skinnedPosition, 1.0);\\n}\\n@end\\n@end\\n@export clay.picking.color.fragment\\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\\nvoid main() {\\n gl_FragColor = color;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGlja2luZy9jb2xvci5nbHNsLmpzPzQ1ODgiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkucGlja2luZy5jb2xvci52ZXJ0ZXhcXG51bmlmb3JtIG1hdDQgd29ybGRWaWV3UHJvamVjdGlvbiA6IFdPUkxEVklFV1BST0pFQ1RJT047XFxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb24gOiBQT1NJVElPTjtcXG5AaW1wb3J0IGNsYXkuY2h1bmsuc2tpbm5pbmdfaGVhZGVyXFxudm9pZCBtYWluKCl7XFxuIHZlYzMgc2tpbm5lZFBvc2l0aW9uID0gcG9zaXRpb247XFxuICNpZmRlZiBTS0lOTklOR1xcbiBAaW1wb3J0IGNsYXkuY2h1bmsuc2tpbl9tYXRyaXhcXG4gc2tpbm5lZFBvc2l0aW9uID0gKHNraW5NYXRyaXhXUyAqIHZlYzQocG9zaXRpb24sIDEuMCkpLnh5ejtcXG4gI2VuZGlmXFxuIGdsX1Bvc2l0aW9uID0gd29ybGRWaWV3UHJvamVjdGlvbiAqIHZlYzQoc2tpbm5lZFBvc2l0aW9uLCAxLjApO1xcbn1cXG5AZW5kXFxuQGVuZFxcbkBleHBvcnQgY2xheS5waWNraW5nLmNvbG9yLmZyYWdtZW50XFxudW5pZm9ybSB2ZWM0IGNvbG9yIDogWzEuMCwgMS4wLCAxLjAsIDEuMF07XFxudm9pZCBtYWluKCkge1xcbiBnbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9waWNraW5nL2NvbG9yLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE4NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///184\n");

/***/ }),
/* 185 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_vendor__ = __webpack_require__(4);\n\n\n\n\nvar doc = typeof document === 'undefined' ? {} : document;\n\n/**\n * @constructor clay.plugin.FreeControl\n * @example\n *     var control = new clay.plugin.FreeControl({\n *         target: camera,\n *         domElement: renderer.canvas\n *     });\n *     ...\n *     timeline.on('frame', function(frameTime) {\n *         control.update(frameTime);\n *         renderer.render(scene, camera);\n *     });\n */\nvar FreeControl = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function() {\n    return /** @lends clay.plugin.FreeControl# */ {\n        /**\n         * Scene node to control, mostly it is a camera\n         * @type {clay.Node}\n         */\n        target: null,\n\n        /**\n         * Target dom to bind with mouse events\n         * @type {HTMLElement}\n         */\n        domElement: null,\n\n        /**\n         * Mouse move sensitivity\n         * @type {number}\n         */\n        sensitivity: 1,\n\n        /**\n         * Target move speed\n         * @type {number}\n         */\n        speed: 0.4,\n\n        /**\n         * Up axis\n         * @type {clay.Vector3}\n         */\n        up: new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */](0, 1, 0),\n\n        /**\n         * If lock vertical movement\n         * @type {boolean}\n         */\n        verticalMoveLock: false,\n\n        /**\n         * @type {clay.Timeline}\n         */\n        timeline: null,\n\n        _moveForward: false,\n        _moveBackward: false,\n        _moveLeft: false,\n        _moveRight: false,\n\n        _offsetPitch: 0,\n        _offsetRoll: 0\n    };\n}, function() {\n    this._lockChange = this._lockChange.bind(this);\n    this._keyDown = this._keyDown.bind(this);\n    this._keyUp = this._keyUp.bind(this);\n    this._mouseMove = this._mouseMove.bind(this);\n\n    if (this.domElement) {\n        this.init();\n    }\n},\n/** @lends clay.plugin.FreeControl.prototype */\n{\n    /**\n     * init control\n     */\n    init: function() {\n        // Use pointer lock\n        // http://www.html5rocks.com/en/tutorials/pointerlock/intro/\n        var el = this.domElement;\n\n        //Must request pointer lock after click event, can't not do it directly\n        //Why ? ?\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(el, 'click', this._requestPointerLock);\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(doc, 'pointerlockchange', this._lockChange);\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(doc, 'mozpointerlockchange', this._lockChange);\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(doc, 'webkitpointerlockchange', this._lockChange);\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(doc, 'keydown', this._keyDown);\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(doc, 'keyup', this._keyUp);\n\n        if (this.timeline) {\n            this.timeline.on('frame', this._detectMovementChange, this);\n        }\n    },\n\n    /**\n     * Dispose control\n     */\n    dispose: function() {\n\n        var el = this.domElement;\n\n        el.exitPointerLock = el.exitPointerLock\n            || el.mozExitPointerLock\n            || el.webkitExitPointerLock;\n\n        if (el.exitPointerLock) {\n            el.exitPointerLock();\n        }\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(el, 'click', this._requestPointerLock);\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(doc, 'pointerlockchange', this._lockChange);\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(doc, 'mozpointerlockchange', this._lockChange);\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(doc, 'webkitpointerlockchange', this._lockChange);\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(doc, 'keydown', this._keyDown);\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(doc, 'keyup', this._keyUp);\n\n        if (this.timeline) {\n            this.timeline.off('frame', this._detectMovementChange);\n        }\n    },\n\n    _requestPointerLock: function() {\n        var el = this;\n        el.requestPointerLock = el.requestPointerLock\n            || el.mozRequestPointerLock\n            || el.webkitRequestPointerLock;\n\n        el.requestPointerLock();\n    },\n\n    /**\n     * Control update. Should be invoked every frame\n     * @param {number} frameTime Frame time\n     */\n    update: function (frameTime) {\n        var target = this.target;\n\n        var position = this.target.position;\n        var xAxis = target.localTransform.x.normalize();\n        var zAxis = target.localTransform.z.normalize();\n\n        if (this.verticalMoveLock) {\n            zAxis.y = 0;\n            zAxis.normalize();\n        }\n\n        var speed = this.speed * frameTime / 20;\n\n        if (this._moveForward) {\n            // Opposite direction of z\n            position.scaleAndAdd(zAxis, -speed);\n        }\n        if (this._moveBackward) {\n            position.scaleAndAdd(zAxis, speed);\n        }\n        if (this._moveLeft) {\n            position.scaleAndAdd(xAxis, -speed / 2);\n        }\n        if (this._moveRight) {\n            position.scaleAndAdd(xAxis, speed / 2);\n        }\n\n        target.rotateAround(target.position, this.up, -this._offsetPitch * frameTime * Math.PI / 360);\n        var xAxis = target.localTransform.x;\n        target.rotateAround(target.position, xAxis, -this._offsetRoll * frameTime * Math.PI / 360);\n\n        this._offsetRoll = this._offsetPitch = 0;\n    },\n\n    _lockChange: function() {\n        if (\n            doc.pointerLockElement === this.domElement\n            || doc.mozPointerLockElement === this.domElement\n            || doc.webkitPointerLockElement === this.domElement\n        ) {\n            __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(doc, 'mousemove', this._mouseMove, false);\n        }\n        else {\n            __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(doc, 'mousemove', this._mouseMove);\n        }\n    },\n\n    _mouseMove: function(e) {\n        var dx = e.movementX || e.mozMovementX || e.webkitMovementX || 0;\n        var dy = e.movementY || e.mozMovementY || e.webkitMovementY || 0;\n\n        this._offsetPitch += dx * this.sensitivity / 200;\n        this._offsetRoll += dy * this.sensitivity / 200;\n\n        // Trigger change event to remind renderer do render\n        this.trigger('change');\n    },\n\n    _detectMovementChange: function (frameTime) {\n        if (this._moveForward || this._moveBackward || this._moveLeft || this._moveRight) {\n            this.trigger('change');\n        }\n        this.update(frameTime);\n    },\n\n    _keyDown: function(e) {\n        switch(e.keyCode) {\n            case 87: //w\n            case 37: //up arrow\n                this._moveForward = true;\n                break;\n            case 83: //s\n            case 40: //down arrow\n                this._moveBackward = true;\n                break;\n            case 65: //a\n            case 37: //left arrow\n                this._moveLeft = true;\n                break;\n            case 68: //d\n            case 39: //right arrow\n                this._moveRight = true;\n                break;\n        }\n        // Trigger change event to remind renderer do render\n        this.trigger('change');\n    },\n\n    _keyUp: function(e) {\n        switch(e.keyCode) {\n            case 87: //w\n            case 37: //up arrow\n                this._moveForward = false;\n                break;\n            case 83: //s\n            case 40: //down arrow\n                this._moveBackward = false;\n                break;\n            case 65: //a\n            case 37: //left arrow\n                this._moveLeft = false;\n                break;\n            case 68: //d\n            case 39: //right arrow\n                this._moveRight = false;\n                break;\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (FreeControl);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGx1Z2luL0ZyZWVDb250cm9sLmpzPzVkNDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi4vY29yZS9CYXNlJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4uL21hdGgvVmVjdG9yMyc7XG5pbXBvcnQgdmVuZG9yIGZyb20gJy4uL2NvcmUvdmVuZG9yJztcblxudmFyIGRvYyA9IHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcgPyB7fSA6IGRvY3VtZW50O1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LnBsdWdpbi5GcmVlQ29udHJvbFxuICogQGV4YW1wbGVcbiAqICAgICB2YXIgY29udHJvbCA9IG5ldyBjbGF5LnBsdWdpbi5GcmVlQ29udHJvbCh7XG4gKiAgICAgICAgIHRhcmdldDogY2FtZXJhLFxuICogICAgICAgICBkb21FbGVtZW50OiByZW5kZXJlci5jYW52YXNcbiAqICAgICB9KTtcbiAqICAgICAuLi5cbiAqICAgICB0aW1lbGluZS5vbignZnJhbWUnLCBmdW5jdGlvbihmcmFtZVRpbWUpIHtcbiAqICAgICAgICAgY29udHJvbC51cGRhdGUoZnJhbWVUaW1lKTtcbiAqICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICogICAgIH0pO1xuICovXG52YXIgRnJlZUNvbnRyb2wgPSBCYXNlLmV4dGVuZChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5LnBsdWdpbi5GcmVlQ29udHJvbCMgKi8ge1xuICAgICAgICAvKipcbiAgICAgICAgICogU2NlbmUgbm9kZSB0byBjb250cm9sLCBtb3N0bHkgaXQgaXMgYSBjYW1lcmFcbiAgICAgICAgICogQHR5cGUge2NsYXkuTm9kZX1cbiAgICAgICAgICovXG4gICAgICAgIHRhcmdldDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGFyZ2V0IGRvbSB0byBiaW5kIHdpdGggbW91c2UgZXZlbnRzXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIGRvbUVsZW1lbnQ6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1vdXNlIG1vdmUgc2Vuc2l0aXZpdHlcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHNlbnNpdGl2aXR5OiAxLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUYXJnZXQgbW92ZSBzcGVlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgc3BlZWQ6IDAuNCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVXAgYXhpc1xuICAgICAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAgICAgKi9cbiAgICAgICAgdXA6IG5ldyBWZWN0b3IzKDAsIDEsIDApLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBsb2NrIHZlcnRpY2FsIG1vdmVtZW50XG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdmVydGljYWxNb3ZlTG9jazogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlRpbWVsaW5lfVxuICAgICAgICAgKi9cbiAgICAgICAgdGltZWxpbmU6IG51bGwsXG5cbiAgICAgICAgX21vdmVGb3J3YXJkOiBmYWxzZSxcbiAgICAgICAgX21vdmVCYWNrd2FyZDogZmFsc2UsXG4gICAgICAgIF9tb3ZlTGVmdDogZmFsc2UsXG4gICAgICAgIF9tb3ZlUmlnaHQ6IGZhbHNlLFxuXG4gICAgICAgIF9vZmZzZXRQaXRjaDogMCxcbiAgICAgICAgX29mZnNldFJvbGw6IDBcbiAgICB9O1xufSwgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fbG9ja0NoYW5nZSA9IHRoaXMuX2xvY2tDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9rZXlEb3duID0gdGhpcy5fa2V5RG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2tleVVwID0gdGhpcy5fa2V5VXAuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9tb3VzZU1vdmUgPSB0aGlzLl9tb3VzZU1vdmUuYmluZCh0aGlzKTtcblxuICAgIGlmICh0aGlzLmRvbUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxufSxcbi8qKiBAbGVuZHMgY2xheS5wbHVnaW4uRnJlZUNvbnRyb2wucHJvdG90eXBlICovXG57XG4gICAgLyoqXG4gICAgICogaW5pdCBjb250cm9sXG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFVzZSBwb2ludGVyIGxvY2tcbiAgICAgICAgLy8gaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvcG9pbnRlcmxvY2svaW50cm8vXG4gICAgICAgIHZhciBlbCA9IHRoaXMuZG9tRWxlbWVudDtcblxuICAgICAgICAvL011c3QgcmVxdWVzdCBwb2ludGVyIGxvY2sgYWZ0ZXIgY2xpY2sgZXZlbnQsIGNhbid0IG5vdCBkbyBpdCBkaXJlY3RseVxuICAgICAgICAvL1doeSA/ID9cbiAgICAgICAgdmVuZG9yLmFkZEV2ZW50TGlzdGVuZXIoZWwsICdjbGljaycsIHRoaXMuX3JlcXVlc3RQb2ludGVyTG9jayk7XG5cbiAgICAgICAgdmVuZG9yLmFkZEV2ZW50TGlzdGVuZXIoZG9jLCAncG9pbnRlcmxvY2tjaGFuZ2UnLCB0aGlzLl9sb2NrQ2hhbmdlKTtcbiAgICAgICAgdmVuZG9yLmFkZEV2ZW50TGlzdGVuZXIoZG9jLCAnbW96cG9pbnRlcmxvY2tjaGFuZ2UnLCB0aGlzLl9sb2NrQ2hhbmdlKTtcbiAgICAgICAgdmVuZG9yLmFkZEV2ZW50TGlzdGVuZXIoZG9jLCAnd2Via2l0cG9pbnRlcmxvY2tjaGFuZ2UnLCB0aGlzLl9sb2NrQ2hhbmdlKTtcblxuICAgICAgICB2ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lcihkb2MsICdrZXlkb3duJywgdGhpcy5fa2V5RG93bik7XG4gICAgICAgIHZlbmRvci5hZGRFdmVudExpc3RlbmVyKGRvYywgJ2tleXVwJywgdGhpcy5fa2V5VXApO1xuXG4gICAgICAgIGlmICh0aGlzLnRpbWVsaW5lKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVsaW5lLm9uKCdmcmFtZScsIHRoaXMuX2RldGVjdE1vdmVtZW50Q2hhbmdlLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIGNvbnRyb2xcbiAgICAgKi9cbiAgICBkaXNwb3NlOiBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgZWwgPSB0aGlzLmRvbUVsZW1lbnQ7XG5cbiAgICAgICAgZWwuZXhpdFBvaW50ZXJMb2NrID0gZWwuZXhpdFBvaW50ZXJMb2NrXG4gICAgICAgICAgICB8fCBlbC5tb3pFeGl0UG9pbnRlckxvY2tcbiAgICAgICAgICAgIHx8IGVsLndlYmtpdEV4aXRQb2ludGVyTG9jaztcblxuICAgICAgICBpZiAoZWwuZXhpdFBvaW50ZXJMb2NrKSB7XG4gICAgICAgICAgICBlbC5leGl0UG9pbnRlckxvY2soKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGVsLCAnY2xpY2snLCB0aGlzLl9yZXF1ZXN0UG9pbnRlckxvY2spO1xuXG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvYywgJ3BvaW50ZXJsb2NrY2hhbmdlJywgdGhpcy5fbG9ja0NoYW5nZSk7XG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvYywgJ21venBvaW50ZXJsb2NrY2hhbmdlJywgdGhpcy5fbG9ja0NoYW5nZSk7XG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvYywgJ3dlYmtpdHBvaW50ZXJsb2NrY2hhbmdlJywgdGhpcy5fbG9ja0NoYW5nZSk7XG5cbiAgICAgICAgdmVuZG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9jLCAna2V5ZG93bicsIHRoaXMuX2tleURvd24pO1xuICAgICAgICB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb2MsICdrZXl1cCcsIHRoaXMuX2tleVVwKTtcblxuICAgICAgICBpZiAodGhpcy50aW1lbGluZSkge1xuICAgICAgICAgICAgdGhpcy50aW1lbGluZS5vZmYoJ2ZyYW1lJywgdGhpcy5fZGV0ZWN0TW92ZW1lbnRDaGFuZ2UpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9yZXF1ZXN0UG9pbnRlckxvY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzO1xuICAgICAgICBlbC5yZXF1ZXN0UG9pbnRlckxvY2sgPSBlbC5yZXF1ZXN0UG9pbnRlckxvY2tcbiAgICAgICAgICAgIHx8IGVsLm1velJlcXVlc3RQb2ludGVyTG9ja1xuICAgICAgICAgICAgfHwgZWwud2Via2l0UmVxdWVzdFBvaW50ZXJMb2NrO1xuXG4gICAgICAgIGVsLnJlcXVlc3RQb2ludGVyTG9jaygpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDb250cm9sIHVwZGF0ZS4gU2hvdWxkIGJlIGludm9rZWQgZXZlcnkgZnJhbWVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZnJhbWVUaW1lIEZyYW1lIHRpbWVcbiAgICAgKi9cbiAgICB1cGRhdGU6IGZ1bmN0aW9uIChmcmFtZVRpbWUpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuXG4gICAgICAgIHZhciBwb3NpdGlvbiA9IHRoaXMudGFyZ2V0LnBvc2l0aW9uO1xuICAgICAgICB2YXIgeEF4aXMgPSB0YXJnZXQubG9jYWxUcmFuc2Zvcm0ueC5ub3JtYWxpemUoKTtcbiAgICAgICAgdmFyIHpBeGlzID0gdGFyZ2V0LmxvY2FsVHJhbnNmb3JtLnoubm9ybWFsaXplKCk7XG5cbiAgICAgICAgaWYgKHRoaXMudmVydGljYWxNb3ZlTG9jaykge1xuICAgICAgICAgICAgekF4aXMueSA9IDA7XG4gICAgICAgICAgICB6QXhpcy5ub3JtYWxpemUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzcGVlZCA9IHRoaXMuc3BlZWQgKiBmcmFtZVRpbWUgLyAyMDtcblxuICAgICAgICBpZiAodGhpcy5fbW92ZUZvcndhcmQpIHtcbiAgICAgICAgICAgIC8vIE9wcG9zaXRlIGRpcmVjdGlvbiBvZiB6XG4gICAgICAgICAgICBwb3NpdGlvbi5zY2FsZUFuZEFkZCh6QXhpcywgLXNwZWVkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fbW92ZUJhY2t3YXJkKSB7XG4gICAgICAgICAgICBwb3NpdGlvbi5zY2FsZUFuZEFkZCh6QXhpcywgc3BlZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9tb3ZlTGVmdCkge1xuICAgICAgICAgICAgcG9zaXRpb24uc2NhbGVBbmRBZGQoeEF4aXMsIC1zcGVlZCAvIDIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9tb3ZlUmlnaHQpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uLnNjYWxlQW5kQWRkKHhBeGlzLCBzcGVlZCAvIDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFyZ2V0LnJvdGF0ZUFyb3VuZCh0YXJnZXQucG9zaXRpb24sIHRoaXMudXAsIC10aGlzLl9vZmZzZXRQaXRjaCAqIGZyYW1lVGltZSAqIE1hdGguUEkgLyAzNjApO1xuICAgICAgICB2YXIgeEF4aXMgPSB0YXJnZXQubG9jYWxUcmFuc2Zvcm0ueDtcbiAgICAgICAgdGFyZ2V0LnJvdGF0ZUFyb3VuZCh0YXJnZXQucG9zaXRpb24sIHhBeGlzLCAtdGhpcy5fb2Zmc2V0Um9sbCAqIGZyYW1lVGltZSAqIE1hdGguUEkgLyAzNjApO1xuXG4gICAgICAgIHRoaXMuX29mZnNldFJvbGwgPSB0aGlzLl9vZmZzZXRQaXRjaCA9IDA7XG4gICAgfSxcblxuICAgIF9sb2NrQ2hhbmdlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZG9jLnBvaW50ZXJMb2NrRWxlbWVudCA9PT0gdGhpcy5kb21FbGVtZW50XG4gICAgICAgICAgICB8fCBkb2MubW96UG9pbnRlckxvY2tFbGVtZW50ID09PSB0aGlzLmRvbUVsZW1lbnRcbiAgICAgICAgICAgIHx8IGRvYy53ZWJraXRQb2ludGVyTG9ja0VsZW1lbnQgPT09IHRoaXMuZG9tRWxlbWVudFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHZlbmRvci5hZGRFdmVudExpc3RlbmVyKGRvYywgJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmVuZG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9jLCAnbW91c2Vtb3ZlJywgdGhpcy5fbW91c2VNb3ZlKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfbW91c2VNb3ZlOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciBkeCA9IGUubW92ZW1lbnRYIHx8IGUubW96TW92ZW1lbnRYIHx8IGUud2Via2l0TW92ZW1lbnRYIHx8IDA7XG4gICAgICAgIHZhciBkeSA9IGUubW92ZW1lbnRZIHx8IGUubW96TW92ZW1lbnRZIHx8IGUud2Via2l0TW92ZW1lbnRZIHx8IDA7XG5cbiAgICAgICAgdGhpcy5fb2Zmc2V0UGl0Y2ggKz0gZHggKiB0aGlzLnNlbnNpdGl2aXR5IC8gMjAwO1xuICAgICAgICB0aGlzLl9vZmZzZXRSb2xsICs9IGR5ICogdGhpcy5zZW5zaXRpdml0eSAvIDIwMDtcblxuICAgICAgICAvLyBUcmlnZ2VyIGNoYW5nZSBldmVudCB0byByZW1pbmQgcmVuZGVyZXIgZG8gcmVuZGVyXG4gICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgfSxcblxuICAgIF9kZXRlY3RNb3ZlbWVudENoYW5nZTogZnVuY3Rpb24gKGZyYW1lVGltZSkge1xuICAgICAgICBpZiAodGhpcy5fbW92ZUZvcndhcmQgfHwgdGhpcy5fbW92ZUJhY2t3YXJkIHx8IHRoaXMuX21vdmVMZWZ0IHx8IHRoaXMuX21vdmVSaWdodCkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZShmcmFtZVRpbWUpO1xuICAgIH0sXG5cbiAgICBfa2V5RG93bjogZnVuY3Rpb24oZSkge1xuICAgICAgICBzd2l0Y2goZS5rZXlDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIDg3OiAvL3dcbiAgICAgICAgICAgIGNhc2UgMzc6IC8vdXAgYXJyb3dcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlRm9yd2FyZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDgzOiAvL3NcbiAgICAgICAgICAgIGNhc2UgNDA6IC8vZG93biBhcnJvd1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmVCYWNrd2FyZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDY1OiAvL2FcbiAgICAgICAgICAgIGNhc2UgMzc6IC8vbGVmdCBhcnJvd1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmVMZWZ0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNjg6IC8vZFxuICAgICAgICAgICAgY2FzZSAzOTogLy9yaWdodCBhcnJvd1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmVSaWdodCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVHJpZ2dlciBjaGFuZ2UgZXZlbnQgdG8gcmVtaW5kIHJlbmRlcmVyIGRvIHJlbmRlclxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgIH0sXG5cbiAgICBfa2V5VXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgc3dpdGNoKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgY2FzZSA4NzogLy93XG4gICAgICAgICAgICBjYXNlIDM3OiAvL3VwIGFycm93XG4gICAgICAgICAgICAgICAgdGhpcy5fbW92ZUZvcndhcmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgODM6IC8vc1xuICAgICAgICAgICAgY2FzZSA0MDogLy9kb3duIGFycm93XG4gICAgICAgICAgICAgICAgdGhpcy5fbW92ZUJhY2t3YXJkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDY1OiAvL2FcbiAgICAgICAgICAgIGNhc2UgMzc6IC8vbGVmdCBhcnJvd1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmVMZWZ0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDY4OiAvL2RcbiAgICAgICAgICAgIGNhc2UgMzk6IC8vcmlnaHQgYXJyb3dcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBGcmVlQ29udHJvbDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGx1Z2luL0ZyZWVDb250cm9sLmpzXG4vLyBtb2R1bGUgaWQgPSAxODVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///185\n");

/***/ }),
/* 186 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_vendor__ = __webpack_require__(4);\n\n\n\n\n/**\n * Gamepad Control plugin.\n *\n * @constructor clay.plugin.GamepadControl\n *\n * @example\n *   init: function(app) {\n *     this._gamepadControl = new clay.plugin.GamepadControl({\n *         target: camera,\n *         onStandardGamepadReady: customCallback\n *     });\n *   },\n *\n *   loop: function(app) {\n *     this._gamepadControl.update(app.frameTime);\n *   }\n */\nvar GamepadControl = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function() {\n\n    return /** @lends clay.plugin.GamepadControl# */ {\n\n        /**\n         * Scene node to control, mostly it is a camera.\n         *\n         * @type {clay.Node}\n         */\n        target: null,\n\n        /**\n         * Move speed.\n         *\n         * @type {number}\n         */\n        moveSpeed: 0.1,\n\n        /**\n         * Look around speed.\n         *\n         * @type {number}\n         */\n        lookAroundSpeed: 0.1,\n\n        /**\n         * Up axis.\n         *\n         * @type {clay.Vector3}\n         */\n        up: new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */](0, 1, 0),\n\n        /**\n         * Timeline.\n         *\n         * @type {clay.Timeline}\n         */\n        timeline: null,\n\n        /**\n         * Function to be called when a standard gamepad is ready to use.\n         *\n         * @type {function}\n         */\n        onStandardGamepadReady: function(gamepad){},\n\n        /**\n         * Function to be called when a gamepad is disconnected.\n         *\n         * @type {function}\n         */\n        onGamepadDisconnected: function(gamepad){},\n\n        // Private properties:\n\n        _moveForward: false,\n        _moveBackward: false,\n        _moveLeft: false,\n        _moveRight: false,\n\n        _offsetPitch: 0,\n        _offsetRoll: 0,\n\n        _connectedGamepadIndex: 0,\n        _standardGamepadAvailable: false,\n        _gamepadAxisThreshold: 0.3\n\n    };\n\n}, function() {\n\n    this._checkGamepadCompatibility = this._checkGamepadCompatibility.bind(this);\n    this._disconnectGamepad = this._disconnectGamepad.bind(this);\n    this._getStandardGamepad = this._getStandardGamepad.bind(this);\n    this._scanPressedGamepadButtons = this._scanPressedGamepadButtons.bind(this);\n    this._scanInclinedGamepadAxes = this._scanInclinedGamepadAxes.bind(this);\n\n    this.update = this.update.bind(this);\n\n    // If browser supports Gamepad API:\n    if (typeof navigator.getGamepads === 'function') {\n        this.init();\n    }\n\n},\n/** @lends clay.plugin.GamepadControl.prototype */\n{\n    /**\n     * Init. control.\n     */\n    init: function() {\n\n        /**\n         * When user begins to interact with connected gamepad:\n         *\n         * @see https://w3c.github.io/gamepad/#dom-gamepadevent\n         */\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(window, 'gamepadconnected', this._checkGamepadCompatibility);\n\n        if (this.timeline) {\n            this.timeline.on('frame', this.update);\n        }\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(window, 'gamepaddisconnected', this._disconnectGamepad);\n\n    },\n\n    /**\n     * Dispose control.\n     */\n    dispose: function() {\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(window, 'gamepadconnected', this._checkGamepadCompatibility);\n\n        if (this.timeline) {\n            this.timeline.off('frame', this.update);\n        }\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(window, 'gamepaddisconnected', this._disconnectGamepad);\n\n    },\n\n    /**\n     * Control's update. Should be invoked every frame.\n     *\n     * @param {number} frameTime Frame time.\n     */\n    update: function (frameTime) {\n\n        if (!this._standardGamepadAvailable) {\n            return;\n        }\n\n        this._scanPressedGamepadButtons();\n        this._scanInclinedGamepadAxes();\n\n        // Update target depending on user input.\n\n        var target = this.target;\n\n        var position = this.target.position;\n        var xAxis = target.localTransform.x.normalize();\n        var zAxis = target.localTransform.z.normalize();\n\n        var moveSpeed = this.moveSpeed * frameTime / 20;\n\n        if (this._moveForward) {\n            // Opposite direction of z.\n            position.scaleAndAdd(zAxis, -moveSpeed);\n        }\n        if (this._moveBackward) {\n            position.scaleAndAdd(zAxis, moveSpeed);\n        }\n        if (this._moveLeft) {\n            position.scaleAndAdd(xAxis, -moveSpeed);\n        }\n        if (this._moveRight) {\n            position.scaleAndAdd(xAxis, moveSpeed);\n        }\n\n        target.rotateAround(target.position, this.up, -this._offsetPitch * frameTime * Math.PI / 360);\n        var xAxis = target.localTransform.x;\n        target.rotateAround(target.position, xAxis, -this._offsetRoll * frameTime * Math.PI / 360);\n\n        /*\n         * If necessary: trigger `update` event.\n         * XXX This can economize rendering OPs.\n         */\n        if (this._moveForward === true || this._moveBackward === true || this._moveLeft === true\n            || this._moveRight === true || this._offsetPitch !== 0 || this._offsetRoll !== 0)\n        {\n            this.trigger('update');\n        }\n\n        // Reset values to avoid lost of control.\n\n        this._moveForward = this._moveBackward = this._moveLeft = this._moveRight = false;\n        this._offsetPitch = this._offsetRoll = 0;\n\n    },\n\n    // Private methods:\n\n    _checkGamepadCompatibility: function(event) {\n\n        /**\n         * If connected gamepad has a **standard** layout:\n         *\n         * @see https://w3c.github.io/gamepad/#remapping about standard.\n         */\n        if (event.gamepad.mapping === 'standard') {\n\n            this._standardGamepadIndex = event.gamepad.index;\n            this._standardGamepadAvailable = true;\n\n            this.onStandardGamepadReady(event.gamepad);\n\n        }\n\n    },\n\n    _disconnectGamepad: function(event) {\n\n        this._standardGamepadAvailable = false;\n\n        this.onGamepadDisconnected(event.gamepad);\n\n    },\n\n    _getStandardGamepad: function() {\n\n        return navigator.getGamepads()[this._standardGamepadIndex];\n\n    },\n\n    _scanPressedGamepadButtons: function() {\n\n        var gamepadButtons = this._getStandardGamepad().buttons;\n\n        // For each gamepad button:\n        for (var gamepadButtonId = 0; gamepadButtonId < gamepadButtons.length; gamepadButtonId++) {\n\n            // Get user input.\n            var gamepadButton = gamepadButtons[gamepadButtonId];\n\n            if (gamepadButton.pressed) {\n\n                switch (gamepadButtonId) {\n\n                    // D-pad Up\n                    case 12:\n                        this._moveForward = true;\n                        break;\n\n                    // D-pad Down\n                    case 13:\n                        this._moveBackward = true;\n                        break;\n\n                    // D-pad Left\n                    case 14:\n                        this._moveLeft = true;\n                        break;\n\n                    // D-pad Right\n                    case 15:\n                        this._moveRight = true;\n                        break;\n\n                }\n\n            }\n\n        }\n\n    },\n\n    _scanInclinedGamepadAxes: function() {\n\n        var gamepadAxes = this._getStandardGamepad().axes;\n\n        // For each gamepad axis:\n        for (var gamepadAxisId = 0; gamepadAxisId < gamepadAxes.length; gamepadAxisId++) {\n\n            // Get user input.\n            var gamepadAxis = gamepadAxes[gamepadAxisId];\n\n            // XXX We use a threshold because axes are never neutral.\n            if (Math.abs(gamepadAxis) > this._gamepadAxisThreshold) {\n\n                switch (gamepadAxisId) {\n\n                    // Left stick X\n                    case 0:\n                        this._moveLeft = gamepadAxis < 0;\n                        this._moveRight = gamepadAxis > 0;\n                        break;\n\n                    // Left stick Y\n                    case 1:\n                        this._moveForward = gamepadAxis < 0;\n                        this._moveBackward = gamepadAxis > 0;\n                        break;\n\n                    // Right stick X\n                    case 2:\n                        this._offsetPitch += gamepadAxis * this.lookAroundSpeed;\n                        break;\n\n                    // Right stick Y\n                    case 3:\n                        this._offsetRoll += gamepadAxis * this.lookAroundSpeed;\n                        break;\n\n                }\n\n            }\n\n        }\n\n    }\n\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GamepadControl);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGx1Z2luL0dhbWVwYWRDb250cm9sLmpzP2ViMDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi4vY29yZS9CYXNlJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4uL21hdGgvVmVjdG9yMyc7XG5pbXBvcnQgdmVuZG9yIGZyb20gJy4uL2NvcmUvdmVuZG9yJztcblxuLyoqXG4gKiBHYW1lcGFkIENvbnRyb2wgcGx1Z2luLlxuICpcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LnBsdWdpbi5HYW1lcGFkQ29udHJvbFxuICpcbiAqIEBleGFtcGxlXG4gKiAgIGluaXQ6IGZ1bmN0aW9uKGFwcCkge1xuICogICAgIHRoaXMuX2dhbWVwYWRDb250cm9sID0gbmV3IGNsYXkucGx1Z2luLkdhbWVwYWRDb250cm9sKHtcbiAqICAgICAgICAgdGFyZ2V0OiBjYW1lcmEsXG4gKiAgICAgICAgIG9uU3RhbmRhcmRHYW1lcGFkUmVhZHk6IGN1c3RvbUNhbGxiYWNrXG4gKiAgICAgfSk7XG4gKiAgIH0sXG4gKlxuICogICBsb29wOiBmdW5jdGlvbihhcHApIHtcbiAqICAgICB0aGlzLl9nYW1lcGFkQ29udHJvbC51cGRhdGUoYXBwLmZyYW1lVGltZSk7XG4gKiAgIH1cbiAqL1xudmFyIEdhbWVwYWRDb250cm9sID0gQmFzZS5leHRlbmQoZnVuY3Rpb24oKSB7XG5cbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5LnBsdWdpbi5HYW1lcGFkQ29udHJvbCMgKi8ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTY2VuZSBub2RlIHRvIGNvbnRyb2wsIG1vc3RseSBpdCBpcyBhIGNhbWVyYS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2NsYXkuTm9kZX1cbiAgICAgICAgICovXG4gICAgICAgIHRhcmdldDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogTW92ZSBzcGVlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIG1vdmVTcGVlZDogMC4xLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb29rIGFyb3VuZCBzcGVlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIGxvb2tBcm91bmRTcGVlZDogMC4xLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcCBheGlzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAgICAgKi9cbiAgICAgICAgdXA6IG5ldyBWZWN0b3IzKDAsIDEsIDApLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaW1lbGluZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2NsYXkuVGltZWxpbmV9XG4gICAgICAgICAqL1xuICAgICAgICB0aW1lbGluZTogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gYSBzdGFuZGFyZCBnYW1lcGFkIGlzIHJlYWR5IHRvIHVzZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgb25TdGFuZGFyZEdhbWVwYWRSZWFkeTogZnVuY3Rpb24oZ2FtZXBhZCl7fSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gYSBnYW1lcGFkIGlzIGRpc2Nvbm5lY3RlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgb25HYW1lcGFkRGlzY29ubmVjdGVkOiBmdW5jdGlvbihnYW1lcGFkKXt9LFxuXG4gICAgICAgIC8vIFByaXZhdGUgcHJvcGVydGllczpcblxuICAgICAgICBfbW92ZUZvcndhcmQ6IGZhbHNlLFxuICAgICAgICBfbW92ZUJhY2t3YXJkOiBmYWxzZSxcbiAgICAgICAgX21vdmVMZWZ0OiBmYWxzZSxcbiAgICAgICAgX21vdmVSaWdodDogZmFsc2UsXG5cbiAgICAgICAgX29mZnNldFBpdGNoOiAwLFxuICAgICAgICBfb2Zmc2V0Um9sbDogMCxcblxuICAgICAgICBfY29ubmVjdGVkR2FtZXBhZEluZGV4OiAwLFxuICAgICAgICBfc3RhbmRhcmRHYW1lcGFkQXZhaWxhYmxlOiBmYWxzZSxcbiAgICAgICAgX2dhbWVwYWRBeGlzVGhyZXNob2xkOiAwLjNcblxuICAgIH07XG5cbn0sIGZ1bmN0aW9uKCkge1xuXG4gICAgdGhpcy5fY2hlY2tHYW1lcGFkQ29tcGF0aWJpbGl0eSA9IHRoaXMuX2NoZWNrR2FtZXBhZENvbXBhdGliaWxpdHkuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9kaXNjb25uZWN0R2FtZXBhZCA9IHRoaXMuX2Rpc2Nvbm5lY3RHYW1lcGFkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fZ2V0U3RhbmRhcmRHYW1lcGFkID0gdGhpcy5fZ2V0U3RhbmRhcmRHYW1lcGFkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fc2NhblByZXNzZWRHYW1lcGFkQnV0dG9ucyA9IHRoaXMuX3NjYW5QcmVzc2VkR2FtZXBhZEJ1dHRvbnMuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9zY2FuSW5jbGluZWRHYW1lcGFkQXhlcyA9IHRoaXMuX3NjYW5JbmNsaW5lZEdhbWVwYWRBeGVzLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLnVwZGF0ZSA9IHRoaXMudXBkYXRlLmJpbmQodGhpcyk7XG5cbiAgICAvLyBJZiBicm93c2VyIHN1cHBvcnRzIEdhbWVwYWQgQVBJOlxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yLmdldEdhbWVwYWRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxufSxcbi8qKiBAbGVuZHMgY2xheS5wbHVnaW4uR2FtZXBhZENvbnRyb2wucHJvdG90eXBlICovXG57XG4gICAgLyoqXG4gICAgICogSW5pdC4gY29udHJvbC5cbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiB1c2VyIGJlZ2lucyB0byBpbnRlcmFjdCB3aXRoIGNvbm5lY3RlZCBnYW1lcGFkOlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9nYW1lcGFkLyNkb20tZ2FtZXBhZGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICB2ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3csICdnYW1lcGFkY29ubmVjdGVkJywgdGhpcy5fY2hlY2tHYW1lcGFkQ29tcGF0aWJpbGl0eSk7XG5cbiAgICAgICAgaWYgKHRoaXMudGltZWxpbmUpIHtcbiAgICAgICAgICAgIHRoaXMudGltZWxpbmUub24oJ2ZyYW1lJywgdGhpcy51cGRhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmVuZG9yLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAnZ2FtZXBhZGRpc2Nvbm5lY3RlZCcsIHRoaXMuX2Rpc2Nvbm5lY3RHYW1lcGFkKTtcblxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIGNvbnRyb2wuXG4gICAgICovXG4gICAgZGlzcG9zZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmVuZG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIod2luZG93LCAnZ2FtZXBhZGNvbm5lY3RlZCcsIHRoaXMuX2NoZWNrR2FtZXBhZENvbXBhdGliaWxpdHkpO1xuXG4gICAgICAgIGlmICh0aGlzLnRpbWVsaW5lKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVsaW5lLm9mZignZnJhbWUnLCB0aGlzLnVwZGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcih3aW5kb3csICdnYW1lcGFkZGlzY29ubmVjdGVkJywgdGhpcy5fZGlzY29ubmVjdEdhbWVwYWQpO1xuXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENvbnRyb2wncyB1cGRhdGUuIFNob3VsZCBiZSBpbnZva2VkIGV2ZXJ5IGZyYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGZyYW1lVGltZSBGcmFtZSB0aW1lLlxuICAgICAqL1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gKGZyYW1lVGltZSkge1xuXG4gICAgICAgIGlmICghdGhpcy5fc3RhbmRhcmRHYW1lcGFkQXZhaWxhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zY2FuUHJlc3NlZEdhbWVwYWRCdXR0b25zKCk7XG4gICAgICAgIHRoaXMuX3NjYW5JbmNsaW5lZEdhbWVwYWRBeGVzKCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHRhcmdldCBkZXBlbmRpbmcgb24gdXNlciBpbnB1dC5cblxuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy50YXJnZXQ7XG5cbiAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy50YXJnZXQucG9zaXRpb247XG4gICAgICAgIHZhciB4QXhpcyA9IHRhcmdldC5sb2NhbFRyYW5zZm9ybS54Lm5vcm1hbGl6ZSgpO1xuICAgICAgICB2YXIgekF4aXMgPSB0YXJnZXQubG9jYWxUcmFuc2Zvcm0uei5ub3JtYWxpemUoKTtcblxuICAgICAgICB2YXIgbW92ZVNwZWVkID0gdGhpcy5tb3ZlU3BlZWQgKiBmcmFtZVRpbWUgLyAyMDtcblxuICAgICAgICBpZiAodGhpcy5fbW92ZUZvcndhcmQpIHtcbiAgICAgICAgICAgIC8vIE9wcG9zaXRlIGRpcmVjdGlvbiBvZiB6LlxuICAgICAgICAgICAgcG9zaXRpb24uc2NhbGVBbmRBZGQoekF4aXMsIC1tb3ZlU3BlZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9tb3ZlQmFja3dhcmQpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uLnNjYWxlQW5kQWRkKHpBeGlzLCBtb3ZlU3BlZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9tb3ZlTGVmdCkge1xuICAgICAgICAgICAgcG9zaXRpb24uc2NhbGVBbmRBZGQoeEF4aXMsIC1tb3ZlU3BlZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9tb3ZlUmlnaHQpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uLnNjYWxlQW5kQWRkKHhBeGlzLCBtb3ZlU3BlZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFyZ2V0LnJvdGF0ZUFyb3VuZCh0YXJnZXQucG9zaXRpb24sIHRoaXMudXAsIC10aGlzLl9vZmZzZXRQaXRjaCAqIGZyYW1lVGltZSAqIE1hdGguUEkgLyAzNjApO1xuICAgICAgICB2YXIgeEF4aXMgPSB0YXJnZXQubG9jYWxUcmFuc2Zvcm0ueDtcbiAgICAgICAgdGFyZ2V0LnJvdGF0ZUFyb3VuZCh0YXJnZXQucG9zaXRpb24sIHhBeGlzLCAtdGhpcy5fb2Zmc2V0Um9sbCAqIGZyYW1lVGltZSAqIE1hdGguUEkgLyAzNjApO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIElmIG5lY2Vzc2FyeTogdHJpZ2dlciBgdXBkYXRlYCBldmVudC5cbiAgICAgICAgICogWFhYIFRoaXMgY2FuIGVjb25vbWl6ZSByZW5kZXJpbmcgT1BzLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHRoaXMuX21vdmVGb3J3YXJkID09PSB0cnVlIHx8IHRoaXMuX21vdmVCYWNrd2FyZCA9PT0gdHJ1ZSB8fCB0aGlzLl9tb3ZlTGVmdCA9PT0gdHJ1ZVxuICAgICAgICAgICAgfHwgdGhpcy5fbW92ZVJpZ2h0ID09PSB0cnVlIHx8IHRoaXMuX29mZnNldFBpdGNoICE9PSAwIHx8IHRoaXMuX29mZnNldFJvbGwgIT09IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcigndXBkYXRlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXNldCB2YWx1ZXMgdG8gYXZvaWQgbG9zdCBvZiBjb250cm9sLlxuXG4gICAgICAgIHRoaXMuX21vdmVGb3J3YXJkID0gdGhpcy5fbW92ZUJhY2t3YXJkID0gdGhpcy5fbW92ZUxlZnQgPSB0aGlzLl9tb3ZlUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fb2Zmc2V0UGl0Y2ggPSB0aGlzLl9vZmZzZXRSb2xsID0gMDtcblxuICAgIH0sXG5cbiAgICAvLyBQcml2YXRlIG1ldGhvZHM6XG5cbiAgICBfY2hlY2tHYW1lcGFkQ29tcGF0aWJpbGl0eTogZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgY29ubmVjdGVkIGdhbWVwYWQgaGFzIGEgKipzdGFuZGFyZCoqIGxheW91dDpcbiAgICAgICAgICpcbiAgICAgICAgICogQHNlZSBodHRwczovL3czYy5naXRodWIuaW8vZ2FtZXBhZC8jcmVtYXBwaW5nIGFib3V0IHN0YW5kYXJkLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKGV2ZW50LmdhbWVwYWQubWFwcGluZyA9PT0gJ3N0YW5kYXJkJykge1xuXG4gICAgICAgICAgICB0aGlzLl9zdGFuZGFyZEdhbWVwYWRJbmRleCA9IGV2ZW50LmdhbWVwYWQuaW5kZXg7XG4gICAgICAgICAgICB0aGlzLl9zdGFuZGFyZEdhbWVwYWRBdmFpbGFibGUgPSB0cnVlO1xuXG4gICAgICAgICAgICB0aGlzLm9uU3RhbmRhcmRHYW1lcGFkUmVhZHkoZXZlbnQuZ2FtZXBhZCk7XG5cbiAgICAgICAgfVxuXG4gICAgfSxcblxuICAgIF9kaXNjb25uZWN0R2FtZXBhZDogZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICB0aGlzLl9zdGFuZGFyZEdhbWVwYWRBdmFpbGFibGUgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLm9uR2FtZXBhZERpc2Nvbm5lY3RlZChldmVudC5nYW1lcGFkKTtcblxuICAgIH0sXG5cbiAgICBfZ2V0U3RhbmRhcmRHYW1lcGFkOiBmdW5jdGlvbigpIHtcblxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLmdldEdhbWVwYWRzKClbdGhpcy5fc3RhbmRhcmRHYW1lcGFkSW5kZXhdO1xuXG4gICAgfSxcblxuICAgIF9zY2FuUHJlc3NlZEdhbWVwYWRCdXR0b25zOiBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgZ2FtZXBhZEJ1dHRvbnMgPSB0aGlzLl9nZXRTdGFuZGFyZEdhbWVwYWQoKS5idXR0b25zO1xuXG4gICAgICAgIC8vIEZvciBlYWNoIGdhbWVwYWQgYnV0dG9uOlxuICAgICAgICBmb3IgKHZhciBnYW1lcGFkQnV0dG9uSWQgPSAwOyBnYW1lcGFkQnV0dG9uSWQgPCBnYW1lcGFkQnV0dG9ucy5sZW5ndGg7IGdhbWVwYWRCdXR0b25JZCsrKSB7XG5cbiAgICAgICAgICAgIC8vIEdldCB1c2VyIGlucHV0LlxuICAgICAgICAgICAgdmFyIGdhbWVwYWRCdXR0b24gPSBnYW1lcGFkQnV0dG9uc1tnYW1lcGFkQnV0dG9uSWRdO1xuXG4gICAgICAgICAgICBpZiAoZ2FtZXBhZEJ1dHRvbi5wcmVzc2VkKSB7XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGdhbWVwYWRCdXR0b25JZCkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEQtcGFkIFVwXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlRm9yd2FyZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAvLyBELXBhZCBEb3duXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlQmFja3dhcmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRC1wYWQgTGVmdFxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW92ZUxlZnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRC1wYWQgUmlnaHRcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVSaWdodCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgIH0sXG5cbiAgICBfc2NhbkluY2xpbmVkR2FtZXBhZEF4ZXM6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBnYW1lcGFkQXhlcyA9IHRoaXMuX2dldFN0YW5kYXJkR2FtZXBhZCgpLmF4ZXM7XG5cbiAgICAgICAgLy8gRm9yIGVhY2ggZ2FtZXBhZCBheGlzOlxuICAgICAgICBmb3IgKHZhciBnYW1lcGFkQXhpc0lkID0gMDsgZ2FtZXBhZEF4aXNJZCA8IGdhbWVwYWRBeGVzLmxlbmd0aDsgZ2FtZXBhZEF4aXNJZCsrKSB7XG5cbiAgICAgICAgICAgIC8vIEdldCB1c2VyIGlucHV0LlxuICAgICAgICAgICAgdmFyIGdhbWVwYWRBeGlzID0gZ2FtZXBhZEF4ZXNbZ2FtZXBhZEF4aXNJZF07XG5cbiAgICAgICAgICAgIC8vIFhYWCBXZSB1c2UgYSB0aHJlc2hvbGQgYmVjYXVzZSBheGVzIGFyZSBuZXZlciBuZXV0cmFsLlxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGdhbWVwYWRBeGlzKSA+IHRoaXMuX2dhbWVwYWRBeGlzVGhyZXNob2xkKSB7XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGdhbWVwYWRBeGlzSWQpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBMZWZ0IHN0aWNrIFjCsVxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlTGVmdCA9IGdhbWVwYWRBeGlzIDwgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVSaWdodCA9IGdhbWVwYWRBeGlzID4gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIExlZnQgc3RpY2sgWcKxXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVGb3J3YXJkID0gZ2FtZXBhZEF4aXMgPCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW92ZUJhY2t3YXJkID0gZ2FtZXBhZEF4aXMgPiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmlnaHQgc3RpY2sgWMKxXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29mZnNldFBpdGNoICs9IGdhbWVwYWRBeGlzICogdGhpcy5sb29rQXJvdW5kU3BlZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAvLyBSaWdodCBzdGljayBZwrFcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb2Zmc2V0Um9sbCArPSBnYW1lcGFkQXhpcyAqIHRoaXMubG9va0Fyb3VuZFNwZWVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9XG5cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBHYW1lcGFkQ29udHJvbDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGx1Z2luL0dhbWVwYWRDb250cm9sLmpzXG4vLyBtb2R1bGUgaWQgPSAxODZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///186\n");

/***/ }),
/* 187 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Plane__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__math_Ray__ = __webpack_require__(38);\n\n\n\n\n\n\nvar uvs = [[0, 0], [0, 1], [1, 1], [1, 0]];\nvar tris = [0, 1, 2, 2, 3, 0];\n\nvar InfinitePlane = __WEBPACK_IMPORTED_MODULE_0__Mesh__[\"a\" /* default */].extend({\n\n    camera: null,\n\n    plane: null,\n\n    maxGrid: 0,\n\n    // TODO\n    frustumCulling: false\n\n}, function () {\n    var geometry = this.geometry = new __WEBPACK_IMPORTED_MODULE_1__Geometry__[\"a\" /* default */]({\n        dynamic: true\n    });\n    geometry.attributes.position.init(6);\n    geometry.attributes.normal.init(6);\n    geometry.attributes.texcoord0.init(6);\n    geometry.indices = new Uint16Array(6);\n\n    this.plane = new __WEBPACK_IMPORTED_MODULE_2__math_Plane__[\"a\" /* default */]();\n}, {\n\n    updateGeometry: function () {\n\n        var coords = this._unProjectGrid();\n        if (!coords) {\n            return;\n        }\n        var positionAttr = this.geometry.attributes.position;\n        var normalAttr = this.geometry.attributes.normal;\n        var texcoords = this.geometry.attributes.texcoord0;\n        var indices = this.geometry.indices;\n\n        for (var i = 0; i < 6; i++) {\n            var idx = tris[i];\n            positionAttr.set(i, coords[idx].array);\n            normalAttr.set(i, this.plane.normal.array);\n            texcoords.set(i, uvs[idx]);\n            indices[i] = i;\n        }\n        this.geometry.dirty();\n    },\n\n    // http://fileadmin.cs.lth.se/graphics/theses/projects/projgrid/\n    _unProjectGrid: (function () {\n\n        var planeViewSpace = new __WEBPACK_IMPORTED_MODULE_2__math_Plane__[\"a\" /* default */]();\n        var lines = [\n            0, 1, 0, 2, 1, 3, 2, 3,\n            4, 5, 4, 6, 5, 7, 6, 7,\n            0, 4, 1, 5, 2, 6, 3, 7\n        ];\n\n        var start = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]();\n        var end = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]();\n\n        var points = [];\n\n        // 1----2\n        // |    |\n        // 0----3\n        var coords = [];\n        for (var i = 0; i < 4; i++) {\n            coords[i] = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */](0, 0);\n        }\n\n        var ray = new __WEBPACK_IMPORTED_MODULE_4__math_Ray__[\"a\" /* default */]();\n\n        return function () {\n            planeViewSpace.copy(this.plane);\n            planeViewSpace.applyTransform(this.camera.viewMatrix);\n\n            var frustumVertices = this.camera.frustum.vertices;\n\n            var nPoints = 0;\n            // Intersect with lines of frustum\n            for (var i = 0; i < 12; i++) {\n                start.array = frustumVertices[lines[i * 2]];\n                end.array = frustumVertices[lines[i * 2 + 1]];\n\n                var point = planeViewSpace.intersectLine(start, end, points[nPoints]);\n                if (point) {\n                    if (!points[nPoints]) {\n                        points[nPoints] = point;\n                    }\n                    nPoints++;\n                }\n            }\n            if (nPoints === 0) {\n                return;\n            }\n            for (var i = 0; i < nPoints; i++) {\n                points[i].applyProjection(this.camera.projectionMatrix);\n            }\n            var minX = points[0].array[0];\n            var minY = points[0].array[1];\n            var maxX = points[0].array[0];\n            var maxY = points[0].array[1];\n            for (var i = 1; i < nPoints; i++) {\n                maxX = Math.max(maxX, points[i].array[0]);\n                maxY = Math.max(maxY, points[i].array[1]);\n                minX = Math.min(minX, points[i].array[0]);\n                minY = Math.min(minY, points[i].array[1]);\n            }\n            if (minX == maxX || minY == maxY) {\n                return;\n            }\n            coords[0].array[0] = minX;\n            coords[0].array[1] = minY;\n            coords[1].array[0] = minX;\n            coords[1].array[1] = maxY;\n            coords[2].array[0] = maxX;\n            coords[2].array[1] = maxY;\n            coords[3].array[0] = maxX;\n            coords[3].array[1] = minY;\n\n            for (var i = 0; i < 4; i++) {\n                this.camera.castRay(coords[i], ray);\n                ray.intersectPlane(this.plane, coords[i]);\n            }\n\n            return coords;\n        };\n    })()\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (InfinitePlane);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGx1Z2luL0luZmluaXRlUGxhbmUuanM/OGNiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWVzaCBmcm9tICcuLi9NZXNoJztcbmltcG9ydCBHZW9tZXRyeSBmcm9tICcuLi9HZW9tZXRyeSc7XG5pbXBvcnQgUGxhbmUgZnJvbSAnLi4vbWF0aC9QbGFuZSc7XG5pbXBvcnQgVmVjdG9yMyBmcm9tICcuLi9tYXRoL1ZlY3RvcjMnO1xuaW1wb3J0IFJheSBmcm9tICcuLi9tYXRoL1JheSc7XG5cbnZhciB1dnMgPSBbWzAsIDBdLCBbMCwgMV0sIFsxLCAxXSwgWzEsIDBdXTtcbnZhciB0cmlzID0gWzAsIDEsIDIsIDIsIDMsIDBdO1xuXG52YXIgSW5maW5pdGVQbGFuZSA9IE1lc2guZXh0ZW5kKHtcblxuICAgIGNhbWVyYTogbnVsbCxcblxuICAgIHBsYW5lOiBudWxsLFxuXG4gICAgbWF4R3JpZDogMCxcblxuICAgIC8vIFRPRE9cbiAgICBmcnVzdHVtQ3VsbGluZzogZmFsc2VcblxufSwgZnVuY3Rpb24gKCkge1xuICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnkgPSBuZXcgR2VvbWV0cnkoe1xuICAgICAgICBkeW5hbWljOiB0cnVlXG4gICAgfSk7XG4gICAgZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5pbml0KDYpO1xuICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXMubm9ybWFsLmluaXQoNik7XG4gICAgZ2VvbWV0cnkuYXR0cmlidXRlcy50ZXhjb29yZDAuaW5pdCg2KTtcbiAgICBnZW9tZXRyeS5pbmRpY2VzID0gbmV3IFVpbnQxNkFycmF5KDYpO1xuXG4gICAgdGhpcy5wbGFuZSA9IG5ldyBQbGFuZSgpO1xufSwge1xuXG4gICAgdXBkYXRlR2VvbWV0cnk6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgY29vcmRzID0gdGhpcy5fdW5Qcm9qZWN0R3JpZCgpO1xuICAgICAgICBpZiAoIWNvb3Jkcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwb3NpdGlvbkF0dHIgPSB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb247XG4gICAgICAgIHZhciBub3JtYWxBdHRyID0gdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLm5vcm1hbDtcbiAgICAgICAgdmFyIHRleGNvb3JkcyA9IHRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy50ZXhjb29yZDA7XG4gICAgICAgIHZhciBpbmRpY2VzID0gdGhpcy5nZW9tZXRyeS5pbmRpY2VzO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaWR4ID0gdHJpc1tpXTtcbiAgICAgICAgICAgIHBvc2l0aW9uQXR0ci5zZXQoaSwgY29vcmRzW2lkeF0uYXJyYXkpO1xuICAgICAgICAgICAgbm9ybWFsQXR0ci5zZXQoaSwgdGhpcy5wbGFuZS5ub3JtYWwuYXJyYXkpO1xuICAgICAgICAgICAgdGV4Y29vcmRzLnNldChpLCB1dnNbaWR4XSk7XG4gICAgICAgICAgICBpbmRpY2VzW2ldID0gaTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdlb21ldHJ5LmRpcnR5KCk7XG4gICAgfSxcblxuICAgIC8vIGh0dHA6Ly9maWxlYWRtaW4uY3MubHRoLnNlL2dyYXBoaWNzL3RoZXNlcy9wcm9qZWN0cy9wcm9qZ3JpZC9cbiAgICBfdW5Qcm9qZWN0R3JpZDogKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgcGxhbmVWaWV3U3BhY2UgPSBuZXcgUGxhbmUoKTtcbiAgICAgICAgdmFyIGxpbmVzID0gW1xuICAgICAgICAgICAgMCwgMSwgMCwgMiwgMSwgMywgMiwgMyxcbiAgICAgICAgICAgIDQsIDUsIDQsIDYsIDUsIDcsIDYsIDcsXG4gICAgICAgICAgICAwLCA0LCAxLCA1LCAyLCA2LCAzLCA3XG4gICAgICAgIF07XG5cbiAgICAgICAgdmFyIHN0YXJ0ID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgdmFyIGVuZCA9IG5ldyBWZWN0b3IzKCk7XG5cbiAgICAgICAgdmFyIHBvaW50cyA9IFtdO1xuXG4gICAgICAgIC8vIDEtLS0tMlxuICAgICAgICAvLyB8ICAgIHxcbiAgICAgICAgLy8gMC0tLS0zXG4gICAgICAgIHZhciBjb29yZHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgICAgIGNvb3Jkc1tpXSA9IG5ldyBWZWN0b3IzKDAsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJheSA9IG5ldyBSYXkoKTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcGxhbmVWaWV3U3BhY2UuY29weSh0aGlzLnBsYW5lKTtcbiAgICAgICAgICAgIHBsYW5lVmlld1NwYWNlLmFwcGx5VHJhbnNmb3JtKHRoaXMuY2FtZXJhLnZpZXdNYXRyaXgpO1xuXG4gICAgICAgICAgICB2YXIgZnJ1c3R1bVZlcnRpY2VzID0gdGhpcy5jYW1lcmEuZnJ1c3R1bS52ZXJ0aWNlcztcblxuICAgICAgICAgICAgdmFyIG5Qb2ludHMgPSAwO1xuICAgICAgICAgICAgLy8gSW50ZXJzZWN0IHdpdGggbGluZXMgb2YgZnJ1c3R1bVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxMjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgc3RhcnQuYXJyYXkgPSBmcnVzdHVtVmVydGljZXNbbGluZXNbaSAqIDJdXTtcbiAgICAgICAgICAgICAgICBlbmQuYXJyYXkgPSBmcnVzdHVtVmVydGljZXNbbGluZXNbaSAqIDIgKyAxXV07XG5cbiAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBwbGFuZVZpZXdTcGFjZS5pbnRlcnNlY3RMaW5lKHN0YXJ0LCBlbmQsIHBvaW50c1tuUG9pbnRzXSk7XG4gICAgICAgICAgICAgICAgaWYgKHBvaW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcG9pbnRzW25Qb2ludHNdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludHNbblBvaW50c10gPSBwb2ludDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBuUG9pbnRzKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5Qb2ludHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5Qb2ludHM7IGkrKykge1xuICAgICAgICAgICAgICAgIHBvaW50c1tpXS5hcHBseVByb2plY3Rpb24odGhpcy5jYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbWluWCA9IHBvaW50c1swXS5hcnJheVswXTtcbiAgICAgICAgICAgIHZhciBtaW5ZID0gcG9pbnRzWzBdLmFycmF5WzFdO1xuICAgICAgICAgICAgdmFyIG1heFggPSBwb2ludHNbMF0uYXJyYXlbMF07XG4gICAgICAgICAgICB2YXIgbWF4WSA9IHBvaW50c1swXS5hcnJheVsxXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgblBvaW50czsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbWF4WCA9IE1hdGgubWF4KG1heFgsIHBvaW50c1tpXS5hcnJheVswXSk7XG4gICAgICAgICAgICAgICAgbWF4WSA9IE1hdGgubWF4KG1heFksIHBvaW50c1tpXS5hcnJheVsxXSk7XG4gICAgICAgICAgICAgICAgbWluWCA9IE1hdGgubWluKG1pblgsIHBvaW50c1tpXS5hcnJheVswXSk7XG4gICAgICAgICAgICAgICAgbWluWSA9IE1hdGgubWluKG1pblksIHBvaW50c1tpXS5hcnJheVsxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWluWCA9PSBtYXhYIHx8IG1pblkgPT0gbWF4WSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvb3Jkc1swXS5hcnJheVswXSA9IG1pblg7XG4gICAgICAgICAgICBjb29yZHNbMF0uYXJyYXlbMV0gPSBtaW5ZO1xuICAgICAgICAgICAgY29vcmRzWzFdLmFycmF5WzBdID0gbWluWDtcbiAgICAgICAgICAgIGNvb3Jkc1sxXS5hcnJheVsxXSA9IG1heFk7XG4gICAgICAgICAgICBjb29yZHNbMl0uYXJyYXlbMF0gPSBtYXhYO1xuICAgICAgICAgICAgY29vcmRzWzJdLmFycmF5WzFdID0gbWF4WTtcbiAgICAgICAgICAgIGNvb3Jkc1szXS5hcnJheVswXSA9IG1heFg7XG4gICAgICAgICAgICBjb29yZHNbM10uYXJyYXlbMV0gPSBtaW5ZO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLmNhc3RSYXkoY29vcmRzW2ldLCByYXkpO1xuICAgICAgICAgICAgICAgIHJheS5pbnRlcnNlY3RQbGFuZSh0aGlzLnBsYW5lLCBjb29yZHNbaV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY29vcmRzO1xuICAgICAgICB9O1xuICAgIH0pKClcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBJbmZpbml0ZVBsYW5lO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy9wbHVnaW4vSW5maW5pdGVQbGFuZS5qc1xuLy8gbW9kdWxlIGlkID0gMTg3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///187\n");

/***/ }),
/* 188 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector2__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__GestureMgr__ = __webpack_require__(115);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__ = __webpack_require__(20);\n\n\n\n\n\n\n\nvar MOUSE_BUTTON_KEY_MAP = {\n    left: 0,\n    middle: 1,\n    right: 2\n};\n\nfunction firstNotNull() {\n    for (var i = 0, len = arguments.length; i < len; i++) {\n        if (arguments[i] != null) {\n            return arguments[i];\n        }\n    }\n}\n\nfunction convertToArray(val) {\n    if (!Array.isArray(val)) {\n        val = [val, val];\n    }\n    return val;\n}\n\n/**\n * @constructor\n * @alias clay.plugin.OrbitControl\n * @extends clay.core.Base\n */\nvar OrbitControl = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n\n    return /** @lends clay.plugin.OrbitControl# */ {\n\n        /**\n         * @type {clay.Timeline}\n         */\n        timeline: null,\n\n        /**\n         * @type {HTMLElement}\n         */\n        domElement: null,\n\n        /**\n         * @type {clay.Node}\n         */\n        target: null,\n        /**\n         * @type {clay.Vector3}\n         */\n        _center: new __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */](),\n\n        /**\n         * Minimum distance to the center\n         * @type {number}\n         * @default 0.5\n         */\n        minDistance: 0.1,\n\n        /**\n         * Maximum distance to the center\n         * @type {number}\n         * @default 2\n         */\n        maxDistance: 1000,\n\n        /**\n         * Only available when camera is orthographic\n         */\n        maxOrthographicSize: 300,\n\n        /**\n         * Only available when camera is orthographic\n         */\n        minOrthographicSize: 30,\n\n        /**\n         * Aspect of orthographic camera\n         * Only available when camera is orthographic\n         */\n        orthographicAspect: 1,\n\n        /**\n         * Minimum alpha rotation\n         */\n        minAlpha: -90,\n\n        /**\n         * Maximum alpha rotation\n         */\n        maxAlpha: 90,\n\n        /**\n         * Minimum beta rotation\n         */\n        minBeta: -Infinity,\n        /**\n         * Maximum beta rotation\n         */\n        maxBeta: Infinity,\n\n        /**\n         * Start auto rotating after still for the given time\n         */\n        autoRotateAfterStill: 0,\n\n        /**\n         * Direction of autoRotate. cw or ccw when looking top down.\n         */\n        autoRotateDirection: 'cw',\n\n        /**\n         * Degree per second\n         */\n        autoRotateSpeed: 60,\n\n        panMouseButton: 'middle',\n        rotateMouseButton: 'left',\n\n        /**\n         * Pan or rotate\n         * @type {String}\n         */\n        _mode: 'rotate',\n\n        /**\n         * @param {number}\n         */\n        damping: 0.8,\n\n        /**\n         * @param {number}\n         */\n        rotateSensitivity: 1,\n\n        /**\n         * @param {number}\n         */\n        zoomSensitivity: 1,\n\n        /**\n         * @param {number}\n         */\n        panSensitivity: 1,\n\n        _needsUpdate: false,\n\n        _rotating: false,\n\n        // Rotation around yAxis\n        _phi: 0,\n        // Rotation around xAxis\n        _theta: 0,\n\n        _mouseX: 0,\n        _mouseY: 0,\n\n        _rotateVelocity: new __WEBPACK_IMPORTED_MODULE_1__math_Vector2__[\"a\" /* default */](),\n\n        _panVelocity: new __WEBPACK_IMPORTED_MODULE_1__math_Vector2__[\"a\" /* default */](),\n\n        _distance: 20,\n\n        _zoomSpeed: 0,\n\n        _stillTimeout: 0,\n\n        _animators: [],\n\n        _gestureMgr: new __WEBPACK_IMPORTED_MODULE_3__GestureMgr__[\"a\" /* default */]()\n    };\n}, function () {\n    // Each OrbitControl has it's own handler\n    this._mouseDownHandler = this._mouseDownHandler.bind(this);\n    this._mouseWheelHandler = this._mouseWheelHandler.bind(this);\n    this._mouseMoveHandler = this._mouseMoveHandler.bind(this);\n    this._mouseUpHandler = this._mouseUpHandler.bind(this);\n    this._pinchHandler = this._pinchHandler.bind(this);\n\n    this.init();\n}, /** @lends clay.plugin.OrbitControl# */ {\n    /**\n     * Initialize.\n     * Mouse event binding\n     */\n    init: function () {\n        var dom = this.domElement;\n\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'touchstart', this._mouseDownHandler);\n\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'mousedown', this._mouseDownHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'wheel', this._mouseWheelHandler);\n\n        if (this.timeline) {\n            this.timeline.on('frame', this.update, this);\n        }\n        if (this.target) {\n            this.decomposeTransform();\n        }\n    },\n\n    /**\n     * Dispose.\n     * Mouse event unbinding\n     */\n    dispose: function () {\n        var dom = this.domElement;\n\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'touchstart', this._mouseDownHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'touchmove', this._mouseMoveHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'touchend', this._mouseUpHandler);\n\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'mousedown', this._mouseDownHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'mousemove', this._mouseMoveHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'mouseup', this._mouseUpHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'wheel', this._mouseWheelHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'mouseout', this._mouseUpHandler);\n\n        if (this.timeline) {\n            this.timeline.off('frame', this.update);\n        }\n        this.stopAllAnimation();\n    },\n\n    /**\n     * Get distance\n     * @return {number}\n     */\n    getDistance: function () {\n        return this._distance;\n    },\n\n    /**\n     * Set distance\n     * @param {number} distance\n     */\n    setDistance: function (distance) {\n        this._distance = distance;\n        this._needsUpdate = true;\n    },\n\n    /**\n     * Get size of orthographic viewing volume\n     * @return {number}\n     */\n    getOrthographicSize: function () {\n        return this._orthoSize;\n    },\n\n    /**\n     * Set size of orthographic viewing volume\n     * @param {number} size\n     */\n    setOrthographicSize: function (size) {\n        this._orthoSize = size;\n        this._needsUpdate = true;\n    },\n\n    /**\n     * Get alpha rotation\n     * Alpha angle for top-down rotation. Positive to rotate to top.\n     *\n     * Which means camera rotation around x axis.\n     */\n    getAlpha: function () {\n        return this._theta / Math.PI * 180;\n    },\n\n    /**\n     * Get beta rotation\n     * Beta angle for left-right rotation. Positive to rotate to right.\n     *\n     * Which means camera rotation around y axis.\n     */\n    getBeta: function () {\n        return -this._phi / Math.PI * 180;\n    },\n\n    /**\n     * Get control center\n     * @return {Array.<number>}\n     */\n    getCenter: function () {\n        return this._center.toArray();\n    },\n\n    /**\n     * Set alpha rotation angle\n     * @param {number} alpha\n     */\n    setAlpha: function (alpha) {\n        alpha = Math.max(Math.min(this.maxAlpha, alpha), this.minAlpha);\n\n        this._theta = alpha / 180 * Math.PI;\n        this._needsUpdate = true;\n    },\n\n    /**\n     * Set beta rotation angle\n     * @param {number} beta\n     */\n    setBeta: function (beta) {\n        beta = Math.max(Math.min(this.maxBeta, beta), this.minBeta);\n\n        this._phi = -beta / 180 * Math.PI;\n        this._needsUpdate = true;\n    },\n\n    /**\n     * Set control center\n     * @param {Array.<number>} center\n     */\n    setCenter: function (centerArr) {\n        this._center.setArray(centerArr);\n    },\n\n    setOption: function (opts) {\n        opts = opts || {};\n\n        ['autoRotate', 'autoRotateAfterStill',\n            'autoRotateDirection', 'autoRotateSpeed',\n            'damping',\n            'minDistance', 'maxDistance',\n            'minOrthographicSize', 'maxOrthographicSize', 'orthographicAspect',\n            'minAlpha', 'maxAlpha', 'minBeta', 'maxBeta',\n            'rotateSensitivity', 'zoomSensitivity', 'panSensitivity'\n        ].forEach(function (key) {\n            if (opts[key] != null) {\n                this[key] = opts[key];\n            }\n        }, this);\n\n        if (opts.distance != null) {\n            this.setDistance(opts.distance);\n        }\n        if (opts.orthographicSize != null) {\n            this.setOrthographicSize(opts.orthographicSize);\n        }\n\n        if (opts.alpha != null) {\n            this.setAlpha(opts.alpha);\n        }\n        if (opts.beta != null) {\n            this.setBeta(opts.beta);\n        }\n\n        if (opts.center) {\n            this.setCenter(opts.center);\n        }\n\n        if (this.target) {\n            this._updateTransform();\n            this.target.update();\n        }\n    },\n\n    /**\n     * @param {Object} opts\n     * @param {number} opts.distance\n     * @param {number} opts.orthographicSize\n     * @param {number} opts.alpha\n     * @param {number} opts.beta\n     * @param {Array.<number>} opts.center\n     * @param {number} [opts.duration=1000]\n     * @param {number} [opts.easing='linear']\n     * @param {number} [opts.done]\n     */\n    animateTo: function (opts) {\n        var self = this;\n\n        var obj = {};\n        var target = {};\n        var timeline = this.timeline;\n        if (!timeline) {\n            return;\n        }\n        if (opts.distance != null) {\n            obj.distance = this.getDistance();\n            target.distance = opts.distance;\n        }\n        if (opts.orthographicSize != null) {\n            obj.orthographicSize = this.getOrthographicSize();\n            target.orthographicSize = opts.orthographicSize;\n        }\n        if (opts.alpha != null) {\n            obj.alpha = this.getAlpha();\n            target.alpha = opts.alpha;\n        }\n        if (opts.beta != null) {\n            obj.beta = this.getBeta();\n            target.beta = opts.beta;\n        }\n        if (opts.center != null) {\n            obj.center = this.getCenter();\n            target.center = opts.center;\n        }\n\n        return this._addAnimator(\n            timeline.animate(obj)\n                .when(opts.duration || 1000, target)\n                .during(function () {\n                    if (obj.alpha != null) {\n                        self.setAlpha(obj.alpha);\n                    }\n                    if (obj.beta != null) {\n                        self.setBeta(obj.beta);\n                    }\n                    if (obj.distance != null) {\n                        self.setDistance(obj.distance);\n                    }\n                    if (obj.orthographicSize != null) {\n                        self.setOrthographicSize(obj.orthographicSize);\n                    }\n                    if (obj.center != null) {\n                        self.setCenter(obj.center);\n                    }\n                    self._needsUpdate = true;\n                })\n                .done(opts.done)\n        ).start(opts.easing || 'linear');\n    },\n\n    /**\n     * Stop all animations\n     */\n    stopAllAnimation: function () {\n        for (var i = 0; i < this._animators.length; i++) {\n            this._animators[i].stop();\n        }\n        this._animators.length = 0;\n    },\n\n    _isAnimating: function () {\n        return this._animators.length > 0;\n    },\n    /**\n     * Call update each frame\n     * @param  {number} deltaTime Frame time\n     */\n    update: function (deltaTime) {\n\n        deltaTime = deltaTime || 16;\n\n        if (this._rotating) {\n            var radian = (this.autoRotateDirection === 'cw' ? 1 : -1)\n                * this.autoRotateSpeed / 180 * Math.PI;\n            this._phi -= radian * deltaTime / 1000;\n            this._needsUpdate = true;\n        }\n        else if (this._rotateVelocity.len() > 0) {\n            this._needsUpdate = true;\n        }\n\n        if (Math.abs(this._zoomSpeed) > 0.01 || this._panVelocity.len() > 0) {\n            this._needsUpdate = true;\n        }\n\n        if (!this._needsUpdate) {\n            return;\n        }\n\n        // Fixed deltaTime\n        this._updateDistanceOrSize(Math.min(deltaTime, 50));\n        this._updatePan(Math.min(deltaTime, 50));\n\n        this._updateRotate(Math.min(deltaTime, 50));\n\n        this._updateTransform();\n\n        this.target.update();\n\n        this.trigger('update');\n\n        this._needsUpdate = false;\n    },\n\n    _updateRotate: function (deltaTime) {\n        var velocity = this._rotateVelocity;\n        this._phi = velocity.y * deltaTime / 20 + this._phi;\n        this._theta = velocity.x * deltaTime / 20 + this._theta;\n\n        this.setAlpha(this.getAlpha());\n        this.setBeta(this.getBeta());\n\n        this._vectorDamping(velocity, this.damping);\n    },\n\n    _updateDistanceOrSize: function (deltaTime) {\n        this._setDistance(this._distance + this._zoomSpeed * deltaTime / 20);\n        if (!(this.target instanceof __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__[\"a\" /* default */])) {\n            this._setOrthoSize(this._orthoSize + this._zoomSpeed * deltaTime / 20);\n        }\n\n        this._zoomSpeed *= Math.pow(this.damping, deltaTime / 16);\n    },\n\n    _setDistance: function (distance) {\n        this._distance = Math.max(Math.min(distance, this.maxDistance), this.minDistance);\n    },\n\n    _setOrthoSize: function (size) {\n        this._orthoSize = Math.max(Math.min(size, this.maxOrthographicSize), this.minOrthographicSize);\n        var camera = this.target;\n        var cameraHeight = this._orthoSize;\n        // TODO\n        var cameraWidth = cameraHeight * this.orthographicAspect;\n        camera.left = -cameraWidth / 2;\n        camera.right = cameraWidth / 2;\n        camera.top = cameraHeight / 2;\n        camera.bottom = -cameraHeight / 2;\n    },\n\n    _updatePan: function (deltaTime) {\n        var velocity = this._panVelocity;\n        var len = this._distance;\n\n        var target = this.target;\n        var yAxis = target.worldTransform.y;\n        var xAxis = target.worldTransform.x;\n\n        // PENDING\n        this._center\n            .scaleAndAdd(xAxis, -velocity.x * len / 200)\n            .scaleAndAdd(yAxis, -velocity.y * len / 200);\n\n        this._vectorDamping(velocity, 0);\n\n        velocity.x = velocity.y = 0;\n    },\n\n    _updateTransform: function () {\n        var camera = this.target;\n\n        var dir = new __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */]();\n        var theta = this._theta + Math.PI / 2;\n        var phi = this._phi + Math.PI / 2;\n        var r = Math.sin(theta);\n\n        dir.x = r * Math.cos(phi);\n        dir.y = -Math.cos(theta);\n        dir.z = r * Math.sin(phi);\n\n        camera.position.copy(this._center).scaleAndAdd(dir, this._distance);\n        camera.rotation.identity()\n            // First around y, then around x\n            .rotateY(-this._phi)\n            .rotateX(-this._theta);\n    },\n\n    _startCountingStill: function () {\n        clearTimeout(this._stillTimeout);\n\n        var time = this.autoRotateAfterStill;\n        var self = this;\n        if (!isNaN(time) && time > 0) {\n            this._stillTimeout = setTimeout(function () {\n                self._rotating = true;\n            }, time * 1000);\n        }\n    },\n\n    _vectorDamping: function (v, damping) {\n        var speed = v.len();\n        speed = speed * damping;\n        if (speed < 1e-4) {\n            speed = 0;\n        }\n        v.normalize().scale(speed);\n    },\n\n    decomposeTransform: function () {\n        if (!this.target) {\n            return;\n        }\n\n        this.target.updateWorldTransform();\n\n        var forward = this.target.worldTransform.z;\n        var alpha = Math.asin(forward.y);\n        var beta = Math.atan2(forward.x, forward.z);\n\n        this._theta = alpha;\n        this._phi = -beta;\n\n        this.setBeta(this.getBeta());\n        this.setAlpha(this.getAlpha());\n\n        this._setDistance(this.target.position.dist(this._center));\n        if (!(this.target instanceof __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__[\"a\" /* default */])){\n            this._setOrthoSize(this.target.top - this.target.bottom);\n        }\n    },\n\n    _mouseDownHandler: function (e) {\n        if (this._isAnimating()) {\n            return;\n        }\n        var x = e.clientX;\n        var y = e.clientY;\n        // Touch\n        if (e.targetTouches) {\n            var touch = e.targetTouches[0];\n            x = touch.clientX;\n            y = touch.clientY;\n\n            this._mode = 'rotate';\n\n            this._processGesture(e, 'start');\n        }\n        else {\n            if (e.button === MOUSE_BUTTON_KEY_MAP[this.rotateMouseButton]) {\n                this._mode = 'rotate';\n            }\n            else if (e.button === MOUSE_BUTTON_KEY_MAP[this.panMouseButton]) {\n                this._mode = 'pan';\n\n                /**\n                 * Vendors like Mozilla provide a mouse-driven panning feature\n                 * that is activated when the middle mouse button is pressed.\n                 *\n                 * @see https://w3c.github.io/uievents/#event-type-mousedown\n                 */\n                e.preventDefault();\n            }\n            else {\n                this._mode = null;\n            }\n        }\n\n        var dom = this.domElement;\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'touchmove', this._mouseMoveHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'touchend', this._mouseUpHandler);\n\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'mousemove', this._mouseMoveHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'mouseup', this._mouseUpHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'mouseout', this._mouseUpHandler);\n\n        // Reset rotate velocity\n        this._rotateVelocity.set(0, 0);\n        this._rotating = false;\n        if (this.autoRotate) {\n            this._startCountingStill();\n        }\n\n        this._mouseX = x;\n        this._mouseY = y;\n    },\n\n    _mouseMoveHandler: function (e) {\n        if (this._isAnimating()) {\n            return;\n        }\n        var x = e.clientX;\n        var y = e.clientY;\n\n        var haveGesture;\n        // Touch\n        if (e.targetTouches) {\n            var touch = e.targetTouches[0];\n            x = touch.clientX;\n            y = touch.clientY;\n\n            haveGesture = this._processGesture(e, 'change');\n        }\n\n        var panSensitivity = convertToArray(this.panSensitivity);\n        var rotateSensitivity = convertToArray(this.rotateSensitivity);\n\n        if (!haveGesture) {\n            if (this._mode === 'rotate') {\n                this._rotateVelocity.y += (x - this._mouseX) / this.domElement.clientWidth * 2 * rotateSensitivity[0];\n                this._rotateVelocity.x += (y - this._mouseY) / this.domElement.clientHeight * 2 * rotateSensitivity[1];\n            }\n            else if (this._mode === 'pan') {\n                this._panVelocity.x += (x - this._mouseX) / this.domElement.clientWidth * panSensitivity[0] * 400;\n                this._panVelocity.y += (-y + this._mouseY) / this.domElement.clientHeight * panSensitivity[1] * 400;\n            }\n        }\n\n        this._mouseX = x;\n        this._mouseY = y;\n\n        e.preventDefault && e.preventDefault();\n    },\n\n    _mouseWheelHandler: function (e) {\n        if (this._isAnimating()) {\n            return;\n        }\n        var delta = e.deltaY;\n        if (delta === 0) {\n            return;\n        }\n        this._zoomHandler(e, delta > 0 ? 1 : -1);\n    },\n\n    _pinchHandler: function (e) {\n        if (this._isAnimating()) {\n            return;\n        }\n        this._zoomHandler(e, e.pinchScale > 1 ? 0.4 : -0.4);\n    },\n\n    _zoomHandler: function (e, delta) {\n\n        var speed;\n        if (this.target instanceof __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__[\"a\" /* default */]) {\n            speed = Math.max(Math.max(Math.min(\n                this._distance - this.minDistance,\n                this.maxDistance - this._distance\n            )) / 20, 0.5);\n        }\n        else {\n            speed = Math.max(Math.max(Math.min(\n                this._orthoSize - this.minOrthographicSize,\n                this.maxOrthographicSize - this._orthoSize\n            )) / 20, 0.5);\n        }\n\n        this._zoomSpeed = (delta > 0 ? -1 : 1) * speed * this.zoomSensitivity;\n\n        this._rotating = false;\n\n        if (this.autoRotate && this._mode === 'rotate') {\n            this._startCountingStill();\n        }\n\n        e.preventDefault && e.preventDefault();\n    },\n\n    _mouseUpHandler: function (event) {\n        var dom = this.domElement;\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'touchmove', this._mouseMoveHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'touchend', this._mouseUpHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'mousemove', this._mouseMoveHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'mouseup', this._mouseUpHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'mouseout', this._mouseUpHandler);\n\n        this._processGesture(event, 'end');\n    },\n\n    _addAnimator: function (animator) {\n        var animators = this._animators;\n        animators.push(animator);\n        animator.done(function () {\n            var idx = animators.indexOf(animator);\n            if (idx >= 0) {\n                animators.splice(idx, 1);\n            }\n        });\n        return animator;\n    },\n\n\n    _processGesture: function (event, stage) {\n        var gestureMgr = this._gestureMgr;\n\n        stage === 'start' && gestureMgr.clear();\n\n        var gestureInfo = gestureMgr.recognize(\n            event,\n            null,\n            this.domElement\n        );\n\n        stage === 'end' && gestureMgr.clear();\n\n        // Do not do any preventDefault here. Upper application do that if necessary.\n        if (gestureInfo) {\n            var type = gestureInfo.type;\n            event.gestureEvent = type;\n\n            this._pinchHandler(gestureInfo.event);\n        }\n\n        return gestureInfo;\n    }\n});\n\n/**\n * If auto rotate the target\n * @type {boolean}\n * @default false\n */\nObject.defineProperty(OrbitControl.prototype, 'autoRotate', {\n    get: function () {\n        return this._autoRotate;\n    },\n    set: function (val) {\n        this._autoRotate = val;\n        this._rotating = val;\n    }\n});\n\nObject.defineProperty(OrbitControl.prototype, 'target', {\n    get: function () {\n        return this._target;\n    },\n    set: function (val) {\n        if (val && val.target) {\n            this.setCenter(val.target.toArray());\n        }\n        this._target = val;\n        this.decomposeTransform();\n    }\n});\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (OrbitControl);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGx1Z2luL09yYml0Q29udHJvbC5qcz9kYmNhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4uL2NvcmUvQmFzZSc7XG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuLi9tYXRoL1ZlY3RvcjInO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi4vbWF0aC9WZWN0b3IzJztcbmltcG9ydCBHZXN0dXJlTWdyIGZyb20gJy4vR2VzdHVyZU1ncic7XG5pbXBvcnQgdmVuZG9yIGZyb20gJy4uL2NvcmUvdmVuZG9yJztcbmltcG9ydCBQZXJzcGVjdGl2ZUNhbWVyYSBmcm9tICcuLi9jYW1lcmEvUGVyc3BlY3RpdmUnO1xuXG52YXIgTU9VU0VfQlVUVE9OX0tFWV9NQVAgPSB7XG4gICAgbGVmdDogMCxcbiAgICBtaWRkbGU6IDEsXG4gICAgcmlnaHQ6IDJcbn07XG5cbmZ1bmN0aW9uIGZpcnN0Tm90TnVsbCgpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHNbaV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gY29udmVydFRvQXJyYXkodmFsKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAgdmFsID0gW3ZhbCwgdmFsXTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbn1cblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LnBsdWdpbi5PcmJpdENvbnRyb2xcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKi9cbnZhciBPcmJpdENvbnRyb2wgPSBCYXNlLmV4dGVuZChmdW5jdGlvbiAoKSB7XG5cbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5LnBsdWdpbi5PcmJpdENvbnRyb2wjICovIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2NsYXkuVGltZWxpbmV9XG4gICAgICAgICAqL1xuICAgICAgICB0aW1lbGluZTogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgZG9tRWxlbWVudDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2NsYXkuTm9kZX1cbiAgICAgICAgICovXG4gICAgICAgIHRhcmdldDogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICAgICAqL1xuICAgICAgICBfY2VudGVyOiBuZXcgVmVjdG9yMygpLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNaW5pbXVtIGRpc3RhbmNlIHRvIHRoZSBjZW50ZXJcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMC41XG4gICAgICAgICAqL1xuICAgICAgICBtaW5EaXN0YW5jZTogMC4xLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXhpbXVtIGRpc3RhbmNlIHRvIHRoZSBjZW50ZXJcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMlxuICAgICAgICAgKi9cbiAgICAgICAgbWF4RGlzdGFuY2U6IDEwMDAsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9ubHkgYXZhaWxhYmxlIHdoZW4gY2FtZXJhIGlzIG9ydGhvZ3JhcGhpY1xuICAgICAgICAgKi9cbiAgICAgICAgbWF4T3J0aG9ncmFwaGljU2l6ZTogMzAwLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPbmx5IGF2YWlsYWJsZSB3aGVuIGNhbWVyYSBpcyBvcnRob2dyYXBoaWNcbiAgICAgICAgICovXG4gICAgICAgIG1pbk9ydGhvZ3JhcGhpY1NpemU6IDMwLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBc3BlY3Qgb2Ygb3J0aG9ncmFwaGljIGNhbWVyYVxuICAgICAgICAgKiBPbmx5IGF2YWlsYWJsZSB3aGVuIGNhbWVyYSBpcyBvcnRob2dyYXBoaWNcbiAgICAgICAgICovXG4gICAgICAgIG9ydGhvZ3JhcGhpY0FzcGVjdDogMSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogTWluaW11bSBhbHBoYSByb3RhdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgbWluQWxwaGE6IC05MCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogTWF4aW11bSBhbHBoYSByb3RhdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgbWF4QWxwaGE6IDkwLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNaW5pbXVtIGJldGEgcm90YXRpb25cbiAgICAgICAgICovXG4gICAgICAgIG1pbkJldGE6IC1JbmZpbml0eSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1heGltdW0gYmV0YSByb3RhdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgbWF4QmV0YTogSW5maW5pdHksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0YXJ0IGF1dG8gcm90YXRpbmcgYWZ0ZXIgc3RpbGwgZm9yIHRoZSBnaXZlbiB0aW1lXG4gICAgICAgICAqL1xuICAgICAgICBhdXRvUm90YXRlQWZ0ZXJTdGlsbDogMCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGlyZWN0aW9uIG9mIGF1dG9Sb3RhdGUuIGN3IG9yIGNjdyB3aGVuIGxvb2tpbmcgdG9wIGRvd24uXG4gICAgICAgICAqL1xuICAgICAgICBhdXRvUm90YXRlRGlyZWN0aW9uOiAnY3cnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWdyZWUgcGVyIHNlY29uZFxuICAgICAgICAgKi9cbiAgICAgICAgYXV0b1JvdGF0ZVNwZWVkOiA2MCxcblxuICAgICAgICBwYW5Nb3VzZUJ1dHRvbjogJ21pZGRsZScsXG4gICAgICAgIHJvdGF0ZU1vdXNlQnV0dG9uOiAnbGVmdCcsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBhbiBvciByb3RhdGVcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF9tb2RlOiAncm90YXRlJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBkYW1waW5nOiAwLjgsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgcm90YXRlU2Vuc2l0aXZpdHk6IDEsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgem9vbVNlbnNpdGl2aXR5OiAxLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHBhblNlbnNpdGl2aXR5OiAxLFxuXG4gICAgICAgIF9uZWVkc1VwZGF0ZTogZmFsc2UsXG5cbiAgICAgICAgX3JvdGF0aW5nOiBmYWxzZSxcblxuICAgICAgICAvLyBSb3RhdGlvbiBhcm91bmQgeUF4aXNcbiAgICAgICAgX3BoaTogMCxcbiAgICAgICAgLy8gUm90YXRpb24gYXJvdW5kIHhBeGlzXG4gICAgICAgIF90aGV0YTogMCxcblxuICAgICAgICBfbW91c2VYOiAwLFxuICAgICAgICBfbW91c2VZOiAwLFxuXG4gICAgICAgIF9yb3RhdGVWZWxvY2l0eTogbmV3IFZlY3RvcjIoKSxcblxuICAgICAgICBfcGFuVmVsb2NpdHk6IG5ldyBWZWN0b3IyKCksXG5cbiAgICAgICAgX2Rpc3RhbmNlOiAyMCxcblxuICAgICAgICBfem9vbVNwZWVkOiAwLFxuXG4gICAgICAgIF9zdGlsbFRpbWVvdXQ6IDAsXG5cbiAgICAgICAgX2FuaW1hdG9yczogW10sXG5cbiAgICAgICAgX2dlc3R1cmVNZ3I6IG5ldyBHZXN0dXJlTWdyKClcbiAgICB9O1xufSwgZnVuY3Rpb24gKCkge1xuICAgIC8vIEVhY2ggT3JiaXRDb250cm9sIGhhcyBpdCdzIG93biBoYW5kbGVyXG4gICAgdGhpcy5fbW91c2VEb3duSGFuZGxlciA9IHRoaXMuX21vdXNlRG93bkhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9tb3VzZVdoZWVsSGFuZGxlciA9IHRoaXMuX21vdXNlV2hlZWxIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fbW91c2VNb3ZlSGFuZGxlciA9IHRoaXMuX21vdXNlTW92ZUhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9tb3VzZVVwSGFuZGxlciA9IHRoaXMuX21vdXNlVXBIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fcGluY2hIYW5kbGVyID0gdGhpcy5fcGluY2hIYW5kbGVyLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmluaXQoKTtcbn0sIC8qKiBAbGVuZHMgY2xheS5wbHVnaW4uT3JiaXRDb250cm9sIyAqLyB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZS5cbiAgICAgKiBNb3VzZSBldmVudCBiaW5kaW5nXG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZG9tID0gdGhpcy5kb21FbGVtZW50O1xuXG4gICAgICAgIHZlbmRvci5hZGRFdmVudExpc3RlbmVyKGRvbSwgJ3RvdWNoc3RhcnQnLCB0aGlzLl9tb3VzZURvd25IYW5kbGVyKTtcblxuICAgICAgICB2ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lcihkb20sICdtb3VzZWRvd24nLCB0aGlzLl9tb3VzZURvd25IYW5kbGVyKTtcbiAgICAgICAgdmVuZG9yLmFkZEV2ZW50TGlzdGVuZXIoZG9tLCAnd2hlZWwnLCB0aGlzLl9tb3VzZVdoZWVsSGFuZGxlcik7XG5cbiAgICAgICAgaWYgKHRoaXMudGltZWxpbmUpIHtcbiAgICAgICAgICAgIHRoaXMudGltZWxpbmUub24oJ2ZyYW1lJywgdGhpcy51cGRhdGUsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy5kZWNvbXBvc2VUcmFuc2Zvcm0oKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlLlxuICAgICAqIE1vdXNlIGV2ZW50IHVuYmluZGluZ1xuICAgICAqL1xuICAgIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRvbSA9IHRoaXMuZG9tRWxlbWVudDtcblxuICAgICAgICB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb20sICd0b3VjaHN0YXJ0JywgdGhpcy5fbW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvbSwgJ3RvdWNobW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb20sICd0b3VjaGVuZCcsIHRoaXMuX21vdXNlVXBIYW5kbGVyKTtcblxuICAgICAgICB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb20sICdtb3VzZWRvd24nLCB0aGlzLl9tb3VzZURvd25IYW5kbGVyKTtcbiAgICAgICAgdmVuZG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9tLCAnbW91c2Vtb3ZlJywgdGhpcy5fbW91c2VNb3ZlSGFuZGxlcik7XG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvbSwgJ21vdXNldXAnLCB0aGlzLl9tb3VzZVVwSGFuZGxlcik7XG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvbSwgJ3doZWVsJywgdGhpcy5fbW91c2VXaGVlbEhhbmRsZXIpO1xuICAgICAgICB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb20sICdtb3VzZW91dCcsIHRoaXMuX21vdXNlVXBIYW5kbGVyKTtcblxuICAgICAgICBpZiAodGhpcy50aW1lbGluZSkge1xuICAgICAgICAgICAgdGhpcy50aW1lbGluZS5vZmYoJ2ZyYW1lJywgdGhpcy51cGRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RvcEFsbEFuaW1hdGlvbigpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgZGlzdGFuY2VcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0RGlzdGFuY2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc3RhbmNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgZGlzdGFuY2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2VcbiAgICAgKi9cbiAgICBzZXREaXN0YW5jZTogZnVuY3Rpb24gKGRpc3RhbmNlKSB7XG4gICAgICAgIHRoaXMuX2Rpc3RhbmNlID0gZGlzdGFuY2U7XG4gICAgICAgIHRoaXMuX25lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHNpemUgb2Ygb3J0aG9ncmFwaGljIHZpZXdpbmcgdm9sdW1lXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldE9ydGhvZ3JhcGhpY1NpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX29ydGhvU2l6ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHNpemUgb2Ygb3J0aG9ncmFwaGljIHZpZXdpbmcgdm9sdW1lXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemVcbiAgICAgKi9cbiAgICBzZXRPcnRob2dyYXBoaWNTaXplOiBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICB0aGlzLl9vcnRob1NpemUgPSBzaXplO1xuICAgICAgICB0aGlzLl9uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBhbHBoYSByb3RhdGlvblxuICAgICAqIEFscGhhIGFuZ2xlIGZvciB0b3AtZG93biByb3RhdGlvbi4gUG9zaXRpdmUgdG8gcm90YXRlIHRvIHRvcC5cbiAgICAgKlxuICAgICAqIFdoaWNoIG1lYW5zIGNhbWVyYSByb3RhdGlvbiBhcm91bmQgeCBheGlzLlxuICAgICAqL1xuICAgIGdldEFscGhhOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90aGV0YSAvIE1hdGguUEkgKiAxODA7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBiZXRhIHJvdGF0aW9uXG4gICAgICogQmV0YSBhbmdsZSBmb3IgbGVmdC1yaWdodCByb3RhdGlvbi4gUG9zaXRpdmUgdG8gcm90YXRlIHRvIHJpZ2h0LlxuICAgICAqXG4gICAgICogV2hpY2ggbWVhbnMgY2FtZXJhIHJvdGF0aW9uIGFyb3VuZCB5IGF4aXMuXG4gICAgICovXG4gICAgZ2V0QmV0YTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLXRoaXMuX3BoaSAvIE1hdGguUEkgKiAxODA7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBjb250cm9sIGNlbnRlclxuICAgICAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fVxuICAgICAqL1xuICAgIGdldENlbnRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2VudGVyLnRvQXJyYXkoKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IGFscGhhIHJvdGF0aW9uIGFuZ2xlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFscGhhXG4gICAgICovXG4gICAgc2V0QWxwaGE6IGZ1bmN0aW9uIChhbHBoYSkge1xuICAgICAgICBhbHBoYSA9IE1hdGgubWF4KE1hdGgubWluKHRoaXMubWF4QWxwaGEsIGFscGhhKSwgdGhpcy5taW5BbHBoYSk7XG5cbiAgICAgICAgdGhpcy5fdGhldGEgPSBhbHBoYSAvIDE4MCAqIE1hdGguUEk7XG4gICAgICAgIHRoaXMuX25lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IGJldGEgcm90YXRpb24gYW5nbGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYmV0YVxuICAgICAqL1xuICAgIHNldEJldGE6IGZ1bmN0aW9uIChiZXRhKSB7XG4gICAgICAgIGJldGEgPSBNYXRoLm1heChNYXRoLm1pbih0aGlzLm1heEJldGEsIGJldGEpLCB0aGlzLm1pbkJldGEpO1xuXG4gICAgICAgIHRoaXMuX3BoaSA9IC1iZXRhIC8gMTgwICogTWF0aC5QSTtcbiAgICAgICAgdGhpcy5fbmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgY29udHJvbCBjZW50ZXJcbiAgICAgKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSBjZW50ZXJcbiAgICAgKi9cbiAgICBzZXRDZW50ZXI6IGZ1bmN0aW9uIChjZW50ZXJBcnIpIHtcbiAgICAgICAgdGhpcy5fY2VudGVyLnNldEFycmF5KGNlbnRlckFycik7XG4gICAgfSxcblxuICAgIHNldE9wdGlvbjogZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgICAgb3B0cyA9IG9wdHMgfHwge307XG5cbiAgICAgICAgWydhdXRvUm90YXRlJywgJ2F1dG9Sb3RhdGVBZnRlclN0aWxsJyxcbiAgICAgICAgICAgICdhdXRvUm90YXRlRGlyZWN0aW9uJywgJ2F1dG9Sb3RhdGVTcGVlZCcsXG4gICAgICAgICAgICAnZGFtcGluZycsXG4gICAgICAgICAgICAnbWluRGlzdGFuY2UnLCAnbWF4RGlzdGFuY2UnLFxuICAgICAgICAgICAgJ21pbk9ydGhvZ3JhcGhpY1NpemUnLCAnbWF4T3J0aG9ncmFwaGljU2l6ZScsICdvcnRob2dyYXBoaWNBc3BlY3QnLFxuICAgICAgICAgICAgJ21pbkFscGhhJywgJ21heEFscGhhJywgJ21pbkJldGEnLCAnbWF4QmV0YScsXG4gICAgICAgICAgICAncm90YXRlU2Vuc2l0aXZpdHknLCAnem9vbVNlbnNpdGl2aXR5JywgJ3BhblNlbnNpdGl2aXR5J1xuICAgICAgICBdLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgaWYgKG9wdHNba2V5XSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpc1trZXldID0gb3B0c1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcblxuICAgICAgICBpZiAob3B0cy5kaXN0YW5jZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnNldERpc3RhbmNlKG9wdHMuZGlzdGFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLm9ydGhvZ3JhcGhpY1NpemUgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRPcnRob2dyYXBoaWNTaXplKG9wdHMub3J0aG9ncmFwaGljU2l6ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0cy5hbHBoYSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnNldEFscGhhKG9wdHMuYWxwaGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmJldGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRCZXRhKG9wdHMuYmV0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0cy5jZW50ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q2VudGVyKG9wdHMuY2VudGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICB0aGlzLnRhcmdldC51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0c1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRzLmRpc3RhbmNlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wdHMub3J0aG9ncmFwaGljU2l6ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRzLmFscGhhXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wdHMuYmV0YVxuICAgICAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IG9wdHMuY2VudGVyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmR1cmF0aW9uPTEwMDBdXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmVhc2luZz0nbGluZWFyJ11cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMuZG9uZV1cbiAgICAgKi9cbiAgICBhbmltYXRlVG86IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB2YXIgb2JqID0ge307XG4gICAgICAgIHZhciB0YXJnZXQgPSB7fTtcbiAgICAgICAgdmFyIHRpbWVsaW5lID0gdGhpcy50aW1lbGluZTtcbiAgICAgICAgaWYgKCF0aW1lbGluZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmRpc3RhbmNlICE9IG51bGwpIHtcbiAgICAgICAgICAgIG9iai5kaXN0YW5jZSA9IHRoaXMuZ2V0RGlzdGFuY2UoKTtcbiAgICAgICAgICAgIHRhcmdldC5kaXN0YW5jZSA9IG9wdHMuZGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMub3J0aG9ncmFwaGljU2l6ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBvYmoub3J0aG9ncmFwaGljU2l6ZSA9IHRoaXMuZ2V0T3J0aG9ncmFwaGljU2l6ZSgpO1xuICAgICAgICAgICAgdGFyZ2V0Lm9ydGhvZ3JhcGhpY1NpemUgPSBvcHRzLm9ydGhvZ3JhcGhpY1NpemU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuYWxwaGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgb2JqLmFscGhhID0gdGhpcy5nZXRBbHBoYSgpO1xuICAgICAgICAgICAgdGFyZ2V0LmFscGhhID0gb3B0cy5hbHBoYTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5iZXRhICE9IG51bGwpIHtcbiAgICAgICAgICAgIG9iai5iZXRhID0gdGhpcy5nZXRCZXRhKCk7XG4gICAgICAgICAgICB0YXJnZXQuYmV0YSA9IG9wdHMuYmV0YTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5jZW50ZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgb2JqLmNlbnRlciA9IHRoaXMuZ2V0Q2VudGVyKCk7XG4gICAgICAgICAgICB0YXJnZXQuY2VudGVyID0gb3B0cy5jZW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQW5pbWF0b3IoXG4gICAgICAgICAgICB0aW1lbGluZS5hbmltYXRlKG9iailcbiAgICAgICAgICAgICAgICAud2hlbihvcHRzLmR1cmF0aW9uIHx8IDEwMDAsIHRhcmdldClcbiAgICAgICAgICAgICAgICAuZHVyaW5nKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5hbHBoYSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldEFscGhhKG9iai5hbHBoYSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5iZXRhICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0QmV0YShvYmouYmV0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5kaXN0YW5jZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldERpc3RhbmNlKG9iai5kaXN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5vcnRob2dyYXBoaWNTaXplICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0T3J0aG9ncmFwaGljU2l6ZShvYmoub3J0aG9ncmFwaGljU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5jZW50ZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRDZW50ZXIob2JqLmNlbnRlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fbmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmRvbmUob3B0cy5kb25lKVxuICAgICAgICApLnN0YXJ0KG9wdHMuZWFzaW5nIHx8ICdsaW5lYXInKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3RvcCBhbGwgYW5pbWF0aW9uc1xuICAgICAqL1xuICAgIHN0b3BBbGxBbmltYXRpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9hbmltYXRvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuX2FuaW1hdG9yc1tpXS5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYW5pbWF0b3JzLmxlbmd0aCA9IDA7XG4gICAgfSxcblxuICAgIF9pc0FuaW1hdGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYW5pbWF0b3JzLmxlbmd0aCA+IDA7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDYWxsIHVwZGF0ZSBlYWNoIGZyYW1lXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBkZWx0YVRpbWUgRnJhbWUgdGltZVxuICAgICAqL1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gKGRlbHRhVGltZSkge1xuXG4gICAgICAgIGRlbHRhVGltZSA9IGRlbHRhVGltZSB8fCAxNjtcblxuICAgICAgICBpZiAodGhpcy5fcm90YXRpbmcpIHtcbiAgICAgICAgICAgIHZhciByYWRpYW4gPSAodGhpcy5hdXRvUm90YXRlRGlyZWN0aW9uID09PSAnY3cnID8gMSA6IC0xKVxuICAgICAgICAgICAgICAgICogdGhpcy5hdXRvUm90YXRlU3BlZWQgLyAxODAgKiBNYXRoLlBJO1xuICAgICAgICAgICAgdGhpcy5fcGhpIC09IHJhZGlhbiAqIGRlbHRhVGltZSAvIDEwMDA7XG4gICAgICAgICAgICB0aGlzLl9uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fcm90YXRlVmVsb2NpdHkubGVuKCkgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5fem9vbVNwZWVkKSA+IDAuMDEgfHwgdGhpcy5fcGFuVmVsb2NpdHkubGVuKCkgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuX25lZWRzVXBkYXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGaXhlZCBkZWx0YVRpbWVcbiAgICAgICAgdGhpcy5fdXBkYXRlRGlzdGFuY2VPclNpemUoTWF0aC5taW4oZGVsdGFUaW1lLCA1MCkpO1xuICAgICAgICB0aGlzLl91cGRhdGVQYW4oTWF0aC5taW4oZGVsdGFUaW1lLCA1MCkpO1xuXG4gICAgICAgIHRoaXMuX3VwZGF0ZVJvdGF0ZShNYXRoLm1pbihkZWx0YVRpbWUsIDUwKSk7XG5cbiAgICAgICAgdGhpcy5fdXBkYXRlVHJhbnNmb3JtKCk7XG5cbiAgICAgICAgdGhpcy50YXJnZXQudXBkYXRlKCk7XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCd1cGRhdGUnKTtcblxuICAgICAgICB0aGlzLl9uZWVkc1VwZGF0ZSA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICBfdXBkYXRlUm90YXRlOiBmdW5jdGlvbiAoZGVsdGFUaW1lKSB7XG4gICAgICAgIHZhciB2ZWxvY2l0eSA9IHRoaXMuX3JvdGF0ZVZlbG9jaXR5O1xuICAgICAgICB0aGlzLl9waGkgPSB2ZWxvY2l0eS55ICogZGVsdGFUaW1lIC8gMjAgKyB0aGlzLl9waGk7XG4gICAgICAgIHRoaXMuX3RoZXRhID0gdmVsb2NpdHkueCAqIGRlbHRhVGltZSAvIDIwICsgdGhpcy5fdGhldGE7XG5cbiAgICAgICAgdGhpcy5zZXRBbHBoYSh0aGlzLmdldEFscGhhKCkpO1xuICAgICAgICB0aGlzLnNldEJldGEodGhpcy5nZXRCZXRhKCkpO1xuXG4gICAgICAgIHRoaXMuX3ZlY3RvckRhbXBpbmcodmVsb2NpdHksIHRoaXMuZGFtcGluZyk7XG4gICAgfSxcblxuICAgIF91cGRhdGVEaXN0YW5jZU9yU2l6ZTogZnVuY3Rpb24gKGRlbHRhVGltZSkge1xuICAgICAgICB0aGlzLl9zZXREaXN0YW5jZSh0aGlzLl9kaXN0YW5jZSArIHRoaXMuX3pvb21TcGVlZCAqIGRlbHRhVGltZSAvIDIwKTtcbiAgICAgICAgaWYgKCEodGhpcy50YXJnZXQgaW5zdGFuY2VvZiBQZXJzcGVjdGl2ZUNhbWVyYSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldE9ydGhvU2l6ZSh0aGlzLl9vcnRob1NpemUgKyB0aGlzLl96b29tU3BlZWQgKiBkZWx0YVRpbWUgLyAyMCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl96b29tU3BlZWQgKj0gTWF0aC5wb3codGhpcy5kYW1waW5nLCBkZWx0YVRpbWUgLyAxNik7XG4gICAgfSxcblxuICAgIF9zZXREaXN0YW5jZTogZnVuY3Rpb24gKGRpc3RhbmNlKSB7XG4gICAgICAgIHRoaXMuX2Rpc3RhbmNlID0gTWF0aC5tYXgoTWF0aC5taW4oZGlzdGFuY2UsIHRoaXMubWF4RGlzdGFuY2UpLCB0aGlzLm1pbkRpc3RhbmNlKTtcbiAgICB9LFxuXG4gICAgX3NldE9ydGhvU2l6ZTogZnVuY3Rpb24gKHNpemUpIHtcbiAgICAgICAgdGhpcy5fb3J0aG9TaXplID0gTWF0aC5tYXgoTWF0aC5taW4oc2l6ZSwgdGhpcy5tYXhPcnRob2dyYXBoaWNTaXplKSwgdGhpcy5taW5PcnRob2dyYXBoaWNTaXplKTtcbiAgICAgICAgdmFyIGNhbWVyYSA9IHRoaXMudGFyZ2V0O1xuICAgICAgICB2YXIgY2FtZXJhSGVpZ2h0ID0gdGhpcy5fb3J0aG9TaXplO1xuICAgICAgICAvLyBUT0RPXG4gICAgICAgIHZhciBjYW1lcmFXaWR0aCA9IGNhbWVyYUhlaWdodCAqIHRoaXMub3J0aG9ncmFwaGljQXNwZWN0O1xuICAgICAgICBjYW1lcmEubGVmdCA9IC1jYW1lcmFXaWR0aCAvIDI7XG4gICAgICAgIGNhbWVyYS5yaWdodCA9IGNhbWVyYVdpZHRoIC8gMjtcbiAgICAgICAgY2FtZXJhLnRvcCA9IGNhbWVyYUhlaWdodCAvIDI7XG4gICAgICAgIGNhbWVyYS5ib3R0b20gPSAtY2FtZXJhSGVpZ2h0IC8gMjtcbiAgICB9LFxuXG4gICAgX3VwZGF0ZVBhbjogZnVuY3Rpb24gKGRlbHRhVGltZSkge1xuICAgICAgICB2YXIgdmVsb2NpdHkgPSB0aGlzLl9wYW5WZWxvY2l0eTtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMuX2Rpc3RhbmNlO1xuXG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldDtcbiAgICAgICAgdmFyIHlBeGlzID0gdGFyZ2V0LndvcmxkVHJhbnNmb3JtLnk7XG4gICAgICAgIHZhciB4QXhpcyA9IHRhcmdldC53b3JsZFRyYW5zZm9ybS54O1xuXG4gICAgICAgIC8vIFBFTkRJTkdcbiAgICAgICAgdGhpcy5fY2VudGVyXG4gICAgICAgICAgICAuc2NhbGVBbmRBZGQoeEF4aXMsIC12ZWxvY2l0eS54ICogbGVuIC8gMjAwKVxuICAgICAgICAgICAgLnNjYWxlQW5kQWRkKHlBeGlzLCAtdmVsb2NpdHkueSAqIGxlbiAvIDIwMCk7XG5cbiAgICAgICAgdGhpcy5fdmVjdG9yRGFtcGluZyh2ZWxvY2l0eSwgMCk7XG5cbiAgICAgICAgdmVsb2NpdHkueCA9IHZlbG9jaXR5LnkgPSAwO1xuICAgIH0sXG5cbiAgICBfdXBkYXRlVHJhbnNmb3JtOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjYW1lcmEgPSB0aGlzLnRhcmdldDtcblxuICAgICAgICB2YXIgZGlyID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgdmFyIHRoZXRhID0gdGhpcy5fdGhldGEgKyBNYXRoLlBJIC8gMjtcbiAgICAgICAgdmFyIHBoaSA9IHRoaXMuX3BoaSArIE1hdGguUEkgLyAyO1xuICAgICAgICB2YXIgciA9IE1hdGguc2luKHRoZXRhKTtcblxuICAgICAgICBkaXIueCA9IHIgKiBNYXRoLmNvcyhwaGkpO1xuICAgICAgICBkaXIueSA9IC1NYXRoLmNvcyh0aGV0YSk7XG4gICAgICAgIGRpci56ID0gciAqIE1hdGguc2luKHBoaSk7XG5cbiAgICAgICAgY2FtZXJhLnBvc2l0aW9uLmNvcHkodGhpcy5fY2VudGVyKS5zY2FsZUFuZEFkZChkaXIsIHRoaXMuX2Rpc3RhbmNlKTtcbiAgICAgICAgY2FtZXJhLnJvdGF0aW9uLmlkZW50aXR5KClcbiAgICAgICAgICAgIC8vIEZpcnN0IGFyb3VuZCB5LCB0aGVuIGFyb3VuZCB4XG4gICAgICAgICAgICAucm90YXRlWSgtdGhpcy5fcGhpKVxuICAgICAgICAgICAgLnJvdGF0ZVgoLXRoaXMuX3RoZXRhKTtcbiAgICB9LFxuXG4gICAgX3N0YXJ0Q291bnRpbmdTdGlsbDogZnVuY3Rpb24gKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fc3RpbGxUaW1lb3V0KTtcblxuICAgICAgICB2YXIgdGltZSA9IHRoaXMuYXV0b1JvdGF0ZUFmdGVyU3RpbGw7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgaWYgKCFpc05hTih0aW1lKSAmJiB0aW1lID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fc3RpbGxUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fcm90YXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfSwgdGltZSAqIDEwMDApO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIF92ZWN0b3JEYW1waW5nOiBmdW5jdGlvbiAodiwgZGFtcGluZykge1xuICAgICAgICB2YXIgc3BlZWQgPSB2LmxlbigpO1xuICAgICAgICBzcGVlZCA9IHNwZWVkICogZGFtcGluZztcbiAgICAgICAgaWYgKHNwZWVkIDwgMWUtNCkge1xuICAgICAgICAgICAgc3BlZWQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHYubm9ybWFsaXplKCkuc2NhbGUoc3BlZWQpO1xuICAgIH0sXG5cbiAgICBkZWNvbXBvc2VUcmFuc2Zvcm06IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50YXJnZXQudXBkYXRlV29ybGRUcmFuc2Zvcm0oKTtcblxuICAgICAgICB2YXIgZm9yd2FyZCA9IHRoaXMudGFyZ2V0LndvcmxkVHJhbnNmb3JtLno7XG4gICAgICAgIHZhciBhbHBoYSA9IE1hdGguYXNpbihmb3J3YXJkLnkpO1xuICAgICAgICB2YXIgYmV0YSA9IE1hdGguYXRhbjIoZm9yd2FyZC54LCBmb3J3YXJkLnopO1xuXG4gICAgICAgIHRoaXMuX3RoZXRhID0gYWxwaGE7XG4gICAgICAgIHRoaXMuX3BoaSA9IC1iZXRhO1xuXG4gICAgICAgIHRoaXMuc2V0QmV0YSh0aGlzLmdldEJldGEoKSk7XG4gICAgICAgIHRoaXMuc2V0QWxwaGEodGhpcy5nZXRBbHBoYSgpKTtcblxuICAgICAgICB0aGlzLl9zZXREaXN0YW5jZSh0aGlzLnRhcmdldC5wb3NpdGlvbi5kaXN0KHRoaXMuX2NlbnRlcikpO1xuICAgICAgICBpZiAoISh0aGlzLnRhcmdldCBpbnN0YW5jZW9mIFBlcnNwZWN0aXZlQ2FtZXJhKSl7XG4gICAgICAgICAgICB0aGlzLl9zZXRPcnRob1NpemUodGhpcy50YXJnZXQudG9wIC0gdGhpcy50YXJnZXQuYm90dG9tKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfbW91c2VEb3duSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzQW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgeCA9IGUuY2xpZW50WDtcbiAgICAgICAgdmFyIHkgPSBlLmNsaWVudFk7XG4gICAgICAgIC8vIFRvdWNoXG4gICAgICAgIGlmIChlLnRhcmdldFRvdWNoZXMpIHtcbiAgICAgICAgICAgIHZhciB0b3VjaCA9IGUudGFyZ2V0VG91Y2hlc1swXTtcbiAgICAgICAgICAgIHggPSB0b3VjaC5jbGllbnRYO1xuICAgICAgICAgICAgeSA9IHRvdWNoLmNsaWVudFk7XG5cbiAgICAgICAgICAgIHRoaXMuX21vZGUgPSAncm90YXRlJztcblxuICAgICAgICAgICAgdGhpcy5fcHJvY2Vzc0dlc3R1cmUoZSwgJ3N0YXJ0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoZS5idXR0b24gPT09IE1PVVNFX0JVVFRPTl9LRVlfTUFQW3RoaXMucm90YXRlTW91c2VCdXR0b25dKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbW9kZSA9ICdyb3RhdGUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZS5idXR0b24gPT09IE1PVVNFX0JVVFRPTl9LRVlfTUFQW3RoaXMucGFuTW91c2VCdXR0b25dKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbW9kZSA9ICdwYW4nO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVmVuZG9ycyBsaWtlIE1vemlsbGEgcHJvdmlkZSBhIG1vdXNlLWRyaXZlbiBwYW5uaW5nIGZlYXR1cmVcbiAgICAgICAgICAgICAgICAgKiB0aGF0IGlzIGFjdGl2YXRlZCB3aGVuIHRoZSBtaWRkbGUgbW91c2UgYnV0dG9uIGlzIHByZXNzZWQuXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBAc2VlIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby91aWV2ZW50cy8jZXZlbnQtdHlwZS1tb3VzZWRvd25cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb2RlID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkb20gPSB0aGlzLmRvbUVsZW1lbnQ7XG4gICAgICAgIHZlbmRvci5hZGRFdmVudExpc3RlbmVyKGRvbSwgJ3RvdWNobW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICB2ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lcihkb20sICd0b3VjaGVuZCcsIHRoaXMuX21vdXNlVXBIYW5kbGVyKTtcblxuICAgICAgICB2ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lcihkb20sICdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmVIYW5kbGVyKTtcbiAgICAgICAgdmVuZG9yLmFkZEV2ZW50TGlzdGVuZXIoZG9tLCAnbW91c2V1cCcsIHRoaXMuX21vdXNlVXBIYW5kbGVyKTtcbiAgICAgICAgdmVuZG9yLmFkZEV2ZW50TGlzdGVuZXIoZG9tLCAnbW91c2VvdXQnLCB0aGlzLl9tb3VzZVVwSGFuZGxlcik7XG5cbiAgICAgICAgLy8gUmVzZXQgcm90YXRlIHZlbG9jaXR5XG4gICAgICAgIHRoaXMuX3JvdGF0ZVZlbG9jaXR5LnNldCgwLCAwKTtcbiAgICAgICAgdGhpcy5fcm90YXRpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuYXV0b1JvdGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5fc3RhcnRDb3VudGluZ1N0aWxsKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9tb3VzZVggPSB4O1xuICAgICAgICB0aGlzLl9tb3VzZVkgPSB5O1xuICAgIH0sXG5cbiAgICBfbW91c2VNb3ZlSGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzQW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgeCA9IGUuY2xpZW50WDtcbiAgICAgICAgdmFyIHkgPSBlLmNsaWVudFk7XG5cbiAgICAgICAgdmFyIGhhdmVHZXN0dXJlO1xuICAgICAgICAvLyBUb3VjaFxuICAgICAgICBpZiAoZS50YXJnZXRUb3VjaGVzKSB7XG4gICAgICAgICAgICB2YXIgdG91Y2ggPSBlLnRhcmdldFRvdWNoZXNbMF07XG4gICAgICAgICAgICB4ID0gdG91Y2guY2xpZW50WDtcbiAgICAgICAgICAgIHkgPSB0b3VjaC5jbGllbnRZO1xuXG4gICAgICAgICAgICBoYXZlR2VzdHVyZSA9IHRoaXMuX3Byb2Nlc3NHZXN0dXJlKGUsICdjaGFuZ2UnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYW5TZW5zaXRpdml0eSA9IGNvbnZlcnRUb0FycmF5KHRoaXMucGFuU2Vuc2l0aXZpdHkpO1xuICAgICAgICB2YXIgcm90YXRlU2Vuc2l0aXZpdHkgPSBjb252ZXJ0VG9BcnJheSh0aGlzLnJvdGF0ZVNlbnNpdGl2aXR5KTtcblxuICAgICAgICBpZiAoIWhhdmVHZXN0dXJlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fbW9kZSA9PT0gJ3JvdGF0ZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yb3RhdGVWZWxvY2l0eS55ICs9ICh4IC0gdGhpcy5fbW91c2VYKSAvIHRoaXMuZG9tRWxlbWVudC5jbGllbnRXaWR0aCAqIDIgKiByb3RhdGVTZW5zaXRpdml0eVswXTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yb3RhdGVWZWxvY2l0eS54ICs9ICh5IC0gdGhpcy5fbW91c2VZKSAvIHRoaXMuZG9tRWxlbWVudC5jbGllbnRIZWlnaHQgKiAyICogcm90YXRlU2Vuc2l0aXZpdHlbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9tb2RlID09PSAncGFuJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhblZlbG9jaXR5LnggKz0gKHggLSB0aGlzLl9tb3VzZVgpIC8gdGhpcy5kb21FbGVtZW50LmNsaWVudFdpZHRoICogcGFuU2Vuc2l0aXZpdHlbMF0gKiA0MDA7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGFuVmVsb2NpdHkueSArPSAoLXkgKyB0aGlzLl9tb3VzZVkpIC8gdGhpcy5kb21FbGVtZW50LmNsaWVudEhlaWdodCAqIHBhblNlbnNpdGl2aXR5WzFdICogNDAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fbW91c2VYID0geDtcbiAgICAgICAgdGhpcy5fbW91c2VZID0geTtcblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0ICYmIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9LFxuXG4gICAgX21vdXNlV2hlZWxIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAodGhpcy5faXNBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZWx0YSA9IGUuZGVsdGFZO1xuICAgICAgICBpZiAoZGVsdGEgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl96b29tSGFuZGxlcihlLCBkZWx0YSA+IDAgPyAxIDogLTEpO1xuICAgIH0sXG5cbiAgICBfcGluY2hIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAodGhpcy5faXNBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3pvb21IYW5kbGVyKGUsIGUucGluY2hTY2FsZSA+IDEgPyAwLjQgOiAtMC40KTtcbiAgICB9LFxuXG4gICAgX3pvb21IYW5kbGVyOiBmdW5jdGlvbiAoZSwgZGVsdGEpIHtcblxuICAgICAgICB2YXIgc3BlZWQ7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldCBpbnN0YW5jZW9mIFBlcnNwZWN0aXZlQ2FtZXJhKSB7XG4gICAgICAgICAgICBzcGVlZCA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKFxuICAgICAgICAgICAgICAgIHRoaXMuX2Rpc3RhbmNlIC0gdGhpcy5taW5EaXN0YW5jZSxcbiAgICAgICAgICAgICAgICB0aGlzLm1heERpc3RhbmNlIC0gdGhpcy5fZGlzdGFuY2VcbiAgICAgICAgICAgICkpIC8gMjAsIDAuNSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzcGVlZCA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKFxuICAgICAgICAgICAgICAgIHRoaXMuX29ydGhvU2l6ZSAtIHRoaXMubWluT3J0aG9ncmFwaGljU2l6ZSxcbiAgICAgICAgICAgICAgICB0aGlzLm1heE9ydGhvZ3JhcGhpY1NpemUgLSB0aGlzLl9vcnRob1NpemVcbiAgICAgICAgICAgICkpIC8gMjAsIDAuNSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl96b29tU3BlZWQgPSAoZGVsdGEgPiAwID8gLTEgOiAxKSAqIHNwZWVkICogdGhpcy56b29tU2Vuc2l0aXZpdHk7XG5cbiAgICAgICAgdGhpcy5fcm90YXRpbmcgPSBmYWxzZTtcblxuICAgICAgICBpZiAodGhpcy5hdXRvUm90YXRlICYmIHRoaXMuX21vZGUgPT09ICdyb3RhdGUnKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGFydENvdW50aW5nU3RpbGwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQgJiYgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sXG5cbiAgICBfbW91c2VVcEhhbmRsZXI6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgZG9tID0gdGhpcy5kb21FbGVtZW50O1xuICAgICAgICB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb20sICd0b3VjaG1vdmUnLCB0aGlzLl9tb3VzZU1vdmVIYW5kbGVyKTtcbiAgICAgICAgdmVuZG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9tLCAndG91Y2hlbmQnLCB0aGlzLl9tb3VzZVVwSGFuZGxlcik7XG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvbSwgJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb20sICdtb3VzZXVwJywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1xuICAgICAgICB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb20sICdtb3VzZW91dCcsIHRoaXMuX21vdXNlVXBIYW5kbGVyKTtcblxuICAgICAgICB0aGlzLl9wcm9jZXNzR2VzdHVyZShldmVudCwgJ2VuZCcpO1xuICAgIH0sXG5cbiAgICBfYWRkQW5pbWF0b3I6IGZ1bmN0aW9uIChhbmltYXRvcikge1xuICAgICAgICB2YXIgYW5pbWF0b3JzID0gdGhpcy5fYW5pbWF0b3JzO1xuICAgICAgICBhbmltYXRvcnMucHVzaChhbmltYXRvcik7XG4gICAgICAgIGFuaW1hdG9yLmRvbmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlkeCA9IGFuaW1hdG9ycy5pbmRleE9mKGFuaW1hdG9yKTtcbiAgICAgICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgICAgIGFuaW1hdG9ycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhbmltYXRvcjtcbiAgICB9LFxuXG5cbiAgICBfcHJvY2Vzc0dlc3R1cmU6IGZ1bmN0aW9uIChldmVudCwgc3RhZ2UpIHtcbiAgICAgICAgdmFyIGdlc3R1cmVNZ3IgPSB0aGlzLl9nZXN0dXJlTWdyO1xuXG4gICAgICAgIHN0YWdlID09PSAnc3RhcnQnICYmIGdlc3R1cmVNZ3IuY2xlYXIoKTtcblxuICAgICAgICB2YXIgZ2VzdHVyZUluZm8gPSBnZXN0dXJlTWdyLnJlY29nbml6ZShcbiAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHRoaXMuZG9tRWxlbWVudFxuICAgICAgICApO1xuXG4gICAgICAgIHN0YWdlID09PSAnZW5kJyAmJiBnZXN0dXJlTWdyLmNsZWFyKCk7XG5cbiAgICAgICAgLy8gRG8gbm90IGRvIGFueSBwcmV2ZW50RGVmYXVsdCBoZXJlLiBVcHBlciBhcHBsaWNhdGlvbiBkbyB0aGF0IGlmIG5lY2Vzc2FyeS5cbiAgICAgICAgaWYgKGdlc3R1cmVJbmZvKSB7XG4gICAgICAgICAgICB2YXIgdHlwZSA9IGdlc3R1cmVJbmZvLnR5cGU7XG4gICAgICAgICAgICBldmVudC5nZXN0dXJlRXZlbnQgPSB0eXBlO1xuXG4gICAgICAgICAgICB0aGlzLl9waW5jaEhhbmRsZXIoZ2VzdHVyZUluZm8uZXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdlc3R1cmVJbmZvO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIElmIGF1dG8gcm90YXRlIHRoZSB0YXJnZXRcbiAqIEB0eXBlIHtib29sZWFufVxuICogQGRlZmF1bHQgZmFsc2VcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KE9yYml0Q29udHJvbC5wcm90b3R5cGUsICdhdXRvUm90YXRlJywge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b1JvdGF0ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICB0aGlzLl9hdXRvUm90YXRlID0gdmFsO1xuICAgICAgICB0aGlzLl9yb3RhdGluZyA9IHZhbDtcbiAgICB9XG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KE9yYml0Q29udHJvbC5wcm90b3R5cGUsICd0YXJnZXQnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXJnZXQ7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgaWYgKHZhbCAmJiB2YWwudGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLnNldENlbnRlcih2YWwudGFyZ2V0LnRvQXJyYXkoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdGFyZ2V0ID0gdmFsO1xuICAgICAgICB0aGlzLmRlY29tcG9zZVRyYW5zZm9ybSgpO1xuICAgIH1cbn0pO1xuXG5cbmV4cG9ydCBkZWZhdWx0IE9yYml0Q29udHJvbDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvcGx1Z2luL09yYml0Q29udHJvbC5qc1xuLy8gbW9kdWxlIGlkID0gMTg4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///188\n");

/***/ }),
/* 189 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n/**\n * StaticGeometry can not be changed once they've been setup\n */\n\n/**\n * @constructor clay.StaticGeometry\n * @extends clay.Geometry\n */\nvar StaticGeometry = __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */].extend({\n    dynamic: false\n});\n/* unused harmony default export */ var _unused_webpack_default_export = (StaticGeometry);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvU3RhdGljR2VvbWV0cnkuanM/MmRmZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFN0YXRpY0dlb21ldHJ5IGNhbiBub3QgYmUgY2hhbmdlZCBvbmNlIHRoZXkndmUgYmVlbiBzZXR1cFxuICovXG5pbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi9HZW9tZXRyeSc7XG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LlN0YXRpY0dlb21ldHJ5XG4gKiBAZXh0ZW5kcyBjbGF5Lkdlb21ldHJ5XG4gKi9cbnZhciBTdGF0aWNHZW9tZXRyeSA9IEdlb21ldHJ5LmV4dGVuZCh7XG4gICAgZHluYW1pYzogZmFsc2Vcbn0pO1xuZXhwb3J0IGRlZmF1bHQgU3RhdGljR2VvbWV0cnk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL1N0YXRpY0dlb21ldHJ5LmpzXG4vLyBtb2R1bGUgaWQgPSAxODlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///189\n");

/***/ }),
/* 190 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("// KTX loader\n// Modified from https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/KTXLoader.js\n\nvar HEADER_LEN = 12 + (13 * 4); // identifier + header elements (not including key value meta-data pairs)\n\nfunction getUint32(buffer, offset, littleEndian) {\n    var a;\n    var b;\n    var c;\n    var d;\n    if (littleEndian) {\n        a = buffer[offset];\n        b = buffer[offset + 1];\n        c = buffer[offset + 2];\n        d = buffer[offset + 3];\n    }\n    else {\n        a = buffer[offset + 3];\n        b = buffer[offset + 2];\n        c = buffer[offset + 1];\n        d = buffer[offset];\n    }\n    return ((d << 24) >>> 0) + ((c << 16) | (b << 8) | a);\n}\n\nfunction parse(arraybuffer, loadMipmaps) {\n\n    var facesExpected = 1;\n    // Test that it is a ktx formatted file, based on the first 12 bytes, character representation is:\n    // '', 'K', 'T', 'X', ' ', '1', '1', '', '\\r', '\\n', '\\x1A', '\\n'\n    // 0xAB, 0x4B, 0x54, 0x58, 0x20, 0x31, 0x31, 0xBB, 0x0D, 0x0A, 0x1A, 0x0A\n    var data = new Uint8Array(arraybuffer);\n    if (data[0] !== 0xAB\n        || data[1] !== 0x4B\n        || data[2] !== 0x54\n        || data[3] !== 0x58\n        || data[4] !== 0x20\n        || data[5] !== 0x31\n        || data[6] !== 0x31\n        || data[7] !== 0xBB\n        || data[8] !== 0x0D\n        || data[9] !== 0x0A\n        || data[10] !== 0x1A\n        || data[11] !== 0x0A) {\n        console.error('texture missing KTX identifier' );\n        return;\n\n    }\n\n    // load the reset of the header in native 32 bit uint\n    var dataSize = Uint32Array.BYTES_PER_ELEMENT;\n    var offset = 12;\n    // var headerDataView = new DataView( this.arrayBuffer, 12, 13 * dataSize );\n    var endianness = getUint32(data, offset, true);\n    var littleEndian = endianness === 0x04030201;\n\n    var glType = getUint32(data, offset + 1 * dataSize, littleEndian); // must be 0 for compressed textures\n    var glTypeSize = getUint32(data, offset + 2 * dataSize, littleEndian); // must be 1 for compressed textures\n    var glFormat = getUint32(data, offset + 3 * dataSize, littleEndian); // must be 0 for compressed textures\n    var glInternalFormat = getUint32(data, offset + 4 * dataSize, littleEndian); // the value of arg passed to gl.compressedTexImage2D(,,x,,,,)\n    var glBaseInternalFormat = getUint32(data, offset + 5 * dataSize, littleEndian); // specify GL_RGB, GL_RGBA, GL_ALPHA, etc (un-compressed only)\n    var pixelWidth = getUint32(data, offset + 6 * dataSize, littleEndian); // level 0 value of arg passed to gl.compressedTexImage2D(,,,x,,,)\n    var pixelHeight = getUint32(data, offset + 7 * dataSize, littleEndian); // level 0 value of arg passed to gl.compressedTexImage2D(,,,,x,,)\n    var pixelDepth = getUint32(data, offset + 8 * dataSize, littleEndian); // level 0 value of arg passed to gl.compressedTexImage3D(,,,,,x,,)\n    var numberOfArrayElements = getUint32(data, offset + 9 * dataSize, littleEndian); // used for texture arrays\n    var numberOfFaces = getUint32(data, offset + 10 * dataSize, littleEndian); // used for cubemap textures, should either be 1 or 6\n    var numberOfMipmapLevels = getUint32(data, offset + 11 * dataSize, littleEndian); // number of levels; disregard possibility of 0 for compressed textures\n    var bytesOfKeyValueData = getUint32(data, offset + 12 * dataSize, littleEndian); // the amount of space after the header for meta-data\n\n    // Make sure we have a compressed type.  Not only reduces work, but probably better to let dev know they are not compressing.\n    if (glType !== 0) {\n        console.warn('only compressed formats currently supported');\n        return;\n    }\n    else {\n        // value of zero is an indication to generate mipmaps @ runtime.  Not usually allowed for compressed, so disregard.\n        numberOfMipmapLevels = Math.max(1, numberOfMipmapLevels);\n    }\n    if (pixelHeight === 0 || pixelDepth !== 0) {\n        console.warn('only 2D textures currently supported');\n        return;\n    }\n    if (numberOfArrayElements !== 0) {\n        console.warn('texture arrays not currently supported');\n        return;\n    }\n    if (numberOfFaces !== facesExpected) {\n        console.warn('number of faces expected' + facesExpected + ', but found ' + numberOfFaces );\n        return;\n    }\n\n    var mipmaps = [];\n\n    // initialize width & height for level 1\n    var dataOffset = HEADER_LEN + bytesOfKeyValueData;\n    var width = pixelWidth;\n    var height = pixelHeight;\n    var mipmapCount = loadMipmaps ? numberOfMipmapLevels : 1;\n\n    for (var level = 0; level < mipmapCount; level ++) {\n        var imageSize = new Int32Array(arraybuffer, dataOffset, 1)[0]; // size per face, since not supporting array cubemaps\n        for (var face = 0; face < numberOfFaces; face ++) {\n            var byteArray = new Uint8Array(arraybuffer, dataOffset + 4, imageSize);\n            mipmaps.push({\n                pixels: byteArray,\n                width: width,\n                height: height\n            });\n\n            dataOffset += imageSize + 4; // size of the image + 4 for the imageSize field\n            dataOffset += 3 - ( ( imageSize + 3 ) % 4 ); // add padding for odd sized image\n        }\n        width = Math.max(1.0, width * 0.5);\n        height = Math.max(1.0, height * 0.5);\n    }\n    var res = {\n        width: pixelWidth,\n        height: pixelHeight,\n        format: glInternalFormat\n    };\n    if (loadMipmaps) {\n        res.mipmaps = mipmaps;\n        res.mipmapCount = numberOfMipmapLevels;\n    }\n    else {\n        res.pixels = mipmaps[0].pixels;\n    }\n    return res;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    parse: parse\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvdXRpbC9rdHguanM/ODkzYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBLVFggbG9hZGVyXG4vLyBNb2RpZmllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvYmxvYi9kZXYvZXhhbXBsZXMvanMvbG9hZGVycy9LVFhMb2FkZXIuanNcblxudmFyIEhFQURFUl9MRU4gPSAxMiArICgxMyAqIDQpOyAvLyBpZGVudGlmaWVyICsgaGVhZGVyIGVsZW1lbnRzIChub3QgaW5jbHVkaW5nIGtleSB2YWx1ZSBtZXRhLWRhdGEgcGFpcnMpXG5cbmZ1bmN0aW9uIGdldFVpbnQzMihidWZmZXIsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgdmFyIGE7XG4gICAgdmFyIGI7XG4gICAgdmFyIGM7XG4gICAgdmFyIGQ7XG4gICAgaWYgKGxpdHRsZUVuZGlhbikge1xuICAgICAgICBhID0gYnVmZmVyW29mZnNldF07XG4gICAgICAgIGIgPSBidWZmZXJbb2Zmc2V0ICsgMV07XG4gICAgICAgIGMgPSBidWZmZXJbb2Zmc2V0ICsgMl07XG4gICAgICAgIGQgPSBidWZmZXJbb2Zmc2V0ICsgM107XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhID0gYnVmZmVyW29mZnNldCArIDNdO1xuICAgICAgICBiID0gYnVmZmVyW29mZnNldCArIDJdO1xuICAgICAgICBjID0gYnVmZmVyW29mZnNldCArIDFdO1xuICAgICAgICBkID0gYnVmZmVyW29mZnNldF07XG4gICAgfVxuICAgIHJldHVybiAoKGQgPDwgMjQpID4+PiAwKSArICgoYyA8PCAxNikgfCAoYiA8PCA4KSB8IGEpO1xufVxuXG5mdW5jdGlvbiBwYXJzZShhcnJheWJ1ZmZlciwgbG9hZE1pcG1hcHMpIHtcblxuICAgIHZhciBmYWNlc0V4cGVjdGVkID0gMTtcbiAgICAvLyBUZXN0IHRoYXQgaXQgaXMgYSBrdHggZm9ybWF0dGVkIGZpbGUsIGJhc2VkIG9uIHRoZSBmaXJzdCAxMiBieXRlcywgY2hhcmFjdGVyIHJlcHJlc2VudGF0aW9uIGlzOlxuICAgIC8vICfCtCcsICdLJywgJ1QnLCAnWCcsICcgJywgJzEnLCAnMScsICfCqicsICdcXHInLCAnXFxuJywgJ1xceDFBJywgJ1xcbidcbiAgICAvLyAweEFCLCAweDRCLCAweDU0LCAweDU4LCAweDIwLCAweDMxLCAweDMxLCAweEJCLCAweDBELCAweDBBLCAweDFBLCAweDBBXG4gICAgdmFyIGRhdGEgPSBuZXcgVWludDhBcnJheShhcnJheWJ1ZmZlcik7XG4gICAgaWYgKGRhdGFbMF0gIT09IDB4QUJcbiAgICAgICAgfHwgZGF0YVsxXSAhPT0gMHg0QlxuICAgICAgICB8fCBkYXRhWzJdICE9PSAweDU0XG4gICAgICAgIHx8IGRhdGFbM10gIT09IDB4NThcbiAgICAgICAgfHwgZGF0YVs0XSAhPT0gMHgyMFxuICAgICAgICB8fCBkYXRhWzVdICE9PSAweDMxXG4gICAgICAgIHx8IGRhdGFbNl0gIT09IDB4MzFcbiAgICAgICAgfHwgZGF0YVs3XSAhPT0gMHhCQlxuICAgICAgICB8fCBkYXRhWzhdICE9PSAweDBEXG4gICAgICAgIHx8IGRhdGFbOV0gIT09IDB4MEFcbiAgICAgICAgfHwgZGF0YVsxMF0gIT09IDB4MUFcbiAgICAgICAgfHwgZGF0YVsxMV0gIT09IDB4MEEpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcigndGV4dHVyZSBtaXNzaW5nIEtUWCBpZGVudGlmaWVyJyApO1xuICAgICAgICByZXR1cm47XG5cbiAgICB9XG5cbiAgICAvLyBsb2FkIHRoZSByZXNldCBvZiB0aGUgaGVhZGVyIGluIG5hdGl2ZSAzMiBiaXQgdWludFxuICAgIHZhciBkYXRhU2l6ZSA9IFVpbnQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UO1xuICAgIHZhciBvZmZzZXQgPSAxMjtcbiAgICAvLyB2YXIgaGVhZGVyRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoIHRoaXMuYXJyYXlCdWZmZXIsIDEyLCAxMyAqIGRhdGFTaXplICk7XG4gICAgdmFyIGVuZGlhbm5lc3MgPSBnZXRVaW50MzIoZGF0YSwgb2Zmc2V0LCB0cnVlKTtcbiAgICB2YXIgbGl0dGxlRW5kaWFuID0gZW5kaWFubmVzcyA9PT0gMHgwNDAzMDIwMTtcblxuICAgIHZhciBnbFR5cGUgPSBnZXRVaW50MzIoZGF0YSwgb2Zmc2V0ICsgMSAqIGRhdGFTaXplLCBsaXR0bGVFbmRpYW4pOyAvLyBtdXN0IGJlIDAgZm9yIGNvbXByZXNzZWQgdGV4dHVyZXNcbiAgICB2YXIgZ2xUeXBlU2l6ZSA9IGdldFVpbnQzMihkYXRhLCBvZmZzZXQgKyAyICogZGF0YVNpemUsIGxpdHRsZUVuZGlhbik7IC8vIG11c3QgYmUgMSBmb3IgY29tcHJlc3NlZCB0ZXh0dXJlc1xuICAgIHZhciBnbEZvcm1hdCA9IGdldFVpbnQzMihkYXRhLCBvZmZzZXQgKyAzICogZGF0YVNpemUsIGxpdHRsZUVuZGlhbik7IC8vIG11c3QgYmUgMCBmb3IgY29tcHJlc3NlZCB0ZXh0dXJlc1xuICAgIHZhciBnbEludGVybmFsRm9ybWF0ID0gZ2V0VWludDMyKGRhdGEsIG9mZnNldCArIDQgKiBkYXRhU2l6ZSwgbGl0dGxlRW5kaWFuKTsgLy8gdGhlIHZhbHVlIG9mIGFyZyBwYXNzZWQgdG8gZ2wuY29tcHJlc3NlZFRleEltYWdlMkQoLCx4LCwsLClcbiAgICB2YXIgZ2xCYXNlSW50ZXJuYWxGb3JtYXQgPSBnZXRVaW50MzIoZGF0YSwgb2Zmc2V0ICsgNSAqIGRhdGFTaXplLCBsaXR0bGVFbmRpYW4pOyAvLyBzcGVjaWZ5IEdMX1JHQiwgR0xfUkdCQSwgR0xfQUxQSEEsIGV0YyAodW4tY29tcHJlc3NlZCBvbmx5KVxuICAgIHZhciBwaXhlbFdpZHRoID0gZ2V0VWludDMyKGRhdGEsIG9mZnNldCArIDYgKiBkYXRhU2l6ZSwgbGl0dGxlRW5kaWFuKTsgLy8gbGV2ZWwgMCB2YWx1ZSBvZiBhcmcgcGFzc2VkIHRvIGdsLmNvbXByZXNzZWRUZXhJbWFnZTJEKCwsLHgsLCwpXG4gICAgdmFyIHBpeGVsSGVpZ2h0ID0gZ2V0VWludDMyKGRhdGEsIG9mZnNldCArIDcgKiBkYXRhU2l6ZSwgbGl0dGxlRW5kaWFuKTsgLy8gbGV2ZWwgMCB2YWx1ZSBvZiBhcmcgcGFzc2VkIHRvIGdsLmNvbXByZXNzZWRUZXhJbWFnZTJEKCwsLCx4LCwpXG4gICAgdmFyIHBpeGVsRGVwdGggPSBnZXRVaW50MzIoZGF0YSwgb2Zmc2V0ICsgOCAqIGRhdGFTaXplLCBsaXR0bGVFbmRpYW4pOyAvLyBsZXZlbCAwIHZhbHVlIG9mIGFyZyBwYXNzZWQgdG8gZ2wuY29tcHJlc3NlZFRleEltYWdlM0QoLCwsLCx4LCwpXG4gICAgdmFyIG51bWJlck9mQXJyYXlFbGVtZW50cyA9IGdldFVpbnQzMihkYXRhLCBvZmZzZXQgKyA5ICogZGF0YVNpemUsIGxpdHRsZUVuZGlhbik7IC8vIHVzZWQgZm9yIHRleHR1cmUgYXJyYXlzXG4gICAgdmFyIG51bWJlck9mRmFjZXMgPSBnZXRVaW50MzIoZGF0YSwgb2Zmc2V0ICsgMTAgKiBkYXRhU2l6ZSwgbGl0dGxlRW5kaWFuKTsgLy8gdXNlZCBmb3IgY3ViZW1hcCB0ZXh0dXJlcywgc2hvdWxkIGVpdGhlciBiZSAxIG9yIDZcbiAgICB2YXIgbnVtYmVyT2ZNaXBtYXBMZXZlbHMgPSBnZXRVaW50MzIoZGF0YSwgb2Zmc2V0ICsgMTEgKiBkYXRhU2l6ZSwgbGl0dGxlRW5kaWFuKTsgLy8gbnVtYmVyIG9mIGxldmVsczsgZGlzcmVnYXJkIHBvc3NpYmlsaXR5IG9mIDAgZm9yIGNvbXByZXNzZWQgdGV4dHVyZXNcbiAgICB2YXIgYnl0ZXNPZktleVZhbHVlRGF0YSA9IGdldFVpbnQzMihkYXRhLCBvZmZzZXQgKyAxMiAqIGRhdGFTaXplLCBsaXR0bGVFbmRpYW4pOyAvLyB0aGUgYW1vdW50IG9mIHNwYWNlIGFmdGVyIHRoZSBoZWFkZXIgZm9yIG1ldGEtZGF0YVxuXG4gICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBjb21wcmVzc2VkIHR5cGUuICBOb3Qgb25seSByZWR1Y2VzIHdvcmssIGJ1dCBwcm9iYWJseSBiZXR0ZXIgdG8gbGV0IGRldiBrbm93IHRoZXkgYXJlIG5vdCBjb21wcmVzc2luZy5cbiAgICBpZiAoZ2xUeXBlICE9PSAwKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybignb25seSBjb21wcmVzc2VkIGZvcm1hdHMgY3VycmVudGx5IHN1cHBvcnRlZCcpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyB2YWx1ZSBvZiB6ZXJvIGlzIGFuIGluZGljYXRpb24gdG8gZ2VuZXJhdGUgbWlwbWFwcyBAIHJ1bnRpbWUuICBOb3QgdXN1YWxseSBhbGxvd2VkIGZvciBjb21wcmVzc2VkLCBzbyBkaXNyZWdhcmQuXG4gICAgICAgIG51bWJlck9mTWlwbWFwTGV2ZWxzID0gTWF0aC5tYXgoMSwgbnVtYmVyT2ZNaXBtYXBMZXZlbHMpO1xuICAgIH1cbiAgICBpZiAocGl4ZWxIZWlnaHQgPT09IDAgfHwgcGl4ZWxEZXB0aCAhPT0gMCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ29ubHkgMkQgdGV4dHVyZXMgY3VycmVudGx5IHN1cHBvcnRlZCcpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChudW1iZXJPZkFycmF5RWxlbWVudHMgIT09IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKCd0ZXh0dXJlIGFycmF5cyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCcpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChudW1iZXJPZkZhY2VzICE9PSBmYWNlc0V4cGVjdGVkKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignbnVtYmVyIG9mIGZhY2VzIGV4cGVjdGVkJyArIGZhY2VzRXhwZWN0ZWQgKyAnLCBidXQgZm91bmQgJyArIG51bWJlck9mRmFjZXMgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtaXBtYXBzID0gW107XG5cbiAgICAvLyBpbml0aWFsaXplIHdpZHRoICYgaGVpZ2h0IGZvciBsZXZlbCAxXG4gICAgdmFyIGRhdGFPZmZzZXQgPSBIRUFERVJfTEVOICsgYnl0ZXNPZktleVZhbHVlRGF0YTtcbiAgICB2YXIgd2lkdGggPSBwaXhlbFdpZHRoO1xuICAgIHZhciBoZWlnaHQgPSBwaXhlbEhlaWdodDtcbiAgICB2YXIgbWlwbWFwQ291bnQgPSBsb2FkTWlwbWFwcyA/IG51bWJlck9mTWlwbWFwTGV2ZWxzIDogMTtcblxuICAgIGZvciAodmFyIGxldmVsID0gMDsgbGV2ZWwgPCBtaXBtYXBDb3VudDsgbGV2ZWwgKyspIHtcbiAgICAgICAgdmFyIGltYWdlU2l6ZSA9IG5ldyBJbnQzMkFycmF5KGFycmF5YnVmZmVyLCBkYXRhT2Zmc2V0LCAxKVswXTsgLy8gc2l6ZSBwZXIgZmFjZSwgc2luY2Ugbm90IHN1cHBvcnRpbmcgYXJyYXkgY3ViZW1hcHNcbiAgICAgICAgZm9yICh2YXIgZmFjZSA9IDA7IGZhY2UgPCBudW1iZXJPZkZhY2VzOyBmYWNlICsrKSB7XG4gICAgICAgICAgICB2YXIgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIsIGRhdGFPZmZzZXQgKyA0LCBpbWFnZVNpemUpO1xuICAgICAgICAgICAgbWlwbWFwcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwaXhlbHM6IGJ5dGVBcnJheSxcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBkYXRhT2Zmc2V0ICs9IGltYWdlU2l6ZSArIDQ7IC8vIHNpemUgb2YgdGhlIGltYWdlICsgNCBmb3IgdGhlIGltYWdlU2l6ZSBmaWVsZFxuICAgICAgICAgICAgZGF0YU9mZnNldCArPSAzIC0gKCAoIGltYWdlU2l6ZSArIDMgKSAlIDQgKTsgLy8gYWRkIHBhZGRpbmcgZm9yIG9kZCBzaXplZCBpbWFnZVxuICAgICAgICB9XG4gICAgICAgIHdpZHRoID0gTWF0aC5tYXgoMS4wLCB3aWR0aCAqIDAuNSk7XG4gICAgICAgIGhlaWdodCA9IE1hdGgubWF4KDEuMCwgaGVpZ2h0ICogMC41KTtcbiAgICB9XG4gICAgdmFyIHJlcyA9IHtcbiAgICAgICAgd2lkdGg6IHBpeGVsV2lkdGgsXG4gICAgICAgIGhlaWdodDogcGl4ZWxIZWlnaHQsXG4gICAgICAgIGZvcm1hdDogZ2xJbnRlcm5hbEZvcm1hdFxuICAgIH07XG4gICAgaWYgKGxvYWRNaXBtYXBzKSB7XG4gICAgICAgIHJlcy5taXBtYXBzID0gbWlwbWFwcztcbiAgICAgICAgcmVzLm1pcG1hcENvdW50ID0gbnVtYmVyT2ZNaXBtYXBMZXZlbHM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXMucGl4ZWxzID0gbWlwbWFwc1swXS5waXhlbHM7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBwYXJzZTogcGFyc2Vcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy91dGlsL2t0eC5qc1xuLy8gbW9kdWxlIGlkID0gMTkwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///190\n");

/***/ }),
/* 191 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__ = __webpack_require__(15);\n// TODO test\n\n\n\n\n\n\n\n/**\n * @namespace clay.util.mesh\n */\nvar meshUtil = {\n\n    /**\n     * Merge multiple meshes to one.\n     * Note that these meshes must have the same material\n     *\n     * @param {Array.<clay.Mesh>} meshes\n     * @param {boolean} applyWorldTransform\n     * @return {clay.Mesh}\n     * @memberOf clay.util.mesh\n     */\n    merge: function (meshes, applyWorldTransform) {\n\n        if (! meshes.length) {\n            return;\n        }\n\n        var templateMesh = meshes[0];\n        var templateGeo = templateMesh.geometry;\n        var material = templateMesh.material;\n\n        var geometry = new __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */]({\n            dynamic: false\n        });\n        geometry.boundingBox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n\n        var attributeNames = templateGeo.getEnabledAttributes();\n\n        for (var i = 0; i < attributeNames.length; i++) {\n            var name = attributeNames[i];\n            var attr = templateGeo.attributes[name];\n            // Extend custom attributes\n            if (!geometry.attributes[name]) {\n                geometry.attributes[name] = attr.clone(false);\n            }\n        }\n\n        var inverseTransposeMatrix = __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__[\"a\" /* default */].create();\n        // Initialize the array data and merge bounding box\n        var nVertex = 0;\n        var nFace = 0;\n        for (var k = 0; k < meshes.length; k++) {\n            var currentGeo = meshes[k].geometry;\n            if (currentGeo.boundingBox) {\n                currentGeo.boundingBox.applyTransform(applyWorldTransform ? meshes[k].worldTransform : meshes[k].localTransform);\n                geometry.boundingBox.union(currentGeo.boundingBox);\n            }\n            nVertex += currentGeo.vertexCount;\n            nFace += currentGeo.triangleCount;\n        }\n        for (var n = 0; n < attributeNames.length; n++) {\n            var name = attributeNames[n];\n            var attrib = geometry.attributes[name];\n            attrib.init(nVertex);\n        }\n        if (nVertex >= 0xffff) {\n            geometry.indices = new Uint32Array(nFace * 3);\n        }\n        else {\n            geometry.indices = new Uint16Array(nFace * 3);\n        }\n\n        var vertexOffset = 0;\n        var indicesOffset = 0;\n        var useIndices = templateGeo.isUseIndices();\n\n        for (var mm = 0; mm < meshes.length; mm++) {\n            var mesh = meshes[mm];\n            var currentGeo = mesh.geometry;\n\n            var nVertex = currentGeo.vertexCount;\n\n            var matrix = applyWorldTransform ? mesh.worldTransform.array : mesh.localTransform.array;\n            __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__[\"a\" /* default */].invert(inverseTransposeMatrix, matrix);\n            __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__[\"a\" /* default */].transpose(inverseTransposeMatrix, inverseTransposeMatrix);\n\n            for (var nn = 0; nn < attributeNames.length; nn++) {\n                var name = attributeNames[nn];\n                var currentAttr = currentGeo.attributes[name];\n                var targetAttr = geometry.attributes[name];\n                // Skip the unused attributes;\n                if (!currentAttr.value.length) {\n                    continue;\n                }\n                var len = currentAttr.value.length;\n                var size = currentAttr.size;\n                var offset = vertexOffset * size;\n                var count = len / size;\n                for (var i = 0; i < len; i++) {\n                    targetAttr.value[offset + i] = currentAttr.value[i];\n                }\n                // Transform position, normal and tangent\n                if (name === 'position') {\n                    __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec3__[\"a\" /* default */].forEach(targetAttr.value, size, offset, count, __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec3__[\"a\" /* default */].transformMat4, matrix);\n                }\n                else if (name === 'normal' || name === 'tangent') {\n                    __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec3__[\"a\" /* default */].forEach(targetAttr.value, size, offset, count, __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec3__[\"a\" /* default */].transformMat4, inverseTransposeMatrix);\n                }\n            }\n\n            if (useIndices) {\n                var len = currentGeo.indices.length;\n                for (var i = 0; i < len; i++) {\n                    geometry.indices[i + indicesOffset] = currentGeo.indices[i] + vertexOffset;\n                }\n                indicesOffset += len;\n            }\n\n            vertexOffset += nVertex;\n        }\n\n        return new __WEBPACK_IMPORTED_MODULE_1__Mesh__[\"a\" /* default */]({\n            material: material,\n            geometry: geometry\n        });\n    },\n\n    /**\n     * Split mesh into sub meshes, each mesh will have maxJointNumber joints.\n     * @param {clay.Mesh} mesh\n     * @param {number} maxJointNumber\n     * @param {boolean} inPlace\n     * @return {clay.Node}\n     *\n     * @memberOf clay.util.mesh\n     */\n\n    // FIXME, Have issues on some models\n    splitByJoints: function (mesh, maxJointNumber, inPlace) {\n        var geometry = mesh.geometry;\n        var skeleton = mesh.skeleton;\n        var material = mesh.material;\n        var joints = mesh.joints;\n        if (!geometry || !skeleton || !joints.length) {\n            return;\n        }\n        if (joints.length < maxJointNumber) {\n            return mesh;\n        }\n\n\n        var indices = geometry.indices;\n\n        var faceLen = geometry.triangleCount;\n        var rest = faceLen;\n        var isFaceAdded = [];\n        var jointValues = geometry.attributes.joint.value;\n        for (var i = 0; i < faceLen; i++) {\n            isFaceAdded[i] = false;\n        }\n        var addedJointIdxPerFace = [];\n\n        var buckets = [];\n\n        var getJointByIndex = function (idx) {\n            return joints[idx];\n        };\n        while (rest > 0) {\n            var bucketTriangles = [];\n            var bucketJointReverseMap = [];\n            var bucketJoints = [];\n            var subJointNumber = 0;\n            for (var i = 0; i < joints.length; i++) {\n                bucketJointReverseMap[i] = -1;\n            }\n            for (var f = 0; f < faceLen; f++) {\n                if (isFaceAdded[f]) {\n                    continue;\n                }\n                var canAddToBucket = true;\n                var addedNumber = 0;\n                for (var i = 0; i < 3; i++) {\n\n                    var idx = indices[f * 3 + i];\n\n                    for (var j = 0; j < 4; j++) {\n                        var jointIdx = jointValues[idx * 4 + j];\n\n                        if (jointIdx >= 0) {\n                            if (bucketJointReverseMap[jointIdx] === -1) {\n                                if (subJointNumber < maxJointNumber) {\n                                    bucketJointReverseMap[jointIdx] = subJointNumber;\n                                    bucketJoints[subJointNumber++] = jointIdx;\n                                    addedJointIdxPerFace[addedNumber++] = jointIdx;\n                                }\n                                else {\n                                    canAddToBucket = false;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (!canAddToBucket) {\n                    // Reverse operation\n                    for (var i = 0; i < addedNumber; i++) {\n                        bucketJointReverseMap[addedJointIdxPerFace[i]] = -1;\n                        bucketJoints.pop();\n                        subJointNumber--;\n                    }\n                }\n                else {\n                    bucketTriangles.push(indices.subarray(f * 3, (f + 1) * 3));\n\n                    isFaceAdded[f] = true;\n                    rest--;\n                }\n            }\n            buckets.push({\n                triangles: bucketTriangles,\n                joints: bucketJoints.map(getJointByIndex),\n                jointReverseMap: bucketJointReverseMap\n            });\n        }\n\n        var root = new __WEBPACK_IMPORTED_MODULE_2__Node__[\"a\" /* default */]({\n            name: mesh.name\n        });\n        var attribNames = geometry.getEnabledAttributes();\n\n        attribNames.splice(attribNames.indexOf('joint'), 1);\n        // Map from old vertex index to new vertex index\n        var newIndices = [];\n        for (var b = 0; b < buckets.length; b++) {\n            var bucket = buckets[b];\n            var jointReverseMap = bucket.jointReverseMap;\n            var subJointNumber = bucket.joints.length;\n\n            var subGeo = new __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */]();\n\n            var subMesh = new __WEBPACK_IMPORTED_MODULE_1__Mesh__[\"a\" /* default */]({\n                name: [mesh.name, i].join('-'),\n                // DON'T clone material.\n                material: material,\n                geometry: subGeo,\n                skeleton: skeleton,\n                joints: bucket.joints.slice()\n            });\n            var nVertex = 0;\n            var nVertex2 = geometry.vertexCount;\n            for (var i = 0; i < nVertex2; i++) {\n                newIndices[i] = -1;\n            }\n            // Count sub geo number\n            for (var f = 0; f < bucket.triangles.length; f++) {\n                var face = bucket.triangles[f];\n                for (var i = 0; i < 3; i++) {\n                    var idx = face[i];\n                    if (newIndices[idx] === -1) {\n                        newIndices[idx] = nVertex;\n                        nVertex++;\n                    }\n                }\n            }\n            for (var a = 0; a < attribNames.length; a++) {\n                var attribName = attribNames[a];\n                var subAttrib = subGeo.attributes[attribName];\n                subAttrib.init(nVertex);\n            }\n            subGeo.attributes.joint.value = new Float32Array(nVertex * 4);\n\n            if (nVertex > 0xffff) {\n                subGeo.indices = new Uint32Array(bucket.triangles.length * 3);\n            }\n            else {\n                subGeo.indices = new Uint16Array(bucket.triangles.length * 3);\n            }\n\n            var indicesOffset = 0;\n            nVertex = 0;\n            for (var i = 0; i < nVertex2; i++) {\n                newIndices[i] = -1;\n            }\n\n            for (var f = 0; f < bucket.triangles.length; f++) {\n                var triangle = bucket.triangles[f];\n                for (var i = 0; i < 3; i++) {\n\n                    var idx = triangle[i];\n\n                    if (newIndices[idx] === -1) {\n                        newIndices[idx] = nVertex;\n                        for (var a = 0; a < attribNames.length; a++) {\n                            var attribName = attribNames[a];\n                            var attrib = geometry.attributes[attribName];\n                            var subAttrib = subGeo.attributes[attribName];\n                            var size = attrib.size;\n\n                            for (var j = 0; j < size; j++) {\n                                subAttrib.value[nVertex * size + j] = attrib.value[idx * size + j];\n                            }\n                        }\n                        for (var j = 0; j < 4; j++) {\n                            var jointIdx = geometry.attributes.joint.value[idx * 4 + j];\n                            var offset = nVertex * 4 + j;\n                            if (jointIdx >= 0) {\n                                subGeo.attributes.joint.value[offset] = jointReverseMap[jointIdx];\n                            }\n                            else {\n                                subGeo.attributes.joint.value[offset] = -1;\n                            }\n                        }\n                        nVertex++;\n                    }\n                    subGeo.indices[indicesOffset++] = newIndices[idx];\n                }\n            }\n            subGeo.updateBoundingBox();\n\n            root.add(subMesh);\n        }\n        var children = mesh.children();\n        for (var i = 0; i < children.length; i++) {\n            root.add(children[i]);\n        }\n        root.position.copy(mesh.position);\n        root.rotation.copy(mesh.rotation);\n        root.scale.copy(mesh.scale);\n\n        if (inPlace) {\n            if (mesh.getParent()) {\n                var parent = mesh.getParent();\n                parent.remove(mesh);\n                parent.add(root);\n            }\n        }\n        return root;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (meshUtil);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvdXRpbC9tZXNoLmpzP2IwMGUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVE9ETyB0ZXN0XG5pbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi4vR2VvbWV0cnknO1xuaW1wb3J0IE1lc2ggZnJvbSAnLi4vTWVzaCc7XG5pbXBvcnQgTm9kZSBmcm9tICcuLi9Ob2RlJztcbmltcG9ydCBCb3VuZGluZ0JveCBmcm9tICcuLi9tYXRoL0JvdW5kaW5nQm94JztcbmltcG9ydCB2ZWMzIGZyb20gJy4uL2dsbWF0cml4L3ZlYzMnO1xuaW1wb3J0IG1hdDQgZnJvbSAnLi4vZ2xtYXRyaXgvbWF0NCc7XG5cbi8qKlxuICogQG5hbWVzcGFjZSBjbGF5LnV0aWwubWVzaFxuICovXG52YXIgbWVzaFV0aWwgPSB7XG5cbiAgICAvKipcbiAgICAgKiBNZXJnZSBtdWx0aXBsZSBtZXNoZXMgdG8gb25lLlxuICAgICAqIE5vdGUgdGhhdCB0aGVzZSBtZXNoZXMgbXVzdCBoYXZlIHRoZSBzYW1lIG1hdGVyaWFsXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5LjxjbGF5Lk1lc2g+fSBtZXNoZXNcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFwcGx5V29ybGRUcmFuc2Zvcm1cbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1lc2h9XG4gICAgICogQG1lbWJlck9mIGNsYXkudXRpbC5tZXNoXG4gICAgICovXG4gICAgbWVyZ2U6IGZ1bmN0aW9uIChtZXNoZXMsIGFwcGx5V29ybGRUcmFuc2Zvcm0pIHtcblxuICAgICAgICBpZiAoISBtZXNoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdGVtcGxhdGVNZXNoID0gbWVzaGVzWzBdO1xuICAgICAgICB2YXIgdGVtcGxhdGVHZW8gPSB0ZW1wbGF0ZU1lc2guZ2VvbWV0cnk7XG4gICAgICAgIHZhciBtYXRlcmlhbCA9IHRlbXBsYXRlTWVzaC5tYXRlcmlhbDtcblxuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgR2VvbWV0cnkoe1xuICAgICAgICAgICAgZHluYW1pYzogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIGdlb21ldHJ5LmJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG5cbiAgICAgICAgdmFyIGF0dHJpYnV0ZU5hbWVzID0gdGVtcGxhdGVHZW8uZ2V0RW5hYmxlZEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJpYnV0ZU5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IGF0dHJpYnV0ZU5hbWVzW2ldO1xuICAgICAgICAgICAgdmFyIGF0dHIgPSB0ZW1wbGF0ZUdlby5hdHRyaWJ1dGVzW25hbWVdO1xuICAgICAgICAgICAgLy8gRXh0ZW5kIGN1c3RvbSBhdHRyaWJ1dGVzXG4gICAgICAgICAgICBpZiAoIWdlb21ldHJ5LmF0dHJpYnV0ZXNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzW25hbWVdID0gYXR0ci5jbG9uZShmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaW52ZXJzZVRyYW5zcG9zZU1hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIGFycmF5IGRhdGEgYW5kIG1lcmdlIGJvdW5kaW5nIGJveFxuICAgICAgICB2YXIgblZlcnRleCA9IDA7XG4gICAgICAgIHZhciBuRmFjZSA9IDA7XG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbWVzaGVzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudEdlbyA9IG1lc2hlc1trXS5nZW9tZXRyeTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50R2VvLmJvdW5kaW5nQm94KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEdlby5ib3VuZGluZ0JveC5hcHBseVRyYW5zZm9ybShhcHBseVdvcmxkVHJhbnNmb3JtID8gbWVzaGVzW2tdLndvcmxkVHJhbnNmb3JtIDogbWVzaGVzW2tdLmxvY2FsVHJhbnNmb3JtKTtcbiAgICAgICAgICAgICAgICBnZW9tZXRyeS5ib3VuZGluZ0JveC51bmlvbihjdXJyZW50R2VvLmJvdW5kaW5nQm94KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5WZXJ0ZXggKz0gY3VycmVudEdlby52ZXJ0ZXhDb3VudDtcbiAgICAgICAgICAgIG5GYWNlICs9IGN1cnJlbnRHZW8udHJpYW5nbGVDb3VudDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IGF0dHJpYnV0ZU5hbWVzLmxlbmd0aDsgbisrKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IGF0dHJpYnV0ZU5hbWVzW25dO1xuICAgICAgICAgICAgdmFyIGF0dHJpYiA9IGdlb21ldHJ5LmF0dHJpYnV0ZXNbbmFtZV07XG4gICAgICAgICAgICBhdHRyaWIuaW5pdChuVmVydGV4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoblZlcnRleCA+PSAweGZmZmYpIHtcbiAgICAgICAgICAgIGdlb21ldHJ5LmluZGljZXMgPSBuZXcgVWludDMyQXJyYXkobkZhY2UgKiAzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGdlb21ldHJ5LmluZGljZXMgPSBuZXcgVWludDE2QXJyYXkobkZhY2UgKiAzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB2ZXJ0ZXhPZmZzZXQgPSAwO1xuICAgICAgICB2YXIgaW5kaWNlc09mZnNldCA9IDA7XG4gICAgICAgIHZhciB1c2VJbmRpY2VzID0gdGVtcGxhdGVHZW8uaXNVc2VJbmRpY2VzKCk7XG5cbiAgICAgICAgZm9yICh2YXIgbW0gPSAwOyBtbSA8IG1lc2hlcy5sZW5ndGg7IG1tKyspIHtcbiAgICAgICAgICAgIHZhciBtZXNoID0gbWVzaGVzW21tXTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50R2VvID0gbWVzaC5nZW9tZXRyeTtcblxuICAgICAgICAgICAgdmFyIG5WZXJ0ZXggPSBjdXJyZW50R2VvLnZlcnRleENvdW50O1xuXG4gICAgICAgICAgICB2YXIgbWF0cml4ID0gYXBwbHlXb3JsZFRyYW5zZm9ybSA/IG1lc2gud29ybGRUcmFuc2Zvcm0uYXJyYXkgOiBtZXNoLmxvY2FsVHJhbnNmb3JtLmFycmF5O1xuICAgICAgICAgICAgbWF0NC5pbnZlcnQoaW52ZXJzZVRyYW5zcG9zZU1hdHJpeCwgbWF0cml4KTtcbiAgICAgICAgICAgIG1hdDQudHJhbnNwb3NlKGludmVyc2VUcmFuc3Bvc2VNYXRyaXgsIGludmVyc2VUcmFuc3Bvc2VNYXRyaXgpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBubiA9IDA7IG5uIDwgYXR0cmlidXRlTmFtZXMubGVuZ3RoOyBubisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBhdHRyaWJ1dGVOYW1lc1tubl07XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRBdHRyID0gY3VycmVudEdlby5hdHRyaWJ1dGVzW25hbWVdO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRBdHRyID0gZ2VvbWV0cnkuYXR0cmlidXRlc1tuYW1lXTtcbiAgICAgICAgICAgICAgICAvLyBTa2lwIHRoZSB1bnVzZWQgYXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRBdHRyLnZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9IGN1cnJlbnRBdHRyLnZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGN1cnJlbnRBdHRyLnNpemU7XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IHZlcnRleE9mZnNldCAqIHNpemU7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gbGVuIC8gc2l6ZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEF0dHIudmFsdWVbb2Zmc2V0ICsgaV0gPSBjdXJyZW50QXR0ci52YWx1ZVtpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVHJhbnNmb3JtIHBvc2l0aW9uLCBub3JtYWwgYW5kIHRhbmdlbnRcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ3Bvc2l0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICB2ZWMzLmZvckVhY2godGFyZ2V0QXR0ci52YWx1ZSwgc2l6ZSwgb2Zmc2V0LCBjb3VudCwgdmVjMy50cmFuc2Zvcm1NYXQ0LCBtYXRyaXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChuYW1lID09PSAnbm9ybWFsJyB8fCBuYW1lID09PSAndGFuZ2VudCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5mb3JFYWNoKHRhcmdldEF0dHIudmFsdWUsIHNpemUsIG9mZnNldCwgY291bnQsIHZlYzMudHJhbnNmb3JtTWF0NCwgaW52ZXJzZVRyYW5zcG9zZU1hdHJpeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodXNlSW5kaWNlcykge1xuICAgICAgICAgICAgICAgIHZhciBsZW4gPSBjdXJyZW50R2VvLmluZGljZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuaW5kaWNlc1tpICsgaW5kaWNlc09mZnNldF0gPSBjdXJyZW50R2VvLmluZGljZXNbaV0gKyB2ZXJ0ZXhPZmZzZXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluZGljZXNPZmZzZXQgKz0gbGVuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2ZXJ0ZXhPZmZzZXQgKz0gblZlcnRleDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgTWVzaCh7XG4gICAgICAgICAgICBtYXRlcmlhbDogbWF0ZXJpYWwsXG4gICAgICAgICAgICBnZW9tZXRyeTogZ2VvbWV0cnlcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNwbGl0IG1lc2ggaW50byBzdWIgbWVzaGVzLCBlYWNoIG1lc2ggd2lsbCBoYXZlIG1heEpvaW50TnVtYmVyIGpvaW50cy5cbiAgICAgKiBAcGFyYW0ge2NsYXkuTWVzaH0gbWVzaFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhKb2ludE51bWJlclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5QbGFjZVxuICAgICAqIEByZXR1cm4ge2NsYXkuTm9kZX1cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBjbGF5LnV0aWwubWVzaFxuICAgICAqL1xuXG4gICAgLy8gRklYTUUsIEhhdmUgaXNzdWVzIG9uIHNvbWUgbW9kZWxzXG4gICAgc3BsaXRCeUpvaW50czogZnVuY3Rpb24gKG1lc2gsIG1heEpvaW50TnVtYmVyLCBpblBsYWNlKSB7XG4gICAgICAgIHZhciBnZW9tZXRyeSA9IG1lc2guZ2VvbWV0cnk7XG4gICAgICAgIHZhciBza2VsZXRvbiA9IG1lc2guc2tlbGV0b247XG4gICAgICAgIHZhciBtYXRlcmlhbCA9IG1lc2gubWF0ZXJpYWw7XG4gICAgICAgIHZhciBqb2ludHMgPSBtZXNoLmpvaW50cztcbiAgICAgICAgaWYgKCFnZW9tZXRyeSB8fCAhc2tlbGV0b24gfHwgIWpvaW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoam9pbnRzLmxlbmd0aCA8IG1heEpvaW50TnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbWVzaDtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgdmFyIGluZGljZXMgPSBnZW9tZXRyeS5pbmRpY2VzO1xuXG4gICAgICAgIHZhciBmYWNlTGVuID0gZ2VvbWV0cnkudHJpYW5nbGVDb3VudDtcbiAgICAgICAgdmFyIHJlc3QgPSBmYWNlTGVuO1xuICAgICAgICB2YXIgaXNGYWNlQWRkZWQgPSBbXTtcbiAgICAgICAgdmFyIGpvaW50VmFsdWVzID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5qb2ludC52YWx1ZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYWNlTGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlzRmFjZUFkZGVkW2ldID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFkZGVkSm9pbnRJZHhQZXJGYWNlID0gW107XG5cbiAgICAgICAgdmFyIGJ1Y2tldHMgPSBbXTtcblxuICAgICAgICB2YXIgZ2V0Sm9pbnRCeUluZGV4ID0gZnVuY3Rpb24gKGlkeCkge1xuICAgICAgICAgICAgcmV0dXJuIGpvaW50c1tpZHhdO1xuICAgICAgICB9O1xuICAgICAgICB3aGlsZSAocmVzdCA+IDApIHtcbiAgICAgICAgICAgIHZhciBidWNrZXRUcmlhbmdsZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBidWNrZXRKb2ludFJldmVyc2VNYXAgPSBbXTtcbiAgICAgICAgICAgIHZhciBidWNrZXRKb2ludHMgPSBbXTtcbiAgICAgICAgICAgIHZhciBzdWJKb2ludE51bWJlciA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGpvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGJ1Y2tldEpvaW50UmV2ZXJzZU1hcFtpXSA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgZiA9IDA7IGYgPCBmYWNlTGVuOyBmKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNGYWNlQWRkZWRbZl0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBjYW5BZGRUb0J1Y2tldCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIGFkZGVkTnVtYmVyID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSBpbmRpY2VzW2YgKiAzICsgaV07XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA0OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqb2ludElkeCA9IGpvaW50VmFsdWVzW2lkeCAqIDQgKyBqXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpvaW50SWR4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVja2V0Sm9pbnRSZXZlcnNlTWFwW2pvaW50SWR4XSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YkpvaW50TnVtYmVyIDwgbWF4Sm9pbnROdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldEpvaW50UmV2ZXJzZU1hcFtqb2ludElkeF0gPSBzdWJKb2ludE51bWJlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldEpvaW50c1tzdWJKb2ludE51bWJlcisrXSA9IGpvaW50SWR4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWRKb2ludElkeFBlckZhY2VbYWRkZWROdW1iZXIrK10gPSBqb2ludElkeDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkFkZFRvQnVja2V0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFjYW5BZGRUb0J1Y2tldCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZXZlcnNlIG9wZXJhdGlvblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFkZGVkTnVtYmVyOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldEpvaW50UmV2ZXJzZU1hcFthZGRlZEpvaW50SWR4UGVyRmFjZVtpXV0gPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldEpvaW50cy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YkpvaW50TnVtYmVyLS07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1Y2tldFRyaWFuZ2xlcy5wdXNoKGluZGljZXMuc3ViYXJyYXkoZiAqIDMsIChmICsgMSkgKiAzKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaXNGYWNlQWRkZWRbZl0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXN0LS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVja2V0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0cmlhbmdsZXM6IGJ1Y2tldFRyaWFuZ2xlcyxcbiAgICAgICAgICAgICAgICBqb2ludHM6IGJ1Y2tldEpvaW50cy5tYXAoZ2V0Sm9pbnRCeUluZGV4KSxcbiAgICAgICAgICAgICAgICBqb2ludFJldmVyc2VNYXA6IGJ1Y2tldEpvaW50UmV2ZXJzZU1hcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcm9vdCA9IG5ldyBOb2RlKHtcbiAgICAgICAgICAgIG5hbWU6IG1lc2gubmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGF0dHJpYk5hbWVzID0gZ2VvbWV0cnkuZ2V0RW5hYmxlZEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICBhdHRyaWJOYW1lcy5zcGxpY2UoYXR0cmliTmFtZXMuaW5kZXhPZignam9pbnQnKSwgMSk7XG4gICAgICAgIC8vIE1hcCBmcm9tIG9sZCB2ZXJ0ZXggaW5kZXggdG8gbmV3IHZlcnRleCBpbmRleFxuICAgICAgICB2YXIgbmV3SW5kaWNlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IGJ1Y2tldHMubGVuZ3RoOyBiKyspIHtcbiAgICAgICAgICAgIHZhciBidWNrZXQgPSBidWNrZXRzW2JdO1xuICAgICAgICAgICAgdmFyIGpvaW50UmV2ZXJzZU1hcCA9IGJ1Y2tldC5qb2ludFJldmVyc2VNYXA7XG4gICAgICAgICAgICB2YXIgc3ViSm9pbnROdW1iZXIgPSBidWNrZXQuam9pbnRzLmxlbmd0aDtcblxuICAgICAgICAgICAgdmFyIHN1YkdlbyA9IG5ldyBHZW9tZXRyeSgpO1xuXG4gICAgICAgICAgICB2YXIgc3ViTWVzaCA9IG5ldyBNZXNoKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBbbWVzaC5uYW1lLCBpXS5qb2luKCctJyksXG4gICAgICAgICAgICAgICAgLy8gRE9OJ1QgY2xvbmUgbWF0ZXJpYWwuXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWw6IG1hdGVyaWFsLFxuICAgICAgICAgICAgICAgIGdlb21ldHJ5OiBzdWJHZW8sXG4gICAgICAgICAgICAgICAgc2tlbGV0b246IHNrZWxldG9uLFxuICAgICAgICAgICAgICAgIGpvaW50czogYnVja2V0LmpvaW50cy5zbGljZSgpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBuVmVydGV4ID0gMDtcbiAgICAgICAgICAgIHZhciBuVmVydGV4MiA9IGdlb21ldHJ5LnZlcnRleENvdW50O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuVmVydGV4MjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbmV3SW5kaWNlc1tpXSA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ291bnQgc3ViIGdlbyBudW1iZXJcbiAgICAgICAgICAgIGZvciAodmFyIGYgPSAwOyBmIDwgYnVja2V0LnRyaWFuZ2xlcy5sZW5ndGg7IGYrKykge1xuICAgICAgICAgICAgICAgIHZhciBmYWNlID0gYnVja2V0LnRyaWFuZ2xlc1tmXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gZmFjZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0luZGljZXNbaWR4XSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGljZXNbaWR4XSA9IG5WZXJ0ZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBuVmVydGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IGF0dHJpYk5hbWVzLmxlbmd0aDsgYSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF0dHJpYk5hbWUgPSBhdHRyaWJOYW1lc1thXTtcbiAgICAgICAgICAgICAgICB2YXIgc3ViQXR0cmliID0gc3ViR2VvLmF0dHJpYnV0ZXNbYXR0cmliTmFtZV07XG4gICAgICAgICAgICAgICAgc3ViQXR0cmliLmluaXQoblZlcnRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJHZW8uYXR0cmlidXRlcy5qb2ludC52YWx1ZSA9IG5ldyBGbG9hdDMyQXJyYXkoblZlcnRleCAqIDQpO1xuXG4gICAgICAgICAgICBpZiAoblZlcnRleCA+IDB4ZmZmZikge1xuICAgICAgICAgICAgICAgIHN1Ykdlby5pbmRpY2VzID0gbmV3IFVpbnQzMkFycmF5KGJ1Y2tldC50cmlhbmdsZXMubGVuZ3RoICogMyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdWJHZW8uaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheShidWNrZXQudHJpYW5nbGVzLmxlbmd0aCAqIDMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgaW5kaWNlc09mZnNldCA9IDA7XG4gICAgICAgICAgICBuVmVydGV4ID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgblZlcnRleDI7IGkrKykge1xuICAgICAgICAgICAgICAgIG5ld0luZGljZXNbaV0gPSAtMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgZiA9IDA7IGYgPCBidWNrZXQudHJpYW5nbGVzLmxlbmd0aDsgZisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRyaWFuZ2xlID0gYnVja2V0LnRyaWFuZ2xlc1tmXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSB0cmlhbmdsZVtpXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3SW5kaWNlc1tpZHhdID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kaWNlc1tpZHhdID0gblZlcnRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgYXR0cmliTmFtZXMubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXR0cmliTmFtZSA9IGF0dHJpYk5hbWVzW2FdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdHRyaWIgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzW2F0dHJpYk5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJBdHRyaWIgPSBzdWJHZW8uYXR0cmlidXRlc1thdHRyaWJOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGF0dHJpYi5zaXplO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzaXplOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViQXR0cmliLnZhbHVlW25WZXJ0ZXggKiBzaXplICsgal0gPSBhdHRyaWIudmFsdWVbaWR4ICogc2l6ZSArIGpdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgNDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpvaW50SWR4ID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5qb2ludC52YWx1ZVtpZHggKiA0ICsgal07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IG5WZXJ0ZXggKiA0ICsgajtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoam9pbnRJZHggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJHZW8uYXR0cmlidXRlcy5qb2ludC52YWx1ZVtvZmZzZXRdID0gam9pbnRSZXZlcnNlTWFwW2pvaW50SWR4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ykdlby5hdHRyaWJ1dGVzLmpvaW50LnZhbHVlW29mZnNldF0gPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBuVmVydGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3ViR2VvLmluZGljZXNbaW5kaWNlc09mZnNldCsrXSA9IG5ld0luZGljZXNbaWR4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdWJHZW8udXBkYXRlQm91bmRpbmdCb3goKTtcblxuICAgICAgICAgICAgcm9vdC5hZGQoc3ViTWVzaCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNoaWxkcmVuID0gbWVzaC5jaGlsZHJlbigpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByb290LmFkZChjaGlsZHJlbltpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcm9vdC5wb3NpdGlvbi5jb3B5KG1lc2gucG9zaXRpb24pO1xuICAgICAgICByb290LnJvdGF0aW9uLmNvcHkobWVzaC5yb3RhdGlvbik7XG4gICAgICAgIHJvb3Quc2NhbGUuY29weShtZXNoLnNjYWxlKTtcblxuICAgICAgICBpZiAoaW5QbGFjZSkge1xuICAgICAgICAgICAgaWYgKG1lc2guZ2V0UGFyZW50KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gbWVzaC5nZXRQYXJlbnQoKTtcbiAgICAgICAgICAgICAgICBwYXJlbnQucmVtb3ZlKG1lc2gpO1xuICAgICAgICAgICAgICAgIHBhcmVudC5hZGQocm9vdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJvb3Q7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgbWVzaFV0aWw7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3V0aWwvbWVzaC5qc1xuLy8gbW9kdWxlIGlkID0gMTkxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///191\n");

/***/ }),
/* 192 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_Vector3__ = __webpack_require__(3);\n\n\n\n\n\nvar META = {\n    version: 1.0,\n    type: 'Geometry',\n    generator: 'util.transferable.toObject'\n};\n\n/**\n * @alias clay.util.transferable\n */\nvar transferableUtil = {\n    /**\n     * Convert geometry to a object containing transferable data\n     * @param {Geometry} geometry geometry\n     * @param {Boolean} shallow whether shallow copy\n     * @returns {Object} { data : data, buffers : buffers }, buffers is the transferable list\n     */\n    toObject : function (geometry, shallow) {\n        if (!geometry) {\n            return null;\n        }\n        var data = {\n            metadata : __WEBPACK_IMPORTED_MODULE_0__core_util__[\"a\" /* default */].extend({}, META)\n        };\n        //transferable buffers\n        var buffers = [];\n\n        //dynamic\n        data.dynamic = geometry.dynamic;\n\n        //bounding box\n        if (geometry.boundingBox) {\n            data.boundingBox = {\n                min : geometry.boundingBox.min.toArray(),\n                max : geometry.boundingBox.max.toArray()\n            };\n        }\n\n        //indices\n        if (geometry.indices && geometry.indices.length > 0) {\n            data.indices = copyIfNecessary(geometry.indices, shallow);\n            buffers.push(data.indices.buffer);\n        }\n\n        //attributes\n        data.attributes = {};\n        for (var p in geometry.attributes) {\n            if (geometry.attributes.hasOwnProperty(p)) {\n                var attr = geometry.attributes[p];\n                //ignore empty attributes\n                if (attr && attr.value && attr.value.length > 0) {\n                    attr = data.attributes[p] = copyAttribute(attr, shallow);\n                    buffers.push(attr.value.buffer);\n                }\n            }\n        }\n\n        return {\n            data : data,\n            buffers : buffers\n        };\n    },\n\n    /**\n     * Reproduce a geometry from object generated by toObject\n     * @param {Object} object object generated by toObject\n     * @returns {Geometry} geometry\n     */\n    toGeometry : function (object) {\n        if (!object) {\n            return null;\n        }\n        if (object.data && object.buffers) {\n            return transferableUtil.toGeometry(object.data);\n        }\n        if (!object.metadata || object.metadata.generator !== META.generator) {\n            throw new Error('[util.transferable.toGeometry] the object is not generated by util.transferable.');\n        }\n\n        //basic options\n        var options = {\n            dynamic : object.dynamic,\n            indices : object.indices\n        };\n\n        if (object.boundingBox) {\n            var min = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]().setArray(object.boundingBox.min);\n            var max = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]().setArray(object.boundingBox.max);\n            options.boundingBox = new __WEBPACK_IMPORTED_MODULE_2__math_BoundingBox__[\"a\" /* default */](min, max);\n        }\n\n        var geometry = new __WEBPACK_IMPORTED_MODULE_1__Geometry__[\"a\" /* default */](options);\n\n        //attributes\n        for (var p in object.attributes) {\n            if (object.attributes.hasOwnProperty(p)) {\n                var attr = object.attributes[p];\n                geometry.attributes[p] = new __WEBPACK_IMPORTED_MODULE_1__Geometry__[\"a\" /* default */].Attribute(attr.name, attr.type, attr.size, attr.semantic);\n                geometry.attributes[p].value = attr.value;\n            }\n        }\n\n        return geometry;\n    }\n\n}\n\nfunction copyAttribute(attr, shallow) {\n    return {\n        name : attr.name,\n        type : attr.type,\n        size : attr.size,\n        semantic : attr.semantic,\n        value : copyIfNecessary(attr.value, shallow)\n    };\n}\n\nfunction copyIfNecessary(arr, shallow) {\n    if (!shallow) {\n        return new arr.constructor(arr);\n    } else {\n        return arr;\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (transferableUtil);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvdXRpbC90cmFuc2ZlcmFibGUuanM/ODc5YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdXRpbCBmcm9tICcuLi9jb3JlL3V0aWwnO1xuaW1wb3J0IEdlb21ldHJ5IGZyb20gJy4uL0dlb21ldHJ5JztcbmltcG9ydCBCb3VuZGluZ0JveCBmcm9tICcuLi9tYXRoL0JvdW5kaW5nQm94JztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4uL21hdGgvVmVjdG9yMyc7XG5cbnZhciBNRVRBID0ge1xuICAgIHZlcnNpb246IDEuMCxcbiAgICB0eXBlOiAnR2VvbWV0cnknLFxuICAgIGdlbmVyYXRvcjogJ3V0aWwudHJhbnNmZXJhYmxlLnRvT2JqZWN0J1xufTtcblxuLyoqXG4gKiBAYWxpYXMgY2xheS51dGlsLnRyYW5zZmVyYWJsZVxuICovXG52YXIgdHJhbnNmZXJhYmxlVXRpbCA9IHtcbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IGdlb21ldHJ5IHRvIGEgb2JqZWN0IGNvbnRhaW5pbmcgdHJhbnNmZXJhYmxlIGRhdGFcbiAgICAgKiBAcGFyYW0ge0dlb21ldHJ5fSBnZW9tZXRyeSBnZW9tZXRyeVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hhbGxvdyB3aGV0aGVyIHNoYWxsb3cgY29weVxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9IHsgZGF0YSA6IGRhdGEsIGJ1ZmZlcnMgOiBidWZmZXJzIH0sIGJ1ZmZlcnMgaXMgdGhlIHRyYW5zZmVyYWJsZSBsaXN0XG4gICAgICovXG4gICAgdG9PYmplY3QgOiBmdW5jdGlvbiAoZ2VvbWV0cnksIHNoYWxsb3cpIHtcbiAgICAgICAgaWYgKCFnZW9tZXRyeSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBtZXRhZGF0YSA6IHV0aWwuZXh0ZW5kKHt9LCBNRVRBKVxuICAgICAgICB9O1xuICAgICAgICAvL3RyYW5zZmVyYWJsZSBidWZmZXJzXG4gICAgICAgIHZhciBidWZmZXJzID0gW107XG5cbiAgICAgICAgLy9keW5hbWljXG4gICAgICAgIGRhdGEuZHluYW1pYyA9IGdlb21ldHJ5LmR5bmFtaWM7XG5cbiAgICAgICAgLy9ib3VuZGluZyBib3hcbiAgICAgICAgaWYgKGdlb21ldHJ5LmJvdW5kaW5nQm94KSB7XG4gICAgICAgICAgICBkYXRhLmJvdW5kaW5nQm94ID0ge1xuICAgICAgICAgICAgICAgIG1pbiA6IGdlb21ldHJ5LmJvdW5kaW5nQm94Lm1pbi50b0FycmF5KCksXG4gICAgICAgICAgICAgICAgbWF4IDogZ2VvbWV0cnkuYm91bmRpbmdCb3gubWF4LnRvQXJyYXkoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vaW5kaWNlc1xuICAgICAgICBpZiAoZ2VvbWV0cnkuaW5kaWNlcyAmJiBnZW9tZXRyeS5pbmRpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGRhdGEuaW5kaWNlcyA9IGNvcHlJZk5lY2Vzc2FyeShnZW9tZXRyeS5pbmRpY2VzLCBzaGFsbG93KTtcbiAgICAgICAgICAgIGJ1ZmZlcnMucHVzaChkYXRhLmluZGljZXMuYnVmZmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vYXR0cmlidXRlc1xuICAgICAgICBkYXRhLmF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBnZW9tZXRyeS5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBpZiAoZ2VvbWV0cnkuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShwKSkge1xuICAgICAgICAgICAgICAgIHZhciBhdHRyID0gZ2VvbWV0cnkuYXR0cmlidXRlc1twXTtcbiAgICAgICAgICAgICAgICAvL2lnbm9yZSBlbXB0eSBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAgICAgaWYgKGF0dHIgJiYgYXR0ci52YWx1ZSAmJiBhdHRyLnZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0ciA9IGRhdGEuYXR0cmlidXRlc1twXSA9IGNvcHlBdHRyaWJ1dGUoYXR0ciwgc2hhbGxvdyk7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlcnMucHVzaChhdHRyLnZhbHVlLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGEgOiBkYXRhLFxuICAgICAgICAgICAgYnVmZmVycyA6IGJ1ZmZlcnNcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVwcm9kdWNlIGEgZ2VvbWV0cnkgZnJvbSBvYmplY3QgZ2VuZXJhdGVkIGJ5IHRvT2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBvYmplY3QgZ2VuZXJhdGVkIGJ5IHRvT2JqZWN0XG4gICAgICogQHJldHVybnMge0dlb21ldHJ5fSBnZW9tZXRyeVxuICAgICAqL1xuICAgIHRvR2VvbWV0cnkgOiBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgIGlmICghb2JqZWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2JqZWN0LmRhdGEgJiYgb2JqZWN0LmJ1ZmZlcnMpIHtcbiAgICAgICAgICAgIHJldHVybiB0cmFuc2ZlcmFibGVVdGlsLnRvR2VvbWV0cnkob2JqZWN0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb2JqZWN0Lm1ldGFkYXRhIHx8IG9iamVjdC5tZXRhZGF0YS5nZW5lcmF0b3IgIT09IE1FVEEuZ2VuZXJhdG9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1t1dGlsLnRyYW5zZmVyYWJsZS50b0dlb21ldHJ5XSB0aGUgb2JqZWN0IGlzIG5vdCBnZW5lcmF0ZWQgYnkgdXRpbC50cmFuc2ZlcmFibGUuJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2Jhc2ljIG9wdGlvbnNcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBkeW5hbWljIDogb2JqZWN0LmR5bmFtaWMsXG4gICAgICAgICAgICBpbmRpY2VzIDogb2JqZWN0LmluZGljZXNcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAob2JqZWN0LmJvdW5kaW5nQm94KSB7XG4gICAgICAgICAgICB2YXIgbWluID0gbmV3IFZlY3RvcjMoKS5zZXRBcnJheShvYmplY3QuYm91bmRpbmdCb3gubWluKTtcbiAgICAgICAgICAgIHZhciBtYXggPSBuZXcgVmVjdG9yMygpLnNldEFycmF5KG9iamVjdC5ib3VuZGluZ0JveC5tYXgpO1xuICAgICAgICAgICAgb3B0aW9ucy5ib3VuZGluZ0JveCA9IG5ldyBCb3VuZGluZ0JveChtaW4sIG1heCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgR2VvbWV0cnkob3B0aW9ucyk7XG5cbiAgICAgICAgLy9hdHRyaWJ1dGVzXG4gICAgICAgIGZvciAodmFyIHAgaW4gb2JqZWN0LmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIGlmIChvYmplY3QuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShwKSkge1xuICAgICAgICAgICAgICAgIHZhciBhdHRyID0gb2JqZWN0LmF0dHJpYnV0ZXNbcF07XG4gICAgICAgICAgICAgICAgZ2VvbWV0cnkuYXR0cmlidXRlc1twXSA9IG5ldyBHZW9tZXRyeS5BdHRyaWJ1dGUoYXR0ci5uYW1lLCBhdHRyLnR5cGUsIGF0dHIuc2l6ZSwgYXR0ci5zZW1hbnRpYyk7XG4gICAgICAgICAgICAgICAgZ2VvbWV0cnkuYXR0cmlidXRlc1twXS52YWx1ZSA9IGF0dHIudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2VvbWV0cnk7XG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIGNvcHlBdHRyaWJ1dGUoYXR0ciwgc2hhbGxvdykge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWUgOiBhdHRyLm5hbWUsXG4gICAgICAgIHR5cGUgOiBhdHRyLnR5cGUsXG4gICAgICAgIHNpemUgOiBhdHRyLnNpemUsXG4gICAgICAgIHNlbWFudGljIDogYXR0ci5zZW1hbnRpYyxcbiAgICAgICAgdmFsdWUgOiBjb3B5SWZOZWNlc3NhcnkoYXR0ci52YWx1ZSwgc2hhbGxvdylcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBjb3B5SWZOZWNlc3NhcnkoYXJyLCBzaGFsbG93KSB7XG4gICAgaWYgKCFzaGFsbG93KSB7XG4gICAgICAgIHJldHVybiBuZXcgYXJyLmNvbnN0cnVjdG9yKGFycik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHRyYW5zZmVyYWJsZVV0aWw7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3V0aWwvdHJhbnNmZXJhYmxlLmpzXG4vLyBtb2R1bGUgaWQgPSAxOTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///192\n");

/***/ }),
/* 193 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/**\n * @name clay.version\n */\n/* unused harmony default export */ var _unused_webpack_default_export = ('1.3.0');\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvdmVyc2lvbi5qcz8xNTk1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQG5hbWUgY2xheS52ZXJzaW9uXG4gKi9cbmV4cG9ydCBkZWZhdWx0ICcxLjMuMCc7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3ZlcnNpb24uanNcbi8vIG1vZHVsZSBpZCA9IDE5M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///193\n");

/***/ }),
/* 194 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__output_glsl_js__ = __webpack_require__(195);\n// https://github.com/googlevr/webvr-polyfill/blob/master/src/cardboard-distorter.js\n\n// Use webvr may have scale problem.\n// https://github.com/googlevr/webvr-polyfill/issues/140\n// https://github.com/googlevr/webvr-polyfill/search?q=SCALE&type=Issues&utf8=%E2%9C%93\n// https://github.com/googlevr/webvr-polyfill/issues/147\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_6__output_glsl_js__[\"a\" /* default */]);\n\nfunction lerp (a, b, t) {\n    return a * (1 - t) + b * t;\n}\n\nvar CardboardDistorter = __WEBPACK_IMPORTED_MODULE_4__core_Base__[\"a\" /* default */].extend(function () {\n    return {\n\n        clearColor: [0, 0, 0, 1],\n\n        _mesh: new __WEBPACK_IMPORTED_MODULE_0__Mesh__[\"a\" /* default */]({\n            geometry: new __WEBPACK_IMPORTED_MODULE_2__Geometry__[\"a\" /* default */]({\n                dynamic: true\n            }),\n            culling: false,\n            material: new __WEBPACK_IMPORTED_MODULE_1__Material__[\"a\" /* default */]({\n                // FIXME Why disable depthMask will be wrong\n                // depthMask: false,\n                depthTest: false,\n                shader: new __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */]({\n                    vertex: __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].source('clay.vr.disorter.output.vertex'),\n                    fragment: __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].source('clay.vr.disorter.output.fragment')\n                })\n            })\n        }),\n        _fakeCamera: new __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__[\"a\" /* default */]()\n    };\n}, {\n\n    render: function (renderer, sourceTexture) {\n        var clearColor = this.clearColor;\n        var gl = renderer.gl;\n        gl.clearColor(clearColor[0], clearColor[1], clearColor[2], clearColor[3]);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n\n        gl.disable(gl.BLEND);\n\n        this._mesh.material.set('texture', sourceTexture);\n\n        // Full size?\n        renderer.saveViewport();\n        renderer.setViewport(0, 0, renderer.getWidth(), renderer.getHeight());\n        renderer.renderPass([this._mesh], this._fakeCamera);\n        renderer.restoreViewport();\n        // this._mesh.material.shader.bind(renderer);\n        // this._mesh.material.bind(renderer);\n        // this._mesh.render(renderer.gl);\n    },\n\n    updateFromVRDisplay: function (vrDisplay) {\n\n        // FIXME\n        if (vrDisplay.deviceInfo_) {\n            // Hardcoded mesh size\n            this._updateMesh(20, 20, vrDisplay.deviceInfo_);\n        }\n        else {\n            console.warn('Cant get vrDisplay.deviceInfo_, seems code changed');\n        }\n    },\n\n    _updateMesh: function (width, height, deviceInfo) {\n\n        var positionAttr = this._mesh.geometry.attributes.position;\n        var texcoordAttr = this._mesh.geometry.attributes.texcoord0;\n        positionAttr.init(2 * width * height);\n        texcoordAttr.init(2 * width * height);\n\n        var lensFrustum = deviceInfo.getLeftEyeVisibleTanAngles();\n        var noLensFrustum = deviceInfo.getLeftEyeNoLensTanAngles();\n        var viewport = deviceInfo.getLeftEyeVisibleScreenRect(noLensFrustum);\n        var vidx = 0;\n\n        var pos = [];\n        var uv = [];\n\n        // Vertices\n        for (var e = 0; e < 2; e++) {\n            for (var j = 0; j < height; j++) {\n                for (var i = 0; i < width; i++, vidx++) {\n                    var u = i / (width - 1);\n                    var v = j / (height - 1);\n\n                    // Grid points regularly spaced in StreoScreen, and barrel distorted in\n                    // the mesh.\n                    var s = u;\n                    var t = v;\n                    var x = lerp(lensFrustum[0], lensFrustum[2], u);\n                    var y = lerp(lensFrustum[3], lensFrustum[1], v);\n                    var d = Math.sqrt(x * x + y * y);\n                    var r = deviceInfo.distortion.distortInverse(d);\n                    var p = x * r / d;\n                    var q = y * r / d;\n                    u = (p - noLensFrustum[0]) / (noLensFrustum[2] - noLensFrustum[0]);\n                    v = (q - noLensFrustum[3]) / (noLensFrustum[1] - noLensFrustum[3]);\n\n                    // Convert u,v to mesh screen coordinates.\n                    var aspect = deviceInfo.device.widthMeters / deviceInfo.device.heightMeters;\n\n                    // FIXME: The original Unity plugin multiplied U by the aspect ratio\n                    // and didn't multiply either value by 2, but that seems to get it\n                    // really close to correct looking for me. I hate this kind of \"Don't\n                    // know why it works\" code though, and wold love a more logical\n                    // explanation of what needs to happen here.\n                    u = (viewport.x + u * viewport.width - 0.5) * 2.0; //* aspect;\n                    v = (viewport.y + v * viewport.height - 0.5) * 2.0;\n\n                    pos[0] = u;\n                    pos[1] = v;\n                    pos[2] = 0;\n\n                    uv[0] = s * 0.5 + e * 0.5;\n                    uv[1] = t;\n\n                    positionAttr.set(vidx, pos);\n                    texcoordAttr.set(vidx, uv);\n                }\n            }\n\n            var w = lensFrustum[2] - lensFrustum[0];\n            lensFrustum[0] = -(w + lensFrustum[0]);\n            lensFrustum[2] = w - lensFrustum[2];\n            w = noLensFrustum[2] - noLensFrustum[0];\n            noLensFrustum[0] = -(w + noLensFrustum[0]);\n            noLensFrustum[2] = w - noLensFrustum[2];\n            viewport.x = 1 - (viewport.x + viewport.width);\n        }\n\n        // Indices\n        var indices = new Uint16Array(2 * (width - 1) * (height - 1) * 6);\n        var halfwidth = width / 2;\n        var halfheight = height / 2;\n        var vidx = 0;\n        var iidx = 0;\n        for (var e = 0; e < 2; e++) {\n            for (var j = 0; j < height; j++) {\n                for (var i = 0; i < width; i++, vidx++) {\n                    if (i === 0 || j === 0) {\n                        continue;\n                    }\n                    // Build a quad.  Lower right and upper left quadrants have quads with\n                    // the triangle diagonal flipped to get the vignette to interpolate\n                    // correctly.\n                    if ((i <= halfwidth) == (j <= halfheight)) {\n                        // Quad diagonal lower left to upper right.\n                        indices[iidx++] = vidx;\n                        indices[iidx++] = vidx - width - 1;\n                        indices[iidx++] = vidx - width;\n                        indices[iidx++] = vidx - width - 1;\n                        indices[iidx++] = vidx;\n                        indices[iidx++] = vidx - 1;\n                    }\n                    else {\n                        // Quad diagonal upper left to lower right.\n                        indices[iidx++] = vidx - 1;\n                        indices[iidx++] = vidx - width;\n                        indices[iidx++] = vidx;\n                        indices[iidx++] = vidx - width;\n                        indices[iidx++] = vidx - 1;\n                        indices[iidx++] = vidx - width - 1;\n                    }\n                }\n            }\n        }\n\n        this._mesh.geometry.indices = indices;\n\n        this._mesh.geometry.dirty();\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (CardboardDistorter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvdnIvQ2FyZGJvYXJkRGlzdG9ydGVyLmpzPzQ5MTYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZXZyL3dlYnZyLXBvbHlmaWxsL2Jsb2IvbWFzdGVyL3NyYy9jYXJkYm9hcmQtZGlzdG9ydGVyLmpzXG5cbi8vIFVzZSB3ZWJ2ciBtYXkgaGF2ZSBzY2FsZSBwcm9ibGVtLlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZXZyL3dlYnZyLXBvbHlmaWxsL2lzc3Vlcy8xNDBcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGV2ci93ZWJ2ci1wb2x5ZmlsbC9zZWFyY2g/cT1TQ0FMRSZ0eXBlPUlzc3VlcyZ1dGY4PSVFMiU5QyU5M1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZXZyL3dlYnZyLXBvbHlmaWxsL2lzc3Vlcy8xNDdcblxuXG5pbXBvcnQgTWVzaCBmcm9tICcuLi9NZXNoJztcbmltcG9ydCBNYXRlcmlhbCBmcm9tICcuLi9NYXRlcmlhbCc7XG5pbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi4vR2VvbWV0cnknO1xuaW1wb3J0IFNoYWRlciBmcm9tICcuLi9TaGFkZXInO1xuaW1wb3J0IEJhc2UgZnJvbSAnLi4vY29yZS9CYXNlJztcbmltcG9ydCBQZXJzcGVjdGl2ZUNhbWVyYSBmcm9tICcuLi9jYW1lcmEvUGVyc3BlY3RpdmUnO1xuXG5pbXBvcnQgb3V0cHV0RXNzbCBmcm9tICcuL291dHB1dC5nbHNsLmpzJztcblxuU2hhZGVyLmltcG9ydChvdXRwdXRFc3NsKTtcblxuZnVuY3Rpb24gbGVycCAoYSwgYiwgdCkge1xuICAgIHJldHVybiBhICogKDEgLSB0KSArIGIgKiB0O1xufVxuXG52YXIgQ2FyZGJvYXJkRGlzdG9ydGVyID0gQmFzZS5leHRlbmQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG5cbiAgICAgICAgY2xlYXJDb2xvcjogWzAsIDAsIDAsIDFdLFxuXG4gICAgICAgIF9tZXNoOiBuZXcgTWVzaCh7XG4gICAgICAgICAgICBnZW9tZXRyeTogbmV3IEdlb21ldHJ5KHtcbiAgICAgICAgICAgICAgICBkeW5hbWljOiB0cnVlXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGN1bGxpbmc6IGZhbHNlLFxuICAgICAgICAgICAgbWF0ZXJpYWw6IG5ldyBNYXRlcmlhbCh7XG4gICAgICAgICAgICAgICAgLy8gRklYTUUgV2h5IGRpc2FibGUgZGVwdGhNYXNrIHdpbGwgYmUgd3JvbmdcbiAgICAgICAgICAgICAgICAvLyBkZXB0aE1hc2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGRlcHRoVGVzdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgc2hhZGVyOiBuZXcgU2hhZGVyKHtcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4OiBTaGFkZXIuc291cmNlKCdjbGF5LnZyLmRpc29ydGVyLm91dHB1dC52ZXJ0ZXgnKSxcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnQ6IFNoYWRlci5zb3VyY2UoJ2NsYXkudnIuZGlzb3J0ZXIub3V0cHV0LmZyYWdtZW50JylcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSksXG4gICAgICAgIF9mYWtlQ2FtZXJhOiBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoKVxuICAgIH07XG59LCB7XG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uIChyZW5kZXJlciwgc291cmNlVGV4dHVyZSkge1xuICAgICAgICB2YXIgY2xlYXJDb2xvciA9IHRoaXMuY2xlYXJDb2xvcjtcbiAgICAgICAgdmFyIGdsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgIGdsLmNsZWFyQ29sb3IoY2xlYXJDb2xvclswXSwgY2xlYXJDb2xvclsxXSwgY2xlYXJDb2xvclsyXSwgY2xlYXJDb2xvclszXSk7XG4gICAgICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xuXG4gICAgICAgIGdsLmRpc2FibGUoZ2wuQkxFTkQpO1xuXG4gICAgICAgIHRoaXMuX21lc2gubWF0ZXJpYWwuc2V0KCd0ZXh0dXJlJywgc291cmNlVGV4dHVyZSk7XG5cbiAgICAgICAgLy8gRnVsbCBzaXplP1xuICAgICAgICByZW5kZXJlci5zYXZlVmlld3BvcnQoKTtcbiAgICAgICAgcmVuZGVyZXIuc2V0Vmlld3BvcnQoMCwgMCwgcmVuZGVyZXIuZ2V0V2lkdGgoKSwgcmVuZGVyZXIuZ2V0SGVpZ2h0KCkpO1xuICAgICAgICByZW5kZXJlci5yZW5kZXJQYXNzKFt0aGlzLl9tZXNoXSwgdGhpcy5fZmFrZUNhbWVyYSk7XG4gICAgICAgIHJlbmRlcmVyLnJlc3RvcmVWaWV3cG9ydCgpO1xuICAgICAgICAvLyB0aGlzLl9tZXNoLm1hdGVyaWFsLnNoYWRlci5iaW5kKHJlbmRlcmVyKTtcbiAgICAgICAgLy8gdGhpcy5fbWVzaC5tYXRlcmlhbC5iaW5kKHJlbmRlcmVyKTtcbiAgICAgICAgLy8gdGhpcy5fbWVzaC5yZW5kZXIocmVuZGVyZXIuZ2wpO1xuICAgIH0sXG5cbiAgICB1cGRhdGVGcm9tVlJEaXNwbGF5OiBmdW5jdGlvbiAodnJEaXNwbGF5KSB7XG5cbiAgICAgICAgLy8gRklYTUVcbiAgICAgICAgaWYgKHZyRGlzcGxheS5kZXZpY2VJbmZvXykge1xuICAgICAgICAgICAgLy8gSGFyZGNvZGVkIG1lc2ggc2l6ZVxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlTWVzaCgyMCwgMjAsIHZyRGlzcGxheS5kZXZpY2VJbmZvXyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NhbnQgZ2V0IHZyRGlzcGxheS5kZXZpY2VJbmZvXywgc2VlbXMgY29kZSBjaGFuZ2VkJyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX3VwZGF0ZU1lc2g6IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0LCBkZXZpY2VJbmZvKSB7XG5cbiAgICAgICAgdmFyIHBvc2l0aW9uQXR0ciA9IHRoaXMuX21lc2guZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbjtcbiAgICAgICAgdmFyIHRleGNvb3JkQXR0ciA9IHRoaXMuX21lc2guZ2VvbWV0cnkuYXR0cmlidXRlcy50ZXhjb29yZDA7XG4gICAgICAgIHBvc2l0aW9uQXR0ci5pbml0KDIgKiB3aWR0aCAqIGhlaWdodCk7XG4gICAgICAgIHRleGNvb3JkQXR0ci5pbml0KDIgKiB3aWR0aCAqIGhlaWdodCk7XG5cbiAgICAgICAgdmFyIGxlbnNGcnVzdHVtID0gZGV2aWNlSW5mby5nZXRMZWZ0RXllVmlzaWJsZVRhbkFuZ2xlcygpO1xuICAgICAgICB2YXIgbm9MZW5zRnJ1c3R1bSA9IGRldmljZUluZm8uZ2V0TGVmdEV5ZU5vTGVuc1RhbkFuZ2xlcygpO1xuICAgICAgICB2YXIgdmlld3BvcnQgPSBkZXZpY2VJbmZvLmdldExlZnRFeWVWaXNpYmxlU2NyZWVuUmVjdChub0xlbnNGcnVzdHVtKTtcbiAgICAgICAgdmFyIHZpZHggPSAwO1xuXG4gICAgICAgIHZhciBwb3MgPSBbXTtcbiAgICAgICAgdmFyIHV2ID0gW107XG5cbiAgICAgICAgLy8gVmVydGljZXNcbiAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCAyOyBlKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaGVpZ2h0OyBqKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdpZHRoOyBpKyssIHZpZHgrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IGkgLyAod2lkdGggLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBqIC8gKGhlaWdodCAtIDEpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEdyaWQgcG9pbnRzIHJlZ3VsYXJseSBzcGFjZWQgaW4gU3RyZW9TY3JlZW4sIGFuZCBiYXJyZWwgZGlzdG9ydGVkIGluXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBtZXNoLlxuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHU7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBsZXJwKGxlbnNGcnVzdHVtWzBdLCBsZW5zRnJ1c3R1bVsyXSwgdSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gbGVycChsZW5zRnJ1c3R1bVszXSwgbGVuc0ZydXN0dW1bMV0sIHYpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBkZXZpY2VJbmZvLmRpc3RvcnRpb24uZGlzdG9ydEludmVyc2UoZCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0geCAqIHIgLyBkO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcSA9IHkgKiByIC8gZDtcbiAgICAgICAgICAgICAgICAgICAgdSA9IChwIC0gbm9MZW5zRnJ1c3R1bVswXSkgLyAobm9MZW5zRnJ1c3R1bVsyXSAtIG5vTGVuc0ZydXN0dW1bMF0pO1xuICAgICAgICAgICAgICAgICAgICB2ID0gKHEgLSBub0xlbnNGcnVzdHVtWzNdKSAvIChub0xlbnNGcnVzdHVtWzFdIC0gbm9MZW5zRnJ1c3R1bVszXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCB1LHYgdG8gbWVzaCBzY3JlZW4gY29vcmRpbmF0ZXMuXG4gICAgICAgICAgICAgICAgICAgIHZhciBhc3BlY3QgPSBkZXZpY2VJbmZvLmRldmljZS53aWR0aE1ldGVycyAvIGRldmljZUluZm8uZGV2aWNlLmhlaWdodE1ldGVycztcblxuICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRTogVGhlIG9yaWdpbmFsIFVuaXR5IHBsdWdpbiBtdWx0aXBsaWVkIFUgYnkgdGhlIGFzcGVjdCByYXRpb1xuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgZGlkbid0IG11bHRpcGx5IGVpdGhlciB2YWx1ZSBieSAyLCBidXQgdGhhdCBzZWVtcyB0byBnZXQgaXRcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVhbGx5IGNsb3NlIHRvIGNvcnJlY3QgbG9va2luZyBmb3IgbWUuIEkgaGF0ZSB0aGlzIGtpbmQgb2YgXCJEb24ndFxuICAgICAgICAgICAgICAgICAgICAvLyBrbm93IHdoeSBpdCB3b3Jrc1wiIGNvZGUgdGhvdWdoLCBhbmQgd29sZCBsb3ZlIGEgbW9yZSBsb2dpY2FsXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4cGxhbmF0aW9uIG9mIHdoYXQgbmVlZHMgdG8gaGFwcGVuIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgIHUgPSAodmlld3BvcnQueCArIHUgKiB2aWV3cG9ydC53aWR0aCAtIDAuNSkgKiAyLjA7IC8vKiBhc3BlY3Q7XG4gICAgICAgICAgICAgICAgICAgIHYgPSAodmlld3BvcnQueSArIHYgKiB2aWV3cG9ydC5oZWlnaHQgLSAwLjUpICogMi4wO1xuXG4gICAgICAgICAgICAgICAgICAgIHBvc1swXSA9IHU7XG4gICAgICAgICAgICAgICAgICAgIHBvc1sxXSA9IHY7XG4gICAgICAgICAgICAgICAgICAgIHBvc1syXSA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgdXZbMF0gPSBzICogMC41ICsgZSAqIDAuNTtcbiAgICAgICAgICAgICAgICAgICAgdXZbMV0gPSB0O1xuXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uQXR0ci5zZXQodmlkeCwgcG9zKTtcbiAgICAgICAgICAgICAgICAgICAgdGV4Y29vcmRBdHRyLnNldCh2aWR4LCB1dik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdyA9IGxlbnNGcnVzdHVtWzJdIC0gbGVuc0ZydXN0dW1bMF07XG4gICAgICAgICAgICBsZW5zRnJ1c3R1bVswXSA9IC0odyArIGxlbnNGcnVzdHVtWzBdKTtcbiAgICAgICAgICAgIGxlbnNGcnVzdHVtWzJdID0gdyAtIGxlbnNGcnVzdHVtWzJdO1xuICAgICAgICAgICAgdyA9IG5vTGVuc0ZydXN0dW1bMl0gLSBub0xlbnNGcnVzdHVtWzBdO1xuICAgICAgICAgICAgbm9MZW5zRnJ1c3R1bVswXSA9IC0odyArIG5vTGVuc0ZydXN0dW1bMF0pO1xuICAgICAgICAgICAgbm9MZW5zRnJ1c3R1bVsyXSA9IHcgLSBub0xlbnNGcnVzdHVtWzJdO1xuICAgICAgICAgICAgdmlld3BvcnQueCA9IDEgLSAodmlld3BvcnQueCArIHZpZXdwb3J0LndpZHRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluZGljZXNcbiAgICAgICAgdmFyIGluZGljZXMgPSBuZXcgVWludDE2QXJyYXkoMiAqICh3aWR0aCAtIDEpICogKGhlaWdodCAtIDEpICogNik7XG4gICAgICAgIHZhciBoYWxmd2lkdGggPSB3aWR0aCAvIDI7XG4gICAgICAgIHZhciBoYWxmaGVpZ2h0ID0gaGVpZ2h0IC8gMjtcbiAgICAgICAgdmFyIHZpZHggPSAwO1xuICAgICAgICB2YXIgaWlkeCA9IDA7XG4gICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgMjsgZSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGhlaWdodDsgaisrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrLCB2aWR4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgaiA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gQnVpbGQgYSBxdWFkLiAgTG93ZXIgcmlnaHQgYW5kIHVwcGVyIGxlZnQgcXVhZHJhbnRzIGhhdmUgcXVhZHMgd2l0aFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgdHJpYW5nbGUgZGlhZ29uYWwgZmxpcHBlZCB0byBnZXQgdGhlIHZpZ25ldHRlIHRvIGludGVycG9sYXRlXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvcnJlY3RseS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKChpIDw9IGhhbGZ3aWR0aCkgPT0gKGogPD0gaGFsZmhlaWdodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFF1YWQgZGlhZ29uYWwgbG93ZXIgbGVmdCB0byB1cHBlciByaWdodC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZXNbaWlkeCsrXSA9IHZpZHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzW2lpZHgrK10gPSB2aWR4IC0gd2lkdGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIHdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIHdpZHRoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZXNbaWlkeCsrXSA9IHZpZHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzW2lpZHgrK10gPSB2aWR4IC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFF1YWQgZGlhZ29uYWwgdXBwZXIgbGVmdCB0byBsb3dlciByaWdodC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZXNbaWlkeCsrXSA9IHZpZHggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIHdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZXNbaWlkeCsrXSA9IHZpZHggLSB3aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZXNbaWlkeCsrXSA9IHZpZHggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIHdpZHRoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX21lc2guZ2VvbWV0cnkuaW5kaWNlcyA9IGluZGljZXM7XG5cbiAgICAgICAgdGhpcy5fbWVzaC5nZW9tZXRyeS5kaXJ0eSgpO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBDYXJkYm9hcmREaXN0b3J0ZXI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wvc3JjL3ZyL0NhcmRib2FyZERpc3RvcnRlci5qc1xuLy8gbW9kdWxlIGlkID0gMTk0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///194\n");

/***/ }),
/* 195 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.vr.disorter.output.vertex\\nattribute vec2 texcoord: TEXCOORD_0;\\nattribute vec3 position: POSITION;\\nvarying vec2 v_Texcoord;\\nvoid main()\\n{\\n v_Texcoord = texcoord;\\n gl_Position = vec4(position.xy, 0.5, 1.0);\\n}\\n@end\\n@export clay.vr.disorter.output.fragment\\nuniform sampler2D texture;\\nvarying vec2 v_Texcoord;\\nvoid main()\\n{\\n gl_FragColor = texture2D(texture, v_Texcoord);\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvdnIvb3V0cHV0Lmdsc2wuanM/YjQ0NCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS52ci5kaXNvcnRlci5vdXRwdXQudmVydGV4XFxuYXR0cmlidXRlIHZlYzIgdGV4Y29vcmQ6IFRFWENPT1JEXzA7XFxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb246IFBPU0lUSU9OO1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnZvaWQgbWFpbigpXFxue1xcbiB2X1RleGNvb3JkID0gdGV4Y29vcmQ7XFxuIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbi54eSwgMC41LCAxLjApO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnZyLmRpc29ydGVyLm91dHB1dC5mcmFnbWVudFxcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudm9pZCBtYWluKClcXG57XFxuIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh0ZXh0dXJlLCB2X1RleGNvb3JkKTtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy92ci9vdXRwdXQuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTk1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///195\n");

/***/ }),
/* 196 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__ = __webpack_require__(14);\n\n\n\n\nvar tmpProjectionMatrix = new __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */]();\n\nvar StereoCamera = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].extend(function () {\n    return {\n\n        aspect: 0.5,\n\n        _leftCamera: new __WEBPACK_IMPORTED_MODULE_1__camera_Perspective__[\"a\" /* default */](),\n\n        _rightCamera: new __WEBPACK_IMPORTED_MODULE_1__camera_Perspective__[\"a\" /* default */](),\n\n        _eyeLeft: new __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */](),\n        _eyeRight: new __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */](),\n\n        _frameData: null\n    };\n}, {\n\n    updateFromCamera: function (camera, focus, zoom, eyeSep) {\n        if (camera.transformNeedsUpdate()) {\n            console.warn('Node transform is not updated');\n        }\n\n        focus = focus == null ? 10 : focus;\n        zoom = zoom == null ? 1 : zoom;\n        eyeSep = eyeSep == null ? 0.064 : eyeSep;\n\n        var fov = camera.fov;\n        var aspect = camera.aspect * this.aspect;\n        var near = camera.near;\n\n        // Off-axis stereoscopic effect based on\n        // http://paulbourke.net/stereographics/stereorender/\n\n        tmpProjectionMatrix.copy(camera.projectionMatrix);\n        var eyeSep = eyeSep / 2;\n        var eyeSepOnProjection = eyeSep * near / focus;\n        var ymax = (near * Math.tan(Math.PI / 180 * fov * 0.5 ) ) / zoom;\n        var xmin, xmax;\n\n        // translate xOffset\n        this._eyeLeft.array[12] = - eyeSep;\n        this._eyeRight.array[12] = eyeSep;\n\n        // for left eye\n        xmin = - ymax * aspect + eyeSepOnProjection;\n        xmax = ymax * aspect + eyeSepOnProjection;\n\n        tmpProjectionMatrix.array[0] = 2 * near / (xmax - xmin);\n        tmpProjectionMatrix.array[8] = (xmax + xmin ) / (xmax - xmin);\n\n        this._leftCamera.projectionMatrix.copy(tmpProjectionMatrix);\n\n        // for right eye\n        xmin = - ymax * aspect - eyeSepOnProjection;\n        xmax = ymax * aspect - eyeSepOnProjection;\n\n        tmpProjectionMatrix.array[0] = 2 * near / (xmax - xmin);\n        tmpProjectionMatrix.array[8] = (xmax + xmin ) / (xmax - xmin);\n\n        this._rightCamera.projectionMatrix.copy(tmpProjectionMatrix);\n\n        this._leftCamera.worldTransform\n            .copy(camera.worldTransform)\n            .multiply(this._eyeLeft);\n\n        this._rightCamera.worldTransform\n            .copy(camera.worldTransform)\n            .multiply(this._eyeRight);\n\n        this._leftCamera.decomposeWorldTransform();\n        this._leftCamera.decomposeProjectionMatrix();\n\n        this._rightCamera.decomposeWorldTransform();\n        this._rightCamera.decomposeProjectionMatrix();\n    },\n\n    updateFromVRDisplay: function (vrDisplay, parentNode) {\n\n        if (typeof VRFrameData === 'undefined') {\n            return;\n        }\n\n        var frameData = this._frameData || (this._frameData = new VRFrameData());\n        vrDisplay.getFrameData(frameData);\n        var leftCamera = this._leftCamera;\n        var rightCamera = this._rightCamera;\n\n        leftCamera.projectionMatrix.setArray(frameData.leftProjectionMatrix);\n        leftCamera.decomposeProjectionMatrix();\n        leftCamera.viewMatrix.setArray(frameData.leftViewMatrix);\n        leftCamera.setViewMatrix(leftCamera.viewMatrix);\n\n        rightCamera.projectionMatrix.setArray(frameData.rightProjectionMatrix);\n        rightCamera.decomposeProjectionMatrix();\n        rightCamera.viewMatrix.setArray(frameData.rightViewMatrix);\n        rightCamera.setViewMatrix(rightCamera.viewMatrix);\n\n        if (parentNode && parentNode.worldTransform) {\n            if (parentNode.transformNeedsUpdate()) {\n                console.warn('Node transform is not updated');\n            }\n            leftCamera.worldTransform.multiplyLeft(parentNode.worldTransform);\n            leftCamera.decomposeWorldTransform();\n            rightCamera.worldTransform.multiplyLeft(parentNode.worldTransform);\n            rightCamera.decomposeWorldTransform();\n        }\n    },\n\n    getLeftCamera: function () {\n        return this._leftCamera;\n    },\n\n    getRightCamera: function () {\n        return this._rightCamera;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (StereoCamera);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC9zcmMvdnIvU3RlcmVvQ2FtZXJhLmpzPzc0NzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi4vTm9kZSc7XG5pbXBvcnQgQ2FtZXJhIGZyb20gJy4uL2NhbWVyYS9QZXJzcGVjdGl2ZSc7XG5pbXBvcnQgTWF0cml4NCBmcm9tICcuLi9tYXRoL01hdHJpeDQnO1xuXG52YXIgdG1wUHJvamVjdGlvbk1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XG5cbnZhciBTdGVyZW9DYW1lcmEgPSBCYXNlLmV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcblxuICAgICAgICBhc3BlY3Q6IDAuNSxcblxuICAgICAgICBfbGVmdENhbWVyYTogbmV3IENhbWVyYSgpLFxuXG4gICAgICAgIF9yaWdodENhbWVyYTogbmV3IENhbWVyYSgpLFxuXG4gICAgICAgIF9leWVMZWZ0OiBuZXcgTWF0cml4NCgpLFxuICAgICAgICBfZXllUmlnaHQ6IG5ldyBNYXRyaXg0KCksXG5cbiAgICAgICAgX2ZyYW1lRGF0YTogbnVsbFxuICAgIH07XG59LCB7XG5cbiAgICB1cGRhdGVGcm9tQ2FtZXJhOiBmdW5jdGlvbiAoY2FtZXJhLCBmb2N1cywgem9vbSwgZXllU2VwKSB7XG4gICAgICAgIGlmIChjYW1lcmEudHJhbnNmb3JtTmVlZHNVcGRhdGUoKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdOb2RlIHRyYW5zZm9ybSBpcyBub3QgdXBkYXRlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9jdXMgPSBmb2N1cyA9PSBudWxsID8gMTAgOiBmb2N1cztcbiAgICAgICAgem9vbSA9IHpvb20gPT0gbnVsbCA/IDEgOiB6b29tO1xuICAgICAgICBleWVTZXAgPSBleWVTZXAgPT0gbnVsbCA/IDAuMDY0IDogZXllU2VwO1xuXG4gICAgICAgIHZhciBmb3YgPSBjYW1lcmEuZm92O1xuICAgICAgICB2YXIgYXNwZWN0ID0gY2FtZXJhLmFzcGVjdCAqIHRoaXMuYXNwZWN0O1xuICAgICAgICB2YXIgbmVhciA9IGNhbWVyYS5uZWFyO1xuXG4gICAgICAgIC8vIE9mZi1heGlzIHN0ZXJlb3Njb3BpYyBlZmZlY3QgYmFzZWQgb25cbiAgICAgICAgLy8gaHR0cDovL3BhdWxib3Vya2UubmV0L3N0ZXJlb2dyYXBoaWNzL3N0ZXJlb3JlbmRlci9cblxuICAgICAgICB0bXBQcm9qZWN0aW9uTWF0cml4LmNvcHkoY2FtZXJhLnByb2plY3Rpb25NYXRyaXgpO1xuICAgICAgICB2YXIgZXllU2VwID0gZXllU2VwIC8gMjtcbiAgICAgICAgdmFyIGV5ZVNlcE9uUHJvamVjdGlvbiA9IGV5ZVNlcCAqIG5lYXIgLyBmb2N1cztcbiAgICAgICAgdmFyIHltYXggPSAobmVhciAqIE1hdGgudGFuKE1hdGguUEkgLyAxODAgKiBmb3YgKiAwLjUgKSApIC8gem9vbTtcbiAgICAgICAgdmFyIHhtaW4sIHhtYXg7XG5cbiAgICAgICAgLy8gdHJhbnNsYXRlIHhPZmZzZXRcbiAgICAgICAgdGhpcy5fZXllTGVmdC5hcnJheVsxMl0gPSAtIGV5ZVNlcDtcbiAgICAgICAgdGhpcy5fZXllUmlnaHQuYXJyYXlbMTJdID0gZXllU2VwO1xuXG4gICAgICAgIC8vIGZvciBsZWZ0IGV5ZVxuICAgICAgICB4bWluID0gLSB5bWF4ICogYXNwZWN0ICsgZXllU2VwT25Qcm9qZWN0aW9uO1xuICAgICAgICB4bWF4ID0geW1heCAqIGFzcGVjdCArIGV5ZVNlcE9uUHJvamVjdGlvbjtcblxuICAgICAgICB0bXBQcm9qZWN0aW9uTWF0cml4LmFycmF5WzBdID0gMiAqIG5lYXIgLyAoeG1heCAtIHhtaW4pO1xuICAgICAgICB0bXBQcm9qZWN0aW9uTWF0cml4LmFycmF5WzhdID0gKHhtYXggKyB4bWluICkgLyAoeG1heCAtIHhtaW4pO1xuXG4gICAgICAgIHRoaXMuX2xlZnRDYW1lcmEucHJvamVjdGlvbk1hdHJpeC5jb3B5KHRtcFByb2plY3Rpb25NYXRyaXgpO1xuXG4gICAgICAgIC8vIGZvciByaWdodCBleWVcbiAgICAgICAgeG1pbiA9IC0geW1heCAqIGFzcGVjdCAtIGV5ZVNlcE9uUHJvamVjdGlvbjtcbiAgICAgICAgeG1heCA9IHltYXggKiBhc3BlY3QgLSBleWVTZXBPblByb2plY3Rpb247XG5cbiAgICAgICAgdG1wUHJvamVjdGlvbk1hdHJpeC5hcnJheVswXSA9IDIgKiBuZWFyIC8gKHhtYXggLSB4bWluKTtcbiAgICAgICAgdG1wUHJvamVjdGlvbk1hdHJpeC5hcnJheVs4XSA9ICh4bWF4ICsgeG1pbiApIC8gKHhtYXggLSB4bWluKTtcblxuICAgICAgICB0aGlzLl9yaWdodENhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmNvcHkodG1wUHJvamVjdGlvbk1hdHJpeCk7XG5cbiAgICAgICAgdGhpcy5fbGVmdENhbWVyYS53b3JsZFRyYW5zZm9ybVxuICAgICAgICAgICAgLmNvcHkoY2FtZXJhLndvcmxkVHJhbnNmb3JtKVxuICAgICAgICAgICAgLm11bHRpcGx5KHRoaXMuX2V5ZUxlZnQpO1xuXG4gICAgICAgIHRoaXMuX3JpZ2h0Q2FtZXJhLndvcmxkVHJhbnNmb3JtXG4gICAgICAgICAgICAuY29weShjYW1lcmEud29ybGRUcmFuc2Zvcm0pXG4gICAgICAgICAgICAubXVsdGlwbHkodGhpcy5fZXllUmlnaHQpO1xuXG4gICAgICAgIHRoaXMuX2xlZnRDYW1lcmEuZGVjb21wb3NlV29ybGRUcmFuc2Zvcm0oKTtcbiAgICAgICAgdGhpcy5fbGVmdENhbWVyYS5kZWNvbXBvc2VQcm9qZWN0aW9uTWF0cml4KCk7XG5cbiAgICAgICAgdGhpcy5fcmlnaHRDYW1lcmEuZGVjb21wb3NlV29ybGRUcmFuc2Zvcm0oKTtcbiAgICAgICAgdGhpcy5fcmlnaHRDYW1lcmEuZGVjb21wb3NlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgIH0sXG5cbiAgICB1cGRhdGVGcm9tVlJEaXNwbGF5OiBmdW5jdGlvbiAodnJEaXNwbGF5LCBwYXJlbnROb2RlKSB7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBWUkZyYW1lRGF0YSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmcmFtZURhdGEgPSB0aGlzLl9mcmFtZURhdGEgfHwgKHRoaXMuX2ZyYW1lRGF0YSA9IG5ldyBWUkZyYW1lRGF0YSgpKTtcbiAgICAgICAgdnJEaXNwbGF5LmdldEZyYW1lRGF0YShmcmFtZURhdGEpO1xuICAgICAgICB2YXIgbGVmdENhbWVyYSA9IHRoaXMuX2xlZnRDYW1lcmE7XG4gICAgICAgIHZhciByaWdodENhbWVyYSA9IHRoaXMuX3JpZ2h0Q2FtZXJhO1xuXG4gICAgICAgIGxlZnRDYW1lcmEucHJvamVjdGlvbk1hdHJpeC5zZXRBcnJheShmcmFtZURhdGEubGVmdFByb2plY3Rpb25NYXRyaXgpO1xuICAgICAgICBsZWZ0Q2FtZXJhLmRlY29tcG9zZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgICAgICAgbGVmdENhbWVyYS52aWV3TWF0cml4LnNldEFycmF5KGZyYW1lRGF0YS5sZWZ0Vmlld01hdHJpeCk7XG4gICAgICAgIGxlZnRDYW1lcmEuc2V0Vmlld01hdHJpeChsZWZ0Q2FtZXJhLnZpZXdNYXRyaXgpO1xuXG4gICAgICAgIHJpZ2h0Q2FtZXJhLnByb2plY3Rpb25NYXRyaXguc2V0QXJyYXkoZnJhbWVEYXRhLnJpZ2h0UHJvamVjdGlvbk1hdHJpeCk7XG4gICAgICAgIHJpZ2h0Q2FtZXJhLmRlY29tcG9zZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgICAgICAgcmlnaHRDYW1lcmEudmlld01hdHJpeC5zZXRBcnJheShmcmFtZURhdGEucmlnaHRWaWV3TWF0cml4KTtcbiAgICAgICAgcmlnaHRDYW1lcmEuc2V0Vmlld01hdHJpeChyaWdodENhbWVyYS52aWV3TWF0cml4KTtcblxuICAgICAgICBpZiAocGFyZW50Tm9kZSAmJiBwYXJlbnROb2RlLndvcmxkVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50Tm9kZS50cmFuc2Zvcm1OZWVkc1VwZGF0ZSgpKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdOb2RlIHRyYW5zZm9ybSBpcyBub3QgdXBkYXRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGVmdENhbWVyYS53b3JsZFRyYW5zZm9ybS5tdWx0aXBseUxlZnQocGFyZW50Tm9kZS53b3JsZFRyYW5zZm9ybSk7XG4gICAgICAgICAgICBsZWZ0Q2FtZXJhLmRlY29tcG9zZVdvcmxkVHJhbnNmb3JtKCk7XG4gICAgICAgICAgICByaWdodENhbWVyYS53b3JsZFRyYW5zZm9ybS5tdWx0aXBseUxlZnQocGFyZW50Tm9kZS53b3JsZFRyYW5zZm9ybSk7XG4gICAgICAgICAgICByaWdodENhbWVyYS5kZWNvbXBvc2VXb3JsZFRyYW5zZm9ybSgpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGdldExlZnRDYW1lcmE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xlZnRDYW1lcmE7XG4gICAgfSxcblxuICAgIGdldFJpZ2h0Q2FtZXJhOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yaWdodENhbWVyYTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgU3RlcmVvQ2FtZXJhO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsL3NyYy92ci9TdGVyZW9DYW1lcmEuanNcbi8vIG1vZHVsZSBpZCA9IDE5NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///196\n");

/***/ }),
/* 197 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_claygl__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__SSAOPass__ = __webpack_require__(198);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__SSRPass__ = __webpack_require__(200);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__circularSeparateKernel__ = __webpack_require__(202);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__composite_js__ = __webpack_require__(203);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__DOF_glsl_js__ = __webpack_require__(204);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__temporalBlend_glsl_js__ = __webpack_require__(205);\n\n\n\n\n\n\n\n\n\n\n\nvar GBuffer = __WEBPACK_IMPORTED_MODULE_0_claygl__[\"o\" /* deferred */].GBuffer;\n\n__WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].import(__WEBPACK_IMPORTED_MODULE_5__DOF_glsl_js__[\"a\" /* default */]);\n\n__WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].import(__WEBPACK_IMPORTED_MODULE_6__temporalBlend_glsl_js__[\"a\" /* default */]);\n\nvar commonOutputs = {\n    color: {\n        parameters: {\n            width: function (renderer) {\n                return renderer.getWidth();\n            },\n            height: function (renderer) {\n                return renderer.getHeight();\n            }\n        }\n    }\n};\n\nvar FINAL_NODES_CHAIN = ['composite', 'FXAA'];\n\nfunction EffectCompositor() {\n\n    this._gBufferPass = new GBuffer({\n        renderTransparent: true,\n        enableTargetTexture3: false,\n        enableTargetTexture4: true\n    });\n\n    this._compositor = Object(__WEBPACK_IMPORTED_MODULE_0_claygl__[\"n\" /* createCompositor */])(__WEBPACK_IMPORTED_MODULE_4__composite_js__[\"a\" /* default */]);\n\n    var sourceNode = this._compositor.getNodeByName('source');\n    var cocNode = this._compositor.getNodeByName('coc');\n\n    this._sourceNode = sourceNode;\n    this._cocNode = cocNode;\n    this._compositeNode = this._compositor.getNodeByName('composite');\n    this._fxaaNode = this._compositor.getNodeByName('FXAA');\n\n    this._dofBlurNodes = [\n        'dof_blur_far_1', 'dof_blur_far_2', 'dof_blur_far_3', 'dof_blur_far_4', 'dof_blur_far_final',\n        'dof_blur_near_1', 'dof_blur_near_2', 'dof_blur_near_3', 'dof_blur_near_4', 'dof_blur_near_final'\n    ].map(function (name) {\n        return this._compositor.getNodeByName(name);\n    }, this);\n\n    this._dofFarFieldNode = this._compositor.getNodeByName('dof_separate_far');\n    this._dofNearFieldNode = this._compositor.getNodeByName('dof_separate_near');\n    this._dofCompositeNode = this._compositor.getNodeByName('dof_composite');\n\n    this._dofBlurKernel = null;\n    this._dofBlurKernelSize = new Float32Array(0);\n\n    this._finalNodesChain = FINAL_NODES_CHAIN.map(function (name) {\n        return this._compositor.getNodeByName(name);\n    }, this);\n\n    var gBufferObj = {\n        normalTexture: this._gBufferPass.getTargetTexture1(),\n        depthTexture: this._gBufferPass.getTargetTexture2(),\n        albedoTexture: this._gBufferPass.getTargetTexture3(),\n        velocityTexture: this._gBufferPass.getTargetTexture4()\n    };\n    this._ssaoPass = new __WEBPACK_IMPORTED_MODULE_1__SSAOPass__[\"a\" /* default */](gBufferObj);\n    this._ssrPass = new __WEBPACK_IMPORTED_MODULE_2__SSRPass__[\"a\" /* default */](gBufferObj);\n}\n\nEffectCompositor.prototype.resize = function (width, height, dpr) {\n    dpr = dpr || 1;\n    width = width * dpr;\n    height = height * dpr;\n    this._gBufferPass.resize(width, height);\n};\n\nEffectCompositor.prototype._ifRenderNormalPass = function () {\n    // return this._enableSSAO || this._enableEdge || this._enableSSR;\n    return true;\n};\n\nEffectCompositor.prototype._getPrevNode = function (node) {\n    var idx = FINAL_NODES_CHAIN.indexOf(node.name) - 1;\n    var prevNode = this._finalNodesChain[idx];\n    while (prevNode && !this._compositor.getNodeByName(prevNode.name)) {\n        idx -= 1;\n        prevNode = this._finalNodesChain[idx];\n    }\n    return prevNode;\n};\nEffectCompositor.prototype._getNextNode = function (node) {\n    var idx = FINAL_NODES_CHAIN.indexOf(node.name) + 1;\n    var nextNode = this._finalNodesChain[idx];\n    while (nextNode && !this._compositor.getNodeByName(nextNode.name)) {\n        idx += 1;\n        nextNode = this._finalNodesChain[idx];\n    }\n    return nextNode;\n};\nEffectCompositor.prototype._addChainNode = function (node) {\n    var prevNode = this._getPrevNode(node);\n    var nextNode = this._getNextNode(node);\n    if (!prevNode) {\n        return;\n    }\n\n    prevNode.outputs = commonOutputs;\n    node.inputs.texture = prevNode.name;\n    if (nextNode) {\n        node.outputs = commonOutputs;\n        nextNode.inputs.texture = node.name;\n    }\n    else {\n        node.outputs = null;\n    }\n    this._compositor.addNode(node);\n};\nEffectCompositor.prototype._removeChainNode = function (node) {\n    var prevNode = this._getPrevNode(node);\n    var nextNode = this._getNextNode(node);\n    if (!prevNode) {\n        return;\n    }\n\n    if (nextNode) {\n        prevNode.outputs = commonOutputs;\n        nextNode.inputs.texture = prevNode.name;\n    }\n    else {\n        prevNode.outputs = null;\n    }\n    this._compositor.removeNode(node);\n};\n/**\n * Update normal\n */\nEffectCompositor.prototype.updateGBuffer = function (renderer, scene, camera, frame) {\n    if (this._ifRenderNormalPass()) {\n        this._gBufferPass.update(renderer, scene, camera);\n    }\n};\n\n/**\n * Render SSAO after render the scene, before compositing\n */\nEffectCompositor.prototype.updateSSAO = function (renderer, scene, camera, frame) {\n    this._ssaoPass.update(renderer, camera, frame);\n};\n\nEffectCompositor.prototype.updateSSR = function (renderer, scene, camera, sourceTexture, reflectionSourceTexture, frame) {\n    this._ssrPass.setSSAOTexture(\n        this._enableSSAO ? this._ssaoPass.getTargetTexture() : null\n    );\n    this._ssrPass.update(renderer, camera, sourceTexture, reflectionSourceTexture, frame);\n};\n\n/**\n * Enable SSAO effect\n */\nEffectCompositor.prototype.enableSSAO = function () {\n    this._enableSSAO = true;\n};\n\n/**\n * Disable SSAO effect\n */\nEffectCompositor.prototype.disableSSAO = function () {\n    this._enableSSAO = false;\n};\n\nEffectCompositor.prototype.enableVelocityBuffer = function () {\n    this._gBufferPass.enableTargetTexture4 = true;\n};\nEffectCompositor.prototype.disableVelocityBuffer = function () {\n    this._gBufferPass.enableTargetTexture4 = false;\n};\n\n/**\n * Enable SSR effect\n */\nEffectCompositor.prototype.enableSSR = function () {\n    this._enableSSR = true;\n};\n/**\n * Disable SSR effect\n */\nEffectCompositor.prototype.disableSSR = function () {\n    this._enableSSR = false;\n};\n\n/**\n * Render SSAO after render the scene, before compositing\n */\nEffectCompositor.prototype.getSSAOTexture = function () {\n    return this._ssaoPass.getTargetTexture();\n};\n\nEffectCompositor.prototype.getSSRTexture = function () {\n    return this._ssrPass.getTargetTexture();\n};\n\n\nEffectCompositor.prototype.getVelocityTexture = function () {\n    return this._gBufferPass.getTargetTexture4();\n};\nEffectCompositor.prototype.getDepthTexture = function () {\n    return this._gBufferPass.getTargetTexture2();\n};\n\n/**\n * Disable fxaa effect\n */\nEffectCompositor.prototype.disableFXAA = function () {\n    this._removeChainNode(this._fxaaNode);\n};\n\n/**\n * Enable fxaa effect\n */\nEffectCompositor.prototype.enableFXAA = function () {\n    this._addChainNode(this._fxaaNode);\n};\n\n/**\n * Enable bloom effect\n */\nEffectCompositor.prototype.enableBloom = function () {\n    this._compositeNode.inputs.bloom = 'bloom_composite';\n    this._compositor.dirty();\n};\n\n/**\n * Disable bloom effect\n */\nEffectCompositor.prototype.disableBloom = function () {\n    this._compositeNode.inputs.bloom = null;\n    this._compositor.dirty();\n};\n\n/**\n * Enable depth of field effect\n */\nEffectCompositor.prototype.enableDOF = function () {\n    this._compositeNode.inputs.texture = 'dof_composite';\n    this._compositor.dirty();\n};\n/**\n * Disable depth of field effect\n */\nEffectCompositor.prototype.disableDOF = function () {\n    this._compositeNode.inputs.texture = 'source';\n    this._compositor.dirty();\n};\n\n/**\n * Enable color correction\n */\nEffectCompositor.prototype.enableColorCorrection = function () {\n    this._compositeNode.define('COLOR_CORRECTION');\n    this._enableColorCorrection = true;\n};\n/**\n * Disable color correction\n */\nEffectCompositor.prototype.disableColorCorrection = function () {\n    this._compositeNode.undefine('COLOR_CORRECTION');\n    this._enableColorCorrection = false;\n};\n\n/**\n * Enable edge detection\n */\nEffectCompositor.prototype.enableEdge = function () {\n    this._enableEdge = true;\n};\n\n/**\n * Disable edge detection\n */\nEffectCompositor.prototype.disableEdge = function () {\n    this._enableEdge = false;\n};\n\n/**\n * Set bloom intensity\n * @param {number} value\n */\nEffectCompositor.prototype.setBloomIntensity = function (value) {\n    if (value == null) {\n        return;\n    }\n    this._compositeNode.setParameter('bloomIntensity', value);\n};\n\nEffectCompositor.prototype.setSSAOParameter = function (name, value) {\n    if (value == null) {\n        return;\n    }\n    switch (name) {\n        case 'quality':\n            // PENDING\n            var kernelSize = ({\n                low: 6,\n                medium: 12,\n                high: 32,\n                ultra: 62\n            })[value] || 12;\n            this._ssaoPass.setParameter('kernelSize', kernelSize);\n            break;\n        case 'radius':\n            this._ssaoPass.setParameter(name, value);\n            this._ssaoPass.setParameter('bias', value / 50);\n            break;\n        case 'intensity':\n        case 'temporalFilter':\n            this._ssaoPass.setParameter(name, value);\n            break;\n    }\n};\n\nEffectCompositor.prototype.setDOFParameter = function (name, value) {\n    if (value == null) {\n        return;\n    }\n    switch (name) {\n        case 'focalDistance':\n        case 'focalRange':\n        case 'aperture':\n            this._cocNode.setParameter(name, value);\n            break;\n        case 'blurRadius':\n            this._dofBlurRadius = value;\n            break;\n        // case 'quality':\n        //     this._dofBlurKernel = poissonKernel[value] || poissonKernel.medium;\n        //     var kernelSize = this._dofBlurKernel.length / 2;\n        //     for (var i = 0; i < this._dofBlurNodes.length; i++) {\n        //         this._dofBlurNodes[i].define('POISSON_KERNEL_SIZE', kernelSize);\n        //     }\n        //     break;\n    }\n};\n\nEffectCompositor.prototype.setSSRParameter = function (name, value) {\n    if (value == null) {\n        return;\n    }\n    switch (name) {\n        case 'quality':\n            // PENDING\n            var maxIteration = ({\n                low: 10,\n                medium: 15,\n                high: 30,\n                ultra: 80\n            })[value] || 20;\n            var pixelStride = ({\n                low: 32,\n                medium: 16,\n                high: 8,\n                ultra: 4\n            })[value] || 16;\n            this._ssrPass.setParameter('maxIteration', maxIteration);\n            this._ssrPass.setParameter('pixelStride', pixelStride);\n            break;\n        case 'maxRoughness':\n            this._ssrPass.setParameter('minGlossiness', Math.max(Math.min(1.0 - value, 1.0), 0.0));\n            break;\n        default:\n            console.warn('Unkown SSR parameter ' + name);\n    }\n};\n\n/**\n * Set color of edge\n */\nEffectCompositor.prototype.setEdgeColor = function (value) {\n    // if (value == null) {\n    //     return;\n    // }\n    // this._edgePass.setParameter('edgeColor', value);\n};\n\nEffectCompositor.prototype.setExposure = function (value) {\n    if (value == null) {\n        return;\n    }\n    this._compositeNode.setParameter('exposure', Math.pow(2, value));\n};\n\nEffectCompositor.prototype.setColorLookupTexture = function (image, api) {\n    // this._compositeNode.pass.material.setTextureImage('lut', this._enableColorCorrection ? image : 'none', api, {\n    //     minFilter: Texture.NEAREST,\n    //     magFilter: Texture.NEAREST,\n    //     flipY: false\n    // });\n};\nEffectCompositor.prototype.setColorCorrection = function (type, value) {\n    this._compositeNode.setParameter(type, value);\n};\n\nEffectCompositor.prototype.composite = function (renderer, scene, camera, sourceTexture, depthTexture, frame) {\n    this._sourceNode.texture = sourceTexture;\n\n    this._cocNode.setParameter('depth', depthTexture);\n\n    // var blurKernel = this._dofBlurKernel;\n\n    var maxCoc = this._dofBlurRadius || 10;\n    maxCoc /= renderer.getHeight();\n    // var minCoc = 1 / renderer.getHeight();\n    var minCoc = 0;\n    // var jitter = Math.random();\n    for (var i = 0; i < this._dofBlurNodes.length; i++) {\n        var blurNode = this._dofBlurNodes[i];\n        blurNode.setParameter('kernel1', __WEBPACK_IMPORTED_MODULE_3__circularSeparateKernel__[\"a\" /* default */].component1);\n        blurNode.setParameter('kernel2', __WEBPACK_IMPORTED_MODULE_3__circularSeparateKernel__[\"a\" /* default */].component2);\n        blurNode.setParameter('maxCoc', maxCoc);\n        blurNode.setParameter('minCoc', minCoc);\n    }\n    this._cocNode.setParameter('maxCoc', maxCoc);\n    this._dofCompositeNode.setParameter('maxCoc', maxCoc);\n    this._dofCompositeNode.setParameter('minCoc', minCoc);\n    this._dofFarFieldNode.setParameter('minCoc', minCoc / maxCoc);\n    this._dofNearFieldNode.setParameter('minCoc', minCoc / maxCoc);\n\n    this._cocNode.setParameter('zNear', camera.near);\n    this._cocNode.setParameter('zFar', camera.far);\n\n    this._compositor.render(renderer);\n};\n\nEffectCompositor.prototype.isSSRFinished = function (frame) {\n    return this._ssrPass ? this._ssrPass.isFinished(frame) : true;\n};\n\nEffectCompositor.prototype.isSSAOFinished = function (frame) {\n    return this._ssaoPass ? this._ssaoPass.isFinished(frame) : true;\n};\n\nEffectCompositor.prototype.isSSREnabled = function () {\n    return this._enableSSR;\n};\n\nEffectCompositor.prototype.dispose = function (renderer) {\n    this._compositor.dispose(renderer);\n\n    this._gBufferPass.dispose(renderer);\n    this._ssaoPass.dispose(renderer);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (EffectCompositor);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvRWZmZWN0Q29tcG9zaXRvci5qcz84ZmQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNoYWRlciwgVGV4dHVyZTJELCBUZXh0dXJlLCBGcmFtZUJ1ZmZlciwgY3JlYXRlQ29tcG9zaXRvciwgZGVmZXJyZWQsIHNoYWRlciB9IGZyb20gJ2NsYXlnbCc7XG5cbmltcG9ydCBTU0FPUGFzcyBmcm9tICcuL1NTQU9QYXNzJztcbmltcG9ydCBTU1JQYXNzIGZyb20gJy4vU1NSUGFzcyc7XG5pbXBvcnQgY2lyY3VsYXJTZXBhcmF0ZUtlcm5lbCBmcm9tICcuL2NpcmN1bGFyU2VwYXJhdGVLZXJuZWwnO1xuXG5pbXBvcnQgZWZmZWN0SnNvbiBmcm9tICcuL2NvbXBvc2l0ZS5qcyc7XG5cbmltcG9ydCBkb2ZDb2RlIGZyb20gJy4vRE9GLmdsc2wuanMnO1xuaW1wb3J0IHRlbXBvcmFsQmxlbmRDb2RlIGZyb20gJy4vdGVtcG9yYWxCbGVuZC5nbHNsLmpzJztcblxudmFyIEdCdWZmZXIgPSBkZWZlcnJlZC5HQnVmZmVyO1xuXG5TaGFkZXIuaW1wb3J0KGRvZkNvZGUpO1xuXG5TaGFkZXIuaW1wb3J0KHRlbXBvcmFsQmxlbmRDb2RlKTtcblxudmFyIGNvbW1vbk91dHB1dHMgPSB7XG4gICAgY29sb3I6IHtcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgICAgd2lkdGg6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJlci5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhlaWdodDogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmVyLmdldEhlaWdodCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxudmFyIEZJTkFMX05PREVTX0NIQUlOID0gWydjb21wb3NpdGUnLCAnRlhBQSddO1xuXG5mdW5jdGlvbiBFZmZlY3RDb21wb3NpdG9yKCkge1xuXG4gICAgdGhpcy5fZ0J1ZmZlclBhc3MgPSBuZXcgR0J1ZmZlcih7XG4gICAgICAgIHJlbmRlclRyYW5zcGFyZW50OiB0cnVlLFxuICAgICAgICBlbmFibGVUYXJnZXRUZXh0dXJlMzogZmFsc2UsXG4gICAgICAgIGVuYWJsZVRhcmdldFRleHR1cmU0OiB0cnVlXG4gICAgfSk7XG5cbiAgICB0aGlzLl9jb21wb3NpdG9yID0gY3JlYXRlQ29tcG9zaXRvcihlZmZlY3RKc29uKTtcblxuICAgIHZhciBzb3VyY2VOb2RlID0gdGhpcy5fY29tcG9zaXRvci5nZXROb2RlQnlOYW1lKCdzb3VyY2UnKTtcbiAgICB2YXIgY29jTm9kZSA9IHRoaXMuX2NvbXBvc2l0b3IuZ2V0Tm9kZUJ5TmFtZSgnY29jJyk7XG5cbiAgICB0aGlzLl9zb3VyY2VOb2RlID0gc291cmNlTm9kZTtcbiAgICB0aGlzLl9jb2NOb2RlID0gY29jTm9kZTtcbiAgICB0aGlzLl9jb21wb3NpdGVOb2RlID0gdGhpcy5fY29tcG9zaXRvci5nZXROb2RlQnlOYW1lKCdjb21wb3NpdGUnKTtcbiAgICB0aGlzLl9meGFhTm9kZSA9IHRoaXMuX2NvbXBvc2l0b3IuZ2V0Tm9kZUJ5TmFtZSgnRlhBQScpO1xuXG4gICAgdGhpcy5fZG9mQmx1ck5vZGVzID0gW1xuICAgICAgICAnZG9mX2JsdXJfZmFyXzEnLCAnZG9mX2JsdXJfZmFyXzInLCAnZG9mX2JsdXJfZmFyXzMnLCAnZG9mX2JsdXJfZmFyXzQnLCAnZG9mX2JsdXJfZmFyX2ZpbmFsJyxcbiAgICAgICAgJ2RvZl9ibHVyX25lYXJfMScsICdkb2ZfYmx1cl9uZWFyXzInLCAnZG9mX2JsdXJfbmVhcl8zJywgJ2RvZl9ibHVyX25lYXJfNCcsICdkb2ZfYmx1cl9uZWFyX2ZpbmFsJ1xuICAgIF0ubWFwKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb21wb3NpdG9yLmdldE5vZGVCeU5hbWUobmFtZSk7XG4gICAgfSwgdGhpcyk7XG5cbiAgICB0aGlzLl9kb2ZGYXJGaWVsZE5vZGUgPSB0aGlzLl9jb21wb3NpdG9yLmdldE5vZGVCeU5hbWUoJ2RvZl9zZXBhcmF0ZV9mYXInKTtcbiAgICB0aGlzLl9kb2ZOZWFyRmllbGROb2RlID0gdGhpcy5fY29tcG9zaXRvci5nZXROb2RlQnlOYW1lKCdkb2Zfc2VwYXJhdGVfbmVhcicpO1xuICAgIHRoaXMuX2RvZkNvbXBvc2l0ZU5vZGUgPSB0aGlzLl9jb21wb3NpdG9yLmdldE5vZGVCeU5hbWUoJ2RvZl9jb21wb3NpdGUnKTtcblxuICAgIHRoaXMuX2RvZkJsdXJLZXJuZWwgPSBudWxsO1xuICAgIHRoaXMuX2RvZkJsdXJLZXJuZWxTaXplID0gbmV3IEZsb2F0MzJBcnJheSgwKTtcblxuICAgIHRoaXMuX2ZpbmFsTm9kZXNDaGFpbiA9IEZJTkFMX05PREVTX0NIQUlOLm1hcChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29tcG9zaXRvci5nZXROb2RlQnlOYW1lKG5hbWUpO1xuICAgIH0sIHRoaXMpO1xuXG4gICAgdmFyIGdCdWZmZXJPYmogPSB7XG4gICAgICAgIG5vcm1hbFRleHR1cmU6IHRoaXMuX2dCdWZmZXJQYXNzLmdldFRhcmdldFRleHR1cmUxKCksXG4gICAgICAgIGRlcHRoVGV4dHVyZTogdGhpcy5fZ0J1ZmZlclBhc3MuZ2V0VGFyZ2V0VGV4dHVyZTIoKSxcbiAgICAgICAgYWxiZWRvVGV4dHVyZTogdGhpcy5fZ0J1ZmZlclBhc3MuZ2V0VGFyZ2V0VGV4dHVyZTMoKSxcbiAgICAgICAgdmVsb2NpdHlUZXh0dXJlOiB0aGlzLl9nQnVmZmVyUGFzcy5nZXRUYXJnZXRUZXh0dXJlNCgpXG4gICAgfTtcbiAgICB0aGlzLl9zc2FvUGFzcyA9IG5ldyBTU0FPUGFzcyhnQnVmZmVyT2JqKTtcbiAgICB0aGlzLl9zc3JQYXNzID0gbmV3IFNTUlBhc3MoZ0J1ZmZlck9iaik7XG59XG5cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLnJlc2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0LCBkcHIpIHtcbiAgICBkcHIgPSBkcHIgfHwgMTtcbiAgICB3aWR0aCA9IHdpZHRoICogZHByO1xuICAgIGhlaWdodCA9IGhlaWdodCAqIGRwcjtcbiAgICB0aGlzLl9nQnVmZmVyUGFzcy5yZXNpemUod2lkdGgsIGhlaWdodCk7XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5faWZSZW5kZXJOb3JtYWxQYXNzID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIHJldHVybiB0aGlzLl9lbmFibGVTU0FPIHx8IHRoaXMuX2VuYWJsZUVkZ2UgfHwgdGhpcy5fZW5hYmxlU1NSO1xuICAgIHJldHVybiB0cnVlO1xufTtcblxuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuX2dldFByZXZOb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICB2YXIgaWR4ID0gRklOQUxfTk9ERVNfQ0hBSU4uaW5kZXhPZihub2RlLm5hbWUpIC0gMTtcbiAgICB2YXIgcHJldk5vZGUgPSB0aGlzLl9maW5hbE5vZGVzQ2hhaW5baWR4XTtcbiAgICB3aGlsZSAocHJldk5vZGUgJiYgIXRoaXMuX2NvbXBvc2l0b3IuZ2V0Tm9kZUJ5TmFtZShwcmV2Tm9kZS5uYW1lKSkge1xuICAgICAgICBpZHggLT0gMTtcbiAgICAgICAgcHJldk5vZGUgPSB0aGlzLl9maW5hbE5vZGVzQ2hhaW5baWR4XTtcbiAgICB9XG4gICAgcmV0dXJuIHByZXZOb2RlO1xufTtcbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLl9nZXROZXh0Tm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgdmFyIGlkeCA9IEZJTkFMX05PREVTX0NIQUlOLmluZGV4T2Yobm9kZS5uYW1lKSArIDE7XG4gICAgdmFyIG5leHROb2RlID0gdGhpcy5fZmluYWxOb2Rlc0NoYWluW2lkeF07XG4gICAgd2hpbGUgKG5leHROb2RlICYmICF0aGlzLl9jb21wb3NpdG9yLmdldE5vZGVCeU5hbWUobmV4dE5vZGUubmFtZSkpIHtcbiAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIG5leHROb2RlID0gdGhpcy5fZmluYWxOb2Rlc0NoYWluW2lkeF07XG4gICAgfVxuICAgIHJldHVybiBuZXh0Tm9kZTtcbn07XG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5fYWRkQ2hhaW5Ob2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICB2YXIgcHJldk5vZGUgPSB0aGlzLl9nZXRQcmV2Tm9kZShub2RlKTtcbiAgICB2YXIgbmV4dE5vZGUgPSB0aGlzLl9nZXROZXh0Tm9kZShub2RlKTtcbiAgICBpZiAoIXByZXZOb2RlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwcmV2Tm9kZS5vdXRwdXRzID0gY29tbW9uT3V0cHV0cztcbiAgICBub2RlLmlucHV0cy50ZXh0dXJlID0gcHJldk5vZGUubmFtZTtcbiAgICBpZiAobmV4dE5vZGUpIHtcbiAgICAgICAgbm9kZS5vdXRwdXRzID0gY29tbW9uT3V0cHV0cztcbiAgICAgICAgbmV4dE5vZGUuaW5wdXRzLnRleHR1cmUgPSBub2RlLm5hbWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBub2RlLm91dHB1dHMgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLl9jb21wb3NpdG9yLmFkZE5vZGUobm9kZSk7XG59O1xuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuX3JlbW92ZUNoYWluTm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgdmFyIHByZXZOb2RlID0gdGhpcy5fZ2V0UHJldk5vZGUobm9kZSk7XG4gICAgdmFyIG5leHROb2RlID0gdGhpcy5fZ2V0TmV4dE5vZGUobm9kZSk7XG4gICAgaWYgKCFwcmV2Tm9kZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5leHROb2RlKSB7XG4gICAgICAgIHByZXZOb2RlLm91dHB1dHMgPSBjb21tb25PdXRwdXRzO1xuICAgICAgICBuZXh0Tm9kZS5pbnB1dHMudGV4dHVyZSA9IHByZXZOb2RlLm5hbWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwcmV2Tm9kZS5vdXRwdXRzID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5fY29tcG9zaXRvci5yZW1vdmVOb2RlKG5vZGUpO1xufTtcbi8qKlxuICogVXBkYXRlIG5vcm1hbFxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS51cGRhdGVHQnVmZmVyID0gZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCBmcmFtZSkge1xuICAgIGlmICh0aGlzLl9pZlJlbmRlck5vcm1hbFBhc3MoKSkge1xuICAgICAgICB0aGlzLl9nQnVmZmVyUGFzcy51cGRhdGUocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEpO1xuICAgIH1cbn07XG5cbi8qKlxuICogUmVuZGVyIFNTQU8gYWZ0ZXIgcmVuZGVyIHRoZSBzY2VuZSwgYmVmb3JlIGNvbXBvc2l0aW5nXG4gKi9cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLnVwZGF0ZVNTQU8gPSBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIGZyYW1lKSB7XG4gICAgdGhpcy5fc3Nhb1Bhc3MudXBkYXRlKHJlbmRlcmVyLCBjYW1lcmEsIGZyYW1lKTtcbn07XG5cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLnVwZGF0ZVNTUiA9IGZ1bmN0aW9uIChyZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgc291cmNlVGV4dHVyZSwgcmVmbGVjdGlvblNvdXJjZVRleHR1cmUsIGZyYW1lKSB7XG4gICAgdGhpcy5fc3NyUGFzcy5zZXRTU0FPVGV4dHVyZShcbiAgICAgICAgdGhpcy5fZW5hYmxlU1NBTyA/IHRoaXMuX3NzYW9QYXNzLmdldFRhcmdldFRleHR1cmUoKSA6IG51bGxcbiAgICApO1xuICAgIHRoaXMuX3NzclBhc3MudXBkYXRlKHJlbmRlcmVyLCBjYW1lcmEsIHNvdXJjZVRleHR1cmUsIHJlZmxlY3Rpb25Tb3VyY2VUZXh0dXJlLCBmcmFtZSk7XG59O1xuXG4vKipcbiAqIEVuYWJsZSBTU0FPIGVmZmVjdFxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5lbmFibGVTU0FPID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2VuYWJsZVNTQU8gPSB0cnVlO1xufTtcblxuLyoqXG4gKiBEaXNhYmxlIFNTQU8gZWZmZWN0XG4gKi9cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmRpc2FibGVTU0FPID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2VuYWJsZVNTQU8gPSBmYWxzZTtcbn07XG5cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmVuYWJsZVZlbG9jaXR5QnVmZmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2dCdWZmZXJQYXNzLmVuYWJsZVRhcmdldFRleHR1cmU0ID0gdHJ1ZTtcbn07XG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5kaXNhYmxlVmVsb2NpdHlCdWZmZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fZ0J1ZmZlclBhc3MuZW5hYmxlVGFyZ2V0VGV4dHVyZTQgPSBmYWxzZTtcbn07XG5cbi8qKlxuICogRW5hYmxlIFNTUiBlZmZlY3RcbiAqL1xuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuZW5hYmxlU1NSID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2VuYWJsZVNTUiA9IHRydWU7XG59O1xuLyoqXG4gKiBEaXNhYmxlIFNTUiBlZmZlY3RcbiAqL1xuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuZGlzYWJsZVNTUiA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9lbmFibGVTU1IgPSBmYWxzZTtcbn07XG5cbi8qKlxuICogUmVuZGVyIFNTQU8gYWZ0ZXIgcmVuZGVyIHRoZSBzY2VuZSwgYmVmb3JlIGNvbXBvc2l0aW5nXG4gKi9cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmdldFNTQU9UZXh0dXJlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9zc2FvUGFzcy5nZXRUYXJnZXRUZXh0dXJlKCk7XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5nZXRTU1JUZXh0dXJlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9zc3JQYXNzLmdldFRhcmdldFRleHR1cmUoKTtcbn07XG5cblxuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuZ2V0VmVsb2NpdHlUZXh0dXJlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9nQnVmZmVyUGFzcy5nZXRUYXJnZXRUZXh0dXJlNCgpO1xufTtcbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmdldERlcHRoVGV4dHVyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ0J1ZmZlclBhc3MuZ2V0VGFyZ2V0VGV4dHVyZTIoKTtcbn07XG5cbi8qKlxuICogRGlzYWJsZSBmeGFhIGVmZmVjdFxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5kaXNhYmxlRlhBQSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9yZW1vdmVDaGFpbk5vZGUodGhpcy5fZnhhYU5vZGUpO1xufTtcblxuLyoqXG4gKiBFbmFibGUgZnhhYSBlZmZlY3RcbiAqL1xuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuZW5hYmxlRlhBQSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9hZGRDaGFpbk5vZGUodGhpcy5fZnhhYU5vZGUpO1xufTtcblxuLyoqXG4gKiBFbmFibGUgYmxvb20gZWZmZWN0XG4gKi9cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmVuYWJsZUJsb29tID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2NvbXBvc2l0ZU5vZGUuaW5wdXRzLmJsb29tID0gJ2Jsb29tX2NvbXBvc2l0ZSc7XG4gICAgdGhpcy5fY29tcG9zaXRvci5kaXJ0eSgpO1xufTtcblxuLyoqXG4gKiBEaXNhYmxlIGJsb29tIGVmZmVjdFxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5kaXNhYmxlQmxvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fY29tcG9zaXRlTm9kZS5pbnB1dHMuYmxvb20gPSBudWxsO1xuICAgIHRoaXMuX2NvbXBvc2l0b3IuZGlydHkoKTtcbn07XG5cbi8qKlxuICogRW5hYmxlIGRlcHRoIG9mIGZpZWxkIGVmZmVjdFxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5lbmFibGVET0YgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fY29tcG9zaXRlTm9kZS5pbnB1dHMudGV4dHVyZSA9ICdkb2ZfY29tcG9zaXRlJztcbiAgICB0aGlzLl9jb21wb3NpdG9yLmRpcnR5KCk7XG59O1xuLyoqXG4gKiBEaXNhYmxlIGRlcHRoIG9mIGZpZWxkIGVmZmVjdFxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5kaXNhYmxlRE9GID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2NvbXBvc2l0ZU5vZGUuaW5wdXRzLnRleHR1cmUgPSAnc291cmNlJztcbiAgICB0aGlzLl9jb21wb3NpdG9yLmRpcnR5KCk7XG59O1xuXG4vKipcbiAqIEVuYWJsZSBjb2xvciBjb3JyZWN0aW9uXG4gKi9cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmVuYWJsZUNvbG9yQ29ycmVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9jb21wb3NpdGVOb2RlLmRlZmluZSgnQ09MT1JfQ09SUkVDVElPTicpO1xuICAgIHRoaXMuX2VuYWJsZUNvbG9yQ29ycmVjdGlvbiA9IHRydWU7XG59O1xuLyoqXG4gKiBEaXNhYmxlIGNvbG9yIGNvcnJlY3Rpb25cbiAqL1xuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuZGlzYWJsZUNvbG9yQ29ycmVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9jb21wb3NpdGVOb2RlLnVuZGVmaW5lKCdDT0xPUl9DT1JSRUNUSU9OJyk7XG4gICAgdGhpcy5fZW5hYmxlQ29sb3JDb3JyZWN0aW9uID0gZmFsc2U7XG59O1xuXG4vKipcbiAqIEVuYWJsZSBlZGdlIGRldGVjdGlvblxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5lbmFibGVFZGdlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2VuYWJsZUVkZ2UgPSB0cnVlO1xufTtcblxuLyoqXG4gKiBEaXNhYmxlIGVkZ2UgZGV0ZWN0aW9uXG4gKi9cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmRpc2FibGVFZGdlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2VuYWJsZUVkZ2UgPSBmYWxzZTtcbn07XG5cbi8qKlxuICogU2V0IGJsb29tIGludGVuc2l0eVxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gKi9cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLnNldEJsb29tSW50ZW5zaXR5ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9jb21wb3NpdGVOb2RlLnNldFBhcmFtZXRlcignYmxvb21JbnRlbnNpdHknLCB2YWx1ZSk7XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5zZXRTU0FPUGFyYW1ldGVyID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2ggKG5hbWUpIHtcbiAgICAgICAgY2FzZSAncXVhbGl0eSc6XG4gICAgICAgICAgICAvLyBQRU5ESU5HXG4gICAgICAgICAgICB2YXIga2VybmVsU2l6ZSA9ICh7XG4gICAgICAgICAgICAgICAgbG93OiA2LFxuICAgICAgICAgICAgICAgIG1lZGl1bTogMTIsXG4gICAgICAgICAgICAgICAgaGlnaDogMzIsXG4gICAgICAgICAgICAgICAgdWx0cmE6IDYyXG4gICAgICAgICAgICB9KVt2YWx1ZV0gfHwgMTI7XG4gICAgICAgICAgICB0aGlzLl9zc2FvUGFzcy5zZXRQYXJhbWV0ZXIoJ2tlcm5lbFNpemUnLCBrZXJuZWxTaXplKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdyYWRpdXMnOlxuICAgICAgICAgICAgdGhpcy5fc3Nhb1Bhc3Muc2V0UGFyYW1ldGVyKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuX3NzYW9QYXNzLnNldFBhcmFtZXRlcignYmlhcycsIHZhbHVlIC8gNTApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2ludGVuc2l0eSc6XG4gICAgICAgIGNhc2UgJ3RlbXBvcmFsRmlsdGVyJzpcbiAgICAgICAgICAgIHRoaXMuX3NzYW9QYXNzLnNldFBhcmFtZXRlcihuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5zZXRET0ZQYXJhbWV0ZXIgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaCAobmFtZSkge1xuICAgICAgICBjYXNlICdmb2NhbERpc3RhbmNlJzpcbiAgICAgICAgY2FzZSAnZm9jYWxSYW5nZSc6XG4gICAgICAgIGNhc2UgJ2FwZXJ0dXJlJzpcbiAgICAgICAgICAgIHRoaXMuX2NvY05vZGUuc2V0UGFyYW1ldGVyKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdibHVyUmFkaXVzJzpcbiAgICAgICAgICAgIHRoaXMuX2RvZkJsdXJSYWRpdXMgPSB2YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAvLyBjYXNlICdxdWFsaXR5JzpcbiAgICAgICAgLy8gICAgIHRoaXMuX2RvZkJsdXJLZXJuZWwgPSBwb2lzc29uS2VybmVsW3ZhbHVlXSB8fCBwb2lzc29uS2VybmVsLm1lZGl1bTtcbiAgICAgICAgLy8gICAgIHZhciBrZXJuZWxTaXplID0gdGhpcy5fZG9mQmx1cktlcm5lbC5sZW5ndGggLyAyO1xuICAgICAgICAvLyAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9kb2ZCbHVyTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gICAgICAgICB0aGlzLl9kb2ZCbHVyTm9kZXNbaV0uZGVmaW5lKCdQT0lTU09OX0tFUk5FTF9TSVpFJywga2VybmVsU2l6ZSk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vICAgICBicmVhaztcbiAgICB9XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5zZXRTU1JQYXJhbWV0ZXIgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaCAobmFtZSkge1xuICAgICAgICBjYXNlICdxdWFsaXR5JzpcbiAgICAgICAgICAgIC8vIFBFTkRJTkdcbiAgICAgICAgICAgIHZhciBtYXhJdGVyYXRpb24gPSAoe1xuICAgICAgICAgICAgICAgIGxvdzogMTAsXG4gICAgICAgICAgICAgICAgbWVkaXVtOiAxNSxcbiAgICAgICAgICAgICAgICBoaWdoOiAzMCxcbiAgICAgICAgICAgICAgICB1bHRyYTogODBcbiAgICAgICAgICAgIH0pW3ZhbHVlXSB8fCAyMDtcbiAgICAgICAgICAgIHZhciBwaXhlbFN0cmlkZSA9ICh7XG4gICAgICAgICAgICAgICAgbG93OiAzMixcbiAgICAgICAgICAgICAgICBtZWRpdW06IDE2LFxuICAgICAgICAgICAgICAgIGhpZ2g6IDgsXG4gICAgICAgICAgICAgICAgdWx0cmE6IDRcbiAgICAgICAgICAgIH0pW3ZhbHVlXSB8fCAxNjtcbiAgICAgICAgICAgIHRoaXMuX3NzclBhc3Muc2V0UGFyYW1ldGVyKCdtYXhJdGVyYXRpb24nLCBtYXhJdGVyYXRpb24pO1xuICAgICAgICAgICAgdGhpcy5fc3NyUGFzcy5zZXRQYXJhbWV0ZXIoJ3BpeGVsU3RyaWRlJywgcGl4ZWxTdHJpZGUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21heFJvdWdobmVzcyc6XG4gICAgICAgICAgICB0aGlzLl9zc3JQYXNzLnNldFBhcmFtZXRlcignbWluR2xvc3NpbmVzcycsIE1hdGgubWF4KE1hdGgubWluKDEuMCAtIHZhbHVlLCAxLjApLCAwLjApKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdVbmtvd24gU1NSIHBhcmFtZXRlciAnICsgbmFtZSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBTZXQgY29sb3Igb2YgZWRnZVxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5zZXRFZGdlQ29sb3IgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIC8vICAgICByZXR1cm47XG4gICAgLy8gfVxuICAgIC8vIHRoaXMuX2VkZ2VQYXNzLnNldFBhcmFtZXRlcignZWRnZUNvbG9yJywgdmFsdWUpO1xufTtcblxuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuc2V0RXhwb3N1cmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2NvbXBvc2l0ZU5vZGUuc2V0UGFyYW1ldGVyKCdleHBvc3VyZScsIE1hdGgucG93KDIsIHZhbHVlKSk7XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5zZXRDb2xvckxvb2t1cFRleHR1cmUgPSBmdW5jdGlvbiAoaW1hZ2UsIGFwaSkge1xuICAgIC8vIHRoaXMuX2NvbXBvc2l0ZU5vZGUucGFzcy5tYXRlcmlhbC5zZXRUZXh0dXJlSW1hZ2UoJ2x1dCcsIHRoaXMuX2VuYWJsZUNvbG9yQ29ycmVjdGlvbiA/IGltYWdlIDogJ25vbmUnLCBhcGksIHtcbiAgICAvLyAgICAgbWluRmlsdGVyOiBUZXh0dXJlLk5FQVJFU1QsXG4gICAgLy8gICAgIG1hZ0ZpbHRlcjogVGV4dHVyZS5ORUFSRVNULFxuICAgIC8vICAgICBmbGlwWTogZmFsc2VcbiAgICAvLyB9KTtcbn07XG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5zZXRDb2xvckNvcnJlY3Rpb24gPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHtcbiAgICB0aGlzLl9jb21wb3NpdGVOb2RlLnNldFBhcmFtZXRlcih0eXBlLCB2YWx1ZSk7XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5jb21wb3NpdGUgPSBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIHNvdXJjZVRleHR1cmUsIGRlcHRoVGV4dHVyZSwgZnJhbWUpIHtcbiAgICB0aGlzLl9zb3VyY2VOb2RlLnRleHR1cmUgPSBzb3VyY2VUZXh0dXJlO1xuXG4gICAgdGhpcy5fY29jTm9kZS5zZXRQYXJhbWV0ZXIoJ2RlcHRoJywgZGVwdGhUZXh0dXJlKTtcblxuICAgIC8vIHZhciBibHVyS2VybmVsID0gdGhpcy5fZG9mQmx1cktlcm5lbDtcblxuICAgIHZhciBtYXhDb2MgPSB0aGlzLl9kb2ZCbHVyUmFkaXVzIHx8IDEwO1xuICAgIG1heENvYyAvPSByZW5kZXJlci5nZXRIZWlnaHQoKTtcbiAgICAvLyB2YXIgbWluQ29jID0gMSAvIHJlbmRlcmVyLmdldEhlaWdodCgpO1xuICAgIHZhciBtaW5Db2MgPSAwO1xuICAgIC8vIHZhciBqaXR0ZXIgPSBNYXRoLnJhbmRvbSgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fZG9mQmx1ck5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBibHVyTm9kZSA9IHRoaXMuX2RvZkJsdXJOb2Rlc1tpXTtcbiAgICAgICAgYmx1ck5vZGUuc2V0UGFyYW1ldGVyKCdrZXJuZWwxJywgY2lyY3VsYXJTZXBhcmF0ZUtlcm5lbC5jb21wb25lbnQxKTtcbiAgICAgICAgYmx1ck5vZGUuc2V0UGFyYW1ldGVyKCdrZXJuZWwyJywgY2lyY3VsYXJTZXBhcmF0ZUtlcm5lbC5jb21wb25lbnQyKTtcbiAgICAgICAgYmx1ck5vZGUuc2V0UGFyYW1ldGVyKCdtYXhDb2MnLCBtYXhDb2MpO1xuICAgICAgICBibHVyTm9kZS5zZXRQYXJhbWV0ZXIoJ21pbkNvYycsIG1pbkNvYyk7XG4gICAgfVxuICAgIHRoaXMuX2NvY05vZGUuc2V0UGFyYW1ldGVyKCdtYXhDb2MnLCBtYXhDb2MpO1xuICAgIHRoaXMuX2RvZkNvbXBvc2l0ZU5vZGUuc2V0UGFyYW1ldGVyKCdtYXhDb2MnLCBtYXhDb2MpO1xuICAgIHRoaXMuX2RvZkNvbXBvc2l0ZU5vZGUuc2V0UGFyYW1ldGVyKCdtaW5Db2MnLCBtaW5Db2MpO1xuICAgIHRoaXMuX2RvZkZhckZpZWxkTm9kZS5zZXRQYXJhbWV0ZXIoJ21pbkNvYycsIG1pbkNvYyAvIG1heENvYyk7XG4gICAgdGhpcy5fZG9mTmVhckZpZWxkTm9kZS5zZXRQYXJhbWV0ZXIoJ21pbkNvYycsIG1pbkNvYyAvIG1heENvYyk7XG5cbiAgICB0aGlzLl9jb2NOb2RlLnNldFBhcmFtZXRlcignek5lYXInLCBjYW1lcmEubmVhcik7XG4gICAgdGhpcy5fY29jTm9kZS5zZXRQYXJhbWV0ZXIoJ3pGYXInLCBjYW1lcmEuZmFyKTtcblxuICAgIHRoaXMuX2NvbXBvc2l0b3IucmVuZGVyKHJlbmRlcmVyKTtcbn07XG5cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmlzU1NSRmluaXNoZWQgPSBmdW5jdGlvbiAoZnJhbWUpIHtcbiAgICByZXR1cm4gdGhpcy5fc3NyUGFzcyA/IHRoaXMuX3NzclBhc3MuaXNGaW5pc2hlZChmcmFtZSkgOiB0cnVlO1xufTtcblxuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuaXNTU0FPRmluaXNoZWQgPSBmdW5jdGlvbiAoZnJhbWUpIHtcbiAgICByZXR1cm4gdGhpcy5fc3Nhb1Bhc3MgPyB0aGlzLl9zc2FvUGFzcy5pc0ZpbmlzaGVkKGZyYW1lKSA6IHRydWU7XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5pc1NTUkVuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VuYWJsZVNTUjtcbn07XG5cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICB0aGlzLl9jb21wb3NpdG9yLmRpc3Bvc2UocmVuZGVyZXIpO1xuXG4gICAgdGhpcy5fZ0J1ZmZlclBhc3MuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgdGhpcy5fc3Nhb1Bhc3MuZGlzcG9zZShyZW5kZXJlcik7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBFZmZlY3RDb21wb3NpdG9yO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvRWZmZWN0Q29tcG9zaXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMTk3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///197\n");

/***/ }),
/* 198 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_claygl__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__halton__ = __webpack_require__(64);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__SSAO_glsl_js__ = __webpack_require__(199);\n\n\nvar Pass = __WEBPACK_IMPORTED_MODULE_0_claygl__[\"m\" /* compositor */].Pass;\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].import(__WEBPACK_IMPORTED_MODULE_2__SSAO_glsl_js__[\"a\" /* default */]);\n\nfunction generateNoiseData(size) {\n    var data = new Uint8Array(size * size * 4);\n    var n = 0;\n    var v3 = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"k\" /* Vector3 */]();\n\n    for (var i = 0; i < size; i++) {\n        for (var j = 0; j < size; j++) {\n            v3.set(Math.random() * 2 - 1, Math.random() * 2 - 1, 0).normalize();\n            data[n++] = (v3.x * 0.5 + 0.5) * 255;\n            data[n++] = (v3.y * 0.5 + 0.5) * 255;\n            data[n++] = 0;\n            data[n++] = 255;\n        }\n    }\n    return data;\n}\n\nfunction generateNoiseTexture(size) {\n    return new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        pixels: generateNoiseData(size),\n        wrapS: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].REPEAT,\n        wrapT: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].REPEAT,\n        width: size,\n        height: size\n    });\n}\n\nfunction generateKernel(size, offset, hemisphere) {\n    var kernel = new Float32Array(size * 3);\n    offset = offset || 0;\n    for (var i = 0; i < size; i++) {\n        var phi = Object(__WEBPACK_IMPORTED_MODULE_1__halton__[\"a\" /* default */])(i + offset, 2) * (hemisphere ? 1 : 2) * Math.PI;\n        var theta = Object(__WEBPACK_IMPORTED_MODULE_1__halton__[\"a\" /* default */])(i + offset, 3) * Math.PI;\n        var r = Math.random();\n        var x = Math.cos(phi) * Math.sin(theta) * r;\n        var y = Math.cos(theta) * r;\n        var z = Math.sin(phi) * Math.sin(theta) * r;\n\n        kernel[i * 3] = x;\n        kernel[i * 3 + 1] = y;\n        kernel[i * 3 + 2] = z;\n    }\n    return kernel;\n}\n\nfunction SSAOPass(opt) {\n    opt = opt || {};\n\n    this._ssaoPass = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('car.ssao.estimate')\n    });\n    this._blendPass = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('car.temporalBlend')\n    });\n    this._blurPass = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('car.ssao.blur')\n    });\n    this._framebuffer = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"a\" /* FrameBuffer */]();\n\n    this._ssaoTexture = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]();\n\n    this._prevTexture = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]();\n    this._currTexture = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]();\n\n    this._blurTexture = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]();\n\n    this._depthTex = opt.depthTexture;\n    this._normalTex = opt.normalTexture;\n    this._velocityTex = opt.velocityTexture;\n\n    this.setNoiseSize(4);\n    this.setKernelSize(opt.kernelSize || 12);\n    if (opt.radius != null) {\n        this.setParameter('radius', opt.radius);\n    }\n    if (opt.power != null) {\n        this.setParameter('power', opt.power);\n    }\n\n    if (!this._normalTex) {\n        this._ssaoPass.material.disableTexture('normalTex');\n        this._blurPass.material.disableTexture('normalTex');\n    }\n    if (!this._depthTex) {\n        this._blurPass.material.disableTexture('depthTex');\n    }\n\n    this._blurPass.material.setUniform('normalTex', this._normalTex);\n    this._blurPass.material.setUniform('depthTex', this._depthTex);\n\n\n    this._temporalFilter = true;\n\n    this._frame = 0;\n}\n\nSSAOPass.prototype.setDepthTexture = function (depthTex) {\n    this._depthTex = depthTex;\n};\n\nSSAOPass.prototype.setNormalTexture = function (normalTex) {\n    this._normalTex = normalTex;\n    this._ssaoPass.material[normalTex ? 'enableTexture' : 'disableTexture']('normalTex');\n    // Switch between hemisphere and shere kernel.\n    this.setKernelSize(this._kernelSize);\n};\n\nSSAOPass.prototype.update = function (renderer, camera, frame) {\n\n    var width = renderer.getWidth();\n    var height = renderer.getHeight();\n\n    var ssaoPass = this._ssaoPass;\n    var blurPass = this._blurPass;\n    var blendPass = this._blendPass;\n\n    this._frame++;\n\n    ssaoPass.setUniform('kernel', this._kernels[\n        (this._temporalFilter ? this._frame : frame) % this._kernels.length\n    ]);\n    ssaoPass.setUniform('depthTex', this._depthTex);\n    if (this._normalTex != null) {\n        ssaoPass.setUniform('normalTex', this._normalTex);\n    }\n    ssaoPass.setUniform('depthTexSize', [this._depthTex.width, this._depthTex.height]);\n\n    var viewInverseTranspose = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"d\" /* Matrix4 */]();\n    __WEBPACK_IMPORTED_MODULE_0_claygl__[\"d\" /* Matrix4 */].transpose(viewInverseTranspose, camera.worldTransform);\n\n    ssaoPass.setUniform('projection', camera.projectionMatrix.array);\n    ssaoPass.setUniform('projectionInv', camera.invProjectionMatrix.array);\n    ssaoPass.setUniform('viewInverseTranspose', viewInverseTranspose.array);\n\n    var ssaoTexture = this._ssaoTexture;\n    var blurTexture = this._blurTexture;\n\n    var prevTexture = this._prevTexture;\n    var currTexture = this._currTexture;\n\n    ssaoTexture.width = width;\n    ssaoTexture.height = height;\n    blurTexture.width = width;\n    blurTexture.height = height;\n    prevTexture.width = width;\n    prevTexture.height = height;\n    currTexture.width = width;\n    currTexture.height = height;\n\n    this._framebuffer.attach(ssaoTexture);\n    this._framebuffer.bind(renderer);\n    renderer.gl.clearColor(1, 1, 1, 1);\n    renderer.gl.clear(renderer.gl.COLOR_BUFFER_BIT);\n    ssaoPass.render(renderer);\n\n    if (this._temporalFilter) {\n        this._framebuffer.attach(currTexture);\n        blendPass.setUniform('prevTex', prevTexture);\n        blendPass.setUniform('currTex', ssaoTexture);\n        blendPass.setUniform('velocityTex', this._velocityTex);\n        blendPass.render(renderer);\n    }\n\n    blurPass.setUniform('textureSize', [width, height]);\n    blurPass.setUniform('projection', camera.projectionMatrix.array);\n    this._framebuffer.attach(blurTexture);\n    blurPass.setUniform('direction', 0);\n    blurPass.setUniform('ssaoTexture', this._temporalFilter ? currTexture : ssaoTexture);\n    blurPass.render(renderer);\n\n    this._framebuffer.attach(ssaoTexture);\n    blurPass.setUniform('direction', 1);\n    blurPass.setUniform('ssaoTexture', blurTexture);\n    blurPass.render(renderer);\n\n    this._framebuffer.unbind(renderer);\n\n    // Restore clear\n    var clearColor = renderer.clearColor;\n    renderer.gl.clearColor(clearColor[0], clearColor[1], clearColor[2], clearColor[3]);\n\n    // Swap texture\n    var tmp = this._prevTexture;\n    this._prevTexture = this._currTexture;\n    this._currTexture = tmp;\n};\n\nSSAOPass.prototype.getTargetTexture = function () {\n    return this._ssaoTexture;\n};\n\nSSAOPass.prototype.setParameter = function (name, val) {\n    if (name === 'noiseTexSize') {\n        this.setNoiseSize(val);\n    }\n    else if (name === 'kernelSize') {\n        this.setKernelSize(val);\n    }\n    else if (name === 'intensity') {\n        this._ssaoPass.material.set('intensity', val);\n    }\n    else if (name === 'temporalFilter') {\n        this._temporalFilter = val;\n    }\n    else {\n        this._ssaoPass.setUniform(name, val);\n    }\n};\n\nSSAOPass.prototype.setKernelSize = function (size) {\n    this._kernelSize = size;\n    this._ssaoPass.material.define('fragment', 'KERNEL_SIZE', size);\n    this._kernels = this._kernels || [];\n    for (var i = 0; i < 30; i++) {\n        this._kernels[i] = generateKernel(size, i * size, !!this._normalTex);\n    }\n};\n\nSSAOPass.prototype.setNoiseSize = function (size) {\n    var texture = this._ssaoPass.getUniform('noiseTex');\n    if (!texture) {\n        texture = generateNoiseTexture(size);\n        this._ssaoPass.setUniform('noiseTex', generateNoiseTexture(size));\n    }\n    else {\n        texture.data = generateNoiseData(size);\n        texture.width = texture.height = size;\n        texture.dirty();\n    }\n\n    this._ssaoPass.setUniform('noiseTexSize', [size, size]);\n};\n\nSSAOPass.prototype.dispose = function (renderer) {\n    this._blurTexture.dispose(renderer);\n    this._ssaoTexture.dispose(renderer);\n    this._prevTexture.dispose(renderer);\n    this._currTexture.dispose(renderer);\n};\n\nSSAOPass.prototype.isFinished = function (frame) {\n    return frame > 30;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SSAOPass);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvU1NBT1Bhc3MuanM/NmU4NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNYXRyaXg0LCBWZWN0b3IzLCBUZXh0dXJlMkQsIFRleHR1cmUsIGNvbXBvc2l0b3IsIEZyYW1lQnVmZmVyLCBTaGFkZXIgfSBmcm9tICdjbGF5Z2wnO1xuXG52YXIgUGFzcyA9IGNvbXBvc2l0b3IuUGFzcztcbmltcG9ydCBoYWx0b24gZnJvbSAnLi9oYWx0b24nO1xuXG5pbXBvcnQgU1NBT0dMU0xDb2RlIGZyb20gJy4vU1NBTy5nbHNsLmpzJztcblxuU2hhZGVyLmltcG9ydChTU0FPR0xTTENvZGUpO1xuXG5mdW5jdGlvbiBnZW5lcmF0ZU5vaXNlRGF0YShzaXplKSB7XG4gICAgdmFyIGRhdGEgPSBuZXcgVWludDhBcnJheShzaXplICogc2l6ZSAqIDQpO1xuICAgIHZhciBuID0gMDtcbiAgICB2YXIgdjMgPSBuZXcgVmVjdG9yMygpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzaXplOyBqKyspIHtcbiAgICAgICAgICAgIHYzLnNldChNYXRoLnJhbmRvbSgpICogMiAtIDEsIE1hdGgucmFuZG9tKCkgKiAyIC0gMSwgMCkubm9ybWFsaXplKCk7XG4gICAgICAgICAgICBkYXRhW24rK10gPSAodjMueCAqIDAuNSArIDAuNSkgKiAyNTU7XG4gICAgICAgICAgICBkYXRhW24rK10gPSAodjMueSAqIDAuNSArIDAuNSkgKiAyNTU7XG4gICAgICAgICAgICBkYXRhW24rK10gPSAwO1xuICAgICAgICAgICAgZGF0YVtuKytdID0gMjU1O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZU5vaXNlVGV4dHVyZShzaXplKSB7XG4gICAgcmV0dXJuIG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICBwaXhlbHM6IGdlbmVyYXRlTm9pc2VEYXRhKHNpemUpLFxuICAgICAgICB3cmFwUzogVGV4dHVyZS5SRVBFQVQsXG4gICAgICAgIHdyYXBUOiBUZXh0dXJlLlJFUEVBVCxcbiAgICAgICAgd2lkdGg6IHNpemUsXG4gICAgICAgIGhlaWdodDogc2l6ZVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUtlcm5lbChzaXplLCBvZmZzZXQsIGhlbWlzcGhlcmUpIHtcbiAgICB2YXIga2VybmVsID0gbmV3IEZsb2F0MzJBcnJheShzaXplICogMyk7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgdmFyIHBoaSA9IGhhbHRvbihpICsgb2Zmc2V0LCAyKSAqIChoZW1pc3BoZXJlID8gMSA6IDIpICogTWF0aC5QSTtcbiAgICAgICAgdmFyIHRoZXRhID0gaGFsdG9uKGkgKyBvZmZzZXQsIDMpICogTWF0aC5QSTtcbiAgICAgICAgdmFyIHIgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICB2YXIgeCA9IE1hdGguY29zKHBoaSkgKiBNYXRoLnNpbih0aGV0YSkgKiByO1xuICAgICAgICB2YXIgeSA9IE1hdGguY29zKHRoZXRhKSAqIHI7XG4gICAgICAgIHZhciB6ID0gTWF0aC5zaW4ocGhpKSAqIE1hdGguc2luKHRoZXRhKSAqIHI7XG5cbiAgICAgICAga2VybmVsW2kgKiAzXSA9IHg7XG4gICAgICAgIGtlcm5lbFtpICogMyArIDFdID0geTtcbiAgICAgICAga2VybmVsW2kgKiAzICsgMl0gPSB6O1xuICAgIH1cbiAgICByZXR1cm4ga2VybmVsO1xufVxuXG5mdW5jdGlvbiBTU0FPUGFzcyhvcHQpIHtcbiAgICBvcHQgPSBvcHQgfHwge307XG5cbiAgICB0aGlzLl9zc2FvUGFzcyA9IG5ldyBQYXNzKHtcbiAgICAgICAgZnJhZ21lbnQ6IFNoYWRlci5zb3VyY2UoJ2Nhci5zc2FvLmVzdGltYXRlJylcbiAgICB9KTtcbiAgICB0aGlzLl9ibGVuZFBhc3MgPSBuZXcgUGFzcyh7XG4gICAgICAgIGZyYWdtZW50OiBTaGFkZXIuc291cmNlKCdjYXIudGVtcG9yYWxCbGVuZCcpXG4gICAgfSk7XG4gICAgdGhpcy5fYmx1clBhc3MgPSBuZXcgUGFzcyh7XG4gICAgICAgIGZyYWdtZW50OiBTaGFkZXIuc291cmNlKCdjYXIuc3Nhby5ibHVyJylcbiAgICB9KTtcbiAgICB0aGlzLl9mcmFtZWJ1ZmZlciA9IG5ldyBGcmFtZUJ1ZmZlcigpO1xuXG4gICAgdGhpcy5fc3Nhb1RleHR1cmUgPSBuZXcgVGV4dHVyZTJEKCk7XG5cbiAgICB0aGlzLl9wcmV2VGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQoKTtcbiAgICB0aGlzLl9jdXJyVGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQoKTtcblxuICAgIHRoaXMuX2JsdXJUZXh0dXJlID0gbmV3IFRleHR1cmUyRCgpO1xuXG4gICAgdGhpcy5fZGVwdGhUZXggPSBvcHQuZGVwdGhUZXh0dXJlO1xuICAgIHRoaXMuX25vcm1hbFRleCA9IG9wdC5ub3JtYWxUZXh0dXJlO1xuICAgIHRoaXMuX3ZlbG9jaXR5VGV4ID0gb3B0LnZlbG9jaXR5VGV4dHVyZTtcblxuICAgIHRoaXMuc2V0Tm9pc2VTaXplKDQpO1xuICAgIHRoaXMuc2V0S2VybmVsU2l6ZShvcHQua2VybmVsU2l6ZSB8fCAxMik7XG4gICAgaWYgKG9wdC5yYWRpdXMgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNldFBhcmFtZXRlcigncmFkaXVzJywgb3B0LnJhZGl1cyk7XG4gICAgfVxuICAgIGlmIChvcHQucG93ZXIgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNldFBhcmFtZXRlcigncG93ZXInLCBvcHQucG93ZXIpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fbm9ybWFsVGV4KSB7XG4gICAgICAgIHRoaXMuX3NzYW9QYXNzLm1hdGVyaWFsLmRpc2FibGVUZXh0dXJlKCdub3JtYWxUZXgnKTtcbiAgICAgICAgdGhpcy5fYmx1clBhc3MubWF0ZXJpYWwuZGlzYWJsZVRleHR1cmUoJ25vcm1hbFRleCcpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX2RlcHRoVGV4KSB7XG4gICAgICAgIHRoaXMuX2JsdXJQYXNzLm1hdGVyaWFsLmRpc2FibGVUZXh0dXJlKCdkZXB0aFRleCcpO1xuICAgIH1cblxuICAgIHRoaXMuX2JsdXJQYXNzLm1hdGVyaWFsLnNldFVuaWZvcm0oJ25vcm1hbFRleCcsIHRoaXMuX25vcm1hbFRleCk7XG4gICAgdGhpcy5fYmx1clBhc3MubWF0ZXJpYWwuc2V0VW5pZm9ybSgnZGVwdGhUZXgnLCB0aGlzLl9kZXB0aFRleCk7XG5cblxuICAgIHRoaXMuX3RlbXBvcmFsRmlsdGVyID0gdHJ1ZTtcblxuICAgIHRoaXMuX2ZyYW1lID0gMDtcbn1cblxuU1NBT1Bhc3MucHJvdG90eXBlLnNldERlcHRoVGV4dHVyZSA9IGZ1bmN0aW9uIChkZXB0aFRleCkge1xuICAgIHRoaXMuX2RlcHRoVGV4ID0gZGVwdGhUZXg7XG59O1xuXG5TU0FPUGFzcy5wcm90b3R5cGUuc2V0Tm9ybWFsVGV4dHVyZSA9IGZ1bmN0aW9uIChub3JtYWxUZXgpIHtcbiAgICB0aGlzLl9ub3JtYWxUZXggPSBub3JtYWxUZXg7XG4gICAgdGhpcy5fc3Nhb1Bhc3MubWF0ZXJpYWxbbm9ybWFsVGV4ID8gJ2VuYWJsZVRleHR1cmUnIDogJ2Rpc2FibGVUZXh0dXJlJ10oJ25vcm1hbFRleCcpO1xuICAgIC8vIFN3aXRjaCBiZXR3ZWVuIGhlbWlzcGhlcmUgYW5kIHNoZXJlIGtlcm5lbC5cbiAgICB0aGlzLnNldEtlcm5lbFNpemUodGhpcy5fa2VybmVsU2l6ZSk7XG59O1xuXG5TU0FPUGFzcy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHJlbmRlcmVyLCBjYW1lcmEsIGZyYW1lKSB7XG5cbiAgICB2YXIgd2lkdGggPSByZW5kZXJlci5nZXRXaWR0aCgpO1xuICAgIHZhciBoZWlnaHQgPSByZW5kZXJlci5nZXRIZWlnaHQoKTtcblxuICAgIHZhciBzc2FvUGFzcyA9IHRoaXMuX3NzYW9QYXNzO1xuICAgIHZhciBibHVyUGFzcyA9IHRoaXMuX2JsdXJQYXNzO1xuICAgIHZhciBibGVuZFBhc3MgPSB0aGlzLl9ibGVuZFBhc3M7XG5cbiAgICB0aGlzLl9mcmFtZSsrO1xuXG4gICAgc3Nhb1Bhc3Muc2V0VW5pZm9ybSgna2VybmVsJywgdGhpcy5fa2VybmVsc1tcbiAgICAgICAgKHRoaXMuX3RlbXBvcmFsRmlsdGVyID8gdGhpcy5fZnJhbWUgOiBmcmFtZSkgJSB0aGlzLl9rZXJuZWxzLmxlbmd0aFxuICAgIF0pO1xuICAgIHNzYW9QYXNzLnNldFVuaWZvcm0oJ2RlcHRoVGV4JywgdGhpcy5fZGVwdGhUZXgpO1xuICAgIGlmICh0aGlzLl9ub3JtYWxUZXggIT0gbnVsbCkge1xuICAgICAgICBzc2FvUGFzcy5zZXRVbmlmb3JtKCdub3JtYWxUZXgnLCB0aGlzLl9ub3JtYWxUZXgpO1xuICAgIH1cbiAgICBzc2FvUGFzcy5zZXRVbmlmb3JtKCdkZXB0aFRleFNpemUnLCBbdGhpcy5fZGVwdGhUZXgud2lkdGgsIHRoaXMuX2RlcHRoVGV4LmhlaWdodF0pO1xuXG4gICAgdmFyIHZpZXdJbnZlcnNlVHJhbnNwb3NlID0gbmV3IE1hdHJpeDQoKTtcbiAgICBNYXRyaXg0LnRyYW5zcG9zZSh2aWV3SW52ZXJzZVRyYW5zcG9zZSwgY2FtZXJhLndvcmxkVHJhbnNmb3JtKTtcblxuICAgIHNzYW9QYXNzLnNldFVuaWZvcm0oJ3Byb2plY3Rpb24nLCBjYW1lcmEucHJvamVjdGlvbk1hdHJpeC5hcnJheSk7XG4gICAgc3Nhb1Bhc3Muc2V0VW5pZm9ybSgncHJvamVjdGlvbkludicsIGNhbWVyYS5pbnZQcm9qZWN0aW9uTWF0cml4LmFycmF5KTtcbiAgICBzc2FvUGFzcy5zZXRVbmlmb3JtKCd2aWV3SW52ZXJzZVRyYW5zcG9zZScsIHZpZXdJbnZlcnNlVHJhbnNwb3NlLmFycmF5KTtcblxuICAgIHZhciBzc2FvVGV4dHVyZSA9IHRoaXMuX3NzYW9UZXh0dXJlO1xuICAgIHZhciBibHVyVGV4dHVyZSA9IHRoaXMuX2JsdXJUZXh0dXJlO1xuXG4gICAgdmFyIHByZXZUZXh0dXJlID0gdGhpcy5fcHJldlRleHR1cmU7XG4gICAgdmFyIGN1cnJUZXh0dXJlID0gdGhpcy5fY3VyclRleHR1cmU7XG5cbiAgICBzc2FvVGV4dHVyZS53aWR0aCA9IHdpZHRoO1xuICAgIHNzYW9UZXh0dXJlLmhlaWdodCA9IGhlaWdodDtcbiAgICBibHVyVGV4dHVyZS53aWR0aCA9IHdpZHRoO1xuICAgIGJsdXJUZXh0dXJlLmhlaWdodCA9IGhlaWdodDtcbiAgICBwcmV2VGV4dHVyZS53aWR0aCA9IHdpZHRoO1xuICAgIHByZXZUZXh0dXJlLmhlaWdodCA9IGhlaWdodDtcbiAgICBjdXJyVGV4dHVyZS53aWR0aCA9IHdpZHRoO1xuICAgIGN1cnJUZXh0dXJlLmhlaWdodCA9IGhlaWdodDtcblxuICAgIHRoaXMuX2ZyYW1lYnVmZmVyLmF0dGFjaChzc2FvVGV4dHVyZSk7XG4gICAgdGhpcy5fZnJhbWVidWZmZXIuYmluZChyZW5kZXJlcik7XG4gICAgcmVuZGVyZXIuZ2wuY2xlYXJDb2xvcigxLCAxLCAxLCAxKTtcbiAgICByZW5kZXJlci5nbC5jbGVhcihyZW5kZXJlci5nbC5DT0xPUl9CVUZGRVJfQklUKTtcbiAgICBzc2FvUGFzcy5yZW5kZXIocmVuZGVyZXIpO1xuXG4gICAgaWYgKHRoaXMuX3RlbXBvcmFsRmlsdGVyKSB7XG4gICAgICAgIHRoaXMuX2ZyYW1lYnVmZmVyLmF0dGFjaChjdXJyVGV4dHVyZSk7XG4gICAgICAgIGJsZW5kUGFzcy5zZXRVbmlmb3JtKCdwcmV2VGV4JywgcHJldlRleHR1cmUpO1xuICAgICAgICBibGVuZFBhc3Muc2V0VW5pZm9ybSgnY3VyclRleCcsIHNzYW9UZXh0dXJlKTtcbiAgICAgICAgYmxlbmRQYXNzLnNldFVuaWZvcm0oJ3ZlbG9jaXR5VGV4JywgdGhpcy5fdmVsb2NpdHlUZXgpO1xuICAgICAgICBibGVuZFBhc3MucmVuZGVyKHJlbmRlcmVyKTtcbiAgICB9XG5cbiAgICBibHVyUGFzcy5zZXRVbmlmb3JtKCd0ZXh0dXJlU2l6ZScsIFt3aWR0aCwgaGVpZ2h0XSk7XG4gICAgYmx1clBhc3Muc2V0VW5pZm9ybSgncHJvamVjdGlvbicsIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmFycmF5KTtcbiAgICB0aGlzLl9mcmFtZWJ1ZmZlci5hdHRhY2goYmx1clRleHR1cmUpO1xuICAgIGJsdXJQYXNzLnNldFVuaWZvcm0oJ2RpcmVjdGlvbicsIDApO1xuICAgIGJsdXJQYXNzLnNldFVuaWZvcm0oJ3NzYW9UZXh0dXJlJywgdGhpcy5fdGVtcG9yYWxGaWx0ZXIgPyBjdXJyVGV4dHVyZSA6IHNzYW9UZXh0dXJlKTtcbiAgICBibHVyUGFzcy5yZW5kZXIocmVuZGVyZXIpO1xuXG4gICAgdGhpcy5fZnJhbWVidWZmZXIuYXR0YWNoKHNzYW9UZXh0dXJlKTtcbiAgICBibHVyUGFzcy5zZXRVbmlmb3JtKCdkaXJlY3Rpb24nLCAxKTtcbiAgICBibHVyUGFzcy5zZXRVbmlmb3JtKCdzc2FvVGV4dHVyZScsIGJsdXJUZXh0dXJlKTtcbiAgICBibHVyUGFzcy5yZW5kZXIocmVuZGVyZXIpO1xuXG4gICAgdGhpcy5fZnJhbWVidWZmZXIudW5iaW5kKHJlbmRlcmVyKTtcblxuICAgIC8vIFJlc3RvcmUgY2xlYXJcbiAgICB2YXIgY2xlYXJDb2xvciA9IHJlbmRlcmVyLmNsZWFyQ29sb3I7XG4gICAgcmVuZGVyZXIuZ2wuY2xlYXJDb2xvcihjbGVhckNvbG9yWzBdLCBjbGVhckNvbG9yWzFdLCBjbGVhckNvbG9yWzJdLCBjbGVhckNvbG9yWzNdKTtcblxuICAgIC8vIFN3YXAgdGV4dHVyZVxuICAgIHZhciB0bXAgPSB0aGlzLl9wcmV2VGV4dHVyZTtcbiAgICB0aGlzLl9wcmV2VGV4dHVyZSA9IHRoaXMuX2N1cnJUZXh0dXJlO1xuICAgIHRoaXMuX2N1cnJUZXh0dXJlID0gdG1wO1xufTtcblxuU1NBT1Bhc3MucHJvdG90eXBlLmdldFRhcmdldFRleHR1cmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NzYW9UZXh0dXJlO1xufTtcblxuU1NBT1Bhc3MucHJvdG90eXBlLnNldFBhcmFtZXRlciA9IGZ1bmN0aW9uIChuYW1lLCB2YWwpIHtcbiAgICBpZiAobmFtZSA9PT0gJ25vaXNlVGV4U2l6ZScpIHtcbiAgICAgICAgdGhpcy5zZXROb2lzZVNpemUodmFsKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobmFtZSA9PT0gJ2tlcm5lbFNpemUnKSB7XG4gICAgICAgIHRoaXMuc2V0S2VybmVsU2l6ZSh2YWwpO1xuICAgIH1cbiAgICBlbHNlIGlmIChuYW1lID09PSAnaW50ZW5zaXR5Jykge1xuICAgICAgICB0aGlzLl9zc2FvUGFzcy5tYXRlcmlhbC5zZXQoJ2ludGVuc2l0eScsIHZhbCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG5hbWUgPT09ICd0ZW1wb3JhbEZpbHRlcicpIHtcbiAgICAgICAgdGhpcy5fdGVtcG9yYWxGaWx0ZXIgPSB2YWw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLl9zc2FvUGFzcy5zZXRVbmlmb3JtKG5hbWUsIHZhbCk7XG4gICAgfVxufTtcblxuU1NBT1Bhc3MucHJvdG90eXBlLnNldEtlcm5lbFNpemUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgIHRoaXMuX2tlcm5lbFNpemUgPSBzaXplO1xuICAgIHRoaXMuX3NzYW9QYXNzLm1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnS0VSTkVMX1NJWkUnLCBzaXplKTtcbiAgICB0aGlzLl9rZXJuZWxzID0gdGhpcy5fa2VybmVscyB8fCBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDMwOyBpKyspIHtcbiAgICAgICAgdGhpcy5fa2VybmVsc1tpXSA9IGdlbmVyYXRlS2VybmVsKHNpemUsIGkgKiBzaXplLCAhIXRoaXMuX25vcm1hbFRleCk7XG4gICAgfVxufTtcblxuU1NBT1Bhc3MucHJvdG90eXBlLnNldE5vaXNlU2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgdmFyIHRleHR1cmUgPSB0aGlzLl9zc2FvUGFzcy5nZXRVbmlmb3JtKCdub2lzZVRleCcpO1xuICAgIGlmICghdGV4dHVyZSkge1xuICAgICAgICB0ZXh0dXJlID0gZ2VuZXJhdGVOb2lzZVRleHR1cmUoc2l6ZSk7XG4gICAgICAgIHRoaXMuX3NzYW9QYXNzLnNldFVuaWZvcm0oJ25vaXNlVGV4JywgZ2VuZXJhdGVOb2lzZVRleHR1cmUoc2l6ZSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGV4dHVyZS5kYXRhID0gZ2VuZXJhdGVOb2lzZURhdGEoc2l6ZSk7XG4gICAgICAgIHRleHR1cmUud2lkdGggPSB0ZXh0dXJlLmhlaWdodCA9IHNpemU7XG4gICAgICAgIHRleHR1cmUuZGlydHkoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zc2FvUGFzcy5zZXRVbmlmb3JtKCdub2lzZVRleFNpemUnLCBbc2l6ZSwgc2l6ZV0pO1xufTtcblxuU1NBT1Bhc3MucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICB0aGlzLl9ibHVyVGV4dHVyZS5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICB0aGlzLl9zc2FvVGV4dHVyZS5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICB0aGlzLl9wcmV2VGV4dHVyZS5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICB0aGlzLl9jdXJyVGV4dHVyZS5kaXNwb3NlKHJlbmRlcmVyKTtcbn07XG5cblNTQU9QYXNzLnByb3RvdHlwZS5pc0ZpbmlzaGVkID0gZnVuY3Rpb24gKGZyYW1lKSB7XG4gICAgcmV0dXJuIGZyYW1lID4gMzA7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTU0FPUGFzcztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wtYWR2YW5jZWQtcmVuZGVyZXIvc3JjL1NTQU9QYXNzLmpzXG4vLyBtb2R1bGUgaWQgPSAxOThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///198\n");

/***/ }),
/* 199 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export car.ssao.estimate\\n#define SHADER_NAME SSAO\\nuniform sampler2D depthTex;\\nuniform sampler2D normalTex;\\nuniform sampler2D noiseTex;\\nuniform vec2 depthTexSize;\\nuniform vec2 noiseTexSize;\\nuniform mat4 projection;\\nuniform mat4 projectionInv;\\nuniform mat4 viewInverseTranspose;\\nuniform vec3 kernel[KERNEL_SIZE];\\nuniform float radius : 1;\\nuniform float power : 1;\\nuniform float bias: 0.01;\\nuniform float intensity: 1.0;\\nvarying vec2 v_Texcoord;\\nfloat ssaoEstimator(in vec3 originPos, in vec3 N, in mat3 kernelBasis) {\\n float occlusion = 0.0;\\n for (int i = 0; i < KERNEL_SIZE; i++) {\\n vec3 samplePos = kernel[i];\\n#ifdef NORMALTEX_ENABLED\\n samplePos = kernelBasis * samplePos;\\n#endif\\n samplePos = samplePos * radius + originPos;\\n vec4 texCoord = projection * vec4(samplePos, 1.0);\\n texCoord.xy /= texCoord.w;\\n texCoord.xy = texCoord.xy * 0.5 + 0.5;\\n vec4 depthTexel = texture2D(depthTex, texCoord.xy);\\n float z = depthTexel.r * 2.0 - 1.0;\\n#ifdef ALCHEMY\\n vec4 projectedPos = vec4(texCoord.xy * 2.0 - 1.0, z, 1.0);\\n vec4 p4 = projectionInv * projectedPos;\\n p4.xyz /= p4.w;\\n vec3 cDir = p4.xyz - originPos;\\n float vv = dot(cDir, cDir);\\n float vn = dot(cDir, N);\\n float radius2 = radius * radius;\\n vn = max(vn + p4.z * bias, 0.0);\\n float f = max(radius2 - vv, 0.0) / radius2;\\n occlusion += f * f * f * max(vn / (0.01 + vv), 0.0);\\n#else\\n if (projection[3][3] == 0.0) {\\n z = projection[3][2] / (z * projection[2][3] - projection[2][2]);\\n }\\n else {\\n z = (z - projection[3][2]) / projection[2][2];\\n }\\n float factor = step(samplePos.z, z - bias);\\n float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - z));\\n occlusion += rangeCheck * factor;\\n#endif\\n }\\n#ifdef NORMALTEX_ENABLED\\n occlusion = 1.0 - occlusion / float(KERNEL_SIZE);\\n#else\\n occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);\\n#endif\\n return pow(occlusion, power);\\n}\\nvoid main()\\n{\\n vec2 uv = v_Texcoord;\\n vec4 depthTexel = texture2D(depthTex, uv);\\n#ifdef NORMALTEX_ENABLED\\n vec2 texelSize = 1.0 / depthTexSize;\\n vec4 tex = texture2D(normalTex, uv);\\n vec3 r = texture2D(normalTex, uv + vec2(texelSize.x, 0.0)).rgb;\\n vec3 l = texture2D(normalTex, uv + vec2(-texelSize.x, 0.0)).rgb;\\n vec3 t = texture2D(normalTex, uv + vec2(0.0, -texelSize.y)).rgb;\\n vec3 b = texture2D(normalTex, uv + vec2(0.0, texelSize.y)).rgb;\\n if (dot(tex.rgb, tex.rgb) == 0.0\\n || dot(r, r) == 0.0 || dot(l, l) == 0.0\\n || dot(t, t) == 0.0 || dot(b, b) == 0.0\\n ) {\\n gl_FragColor = vec4(1.0);\\n return;\\n }\\n vec3 N = tex.rgb * 2.0 - 1.0;\\n N = (viewInverseTranspose * vec4(N, 0.0)).xyz;\\n vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * uv;\\n vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;\\n vec3 T = normalize(rvec - N * dot(rvec, N));\\n vec3 BT = normalize(cross(N, T));\\n mat3 kernelBasis = mat3(T, BT, N);\\n#else\\n if (depthTexel.r > 0.99999) {\\n gl_FragColor = vec4(1.0);\\n return;\\n }\\n mat3 kernelBasis;\\n#endif\\n float z = depthTexel.r * 2.0 - 1.0;\\n vec4 projectedPos = vec4(uv * 2.0 - 1.0, z, 1.0);\\n vec4 p4 = projectionInv * projectedPos;\\n vec3 position = p4.xyz / p4.w;\\n float ao = ssaoEstimator(position, N, kernelBasis);\\n ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);\\n gl_FragColor = vec4(vec3(ao), 1.0);\\n}\\n@end\\n@export car.ssao.blur\\n#define SHADER_NAME SSAO_BLUR\\nuniform sampler2D ssaoTexture;\\n#ifdef NORMALTEX_ENABLED\\nuniform sampler2D normalTex;\\n#endif\\nvarying vec2 v_Texcoord;\\nuniform vec2 textureSize;\\nuniform float blurSize : 1.0;\\nuniform int direction: 0.0;\\n#ifdef DEPTHTEX_ENABLED\\nuniform sampler2D depthTex;\\nuniform mat4 projection;\\nuniform float depthRange : 0.05;\\nfloat getLinearDepth(vec2 coord)\\n{\\n float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;\\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\\n}\\n#endif\\nvoid main()\\n{\\n float kernel[5];\\n kernel[0] = 0.122581;\\n kernel[1] = 0.233062;\\n kernel[2] = 0.288713;\\n kernel[3] = 0.233062;\\n kernel[4] = 0.122581;\\n vec2 off = vec2(0.0);\\n if (direction == 0) {\\n off[0] = blurSize / textureSize.x;\\n }\\n else {\\n off[1] = blurSize / textureSize.y;\\n }\\n vec2 coord = v_Texcoord;\\n float sum = 0.0;\\n float weightAll = 0.0;\\n#ifdef NORMALTEX_ENABLED\\n vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;\\n#endif\\n#if defined(DEPTHTEX_ENABLED)\\n float centerDepth = getLinearDepth(v_Texcoord);\\n#endif\\n for (int i = 0; i < 5; i++) {\\n vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));\\n float w = kernel[i];\\n#ifdef NORMALTEX_ENABLED\\n vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;\\n w *= clamp(dot(normal, centerNormal), 0.0, 1.0);\\n#endif\\n#ifdef DEPTHTEX_ENABLED\\n float d = getLinearDepth(coord);\\n w *= (1.0 - smoothstep(0.0, 1.0, abs(centerDepth - d) / depthRange));\\n#endif\\n weightAll += w;\\n sum += texture2D(ssaoTexture, coord).r * w;\\n }\\n gl_FragColor = vec4(vec3(sum / weightAll), 1.0);\\n}\\n@end\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvU1NBTy5nbHNsLmpzPzAyYTUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNhci5zc2FvLmVzdGltYXRlXFxuI2RlZmluZSBTSEFERVJfTkFNRSBTU0FPXFxudW5pZm9ybSBzYW1wbGVyMkQgZGVwdGhUZXg7XFxudW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsVGV4O1xcbnVuaWZvcm0gc2FtcGxlcjJEIG5vaXNlVGV4O1xcbnVuaWZvcm0gdmVjMiBkZXB0aFRleFNpemU7XFxudW5pZm9ybSB2ZWMyIG5vaXNlVGV4U2l6ZTtcXG51bmlmb3JtIG1hdDQgcHJvamVjdGlvbjtcXG51bmlmb3JtIG1hdDQgcHJvamVjdGlvbkludjtcXG51bmlmb3JtIG1hdDQgdmlld0ludmVyc2VUcmFuc3Bvc2U7XFxudW5pZm9ybSB2ZWMzIGtlcm5lbFtLRVJORUxfU0laRV07XFxudW5pZm9ybSBmbG9hdCByYWRpdXMgOiAxO1xcbnVuaWZvcm0gZmxvYXQgcG93ZXIgOiAxO1xcbnVuaWZvcm0gZmxvYXQgYmlhczogMC4wMTtcXG51bmlmb3JtIGZsb2F0IGludGVuc2l0eTogMS4wO1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbmZsb2F0IHNzYW9Fc3RpbWF0b3IoaW4gdmVjMyBvcmlnaW5Qb3MsIGluIHZlYzMgTiwgaW4gbWF0MyBrZXJuZWxCYXNpcykge1xcbiBmbG9hdCBvY2NsdXNpb24gPSAwLjA7XFxuIGZvciAoaW50IGkgPSAwOyBpIDwgS0VSTkVMX1NJWkU7IGkrKykge1xcbiB2ZWMzIHNhbXBsZVBvcyA9IGtlcm5lbFtpXTtcXG4jaWZkZWYgTk9STUFMVEVYX0VOQUJMRURcXG4gc2FtcGxlUG9zID0ga2VybmVsQmFzaXMgKiBzYW1wbGVQb3M7XFxuI2VuZGlmXFxuIHNhbXBsZVBvcyA9IHNhbXBsZVBvcyAqIHJhZGl1cyArIG9yaWdpblBvcztcXG4gdmVjNCB0ZXhDb29yZCA9IHByb2plY3Rpb24gKiB2ZWM0KHNhbXBsZVBvcywgMS4wKTtcXG4gdGV4Q29vcmQueHkgLz0gdGV4Q29vcmQudztcXG4gdGV4Q29vcmQueHkgPSB0ZXhDb29yZC54eSAqIDAuNSArIDAuNTtcXG4gdmVjNCBkZXB0aFRleGVsID0gdGV4dHVyZTJEKGRlcHRoVGV4LCB0ZXhDb29yZC54eSk7XFxuIGZsb2F0IHogPSBkZXB0aFRleGVsLnIgKiAyLjAgLSAxLjA7XFxuI2lmZGVmIEFMQ0hFTVlcXG4gdmVjNCBwcm9qZWN0ZWRQb3MgPSB2ZWM0KHRleENvb3JkLnh5ICogMi4wIC0gMS4wLCB6LCAxLjApO1xcbiB2ZWM0IHA0ID0gcHJvamVjdGlvbkludiAqIHByb2plY3RlZFBvcztcXG4gcDQueHl6IC89IHA0Lnc7XFxuIHZlYzMgY0RpciA9IHA0Lnh5eiAtIG9yaWdpblBvcztcXG4gZmxvYXQgdnYgPSBkb3QoY0RpciwgY0Rpcik7XFxuIGZsb2F0IHZuID0gZG90KGNEaXIsIE4pO1xcbiBmbG9hdCByYWRpdXMyID0gcmFkaXVzICogcmFkaXVzO1xcbiB2biA9IG1heCh2biArIHA0LnogKiBiaWFzLCAwLjApO1xcbiBmbG9hdCBmID0gbWF4KHJhZGl1czIgLSB2diwgMC4wKSAvIHJhZGl1czI7XFxuIG9jY2x1c2lvbiArPSBmICogZiAqIGYgKiBtYXgodm4gLyAoMC4wMSArIHZ2KSwgMC4wKTtcXG4jZWxzZVxcbiBpZiAocHJvamVjdGlvblszXVszXSA9PSAwLjApIHtcXG4geiA9IHByb2plY3Rpb25bM11bMl0gLyAoeiAqIHByb2plY3Rpb25bMl1bM10gLSBwcm9qZWN0aW9uWzJdWzJdKTtcXG4gfVxcbiBlbHNlIHtcXG4geiA9ICh6IC0gcHJvamVjdGlvblszXVsyXSkgLyBwcm9qZWN0aW9uWzJdWzJdO1xcbiB9XFxuIGZsb2F0IGZhY3RvciA9IHN0ZXAoc2FtcGxlUG9zLnosIHogLSBiaWFzKTtcXG4gZmxvYXQgcmFuZ2VDaGVjayA9IHNtb290aHN0ZXAoMC4wLCAxLjAsIHJhZGl1cyAvIGFicyhvcmlnaW5Qb3MueiAtIHopKTtcXG4gb2NjbHVzaW9uICs9IHJhbmdlQ2hlY2sgKiBmYWN0b3I7XFxuI2VuZGlmXFxuIH1cXG4jaWZkZWYgTk9STUFMVEVYX0VOQUJMRURcXG4gb2NjbHVzaW9uID0gMS4wIC0gb2NjbHVzaW9uIC8gZmxvYXQoS0VSTkVMX1NJWkUpO1xcbiNlbHNlXFxuIG9jY2x1c2lvbiA9IDEuMCAtIGNsYW1wKChvY2NsdXNpb24gLyBmbG9hdChLRVJORUxfU0laRSkgLSAwLjYpICogMi41LCAwLjAsIDEuMCk7XFxuI2VuZGlmXFxuIHJldHVybiBwb3cob2NjbHVzaW9uLCBwb3dlcik7XFxufVxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWMyIHV2ID0gdl9UZXhjb29yZDtcXG4gdmVjNCBkZXB0aFRleGVsID0gdGV4dHVyZTJEKGRlcHRoVGV4LCB1dik7XFxuI2lmZGVmIE5PUk1BTFRFWF9FTkFCTEVEXFxuIHZlYzIgdGV4ZWxTaXplID0gMS4wIC8gZGVwdGhUZXhTaXplO1xcbiB2ZWM0IHRleCA9IHRleHR1cmUyRChub3JtYWxUZXgsIHV2KTtcXG4gdmVjMyByID0gdGV4dHVyZTJEKG5vcm1hbFRleCwgdXYgKyB2ZWMyKHRleGVsU2l6ZS54LCAwLjApKS5yZ2I7XFxuIHZlYzMgbCA9IHRleHR1cmUyRChub3JtYWxUZXgsIHV2ICsgdmVjMigtdGV4ZWxTaXplLngsIDAuMCkpLnJnYjtcXG4gdmVjMyB0ID0gdGV4dHVyZTJEKG5vcm1hbFRleCwgdXYgKyB2ZWMyKDAuMCwgLXRleGVsU2l6ZS55KSkucmdiO1xcbiB2ZWMzIGIgPSB0ZXh0dXJlMkQobm9ybWFsVGV4LCB1diArIHZlYzIoMC4wLCB0ZXhlbFNpemUueSkpLnJnYjtcXG4gaWYgKGRvdCh0ZXgucmdiLCB0ZXgucmdiKSA9PSAwLjBcXG4gfHwgZG90KHIsIHIpID09IDAuMCB8fCBkb3QobCwgbCkgPT0gMC4wXFxuIHx8IGRvdCh0LCB0KSA9PSAwLjAgfHwgZG90KGIsIGIpID09IDAuMFxcbiApIHtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjApO1xcbiByZXR1cm47XFxuIH1cXG4gdmVjMyBOID0gdGV4LnJnYiAqIDIuMCAtIDEuMDtcXG4gTiA9ICh2aWV3SW52ZXJzZVRyYW5zcG9zZSAqIHZlYzQoTiwgMC4wKSkueHl6O1xcbiB2ZWMyIG5vaXNlVGV4Q29vcmQgPSBkZXB0aFRleFNpemUgLyB2ZWMyKG5vaXNlVGV4U2l6ZSkgKiB1djtcXG4gdmVjMyBydmVjID0gdGV4dHVyZTJEKG5vaXNlVGV4LCBub2lzZVRleENvb3JkKS5yZ2IgKiAyLjAgLSAxLjA7XFxuIHZlYzMgVCA9IG5vcm1hbGl6ZShydmVjIC0gTiAqIGRvdChydmVjLCBOKSk7XFxuIHZlYzMgQlQgPSBub3JtYWxpemUoY3Jvc3MoTiwgVCkpO1xcbiBtYXQzIGtlcm5lbEJhc2lzID0gbWF0MyhULCBCVCwgTik7XFxuI2Vsc2VcXG4gaWYgKGRlcHRoVGV4ZWwuciA+IDAuOTk5OTkpIHtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjApO1xcbiByZXR1cm47XFxuIH1cXG4gbWF0MyBrZXJuZWxCYXNpcztcXG4jZW5kaWZcXG4gZmxvYXQgeiA9IGRlcHRoVGV4ZWwuciAqIDIuMCAtIDEuMDtcXG4gdmVjNCBwcm9qZWN0ZWRQb3MgPSB2ZWM0KHV2ICogMi4wIC0gMS4wLCB6LCAxLjApO1xcbiB2ZWM0IHA0ID0gcHJvamVjdGlvbkludiAqIHByb2plY3RlZFBvcztcXG4gdmVjMyBwb3NpdGlvbiA9IHA0Lnh5eiAvIHA0Lnc7XFxuIGZsb2F0IGFvID0gc3Nhb0VzdGltYXRvcihwb3NpdGlvbiwgTiwga2VybmVsQmFzaXMpO1xcbiBhbyA9IGNsYW1wKDEuMCAtICgxLjAgLSBhbykgKiBpbnRlbnNpdHksIDAuMCwgMS4wKTtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKGFvKSwgMS4wKTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2FyLnNzYW8uYmx1clxcbiNkZWZpbmUgU0hBREVSX05BTUUgU1NBT19CTFVSXFxudW5pZm9ybSBzYW1wbGVyMkQgc3Nhb1RleHR1cmU7XFxuI2lmZGVmIE5PUk1BTFRFWF9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsVGV4O1xcbiNlbmRpZlxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnVuaWZvcm0gdmVjMiB0ZXh0dXJlU2l6ZTtcXG51bmlmb3JtIGZsb2F0IGJsdXJTaXplIDogMS4wO1xcbnVuaWZvcm0gaW50IGRpcmVjdGlvbjogMC4wO1xcbiNpZmRlZiBERVBUSFRFWF9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgZGVwdGhUZXg7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb247XFxudW5pZm9ybSBmbG9hdCBkZXB0aFJhbmdlIDogMC4wNTtcXG5mbG9hdCBnZXRMaW5lYXJEZXB0aCh2ZWMyIGNvb3JkKVxcbntcXG4gZmxvYXQgZGVwdGggPSB0ZXh0dXJlMkQoZGVwdGhUZXgsIGNvb3JkKS5yICogMi4wIC0gMS4wO1xcbiByZXR1cm4gcHJvamVjdGlvblszXVsyXSAvIChkZXB0aCAqIHByb2plY3Rpb25bMl1bM10gLSBwcm9qZWN0aW9uWzJdWzJdKTtcXG59XFxuI2VuZGlmXFxudm9pZCBtYWluKClcXG57XFxuIGZsb2F0IGtlcm5lbFs1XTtcXG4ga2VybmVsWzBdID0gMC4xMjI1ODE7XFxuIGtlcm5lbFsxXSA9IDAuMjMzMDYyO1xcbiBrZXJuZWxbMl0gPSAwLjI4ODcxMztcXG4ga2VybmVsWzNdID0gMC4yMzMwNjI7XFxuIGtlcm5lbFs0XSA9IDAuMTIyNTgxO1xcbiB2ZWMyIG9mZiA9IHZlYzIoMC4wKTtcXG4gaWYgKGRpcmVjdGlvbiA9PSAwKSB7XFxuIG9mZlswXSA9IGJsdXJTaXplIC8gdGV4dHVyZVNpemUueDtcXG4gfVxcbiBlbHNlIHtcXG4gb2ZmWzFdID0gYmx1clNpemUgLyB0ZXh0dXJlU2l6ZS55O1xcbiB9XFxuIHZlYzIgY29vcmQgPSB2X1RleGNvb3JkO1xcbiBmbG9hdCBzdW0gPSAwLjA7XFxuIGZsb2F0IHdlaWdodEFsbCA9IDAuMDtcXG4jaWZkZWYgTk9STUFMVEVYX0VOQUJMRURcXG4gdmVjMyBjZW50ZXJOb3JtYWwgPSB0ZXh0dXJlMkQobm9ybWFsVGV4LCB2X1RleGNvb3JkKS5yZ2IgKiAyLjAgLSAxLjA7XFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoREVQVEhURVhfRU5BQkxFRClcXG4gZmxvYXQgY2VudGVyRGVwdGggPSBnZXRMaW5lYXJEZXB0aCh2X1RleGNvb3JkKTtcXG4jZW5kaWZcXG4gZm9yIChpbnQgaSA9IDA7IGkgPCA1OyBpKyspIHtcXG4gdmVjMiBjb29yZCA9IGNsYW1wKHZfVGV4Y29vcmQgKyB2ZWMyKGZsb2F0KGkpIC0gMi4wKSAqIG9mZiwgdmVjMigwLjApLCB2ZWMyKDEuMCkpO1xcbiBmbG9hdCB3ID0ga2VybmVsW2ldO1xcbiNpZmRlZiBOT1JNQUxURVhfRU5BQkxFRFxcbiB2ZWMzIG5vcm1hbCA9IHRleHR1cmUyRChub3JtYWxUZXgsIGNvb3JkKS5yZ2IgKiAyLjAgLSAxLjA7XFxuIHcgKj0gY2xhbXAoZG90KG5vcm1hbCwgY2VudGVyTm9ybWFsKSwgMC4wLCAxLjApO1xcbiNlbmRpZlxcbiNpZmRlZiBERVBUSFRFWF9FTkFCTEVEXFxuIGZsb2F0IGQgPSBnZXRMaW5lYXJEZXB0aChjb29yZCk7XFxuIHcgKj0gKDEuMCAtIHNtb290aHN0ZXAoMC4wLCAxLjAsIGFicyhjZW50ZXJEZXB0aCAtIGQpIC8gZGVwdGhSYW5nZSkpO1xcbiNlbmRpZlxcbiB3ZWlnaHRBbGwgKz0gdztcXG4gc3VtICs9IHRleHR1cmUyRChzc2FvVGV4dHVyZSwgY29vcmQpLnIgKiB3O1xcbiB9XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQodmVjMyhzdW0gLyB3ZWlnaHRBbGwpLCAxLjApO1xcbn1cXG5AZW5kXFxuXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wtYWR2YW5jZWQtcmVuZGVyZXIvc3JjL1NTQU8uZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTk5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///199\n");

/***/ }),
/* 200 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_claygl__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__SSR_glsl_js__ = __webpack_require__(201);\n\n\nvar Pass = __WEBPACK_IMPORTED_MODULE_0_claygl__[\"m\" /* compositor */].Pass;\n\n// import halton from './halton';\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].import(__WEBPACK_IMPORTED_MODULE_1__SSR_glsl_js__[\"a\" /* default */]);\n\n// function generateNormals(size, offset, hemisphere) {\n//     var kernel = new Float32Array(size * 3);\n//     offset = offset || 0;\n//     for (var i = 0; i < size; i++) {\n//         var phi = halton(i + offset, 2) * (hemisphere ? 1 : 2) * Math.PI / 2;\n//         var theta = halton(i + offset, 3) * 2 * Math.PI;\n//         var x = Math.cos(theta) * Math.sin(phi);\n//         var y = Math.sin(theta) * Math.sin(phi);\n//         var z = Math.cos(phi);\n//         kernel[i * 3] = x;\n//         kernel[i * 3 + 1] = y;\n//         kernel[i * 3 + 2] = z;\n//     }\n//     return kernel;\n// }\n\nfunction SSRPass(opt) {\n    opt = opt || {};\n\n    this._ssrPass = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('car.ssr.main'),\n        clearColor: [0, 0, 0, 0]\n    });\n    this._blurPass1 = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('car.ssr.blur'),\n        clearColor: [0, 0, 0, 0]\n    });\n    this._blurPass2 = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('car.ssr.blur'),\n        clearColor: [0, 0, 0, 0]\n    });\n    this._blendPass = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('clay.compositor.blend')\n    });\n    this._blendPass.material.disableTexturesAll();\n    this._blendPass.material.enableTexture(['texture1', 'texture2']);\n\n    this._ssrPass.setUniform('gBufferTexture1', opt.normalTexture);\n    this._ssrPass.setUniform('gBufferTexture2', opt.depthTexture);\n\n    this._blurPass1.setUniform('gBufferTexture1', opt.normalTexture);\n    this._blurPass1.setUniform('gBufferTexture2', opt.depthTexture);\n\n    this._blurPass2.setUniform('gBufferTexture1', opt.normalTexture);\n    this._blurPass2.setUniform('gBufferTexture2', opt.depthTexture);\n\n    this._blurPass2.material.define('fragment', 'VERTICAL');\n    this._blurPass2.material.define('fragment', 'BLEND');\n\n    this._ssrTexture = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        type: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].HALF_FLOAT\n    });\n    this._texture2 = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        type: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].HALF_FLOAT\n    });\n    this._texture3 = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        type: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].HALF_FLOAT\n    });\n\n    this._frameBuffer = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"a\" /* FrameBuffer */]({\n        depthBuffer: false\n    });\n\n    this._normalDistribution = null;\n\n    this._downScale = 1;\n}\n\nSSRPass.prototype.setAmbientCubemap = function (specularCubemap, brdfLookup, specularIntensity) {\n    this._ssrPass.material.set('specularCubemap', specularCubemap);\n    this._ssrPass.material.set('brdfLookup', brdfLookup);\n    this._ssrPass.material.set('specularIntensity', specularIntensity);\n\n    var enableSpecularMap = specularCubemap && specularIntensity;\n    this._ssrPass.material[enableSpecularMap ? 'enableTexture' : 'disableTexture']('specularCubemap');\n};\n\nSSRPass.prototype.update = function (renderer, camera, sourceTexture, reflectionSourceTexture, frame) {\n    var width = renderer.getWidth();\n    var height = renderer.getHeight();\n    var ssrTexture = this._ssrTexture;\n    var texture2 = this._texture2;\n    var texture3 = this._texture3;\n    ssrTexture.width = width / this._downScale;\n    ssrTexture.height = height / this._downScale;\n\n    texture2.width = texture3.width = width;\n    texture2.height = texture3.height = height;\n\n    var frameBuffer = this._frameBuffer;\n\n    var ssrPass = this._ssrPass;\n    var blurPass1 = this._blurPass1;\n    var blurPass2 = this._blurPass2;\n\n    var toViewSpace = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"d\" /* Matrix4 */]();\n    __WEBPACK_IMPORTED_MODULE_0_claygl__[\"d\" /* Matrix4 */].transpose(toViewSpace, camera.worldTransform);\n\n    ssrPass.setUniform('sourceTexture', reflectionSourceTexture);\n    ssrPass.setUniform('projection', camera.projectionMatrix.array);\n    ssrPass.setUniform('projectionInv', camera.invProjectionMatrix.array);\n    ssrPass.setUniform('toViewSpace', toViewSpace.array);\n    ssrPass.setUniform('nearZ', camera.near);\n    ssrPass.setUniform('jitterOffset', Math.random());\n\n    blurPass1.setUniform('textureSize', [ssrTexture.width, ssrTexture.height]);\n    blurPass2.setUniform('textureSize', [width, height]);\n    blurPass2.setUniform('sourceTexture', sourceTexture);\n\n    blurPass1.setUniform('projection', camera.projectionMatrix.array);\n    blurPass2.setUniform('projection', camera.projectionMatrix.array);\n\n    frameBuffer.attach(ssrTexture);\n    frameBuffer.bind(renderer);\n    ssrPass.render(renderer);\n\n    frameBuffer.attach(texture2);\n    blurPass1.setUniform('texture', ssrTexture);\n    blurPass1.render(renderer);\n\n    frameBuffer.attach(texture3);\n    blurPass2.setUniform('texture', texture2);\n    blurPass2.render(renderer);\n    frameBuffer.unbind(renderer);\n};\n\nSSRPass.prototype.getTargetTexture = function () {\n    return this._texture3;\n};\n\nSSRPass.prototype.setParameter = function (name, val) {\n    if (name === 'maxIteration') {\n        this._ssrPass.material.define('fragment', 'MAX_ITERATION', val);\n    }\n    else {\n        this._ssrPass.setUniform(name, val);\n    }\n};\n\nSSRPass.prototype.setSSAOTexture = function (texture) {\n    var blendPass = this._blurPass2;\n    if (texture) {\n        blendPass.material.enableTexture('ssaoTex');\n        blendPass.material.set('ssaoTex', texture);\n    }\n    else {\n        blendPass.material.disableTexture('ssaoTex');\n    }\n};\n\nSSRPass.prototype.isFinished = function (frame) {\n    return true;\n};\n\nSSRPass.prototype.dispose = function (renderer) {\n    this._ssrTexture.dispose(renderer);\n    this._texture2.dispose(renderer);\n    this._texture3.dispose(renderer);\n    this._prevTexture.dispose(renderer);\n    this._currentTexture.dispose(renderer);\n    this._frameBuffer.dispose(renderer);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SSRPass);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvU1NSUGFzcy5qcz9hOWY3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1hdHJpeDQsIFRleHR1cmUyRCwgVGV4dHVyZSwgY29tcG9zaXRvciwgRnJhbWVCdWZmZXIsIFNoYWRlciwgdXRpbCB9IGZyb20gJ2NsYXlnbCc7XG5cbnZhciBQYXNzID0gY29tcG9zaXRvci5QYXNzO1xuXG4vLyBpbXBvcnQgaGFsdG9uIGZyb20gJy4vaGFsdG9uJztcblxuaW1wb3J0IFNTUkdMU0xDb2RlIGZyb20gJy4vU1NSLmdsc2wuanMnO1xuXG5TaGFkZXIuaW1wb3J0KFNTUkdMU0xDb2RlKTtcblxuLy8gZnVuY3Rpb24gZ2VuZXJhdGVOb3JtYWxzKHNpemUsIG9mZnNldCwgaGVtaXNwaGVyZSkge1xuLy8gICAgIHZhciBrZXJuZWwgPSBuZXcgRmxvYXQzMkFycmF5KHNpemUgKiAzKTtcbi8vICAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcbi8vICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuLy8gICAgICAgICB2YXIgcGhpID0gaGFsdG9uKGkgKyBvZmZzZXQsIDIpICogKGhlbWlzcGhlcmUgPyAxIDogMikgKiBNYXRoLlBJIC8gMjtcbi8vICAgICAgICAgdmFyIHRoZXRhID0gaGFsdG9uKGkgKyBvZmZzZXQsIDMpICogMiAqIE1hdGguUEk7XG4vLyAgICAgICAgIHZhciB4ID0gTWF0aC5jb3ModGhldGEpICogTWF0aC5zaW4ocGhpKTtcbi8vICAgICAgICAgdmFyIHkgPSBNYXRoLnNpbih0aGV0YSkgKiBNYXRoLnNpbihwaGkpO1xuLy8gICAgICAgICB2YXIgeiA9IE1hdGguY29zKHBoaSk7XG4vLyAgICAgICAgIGtlcm5lbFtpICogM10gPSB4O1xuLy8gICAgICAgICBrZXJuZWxbaSAqIDMgKyAxXSA9IHk7XG4vLyAgICAgICAgIGtlcm5lbFtpICogMyArIDJdID0gejtcbi8vICAgICB9XG4vLyAgICAgcmV0dXJuIGtlcm5lbDtcbi8vIH1cblxuZnVuY3Rpb24gU1NSUGFzcyhvcHQpIHtcbiAgICBvcHQgPSBvcHQgfHwge307XG5cbiAgICB0aGlzLl9zc3JQYXNzID0gbmV3IFBhc3Moe1xuICAgICAgICBmcmFnbWVudDogU2hhZGVyLnNvdXJjZSgnY2FyLnNzci5tYWluJyksXG4gICAgICAgIGNsZWFyQ29sb3I6IFswLCAwLCAwLCAwXVxuICAgIH0pO1xuICAgIHRoaXMuX2JsdXJQYXNzMSA9IG5ldyBQYXNzKHtcbiAgICAgICAgZnJhZ21lbnQ6IFNoYWRlci5zb3VyY2UoJ2Nhci5zc3IuYmx1cicpLFxuICAgICAgICBjbGVhckNvbG9yOiBbMCwgMCwgMCwgMF1cbiAgICB9KTtcbiAgICB0aGlzLl9ibHVyUGFzczIgPSBuZXcgUGFzcyh7XG4gICAgICAgIGZyYWdtZW50OiBTaGFkZXIuc291cmNlKCdjYXIuc3NyLmJsdXInKSxcbiAgICAgICAgY2xlYXJDb2xvcjogWzAsIDAsIDAsIDBdXG4gICAgfSk7XG4gICAgdGhpcy5fYmxlbmRQYXNzID0gbmV3IFBhc3Moe1xuICAgICAgICBmcmFnbWVudDogU2hhZGVyLnNvdXJjZSgnY2xheS5jb21wb3NpdG9yLmJsZW5kJylcbiAgICB9KTtcbiAgICB0aGlzLl9ibGVuZFBhc3MubWF0ZXJpYWwuZGlzYWJsZVRleHR1cmVzQWxsKCk7XG4gICAgdGhpcy5fYmxlbmRQYXNzLm1hdGVyaWFsLmVuYWJsZVRleHR1cmUoWyd0ZXh0dXJlMScsICd0ZXh0dXJlMiddKTtcblxuICAgIHRoaXMuX3NzclBhc3Muc2V0VW5pZm9ybSgnZ0J1ZmZlclRleHR1cmUxJywgb3B0Lm5vcm1hbFRleHR1cmUpO1xuICAgIHRoaXMuX3NzclBhc3Muc2V0VW5pZm9ybSgnZ0J1ZmZlclRleHR1cmUyJywgb3B0LmRlcHRoVGV4dHVyZSk7XG5cbiAgICB0aGlzLl9ibHVyUGFzczEuc2V0VW5pZm9ybSgnZ0J1ZmZlclRleHR1cmUxJywgb3B0Lm5vcm1hbFRleHR1cmUpO1xuICAgIHRoaXMuX2JsdXJQYXNzMS5zZXRVbmlmb3JtKCdnQnVmZmVyVGV4dHVyZTInLCBvcHQuZGVwdGhUZXh0dXJlKTtcblxuICAgIHRoaXMuX2JsdXJQYXNzMi5zZXRVbmlmb3JtKCdnQnVmZmVyVGV4dHVyZTEnLCBvcHQubm9ybWFsVGV4dHVyZSk7XG4gICAgdGhpcy5fYmx1clBhc3MyLnNldFVuaWZvcm0oJ2dCdWZmZXJUZXh0dXJlMicsIG9wdC5kZXB0aFRleHR1cmUpO1xuXG4gICAgdGhpcy5fYmx1clBhc3MyLm1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnVkVSVElDQUwnKTtcbiAgICB0aGlzLl9ibHVyUGFzczIubWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdCTEVORCcpO1xuXG4gICAgdGhpcy5fc3NyVGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICB0eXBlOiBUZXh0dXJlLkhBTEZfRkxPQVRcbiAgICB9KTtcbiAgICB0aGlzLl90ZXh0dXJlMiA9IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICB0eXBlOiBUZXh0dXJlLkhBTEZfRkxPQVRcbiAgICB9KTtcbiAgICB0aGlzLl90ZXh0dXJlMyA9IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICB0eXBlOiBUZXh0dXJlLkhBTEZfRkxPQVRcbiAgICB9KTtcblxuICAgIHRoaXMuX2ZyYW1lQnVmZmVyID0gbmV3IEZyYW1lQnVmZmVyKHtcbiAgICAgICAgZGVwdGhCdWZmZXI6IGZhbHNlXG4gICAgfSk7XG5cbiAgICB0aGlzLl9ub3JtYWxEaXN0cmlidXRpb24gPSBudWxsO1xuXG4gICAgdGhpcy5fZG93blNjYWxlID0gMTtcbn1cblxuU1NSUGFzcy5wcm90b3R5cGUuc2V0QW1iaWVudEN1YmVtYXAgPSBmdW5jdGlvbiAoc3BlY3VsYXJDdWJlbWFwLCBicmRmTG9va3VwLCBzcGVjdWxhckludGVuc2l0eSkge1xuICAgIHRoaXMuX3NzclBhc3MubWF0ZXJpYWwuc2V0KCdzcGVjdWxhckN1YmVtYXAnLCBzcGVjdWxhckN1YmVtYXApO1xuICAgIHRoaXMuX3NzclBhc3MubWF0ZXJpYWwuc2V0KCdicmRmTG9va3VwJywgYnJkZkxvb2t1cCk7XG4gICAgdGhpcy5fc3NyUGFzcy5tYXRlcmlhbC5zZXQoJ3NwZWN1bGFySW50ZW5zaXR5Jywgc3BlY3VsYXJJbnRlbnNpdHkpO1xuXG4gICAgdmFyIGVuYWJsZVNwZWN1bGFyTWFwID0gc3BlY3VsYXJDdWJlbWFwICYmIHNwZWN1bGFySW50ZW5zaXR5O1xuICAgIHRoaXMuX3NzclBhc3MubWF0ZXJpYWxbZW5hYmxlU3BlY3VsYXJNYXAgPyAnZW5hYmxlVGV4dHVyZScgOiAnZGlzYWJsZVRleHR1cmUnXSgnc3BlY3VsYXJDdWJlbWFwJyk7XG59O1xuXG5TU1JQYXNzLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocmVuZGVyZXIsIGNhbWVyYSwgc291cmNlVGV4dHVyZSwgcmVmbGVjdGlvblNvdXJjZVRleHR1cmUsIGZyYW1lKSB7XG4gICAgdmFyIHdpZHRoID0gcmVuZGVyZXIuZ2V0V2lkdGgoKTtcbiAgICB2YXIgaGVpZ2h0ID0gcmVuZGVyZXIuZ2V0SGVpZ2h0KCk7XG4gICAgdmFyIHNzclRleHR1cmUgPSB0aGlzLl9zc3JUZXh0dXJlO1xuICAgIHZhciB0ZXh0dXJlMiA9IHRoaXMuX3RleHR1cmUyO1xuICAgIHZhciB0ZXh0dXJlMyA9IHRoaXMuX3RleHR1cmUzO1xuICAgIHNzclRleHR1cmUud2lkdGggPSB3aWR0aCAvIHRoaXMuX2Rvd25TY2FsZTtcbiAgICBzc3JUZXh0dXJlLmhlaWdodCA9IGhlaWdodCAvIHRoaXMuX2Rvd25TY2FsZTtcblxuICAgIHRleHR1cmUyLndpZHRoID0gdGV4dHVyZTMud2lkdGggPSB3aWR0aDtcbiAgICB0ZXh0dXJlMi5oZWlnaHQgPSB0ZXh0dXJlMy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICB2YXIgZnJhbWVCdWZmZXIgPSB0aGlzLl9mcmFtZUJ1ZmZlcjtcblxuICAgIHZhciBzc3JQYXNzID0gdGhpcy5fc3NyUGFzcztcbiAgICB2YXIgYmx1clBhc3MxID0gdGhpcy5fYmx1clBhc3MxO1xuICAgIHZhciBibHVyUGFzczIgPSB0aGlzLl9ibHVyUGFzczI7XG5cbiAgICB2YXIgdG9WaWV3U3BhY2UgPSBuZXcgTWF0cml4NCgpO1xuICAgIE1hdHJpeDQudHJhbnNwb3NlKHRvVmlld1NwYWNlLCBjYW1lcmEud29ybGRUcmFuc2Zvcm0pO1xuXG4gICAgc3NyUGFzcy5zZXRVbmlmb3JtKCdzb3VyY2VUZXh0dXJlJywgcmVmbGVjdGlvblNvdXJjZVRleHR1cmUpO1xuICAgIHNzclBhc3Muc2V0VW5pZm9ybSgncHJvamVjdGlvbicsIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmFycmF5KTtcbiAgICBzc3JQYXNzLnNldFVuaWZvcm0oJ3Byb2plY3Rpb25JbnYnLCBjYW1lcmEuaW52UHJvamVjdGlvbk1hdHJpeC5hcnJheSk7XG4gICAgc3NyUGFzcy5zZXRVbmlmb3JtKCd0b1ZpZXdTcGFjZScsIHRvVmlld1NwYWNlLmFycmF5KTtcbiAgICBzc3JQYXNzLnNldFVuaWZvcm0oJ25lYXJaJywgY2FtZXJhLm5lYXIpO1xuICAgIHNzclBhc3Muc2V0VW5pZm9ybSgnaml0dGVyT2Zmc2V0JywgTWF0aC5yYW5kb20oKSk7XG5cbiAgICBibHVyUGFzczEuc2V0VW5pZm9ybSgndGV4dHVyZVNpemUnLCBbc3NyVGV4dHVyZS53aWR0aCwgc3NyVGV4dHVyZS5oZWlnaHRdKTtcbiAgICBibHVyUGFzczIuc2V0VW5pZm9ybSgndGV4dHVyZVNpemUnLCBbd2lkdGgsIGhlaWdodF0pO1xuICAgIGJsdXJQYXNzMi5zZXRVbmlmb3JtKCdzb3VyY2VUZXh0dXJlJywgc291cmNlVGV4dHVyZSk7XG5cbiAgICBibHVyUGFzczEuc2V0VW5pZm9ybSgncHJvamVjdGlvbicsIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmFycmF5KTtcbiAgICBibHVyUGFzczIuc2V0VW5pZm9ybSgncHJvamVjdGlvbicsIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmFycmF5KTtcblxuICAgIGZyYW1lQnVmZmVyLmF0dGFjaChzc3JUZXh0dXJlKTtcbiAgICBmcmFtZUJ1ZmZlci5iaW5kKHJlbmRlcmVyKTtcbiAgICBzc3JQYXNzLnJlbmRlcihyZW5kZXJlcik7XG5cbiAgICBmcmFtZUJ1ZmZlci5hdHRhY2godGV4dHVyZTIpO1xuICAgIGJsdXJQYXNzMS5zZXRVbmlmb3JtKCd0ZXh0dXJlJywgc3NyVGV4dHVyZSk7XG4gICAgYmx1clBhc3MxLnJlbmRlcihyZW5kZXJlcik7XG5cbiAgICBmcmFtZUJ1ZmZlci5hdHRhY2godGV4dHVyZTMpO1xuICAgIGJsdXJQYXNzMi5zZXRVbmlmb3JtKCd0ZXh0dXJlJywgdGV4dHVyZTIpO1xuICAgIGJsdXJQYXNzMi5yZW5kZXIocmVuZGVyZXIpO1xuICAgIGZyYW1lQnVmZmVyLnVuYmluZChyZW5kZXJlcik7XG59O1xuXG5TU1JQYXNzLnByb3RvdHlwZS5nZXRUYXJnZXRUZXh0dXJlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl90ZXh0dXJlMztcbn07XG5cblNTUlBhc3MucHJvdG90eXBlLnNldFBhcmFtZXRlciA9IGZ1bmN0aW9uIChuYW1lLCB2YWwpIHtcbiAgICBpZiAobmFtZSA9PT0gJ21heEl0ZXJhdGlvbicpIHtcbiAgICAgICAgdGhpcy5fc3NyUGFzcy5tYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ01BWF9JVEVSQVRJT04nLCB2YWwpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5fc3NyUGFzcy5zZXRVbmlmb3JtKG5hbWUsIHZhbCk7XG4gICAgfVxufTtcblxuU1NSUGFzcy5wcm90b3R5cGUuc2V0U1NBT1RleHR1cmUgPSBmdW5jdGlvbiAodGV4dHVyZSkge1xuICAgIHZhciBibGVuZFBhc3MgPSB0aGlzLl9ibHVyUGFzczI7XG4gICAgaWYgKHRleHR1cmUpIHtcbiAgICAgICAgYmxlbmRQYXNzLm1hdGVyaWFsLmVuYWJsZVRleHR1cmUoJ3NzYW9UZXgnKTtcbiAgICAgICAgYmxlbmRQYXNzLm1hdGVyaWFsLnNldCgnc3Nhb1RleCcsIHRleHR1cmUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYmxlbmRQYXNzLm1hdGVyaWFsLmRpc2FibGVUZXh0dXJlKCdzc2FvVGV4Jyk7XG4gICAgfVxufTtcblxuU1NSUGFzcy5wcm90b3R5cGUuaXNGaW5pc2hlZCA9IGZ1bmN0aW9uIChmcmFtZSkge1xuICAgIHJldHVybiB0cnVlO1xufTtcblxuU1NSUGFzcy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgIHRoaXMuX3NzclRleHR1cmUuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgdGhpcy5fdGV4dHVyZTIuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgdGhpcy5fdGV4dHVyZTMuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgdGhpcy5fcHJldlRleHR1cmUuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgdGhpcy5fY3VycmVudFRleHR1cmUuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgdGhpcy5fZnJhbWVCdWZmZXIuZGlzcG9zZShyZW5kZXJlcik7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTU1JQYXNzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvU1NSUGFzcy5qc1xuLy8gbW9kdWxlIGlkID0gMjAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///200\n");

/***/ }),
/* 201 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export car.ssr.main\\n#define SHADER_NAME SSR\\n#define MAX_ITERATION 20;\\n#define MAX_BINARY_SEARCH_ITERATION 5;\\nuniform sampler2D sourceTexture;\\nuniform sampler2D gBufferTexture1;\\nuniform sampler2D gBufferTexture2;\\nuniform mat4 projection;\\nuniform mat4 projectionInv;\\nuniform mat4 toViewSpace;\\nuniform float maxRayDistance = 4;\\nuniform float pixelStride = 16;\\nuniform float pixelStrideZCutoff = 10;\\nuniform float screenEdgeFadeStart = 0.9;\\nuniform float eyeFadeStart = 0.4;uniform float eyeFadeEnd = 0.8;\\nuniform float minGlossiness = 0.2;uniform float zThicknessThreshold = 0.1;\\nuniform float jitterOffset = 0;\\nuniform float nearZ;\\nuniform vec2 viewportSize: VIEWPORT_SIZE;\\nuniform float maxMipmapLevel = 5;\\nvarying vec2 v_Texcoord;\\n#ifdef DEPTH_DECODE\\n@import clay.util.decode_float\\n#endif\\nfloat fetchDepth(sampler2D depthTexture, vec2 uv)\\n{\\n vec4 depthTexel = texture2D(depthTexture, uv);\\n#ifdef DEPTH_DECODE\\n return decodeFloat(depthTexel) * 2.0 - 1.0;\\n#else\\n return depthTexel.r * 2.0 - 1.0;\\n#endif\\n}\\nfloat linearDepth(float depth)\\n{\\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\\n}\\nbool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)\\n{\\n if (rayZFar > rayZNear)\\n {\\n float t = rayZFar; rayZFar = rayZNear; rayZNear = t;\\n }\\n float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));\\n return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;\\n}\\nbool traceScreenSpaceRay(\\n vec3 rayOrigin, vec3 rayDir, float jitter,\\n out vec2 hitPixel, out vec3 hitPoint, out float iterationCount\\n)\\n{\\n float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)\\n ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;\\n vec3 rayEnd = rayOrigin + rayDir * rayLength;\\n vec4 H0 = projection * vec4(rayOrigin, 1.0);\\n vec4 H1 = projection * vec4(rayEnd, 1.0);\\n float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;\\n vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;\\n vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;\\n vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;\\n P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;\\n vec2 delta = P1 - P0;\\n bool permute = false;\\n if (abs(delta.x) < abs(delta.y)) {\\n permute = true;\\n delta = delta.yx;\\n P0 = P0.yx;\\n P1 = P1.yx;\\n }\\n float stepDir = sign(delta.x);\\n float invdx = stepDir / delta.x;\\n vec3 dQ = (Q1 - Q0) * invdx;\\n float dk = (k1 - k0) * invdx;\\n vec2 dP = vec2(stepDir, delta.y * invdx);\\n float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);\\n float pixStride = 1.0 + strideScaler * pixelStride;\\n dP *= pixStride; dQ *= pixStride; dk *= pixStride;\\n vec4 pqk = vec4(P0, Q0.z, k0);\\n vec4 dPQK = vec4(dP, dQ.z, dk);\\n pqk += dPQK * jitter;\\n float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\\n float rayZNear;\\n bool intersect = false;\\n vec2 texelSize = 1.0 / viewportSize;\\n iterationCount = 0.0;\\n for (int i = 0; i < MAX_ITERATION; i++)\\n {\\n pqk += dPQK;\\n rayZNear = rayZFar;\\n rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\\n hitPixel = permute ? pqk.yx : pqk.xy;\\n hitPixel *= texelSize;\\n intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);\\n iterationCount += 1.0;\\n if (intersect) {\\n break;\\n }\\n }\\n if (pixStride > 1.0 && intersect && iterationCount > 1.0)\\n {\\n pqk -= dPQK;\\n dPQK /= pixStride;\\n float originalStride = pixStride * 0.5;\\n float stride = originalStride;\\n rayZNear = pqk.z / pqk.w;\\n rayZFar = rayZNear;\\n for (int j = 0; j < MAX_BINARY_SEARCH_ITERATION; j++)\\n {\\n pqk += dPQK * stride;\\n rayZNear = rayZFar;\\n rayZFar = (dPQK.z * -0.5 + pqk.z) / (dPQK.w * -0.5 + pqk.w);\\n hitPixel = permute ? pqk.yx : pqk.xy;\\n hitPixel *= texelSize;\\n originalStride *= 0.5;\\n stride = rayIntersectDepth(rayZNear, rayZFar, hitPixel) ? -originalStride : originalStride;\\n }\\n }\\n Q0.xy += dQ.xy * iterationCount;\\n Q0.z = pqk.z;\\n hitPoint = Q0 / pqk.w;\\n return intersect;\\n}\\nfloat calculateAlpha(\\n float iterationCount, float reflectivity,\\n vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir\\n)\\n{\\n float alpha = clamp(reflectivity, 0.0, 1.0);\\n alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));\\n vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;\\n float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));\\n alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);\\n float _eyeFadeStart = eyeFadeStart;\\n float _eyeFadeEnd = eyeFadeEnd;\\n if (_eyeFadeStart > _eyeFadeEnd) {\\n float tmp = _eyeFadeEnd;\\n _eyeFadeEnd = _eyeFadeStart;\\n _eyeFadeStart = tmp;\\n }\\n float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);\\n alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);\\n alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);\\n return alpha;\\n}\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);\\n if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {\\n discard;\\n }\\n float g = normalAndGloss.a;\\n if (g <= minGlossiness) {\\n discard;\\n }\\n float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);\\n vec3 N = normalAndGloss.rgb * 2.0 - 1.0;\\n N = normalize((toViewSpace * vec4(N, 0.0)).xyz);\\n vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);\\n vec4 pos = projectionInv * projectedPos;\\n vec3 rayOrigin = pos.xyz / pos.w;\\n vec3 rayDir = normalize(reflect(normalize(rayOrigin), N));\\n vec2 hitPixel;\\n vec3 hitPoint;\\n float iterationCount;\\n vec2 uv2 = v_Texcoord * viewportSize;\\n float jitter = fract((uv2.x + uv2.y) * 0.25 + jitterOffset);\\n bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);\\n float dist = distance(rayOrigin, hitPoint);\\n float alpha = calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir) * float(intersect);\\n vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;\\n hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);\\n if (dot(hitNormal, rayDir) >= 0.0) {\\n discard;\\n }\\n if (!intersect) {\\n discard;\\n }\\n vec4 color = decodeHDR(texture2D(sourceTexture, hitPixel));\\n gl_FragColor = encodeHDR(vec4(color.rgb * alpha, color.a));\\n}\\n@end\\n@export car.ssr.blur\\nuniform sampler2D texture;\\nuniform sampler2D gBufferTexture1;\\nuniform sampler2D gBufferTexture2;\\nuniform mat4 projection;\\nuniform float depthRange : 0.05;\\nvarying vec2 v_Texcoord;\\nuniform vec2 textureSize;\\nuniform float blurSize : 1.0;\\n#ifdef BLEND\\n #ifdef SSAOTEX_ENABLED\\nuniform sampler2D ssaoTex;\\n #endif\\nuniform sampler2D sourceTexture;\\n#endif\\nfloat getLinearDepth(vec2 coord)\\n{\\n float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;\\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\\n}\\n@import clay.util.rgbm\\nvoid main()\\n{\\n @import clay.compositor.kernel.gaussian_9\\n vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);\\n float g = centerNTexel.a;\\n float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;\\n#ifdef VERTICAL\\n vec2 off = vec2(0.0, maxBlurSize / textureSize.y);\\n#else\\n vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);\\n#endif\\n vec2 coord = v_Texcoord;\\n vec4 sum = vec4(0.0);\\n float weightAll = 0.0;\\n vec3 cN = centerNTexel.rgb * 2.0 - 1.0;\\n float cD = getLinearDepth(v_Texcoord);\\n for (int i = 0; i < 9; i++) {\\n vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));\\n float w = gaussianKernel[i]\\n * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);\\n float d = getLinearDepth(coord);\\n w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));\\n weightAll += w;\\n sum += decodeHDR(texture2D(texture, coord)) * w;\\n }\\n#ifdef BLEND\\n float aoFactor = 1.0;\\n #ifdef SSAOTEX_ENABLED\\n aoFactor = texture2D(ssaoTex, v_Texcoord).r;\\n #endif\\n gl_FragColor = encodeHDR(\\n sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))\\n );\\n#else\\n gl_FragColor = encodeHDR(sum / weightAll);\\n#endif\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvU1NSLmdsc2wuanM/YWI3NSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2FyLnNzci5tYWluXFxuI2RlZmluZSBTSEFERVJfTkFNRSBTU1JcXG4jZGVmaW5lIE1BWF9JVEVSQVRJT04gMjA7XFxuI2RlZmluZSBNQVhfQklOQVJZX1NFQVJDSF9JVEVSQVRJT04gNTtcXG51bmlmb3JtIHNhbXBsZXIyRCBzb3VyY2VUZXh0dXJlO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGdCdWZmZXJUZXh0dXJlMTtcXG51bmlmb3JtIHNhbXBsZXIyRCBnQnVmZmVyVGV4dHVyZTI7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb247XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb25JbnY7XFxudW5pZm9ybSBtYXQ0IHRvVmlld1NwYWNlO1xcbnVuaWZvcm0gZmxvYXQgbWF4UmF5RGlzdGFuY2UgPSA0O1xcbnVuaWZvcm0gZmxvYXQgcGl4ZWxTdHJpZGUgPSAxNjtcXG51bmlmb3JtIGZsb2F0IHBpeGVsU3RyaWRlWkN1dG9mZiA9IDEwO1xcbnVuaWZvcm0gZmxvYXQgc2NyZWVuRWRnZUZhZGVTdGFydCA9IDAuOTtcXG51bmlmb3JtIGZsb2F0IGV5ZUZhZGVTdGFydCA9IDAuNDt1bmlmb3JtIGZsb2F0IGV5ZUZhZGVFbmQgPSAwLjg7XFxudW5pZm9ybSBmbG9hdCBtaW5HbG9zc2luZXNzID0gMC4yO3VuaWZvcm0gZmxvYXQgelRoaWNrbmVzc1RocmVzaG9sZCA9IDAuMTtcXG51bmlmb3JtIGZsb2F0IGppdHRlck9mZnNldCA9IDA7XFxudW5pZm9ybSBmbG9hdCBuZWFyWjtcXG51bmlmb3JtIHZlYzIgdmlld3BvcnRTaXplOiBWSUVXUE9SVF9TSVpFO1xcbnVuaWZvcm0gZmxvYXQgbWF4TWlwbWFwTGV2ZWwgPSA1O1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbiNpZmRlZiBERVBUSF9ERUNPREVcXG5AaW1wb3J0IGNsYXkudXRpbC5kZWNvZGVfZmxvYXRcXG4jZW5kaWZcXG5mbG9hdCBmZXRjaERlcHRoKHNhbXBsZXIyRCBkZXB0aFRleHR1cmUsIHZlYzIgdXYpXFxue1xcbiB2ZWM0IGRlcHRoVGV4ZWwgPSB0ZXh0dXJlMkQoZGVwdGhUZXh0dXJlLCB1dik7XFxuI2lmZGVmIERFUFRIX0RFQ09ERVxcbiByZXR1cm4gZGVjb2RlRmxvYXQoZGVwdGhUZXhlbCkgKiAyLjAgLSAxLjA7XFxuI2Vsc2VcXG4gcmV0dXJuIGRlcHRoVGV4ZWwuciAqIDIuMCAtIDEuMDtcXG4jZW5kaWZcXG59XFxuZmxvYXQgbGluZWFyRGVwdGgoZmxvYXQgZGVwdGgpXFxue1xcbiByZXR1cm4gcHJvamVjdGlvblszXVsyXSAvIChkZXB0aCAqIHByb2plY3Rpb25bMl1bM10gLSBwcm9qZWN0aW9uWzJdWzJdKTtcXG59XFxuYm9vbCByYXlJbnRlcnNlY3REZXB0aChmbG9hdCByYXlaTmVhciwgZmxvYXQgcmF5WkZhciwgdmVjMiBoaXRQaXhlbClcXG57XFxuIGlmIChyYXlaRmFyID4gcmF5Wk5lYXIpXFxuIHtcXG4gZmxvYXQgdCA9IHJheVpGYXI7IHJheVpGYXIgPSByYXlaTmVhcjsgcmF5Wk5lYXIgPSB0O1xcbiB9XFxuIGZsb2F0IGNhbWVyYVogPSBsaW5lYXJEZXB0aChmZXRjaERlcHRoKGdCdWZmZXJUZXh0dXJlMiwgaGl0UGl4ZWwpKTtcXG4gcmV0dXJuIHJheVpGYXIgPD0gY2FtZXJhWiAmJiByYXlaTmVhciA+PSBjYW1lcmFaIC0gelRoaWNrbmVzc1RocmVzaG9sZDtcXG59XFxuYm9vbCB0cmFjZVNjcmVlblNwYWNlUmF5KFxcbiB2ZWMzIHJheU9yaWdpbiwgdmVjMyByYXlEaXIsIGZsb2F0IGppdHRlcixcXG4gb3V0IHZlYzIgaGl0UGl4ZWwsIG91dCB2ZWMzIGhpdFBvaW50LCBvdXQgZmxvYXQgaXRlcmF0aW9uQ291bnRcXG4pXFxue1xcbiBmbG9hdCByYXlMZW5ndGggPSAoKHJheU9yaWdpbi56ICsgcmF5RGlyLnogKiBtYXhSYXlEaXN0YW5jZSkgPiAtbmVhclopXFxuID8gKC1uZWFyWiAtIHJheU9yaWdpbi56KSAvIHJheURpci56IDogbWF4UmF5RGlzdGFuY2U7XFxuIHZlYzMgcmF5RW5kID0gcmF5T3JpZ2luICsgcmF5RGlyICogcmF5TGVuZ3RoO1xcbiB2ZWM0IEgwID0gcHJvamVjdGlvbiAqIHZlYzQocmF5T3JpZ2luLCAxLjApO1xcbiB2ZWM0IEgxID0gcHJvamVjdGlvbiAqIHZlYzQocmF5RW5kLCAxLjApO1xcbiBmbG9hdCBrMCA9IDEuMCAvIEgwLncsIGsxID0gMS4wIC8gSDEudztcXG4gdmVjMyBRMCA9IHJheU9yaWdpbiAqIGswLCBRMSA9IHJheUVuZCAqIGsxO1xcbiB2ZWMyIFAwID0gKEgwLnh5ICogazAgKiAwLjUgKyAwLjUpICogdmlld3BvcnRTaXplO1xcbiB2ZWMyIFAxID0gKEgxLnh5ICogazEgKiAwLjUgKyAwLjUpICogdmlld3BvcnRTaXplO1xcbiBQMSArPSBkb3QoUDEgLSBQMCwgUDEgLSBQMCkgPCAwLjAwMDEgPyAwLjAxIDogMC4wO1xcbiB2ZWMyIGRlbHRhID0gUDEgLSBQMDtcXG4gYm9vbCBwZXJtdXRlID0gZmFsc2U7XFxuIGlmIChhYnMoZGVsdGEueCkgPCBhYnMoZGVsdGEueSkpIHtcXG4gcGVybXV0ZSA9IHRydWU7XFxuIGRlbHRhID0gZGVsdGEueXg7XFxuIFAwID0gUDAueXg7XFxuIFAxID0gUDEueXg7XFxuIH1cXG4gZmxvYXQgc3RlcERpciA9IHNpZ24oZGVsdGEueCk7XFxuIGZsb2F0IGludmR4ID0gc3RlcERpciAvIGRlbHRhLng7XFxuIHZlYzMgZFEgPSAoUTEgLSBRMCkgKiBpbnZkeDtcXG4gZmxvYXQgZGsgPSAoazEgLSBrMCkgKiBpbnZkeDtcXG4gdmVjMiBkUCA9IHZlYzIoc3RlcERpciwgZGVsdGEueSAqIGludmR4KTtcXG4gZmxvYXQgc3RyaWRlU2NhbGVyID0gMS4wIC0gbWluKDEuMCwgLXJheU9yaWdpbi56IC8gcGl4ZWxTdHJpZGVaQ3V0b2ZmKTtcXG4gZmxvYXQgcGl4U3RyaWRlID0gMS4wICsgc3RyaWRlU2NhbGVyICogcGl4ZWxTdHJpZGU7XFxuIGRQICo9IHBpeFN0cmlkZTsgZFEgKj0gcGl4U3RyaWRlOyBkayAqPSBwaXhTdHJpZGU7XFxuIHZlYzQgcHFrID0gdmVjNChQMCwgUTAueiwgazApO1xcbiB2ZWM0IGRQUUsgPSB2ZWM0KGRQLCBkUS56LCBkayk7XFxuIHBxayArPSBkUFFLICogaml0dGVyO1xcbiBmbG9hdCByYXlaRmFyID0gKGRQUUsueiAqIDAuNSArIHBxay56KSAvIChkUFFLLncgKiAwLjUgKyBwcWsudyk7XFxuIGZsb2F0IHJheVpOZWFyO1xcbiBib29sIGludGVyc2VjdCA9IGZhbHNlO1xcbiB2ZWMyIHRleGVsU2l6ZSA9IDEuMCAvIHZpZXdwb3J0U2l6ZTtcXG4gaXRlcmF0aW9uQ291bnQgPSAwLjA7XFxuIGZvciAoaW50IGkgPSAwOyBpIDwgTUFYX0lURVJBVElPTjsgaSsrKVxcbiB7XFxuIHBxayArPSBkUFFLO1xcbiByYXlaTmVhciA9IHJheVpGYXI7XFxuIHJheVpGYXIgPSAoZFBRSy56ICogMC41ICsgcHFrLnopIC8gKGRQUUsudyAqIDAuNSArIHBxay53KTtcXG4gaGl0UGl4ZWwgPSBwZXJtdXRlID8gcHFrLnl4IDogcHFrLnh5O1xcbiBoaXRQaXhlbCAqPSB0ZXhlbFNpemU7XFxuIGludGVyc2VjdCA9IHJheUludGVyc2VjdERlcHRoKHJheVpOZWFyLCByYXlaRmFyLCBoaXRQaXhlbCk7XFxuIGl0ZXJhdGlvbkNvdW50ICs9IDEuMDtcXG4gaWYgKGludGVyc2VjdCkge1xcbiBicmVhaztcXG4gfVxcbiB9XFxuIGlmIChwaXhTdHJpZGUgPiAxLjAgJiYgaW50ZXJzZWN0ICYmIGl0ZXJhdGlvbkNvdW50ID4gMS4wKVxcbiB7XFxuIHBxayAtPSBkUFFLO1xcbiBkUFFLIC89IHBpeFN0cmlkZTtcXG4gZmxvYXQgb3JpZ2luYWxTdHJpZGUgPSBwaXhTdHJpZGUgKiAwLjU7XFxuIGZsb2F0IHN0cmlkZSA9IG9yaWdpbmFsU3RyaWRlO1xcbiByYXlaTmVhciA9IHBxay56IC8gcHFrLnc7XFxuIHJheVpGYXIgPSByYXlaTmVhcjtcXG4gZm9yIChpbnQgaiA9IDA7IGogPCBNQVhfQklOQVJZX1NFQVJDSF9JVEVSQVRJT047IGorKylcXG4ge1xcbiBwcWsgKz0gZFBRSyAqIHN0cmlkZTtcXG4gcmF5Wk5lYXIgPSByYXlaRmFyO1xcbiByYXlaRmFyID0gKGRQUUsueiAqIC0wLjUgKyBwcWsueikgLyAoZFBRSy53ICogLTAuNSArIHBxay53KTtcXG4gaGl0UGl4ZWwgPSBwZXJtdXRlID8gcHFrLnl4IDogcHFrLnh5O1xcbiBoaXRQaXhlbCAqPSB0ZXhlbFNpemU7XFxuIG9yaWdpbmFsU3RyaWRlICo9IDAuNTtcXG4gc3RyaWRlID0gcmF5SW50ZXJzZWN0RGVwdGgocmF5Wk5lYXIsIHJheVpGYXIsIGhpdFBpeGVsKSA/IC1vcmlnaW5hbFN0cmlkZSA6IG9yaWdpbmFsU3RyaWRlO1xcbiB9XFxuIH1cXG4gUTAueHkgKz0gZFEueHkgKiBpdGVyYXRpb25Db3VudDtcXG4gUTAueiA9IHBxay56O1xcbiBoaXRQb2ludCA9IFEwIC8gcHFrLnc7XFxuIHJldHVybiBpbnRlcnNlY3Q7XFxufVxcbmZsb2F0IGNhbGN1bGF0ZUFscGhhKFxcbiBmbG9hdCBpdGVyYXRpb25Db3VudCwgZmxvYXQgcmVmbGVjdGl2aXR5LFxcbiB2ZWMyIGhpdFBpeGVsLCB2ZWMzIGhpdFBvaW50LCBmbG9hdCBkaXN0LCB2ZWMzIHJheURpclxcbilcXG57XFxuIGZsb2F0IGFscGhhID0gY2xhbXAocmVmbGVjdGl2aXR5LCAwLjAsIDEuMCk7XFxuIGFscGhhICo9IDEuMCAtIChpdGVyYXRpb25Db3VudCAvIGZsb2F0KE1BWF9JVEVSQVRJT04pKTtcXG4gdmVjMiBoaXRQaXhlbE5EQyA9IGhpdFBpeGVsICogMi4wIC0gMS4wO1xcbiBmbG9hdCBtYXhEaW1lbnNpb24gPSBtaW4oMS4wLCBtYXgoYWJzKGhpdFBpeGVsTkRDLngpLCBhYnMoaGl0UGl4ZWxOREMueSkpKTtcXG4gYWxwaGEgKj0gMS4wIC0gbWF4KDAuMCwgbWF4RGltZW5zaW9uIC0gc2NyZWVuRWRnZUZhZGVTdGFydCkgLyAoMS4wIC0gc2NyZWVuRWRnZUZhZGVTdGFydCk7XFxuIGZsb2F0IF9leWVGYWRlU3RhcnQgPSBleWVGYWRlU3RhcnQ7XFxuIGZsb2F0IF9leWVGYWRlRW5kID0gZXllRmFkZUVuZDtcXG4gaWYgKF9leWVGYWRlU3RhcnQgPiBfZXllRmFkZUVuZCkge1xcbiBmbG9hdCB0bXAgPSBfZXllRmFkZUVuZDtcXG4gX2V5ZUZhZGVFbmQgPSBfZXllRmFkZVN0YXJ0O1xcbiBfZXllRmFkZVN0YXJ0ID0gdG1wO1xcbiB9XFxuIGZsb2F0IGV5ZURpciA9IGNsYW1wKHJheURpci56LCBfZXllRmFkZVN0YXJ0LCBfZXllRmFkZUVuZCk7XFxuIGFscGhhICo9IDEuMCAtIChleWVEaXIgLSBfZXllRmFkZVN0YXJ0KSAvIChfZXllRmFkZUVuZCAtIF9leWVGYWRlU3RhcnQpO1xcbiBhbHBoYSAqPSAxLjAgLSBjbGFtcChkaXN0IC8gbWF4UmF5RGlzdGFuY2UsIDAuMCwgMS4wKTtcXG4gcmV0dXJuIGFscGhhO1xcbn1cXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgbm9ybWFsQW5kR2xvc3MgPSB0ZXh0dXJlMkQoZ0J1ZmZlclRleHR1cmUxLCB2X1RleGNvb3JkKTtcXG4gaWYgKGRvdChub3JtYWxBbmRHbG9zcy5yZ2IsIHZlYzMoMS4wKSkgPT0gMC4wKSB7XFxuIGRpc2NhcmQ7XFxuIH1cXG4gZmxvYXQgZyA9IG5vcm1hbEFuZEdsb3NzLmE7XFxuIGlmIChnIDw9IG1pbkdsb3NzaW5lc3MpIHtcXG4gZGlzY2FyZDtcXG4gfVxcbiBmbG9hdCByZWZsZWN0aXZpdHkgPSAoZyAtIG1pbkdsb3NzaW5lc3MpIC8gKDEuMCAtIG1pbkdsb3NzaW5lc3MpO1xcbiB2ZWMzIE4gPSBub3JtYWxBbmRHbG9zcy5yZ2IgKiAyLjAgLSAxLjA7XFxuIE4gPSBub3JtYWxpemUoKHRvVmlld1NwYWNlICogdmVjNChOLCAwLjApKS54eXopO1xcbiB2ZWM0IHByb2plY3RlZFBvcyA9IHZlYzQodl9UZXhjb29yZCAqIDIuMCAtIDEuMCwgZmV0Y2hEZXB0aChnQnVmZmVyVGV4dHVyZTIsIHZfVGV4Y29vcmQpLCAxLjApO1xcbiB2ZWM0IHBvcyA9IHByb2plY3Rpb25JbnYgKiBwcm9qZWN0ZWRQb3M7XFxuIHZlYzMgcmF5T3JpZ2luID0gcG9zLnh5eiAvIHBvcy53O1xcbiB2ZWMzIHJheURpciA9IG5vcm1hbGl6ZShyZWZsZWN0KG5vcm1hbGl6ZShyYXlPcmlnaW4pLCBOKSk7XFxuIHZlYzIgaGl0UGl4ZWw7XFxuIHZlYzMgaGl0UG9pbnQ7XFxuIGZsb2F0IGl0ZXJhdGlvbkNvdW50O1xcbiB2ZWMyIHV2MiA9IHZfVGV4Y29vcmQgKiB2aWV3cG9ydFNpemU7XFxuIGZsb2F0IGppdHRlciA9IGZyYWN0KCh1djIueCArIHV2Mi55KSAqIDAuMjUgKyBqaXR0ZXJPZmZzZXQpO1xcbiBib29sIGludGVyc2VjdCA9IHRyYWNlU2NyZWVuU3BhY2VSYXkocmF5T3JpZ2luLCByYXlEaXIsIGppdHRlciwgaGl0UGl4ZWwsIGhpdFBvaW50LCBpdGVyYXRpb25Db3VudCk7XFxuIGZsb2F0IGRpc3QgPSBkaXN0YW5jZShyYXlPcmlnaW4sIGhpdFBvaW50KTtcXG4gZmxvYXQgYWxwaGEgPSBjYWxjdWxhdGVBbHBoYShpdGVyYXRpb25Db3VudCwgcmVmbGVjdGl2aXR5LCBoaXRQaXhlbCwgaGl0UG9pbnQsIGRpc3QsIHJheURpcikgKiBmbG9hdChpbnRlcnNlY3QpO1xcbiB2ZWMzIGhpdE5vcm1hbCA9IHRleHR1cmUyRChnQnVmZmVyVGV4dHVyZTEsIGhpdFBpeGVsKS5yZ2IgKiAyLjAgLSAxLjA7XFxuIGhpdE5vcm1hbCA9IG5vcm1hbGl6ZSgodG9WaWV3U3BhY2UgKiB2ZWM0KGhpdE5vcm1hbCwgMC4wKSkueHl6KTtcXG4gaWYgKGRvdChoaXROb3JtYWwsIHJheURpcikgPj0gMC4wKSB7XFxuIGRpc2NhcmQ7XFxuIH1cXG4gaWYgKCFpbnRlcnNlY3QpIHtcXG4gZGlzY2FyZDtcXG4gfVxcbiB2ZWM0IGNvbG9yID0gZGVjb2RlSERSKHRleHR1cmUyRChzb3VyY2VUZXh0dXJlLCBoaXRQaXhlbCkpO1xcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIodmVjNChjb2xvci5yZ2IgKiBhbHBoYSwgY29sb3IuYSkpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjYXIuc3NyLmJsdXJcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGdCdWZmZXJUZXh0dXJlMTtcXG51bmlmb3JtIHNhbXBsZXIyRCBnQnVmZmVyVGV4dHVyZTI7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb247XFxudW5pZm9ybSBmbG9hdCBkZXB0aFJhbmdlIDogMC4wNTtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG51bmlmb3JtIHZlYzIgdGV4dHVyZVNpemU7XFxudW5pZm9ybSBmbG9hdCBibHVyU2l6ZSA6IDEuMDtcXG4jaWZkZWYgQkxFTkRcXG4gI2lmZGVmIFNTQU9URVhfRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIHNzYW9UZXg7XFxuICNlbmRpZlxcbnVuaWZvcm0gc2FtcGxlcjJEIHNvdXJjZVRleHR1cmU7XFxuI2VuZGlmXFxuZmxvYXQgZ2V0TGluZWFyRGVwdGgodmVjMiBjb29yZClcXG57XFxuIGZsb2F0IGRlcHRoID0gdGV4dHVyZTJEKGdCdWZmZXJUZXh0dXJlMiwgY29vcmQpLnIgKiAyLjAgLSAxLjA7XFxuIHJldHVybiBwcm9qZWN0aW9uWzNdWzJdIC8gKGRlcHRoICogcHJvamVjdGlvblsyXVszXSAtIHByb2plY3Rpb25bMl1bMl0pO1xcbn1cXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxudm9pZCBtYWluKClcXG57XFxuIEBpbXBvcnQgY2xheS5jb21wb3NpdG9yLmtlcm5lbC5nYXVzc2lhbl85XFxuIHZlYzQgY2VudGVyTlRleGVsID0gdGV4dHVyZTJEKGdCdWZmZXJUZXh0dXJlMSwgdl9UZXhjb29yZCk7XFxuIGZsb2F0IGcgPSBjZW50ZXJOVGV4ZWwuYTtcXG4gZmxvYXQgbWF4Qmx1clNpemUgPSBjbGFtcCgxLjAgLSBnLCAwLjAsIDEuMCkgKiBibHVyU2l6ZTtcXG4jaWZkZWYgVkVSVElDQUxcXG4gdmVjMiBvZmYgPSB2ZWMyKDAuMCwgbWF4Qmx1clNpemUgLyB0ZXh0dXJlU2l6ZS55KTtcXG4jZWxzZVxcbiB2ZWMyIG9mZiA9IHZlYzIobWF4Qmx1clNpemUgLyB0ZXh0dXJlU2l6ZS54LCAwLjApO1xcbiNlbmRpZlxcbiB2ZWMyIGNvb3JkID0gdl9UZXhjb29yZDtcXG4gdmVjNCBzdW0gPSB2ZWM0KDAuMCk7XFxuIGZsb2F0IHdlaWdodEFsbCA9IDAuMDtcXG4gdmVjMyBjTiA9IGNlbnRlck5UZXhlbC5yZ2IgKiAyLjAgLSAxLjA7XFxuIGZsb2F0IGNEID0gZ2V0TGluZWFyRGVwdGgodl9UZXhjb29yZCk7XFxuIGZvciAoaW50IGkgPSAwOyBpIDwgOTsgaSsrKSB7XFxuIHZlYzIgY29vcmQgPSBjbGFtcCgoZmxvYXQoaSkgLSA0LjApICogb2ZmICsgdl9UZXhjb29yZCwgdmVjMigwLjApLCB2ZWMyKDEuMCkpO1xcbiBmbG9hdCB3ID0gZ2F1c3NpYW5LZXJuZWxbaV1cXG4gKiBjbGFtcChkb3QoY04sIHRleHR1cmUyRChnQnVmZmVyVGV4dHVyZTEsIGNvb3JkKS5yZ2IgKiAyLjAgLSAxLjApLCAwLjAsIDEuMCk7XFxuIGZsb2F0IGQgPSBnZXRMaW5lYXJEZXB0aChjb29yZCk7XFxuIHcgKj0gKDEuMCAtIHNtb290aHN0ZXAoYWJzKGNEIC0gZCkgLyBkZXB0aFJhbmdlLCAwLjAsIDEuMCkpO1xcbiB3ZWlnaHRBbGwgKz0gdztcXG4gc3VtICs9IGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZSwgY29vcmQpKSAqIHc7XFxuIH1cXG4jaWZkZWYgQkxFTkRcXG4gZmxvYXQgYW9GYWN0b3IgPSAxLjA7XFxuICNpZmRlZiBTU0FPVEVYX0VOQUJMRURcXG4gYW9GYWN0b3IgPSB0ZXh0dXJlMkQoc3Nhb1RleCwgdl9UZXhjb29yZCkucjtcXG4gI2VuZGlmXFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUihcXG4gc3VtIC8gd2VpZ2h0QWxsICogYW9GYWN0b3IgKyBkZWNvZGVIRFIodGV4dHVyZTJEKHNvdXJjZVRleHR1cmUsIHZfVGV4Y29vcmQpKVxcbiApO1xcbiNlbHNlXFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUihzdW0gLyB3ZWlnaHRBbGwpO1xcbiNlbmRpZlxcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wtYWR2YW5jZWQtcmVuZGVyZXIvc3JjL1NTUi5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAyMDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///201\n");

/***/ }),
/* 202 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    component1: [\n        0.014096,-0.022658, 0.055991,0.004413,\n        -0.020612,-0.025574, 0.019188,0.000000,\n        -0.038708,0.006957, 0.000000,0.049223,\n        -0.021449,0.040468, 0.018301,0.099929,\n        0.013015,0.050223, 0.054845,0.114689,\n        0.042178,0.038585, 0.085769,0.097080,\n        0.057972,0.019812, 0.102517,0.068674,\n        0.063647,0.005252, 0.108535,0.046643,\n        0.064754,0.000000, 0.109709,0.038697,\n        0.063647,0.005252, 0.108535,0.046643,\n        0.057972,0.019812, 0.102517,0.068674,\n        0.042178,0.038585, 0.085769,0.097080,\n        0.013015,0.050223, 0.054845,0.114689,\n        -0.021449,0.040468, 0.018301,0.099929,\n        -0.038708,0.006957, 0.000000,0.049223,\n        -0.020612,-0.025574, 0.019188,0.000000,\n        0.014096,-0.022658, 0.055991,0.00441\n    ],\n    component2: [\n        0.000115,0.009116, 0.000000,0.051147,\n        0.005324,0.013416, 0.009311,0.075276,\n        0.013753,0.016519, 0.024376,0.092685,\n        0.024700,0.017215, 0.043940,0.096591,\n        0.036693,0.015064, 0.065375,0.084521,\n        0.047976,0.010684, 0.085539,0.059948,\n        0.057015,0.005570, 0.101695,0.031254,\n        0.062782,0.001529, 0.112002,0.008578,\n        0.064754,0.000000, 0.115526,0.000000,\n        0.062782,0.001529, 0.112002,0.008578,\n        0.057015,0.005570, 0.101695,0.031254,\n        0.047976,0.010684, 0.085539,0.059948,\n        0.036693,0.015064, 0.065375,0.084521,\n        0.024700,0.017215, 0.043940,0.096591,\n        0.013753,0.016519, 0.024376,0.092685,\n        0.005324,0.013416, 0.009311,0.075276,\n        0.000115,0.009116, 0.000000,0.05114\n    ]\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvY2lyY3VsYXJTZXBhcmF0ZUtlcm5lbC5qcz9kYzRmIl0sInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGNvbXBvbmVudDE6IFtcbiAgICAgICAgMC4wMTQwOTYsLTAuMDIyNjU4LCAwLjA1NTk5MSwwLjAwNDQxMyxcbiAgICAgICAgLTAuMDIwNjEyLC0wLjAyNTU3NCwgMC4wMTkxODgsMC4wMDAwMDAsXG4gICAgICAgIC0wLjAzODcwOCwwLjAwNjk1NywgMC4wMDAwMDAsMC4wNDkyMjMsXG4gICAgICAgIC0wLjAyMTQ0OSwwLjA0MDQ2OCwgMC4wMTgzMDEsMC4wOTk5MjksXG4gICAgICAgIDAuMDEzMDE1LDAuMDUwMjIzLCAwLjA1NDg0NSwwLjExNDY4OSxcbiAgICAgICAgMC4wNDIxNzgsMC4wMzg1ODUsIDAuMDg1NzY5LDAuMDk3MDgwLFxuICAgICAgICAwLjA1Nzk3MiwwLjAxOTgxMiwgMC4xMDI1MTcsMC4wNjg2NzQsXG4gICAgICAgIDAuMDYzNjQ3LDAuMDA1MjUyLCAwLjEwODUzNSwwLjA0NjY0MyxcbiAgICAgICAgMC4wNjQ3NTQsMC4wMDAwMDAsIDAuMTA5NzA5LDAuMDM4Njk3LFxuICAgICAgICAwLjA2MzY0NywwLjAwNTI1MiwgMC4xMDg1MzUsMC4wNDY2NDMsXG4gICAgICAgIDAuMDU3OTcyLDAuMDE5ODEyLCAwLjEwMjUxNywwLjA2ODY3NCxcbiAgICAgICAgMC4wNDIxNzgsMC4wMzg1ODUsIDAuMDg1NzY5LDAuMDk3MDgwLFxuICAgICAgICAwLjAxMzAxNSwwLjA1MDIyMywgMC4wNTQ4NDUsMC4xMTQ2ODksXG4gICAgICAgIC0wLjAyMTQ0OSwwLjA0MDQ2OCwgMC4wMTgzMDEsMC4wOTk5MjksXG4gICAgICAgIC0wLjAzODcwOCwwLjAwNjk1NywgMC4wMDAwMDAsMC4wNDkyMjMsXG4gICAgICAgIC0wLjAyMDYxMiwtMC4wMjU1NzQsIDAuMDE5MTg4LDAuMDAwMDAwLFxuICAgICAgICAwLjAxNDA5NiwtMC4wMjI2NTgsIDAuMDU1OTkxLDAuMDA0NDFcbiAgICBdLFxuICAgIGNvbXBvbmVudDI6IFtcbiAgICAgICAgMC4wMDAxMTUsMC4wMDkxMTYsIDAuMDAwMDAwLDAuMDUxMTQ3LFxuICAgICAgICAwLjAwNTMyNCwwLjAxMzQxNiwgMC4wMDkzMTEsMC4wNzUyNzYsXG4gICAgICAgIDAuMDEzNzUzLDAuMDE2NTE5LCAwLjAyNDM3NiwwLjA5MjY4NSxcbiAgICAgICAgMC4wMjQ3MDAsMC4wMTcyMTUsIDAuMDQzOTQwLDAuMDk2NTkxLFxuICAgICAgICAwLjAzNjY5MywwLjAxNTA2NCwgMC4wNjUzNzUsMC4wODQ1MjEsXG4gICAgICAgIDAuMDQ3OTc2LDAuMDEwNjg0LCAwLjA4NTUzOSwwLjA1OTk0OCxcbiAgICAgICAgMC4wNTcwMTUsMC4wMDU1NzAsIDAuMTAxNjk1LDAuMDMxMjU0LFxuICAgICAgICAwLjA2Mjc4MiwwLjAwMTUyOSwgMC4xMTIwMDIsMC4wMDg1NzgsXG4gICAgICAgIDAuMDY0NzU0LDAuMDAwMDAwLCAwLjExNTUyNiwwLjAwMDAwMCxcbiAgICAgICAgMC4wNjI3ODIsMC4wMDE1MjksIDAuMTEyMDAyLDAuMDA4NTc4LFxuICAgICAgICAwLjA1NzAxNSwwLjAwNTU3MCwgMC4xMDE2OTUsMC4wMzEyNTQsXG4gICAgICAgIDAuMDQ3OTc2LDAuMDEwNjg0LCAwLjA4NTUzOSwwLjA1OTk0OCxcbiAgICAgICAgMC4wMzY2OTMsMC4wMTUwNjQsIDAuMDY1Mzc1LDAuMDg0NTIxLFxuICAgICAgICAwLjAyNDcwMCwwLjAxNzIxNSwgMC4wNDM5NDAsMC4wOTY1OTEsXG4gICAgICAgIDAuMDEzNzUzLDAuMDE2NTE5LCAwLjAyNDM3NiwwLjA5MjY4NSxcbiAgICAgICAgMC4wMDUzMjQsMC4wMTM0MTYsIDAuMDA5MzExLDAuMDc1Mjc2LFxuICAgICAgICAwLjAwMDExNSwwLjAwOTExNiwgMC4wMDAwMDAsMC4wNTExNFxuICAgIF1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsLWFkdmFuY2VkLXJlbmRlcmVyL3NyYy9jaXJjdWxhclNlcGFyYXRlS2VybmVsLmpzXG4vLyBtb2R1bGUgaWQgPSAyMDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///202\n");

/***/ }),
/* 203 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("var DOF_BLUR_OUTPUTS = {\n    'color': {\n        'parameters': {\n            'width': 'expr(width / 2.0 * 1.0)',\n            'height': 'expr(height / 2.0 * 1.0)',\n            'type': 'HALF_FLOAT'\n        }\n    }\n};\n\nvar DOF_BLUR_PARAMETERS = {\n    'textureSize': 'expr( [width / 2.0 * 1.0, height / 2.0 * 1.0] )'\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    'type' : 'compositor',\n    'nodes' : [\n        {\n            'name': 'source',\n            'type': 'texture',\n            'outputs': {\n                'color': {}\n            }\n        },\n        {\n            'name': 'source_half',\n            'shader': '#source(clay.compositor.downsample)',\n            'inputs': {\n                'texture': 'source'\n            },\n            'outputs': {\n                'color': {\n                    'parameters': {\n                        'width': 'expr(width * 1.0 / 2)',\n                        'height': 'expr(height * 1.0 / 2)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'textureSize': 'expr( [width * 1.0, height * 1.0] )'\n            }\n        },\n\n\n        {\n            'name' : 'bright',\n            'shader' : '#source(clay.compositor.bright)',\n            'inputs' : {\n                'texture' : 'source_half'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 2)',\n                        'height' : 'expr(height * 1.0 / 2)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'threshold' : 2,\n                'scale': 4,\n                'textureSize': 'expr([width * 1.0 / 2, height / 2])'\n            }\n        },\n\n        {\n            'name': 'bright_downsample_4',\n            'shader' : '#source(clay.compositor.downsample)',\n            'inputs' : {\n                'texture' : 'bright'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 4)',\n                        'height' : 'expr(height * 1.0 / 4)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'textureSize': 'expr( [width * 1.0 / 2, height / 2] )'\n            }\n        },\n        {\n            'name': 'bright_downsample_8',\n            'shader' : '#source(clay.compositor.downsample)',\n            'inputs' : {\n                'texture' : 'bright_downsample_4'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 8)',\n                        'height' : 'expr(height * 1.0 / 8)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'textureSize': 'expr( [width * 1.0 / 4, height / 4] )'\n            }\n        },\n        {\n            'name': 'bright_downsample_16',\n            'shader' : '#source(clay.compositor.downsample)',\n            'inputs' : {\n                'texture' : 'bright_downsample_8'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 16)',\n                        'height' : 'expr(height * 1.0 / 16)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'textureSize': 'expr( [width * 1.0 / 8, height / 8] )'\n            }\n        },\n        {\n            'name': 'bright_downsample_32',\n            'shader' : '#source(clay.compositor.downsample)',\n            'inputs' : {\n                'texture' : 'bright_downsample_16'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 32)',\n                        'height' : 'expr(height * 1.0 / 32)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'textureSize': 'expr( [width * 1.0 / 16, height / 16] )'\n            }\n        },\n\n\n        {\n            'name' : 'bright_upsample_16_blur_h',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_downsample_32'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 16)',\n                        'height' : 'expr(height * 1.0 / 16)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 0.0,\n                'textureSize': 'expr( [width * 1.0 / 32, height / 32] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_16_blur_v',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_upsample_16_blur_h'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 16)',\n                        'height' : 'expr(height * 1.0 / 16)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 1.0,\n                'textureSize': 'expr( [width * 1.0 / 32, height * 1.0 / 32] )'\n            }\n        },\n\n\n\n        {\n            'name' : 'bright_upsample_8_blur_h',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_downsample_16'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 8)',\n                        'height' : 'expr(height * 1.0 / 8)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 0.0,\n                'textureSize': 'expr( [width * 1.0 / 16, height * 1.0 / 16] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_8_blur_v',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_upsample_8_blur_h'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 8)',\n                        'height' : 'expr(height * 1.0 / 8)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 1.0,\n                'textureSize': 'expr( [width * 1.0 / 16, height * 1.0 / 16] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_8_blend',\n            'shader' : '#source(clay.compositor.blend)',\n            'inputs' : {\n                'texture1' : 'bright_upsample_8_blur_v',\n                'texture2' : 'bright_upsample_16_blur_v'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 8)',\n                        'height' : 'expr(height * 1.0 / 8)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'weight1' : 0.3,\n                'weight2' : 0.7\n            }\n        },\n\n\n        {\n            'name' : 'bright_upsample_4_blur_h',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_downsample_8'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 4)',\n                        'height' : 'expr(height * 1.0 / 4)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 0.0,\n                'textureSize': 'expr( [width * 1.0 / 8, height * 1.0 / 8] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_4_blur_v',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_upsample_4_blur_h'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 4)',\n                        'height' : 'expr(height * 1.0 / 4)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 1.0,\n                'textureSize': 'expr( [width * 1.0 / 8, height * 1.0 / 8] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_4_blend',\n            'shader' : '#source(clay.compositor.blend)',\n            'inputs' : {\n                'texture1' : 'bright_upsample_4_blur_v',\n                'texture2' : 'bright_upsample_8_blend'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 4)',\n                        'height' : 'expr(height * 1.0 / 4)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'weight1' : 0.3,\n                'weight2' : 0.7\n            }\n        },\n\n\n\n\n\n        {\n            'name' : 'bright_upsample_2_blur_h',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_downsample_4'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 2)',\n                        'height' : 'expr(height * 1.0 / 2)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 0.0,\n                'textureSize': 'expr( [width * 1.0 / 4, height * 1.0 / 4] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_2_blur_v',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_upsample_2_blur_h'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 2)',\n                        'height' : 'expr(height * 1.0 / 2)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 1.0,\n                'textureSize': 'expr( [width * 1.0 / 4, height * 1.0 / 4] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_2_blend',\n            'shader' : '#source(clay.compositor.blend)',\n            'inputs' : {\n                'texture1' : 'bright_upsample_2_blur_v',\n                'texture2' : 'bright_upsample_4_blend'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 2)',\n                        'height' : 'expr(height * 1.0 / 2)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'weight1' : 0.3,\n                'weight2' : 0.7\n            }\n        },\n\n\n\n        {\n            'name' : 'bright_upsample_full_blur_h',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0)',\n                        'height' : 'expr(height * 1.0)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 0.0,\n                'textureSize': 'expr( [width * 1.0 / 2, height * 1.0 / 2] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_full_blur_v',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_upsample_full_blur_h'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0)',\n                        'height' : 'expr(height * 1.0)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 1.0,\n                'textureSize': 'expr( [width * 1.0 / 2, height * 1.0 / 2] )'\n            }\n        },\n        {\n            'name' : 'bloom_composite',\n            'shader' : '#source(clay.compositor.blend)',\n            'inputs' : {\n                'texture1' : 'bright_upsample_full_blur_v',\n                'texture2' : 'bright_upsample_2_blend'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0)',\n                        'height' : 'expr(height * 1.0)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'weight1' : 0.3,\n                'weight2' : 0.7\n            }\n        },\n\n\n        {\n            'name': 'coc',\n            'shader': '#source(car.dof.coc)',\n            'outputs': {\n                'color': {\n                    'parameters': {\n                        'width': 'expr(width * 1.0)',\n                        'height': 'expr(height * 1.0)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            }\n        },\n\n        {\n            'name': 'coc_dilate_1',\n            'shader': '#source(car.dof.dilateCoc)',\n            'inputs': {\n                'cocTex': 'coc'\n            },\n            'outputs': {\n                'color': {\n                    'parameters': {\n                        'width': 'expr(width * 1.0)',\n                        'height': 'expr(height * 1.0)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters': {\n                'textureSize': 'expr( [width / 1.0 * 1.0, height / 1.0 * 1.0] )'\n            }\n        },\n\n        {\n            'name': 'coc_dilate_2',\n            'shader': '#source(car.dof.dilateCoc)',\n            'inputs': {\n                'cocTex': 'coc_dilate_1'\n            },\n            'outputs': {\n                'color': {\n                    'parameters': {\n                        'width': 'expr(width * 1.0)',\n                        'height': 'expr(height * 1.0)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters': {\n                'textureSize': 'expr( [width / 1.0 * 1.0, height / 1.0 * 1.0] )'\n            },\n            'defines': {\n                'VERTICAL': null\n            }\n        },\n\n        {\n            'name': 'dof_separate_far',\n            'shader': '#source(car.dof.separate)',\n            'inputs': {\n                'mainTex': 'source',\n                'cocTex': 'coc'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'defines': {\n                'FARFIELD': null\n            }\n        },\n\n        {\n            'name': 'dof_separate_near',\n            'shader': '#source(car.dof.separate)',\n            'inputs': {\n                'mainTex': 'source',\n                'cocTex': 'coc'\n            },\n            'outputs': DOF_BLUR_OUTPUTS\n        },\n\n        {\n            'name': 'dof_blur_far_1',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_far',\n                'cocTex': 'coc'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'R_PASS': null,\n                'FARFIELD': null\n            }\n        },\n\n        {\n            'name': 'dof_blur_far_2',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_far',\n                'cocTex': 'coc'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'G_PASS': null,\n                'FARFIELD': null\n            }\n        },\n\n\n        {\n            'name': 'dof_blur_far_3',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_far',\n                'cocTex': 'coc'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'B_PASS': null,\n                'FARFIELD': null\n            }\n        },\n\n\n        {\n            'name': 'dof_blur_far_4',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_far',\n                'cocTex': 'coc'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'A_PASS': null,\n                'FARFIELD': null\n            }\n        },\n\n        {\n            'name': 'dof_blur_far_final',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'rTex': 'dof_blur_far_1',\n                'gTex': 'dof_blur_far_2',\n                'bTex': 'dof_blur_far_3',\n                'aTex': 'dof_blur_far_4',\n                'cocTex': 'coc'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'FINAL_PASS': null,\n                'FARFIELD': null\n            }\n        },\n\n        {\n            'name': 'dof_blur_near_1',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_near',\n                'cocTex': 'coc',\n                'dilateCocTex': 'coc_dilate_2'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'R_PASS': null\n            }\n        },\n\n        {\n            'name': 'dof_blur_near_2',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_near',\n                'cocTex': 'coc',\n                'dilateCocTex': 'coc_dilate_2'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'G_PASS': null\n            }\n        },\n\n        {\n            'name': 'dof_blur_near_3',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_near',\n                'cocTex': 'coc',\n                'dilateCocTex': 'coc_dilate_2'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'B_PASS': null\n            }\n        },\n\n        {\n            'name': 'dof_blur_near_4',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_near',\n                'cocTex': 'coc',\n                'dilateCocTex': 'coc_dilate_2'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'A_PASS': null\n            }\n        },\n\n        {\n            'name': 'dof_blur_near_final',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'rTex': 'dof_blur_near_1',\n                'gTex': 'dof_blur_near_2',\n                'bTex': 'dof_blur_near_3',\n                'aTex': 'dof_blur_near_4',\n                'cocTex': 'coc',\n                'dilateCocTex': 'coc_dilate_2'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'FINAL_PASS': null\n            }\n        },\n\n        // {\n        //     'name': 'dof_blur_near_alpha_h',\n        //     'shader': '#source(car.dof.blurNearAlpha)',\n        //     'inputs': {\n        //         'mainTex': 'dof_blur_near_final',\n        //         'cocTex': 'coc_dilate_2'\n        //     },\n        //     'outputs': DOF_BLUR_OUTPUTS,\n        //     'parameters': {\n        //         'textureSize': 'expr( [width / 2.0 * 1.0, height / 2.0 * 1.0] )',\n        //         'blurDir': 0\n        //     }\n        // },\n\n\n        // {\n        //     'name': 'dof_blur_near_alpha_v',\n        //     'shader': '#source(car.dof.blurNearAlpha)',\n        //     'inputs': {\n        //         'mainTex': 'dof_blur_near_alpha_h',\n        //         'cocTex': 'coc_dilate_2'\n        //     },\n        //     'outputs': DOF_BLUR_OUTPUTS,\n        //     'parameters': {\n        //         'textureSize': 'expr( [width / 2.0 * 1.0, height / 2.0 * 1.0] )',\n        //         'blurDir': 1\n        //     }\n        // },\n\n\n\n        // {\n        //     'name': 'dof_blur_upsample',\n        //     'shader': '#source(car.dof.extraBlur)',\n        //     'inputs': {\n        //         'blur': 'dof_blur',\n        //         'cocTex': 'coc'\n        //     },\n        //     'outputs': {\n        //         'color': {\n        //             'parameters': {\n        //                 'width': 'expr(width * 1.0)',\n        //                 'height': 'expr(height * 1.0)',\n        //                 'type': 'HALF_FLOAT'\n        //             }\n        //         }\n        //     },\n        //     'parameters': {\n        //         'textureSize': 'expr( [width / 2.0 * 1.0, height / 2.0 * 1.0] )'\n        //     }\n        // },\n\n        {\n            'name': 'dof_composite',\n            'shader': '#source(car.dof.composite)',\n            'inputs': {\n                'sharpTex': 'source',\n                'farTex': 'dof_blur_far_final',\n                'nearTex': 'dof_blur_near_final',\n                'cocTex': 'coc'\n            },\n            'outputs': {\n                'color': {\n                    'parameters': {\n                        'width': 'expr(width * 1.0)',\n                        'height': 'expr(height * 1.0)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'defines': {\n                // DEBUG: 4\n            }\n        },\n        {\n            'name' : 'composite',\n            'shader' : '#source(clay.compositor.hdr.composite)',\n            'inputs' : {\n                'texture': 'source',\n                'bloom' : 'bloom_composite'\n            },\n            'defines': {\n                // Images are all premultiplied alpha before composite because of blending.\n                // 'PREMULTIPLY_ALPHA': null,\n                // 'DEBUG': 1\n            }\n        },\n        {\n            'name' : 'FXAA',\n            'shader' : '#source(clay.compositor.fxaa)',\n            'inputs' : {\n                'texture' : 'composite'\n            }\n        }\n    ]\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvY29tcG9zaXRlLmpzPzBlZjgiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIERPRl9CTFVSX09VVFBVVFMgPSB7XG4gICAgJ2NvbG9yJzoge1xuICAgICAgICAncGFyYW1ldGVycyc6IHtcbiAgICAgICAgICAgICd3aWR0aCc6ICdleHByKHdpZHRoIC8gMi4wICogMS4wKScsXG4gICAgICAgICAgICAnaGVpZ2h0JzogJ2V4cHIoaGVpZ2h0IC8gMi4wICogMS4wKScsXG4gICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICB9XG4gICAgfVxufTtcblxudmFyIERPRl9CTFVSX1BBUkFNRVRFUlMgPSB7XG4gICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAvIDIuMCAqIDEuMCwgaGVpZ2h0IC8gMi4wICogMS4wXSApJ1xufTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgICd0eXBlJyA6ICdjb21wb3NpdG9yJyxcbiAgICAnbm9kZXMnIDogW1xuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdzb3VyY2UnLFxuICAgICAgICAgICAgJ3R5cGUnOiAndGV4dHVyZScsXG4gICAgICAgICAgICAnb3V0cHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InOiB7fVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdzb3VyY2VfaGFsZicsXG4gICAgICAgICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2xheS5jb21wb3NpdG9yLmRvd25zYW1wbGUpJyxcbiAgICAgICAgICAgICdpbnB1dHMnOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnOiAnc291cmNlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJzoge1xuICAgICAgICAgICAgICAgICdjb2xvcic6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiAnZXhwcih3aWR0aCAqIDEuMCAvIDIpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnZXhwcihoZWlnaHQgKiAxLjAgLyAyKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAndGV4dHVyZVNpemUnOiAnZXhwciggW3dpZHRoICogMS4wLCBoZWlnaHQgKiAxLjBdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZScgOiAnYnJpZ2h0JyxcbiAgICAgICAgICAgICdzaGFkZXInIDogJyNzb3VyY2UoY2xheS5jb21wb3NpdG9yLmJyaWdodCknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ3NvdXJjZV9oYWxmJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InIDoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnIDogJ2V4cHIod2lkdGggKiAxLjAgLyAyKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6ICdleHByKGhlaWdodCAqIDEuMCAvIDIpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICd0aHJlc2hvbGQnIDogMixcbiAgICAgICAgICAgICAgICAnc2NhbGUnOiA0LFxuICAgICAgICAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKFt3aWR0aCAqIDEuMCAvIDIsIGhlaWdodCAvIDJdKSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdicmlnaHRfZG93bnNhbXBsZV80JyxcbiAgICAgICAgICAgICdzaGFkZXInIDogJyNzb3VyY2UoY2xheS5jb21wb3NpdG9yLmRvd25zYW1wbGUpJyxcbiAgICAgICAgICAgICdpbnB1dHMnIDoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlJyA6ICdicmlnaHQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnIDoge1xuICAgICAgICAgICAgICAgICdjb2xvcicgOiB7XG4gICAgICAgICAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCcgOiAnZXhwcih3aWR0aCAqIDEuMCAvIDQpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogJ2V4cHIoaGVpZ2h0ICogMS4wIC8gNCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnSEFMRl9GTE9BVCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAqIDEuMCAvIDIsIGhlaWdodCAvIDJdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJzogJ2JyaWdodF9kb3duc2FtcGxlXzgnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZG93bnNhbXBsZSknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2JyaWdodF9kb3duc2FtcGxlXzQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnIDoge1xuICAgICAgICAgICAgICAgICdjb2xvcicgOiB7XG4gICAgICAgICAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCcgOiAnZXhwcih3aWR0aCAqIDEuMCAvIDgpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogJ2V4cHIoaGVpZ2h0ICogMS4wIC8gOCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnSEFMRl9GTE9BVCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAqIDEuMCAvIDQsIGhlaWdodCAvIDRdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJzogJ2JyaWdodF9kb3duc2FtcGxlXzE2JyxcbiAgICAgICAgICAgICdzaGFkZXInIDogJyNzb3VyY2UoY2xheS5jb21wb3NpdG9yLmRvd25zYW1wbGUpJyxcbiAgICAgICAgICAgICdpbnB1dHMnIDoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlJyA6ICdicmlnaHRfZG93bnNhbXBsZV84J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InIDoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnIDogJ2V4cHIod2lkdGggKiAxLjAgLyAxNiknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCcgOiAnZXhwcihoZWlnaHQgKiAxLjAgLyAxNiknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnSEFMRl9GTE9BVCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAqIDEuMCAvIDgsIGhlaWdodCAvIDhdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJzogJ2JyaWdodF9kb3duc2FtcGxlXzMyJyxcbiAgICAgICAgICAgICdzaGFkZXInIDogJyNzb3VyY2UoY2xheS5jb21wb3NpdG9yLmRvd25zYW1wbGUpJyxcbiAgICAgICAgICAgICdpbnB1dHMnIDoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlJyA6ICdicmlnaHRfZG93bnNhbXBsZV8xNidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wIC8gMzIpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogJ2V4cHIoaGVpZ2h0ICogMS4wIC8gMzIpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggKiAxLjAgLyAxNiwgaGVpZ2h0IC8gMTZdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzE2X2JsdXJfaCcsXG4gICAgICAgICAgICAnc2hhZGVyJyA6ICcjc291cmNlKGNsYXkuY29tcG9zaXRvci5nYXVzc2lhbl9ibHVyKScsXG4gICAgICAgICAgICAnaW5wdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAndGV4dHVyZScgOiAnYnJpZ2h0X2Rvd25zYW1wbGVfMzInXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnIDoge1xuICAgICAgICAgICAgICAgICdjb2xvcicgOiB7XG4gICAgICAgICAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCcgOiAnZXhwcih3aWR0aCAqIDEuMCAvIDE2KScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6ICdleHByKGhlaWdodCAqIDEuMCAvIDE2KScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAnYmx1clNpemUnIDogMSxcbiAgICAgICAgICAgICAgICAnYmx1ckRpcic6IDAuMCxcbiAgICAgICAgICAgICAgICAndGV4dHVyZVNpemUnOiAnZXhwciggW3dpZHRoICogMS4wIC8gMzIsIGhlaWdodCAvIDMyXSApJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzE2X2JsdXJfdicsXG4gICAgICAgICAgICAnc2hhZGVyJyA6ICcjc291cmNlKGNsYXkuY29tcG9zaXRvci5nYXVzc2lhbl9ibHVyKScsXG4gICAgICAgICAgICAnaW5wdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAndGV4dHVyZScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzE2X2JsdXJfaCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wIC8gMTYpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogJ2V4cHIoaGVpZ2h0ICogMS4wIC8gMTYpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICdibHVyU2l6ZScgOiAxLFxuICAgICAgICAgICAgICAgICdibHVyRGlyJzogMS4wLFxuICAgICAgICAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggKiAxLjAgLyAzMiwgaGVpZ2h0ICogMS4wIC8gMzJdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cblxuXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdicmlnaHRfdXBzYW1wbGVfOF9ibHVyX2gnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZ2F1c3NpYW5fYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2JyaWdodF9kb3duc2FtcGxlXzE2J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InIDoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnIDogJ2V4cHIod2lkdGggKiAxLjAgLyA4KScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6ICdleHByKGhlaWdodCAqIDEuMCAvIDgpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICdibHVyU2l6ZScgOiAxLFxuICAgICAgICAgICAgICAgICdibHVyRGlyJzogMC4wLFxuICAgICAgICAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggKiAxLjAgLyAxNiwgaGVpZ2h0ICogMS4wIC8gMTZdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdicmlnaHRfdXBzYW1wbGVfOF9ibHVyX3YnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZ2F1c3NpYW5fYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2JyaWdodF91cHNhbXBsZV84X2JsdXJfaCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wIC8gOCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCcgOiAnZXhwcihoZWlnaHQgKiAxLjAgLyA4KScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAnYmx1clNpemUnIDogMSxcbiAgICAgICAgICAgICAgICAnYmx1ckRpcic6IDEuMCxcbiAgICAgICAgICAgICAgICAndGV4dHVyZVNpemUnOiAnZXhwciggW3dpZHRoICogMS4wIC8gMTYsIGhlaWdodCAqIDEuMCAvIDE2XSApJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzhfYmxlbmQnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuYmxlbmQpJyxcbiAgICAgICAgICAgICdpbnB1dHMnIDoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlMScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzhfYmx1cl92JyxcbiAgICAgICAgICAgICAgICAndGV4dHVyZTInIDogJ2JyaWdodF91cHNhbXBsZV8xNl9ibHVyX3YnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnIDoge1xuICAgICAgICAgICAgICAgICdjb2xvcicgOiB7XG4gICAgICAgICAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCcgOiAnZXhwcih3aWR0aCAqIDEuMCAvIDgpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogJ2V4cHIoaGVpZ2h0ICogMS4wIC8gOCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnSEFMRl9GTE9BVCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgJ3dlaWdodDEnIDogMC4zLFxuICAgICAgICAgICAgICAgICd3ZWlnaHQyJyA6IDAuN1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG5cbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnIDogJ2JyaWdodF91cHNhbXBsZV80X2JsdXJfaCcsXG4gICAgICAgICAgICAnc2hhZGVyJyA6ICcjc291cmNlKGNsYXkuY29tcG9zaXRvci5nYXVzc2lhbl9ibHVyKScsXG4gICAgICAgICAgICAnaW5wdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAndGV4dHVyZScgOiAnYnJpZ2h0X2Rvd25zYW1wbGVfOCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wIC8gNCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCcgOiAnZXhwcihoZWlnaHQgKiAxLjAgLyA0KScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAnYmx1clNpemUnIDogMSxcbiAgICAgICAgICAgICAgICAnYmx1ckRpcic6IDAuMCxcbiAgICAgICAgICAgICAgICAndGV4dHVyZVNpemUnOiAnZXhwciggW3dpZHRoICogMS4wIC8gOCwgaGVpZ2h0ICogMS4wIC8gOF0gKSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnIDogJ2JyaWdodF91cHNhbXBsZV80X2JsdXJfdicsXG4gICAgICAgICAgICAnc2hhZGVyJyA6ICcjc291cmNlKGNsYXkuY29tcG9zaXRvci5nYXVzc2lhbl9ibHVyKScsXG4gICAgICAgICAgICAnaW5wdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAndGV4dHVyZScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzRfYmx1cl9oJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InIDoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnIDogJ2V4cHIod2lkdGggKiAxLjAgLyA0KScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6ICdleHByKGhlaWdodCAqIDEuMCAvIDQpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICdibHVyU2l6ZScgOiAxLFxuICAgICAgICAgICAgICAgICdibHVyRGlyJzogMS4wLFxuICAgICAgICAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggKiAxLjAgLyA4LCBoZWlnaHQgKiAxLjAgLyA4XSApJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzRfYmxlbmQnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuYmxlbmQpJyxcbiAgICAgICAgICAgICdpbnB1dHMnIDoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlMScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzRfYmx1cl92JyxcbiAgICAgICAgICAgICAgICAndGV4dHVyZTInIDogJ2JyaWdodF91cHNhbXBsZV84X2JsZW5kJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InIDoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnIDogJ2V4cHIod2lkdGggKiAxLjAgLyA0KScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6ICdleHByKGhlaWdodCAqIDEuMCAvIDQpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICd3ZWlnaHQxJyA6IDAuMyxcbiAgICAgICAgICAgICAgICAnd2VpZ2h0MicgOiAwLjdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuXG5cblxuXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdicmlnaHRfdXBzYW1wbGVfMl9ibHVyX2gnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZ2F1c3NpYW5fYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2JyaWdodF9kb3duc2FtcGxlXzQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnIDoge1xuICAgICAgICAgICAgICAgICdjb2xvcicgOiB7XG4gICAgICAgICAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCcgOiAnZXhwcih3aWR0aCAqIDEuMCAvIDIpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogJ2V4cHIoaGVpZ2h0ICogMS4wIC8gMiknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnSEFMRl9GTE9BVCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgJ2JsdXJTaXplJyA6IDEsXG4gICAgICAgICAgICAgICAgJ2JsdXJEaXInOiAwLjAsXG4gICAgICAgICAgICAgICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAqIDEuMCAvIDQsIGhlaWdodCAqIDEuMCAvIDRdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdicmlnaHRfdXBzYW1wbGVfMl9ibHVyX3YnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZ2F1c3NpYW5fYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2JyaWdodF91cHNhbXBsZV8yX2JsdXJfaCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wIC8gMiknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCcgOiAnZXhwcihoZWlnaHQgKiAxLjAgLyAyKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAnYmx1clNpemUnIDogMSxcbiAgICAgICAgICAgICAgICAnYmx1ckRpcic6IDEuMCxcbiAgICAgICAgICAgICAgICAndGV4dHVyZVNpemUnOiAnZXhwciggW3dpZHRoICogMS4wIC8gNCwgaGVpZ2h0ICogMS4wIC8gNF0gKSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnIDogJ2JyaWdodF91cHNhbXBsZV8yX2JsZW5kJyxcbiAgICAgICAgICAgICdzaGFkZXInIDogJyNzb3VyY2UoY2xheS5jb21wb3NpdG9yLmJsZW5kKScsXG4gICAgICAgICAgICAnaW5wdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAndGV4dHVyZTEnIDogJ2JyaWdodF91cHNhbXBsZV8yX2JsdXJfdicsXG4gICAgICAgICAgICAgICAgJ3RleHR1cmUyJyA6ICdicmlnaHRfdXBzYW1wbGVfNF9ibGVuZCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wIC8gMiknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCcgOiAnZXhwcihoZWlnaHQgKiAxLjAgLyAyKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAnd2VpZ2h0MScgOiAwLjMsXG4gICAgICAgICAgICAgICAgJ3dlaWdodDInIDogMC43XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cblxuXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdicmlnaHRfdXBzYW1wbGVfZnVsbF9ibHVyX2gnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZ2F1c3NpYW5fYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2JyaWdodCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6ICdleHByKGhlaWdodCAqIDEuMCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnSEFMRl9GTE9BVCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgJ2JsdXJTaXplJyA6IDEsXG4gICAgICAgICAgICAgICAgJ2JsdXJEaXInOiAwLjAsXG4gICAgICAgICAgICAgICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAqIDEuMCAvIDIsIGhlaWdodCAqIDEuMCAvIDJdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdicmlnaHRfdXBzYW1wbGVfZnVsbF9ibHVyX3YnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZ2F1c3NpYW5fYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2JyaWdodF91cHNhbXBsZV9mdWxsX2JsdXJfaCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6ICdleHByKGhlaWdodCAqIDEuMCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnSEFMRl9GTE9BVCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgJ2JsdXJTaXplJyA6IDEsXG4gICAgICAgICAgICAgICAgJ2JsdXJEaXInOiAxLjAsXG4gICAgICAgICAgICAgICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAqIDEuMCAvIDIsIGhlaWdodCAqIDEuMCAvIDJdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdibG9vbV9jb21wb3NpdGUnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuYmxlbmQpJyxcbiAgICAgICAgICAgICdpbnB1dHMnIDoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlMScgOiAnYnJpZ2h0X3Vwc2FtcGxlX2Z1bGxfYmx1cl92JyxcbiAgICAgICAgICAgICAgICAndGV4dHVyZTInIDogJ2JyaWdodF91cHNhbXBsZV8yX2JsZW5kJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InIDoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnIDogJ2V4cHIod2lkdGggKiAxLjApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogJ2V4cHIoaGVpZ2h0ICogMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAnd2VpZ2h0MScgOiAwLjMsXG4gICAgICAgICAgICAgICAgJ3dlaWdodDInIDogMC43XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdjb2MnLFxuICAgICAgICAgICAgJ3NoYWRlcic6ICcjc291cmNlKGNhci5kb2YuY29jKScsXG4gICAgICAgICAgICAnb3V0cHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InOiB7XG4gICAgICAgICAgICAgICAgICAgICdwYXJhbWV0ZXJzJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogJ2V4cHIod2lkdGggKiAxLjApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnZXhwcihoZWlnaHQgKiAxLjApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnOiAnY29jX2RpbGF0ZV8xJyxcbiAgICAgICAgICAgICdzaGFkZXInOiAnI3NvdXJjZShjYXIuZG9mLmRpbGF0ZUNvYyknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnY29jVGV4JzogJ2NvYydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InOiB7XG4gICAgICAgICAgICAgICAgICAgICdwYXJhbWV0ZXJzJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogJ2V4cHIod2lkdGggKiAxLjApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnZXhwcihoZWlnaHQgKiAxLjApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAvIDEuMCAqIDEuMCwgaGVpZ2h0IC8gMS4wICogMS4wXSApJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJzogJ2NvY19kaWxhdGVfMicsXG4gICAgICAgICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2FyLmRvZi5kaWxhdGVDb2MpJyxcbiAgICAgICAgICAgICdpbnB1dHMnOiB7XG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2NfZGlsYXRlXzEnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJzoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCc6ICdleHByKHdpZHRoICogMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJ2V4cHIoaGVpZ2h0ICogMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJzoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggLyAxLjAgKiAxLjAsIGhlaWdodCAvIDEuMCAqIDEuMF0gKSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnZGVmaW5lcyc6IHtcbiAgICAgICAgICAgICAgICAnVkVSVElDQUwnOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnOiAnZG9mX3NlcGFyYXRlX2ZhcicsXG4gICAgICAgICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2FyLmRvZi5zZXBhcmF0ZSknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnbWFpblRleCc6ICdzb3VyY2UnLFxuICAgICAgICAgICAgICAgICdjb2NUZXgnOiAnY29jJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUUyxcbiAgICAgICAgICAgICdkZWZpbmVzJzoge1xuICAgICAgICAgICAgICAgICdGQVJGSUVMRCc6IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdkb2Zfc2VwYXJhdGVfbmVhcicsXG4gICAgICAgICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2FyLmRvZi5zZXBhcmF0ZSknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnbWFpblRleCc6ICdzb3VyY2UnLFxuICAgICAgICAgICAgICAgICdjb2NUZXgnOiAnY29jJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUU1xuICAgICAgICB9LFxuXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJzogJ2RvZl9ibHVyX2Zhcl8xJyxcbiAgICAgICAgICAgICdzaGFkZXInOiAnI3NvdXJjZShjYXIuZG9mLmJsdXIpJyxcbiAgICAgICAgICAgICdpbnB1dHMnOiB7XG4gICAgICAgICAgICAgICAgJ21haW5UZXgnOiAnZG9mX3NlcGFyYXRlX2ZhcicsXG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnOiBET0ZfQkxVUl9PVVRQVVRTLFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnOiBET0ZfQkxVUl9QQVJBTUVURVJTLFxuICAgICAgICAgICAgJ2RlZmluZXMnOiB7XG4gICAgICAgICAgICAgICAgJ1JfUEFTUyc6IG51bGwsXG4gICAgICAgICAgICAgICAgJ0ZBUkZJRUxEJzogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJzogJ2RvZl9ibHVyX2Zhcl8yJyxcbiAgICAgICAgICAgICdzaGFkZXInOiAnI3NvdXJjZShjYXIuZG9mLmJsdXIpJyxcbiAgICAgICAgICAgICdpbnB1dHMnOiB7XG4gICAgICAgICAgICAgICAgJ21haW5UZXgnOiAnZG9mX3NlcGFyYXRlX2ZhcicsXG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnOiBET0ZfQkxVUl9PVVRQVVRTLFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnOiBET0ZfQkxVUl9QQVJBTUVURVJTLFxuICAgICAgICAgICAgJ2RlZmluZXMnOiB7XG4gICAgICAgICAgICAgICAgJ0dfUEFTUyc6IG51bGwsXG4gICAgICAgICAgICAgICAgJ0ZBUkZJRUxEJzogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG5cbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnOiAnZG9mX2JsdXJfZmFyXzMnLFxuICAgICAgICAgICAgJ3NoYWRlcic6ICcjc291cmNlKGNhci5kb2YuYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnbWFpblRleCc6ICdkb2Zfc2VwYXJhdGVfZmFyJyxcbiAgICAgICAgICAgICAgICAnY29jVGV4JzogJ2NvYydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cyc6IERPRl9CTFVSX09VVFBVVFMsXG4gICAgICAgICAgICAncGFyYW1ldGVycyc6IERPRl9CTFVSX1BBUkFNRVRFUlMsXG4gICAgICAgICAgICAnZGVmaW5lcyc6IHtcbiAgICAgICAgICAgICAgICAnQl9QQVNTJzogbnVsbCxcbiAgICAgICAgICAgICAgICAnRkFSRklFTEQnOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdkb2ZfYmx1cl9mYXJfNCcsXG4gICAgICAgICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2FyLmRvZi5ibHVyKScsXG4gICAgICAgICAgICAnaW5wdXRzJzoge1xuICAgICAgICAgICAgICAgICdtYWluVGV4JzogJ2RvZl9zZXBhcmF0ZV9mYXInLFxuICAgICAgICAgICAgICAgICdjb2NUZXgnOiAnY29jJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUUyxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJzogRE9GX0JMVVJfUEFSQU1FVEVSUyxcbiAgICAgICAgICAgICdkZWZpbmVzJzoge1xuICAgICAgICAgICAgICAgICdBX1BBU1MnOiBudWxsLFxuICAgICAgICAgICAgICAgICdGQVJGSUVMRCc6IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdkb2ZfYmx1cl9mYXJfZmluYWwnLFxuICAgICAgICAgICAgJ3NoYWRlcic6ICcjc291cmNlKGNhci5kb2YuYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnclRleCc6ICdkb2ZfYmx1cl9mYXJfMScsXG4gICAgICAgICAgICAgICAgJ2dUZXgnOiAnZG9mX2JsdXJfZmFyXzInLFxuICAgICAgICAgICAgICAgICdiVGV4JzogJ2RvZl9ibHVyX2Zhcl8zJyxcbiAgICAgICAgICAgICAgICAnYVRleCc6ICdkb2ZfYmx1cl9mYXJfNCcsXG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnOiBET0ZfQkxVUl9PVVRQVVRTLFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnOiBET0ZfQkxVUl9QQVJBTUVURVJTLFxuICAgICAgICAgICAgJ2RlZmluZXMnOiB7XG4gICAgICAgICAgICAgICAgJ0ZJTkFMX1BBU1MnOiBudWxsLFxuICAgICAgICAgICAgICAgICdGQVJGSUVMRCc6IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdkb2ZfYmx1cl9uZWFyXzEnLFxuICAgICAgICAgICAgJ3NoYWRlcic6ICcjc291cmNlKGNhci5kb2YuYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnbWFpblRleCc6ICdkb2Zfc2VwYXJhdGVfbmVhcicsXG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2MnLFxuICAgICAgICAgICAgICAgICdkaWxhdGVDb2NUZXgnOiAnY29jX2RpbGF0ZV8yJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUUyxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJzogRE9GX0JMVVJfUEFSQU1FVEVSUyxcbiAgICAgICAgICAgICdkZWZpbmVzJzoge1xuICAgICAgICAgICAgICAgICdSX1BBU1MnOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnOiAnZG9mX2JsdXJfbmVhcl8yJyxcbiAgICAgICAgICAgICdzaGFkZXInOiAnI3NvdXJjZShjYXIuZG9mLmJsdXIpJyxcbiAgICAgICAgICAgICdpbnB1dHMnOiB7XG4gICAgICAgICAgICAgICAgJ21haW5UZXgnOiAnZG9mX3NlcGFyYXRlX25lYXInLFxuICAgICAgICAgICAgICAgICdjb2NUZXgnOiAnY29jJyxcbiAgICAgICAgICAgICAgICAnZGlsYXRlQ29jVGV4JzogJ2NvY19kaWxhdGVfMidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cyc6IERPRl9CTFVSX09VVFBVVFMsXG4gICAgICAgICAgICAncGFyYW1ldGVycyc6IERPRl9CTFVSX1BBUkFNRVRFUlMsXG4gICAgICAgICAgICAnZGVmaW5lcyc6IHtcbiAgICAgICAgICAgICAgICAnR19QQVNTJzogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJzogJ2RvZl9ibHVyX25lYXJfMycsXG4gICAgICAgICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2FyLmRvZi5ibHVyKScsXG4gICAgICAgICAgICAnaW5wdXRzJzoge1xuICAgICAgICAgICAgICAgICdtYWluVGV4JzogJ2RvZl9zZXBhcmF0ZV9uZWFyJyxcbiAgICAgICAgICAgICAgICAnY29jVGV4JzogJ2NvYycsXG4gICAgICAgICAgICAgICAgJ2RpbGF0ZUNvY1RleCc6ICdjb2NfZGlsYXRlXzInXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnOiBET0ZfQkxVUl9PVVRQVVRTLFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnOiBET0ZfQkxVUl9QQVJBTUVURVJTLFxuICAgICAgICAgICAgJ2RlZmluZXMnOiB7XG4gICAgICAgICAgICAgICAgJ0JfUEFTUyc6IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdkb2ZfYmx1cl9uZWFyXzQnLFxuICAgICAgICAgICAgJ3NoYWRlcic6ICcjc291cmNlKGNhci5kb2YuYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnbWFpblRleCc6ICdkb2Zfc2VwYXJhdGVfbmVhcicsXG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2MnLFxuICAgICAgICAgICAgICAgICdkaWxhdGVDb2NUZXgnOiAnY29jX2RpbGF0ZV8yJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUUyxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJzogRE9GX0JMVVJfUEFSQU1FVEVSUyxcbiAgICAgICAgICAgICdkZWZpbmVzJzoge1xuICAgICAgICAgICAgICAgICdBX1BBU1MnOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnOiAnZG9mX2JsdXJfbmVhcl9maW5hbCcsXG4gICAgICAgICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2FyLmRvZi5ibHVyKScsXG4gICAgICAgICAgICAnaW5wdXRzJzoge1xuICAgICAgICAgICAgICAgICdyVGV4JzogJ2RvZl9ibHVyX25lYXJfMScsXG4gICAgICAgICAgICAgICAgJ2dUZXgnOiAnZG9mX2JsdXJfbmVhcl8yJyxcbiAgICAgICAgICAgICAgICAnYlRleCc6ICdkb2ZfYmx1cl9uZWFyXzMnLFxuICAgICAgICAgICAgICAgICdhVGV4JzogJ2RvZl9ibHVyX25lYXJfNCcsXG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2MnLFxuICAgICAgICAgICAgICAgICdkaWxhdGVDb2NUZXgnOiAnY29jX2RpbGF0ZV8yJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUUyxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJzogRE9GX0JMVVJfUEFSQU1FVEVSUyxcbiAgICAgICAgICAgICdkZWZpbmVzJzoge1xuICAgICAgICAgICAgICAgICdGSU5BTF9QQVNTJzogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gICAgICduYW1lJzogJ2RvZl9ibHVyX25lYXJfYWxwaGFfaCcsXG4gICAgICAgIC8vICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2FyLmRvZi5ibHVyTmVhckFscGhhKScsXG4gICAgICAgIC8vICAgICAnaW5wdXRzJzoge1xuICAgICAgICAvLyAgICAgICAgICdtYWluVGV4JzogJ2RvZl9ibHVyX25lYXJfZmluYWwnLFxuICAgICAgICAvLyAgICAgICAgICdjb2NUZXgnOiAnY29jX2RpbGF0ZV8yJ1xuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUUyxcbiAgICAgICAgLy8gICAgICdwYXJhbWV0ZXJzJzoge1xuICAgICAgICAvLyAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggLyAyLjAgKiAxLjAsIGhlaWdodCAvIDIuMCAqIDEuMF0gKScsXG4gICAgICAgIC8vICAgICAgICAgJ2JsdXJEaXInOiAwXG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH0sXG5cblxuICAgICAgICAvLyB7XG4gICAgICAgIC8vICAgICAnbmFtZSc6ICdkb2ZfYmx1cl9uZWFyX2FscGhhX3YnLFxuICAgICAgICAvLyAgICAgJ3NoYWRlcic6ICcjc291cmNlKGNhci5kb2YuYmx1ck5lYXJBbHBoYSknLFxuICAgICAgICAvLyAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgLy8gICAgICAgICAnbWFpblRleCc6ICdkb2ZfYmx1cl9uZWFyX2FscGhhX2gnLFxuICAgICAgICAvLyAgICAgICAgICdjb2NUZXgnOiAnY29jX2RpbGF0ZV8yJ1xuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUUyxcbiAgICAgICAgLy8gICAgICdwYXJhbWV0ZXJzJzoge1xuICAgICAgICAvLyAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggLyAyLjAgKiAxLjAsIGhlaWdodCAvIDIuMCAqIDEuMF0gKScsXG4gICAgICAgIC8vICAgICAgICAgJ2JsdXJEaXInOiAxXG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH0sXG5cblxuXG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gICAgICduYW1lJzogJ2RvZl9ibHVyX3Vwc2FtcGxlJyxcbiAgICAgICAgLy8gICAgICdzaGFkZXInOiAnI3NvdXJjZShjYXIuZG9mLmV4dHJhQmx1ciknLFxuICAgICAgICAvLyAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgLy8gICAgICAgICAnYmx1cic6ICdkb2ZfYmx1cicsXG4gICAgICAgIC8vICAgICAgICAgJ2NvY1RleCc6ICdjb2MnXG4gICAgICAgIC8vICAgICB9LFxuICAgICAgICAvLyAgICAgJ291dHB1dHMnOiB7XG4gICAgICAgIC8vICAgICAgICAgJ2NvbG9yJzoge1xuICAgICAgICAvLyAgICAgICAgICAgICAncGFyYW1ldGVycyc6IHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICd3aWR0aCc6ICdleHByKHdpZHRoICogMS4wKScsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJ2V4cHIoaGVpZ2h0ICogMS4wKScsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAvLyAgICAgICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgICdwYXJhbWV0ZXJzJzoge1xuICAgICAgICAvLyAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggLyAyLjAgKiAxLjAsIGhlaWdodCAvIDIuMCAqIDEuMF0gKSdcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSxcblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdkb2ZfY29tcG9zaXRlJyxcbiAgICAgICAgICAgICdzaGFkZXInOiAnI3NvdXJjZShjYXIuZG9mLmNvbXBvc2l0ZSknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnc2hhcnBUZXgnOiAnc291cmNlJyxcbiAgICAgICAgICAgICAgICAnZmFyVGV4JzogJ2RvZl9ibHVyX2Zhcl9maW5hbCcsXG4gICAgICAgICAgICAgICAgJ25lYXJUZXgnOiAnZG9mX2JsdXJfbmVhcl9maW5hbCcsXG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJzoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCc6ICdleHByKHdpZHRoICogMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJ2V4cHIoaGVpZ2h0ICogMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdkZWZpbmVzJzoge1xuICAgICAgICAgICAgICAgIC8vIERFQlVHOiA0XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdjb21wb3NpdGUnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuaGRyLmNvbXBvc2l0ZSknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnOiAnc291cmNlJyxcbiAgICAgICAgICAgICAgICAnYmxvb20nIDogJ2Jsb29tX2NvbXBvc2l0ZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnZGVmaW5lcyc6IHtcbiAgICAgICAgICAgICAgICAvLyBJbWFnZXMgYXJlIGFsbCBwcmVtdWx0aXBsaWVkIGFscGhhIGJlZm9yZSBjb21wb3NpdGUgYmVjYXVzZSBvZiBibGVuZGluZy5cbiAgICAgICAgICAgICAgICAvLyAnUFJFTVVMVElQTFlfQUxQSEEnOiBudWxsLFxuICAgICAgICAgICAgICAgIC8vICdERUJVRyc6IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnIDogJ0ZYQUEnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZnhhYSknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2NvbXBvc2l0ZSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIF1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsLWFkdmFuY2VkLXJlbmRlcmVyL3NyYy9jb21wb3NpdGUuanNcbi8vIG1vZHVsZSBpZCA9IDIwM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///203\n");

/***/ }),
/* 204 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export car.dof.coc\\nuniform sampler2D depth;\\nuniform float zNear = 0.1;\\nuniform float zFar = 2000;\\nuniform float focalDistance = 10;\\nuniform float focalLength = 50;\\nuniform float aperture = 5.6;\\nuniform float maxCoc;\\nuniform float _filmHeight = 0.024;\\nvarying vec2 v_Texcoord;\\n@import clay.util.encode_float\\nvoid main()\\n{\\n float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;\\n float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));\\n float f = focalLength / 1000.0;\\n float s1 = max(f, focalDistance);\\n float coeff = f * f / (aperture * (s1 - f) * _filmHeight * 2.0);\\n float coc = (dist - focalDistance) * coeff / max(dist, 1e-5);\\n coc /= maxCoc;\\n gl_FragColor = vec4(clamp(coc * 0.5 + 0.5, 0.0, 1.0), 0.0, 0.0, 1.0);\\n}\\n@end\\n@export car.dof.composite\\n#define DEBUG 0\\nuniform sampler2D sharpTex;\\nuniform sampler2D nearTex;\\nuniform sampler2D farTex;\\nuniform sampler2D cocTex;\\nuniform float maxCoc;\\nuniform float minCoc;\\nvarying vec2 v_Texcoord;\\n@import clay.util.rgbm\\nvoid main()\\n{\\n float coc = texture2D(cocTex, v_Texcoord).r * 2.0 - 1.0;\\n vec4 nearTexel = decodeHDR(texture2D(nearTex, v_Texcoord));\\n vec4 farTexel = decodeHDR(texture2D(farTex, v_Texcoord));\\n vec4 sharpTexel = decodeHDR(texture2D(sharpTex, v_Texcoord));\\n float nfa = clamp(nearTexel.a, 0.0, 1.0);\\n float ffa = smoothstep(minCoc / maxCoc, 0.2, coc);\\n ffa *= clamp(farTexel.a, 0.0, 1.0);\\n gl_FragColor.rgb = mix(mix(sharpTexel.rgb, farTexel.rgb, ffa), nearTexel.rgb, nfa);\\n gl_FragColor.a = max(max(sharpTexel.a, nfa), clamp(farTexel.a, 0.0, 1.0));\\n}\\n@end\\n@export car.dof.separate\\nuniform sampler2D mainTex;\\nuniform sampler2D cocTex;\\nuniform float minCoc;\\nvarying vec2 v_Texcoord;\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec4 color = decodeHDR(texture2D(mainTex, v_Texcoord));\\n float coc = texture2D(cocTex, v_Texcoord).r * 2.0 - 1.0;\\n#ifdef FARFIELD\\n color *= step(0.0, coc);\\n#else\\n color.a *= step(minCoc, -coc);\\n#endif\\n gl_FragColor = encodeHDR(color);\\n}\\n@end\\n@export car.dof.dilateCoc\\n#define SHADER_NAME dilateCoc\\nuniform sampler2D cocTex;\\nuniform vec2 textureSize;\\nvarying vec2 v_Texcoord;\\nvoid main()\\n{\\n#ifdef VERTICAL\\n vec2 offset = vec2(0.0, 1.0 / textureSize.y);\\n#else\\n vec2 offset = vec2(1.0 / textureSize.x, 0.0);\\n#endif\\n float coc0 = 1.0;\\n for (int i = 0; i < 17; i++) {\\n vec2 duv = (float(i) - 8.0) * offset * 1.5;\\n float coc = texture2D(cocTex, v_Texcoord + duv).r * 2.0 - 1.0;\\n coc *= pow(1.0 - abs(float(i) - 8.0) / 10.0, 2.0);\\n coc0 = min(coc0, coc);\\n }\\n gl_FragColor = vec4(coc0 * 0.5 + 0.5, 0.0, 0.0, 1.0);\\n}\\n@end\\n@export car.dof.blur\\n#define KERNEL_SIZE 17\\nconst vec2 kernel1Weight = vec2(0.411259,-0.548794);\\nconst vec2 kernel2Weight = vec2(0.513282,4.561110);\\nuniform vec4 kernel1[KERNEL_SIZE];\\nuniform vec4 kernel2[KERNEL_SIZE];\\n#ifdef FINAL_PASS\\nuniform sampler2D rTex;\\nuniform sampler2D gTex;\\nuniform sampler2D bTex;\\nuniform sampler2D aTex;\\n#endif\\nuniform sampler2D mainTex;\\nuniform sampler2D cocTex;\\nuniform sampler2D dilateCocTex;\\nuniform float maxCoc;\\nuniform float minCoc;\\nuniform vec2 textureSize;\\nvarying vec2 v_Texcoord;\\nvec2 multComplex(vec2 p, vec2 q)\\n{\\n return vec2(p.x*q.x-p.y*q.y, p.x*q.y+p.y*q.x);\\n}\\nfloat GetSmallestCoc(vec2 uv)\\n{\\n vec2 k = 1.0 / textureSize;\\n float coc = texture2D(cocTex, uv).r;\\n vec4 around = vec4(\\n texture2D(cocTex, uv - k).r,\\n texture2D(cocTex, uv + vec2(k.x, -k.y)).r,\\n texture2D(cocTex, uv + vec2(-k.x, k.y)).r,\\n texture2D(cocTex, uv + k).r\\n );\\n return min(min(min(min(around.x, around.y), around.z), around.w), coc);\\n}\\n@import clay.util.rgbm\\n@import clay.util.float\\nvoid main()\\n{\\n float halfKernelSize = float(KERNEL_SIZE / 2);\\n vec2 texelSize = 1.0 / textureSize;\\n float weight = 0.0;\\n#ifdef FARFIELD\\n float coc0 = texture2D(cocTex, v_Texcoord).r * 2.0 - 1.0;\\n#else\\n float coc0 = -(texture2D(dilateCocTex, v_Texcoord).r * 2.0 - 1.0);\\n#endif\\n if (coc0 <= 0.0) {\\n gl_FragColor = vec4(0.0);\\n return;\\n }\\n coc0 *= maxCoc;\\n#ifdef FINAL_PASS\\n vec4 valR = vec4(0.0);\\n vec4 valG = vec4(0.0);\\n vec4 valB = vec4(0.0);\\n vec4 valA = vec4(0.0);\\n vec2 offset = vec2(0.0, abs(coc0) / halfKernelSize);\\n#else\\n vec4 val = vec4(0.0);\\n vec2 offset = vec2(texelSize.x / texelSize.y * abs(coc0) / halfKernelSize, 0.0);\\n#endif\\n for (int i = 0; i < KERNEL_SIZE; i++) {\\n vec2 duv = (float(i) - halfKernelSize) * offset;\\n float dist = length(duv);\\n vec2 uv = clamp(v_Texcoord + duv, vec2(0.0), vec2(1.0));\\n#ifdef FARFIELD\\n float coc = GetSmallestCoc(uv) * 2.0 - 1.0;\\n#else\\n float coc = texture2D(cocTex, uv).r * 2.0 - 1.0;\\n#endif\\n coc *= maxCoc;\\n float w = 1.0;\\n#ifdef FARFIELD\\n w *= step(dist, coc);\\n#endif\\n weight += w;\\n vec4 c0c1 = vec4(kernel1[i].xy, kernel2[i].xy);\\n#ifdef FINAL_PASS\\n vec4 rTexel = texture2D(rTex, uv) * w;\\n vec4 gTexel = texture2D(gTex, uv) * w;\\n vec4 bTexel = texture2D(bTex, uv) * w;\\n vec4 aTexel = texture2D(aTex, uv) * w;\\n valR.xy += multComplex(rTexel.xy,c0c1.xy);\\n valR.zw += multComplex(rTexel.zw,c0c1.zw);\\n valG.xy += multComplex(gTexel.xy,c0c1.xy);\\n valG.zw += multComplex(gTexel.zw,c0c1.zw);\\n valB.xy += multComplex(bTexel.xy,c0c1.xy);\\n valB.zw += multComplex(bTexel.zw,c0c1.zw);\\n valA.xy += multComplex(aTexel.xy,c0c1.xy);\\n valA.zw += multComplex(aTexel.zw,c0c1.zw);\\n#else\\n vec4 color = texture2D(mainTex, uv);\\n float tmp;\\n #if defined(R_PASS)\\n tmp = color.r;\\n #elif defined(G_PASS)\\n tmp = color.g;\\n #elif defined(B_PASS)\\n tmp = color.b;\\n #elif defined(A_PASS)\\n tmp = color.a;\\n #endif\\n val += tmp * c0c1 * w;\\n#endif\\n }\\n weight /= float(KERNEL_SIZE);\\n weight = max(weight, 0.0001);\\n#ifdef FINAL_PASS\\n valR /= weight;\\n valG /= weight;\\n valB /= weight;\\n valA /= weight;\\n float r = dot(valR.xy,kernel1Weight)+dot(valR.zw,kernel2Weight);\\n float g = dot(valG.xy,kernel1Weight)+dot(valG.zw,kernel2Weight);\\n float b = dot(valB.xy,kernel1Weight)+dot(valB.zw,kernel2Weight);\\n float a = dot(valA.xy,kernel1Weight)+dot(valA.zw,kernel2Weight);\\n gl_FragColor = vec4(r, g, b, a);\\n#else\\n val /= weight;\\n gl_FragColor = val;\\n#endif\\n}\\n@end\\n// @end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjA0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvRE9GLmdsc2wuanM/ZTFiZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2FyLmRvZi5jb2NcXG51bmlmb3JtIHNhbXBsZXIyRCBkZXB0aDtcXG51bmlmb3JtIGZsb2F0IHpOZWFyID0gMC4xO1xcbnVuaWZvcm0gZmxvYXQgekZhciA9IDIwMDA7XFxudW5pZm9ybSBmbG9hdCBmb2NhbERpc3RhbmNlID0gMTA7XFxudW5pZm9ybSBmbG9hdCBmb2NhbExlbmd0aCA9IDUwO1xcbnVuaWZvcm0gZmxvYXQgYXBlcnR1cmUgPSA1LjY7XFxudW5pZm9ybSBmbG9hdCBtYXhDb2M7XFxudW5pZm9ybSBmbG9hdCBfZmlsbUhlaWdodCA9IDAuMDI0O1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbkBpbXBvcnQgY2xheS51dGlsLmVuY29kZV9mbG9hdFxcbnZvaWQgbWFpbigpXFxue1xcbiBmbG9hdCB6ID0gdGV4dHVyZTJEKGRlcHRoLCB2X1RleGNvb3JkKS5yICogMi4wIC0gMS4wO1xcbiBmbG9hdCBkaXN0ID0gMi4wICogek5lYXIgKiB6RmFyIC8gKHpGYXIgKyB6TmVhciAtIHogKiAoekZhciAtIHpOZWFyKSk7XFxuIGZsb2F0IGYgPSBmb2NhbExlbmd0aCAvIDEwMDAuMDtcXG4gZmxvYXQgczEgPSBtYXgoZiwgZm9jYWxEaXN0YW5jZSk7XFxuIGZsb2F0IGNvZWZmID0gZiAqIGYgLyAoYXBlcnR1cmUgKiAoczEgLSBmKSAqIF9maWxtSGVpZ2h0ICogMi4wKTtcXG4gZmxvYXQgY29jID0gKGRpc3QgLSBmb2NhbERpc3RhbmNlKSAqIGNvZWZmIC8gbWF4KGRpc3QsIDFlLTUpO1xcbiBjb2MgLz0gbWF4Q29jO1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KGNsYW1wKGNvYyAqIDAuNSArIDAuNSwgMC4wLCAxLjApLCAwLjAsIDAuMCwgMS4wKTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2FyLmRvZi5jb21wb3NpdGVcXG4jZGVmaW5lIERFQlVHIDBcXG51bmlmb3JtIHNhbXBsZXIyRCBzaGFycFRleDtcXG51bmlmb3JtIHNhbXBsZXIyRCBuZWFyVGV4O1xcbnVuaWZvcm0gc2FtcGxlcjJEIGZhclRleDtcXG51bmlmb3JtIHNhbXBsZXIyRCBjb2NUZXg7XFxudW5pZm9ybSBmbG9hdCBtYXhDb2M7XFxudW5pZm9ybSBmbG9hdCBtaW5Db2M7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbnZvaWQgbWFpbigpXFxue1xcbiBmbG9hdCBjb2MgPSB0ZXh0dXJlMkQoY29jVGV4LCB2X1RleGNvb3JkKS5yICogMi4wIC0gMS4wO1xcbiB2ZWM0IG5lYXJUZXhlbCA9IGRlY29kZUhEUih0ZXh0dXJlMkQobmVhclRleCwgdl9UZXhjb29yZCkpO1xcbiB2ZWM0IGZhclRleGVsID0gZGVjb2RlSERSKHRleHR1cmUyRChmYXJUZXgsIHZfVGV4Y29vcmQpKTtcXG4gdmVjNCBzaGFycFRleGVsID0gZGVjb2RlSERSKHRleHR1cmUyRChzaGFycFRleCwgdl9UZXhjb29yZCkpO1xcbiBmbG9hdCBuZmEgPSBjbGFtcChuZWFyVGV4ZWwuYSwgMC4wLCAxLjApO1xcbiBmbG9hdCBmZmEgPSBzbW9vdGhzdGVwKG1pbkNvYyAvIG1heENvYywgMC4yLCBjb2MpO1xcbiBmZmEgKj0gY2xhbXAoZmFyVGV4ZWwuYSwgMC4wLCAxLjApO1xcbiBnbF9GcmFnQ29sb3IucmdiID0gbWl4KG1peChzaGFycFRleGVsLnJnYiwgZmFyVGV4ZWwucmdiLCBmZmEpLCBuZWFyVGV4ZWwucmdiLCBuZmEpO1xcbiBnbF9GcmFnQ29sb3IuYSA9IG1heChtYXgoc2hhcnBUZXhlbC5hLCBuZmEpLCBjbGFtcChmYXJUZXhlbC5hLCAwLjAsIDEuMCkpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjYXIuZG9mLnNlcGFyYXRlXFxudW5pZm9ybSBzYW1wbGVyMkQgbWFpblRleDtcXG51bmlmb3JtIHNhbXBsZXIyRCBjb2NUZXg7XFxudW5pZm9ybSBmbG9hdCBtaW5Db2M7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWM0IGNvbG9yID0gZGVjb2RlSERSKHRleHR1cmUyRChtYWluVGV4LCB2X1RleGNvb3JkKSk7XFxuIGZsb2F0IGNvYyA9IHRleHR1cmUyRChjb2NUZXgsIHZfVGV4Y29vcmQpLnIgKiAyLjAgLSAxLjA7XFxuI2lmZGVmIEZBUkZJRUxEXFxuIGNvbG9yICo9IHN0ZXAoMC4wLCBjb2MpO1xcbiNlbHNlXFxuIGNvbG9yLmEgKj0gc3RlcChtaW5Db2MsIC1jb2MpO1xcbiNlbmRpZlxcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIoY29sb3IpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjYXIuZG9mLmRpbGF0ZUNvY1xcbiNkZWZpbmUgU0hBREVSX05BTUUgZGlsYXRlQ29jXFxudW5pZm9ybSBzYW1wbGVyMkQgY29jVGV4O1xcbnVuaWZvcm0gdmVjMiB0ZXh0dXJlU2l6ZTtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG52b2lkIG1haW4oKVxcbntcXG4jaWZkZWYgVkVSVElDQUxcXG4gdmVjMiBvZmZzZXQgPSB2ZWMyKDAuMCwgMS4wIC8gdGV4dHVyZVNpemUueSk7XFxuI2Vsc2VcXG4gdmVjMiBvZmZzZXQgPSB2ZWMyKDEuMCAvIHRleHR1cmVTaXplLngsIDAuMCk7XFxuI2VuZGlmXFxuIGZsb2F0IGNvYzAgPSAxLjA7XFxuIGZvciAoaW50IGkgPSAwOyBpIDwgMTc7IGkrKykge1xcbiB2ZWMyIGR1diA9IChmbG9hdChpKSAtIDguMCkgKiBvZmZzZXQgKiAxLjU7XFxuIGZsb2F0IGNvYyA9IHRleHR1cmUyRChjb2NUZXgsIHZfVGV4Y29vcmQgKyBkdXYpLnIgKiAyLjAgLSAxLjA7XFxuIGNvYyAqPSBwb3coMS4wIC0gYWJzKGZsb2F0KGkpIC0gOC4wKSAvIDEwLjAsIDIuMCk7XFxuIGNvYzAgPSBtaW4oY29jMCwgY29jKTtcXG4gfVxcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KGNvYzAgKiAwLjUgKyAwLjUsIDAuMCwgMC4wLCAxLjApO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjYXIuZG9mLmJsdXJcXG4jZGVmaW5lIEtFUk5FTF9TSVpFIDE3XFxuY29uc3QgdmVjMiBrZXJuZWwxV2VpZ2h0ID0gdmVjMigwLjQxMTI1OSwtMC41NDg3OTQpO1xcbmNvbnN0IHZlYzIga2VybmVsMldlaWdodCA9IHZlYzIoMC41MTMyODIsNC41NjExMTApO1xcbnVuaWZvcm0gdmVjNCBrZXJuZWwxW0tFUk5FTF9TSVpFXTtcXG51bmlmb3JtIHZlYzQga2VybmVsMltLRVJORUxfU0laRV07XFxuI2lmZGVmIEZJTkFMX1BBU1NcXG51bmlmb3JtIHNhbXBsZXIyRCByVGV4O1xcbnVuaWZvcm0gc2FtcGxlcjJEIGdUZXg7XFxudW5pZm9ybSBzYW1wbGVyMkQgYlRleDtcXG51bmlmb3JtIHNhbXBsZXIyRCBhVGV4O1xcbiNlbmRpZlxcbnVuaWZvcm0gc2FtcGxlcjJEIG1haW5UZXg7XFxudW5pZm9ybSBzYW1wbGVyMkQgY29jVGV4O1xcbnVuaWZvcm0gc2FtcGxlcjJEIGRpbGF0ZUNvY1RleDtcXG51bmlmb3JtIGZsb2F0IG1heENvYztcXG51bmlmb3JtIGZsb2F0IG1pbkNvYztcXG51bmlmb3JtIHZlYzIgdGV4dHVyZVNpemU7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudmVjMiBtdWx0Q29tcGxleCh2ZWMyIHAsIHZlYzIgcSlcXG57XFxuIHJldHVybiB2ZWMyKHAueCpxLngtcC55KnEueSwgcC54KnEueStwLnkqcS54KTtcXG59XFxuZmxvYXQgR2V0U21hbGxlc3RDb2ModmVjMiB1dilcXG57XFxuIHZlYzIgayA9IDEuMCAvIHRleHR1cmVTaXplO1xcbiBmbG9hdCBjb2MgPSB0ZXh0dXJlMkQoY29jVGV4LCB1dikucjtcXG4gdmVjNCBhcm91bmQgPSB2ZWM0KFxcbiB0ZXh0dXJlMkQoY29jVGV4LCB1diAtIGspLnIsXFxuIHRleHR1cmUyRChjb2NUZXgsIHV2ICsgdmVjMihrLngsIC1rLnkpKS5yLFxcbiB0ZXh0dXJlMkQoY29jVGV4LCB1diArIHZlYzIoLWsueCwgay55KSkucixcXG4gdGV4dHVyZTJEKGNvY1RleCwgdXYgKyBrKS5yXFxuICk7XFxuIHJldHVybiBtaW4obWluKG1pbihtaW4oYXJvdW5kLngsIGFyb3VuZC55KSwgYXJvdW5kLnopLCBhcm91bmQudyksIGNvYyk7XFxufVxcbkBpbXBvcnQgY2xheS51dGlsLnJnYm1cXG5AaW1wb3J0IGNsYXkudXRpbC5mbG9hdFxcbnZvaWQgbWFpbigpXFxue1xcbiBmbG9hdCBoYWxmS2VybmVsU2l6ZSA9IGZsb2F0KEtFUk5FTF9TSVpFIC8gMik7XFxuIHZlYzIgdGV4ZWxTaXplID0gMS4wIC8gdGV4dHVyZVNpemU7XFxuIGZsb2F0IHdlaWdodCA9IDAuMDtcXG4jaWZkZWYgRkFSRklFTERcXG4gZmxvYXQgY29jMCA9IHRleHR1cmUyRChjb2NUZXgsIHZfVGV4Y29vcmQpLnIgKiAyLjAgLSAxLjA7XFxuI2Vsc2VcXG4gZmxvYXQgY29jMCA9IC0odGV4dHVyZTJEKGRpbGF0ZUNvY1RleCwgdl9UZXhjb29yZCkuciAqIDIuMCAtIDEuMCk7XFxuI2VuZGlmXFxuIGlmIChjb2MwIDw9IDAuMCkge1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KDAuMCk7XFxuIHJldHVybjtcXG4gfVxcbiBjb2MwICo9IG1heENvYztcXG4jaWZkZWYgRklOQUxfUEFTU1xcbiB2ZWM0IHZhbFIgPSB2ZWM0KDAuMCk7XFxuIHZlYzQgdmFsRyA9IHZlYzQoMC4wKTtcXG4gdmVjNCB2YWxCID0gdmVjNCgwLjApO1xcbiB2ZWM0IHZhbEEgPSB2ZWM0KDAuMCk7XFxuIHZlYzIgb2Zmc2V0ID0gdmVjMigwLjAsIGFicyhjb2MwKSAvIGhhbGZLZXJuZWxTaXplKTtcXG4jZWxzZVxcbiB2ZWM0IHZhbCA9IHZlYzQoMC4wKTtcXG4gdmVjMiBvZmZzZXQgPSB2ZWMyKHRleGVsU2l6ZS54IC8gdGV4ZWxTaXplLnkgKiBhYnMoY29jMCkgLyBoYWxmS2VybmVsU2l6ZSwgMC4wKTtcXG4jZW5kaWZcXG4gZm9yIChpbnQgaSA9IDA7IGkgPCBLRVJORUxfU0laRTsgaSsrKSB7XFxuIHZlYzIgZHV2ID0gKGZsb2F0KGkpIC0gaGFsZktlcm5lbFNpemUpICogb2Zmc2V0O1xcbiBmbG9hdCBkaXN0ID0gbGVuZ3RoKGR1dik7XFxuIHZlYzIgdXYgPSBjbGFtcCh2X1RleGNvb3JkICsgZHV2LCB2ZWMyKDAuMCksIHZlYzIoMS4wKSk7XFxuI2lmZGVmIEZBUkZJRUxEXFxuIGZsb2F0IGNvYyA9IEdldFNtYWxsZXN0Q29jKHV2KSAqIDIuMCAtIDEuMDtcXG4jZWxzZVxcbiBmbG9hdCBjb2MgPSB0ZXh0dXJlMkQoY29jVGV4LCB1dikuciAqIDIuMCAtIDEuMDtcXG4jZW5kaWZcXG4gY29jICo9IG1heENvYztcXG4gZmxvYXQgdyA9IDEuMDtcXG4jaWZkZWYgRkFSRklFTERcXG4gdyAqPSBzdGVwKGRpc3QsIGNvYyk7XFxuI2VuZGlmXFxuIHdlaWdodCArPSB3O1xcbiB2ZWM0IGMwYzEgPSB2ZWM0KGtlcm5lbDFbaV0ueHksIGtlcm5lbDJbaV0ueHkpO1xcbiNpZmRlZiBGSU5BTF9QQVNTXFxuIHZlYzQgclRleGVsID0gdGV4dHVyZTJEKHJUZXgsIHV2KSAqIHc7XFxuIHZlYzQgZ1RleGVsID0gdGV4dHVyZTJEKGdUZXgsIHV2KSAqIHc7XFxuIHZlYzQgYlRleGVsID0gdGV4dHVyZTJEKGJUZXgsIHV2KSAqIHc7XFxuIHZlYzQgYVRleGVsID0gdGV4dHVyZTJEKGFUZXgsIHV2KSAqIHc7XFxuIHZhbFIueHkgKz0gbXVsdENvbXBsZXgoclRleGVsLnh5LGMwYzEueHkpO1xcbiB2YWxSLnp3ICs9IG11bHRDb21wbGV4KHJUZXhlbC56dyxjMGMxLnp3KTtcXG4gdmFsRy54eSArPSBtdWx0Q29tcGxleChnVGV4ZWwueHksYzBjMS54eSk7XFxuIHZhbEcuencgKz0gbXVsdENvbXBsZXgoZ1RleGVsLnp3LGMwYzEuencpO1xcbiB2YWxCLnh5ICs9IG11bHRDb21wbGV4KGJUZXhlbC54eSxjMGMxLnh5KTtcXG4gdmFsQi56dyArPSBtdWx0Q29tcGxleChiVGV4ZWwuencsYzBjMS56dyk7XFxuIHZhbEEueHkgKz0gbXVsdENvbXBsZXgoYVRleGVsLnh5LGMwYzEueHkpO1xcbiB2YWxBLnp3ICs9IG11bHRDb21wbGV4KGFUZXhlbC56dyxjMGMxLnp3KTtcXG4jZWxzZVxcbiB2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKG1haW5UZXgsIHV2KTtcXG4gZmxvYXQgdG1wO1xcbiAjaWYgZGVmaW5lZChSX1BBU1MpXFxuIHRtcCA9IGNvbG9yLnI7XFxuICNlbGlmIGRlZmluZWQoR19QQVNTKVxcbiB0bXAgPSBjb2xvci5nO1xcbiAjZWxpZiBkZWZpbmVkKEJfUEFTUylcXG4gdG1wID0gY29sb3IuYjtcXG4gI2VsaWYgZGVmaW5lZChBX1BBU1MpXFxuIHRtcCA9IGNvbG9yLmE7XFxuICNlbmRpZlxcbiB2YWwgKz0gdG1wICogYzBjMSAqIHc7XFxuI2VuZGlmXFxuIH1cXG4gd2VpZ2h0IC89IGZsb2F0KEtFUk5FTF9TSVpFKTtcXG4gd2VpZ2h0ID0gbWF4KHdlaWdodCwgMC4wMDAxKTtcXG4jaWZkZWYgRklOQUxfUEFTU1xcbiB2YWxSIC89IHdlaWdodDtcXG4gdmFsRyAvPSB3ZWlnaHQ7XFxuIHZhbEIgLz0gd2VpZ2h0O1xcbiB2YWxBIC89IHdlaWdodDtcXG4gZmxvYXQgciA9IGRvdCh2YWxSLnh5LGtlcm5lbDFXZWlnaHQpK2RvdCh2YWxSLnp3LGtlcm5lbDJXZWlnaHQpO1xcbiBmbG9hdCBnID0gZG90KHZhbEcueHksa2VybmVsMVdlaWdodCkrZG90KHZhbEcuencsa2VybmVsMldlaWdodCk7XFxuIGZsb2F0IGIgPSBkb3QodmFsQi54eSxrZXJuZWwxV2VpZ2h0KStkb3QodmFsQi56dyxrZXJuZWwyV2VpZ2h0KTtcXG4gZmxvYXQgYSA9IGRvdCh2YWxBLnh5LGtlcm5lbDFXZWlnaHQpK2RvdCh2YWxBLnp3LGtlcm5lbDJXZWlnaHQpO1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KHIsIGcsIGIsIGEpO1xcbiNlbHNlXFxuIHZhbCAvPSB3ZWlnaHQ7XFxuIGdsX0ZyYWdDb2xvciA9IHZhbDtcXG4jZW5kaWZcXG59XFxuQGVuZFxcbi8vIEBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvRE9GLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDIwNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///204\n");

/***/ }),
/* 205 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export car.temporalBlend\\nuniform sampler2D prevTex;\\nuniform sampler2D currTex;\\nuniform sampler2D velocityTex;\\nuniform float stillBlending = 0.95;\\nuniform float motionBlending = 0.5;\\nvarying vec2 v_Texcoord;\\nvoid main() {\\n vec4 vel = texture2D(velocityTex, v_Texcoord);\\n vec2 motion = vel.rg - 0.5;\\n vec4 curr = texture2D(currTex, v_Texcoord);\\n vec4 prev = texture2D(prevTex, v_Texcoord - motion);\\n if (vel.a < 0.01) {\\n gl_FragColor = curr;\\n }\\n else {\\n float motionLength = length(motion);\\n float weight = clamp(\\n mix(stillBlending, motionBlending, motionLength * 1000.0),\\n motionBlending, stillBlending\\n );\\n gl_FragColor = mix(curr, prev, weight);\\n }\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjA1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvdGVtcG9yYWxCbGVuZC5nbHNsLmpzP2VmNmMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNhci50ZW1wb3JhbEJsZW5kXFxudW5pZm9ybSBzYW1wbGVyMkQgcHJldlRleDtcXG51bmlmb3JtIHNhbXBsZXIyRCBjdXJyVGV4O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHZlbG9jaXR5VGV4O1xcbnVuaWZvcm0gZmxvYXQgc3RpbGxCbGVuZGluZyA9IDAuOTU7XFxudW5pZm9ybSBmbG9hdCBtb3Rpb25CbGVuZGluZyA9IDAuNTtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG52b2lkIG1haW4oKSB7XFxuIHZlYzQgdmVsID0gdGV4dHVyZTJEKHZlbG9jaXR5VGV4LCB2X1RleGNvb3JkKTtcXG4gdmVjMiBtb3Rpb24gPSB2ZWwucmcgLSAwLjU7XFxuIHZlYzQgY3VyciA9IHRleHR1cmUyRChjdXJyVGV4LCB2X1RleGNvb3JkKTtcXG4gdmVjNCBwcmV2ID0gdGV4dHVyZTJEKHByZXZUZXgsIHZfVGV4Y29vcmQgLSBtb3Rpb24pO1xcbiBpZiAodmVsLmEgPCAwLjAxKSB7XFxuIGdsX0ZyYWdDb2xvciA9IGN1cnI7XFxuIH1cXG4gZWxzZSB7XFxuIGZsb2F0IG1vdGlvbkxlbmd0aCA9IGxlbmd0aChtb3Rpb24pO1xcbiBmbG9hdCB3ZWlnaHQgPSBjbGFtcChcXG4gbWl4KHN0aWxsQmxlbmRpbmcsIG1vdGlvbkJsZW5kaW5nLCBtb3Rpb25MZW5ndGggKiAxMDAwLjApLFxcbiBtb3Rpb25CbGVuZGluZywgc3RpbGxCbGVuZGluZ1xcbiApO1xcbiBnbF9GcmFnQ29sb3IgPSBtaXgoY3VyciwgcHJldiwgd2VpZ2h0KTtcXG4gfVxcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wtYWR2YW5jZWQtcmVuZGVyZXIvc3JjL3RlbXBvcmFsQmxlbmQuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMjA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///205\n");

/***/ }),
/* 206 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_claygl__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__halton__ = __webpack_require__(64);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__TAA3_glsl_js__ = __webpack_require__(207);\n// Temporal Super Sample for static Scene\n\n\nvar Pass = __WEBPACK_IMPORTED_MODULE_0_claygl__[\"m\" /* compositor */].Pass;\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].import(__WEBPACK_IMPORTED_MODULE_2__TAA3_glsl_js__[\"a\" /* default */]);\n\nfunction TemporalSuperSampling (opt) {\n    opt = opt || {};\n    var haltonSequence = [];\n\n    for (var i = 0; i < 30; i++) {\n        haltonSequence.push([\n            Object(__WEBPACK_IMPORTED_MODULE_1__halton__[\"a\" /* default */])(i, 2), Object(__WEBPACK_IMPORTED_MODULE_1__halton__[\"a\" /* default */])(i, 3)\n        ]);\n    }\n\n    this._haltonSequence = haltonSequence;\n\n    this._frame = 0;\n\n    // Frame texture before temporal supersampling\n    this._prevFrameTex = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        type: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].HALF_FLOAT\n    });\n    this._outputTex = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        type: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].HALF_FLOAT\n    });\n\n    this._taaPass = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('car.taa')\n    });\n\n    this._velocityTex = opt.velocityTexture;\n\n    this._depthTex = opt.depthTexture;\n\n    this._taaFb = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"a\" /* FrameBuffer */]({\n        depthBuffer: false\n    });\n\n    this._outputPass = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('clay.compositor.output'),\n        // TODO, alpha is premultiplied?\n        blendWithPrevious: true\n    });\n    this._outputPass.material.define('fragment', 'OUTPUT_ALPHA');\n    this._outputPass.material.blend = function (_gl) {\n        // FIXME.\n        // Output is premultiplied alpha when BLEND is enabled ?\n        // http://stackoverflow.com/questions/2171085/opengl-blending-with-previous-contents-of-framebuffer\n        _gl.blendEquationSeparate(_gl.FUNC_ADD, _gl.FUNC_ADD);\n        _gl.blendFuncSeparate(_gl.ONE, _gl.ONE_MINUS_SRC_ALPHA, _gl.ONE, _gl.ONE_MINUS_SRC_ALPHA);\n    };\n}\n\nTemporalSuperSampling.prototype = {\n\n    constructor: TemporalSuperSampling,\n\n    /**\n     * Jitter camera projectionMatrix\n     * @parma {clay.Renderer} renderer\n     * @param {clay.Camera} camera\n     */\n    jitterProjection: function (renderer, camera) {\n        var offset = this._haltonSequence[this._frame % this._haltonSequence.length];\n        var viewport = renderer.viewport;\n        var dpr = viewport.devicePixelRatio || renderer.getDevicePixelRatio();\n        var width = viewport.width * dpr;\n        var height = viewport.height * dpr;\n\n        var translationMat = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"d\" /* Matrix4 */]();\n        translationMat.array[12] = (offset[0] * 2.0 - 1.0) / width;\n        translationMat.array[13] = (offset[1] * 2.0 - 1.0) / height;\n\n        __WEBPACK_IMPORTED_MODULE_0_claygl__[\"d\" /* Matrix4 */].mul(camera.projectionMatrix, translationMat, camera.projectionMatrix);\n\n        __WEBPACK_IMPORTED_MODULE_0_claygl__[\"d\" /* Matrix4 */].invert(camera.invProjectionMatrix, camera.projectionMatrix);\n    },\n\n    getJitterOffset: function (renderer) {\n        var offset = this._haltonSequence[this._frame % this._haltonSequence.length];\n        var viewport = renderer.viewport;\n        var dpr = viewport.devicePixelRatio || renderer.getDevicePixelRatio();\n        var width = viewport.width * dpr;\n        var height = viewport.height * dpr;\n\n        return [\n            offset[0] / width,\n            offset[1] / height\n        ];\n    },\n\n    /**\n     * Reset accumulating frame\n     */\n    resetFrame: function () {\n        this._frame = 0;\n    },\n\n    /**\n     * Return current frame\n     */\n    getFrame: function () {\n        return this._frame;\n    },\n\n    getTargetTexture: function () {\n        return this._prevFrameTex;\n    },\n\n    // getPrevFrameTexture: function () {\n    //     return this._outputTex;\n    // },\n\n    resize: function (width, height) {\n        this._prevFrameTex.width = width;\n        this._prevFrameTex.height = height;\n\n        this._outputTex.width = width;\n        this._outputTex.height = height;\n    },\n\n    isFinished: function () {\n        return this._frame >= this._haltonSequence.length;\n    },\n\n    render: function (renderer, camera, sourceTex, still, output) {\n        var taaPass = this._taaPass;\n\n        taaPass.setUniform('jitterOffset', this.getJitterOffset(renderer));\n        taaPass.setUniform('velocityTex', this._velocityTex);\n        taaPass.setUniform('prevTex', this._prevFrameTex);\n        taaPass.setUniform('currTex', sourceTex);\n        taaPass.setUniform('depthTex', this._depthTex);\n        taaPass.setUniform('texelSize', [1 / sourceTex.width, 1 / sourceTex.height]);\n        taaPass.setUniform('velocityTexelSize', [1 / this._depthTex.width, 1 / this._depthTex.height]);\n\n        taaPass.setUniform('still', !!still);\n\n        if (still) {\n            taaPass.setUniform('stillBlending', this._frame === 0 ? 0 : 0.95);\n        }\n\n        this._taaFb.attach(this._outputTex);\n        this._taaFb.bind(renderer);\n        taaPass.render(renderer);\n        this._taaFb.unbind(renderer);\n\n        if (output) {\n            this._outputPass.setUniform('texture', this._outputTex);\n            this._outputPass.render(renderer);\n        }\n\n        // Swap texture\n        var tmp = this._prevFrameTex;\n        this._prevFrameTex = this._outputTex;\n        this._outputTex = tmp;\n\n        this._frame++;\n    },\n\n    dispose: function (renderer) {\n        this._taaFb.dispose(renderer);\n        this._prevFrameTex.dispose(renderer);\n        this._outputTex.dispose(renderer);\n        this._outputPass.dispose(renderer);\n        this._taaPass.dispose(renderer);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TemporalSuperSampling);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjA2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvVGVtcG9yYWxTdXBlclNhbXBsaW5nLmpzPzIwYTEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGVtcG9yYWwgU3VwZXIgU2FtcGxlIGZvciBzdGF0aWMgU2NlbmVcbmltcG9ydCB7IGNvbXBvc2l0b3IsIEZyYW1lQnVmZmVyLCBUZXh0dXJlMkQsIFRleHR1cmUsIFNoYWRlciwgTWF0cml4NCB9IGZyb20gJ2NsYXlnbCc7XG5cbnZhciBQYXNzID0gY29tcG9zaXRvci5QYXNzO1xuXG5pbXBvcnQgaGFsdG9uIGZyb20gJy4vaGFsdG9uJztcblxuaW1wb3J0IFRBQUdMU0xDb2RlIGZyb20gJy4vVEFBMy5nbHNsLmpzJztcblxuU2hhZGVyLmltcG9ydChUQUFHTFNMQ29kZSk7XG5cbmZ1bmN0aW9uIFRlbXBvcmFsU3VwZXJTYW1wbGluZyAob3B0KSB7XG4gICAgb3B0ID0gb3B0IHx8IHt9O1xuICAgIHZhciBoYWx0b25TZXF1ZW5jZSA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMDsgaSsrKSB7XG4gICAgICAgIGhhbHRvblNlcXVlbmNlLnB1c2goW1xuICAgICAgICAgICAgaGFsdG9uKGksIDIpLCBoYWx0b24oaSwgMylcbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgdGhpcy5faGFsdG9uU2VxdWVuY2UgPSBoYWx0b25TZXF1ZW5jZTtcblxuICAgIHRoaXMuX2ZyYW1lID0gMDtcblxuICAgIC8vIEZyYW1lIHRleHR1cmUgYmVmb3JlIHRlbXBvcmFsIHN1cGVyc2FtcGxpbmdcbiAgICB0aGlzLl9wcmV2RnJhbWVUZXggPSBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgdHlwZTogVGV4dHVyZS5IQUxGX0ZMT0FUXG4gICAgfSk7XG4gICAgdGhpcy5fb3V0cHV0VGV4ID0gbmV3IFRleHR1cmUyRCh7XG4gICAgICAgIHR5cGU6IFRleHR1cmUuSEFMRl9GTE9BVFxuICAgIH0pO1xuXG4gICAgdGhpcy5fdGFhUGFzcyA9IG5ldyBQYXNzKHtcbiAgICAgICAgZnJhZ21lbnQ6IFNoYWRlci5zb3VyY2UoJ2Nhci50YWEnKVxuICAgIH0pO1xuXG4gICAgdGhpcy5fdmVsb2NpdHlUZXggPSBvcHQudmVsb2NpdHlUZXh0dXJlO1xuXG4gICAgdGhpcy5fZGVwdGhUZXggPSBvcHQuZGVwdGhUZXh0dXJlO1xuXG4gICAgdGhpcy5fdGFhRmIgPSBuZXcgRnJhbWVCdWZmZXIoe1xuICAgICAgICBkZXB0aEJ1ZmZlcjogZmFsc2VcbiAgICB9KTtcblxuICAgIHRoaXMuX291dHB1dFBhc3MgPSBuZXcgUGFzcyh7XG4gICAgICAgIGZyYWdtZW50OiBTaGFkZXIuc291cmNlKCdjbGF5LmNvbXBvc2l0b3Iub3V0cHV0JyksXG4gICAgICAgIC8vIFRPRE8sIGFscGhhIGlzIHByZW11bHRpcGxpZWQ/XG4gICAgICAgIGJsZW5kV2l0aFByZXZpb3VzOiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5fb3V0cHV0UGFzcy5tYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ09VVFBVVF9BTFBIQScpO1xuICAgIHRoaXMuX291dHB1dFBhc3MubWF0ZXJpYWwuYmxlbmQgPSBmdW5jdGlvbiAoX2dsKSB7XG4gICAgICAgIC8vIEZJWE1FLlxuICAgICAgICAvLyBPdXRwdXQgaXMgcHJlbXVsdGlwbGllZCBhbHBoYSB3aGVuIEJMRU5EIGlzIGVuYWJsZWQgP1xuICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzIxNzEwODUvb3BlbmdsLWJsZW5kaW5nLXdpdGgtcHJldmlvdXMtY29udGVudHMtb2YtZnJhbWVidWZmZXJcbiAgICAgICAgX2dsLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShfZ2wuRlVOQ19BREQsIF9nbC5GVU5DX0FERCk7XG4gICAgICAgIF9nbC5ibGVuZEZ1bmNTZXBhcmF0ZShfZ2wuT05FLCBfZ2wuT05FX01JTlVTX1NSQ19BTFBIQSwgX2dsLk9ORSwgX2dsLk9ORV9NSU5VU19TUkNfQUxQSEEpO1xuICAgIH07XG59XG5cblRlbXBvcmFsU3VwZXJTYW1wbGluZy5wcm90b3R5cGUgPSB7XG5cbiAgICBjb25zdHJ1Y3RvcjogVGVtcG9yYWxTdXBlclNhbXBsaW5nLFxuXG4gICAgLyoqXG4gICAgICogSml0dGVyIGNhbWVyYSBwcm9qZWN0aW9uTWF0cml4XG4gICAgICogQHBhcm1hIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqIEBwYXJhbSB7Y2xheS5DYW1lcmF9IGNhbWVyYVxuICAgICAqL1xuICAgIGppdHRlclByb2plY3Rpb246IGZ1bmN0aW9uIChyZW5kZXJlciwgY2FtZXJhKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLl9oYWx0b25TZXF1ZW5jZVt0aGlzLl9mcmFtZSAlIHRoaXMuX2hhbHRvblNlcXVlbmNlLmxlbmd0aF07XG4gICAgICAgIHZhciB2aWV3cG9ydCA9IHJlbmRlcmVyLnZpZXdwb3J0O1xuICAgICAgICB2YXIgZHByID0gdmlld3BvcnQuZGV2aWNlUGl4ZWxSYXRpbyB8fCByZW5kZXJlci5nZXREZXZpY2VQaXhlbFJhdGlvKCk7XG4gICAgICAgIHZhciB3aWR0aCA9IHZpZXdwb3J0LndpZHRoICogZHByO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gdmlld3BvcnQuaGVpZ2h0ICogZHByO1xuXG4gICAgICAgIHZhciB0cmFuc2xhdGlvbk1hdCA9IG5ldyBNYXRyaXg0KCk7XG4gICAgICAgIHRyYW5zbGF0aW9uTWF0LmFycmF5WzEyXSA9IChvZmZzZXRbMF0gKiAyLjAgLSAxLjApIC8gd2lkdGg7XG4gICAgICAgIHRyYW5zbGF0aW9uTWF0LmFycmF5WzEzXSA9IChvZmZzZXRbMV0gKiAyLjAgLSAxLjApIC8gaGVpZ2h0O1xuXG4gICAgICAgIE1hdHJpeDQubXVsKGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LCB0cmFuc2xhdGlvbk1hdCwgY2FtZXJhLnByb2plY3Rpb25NYXRyaXgpO1xuXG4gICAgICAgIE1hdHJpeDQuaW52ZXJ0KGNhbWVyYS5pbnZQcm9qZWN0aW9uTWF0cml4LCBjYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7XG4gICAgfSxcblxuICAgIGdldEppdHRlck9mZnNldDogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLl9oYWx0b25TZXF1ZW5jZVt0aGlzLl9mcmFtZSAlIHRoaXMuX2hhbHRvblNlcXVlbmNlLmxlbmd0aF07XG4gICAgICAgIHZhciB2aWV3cG9ydCA9IHJlbmRlcmVyLnZpZXdwb3J0O1xuICAgICAgICB2YXIgZHByID0gdmlld3BvcnQuZGV2aWNlUGl4ZWxSYXRpbyB8fCByZW5kZXJlci5nZXREZXZpY2VQaXhlbFJhdGlvKCk7XG4gICAgICAgIHZhciB3aWR0aCA9IHZpZXdwb3J0LndpZHRoICogZHByO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gdmlld3BvcnQuaGVpZ2h0ICogZHByO1xuXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBvZmZzZXRbMF0gLyB3aWR0aCxcbiAgICAgICAgICAgIG9mZnNldFsxXSAvIGhlaWdodFxuICAgICAgICBdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXNldCBhY2N1bXVsYXRpbmcgZnJhbWVcbiAgICAgKi9cbiAgICByZXNldEZyYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2ZyYW1lID0gMDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGN1cnJlbnQgZnJhbWVcbiAgICAgKi9cbiAgICBnZXRGcmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZnJhbWU7XG4gICAgfSxcblxuICAgIGdldFRhcmdldFRleHR1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByZXZGcmFtZVRleDtcbiAgICB9LFxuXG4gICAgLy8gZ2V0UHJldkZyYW1lVGV4dHVyZTogZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICByZXR1cm4gdGhpcy5fb3V0cHV0VGV4O1xuICAgIC8vIH0sXG5cbiAgICByZXNpemU6IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuX3ByZXZGcmFtZVRleC53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLl9wcmV2RnJhbWVUZXguaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgIHRoaXMuX291dHB1dFRleC53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLl9vdXRwdXRUZXguaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH0sXG5cbiAgICBpc0ZpbmlzaGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mcmFtZSA+PSB0aGlzLl9oYWx0b25TZXF1ZW5jZS5sZW5ndGg7XG4gICAgfSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gKHJlbmRlcmVyLCBjYW1lcmEsIHNvdXJjZVRleCwgc3RpbGwsIG91dHB1dCkge1xuICAgICAgICB2YXIgdGFhUGFzcyA9IHRoaXMuX3RhYVBhc3M7XG5cbiAgICAgICAgdGFhUGFzcy5zZXRVbmlmb3JtKCdqaXR0ZXJPZmZzZXQnLCB0aGlzLmdldEppdHRlck9mZnNldChyZW5kZXJlcikpO1xuICAgICAgICB0YWFQYXNzLnNldFVuaWZvcm0oJ3ZlbG9jaXR5VGV4JywgdGhpcy5fdmVsb2NpdHlUZXgpO1xuICAgICAgICB0YWFQYXNzLnNldFVuaWZvcm0oJ3ByZXZUZXgnLCB0aGlzLl9wcmV2RnJhbWVUZXgpO1xuICAgICAgICB0YWFQYXNzLnNldFVuaWZvcm0oJ2N1cnJUZXgnLCBzb3VyY2VUZXgpO1xuICAgICAgICB0YWFQYXNzLnNldFVuaWZvcm0oJ2RlcHRoVGV4JywgdGhpcy5fZGVwdGhUZXgpO1xuICAgICAgICB0YWFQYXNzLnNldFVuaWZvcm0oJ3RleGVsU2l6ZScsIFsxIC8gc291cmNlVGV4LndpZHRoLCAxIC8gc291cmNlVGV4LmhlaWdodF0pO1xuICAgICAgICB0YWFQYXNzLnNldFVuaWZvcm0oJ3ZlbG9jaXR5VGV4ZWxTaXplJywgWzEgLyB0aGlzLl9kZXB0aFRleC53aWR0aCwgMSAvIHRoaXMuX2RlcHRoVGV4LmhlaWdodF0pO1xuXG4gICAgICAgIHRhYVBhc3Muc2V0VW5pZm9ybSgnc3RpbGwnLCAhIXN0aWxsKTtcblxuICAgICAgICBpZiAoc3RpbGwpIHtcbiAgICAgICAgICAgIHRhYVBhc3Muc2V0VW5pZm9ybSgnc3RpbGxCbGVuZGluZycsIHRoaXMuX2ZyYW1lID09PSAwID8gMCA6IDAuOTUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdGFhRmIuYXR0YWNoKHRoaXMuX291dHB1dFRleCk7XG4gICAgICAgIHRoaXMuX3RhYUZiLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICB0YWFQYXNzLnJlbmRlcihyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX3RhYUZiLnVuYmluZChyZW5kZXJlcik7XG5cbiAgICAgICAgaWYgKG91dHB1dCkge1xuICAgICAgICAgICAgdGhpcy5fb3V0cHV0UGFzcy5zZXRVbmlmb3JtKCd0ZXh0dXJlJywgdGhpcy5fb3V0cHV0VGV4KTtcbiAgICAgICAgICAgIHRoaXMuX291dHB1dFBhc3MucmVuZGVyKHJlbmRlcmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN3YXAgdGV4dHVyZVxuICAgICAgICB2YXIgdG1wID0gdGhpcy5fcHJldkZyYW1lVGV4O1xuICAgICAgICB0aGlzLl9wcmV2RnJhbWVUZXggPSB0aGlzLl9vdXRwdXRUZXg7XG4gICAgICAgIHRoaXMuX291dHB1dFRleCA9IHRtcDtcblxuICAgICAgICB0aGlzLl9mcmFtZSsrO1xuICAgIH0sXG5cbiAgICBkaXNwb3NlOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5fdGFhRmIuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX3ByZXZGcmFtZVRleC5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5fb3V0cHV0VGV4LmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgICAgICB0aGlzLl9vdXRwdXRQYXNzLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgICAgICB0aGlzLl90YWFQYXNzLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRlbXBvcmFsU3VwZXJTYW1wbGluZztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wtYWR2YW5jZWQtcmVuZGVyZXIvc3JjL1RlbXBvcmFsU3VwZXJTYW1wbGluZy5qc1xuLy8gbW9kdWxlIGlkID0gMjA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///206\n");

/***/ }),
/* 207 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export car.taa\\n#define SHADER_NAME TAA3\\nuniform sampler2D prevTex;\\nuniform sampler2D currTex;\\nuniform sampler2D velocityTex;\\nuniform sampler2D depthTex;\\nuniform vec2 texelSize;\\nuniform vec2 velocityTexelSize;\\nuniform vec2 jitterOffset;\\nuniform bool still;\\nuniform float stillBlending = 0.95;\\nuniform float motionBlending = 0.85;\\nuniform float sharpness = 0.25;\\nuniform float motionAmplification = 6000;\\nvarying vec2 v_Texcoord;\\nfloat Luminance(vec4 color)\\n{\\n return dot(color.rgb, vec3(0.2125, 0.7154, 0.0721));\\n}\\nfloat compareDepth(float a, float b)\\n{\\n return step(a, b);\\n}\\nvec2 GetClosestFragment(vec2 uv)\\n{\\n vec2 k = velocityTexelSize.xy;\\n vec4 neighborhood = vec4(\\n texture2D(depthTex, uv - k).r,\\n texture2D(depthTex, uv + vec2(k.x, -k.y)).r,\\n texture2D(depthTex, uv + vec2(-k.x, k.y)).r,\\n texture2D(depthTex, uv + k).r\\n );\\n vec3 result = vec3(0.0, 0.0, texture2D(depthTex, uv));\\n result = mix(result, vec3(-1.0, -1.0, neighborhood.x), compareDepth(neighborhood.x, result.z));\\n result = mix(result, vec3( 1.0, -1.0, neighborhood.y), compareDepth(neighborhood.y, result.z));\\n result = mix(result, vec3(-1.0, 1.0, neighborhood.z), compareDepth(neighborhood.z, result.z));\\n result = mix(result, vec3( 1.0, 1.0, neighborhood.w), compareDepth(neighborhood.w, result.z));\\n return (uv + result.xy * k);\\n}\\nvec4 ClipToAABB(vec4 color, vec3 minimum, vec3 maximum)\\n{\\n vec3 center = 0.5 * (maximum + minimum);\\n vec3 extents = 0.5 * (maximum - minimum);\\n vec3 offset = color.rgb - center;\\n vec3 ts = abs(extents / (offset + 0.0001));\\n float t = clamp(min(min(ts.x, ts.y), ts.z), 0.0, 1.0);\\n color.rgb = center + offset * t;\\n return color;\\n}\\nvec4 Tonemap(vec4 color)\\n{\\n return vec4(color.rgb / (Luminance(color) + 1.0), color.a);\\n}\\nvec4 Untonemap(vec4 color)\\n{\\n return vec4(color.rgb / max(1.0 - Luminance(color), 0.0001), color.a);\\n}\\nvoid main()\\n{\\n vec2 closest = GetClosestFragment(v_Texcoord);\\n vec4 motionTexel = texture2D(velocityTex, closest);\\n if (still) {\\n gl_FragColor = Untonemap(\\n mix(\\n Tonemap(texture2D(currTex, v_Texcoord)),\\n Tonemap(texture2D(prevTex, v_Texcoord)),\\n stillBlending\\n )\\n );\\n return;\\n }\\n if (motionTexel.a < 0.1) {\\n gl_FragColor = texture2D(currTex, v_Texcoord);\\n return;\\n }\\n vec2 motion = motionTexel.rg - 0.5;\\n vec2 k = texelSize.xy;\\n vec2 uv = v_Texcoord;\\n vec4 color = texture2D(currTex, uv);\\n vec4 topLeft = texture2D(currTex, uv - k * 0.5);\\n vec4 bottomRight = texture2D(currTex, uv + k * 0.5);\\n vec4 corners = 4.0 * (topLeft + bottomRight) - 2.0 * color;\\n vec4 average = (corners + color) * 0.142857;\\n vec4 history = texture2D(prevTex, v_Texcoord - motion);\\n float motionLength = length(motion);\\n vec2 luma = vec2(Luminance(average), Luminance(color));\\n float nudge = mix(4.0, 0.25, clamp(motionLength * 100.0, 0.0, 1.0)) * abs(luma.x - luma.y);\\n vec4 minimum = min(bottomRight, topLeft) - nudge;\\n vec4 maximum = max(topLeft, bottomRight) + nudge;\\n history = ClipToAABB(history, minimum.xyz, maximum.xyz);\\n float weight = clamp(\\n mix(stillBlending, motionBlending, motionLength * motionAmplification),\\n motionBlending, stillBlending\\n );\\n color = mix(Tonemap(color), Tonemap(history), weight);\\n color = Untonemap(clamp(color, 0.0, 1.0));\\n gl_FragColor = color;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjA3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvVEFBMy5nbHNsLmpzP2NmZTciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNhci50YWFcXG4jZGVmaW5lIFNIQURFUl9OQU1FIFRBQTNcXG51bmlmb3JtIHNhbXBsZXIyRCBwcmV2VGV4O1xcbnVuaWZvcm0gc2FtcGxlcjJEIGN1cnJUZXg7XFxudW5pZm9ybSBzYW1wbGVyMkQgdmVsb2NpdHlUZXg7XFxudW5pZm9ybSBzYW1wbGVyMkQgZGVwdGhUZXg7XFxudW5pZm9ybSB2ZWMyIHRleGVsU2l6ZTtcXG51bmlmb3JtIHZlYzIgdmVsb2NpdHlUZXhlbFNpemU7XFxudW5pZm9ybSB2ZWMyIGppdHRlck9mZnNldDtcXG51bmlmb3JtIGJvb2wgc3RpbGw7XFxudW5pZm9ybSBmbG9hdCBzdGlsbEJsZW5kaW5nID0gMC45NTtcXG51bmlmb3JtIGZsb2F0IG1vdGlvbkJsZW5kaW5nID0gMC44NTtcXG51bmlmb3JtIGZsb2F0IHNoYXJwbmVzcyA9IDAuMjU7XFxudW5pZm9ybSBmbG9hdCBtb3Rpb25BbXBsaWZpY2F0aW9uID0gNjAwMDtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG5mbG9hdCBMdW1pbmFuY2UodmVjNCBjb2xvcilcXG57XFxuIHJldHVybiBkb3QoY29sb3IucmdiLCB2ZWMzKDAuMjEyNSwgMC43MTU0LCAwLjA3MjEpKTtcXG59XFxuZmxvYXQgY29tcGFyZURlcHRoKGZsb2F0IGEsIGZsb2F0IGIpXFxue1xcbiByZXR1cm4gc3RlcChhLCBiKTtcXG59XFxudmVjMiBHZXRDbG9zZXN0RnJhZ21lbnQodmVjMiB1dilcXG57XFxuIHZlYzIgayA9IHZlbG9jaXR5VGV4ZWxTaXplLnh5O1xcbiB2ZWM0IG5laWdoYm9yaG9vZCA9IHZlYzQoXFxuIHRleHR1cmUyRChkZXB0aFRleCwgdXYgLSBrKS5yLFxcbiB0ZXh0dXJlMkQoZGVwdGhUZXgsIHV2ICsgdmVjMihrLngsIC1rLnkpKS5yLFxcbiB0ZXh0dXJlMkQoZGVwdGhUZXgsIHV2ICsgdmVjMigtay54LCBrLnkpKS5yLFxcbiB0ZXh0dXJlMkQoZGVwdGhUZXgsIHV2ICsgaykuclxcbiApO1xcbiB2ZWMzIHJlc3VsdCA9IHZlYzMoMC4wLCAwLjAsIHRleHR1cmUyRChkZXB0aFRleCwgdXYpKTtcXG4gcmVzdWx0ID0gbWl4KHJlc3VsdCwgdmVjMygtMS4wLCAtMS4wLCBuZWlnaGJvcmhvb2QueCksIGNvbXBhcmVEZXB0aChuZWlnaGJvcmhvb2QueCwgcmVzdWx0LnopKTtcXG4gcmVzdWx0ID0gbWl4KHJlc3VsdCwgdmVjMyggMS4wLCAtMS4wLCBuZWlnaGJvcmhvb2QueSksIGNvbXBhcmVEZXB0aChuZWlnaGJvcmhvb2QueSwgcmVzdWx0LnopKTtcXG4gcmVzdWx0ID0gbWl4KHJlc3VsdCwgdmVjMygtMS4wLCAxLjAsIG5laWdoYm9yaG9vZC56KSwgY29tcGFyZURlcHRoKG5laWdoYm9yaG9vZC56LCByZXN1bHQueikpO1xcbiByZXN1bHQgPSBtaXgocmVzdWx0LCB2ZWMzKCAxLjAsIDEuMCwgbmVpZ2hib3Job29kLncpLCBjb21wYXJlRGVwdGgobmVpZ2hib3Job29kLncsIHJlc3VsdC56KSk7XFxuIHJldHVybiAodXYgKyByZXN1bHQueHkgKiBrKTtcXG59XFxudmVjNCBDbGlwVG9BQUJCKHZlYzQgY29sb3IsIHZlYzMgbWluaW11bSwgdmVjMyBtYXhpbXVtKVxcbntcXG4gdmVjMyBjZW50ZXIgPSAwLjUgKiAobWF4aW11bSArIG1pbmltdW0pO1xcbiB2ZWMzIGV4dGVudHMgPSAwLjUgKiAobWF4aW11bSAtIG1pbmltdW0pO1xcbiB2ZWMzIG9mZnNldCA9IGNvbG9yLnJnYiAtIGNlbnRlcjtcXG4gdmVjMyB0cyA9IGFicyhleHRlbnRzIC8gKG9mZnNldCArIDAuMDAwMSkpO1xcbiBmbG9hdCB0ID0gY2xhbXAobWluKG1pbih0cy54LCB0cy55KSwgdHMueiksIDAuMCwgMS4wKTtcXG4gY29sb3IucmdiID0gY2VudGVyICsgb2Zmc2V0ICogdDtcXG4gcmV0dXJuIGNvbG9yO1xcbn1cXG52ZWM0IFRvbmVtYXAodmVjNCBjb2xvcilcXG57XFxuIHJldHVybiB2ZWM0KGNvbG9yLnJnYiAvIChMdW1pbmFuY2UoY29sb3IpICsgMS4wKSwgY29sb3IuYSk7XFxufVxcbnZlYzQgVW50b25lbWFwKHZlYzQgY29sb3IpXFxue1xcbiByZXR1cm4gdmVjNChjb2xvci5yZ2IgLyBtYXgoMS4wIC0gTHVtaW5hbmNlKGNvbG9yKSwgMC4wMDAxKSwgY29sb3IuYSk7XFxufVxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWMyIGNsb3Nlc3QgPSBHZXRDbG9zZXN0RnJhZ21lbnQodl9UZXhjb29yZCk7XFxuIHZlYzQgbW90aW9uVGV4ZWwgPSB0ZXh0dXJlMkQodmVsb2NpdHlUZXgsIGNsb3Nlc3QpO1xcbiBpZiAoc3RpbGwpIHtcXG4gZ2xfRnJhZ0NvbG9yID0gVW50b25lbWFwKFxcbiBtaXgoXFxuIFRvbmVtYXAodGV4dHVyZTJEKGN1cnJUZXgsIHZfVGV4Y29vcmQpKSxcXG4gVG9uZW1hcCh0ZXh0dXJlMkQocHJldlRleCwgdl9UZXhjb29yZCkpLFxcbiBzdGlsbEJsZW5kaW5nXFxuIClcXG4gKTtcXG4gcmV0dXJuO1xcbiB9XFxuIGlmIChtb3Rpb25UZXhlbC5hIDwgMC4xKSB7XFxuIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRChjdXJyVGV4LCB2X1RleGNvb3JkKTtcXG4gcmV0dXJuO1xcbiB9XFxuIHZlYzIgbW90aW9uID0gbW90aW9uVGV4ZWwucmcgLSAwLjU7XFxuIHZlYzIgayA9IHRleGVsU2l6ZS54eTtcXG4gdmVjMiB1diA9IHZfVGV4Y29vcmQ7XFxuIHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQoY3VyclRleCwgdXYpO1xcbiB2ZWM0IHRvcExlZnQgPSB0ZXh0dXJlMkQoY3VyclRleCwgdXYgLSBrICogMC41KTtcXG4gdmVjNCBib3R0b21SaWdodCA9IHRleHR1cmUyRChjdXJyVGV4LCB1diArIGsgKiAwLjUpO1xcbiB2ZWM0IGNvcm5lcnMgPSA0LjAgKiAodG9wTGVmdCArIGJvdHRvbVJpZ2h0KSAtIDIuMCAqIGNvbG9yO1xcbiB2ZWM0IGF2ZXJhZ2UgPSAoY29ybmVycyArIGNvbG9yKSAqIDAuMTQyODU3O1xcbiB2ZWM0IGhpc3RvcnkgPSB0ZXh0dXJlMkQocHJldlRleCwgdl9UZXhjb29yZCAtIG1vdGlvbik7XFxuIGZsb2F0IG1vdGlvbkxlbmd0aCA9IGxlbmd0aChtb3Rpb24pO1xcbiB2ZWMyIGx1bWEgPSB2ZWMyKEx1bWluYW5jZShhdmVyYWdlKSwgTHVtaW5hbmNlKGNvbG9yKSk7XFxuIGZsb2F0IG51ZGdlID0gbWl4KDQuMCwgMC4yNSwgY2xhbXAobW90aW9uTGVuZ3RoICogMTAwLjAsIDAuMCwgMS4wKSkgKiBhYnMobHVtYS54IC0gbHVtYS55KTtcXG4gdmVjNCBtaW5pbXVtID0gbWluKGJvdHRvbVJpZ2h0LCB0b3BMZWZ0KSAtIG51ZGdlO1xcbiB2ZWM0IG1heGltdW0gPSBtYXgodG9wTGVmdCwgYm90dG9tUmlnaHQpICsgbnVkZ2U7XFxuIGhpc3RvcnkgPSBDbGlwVG9BQUJCKGhpc3RvcnksIG1pbmltdW0ueHl6LCBtYXhpbXVtLnh5eik7XFxuIGZsb2F0IHdlaWdodCA9IGNsYW1wKFxcbiBtaXgoc3RpbGxCbGVuZGluZywgbW90aW9uQmxlbmRpbmcsIG1vdGlvbkxlbmd0aCAqIG1vdGlvbkFtcGxpZmljYXRpb24pLFxcbiBtb3Rpb25CbGVuZGluZywgc3RpbGxCbGVuZGluZ1xcbiApO1xcbiBjb2xvciA9IG1peChUb25lbWFwKGNvbG9yKSwgVG9uZW1hcChoaXN0b3J5KSwgd2VpZ2h0KTtcXG4gY29sb3IgPSBVbnRvbmVtYXAoY2xhbXAoY29sb3IsIDAuMCwgMS4wKSk7XFxuIGdsX0ZyYWdDb2xvciA9IGNvbG9yO1xcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wtYWR2YW5jZWQtcmVuZGVyZXIvc3JjL1RBQTMuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMjA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///207\n");

/***/ }),
/* 208 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    // If enable shadow\n    shadow: {\n        enable: true,\n        kernelSize: 6,\n        blurSize: 2\n    },\n\n    temporalSuperSampling: {\n        // If support dynamic scene\n        dynamic: true,\n        enable: 'auto'\n    },\n\n    // Configuration about post effects.\n    postEffect: {\n        // If enable post effects.\n        enable: true,\n        // Configuration about bloom post effect\n        bloom: {\n            // If enable bloom\n            enable: true,\n            // Intensity of bloom\n            intensity: 0.1\n        },\n        // Configuration about depth of field\n        depthOfField: {\n            enable: false,\n            // Focal distance of camera in word space.\n            focalDistance: 5,\n            // Focal range of camera in word space. in this range image will be absolutely sharp.\n            focalRange: 1,\n            // Max out of focus blur radius.\n            blurRadius: 20,\n            // fstop of camera. Smaller fstop will have shallow depth of field\n            aperture: 5.6,\n            // Blur quality. 'low'|'medium'|'high'|'ultra'\n            quality: 'medium'\n        },\n        // Configuration about screen space ambient occulusion\n        screenSpaceAmbientOcclusion: {\n            // If enable SSAO\n            enable: false,\n            // Sampling radius in work space.\n            // Larger will produce more soft concat shadow.\n            // But also needs higher quality or it will have more obvious artifacts\n            radius: 0.2,\n            // Quality of SSAO. 'low'|'medium'|'high'|'ultra'\n            quality: 'medium',\n            // Intensity of SSAO\n            intensity: 1,\n            temporalFilter: false\n        },\n        // Configuration about screen space reflection\n        screenSpaceReflection: {\n            enable: false,\n            // If physically corrected.\n            physical: false,\n            // Quality of SSR. 'low'|'medium'|'high'|'ultra'\n            quality: 'medium',\n            // Surface with less roughness will have reflection.\n            maxRoughness: 0.8\n        },\n        // Configuration about color correction\n        colorCorrection: {\n            // If enable color correction\n            enable: true,\n            exposure: 0,\n            brightness: 0,\n            contrast: 1,\n            saturation: 1,\n            // Lookup texture for color correction.\n            // See https://ecomfe.github.io/echarts-doc/public/cn/option-gl.html#globe.postEffect.colorCorrection.lookupTexture\n            lookupTexture: ''\n        },\n        FXAA: {\n            // If enable FXAA\n            enable: false\n        }\n    }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjA4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvZGVmYXVsdEdyYXBoaWNDb25maWcuanM/MTM1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCB7XG4gICAgLy8gSWYgZW5hYmxlIHNoYWRvd1xuICAgIHNoYWRvdzoge1xuICAgICAgICBlbmFibGU6IHRydWUsXG4gICAgICAgIGtlcm5lbFNpemU6IDYsXG4gICAgICAgIGJsdXJTaXplOiAyXG4gICAgfSxcblxuICAgIHRlbXBvcmFsU3VwZXJTYW1wbGluZzoge1xuICAgICAgICAvLyBJZiBzdXBwb3J0IGR5bmFtaWMgc2NlbmVcbiAgICAgICAgZHluYW1pYzogdHJ1ZSxcbiAgICAgICAgZW5hYmxlOiAnYXV0bydcbiAgICB9LFxuXG4gICAgLy8gQ29uZmlndXJhdGlvbiBhYm91dCBwb3N0IGVmZmVjdHMuXG4gICAgcG9zdEVmZmVjdDoge1xuICAgICAgICAvLyBJZiBlbmFibGUgcG9zdCBlZmZlY3RzLlxuICAgICAgICBlbmFibGU6IHRydWUsXG4gICAgICAgIC8vIENvbmZpZ3VyYXRpb24gYWJvdXQgYmxvb20gcG9zdCBlZmZlY3RcbiAgICAgICAgYmxvb206IHtcbiAgICAgICAgICAgIC8vIElmIGVuYWJsZSBibG9vbVxuICAgICAgICAgICAgZW5hYmxlOiB0cnVlLFxuICAgICAgICAgICAgLy8gSW50ZW5zaXR5IG9mIGJsb29tXG4gICAgICAgICAgICBpbnRlbnNpdHk6IDAuMVxuICAgICAgICB9LFxuICAgICAgICAvLyBDb25maWd1cmF0aW9uIGFib3V0IGRlcHRoIG9mIGZpZWxkXG4gICAgICAgIGRlcHRoT2ZGaWVsZDoge1xuICAgICAgICAgICAgZW5hYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIEZvY2FsIGRpc3RhbmNlIG9mIGNhbWVyYSBpbiB3b3JkIHNwYWNlLlxuICAgICAgICAgICAgZm9jYWxEaXN0YW5jZTogNSxcbiAgICAgICAgICAgIC8vIEZvY2FsIHJhbmdlIG9mIGNhbWVyYSBpbiB3b3JkIHNwYWNlLiBpbiB0aGlzIHJhbmdlIGltYWdlIHdpbGwgYmUgYWJzb2x1dGVseSBzaGFycC5cbiAgICAgICAgICAgIGZvY2FsUmFuZ2U6IDEsXG4gICAgICAgICAgICAvLyBNYXggb3V0IG9mIGZvY3VzIGJsdXIgcmFkaXVzLlxuICAgICAgICAgICAgYmx1clJhZGl1czogMjAsXG4gICAgICAgICAgICAvLyBmc3RvcCBvZiBjYW1lcmEuIFNtYWxsZXIgZnN0b3Agd2lsbCBoYXZlIHNoYWxsb3cgZGVwdGggb2YgZmllbGRcbiAgICAgICAgICAgIGFwZXJ0dXJlOiA1LjYsXG4gICAgICAgICAgICAvLyBCbHVyIHF1YWxpdHkuICdsb3cnfCdtZWRpdW0nfCdoaWdoJ3wndWx0cmEnXG4gICAgICAgICAgICBxdWFsaXR5OiAnbWVkaXVtJ1xuICAgICAgICB9LFxuICAgICAgICAvLyBDb25maWd1cmF0aW9uIGFib3V0IHNjcmVlbiBzcGFjZSBhbWJpZW50IG9jY3VsdXNpb25cbiAgICAgICAgc2NyZWVuU3BhY2VBbWJpZW50T2NjbHVzaW9uOiB7XG4gICAgICAgICAgICAvLyBJZiBlbmFibGUgU1NBT1xuICAgICAgICAgICAgZW5hYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIFNhbXBsaW5nIHJhZGl1cyBpbiB3b3JrIHNwYWNlLlxuICAgICAgICAgICAgLy8gTGFyZ2VyIHdpbGwgcHJvZHVjZSBtb3JlIHNvZnQgY29uY2F0IHNoYWRvdy5cbiAgICAgICAgICAgIC8vIEJ1dCBhbHNvIG5lZWRzIGhpZ2hlciBxdWFsaXR5IG9yIGl0IHdpbGwgaGF2ZSBtb3JlIG9idmlvdXMgYXJ0aWZhY3RzXG4gICAgICAgICAgICByYWRpdXM6IDAuMixcbiAgICAgICAgICAgIC8vIFF1YWxpdHkgb2YgU1NBTy4gJ2xvdyd8J21lZGl1bSd8J2hpZ2gnfCd1bHRyYSdcbiAgICAgICAgICAgIHF1YWxpdHk6ICdtZWRpdW0nLFxuICAgICAgICAgICAgLy8gSW50ZW5zaXR5IG9mIFNTQU9cbiAgICAgICAgICAgIGludGVuc2l0eTogMSxcbiAgICAgICAgICAgIHRlbXBvcmFsRmlsdGVyOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICAvLyBDb25maWd1cmF0aW9uIGFib3V0IHNjcmVlbiBzcGFjZSByZWZsZWN0aW9uXG4gICAgICAgIHNjcmVlblNwYWNlUmVmbGVjdGlvbjoge1xuICAgICAgICAgICAgZW5hYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIElmIHBoeXNpY2FsbHkgY29ycmVjdGVkLlxuICAgICAgICAgICAgcGh5c2ljYWw6IGZhbHNlLFxuICAgICAgICAgICAgLy8gUXVhbGl0eSBvZiBTU1IuICdsb3cnfCdtZWRpdW0nfCdoaWdoJ3wndWx0cmEnXG4gICAgICAgICAgICBxdWFsaXR5OiAnbWVkaXVtJyxcbiAgICAgICAgICAgIC8vIFN1cmZhY2Ugd2l0aCBsZXNzIHJvdWdobmVzcyB3aWxsIGhhdmUgcmVmbGVjdGlvbi5cbiAgICAgICAgICAgIG1heFJvdWdobmVzczogMC44XG4gICAgICAgIH0sXG4gICAgICAgIC8vIENvbmZpZ3VyYXRpb24gYWJvdXQgY29sb3IgY29ycmVjdGlvblxuICAgICAgICBjb2xvckNvcnJlY3Rpb246IHtcbiAgICAgICAgICAgIC8vIElmIGVuYWJsZSBjb2xvciBjb3JyZWN0aW9uXG4gICAgICAgICAgICBlbmFibGU6IHRydWUsXG4gICAgICAgICAgICBleHBvc3VyZTogMCxcbiAgICAgICAgICAgIGJyaWdodG5lc3M6IDAsXG4gICAgICAgICAgICBjb250cmFzdDogMSxcbiAgICAgICAgICAgIHNhdHVyYXRpb246IDEsXG4gICAgICAgICAgICAvLyBMb29rdXAgdGV4dHVyZSBmb3IgY29sb3IgY29ycmVjdGlvbi5cbiAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2Vjb21mZS5naXRodWIuaW8vZWNoYXJ0cy1kb2MvcHVibGljL2NuL29wdGlvbi1nbC5odG1sI2dsb2JlLnBvc3RFZmZlY3QuY29sb3JDb3JyZWN0aW9uLmxvb2t1cFRleHR1cmVcbiAgICAgICAgICAgIGxvb2t1cFRleHR1cmU6ICcnXG4gICAgICAgIH0sXG4gICAgICAgIEZYQUE6IHtcbiAgICAgICAgICAgIC8vIElmIGVuYWJsZSBGWEFBXG4gICAgICAgICAgICBlbmFibGU6IGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvZGVmYXVsdEdyYXBoaWNDb25maWcuanNcbi8vIG1vZHVsZSBpZCA9IDIwOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///208\n");

/***/ }),
/* 209 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export $override */\n/* unused harmony export clone */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = merge;\n/* unused harmony export mergeAll */\n/* unused harmony export extend */\n/* unused harmony export defaults */\n/* unused harmony export createCanvas */\n/* unused harmony export getContext */\n/* unused harmony export indexOf */\n/* unused harmony export inherits */\n/* unused harmony export mixin */\n/* unused harmony export isArrayLike */\n/* unused harmony export each */\n/* unused harmony export map */\n/* unused harmony export reduce */\n/* unused harmony export filter */\n/* unused harmony export find */\n/* unused harmony export bind */\n/* unused harmony export curry */\n/* unused harmony export isArray */\n/* unused harmony export isFunction */\n/* unused harmony export isString */\n/* unused harmony export isObject */\n/* unused harmony export isBuiltInObject */\n/* unused harmony export isTypedArray */\n/* unused harmony export isDom */\n/* unused harmony export eqNaN */\n/* unused harmony export retrieve */\n/* unused harmony export retrieve2 */\n/* unused harmony export retrieve3 */\n/* unused harmony export slice */\n/* unused harmony export normalizeCssArray */\n/* unused harmony export assert */\n/* unused harmony export trim */\n/* unused harmony export setAsPrimitive */\n/* unused harmony export isPrimitive */\n/* unused harmony export createHashMap */\n/* unused harmony export concatArray */\n/* unused harmony export noop */\n/**\n * @module zrender/core/util\n */\n\n// mergeDate\nvar BUILTIN_OBJECT = {\n    '[object Function]': 1,\n    '[object RegExp]': 1,\n    '[object Date]': 1,\n    '[object Error]': 1,\n    '[object CanvasGradient]': 1,\n    '[object CanvasPattern]': 1,\n    // For node-canvas\n    '[object Image]': 1,\n    '[object Canvas]': 1\n};\n\nvar TYPED_ARRAY = {\n    '[object Int8Array]': 1,\n    '[object Uint8Array]': 1,\n    '[object Uint8ClampedArray]': 1,\n    '[object Int16Array]': 1,\n    '[object Uint16Array]': 1,\n    '[object Int32Array]': 1,\n    '[object Uint32Array]': 1,\n    '[object Float32Array]': 1,\n    '[object Float64Array]': 1\n};\n\nvar objToString = Object.prototype.toString;\n\nvar arrayProto = Array.prototype;\nvar nativeForEach = arrayProto.forEach;\nvar nativeFilter = arrayProto.filter;\nvar nativeSlice = arrayProto.slice;\nvar nativeMap = arrayProto.map;\nvar nativeReduce = arrayProto.reduce;\n\n// Avoid assign to an exported variable, for transforming to cjs.\nvar methods = {};\n\nfunction $override(name, fn) {\n    // Clear ctx instance for different environment\n    if (name === 'createCanvas') {\n        _ctx = null;\n    }\n\n    methods[name] = fn;\n}\n\n/**\n * Those data types can be cloned:\n *     Plain object, Array, TypedArray, number, string, null, undefined.\n * Those data types will be assgined using the orginal data:\n *     BUILTIN_OBJECT\n * Instance of user defined class will be cloned to a plain object, without\n * properties in prototype.\n * Other data types is not supported (not sure what will happen).\n *\n * Caution: do not support clone Date, for performance consideration.\n * (There might be a large number of date in `series.data`).\n * So date should not be modified in and out of echarts.\n *\n * @param {*} source\n * @return {*} new\n */\nfunction clone(source) {\n    if (source == null || typeof source !== 'object') {\n        return source;\n    }\n\n    var result = source;\n    var typeStr = objToString.call(source);\n\n    if (typeStr === '[object Array]') {\n        if (!isPrimitive(source)) {\n            result = [];\n            for (var i = 0, len = source.length; i < len; i++) {\n                result[i] = clone(source[i]);\n            }\n        }\n    }\n    else if (TYPED_ARRAY[typeStr]) {\n        if (!isPrimitive(source)) {\n            var Ctor = source.constructor;\n            if (source.constructor.from) {\n                result = Ctor.from(source);\n            }\n            else {\n                result = new Ctor(source.length);\n                for (var i = 0, len = source.length; i < len; i++) {\n                    result[i] = clone(source[i]);\n                }\n            }\n        }\n    }\n    else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n        result = {};\n        for (var key in source) {\n            if (source.hasOwnProperty(key)) {\n                result[key] = clone(source[key]);\n            }\n        }\n    }\n\n    return result;\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} target\n * @param {*} source\n * @param {boolean} [overwrite=false]\n */\nfunction merge(target, source, overwrite) {\n    // We should escapse that source is string\n    // and enter for ... in ...\n    if (!isObject(source) || !isObject(target)) {\n        return overwrite ? clone(source) : target;\n    }\n\n    for (var key in source) {\n        if (source.hasOwnProperty(key)) {\n            var targetProp = target[key];\n            var sourceProp = source[key];\n\n            if (isObject(sourceProp)\n                && isObject(targetProp)\n                && !isArray(sourceProp)\n                && !isArray(targetProp)\n                && !isDom(sourceProp)\n                && !isDom(targetProp)\n                && !isBuiltInObject(sourceProp)\n                && !isBuiltInObject(targetProp)\n                && !isPrimitive(sourceProp)\n                && !isPrimitive(targetProp)\n            ) {\n                // merge\n                merge(targetProp, sourceProp, overwrite);\n            }\n            else if (overwrite || !(key in target)) {\n                // overwritetrue\n                // NOTE target[key] \n                target[key] = clone(source[key], true);\n            }\n        }\n    }\n\n    return target;\n}\n\n/**\n * @param {Array} targetAndSources The first item is target, and the rests are source.\n * @param {boolean} [overwrite=false]\n * @return {*} target\n */\nfunction mergeAll(targetAndSources, overwrite) {\n    var result = targetAndSources[0];\n    for (var i = 1, len = targetAndSources.length; i < len; i++) {\n        result = merge(result, targetAndSources[i], overwrite);\n    }\n    return result;\n}\n\n/**\n * @param {*} target\n * @param {*} source\n * @memberOf module:zrender/core/util\n */\nfunction extend(target, source) {\n    for (var key in source) {\n        if (source.hasOwnProperty(key)) {\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\n\n/**\n * @param {*} target\n * @param {*} source\n * @param {boolean} [overlay=false]\n * @memberOf module:zrender/core/util\n */\nfunction defaults(target, source, overlay) {\n    for (var key in source) {\n        if (source.hasOwnProperty(key)\n            && (overlay ? source[key] != null : target[key] == null)\n        ) {\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\n\nvar createCanvas = function () {\n    return methods.createCanvas();\n};\n\nmethods.createCanvas = function () {\n    return document.createElement('canvas');\n};\n\n// FIXME\nvar _ctx;\n\nfunction getContext() {\n    if (!_ctx) {\n        // Use util.createCanvas instead of createCanvas\n        // because createCanvas may be overwritten in different environment\n        _ctx = createCanvas().getContext('2d');\n    }\n    return _ctx;\n}\n\n/**\n * index\n * @memberOf module:zrender/core/util\n */\nfunction indexOf(array, value) {\n    if (array) {\n        if (array.indexOf) {\n            return array.indexOf(value);\n        }\n        for (var i = 0, len = array.length; i < len; i++) {\n            if (array[i] === value) {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\n\n/**\n * \n *\n * @memberOf module:zrender/core/util\n * @param {Function} clazz \n * @param {Function} baseClazz \n */\nfunction inherits(clazz, baseClazz) {\n    var clazzPrototype = clazz.prototype;\n    function F() {}\n    F.prototype = baseClazz.prototype;\n    clazz.prototype = new F();\n\n    for (var prop in clazzPrototype) {\n        clazz.prototype[prop] = clazzPrototype[prop];\n    }\n    clazz.prototype.constructor = clazz;\n    clazz.superClass = baseClazz;\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {Object|Function} target\n * @param {Object|Function} sorce\n * @param {boolean} overlay\n */\nfunction mixin(target, source, overlay) {\n    target = 'prototype' in target ? target.prototype : target;\n    source = 'prototype' in source ? source.prototype : source;\n\n    defaults(target, source, overlay);\n}\n\n/**\n * Consider typed array.\n * @param {Array|TypedArray} data\n */\nfunction isArrayLike(data) {\n    if (!data) {\n        return;\n    }\n    if (typeof data === 'string') {\n        return false;\n    }\n    return typeof data.length === 'number';\n}\n\n/**\n * \n * @memberOf module:zrender/core/util\n * @param {Object|Array} obj\n * @param {Function} cb\n * @param {*} [context]\n */\nfunction each(obj, cb, context) {\n    if (!(obj && cb)) {\n        return;\n    }\n    if (obj.forEach && obj.forEach === nativeForEach) {\n        obj.forEach(cb, context);\n    }\n    else if (obj.length === +obj.length) {\n        for (var i = 0, len = obj.length; i < len; i++) {\n            cb.call(context, obj[i], i, obj);\n        }\n    }\n    else {\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                cb.call(context, obj[key], key, obj);\n            }\n        }\n    }\n}\n\n/**\n * \n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {Array}\n */\nfunction map(obj, cb, context) {\n    if (!(obj && cb)) {\n        return;\n    }\n    if (obj.map && obj.map === nativeMap) {\n        return obj.map(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = obj.length; i < len; i++) {\n            result.push(cb.call(context, obj[i], i, obj));\n        }\n        return result;\n    }\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {Object} [memo]\n * @param {*} [context]\n * @return {Array}\n */\nfunction reduce(obj, cb, memo, context) {\n    if (!(obj && cb)) {\n        return;\n    }\n    if (obj.reduce && obj.reduce === nativeReduce) {\n        return obj.reduce(cb, memo, context);\n    }\n    else {\n        for (var i = 0, len = obj.length; i < len; i++) {\n            memo = cb.call(context, memo, obj[i], i, obj);\n        }\n        return memo;\n    }\n}\n\n/**\n * \n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {Array}\n */\nfunction filter(obj, cb, context) {\n    if (!(obj && cb)) {\n        return;\n    }\n    if (obj.filter && obj.filter === nativeFilter) {\n        return obj.filter(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = obj.length; i < len; i++) {\n            if (cb.call(context, obj[i], i, obj)) {\n                result.push(obj[i]);\n            }\n        }\n        return result;\n    }\n}\n\n/**\n * \n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {*}\n */\nfunction find(obj, cb, context) {\n    if (!(obj && cb)) {\n        return;\n    }\n    for (var i = 0, len = obj.length; i < len; i++) {\n        if (cb.call(context, obj[i], i, obj)) {\n            return obj[i];\n        }\n    }\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {Function} func\n * @param {*} context\n * @return {Function}\n */\nfunction bind(func, context) {\n    var args = nativeSlice.call(arguments, 2);\n    return function () {\n        return func.apply(context, args.concat(nativeSlice.call(arguments)));\n    };\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {Function} func\n * @return {Function}\n */\nfunction curry(func) {\n    var args = nativeSlice.call(arguments, 1);\n    return function () {\n        return func.apply(this, args.concat(nativeSlice.call(arguments)));\n    };\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\nfunction isArray(value) {\n    return objToString.call(value) === '[object Array]';\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\nfunction isString(value) {\n    return objToString.call(value) === '[object String]';\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\nfunction isObject(value) {\n    // Avoid a V8 JIT bug in Chrome 19-20.\n    // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n    var type = typeof value;\n    return type === 'function' || (!!value && type === 'object');\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\nfunction isBuiltInObject(value) {\n    return !!BUILTIN_OBJECT[objToString.call(value)];\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\nfunction isTypedArray(value) {\n    return !!TYPED_ARRAY[objToString.call(value)];\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\nfunction isDom(value) {\n    return typeof value === 'object'\n        && typeof value.nodeType === 'number'\n        && typeof value.ownerDocument === 'object';\n}\n\n/**\n * Whether is exactly NaN. Notice isNaN('a') returns true.\n * @param {*} value\n * @return {boolean}\n */\nfunction eqNaN(value) {\n    return value !== value;\n}\n\n/**\n * If value1 is not null, then return value1, otherwise judget rest of values.\n * Low performance.\n * @memberOf module:zrender/core/util\n * @return {*} Final value\n */\nfunction retrieve(values) {\n    for (var i = 0, len = arguments.length; i < len; i++) {\n        if (arguments[i] != null) {\n            return arguments[i];\n        }\n    }\n}\n\nfunction retrieve2(value0, value1) {\n    return value0 != null\n        ? value0\n        : value1;\n}\n\nfunction retrieve3(value0, value1, value2) {\n    return value0 != null\n        ? value0\n        : value1 != null\n        ? value1\n        : value2;\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {Array} arr\n * @param {number} startIndex\n * @param {number} endIndex\n * @return {Array}\n */\nfunction slice() {\n    return Function.call.apply(nativeSlice, arguments);\n}\n\n/**\n * Normalize css liked array configuration\n * e.g.\n *  3 => [3, 3, 3, 3]\n *  [4, 2] => [4, 2, 4, 2]\n *  [4, 3, 2] => [4, 3, 2, 3]\n * @param {number|Array.<number>} val\n * @return {Array.<number>}\n */\nfunction normalizeCssArray(val) {\n    if (typeof (val) === 'number') {\n        return [val, val, val, val];\n    }\n    var len = val.length;\n    if (len === 2) {\n        // vertical | horizontal\n        return [val[0], val[1], val[0], val[1]];\n    }\n    else if (len === 3) {\n        // top | horizontal | bottom\n        return [val[0], val[1], val[2], val[1]];\n    }\n    return val;\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {boolean} condition\n * @param {string} message\n */\nfunction assert(condition, message) {\n    if (!condition) {\n        throw new Error(message);\n    }\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {string} str string to be trimed\n * @return {string} trimed string\n */\nfunction trim(str) {\n    if (str == null) {\n        return null;\n    }\n    else if (typeof str.trim === 'function') {\n        return str.trim();\n    }\n    else {\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n}\n\nvar primitiveKey = '__ec_primitive__';\n/**\n * Set an object as primitive to be ignored traversing children in clone or merge\n */\nfunction setAsPrimitive(obj) {\n    obj[primitiveKey] = true;\n}\n\nfunction isPrimitive(obj) {\n    return obj[primitiveKey];\n}\n\n/**\n * @constructor\n * @param {Object} obj Only apply `ownProperty`.\n */\nfunction HashMap(obj) {\n    var isArr = isArray(obj);\n    // Key should not be set on this, otherwise\n    // methods get/set/... may be overrided.\n    this.data = {};\n    var thisMap = this;\n\n    (obj instanceof HashMap)\n        ? obj.each(visit)\n        : (obj && each(obj, visit));\n\n    function visit(value, key) {\n        isArr ? thisMap.set(value, key) : thisMap.set(key, value);\n    }\n}\n\nHashMap.prototype = {\n    constructor: HashMap,\n    // Do not provide `has` method to avoid defining what is `has`.\n    // (We usually treat `null` and `undefined` as the same, different\n    // from ES6 Map).\n    get: function (key) {\n        return this.data.hasOwnProperty(key) ? this.data[key] : null;\n    },\n    set: function (key, value) {\n        // Comparing with invocation chaining, `return value` is more commonly\n        // used in this case: `var someVal = map.set('a', genVal());`\n        return (this.data[key] = value);\n    },\n    // Although util.each can be performed on this hashMap directly, user\n    // should not use the exposed keys, who are prefixed.\n    each: function (cb, context) {\n        context !== void 0 && (cb = bind(cb, context));\n        for (var key in this.data) {\n            this.data.hasOwnProperty(key) && cb(this.data[key], key);\n        }\n    },\n    // Do not use this method if performance sensitive.\n    removeKey: function (key) {\n        delete this.data[key];\n    }\n};\n\nfunction createHashMap(obj) {\n    return new HashMap(obj);\n}\n\nfunction concatArray(a, b) {\n    var newArray = new a.constructor(a.length + b.length);\n    for (var i = 0; i < a.length; i++) {\n        newArray[i] = a[i];\n    }\n    var offset = a.length;\n    for (i = 0; i < b.length; i++) {\n        newArray[i + offset] = b[i];\n    }\n    return newArray;\n}\n\n\nfunction noop() {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjA5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvc3JjL2NvcmUvdXRpbC5qcz8wMTI2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQG1vZHVsZSB6cmVuZGVyL2NvcmUvdXRpbFxuICovXG5cbi8vIOeUqOS6juWkhOeQhm1lcmdl5pe25peg5rOV6YGN5Y6GRGF0ZeetieWvueixoeeahOmXrumimFxudmFyIEJVSUxUSU5fT0JKRUNUID0ge1xuICAgICdbb2JqZWN0IEZ1bmN0aW9uXSc6IDEsXG4gICAgJ1tvYmplY3QgUmVnRXhwXSc6IDEsXG4gICAgJ1tvYmplY3QgRGF0ZV0nOiAxLFxuICAgICdbb2JqZWN0IEVycm9yXSc6IDEsXG4gICAgJ1tvYmplY3QgQ2FudmFzR3JhZGllbnRdJzogMSxcbiAgICAnW29iamVjdCBDYW52YXNQYXR0ZXJuXSc6IDEsXG4gICAgLy8gRm9yIG5vZGUtY2FudmFzXG4gICAgJ1tvYmplY3QgSW1hZ2VdJzogMSxcbiAgICAnW29iamVjdCBDYW52YXNdJzogMVxufTtcblxudmFyIFRZUEVEX0FSUkFZID0ge1xuICAgICdbb2JqZWN0IEludDhBcnJheV0nOiAxLFxuICAgICdbb2JqZWN0IFVpbnQ4QXJyYXldJzogMSxcbiAgICAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nOiAxLFxuICAgICdbb2JqZWN0IEludDE2QXJyYXldJzogMSxcbiAgICAnW29iamVjdCBVaW50MTZBcnJheV0nOiAxLFxuICAgICdbb2JqZWN0IEludDMyQXJyYXldJzogMSxcbiAgICAnW29iamVjdCBVaW50MzJBcnJheV0nOiAxLFxuICAgICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nOiAxLFxuICAgICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nOiAxXG59O1xuXG52YXIgb2JqVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG52YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcbnZhciBuYXRpdmVGb3JFYWNoID0gYXJyYXlQcm90by5mb3JFYWNoO1xudmFyIG5hdGl2ZUZpbHRlciA9IGFycmF5UHJvdG8uZmlsdGVyO1xudmFyIG5hdGl2ZVNsaWNlID0gYXJyYXlQcm90by5zbGljZTtcbnZhciBuYXRpdmVNYXAgPSBhcnJheVByb3RvLm1hcDtcbnZhciBuYXRpdmVSZWR1Y2UgPSBhcnJheVByb3RvLnJlZHVjZTtcblxuLy8gQXZvaWQgYXNzaWduIHRvIGFuIGV4cG9ydGVkIHZhcmlhYmxlLCBmb3IgdHJhbnNmb3JtaW5nIHRvIGNqcy5cbnZhciBtZXRob2RzID0ge307XG5cbmV4cG9ydCBmdW5jdGlvbiAkb3ZlcnJpZGUobmFtZSwgZm4pIHtcbiAgICAvLyBDbGVhciBjdHggaW5zdGFuY2UgZm9yIGRpZmZlcmVudCBlbnZpcm9ubWVudFxuICAgIGlmIChuYW1lID09PSAnY3JlYXRlQ2FudmFzJykge1xuICAgICAgICBfY3R4ID0gbnVsbDtcbiAgICB9XG5cbiAgICBtZXRob2RzW25hbWVdID0gZm47XG59XG5cbi8qKlxuICogVGhvc2UgZGF0YSB0eXBlcyBjYW4gYmUgY2xvbmVkOlxuICogICAgIFBsYWluIG9iamVjdCwgQXJyYXksIFR5cGVkQXJyYXksIG51bWJlciwgc3RyaW5nLCBudWxsLCB1bmRlZmluZWQuXG4gKiBUaG9zZSBkYXRhIHR5cGVzIHdpbGwgYmUgYXNzZ2luZWQgdXNpbmcgdGhlIG9yZ2luYWwgZGF0YTpcbiAqICAgICBCVUlMVElOX09CSkVDVFxuICogSW5zdGFuY2Ugb2YgdXNlciBkZWZpbmVkIGNsYXNzIHdpbGwgYmUgY2xvbmVkIHRvIGEgcGxhaW4gb2JqZWN0LCB3aXRob3V0XG4gKiBwcm9wZXJ0aWVzIGluIHByb3RvdHlwZS5cbiAqIE90aGVyIGRhdGEgdHlwZXMgaXMgbm90IHN1cHBvcnRlZCAobm90IHN1cmUgd2hhdCB3aWxsIGhhcHBlbikuXG4gKlxuICogQ2F1dGlvbjogZG8gbm90IHN1cHBvcnQgY2xvbmUgRGF0ZSwgZm9yIHBlcmZvcm1hbmNlIGNvbnNpZGVyYXRpb24uXG4gKiAoVGhlcmUgbWlnaHQgYmUgYSBsYXJnZSBudW1iZXIgb2YgZGF0ZSBpbiBgc2VyaWVzLmRhdGFgKS5cbiAqIFNvIGRhdGUgc2hvdWxkIG5vdCBiZSBtb2RpZmllZCBpbiBhbmQgb3V0IG9mIGVjaGFydHMuXG4gKlxuICogQHBhcmFtIHsqfSBzb3VyY2VcbiAqIEByZXR1cm4geyp9IG5ld1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoc291cmNlKSB7XG4gICAgaWYgKHNvdXJjZSA9PSBudWxsIHx8IHR5cGVvZiBzb3VyY2UgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfVxuXG4gICAgdmFyIHJlc3VsdCA9IHNvdXJjZTtcbiAgICB2YXIgdHlwZVN0ciA9IG9ialRvU3RyaW5nLmNhbGwoc291cmNlKTtcblxuICAgIGlmICh0eXBlU3RyID09PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICAgIGlmICghaXNQcmltaXRpdmUoc291cmNlKSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc291cmNlLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2ldID0gY2xvbmUoc291cmNlW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChUWVBFRF9BUlJBWVt0eXBlU3RyXSkge1xuICAgICAgICBpZiAoIWlzUHJpbWl0aXZlKHNvdXJjZSkpIHtcbiAgICAgICAgICAgIHZhciBDdG9yID0gc291cmNlLmNvbnN0cnVjdG9yO1xuICAgICAgICAgICAgaWYgKHNvdXJjZS5jb25zdHJ1Y3Rvci5mcm9tKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gQ3Rvci5mcm9tKHNvdXJjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgQ3Rvcihzb3VyY2UubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc291cmNlLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGNsb25lKHNvdXJjZVtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKCFCVUlMVElOX09CSkVDVFt0eXBlU3RyXSAmJiAhaXNQcmltaXRpdmUoc291cmNlKSAmJiAhaXNEb20oc291cmNlKSkge1xuICAgICAgICByZXN1bHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBjbG9uZShzb3VyY2Vba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7Kn0gdGFyZ2V0XG4gKiBAcGFyYW0geyp9IHNvdXJjZVxuICogQHBhcmFtIHtib29sZWFufSBbb3ZlcndyaXRlPWZhbHNlXVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2UodGFyZ2V0LCBzb3VyY2UsIG92ZXJ3cml0ZSkge1xuICAgIC8vIFdlIHNob3VsZCBlc2NhcHNlIHRoYXQgc291cmNlIGlzIHN0cmluZ1xuICAgIC8vIGFuZCBlbnRlciBmb3IgLi4uIGluIC4uLlxuICAgIGlmICghaXNPYmplY3Qoc291cmNlKSB8fCAhaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgICByZXR1cm4gb3ZlcndyaXRlID8gY2xvbmUoc291cmNlKSA6IHRhcmdldDtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldFByb3AgPSB0YXJnZXRba2V5XTtcbiAgICAgICAgICAgIHZhciBzb3VyY2VQcm9wID0gc291cmNlW2tleV07XG5cbiAgICAgICAgICAgIGlmIChpc09iamVjdChzb3VyY2VQcm9wKVxuICAgICAgICAgICAgICAgICYmIGlzT2JqZWN0KHRhcmdldFByb3ApXG4gICAgICAgICAgICAgICAgJiYgIWlzQXJyYXkoc291cmNlUHJvcClcbiAgICAgICAgICAgICAgICAmJiAhaXNBcnJheSh0YXJnZXRQcm9wKVxuICAgICAgICAgICAgICAgICYmICFpc0RvbShzb3VyY2VQcm9wKVxuICAgICAgICAgICAgICAgICYmICFpc0RvbSh0YXJnZXRQcm9wKVxuICAgICAgICAgICAgICAgICYmICFpc0J1aWx0SW5PYmplY3Qoc291cmNlUHJvcClcbiAgICAgICAgICAgICAgICAmJiAhaXNCdWlsdEluT2JqZWN0KHRhcmdldFByb3ApXG4gICAgICAgICAgICAgICAgJiYgIWlzUHJpbWl0aXZlKHNvdXJjZVByb3ApXG4gICAgICAgICAgICAgICAgJiYgIWlzUHJpbWl0aXZlKHRhcmdldFByb3ApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzpnIDopoHpgJLlvZLopobnm5bvvIzlsLHpgJLlvZLosIPnlKhtZXJnZVxuICAgICAgICAgICAgICAgIG1lcmdlKHRhcmdldFByb3AsIHNvdXJjZVByb3AsIG92ZXJ3cml0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvdmVyd3JpdGUgfHwgIShrZXkgaW4gdGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIC8vIOWQpuWImeWPquWkhOeQhm92ZXJ3cml0ZeS4unRydWXvvIzmiJbogIXlnKjnm67moIflr7nosaHkuK3msqHmnInmraTlsZ7mgKfnmoTmg4XlhrVcbiAgICAgICAgICAgICAgICAvLyBOT1RF77yM5ZyoIHRhcmdldFtrZXldIOS4jeWtmOWcqOeahOaXtuWAmeS5n+aYr+ebtOaOpeimhuebllxuICAgICAgICAgICAgICAgIHRhcmdldFtrZXldID0gY2xvbmUoc291cmNlW2tleV0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5fSB0YXJnZXRBbmRTb3VyY2VzIFRoZSBmaXJzdCBpdGVtIGlzIHRhcmdldCwgYW5kIHRoZSByZXN0cyBhcmUgc291cmNlLlxuICogQHBhcmFtIHtib29sZWFufSBbb3ZlcndyaXRlPWZhbHNlXVxuICogQHJldHVybiB7Kn0gdGFyZ2V0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUFsbCh0YXJnZXRBbmRTb3VyY2VzLCBvdmVyd3JpdGUpIHtcbiAgICB2YXIgcmVzdWx0ID0gdGFyZ2V0QW5kU291cmNlc1swXTtcbiAgICBmb3IgKHZhciBpID0gMSwgbGVuID0gdGFyZ2V0QW5kU291cmNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICByZXN1bHQgPSBtZXJnZShyZXN1bHQsIHRhcmdldEFuZFNvdXJjZXNbaV0sIG92ZXJ3cml0ZSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHsqfSB0YXJnZXRcbiAqIEBwYXJhbSB7Kn0gc291cmNlXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnpyZW5kZXIvY29yZS91dGlsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Kn0gdGFyZ2V0XG4gKiBAcGFyYW0geyp9IHNvdXJjZVxuICogQHBhcmFtIHtib29sZWFufSBbb3ZlcmxheT1mYWxzZV1cbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRzKHRhcmdldCwgc291cmNlLCBvdmVybGF5KSB7XG4gICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KGtleSlcbiAgICAgICAgICAgICYmIChvdmVybGF5ID8gc291cmNlW2tleV0gIT0gbnVsbCA6IHRhcmdldFtrZXldID09IG51bGwpXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuXG5leHBvcnQgdmFyIGNyZWF0ZUNhbnZhcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbWV0aG9kcy5jcmVhdGVDYW52YXMoKTtcbn07XG5cbm1ldGhvZHMuY3JlYXRlQ2FudmFzID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbn07XG5cbi8vIEZJWE1FXG52YXIgX2N0eDtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRleHQoKSB7XG4gICAgaWYgKCFfY3R4KSB7XG4gICAgICAgIC8vIFVzZSB1dGlsLmNyZWF0ZUNhbnZhcyBpbnN0ZWFkIG9mIGNyZWF0ZUNhbnZhc1xuICAgICAgICAvLyBiZWNhdXNlIGNyZWF0ZUNhbnZhcyBtYXkgYmUgb3ZlcndyaXR0ZW4gaW4gZGlmZmVyZW50IGVudmlyb25tZW50XG4gICAgICAgIF9jdHggPSBjcmVhdGVDYW52YXMoKS5nZXRDb250ZXh0KCcyZCcpO1xuICAgIH1cbiAgICByZXR1cm4gX2N0eDtcbn1cblxuLyoqXG4gKiDmn6Xor6LmlbDnu4TkuK3lhYPntKDnmoRpbmRleFxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5kZXhPZihhcnJheSwgdmFsdWUpIHtcbiAgICBpZiAoYXJyYXkpIHtcbiAgICAgICAgaWYgKGFycmF5LmluZGV4T2YpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnJheS5pbmRleE9mKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhcnJheVtpXSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG59XG5cbi8qKlxuICog5p6E6YCg57G757un5om/5YWz57O7XG4gKlxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2xhenog5rqQ57G7XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBiYXNlQ2xhenog5Z+657G7XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmhlcml0cyhjbGF6eiwgYmFzZUNsYXp6KSB7XG4gICAgdmFyIGNsYXp6UHJvdG90eXBlID0gY2xhenoucHJvdG90eXBlO1xuICAgIGZ1bmN0aW9uIEYoKSB7fVxuICAgIEYucHJvdG90eXBlID0gYmFzZUNsYXp6LnByb3RvdHlwZTtcbiAgICBjbGF6ei5wcm90b3R5cGUgPSBuZXcgRigpO1xuXG4gICAgZm9yICh2YXIgcHJvcCBpbiBjbGF6elByb3RvdHlwZSkge1xuICAgICAgICBjbGF6ei5wcm90b3R5cGVbcHJvcF0gPSBjbGF6elByb3RvdHlwZVtwcm9wXTtcbiAgICB9XG4gICAgY2xhenoucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY2xheno7XG4gICAgY2xhenouc3VwZXJDbGFzcyA9IGJhc2VDbGF6ejtcbn1cblxuLyoqXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnpyZW5kZXIvY29yZS91dGlsXG4gKiBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gdGFyZ2V0XG4gKiBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gc29yY2VcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb3ZlcmxheVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWl4aW4odGFyZ2V0LCBzb3VyY2UsIG92ZXJsYXkpIHtcbiAgICB0YXJnZXQgPSAncHJvdG90eXBlJyBpbiB0YXJnZXQgPyB0YXJnZXQucHJvdG90eXBlIDogdGFyZ2V0O1xuICAgIHNvdXJjZSA9ICdwcm90b3R5cGUnIGluIHNvdXJjZSA/IHNvdXJjZS5wcm90b3R5cGUgOiBzb3VyY2U7XG5cbiAgICBkZWZhdWx0cyh0YXJnZXQsIHNvdXJjZSwgb3ZlcmxheSk7XG59XG5cbi8qKlxuICogQ29uc2lkZXIgdHlwZWQgYXJyYXkuXG4gKiBAcGFyYW0ge0FycmF5fFR5cGVkQXJyYXl9IGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXlMaWtlKGRhdGEpIHtcbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVvZiBkYXRhLmxlbmd0aCA9PT0gJ251bWJlcic7XG59XG5cbi8qKlxuICog5pWw57uE5oiW5a+56LGh6YGN5Y6GXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnpyZW5kZXIvY29yZS91dGlsXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHsqfSBbY29udGV4dF1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVhY2gob2JqLCBjYiwgY29udGV4dCkge1xuICAgIGlmICghKG9iaiAmJiBjYikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAob2JqLmZvckVhY2ggJiYgb2JqLmZvckVhY2ggPT09IG5hdGl2ZUZvckVhY2gpIHtcbiAgICAgICAgb2JqLmZvckVhY2goY2IsIGNvbnRleHQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChvYmoubGVuZ3RoID09PSArb2JqLmxlbmd0aCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gb2JqLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjYi5jYWxsKGNvbnRleHQsIG9ialtpXSwgaSwgb2JqKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgY2IuY2FsbChjb250ZXh0LCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIOaVsOe7hOaYoOWwhFxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHtBcnJheX0gb2JqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHsqfSBbY29udGV4dF1cbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwKG9iaiwgY2IsIGNvbnRleHQpIHtcbiAgICBpZiAoIShvYmogJiYgY2IpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG9iai5tYXAgJiYgb2JqLm1hcCA9PT0gbmF0aXZlTWFwKSB7XG4gICAgICAgIHJldHVybiBvYmoubWFwKGNiLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goY2IuY2FsbChjb250ZXh0LCBvYmpbaV0sIGksIG9iaikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7QXJyYXl9IG9ialxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqIEBwYXJhbSB7T2JqZWN0fSBbbWVtb11cbiAqIEBwYXJhbSB7Kn0gW2NvbnRleHRdXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZShvYmosIGNiLCBtZW1vLCBjb250ZXh0KSB7XG4gICAgaWYgKCEob2JqICYmIGNiKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvYmoucmVkdWNlICYmIG9iai5yZWR1Y2UgPT09IG5hdGl2ZVJlZHVjZSkge1xuICAgICAgICByZXR1cm4gb2JqLnJlZHVjZShjYiwgbWVtbywgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gb2JqLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBtZW1vID0gY2IuY2FsbChjb250ZXh0LCBtZW1vLCBvYmpbaV0sIGksIG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lbW87XG4gICAgfVxufVxuXG4vKipcbiAqIOaVsOe7hOi/h+a7pFxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHtBcnJheX0gb2JqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHsqfSBbY29udGV4dF1cbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyKG9iaiwgY2IsIGNvbnRleHQpIHtcbiAgICBpZiAoIShvYmogJiYgY2IpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG9iai5maWx0ZXIgJiYgb2JqLmZpbHRlciA9PT0gbmF0aXZlRmlsdGVyKSB7XG4gICAgICAgIHJldHVybiBvYmouZmlsdGVyKGNiLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKGNiLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gob2JqW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cblxuLyoqXG4gKiDmlbDnu4Tpobnmn6Xmib5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7QXJyYXl9IG9ialxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqIEBwYXJhbSB7Kn0gW2NvbnRleHRdXG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZChvYmosIGNiLCBjb250ZXh0KSB7XG4gICAgaWYgKCEob2JqICYmIGNiKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBvYmoubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKGNiLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqW2ldO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcbiAqIEBwYXJhbSB7Kn0gY29udGV4dFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiaW5kKGZ1bmMsIGNvbnRleHQpIHtcbiAgICB2YXIgYXJncyA9IG5hdGl2ZVNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzLmNvbmNhdChuYXRpdmVTbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICB9O1xufVxuXG4vKipcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3VycnkoZnVuYykge1xuICAgIHZhciBhcmdzID0gbmF0aXZlU2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MuY29uY2F0KG5hdGl2ZVNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgIH07XG59XG5cbi8qKlxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXkodmFsdWUpIHtcbiAgICByZXR1cm4gb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5cbi8qKlxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO1xufVxuXG4vKipcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICAgIHJldHVybiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgU3RyaW5nXSc7XG59XG5cbi8qKlxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cbiAgICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cbiAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICByZXR1cm4gdHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCAoISF2YWx1ZSAmJiB0eXBlID09PSAnb2JqZWN0Jyk7XG59XG5cbi8qKlxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQnVpbHRJbk9iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiAhIUJVSUxUSU5fT0JKRUNUW29ialRvU3RyaW5nLmNhbGwodmFsdWUpXTtcbn1cblxuLyoqXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnpyZW5kZXIvY29yZS91dGlsXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUeXBlZEFycmF5KHZhbHVlKSB7XG4gICAgcmV0dXJuICEhVFlQRURfQVJSQVlbb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSldO1xufVxuXG4vKipcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RvbSh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnXG4gICAgICAgICYmIHR5cGVvZiB2YWx1ZS5ub2RlVHlwZSA9PT0gJ251bWJlcidcbiAgICAgICAgJiYgdHlwZW9mIHZhbHVlLm93bmVyRG9jdW1lbnQgPT09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIFdoZXRoZXIgaXMgZXhhY3RseSBOYU4uIE5vdGljZSBpc05hTignYScpIHJldHVybnMgdHJ1ZS5cbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcU5hTih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XG59XG5cbi8qKlxuICogSWYgdmFsdWUxIGlzIG5vdCBudWxsLCB0aGVuIHJldHVybiB2YWx1ZTEsIG90aGVyd2lzZSBqdWRnZXQgcmVzdCBvZiB2YWx1ZXMuXG4gKiBMb3cgcGVyZm9ybWFuY2UuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnpyZW5kZXIvY29yZS91dGlsXG4gKiBAcmV0dXJuIHsqfSBGaW5hbCB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmV0cmlldmUodmFsdWVzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAoYXJndW1lbnRzW2ldICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXRyaWV2ZTIodmFsdWUwLCB2YWx1ZTEpIHtcbiAgICByZXR1cm4gdmFsdWUwICE9IG51bGxcbiAgICAgICAgPyB2YWx1ZTBcbiAgICAgICAgOiB2YWx1ZTE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXRyaWV2ZTModmFsdWUwLCB2YWx1ZTEsIHZhbHVlMikge1xuICAgIHJldHVybiB2YWx1ZTAgIT0gbnVsbFxuICAgICAgICA/IHZhbHVlMFxuICAgICAgICA6IHZhbHVlMSAhPSBudWxsXG4gICAgICAgID8gdmFsdWUxXG4gICAgICAgIDogdmFsdWUyO1xufVxuXG4vKipcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0SW5kZXhcbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmRJbmRleFxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzbGljZSgpIHtcbiAgICByZXR1cm4gRnVuY3Rpb24uY2FsbC5hcHBseShuYXRpdmVTbGljZSwgYXJndW1lbnRzKTtcbn1cblxuLyoqXG4gKiBOb3JtYWxpemUgY3NzIGxpa2VkIGFycmF5IGNvbmZpZ3VyYXRpb25cbiAqIGUuZy5cbiAqICAzID0+IFszLCAzLCAzLCAzXVxuICogIFs0LCAyXSA9PiBbNCwgMiwgNCwgMl1cbiAqICBbNCwgMywgMl0gPT4gWzQsIDMsIDIsIDNdXG4gKiBAcGFyYW0ge251bWJlcnxBcnJheS48bnVtYmVyPn0gdmFsXG4gKiBAcmV0dXJuIHtBcnJheS48bnVtYmVyPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUNzc0FycmF5KHZhbCkge1xuICAgIGlmICh0eXBlb2YgKHZhbCkgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiBbdmFsLCB2YWwsIHZhbCwgdmFsXTtcbiAgICB9XG4gICAgdmFyIGxlbiA9IHZhbC5sZW5ndGg7XG4gICAgaWYgKGxlbiA9PT0gMikge1xuICAgICAgICAvLyB2ZXJ0aWNhbCB8IGhvcml6b250YWxcbiAgICAgICAgcmV0dXJuIFt2YWxbMF0sIHZhbFsxXSwgdmFsWzBdLCB2YWxbMV1dO1xuICAgIH1cbiAgICBlbHNlIGlmIChsZW4gPT09IDMpIHtcbiAgICAgICAgLy8gdG9wIHwgaG9yaXpvbnRhbCB8IGJvdHRvbVxuICAgICAgICByZXR1cm4gW3ZhbFswXSwgdmFsWzFdLCB2YWxbMl0sIHZhbFsxXV07XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHtib29sZWFufSBjb25kaXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnpyZW5kZXIvY29yZS91dGlsXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIHN0cmluZyB0byBiZSB0cmltZWRcbiAqIEByZXR1cm4ge3N0cmluZ30gdHJpbWVkIHN0cmluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgICBpZiAoc3RyID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBzdHIudHJpbSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gc3RyLnRyaW0oKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csICcnKTtcbiAgICB9XG59XG5cbnZhciBwcmltaXRpdmVLZXkgPSAnX19lY19wcmltaXRpdmVfXyc7XG4vKipcbiAqIFNldCBhbiBvYmplY3QgYXMgcHJpbWl0aXZlIHRvIGJlIGlnbm9yZWQgdHJhdmVyc2luZyBjaGlsZHJlbiBpbiBjbG9uZSBvciBtZXJnZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0QXNQcmltaXRpdmUob2JqKSB7XG4gICAgb2JqW3ByaW1pdGl2ZUtleV0gPSB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQcmltaXRpdmUob2JqKSB7XG4gICAgcmV0dXJuIG9ialtwcmltaXRpdmVLZXldO1xufVxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBPbmx5IGFwcGx5IGBvd25Qcm9wZXJ0eWAuXG4gKi9cbmZ1bmN0aW9uIEhhc2hNYXAob2JqKSB7XG4gICAgdmFyIGlzQXJyID0gaXNBcnJheShvYmopO1xuICAgIC8vIEtleSBzaG91bGQgbm90IGJlIHNldCBvbiB0aGlzLCBvdGhlcndpc2VcbiAgICAvLyBtZXRob2RzIGdldC9zZXQvLi4uIG1heSBiZSBvdmVycmlkZWQuXG4gICAgdGhpcy5kYXRhID0ge307XG4gICAgdmFyIHRoaXNNYXAgPSB0aGlzO1xuXG4gICAgKG9iaiBpbnN0YW5jZW9mIEhhc2hNYXApXG4gICAgICAgID8gb2JqLmVhY2godmlzaXQpXG4gICAgICAgIDogKG9iaiAmJiBlYWNoKG9iaiwgdmlzaXQpKTtcblxuICAgIGZ1bmN0aW9uIHZpc2l0KHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaXNBcnIgPyB0aGlzTWFwLnNldCh2YWx1ZSwga2V5KSA6IHRoaXNNYXAuc2V0KGtleSwgdmFsdWUpO1xuICAgIH1cbn1cblxuSGFzaE1hcC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IEhhc2hNYXAsXG4gICAgLy8gRG8gbm90IHByb3ZpZGUgYGhhc2AgbWV0aG9kIHRvIGF2b2lkIGRlZmluaW5nIHdoYXQgaXMgYGhhc2AuXG4gICAgLy8gKFdlIHVzdWFsbHkgdHJlYXQgYG51bGxgIGFuZCBgdW5kZWZpbmVkYCBhcyB0aGUgc2FtZSwgZGlmZmVyZW50XG4gICAgLy8gZnJvbSBFUzYgTWFwKS5cbiAgICBnZXQ6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpID8gdGhpcy5kYXRhW2tleV0gOiBudWxsO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICAvLyBDb21wYXJpbmcgd2l0aCBpbnZvY2F0aW9uIGNoYWluaW5nLCBgcmV0dXJuIHZhbHVlYCBpcyBtb3JlIGNvbW1vbmx5XG4gICAgICAgIC8vIHVzZWQgaW4gdGhpcyBjYXNlOiBgdmFyIHNvbWVWYWwgPSBtYXAuc2V0KCdhJywgZ2VuVmFsKCkpO2BcbiAgICAgICAgcmV0dXJuICh0aGlzLmRhdGFba2V5XSA9IHZhbHVlKTtcbiAgICB9LFxuICAgIC8vIEFsdGhvdWdoIHV0aWwuZWFjaCBjYW4gYmUgcGVyZm9ybWVkIG9uIHRoaXMgaGFzaE1hcCBkaXJlY3RseSwgdXNlclxuICAgIC8vIHNob3VsZCBub3QgdXNlIHRoZSBleHBvc2VkIGtleXMsIHdobyBhcmUgcHJlZml4ZWQuXG4gICAgZWFjaDogZnVuY3Rpb24gKGNiLCBjb250ZXh0KSB7XG4gICAgICAgIGNvbnRleHQgIT09IHZvaWQgMCAmJiAoY2IgPSBiaW5kKGNiLCBjb250ZXh0KSk7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGNiKHRoaXMuZGF0YVtrZXldLCBrZXkpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvLyBEbyBub3QgdXNlIHRoaXMgbWV0aG9kIGlmIHBlcmZvcm1hbmNlIHNlbnNpdGl2ZS5cbiAgICByZW1vdmVLZXk6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuZGF0YVtrZXldO1xuICAgIH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIYXNoTWFwKG9iaikge1xuICAgIHJldHVybiBuZXcgSGFzaE1hcChvYmopO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29uY2F0QXJyYXkoYSwgYikge1xuICAgIHZhciBuZXdBcnJheSA9IG5ldyBhLmNvbnN0cnVjdG9yKGEubGVuZ3RoICsgYi5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICBuZXdBcnJheVtpXSA9IGFbaV07XG4gICAgfVxuICAgIHZhciBvZmZzZXQgPSBhLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykge1xuICAgICAgICBuZXdBcnJheVtpICsgb2Zmc2V0XSA9IGJbaV07XG4gICAgfVxuICAgIHJldHVybiBuZXdBcnJheTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gbm9vcCgpIHt9XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy96cmVuZGVyL3NyYy9jb3JlL3V0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDIwOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///209\n");

/***/ }),
/* 210 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"a\"] = parse;\n/* unused harmony export lift */\n/* unused harmony export toHex */\n/* unused harmony export fastLerp */\n/* unused harmony export fastMapToColor */\n/* unused harmony export lerp */\n/* unused harmony export mapToColor */\n/* unused harmony export modifyHSL */\n/* unused harmony export modifyAlpha */\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = stringify;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_LRU__ = __webpack_require__(211);\n\n\nvar kCSSColorTable = {\n    'transparent': [0, 0, 0, 0], 'aliceblue': [240, 248, 255, 1],\n    'antiquewhite': [250, 235, 215, 1], 'aqua': [0, 255, 255, 1],\n    'aquamarine': [127, 255, 212, 1], 'azure': [240, 255, 255, 1],\n    'beige': [245, 245, 220, 1], 'bisque': [255, 228, 196, 1],\n    'black': [0, 0, 0, 1], 'blanchedalmond': [255, 235, 205, 1],\n    'blue': [0, 0, 255, 1], 'blueviolet': [138, 43, 226, 1],\n    'brown': [165, 42, 42, 1], 'burlywood': [222, 184, 135, 1],\n    'cadetblue': [95, 158, 160, 1], 'chartreuse': [127, 255, 0, 1],\n    'chocolate': [210, 105, 30, 1], 'coral': [255, 127, 80, 1],\n    'cornflowerblue': [100, 149, 237, 1], 'cornsilk': [255, 248, 220, 1],\n    'crimson': [220, 20, 60, 1], 'cyan': [0, 255, 255, 1],\n    'darkblue': [0, 0, 139, 1], 'darkcyan': [0, 139, 139, 1],\n    'darkgoldenrod': [184, 134, 11, 1], 'darkgray': [169, 169, 169, 1],\n    'darkgreen': [0, 100, 0, 1], 'darkgrey': [169, 169, 169, 1],\n    'darkkhaki': [189, 183, 107, 1], 'darkmagenta': [139, 0, 139, 1],\n    'darkolivegreen': [85, 107, 47, 1], 'darkorange': [255, 140, 0, 1],\n    'darkorchid': [153, 50, 204, 1], 'darkred': [139, 0, 0, 1],\n    'darksalmon': [233, 150, 122, 1], 'darkseagreen': [143, 188, 143, 1],\n    'darkslateblue': [72, 61, 139, 1], 'darkslategray': [47, 79, 79, 1],\n    'darkslategrey': [47, 79, 79, 1], 'darkturquoise': [0, 206, 209, 1],\n    'darkviolet': [148, 0, 211, 1], 'deeppink': [255, 20, 147, 1],\n    'deepskyblue': [0, 191, 255, 1], 'dimgray': [105, 105, 105, 1],\n    'dimgrey': [105, 105, 105, 1], 'dodgerblue': [30, 144, 255, 1],\n    'firebrick': [178, 34, 34, 1], 'floralwhite': [255, 250, 240, 1],\n    'forestgreen': [34, 139, 34, 1], 'fuchsia': [255, 0, 255, 1],\n    'gainsboro': [220, 220, 220, 1], 'ghostwhite': [248, 248, 255, 1],\n    'gold': [255, 215, 0, 1], 'goldenrod': [218, 165, 32, 1],\n    'gray': [128, 128, 128, 1], 'green': [0, 128, 0, 1],\n    'greenyellow': [173, 255, 47, 1], 'grey': [128, 128, 128, 1],\n    'honeydew': [240, 255, 240, 1], 'hotpink': [255, 105, 180, 1],\n    'indianred': [205, 92, 92, 1], 'indigo': [75, 0, 130, 1],\n    'ivory': [255, 255, 240, 1], 'khaki': [240, 230, 140, 1],\n    'lavender': [230, 230, 250, 1], 'lavenderblush': [255, 240, 245, 1],\n    'lawngreen': [124, 252, 0, 1], 'lemonchiffon': [255, 250, 205, 1],\n    'lightblue': [173, 216, 230, 1], 'lightcoral': [240, 128, 128, 1],\n    'lightcyan': [224, 255, 255, 1], 'lightgoldenrodyellow': [250, 250, 210, 1],\n    'lightgray': [211, 211, 211, 1], 'lightgreen': [144, 238, 144, 1],\n    'lightgrey': [211, 211, 211, 1], 'lightpink': [255, 182, 193, 1],\n    'lightsalmon': [255, 160, 122, 1], 'lightseagreen': [32, 178, 170, 1],\n    'lightskyblue': [135, 206, 250, 1], 'lightslategray': [119, 136, 153, 1],\n    'lightslategrey': [119, 136, 153, 1], 'lightsteelblue': [176, 196, 222, 1],\n    'lightyellow': [255, 255, 224, 1], 'lime': [0, 255, 0, 1],\n    'limegreen': [50, 205, 50, 1], 'linen': [250, 240, 230, 1],\n    'magenta': [255, 0, 255, 1], 'maroon': [128, 0, 0, 1],\n    'mediumaquamarine': [102, 205, 170, 1], 'mediumblue': [0, 0, 205, 1],\n    'mediumorchid': [186, 85, 211, 1], 'mediumpurple': [147, 112, 219, 1],\n    'mediumseagreen': [60, 179, 113, 1], 'mediumslateblue': [123, 104, 238, 1],\n    'mediumspringgreen': [0, 250, 154, 1], 'mediumturquoise': [72, 209, 204, 1],\n    'mediumvioletred': [199, 21, 133, 1], 'midnightblue': [25, 25, 112, 1],\n    'mintcream': [245, 255, 250, 1], 'mistyrose': [255, 228, 225, 1],\n    'moccasin': [255, 228, 181, 1], 'navajowhite': [255, 222, 173, 1],\n    'navy': [0, 0, 128, 1], 'oldlace': [253, 245, 230, 1],\n    'olive': [128, 128, 0, 1], 'olivedrab': [107, 142, 35, 1],\n    'orange': [255, 165, 0, 1], 'orangered': [255, 69, 0, 1],\n    'orchid': [218, 112, 214, 1], 'palegoldenrod': [238, 232, 170, 1],\n    'palegreen': [152, 251, 152, 1], 'paleturquoise': [175, 238, 238, 1],\n    'palevioletred': [219, 112, 147, 1], 'papayawhip': [255, 239, 213, 1],\n    'peachpuff': [255, 218, 185, 1], 'peru': [205, 133, 63, 1],\n    'pink': [255, 192, 203, 1], 'plum': [221, 160, 221, 1],\n    'powderblue': [176, 224, 230, 1], 'purple': [128, 0, 128, 1],\n    'red': [255, 0, 0, 1], 'rosybrown': [188, 143, 143, 1],\n    'royalblue': [65, 105, 225, 1], 'saddlebrown': [139, 69, 19, 1],\n    'salmon': [250, 128, 114, 1], 'sandybrown': [244, 164, 96, 1],\n    'seagreen': [46, 139, 87, 1], 'seashell': [255, 245, 238, 1],\n    'sienna': [160, 82, 45, 1], 'silver': [192, 192, 192, 1],\n    'skyblue': [135, 206, 235, 1], 'slateblue': [106, 90, 205, 1],\n    'slategray': [112, 128, 144, 1], 'slategrey': [112, 128, 144, 1],\n    'snow': [255, 250, 250, 1], 'springgreen': [0, 255, 127, 1],\n    'steelblue': [70, 130, 180, 1], 'tan': [210, 180, 140, 1],\n    'teal': [0, 128, 128, 1], 'thistle': [216, 191, 216, 1],\n    'tomato': [255, 99, 71, 1], 'turquoise': [64, 224, 208, 1],\n    'violet': [238, 130, 238, 1], 'wheat': [245, 222, 179, 1],\n    'white': [255, 255, 255, 1], 'whitesmoke': [245, 245, 245, 1],\n    'yellow': [255, 255, 0, 1], 'yellowgreen': [154, 205, 50, 1]\n};\n\nfunction clampCssByte(i) {  // Clamp to integer 0 .. 255.\n    i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clampCssAngle(i) {  // Clamp to integer 0 .. 360.\n    i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n    return i < 0 ? 0 : i > 360 ? 360 : i;\n}\n\nfunction clampCssFloat(f) {  // Clamp to float 0.0 .. 1.0.\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n}\n\nfunction parseCssInt(str) {  // int or percentage.\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssByte(parseFloat(str) / 100 * 255);\n    }\n    return clampCssByte(parseInt(str, 10));\n}\n\nfunction parseCssFloat(str) {  // float or percentage.\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssFloat(parseFloat(str) / 100);\n    }\n    return clampCssFloat(parseFloat(str));\n}\n\nfunction cssHueToRgb(m1, m2, h) {\n    if (h < 0) {\n        h += 1;\n    }\n    else if (h > 1) {\n        h -= 1;\n    }\n\n    if (h * 6 < 1) {\n        return m1 + (m2 - m1) * h * 6;\n    }\n    if (h * 2 < 1) {\n        return m2;\n    }\n    if (h * 3 < 2) {\n        return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n    }\n    return m1;\n}\n\nfunction lerpNumber(a, b, p) {\n    return a + (b - a) * p;\n}\n\nfunction setRgba(out, r, g, b, a) {\n    out[0] = r; out[1] = g; out[2] = b; out[3] = a;\n    return out;\n}\nfunction copyRgba(out, a) {\n    out[0] = a[0]; out[1] = a[1]; out[2] = a[2]; out[3] = a[3];\n    return out;\n}\n\nvar colorCache = new __WEBPACK_IMPORTED_MODULE_0__core_LRU__[\"a\" /* default */](20);\nvar lastRemovedArr = null;\n\nfunction putToCache(colorStr, rgbaArr) {\n    // Reuse removed array\n    if (lastRemovedArr) {\n        copyRgba(lastRemovedArr, rgbaArr);\n    }\n    lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || (rgbaArr.slice()));\n}\n\n/**\n * @param {string} colorStr\n * @param {Array.<number>} out\n * @return {Array.<number>}\n * @memberOf module:zrender/util/color\n */\nfunction parse(colorStr, rgbaArr) {\n    if (!colorStr) {\n        return;\n    }\n    rgbaArr = rgbaArr || [];\n\n    var cached = colorCache.get(colorStr);\n    if (cached) {\n        return copyRgba(rgbaArr, cached);\n    }\n\n    // colorStr may be not string\n    colorStr = colorStr + '';\n    // Remove all whitespace, not compliant, but should just be more accepting.\n    var str = colorStr.replace(/ /g, '').toLowerCase();\n\n    // Color keywords (and transparent) lookup.\n    if (str in kCSSColorTable) {\n        copyRgba(rgbaArr, kCSSColorTable[str]);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n    }\n\n    // #abc and #abc123 syntax.\n    if (str.charAt(0) === '#') {\n        if (str.length === 4) {\n            var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 0xfff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;  // Covers NaN.\n            }\n            setRgba(rgbaArr,\n                ((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8),\n                (iv & 0xf0) | ((iv & 0xf0) >> 4),\n                (iv & 0xf) | ((iv & 0xf) << 4),\n                1\n            );\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        else if (str.length === 7) {\n            var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 0xffffff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;  // Covers NaN.\n            }\n            setRgba(rgbaArr,\n                (iv & 0xff0000) >> 16,\n                (iv & 0xff00) >> 8,\n                iv & 0xff,\n                1\n            );\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n\n        return;\n    }\n    var op = str.indexOf('(');\n    var ep = str.indexOf(')');\n    if (op !== -1 && ep + 1 === str.length) {\n        var fname = str.substr(0, op);\n        var params = str.substr(op + 1, ep - (op + 1)).split(',');\n        var alpha = 1;  // To allow case fallthrough.\n        switch (fname) {\n            case 'rgba':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                alpha = parseCssFloat(params.pop()); // jshint ignore:line\n            // Fall through.\n            case 'rgb':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                setRgba(rgbaArr,\n                    parseCssInt(params[0]),\n                    parseCssInt(params[1]),\n                    parseCssInt(params[2]),\n                    alpha\n                );\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsla':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                params[3] = parseCssFloat(params[3]);\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsl':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            default:\n                return;\n        }\n    }\n\n    setRgba(rgbaArr, 0, 0, 0, 1);\n    return;\n}\n\n/**\n * @param {Array.<number>} hsla\n * @param {Array.<number>} rgba\n * @return {Array.<number>} rgba\n */\nfunction hsla2rgba(hsla, rgba) {\n    var h = (((parseFloat(hsla[0]) % 360) + 360) % 360) / 360;  // 0 .. 1\n    // NOTE(deanm): According to the CSS spec s/l should only be\n    // percentages, but we don't bother and let float or percentage.\n    var s = parseCssFloat(hsla[1]);\n    var l = parseCssFloat(hsla[2]);\n    var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var m1 = l * 2 - m2;\n\n    rgba = rgba || [];\n    setRgba(rgba,\n        clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255),\n        clampCssByte(cssHueToRgb(m1, m2, h) * 255),\n        clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255),\n        1\n    );\n\n    if (hsla.length === 4) {\n        rgba[3] = hsla[3];\n    }\n\n    return rgba;\n}\n\n/**\n * @param {Array.<number>} rgba\n * @return {Array.<number>} hsla\n */\nfunction rgba2hsla(rgba) {\n    if (!rgba) {\n        return;\n    }\n\n    // RGB from 0 to 255\n    var R = rgba[0] / 255;\n    var G = rgba[1] / 255;\n    var B = rgba[2] / 255;\n\n    var vMin = Math.min(R, G, B); // Min. value of RGB\n    var vMax = Math.max(R, G, B); // Max. value of RGB\n    var delta = vMax - vMin; // Delta RGB value\n\n    var L = (vMax + vMin) / 2;\n    var H;\n    var S;\n    // HSL results from 0 to 1\n    if (delta === 0) {\n        H = 0;\n        S = 0;\n    }\n    else {\n        if (L < 0.5) {\n            S = delta / (vMax + vMin);\n        }\n        else {\n            S = delta / (2 - vMax - vMin);\n        }\n\n        var deltaR = (((vMax - R) / 6) + (delta / 2)) / delta;\n        var deltaG = (((vMax - G) / 6) + (delta / 2)) / delta;\n        var deltaB = (((vMax - B) / 6) + (delta / 2)) / delta;\n\n        if (R === vMax) {\n            H = deltaB - deltaG;\n        }\n        else if (G === vMax) {\n            H = (1 / 3) + deltaR - deltaB;\n        }\n        else if (B === vMax) {\n            H = (2 / 3) + deltaG - deltaR;\n        }\n\n        if (H < 0) {\n            H += 1;\n        }\n\n        if (H > 1) {\n            H -= 1;\n        }\n    }\n\n    var hsla = [H * 360, S, L];\n\n    if (rgba[3] != null) {\n        hsla.push(rgba[3]);\n    }\n\n    return hsla;\n}\n\n/**\n * @param {string} color\n * @param {number} level\n * @return {string}\n * @memberOf module:zrender/util/color\n */\nfunction lift(color, level) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        for (var i = 0; i < 3; i++) {\n            if (level < 0) {\n                colorArr[i] = colorArr[i] * (1 - level) | 0;\n            }\n            else {\n                colorArr[i] = ((255 - colorArr[i]) * level + colorArr[i]) | 0;\n            }\n            if (colorArr[i] > 255) {\n                colorArr[i] = 255;\n            }\n            else if (color[i] < 0) {\n                colorArr[i] = 0;\n            }\n        }\n        return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n    }\n}\n\n/**\n * @param {string} color\n * @return {string}\n * @memberOf module:zrender/util/color\n */\nfunction toHex(color) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + (+colorArr[2])).toString(16).slice(1);\n    }\n}\n\n/**\n * Map value to color. Faster than lerp methods because color is represented by rgba array.\n * @param {number} normalizedValue A float between 0 and 1.\n * @param {Array.<Array.<number>>} colors List of rgba color array\n * @param {Array.<number>} [out] Mapped gba color array\n * @return {Array.<number>} will be null/undefined if input illegal.\n */\nfunction fastLerp(normalizedValue, colors, out) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)\n    ) {\n        return;\n    }\n\n    out = out || [];\n\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = colors[leftIndex];\n    var rightColor = colors[rightIndex];\n    var dv = value - leftIndex;\n    out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n    out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n    out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n    out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n\n    return out;\n}\n\n/**\n * @deprecated\n */\nvar fastMapToColor = fastLerp;\n\n/**\n * @param {number} normalizedValue A float between 0 and 1.\n * @param {Array.<string>} colors Color list.\n * @param {boolean=} fullOutput Default false.\n * @return {(string|Object)} Result color. If fullOutput,\n *                           return {color: ..., leftIndex: ..., rightIndex: ..., value: ...},\n * @memberOf module:zrender/util/color\n */\nfunction lerp(normalizedValue, colors, fullOutput) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)\n    ) {\n        return;\n    }\n\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = parse(colors[leftIndex]);\n    var rightColor = parse(colors[rightIndex]);\n    var dv = value - leftIndex;\n\n    var color = stringify(\n        [\n            clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)),\n            clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)),\n            clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)),\n            clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))\n        ],\n        'rgba'\n    );\n\n    return fullOutput\n        ? {\n            color: color,\n            leftIndex: leftIndex,\n            rightIndex: rightIndex,\n            value: value\n        }\n        : color;\n}\n\n/**\n * @deprecated\n */\nvar mapToColor = lerp;\n\n/**\n * @param {string} color\n * @param {number=} h 0 ~ 360, ignore when null.\n * @param {number=} s 0 ~ 1, ignore when null.\n * @param {number=} l 0 ~ 1, ignore when null.\n * @return {string} Color string in rgba format.\n * @memberOf module:zrender/util/color\n */\nfunction modifyHSL(color, h, s, l) {\n    color = parse(color);\n\n    if (color) {\n        color = rgba2hsla(color);\n        h != null && (color[0] = clampCssAngle(h));\n        s != null && (color[1] = parseCssFloat(s));\n        l != null && (color[2] = parseCssFloat(l));\n\n        return stringify(hsla2rgba(color), 'rgba');\n    }\n}\n\n/**\n * @param {string} color\n * @param {number=} alpha 0 ~ 1\n * @return {string} Color string in rgba format.\n * @memberOf module:zrender/util/color\n */\nfunction modifyAlpha(color, alpha) {\n    color = parse(color);\n\n    if (color && alpha != null) {\n        color[3] = clampCssFloat(alpha);\n        return stringify(color, 'rgba');\n    }\n}\n\n/**\n * @param {Array.<number>} arrColor like [12,33,44,0.4]\n * @param {string} type 'rgba', 'hsva', ...\n * @return {string} Result color. (If input illegal, return undefined).\n */\nfunction stringify(arrColor, type) {\n    if (!arrColor || !arrColor.length) {\n        return;\n    }\n    var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n    if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n        colorStr += ',' + arrColor[3];\n    }\n    return type + '(' + colorStr + ')';\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvc3JjL3Rvb2wvY29sb3IuanM/ZDgwOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTFJVIGZyb20gJy4uL2NvcmUvTFJVJztcblxudmFyIGtDU1NDb2xvclRhYmxlID0ge1xuICAgICd0cmFuc3BhcmVudCc6IFswLCAwLCAwLCAwXSwgJ2FsaWNlYmx1ZSc6IFsyNDAsIDI0OCwgMjU1LCAxXSxcbiAgICAnYW50aXF1ZXdoaXRlJzogWzI1MCwgMjM1LCAyMTUsIDFdLCAnYXF1YSc6IFswLCAyNTUsIDI1NSwgMV0sXG4gICAgJ2FxdWFtYXJpbmUnOiBbMTI3LCAyNTUsIDIxMiwgMV0sICdhenVyZSc6IFsyNDAsIDI1NSwgMjU1LCAxXSxcbiAgICAnYmVpZ2UnOiBbMjQ1LCAyNDUsIDIyMCwgMV0sICdiaXNxdWUnOiBbMjU1LCAyMjgsIDE5NiwgMV0sXG4gICAgJ2JsYWNrJzogWzAsIDAsIDAsIDFdLCAnYmxhbmNoZWRhbG1vbmQnOiBbMjU1LCAyMzUsIDIwNSwgMV0sXG4gICAgJ2JsdWUnOiBbMCwgMCwgMjU1LCAxXSwgJ2JsdWV2aW9sZXQnOiBbMTM4LCA0MywgMjI2LCAxXSxcbiAgICAnYnJvd24nOiBbMTY1LCA0MiwgNDIsIDFdLCAnYnVybHl3b29kJzogWzIyMiwgMTg0LCAxMzUsIDFdLFxuICAgICdjYWRldGJsdWUnOiBbOTUsIDE1OCwgMTYwLCAxXSwgJ2NoYXJ0cmV1c2UnOiBbMTI3LCAyNTUsIDAsIDFdLFxuICAgICdjaG9jb2xhdGUnOiBbMjEwLCAxMDUsIDMwLCAxXSwgJ2NvcmFsJzogWzI1NSwgMTI3LCA4MCwgMV0sXG4gICAgJ2Nvcm5mbG93ZXJibHVlJzogWzEwMCwgMTQ5LCAyMzcsIDFdLCAnY29ybnNpbGsnOiBbMjU1LCAyNDgsIDIyMCwgMV0sXG4gICAgJ2NyaW1zb24nOiBbMjIwLCAyMCwgNjAsIDFdLCAnY3lhbic6IFswLCAyNTUsIDI1NSwgMV0sXG4gICAgJ2RhcmtibHVlJzogWzAsIDAsIDEzOSwgMV0sICdkYXJrY3lhbic6IFswLCAxMzksIDEzOSwgMV0sXG4gICAgJ2Rhcmtnb2xkZW5yb2QnOiBbMTg0LCAxMzQsIDExLCAxXSwgJ2RhcmtncmF5JzogWzE2OSwgMTY5LCAxNjksIDFdLFxuICAgICdkYXJrZ3JlZW4nOiBbMCwgMTAwLCAwLCAxXSwgJ2RhcmtncmV5JzogWzE2OSwgMTY5LCAxNjksIDFdLFxuICAgICdkYXJra2hha2knOiBbMTg5LCAxODMsIDEwNywgMV0sICdkYXJrbWFnZW50YSc6IFsxMzksIDAsIDEzOSwgMV0sXG4gICAgJ2RhcmtvbGl2ZWdyZWVuJzogWzg1LCAxMDcsIDQ3LCAxXSwgJ2RhcmtvcmFuZ2UnOiBbMjU1LCAxNDAsIDAsIDFdLFxuICAgICdkYXJrb3JjaGlkJzogWzE1MywgNTAsIDIwNCwgMV0sICdkYXJrcmVkJzogWzEzOSwgMCwgMCwgMV0sXG4gICAgJ2RhcmtzYWxtb24nOiBbMjMzLCAxNTAsIDEyMiwgMV0sICdkYXJrc2VhZ3JlZW4nOiBbMTQzLCAxODgsIDE0MywgMV0sXG4gICAgJ2RhcmtzbGF0ZWJsdWUnOiBbNzIsIDYxLCAxMzksIDFdLCAnZGFya3NsYXRlZ3JheSc6IFs0NywgNzksIDc5LCAxXSxcbiAgICAnZGFya3NsYXRlZ3JleSc6IFs0NywgNzksIDc5LCAxXSwgJ2Rhcmt0dXJxdW9pc2UnOiBbMCwgMjA2LCAyMDksIDFdLFxuICAgICdkYXJrdmlvbGV0JzogWzE0OCwgMCwgMjExLCAxXSwgJ2RlZXBwaW5rJzogWzI1NSwgMjAsIDE0NywgMV0sXG4gICAgJ2RlZXBza3libHVlJzogWzAsIDE5MSwgMjU1LCAxXSwgJ2RpbWdyYXknOiBbMTA1LCAxMDUsIDEwNSwgMV0sXG4gICAgJ2RpbWdyZXknOiBbMTA1LCAxMDUsIDEwNSwgMV0sICdkb2RnZXJibHVlJzogWzMwLCAxNDQsIDI1NSwgMV0sXG4gICAgJ2ZpcmVicmljayc6IFsxNzgsIDM0LCAzNCwgMV0sICdmbG9yYWx3aGl0ZSc6IFsyNTUsIDI1MCwgMjQwLCAxXSxcbiAgICAnZm9yZXN0Z3JlZW4nOiBbMzQsIDEzOSwgMzQsIDFdLCAnZnVjaHNpYSc6IFsyNTUsIDAsIDI1NSwgMV0sXG4gICAgJ2dhaW5zYm9ybyc6IFsyMjAsIDIyMCwgMjIwLCAxXSwgJ2dob3N0d2hpdGUnOiBbMjQ4LCAyNDgsIDI1NSwgMV0sXG4gICAgJ2dvbGQnOiBbMjU1LCAyMTUsIDAsIDFdLCAnZ29sZGVucm9kJzogWzIxOCwgMTY1LCAzMiwgMV0sXG4gICAgJ2dyYXknOiBbMTI4LCAxMjgsIDEyOCwgMV0sICdncmVlbic6IFswLCAxMjgsIDAsIDFdLFxuICAgICdncmVlbnllbGxvdyc6IFsxNzMsIDI1NSwgNDcsIDFdLCAnZ3JleSc6IFsxMjgsIDEyOCwgMTI4LCAxXSxcbiAgICAnaG9uZXlkZXcnOiBbMjQwLCAyNTUsIDI0MCwgMV0sICdob3RwaW5rJzogWzI1NSwgMTA1LCAxODAsIDFdLFxuICAgICdpbmRpYW5yZWQnOiBbMjA1LCA5MiwgOTIsIDFdLCAnaW5kaWdvJzogWzc1LCAwLCAxMzAsIDFdLFxuICAgICdpdm9yeSc6IFsyNTUsIDI1NSwgMjQwLCAxXSwgJ2toYWtpJzogWzI0MCwgMjMwLCAxNDAsIDFdLFxuICAgICdsYXZlbmRlcic6IFsyMzAsIDIzMCwgMjUwLCAxXSwgJ2xhdmVuZGVyYmx1c2gnOiBbMjU1LCAyNDAsIDI0NSwgMV0sXG4gICAgJ2xhd25ncmVlbic6IFsxMjQsIDI1MiwgMCwgMV0sICdsZW1vbmNoaWZmb24nOiBbMjU1LCAyNTAsIDIwNSwgMV0sXG4gICAgJ2xpZ2h0Ymx1ZSc6IFsxNzMsIDIxNiwgMjMwLCAxXSwgJ2xpZ2h0Y29yYWwnOiBbMjQwLCAxMjgsIDEyOCwgMV0sXG4gICAgJ2xpZ2h0Y3lhbic6IFsyMjQsIDI1NSwgMjU1LCAxXSwgJ2xpZ2h0Z29sZGVucm9keWVsbG93JzogWzI1MCwgMjUwLCAyMTAsIDFdLFxuICAgICdsaWdodGdyYXknOiBbMjExLCAyMTEsIDIxMSwgMV0sICdsaWdodGdyZWVuJzogWzE0NCwgMjM4LCAxNDQsIDFdLFxuICAgICdsaWdodGdyZXknOiBbMjExLCAyMTEsIDIxMSwgMV0sICdsaWdodHBpbmsnOiBbMjU1LCAxODIsIDE5MywgMV0sXG4gICAgJ2xpZ2h0c2FsbW9uJzogWzI1NSwgMTYwLCAxMjIsIDFdLCAnbGlnaHRzZWFncmVlbic6IFszMiwgMTc4LCAxNzAsIDFdLFxuICAgICdsaWdodHNreWJsdWUnOiBbMTM1LCAyMDYsIDI1MCwgMV0sICdsaWdodHNsYXRlZ3JheSc6IFsxMTksIDEzNiwgMTUzLCAxXSxcbiAgICAnbGlnaHRzbGF0ZWdyZXknOiBbMTE5LCAxMzYsIDE1MywgMV0sICdsaWdodHN0ZWVsYmx1ZSc6IFsxNzYsIDE5NiwgMjIyLCAxXSxcbiAgICAnbGlnaHR5ZWxsb3cnOiBbMjU1LCAyNTUsIDIyNCwgMV0sICdsaW1lJzogWzAsIDI1NSwgMCwgMV0sXG4gICAgJ2xpbWVncmVlbic6IFs1MCwgMjA1LCA1MCwgMV0sICdsaW5lbic6IFsyNTAsIDI0MCwgMjMwLCAxXSxcbiAgICAnbWFnZW50YSc6IFsyNTUsIDAsIDI1NSwgMV0sICdtYXJvb24nOiBbMTI4LCAwLCAwLCAxXSxcbiAgICAnbWVkaXVtYXF1YW1hcmluZSc6IFsxMDIsIDIwNSwgMTcwLCAxXSwgJ21lZGl1bWJsdWUnOiBbMCwgMCwgMjA1LCAxXSxcbiAgICAnbWVkaXVtb3JjaGlkJzogWzE4NiwgODUsIDIxMSwgMV0sICdtZWRpdW1wdXJwbGUnOiBbMTQ3LCAxMTIsIDIxOSwgMV0sXG4gICAgJ21lZGl1bXNlYWdyZWVuJzogWzYwLCAxNzksIDExMywgMV0sICdtZWRpdW1zbGF0ZWJsdWUnOiBbMTIzLCAxMDQsIDIzOCwgMV0sXG4gICAgJ21lZGl1bXNwcmluZ2dyZWVuJzogWzAsIDI1MCwgMTU0LCAxXSwgJ21lZGl1bXR1cnF1b2lzZSc6IFs3MiwgMjA5LCAyMDQsIDFdLFxuICAgICdtZWRpdW12aW9sZXRyZWQnOiBbMTk5LCAyMSwgMTMzLCAxXSwgJ21pZG5pZ2h0Ymx1ZSc6IFsyNSwgMjUsIDExMiwgMV0sXG4gICAgJ21pbnRjcmVhbSc6IFsyNDUsIDI1NSwgMjUwLCAxXSwgJ21pc3R5cm9zZSc6IFsyNTUsIDIyOCwgMjI1LCAxXSxcbiAgICAnbW9jY2FzaW4nOiBbMjU1LCAyMjgsIDE4MSwgMV0sICduYXZham93aGl0ZSc6IFsyNTUsIDIyMiwgMTczLCAxXSxcbiAgICAnbmF2eSc6IFswLCAwLCAxMjgsIDFdLCAnb2xkbGFjZSc6IFsyNTMsIDI0NSwgMjMwLCAxXSxcbiAgICAnb2xpdmUnOiBbMTI4LCAxMjgsIDAsIDFdLCAnb2xpdmVkcmFiJzogWzEwNywgMTQyLCAzNSwgMV0sXG4gICAgJ29yYW5nZSc6IFsyNTUsIDE2NSwgMCwgMV0sICdvcmFuZ2VyZWQnOiBbMjU1LCA2OSwgMCwgMV0sXG4gICAgJ29yY2hpZCc6IFsyMTgsIDExMiwgMjE0LCAxXSwgJ3BhbGVnb2xkZW5yb2QnOiBbMjM4LCAyMzIsIDE3MCwgMV0sXG4gICAgJ3BhbGVncmVlbic6IFsxNTIsIDI1MSwgMTUyLCAxXSwgJ3BhbGV0dXJxdW9pc2UnOiBbMTc1LCAyMzgsIDIzOCwgMV0sXG4gICAgJ3BhbGV2aW9sZXRyZWQnOiBbMjE5LCAxMTIsIDE0NywgMV0sICdwYXBheWF3aGlwJzogWzI1NSwgMjM5LCAyMTMsIDFdLFxuICAgICdwZWFjaHB1ZmYnOiBbMjU1LCAyMTgsIDE4NSwgMV0sICdwZXJ1JzogWzIwNSwgMTMzLCA2MywgMV0sXG4gICAgJ3BpbmsnOiBbMjU1LCAxOTIsIDIwMywgMV0sICdwbHVtJzogWzIyMSwgMTYwLCAyMjEsIDFdLFxuICAgICdwb3dkZXJibHVlJzogWzE3NiwgMjI0LCAyMzAsIDFdLCAncHVycGxlJzogWzEyOCwgMCwgMTI4LCAxXSxcbiAgICAncmVkJzogWzI1NSwgMCwgMCwgMV0sICdyb3N5YnJvd24nOiBbMTg4LCAxNDMsIDE0MywgMV0sXG4gICAgJ3JveWFsYmx1ZSc6IFs2NSwgMTA1LCAyMjUsIDFdLCAnc2FkZGxlYnJvd24nOiBbMTM5LCA2OSwgMTksIDFdLFxuICAgICdzYWxtb24nOiBbMjUwLCAxMjgsIDExNCwgMV0sICdzYW5keWJyb3duJzogWzI0NCwgMTY0LCA5NiwgMV0sXG4gICAgJ3NlYWdyZWVuJzogWzQ2LCAxMzksIDg3LCAxXSwgJ3NlYXNoZWxsJzogWzI1NSwgMjQ1LCAyMzgsIDFdLFxuICAgICdzaWVubmEnOiBbMTYwLCA4MiwgNDUsIDFdLCAnc2lsdmVyJzogWzE5MiwgMTkyLCAxOTIsIDFdLFxuICAgICdza3libHVlJzogWzEzNSwgMjA2LCAyMzUsIDFdLCAnc2xhdGVibHVlJzogWzEwNiwgOTAsIDIwNSwgMV0sXG4gICAgJ3NsYXRlZ3JheSc6IFsxMTIsIDEyOCwgMTQ0LCAxXSwgJ3NsYXRlZ3JleSc6IFsxMTIsIDEyOCwgMTQ0LCAxXSxcbiAgICAnc25vdyc6IFsyNTUsIDI1MCwgMjUwLCAxXSwgJ3NwcmluZ2dyZWVuJzogWzAsIDI1NSwgMTI3LCAxXSxcbiAgICAnc3RlZWxibHVlJzogWzcwLCAxMzAsIDE4MCwgMV0sICd0YW4nOiBbMjEwLCAxODAsIDE0MCwgMV0sXG4gICAgJ3RlYWwnOiBbMCwgMTI4LCAxMjgsIDFdLCAndGhpc3RsZSc6IFsyMTYsIDE5MSwgMjE2LCAxXSxcbiAgICAndG9tYXRvJzogWzI1NSwgOTksIDcxLCAxXSwgJ3R1cnF1b2lzZSc6IFs2NCwgMjI0LCAyMDgsIDFdLFxuICAgICd2aW9sZXQnOiBbMjM4LCAxMzAsIDIzOCwgMV0sICd3aGVhdCc6IFsyNDUsIDIyMiwgMTc5LCAxXSxcbiAgICAnd2hpdGUnOiBbMjU1LCAyNTUsIDI1NSwgMV0sICd3aGl0ZXNtb2tlJzogWzI0NSwgMjQ1LCAyNDUsIDFdLFxuICAgICd5ZWxsb3cnOiBbMjU1LCAyNTUsIDAsIDFdLCAneWVsbG93Z3JlZW4nOiBbMTU0LCAyMDUsIDUwLCAxXVxufTtcblxuZnVuY3Rpb24gY2xhbXBDc3NCeXRlKGkpIHsgIC8vIENsYW1wIHRvIGludGVnZXIgMCAuLiAyNTUuXG4gICAgaSA9IE1hdGgucm91bmQoaSk7ICAvLyBTZWVtcyB0byBiZSB3aGF0IENocm9tZSBkb2VzICh2cyB0cnVuY2F0aW9uKS5cbiAgICByZXR1cm4gaSA8IDAgPyAwIDogaSA+IDI1NSA/IDI1NSA6IGk7XG59XG5cbmZ1bmN0aW9uIGNsYW1wQ3NzQW5nbGUoaSkgeyAgLy8gQ2xhbXAgdG8gaW50ZWdlciAwIC4uIDM2MC5cbiAgICBpID0gTWF0aC5yb3VuZChpKTsgIC8vIFNlZW1zIHRvIGJlIHdoYXQgQ2hyb21lIGRvZXMgKHZzIHRydW5jYXRpb24pLlxuICAgIHJldHVybiBpIDwgMCA/IDAgOiBpID4gMzYwID8gMzYwIDogaTtcbn1cblxuZnVuY3Rpb24gY2xhbXBDc3NGbG9hdChmKSB7ICAvLyBDbGFtcCB0byBmbG9hdCAwLjAgLi4gMS4wLlxuICAgIHJldHVybiBmIDwgMCA/IDAgOiBmID4gMSA/IDEgOiBmO1xufVxuXG5mdW5jdGlvbiBwYXJzZUNzc0ludChzdHIpIHsgIC8vIGludCBvciBwZXJjZW50YWdlLlxuICAgIGlmIChzdHIubGVuZ3RoICYmIHN0ci5jaGFyQXQoc3RyLmxlbmd0aCAtIDEpID09PSAnJScpIHtcbiAgICAgICAgcmV0dXJuIGNsYW1wQ3NzQnl0ZShwYXJzZUZsb2F0KHN0cikgLyAxMDAgKiAyNTUpO1xuICAgIH1cbiAgICByZXR1cm4gY2xhbXBDc3NCeXRlKHBhcnNlSW50KHN0ciwgMTApKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VDc3NGbG9hdChzdHIpIHsgIC8vIGZsb2F0IG9yIHBlcmNlbnRhZ2UuXG4gICAgaWYgKHN0ci5sZW5ndGggJiYgc3RyLmNoYXJBdChzdHIubGVuZ3RoIC0gMSkgPT09ICclJykge1xuICAgICAgICByZXR1cm4gY2xhbXBDc3NGbG9hdChwYXJzZUZsb2F0KHN0cikgLyAxMDApO1xuICAgIH1cbiAgICByZXR1cm4gY2xhbXBDc3NGbG9hdChwYXJzZUZsb2F0KHN0cikpO1xufVxuXG5mdW5jdGlvbiBjc3NIdWVUb1JnYihtMSwgbTIsIGgpIHtcbiAgICBpZiAoaCA8IDApIHtcbiAgICAgICAgaCArPSAxO1xuICAgIH1cbiAgICBlbHNlIGlmIChoID4gMSkge1xuICAgICAgICBoIC09IDE7XG4gICAgfVxuXG4gICAgaWYgKGggKiA2IDwgMSkge1xuICAgICAgICByZXR1cm4gbTEgKyAobTIgLSBtMSkgKiBoICogNjtcbiAgICB9XG4gICAgaWYgKGggKiAyIDwgMSkge1xuICAgICAgICByZXR1cm4gbTI7XG4gICAgfVxuICAgIGlmIChoICogMyA8IDIpIHtcbiAgICAgICAgcmV0dXJuIG0xICsgKG0yIC0gbTEpICogKDIgLyAzIC0gaCkgKiA2O1xuICAgIH1cbiAgICByZXR1cm4gbTE7XG59XG5cbmZ1bmN0aW9uIGxlcnBOdW1iZXIoYSwgYiwgcCkge1xuICAgIHJldHVybiBhICsgKGIgLSBhKSAqIHA7XG59XG5cbmZ1bmN0aW9uIHNldFJnYmEob3V0LCByLCBnLCBiLCBhKSB7XG4gICAgb3V0WzBdID0gcjsgb3V0WzFdID0gZzsgb3V0WzJdID0gYjsgb3V0WzNdID0gYTtcbiAgICByZXR1cm4gb3V0O1xufVxuZnVuY3Rpb24gY29weVJnYmEob3V0LCBhKSB7XG4gICAgb3V0WzBdID0gYVswXTsgb3V0WzFdID0gYVsxXTsgb3V0WzJdID0gYVsyXTsgb3V0WzNdID0gYVszXTtcbiAgICByZXR1cm4gb3V0O1xufVxuXG52YXIgY29sb3JDYWNoZSA9IG5ldyBMUlUoMjApO1xudmFyIGxhc3RSZW1vdmVkQXJyID0gbnVsbDtcblxuZnVuY3Rpb24gcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycikge1xuICAgIC8vIFJldXNlIHJlbW92ZWQgYXJyYXlcbiAgICBpZiAobGFzdFJlbW92ZWRBcnIpIHtcbiAgICAgICAgY29weVJnYmEobGFzdFJlbW92ZWRBcnIsIHJnYmFBcnIpO1xuICAgIH1cbiAgICBsYXN0UmVtb3ZlZEFyciA9IGNvbG9yQ2FjaGUucHV0KGNvbG9yU3RyLCBsYXN0UmVtb3ZlZEFyciB8fCAocmdiYUFyci5zbGljZSgpKSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yU3RyXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSBvdXRcbiAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fVxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL3V0aWwvY29sb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlKGNvbG9yU3RyLCByZ2JhQXJyKSB7XG4gICAgaWYgKCFjb2xvclN0cikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJnYmFBcnIgPSByZ2JhQXJyIHx8IFtdO1xuXG4gICAgdmFyIGNhY2hlZCA9IGNvbG9yQ2FjaGUuZ2V0KGNvbG9yU3RyKTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIHJldHVybiBjb3B5UmdiYShyZ2JhQXJyLCBjYWNoZWQpO1xuICAgIH1cblxuICAgIC8vIGNvbG9yU3RyIG1heSBiZSBub3Qgc3RyaW5nXG4gICAgY29sb3JTdHIgPSBjb2xvclN0ciArICcnO1xuICAgIC8vIFJlbW92ZSBhbGwgd2hpdGVzcGFjZSwgbm90IGNvbXBsaWFudCwgYnV0IHNob3VsZCBqdXN0IGJlIG1vcmUgYWNjZXB0aW5nLlxuICAgIHZhciBzdHIgPSBjb2xvclN0ci5yZXBsYWNlKC8gL2csICcnKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gQ29sb3Iga2V5d29yZHMgKGFuZCB0cmFuc3BhcmVudCkgbG9va3VwLlxuICAgIGlmIChzdHIgaW4ga0NTU0NvbG9yVGFibGUpIHtcbiAgICAgICAgY29weVJnYmEocmdiYUFyciwga0NTU0NvbG9yVGFibGVbc3RyXSk7XG4gICAgICAgIHB1dFRvQ2FjaGUoY29sb3JTdHIsIHJnYmFBcnIpO1xuICAgICAgICByZXR1cm4gcmdiYUFycjtcbiAgICB9XG5cbiAgICAvLyAjYWJjIGFuZCAjYWJjMTIzIHN5bnRheC5cbiAgICBpZiAoc3RyLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG4gICAgICAgIGlmIChzdHIubGVuZ3RoID09PSA0KSB7XG4gICAgICAgICAgICB2YXIgaXYgPSBwYXJzZUludChzdHIuc3Vic3RyKDEpLCAxNik7ICAvLyBUT0RPKGRlYW5tKTogU3RyaWN0ZXIgcGFyc2luZy5cbiAgICAgICAgICAgIGlmICghKGl2ID49IDAgJiYgaXYgPD0gMHhmZmYpKSB7XG4gICAgICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLCAwLCAwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47ICAvLyBDb3ZlcnMgTmFOLlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLFxuICAgICAgICAgICAgICAgICgoaXYgJiAweGYwMCkgPj4gNCkgfCAoKGl2ICYgMHhmMDApID4+IDgpLFxuICAgICAgICAgICAgICAgIChpdiAmIDB4ZjApIHwgKChpdiAmIDB4ZjApID4+IDQpLFxuICAgICAgICAgICAgICAgIChpdiAmIDB4ZikgfCAoKGl2ICYgMHhmKSA8PCA0KSxcbiAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgICAgICByZXR1cm4gcmdiYUFycjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdHIubGVuZ3RoID09PSA3KSB7XG4gICAgICAgICAgICB2YXIgaXYgPSBwYXJzZUludChzdHIuc3Vic3RyKDEpLCAxNik7ICAvLyBUT0RPKGRlYW5tKTogU3RyaWN0ZXIgcGFyc2luZy5cbiAgICAgICAgICAgIGlmICghKGl2ID49IDAgJiYgaXYgPD0gMHhmZmZmZmYpKSB7XG4gICAgICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLCAwLCAwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47ICAvLyBDb3ZlcnMgTmFOLlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLFxuICAgICAgICAgICAgICAgIChpdiAmIDB4ZmYwMDAwKSA+PiAxNixcbiAgICAgICAgICAgICAgICAoaXYgJiAweGZmMDApID4+IDgsXG4gICAgICAgICAgICAgICAgaXYgJiAweGZmLFxuICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBwdXRUb0NhY2hlKGNvbG9yU3RyLCByZ2JhQXJyKTtcbiAgICAgICAgICAgIHJldHVybiByZ2JhQXJyO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgb3AgPSBzdHIuaW5kZXhPZignKCcpO1xuICAgIHZhciBlcCA9IHN0ci5pbmRleE9mKCcpJyk7XG4gICAgaWYgKG9wICE9PSAtMSAmJiBlcCArIDEgPT09IHN0ci5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGZuYW1lID0gc3RyLnN1YnN0cigwLCBvcCk7XG4gICAgICAgIHZhciBwYXJhbXMgPSBzdHIuc3Vic3RyKG9wICsgMSwgZXAgLSAob3AgKyAxKSkuc3BsaXQoJywnKTtcbiAgICAgICAgdmFyIGFscGhhID0gMTsgIC8vIFRvIGFsbG93IGNhc2UgZmFsbHRocm91Z2guXG4gICAgICAgIHN3aXRjaCAoZm5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3JnYmEnOlxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMubGVuZ3RoICE9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFJnYmEocmdiYUFyciwgMCwgMCwgMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWxwaGEgPSBwYXJzZUNzc0Zsb2F0KHBhcmFtcy5wb3AoKSk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxuICAgICAgICAgICAgLy8gRmFsbCB0aHJvdWdoLlxuICAgICAgICAgICAgY2FzZSAncmdiJzpcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLmxlbmd0aCAhPT0gMykge1xuICAgICAgICAgICAgICAgICAgICBzZXRSZ2JhKHJnYmFBcnIsIDAsIDAsIDAsIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldFJnYmEocmdiYUFycixcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VDc3NJbnQocGFyYW1zWzBdKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VDc3NJbnQocGFyYW1zWzFdKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VDc3NJbnQocGFyYW1zWzJdKSxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGFcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHB1dFRvQ2FjaGUoY29sb3JTdHIsIHJnYmFBcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZ2JhQXJyO1xuICAgICAgICAgICAgY2FzZSAnaHNsYSc6XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggIT09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLCAwLCAwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJhbXNbM10gPSBwYXJzZUNzc0Zsb2F0KHBhcmFtc1szXSk7XG4gICAgICAgICAgICAgICAgaHNsYTJyZ2JhKHBhcmFtcywgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJnYmFBcnI7XG4gICAgICAgICAgICBjYXNlICdoc2wnOlxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMubGVuZ3RoICE9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFJnYmEocmdiYUFyciwgMCwgMCwgMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaHNsYTJyZ2JhKHBhcmFtcywgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJnYmFBcnI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFJnYmEocmdiYUFyciwgMCwgMCwgMCwgMSk7XG4gICAgcmV0dXJuO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IGhzbGFcbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IHJnYmFcbiAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fSByZ2JhXG4gKi9cbmZ1bmN0aW9uIGhzbGEycmdiYShoc2xhLCByZ2JhKSB7XG4gICAgdmFyIGggPSAoKChwYXJzZUZsb2F0KGhzbGFbMF0pICUgMzYwKSArIDM2MCkgJSAzNjApIC8gMzYwOyAgLy8gMCAuLiAxXG4gICAgLy8gTk9URShkZWFubSk6IEFjY29yZGluZyB0byB0aGUgQ1NTIHNwZWMgcy9sIHNob3VsZCBvbmx5IGJlXG4gICAgLy8gcGVyY2VudGFnZXMsIGJ1dCB3ZSBkb24ndCBib3RoZXIgYW5kIGxldCBmbG9hdCBvciBwZXJjZW50YWdlLlxuICAgIHZhciBzID0gcGFyc2VDc3NGbG9hdChoc2xhWzFdKTtcbiAgICB2YXIgbCA9IHBhcnNlQ3NzRmxvYXQoaHNsYVsyXSk7XG4gICAgdmFyIG0yID0gbCA8PSAwLjUgPyBsICogKHMgKyAxKSA6IGwgKyBzIC0gbCAqIHM7XG4gICAgdmFyIG0xID0gbCAqIDIgLSBtMjtcblxuICAgIHJnYmEgPSByZ2JhIHx8IFtdO1xuICAgIHNldFJnYmEocmdiYSxcbiAgICAgICAgY2xhbXBDc3NCeXRlKGNzc0h1ZVRvUmdiKG0xLCBtMiwgaCArIDEgLyAzKSAqIDI1NSksXG4gICAgICAgIGNsYW1wQ3NzQnl0ZShjc3NIdWVUb1JnYihtMSwgbTIsIGgpICogMjU1KSxcbiAgICAgICAgY2xhbXBDc3NCeXRlKGNzc0h1ZVRvUmdiKG0xLCBtMiwgaCAtIDEgLyAzKSAqIDI1NSksXG4gICAgICAgIDFcbiAgICApO1xuXG4gICAgaWYgKGhzbGEubGVuZ3RoID09PSA0KSB7XG4gICAgICAgIHJnYmFbM10gPSBoc2xhWzNdO1xuICAgIH1cblxuICAgIHJldHVybiByZ2JhO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IHJnYmFcbiAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fSBoc2xhXG4gKi9cbmZ1bmN0aW9uIHJnYmEyaHNsYShyZ2JhKSB7XG4gICAgaWYgKCFyZ2JhKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSR0IgZnJvbSAwIHRvIDI1NVxuICAgIHZhciBSID0gcmdiYVswXSAvIDI1NTtcbiAgICB2YXIgRyA9IHJnYmFbMV0gLyAyNTU7XG4gICAgdmFyIEIgPSByZ2JhWzJdIC8gMjU1O1xuXG4gICAgdmFyIHZNaW4gPSBNYXRoLm1pbihSLCBHLCBCKTsgLy8gTWluLiB2YWx1ZSBvZiBSR0JcbiAgICB2YXIgdk1heCA9IE1hdGgubWF4KFIsIEcsIEIpOyAvLyBNYXguIHZhbHVlIG9mIFJHQlxuICAgIHZhciBkZWx0YSA9IHZNYXggLSB2TWluOyAvLyBEZWx0YSBSR0IgdmFsdWVcblxuICAgIHZhciBMID0gKHZNYXggKyB2TWluKSAvIDI7XG4gICAgdmFyIEg7XG4gICAgdmFyIFM7XG4gICAgLy8gSFNMIHJlc3VsdHMgZnJvbSAwIHRvIDFcbiAgICBpZiAoZGVsdGEgPT09IDApIHtcbiAgICAgICAgSCA9IDA7XG4gICAgICAgIFMgPSAwO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKEwgPCAwLjUpIHtcbiAgICAgICAgICAgIFMgPSBkZWx0YSAvICh2TWF4ICsgdk1pbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBTID0gZGVsdGEgLyAoMiAtIHZNYXggLSB2TWluKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWx0YVIgPSAoKCh2TWF4IC0gUikgLyA2KSArIChkZWx0YSAvIDIpKSAvIGRlbHRhO1xuICAgICAgICB2YXIgZGVsdGFHID0gKCgodk1heCAtIEcpIC8gNikgKyAoZGVsdGEgLyAyKSkgLyBkZWx0YTtcbiAgICAgICAgdmFyIGRlbHRhQiA9ICgoKHZNYXggLSBCKSAvIDYpICsgKGRlbHRhIC8gMikpIC8gZGVsdGE7XG5cbiAgICAgICAgaWYgKFIgPT09IHZNYXgpIHtcbiAgICAgICAgICAgIEggPSBkZWx0YUIgLSBkZWx0YUc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoRyA9PT0gdk1heCkge1xuICAgICAgICAgICAgSCA9ICgxIC8gMykgKyBkZWx0YVIgLSBkZWx0YUI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQiA9PT0gdk1heCkge1xuICAgICAgICAgICAgSCA9ICgyIC8gMykgKyBkZWx0YUcgLSBkZWx0YVI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoSCA8IDApIHtcbiAgICAgICAgICAgIEggKz0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChIID4gMSkge1xuICAgICAgICAgICAgSCAtPSAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGhzbGEgPSBbSCAqIDM2MCwgUywgTF07XG5cbiAgICBpZiAocmdiYVszXSAhPSBudWxsKSB7XG4gICAgICAgIGhzbGEucHVzaChyZ2JhWzNdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaHNsYTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29sb3JcbiAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbFxuICogQHJldHVybiB7c3RyaW5nfVxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL3V0aWwvY29sb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpZnQoY29sb3IsIGxldmVsKSB7XG4gICAgdmFyIGNvbG9yQXJyID0gcGFyc2UoY29sb3IpO1xuICAgIGlmIChjb2xvckFycikge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgaWYgKGxldmVsIDwgMCkge1xuICAgICAgICAgICAgICAgIGNvbG9yQXJyW2ldID0gY29sb3JBcnJbaV0gKiAoMSAtIGxldmVsKSB8IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb2xvckFycltpXSA9ICgoMjU1IC0gY29sb3JBcnJbaV0pICogbGV2ZWwgKyBjb2xvckFycltpXSkgfCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbG9yQXJyW2ldID4gMjU1KSB7XG4gICAgICAgICAgICAgICAgY29sb3JBcnJbaV0gPSAyNTU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb2xvcltpXSA8IDApIHtcbiAgICAgICAgICAgICAgICBjb2xvckFycltpXSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZ2lmeShjb2xvckFyciwgY29sb3JBcnIubGVuZ3RoID09PSA0ID8gJ3JnYmEnIDogJ3JnYicpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29sb3JcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci91dGlsL2NvbG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0hleChjb2xvcikge1xuICAgIHZhciBjb2xvckFyciA9IHBhcnNlKGNvbG9yKTtcbiAgICBpZiAoY29sb3JBcnIpIHtcbiAgICAgICAgcmV0dXJuICgoMSA8PCAyNCkgKyAoY29sb3JBcnJbMF0gPDwgMTYpICsgKGNvbG9yQXJyWzFdIDw8IDgpICsgKCtjb2xvckFyclsyXSkpLnRvU3RyaW5nKDE2KS5zbGljZSgxKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWFwIHZhbHVlIHRvIGNvbG9yLiBGYXN0ZXIgdGhhbiBsZXJwIG1ldGhvZHMgYmVjYXVzZSBjb2xvciBpcyByZXByZXNlbnRlZCBieSByZ2JhIGFycmF5LlxuICogQHBhcmFtIHtudW1iZXJ9IG5vcm1hbGl6ZWRWYWx1ZSBBIGZsb2F0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBwYXJhbSB7QXJyYXkuPEFycmF5LjxudW1iZXI+Pn0gY29sb3JzIExpc3Qgb2YgcmdiYSBjb2xvciBhcnJheVxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPn0gW291dF0gTWFwcGVkIGdiYSBjb2xvciBhcnJheVxuICogQHJldHVybiB7QXJyYXkuPG51bWJlcj59IHdpbGwgYmUgbnVsbC91bmRlZmluZWQgaWYgaW5wdXQgaWxsZWdhbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZhc3RMZXJwKG5vcm1hbGl6ZWRWYWx1ZSwgY29sb3JzLCBvdXQpIHtcbiAgICBpZiAoIShjb2xvcnMgJiYgY29sb3JzLmxlbmd0aClcbiAgICAgICAgfHwgIShub3JtYWxpemVkVmFsdWUgPj0gMCAmJiBub3JtYWxpemVkVmFsdWUgPD0gMSlcbiAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG91dCA9IG91dCB8fCBbXTtcblxuICAgIHZhciB2YWx1ZSA9IG5vcm1hbGl6ZWRWYWx1ZSAqIChjb2xvcnMubGVuZ3RoIC0gMSk7XG4gICAgdmFyIGxlZnRJbmRleCA9IE1hdGguZmxvb3IodmFsdWUpO1xuICAgIHZhciByaWdodEluZGV4ID0gTWF0aC5jZWlsKHZhbHVlKTtcbiAgICB2YXIgbGVmdENvbG9yID0gY29sb3JzW2xlZnRJbmRleF07XG4gICAgdmFyIHJpZ2h0Q29sb3IgPSBjb2xvcnNbcmlnaHRJbmRleF07XG4gICAgdmFyIGR2ID0gdmFsdWUgLSBsZWZ0SW5kZXg7XG4gICAgb3V0WzBdID0gY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzBdLCByaWdodENvbG9yWzBdLCBkdikpO1xuICAgIG91dFsxXSA9IGNsYW1wQ3NzQnl0ZShsZXJwTnVtYmVyKGxlZnRDb2xvclsxXSwgcmlnaHRDb2xvclsxXSwgZHYpKTtcbiAgICBvdXRbMl0gPSBjbGFtcENzc0J5dGUobGVycE51bWJlcihsZWZ0Q29sb3JbMl0sIHJpZ2h0Q29sb3JbMl0sIGR2KSk7XG4gICAgb3V0WzNdID0gY2xhbXBDc3NGbG9hdChsZXJwTnVtYmVyKGxlZnRDb2xvclszXSwgcmlnaHRDb2xvclszXSwgZHYpKTtcblxuICAgIHJldHVybiBvdXQ7XG59XG5cbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBmYXN0TWFwVG9Db2xvciA9IGZhc3RMZXJwO1xuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBub3JtYWxpemVkVmFsdWUgQSBmbG9hdCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSBjb2xvcnMgQ29sb3IgbGlzdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IGZ1bGxPdXRwdXQgRGVmYXVsdCBmYWxzZS5cbiAqIEByZXR1cm4geyhzdHJpbmd8T2JqZWN0KX0gUmVzdWx0IGNvbG9yLiBJZiBmdWxsT3V0cHV0LFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge2NvbG9yOiAuLi4sIGxlZnRJbmRleDogLi4uLCByaWdodEluZGV4OiAuLi4sIHZhbHVlOiAuLi59LFxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL3V0aWwvY29sb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxlcnAobm9ybWFsaXplZFZhbHVlLCBjb2xvcnMsIGZ1bGxPdXRwdXQpIHtcbiAgICBpZiAoIShjb2xvcnMgJiYgY29sb3JzLmxlbmd0aClcbiAgICAgICAgfHwgIShub3JtYWxpemVkVmFsdWUgPj0gMCAmJiBub3JtYWxpemVkVmFsdWUgPD0gMSlcbiAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IG5vcm1hbGl6ZWRWYWx1ZSAqIChjb2xvcnMubGVuZ3RoIC0gMSk7XG4gICAgdmFyIGxlZnRJbmRleCA9IE1hdGguZmxvb3IodmFsdWUpO1xuICAgIHZhciByaWdodEluZGV4ID0gTWF0aC5jZWlsKHZhbHVlKTtcbiAgICB2YXIgbGVmdENvbG9yID0gcGFyc2UoY29sb3JzW2xlZnRJbmRleF0pO1xuICAgIHZhciByaWdodENvbG9yID0gcGFyc2UoY29sb3JzW3JpZ2h0SW5kZXhdKTtcbiAgICB2YXIgZHYgPSB2YWx1ZSAtIGxlZnRJbmRleDtcblxuICAgIHZhciBjb2xvciA9IHN0cmluZ2lmeShcbiAgICAgICAgW1xuICAgICAgICAgICAgY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzBdLCByaWdodENvbG9yWzBdLCBkdikpLFxuICAgICAgICAgICAgY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzFdLCByaWdodENvbG9yWzFdLCBkdikpLFxuICAgICAgICAgICAgY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzJdLCByaWdodENvbG9yWzJdLCBkdikpLFxuICAgICAgICAgICAgY2xhbXBDc3NGbG9hdChsZXJwTnVtYmVyKGxlZnRDb2xvclszXSwgcmlnaHRDb2xvclszXSwgZHYpKVxuICAgICAgICBdLFxuICAgICAgICAncmdiYSdcbiAgICApO1xuXG4gICAgcmV0dXJuIGZ1bGxPdXRwdXRcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBjb2xvcjogY29sb3IsXG4gICAgICAgICAgICBsZWZ0SW5kZXg6IGxlZnRJbmRleCxcbiAgICAgICAgICAgIHJpZ2h0SW5kZXg6IHJpZ2h0SW5kZXgsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgfVxuICAgICAgICA6IGNvbG9yO1xufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbWFwVG9Db2xvciA9IGxlcnA7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yXG4gKiBAcGFyYW0ge251bWJlcj19IGggMCB+IDM2MCwgaWdub3JlIHdoZW4gbnVsbC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gcyAwIH4gMSwgaWdub3JlIHdoZW4gbnVsbC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gbCAwIH4gMSwgaWdub3JlIHdoZW4gbnVsbC5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ29sb3Igc3RyaW5nIGluIHJnYmEgZm9ybWF0LlxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL3V0aWwvY29sb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vZGlmeUhTTChjb2xvciwgaCwgcywgbCkge1xuICAgIGNvbG9yID0gcGFyc2UoY29sb3IpO1xuXG4gICAgaWYgKGNvbG9yKSB7XG4gICAgICAgIGNvbG9yID0gcmdiYTJoc2xhKGNvbG9yKTtcbiAgICAgICAgaCAhPSBudWxsICYmIChjb2xvclswXSA9IGNsYW1wQ3NzQW5nbGUoaCkpO1xuICAgICAgICBzICE9IG51bGwgJiYgKGNvbG9yWzFdID0gcGFyc2VDc3NGbG9hdChzKSk7XG4gICAgICAgIGwgIT0gbnVsbCAmJiAoY29sb3JbMl0gPSBwYXJzZUNzc0Zsb2F0KGwpKTtcblxuICAgICAgICByZXR1cm4gc3RyaW5naWZ5KGhzbGEycmdiYShjb2xvciksICdyZ2JhJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvclxuICogQHBhcmFtIHtudW1iZXI9fSBhbHBoYSAwIH4gMVxuICogQHJldHVybiB7c3RyaW5nfSBDb2xvciBzdHJpbmcgaW4gcmdiYSBmb3JtYXQuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnpyZW5kZXIvdXRpbC9jb2xvclxuICovXG5leHBvcnQgZnVuY3Rpb24gbW9kaWZ5QWxwaGEoY29sb3IsIGFscGhhKSB7XG4gICAgY29sb3IgPSBwYXJzZShjb2xvcik7XG5cbiAgICBpZiAoY29sb3IgJiYgYWxwaGEgIT0gbnVsbCkge1xuICAgICAgICBjb2xvclszXSA9IGNsYW1wQ3NzRmxvYXQoYWxwaGEpO1xuICAgICAgICByZXR1cm4gc3RyaW5naWZ5KGNvbG9yLCAncmdiYScpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSBhcnJDb2xvciBsaWtlIFsxMiwzMyw0NCwwLjRdXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAncmdiYScsICdoc3ZhJywgLi4uXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFJlc3VsdCBjb2xvci4gKElmIGlucHV0IGlsbGVnYWwsIHJldHVybiB1bmRlZmluZWQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5KGFyckNvbG9yLCB0eXBlKSB7XG4gICAgaWYgKCFhcnJDb2xvciB8fCAhYXJyQ29sb3IubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGNvbG9yU3RyID0gYXJyQ29sb3JbMF0gKyAnLCcgKyBhcnJDb2xvclsxXSArICcsJyArIGFyckNvbG9yWzJdO1xuICAgIGlmICh0eXBlID09PSAncmdiYScgfHwgdHlwZSA9PT0gJ2hzdmEnIHx8IHR5cGUgPT09ICdoc2xhJykge1xuICAgICAgICBjb2xvclN0ciArPSAnLCcgKyBhcnJDb2xvclszXTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGUgKyAnKCcgKyBjb2xvclN0ciArICcpJztcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvc3JjL3Rvb2wvY29sb3IuanNcbi8vIG1vZHVsZSBpZCA9IDIxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///210\n");

/***/ }),
/* 211 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("// Simple LRU cache use doubly linked list\n// @module zrender/core/LRU\n\n/**\n * Simple double linked list. Compared with array, it has O(1) remove operation.\n * @constructor\n */\nvar LinkedList = function () {\n\n    /**\n     * @type {module:zrender/core/LRU~Entry}\n     */\n    this.head = null;\n\n    /**\n     * @type {module:zrender/core/LRU~Entry}\n     */\n    this.tail = null;\n\n    this._len = 0;\n};\n\nvar linkedListProto = LinkedList.prototype;\n/**\n * Insert a new value at the tail\n * @param  {} val\n * @return {module:zrender/core/LRU~Entry}\n */\nlinkedListProto.insert = function (val) {\n    var entry = new Entry(val);\n    this.insertEntry(entry);\n    return entry;\n};\n\n/**\n * Insert an entry at the tail\n * @param  {module:zrender/core/LRU~Entry} entry\n */\nlinkedListProto.insertEntry = function (entry) {\n    if (!this.head) {\n        this.head = this.tail = entry;\n    }\n    else {\n        this.tail.next = entry;\n        entry.prev = this.tail;\n        entry.next = null;\n        this.tail = entry;\n    }\n    this._len++;\n};\n\n/**\n * Remove entry.\n * @param  {module:zrender/core/LRU~Entry} entry\n */\nlinkedListProto.remove = function (entry) {\n    var prev = entry.prev;\n    var next = entry.next;\n    if (prev) {\n        prev.next = next;\n    }\n    else {\n        // Is head\n        this.head = next;\n    }\n    if (next) {\n        next.prev = prev;\n    }\n    else {\n        // Is tail\n        this.tail = prev;\n    }\n    entry.next = entry.prev = null;\n    this._len--;\n};\n\n/**\n * @return {number}\n */\nlinkedListProto.len = function () {\n    return this._len;\n};\n\n/**\n * Clear list\n */\nlinkedListProto.clear = function () {\n    this.head = this.tail = null;\n    this._len = 0;\n};\n\n/**\n * @constructor\n * @param {} val\n */\nvar Entry = function (val) {\n    /**\n     * @type {}\n     */\n    this.value = val;\n\n    /**\n     * @type {module:zrender/core/LRU~Entry}\n     */\n    this.next;\n\n    /**\n     * @type {module:zrender/core/LRU~Entry}\n     */\n    this.prev;\n};\n\n/**\n * LRU Cache\n * @constructor\n * @alias module:zrender/core/LRU\n */\nvar LRU = function (maxSize) {\n\n    this._list = new LinkedList();\n\n    this._map = {};\n\n    this._maxSize = maxSize || 10;\n\n    this._lastRemovedEntry = null;\n};\n\nvar LRUProto = LRU.prototype;\n\n/**\n * @param  {string} key\n * @param  {} value\n * @return {} Removed value\n */\nLRUProto.put = function (key, value) {\n    var list = this._list;\n    var map = this._map;\n    var removed = null;\n    if (map[key] == null) {\n        var len = list.len();\n        // Reuse last removed entry\n        var entry = this._lastRemovedEntry;\n\n        if (len >= this._maxSize && len > 0) {\n            // Remove the least recently used\n            var leastUsedEntry = list.head;\n            list.remove(leastUsedEntry);\n            delete map[leastUsedEntry.key];\n\n            removed = leastUsedEntry.value;\n            this._lastRemovedEntry = leastUsedEntry;\n        }\n\n        if (entry) {\n            entry.value = value;\n        }\n        else {\n            entry = new Entry(value);\n        }\n        entry.key = key;\n        list.insertEntry(entry);\n        map[key] = entry;\n    }\n\n    return removed;\n};\n\n/**\n * @param  {string} key\n * @return {}\n */\nLRUProto.get = function (key) {\n    var entry = this._map[key];\n    var list = this._list;\n    if (entry != null) {\n        // Put the latest used entry in the tail\n        if (entry !== list.tail) {\n            list.remove(entry);\n            list.insertEntry(entry);\n        }\n\n        return entry.value;\n    }\n};\n\n/**\n * Clear the cache\n */\nLRUProto.clear = function () {\n    this._list.clear();\n    this._map = {};\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (LRU);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjExLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvc3JjL2NvcmUvTFJVLmpzP2RjOTkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2ltcGxlIExSVSBjYWNoZSB1c2UgZG91Ymx5IGxpbmtlZCBsaXN0XG4vLyBAbW9kdWxlIHpyZW5kZXIvY29yZS9MUlVcblxuLyoqXG4gKiBTaW1wbGUgZG91YmxlIGxpbmtlZCBsaXN0LiBDb21wYXJlZCB3aXRoIGFycmF5LCBpdCBoYXMgTygxKSByZW1vdmUgb3BlcmF0aW9uLlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZhciBMaW5rZWRMaXN0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge21vZHVsZTp6cmVuZGVyL2NvcmUvTFJVfkVudHJ5fVxuICAgICAqL1xuICAgIHRoaXMuaGVhZCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bW9kdWxlOnpyZW5kZXIvY29yZS9MUlV+RW50cnl9XG4gICAgICovXG4gICAgdGhpcy50YWlsID0gbnVsbDtcblxuICAgIHRoaXMuX2xlbiA9IDA7XG59O1xuXG52YXIgbGlua2VkTGlzdFByb3RvID0gTGlua2VkTGlzdC5wcm90b3R5cGU7XG4vKipcbiAqIEluc2VydCBhIG5ldyB2YWx1ZSBhdCB0aGUgdGFpbFxuICogQHBhcmFtICB7fSB2YWxcbiAqIEByZXR1cm4ge21vZHVsZTp6cmVuZGVyL2NvcmUvTFJVfkVudHJ5fVxuICovXG5saW5rZWRMaXN0UHJvdG8uaW5zZXJ0ID0gZnVuY3Rpb24gKHZhbCkge1xuICAgIHZhciBlbnRyeSA9IG5ldyBFbnRyeSh2YWwpO1xuICAgIHRoaXMuaW5zZXJ0RW50cnkoZW50cnkpO1xuICAgIHJldHVybiBlbnRyeTtcbn07XG5cbi8qKlxuICogSW5zZXJ0IGFuIGVudHJ5IGF0IHRoZSB0YWlsXG4gKiBAcGFyYW0gIHttb2R1bGU6enJlbmRlci9jb3JlL0xSVX5FbnRyeX0gZW50cnlcbiAqL1xubGlua2VkTGlzdFByb3RvLmluc2VydEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgaWYgKCF0aGlzLmhlYWQpIHtcbiAgICAgICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gZW50cnk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLnRhaWwubmV4dCA9IGVudHJ5O1xuICAgICAgICBlbnRyeS5wcmV2ID0gdGhpcy50YWlsO1xuICAgICAgICBlbnRyeS5uZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy50YWlsID0gZW50cnk7XG4gICAgfVxuICAgIHRoaXMuX2xlbisrO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgZW50cnkuXG4gKiBAcGFyYW0gIHttb2R1bGU6enJlbmRlci9jb3JlL0xSVX5FbnRyeX0gZW50cnlcbiAqL1xubGlua2VkTGlzdFByb3RvLnJlbW92ZSA9IGZ1bmN0aW9uIChlbnRyeSkge1xuICAgIHZhciBwcmV2ID0gZW50cnkucHJldjtcbiAgICB2YXIgbmV4dCA9IGVudHJ5Lm5leHQ7XG4gICAgaWYgKHByZXYpIHtcbiAgICAgICAgcHJldi5uZXh0ID0gbmV4dDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIElzIGhlYWRcbiAgICAgICAgdGhpcy5oZWFkID0gbmV4dDtcbiAgICB9XG4gICAgaWYgKG5leHQpIHtcbiAgICAgICAgbmV4dC5wcmV2ID0gcHJldjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIElzIHRhaWxcbiAgICAgICAgdGhpcy50YWlsID0gcHJldjtcbiAgICB9XG4gICAgZW50cnkubmV4dCA9IGVudHJ5LnByZXYgPSBudWxsO1xuICAgIHRoaXMuX2xlbi0tO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmxpbmtlZExpc3RQcm90by5sZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xlbjtcbn07XG5cbi8qKlxuICogQ2xlYXIgbGlzdFxuICovXG5saW5rZWRMaXN0UHJvdG8uY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICB0aGlzLl9sZW4gPSAwO1xufTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7fSB2YWxcbiAqL1xudmFyIEVudHJ5ID0gZnVuY3Rpb24gKHZhbCkge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHt9XG4gICAgICovXG4gICAgdGhpcy52YWx1ZSA9IHZhbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHttb2R1bGU6enJlbmRlci9jb3JlL0xSVX5FbnRyeX1cbiAgICAgKi9cbiAgICB0aGlzLm5leHQ7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bW9kdWxlOnpyZW5kZXIvY29yZS9MUlV+RW50cnl9XG4gICAgICovXG4gICAgdGhpcy5wcmV2O1xufTtcblxuLyoqXG4gKiBMUlUgQ2FjaGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIG1vZHVsZTp6cmVuZGVyL2NvcmUvTFJVXG4gKi9cbnZhciBMUlUgPSBmdW5jdGlvbiAobWF4U2l6ZSkge1xuXG4gICAgdGhpcy5fbGlzdCA9IG5ldyBMaW5rZWRMaXN0KCk7XG5cbiAgICB0aGlzLl9tYXAgPSB7fTtcblxuICAgIHRoaXMuX21heFNpemUgPSBtYXhTaXplIHx8IDEwO1xuXG4gICAgdGhpcy5fbGFzdFJlbW92ZWRFbnRyeSA9IG51bGw7XG59O1xuXG52YXIgTFJVUHJvdG8gPSBMUlUucHJvdG90eXBlO1xuXG4vKipcbiAqIEBwYXJhbSAge3N0cmluZ30ga2V5XG4gKiBAcGFyYW0gIHt9IHZhbHVlXG4gKiBAcmV0dXJuIHt9IFJlbW92ZWQgdmFsdWVcbiAqL1xuTFJVUHJvdG8ucHV0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICB2YXIgbGlzdCA9IHRoaXMuX2xpc3Q7XG4gICAgdmFyIG1hcCA9IHRoaXMuX21hcDtcbiAgICB2YXIgcmVtb3ZlZCA9IG51bGw7XG4gICAgaWYgKG1hcFtrZXldID09IG51bGwpIHtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuKCk7XG4gICAgICAgIC8vIFJldXNlIGxhc3QgcmVtb3ZlZCBlbnRyeVxuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLl9sYXN0UmVtb3ZlZEVudHJ5O1xuXG4gICAgICAgIGlmIChsZW4gPj0gdGhpcy5fbWF4U2l6ZSAmJiBsZW4gPiAwKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGxlYXN0IHJlY2VudGx5IHVzZWRcbiAgICAgICAgICAgIHZhciBsZWFzdFVzZWRFbnRyeSA9IGxpc3QuaGVhZDtcbiAgICAgICAgICAgIGxpc3QucmVtb3ZlKGxlYXN0VXNlZEVudHJ5KTtcbiAgICAgICAgICAgIGRlbGV0ZSBtYXBbbGVhc3RVc2VkRW50cnkua2V5XTtcblxuICAgICAgICAgICAgcmVtb3ZlZCA9IGxlYXN0VXNlZEVudHJ5LnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fbGFzdFJlbW92ZWRFbnRyeSA9IGxlYXN0VXNlZEVudHJ5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW50cnkgPSBuZXcgRW50cnkodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVudHJ5LmtleSA9IGtleTtcbiAgICAgICAgbGlzdC5pbnNlcnRFbnRyeShlbnRyeSk7XG4gICAgICAgIG1hcFtrZXldID0gZW50cnk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlbW92ZWQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge3N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHt9XG4gKi9cbkxSVVByb3RvLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgZW50cnkgPSB0aGlzLl9tYXBba2V5XTtcbiAgICB2YXIgbGlzdCA9IHRoaXMuX2xpc3Q7XG4gICAgaWYgKGVudHJ5ICE9IG51bGwpIHtcbiAgICAgICAgLy8gUHV0IHRoZSBsYXRlc3QgdXNlZCBlbnRyeSBpbiB0aGUgdGFpbFxuICAgICAgICBpZiAoZW50cnkgIT09IGxpc3QudGFpbCkge1xuICAgICAgICAgICAgbGlzdC5yZW1vdmUoZW50cnkpO1xuICAgICAgICAgICAgbGlzdC5pbnNlcnRFbnRyeShlbnRyeSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZW50cnkudmFsdWU7XG4gICAgfVxufTtcblxuLyoqXG4gKiBDbGVhciB0aGUgY2FjaGVcbiAqL1xuTFJVUHJvdG8uY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fbGlzdC5jbGVhcigpO1xuICAgIHRoaXMuX21hcCA9IHt9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTFJVO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvc3JjL2NvcmUvTFJVLmpzXG4vLyBtb2R1bGUgaWQgPSAyMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///211\n");

/***/ }),
/* 212 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("function TextureUI(parent, object, key, params) {\n    ControlKit.ObjectComponent.apply(this, arguments);\n\n    this._object = object;\n    this._key = key;\n\n    this._onChange = params.onChange || function () {};\n    this._getFileNameByURL = params.getFileName || function (url) { return url; };\n\n    var self = this;\n\n    var wrap = this._wrapNode;\n    wrap.setStyleClass('texture-wrap');\n\n    var img = document.createElement('img');\n    var deleteEl = document.createElement('div');\n    deleteEl.className = 'texture-delete button';\n    var uploadEl = document.createElement('div');\n    uploadEl.className = 'texture-upload button';\n\n    this._img = img;\n    this._uploadEl = uploadEl;\n\n    wrap.getElement().appendChild(img);\n    wrap.getElement().appendChild(uploadEl);\n    wrap.getElement().appendChild(deleteEl);\n\n    this.update();\n\n    var liEl = this._wrapNode.getParent().getElement();\n\n    function uploadFiles(files) {\n        var imgFile = files.filter(function (file) {\n            return file.type.match(/image/);\n        })[0];\n\n        if (imgFile) {\n            object[key] = URL.createObjectURL(imgFile);\n\n            self._onChange(imgFile, object[key]);\n\n            self.update();\n        }\n    }\n    FileAPI.event.dnd(liEl, function (over) {\n        over ? liEl.classList.add('drag-hover')\n            : liEl.classList.remove('drag-hover');\n    }, function (files) {\n        uploadFiles(files);\n    });\n\n    // Clear\n    deleteEl.addEventListener('click', function () {\n        object[key] = 'none';\n        self.update();\n        self._onChange(null, 'none');\n    });\n    uploadEl.addEventListener('click', function () {\n        var el = document.createElement('input');\n        el.type = 'file';\n        el.onchange = function (e) {\n            uploadFiles(Array.prototype.slice.call(el.files));\n        };\n        el.click();\n    });\n}\n\nTextureUI.prototype = Object.create(ControlKit.ObjectComponent.prototype);\nTextureUI.prototype.constructor = TextureUI;\n\nTextureUI.prototype.update = function () {\n    var value = this._object[this._key];\n    this._img.src = value && value.toLowerCase() !== 'none' ? value : './img/chessboard.jpg';\n    this._img.style.opacity = (value && value !== 'none') ? 1 : 0.5;\n\n    var text = this._getFileNameByURL(value) || value || 'none';;\n    this._uploadEl.innerHTML = text;\n    this._uploadEl.title = text;\n};\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TextureUI);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3VpL1RleHR1cmUuanM/NjRmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBUZXh0dXJlVUkocGFyZW50LCBvYmplY3QsIGtleSwgcGFyYW1zKSB7XG4gICAgQ29udHJvbEtpdC5PYmplY3RDb21wb25lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHRoaXMuX29iamVjdCA9IG9iamVjdDtcbiAgICB0aGlzLl9rZXkgPSBrZXk7XG5cbiAgICB0aGlzLl9vbkNoYW5nZSA9IHBhcmFtcy5vbkNoYW5nZSB8fCBmdW5jdGlvbiAoKSB7fTtcbiAgICB0aGlzLl9nZXRGaWxlTmFtZUJ5VVJMID0gcGFyYW1zLmdldEZpbGVOYW1lIHx8IGZ1bmN0aW9uICh1cmwpIHsgcmV0dXJuIHVybDsgfTtcblxuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciB3cmFwID0gdGhpcy5fd3JhcE5vZGU7XG4gICAgd3JhcC5zZXRTdHlsZUNsYXNzKCd0ZXh0dXJlLXdyYXAnKTtcblxuICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICB2YXIgZGVsZXRlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkZWxldGVFbC5jbGFzc05hbWUgPSAndGV4dHVyZS1kZWxldGUgYnV0dG9uJztcbiAgICB2YXIgdXBsb2FkRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB1cGxvYWRFbC5jbGFzc05hbWUgPSAndGV4dHVyZS11cGxvYWQgYnV0dG9uJztcblxuICAgIHRoaXMuX2ltZyA9IGltZztcbiAgICB0aGlzLl91cGxvYWRFbCA9IHVwbG9hZEVsO1xuXG4gICAgd3JhcC5nZXRFbGVtZW50KCkuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICB3cmFwLmdldEVsZW1lbnQoKS5hcHBlbmRDaGlsZCh1cGxvYWRFbCk7XG4gICAgd3JhcC5nZXRFbGVtZW50KCkuYXBwZW5kQ2hpbGQoZGVsZXRlRWwpO1xuXG4gICAgdGhpcy51cGRhdGUoKTtcblxuICAgIHZhciBsaUVsID0gdGhpcy5fd3JhcE5vZGUuZ2V0UGFyZW50KCkuZ2V0RWxlbWVudCgpO1xuXG4gICAgZnVuY3Rpb24gdXBsb2FkRmlsZXMoZmlsZXMpIHtcbiAgICAgICAgdmFyIGltZ0ZpbGUgPSBmaWxlcy5maWx0ZXIoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmaWxlLnR5cGUubWF0Y2goL2ltYWdlLyk7XG4gICAgICAgIH0pWzBdO1xuXG4gICAgICAgIGlmIChpbWdGaWxlKSB7XG4gICAgICAgICAgICBvYmplY3Rba2V5XSA9IFVSTC5jcmVhdGVPYmplY3RVUkwoaW1nRmlsZSk7XG5cbiAgICAgICAgICAgIHNlbGYuX29uQ2hhbmdlKGltZ0ZpbGUsIG9iamVjdFtrZXldKTtcblxuICAgICAgICAgICAgc2VsZi51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBGaWxlQVBJLmV2ZW50LmRuZChsaUVsLCBmdW5jdGlvbiAob3Zlcikge1xuICAgICAgICBvdmVyID8gbGlFbC5jbGFzc0xpc3QuYWRkKCdkcmFnLWhvdmVyJylcbiAgICAgICAgICAgIDogbGlFbC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLWhvdmVyJyk7XG4gICAgfSwgZnVuY3Rpb24gKGZpbGVzKSB7XG4gICAgICAgIHVwbG9hZEZpbGVzKGZpbGVzKTtcbiAgICB9KTtcblxuICAgIC8vIENsZWFyXG4gICAgZGVsZXRlRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9iamVjdFtrZXldID0gJ25vbmUnO1xuICAgICAgICBzZWxmLnVwZGF0ZSgpO1xuICAgICAgICBzZWxmLl9vbkNoYW5nZShudWxsLCAnbm9uZScpO1xuICAgIH0pO1xuICAgIHVwbG9hZEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBlbC50eXBlID0gJ2ZpbGUnO1xuICAgICAgICBlbC5vbmNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB1cGxvYWRGaWxlcyhBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlbC5maWxlcykpO1xuICAgICAgICB9O1xuICAgICAgICBlbC5jbGljaygpO1xuICAgIH0pO1xufVxuXG5UZXh0dXJlVUkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDb250cm9sS2l0Lk9iamVjdENvbXBvbmVudC5wcm90b3R5cGUpO1xuVGV4dHVyZVVJLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRleHR1cmVVSTtcblxuVGV4dHVyZVVJLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHZhbHVlID0gdGhpcy5fb2JqZWN0W3RoaXMuX2tleV07XG4gICAgdGhpcy5faW1nLnNyYyA9IHZhbHVlICYmIHZhbHVlLnRvTG93ZXJDYXNlKCkgIT09ICdub25lJyA/IHZhbHVlIDogJy4vaW1nL2NoZXNzYm9hcmQuanBnJztcbiAgICB0aGlzLl9pbWcuc3R5bGUub3BhY2l0eSA9ICh2YWx1ZSAmJiB2YWx1ZSAhPT0gJ25vbmUnKSA/IDEgOiAwLjU7XG5cbiAgICB2YXIgdGV4dCA9IHRoaXMuX2dldEZpbGVOYW1lQnlVUkwodmFsdWUpIHx8IHZhbHVlIHx8ICdub25lJzs7XG4gICAgdGhpcy5fdXBsb2FkRWwuaW5uZXJIVE1MID0gdGV4dDtcbiAgICB0aGlzLl91cGxvYWRFbC50aXRsZSA9IHRleHQ7XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IFRleHR1cmVVSTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy91aS9UZXh0dXJlLmpzXG4vLyBtb2R1bGUgaWQgPSAyMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///212\n");

/***/ }),
/* 213 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__categorical_category10_js__ = __webpack_require__(214);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeCategory10\", function() { return __WEBPACK_IMPORTED_MODULE_0__categorical_category10_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__categorical_Accent_js__ = __webpack_require__(215);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeAccent\", function() { return __WEBPACK_IMPORTED_MODULE_1__categorical_Accent_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__categorical_Dark2_js__ = __webpack_require__(216);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeDark2\", function() { return __WEBPACK_IMPORTED_MODULE_2__categorical_Dark2_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__categorical_Paired_js__ = __webpack_require__(217);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePaired\", function() { return __WEBPACK_IMPORTED_MODULE_3__categorical_Paired_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__categorical_Pastel1_js__ = __webpack_require__(218);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePastel1\", function() { return __WEBPACK_IMPORTED_MODULE_4__categorical_Pastel1_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__categorical_Pastel2_js__ = __webpack_require__(219);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePastel2\", function() { return __WEBPACK_IMPORTED_MODULE_5__categorical_Pastel2_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__categorical_Set1_js__ = __webpack_require__(220);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeSet1\", function() { return __WEBPACK_IMPORTED_MODULE_6__categorical_Set1_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__categorical_Set2_js__ = __webpack_require__(221);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeSet2\", function() { return __WEBPACK_IMPORTED_MODULE_7__categorical_Set2_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__categorical_Set3_js__ = __webpack_require__(222);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeSet3\", function() { return __WEBPACK_IMPORTED_MODULE_8__categorical_Set3_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__categorical_Tableau10_js__ = __webpack_require__(223);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeTableau10\", function() { return __WEBPACK_IMPORTED_MODULE_9__categorical_Tableau10_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__diverging_BrBG_js__ = __webpack_require__(224);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateBrBG\", function() { return __WEBPACK_IMPORTED_MODULE_10__diverging_BrBG_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeBrBG\", function() { return __WEBPACK_IMPORTED_MODULE_10__diverging_BrBG_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__diverging_PRGn_js__ = __webpack_require__(240);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePRGn\", function() { return __WEBPACK_IMPORTED_MODULE_11__diverging_PRGn_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePRGn\", function() { return __WEBPACK_IMPORTED_MODULE_11__diverging_PRGn_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__diverging_PiYG_js__ = __webpack_require__(241);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePiYG\", function() { return __WEBPACK_IMPORTED_MODULE_12__diverging_PiYG_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePiYG\", function() { return __WEBPACK_IMPORTED_MODULE_12__diverging_PiYG_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__diverging_PuOr_js__ = __webpack_require__(242);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePuOr\", function() { return __WEBPACK_IMPORTED_MODULE_13__diverging_PuOr_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePuOr\", function() { return __WEBPACK_IMPORTED_MODULE_13__diverging_PuOr_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__diverging_RdBu_js__ = __webpack_require__(243);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateRdBu\", function() { return __WEBPACK_IMPORTED_MODULE_14__diverging_RdBu_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeRdBu\", function() { return __WEBPACK_IMPORTED_MODULE_14__diverging_RdBu_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__diverging_RdGy_js__ = __webpack_require__(244);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateRdGy\", function() { return __WEBPACK_IMPORTED_MODULE_15__diverging_RdGy_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeRdGy\", function() { return __WEBPACK_IMPORTED_MODULE_15__diverging_RdGy_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__diverging_RdYlBu_js__ = __webpack_require__(245);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateRdYlBu\", function() { return __WEBPACK_IMPORTED_MODULE_16__diverging_RdYlBu_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeRdYlBu\", function() { return __WEBPACK_IMPORTED_MODULE_16__diverging_RdYlBu_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__diverging_RdYlGn_js__ = __webpack_require__(246);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateRdYlGn\", function() { return __WEBPACK_IMPORTED_MODULE_17__diverging_RdYlGn_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeRdYlGn\", function() { return __WEBPACK_IMPORTED_MODULE_17__diverging_RdYlGn_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__diverging_Spectral_js__ = __webpack_require__(247);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateSpectral\", function() { return __WEBPACK_IMPORTED_MODULE_18__diverging_Spectral_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeSpectral\", function() { return __WEBPACK_IMPORTED_MODULE_18__diverging_Spectral_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__sequential_multi_BuGn_js__ = __webpack_require__(248);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateBuGn\", function() { return __WEBPACK_IMPORTED_MODULE_19__sequential_multi_BuGn_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeBuGn\", function() { return __WEBPACK_IMPORTED_MODULE_19__sequential_multi_BuGn_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__sequential_multi_BuPu_js__ = __webpack_require__(249);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateBuPu\", function() { return __WEBPACK_IMPORTED_MODULE_20__sequential_multi_BuPu_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeBuPu\", function() { return __WEBPACK_IMPORTED_MODULE_20__sequential_multi_BuPu_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__sequential_multi_GnBu_js__ = __webpack_require__(250);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateGnBu\", function() { return __WEBPACK_IMPORTED_MODULE_21__sequential_multi_GnBu_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeGnBu\", function() { return __WEBPACK_IMPORTED_MODULE_21__sequential_multi_GnBu_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__sequential_multi_OrRd_js__ = __webpack_require__(251);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateOrRd\", function() { return __WEBPACK_IMPORTED_MODULE_22__sequential_multi_OrRd_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeOrRd\", function() { return __WEBPACK_IMPORTED_MODULE_22__sequential_multi_OrRd_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__sequential_multi_PuBuGn_js__ = __webpack_require__(252);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePuBuGn\", function() { return __WEBPACK_IMPORTED_MODULE_23__sequential_multi_PuBuGn_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePuBuGn\", function() { return __WEBPACK_IMPORTED_MODULE_23__sequential_multi_PuBuGn_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__sequential_multi_PuBu_js__ = __webpack_require__(253);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePuBu\", function() { return __WEBPACK_IMPORTED_MODULE_24__sequential_multi_PuBu_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePuBu\", function() { return __WEBPACK_IMPORTED_MODULE_24__sequential_multi_PuBu_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__sequential_multi_PuRd_js__ = __webpack_require__(254);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePuRd\", function() { return __WEBPACK_IMPORTED_MODULE_25__sequential_multi_PuRd_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePuRd\", function() { return __WEBPACK_IMPORTED_MODULE_25__sequential_multi_PuRd_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__sequential_multi_RdPu_js__ = __webpack_require__(255);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateRdPu\", function() { return __WEBPACK_IMPORTED_MODULE_26__sequential_multi_RdPu_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeRdPu\", function() { return __WEBPACK_IMPORTED_MODULE_26__sequential_multi_RdPu_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__sequential_multi_YlGnBu_js__ = __webpack_require__(256);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateYlGnBu\", function() { return __WEBPACK_IMPORTED_MODULE_27__sequential_multi_YlGnBu_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeYlGnBu\", function() { return __WEBPACK_IMPORTED_MODULE_27__sequential_multi_YlGnBu_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__sequential_multi_YlGn_js__ = __webpack_require__(257);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateYlGn\", function() { return __WEBPACK_IMPORTED_MODULE_28__sequential_multi_YlGn_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeYlGn\", function() { return __WEBPACK_IMPORTED_MODULE_28__sequential_multi_YlGn_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__sequential_multi_YlOrBr_js__ = __webpack_require__(258);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateYlOrBr\", function() { return __WEBPACK_IMPORTED_MODULE_29__sequential_multi_YlOrBr_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeYlOrBr\", function() { return __WEBPACK_IMPORTED_MODULE_29__sequential_multi_YlOrBr_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__sequential_multi_YlOrRd_js__ = __webpack_require__(259);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateYlOrRd\", function() { return __WEBPACK_IMPORTED_MODULE_30__sequential_multi_YlOrRd_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeYlOrRd\", function() { return __WEBPACK_IMPORTED_MODULE_30__sequential_multi_YlOrRd_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__sequential_single_Blues_js__ = __webpack_require__(260);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateBlues\", function() { return __WEBPACK_IMPORTED_MODULE_31__sequential_single_Blues_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeBlues\", function() { return __WEBPACK_IMPORTED_MODULE_31__sequential_single_Blues_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__sequential_single_Greens_js__ = __webpack_require__(261);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateGreens\", function() { return __WEBPACK_IMPORTED_MODULE_32__sequential_single_Greens_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeGreens\", function() { return __WEBPACK_IMPORTED_MODULE_32__sequential_single_Greens_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33__sequential_single_Greys_js__ = __webpack_require__(262);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateGreys\", function() { return __WEBPACK_IMPORTED_MODULE_33__sequential_single_Greys_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeGreys\", function() { return __WEBPACK_IMPORTED_MODULE_33__sequential_single_Greys_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34__sequential_single_Purples_js__ = __webpack_require__(263);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePurples\", function() { return __WEBPACK_IMPORTED_MODULE_34__sequential_single_Purples_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePurples\", function() { return __WEBPACK_IMPORTED_MODULE_34__sequential_single_Purples_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35__sequential_single_Reds_js__ = __webpack_require__(264);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateReds\", function() { return __WEBPACK_IMPORTED_MODULE_35__sequential_single_Reds_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeReds\", function() { return __WEBPACK_IMPORTED_MODULE_35__sequential_single_Reds_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_36__sequential_single_Oranges_js__ = __webpack_require__(265);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateOranges\", function() { return __WEBPACK_IMPORTED_MODULE_36__sequential_single_Oranges_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeOranges\", function() { return __WEBPACK_IMPORTED_MODULE_36__sequential_single_Oranges_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_37__sequential_multi_cividis_js__ = __webpack_require__(266);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateCividis\", function() { return __WEBPACK_IMPORTED_MODULE_37__sequential_multi_cividis_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_38__sequential_multi_cubehelix_js__ = __webpack_require__(267);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateCubehelixDefault\", function() { return __WEBPACK_IMPORTED_MODULE_38__sequential_multi_cubehelix_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_39__sequential_multi_rainbow_js__ = __webpack_require__(268);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateRainbow\", function() { return __WEBPACK_IMPORTED_MODULE_39__sequential_multi_rainbow_js__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateWarm\", function() { return __WEBPACK_IMPORTED_MODULE_39__sequential_multi_rainbow_js__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateCool\", function() { return __WEBPACK_IMPORTED_MODULE_39__sequential_multi_rainbow_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_40__sequential_multi_sinebow_js__ = __webpack_require__(269);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateSinebow\", function() { return __WEBPACK_IMPORTED_MODULE_40__sequential_multi_sinebow_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_41__sequential_multi_turbo_js__ = __webpack_require__(270);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateTurbo\", function() { return __WEBPACK_IMPORTED_MODULE_41__sequential_multi_turbo_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_42__sequential_multi_viridis_js__ = __webpack_require__(271);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateViridis\", function() { return __WEBPACK_IMPORTED_MODULE_42__sequential_multi_viridis_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateMagma\", function() { return __WEBPACK_IMPORTED_MODULE_42__sequential_multi_viridis_js__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateInferno\", function() { return __WEBPACK_IMPORTED_MODULE_42__sequential_multi_viridis_js__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePlasma\", function() { return __WEBPACK_IMPORTED_MODULE_42__sequential_multi_viridis_js__[\"d\"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvaW5kZXguanM/YmJhNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQge2RlZmF1bHQgYXMgc2NoZW1lQ2F0ZWdvcnkxMH0gZnJvbSBcIi4vY2F0ZWdvcmljYWwvY2F0ZWdvcnkxMC5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIHNjaGVtZUFjY2VudH0gZnJvbSBcIi4vY2F0ZWdvcmljYWwvQWNjZW50LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgc2NoZW1lRGFyazJ9IGZyb20gXCIuL2NhdGVnb3JpY2FsL0RhcmsyLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgc2NoZW1lUGFpcmVkfSBmcm9tIFwiLi9jYXRlZ29yaWNhbC9QYWlyZWQuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBzY2hlbWVQYXN0ZWwxfSBmcm9tIFwiLi9jYXRlZ29yaWNhbC9QYXN0ZWwxLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgc2NoZW1lUGFzdGVsMn0gZnJvbSBcIi4vY2F0ZWdvcmljYWwvUGFzdGVsMi5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIHNjaGVtZVNldDF9IGZyb20gXCIuL2NhdGVnb3JpY2FsL1NldDEuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBzY2hlbWVTZXQyfSBmcm9tIFwiLi9jYXRlZ29yaWNhbC9TZXQyLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgc2NoZW1lU2V0M30gZnJvbSBcIi4vY2F0ZWdvcmljYWwvU2V0My5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIHNjaGVtZVRhYmxlYXUxMH0gZnJvbSBcIi4vY2F0ZWdvcmljYWwvVGFibGVhdTEwLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVCckJHLCBzY2hlbWUgYXMgc2NoZW1lQnJCR30gZnJvbSBcIi4vZGl2ZXJnaW5nL0JyQkcuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZVBSR24sIHNjaGVtZSBhcyBzY2hlbWVQUkdufSBmcm9tIFwiLi9kaXZlcmdpbmcvUFJHbi5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlUGlZRywgc2NoZW1lIGFzIHNjaGVtZVBpWUd9IGZyb20gXCIuL2RpdmVyZ2luZy9QaVlHLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVQdU9yLCBzY2hlbWUgYXMgc2NoZW1lUHVPcn0gZnJvbSBcIi4vZGl2ZXJnaW5nL1B1T3IuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZVJkQnUsIHNjaGVtZSBhcyBzY2hlbWVSZEJ1fSBmcm9tIFwiLi9kaXZlcmdpbmcvUmRCdS5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlUmRHeSwgc2NoZW1lIGFzIHNjaGVtZVJkR3l9IGZyb20gXCIuL2RpdmVyZ2luZy9SZEd5LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVSZFlsQnUsIHNjaGVtZSBhcyBzY2hlbWVSZFlsQnV9IGZyb20gXCIuL2RpdmVyZ2luZy9SZFlsQnUuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZVJkWWxHbiwgc2NoZW1lIGFzIHNjaGVtZVJkWWxHbn0gZnJvbSBcIi4vZGl2ZXJnaW5nL1JkWWxHbi5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlU3BlY3RyYWwsIHNjaGVtZSBhcyBzY2hlbWVTcGVjdHJhbH0gZnJvbSBcIi4vZGl2ZXJnaW5nL1NwZWN0cmFsLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVCdUduLCBzY2hlbWUgYXMgc2NoZW1lQnVHbn0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9CdUduLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVCdVB1LCBzY2hlbWUgYXMgc2NoZW1lQnVQdX0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9CdVB1LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVHbkJ1LCBzY2hlbWUgYXMgc2NoZW1lR25CdX0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9HbkJ1LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVPclJkLCBzY2hlbWUgYXMgc2NoZW1lT3JSZH0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9PclJkLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVQdUJ1R24sIHNjaGVtZSBhcyBzY2hlbWVQdUJ1R259IGZyb20gXCIuL3NlcXVlbnRpYWwtbXVsdGkvUHVCdUduLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVQdUJ1LCBzY2hlbWUgYXMgc2NoZW1lUHVCdX0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9QdUJ1LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVQdVJkLCBzY2hlbWUgYXMgc2NoZW1lUHVSZH0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9QdVJkLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVSZFB1LCBzY2hlbWUgYXMgc2NoZW1lUmRQdX0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9SZFB1LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVZbEduQnUsIHNjaGVtZSBhcyBzY2hlbWVZbEduQnV9IGZyb20gXCIuL3NlcXVlbnRpYWwtbXVsdGkvWWxHbkJ1LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVZbEduLCBzY2hlbWUgYXMgc2NoZW1lWWxHbn0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9ZbEduLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVZbE9yQnIsIHNjaGVtZSBhcyBzY2hlbWVZbE9yQnJ9IGZyb20gXCIuL3NlcXVlbnRpYWwtbXVsdGkvWWxPckJyLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVZbE9yUmQsIHNjaGVtZSBhcyBzY2hlbWVZbE9yUmR9IGZyb20gXCIuL3NlcXVlbnRpYWwtbXVsdGkvWWxPclJkLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVCbHVlcywgc2NoZW1lIGFzIHNjaGVtZUJsdWVzfSBmcm9tIFwiLi9zZXF1ZW50aWFsLXNpbmdsZS9CbHVlcy5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlR3JlZW5zLCBzY2hlbWUgYXMgc2NoZW1lR3JlZW5zfSBmcm9tIFwiLi9zZXF1ZW50aWFsLXNpbmdsZS9HcmVlbnMuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZUdyZXlzLCBzY2hlbWUgYXMgc2NoZW1lR3JleXN9IGZyb20gXCIuL3NlcXVlbnRpYWwtc2luZ2xlL0dyZXlzLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVQdXJwbGVzLCBzY2hlbWUgYXMgc2NoZW1lUHVycGxlc30gZnJvbSBcIi4vc2VxdWVudGlhbC1zaW5nbGUvUHVycGxlcy5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlUmVkcywgc2NoZW1lIGFzIHNjaGVtZVJlZHN9IGZyb20gXCIuL3NlcXVlbnRpYWwtc2luZ2xlL1JlZHMuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZU9yYW5nZXMsIHNjaGVtZSBhcyBzY2hlbWVPcmFuZ2VzfSBmcm9tIFwiLi9zZXF1ZW50aWFsLXNpbmdsZS9PcmFuZ2VzLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVDaXZpZGlzfSBmcm9tIFwiLi9zZXF1ZW50aWFsLW11bHRpL2NpdmlkaXMuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZUN1YmVoZWxpeERlZmF1bHR9IGZyb20gXCIuL3NlcXVlbnRpYWwtbXVsdGkvY3ViZWhlbGl4LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVSYWluYm93LCB3YXJtIGFzIGludGVycG9sYXRlV2FybSwgY29vbCBhcyBpbnRlcnBvbGF0ZUNvb2x9IGZyb20gXCIuL3NlcXVlbnRpYWwtbXVsdGkvcmFpbmJvdy5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlU2luZWJvd30gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9zaW5lYm93LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVUdXJib30gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS90dXJiby5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlVmlyaWRpcywgbWFnbWEgYXMgaW50ZXJwb2xhdGVNYWdtYSwgaW5mZXJubyBhcyBpbnRlcnBvbGF0ZUluZmVybm8sIHBsYXNtYSBhcyBpbnRlcnBvbGF0ZVBsYXNtYX0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS92aXJpZGlzLmpzXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///213\n");

/***/ }),
/* 214 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjE0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvY2F0ZWdvcnkxMC5qcz9iODJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjb2xvcnMoXCIxZjc3YjRmZjdmMGUyY2EwMmNkNjI3Mjg5NDY3YmQ4YzU2NGJlMzc3YzI3ZjdmN2ZiY2JkMjIxN2JlY2ZcIik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NhdGVnb3JpY2FsL2NhdGVnb3J5MTAuanNcbi8vIG1vZHVsZSBpZCA9IDIxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///214\n");

/***/ }),
/* 215 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjE1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvQWNjZW50LmpzPzBkMmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbG9ycyhcIjdmYzk3ZmJlYWVkNGZkYzA4NmZmZmY5OTM4NmNiMGYwMDI3ZmJmNWIxNzY2NjY2NlwiKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvQWNjZW50LmpzXG4vLyBtb2R1bGUgaWQgPSAyMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///215\n");

/***/ }),
/* 216 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjE2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvRGFyazIuanM/MTNlNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY29sb3JzKFwiMWI5ZTc3ZDk1ZjAyNzU3MGIzZTcyOThhNjZhNjFlZTZhYjAyYTY3NjFkNjY2NjY2XCIpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9jYXRlZ29yaWNhbC9EYXJrMi5qc1xuLy8gbW9kdWxlIGlkID0gMjE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///216\n");

/***/ }),
/* 217 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjE3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvUGFpcmVkLmpzPzA4YzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbG9ycyhcImE2Y2VlMzFmNzhiNGIyZGY4YTMzYTAyY2ZiOWE5OWUzMWExY2ZkYmY2ZmZmN2YwMGNhYjJkNjZhM2Q5YWZmZmY5OWIxNTkyOFwiKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvUGFpcmVkLmpzXG4vLyBtb2R1bGUgaWQgPSAyMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///217\n");

/***/ }),
/* 218 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjE4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvUGFzdGVsMS5qcz84OTMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjb2xvcnMoXCJmYmI0YWViM2NkZTNjY2ViYzVkZWNiZTRmZWQ5YTZmZmZmY2NlNWQ4YmRmZGRhZWNmMmYyZjJcIik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NhdGVnb3JpY2FsL1Bhc3RlbDEuanNcbi8vIG1vZHVsZSBpZCA9IDIxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///218\n");

/***/ }),
/* 219 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjE5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvUGFzdGVsMi5qcz82MTAyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjb2xvcnMoXCJiM2UyY2RmZGNkYWNjYmQ1ZThmNGNhZTRlNmY1YzlmZmYyYWVmMWUyY2NjY2NjY2NcIik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NhdGVnb3JpY2FsL1Bhc3RlbDIuanNcbi8vIG1vZHVsZSBpZCA9IDIxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///219\n");

/***/ }),
/* 220 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvU2V0MS5qcz9kMjc2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjb2xvcnMoXCJlNDFhMWMzNzdlYjg0ZGFmNGE5ODRlYTNmZjdmMDBmZmZmMzNhNjU2MjhmNzgxYmY5OTk5OTlcIik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NhdGVnb3JpY2FsL1NldDEuanNcbi8vIG1vZHVsZSBpZCA9IDIyMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///220\n");

/***/ }),
/* 221 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvU2V0Mi5qcz9mNTMyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjb2xvcnMoXCI2NmMyYTVmYzhkNjI4ZGEwY2JlNzhhYzNhNmQ4NTRmZmQ5MmZlNWM0OTRiM2IzYjNcIik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NhdGVnb3JpY2FsL1NldDIuanNcbi8vIG1vZHVsZSBpZCA9IDIyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///221\n");

/***/ }),
/* 222 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvU2V0My5qcz80OTNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjb2xvcnMoXCI4ZGQzYzdmZmZmYjNiZWJhZGFmYjgwNzI4MGIxZDNmZGI0NjJiM2RlNjlmY2NkZTVkOWQ5ZDliYzgwYmRjY2ViYzVmZmVkNmZcIik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NhdGVnb3JpY2FsL1NldDMuanNcbi8vIG1vZHVsZSBpZCA9IDIyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///222\n");

/***/ }),
/* 223 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvVGFibGVhdTEwLmpzPzY3ZDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbG9ycyhcIjRlNzlhN2YyOGUyY2UxNTc1OTc2YjdiMjU5YTE0ZmVkYzk0OWFmN2FhMWZmOWRhNzljNzU1ZmJhYjBhYlwiKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvVGFibGVhdTEwLmpzXG4vLyBtb2R1bGUgaWQgPSAyMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///223\n");

/***/ }),
/* 224 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL0JyQkcuanM/YmU1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJkOGIzNjVmNWY1ZjU1YWI0YWNcIixcbiAgXCJhNjYxMWFkZmMyN2Q4MGNkYzEwMTg1NzFcIixcbiAgXCJhNjYxMWFkZmMyN2RmNWY1ZjU4MGNkYzEwMTg1NzFcIixcbiAgXCI4YzUxMGFkOGIzNjVmNmU4YzNjN2VhZTU1YWI0YWMwMTY2NWVcIixcbiAgXCI4YzUxMGFkOGIzNjVmNmU4YzNmNWY1ZjVjN2VhZTU1YWI0YWMwMTY2NWVcIixcbiAgXCI4YzUxMGFiZjgxMmRkZmMyN2RmNmU4YzNjN2VhZTU4MGNkYzEzNTk3OGYwMTY2NWVcIixcbiAgXCI4YzUxMGFiZjgxMmRkZmMyN2RmNmU4YzNmNWY1ZjVjN2VhZTU4MGNkYzEzNTk3OGYwMTY2NWVcIixcbiAgXCI1NDMwMDU4YzUxMGFiZjgxMmRkZmMyN2RmNmU4YzNjN2VhZTU4MGNkYzEzNTk3OGYwMTY2NWUwMDNjMzBcIixcbiAgXCI1NDMwMDU4YzUxMGFiZjgxMmRkZmMyN2RmNmU4YzNmNWY1ZjVjN2VhZTU4MGNkYzEzNTk3OGYwMTY2NWUwMDNjMzBcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9kaXZlcmdpbmcvQnJCRy5qc1xuLy8gbW9kdWxlIGlkID0gMjI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///224\n");

/***/ }),
/* 225 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export gray */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = lab;\n/* unused harmony export Lab */\n/* unused harmony export lch */\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = hcl;\n/* unused harmony export Hcl */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__define__ = __webpack_require__(68);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(67);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math__ = __webpack_require__(116);\n\n\n\n\n// https://observablehq.com/@mbostock/lab-and-rgb\nvar K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof __WEBPACK_IMPORTED_MODULE_1__color__[\"b\" /* Rgb */])) o = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"h\" /* rgbConvert */])(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nfunction gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nfunction lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nfunction Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\nObject(__WEBPACK_IMPORTED_MODULE_0__define__[\"a\" /* default */])(Lab, lab, Object(__WEBPACK_IMPORTED_MODULE_0__define__[\"b\" /* extend */])(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* Color */], {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new __WEBPACK_IMPORTED_MODULE_1__color__[\"b\" /* Rgb */](\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * __WEBPACK_IMPORTED_MODULE_2__math__[\"b\" /* rad2deg */];\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nfunction lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nfunction hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * __WEBPACK_IMPORTED_MODULE_2__math__[\"a\" /* deg2rad */];\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\nObject(__WEBPACK_IMPORTED_MODULE_0__define__[\"a\" /* default */])(Hcl, hcl, Object(__WEBPACK_IMPORTED_MODULE_0__define__[\"b\" /* extend */])(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* Color */], {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return hcl2lab(this).rgb();\n  }\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWNvbG9yL3NyYy9sYWIuanM/YWM5MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmaW5lLCB7ZXh0ZW5kfSBmcm9tIFwiLi9kZWZpbmVcIjtcbmltcG9ydCB7Q29sb3IsIHJnYkNvbnZlcnQsIFJnYn0gZnJvbSBcIi4vY29sb3JcIjtcbmltcG9ydCB7ZGVnMnJhZCwgcmFkMmRlZ30gZnJvbSBcIi4vbWF0aFwiO1xuXG4vLyBodHRwczovL29ic2VydmFibGVocS5jb20vQG1ib3N0b2NrL2xhYi1hbmQtcmdiXG52YXIgSyA9IDE4LFxuICAgIFhuID0gMC45NjQyMixcbiAgICBZbiA9IDEsXG4gICAgWm4gPSAwLjgyNTIxLFxuICAgIHQwID0gNCAvIDI5LFxuICAgIHQxID0gNiAvIDI5LFxuICAgIHQyID0gMyAqIHQxICogdDEsXG4gICAgdDMgPSB0MSAqIHQxICogdDE7XG5cbmZ1bmN0aW9uIGxhYkNvbnZlcnQobykge1xuICBpZiAobyBpbnN0YW5jZW9mIExhYikgcmV0dXJuIG5ldyBMYWIoby5sLCBvLmEsIG8uYiwgby5vcGFjaXR5KTtcbiAgaWYgKG8gaW5zdGFuY2VvZiBIY2wpIHJldHVybiBoY2wybGFiKG8pO1xuICBpZiAoIShvIGluc3RhbmNlb2YgUmdiKSkgbyA9IHJnYkNvbnZlcnQobyk7XG4gIHZhciByID0gcmdiMmxyZ2Ioby5yKSxcbiAgICAgIGcgPSByZ2IybHJnYihvLmcpLFxuICAgICAgYiA9IHJnYjJscmdiKG8uYiksXG4gICAgICB5ID0geHl6MmxhYigoMC4yMjI1MDQ1ICogciArIDAuNzE2ODc4NiAqIGcgKyAwLjA2MDYxNjkgKiBiKSAvIFluKSwgeCwgejtcbiAgaWYgKHIgPT09IGcgJiYgZyA9PT0gYikgeCA9IHogPSB5OyBlbHNlIHtcbiAgICB4ID0geHl6MmxhYigoMC40MzYwNzQ3ICogciArIDAuMzg1MDY0OSAqIGcgKyAwLjE0MzA4MDQgKiBiKSAvIFhuKTtcbiAgICB6ID0geHl6MmxhYigoMC4wMTM5MzIyICogciArIDAuMDk3MTA0NSAqIGcgKyAwLjcxNDE3MzMgKiBiKSAvIFpuKTtcbiAgfVxuICByZXR1cm4gbmV3IExhYigxMTYgKiB5IC0gMTYsIDUwMCAqICh4IC0geSksIDIwMCAqICh5IC0geiksIG8ub3BhY2l0eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBncmF5KGwsIG9wYWNpdHkpIHtcbiAgcmV0dXJuIG5ldyBMYWIobCwgMCwgMCwgb3BhY2l0eSA9PSBudWxsID8gMSA6IG9wYWNpdHkpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsYWIobCwgYSwgYiwgb3BhY2l0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGxhYkNvbnZlcnQobCkgOiBuZXcgTGFiKGwsIGEsIGIsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIExhYihsLCBhLCBiLCBvcGFjaXR5KSB7XG4gIHRoaXMubCA9ICtsO1xuICB0aGlzLmEgPSArYTtcbiAgdGhpcy5iID0gK2I7XG4gIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5O1xufVxuXG5kZWZpbmUoTGFiLCBsYWIsIGV4dGVuZChDb2xvciwge1xuICBicmlnaHRlcjogZnVuY3Rpb24oaykge1xuICAgIHJldHVybiBuZXcgTGFiKHRoaXMubCArIEsgKiAoayA9PSBudWxsID8gMSA6IGspLCB0aGlzLmEsIHRoaXMuYiwgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgZGFya2VyOiBmdW5jdGlvbihrKSB7XG4gICAgcmV0dXJuIG5ldyBMYWIodGhpcy5sIC0gSyAqIChrID09IG51bGwgPyAxIDogayksIHRoaXMuYSwgdGhpcy5iLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICByZ2I6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB5ID0gKHRoaXMubCArIDE2KSAvIDExNixcbiAgICAgICAgeCA9IGlzTmFOKHRoaXMuYSkgPyB5IDogeSArIHRoaXMuYSAvIDUwMCxcbiAgICAgICAgeiA9IGlzTmFOKHRoaXMuYikgPyB5IDogeSAtIHRoaXMuYiAvIDIwMDtcbiAgICB4ID0gWG4gKiBsYWIyeHl6KHgpO1xuICAgIHkgPSBZbiAqIGxhYjJ4eXooeSk7XG4gICAgeiA9IFpuICogbGFiMnh5eih6KTtcbiAgICByZXR1cm4gbmV3IFJnYihcbiAgICAgIGxyZ2IycmdiKCAzLjEzMzg1NjEgKiB4IC0gMS42MTY4NjY3ICogeSAtIDAuNDkwNjE0NiAqIHopLFxuICAgICAgbHJnYjJyZ2IoLTAuOTc4NzY4NCAqIHggKyAxLjkxNjE0MTUgKiB5ICsgMC4wMzM0NTQwICogeiksXG4gICAgICBscmdiMnJnYiggMC4wNzE5NDUzICogeCAtIDAuMjI4OTkxNCAqIHkgKyAxLjQwNTI0MjcgKiB6KSxcbiAgICAgIHRoaXMub3BhY2l0eVxuICAgICk7XG4gIH1cbn0pKTtcblxuZnVuY3Rpb24geHl6MmxhYih0KSB7XG4gIHJldHVybiB0ID4gdDMgPyBNYXRoLnBvdyh0LCAxIC8gMykgOiB0IC8gdDIgKyB0MDtcbn1cblxuZnVuY3Rpb24gbGFiMnh5eih0KSB7XG4gIHJldHVybiB0ID4gdDEgPyB0ICogdCAqIHQgOiB0MiAqICh0IC0gdDApO1xufVxuXG5mdW5jdGlvbiBscmdiMnJnYih4KSB7XG4gIHJldHVybiAyNTUgKiAoeCA8PSAwLjAwMzEzMDggPyAxMi45MiAqIHggOiAxLjA1NSAqIE1hdGgucG93KHgsIDEgLyAyLjQpIC0gMC4wNTUpO1xufVxuXG5mdW5jdGlvbiByZ2IybHJnYih4KSB7XG4gIHJldHVybiAoeCAvPSAyNTUpIDw9IDAuMDQwNDUgPyB4IC8gMTIuOTIgOiBNYXRoLnBvdygoeCArIDAuMDU1KSAvIDEuMDU1LCAyLjQpO1xufVxuXG5mdW5jdGlvbiBoY2xDb252ZXJ0KG8pIHtcbiAgaWYgKG8gaW5zdGFuY2VvZiBIY2wpIHJldHVybiBuZXcgSGNsKG8uaCwgby5jLCBvLmwsIG8ub3BhY2l0eSk7XG4gIGlmICghKG8gaW5zdGFuY2VvZiBMYWIpKSBvID0gbGFiQ29udmVydChvKTtcbiAgaWYgKG8uYSA9PT0gMCAmJiBvLmIgPT09IDApIHJldHVybiBuZXcgSGNsKE5hTiwgMCA8IG8ubCAmJiBvLmwgPCAxMDAgPyAwIDogTmFOLCBvLmwsIG8ub3BhY2l0eSk7XG4gIHZhciBoID0gTWF0aC5hdGFuMihvLmIsIG8uYSkgKiByYWQyZGVnO1xuICByZXR1cm4gbmV3IEhjbChoIDwgMCA/IGggKyAzNjAgOiBoLCBNYXRoLnNxcnQoby5hICogby5hICsgby5iICogby5iKSwgby5sLCBvLm9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbGNoKGwsIGMsIGgsIG9wYWNpdHkpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBoY2xDb252ZXJ0KGwpIDogbmV3IEhjbChoLCBjLCBsLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoY2woaCwgYywgbCwgb3BhY2l0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGhjbENvbnZlcnQoaCkgOiBuZXcgSGNsKGgsIGMsIGwsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEhjbChoLCBjLCBsLCBvcGFjaXR5KSB7XG4gIHRoaXMuaCA9ICtoO1xuICB0aGlzLmMgPSArYztcbiAgdGhpcy5sID0gK2w7XG4gIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5O1xufVxuXG5mdW5jdGlvbiBoY2wybGFiKG8pIHtcbiAgaWYgKGlzTmFOKG8uaCkpIHJldHVybiBuZXcgTGFiKG8ubCwgMCwgMCwgby5vcGFjaXR5KTtcbiAgdmFyIGggPSBvLmggKiBkZWcycmFkO1xuICByZXR1cm4gbmV3IExhYihvLmwsIE1hdGguY29zKGgpICogby5jLCBNYXRoLnNpbihoKSAqIG8uYywgby5vcGFjaXR5KTtcbn1cblxuZGVmaW5lKEhjbCwgaGNsLCBleHRlbmQoQ29sb3IsIHtcbiAgYnJpZ2h0ZXI6IGZ1bmN0aW9uKGspIHtcbiAgICByZXR1cm4gbmV3IEhjbCh0aGlzLmgsIHRoaXMuYywgdGhpcy5sICsgSyAqIChrID09IG51bGwgPyAxIDogayksIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIGRhcmtlcjogZnVuY3Rpb24oaykge1xuICAgIHJldHVybiBuZXcgSGNsKHRoaXMuaCwgdGhpcy5jLCB0aGlzLmwgLSBLICogKGsgPT0gbnVsbCA/IDEgOiBrKSwgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgcmdiOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaGNsMmxhYih0aGlzKS5yZ2IoKTtcbiAgfVxufSkpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2xhYi5qc1xuLy8gbW9kdWxlIGlkID0gMjI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///225\n");

/***/ }),
/* 226 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"a\"] = cubehelix;\n/* unused harmony export Cubehelix */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__define__ = __webpack_require__(68);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(67);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math__ = __webpack_require__(116);\n\n\n\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof __WEBPACK_IMPORTED_MODULE_1__color__[\"b\" /* Rgb */])) o = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"h\" /* rgbConvert */])(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * __WEBPACK_IMPORTED_MODULE_2__math__[\"b\" /* rad2deg */] - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nfunction cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nObject(__WEBPACK_IMPORTED_MODULE_0__define__[\"a\" /* default */])(Cubehelix, cubehelix, Object(__WEBPACK_IMPORTED_MODULE_0__define__[\"b\" /* extend */])(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* Color */], {\n  brighter: function(k) {\n    k = k == null ? __WEBPACK_IMPORTED_MODULE_1__color__[\"c\" /* brighter */] : Math.pow(__WEBPACK_IMPORTED_MODULE_1__color__[\"c\" /* brighter */], k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? __WEBPACK_IMPORTED_MODULE_1__color__[\"d\" /* darker */] : Math.pow(__WEBPACK_IMPORTED_MODULE_1__color__[\"d\" /* darker */], k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * __WEBPACK_IMPORTED_MODULE_2__math__[\"a\" /* deg2rad */],\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new __WEBPACK_IMPORTED_MODULE_1__color__[\"b\" /* Rgb */](\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWNvbG9yL3NyYy9jdWJlaGVsaXguanM/MGVhMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmaW5lLCB7ZXh0ZW5kfSBmcm9tIFwiLi9kZWZpbmVcIjtcbmltcG9ydCB7Q29sb3IsIHJnYkNvbnZlcnQsIFJnYiwgZGFya2VyLCBicmlnaHRlcn0gZnJvbSBcIi4vY29sb3JcIjtcbmltcG9ydCB7ZGVnMnJhZCwgcmFkMmRlZ30gZnJvbSBcIi4vbWF0aFwiO1xuXG52YXIgQSA9IC0wLjE0ODYxLFxuICAgIEIgPSArMS43ODI3NyxcbiAgICBDID0gLTAuMjkyMjcsXG4gICAgRCA9IC0wLjkwNjQ5LFxuICAgIEUgPSArMS45NzI5NCxcbiAgICBFRCA9IEUgKiBELFxuICAgIEVCID0gRSAqIEIsXG4gICAgQkNfREEgPSBCICogQyAtIEQgKiBBO1xuXG5mdW5jdGlvbiBjdWJlaGVsaXhDb252ZXJ0KG8pIHtcbiAgaWYgKG8gaW5zdGFuY2VvZiBDdWJlaGVsaXgpIHJldHVybiBuZXcgQ3ViZWhlbGl4KG8uaCwgby5zLCBvLmwsIG8ub3BhY2l0eSk7XG4gIGlmICghKG8gaW5zdGFuY2VvZiBSZ2IpKSBvID0gcmdiQ29udmVydChvKTtcbiAgdmFyIHIgPSBvLnIgLyAyNTUsXG4gICAgICBnID0gby5nIC8gMjU1LFxuICAgICAgYiA9IG8uYiAvIDI1NSxcbiAgICAgIGwgPSAoQkNfREEgKiBiICsgRUQgKiByIC0gRUIgKiBnKSAvIChCQ19EQSArIEVEIC0gRUIpLFxuICAgICAgYmwgPSBiIC0gbCxcbiAgICAgIGsgPSAoRSAqIChnIC0gbCkgLSBDICogYmwpIC8gRCxcbiAgICAgIHMgPSBNYXRoLnNxcnQoayAqIGsgKyBibCAqIGJsKSAvIChFICogbCAqICgxIC0gbCkpLCAvLyBOYU4gaWYgbD0wIG9yIGw9MVxuICAgICAgaCA9IHMgPyBNYXRoLmF0YW4yKGssIGJsKSAqIHJhZDJkZWcgLSAxMjAgOiBOYU47XG4gIHJldHVybiBuZXcgQ3ViZWhlbGl4KGggPCAwID8gaCArIDM2MCA6IGgsIHMsIGwsIG8ub3BhY2l0eSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGN1YmVoZWxpeChoLCBzLCBsLCBvcGFjaXR5KSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gY3ViZWhlbGl4Q29udmVydChoKSA6IG5ldyBDdWJlaGVsaXgoaCwgcywgbCwgb3BhY2l0eSA9PSBudWxsID8gMSA6IG9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQ3ViZWhlbGl4KGgsIHMsIGwsIG9wYWNpdHkpIHtcbiAgdGhpcy5oID0gK2g7XG4gIHRoaXMucyA9ICtzO1xuICB0aGlzLmwgPSArbDtcbiAgdGhpcy5vcGFjaXR5ID0gK29wYWNpdHk7XG59XG5cbmRlZmluZShDdWJlaGVsaXgsIGN1YmVoZWxpeCwgZXh0ZW5kKENvbG9yLCB7XG4gIGJyaWdodGVyOiBmdW5jdGlvbihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGJyaWdodGVyIDogTWF0aC5wb3coYnJpZ2h0ZXIsIGspO1xuICAgIHJldHVybiBuZXcgQ3ViZWhlbGl4KHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICBkYXJrZXI6IGZ1bmN0aW9uKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gZGFya2VyIDogTWF0aC5wb3coZGFya2VyLCBrKTtcbiAgICByZXR1cm4gbmV3IEN1YmVoZWxpeCh0aGlzLmgsIHRoaXMucywgdGhpcy5sICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgcmdiOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgaCA9IGlzTmFOKHRoaXMuaCkgPyAwIDogKHRoaXMuaCArIDEyMCkgKiBkZWcycmFkLFxuICAgICAgICBsID0gK3RoaXMubCxcbiAgICAgICAgYSA9IGlzTmFOKHRoaXMucykgPyAwIDogdGhpcy5zICogbCAqICgxIC0gbCksXG4gICAgICAgIGNvc2ggPSBNYXRoLmNvcyhoKSxcbiAgICAgICAgc2luaCA9IE1hdGguc2luKGgpO1xuICAgIHJldHVybiBuZXcgUmdiKFxuICAgICAgMjU1ICogKGwgKyBhICogKEEgKiBjb3NoICsgQiAqIHNpbmgpKSxcbiAgICAgIDI1NSAqIChsICsgYSAqIChDICogY29zaCArIEQgKiBzaW5oKSksXG4gICAgICAyNTUgKiAobCArIGEgKiAoRSAqIGNvc2gpKSxcbiAgICAgIHRoaXMub3BhY2l0eVxuICAgICk7XG4gIH1cbn0pKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWNvbG9yL3NyYy9jdWJlaGVsaXguanNcbi8vIG1vZHVsZSBpZCA9IDIyNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///226\n");

/***/ }),
/* 227 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony default export */ var _unused_webpack_default_export = (function(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9kaXNjcmV0ZS5qcz9iZjBjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHJhbmdlKSB7XG4gIHZhciBuID0gcmFuZ2UubGVuZ3RoO1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHJldHVybiByYW5nZVtNYXRoLm1heCgwLCBNYXRoLm1pbihuIC0gMSwgTWF0aC5mbG9vcih0ICogbikpKV07XG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvZGlzY3JldGUuanNcbi8vIG1vZHVsZSBpZCA9IDIyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///227\n");

/***/ }),
/* 228 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__color__ = __webpack_require__(29);\n\n\n/* unused harmony default export */ var _unused_webpack_default_export = (function(a, b) {\n  var i = Object(__WEBPACK_IMPORTED_MODULE_0__color__[\"c\" /* hue */])(+a, +b);\n  return function(t) {\n    var x = i(t);\n    return x - 360 * Math.floor(x / 360);\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9odWUuanM/OTdlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2h1ZX0gZnJvbSBcIi4vY29sb3JcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgaSA9IGh1ZSgrYSwgK2IpO1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHZhciB4ID0gaSh0KTtcbiAgICByZXR1cm4geCAtIDM2MCAqIE1hdGguZmxvb3IoeCAvIDM2MCk7XG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvaHVlLmpzXG4vLyBtb2R1bGUgaWQgPSAyMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///228\n");

/***/ }),
/* 229 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony default export */ var _unused_webpack_default_export = (function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return Math.round(a + b * t);\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9yb3VuZC5qcz8zYjMzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGEgPSArYSwgYiAtPSBhLCBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoYSArIGIgKiB0KTtcbiAgfTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9yb3VuZC5qc1xuLy8gbW9kdWxlIGlkID0gMjI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///229\n");

/***/ }),
/* 230 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export interpolateTransformCss */\n/* unused harmony export interpolateTransformSvg */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__number__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__parse__ = __webpack_require__(231);\n\n\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__[\"a\" /* default */])(xa, xb)}, {i: i - 2, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__[\"a\" /* default */])(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__[\"a\" /* default */])(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__[\"a\" /* default */])(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__[\"a\" /* default */])(xa, xb)}, {i: i - 2, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__[\"a\" /* default */])(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nvar interpolateTransformCss = interpolateTransform(__WEBPACK_IMPORTED_MODULE_1__parse__[\"a\" /* parseCss */], \"px, \", \"px)\", \"deg)\");\nvar interpolateTransformSvg = interpolateTransform(__WEBPACK_IMPORTED_MODULE_1__parse__[\"b\" /* parseSvg */], \", \", \")\", \")\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy90cmFuc2Zvcm0vaW5kZXguanM/Y2EwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbnVtYmVyIGZyb20gXCIuLi9udW1iZXJcIjtcbmltcG9ydCB7cGFyc2VDc3MsIHBhcnNlU3ZnfSBmcm9tIFwiLi9wYXJzZVwiO1xuXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZSwgcHhDb21tYSwgcHhQYXJlbiwgZGVnUGFyZW4pIHtcblxuICBmdW5jdGlvbiBwb3Aocykge1xuICAgIHJldHVybiBzLmxlbmd0aCA/IHMucG9wKCkgKyBcIiBcIiA6IFwiXCI7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2xhdGUoeGEsIHlhLCB4YiwgeWIsIHMsIHEpIHtcbiAgICBpZiAoeGEgIT09IHhiIHx8IHlhICE9PSB5Yikge1xuICAgICAgdmFyIGkgPSBzLnB1c2goXCJ0cmFuc2xhdGUoXCIsIG51bGwsIHB4Q29tbWEsIG51bGwsIHB4UGFyZW4pO1xuICAgICAgcS5wdXNoKHtpOiBpIC0gNCwgeDogbnVtYmVyKHhhLCB4Yil9LCB7aTogaSAtIDIsIHg6IG51bWJlcih5YSwgeWIpfSk7XG4gICAgfSBlbHNlIGlmICh4YiB8fCB5Yikge1xuICAgICAgcy5wdXNoKFwidHJhbnNsYXRlKFwiICsgeGIgKyBweENvbW1hICsgeWIgKyBweFBhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByb3RhdGUoYSwgYiwgcywgcSkge1xuICAgIGlmIChhICE9PSBiKSB7XG4gICAgICBpZiAoYSAtIGIgPiAxODApIGIgKz0gMzYwOyBlbHNlIGlmIChiIC0gYSA+IDE4MCkgYSArPSAzNjA7IC8vIHNob3J0ZXN0IHBhdGhcbiAgICAgIHEucHVzaCh7aTogcy5wdXNoKHBvcChzKSArIFwicm90YXRlKFwiLCBudWxsLCBkZWdQYXJlbikgLSAyLCB4OiBudW1iZXIoYSwgYil9KTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInJvdGF0ZShcIiArIGIgKyBkZWdQYXJlbik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2tld1goYSwgYiwgcywgcSkge1xuICAgIGlmIChhICE9PSBiKSB7XG4gICAgICBxLnB1c2goe2k6IHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiLCBudWxsLCBkZWdQYXJlbikgLSAyLCB4OiBudW1iZXIoYSwgYil9KTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiICsgYiArIGRlZ1BhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzY2FsZSh4YSwgeWEsIHhiLCB5YiwgcywgcSkge1xuICAgIGlmICh4YSAhPT0geGIgfHwgeWEgIT09IHliKSB7XG4gICAgICB2YXIgaSA9IHMucHVzaChwb3AocykgKyBcInNjYWxlKFwiLCBudWxsLCBcIixcIiwgbnVsbCwgXCIpXCIpO1xuICAgICAgcS5wdXNoKHtpOiBpIC0gNCwgeDogbnVtYmVyKHhhLCB4Yil9LCB7aTogaSAtIDIsIHg6IG51bWJlcih5YSwgeWIpfSk7XG4gICAgfSBlbHNlIGlmICh4YiAhPT0gMSB8fCB5YiAhPT0gMSkge1xuICAgICAgcy5wdXNoKHBvcChzKSArIFwic2NhbGUoXCIgKyB4YiArIFwiLFwiICsgeWIgKyBcIilcIik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgcyA9IFtdLCAvLyBzdHJpbmcgY29uc3RhbnRzIGFuZCBwbGFjZWhvbGRlcnNcbiAgICAgICAgcSA9IFtdOyAvLyBudW1iZXIgaW50ZXJwb2xhdG9yc1xuICAgIGEgPSBwYXJzZShhKSwgYiA9IHBhcnNlKGIpO1xuICAgIHRyYW5zbGF0ZShhLnRyYW5zbGF0ZVgsIGEudHJhbnNsYXRlWSwgYi50cmFuc2xhdGVYLCBiLnRyYW5zbGF0ZVksIHMsIHEpO1xuICAgIHJvdGF0ZShhLnJvdGF0ZSwgYi5yb3RhdGUsIHMsIHEpO1xuICAgIHNrZXdYKGEuc2tld1gsIGIuc2tld1gsIHMsIHEpO1xuICAgIHNjYWxlKGEuc2NhbGVYLCBhLnNjYWxlWSwgYi5zY2FsZVgsIGIuc2NhbGVZLCBzLCBxKTtcbiAgICBhID0gYiA9IG51bGw7IC8vIGdjXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHZhciBpID0gLTEsIG4gPSBxLmxlbmd0aCwgbztcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBzWyhvID0gcVtpXSkuaV0gPSBvLngodCk7XG4gICAgICByZXR1cm4gcy5qb2luKFwiXCIpO1xuICAgIH07XG4gIH07XG59XG5cbmV4cG9ydCB2YXIgaW50ZXJwb2xhdGVUcmFuc2Zvcm1Dc3MgPSBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZUNzcywgXCJweCwgXCIsIFwicHgpXCIsIFwiZGVnKVwiKTtcbmV4cG9ydCB2YXIgaW50ZXJwb2xhdGVUcmFuc2Zvcm1TdmcgPSBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZVN2ZywgXCIsIFwiLCBcIilcIiwgXCIpXCIpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3RyYW5zZm9ybS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///230\n");

/***/ }),
/* 231 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"a\"] = parseCss;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = parseSvg;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__decompose__ = __webpack_require__(232);\n\n\nvar cssNode,\n    cssRoot,\n    cssView,\n    svgNode;\n\nfunction parseCss(value) {\n  if (value === \"none\") return __WEBPACK_IMPORTED_MODULE_0__decompose__[\"b\" /* identity */];\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return Object(__WEBPACK_IMPORTED_MODULE_0__decompose__[\"a\" /* default */])(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\n\nfunction parseSvg(value) {\n  if (value == null) return __WEBPACK_IMPORTED_MODULE_0__decompose__[\"b\" /* identity */];\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return __WEBPACK_IMPORTED_MODULE_0__decompose__[\"b\" /* identity */];\n  value = value.matrix;\n  return Object(__WEBPACK_IMPORTED_MODULE_0__decompose__[\"a\" /* default */])(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy90cmFuc2Zvcm0vcGFyc2UuanM/NDkyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVjb21wb3NlLCB7aWRlbnRpdHl9IGZyb20gXCIuL2RlY29tcG9zZVwiO1xuXG52YXIgY3NzTm9kZSxcbiAgICBjc3NSb290LFxuICAgIGNzc1ZpZXcsXG4gICAgc3ZnTm9kZTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ3NzKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gXCJub25lXCIpIHJldHVybiBpZGVudGl0eTtcbiAgaWYgKCFjc3NOb2RlKSBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKSwgY3NzUm9vdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgY3NzVmlldyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICBjc3NOb2RlLnN0eWxlLnRyYW5zZm9ybSA9IHZhbHVlO1xuICB2YWx1ZSA9IGNzc1ZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShjc3NSb290LmFwcGVuZENoaWxkKGNzc05vZGUpLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKFwidHJhbnNmb3JtXCIpO1xuICBjc3NSb290LnJlbW92ZUNoaWxkKGNzc05vZGUpO1xuICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDcsIC0xKS5zcGxpdChcIixcIik7XG4gIHJldHVybiBkZWNvbXBvc2UoK3ZhbHVlWzBdLCArdmFsdWVbMV0sICt2YWx1ZVsyXSwgK3ZhbHVlWzNdLCArdmFsdWVbNF0sICt2YWx1ZVs1XSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVN2Zyh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIGlkZW50aXR5O1xuICBpZiAoIXN2Z05vZGUpIHN2Z05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcImdcIik7XG4gIHN2Z05vZGUuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsIHZhbHVlKTtcbiAgaWYgKCEodmFsdWUgPSBzdmdOb2RlLnRyYW5zZm9ybS5iYXNlVmFsLmNvbnNvbGlkYXRlKCkpKSByZXR1cm4gaWRlbnRpdHk7XG4gIHZhbHVlID0gdmFsdWUubWF0cml4O1xuICByZXR1cm4gZGVjb21wb3NlKHZhbHVlLmEsIHZhbHVlLmIsIHZhbHVlLmMsIHZhbHVlLmQsIHZhbHVlLmUsIHZhbHVlLmYpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3RyYW5zZm9ybS9wYXJzZS5qc1xuLy8gbW9kdWxlIGlkID0gMjMxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///231\n");

/***/ }),
/* 232 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return identity; });\nvar degrees = 180 / Math.PI;\n\nvar identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy90cmFuc2Zvcm0vZGVjb21wb3NlLmpzPzhjZGYiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZ3JlZXMgPSAxODAgLyBNYXRoLlBJO1xuXG5leHBvcnQgdmFyIGlkZW50aXR5ID0ge1xuICB0cmFuc2xhdGVYOiAwLFxuICB0cmFuc2xhdGVZOiAwLFxuICByb3RhdGU6IDAsXG4gIHNrZXdYOiAwLFxuICBzY2FsZVg6IDEsXG4gIHNjYWxlWTogMVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYiwgYywgZCwgZSwgZikge1xuICB2YXIgc2NhbGVYLCBzY2FsZVksIHNrZXdYO1xuICBpZiAoc2NhbGVYID0gTWF0aC5zcXJ0KGEgKiBhICsgYiAqIGIpKSBhIC89IHNjYWxlWCwgYiAvPSBzY2FsZVg7XG4gIGlmIChza2V3WCA9IGEgKiBjICsgYiAqIGQpIGMgLT0gYSAqIHNrZXdYLCBkIC09IGIgKiBza2V3WDtcbiAgaWYgKHNjYWxlWSA9IE1hdGguc3FydChjICogYyArIGQgKiBkKSkgYyAvPSBzY2FsZVksIGQgLz0gc2NhbGVZLCBza2V3WCAvPSBzY2FsZVk7XG4gIGlmIChhICogZCA8IGIgKiBjKSBhID0gLWEsIGIgPSAtYiwgc2tld1ggPSAtc2tld1gsIHNjYWxlWCA9IC1zY2FsZVg7XG4gIHJldHVybiB7XG4gICAgdHJhbnNsYXRlWDogZSxcbiAgICB0cmFuc2xhdGVZOiBmLFxuICAgIHJvdGF0ZTogTWF0aC5hdGFuMihiLCBhKSAqIGRlZ3JlZXMsXG4gICAgc2tld1g6IE1hdGguYXRhbihza2V3WCkgKiBkZWdyZWVzLFxuICAgIHNjYWxlWDogc2NhbGVYLFxuICAgIHNjYWxlWTogc2NhbGVZXG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvdHJhbnNmb3JtL2RlY29tcG9zZS5qc1xuLy8gbW9kdWxlIGlkID0gMjMyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///232\n");

/***/ }),
/* 233 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("var rho = Math.SQRT2,\n    rho2 = 2,\n    rho4 = 4,\n    epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\n// p0 = [ux0, uy0, w0]\n// p1 = [ux1, uy1, w1]\n/* unused harmony default export */ var _unused_webpack_default_export = (function(p0, p1) {\n  var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n      ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n      dx = ux1 - ux0,\n      dy = uy1 - uy0,\n      d2 = dx * dx + dy * dy,\n      i,\n      S;\n\n  // Special case for u0  u1.\n  if (d2 < epsilon2) {\n    S = Math.log(w1 / w0) / rho;\n    i = function(t) {\n      return [\n        ux0 + t * dx,\n        uy0 + t * dy,\n        w0 * Math.exp(rho * t * S)\n      ];\n    }\n  }\n\n  // General case.\n  else {\n    var d1 = Math.sqrt(d2),\n        b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n        b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n        r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n        r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n    S = (r1 - r0) / rho;\n    i = function(t) {\n      var s = t * S,\n          coshr0 = cosh(r0),\n          u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n      return [\n        ux0 + u * dx,\n        uy0 + u * dy,\n        w0 * coshr0 / cosh(rho * s + r0)\n      ];\n    }\n  }\n\n  i.duration = S * 1000;\n\n  return i;\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy96b29tLmpzPzVjZTQiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHJobyA9IE1hdGguU1FSVDIsXG4gICAgcmhvMiA9IDIsXG4gICAgcmhvNCA9IDQsXG4gICAgZXBzaWxvbjIgPSAxZS0xMjtcblxuZnVuY3Rpb24gY29zaCh4KSB7XG4gIHJldHVybiAoKHggPSBNYXRoLmV4cCh4KSkgKyAxIC8geCkgLyAyO1xufVxuXG5mdW5jdGlvbiBzaW5oKHgpIHtcbiAgcmV0dXJuICgoeCA9IE1hdGguZXhwKHgpKSAtIDEgLyB4KSAvIDI7XG59XG5cbmZ1bmN0aW9uIHRhbmgoeCkge1xuICByZXR1cm4gKCh4ID0gTWF0aC5leHAoMiAqIHgpKSAtIDEpIC8gKHggKyAxKTtcbn1cblxuLy8gcDAgPSBbdXgwLCB1eTAsIHcwXVxuLy8gcDEgPSBbdXgxLCB1eTEsIHcxXVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24ocDAsIHAxKSB7XG4gIHZhciB1eDAgPSBwMFswXSwgdXkwID0gcDBbMV0sIHcwID0gcDBbMl0sXG4gICAgICB1eDEgPSBwMVswXSwgdXkxID0gcDFbMV0sIHcxID0gcDFbMl0sXG4gICAgICBkeCA9IHV4MSAtIHV4MCxcbiAgICAgIGR5ID0gdXkxIC0gdXkwLFxuICAgICAgZDIgPSBkeCAqIGR4ICsgZHkgKiBkeSxcbiAgICAgIGksXG4gICAgICBTO1xuXG4gIC8vIFNwZWNpYWwgY2FzZSBmb3IgdTAg4omFIHUxLlxuICBpZiAoZDIgPCBlcHNpbG9uMikge1xuICAgIFMgPSBNYXRoLmxvZyh3MSAvIHcwKSAvIHJobztcbiAgICBpID0gZnVuY3Rpb24odCkge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgdXgwICsgdCAqIGR4LFxuICAgICAgICB1eTAgKyB0ICogZHksXG4gICAgICAgIHcwICogTWF0aC5leHAocmhvICogdCAqIFMpXG4gICAgICBdO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdlbmVyYWwgY2FzZS5cbiAgZWxzZSB7XG4gICAgdmFyIGQxID0gTWF0aC5zcXJ0KGQyKSxcbiAgICAgICAgYjAgPSAodzEgKiB3MSAtIHcwICogdzAgKyByaG80ICogZDIpIC8gKDIgKiB3MCAqIHJobzIgKiBkMSksXG4gICAgICAgIGIxID0gKHcxICogdzEgLSB3MCAqIHcwIC0gcmhvNCAqIGQyKSAvICgyICogdzEgKiByaG8yICogZDEpLFxuICAgICAgICByMCA9IE1hdGgubG9nKE1hdGguc3FydChiMCAqIGIwICsgMSkgLSBiMCksXG4gICAgICAgIHIxID0gTWF0aC5sb2coTWF0aC5zcXJ0KGIxICogYjEgKyAxKSAtIGIxKTtcbiAgICBTID0gKHIxIC0gcjApIC8gcmhvO1xuICAgIGkgPSBmdW5jdGlvbih0KSB7XG4gICAgICB2YXIgcyA9IHQgKiBTLFxuICAgICAgICAgIGNvc2hyMCA9IGNvc2gocjApLFxuICAgICAgICAgIHUgPSB3MCAvIChyaG8yICogZDEpICogKGNvc2hyMCAqIHRhbmgocmhvICogcyArIHIwKSAtIHNpbmgocjApKTtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHV4MCArIHUgKiBkeCxcbiAgICAgICAgdXkwICsgdSAqIGR5LFxuICAgICAgICB3MCAqIGNvc2hyMCAvIGNvc2gocmhvICogcyArIHIwKVxuICAgICAgXTtcbiAgICB9XG4gIH1cblxuICBpLmR1cmF0aW9uID0gUyAqIDEwMDA7XG5cbiAgcmV0dXJuIGk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvem9vbS5qc1xuLy8gbW9kdWxlIGlkID0gMjMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///233\n");

/***/ }),
/* 234 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export hslLong */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(29);\n\n\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"d\" /* hsl */])(start)).h, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"d\" /* hsl */])(end)).h),\n        s = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.s, end.s),\n        l = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.l, end.l),\n        opacity = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\n/* unused harmony default export */ var _unused_webpack_default_export = (hsl(__WEBPACK_IMPORTED_MODULE_1__color__[\"c\" /* hue */]));\nvar hslLong = hsl(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9oc2wuanM/ZmMxNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2hzbCBhcyBjb2xvckhzbH0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgY29sb3IsIHtodWV9IGZyb20gXCIuL2NvbG9yXCI7XG5cbmZ1bmN0aW9uIGhzbChodWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgaCA9IGh1ZSgoc3RhcnQgPSBjb2xvckhzbChzdGFydCkpLmgsIChlbmQgPSBjb2xvckhzbChlbmQpKS5oKSxcbiAgICAgICAgcyA9IGNvbG9yKHN0YXJ0LnMsIGVuZC5zKSxcbiAgICAgICAgbCA9IGNvbG9yKHN0YXJ0LmwsIGVuZC5sKSxcbiAgICAgICAgb3BhY2l0eSA9IGNvbG9yKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgc3RhcnQuaCA9IGgodCk7XG4gICAgICBzdGFydC5zID0gcyh0KTtcbiAgICAgIHN0YXJ0LmwgPSBsKHQpO1xuICAgICAgc3RhcnQub3BhY2l0eSA9IG9wYWNpdHkodCk7XG4gICAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgaHNsKGh1ZSk7XG5leHBvcnQgdmFyIGhzbExvbmcgPSBoc2woY29sb3IpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2hzbC5qc1xuLy8gbW9kdWxlIGlkID0gMjM0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///234\n");

/***/ }),
/* 235 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export default */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(29);\n\n\n\nfunction lab(start, end) {\n  var l = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"e\" /* lab */])(start)).l, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"e\" /* lab */])(end)).l),\n      a = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.a, end.a),\n      b = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.b, end.b),\n      opacity = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.opacity, end.opacity);\n  return function(t) {\n    start.l = l(t);\n    start.a = a(t);\n    start.b = b(t);\n    start.opacity = opacity(t);\n    return start + \"\";\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9sYWIuanM/NDYxMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2xhYiBhcyBjb2xvckxhYn0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgY29sb3IgZnJvbSBcIi4vY29sb3JcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbGFiKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGwgPSBjb2xvcigoc3RhcnQgPSBjb2xvckxhYihzdGFydCkpLmwsIChlbmQgPSBjb2xvckxhYihlbmQpKS5sKSxcbiAgICAgIGEgPSBjb2xvcihzdGFydC5hLCBlbmQuYSksXG4gICAgICBiID0gY29sb3Ioc3RhcnQuYiwgZW5kLmIpLFxuICAgICAgb3BhY2l0eSA9IGNvbG9yKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICBzdGFydC5sID0gbCh0KTtcbiAgICBzdGFydC5hID0gYSh0KTtcbiAgICBzdGFydC5iID0gYih0KTtcbiAgICBzdGFydC5vcGFjaXR5ID0gb3BhY2l0eSh0KTtcbiAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuICB9O1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2xhYi5qc1xuLy8gbW9kdWxlIGlkID0gMjM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///235\n");

/***/ }),
/* 236 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export hclLong */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(29);\n\n\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"c\" /* hcl */])(start)).h, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"c\" /* hcl */])(end)).h),\n        c = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.c, end.c),\n        l = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.l, end.l),\n        opacity = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\n/* unused harmony default export */ var _unused_webpack_default_export = (hcl(__WEBPACK_IMPORTED_MODULE_1__color__[\"c\" /* hue */]));\nvar hclLong = hcl(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9oY2wuanM/ZGE0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2hjbCBhcyBjb2xvckhjbH0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgY29sb3IsIHtodWV9IGZyb20gXCIuL2NvbG9yXCI7XG5cbmZ1bmN0aW9uIGhjbChodWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgaCA9IGh1ZSgoc3RhcnQgPSBjb2xvckhjbChzdGFydCkpLmgsIChlbmQgPSBjb2xvckhjbChlbmQpKS5oKSxcbiAgICAgICAgYyA9IGNvbG9yKHN0YXJ0LmMsIGVuZC5jKSxcbiAgICAgICAgbCA9IGNvbG9yKHN0YXJ0LmwsIGVuZC5sKSxcbiAgICAgICAgb3BhY2l0eSA9IGNvbG9yKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgc3RhcnQuaCA9IGgodCk7XG4gICAgICBzdGFydC5jID0gYyh0KTtcbiAgICAgIHN0YXJ0LmwgPSBsKHQpO1xuICAgICAgc3RhcnQub3BhY2l0eSA9IG9wYWNpdHkodCk7XG4gICAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgaGNsKGh1ZSk7XG5leHBvcnQgdmFyIGhjbExvbmcgPSBoY2woY29sb3IpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2hjbC5qc1xuLy8gbW9kdWxlIGlkID0gMjM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///236\n");

/***/ }),
/* 237 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return cubehelixLong; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(29);\n\n\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(start)).h, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(end)).h),\n          s = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.s, end.s),\n          l = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.l, end.l),\n          opacity = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\n/* unused harmony default export */ var _unused_webpack_default_export = (cubehelix(__WEBPACK_IMPORTED_MODULE_1__color__[\"c\" /* hue */]));\nvar cubehelixLong = cubehelix(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9jdWJlaGVsaXguanM/NjhhZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2N1YmVoZWxpeCBhcyBjb2xvckN1YmVoZWxpeH0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgY29sb3IsIHtodWV9IGZyb20gXCIuL2NvbG9yXCI7XG5cbmZ1bmN0aW9uIGN1YmVoZWxpeChodWUpIHtcbiAgcmV0dXJuIChmdW5jdGlvbiBjdWJlaGVsaXhHYW1tYSh5KSB7XG4gICAgeSA9ICt5O1xuXG4gICAgZnVuY3Rpb24gY3ViZWhlbGl4KHN0YXJ0LCBlbmQpIHtcbiAgICAgIHZhciBoID0gaHVlKChzdGFydCA9IGNvbG9yQ3ViZWhlbGl4KHN0YXJ0KSkuaCwgKGVuZCA9IGNvbG9yQ3ViZWhlbGl4KGVuZCkpLmgpLFxuICAgICAgICAgIHMgPSBjb2xvcihzdGFydC5zLCBlbmQucyksXG4gICAgICAgICAgbCA9IGNvbG9yKHN0YXJ0LmwsIGVuZC5sKSxcbiAgICAgICAgICBvcGFjaXR5ID0gY29sb3Ioc3RhcnQub3BhY2l0eSwgZW5kLm9wYWNpdHkpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgc3RhcnQuaCA9IGgodCk7XG4gICAgICAgIHN0YXJ0LnMgPSBzKHQpO1xuICAgICAgICBzdGFydC5sID0gbChNYXRoLnBvdyh0LCB5KSk7XG4gICAgICAgIHN0YXJ0Lm9wYWNpdHkgPSBvcGFjaXR5KHQpO1xuICAgICAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBjdWJlaGVsaXguZ2FtbWEgPSBjdWJlaGVsaXhHYW1tYTtcblxuICAgIHJldHVybiBjdWJlaGVsaXg7XG4gIH0pKDEpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjdWJlaGVsaXgoaHVlKTtcbmV4cG9ydCB2YXIgY3ViZWhlbGl4TG9uZyA9IGN1YmVoZWxpeChjb2xvcik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvY3ViZWhlbGl4LmpzXG4vLyBtb2R1bGUgaWQgPSAyMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///237\n");

/***/ }),
/* 238 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export default */\nfunction piecewise(interpolate, values) {\n  var i = 0, n = values.length - 1, v = values[0], I = new Array(n < 0 ? 0 : n);\n  while (i < n) I[i] = interpolate(v, v = values[++i]);\n  return function(t) {\n    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));\n    return I[i](t - i);\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9waWVjZXdpc2UuanM/ZWQ2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwaWVjZXdpc2UoaW50ZXJwb2xhdGUsIHZhbHVlcykge1xuICB2YXIgaSA9IDAsIG4gPSB2YWx1ZXMubGVuZ3RoIC0gMSwgdiA9IHZhbHVlc1swXSwgSSA9IG5ldyBBcnJheShuIDwgMCA/IDAgOiBuKTtcbiAgd2hpbGUgKGkgPCBuKSBJW2ldID0gaW50ZXJwb2xhdGUodiwgdiA9IHZhbHVlc1srK2ldKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgaSA9IE1hdGgubWF4KDAsIE1hdGgubWluKG4gLSAxLCBNYXRoLmZsb29yKHQgKj0gbikpKTtcbiAgICByZXR1cm4gSVtpXSh0IC0gaSk7XG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvcGllY2V3aXNlLmpzXG4vLyBtb2R1bGUgaWQgPSAyMzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///238\n");

/***/ }),
/* 239 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony default export */ var _unused_webpack_default_export = (function(interpolator, n) {\n  var samples = new Array(n);\n  for (var i = 0; i < n; ++i) samples[i] = interpolator(i / (n - 1));\n  return samples;\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9xdWFudGl6ZS5qcz84ZmM2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGludGVycG9sYXRvciwgbikge1xuICB2YXIgc2FtcGxlcyA9IG5ldyBBcnJheShuKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIHNhbXBsZXNbaV0gPSBpbnRlcnBvbGF0b3IoaSAvIChuIC0gMSkpO1xuICByZXR1cm4gc2FtcGxlcztcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9xdWFudGl6ZS5qc1xuLy8gbW9kdWxlIGlkID0gMjM5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///239\n");

/***/ }),
/* 240 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1BSR24uanM/ZTU2MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJhZjhkYzNmN2Y3Zjc3ZmJmN2JcIixcbiAgXCI3YjMyOTRjMmE1Y2ZhNmRiYTAwMDg4MzdcIixcbiAgXCI3YjMyOTRjMmE1Y2ZmN2Y3ZjdhNmRiYTAwMDg4MzdcIixcbiAgXCI3NjJhODNhZjhkYzNlN2Q0ZThkOWYwZDM3ZmJmN2IxYjc4MzdcIixcbiAgXCI3NjJhODNhZjhkYzNlN2Q0ZThmN2Y3ZjdkOWYwZDM3ZmJmN2IxYjc4MzdcIixcbiAgXCI3NjJhODM5OTcwYWJjMmE1Y2ZlN2Q0ZThkOWYwZDNhNmRiYTA1YWFlNjExYjc4MzdcIixcbiAgXCI3NjJhODM5OTcwYWJjMmE1Y2ZlN2Q0ZThmN2Y3ZjdkOWYwZDNhNmRiYTA1YWFlNjExYjc4MzdcIixcbiAgXCI0MDAwNGI3NjJhODM5OTcwYWJjMmE1Y2ZlN2Q0ZThkOWYwZDNhNmRiYTA1YWFlNjExYjc4MzcwMDQ0MWJcIixcbiAgXCI0MDAwNGI3NjJhODM5OTcwYWJjMmE1Y2ZlN2Q0ZThmN2Y3ZjdkOWYwZDNhNmRiYTA1YWFlNjExYjc4MzcwMDQ0MWJcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9kaXZlcmdpbmcvUFJHbi5qc1xuLy8gbW9kdWxlIGlkID0gMjQwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///240\n");

/***/ }),
/* 241 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1BpWUcuanM/NDQxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJlOWEzYzlmN2Y3ZjdhMWQ3NmFcIixcbiAgXCJkMDFjOGJmMWI2ZGFiOGUxODY0ZGFjMjZcIixcbiAgXCJkMDFjOGJmMWI2ZGFmN2Y3ZjdiOGUxODY0ZGFjMjZcIixcbiAgXCJjNTFiN2RlOWEzYzlmZGUwZWZlNmY1ZDBhMWQ3NmE0ZDkyMjFcIixcbiAgXCJjNTFiN2RlOWEzYzlmZGUwZWZmN2Y3ZjdlNmY1ZDBhMWQ3NmE0ZDkyMjFcIixcbiAgXCJjNTFiN2RkZTc3YWVmMWI2ZGFmZGUwZWZlNmY1ZDBiOGUxODY3ZmJjNDE0ZDkyMjFcIixcbiAgXCJjNTFiN2RkZTc3YWVmMWI2ZGFmZGUwZWZmN2Y3ZjdlNmY1ZDBiOGUxODY3ZmJjNDE0ZDkyMjFcIixcbiAgXCI4ZTAxNTJjNTFiN2RkZTc3YWVmMWI2ZGFmZGUwZWZlNmY1ZDBiOGUxODY3ZmJjNDE0ZDkyMjEyNzY0MTlcIixcbiAgXCI4ZTAxNTJjNTFiN2RkZTc3YWVmMWI2ZGFmZGUwZWZmN2Y3ZjdlNmY1ZDBiOGUxODY3ZmJjNDE0ZDkyMjEyNzY0MTlcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9kaXZlcmdpbmcvUGlZRy5qc1xuLy8gbW9kdWxlIGlkID0gMjQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///241\n");

/***/ }),
/* 242 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1B1T3IuanM/YWE1NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCI5OThlYzNmN2Y3ZjdmMWEzNDBcIixcbiAgXCI1ZTNjOTliMmFiZDJmZGI4NjNlNjYxMDFcIixcbiAgXCI1ZTNjOTliMmFiZDJmN2Y3ZjdmZGI4NjNlNjYxMDFcIixcbiAgXCI1NDI3ODg5OThlYzNkOGRhZWJmZWUwYjZmMWEzNDBiMzU4MDZcIixcbiAgXCI1NDI3ODg5OThlYzNkOGRhZWJmN2Y3ZjdmZWUwYjZmMWEzNDBiMzU4MDZcIixcbiAgXCI1NDI3ODg4MDczYWNiMmFiZDJkOGRhZWJmZWUwYjZmZGI4NjNlMDgyMTRiMzU4MDZcIixcbiAgXCI1NDI3ODg4MDczYWNiMmFiZDJkOGRhZWJmN2Y3ZjdmZWUwYjZmZGI4NjNlMDgyMTRiMzU4MDZcIixcbiAgXCIyZDAwNGI1NDI3ODg4MDczYWNiMmFiZDJkOGRhZWJmZWUwYjZmZGI4NjNlMDgyMTRiMzU4MDY3ZjNiMDhcIixcbiAgXCIyZDAwNGI1NDI3ODg4MDczYWNiMmFiZDJkOGRhZWJmN2Y3ZjdmZWUwYjZmZGI4NjNlMDgyMTRiMzU4MDY3ZjNiMDhcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9kaXZlcmdpbmcvUHVPci5qc1xuLy8gbW9kdWxlIGlkID0gMjQyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///242\n");

/***/ }),
/* 243 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1JkQnUuanM/OTg1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJlZjhhNjJmN2Y3Zjc2N2E5Y2ZcIixcbiAgXCJjYTAwMjBmNGE1ODI5MmM1ZGUwNTcxYjBcIixcbiAgXCJjYTAwMjBmNGE1ODJmN2Y3Zjc5MmM1ZGUwNTcxYjBcIixcbiAgXCJiMjE4MmJlZjhhNjJmZGRiYzdkMWU1ZjA2N2E5Y2YyMTY2YWNcIixcbiAgXCJiMjE4MmJlZjhhNjJmZGRiYzdmN2Y3ZjdkMWU1ZjA2N2E5Y2YyMTY2YWNcIixcbiAgXCJiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdkMWU1ZjA5MmM1ZGU0MzkzYzMyMTY2YWNcIixcbiAgXCJiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdmN2Y3ZjdkMWU1ZjA5MmM1ZGU0MzkzYzMyMTY2YWNcIixcbiAgXCI2NzAwMWZiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdkMWU1ZjA5MmM1ZGU0MzkzYzMyMTY2YWMwNTMwNjFcIixcbiAgXCI2NzAwMWZiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdmN2Y3ZjdkMWU1ZjA5MmM1ZGU0MzkzYzMyMTY2YWMwNTMwNjFcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9kaXZlcmdpbmcvUmRCdS5qc1xuLy8gbW9kdWxlIGlkID0gMjQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///243\n");

/***/ }),
/* 244 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1JkR3kuanM/OGQ5NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJlZjhhNjJmZmZmZmY5OTk5OTlcIixcbiAgXCJjYTAwMjBmNGE1ODJiYWJhYmE0MDQwNDBcIixcbiAgXCJjYTAwMjBmNGE1ODJmZmZmZmZiYWJhYmE0MDQwNDBcIixcbiAgXCJiMjE4MmJlZjhhNjJmZGRiYzdlMGUwZTA5OTk5OTk0ZDRkNGRcIixcbiAgXCJiMjE4MmJlZjhhNjJmZGRiYzdmZmZmZmZlMGUwZTA5OTk5OTk0ZDRkNGRcIixcbiAgXCJiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdlMGUwZTBiYWJhYmE4Nzg3ODc0ZDRkNGRcIixcbiAgXCJiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdmZmZmZmZlMGUwZTBiYWJhYmE4Nzg3ODc0ZDRkNGRcIixcbiAgXCI2NzAwMWZiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdlMGUwZTBiYWJhYmE4Nzg3ODc0ZDRkNGQxYTFhMWFcIixcbiAgXCI2NzAwMWZiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdmZmZmZmZlMGUwZTBiYWJhYmE4Nzg3ODc0ZDRkNGQxYTFhMWFcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9kaXZlcmdpbmcvUmRHeS5qc1xuLy8gbW9kdWxlIGlkID0gMjQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///244\n");

/***/ }),
/* 245 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1JkWWxCdS5qcz8zODYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuaW1wb3J0IHJhbXAgZnJvbSBcIi4uL3JhbXAuanNcIjtcblxuZXhwb3J0IHZhciBzY2hlbWUgPSBuZXcgQXJyYXkoMykuY29uY2F0KFxuICBcImZjOGQ1OWZmZmZiZjkxYmZkYlwiLFxuICBcImQ3MTkxY2ZkYWU2MWFiZDllOTJjN2JiNlwiLFxuICBcImQ3MTkxY2ZkYWU2MWZmZmZiZmFiZDllOTJjN2JiNlwiLFxuICBcImQ3MzAyN2ZjOGQ1OWZlZTA5MGUwZjNmODkxYmZkYjQ1NzViNFwiLFxuICBcImQ3MzAyN2ZjOGQ1OWZlZTA5MGZmZmZiZmUwZjNmODkxYmZkYjQ1NzViNFwiLFxuICBcImQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA5MGUwZjNmOGFiZDllOTc0YWRkMTQ1NzViNFwiLFxuICBcImQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA5MGZmZmZiZmUwZjNmOGFiZDllOTc0YWRkMTQ1NzViNFwiLFxuICBcImE1MDAyNmQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA5MGUwZjNmOGFiZDllOTc0YWRkMTQ1NzViNDMxMzY5NVwiLFxuICBcImE1MDAyNmQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA5MGZmZmZiZmUwZjNmOGFiZDllOTc0YWRkMTQ1NzViNDMxMzY5NVwiXG4pLm1hcChjb2xvcnMpO1xuXG5leHBvcnQgZGVmYXVsdCByYW1wKHNjaGVtZSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2RpdmVyZ2luZy9SZFlsQnUuanNcbi8vIG1vZHVsZSBpZCA9IDI0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///245\n");

/***/ }),
/* 246 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1JkWWxHbi5qcz83ZDNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuaW1wb3J0IHJhbXAgZnJvbSBcIi4uL3JhbXAuanNcIjtcblxuZXhwb3J0IHZhciBzY2hlbWUgPSBuZXcgQXJyYXkoMykuY29uY2F0KFxuICBcImZjOGQ1OWZmZmZiZjkxY2Y2MFwiLFxuICBcImQ3MTkxY2ZkYWU2MWE2ZDk2YTFhOTY0MVwiLFxuICBcImQ3MTkxY2ZkYWU2MWZmZmZiZmE2ZDk2YTFhOTY0MVwiLFxuICBcImQ3MzAyN2ZjOGQ1OWZlZTA4YmQ5ZWY4YjkxY2Y2MDFhOTg1MFwiLFxuICBcImQ3MzAyN2ZjOGQ1OWZlZTA4YmZmZmZiZmQ5ZWY4YjkxY2Y2MDFhOTg1MFwiLFxuICBcImQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA4YmQ5ZWY4YmE2ZDk2YTY2YmQ2MzFhOTg1MFwiLFxuICBcImQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA4YmZmZmZiZmQ5ZWY4YmE2ZDk2YTY2YmQ2MzFhOTg1MFwiLFxuICBcImE1MDAyNmQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA4YmQ5ZWY4YmE2ZDk2YTY2YmQ2MzFhOTg1MDAwNjgzN1wiLFxuICBcImE1MDAyNmQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA4YmZmZmZiZmQ5ZWY4YmE2ZDk2YTY2YmQ2MzFhOTg1MDAwNjgzN1wiXG4pLm1hcChjb2xvcnMpO1xuXG5leHBvcnQgZGVmYXVsdCByYW1wKHNjaGVtZSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2RpdmVyZ2luZy9SZFlsR24uanNcbi8vIG1vZHVsZSBpZCA9IDI0NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///246\n");

/***/ }),
/* 247 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1NwZWN0cmFsLmpzPzIxNmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZmM4ZDU5ZmZmZmJmOTlkNTk0XCIsXG4gIFwiZDcxOTFjZmRhZTYxYWJkZGE0MmI4M2JhXCIsXG4gIFwiZDcxOTFjZmRhZTYxZmZmZmJmYWJkZGE0MmI4M2JhXCIsXG4gIFwiZDUzZTRmZmM4ZDU5ZmVlMDhiZTZmNTk4OTlkNTk0MzI4OGJkXCIsXG4gIFwiZDUzZTRmZmM4ZDU5ZmVlMDhiZmZmZmJmZTZmNTk4OTlkNTk0MzI4OGJkXCIsXG4gIFwiZDUzZTRmZjQ2ZDQzZmRhZTYxZmVlMDhiZTZmNTk4YWJkZGE0NjZjMmE1MzI4OGJkXCIsXG4gIFwiZDUzZTRmZjQ2ZDQzZmRhZTYxZmVlMDhiZmZmZmJmZTZmNTk4YWJkZGE0NjZjMmE1MzI4OGJkXCIsXG4gIFwiOWUwMTQyZDUzZTRmZjQ2ZDQzZmRhZTYxZmVlMDhiZTZmNTk4YWJkZGE0NjZjMmE1MzI4OGJkNWU0ZmEyXCIsXG4gIFwiOWUwMTQyZDUzZTRmZjQ2ZDQzZmRhZTYxZmVlMDhiZmZmZmJmZTZmNTk4YWJkZGE0NjZjMmE1MzI4OGJkNWU0ZmEyXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1NwZWN0cmFsLmpzXG4vLyBtb2R1bGUgaWQgPSAyNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///247\n");

/***/ }),
/* 248 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9CdUduLmpzP2JmNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZTVmNWY5OTlkOGM5MmNhMjVmXCIsXG4gIFwiZWRmOGZiYjJlMmUyNjZjMmE0MjM4YjQ1XCIsXG4gIFwiZWRmOGZiYjJlMmUyNjZjMmE0MmNhMjVmMDA2ZDJjXCIsXG4gIFwiZWRmOGZiY2NlY2U2OTlkOGM5NjZjMmE0MmNhMjVmMDA2ZDJjXCIsXG4gIFwiZWRmOGZiY2NlY2U2OTlkOGM5NjZjMmE0NDFhZTc2MjM4YjQ1MDA1ODI0XCIsXG4gIFwiZjdmY2ZkZTVmNWY5Y2NlY2U2OTlkOGM5NjZjMmE0NDFhZTc2MjM4YjQ1MDA1ODI0XCIsXG4gIFwiZjdmY2ZkZTVmNWY5Y2NlY2U2OTlkOGM5NjZjMmE0NDFhZTc2MjM4YjQ1MDA2ZDJjMDA0NDFiXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9CdUduLmpzXG4vLyBtb2R1bGUgaWQgPSAyNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///248\n");

/***/ }),
/* 249 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9CdVB1LmpzPzAyZWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZTBlY2Y0OWViY2RhODg1NmE3XCIsXG4gIFwiZWRmOGZiYjNjZGUzOGM5NmM2ODg0MTlkXCIsXG4gIFwiZWRmOGZiYjNjZGUzOGM5NmM2ODg1NmE3ODEwZjdjXCIsXG4gIFwiZWRmOGZiYmZkM2U2OWViY2RhOGM5NmM2ODg1NmE3ODEwZjdjXCIsXG4gIFwiZWRmOGZiYmZkM2U2OWViY2RhOGM5NmM2OGM2YmIxODg0MTlkNmUwMTZiXCIsXG4gIFwiZjdmY2ZkZTBlY2Y0YmZkM2U2OWViY2RhOGM5NmM2OGM2YmIxODg0MTlkNmUwMTZiXCIsXG4gIFwiZjdmY2ZkZTBlY2Y0YmZkM2U2OWViY2RhOGM5NmM2OGM2YmIxODg0MTlkODEwZjdjNGQwMDRiXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9CdVB1LmpzXG4vLyBtb2R1bGUgaWQgPSAyNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///249\n");

/***/ }),
/* 250 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9HbkJ1LmpzPzdmZjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZTBmM2RiYThkZGI1NDNhMmNhXCIsXG4gIFwiZjBmOWU4YmFlNGJjN2JjY2M0MmI4Y2JlXCIsXG4gIFwiZjBmOWU4YmFlNGJjN2JjY2M0NDNhMmNhMDg2OGFjXCIsXG4gIFwiZjBmOWU4Y2NlYmM1YThkZGI1N2JjY2M0NDNhMmNhMDg2OGFjXCIsXG4gIFwiZjBmOWU4Y2NlYmM1YThkZGI1N2JjY2M0NGViM2QzMmI4Y2JlMDg1ODllXCIsXG4gIFwiZjdmY2YwZTBmM2RiY2NlYmM1YThkZGI1N2JjY2M0NGViM2QzMmI4Y2JlMDg1ODllXCIsXG4gIFwiZjdmY2YwZTBmM2RiY2NlYmM1YThkZGI1N2JjY2M0NGViM2QzMmI4Y2JlMDg2OGFjMDg0MDgxXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9HbkJ1LmpzXG4vLyBtb2R1bGUgaWQgPSAyNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///250\n");

/***/ }),
/* 251 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9PclJkLmpzP2VmYjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZmVlOGM4ZmRiYjg0ZTM0YTMzXCIsXG4gIFwiZmVmMGQ5ZmRjYzhhZmM4ZDU5ZDczMDFmXCIsXG4gIFwiZmVmMGQ5ZmRjYzhhZmM4ZDU5ZTM0YTMzYjMwMDAwXCIsXG4gIFwiZmVmMGQ5ZmRkNDllZmRiYjg0ZmM4ZDU5ZTM0YTMzYjMwMDAwXCIsXG4gIFwiZmVmMGQ5ZmRkNDllZmRiYjg0ZmM4ZDU5ZWY2NTQ4ZDczMDFmOTkwMDAwXCIsXG4gIFwiZmZmN2VjZmVlOGM4ZmRkNDllZmRiYjg0ZmM4ZDU5ZWY2NTQ4ZDczMDFmOTkwMDAwXCIsXG4gIFwiZmZmN2VjZmVlOGM4ZmRkNDllZmRiYjg0ZmM4ZDU5ZWY2NTQ4ZDczMDFmYjMwMDAwN2YwMDAwXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9PclJkLmpzXG4vLyBtb2R1bGUgaWQgPSAyNTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///251\n");

/***/ }),
/* 252 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9QdUJ1R24uanM/YzJjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJlY2UyZjBhNmJkZGIxYzkwOTlcIixcbiAgXCJmNmVmZjdiZGM5ZTE2N2E5Y2YwMjgxOGFcIixcbiAgXCJmNmVmZjdiZGM5ZTE2N2E5Y2YxYzkwOTkwMTZjNTlcIixcbiAgXCJmNmVmZjdkMGQxZTZhNmJkZGI2N2E5Y2YxYzkwOTkwMTZjNTlcIixcbiAgXCJmNmVmZjdkMGQxZTZhNmJkZGI2N2E5Y2YzNjkwYzAwMjgxOGEwMTY0NTBcIixcbiAgXCJmZmY3ZmJlY2UyZjBkMGQxZTZhNmJkZGI2N2E5Y2YzNjkwYzAwMjgxOGEwMTY0NTBcIixcbiAgXCJmZmY3ZmJlY2UyZjBkMGQxZTZhNmJkZGI2N2E5Y2YzNjkwYzAwMjgxOGEwMTZjNTkwMTQ2MzZcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL1B1QnVHbi5qc1xuLy8gbW9kdWxlIGlkID0gMjUyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///252\n");

/***/ }),
/* 253 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9QdUJ1LmpzPzA5YzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZWNlN2YyYTZiZGRiMmI4Y2JlXCIsXG4gIFwiZjFlZWY2YmRjOWUxNzRhOWNmMDU3MGIwXCIsXG4gIFwiZjFlZWY2YmRjOWUxNzRhOWNmMmI4Y2JlMDQ1YThkXCIsXG4gIFwiZjFlZWY2ZDBkMWU2YTZiZGRiNzRhOWNmMmI4Y2JlMDQ1YThkXCIsXG4gIFwiZjFlZWY2ZDBkMWU2YTZiZGRiNzRhOWNmMzY5MGMwMDU3MGIwMDM0ZTdiXCIsXG4gIFwiZmZmN2ZiZWNlN2YyZDBkMWU2YTZiZGRiNzRhOWNmMzY5MGMwMDU3MGIwMDM0ZTdiXCIsXG4gIFwiZmZmN2ZiZWNlN2YyZDBkMWU2YTZiZGRiNzRhOWNmMzY5MGMwMDU3MGIwMDQ1YThkMDIzODU4XCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9QdUJ1LmpzXG4vLyBtb2R1bGUgaWQgPSAyNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///253\n");

/***/ }),
/* 254 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9QdVJkLmpzPzViNTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZTdlMWVmYzk5NGM3ZGQxYzc3XCIsXG4gIFwiZjFlZWY2ZDdiNWQ4ZGY2NWIwY2UxMjU2XCIsXG4gIFwiZjFlZWY2ZDdiNWQ4ZGY2NWIwZGQxYzc3OTgwMDQzXCIsXG4gIFwiZjFlZWY2ZDRiOWRhYzk5NGM3ZGY2NWIwZGQxYzc3OTgwMDQzXCIsXG4gIFwiZjFlZWY2ZDRiOWRhYzk5NGM3ZGY2NWIwZTcyOThhY2UxMjU2OTEwMDNmXCIsXG4gIFwiZjdmNGY5ZTdlMWVmZDRiOWRhYzk5NGM3ZGY2NWIwZTcyOThhY2UxMjU2OTEwMDNmXCIsXG4gIFwiZjdmNGY5ZTdlMWVmZDRiOWRhYzk5NGM3ZGY2NWIwZTcyOThhY2UxMjU2OTgwMDQzNjcwMDFmXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9QdVJkLmpzXG4vLyBtb2R1bGUgaWQgPSAyNTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///254\n");

/***/ }),
/* 255 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9SZFB1LmpzP2VjOTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZmRlMGRkZmE5ZmI1YzUxYjhhXCIsXG4gIFwiZmVlYmUyZmJiNGI5Zjc2OGExYWUwMTdlXCIsXG4gIFwiZmVlYmUyZmJiNGI5Zjc2OGExYzUxYjhhN2EwMTc3XCIsXG4gIFwiZmVlYmUyZmNjNWMwZmE5ZmI1Zjc2OGExYzUxYjhhN2EwMTc3XCIsXG4gIFwiZmVlYmUyZmNjNWMwZmE5ZmI1Zjc2OGExZGQzNDk3YWUwMTdlN2EwMTc3XCIsXG4gIFwiZmZmN2YzZmRlMGRkZmNjNWMwZmE5ZmI1Zjc2OGExZGQzNDk3YWUwMTdlN2EwMTc3XCIsXG4gIFwiZmZmN2YzZmRlMGRkZmNjNWMwZmE5ZmI1Zjc2OGExZGQzNDk3YWUwMTdlN2EwMTc3NDkwMDZhXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9SZFB1LmpzXG4vLyBtb2R1bGUgaWQgPSAyNTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///255\n");

/***/ }),
/* 256 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9ZbEduQnUuanM/MjE1ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJlZGY4YjE3ZmNkYmIyYzdmYjhcIixcbiAgXCJmZmZmY2NhMWRhYjQ0MWI2YzQyMjVlYThcIixcbiAgXCJmZmZmY2NhMWRhYjQ0MWI2YzQyYzdmYjgyNTM0OTRcIixcbiAgXCJmZmZmY2NjN2U5YjQ3ZmNkYmI0MWI2YzQyYzdmYjgyNTM0OTRcIixcbiAgXCJmZmZmY2NjN2U5YjQ3ZmNkYmI0MWI2YzQxZDkxYzAyMjVlYTgwYzJjODRcIixcbiAgXCJmZmZmZDllZGY4YjFjN2U5YjQ3ZmNkYmI0MWI2YzQxZDkxYzAyMjVlYTgwYzJjODRcIixcbiAgXCJmZmZmZDllZGY4YjFjN2U5YjQ3ZmNkYmI0MWI2YzQxZDkxYzAyMjVlYTgyNTM0OTQwODFkNThcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL1lsR25CdS5qc1xuLy8gbW9kdWxlIGlkID0gMjU2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///256\n");

/***/ }),
/* 257 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9ZbEduLmpzPzg0NWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZjdmY2I5YWRkZDhlMzFhMzU0XCIsXG4gIFwiZmZmZmNjYzJlNjk5NzhjNjc5MjM4NDQzXCIsXG4gIFwiZmZmZmNjYzJlNjk5NzhjNjc5MzFhMzU0MDA2ODM3XCIsXG4gIFwiZmZmZmNjZDlmMGEzYWRkZDhlNzhjNjc5MzFhMzU0MDA2ODM3XCIsXG4gIFwiZmZmZmNjZDlmMGEzYWRkZDhlNzhjNjc5NDFhYjVkMjM4NDQzMDA1YTMyXCIsXG4gIFwiZmZmZmU1ZjdmY2I5ZDlmMGEzYWRkZDhlNzhjNjc5NDFhYjVkMjM4NDQzMDA1YTMyXCIsXG4gIFwiZmZmZmU1ZjdmY2I5ZDlmMGEzYWRkZDhlNzhjNjc5NDFhYjVkMjM4NDQzMDA2ODM3MDA0NTI5XCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9ZbEduLmpzXG4vLyBtb2R1bGUgaWQgPSAyNTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///257\n");

/***/ }),
/* 258 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9ZbE9yQnIuanM/YTA1YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJmZmY3YmNmZWM0NGZkOTVmMGVcIixcbiAgXCJmZmZmZDRmZWQ5OGVmZTk5MjljYzRjMDJcIixcbiAgXCJmZmZmZDRmZWQ5OGVmZTk5MjlkOTVmMGU5OTM0MDRcIixcbiAgXCJmZmZmZDRmZWUzOTFmZWM0NGZmZTk5MjlkOTVmMGU5OTM0MDRcIixcbiAgXCJmZmZmZDRmZWUzOTFmZWM0NGZmZTk5MjllYzcwMTRjYzRjMDI4YzJkMDRcIixcbiAgXCJmZmZmZTVmZmY3YmNmZWUzOTFmZWM0NGZmZTk5MjllYzcwMTRjYzRjMDI4YzJkMDRcIixcbiAgXCJmZmZmZTVmZmY3YmNmZWUzOTFmZWM0NGZmZTk5MjllYzcwMTRjYzRjMDI5OTM0MDQ2NjI1MDZcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL1lsT3JCci5qc1xuLy8gbW9kdWxlIGlkID0gMjU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///258\n");

/***/ }),
/* 259 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9ZbE9yUmQuanM/NjY0MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJmZmVkYTBmZWIyNGNmMDNiMjBcIixcbiAgXCJmZmZmYjJmZWNjNWNmZDhkM2NlMzFhMWNcIixcbiAgXCJmZmZmYjJmZWNjNWNmZDhkM2NmMDNiMjBiZDAwMjZcIixcbiAgXCJmZmZmYjJmZWQ5NzZmZWIyNGNmZDhkM2NmMDNiMjBiZDAwMjZcIixcbiAgXCJmZmZmYjJmZWQ5NzZmZWIyNGNmZDhkM2NmYzRlMmFlMzFhMWNiMTAwMjZcIixcbiAgXCJmZmZmY2NmZmVkYTBmZWQ5NzZmZWIyNGNmZDhkM2NmYzRlMmFlMzFhMWNiMTAwMjZcIixcbiAgXCJmZmZmY2NmZmVkYTBmZWQ5NzZmZWIyNGNmZDhkM2NmYzRlMmFlMzFhMWNiZDAwMjY4MDAwMjZcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL1lsT3JSZC5qc1xuLy8gbW9kdWxlIGlkID0gMjU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///259\n");

/***/ }),
/* 260 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1zaW5nbGUvQmx1ZXMuanM/OTQ0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJkZWViZjc5ZWNhZTEzMTgyYmRcIixcbiAgXCJlZmYzZmZiZGQ3ZTc2YmFlZDYyMTcxYjVcIixcbiAgXCJlZmYzZmZiZGQ3ZTc2YmFlZDYzMTgyYmQwODUxOWNcIixcbiAgXCJlZmYzZmZjNmRiZWY5ZWNhZTE2YmFlZDYzMTgyYmQwODUxOWNcIixcbiAgXCJlZmYzZmZjNmRiZWY5ZWNhZTE2YmFlZDY0MjkyYzYyMTcxYjUwODQ1OTRcIixcbiAgXCJmN2ZiZmZkZWViZjdjNmRiZWY5ZWNhZTE2YmFlZDY0MjkyYzYyMTcxYjUwODQ1OTRcIixcbiAgXCJmN2ZiZmZkZWViZjdjNmRiZWY5ZWNhZTE2YmFlZDY0MjkyYzYyMTcxYjUwODUxOWMwODMwNmJcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLXNpbmdsZS9CbHVlcy5qc1xuLy8gbW9kdWxlIGlkID0gMjYwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///260\n");

/***/ }),
/* 261 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1zaW5nbGUvR3JlZW5zLmpzP2M2ODgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZTVmNWUwYTFkOTliMzFhMzU0XCIsXG4gIFwiZWRmOGU5YmFlNGIzNzRjNDc2MjM4YjQ1XCIsXG4gIFwiZWRmOGU5YmFlNGIzNzRjNDc2MzFhMzU0MDA2ZDJjXCIsXG4gIFwiZWRmOGU5YzdlOWMwYTFkOTliNzRjNDc2MzFhMzU0MDA2ZDJjXCIsXG4gIFwiZWRmOGU5YzdlOWMwYTFkOTliNzRjNDc2NDFhYjVkMjM4YjQ1MDA1YTMyXCIsXG4gIFwiZjdmY2Y1ZTVmNWUwYzdlOWMwYTFkOTliNzRjNDc2NDFhYjVkMjM4YjQ1MDA1YTMyXCIsXG4gIFwiZjdmY2Y1ZTVmNWUwYzdlOWMwYTFkOTliNzRjNDc2NDFhYjVkMjM4YjQ1MDA2ZDJjMDA0NDFiXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1zaW5nbGUvR3JlZW5zLmpzXG4vLyBtb2R1bGUgaWQgPSAyNjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///261\n");

/***/ }),
/* 262 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1zaW5nbGUvR3JleXMuanM/MTE1ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJmMGYwZjBiZGJkYmQ2MzYzNjNcIixcbiAgXCJmN2Y3ZjdjY2NjY2M5Njk2OTY1MjUyNTJcIixcbiAgXCJmN2Y3ZjdjY2NjY2M5Njk2OTY2MzYzNjMyNTI1MjVcIixcbiAgXCJmN2Y3ZjdkOWQ5ZDliZGJkYmQ5Njk2OTY2MzYzNjMyNTI1MjVcIixcbiAgXCJmN2Y3ZjdkOWQ5ZDliZGJkYmQ5Njk2OTY3MzczNzM1MjUyNTIyNTI1MjVcIixcbiAgXCJmZmZmZmZmMGYwZjBkOWQ5ZDliZGJkYmQ5Njk2OTY3MzczNzM1MjUyNTIyNTI1MjVcIixcbiAgXCJmZmZmZmZmMGYwZjBkOWQ5ZDliZGJkYmQ5Njk2OTY3MzczNzM1MjUyNTIyNTI1MjUwMDAwMDBcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLXNpbmdsZS9HcmV5cy5qc1xuLy8gbW9kdWxlIGlkID0gMjYyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///262\n");

/***/ }),
/* 263 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1zaW5nbGUvUHVycGxlcy5qcz82OGY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuaW1wb3J0IHJhbXAgZnJvbSBcIi4uL3JhbXAuanNcIjtcblxuZXhwb3J0IHZhciBzY2hlbWUgPSBuZXcgQXJyYXkoMykuY29uY2F0KFxuICBcImVmZWRmNWJjYmRkYzc1NmJiMVwiLFxuICBcImYyZjBmN2NiYzllMjllOWFjODZhNTFhM1wiLFxuICBcImYyZjBmN2NiYzllMjllOWFjODc1NmJiMTU0Mjc4ZlwiLFxuICBcImYyZjBmN2RhZGFlYmJjYmRkYzllOWFjODc1NmJiMTU0Mjc4ZlwiLFxuICBcImYyZjBmN2RhZGFlYmJjYmRkYzllOWFjODgwN2RiYTZhNTFhMzRhMTQ4NlwiLFxuICBcImZjZmJmZGVmZWRmNWRhZGFlYmJjYmRkYzllOWFjODgwN2RiYTZhNTFhMzRhMTQ4NlwiLFxuICBcImZjZmJmZGVmZWRmNWRhZGFlYmJjYmRkYzllOWFjODgwN2RiYTZhNTFhMzU0Mjc4ZjNmMDA3ZFwiXG4pLm1hcChjb2xvcnMpO1xuXG5leHBvcnQgZGVmYXVsdCByYW1wKHNjaGVtZSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL3NlcXVlbnRpYWwtc2luZ2xlL1B1cnBsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDI2M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///263\n");

/***/ }),
/* 264 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjY0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1zaW5nbGUvUmVkcy5qcz9kMDlkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuaW1wb3J0IHJhbXAgZnJvbSBcIi4uL3JhbXAuanNcIjtcblxuZXhwb3J0IHZhciBzY2hlbWUgPSBuZXcgQXJyYXkoMykuY29uY2F0KFxuICBcImZlZTBkMmZjOTI3MmRlMmQyNlwiLFxuICBcImZlZTVkOWZjYWU5MWZiNmE0YWNiMTgxZFwiLFxuICBcImZlZTVkOWZjYWU5MWZiNmE0YWRlMmQyNmE1MGYxNVwiLFxuICBcImZlZTVkOWZjYmJhMWZjOTI3MmZiNmE0YWRlMmQyNmE1MGYxNVwiLFxuICBcImZlZTVkOWZjYmJhMWZjOTI3MmZiNmE0YWVmM2IyY2NiMTgxZDk5MDAwZFwiLFxuICBcImZmZjVmMGZlZTBkMmZjYmJhMWZjOTI3MmZiNmE0YWVmM2IyY2NiMTgxZDk5MDAwZFwiLFxuICBcImZmZjVmMGZlZTBkMmZjYmJhMWZjOTI3MmZiNmE0YWVmM2IyY2NiMTgxZGE1MGYxNTY3MDAwZFwiXG4pLm1hcChjb2xvcnMpO1xuXG5leHBvcnQgZGVmYXVsdCByYW1wKHNjaGVtZSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL3NlcXVlbnRpYWwtc2luZ2xlL1JlZHMuanNcbi8vIG1vZHVsZSBpZCA9IDI2NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///264\n");

/***/ }),
/* 265 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjY1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1zaW5nbGUvT3Jhbmdlcy5qcz9kNmRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuaW1wb3J0IHJhbXAgZnJvbSBcIi4uL3JhbXAuanNcIjtcblxuZXhwb3J0IHZhciBzY2hlbWUgPSBuZXcgQXJyYXkoMykuY29uY2F0KFxuICBcImZlZTZjZWZkYWU2YmU2NTUwZFwiLFxuICBcImZlZWRkZWZkYmU4NWZkOGQzY2Q5NDcwMVwiLFxuICBcImZlZWRkZWZkYmU4NWZkOGQzY2U2NTUwZGE2MzYwM1wiLFxuICBcImZlZWRkZWZkZDBhMmZkYWU2YmZkOGQzY2U2NTUwZGE2MzYwM1wiLFxuICBcImZlZWRkZWZkZDBhMmZkYWU2YmZkOGQzY2YxNjkxM2Q5NDgwMThjMmQwNFwiLFxuICBcImZmZjVlYmZlZTZjZWZkZDBhMmZkYWU2YmZkOGQzY2YxNjkxM2Q5NDgwMThjMmQwNFwiLFxuICBcImZmZjVlYmZlZTZjZWZkZDBhMmZkYWU2YmZkOGQzY2YxNjkxM2Q5NDgwMWE2MzYwMzdmMjcwNFwiXG4pLm1hcChjb2xvcnMpO1xuXG5leHBvcnQgZGVmYXVsdCByYW1wKHNjaGVtZSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL3NlcXVlbnRpYWwtc2luZ2xlL09yYW5nZXMuanNcbi8vIG1vZHVsZSBpZCA9IDI2NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///265\n");

/***/ }),
/* 266 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (function(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(-4.54 - t * (35.34 - t * (2381.73 - t * (6402.7 - t * (7024.72 - t * 2710.57))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(32.49 + t * (170.73 + t * (52.82 - t * (131.46 - t * (176.58 - t * 67.37))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(81.24 + t * (442.36 - t * (2482.43 - t * (6167.24 - t * (6614.94 - t * 2475.67)))))))\n      + \")\";\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjY2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9jaXZpZGlzLmpzPzc0YmIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odCkge1xuICB0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgdCkpO1xuICByZXR1cm4gXCJyZ2IoXCJcbiAgICAgICsgTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKC00LjU0IC0gdCAqICgzNS4zNCAtIHQgKiAoMjM4MS43MyAtIHQgKiAoNjQwMi43IC0gdCAqICg3MDI0LjcyIC0gdCAqIDI3MTAuNTcpKSkpKSkpICsgXCIsIFwiXG4gICAgICArIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCgzMi40OSArIHQgKiAoMTcwLjczICsgdCAqICg1Mi44MiAtIHQgKiAoMTMxLjQ2IC0gdCAqICgxNzYuNTggLSB0ICogNjcuMzcpKSkpKSkpICsgXCIsIFwiXG4gICAgICArIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCg4MS4yNCArIHQgKiAoNDQyLjM2IC0gdCAqICgyNDgyLjQzIC0gdCAqICg2MTY3LjI0IC0gdCAqICg2NjE0Ljk0IC0gdCAqIDI0NzUuNjcpKSkpKSkpXG4gICAgICArIFwiKVwiO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL2NpdmlkaXMuanNcbi8vIG1vZHVsZSBpZCA9IDI2NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///266\n");

/***/ }),
/* 267 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__ = __webpack_require__(65);\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__[\"a\" /* interpolateCubehelixLong */])(Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(300, 0.5, 0.0), Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(-240, 0.5, 1.0)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjY3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9jdWJlaGVsaXguanM/NzQwNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2N1YmVoZWxpeH0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQge2ludGVycG9sYXRlQ3ViZWhlbGl4TG9uZ30gZnJvbSBcImQzLWludGVycG9sYXRlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGludGVycG9sYXRlQ3ViZWhlbGl4TG9uZyhjdWJlaGVsaXgoMzAwLCAwLjUsIDAuMCksIGN1YmVoZWxpeCgtMjQwLCAwLjUsIDEuMCkpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL2N1YmVoZWxpeC5qc1xuLy8gbW9kdWxlIGlkID0gMjY3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///267\n");

/***/ }),
/* 268 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return warm; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return cool; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__ = __webpack_require__(65);\n\n\n\nvar warm = Object(__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__[\"a\" /* interpolateCubehelixLong */])(Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(-100, 0.75, 0.35), Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(80, 1.50, 0.8));\n\nvar cool = Object(__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__[\"a\" /* interpolateCubehelixLong */])(Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(260, 0.75, 0.35), Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(80, 1.50, 0.8));\n\nvar c = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])();\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjY4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9yYWluYm93LmpzP2U1MjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtjdWJlaGVsaXh9IGZyb20gXCJkMy1jb2xvclwiO1xuaW1wb3J0IHtpbnRlcnBvbGF0ZUN1YmVoZWxpeExvbmd9IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuXG5leHBvcnQgdmFyIHdhcm0gPSBpbnRlcnBvbGF0ZUN1YmVoZWxpeExvbmcoY3ViZWhlbGl4KC0xMDAsIDAuNzUsIDAuMzUpLCBjdWJlaGVsaXgoODAsIDEuNTAsIDAuOCkpO1xuXG5leHBvcnQgdmFyIGNvb2wgPSBpbnRlcnBvbGF0ZUN1YmVoZWxpeExvbmcoY3ViZWhlbGl4KDI2MCwgMC43NSwgMC4zNSksIGN1YmVoZWxpeCg4MCwgMS41MCwgMC44KSk7XG5cbnZhciBjID0gY3ViZWhlbGl4KCk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHQpIHtcbiAgaWYgKHQgPCAwIHx8IHQgPiAxKSB0IC09IE1hdGguZmxvb3IodCk7XG4gIHZhciB0cyA9IE1hdGguYWJzKHQgLSAwLjUpO1xuICBjLmggPSAzNjAgKiB0IC0gMTAwO1xuICBjLnMgPSAxLjUgLSAxLjUgKiB0cztcbiAgYy5sID0gMC44IC0gMC45ICogdHM7XG4gIHJldHVybiBjICsgXCJcIjtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9yYWluYm93LmpzXG4vLyBtb2R1bGUgaWQgPSAyNjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///268\n");

/***/ }),
/* 269 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n\n\nvar c = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"f\" /* rgb */])(),\n    pi_1_3 = Math.PI / 3,\n    pi_2_3 = Math.PI * 2 / 3;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(t) {\n  var x;\n  t = (0.5 - t) * Math.PI;\n  c.r = 255 * (x = Math.sin(t)) * x;\n  c.g = 255 * (x = Math.sin(t + pi_1_3)) * x;\n  c.b = 255 * (x = Math.sin(t + pi_2_3)) * x;\n  return c + \"\";\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjY5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9zaW5lYm93LmpzP2YwNjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtyZ2J9IGZyb20gXCJkMy1jb2xvclwiO1xuXG52YXIgYyA9IHJnYigpLFxuICAgIHBpXzFfMyA9IE1hdGguUEkgLyAzLFxuICAgIHBpXzJfMyA9IE1hdGguUEkgKiAyIC8gMztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odCkge1xuICB2YXIgeDtcbiAgdCA9ICgwLjUgLSB0KSAqIE1hdGguUEk7XG4gIGMuciA9IDI1NSAqICh4ID0gTWF0aC5zaW4odCkpICogeDtcbiAgYy5nID0gMjU1ICogKHggPSBNYXRoLnNpbih0ICsgcGlfMV8zKSkgKiB4O1xuICBjLmIgPSAyNTUgKiAoeCA9IE1hdGguc2luKHQgKyBwaV8yXzMpKSAqIHg7XG4gIHJldHVybiBjICsgXCJcIjtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9zaW5lYm93LmpzXG4vLyBtb2R1bGUgaWQgPSAyNjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///269\n");

/***/ }),
/* 270 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (function(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(34.61 + t * (1172.33 - t * (10793.56 - t * (33300.12 - t * (38394.49 - t * 14825.05))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(23.31 + t * (557.33 + t * (1225.33 - t * (3574.96 - t * (1073.77 + t * 707.56))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(27.2 + t * (3211.1 - t * (15327.97 - t * (27814 - t * (22569.18 - t * 6838.66)))))))\n      + \")\";\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS90dXJiby5qcz9iNWRhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHQpIHtcbiAgdCA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHQpKTtcbiAgcmV0dXJuIFwicmdiKFwiXG4gICAgICArIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCgzNC42MSArIHQgKiAoMTE3Mi4zMyAtIHQgKiAoMTA3OTMuNTYgLSB0ICogKDMzMzAwLjEyIC0gdCAqICgzODM5NC40OSAtIHQgKiAxNDgyNS4wNSkpKSkpKSkgKyBcIiwgXCJcbiAgICAgICsgTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKDIzLjMxICsgdCAqICg1NTcuMzMgKyB0ICogKDEyMjUuMzMgLSB0ICogKDM1NzQuOTYgLSB0ICogKDEwNzMuNzcgKyB0ICogNzA3LjU2KSkpKSkpKSArIFwiLCBcIlxuICAgICAgKyBNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIE1hdGgucm91bmQoMjcuMiArIHQgKiAoMzIxMS4xIC0gdCAqICgxNTMyNy45NyAtIHQgKiAoMjc4MTQgLSB0ICogKDIyNTY5LjE4IC0gdCAqIDY4MzguNjYpKSkpKSkpXG4gICAgICArIFwiKVwiO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL3R1cmJvLmpzXG4vLyBtb2R1bGUgaWQgPSAyNzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///270\n");

/***/ }),
/* 271 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return magma; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return inferno; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return plasma; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ramp(Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\")));\n\nvar magma = ramp(Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nvar inferno = ramp(Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nvar plasma = ramp(Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS92aXJpZGlzLmpzPzg4OTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5cbmZ1bmN0aW9uIHJhbXAocmFuZ2UpIHtcbiAgdmFyIG4gPSByYW5nZS5sZW5ndGg7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIHJhbmdlW01hdGgubWF4KDAsIE1hdGgubWluKG4gLSAxLCBNYXRoLmZsb29yKHQgKiBuKSkpXTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgcmFtcChjb2xvcnMoXCI0NDAxNTQ0NDAyNTY0NTA0NTc0NTA1NTk0NjA3NWE0NjA4NWM0NjBhNWQ0NjBiNWU0NzBkNjA0NzBlNjE0NzEwNjM0NzExNjQ0NzEzNjU0ODE0Njc0ODE2Njg0ODE3Njk0ODE4NmE0ODFhNmM0ODFiNmQ0ODFjNmU0ODFkNmY0ODFmNzA0ODIwNzE0ODIxNzM0ODIzNzQ0ODI0NzU0ODI1NzY0ODI2Nzc0ODI4Nzg0ODI5Nzk0NzJhN2E0NzJjN2E0NzJkN2I0NzJlN2M0NzJmN2Q0NjMwN2U0NjMyN2U0NjMzN2Y0NjM0ODA0NTM1ODE0NTM3ODE0NTM4ODI0NDM5ODM0NDNhODM0NDNiODQ0MzNkODQ0MzNlODU0MjNmODU0MjQwODY0MjQxODY0MTQyODc0MTQ0ODc0MDQ1ODg0MDQ2ODgzZjQ3ODgzZjQ4ODkzZTQ5ODkzZTRhODkzZTRjOGEzZDRkOGEzZDRlOGEzYzRmOGEzYzUwOGIzYjUxOGIzYjUyOGIzYTUzOGIzYTU0OGMzOTU1OGMzOTU2OGMzODU4OGMzODU5OGMzNzVhOGMzNzViOGQzNjVjOGQzNjVkOGQzNTVlOGQzNTVmOGQzNDYwOGQzNDYxOGQzMzYyOGQzMzYzOGQzMjY0OGUzMjY1OGUzMTY2OGUzMTY3OGUzMTY4OGUzMDY5OGUzMDZhOGUyZjZiOGUyZjZjOGUyZTZkOGUyZTZlOGUyZTZmOGUyZDcwOGUyZDcxOGUyYzcxOGUyYzcyOGUyYzczOGUyYjc0OGUyYjc1OGUyYTc2OGUyYTc3OGUyYTc4OGUyOTc5OGUyOTdhOGUyOTdiOGUyODdjOGUyODdkOGUyNzdlOGUyNzdmOGUyNzgwOGUyNjgxOGUyNjgyOGUyNjgyOGUyNTgzOGUyNTg0OGUyNTg1OGUyNDg2OGUyNDg3OGUyMzg4OGUyMzg5OGUyMzhhOGQyMjhiOGQyMjhjOGQyMjhkOGQyMThlOGQyMThmOGQyMTkwOGQyMTkxOGMyMDkyOGMyMDkyOGMyMDkzOGMxZjk0OGMxZjk1OGIxZjk2OGIxZjk3OGIxZjk4OGIxZjk5OGExZjlhOGExZTliOGExZTljODkxZTlkODkxZjllODkxZjlmODgxZmEwODgxZmExODgxZmExODcxZmEyODcyMGEzODYyMGE0ODYyMWE1ODUyMWE2ODUyMmE3ODUyMmE4ODQyM2E5ODMyNGFhODMyNWFiODIyNWFjODIyNmFkODEyN2FkODEyOGFlODAyOWFmN2YyYWIwN2YyY2IxN2UyZGIyN2QyZWIzN2MyZmI0N2MzMWI1N2IzMmI2N2EzNGI2NzkzNWI3NzkzN2I4NzgzOGI5NzczYWJhNzYzYmJiNzUzZGJjNzQzZmJjNzM0MGJkNzI0MmJlNzE0NGJmNzA0NmMwNmY0OGMxNmU0YWMxNmQ0Y2MyNmM0ZWMzNmI1MGM0NmE1MmM1Njk1NGM1Njg1NmM2Njc1OGM3NjU1YWM4NjQ1Y2M4NjM1ZWM5NjI2MGNhNjA2M2NiNWY2NWNiNWU2N2NjNWM2OWNkNWI2Y2NkNWE2ZWNlNTg3MGNmNTc3M2QwNTY3NWQwNTQ3N2QxNTM3YWQxNTE3Y2QyNTA3ZmQzNGU4MWQzNGQ4NGQ0NGI4NmQ1NDk4OWQ1NDg4YmQ2NDY4ZWQ2NDU5MGQ3NDM5M2Q3NDE5NWQ4NDA5OGQ4M2U5YmQ5M2M5ZGQ5M2JhMGRhMzlhMmRhMzdhNWRiMzZhOGRiMzRhYWRjMzJhZGRjMzBiMGRkMmZiMmRkMmRiNWRlMmJiOGRlMjliYWRlMjhiZGRmMjZjMGRmMjVjMmRmMjNjNWUwMjFjOGUwMjBjYWUxMWZjZGUxMWRkMGUxMWNkMmUyMWJkNWUyMWFkOGUyMTlkYWUzMTlkZGUzMThkZmUzMThlMmU0MThlNWU0MTllN2U0MTllYWU1MWFlY2U1MWJlZmU1MWNmMWU1MWRmNGU2MWVmNmU2MjBmOGU2MjFmYmU3MjNmZGU3MjVcIikpO1xuXG5leHBvcnQgdmFyIG1hZ21hID0gcmFtcChjb2xvcnMoXCIwMDAwMDQwMTAwMDUwMTAxMDYwMTAxMDgwMjAxMDkwMjAyMGIwMjAyMGQwMzAzMGYwMzAzMTIwNDA0MTQwNTA0MTYwNjA1MTgwNjA1MWEwNzA2MWMwODA3MWUwOTA3MjAwYTA4MjIwYjA5MjQwYzA5MjYwZDBhMjkwZTBiMmIxMDBiMmQxMTBjMmYxMjBkMzExMzBkMzQxNDBlMzYxNTBlMzgxNjBmM2IxODBmM2QxOTEwM2YxYTEwNDIxYzEwNDQxZDExNDcxZTExNDkyMDExNGIyMTExNGUyMjExNTAyNDEyNTMyNTEyNTUyNzEyNTgyOTExNWEyYTExNWMyYzExNWYyZDExNjEyZjExNjMzMTExNjUzMzEwNjczNDEwNjkzNjEwNmIzODEwNmMzOTBmNmUzYjBmNzAzZDBmNzEzZjBmNzI0MDBmNzQ0MjBmNzU0NDBmNzY0NTEwNzc0NzEwNzg0OTEwNzg0YTEwNzk0YzExN2E0ZTExN2I0ZjEyN2I1MTEyN2M1MjEzN2M1NDEzN2Q1NjE0N2Q1NzE1N2U1OTE1N2U1YTE2N2U1YzE2N2Y1ZDE3N2Y1ZjE4N2Y2MDE4ODA2MjE5ODA2NDFhODA2NTFhODA2NzFiODA2ODFjODE2YTFjODE2YjFkODE2ZDFkODE2ZTFlODE3MDFmODE3MjFmODE3MzIwODE3NTIxODE3NjIxODE3ODIyODE3OTIyODI3YjIzODI3YzIzODI3ZTI0ODI4MDI1ODI4MTI1ODE4MzI2ODE4NDI2ODE4NjI3ODE4ODI3ODE4OTI4ODE4YjI5ODE4YzI5ODE4ZTJhODE5MDJhODE5MTJiODE5MzJiODA5NDJjODA5NjJjODA5ODJkODA5OTJkODA5YjJlN2Y5YzJlN2Y5ZTJmN2ZhMDJmN2ZhMTMwN2VhMzMwN2VhNTMxN2VhNjMxN2RhODMyN2RhYTMzN2RhYjMzN2NhZDM0N2NhZTM0N2JiMDM1N2JiMjM1N2JiMzM2N2FiNTM2N2FiNzM3NzliODM3NzliYTM4NzhiYzM5NzhiZDM5NzdiZjNhNzdjMDNhNzZjMjNiNzVjNDNjNzVjNTNjNzRjNzNkNzNjODNlNzNjYTNlNzJjYzNmNzFjZDQwNzFjZjQwNzBkMDQxNmZkMjQyNmZkMzQzNmVkNTQ0NmRkNjQ1NmNkODQ1NmNkOTQ2NmJkYjQ3NmFkYzQ4NjlkZTQ5NjhkZjRhNjhlMDRjNjdlMjRkNjZlMzRlNjVlNDRmNjRlNTUwNjRlNzUyNjNlODUzNjJlOTU0NjJlYTU2NjFlYjU3NjBlYzU4NjBlZDVhNWZlZTViNWVlZjVkNWVmMDVmNWVmMTYwNWRmMjYyNWRmMjY0NWNmMzY1NWNmNDY3NWNmNDY5NWNmNTZiNWNmNjZjNWNmNjZlNWNmNzcwNWNmNzcyNWNmODc0NWNmODc2NWNmOTc4NWRmOTc5NWRmOTdiNWRmYTdkNWVmYTdmNWVmYTgxNWZmYjgzNWZmYjg1NjBmYjg3NjFmYzg5NjFmYzhhNjJmYzhjNjNmYzhlNjRmYzkwNjVmZDkyNjZmZDk0NjdmZDk2NjhmZDk4NjlmZDlhNmFmZDliNmJmZTlkNmNmZTlmNmRmZWExNmVmZWEzNmZmZWE1NzFmZWE3NzJmZWE5NzNmZWFhNzRmZWFjNzZmZWFlNzdmZWIwNzhmZWIyN2FmZWI0N2JmZWI2N2NmZWI3N2VmZWI5N2ZmZWJiODFmZWJkODJmZWJmODRmZWMxODVmZWMyODdmZWM0ODhmZWM2OGFmZWM4OGNmZWNhOGRmZWNjOGZmZWNkOTBmZWNmOTJmZWQxOTRmZWQzOTVmZWQ1OTdmZWQ3OTlmZWQ4OWFmZGRhOWNmZGRjOWVmZGRlYTBmZGUwYTFmZGUyYTNmZGUzYTVmZGU1YTdmZGU3YTlmZGU5YWFmZGViYWNmY2VjYWVmY2VlYjBmY2YwYjJmY2YyYjRmY2Y0YjZmY2Y2YjhmY2Y3YjlmY2Y5YmJmY2ZiYmRmY2ZkYmZcIikpO1xuXG5leHBvcnQgdmFyIGluZmVybm8gPSByYW1wKGNvbG9ycyhcIjAwMDAwNDAxMDAwNTAxMDEwNjAxMDEwODAyMDEwYTAyMDIwYzAyMDIwZTAzMDIxMDA0MDMxMjA0MDMxNDA1MDQxNzA2MDQxOTA3MDUxYjA4MDUxZDA5MDYxZjBhMDcyMjBiMDcyNDBjMDgyNjBkMDgyOTBlMDkyYjEwMDkyZDExMGEzMDEyMGEzMjE0MGIzNDE1MGIzNzE2MGIzOTE4MGMzYzE5MGMzZTFiMGM0MTFjMGM0MzFlMGM0NTFmMGM0ODIxMGM0YTIzMGM0YzI0MGM0ZjI2MGM1MTI4MGI1MzI5MGI1NTJiMGI1NzJkMGI1OTJmMGE1YjMxMGE1YzMyMGE1ZTM0MGE1ZjM2MDk2MTM4MDk2MjM5MDk2MzNiMDk2NDNkMDk2NTNlMDk2NjQwMGE2NzQyMGE2ODQ0MGE2ODQ1MGE2OTQ3MGI2YTQ5MGI2YTRhMGM2YjRjMGM2YjRkMGQ2YzRmMGQ2YzUxMGU2YzUyMGU2ZDU0MGY2ZDU1MGY2ZDU3MTA2ZTU5MTA2ZTVhMTE2ZTVjMTI2ZTVkMTI2ZTVmMTM2ZTYxMTM2ZTYyMTQ2ZTY0MTU2ZTY1MTU2ZTY3MTY2ZTY5MTY2ZTZhMTc2ZTZjMTg2ZTZkMTg2ZTZmMTk2ZTcxMTk2ZTcyMWE2ZTc0MWE2ZTc1MWI2ZTc3MWM2ZDc4MWM2ZDdhMWQ2ZDdjMWQ2ZDdkMWU2ZDdmMWU2YzgwMWY2YzgyMjA2Yzg0MjA2Yjg1MjE2Yjg3MjE2Yjg4MjI2YThhMjI2YThjMjM2OThkMjM2OThmMjQ2OTkwMjU2ODkyMjU2ODkzMjY2Nzk1MjY2Nzk3Mjc2Njk4Mjc2NjlhMjg2NTliMjk2NDlkMjk2NDlmMmE2M2EwMmE2M2EyMmI2MmEzMmM2MWE1MmM2MGE2MmQ2MGE4MmU1ZmE5MmU1ZWFiMmY1ZWFkMzA1ZGFlMzA1Y2IwMzE1YmIxMzI1YWIzMzI1YWI0MzM1OWI2MzQ1OGI3MzU1N2I5MzU1NmJhMzY1NWJjMzc1NGJkMzg1M2JmMzk1MmMwM2E1MWMxM2E1MGMzM2I0ZmM0M2M0ZWM2M2Q0ZGM3M2U0Y2M4M2Y0YmNhNDA0YWNiNDE0OWNjNDI0OGNlNDM0N2NmNDQ0NmQwNDU0NWQyNDY0NGQzNDc0M2Q0NDg0MmQ1NGE0MWQ3NGIzZmQ4NGMzZWQ5NGQzZGRhNGUzY2RiNTAzYmRkNTEzYWRlNTIzOGRmNTMzN2UwNTUzNmUxNTYzNWUyNTczNGUzNTkzM2U0NWEzMWU1NWMzMGU2NWQyZmU3NWUyZWU4NjAyZGU5NjEyYmVhNjMyYWViNjQyOWViNjYyOGVjNjcyNmVkNjkyNWVlNmEyNGVmNmMyM2VmNmUyMWYwNmYyMGYxNzExZmYxNzMxZGYyNzQxY2YzNzYxYmYzNzgxOWY0NzkxOGY1N2IxN2Y1N2QxNWY2N2UxNGY2ODAxM2Y3ODIxMmY3ODQxMGY4ODUwZmY4ODcwZWY4ODkwY2Y5OGIwYmY5OGMwYWY5OGUwOWZhOTAwOGZhOTIwN2ZhOTQwN2ZiOTYwNmZiOTcwNmZiOTkwNmZiOWIwNmZiOWQwN2ZjOWYwN2ZjYTEwOGZjYTMwOWZjYTUwYWZjYTYwY2ZjYTgwZGZjYWEwZmZjYWMxMWZjYWUxMmZjYjAxNGZjYjIxNmZjYjQxOGZiYjYxYWZiYjgxZGZiYmExZmZiYmMyMWZiYmUyM2ZhYzAyNmZhYzIyOGZhYzQyYWZhYzYyZGY5YzcyZmY5YzkzMmY5Y2IzNWY4Y2QzN2Y4Y2YzYWY3ZDEzZGY3ZDM0MGY2ZDU0M2Y2ZDc0NmY1ZDk0OWY1ZGI0Y2Y0ZGQ0ZmY0ZGY1M2Y0ZTE1NmYzZTM1YWYzZTU1ZGYyZTY2MWYyZTg2NWYyZWE2OWYxZWM2ZGYxZWQ3MWYxZWY3NWYxZjE3OWYyZjI3ZGYyZjQ4MmYzZjU4NmYzZjY4YWY0Zjg4ZWY1Zjk5MmY2ZmE5NmY4ZmI5YWY5ZmM5ZGZhZmRhMWZjZmZhNFwiKSk7XG5cbmV4cG9ydCB2YXIgcGxhc21hID0gcmFtcChjb2xvcnMoXCIwZDA4ODcxMDA3ODgxMzA3ODkxNjA3OGExOTA2OGMxYjA2OGQxZDA2OGUyMDA2OGYyMjA2OTAyNDA2OTEyNjA1OTEyODA1OTIyYTA1OTMyYzA1OTQyZTA1OTUyZjA1OTYzMTA1OTczMzA1OTczNTA0OTgzNzA0OTkzODA0OWEzYTA0OWEzYzA0OWIzZTA0OWMzZjA0OWM0MTA0OWQ0MzAzOWU0NDAzOWU0NjAzOWY0ODAzOWY0OTAzYTA0YjAzYTE0YzAyYTE0ZTAyYTI1MDAyYTI1MTAyYTM1MzAyYTM1NTAyYTQ1NjAxYTQ1ODAxYTQ1OTAxYTU1YjAxYTU1YzAxYTY1ZTAxYTY2MDAxYTY2MTAwYTc2MzAwYTc2NDAwYTc2NjAwYTc2NzAwYTg2OTAwYTg2YTAwYTg2YzAwYTg2ZTAwYTg2ZjAwYTg3MTAwYTg3MjAxYTg3NDAxYTg3NTAxYTg3NzAxYTg3ODAxYTg3YTAyYTg3YjAyYTg3ZDAzYTg3ZTAzYTg4MDA0YTg4MTA0YTc4MzA1YTc4NDA1YTc4NjA2YTY4NzA3YTY4ODA4YTY4YTA5YTU4YjBhYTU4ZDBiYTU4ZTBjYTQ4ZjBkYTQ5MTBlYTM5MjBmYTM5NDEwYTI5NTExYTE5NjEzYTE5ODE0YTA5OTE1OWY5YTE2OWY5YzE3OWU5ZDE4OWQ5ZTE5OWRhMDFhOWNhMTFiOWJhMjFkOWFhMzFlOWFhNTFmOTlhNjIwOThhNzIxOTdhODIyOTZhYTIzOTVhYjI0OTRhYzI2OTRhZDI3OTNhZTI4OTJiMDI5OTFiMTJhOTBiMjJiOGZiMzJjOGViNDJlOGRiNTJmOGNiNjMwOGJiNzMxOGFiODMyODliYTMzODhiYjM0ODhiYzM1ODdiZDM3ODZiZTM4ODViZjM5ODRjMDNhODNjMTNiODJjMjNjODFjMzNkODBjNDNlN2ZjNTQwN2VjNjQxN2RjNzQyN2NjODQzN2JjOTQ0N2FjYTQ1N2FjYjQ2NzljYzQ3NzhjYzQ5NzdjZDRhNzZjZTRiNzVjZjRjNzRkMDRkNzNkMTRlNzJkMjRmNzFkMzUxNzFkNDUyNzBkNTUzNmZkNTU0NmVkNjU1NmRkNzU2NmNkODU3NmJkOTU4NmFkYTVhNmFkYTViNjlkYjVjNjhkYzVkNjdkZDVlNjZkZTVmNjVkZTYxNjRkZjYyNjNlMDYzNjNlMTY0NjJlMjY1NjFlMjY2NjBlMzY4NWZlNDY5NWVlNTZhNWRlNTZiNWRlNjZjNWNlNzZlNWJlNzZmNWFlODcwNTllOTcxNThlOTcyNTdlYTc0NTdlYjc1NTZlYjc2NTVlYzc3NTRlZDc5NTNlZDdhNTJlZTdiNTFlZjdjNTFlZjdlNTBmMDdmNGZmMDgwNGVmMTgxNGRmMTgzNGNmMjg0NGJmMzg1NGJmMzg3NGFmNDg4NDlmNDg5NDhmNThiNDdmNThjNDZmNjhkNDVmNjhmNDRmNzkwNDRmNzkxNDNmNzkzNDJmODk0NDFmODk1NDBmOTk3M2ZmOTk4M2VmOTlhM2VmYTliM2RmYTljM2NmYTllM2JmYjlmM2FmYmExMzlmYmEyMzhmY2EzMzhmY2E1MzdmY2E2MzZmY2E4MzVmY2E5MzRmZGFiMzNmZGFjMzNmZGFlMzJmZGFmMzFmZGIxMzBmZGIyMmZmZGI0MmZmZGI1MmVmZWI3MmRmZWI4MmNmZWJhMmNmZWJiMmJmZWJkMmFmZWJlMmFmZWMwMjlmZGMyMjlmZGMzMjhmZGM1MjdmZGM2MjdmZGM4MjdmZGNhMjZmZGNiMjZmY2NkMjVmY2NlMjVmY2QwMjVmY2QyMjVmYmQzMjRmYmQ1MjRmYmQ3MjRmYWQ4MjRmYWRhMjRmOWRjMjRmOWRkMjVmOGRmMjVmOGUxMjVmN2UyMjVmN2U0MjVmNmU2MjZmNmU4MjZmNWU5MjZmNWViMjdmNGVkMjdmM2VlMjdmM2YwMjdmMmYyMjdmMWY0MjZmMWY1MjVmMGY3MjRmMGY5MjFcIikpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL3ZpcmlkaXMuanNcbi8vIG1vZHVsZSBpZCA9IDI3MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///271\n");

/***/ }),
/* 272 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export triangulate */\n/* unused harmony export flatten */\n/* unused harmony export offsetPolygon */\n/* unused harmony export extrudePolygon */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = extrudePolyline;\n/* unused harmony export extrudeGeoJSON */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_earcut__ = __webpack_require__(273);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_earcut___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_earcut__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__simplify__ = __webpack_require__(274);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math__ = __webpack_require__(275);\n// TODO fitRect x, y are negative?\n// TODO Dimensions\n// TODO bevel=\"top\"|\"bottom\"\n\n\n\n\n\nfunction triangulate(vertices, holes, dimensions=2) {\n    return __WEBPACK_IMPORTED_MODULE_0_earcut___default()(vertices, holes, dimensions);\n};\n\nfunction flatten(data) {\n    return __WEBPACK_IMPORTED_MODULE_0_earcut___default.a.flatten(data);\n}\n\nconst v1 = [];\nconst v2 = [];\nconst v = [];\n\nfunction innerOffsetPolygon(\n    vertices, out, start, end, outStart, offset, miterLimit, close\n) {\n    const checkMiterLimit = miterLimit != null;\n    let outOff = outStart;\n    let indicesMap = null;\n    if (checkMiterLimit) {\n        indicesMap = new Uint32Array(end - start);\n    }\n    for (let i = start; i < end; i++) {\n        const nextIdx = i === end - 1 ? start : i + 1;\n        const prevIdx = i === start ? end - 1 : i - 1;\n        const x1 = vertices[prevIdx * 2];\n        const y1 = vertices[prevIdx * 2 + 1];\n        const x2 = vertices[i * 2];\n        const y2 = vertices[i * 2 + 1];\n        const x3 = vertices[nextIdx * 2];\n        const y3 = vertices[nextIdx * 2 + 1];\n\n        v1[0] = x2 - x1;\n        v1[1] = y2 - y1;\n        v2[0] = x3 - x2;\n        v2[1] = y3 - y2;\n\n        Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"e\" /* v2Normalize */])(v1, v1);\n        Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"e\" /* v2Normalize */])(v2, v2);\n\n        checkMiterLimit && (indicesMap[i] = outOff);\n        if (!close && i === start) {\n            v[0] = v2[1];\n            v[1] = -v2[0];\n            Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"e\" /* v2Normalize */])(v, v);\n            out[outOff * 2] = x2 + v[0] * offset;\n            out[outOff * 2 + 1] = y2 + v[1] * offset;\n            outOff++;\n        }\n        else if (!close && i === end - 1) {\n            v[0] = v1[1];\n            v[1] = -v1[0];\n            Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"e\" /* v2Normalize */])(v, v);\n            out[outOff * 2] = x2 + v[0] * offset;\n            out[outOff * 2 + 1] = y2 + v[1] * offset;\n            outOff++;\n        }\n        else {\n            // PENDING Why using sub will lost the direction info.\n            Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"c\" /* v2Add */])(v, v2, v1);\n            const tmp = v[1];\n            v[1] = -v[0];\n            v[0] = tmp;\n\n            Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"e\" /* v2Normalize */])(v, v);\n\n            const cosA = Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"d\" /* v2Dot */])(v, v2);\n            const sinA = Math.sqrt(1 - cosA * cosA);\n            // PENDING\n            const miter = offset * Math.min(10, 1 / sinA);\n\n            const isCovex = offset * cosA < 0;\n\n            if (checkMiterLimit && (1 / sinA) > miterLimit && isCovex) {\n                const mx = x2 + v[0] * offset;\n                const my = y2 + v[1] * offset;\n                const halfA = Math.acos(sinA) / 2;\n                const dist = Math.tan(halfA) * Math.abs(offset);\n                out[outOff * 2] = mx + v[1] * dist;\n                out[outOff * 2 + 1] = my - v[0] * dist;\n                outOff++;\n                out[outOff * 2] = mx - v[1] * dist;\n                out[outOff * 2 + 1] = my + v[0] * dist;\n                outOff++;\n            }\n            else {\n                out[outOff * 2] = x2 + v[0] * miter;\n                out[outOff * 2 + 1] = y2 + v[1] * miter;\n                outOff++;\n            }\n        }\n    }\n\n    return indicesMap;\n}\n\nfunction offsetPolygon(vertices, holes, offset, miterLimit, close) {\n    const offsetVertices = miterLimit != null ? [] : new Float32Array(vertices.length);\n    const exteriorSize = (holes && holes.length) ? holes[0] : vertices.length / 2;\n\n    innerOffsetPolygon(\n        vertices, offsetVertices, 0, exteriorSize, 0, offset, miterLimit, close, false\n    );\n\n    if (holes) {\n        for (let i = 0; i < holes.length; i++) {\n            const start = holes[i];\n            const end = holes[i + 1] || vertices.length / 2;\n            innerOffsetPolygon(\n                vertices, offsetVertices, start, end,\n                miterLimit != null ? offsetVertices.length / 2 : start,\n                offset, miterLimit, close\n            );\n        }\n    }\n\n    return offsetVertices;\n}\n\nfunction reversePoints(points, stride, start, end) {\n    for (let i = 0; i < Math.floor((end - start) / 2); i++) {\n        for (let j = 0; j < stride; j++) {\n            const a = (i + start) * stride + j;\n            const b = (end - i - 1) * stride + j;\n            const tmp = points[a];\n            points[a] = points[b];\n            points[b] = tmp;\n        }\n    }\n\n    return points;\n}\n\nfunction convertToClockwise(vertices, holes) {\n    let polygonVertexCount = vertices.length / 2;\n    let start = 0;\n    let end = holes && holes.length ? holes[0] : polygonVertexCount;\n    if (Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"a\" /* area */])(vertices, start, end) > 0) {\n        reversePoints(vertices, 2, start, end);\n    }\n    for (let h = 1; h < (holes ? holes.length : 0) + 1; h++) {\n        start = holes[h - 1];\n        end = holes[h] || polygonVertexCount;\n        if (Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"a\" /* area */])(vertices, start, end) < 0) {\n            reversePoints(vertices, 2, start, end);\n        }\n    }\n}\n\nfunction normalizeOpts(opts) {\n\n    opts.depth = opts.depth || 1;\n    opts.bevelSize = opts.bevelSize || 0;\n    opts.bevelSegments = opts.bevelSegments == null ? 2 : opts.bevelSegments;\n    opts.smoothSide = opts.smoothSide || false;\n    opts.smoothBevel = opts.smoothBevel || false;\n    opts.simplify = opts.simplify || 0;\n\n    // Normalize bevel options.\n    if (typeof opts.depth === 'number') {\n        opts.bevelSize = Math.min(!(opts.bevelSegments > 0) ? 0 : opts.bevelSize, opts.depth / 2);\n    }\n    if (!(opts.bevelSize > 0)) {\n        opts.bevelSegments = 0;\n    }\n    opts.bevelSegments = Math.round(opts.bevelSegments);\n\n    const boundingRect = opts.boundingRect;\n    opts.translate = opts.translate || [0, 0];\n    opts.scale = opts.scale || [1, 1];\n    if (opts.fitRect) {\n        let targetX = opts.fitRect.x == null\n            ? (boundingRect.x || 0)\n            : opts.fitRect.x;\n        let targetY = opts.fitRect.y == null\n            ? (boundingRect.y || 0)\n            : opts.fitRect.y;\n        let targetWidth = opts.fitRect.width;\n        let targetHeight = opts.fitRect.height;\n        if (targetWidth == null) {\n            if (targetHeight != null) {\n                targetWidth = targetHeight / boundingRect.height * boundingRect.width;\n            }\n            else {\n                targetWidth = boundingRect.width;\n                targetHeight = boundingRect.height;\n            }\n        }\n        else if (targetHeight == null) {\n            targetHeight = targetWidth / boundingRect.width * boundingRect.height;\n        }\n        opts.scale = [\n            targetWidth / boundingRect.width,\n            targetHeight / boundingRect.height\n        ];\n        opts.translate = [\n            (targetX - boundingRect.x) * opts.scale[0],\n            (targetY - boundingRect.y) * opts.scale[1]\n        ];\n    }\n}\n\nfunction generateNormal(indices, position) {\n\n    function v3Set(p, a, b, c) {\n        p[0] = a; p[1] = b; p[2] = c;\n    }\n\n    const p1 = [];\n    const p2 = [];\n    const p3 = [];\n\n    const v21 = [];\n    const v32 = [];\n\n    const n = [];\n\n    const len = indices.length;\n    const normals = new Float32Array(position.length);\n    for (let f = 0; f < len;) {\n        const i1 = indices[f++] * 3;\n        const i2 = indices[f++] * 3;\n        const i3 = indices[f++] * 3;\n\n        v3Set(p1, position[i1], position[i1 + 1], position[i1 + 2]);\n        v3Set(p2, position[i2], position[i2 + 1], position[i2 + 2]);\n        v3Set(p3, position[i3], position[i3 + 1], position[i3 + 2]);\n\n        Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"h\" /* v3Sub */])(v21, p1, p2);\n        Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"h\" /* v3Sub */])(v32, p2, p3);\n        Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"f\" /* v3Cross */])(n, v21, v32);\n        // Already be weighted by the triangle area\n        for (let i = 0; i < 3; i++) {\n            normals[i1 + i] = normals[i1 + i] + n[i];\n            normals[i2 + i] = normals[i2 + i] + n[i];\n            normals[i3 + i] = normals[i3 + i] + n[i];\n        }\n    }\n\n    for (var i = 0; i < normals.length;) {\n        v3Set(n, normals[i], normals[i+1], normals[i+2]);\n        Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"g\" /* v3Normalize */])(n, n);\n        normals[i++] = n[0];\n        normals[i++] = n[1];\n        normals[i++] = n[2];\n    }\n\n    return normals;\n}\n// 0,0----1,0\n// 0,1----1,1\nconst quadToTriangle = [\n    [0, 0], [1, 0], [1, 1],\n    [0, 0], [1, 1], [0, 1]\n];\n\n// Add side vertices and indices. Include bevel.\nfunction addExtrudeSide(\n    out, {vertices, topVertices, depth, rect}, start, end,\n    cursors, opts\n) {\n    const ringVertexCount = end - start;\n    const splitSide = opts.smoothSide ? 1 : 2;\n    const splitRingVertexCount = ringVertexCount * splitSide;\n\n    const splitBevel = opts.smoothBevel ? 1 : 2;\n    const bevelSize = Math.min(depth / 2, opts.bevelSize);\n    const bevelSegments = opts.bevelSegments;\n    const vertexOffset = cursors.vertex;\n    const size = Math.max(rect.width, rect.height);\n\n    // Side vertices\n    if (bevelSize > 0) {\n\n        const v0 = [0, 0, 1];\n        const v1 = [];\n        const v2 = [0, 0, -1];\n        const v = [];\n\n        let ringCount = 0;\n        let vLen = new Float32Array(ringVertexCount);\n        for (let k = 0; k < 2; k++) {\n            const z = (k === 0 ? (depth - bevelSize) : bevelSize);\n            for (let s = 0; s <= bevelSegments * splitBevel; s++) {\n                let uLen = 0;\n                let prevX;\n                let prevY;\n                for (let i = 0; i < ringVertexCount; i++) {\n\n                    for (let j = 0; j < splitSide; j++) {\n                        // TODO Cache and optimize\n                        let idx = ((i + j) % ringVertexCount + start) * 2;\n                        v1[0] = vertices[idx] - topVertices[idx];\n                        v1[1] = vertices[idx + 1] - topVertices[idx + 1];\n                        v1[2] = 0;\n                        const l = Math.sqrt(v1[0] * v1[0] + v1[1] * v1[1]);\n                        v1[0] /= l;\n                        v1[1] /= l;\n\n                        const t = (Math.floor(s / splitBevel) + (s % splitBevel)) / bevelSegments;\n                        k === 0 ? Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"b\" /* slerp */])(v, v0, v1, t)\n                            : Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"b\" /* slerp */])(v, v1, v2, t);\n\n                        const t2 = k === 0  ? t : 1 - t;\n                        const a = bevelSize * Math.sin(t2 * Math.PI / 2);\n                        const b = l * Math.cos(t2 * Math.PI / 2);\n\n                        // ellipse radius\n                        const r = bevelSize * l / Math.sqrt(a * a + b * b);\n\n                        const x = v[0] * r + topVertices[idx];\n                        const y = v[1] * r + topVertices[idx + 1];\n                        const zz = v[2] * r + z;\n                        out.position[cursors.vertex * 3] = x;\n                        out.position[cursors.vertex * 3 + 1] = y;\n                        out.position[cursors.vertex * 3 + 2] = zz;\n\n                        // TODO Cache and optimize\n                        if (i > 0 || j > 0) {\n                            uLen += Math.sqrt((prevX - x) * (prevX - x) + (prevY - y) * (prevY - y));\n                        }\n                        if (s > 0 || k > 0) {\n                            let tmp = (cursors.vertex - splitRingVertexCount) * 3;\n                            let prevX2 = out.position[tmp];\n                            let prevY2 = out.position[tmp + 1];\n                            let prevZ2 = out.position[tmp + 2];\n\n                            vLen[i] += Math.sqrt(\n                                (prevX2 - x) * (prevX2 - x)\n                                + (prevY2 - y) * (prevY2 - y)\n                                + (prevZ2 - zz) * (prevZ2 - zz)\n                            );\n                        }\n                        out.uv[cursors.vertex * 2] = uLen / size;\n                        out.uv[cursors.vertex * 2 + 1] = vLen[i] / size;\n\n                        prevX = x;\n                        prevY = y;\n                        cursors.vertex++;\n                    }\n\n                    if ((splitBevel > 1 && (s % splitBevel)) || (splitBevel === 1 && s >= 1)) {\n                        for (let f = 0; f < 6; f++) {\n                            const m = (quadToTriangle[f][0] + i * splitSide) % splitRingVertexCount;\n                            const n = quadToTriangle[f][1] + ringCount;\n                            out.indices[cursors.index++] = (n - 1) * splitRingVertexCount + m + vertexOffset;\n                        }\n                    }\n                }\n\n                ringCount++;\n            }\n        }\n    }\n    else {\n        for (let k = 0; k < 2; k++) {\n            const z = k === 0 ? depth - bevelSize : bevelSize;\n            let uLen = 0;\n            let prevX;\n            let prevY;\n            for (let i = 0; i < ringVertexCount; i++) {\n                for (let m = 0; m < splitSide; m++) {\n                    const idx = ((i + m) % ringVertexCount + start) * 2;\n                    const x = vertices[idx];\n                    const y = vertices[idx + 1];\n                    out.position[cursors.vertex * 3] = x;\n                    out.position[cursors.vertex * 3 + 1] = y;\n                    out.position[cursors.vertex * 3 + 2] = z;\n                    if (i > 0 || m > 0) {\n                        uLen += Math.sqrt((prevX - x) * (prevX - x) + (prevY - y) * (prevY - y));\n                    }\n                    out.uv[cursors.vertex * 2] = uLen / size;\n                    out.uv[cursors.vertex * 2 + 1] = z / size;\n                    prevX = x;\n                    prevY = y;\n\n                    cursors.vertex++;\n                }\n            }\n        }\n    }\n    // Connect the side\n    const sideStartRingN = bevelSize > 0 ? (bevelSegments * splitBevel + 1) : 1;\n    for (let i = 0; i < ringVertexCount; i++) {\n        for (let f = 0; f < 6; f++) {\n            const m = (quadToTriangle[f][0] + i * splitSide) % splitRingVertexCount;\n            const n = quadToTriangle[f][1] + sideStartRingN;\n            out.indices[cursors.index++] = (n - 1) * splitRingVertexCount + m + vertexOffset;\n        }\n    }\n}\n\nfunction addTopAndBottom({indices, vertices, topVertices, rect, depth}, out, cursors, opts) {\n    if (vertices.length <= 4) {\n        return;\n    }\n\n    const vertexOffset = cursors.vertex;\n    // Top indices\n    const indicesLen = indices.length;\n    for (let i = 0; i < indicesLen; i++) {\n        out.indices[cursors.index++] = vertexOffset + indices[i];\n    }\n    const size = Math.max(rect.width, rect.height);\n    // Top and bottom vertices\n    for (let k = 0; k < (opts.excludeBottom ? 1 : 2); k++) {\n        for (let i = 0; i < topVertices.length; i += 2) {\n            const x = topVertices[i];\n            const y = topVertices[i + 1];\n            out.position[cursors.vertex * 3] = x;\n            out.position[cursors.vertex * 3 + 1] = y;\n            out.position[cursors.vertex * 3 + 2] = (1 - k) * depth;\n\n            out.uv[cursors.vertex * 2] = (x - rect.x) / size;\n            out.uv[cursors.vertex * 2 + 1] = (y - rect.y) / size;\n            cursors.vertex++;\n        }\n    }\n    // Bottom indices\n    if (!opts.excludeBottom) {\n        const vertexCount = vertices.length / 2;\n        for (let i = 0; i < indicesLen; i += 3) {\n            for (let k = 0; k < 3; k++) {\n                out.indices[cursors.index++] = vertexOffset + vertexCount + indices[i + 2 - k];\n            }\n        }\n    }\n}\n\n\nfunction innerExtrudeTriangulatedPolygon(preparedData, opts) {\n    let indexCount = 0;\n    let vertexCount = 0;\n\n    for (let p = 0; p < preparedData.length; p++) {\n        const {indices, vertices, holes, depth} = preparedData[p];\n        const polygonVertexCount = vertices.length / 2;\n        const bevelSize = Math.min(depth / 2, opts.bevelSize);\n        const bevelSegments = !(bevelSize > 0) ? 0 : opts.bevelSegments;\n\n        indexCount += indices.length * (opts.excludeBottom ? 1 : 2);\n        vertexCount += polygonVertexCount * (opts.excludeBottom ? 1 : 2);\n        const ringCount = 2 + bevelSegments * 2;\n\n        let start = 0;\n        let end = 0;\n        for (let h = 0; h < (holes ? holes.length : 0) + 1; h++) {\n            if (h === 0) {\n                end = holes && holes.length ? holes[0] : polygonVertexCount;\n            }\n            else {\n                start = holes[h - 1];\n                end = holes[h] || polygonVertexCount;\n            }\n\n            indexCount += (end - start) * 6 * (ringCount - 1);\n\n            const sideRingVertexCount = (end - start) * (opts.smoothSide ? 1 : 2);\n            vertexCount += sideRingVertexCount * ringCount\n                // Double the bevel vertex number if not smooth\n                + (!opts.smoothBevel ? bevelSegments * sideRingVertexCount * 2 : 0);\n        }\n    }\n\n    const data = {\n        position: new Float32Array(vertexCount * 3),\n        indices: new (vertexCount > 0xffff ? Uint32Array : Uint16Array)(indexCount),\n        uv: new Float32Array(vertexCount * 2)\n    };\n\n    const cursors = {\n        vertex: 0, index: 0\n    };\n\n    for (let d = 0; d < preparedData.length; d++) {\n        addTopAndBottom(preparedData[d], data, cursors, opts);\n    }\n\n    for (let d = 0; d < preparedData.length; d++) {\n        const {holes, vertices} = preparedData[d];\n        const topVertexCount = vertices.length / 2;\n\n        let start = 0;\n        let end = (holes && holes.length) ? holes[0] : topVertexCount;\n        // Add exterior\n        addExtrudeSide(data, preparedData[d], start, end, cursors, opts);\n        // Add holes\n        if (holes) {\n            for (let h = 0; h < holes.length; h++) {\n                start = holes[h];\n                end = holes[h + 1] || topVertexCount;\n                addExtrudeSide(data, preparedData[d], start, end, cursors, opts);\n            }\n        }\n    }\n\n    // Wrap uv\n    for (let i = 0; i < data.uv.length; i++) {\n        const val = data.uv[i];\n        if (val > 0 && Math.round(val) === val) {\n            data.uv[i] = 1;\n        }\n        else {\n            data.uv[i] = val % 1;\n        }\n    }\n\n    data.normal = generateNormal(data.indices, data.position);\n    // PENDING\n    data.boundingRect = preparedData[0] && preparedData[0].rect;\n\n    return data;\n}\n\nfunction convertPolylineToTriangulatedPolygon(polyline, polylineIdx, opts) {\n    const lineWidth = opts.lineWidth;\n    const pointCount = polyline.length;\n    const points = new Float32Array(pointCount * 2);\n    const translate = opts.translate || [0, 0];\n    const scale = opts.scale || [1, 1];\n    for (let i = 0, k = 0; i < pointCount; i++) {\n        points[k++] = polyline[i][0] * scale[0] + translate[0];\n        points[k++] = polyline[i][1] * scale[1] + translate[1];\n    }\n\n    if (Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"a\" /* area */])(points, 0, pointCount) < 0) {\n        reversePoints(points, 2, 0, pointCount);\n    }\n\n    const insidePoints = [];\n    const outsidePoints = [];\n    const miterLimit = opts.miterLimit;\n    const outsideIndicesMap = innerOffsetPolygon(\n        points, outsidePoints, 0, pointCount, 0, -lineWidth / 2, miterLimit, false\n    );\n    reversePoints(points, 2, 0, pointCount);\n    const insideIndicesMap = innerOffsetPolygon(\n        points, insidePoints, 0, pointCount, 0, -lineWidth / 2, miterLimit, false\n    );\n\n    const polygonVertexCount = (insidePoints.length + outsidePoints.length) / 2;\n    const polygonVertices = new Float32Array(polygonVertexCount * 2);\n\n    let offset = 0;\n    const outsidePointCount = outsidePoints.length / 2;\n    for (let i = 0; i < outsidePoints.length; i++) {\n        polygonVertices[offset++] = outsidePoints[i];\n    }\n    for (let i = 0; i < insidePoints.length; i++) {\n        polygonVertices[offset++] = insidePoints[i];\n    }\n\n    // Built indices\n    const indices = new (polygonVertexCount > 0xffff ? Uint32Array : Uint16Array)(\n        ((pointCount - 1) * 2 + (polygonVertexCount - pointCount * 2)) * 3\n    );\n    let off = 0;\n    for (let i = 0; i < pointCount - 1; i++) {\n        const i2 = i + 1;\n        indices[off++] = outsidePointCount - 1 - outsideIndicesMap[i];\n        indices[off++] = outsidePointCount - 1 - outsideIndicesMap[i] - 1;\n        indices[off++] = insideIndicesMap[i] + 1 + outsidePointCount;\n\n        indices[off++] = outsidePointCount - 1 - outsideIndicesMap[i];\n        indices[off++] = insideIndicesMap[i] + 1 + outsidePointCount;\n        indices[off++] = insideIndicesMap[i] + outsidePointCount;\n\n        if (insideIndicesMap[i2] - insideIndicesMap[i] === 2) {\n            indices[off++] = insideIndicesMap[i] + 2 + outsidePointCount;\n            indices[off++] = insideIndicesMap[i] + 1 + outsidePointCount;\n            indices[off++] = outsidePointCount - outsideIndicesMap[i2] - 1;\n        }\n        else if (outsideIndicesMap[i2] - outsideIndicesMap[i] === 2) {\n            indices[off++] = insideIndicesMap[i2] + outsidePointCount;\n            indices[off++] = outsidePointCount - 1 - (outsideIndicesMap[i] + 1);\n            indices[off++] = outsidePointCount - 1 - (outsideIndicesMap[i] + 2);\n        }\n    }\n\n    const topVertices = opts.bevelSize > 0\n        ? offsetPolygon(polygonVertices, [], opts.bevelSize, null, true) : polygonVertices;\n    const boundingRect = opts.boundingRect;\n    return {\n        vertices: polygonVertices,\n        indices,\n        topVertices,\n        rect: {\n            x: boundingRect.x * scale[0] + translate[0],\n            y: boundingRect.y * scale[1] + translate[1],\n            width: boundingRect.width * scale[0],\n            height: boundingRect.height * scale[1],\n        },\n        depth: typeof opts.depth === 'function' ? opts.depth(polylineIdx) : opts.depth,\n        holes: []\n    };\n}\n\nfunction removeClosePointsOfPolygon(polygon, epsilon) {\n    const newPolygon = [];\n    for (let k  = 0; k < polygon.length; k++) {\n        const points = polygon[k];\n        const newPoints = [];\n        const len = points.length;\n        let x1 = points[len - 1][0];\n        let y1 = points[len - 1][1];\n        let dist = 0;\n        for (let i = 0; i < len; i++) {\n            let x2 = points[i][0];\n            let y2 = points[i][1];\n            const dx = x2 - x1;\n            const dy = y2 - y1;\n            dist += Math.sqrt(dx * dx + dy * dy);\n            if (dist > epsilon) {\n                newPoints.push(points[i]);\n                dist = 0;\n            }\n            x1 = x2;\n            y1 = y2;\n        }\n        if (newPoints.length >= 3) {\n            newPolygon.push(newPoints);\n        }\n    }\n    return newPolygon.length > 0 ? newPolygon : null;\n}\n\nfunction simplifyPolygon(polygon, tolerance) {\n    const newPolygon = [];\n    for (let k  = 0; k < polygon.length; k++) {\n        let points = polygon[k];\n        points = Object(__WEBPACK_IMPORTED_MODULE_1__simplify__[\"a\" /* default */])(points, tolerance, true);\n        if (points.length >= 3) {\n            newPolygon.push(points);\n        }\n    }\n    return newPolygon.length > 0 ? newPolygon : null;\n}\n/**\n *\n * @param {Array} polygons Polygons array that match GeoJSON MultiPolygon geometry.\n * @param {Object} [opts]\n * @param {number|Function} [opts.depth]\n * @param {number} [opts.bevelSize = 0]\n * @param {number} [opts.bevelSegments = 2]\n * @param {number} [opts.simplify = 0]\n * @param {boolean} [opts.smoothSide = false]\n * @param {boolean} [opts.smoothBevel = false]\n * @param {boolean} [opts.excludeBottom = false]\n * @param {Object} [opts.fitRect] translate and scale will be ignored if fitRect is set\n * @param {Array} [opts.translate]\n * @param {Array} [opts.scale]\n *\n * @return {Object} {indices, position, uv, normal, boundingRect}\n */\nfunction extrudePolygon(polygons, opts) {\n\n    opts = Object.assign({}, opts);\n\n    const min = [Infinity, Infinity];\n    const max = [-Infinity, -Infinity];\n    for (let i = 0; i < polygons.length; i++) {\n        updateBoundingRect(polygons[i][0], min, max);\n    }\n    opts.boundingRect = opts.boundingRect || {\n        x: min[0], y: min[1], width: max[0] - min[0], height: max[1] - min[1]\n    };\n\n    normalizeOpts(opts);\n\n    const preparedData = [];\n    const translate = opts.translate || [0, 0];\n    const scale = opts.scale || [1, 1];\n    const boundingRect = opts.boundingRect;\n    const transformdRect = {\n        x: boundingRect.x * scale[0] + translate[0],\n        y: boundingRect.y * scale[1] + translate[1],\n        width: boundingRect.width * scale[0],\n        height: boundingRect.height * scale[1],\n    };\n\n    const epsilon = Math.min(\n        boundingRect.width, boundingRect.height\n    ) / 1e5;\n    for (let i = 0; i < polygons.length; i++) {\n        let newPolygon = removeClosePointsOfPolygon(polygons[i], epsilon);\n        if (!newPolygon) {\n            continue;\n        }\n        const simplifyTolerance = opts.simplify / Math.max(scale[0], scale[1]);\n        if (simplifyTolerance > 0) {\n            newPolygon = simplifyPolygon(newPolygon, simplifyTolerance);\n        }\n        if (!newPolygon) {\n            continue;\n        }\n\n        const {vertices, holes, dimensions} = __WEBPACK_IMPORTED_MODULE_0_earcut___default.a.flatten(newPolygon);\n\n        for (let k = 0; k < vertices.length;) {\n            vertices[k] = vertices[k++] * scale[0] + translate[0];\n            vertices[k] = vertices[k++] * scale[1] + translate[1];\n        }\n\n        convertToClockwise(vertices, holes);\n\n        if (dimensions !== 2) {\n            throw new Error('Only 2D polygon points are supported');\n        }\n        const topVertices = opts.bevelSize > 0\n            ? offsetPolygon(vertices, holes, opts.bevelSize, null, true) : vertices;\n        const indices = triangulate(topVertices, holes, dimensions);\n        preparedData.push({\n            indices,\n            vertices,\n            topVertices,\n            holes,\n            rect: transformdRect,\n            depth: typeof opts.depth === 'function' ? opts.depth(i) : opts.depth\n        });\n    }\n    return innerExtrudeTriangulatedPolygon(preparedData, opts);\n};\n\n/**\n *\n * @param {Array} polylines Polylines array that match GeoJSON MultiLineString geometry.\n * @param {Object} [opts]\n * @param {number} [opts.depth]\n * @param {number} [opts.bevelSize = 0]\n * @param {number} [opts.bevelSegments = 2]\n * @param {number} [opts.simplify = 0]\n * @param {boolean} [opts.smoothSide = false]\n * @param {boolean} [opts.smoothBevel = false]\n * @param {boolean} [opts.excludeBottom = false]\n * @param {boolean} [opts.lineWidth = 1]\n * @param {boolean} [opts.miterLimit = 2]\n * @param {Object} [opts.fitRect] translate and scale will be ignored if fitRect is set\n * @param {Array} [opts.translate]\n * @param {Array} [opts.scale]\n * @param {Object} [opts.boundingRect]\n * @return {Object} {indices, position, uv, normal, boundingRect}\n */\nfunction extrudePolyline(polylines, opts) {\n\n    opts = Object.assign({}, opts);\n\n    const min = [Infinity, Infinity];\n    const max = [-Infinity, -Infinity];\n    for (let i = 0; i < polylines.length; i++) {\n        updateBoundingRect(polylines[i], min, max);\n    }\n    opts.boundingRect = opts.boundingRect || {\n        x: min[0], y: min[1], width: max[0] - min[0], height: max[1] - min[1]\n    };\n\n    normalizeOpts(opts);\n    const scale = opts.scale || [1, 1];\n\n    if (opts.lineWidth == null) {\n        opts.lineWidth = 1;\n    }\n    if (opts.miterLimit == null) {\n        opts.miterLimit = 2;\n    }\n    const preparedData = [];\n    // Extrude polyline to polygon\n    for (let i = 0; i < polylines.length; i++) {\n        let newPolyline = polylines[i];\n        const simplifyTolerance = opts.simplify / Math.max(scale[0], scale[1]);\n        if (simplifyTolerance > 0) {\n            newPolyline = Object(__WEBPACK_IMPORTED_MODULE_1__simplify__[\"a\" /* default */])(newPolyline, simplifyTolerance, true);\n        }\n        preparedData.push(convertPolylineToTriangulatedPolygon(newPolyline, i, opts));\n    }\n\n    return innerExtrudeTriangulatedPolygon(preparedData, opts);\n}\n\nfunction updateBoundingRect(points, min, max) {\n    for (let i = 0; i < points.length; i++) {\n        min[0] = Math.min(points[i][0], min[0]);\n        min[1] = Math.min(points[i][1], min[1]);\n        max[0] = Math.max(points[i][0], max[0]);\n        max[1] = Math.max(points[i][1], max[1]);\n    }\n}\n\n/**\n *\n * @param {Object} geojson\n * @param {Object} [opts]\n * @param {number} [opts.depth]\n * @param {number} [opts.bevelSize = 0]\n * @param {number} [opts.bevelSegments = 2]\n * @param {number} [opts.simplify = 0]\n * @param {boolean} [opts.smoothSide = false]\n * @param {boolean} [opts.smoothBevel = false]\n * @param {boolean} [opts.excludeBottom = false]\n * @param {boolean} [opts.lineWidth = 1]\n * @param {boolean} [opts.miterLimit = 2]\n * @param {Object} [opts.fitRect] translate and scale will be ignored if fitRect is set\n * @param {Array} [opts.translate]\n * @param {Array} [opts.scale]\n * @param {Object} [opts.boundingRect]\n * @return {Object} {polyline: {indices, position, uv, normal}, polygon: {indices, position, uv, normal}}\n */\n\n // TODO Not merge feature\nfunction extrudeGeoJSON(geojson, opts) {\n\n    opts = Object.assign({}, opts);\n\n    const polylines = [];\n    const polygons = [];\n\n    const polylineFeatureIndices = [];\n    const polygonFeatureIndices = [];\n\n    const min = [Infinity, Infinity];\n    const max = [-Infinity, -Infinity];\n\n    for (let i = 0; i < geojson.features.length; i++) {\n        const feature = geojson.features[i];\n        const geometry = feature.geometry;\n        if (geometry && geometry.coordinates) {\n            switch (geometry.type) {\n                case 'LineString':\n                    polylines.push(geometry.coordinates);\n                    polylineFeatureIndices.push(i);\n                    updateBoundingRect(geometry.coordinates, min, max);\n                    break;\n                case 'MultiLineString':\n                    for (let k = 0; k < geometry.coordinates.length; k++) {\n                        polylines.push(geometry.coordinates[k]);\n                        polylineFeatureIndices.push(i);\n                        updateBoundingRect(geometry.coordinates[k], min, max);\n                    }\n                    break;\n                case 'Polygon':\n                    polygons.push(geometry.coordinates);\n                    polygonFeatureIndices.push(i);\n                    updateBoundingRect(geometry.coordinates[0], min, max);\n                    break;\n                case 'MultiPolygon':\n                    for (let k = 0; k < geometry.coordinates.length; k++) {\n                        polygons.push(geometry.coordinates[k]);\n                        polygonFeatureIndices.push(i);\n                        updateBoundingRect(geometry.coordinates[k][0], min, max);\n                    }\n                    break;\n            }\n        }\n    }\n\n    opts.boundingRect = opts.boundingRect || {\n        x: min[0], y: min[1], width: max[0] - min[0], height: max[1] - min[1]\n    };\n\n    const originalDepth = opts.depth;\n    return {\n        polyline: extrudePolyline(polylines, Object.assign(opts, {\n            depth: function (idx) {\n                if (typeof originalDepth === 'function') {\n                    return originalDepth(\n                        geojson.features[polylineFeatureIndices[idx]]\n                    );\n                }\n                return originalDepth;\n            }\n        })),\n        polygon: extrudePolygon(polygons, Object.assign(opts, {\n            depth: function (idx) {\n                if (typeof originalDepth === 'function') {\n                    return originalDepth(\n                        geojson.features[polygonFeatureIndices[idx]]\n                    );\n                }\n                return originalDepth;\n            }\n        }))\n    };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2dlb21ldHJ5LWV4dHJ1ZGUvc3JjL21haW4uanM/MzdmNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUT0RPIGZpdFJlY3QgeCwgeSBhcmUgbmVnYXRpdmU/XG4vLyBUT0RPIERpbWVuc2lvbnNcbi8vIFRPRE8gYmV2ZWw9XCJ0b3BcInxcImJvdHRvbVwiXG5cbmltcG9ydCBlYXJjdXQgZnJvbSAnZWFyY3V0JztcbmltcG9ydCBkb1NpbXBsaWZ5IGZyb20gJy4vc2ltcGxpZnknO1xuaW1wb3J0IHtcbiAgICBzbGVycCwgdjJOb3JtYWxpemUsIHYyRG90LCB2MkFkZCwgYXJlYSxcbiAgICB2M05vcm1hbGl6ZSwgdjNTdWIsIHYzQ3Jvc3Ncbn0gZnJvbSAnLi9tYXRoJztcblxuZXhwb3J0IGZ1bmN0aW9uIHRyaWFuZ3VsYXRlKHZlcnRpY2VzLCBob2xlcywgZGltZW5zaW9ucz0yKSB7XG4gICAgcmV0dXJuIGVhcmN1dCh2ZXJ0aWNlcywgaG9sZXMsIGRpbWVuc2lvbnMpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGZsYXR0ZW4oZGF0YSkge1xuICAgIHJldHVybiBlYXJjdXQuZmxhdHRlbihkYXRhKTtcbn1cblxuY29uc3QgdjEgPSBbXTtcbmNvbnN0IHYyID0gW107XG5jb25zdCB2ID0gW107XG5cbmZ1bmN0aW9uIGlubmVyT2Zmc2V0UG9seWdvbihcbiAgICB2ZXJ0aWNlcywgb3V0LCBzdGFydCwgZW5kLCBvdXRTdGFydCwgb2Zmc2V0LCBtaXRlckxpbWl0LCBjbG9zZVxuKSB7XG4gICAgY29uc3QgY2hlY2tNaXRlckxpbWl0ID0gbWl0ZXJMaW1pdCAhPSBudWxsO1xuICAgIGxldCBvdXRPZmYgPSBvdXRTdGFydDtcbiAgICBsZXQgaW5kaWNlc01hcCA9IG51bGw7XG4gICAgaWYgKGNoZWNrTWl0ZXJMaW1pdCkge1xuICAgICAgICBpbmRpY2VzTWFwID0gbmV3IFVpbnQzMkFycmF5KGVuZCAtIHN0YXJ0KTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgICAgY29uc3QgbmV4dElkeCA9IGkgPT09IGVuZCAtIDEgPyBzdGFydCA6IGkgKyAxO1xuICAgICAgICBjb25zdCBwcmV2SWR4ID0gaSA9PT0gc3RhcnQgPyBlbmQgLSAxIDogaSAtIDE7XG4gICAgICAgIGNvbnN0IHgxID0gdmVydGljZXNbcHJldklkeCAqIDJdO1xuICAgICAgICBjb25zdCB5MSA9IHZlcnRpY2VzW3ByZXZJZHggKiAyICsgMV07XG4gICAgICAgIGNvbnN0IHgyID0gdmVydGljZXNbaSAqIDJdO1xuICAgICAgICBjb25zdCB5MiA9IHZlcnRpY2VzW2kgKiAyICsgMV07XG4gICAgICAgIGNvbnN0IHgzID0gdmVydGljZXNbbmV4dElkeCAqIDJdO1xuICAgICAgICBjb25zdCB5MyA9IHZlcnRpY2VzW25leHRJZHggKiAyICsgMV07XG5cbiAgICAgICAgdjFbMF0gPSB4MiAtIHgxO1xuICAgICAgICB2MVsxXSA9IHkyIC0geTE7XG4gICAgICAgIHYyWzBdID0geDMgLSB4MjtcbiAgICAgICAgdjJbMV0gPSB5MyAtIHkyO1xuXG4gICAgICAgIHYyTm9ybWFsaXplKHYxLCB2MSk7XG4gICAgICAgIHYyTm9ybWFsaXplKHYyLCB2Mik7XG5cbiAgICAgICAgY2hlY2tNaXRlckxpbWl0ICYmIChpbmRpY2VzTWFwW2ldID0gb3V0T2ZmKTtcbiAgICAgICAgaWYgKCFjbG9zZSAmJiBpID09PSBzdGFydCkge1xuICAgICAgICAgICAgdlswXSA9IHYyWzFdO1xuICAgICAgICAgICAgdlsxXSA9IC12MlswXTtcbiAgICAgICAgICAgIHYyTm9ybWFsaXplKHYsIHYpO1xuICAgICAgICAgICAgb3V0W291dE9mZiAqIDJdID0geDIgKyB2WzBdICogb2Zmc2V0O1xuICAgICAgICAgICAgb3V0W291dE9mZiAqIDIgKyAxXSA9IHkyICsgdlsxXSAqIG9mZnNldDtcbiAgICAgICAgICAgIG91dE9mZisrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFjbG9zZSAmJiBpID09PSBlbmQgLSAxKSB7XG4gICAgICAgICAgICB2WzBdID0gdjFbMV07XG4gICAgICAgICAgICB2WzFdID0gLXYxWzBdO1xuICAgICAgICAgICAgdjJOb3JtYWxpemUodiwgdik7XG4gICAgICAgICAgICBvdXRbb3V0T2ZmICogMl0gPSB4MiArIHZbMF0gKiBvZmZzZXQ7XG4gICAgICAgICAgICBvdXRbb3V0T2ZmICogMiArIDFdID0geTIgKyB2WzFdICogb2Zmc2V0O1xuICAgICAgICAgICAgb3V0T2ZmKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBQRU5ESU5HIFdoeSB1c2luZyBzdWIgd2lsbCBsb3N0IHRoZSBkaXJlY3Rpb24gaW5mby5cbiAgICAgICAgICAgIHYyQWRkKHYsIHYyLCB2MSk7XG4gICAgICAgICAgICBjb25zdCB0bXAgPSB2WzFdO1xuICAgICAgICAgICAgdlsxXSA9IC12WzBdO1xuICAgICAgICAgICAgdlswXSA9IHRtcDtcblxuICAgICAgICAgICAgdjJOb3JtYWxpemUodiwgdik7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvc0EgPSB2MkRvdCh2LCB2Mik7XG4gICAgICAgICAgICBjb25zdCBzaW5BID0gTWF0aC5zcXJ0KDEgLSBjb3NBICogY29zQSk7XG4gICAgICAgICAgICAvLyBQRU5ESU5HXG4gICAgICAgICAgICBjb25zdCBtaXRlciA9IG9mZnNldCAqIE1hdGgubWluKDEwLCAxIC8gc2luQSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzQ292ZXggPSBvZmZzZXQgKiBjb3NBIDwgMDtcblxuICAgICAgICAgICAgaWYgKGNoZWNrTWl0ZXJMaW1pdCAmJiAoMSAvIHNpbkEpID4gbWl0ZXJMaW1pdCAmJiBpc0NvdmV4KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbXggPSB4MiArIHZbMF0gKiBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgbXkgPSB5MiArIHZbMV0gKiBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFsZkEgPSBNYXRoLmFjb3Moc2luQSkgLyAyO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLnRhbihoYWxmQSkgKiBNYXRoLmFicyhvZmZzZXQpO1xuICAgICAgICAgICAgICAgIG91dFtvdXRPZmYgKiAyXSA9IG14ICsgdlsxXSAqIGRpc3Q7XG4gICAgICAgICAgICAgICAgb3V0W291dE9mZiAqIDIgKyAxXSA9IG15IC0gdlswXSAqIGRpc3Q7XG4gICAgICAgICAgICAgICAgb3V0T2ZmKys7XG4gICAgICAgICAgICAgICAgb3V0W291dE9mZiAqIDJdID0gbXggLSB2WzFdICogZGlzdDtcbiAgICAgICAgICAgICAgICBvdXRbb3V0T2ZmICogMiArIDFdID0gbXkgKyB2WzBdICogZGlzdDtcbiAgICAgICAgICAgICAgICBvdXRPZmYrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtvdXRPZmYgKiAyXSA9IHgyICsgdlswXSAqIG1pdGVyO1xuICAgICAgICAgICAgICAgIG91dFtvdXRPZmYgKiAyICsgMV0gPSB5MiArIHZbMV0gKiBtaXRlcjtcbiAgICAgICAgICAgICAgICBvdXRPZmYrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpbmRpY2VzTWFwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb2Zmc2V0UG9seWdvbih2ZXJ0aWNlcywgaG9sZXMsIG9mZnNldCwgbWl0ZXJMaW1pdCwgY2xvc2UpIHtcbiAgICBjb25zdCBvZmZzZXRWZXJ0aWNlcyA9IG1pdGVyTGltaXQgIT0gbnVsbCA/IFtdIDogbmV3IEZsb2F0MzJBcnJheSh2ZXJ0aWNlcy5sZW5ndGgpO1xuICAgIGNvbnN0IGV4dGVyaW9yU2l6ZSA9IChob2xlcyAmJiBob2xlcy5sZW5ndGgpID8gaG9sZXNbMF0gOiB2ZXJ0aWNlcy5sZW5ndGggLyAyO1xuXG4gICAgaW5uZXJPZmZzZXRQb2x5Z29uKFxuICAgICAgICB2ZXJ0aWNlcywgb2Zmc2V0VmVydGljZXMsIDAsIGV4dGVyaW9yU2l6ZSwgMCwgb2Zmc2V0LCBtaXRlckxpbWl0LCBjbG9zZSwgZmFsc2VcbiAgICApO1xuXG4gICAgaWYgKGhvbGVzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaG9sZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gaG9sZXNbaV07XG4gICAgICAgICAgICBjb25zdCBlbmQgPSBob2xlc1tpICsgMV0gfHwgdmVydGljZXMubGVuZ3RoIC8gMjtcbiAgICAgICAgICAgIGlubmVyT2Zmc2V0UG9seWdvbihcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlcywgb2Zmc2V0VmVydGljZXMsIHN0YXJ0LCBlbmQsXG4gICAgICAgICAgICAgICAgbWl0ZXJMaW1pdCAhPSBudWxsID8gb2Zmc2V0VmVydGljZXMubGVuZ3RoIC8gMiA6IHN0YXJ0LFxuICAgICAgICAgICAgICAgIG9mZnNldCwgbWl0ZXJMaW1pdCwgY2xvc2VcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb2Zmc2V0VmVydGljZXM7XG59XG5cbmZ1bmN0aW9uIHJldmVyc2VQb2ludHMocG9pbnRzLCBzdHJpZGUsIHN0YXJ0LCBlbmQpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGguZmxvb3IoKGVuZCAtIHN0YXJ0KSAvIDIpOyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzdHJpZGU7IGorKykge1xuICAgICAgICAgICAgY29uc3QgYSA9IChpICsgc3RhcnQpICogc3RyaWRlICsgajtcbiAgICAgICAgICAgIGNvbnN0IGIgPSAoZW5kIC0gaSAtIDEpICogc3RyaWRlICsgajtcbiAgICAgICAgICAgIGNvbnN0IHRtcCA9IHBvaW50c1thXTtcbiAgICAgICAgICAgIHBvaW50c1thXSA9IHBvaW50c1tiXTtcbiAgICAgICAgICAgIHBvaW50c1tiXSA9IHRtcDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwb2ludHM7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRUb0Nsb2Nrd2lzZSh2ZXJ0aWNlcywgaG9sZXMpIHtcbiAgICBsZXQgcG9seWdvblZlcnRleENvdW50ID0gdmVydGljZXMubGVuZ3RoIC8gMjtcbiAgICBsZXQgc3RhcnQgPSAwO1xuICAgIGxldCBlbmQgPSBob2xlcyAmJiBob2xlcy5sZW5ndGggPyBob2xlc1swXSA6IHBvbHlnb25WZXJ0ZXhDb3VudDtcbiAgICBpZiAoYXJlYSh2ZXJ0aWNlcywgc3RhcnQsIGVuZCkgPiAwKSB7XG4gICAgICAgIHJldmVyc2VQb2ludHModmVydGljZXMsIDIsIHN0YXJ0LCBlbmQpO1xuICAgIH1cbiAgICBmb3IgKGxldCBoID0gMTsgaCA8IChob2xlcyA/IGhvbGVzLmxlbmd0aCA6IDApICsgMTsgaCsrKSB7XG4gICAgICAgIHN0YXJ0ID0gaG9sZXNbaCAtIDFdO1xuICAgICAgICBlbmQgPSBob2xlc1toXSB8fCBwb2x5Z29uVmVydGV4Q291bnQ7XG4gICAgICAgIGlmIChhcmVhKHZlcnRpY2VzLCBzdGFydCwgZW5kKSA8IDApIHtcbiAgICAgICAgICAgIHJldmVyc2VQb2ludHModmVydGljZXMsIDIsIHN0YXJ0LCBlbmQpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVPcHRzKG9wdHMpIHtcblxuICAgIG9wdHMuZGVwdGggPSBvcHRzLmRlcHRoIHx8IDE7XG4gICAgb3B0cy5iZXZlbFNpemUgPSBvcHRzLmJldmVsU2l6ZSB8fCAwO1xuICAgIG9wdHMuYmV2ZWxTZWdtZW50cyA9IG9wdHMuYmV2ZWxTZWdtZW50cyA9PSBudWxsID8gMiA6IG9wdHMuYmV2ZWxTZWdtZW50cztcbiAgICBvcHRzLnNtb290aFNpZGUgPSBvcHRzLnNtb290aFNpZGUgfHwgZmFsc2U7XG4gICAgb3B0cy5zbW9vdGhCZXZlbCA9IG9wdHMuc21vb3RoQmV2ZWwgfHwgZmFsc2U7XG4gICAgb3B0cy5zaW1wbGlmeSA9IG9wdHMuc2ltcGxpZnkgfHwgMDtcblxuICAgIC8vIE5vcm1hbGl6ZSBiZXZlbCBvcHRpb25zLlxuICAgIGlmICh0eXBlb2Ygb3B0cy5kZXB0aCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgb3B0cy5iZXZlbFNpemUgPSBNYXRoLm1pbighKG9wdHMuYmV2ZWxTZWdtZW50cyA+IDApID8gMCA6IG9wdHMuYmV2ZWxTaXplLCBvcHRzLmRlcHRoIC8gMik7XG4gICAgfVxuICAgIGlmICghKG9wdHMuYmV2ZWxTaXplID4gMCkpIHtcbiAgICAgICAgb3B0cy5iZXZlbFNlZ21lbnRzID0gMDtcbiAgICB9XG4gICAgb3B0cy5iZXZlbFNlZ21lbnRzID0gTWF0aC5yb3VuZChvcHRzLmJldmVsU2VnbWVudHMpO1xuXG4gICAgY29uc3QgYm91bmRpbmdSZWN0ID0gb3B0cy5ib3VuZGluZ1JlY3Q7XG4gICAgb3B0cy50cmFuc2xhdGUgPSBvcHRzLnRyYW5zbGF0ZSB8fCBbMCwgMF07XG4gICAgb3B0cy5zY2FsZSA9IG9wdHMuc2NhbGUgfHwgWzEsIDFdO1xuICAgIGlmIChvcHRzLmZpdFJlY3QpIHtcbiAgICAgICAgbGV0IHRhcmdldFggPSBvcHRzLmZpdFJlY3QueCA9PSBudWxsXG4gICAgICAgICAgICA/IChib3VuZGluZ1JlY3QueCB8fCAwKVxuICAgICAgICAgICAgOiBvcHRzLmZpdFJlY3QueDtcbiAgICAgICAgbGV0IHRhcmdldFkgPSBvcHRzLmZpdFJlY3QueSA9PSBudWxsXG4gICAgICAgICAgICA/IChib3VuZGluZ1JlY3QueSB8fCAwKVxuICAgICAgICAgICAgOiBvcHRzLmZpdFJlY3QueTtcbiAgICAgICAgbGV0IHRhcmdldFdpZHRoID0gb3B0cy5maXRSZWN0LndpZHRoO1xuICAgICAgICBsZXQgdGFyZ2V0SGVpZ2h0ID0gb3B0cy5maXRSZWN0LmhlaWdodDtcbiAgICAgICAgaWYgKHRhcmdldFdpZHRoID09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXRIZWlnaHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRhcmdldFdpZHRoID0gdGFyZ2V0SGVpZ2h0IC8gYm91bmRpbmdSZWN0LmhlaWdodCAqIGJvdW5kaW5nUmVjdC53aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhcmdldFdpZHRoID0gYm91bmRpbmdSZWN0LndpZHRoO1xuICAgICAgICAgICAgICAgIHRhcmdldEhlaWdodCA9IGJvdW5kaW5nUmVjdC5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGFyZ2V0SGVpZ2h0ID09IG51bGwpIHtcbiAgICAgICAgICAgIHRhcmdldEhlaWdodCA9IHRhcmdldFdpZHRoIC8gYm91bmRpbmdSZWN0LndpZHRoICogYm91bmRpbmdSZWN0LmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBvcHRzLnNjYWxlID0gW1xuICAgICAgICAgICAgdGFyZ2V0V2lkdGggLyBib3VuZGluZ1JlY3Qud2lkdGgsXG4gICAgICAgICAgICB0YXJnZXRIZWlnaHQgLyBib3VuZGluZ1JlY3QuaGVpZ2h0XG4gICAgICAgIF07XG4gICAgICAgIG9wdHMudHJhbnNsYXRlID0gW1xuICAgICAgICAgICAgKHRhcmdldFggLSBib3VuZGluZ1JlY3QueCkgKiBvcHRzLnNjYWxlWzBdLFxuICAgICAgICAgICAgKHRhcmdldFkgLSBib3VuZGluZ1JlY3QueSkgKiBvcHRzLnNjYWxlWzFdXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZU5vcm1hbChpbmRpY2VzLCBwb3NpdGlvbikge1xuXG4gICAgZnVuY3Rpb24gdjNTZXQocCwgYSwgYiwgYykge1xuICAgICAgICBwWzBdID0gYTsgcFsxXSA9IGI7IHBbMl0gPSBjO1xuICAgIH1cblxuICAgIGNvbnN0IHAxID0gW107XG4gICAgY29uc3QgcDIgPSBbXTtcbiAgICBjb25zdCBwMyA9IFtdO1xuXG4gICAgY29uc3QgdjIxID0gW107XG4gICAgY29uc3QgdjMyID0gW107XG5cbiAgICBjb25zdCBuID0gW107XG5cbiAgICBjb25zdCBsZW4gPSBpbmRpY2VzLmxlbmd0aDtcbiAgICBjb25zdCBub3JtYWxzID0gbmV3IEZsb2F0MzJBcnJheShwb3NpdGlvbi5sZW5ndGgpO1xuICAgIGZvciAobGV0IGYgPSAwOyBmIDwgbGVuOykge1xuICAgICAgICBjb25zdCBpMSA9IGluZGljZXNbZisrXSAqIDM7XG4gICAgICAgIGNvbnN0IGkyID0gaW5kaWNlc1tmKytdICogMztcbiAgICAgICAgY29uc3QgaTMgPSBpbmRpY2VzW2YrK10gKiAzO1xuXG4gICAgICAgIHYzU2V0KHAxLCBwb3NpdGlvbltpMV0sIHBvc2l0aW9uW2kxICsgMV0sIHBvc2l0aW9uW2kxICsgMl0pO1xuICAgICAgICB2M1NldChwMiwgcG9zaXRpb25baTJdLCBwb3NpdGlvbltpMiArIDFdLCBwb3NpdGlvbltpMiArIDJdKTtcbiAgICAgICAgdjNTZXQocDMsIHBvc2l0aW9uW2kzXSwgcG9zaXRpb25baTMgKyAxXSwgcG9zaXRpb25baTMgKyAyXSk7XG5cbiAgICAgICAgdjNTdWIodjIxLCBwMSwgcDIpO1xuICAgICAgICB2M1N1Yih2MzIsIHAyLCBwMyk7XG4gICAgICAgIHYzQ3Jvc3MobiwgdjIxLCB2MzIpO1xuICAgICAgICAvLyBBbHJlYWR5IGJlIHdlaWdodGVkIGJ5IHRoZSB0cmlhbmdsZSBhcmVhXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgICAgICBub3JtYWxzW2kxICsgaV0gPSBub3JtYWxzW2kxICsgaV0gKyBuW2ldO1xuICAgICAgICAgICAgbm9ybWFsc1tpMiArIGldID0gbm9ybWFsc1tpMiArIGldICsgbltpXTtcbiAgICAgICAgICAgIG5vcm1hbHNbaTMgKyBpXSA9IG5vcm1hbHNbaTMgKyBpXSArIG5baV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vcm1hbHMubGVuZ3RoOykge1xuICAgICAgICB2M1NldChuLCBub3JtYWxzW2ldLCBub3JtYWxzW2krMV0sIG5vcm1hbHNbaSsyXSk7XG4gICAgICAgIHYzTm9ybWFsaXplKG4sIG4pO1xuICAgICAgICBub3JtYWxzW2krK10gPSBuWzBdO1xuICAgICAgICBub3JtYWxzW2krK10gPSBuWzFdO1xuICAgICAgICBub3JtYWxzW2krK10gPSBuWzJdO1xuICAgIH1cblxuICAgIHJldHVybiBub3JtYWxzO1xufVxuLy8gMCwwLS0tLTEsMFxuLy8gMCwxLS0tLTEsMVxuY29uc3QgcXVhZFRvVHJpYW5nbGUgPSBbXG4gICAgWzAsIDBdLCBbMSwgMF0sIFsxLCAxXSxcbiAgICBbMCwgMF0sIFsxLCAxXSwgWzAsIDFdXG5dO1xuXG4vLyBBZGQgc2lkZSB2ZXJ0aWNlcyBhbmQgaW5kaWNlcy4gSW5jbHVkZSBiZXZlbC5cbmZ1bmN0aW9uIGFkZEV4dHJ1ZGVTaWRlKFxuICAgIG91dCwge3ZlcnRpY2VzLCB0b3BWZXJ0aWNlcywgZGVwdGgsIHJlY3R9LCBzdGFydCwgZW5kLFxuICAgIGN1cnNvcnMsIG9wdHNcbikge1xuICAgIGNvbnN0IHJpbmdWZXJ0ZXhDb3VudCA9IGVuZCAtIHN0YXJ0O1xuICAgIGNvbnN0IHNwbGl0U2lkZSA9IG9wdHMuc21vb3RoU2lkZSA/IDEgOiAyO1xuICAgIGNvbnN0IHNwbGl0UmluZ1ZlcnRleENvdW50ID0gcmluZ1ZlcnRleENvdW50ICogc3BsaXRTaWRlO1xuXG4gICAgY29uc3Qgc3BsaXRCZXZlbCA9IG9wdHMuc21vb3RoQmV2ZWwgPyAxIDogMjtcbiAgICBjb25zdCBiZXZlbFNpemUgPSBNYXRoLm1pbihkZXB0aCAvIDIsIG9wdHMuYmV2ZWxTaXplKTtcbiAgICBjb25zdCBiZXZlbFNlZ21lbnRzID0gb3B0cy5iZXZlbFNlZ21lbnRzO1xuICAgIGNvbnN0IHZlcnRleE9mZnNldCA9IGN1cnNvcnMudmVydGV4O1xuICAgIGNvbnN0IHNpemUgPSBNYXRoLm1heChyZWN0LndpZHRoLCByZWN0LmhlaWdodCk7XG5cbiAgICAvLyBTaWRlIHZlcnRpY2VzXG4gICAgaWYgKGJldmVsU2l6ZSA+IDApIHtcblxuICAgICAgICBjb25zdCB2MCA9IFswLCAwLCAxXTtcbiAgICAgICAgY29uc3QgdjEgPSBbXTtcbiAgICAgICAgY29uc3QgdjIgPSBbMCwgMCwgLTFdO1xuICAgICAgICBjb25zdCB2ID0gW107XG5cbiAgICAgICAgbGV0IHJpbmdDb3VudCA9IDA7XG4gICAgICAgIGxldCB2TGVuID0gbmV3IEZsb2F0MzJBcnJheShyaW5nVmVydGV4Q291bnQpO1xuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IDI7IGsrKykge1xuICAgICAgICAgICAgY29uc3QgeiA9IChrID09PSAwID8gKGRlcHRoIC0gYmV2ZWxTaXplKSA6IGJldmVsU2l6ZSk7XG4gICAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8PSBiZXZlbFNlZ21lbnRzICogc3BsaXRCZXZlbDsgcysrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHVMZW4gPSAwO1xuICAgICAgICAgICAgICAgIGxldCBwcmV2WDtcbiAgICAgICAgICAgICAgICBsZXQgcHJldlk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByaW5nVmVydGV4Q291bnQ7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc3BsaXRTaWRlOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gQ2FjaGUgYW5kIG9wdGltaXplXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaWR4ID0gKChpICsgaikgJSByaW5nVmVydGV4Q291bnQgKyBzdGFydCkgKiAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdjFbMF0gPSB2ZXJ0aWNlc1tpZHhdIC0gdG9wVmVydGljZXNbaWR4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYxWzFdID0gdmVydGljZXNbaWR4ICsgMV0gLSB0b3BWZXJ0aWNlc1tpZHggKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYxWzJdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGwgPSBNYXRoLnNxcnQodjFbMF0gKiB2MVswXSArIHYxWzFdICogdjFbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdjFbMF0gLz0gbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYxWzFdIC89IGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAoTWF0aC5mbG9vcihzIC8gc3BsaXRCZXZlbCkgKyAocyAlIHNwbGl0QmV2ZWwpKSAvIGJldmVsU2VnbWVudHM7XG4gICAgICAgICAgICAgICAgICAgICAgICBrID09PSAwID8gc2xlcnAodiwgdjAsIHYxLCB0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2xlcnAodiwgdjEsIHYyLCB0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdDIgPSBrID09PSAwICA/IHQgOiAxIC0gdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBiZXZlbFNpemUgKiBNYXRoLnNpbih0MiAqIE1hdGguUEkgLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBsICogTWF0aC5jb3ModDIgKiBNYXRoLlBJIC8gMik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsbGlwc2UgcmFkaXVzXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gYmV2ZWxTaXplICogbCAvIE1hdGguc3FydChhICogYSArIGIgKiBiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IHZbMF0gKiByICsgdG9wVmVydGljZXNbaWR4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSB2WzFdICogciArIHRvcFZlcnRpY2VzW2lkeCArIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgenogPSB2WzJdICogciArIHo7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXQucG9zaXRpb25bY3Vyc29ycy52ZXJ0ZXggKiAzXSA9IHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXQucG9zaXRpb25bY3Vyc29ycy52ZXJ0ZXggKiAzICsgMV0gPSB5O1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0LnBvc2l0aW9uW2N1cnNvcnMudmVydGV4ICogMyArIDJdID0geno7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gQ2FjaGUgYW5kIG9wdGltaXplXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDAgfHwgaiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1TGVuICs9IE1hdGguc3FydCgocHJldlggLSB4KSAqIChwcmV2WCAtIHgpICsgKHByZXZZIC0geSkgKiAocHJldlkgLSB5KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocyA+IDAgfHwgayA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG1wID0gKGN1cnNvcnMudmVydGV4IC0gc3BsaXRSaW5nVmVydGV4Q291bnQpICogMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJldlgyID0gb3V0LnBvc2l0aW9uW3RtcF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHByZXZZMiA9IG91dC5wb3NpdGlvblt0bXAgKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJldloyID0gb3V0LnBvc2l0aW9uW3RtcCArIDJdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdkxlbltpXSArPSBNYXRoLnNxcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2WDIgLSB4KSAqIChwcmV2WDIgLSB4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChwcmV2WTIgLSB5KSAqIChwcmV2WTIgLSB5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChwcmV2WjIgLSB6eikgKiAocHJldloyIC0genopXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG91dC51dltjdXJzb3JzLnZlcnRleCAqIDJdID0gdUxlbiAvIHNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXQudXZbY3Vyc29ycy52ZXJ0ZXggKiAyICsgMV0gPSB2TGVuW2ldIC8gc2l6ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlggPSB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlkgPSB5O1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29ycy52ZXJ0ZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICgoc3BsaXRCZXZlbCA+IDEgJiYgKHMgJSBzcGxpdEJldmVsKSkgfHwgKHNwbGl0QmV2ZWwgPT09IDEgJiYgcyA+PSAxKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZiA9IDA7IGYgPCA2OyBmKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtID0gKHF1YWRUb1RyaWFuZ2xlW2ZdWzBdICsgaSAqIHNwbGl0U2lkZSkgJSBzcGxpdFJpbmdWZXJ0ZXhDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gcXVhZFRvVHJpYW5nbGVbZl1bMV0gKyByaW5nQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0LmluZGljZXNbY3Vyc29ycy5pbmRleCsrXSA9IChuIC0gMSkgKiBzcGxpdFJpbmdWZXJ0ZXhDb3VudCArIG0gKyB2ZXJ0ZXhPZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByaW5nQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCAyOyBrKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHogPSBrID09PSAwID8gZGVwdGggLSBiZXZlbFNpemUgOiBiZXZlbFNpemU7XG4gICAgICAgICAgICBsZXQgdUxlbiA9IDA7XG4gICAgICAgICAgICBsZXQgcHJldlg7XG4gICAgICAgICAgICBsZXQgcHJldlk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJpbmdWZXJ0ZXhDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbSA9IDA7IG0gPCBzcGxpdFNpZGU7IG0rKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHggPSAoKGkgKyBtKSAlIHJpbmdWZXJ0ZXhDb3VudCArIHN0YXJ0KSAqIDI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHggPSB2ZXJ0aWNlc1tpZHhdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB5ID0gdmVydGljZXNbaWR4ICsgMV07XG4gICAgICAgICAgICAgICAgICAgIG91dC5wb3NpdGlvbltjdXJzb3JzLnZlcnRleCAqIDNdID0geDtcbiAgICAgICAgICAgICAgICAgICAgb3V0LnBvc2l0aW9uW2N1cnNvcnMudmVydGV4ICogMyArIDFdID0geTtcbiAgICAgICAgICAgICAgICAgICAgb3V0LnBvc2l0aW9uW2N1cnNvcnMudmVydGV4ICogMyArIDJdID0gejtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiAwIHx8IG0gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1TGVuICs9IE1hdGguc3FydCgocHJldlggLSB4KSAqIChwcmV2WCAtIHgpICsgKHByZXZZIC0geSkgKiAocHJldlkgLSB5KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb3V0LnV2W2N1cnNvcnMudmVydGV4ICogMl0gPSB1TGVuIC8gc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgb3V0LnV2W2N1cnNvcnMudmVydGV4ICogMiArIDFdID0geiAvIHNpemU7XG4gICAgICAgICAgICAgICAgICAgIHByZXZYID0geDtcbiAgICAgICAgICAgICAgICAgICAgcHJldlkgPSB5O1xuXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcnMudmVydGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENvbm5lY3QgdGhlIHNpZGVcbiAgICBjb25zdCBzaWRlU3RhcnRSaW5nTiA9IGJldmVsU2l6ZSA+IDAgPyAoYmV2ZWxTZWdtZW50cyAqIHNwbGl0QmV2ZWwgKyAxKSA6IDE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByaW5nVmVydGV4Q291bnQ7IGkrKykge1xuICAgICAgICBmb3IgKGxldCBmID0gMDsgZiA8IDY7IGYrKykge1xuICAgICAgICAgICAgY29uc3QgbSA9IChxdWFkVG9UcmlhbmdsZVtmXVswXSArIGkgKiBzcGxpdFNpZGUpICUgc3BsaXRSaW5nVmVydGV4Q291bnQ7XG4gICAgICAgICAgICBjb25zdCBuID0gcXVhZFRvVHJpYW5nbGVbZl1bMV0gKyBzaWRlU3RhcnRSaW5nTjtcbiAgICAgICAgICAgIG91dC5pbmRpY2VzW2N1cnNvcnMuaW5kZXgrK10gPSAobiAtIDEpICogc3BsaXRSaW5nVmVydGV4Q291bnQgKyBtICsgdmVydGV4T2Zmc2V0O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRUb3BBbmRCb3R0b20oe2luZGljZXMsIHZlcnRpY2VzLCB0b3BWZXJ0aWNlcywgcmVjdCwgZGVwdGh9LCBvdXQsIGN1cnNvcnMsIG9wdHMpIHtcbiAgICBpZiAodmVydGljZXMubGVuZ3RoIDw9IDQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHZlcnRleE9mZnNldCA9IGN1cnNvcnMudmVydGV4O1xuICAgIC8vIFRvcCBpbmRpY2VzXG4gICAgY29uc3QgaW5kaWNlc0xlbiA9IGluZGljZXMubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5kaWNlc0xlbjsgaSsrKSB7XG4gICAgICAgIG91dC5pbmRpY2VzW2N1cnNvcnMuaW5kZXgrK10gPSB2ZXJ0ZXhPZmZzZXQgKyBpbmRpY2VzW2ldO1xuICAgIH1cbiAgICBjb25zdCBzaXplID0gTWF0aC5tYXgocmVjdC53aWR0aCwgcmVjdC5oZWlnaHQpO1xuICAgIC8vIFRvcCBhbmQgYm90dG9tIHZlcnRpY2VzXG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCAob3B0cy5leGNsdWRlQm90dG9tID8gMSA6IDIpOyBrKyspIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3BWZXJ0aWNlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgY29uc3QgeCA9IHRvcFZlcnRpY2VzW2ldO1xuICAgICAgICAgICAgY29uc3QgeSA9IHRvcFZlcnRpY2VzW2kgKyAxXTtcbiAgICAgICAgICAgIG91dC5wb3NpdGlvbltjdXJzb3JzLnZlcnRleCAqIDNdID0geDtcbiAgICAgICAgICAgIG91dC5wb3NpdGlvbltjdXJzb3JzLnZlcnRleCAqIDMgKyAxXSA9IHk7XG4gICAgICAgICAgICBvdXQucG9zaXRpb25bY3Vyc29ycy52ZXJ0ZXggKiAzICsgMl0gPSAoMSAtIGspICogZGVwdGg7XG5cbiAgICAgICAgICAgIG91dC51dltjdXJzb3JzLnZlcnRleCAqIDJdID0gKHggLSByZWN0LngpIC8gc2l6ZTtcbiAgICAgICAgICAgIG91dC51dltjdXJzb3JzLnZlcnRleCAqIDIgKyAxXSA9ICh5IC0gcmVjdC55KSAvIHNpemU7XG4gICAgICAgICAgICBjdXJzb3JzLnZlcnRleCsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEJvdHRvbSBpbmRpY2VzXG4gICAgaWYgKCFvcHRzLmV4Y2x1ZGVCb3R0b20pIHtcbiAgICAgICAgY29uc3QgdmVydGV4Q291bnQgPSB2ZXJ0aWNlcy5sZW5ndGggLyAyO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluZGljZXNMZW47IGkgKz0gMykge1xuICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCAzOyBrKyspIHtcbiAgICAgICAgICAgICAgICBvdXQuaW5kaWNlc1tjdXJzb3JzLmluZGV4KytdID0gdmVydGV4T2Zmc2V0ICsgdmVydGV4Q291bnQgKyBpbmRpY2VzW2kgKyAyIC0ga107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuZnVuY3Rpb24gaW5uZXJFeHRydWRlVHJpYW5ndWxhdGVkUG9seWdvbihwcmVwYXJlZERhdGEsIG9wdHMpIHtcbiAgICBsZXQgaW5kZXhDb3VudCA9IDA7XG4gICAgbGV0IHZlcnRleENvdW50ID0gMDtcblxuICAgIGZvciAobGV0IHAgPSAwOyBwIDwgcHJlcGFyZWREYXRhLmxlbmd0aDsgcCsrKSB7XG4gICAgICAgIGNvbnN0IHtpbmRpY2VzLCB2ZXJ0aWNlcywgaG9sZXMsIGRlcHRofSA9IHByZXBhcmVkRGF0YVtwXTtcbiAgICAgICAgY29uc3QgcG9seWdvblZlcnRleENvdW50ID0gdmVydGljZXMubGVuZ3RoIC8gMjtcbiAgICAgICAgY29uc3QgYmV2ZWxTaXplID0gTWF0aC5taW4oZGVwdGggLyAyLCBvcHRzLmJldmVsU2l6ZSk7XG4gICAgICAgIGNvbnN0IGJldmVsU2VnbWVudHMgPSAhKGJldmVsU2l6ZSA+IDApID8gMCA6IG9wdHMuYmV2ZWxTZWdtZW50cztcblxuICAgICAgICBpbmRleENvdW50ICs9IGluZGljZXMubGVuZ3RoICogKG9wdHMuZXhjbHVkZUJvdHRvbSA/IDEgOiAyKTtcbiAgICAgICAgdmVydGV4Q291bnQgKz0gcG9seWdvblZlcnRleENvdW50ICogKG9wdHMuZXhjbHVkZUJvdHRvbSA/IDEgOiAyKTtcbiAgICAgICAgY29uc3QgcmluZ0NvdW50ID0gMiArIGJldmVsU2VnbWVudHMgKiAyO1xuXG4gICAgICAgIGxldCBzdGFydCA9IDA7XG4gICAgICAgIGxldCBlbmQgPSAwO1xuICAgICAgICBmb3IgKGxldCBoID0gMDsgaCA8IChob2xlcyA/IGhvbGVzLmxlbmd0aCA6IDApICsgMTsgaCsrKSB7XG4gICAgICAgICAgICBpZiAoaCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGVuZCA9IGhvbGVzICYmIGhvbGVzLmxlbmd0aCA/IGhvbGVzWzBdIDogcG9seWdvblZlcnRleENvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBob2xlc1toIC0gMV07XG4gICAgICAgICAgICAgICAgZW5kID0gaG9sZXNbaF0gfHwgcG9seWdvblZlcnRleENvdW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbmRleENvdW50ICs9IChlbmQgLSBzdGFydCkgKiA2ICogKHJpbmdDb3VudCAtIDEpO1xuXG4gICAgICAgICAgICBjb25zdCBzaWRlUmluZ1ZlcnRleENvdW50ID0gKGVuZCAtIHN0YXJ0KSAqIChvcHRzLnNtb290aFNpZGUgPyAxIDogMik7XG4gICAgICAgICAgICB2ZXJ0ZXhDb3VudCArPSBzaWRlUmluZ1ZlcnRleENvdW50ICogcmluZ0NvdW50XG4gICAgICAgICAgICAgICAgLy8gRG91YmxlIHRoZSBiZXZlbCB2ZXJ0ZXggbnVtYmVyIGlmIG5vdCBzbW9vdGhcbiAgICAgICAgICAgICAgICArICghb3B0cy5zbW9vdGhCZXZlbCA/IGJldmVsU2VnbWVudHMgKiBzaWRlUmluZ1ZlcnRleENvdW50ICogMiA6IDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgcG9zaXRpb246IG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQgKiAzKSxcbiAgICAgICAgaW5kaWNlczogbmV3ICh2ZXJ0ZXhDb3VudCA+IDB4ZmZmZiA/IFVpbnQzMkFycmF5IDogVWludDE2QXJyYXkpKGluZGV4Q291bnQpLFxuICAgICAgICB1djogbmV3IEZsb2F0MzJBcnJheSh2ZXJ0ZXhDb3VudCAqIDIpXG4gICAgfTtcblxuICAgIGNvbnN0IGN1cnNvcnMgPSB7XG4gICAgICAgIHZlcnRleDogMCwgaW5kZXg6IDBcbiAgICB9O1xuXG4gICAgZm9yIChsZXQgZCA9IDA7IGQgPCBwcmVwYXJlZERhdGEubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgYWRkVG9wQW5kQm90dG9tKHByZXBhcmVkRGF0YVtkXSwgZGF0YSwgY3Vyc29ycywgb3B0cyk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgZCA9IDA7IGQgPCBwcmVwYXJlZERhdGEubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgY29uc3Qge2hvbGVzLCB2ZXJ0aWNlc30gPSBwcmVwYXJlZERhdGFbZF07XG4gICAgICAgIGNvbnN0IHRvcFZlcnRleENvdW50ID0gdmVydGljZXMubGVuZ3RoIC8gMjtcblxuICAgICAgICBsZXQgc3RhcnQgPSAwO1xuICAgICAgICBsZXQgZW5kID0gKGhvbGVzICYmIGhvbGVzLmxlbmd0aCkgPyBob2xlc1swXSA6IHRvcFZlcnRleENvdW50O1xuICAgICAgICAvLyBBZGQgZXh0ZXJpb3JcbiAgICAgICAgYWRkRXh0cnVkZVNpZGUoZGF0YSwgcHJlcGFyZWREYXRhW2RdLCBzdGFydCwgZW5kLCBjdXJzb3JzLCBvcHRzKTtcbiAgICAgICAgLy8gQWRkIGhvbGVzXG4gICAgICAgIGlmIChob2xlcykge1xuICAgICAgICAgICAgZm9yIChsZXQgaCA9IDA7IGggPCBob2xlcy5sZW5ndGg7IGgrKykge1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0gaG9sZXNbaF07XG4gICAgICAgICAgICAgICAgZW5kID0gaG9sZXNbaCArIDFdIHx8IHRvcFZlcnRleENvdW50O1xuICAgICAgICAgICAgICAgIGFkZEV4dHJ1ZGVTaWRlKGRhdGEsIHByZXBhcmVkRGF0YVtkXSwgc3RhcnQsIGVuZCwgY3Vyc29ycywgb3B0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXcmFwIHV2XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLnV2Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IGRhdGEudXZbaV07XG4gICAgICAgIGlmICh2YWwgPiAwICYmIE1hdGgucm91bmQodmFsKSA9PT0gdmFsKSB7XG4gICAgICAgICAgICBkYXRhLnV2W2ldID0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEudXZbaV0gPSB2YWwgJSAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGF0YS5ub3JtYWwgPSBnZW5lcmF0ZU5vcm1hbChkYXRhLmluZGljZXMsIGRhdGEucG9zaXRpb24pO1xuICAgIC8vIFBFTkRJTkdcbiAgICBkYXRhLmJvdW5kaW5nUmVjdCA9IHByZXBhcmVkRGF0YVswXSAmJiBwcmVwYXJlZERhdGFbMF0ucmVjdDtcblxuICAgIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0UG9seWxpbmVUb1RyaWFuZ3VsYXRlZFBvbHlnb24ocG9seWxpbmUsIHBvbHlsaW5lSWR4LCBvcHRzKSB7XG4gICAgY29uc3QgbGluZVdpZHRoID0gb3B0cy5saW5lV2lkdGg7XG4gICAgY29uc3QgcG9pbnRDb3VudCA9IHBvbHlsaW5lLmxlbmd0aDtcbiAgICBjb25zdCBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KHBvaW50Q291bnQgKiAyKTtcbiAgICBjb25zdCB0cmFuc2xhdGUgPSBvcHRzLnRyYW5zbGF0ZSB8fCBbMCwgMF07XG4gICAgY29uc3Qgc2NhbGUgPSBvcHRzLnNjYWxlIHx8IFsxLCAxXTtcbiAgICBmb3IgKGxldCBpID0gMCwgayA9IDA7IGkgPCBwb2ludENvdW50OyBpKyspIHtcbiAgICAgICAgcG9pbnRzW2srK10gPSBwb2x5bGluZVtpXVswXSAqIHNjYWxlWzBdICsgdHJhbnNsYXRlWzBdO1xuICAgICAgICBwb2ludHNbaysrXSA9IHBvbHlsaW5lW2ldWzFdICogc2NhbGVbMV0gKyB0cmFuc2xhdGVbMV07XG4gICAgfVxuXG4gICAgaWYgKGFyZWEocG9pbnRzLCAwLCBwb2ludENvdW50KSA8IDApIHtcbiAgICAgICAgcmV2ZXJzZVBvaW50cyhwb2ludHMsIDIsIDAsIHBvaW50Q291bnQpO1xuICAgIH1cblxuICAgIGNvbnN0IGluc2lkZVBvaW50cyA9IFtdO1xuICAgIGNvbnN0IG91dHNpZGVQb2ludHMgPSBbXTtcbiAgICBjb25zdCBtaXRlckxpbWl0ID0gb3B0cy5taXRlckxpbWl0O1xuICAgIGNvbnN0IG91dHNpZGVJbmRpY2VzTWFwID0gaW5uZXJPZmZzZXRQb2x5Z29uKFxuICAgICAgICBwb2ludHMsIG91dHNpZGVQb2ludHMsIDAsIHBvaW50Q291bnQsIDAsIC1saW5lV2lkdGggLyAyLCBtaXRlckxpbWl0LCBmYWxzZVxuICAgICk7XG4gICAgcmV2ZXJzZVBvaW50cyhwb2ludHMsIDIsIDAsIHBvaW50Q291bnQpO1xuICAgIGNvbnN0IGluc2lkZUluZGljZXNNYXAgPSBpbm5lck9mZnNldFBvbHlnb24oXG4gICAgICAgIHBvaW50cywgaW5zaWRlUG9pbnRzLCAwLCBwb2ludENvdW50LCAwLCAtbGluZVdpZHRoIC8gMiwgbWl0ZXJMaW1pdCwgZmFsc2VcbiAgICApO1xuXG4gICAgY29uc3QgcG9seWdvblZlcnRleENvdW50ID0gKGluc2lkZVBvaW50cy5sZW5ndGggKyBvdXRzaWRlUG9pbnRzLmxlbmd0aCkgLyAyO1xuICAgIGNvbnN0IHBvbHlnb25WZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkocG9seWdvblZlcnRleENvdW50ICogMik7XG5cbiAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICBjb25zdCBvdXRzaWRlUG9pbnRDb3VudCA9IG91dHNpZGVQb2ludHMubGVuZ3RoIC8gMjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dHNpZGVQb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcG9seWdvblZlcnRpY2VzW29mZnNldCsrXSA9IG91dHNpZGVQb2ludHNbaV07XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5zaWRlUG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHBvbHlnb25WZXJ0aWNlc1tvZmZzZXQrK10gPSBpbnNpZGVQb2ludHNbaV07XG4gICAgfVxuXG4gICAgLy8gQnVpbHQgaW5kaWNlc1xuICAgIGNvbnN0IGluZGljZXMgPSBuZXcgKHBvbHlnb25WZXJ0ZXhDb3VudCA+IDB4ZmZmZiA/IFVpbnQzMkFycmF5IDogVWludDE2QXJyYXkpKFxuICAgICAgICAoKHBvaW50Q291bnQgLSAxKSAqIDIgKyAocG9seWdvblZlcnRleENvdW50IC0gcG9pbnRDb3VudCAqIDIpKSAqIDNcbiAgICApO1xuICAgIGxldCBvZmYgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRDb3VudCAtIDE7IGkrKykge1xuICAgICAgICBjb25zdCBpMiA9IGkgKyAxO1xuICAgICAgICBpbmRpY2VzW29mZisrXSA9IG91dHNpZGVQb2ludENvdW50IC0gMSAtIG91dHNpZGVJbmRpY2VzTWFwW2ldO1xuICAgICAgICBpbmRpY2VzW29mZisrXSA9IG91dHNpZGVQb2ludENvdW50IC0gMSAtIG91dHNpZGVJbmRpY2VzTWFwW2ldIC0gMTtcbiAgICAgICAgaW5kaWNlc1tvZmYrK10gPSBpbnNpZGVJbmRpY2VzTWFwW2ldICsgMSArIG91dHNpZGVQb2ludENvdW50O1xuXG4gICAgICAgIGluZGljZXNbb2ZmKytdID0gb3V0c2lkZVBvaW50Q291bnQgLSAxIC0gb3V0c2lkZUluZGljZXNNYXBbaV07XG4gICAgICAgIGluZGljZXNbb2ZmKytdID0gaW5zaWRlSW5kaWNlc01hcFtpXSArIDEgKyBvdXRzaWRlUG9pbnRDb3VudDtcbiAgICAgICAgaW5kaWNlc1tvZmYrK10gPSBpbnNpZGVJbmRpY2VzTWFwW2ldICsgb3V0c2lkZVBvaW50Q291bnQ7XG5cbiAgICAgICAgaWYgKGluc2lkZUluZGljZXNNYXBbaTJdIC0gaW5zaWRlSW5kaWNlc01hcFtpXSA9PT0gMikge1xuICAgICAgICAgICAgaW5kaWNlc1tvZmYrK10gPSBpbnNpZGVJbmRpY2VzTWFwW2ldICsgMiArIG91dHNpZGVQb2ludENvdW50O1xuICAgICAgICAgICAgaW5kaWNlc1tvZmYrK10gPSBpbnNpZGVJbmRpY2VzTWFwW2ldICsgMSArIG91dHNpZGVQb2ludENvdW50O1xuICAgICAgICAgICAgaW5kaWNlc1tvZmYrK10gPSBvdXRzaWRlUG9pbnRDb3VudCAtIG91dHNpZGVJbmRpY2VzTWFwW2kyXSAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3V0c2lkZUluZGljZXNNYXBbaTJdIC0gb3V0c2lkZUluZGljZXNNYXBbaV0gPT09IDIpIHtcbiAgICAgICAgICAgIGluZGljZXNbb2ZmKytdID0gaW5zaWRlSW5kaWNlc01hcFtpMl0gKyBvdXRzaWRlUG9pbnRDb3VudDtcbiAgICAgICAgICAgIGluZGljZXNbb2ZmKytdID0gb3V0c2lkZVBvaW50Q291bnQgLSAxIC0gKG91dHNpZGVJbmRpY2VzTWFwW2ldICsgMSk7XG4gICAgICAgICAgICBpbmRpY2VzW29mZisrXSA9IG91dHNpZGVQb2ludENvdW50IC0gMSAtIChvdXRzaWRlSW5kaWNlc01hcFtpXSArIDIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdG9wVmVydGljZXMgPSBvcHRzLmJldmVsU2l6ZSA+IDBcbiAgICAgICAgPyBvZmZzZXRQb2x5Z29uKHBvbHlnb25WZXJ0aWNlcywgW10sIG9wdHMuYmV2ZWxTaXplLCBudWxsLCB0cnVlKSA6IHBvbHlnb25WZXJ0aWNlcztcbiAgICBjb25zdCBib3VuZGluZ1JlY3QgPSBvcHRzLmJvdW5kaW5nUmVjdDtcbiAgICByZXR1cm4ge1xuICAgICAgICB2ZXJ0aWNlczogcG9seWdvblZlcnRpY2VzLFxuICAgICAgICBpbmRpY2VzLFxuICAgICAgICB0b3BWZXJ0aWNlcyxcbiAgICAgICAgcmVjdDoge1xuICAgICAgICAgICAgeDogYm91bmRpbmdSZWN0LnggKiBzY2FsZVswXSArIHRyYW5zbGF0ZVswXSxcbiAgICAgICAgICAgIHk6IGJvdW5kaW5nUmVjdC55ICogc2NhbGVbMV0gKyB0cmFuc2xhdGVbMV0sXG4gICAgICAgICAgICB3aWR0aDogYm91bmRpbmdSZWN0LndpZHRoICogc2NhbGVbMF0sXG4gICAgICAgICAgICBoZWlnaHQ6IGJvdW5kaW5nUmVjdC5oZWlnaHQgKiBzY2FsZVsxXSxcbiAgICAgICAgfSxcbiAgICAgICAgZGVwdGg6IHR5cGVvZiBvcHRzLmRlcHRoID09PSAnZnVuY3Rpb24nID8gb3B0cy5kZXB0aChwb2x5bGluZUlkeCkgOiBvcHRzLmRlcHRoLFxuICAgICAgICBob2xlczogW11cbiAgICB9O1xufVxuXG5mdW5jdGlvbiByZW1vdmVDbG9zZVBvaW50c09mUG9seWdvbihwb2x5Z29uLCBlcHNpbG9uKSB7XG4gICAgY29uc3QgbmV3UG9seWdvbiA9IFtdO1xuICAgIGZvciAobGV0IGsgID0gMDsgayA8IHBvbHlnb24ubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gcG9seWdvbltrXTtcbiAgICAgICAgY29uc3QgbmV3UG9pbnRzID0gW107XG4gICAgICAgIGNvbnN0IGxlbiA9IHBvaW50cy5sZW5ndGg7XG4gICAgICAgIGxldCB4MSA9IHBvaW50c1tsZW4gLSAxXVswXTtcbiAgICAgICAgbGV0IHkxID0gcG9pbnRzW2xlbiAtIDFdWzFdO1xuICAgICAgICBsZXQgZGlzdCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB4MiA9IHBvaW50c1tpXVswXTtcbiAgICAgICAgICAgIGxldCB5MiA9IHBvaW50c1tpXVsxXTtcbiAgICAgICAgICAgIGNvbnN0IGR4ID0geDIgLSB4MTtcbiAgICAgICAgICAgIGNvbnN0IGR5ID0geTIgLSB5MTtcbiAgICAgICAgICAgIGRpc3QgKz0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgICAgICAgIGlmIChkaXN0ID4gZXBzaWxvbikge1xuICAgICAgICAgICAgICAgIG5ld1BvaW50cy5wdXNoKHBvaW50c1tpXSk7XG4gICAgICAgICAgICAgICAgZGlzdCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB4MSA9IHgyO1xuICAgICAgICAgICAgeTEgPSB5MjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3UG9pbnRzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgICBuZXdQb2x5Z29uLnB1c2gobmV3UG9pbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3UG9seWdvbi5sZW5ndGggPiAwID8gbmV3UG9seWdvbiA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHNpbXBsaWZ5UG9seWdvbihwb2x5Z29uLCB0b2xlcmFuY2UpIHtcbiAgICBjb25zdCBuZXdQb2x5Z29uID0gW107XG4gICAgZm9yIChsZXQgayAgPSAwOyBrIDwgcG9seWdvbi5sZW5ndGg7IGsrKykge1xuICAgICAgICBsZXQgcG9pbnRzID0gcG9seWdvbltrXTtcbiAgICAgICAgcG9pbnRzID0gZG9TaW1wbGlmeShwb2ludHMsIHRvbGVyYW5jZSwgdHJ1ZSk7XG4gICAgICAgIGlmIChwb2ludHMubGVuZ3RoID49IDMpIHtcbiAgICAgICAgICAgIG5ld1BvbHlnb24ucHVzaChwb2ludHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXdQb2x5Z29uLmxlbmd0aCA+IDAgPyBuZXdQb2x5Z29uIDogbnVsbDtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHBvbHlnb25zIFBvbHlnb25zIGFycmF5IHRoYXQgbWF0Y2ggR2VvSlNPTiBNdWx0aVBvbHlnb24gZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHNdXG4gKiBAcGFyYW0ge251bWJlcnxGdW5jdGlvbn0gW29wdHMuZGVwdGhdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuYmV2ZWxTaXplID0gMF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5iZXZlbFNlZ21lbnRzID0gMl1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5zaW1wbGlmeSA9IDBdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNtb290aFNpZGUgPSBmYWxzZV1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc21vb3RoQmV2ZWwgPSBmYWxzZV1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZXhjbHVkZUJvdHRvbSA9IGZhbHNlXVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmZpdFJlY3RdIHRyYW5zbGF0ZSBhbmQgc2NhbGUgd2lsbCBiZSBpZ25vcmVkIGlmIGZpdFJlY3QgaXMgc2V0XG4gKiBAcGFyYW0ge0FycmF5fSBbb3B0cy50cmFuc2xhdGVdXG4gKiBAcGFyYW0ge0FycmF5fSBbb3B0cy5zY2FsZV1cbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IHtpbmRpY2VzLCBwb3NpdGlvbiwgdXYsIG5vcm1hbCwgYm91bmRpbmdSZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cnVkZVBvbHlnb24ocG9seWdvbnMsIG9wdHMpIHtcblxuICAgIG9wdHMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRzKTtcblxuICAgIGNvbnN0IG1pbiA9IFtJbmZpbml0eSwgSW5maW5pdHldO1xuICAgIGNvbnN0IG1heCA9IFstSW5maW5pdHksIC1JbmZpbml0eV07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2x5Z29ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB1cGRhdGVCb3VuZGluZ1JlY3QocG9seWdvbnNbaV1bMF0sIG1pbiwgbWF4KTtcbiAgICB9XG4gICAgb3B0cy5ib3VuZGluZ1JlY3QgPSBvcHRzLmJvdW5kaW5nUmVjdCB8fCB7XG4gICAgICAgIHg6IG1pblswXSwgeTogbWluWzFdLCB3aWR0aDogbWF4WzBdIC0gbWluWzBdLCBoZWlnaHQ6IG1heFsxXSAtIG1pblsxXVxuICAgIH07XG5cbiAgICBub3JtYWxpemVPcHRzKG9wdHMpO1xuXG4gICAgY29uc3QgcHJlcGFyZWREYXRhID0gW107XG4gICAgY29uc3QgdHJhbnNsYXRlID0gb3B0cy50cmFuc2xhdGUgfHwgWzAsIDBdO1xuICAgIGNvbnN0IHNjYWxlID0gb3B0cy5zY2FsZSB8fCBbMSwgMV07XG4gICAgY29uc3QgYm91bmRpbmdSZWN0ID0gb3B0cy5ib3VuZGluZ1JlY3Q7XG4gICAgY29uc3QgdHJhbnNmb3JtZFJlY3QgPSB7XG4gICAgICAgIHg6IGJvdW5kaW5nUmVjdC54ICogc2NhbGVbMF0gKyB0cmFuc2xhdGVbMF0sXG4gICAgICAgIHk6IGJvdW5kaW5nUmVjdC55ICogc2NhbGVbMV0gKyB0cmFuc2xhdGVbMV0sXG4gICAgICAgIHdpZHRoOiBib3VuZGluZ1JlY3Qud2lkdGggKiBzY2FsZVswXSxcbiAgICAgICAgaGVpZ2h0OiBib3VuZGluZ1JlY3QuaGVpZ2h0ICogc2NhbGVbMV0sXG4gICAgfTtcblxuICAgIGNvbnN0IGVwc2lsb24gPSBNYXRoLm1pbihcbiAgICAgICAgYm91bmRpbmdSZWN0LndpZHRoLCBib3VuZGluZ1JlY3QuaGVpZ2h0XG4gICAgKSAvIDFlNTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvbHlnb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBuZXdQb2x5Z29uID0gcmVtb3ZlQ2xvc2VQb2ludHNPZlBvbHlnb24ocG9seWdvbnNbaV0sIGVwc2lsb24pO1xuICAgICAgICBpZiAoIW5ld1BvbHlnb24pIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpbXBsaWZ5VG9sZXJhbmNlID0gb3B0cy5zaW1wbGlmeSAvIE1hdGgubWF4KHNjYWxlWzBdLCBzY2FsZVsxXSk7XG4gICAgICAgIGlmIChzaW1wbGlmeVRvbGVyYW5jZSA+IDApIHtcbiAgICAgICAgICAgIG5ld1BvbHlnb24gPSBzaW1wbGlmeVBvbHlnb24obmV3UG9seWdvbiwgc2ltcGxpZnlUb2xlcmFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbmV3UG9seWdvbikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7dmVydGljZXMsIGhvbGVzLCBkaW1lbnNpb25zfSA9IGVhcmN1dC5mbGF0dGVuKG5ld1BvbHlnb24pO1xuXG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdmVydGljZXMubGVuZ3RoOykge1xuICAgICAgICAgICAgdmVydGljZXNba10gPSB2ZXJ0aWNlc1trKytdICogc2NhbGVbMF0gKyB0cmFuc2xhdGVbMF07XG4gICAgICAgICAgICB2ZXJ0aWNlc1trXSA9IHZlcnRpY2VzW2srK10gKiBzY2FsZVsxXSArIHRyYW5zbGF0ZVsxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnZlcnRUb0Nsb2Nrd2lzZSh2ZXJ0aWNlcywgaG9sZXMpO1xuXG4gICAgICAgIGlmIChkaW1lbnNpb25zICE9PSAyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09ubHkgMkQgcG9seWdvbiBwb2ludHMgYXJlIHN1cHBvcnRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvcFZlcnRpY2VzID0gb3B0cy5iZXZlbFNpemUgPiAwXG4gICAgICAgICAgICA/IG9mZnNldFBvbHlnb24odmVydGljZXMsIGhvbGVzLCBvcHRzLmJldmVsU2l6ZSwgbnVsbCwgdHJ1ZSkgOiB2ZXJ0aWNlcztcbiAgICAgICAgY29uc3QgaW5kaWNlcyA9IHRyaWFuZ3VsYXRlKHRvcFZlcnRpY2VzLCBob2xlcywgZGltZW5zaW9ucyk7XG4gICAgICAgIHByZXBhcmVkRGF0YS5wdXNoKHtcbiAgICAgICAgICAgIGluZGljZXMsXG4gICAgICAgICAgICB2ZXJ0aWNlcyxcbiAgICAgICAgICAgIHRvcFZlcnRpY2VzLFxuICAgICAgICAgICAgaG9sZXMsXG4gICAgICAgICAgICByZWN0OiB0cmFuc2Zvcm1kUmVjdCxcbiAgICAgICAgICAgIGRlcHRoOiB0eXBlb2Ygb3B0cy5kZXB0aCA9PT0gJ2Z1bmN0aW9uJyA/IG9wdHMuZGVwdGgoaSkgOiBvcHRzLmRlcHRoXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gaW5uZXJFeHRydWRlVHJpYW5ndWxhdGVkUG9seWdvbihwcmVwYXJlZERhdGEsIG9wdHMpO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcG9seWxpbmVzIFBvbHlsaW5lcyBhcnJheSB0aGF0IG1hdGNoIEdlb0pTT04gTXVsdGlMaW5lU3RyaW5nIGdlb21ldHJ5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmRlcHRoXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmJldmVsU2l6ZSA9IDBdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuYmV2ZWxTZWdtZW50cyA9IDJdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuc2ltcGxpZnkgPSAwXVxuICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zbW9vdGhTaWRlID0gZmFsc2VdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNtb290aEJldmVsID0gZmFsc2VdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmV4Y2x1ZGVCb3R0b20gPSBmYWxzZV1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMubGluZVdpZHRoID0gMV1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMubWl0ZXJMaW1pdCA9IDJdXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMuZml0UmVjdF0gdHJhbnNsYXRlIGFuZCBzY2FsZSB3aWxsIGJlIGlnbm9yZWQgaWYgZml0UmVjdCBpcyBzZXRcbiAqIEBwYXJhbSB7QXJyYXl9IFtvcHRzLnRyYW5zbGF0ZV1cbiAqIEBwYXJhbSB7QXJyYXl9IFtvcHRzLnNjYWxlXVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmJvdW5kaW5nUmVjdF1cbiAqIEByZXR1cm4ge09iamVjdH0ge2luZGljZXMsIHBvc2l0aW9uLCB1diwgbm9ybWFsLCBib3VuZGluZ1JlY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRydWRlUG9seWxpbmUocG9seWxpbmVzLCBvcHRzKSB7XG5cbiAgICBvcHRzID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0cyk7XG5cbiAgICBjb25zdCBtaW4gPSBbSW5maW5pdHksIEluZmluaXR5XTtcbiAgICBjb25zdCBtYXggPSBbLUluZmluaXR5LCAtSW5maW5pdHldO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9seWxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHVwZGF0ZUJvdW5kaW5nUmVjdChwb2x5bGluZXNbaV0sIG1pbiwgbWF4KTtcbiAgICB9XG4gICAgb3B0cy5ib3VuZGluZ1JlY3QgPSBvcHRzLmJvdW5kaW5nUmVjdCB8fCB7XG4gICAgICAgIHg6IG1pblswXSwgeTogbWluWzFdLCB3aWR0aDogbWF4WzBdIC0gbWluWzBdLCBoZWlnaHQ6IG1heFsxXSAtIG1pblsxXVxuICAgIH07XG5cbiAgICBub3JtYWxpemVPcHRzKG9wdHMpO1xuICAgIGNvbnN0IHNjYWxlID0gb3B0cy5zY2FsZSB8fCBbMSwgMV07XG5cbiAgICBpZiAob3B0cy5saW5lV2lkdGggPT0gbnVsbCkge1xuICAgICAgICBvcHRzLmxpbmVXaWR0aCA9IDE7XG4gICAgfVxuICAgIGlmIChvcHRzLm1pdGVyTGltaXQgPT0gbnVsbCkge1xuICAgICAgICBvcHRzLm1pdGVyTGltaXQgPSAyO1xuICAgIH1cbiAgICBjb25zdCBwcmVwYXJlZERhdGEgPSBbXTtcbiAgICAvLyBFeHRydWRlIHBvbHlsaW5lIHRvIHBvbHlnb25cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvbHlsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgbmV3UG9seWxpbmUgPSBwb2x5bGluZXNbaV07XG4gICAgICAgIGNvbnN0IHNpbXBsaWZ5VG9sZXJhbmNlID0gb3B0cy5zaW1wbGlmeSAvIE1hdGgubWF4KHNjYWxlWzBdLCBzY2FsZVsxXSk7XG4gICAgICAgIGlmIChzaW1wbGlmeVRvbGVyYW5jZSA+IDApIHtcbiAgICAgICAgICAgIG5ld1BvbHlsaW5lID0gZG9TaW1wbGlmeShuZXdQb2x5bGluZSwgc2ltcGxpZnlUb2xlcmFuY2UsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHByZXBhcmVkRGF0YS5wdXNoKGNvbnZlcnRQb2x5bGluZVRvVHJpYW5ndWxhdGVkUG9seWdvbihuZXdQb2x5bGluZSwgaSwgb3B0cykpO1xuICAgIH1cblxuICAgIHJldHVybiBpbm5lckV4dHJ1ZGVUcmlhbmd1bGF0ZWRQb2x5Z29uKHByZXBhcmVkRGF0YSwgb3B0cyk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUJvdW5kaW5nUmVjdChwb2ludHMsIG1pbiwgbWF4KSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbWluWzBdID0gTWF0aC5taW4ocG9pbnRzW2ldWzBdLCBtaW5bMF0pO1xuICAgICAgICBtaW5bMV0gPSBNYXRoLm1pbihwb2ludHNbaV1bMV0sIG1pblsxXSk7XG4gICAgICAgIG1heFswXSA9IE1hdGgubWF4KHBvaW50c1tpXVswXSwgbWF4WzBdKTtcbiAgICAgICAgbWF4WzFdID0gTWF0aC5tYXgocG9pbnRzW2ldWzFdLCBtYXhbMV0pO1xuICAgIH1cbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGdlb2pzb25cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c11cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5kZXB0aF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5iZXZlbFNpemUgPSAwXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmJldmVsU2VnbWVudHMgPSAyXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnNpbXBsaWZ5ID0gMF1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc21vb3RoU2lkZSA9IGZhbHNlXVxuICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zbW9vdGhCZXZlbCA9IGZhbHNlXVxuICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5leGNsdWRlQm90dG9tID0gZmFsc2VdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmxpbmVXaWR0aCA9IDFdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLm1pdGVyTGltaXQgPSAyXVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmZpdFJlY3RdIHRyYW5zbGF0ZSBhbmQgc2NhbGUgd2lsbCBiZSBpZ25vcmVkIGlmIGZpdFJlY3QgaXMgc2V0XG4gKiBAcGFyYW0ge0FycmF5fSBbb3B0cy50cmFuc2xhdGVdXG4gKiBAcGFyYW0ge0FycmF5fSBbb3B0cy5zY2FsZV1cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5ib3VuZGluZ1JlY3RdXG4gKiBAcmV0dXJuIHtPYmplY3R9IHtwb2x5bGluZToge2luZGljZXMsIHBvc2l0aW9uLCB1diwgbm9ybWFsfSwgcG9seWdvbjoge2luZGljZXMsIHBvc2l0aW9uLCB1diwgbm9ybWFsfX1cbiAqL1xuXG4gLy8gVE9ETyBOb3QgbWVyZ2UgZmVhdHVyZVxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJ1ZGVHZW9KU09OKGdlb2pzb24sIG9wdHMpIHtcblxuICAgIG9wdHMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRzKTtcblxuICAgIGNvbnN0IHBvbHlsaW5lcyA9IFtdO1xuICAgIGNvbnN0IHBvbHlnb25zID0gW107XG5cbiAgICBjb25zdCBwb2x5bGluZUZlYXR1cmVJbmRpY2VzID0gW107XG4gICAgY29uc3QgcG9seWdvbkZlYXR1cmVJbmRpY2VzID0gW107XG5cbiAgICBjb25zdCBtaW4gPSBbSW5maW5pdHksIEluZmluaXR5XTtcbiAgICBjb25zdCBtYXggPSBbLUluZmluaXR5LCAtSW5maW5pdHldO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnZW9qc29uLmZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmUgPSBnZW9qc29uLmZlYXR1cmVzW2ldO1xuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IGZlYXR1cmUuZ2VvbWV0cnk7XG4gICAgICAgIGlmIChnZW9tZXRyeSAmJiBnZW9tZXRyeS5jb29yZGluYXRlcykge1xuICAgICAgICAgICAgc3dpdGNoIChnZW9tZXRyeS50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnTGluZVN0cmluZyc6XG4gICAgICAgICAgICAgICAgICAgIHBvbHlsaW5lcy5wdXNoKGdlb21ldHJ5LmNvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgcG9seWxpbmVGZWF0dXJlSW5kaWNlcy5wdXNoKGkpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVCb3VuZGluZ1JlY3QoZ2VvbWV0cnkuY29vcmRpbmF0ZXMsIG1pbiwgbWF4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnTXVsdGlMaW5lU3RyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBnZW9tZXRyeS5jb29yZGluYXRlcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9seWxpbmVzLnB1c2goZ2VvbWV0cnkuY29vcmRpbmF0ZXNba10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9seWxpbmVGZWF0dXJlSW5kaWNlcy5wdXNoKGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQm91bmRpbmdSZWN0KGdlb21ldHJ5LmNvb3JkaW5hdGVzW2tdLCBtaW4sIG1heCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnUG9seWdvbic6XG4gICAgICAgICAgICAgICAgICAgIHBvbHlnb25zLnB1c2goZ2VvbWV0cnkuY29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgICAgICAgICBwb2x5Z29uRmVhdHVyZUluZGljZXMucHVzaChpKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQm91bmRpbmdSZWN0KGdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdLCBtaW4sIG1heCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ011bHRpUG9seWdvbic6XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgZ2VvbWV0cnkuY29vcmRpbmF0ZXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbHlnb25zLnB1c2goZ2VvbWV0cnkuY29vcmRpbmF0ZXNba10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9seWdvbkZlYXR1cmVJbmRpY2VzLnB1c2goaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVCb3VuZGluZ1JlY3QoZ2VvbWV0cnkuY29vcmRpbmF0ZXNba11bMF0sIG1pbiwgbWF4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9wdHMuYm91bmRpbmdSZWN0ID0gb3B0cy5ib3VuZGluZ1JlY3QgfHwge1xuICAgICAgICB4OiBtaW5bMF0sIHk6IG1pblsxXSwgd2lkdGg6IG1heFswXSAtIG1pblswXSwgaGVpZ2h0OiBtYXhbMV0gLSBtaW5bMV1cbiAgICB9O1xuXG4gICAgY29uc3Qgb3JpZ2luYWxEZXB0aCA9IG9wdHMuZGVwdGg7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcG9seWxpbmU6IGV4dHJ1ZGVQb2x5bGluZShwb2x5bGluZXMsIE9iamVjdC5hc3NpZ24ob3B0cywge1xuICAgICAgICAgICAgZGVwdGg6IGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9yaWdpbmFsRGVwdGggPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRGVwdGgoXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9qc29uLmZlYXR1cmVzW3BvbHlsaW5lRmVhdHVyZUluZGljZXNbaWR4XV1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRGVwdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSxcbiAgICAgICAgcG9seWdvbjogZXh0cnVkZVBvbHlnb24ocG9seWdvbnMsIE9iamVjdC5hc3NpZ24ob3B0cywge1xuICAgICAgICAgICAgZGVwdGg6IGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9yaWdpbmFsRGVwdGggPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRGVwdGgoXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9qc29uLmZlYXR1cmVzW3BvbHlnb25GZWF0dXJlSW5kaWNlc1tpZHhdXVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxEZXB0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpXG4gICAgfTtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9nZW9tZXRyeS1leHRydWRlL3NyYy9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSAyNzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///272\n");

/***/ }),
/* 273 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 1 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim);\n            triangles.push(ear.i / dim);\n            triangles.push(next.i / dim);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(ear, triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var p = ear.next.next;\n\n    while (p !== ear.prev) {\n        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // triangle bbox; min & max are calculated like this for speed\n    var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),\n        minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),\n        maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),\n        maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n        maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim);\n            triangles.push(p.i / dim);\n            triangles.push(b.i / dim);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return p;\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize);\n                earcutLinked(c, triangles, dim, minX, minY, invSize);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        eliminateHole(queue[i], outerNode);\n        outerNode = filterPoints(outerNode, outerNode.next);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    outerNode = findHoleBridge(hole, outerNode);\n    if (outerNode) {\n        var b = splitPolygon(outerNode, hole);\n        filterPoints(b, b.next);\n    }\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                if (x === hx) {\n                    if (hy === p.y) return p;\n                    if (hy === p.next.y) return p.next;\n                }\n                m = p.x < p.next.x ? p : p.next;\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    if (hx === qx) return m.prev; // hole touches outer segment; pick lower endpoint\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m.next;\n\n    while (p !== stop) {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if ((tan < tanMin || (tan === tanMin && p.x > m.x)) && locallyInside(p, hole)) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    }\n\n    return m;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = 32767 * (x - minX) * invSize;\n    y = 32767 * (y - minY) * invSize;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&\n           (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&\n           (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) &&\n           locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b);\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    if ((equals(p1, q1) && equals(p2, q2)) ||\n        (equals(p1, q2) && equals(p2, q1))) return true;\n    return area(p1, q1, p2) > 0 !== area(p1, q1, q2) > 0 &&\n           area(p2, q2, p1) > 0 !== area(p2, q2, q1) > 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = null;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjczLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2VhcmN1dC9zcmMvZWFyY3V0LmpzPzIyZGQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGVhcmN1dDtcbm1vZHVsZS5leHBvcnRzLmRlZmF1bHQgPSBlYXJjdXQ7XG5cbmZ1bmN0aW9uIGVhcmN1dChkYXRhLCBob2xlSW5kaWNlcywgZGltKSB7XG5cbiAgICBkaW0gPSBkaW0gfHwgMjtcblxuICAgIHZhciBoYXNIb2xlcyA9IGhvbGVJbmRpY2VzICYmIGhvbGVJbmRpY2VzLmxlbmd0aCxcbiAgICAgICAgb3V0ZXJMZW4gPSBoYXNIb2xlcyA/IGhvbGVJbmRpY2VzWzBdICogZGltIDogZGF0YS5sZW5ndGgsXG4gICAgICAgIG91dGVyTm9kZSA9IGxpbmtlZExpc3QoZGF0YSwgMCwgb3V0ZXJMZW4sIGRpbSwgdHJ1ZSksXG4gICAgICAgIHRyaWFuZ2xlcyA9IFtdO1xuXG4gICAgaWYgKCFvdXRlck5vZGUgfHwgb3V0ZXJOb2RlLm5leHQgPT09IG91dGVyTm9kZS5wcmV2KSByZXR1cm4gdHJpYW5nbGVzO1xuXG4gICAgdmFyIG1pblgsIG1pblksIG1heFgsIG1heFksIHgsIHksIGludlNpemU7XG5cbiAgICBpZiAoaGFzSG9sZXMpIG91dGVyTm9kZSA9IGVsaW1pbmF0ZUhvbGVzKGRhdGEsIGhvbGVJbmRpY2VzLCBvdXRlck5vZGUsIGRpbSk7XG5cbiAgICAvLyBpZiB0aGUgc2hhcGUgaXMgbm90IHRvbyBzaW1wbGUsIHdlJ2xsIHVzZSB6LW9yZGVyIGN1cnZlIGhhc2ggbGF0ZXI7IGNhbGN1bGF0ZSBwb2x5Z29uIGJib3hcbiAgICBpZiAoZGF0YS5sZW5ndGggPiA4MCAqIGRpbSkge1xuICAgICAgICBtaW5YID0gbWF4WCA9IGRhdGFbMF07XG4gICAgICAgIG1pblkgPSBtYXhZID0gZGF0YVsxXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gZGltOyBpIDwgb3V0ZXJMZW47IGkgKz0gZGltKSB7XG4gICAgICAgICAgICB4ID0gZGF0YVtpXTtcbiAgICAgICAgICAgIHkgPSBkYXRhW2kgKyAxXTtcbiAgICAgICAgICAgIGlmICh4IDwgbWluWCkgbWluWCA9IHg7XG4gICAgICAgICAgICBpZiAoeSA8IG1pblkpIG1pblkgPSB5O1xuICAgICAgICAgICAgaWYgKHggPiBtYXhYKSBtYXhYID0geDtcbiAgICAgICAgICAgIGlmICh5ID4gbWF4WSkgbWF4WSA9IHk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtaW5YLCBtaW5ZIGFuZCBpbnZTaXplIGFyZSBsYXRlciB1c2VkIHRvIHRyYW5zZm9ybSBjb29yZHMgaW50byBpbnRlZ2VycyBmb3Igei1vcmRlciBjYWxjdWxhdGlvblxuICAgICAgICBpbnZTaXplID0gTWF0aC5tYXgobWF4WCAtIG1pblgsIG1heFkgLSBtaW5ZKTtcbiAgICAgICAgaW52U2l6ZSA9IGludlNpemUgIT09IDAgPyAxIC8gaW52U2l6ZSA6IDA7XG4gICAgfVxuXG4gICAgZWFyY3V0TGlua2VkKG91dGVyTm9kZSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUpO1xuXG4gICAgcmV0dXJuIHRyaWFuZ2xlcztcbn1cblxuLy8gY3JlYXRlIGEgY2lyY3VsYXIgZG91Ymx5IGxpbmtlZCBsaXN0IGZyb20gcG9seWdvbiBwb2ludHMgaW4gdGhlIHNwZWNpZmllZCB3aW5kaW5nIG9yZGVyXG5mdW5jdGlvbiBsaW5rZWRMaXN0KGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSwgY2xvY2t3aXNlKSB7XG4gICAgdmFyIGksIGxhc3Q7XG5cbiAgICBpZiAoY2xvY2t3aXNlID09PSAoc2lnbmVkQXJlYShkYXRhLCBzdGFydCwgZW5kLCBkaW0pID4gMCkpIHtcbiAgICAgICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gZGltKSBsYXN0ID0gaW5zZXJ0Tm9kZShpLCBkYXRhW2ldLCBkYXRhW2kgKyAxXSwgbGFzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChpID0gZW5kIC0gZGltOyBpID49IHN0YXJ0OyBpIC09IGRpbSkgbGFzdCA9IGluc2VydE5vZGUoaSwgZGF0YVtpXSwgZGF0YVtpICsgMV0sIGxhc3QpO1xuICAgIH1cblxuICAgIGlmIChsYXN0ICYmIGVxdWFscyhsYXN0LCBsYXN0Lm5leHQpKSB7XG4gICAgICAgIHJlbW92ZU5vZGUobGFzdCk7XG4gICAgICAgIGxhc3QgPSBsYXN0Lm5leHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxhc3Q7XG59XG5cbi8vIGVsaW1pbmF0ZSBjb2xpbmVhciBvciBkdXBsaWNhdGUgcG9pbnRzXG5mdW5jdGlvbiBmaWx0ZXJQb2ludHMoc3RhcnQsIGVuZCkge1xuICAgIGlmICghc3RhcnQpIHJldHVybiBzdGFydDtcbiAgICBpZiAoIWVuZCkgZW5kID0gc3RhcnQ7XG5cbiAgICB2YXIgcCA9IHN0YXJ0LFxuICAgICAgICBhZ2FpbjtcbiAgICBkbyB7XG4gICAgICAgIGFnYWluID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFwLnN0ZWluZXIgJiYgKGVxdWFscyhwLCBwLm5leHQpIHx8IGFyZWEocC5wcmV2LCBwLCBwLm5leHQpID09PSAwKSkge1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShwKTtcbiAgICAgICAgICAgIHAgPSBlbmQgPSBwLnByZXY7XG4gICAgICAgICAgICBpZiAocCA9PT0gcC5uZXh0KSBicmVhaztcbiAgICAgICAgICAgIGFnYWluID0gdHJ1ZTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcCA9IHAubmV4dDtcbiAgICAgICAgfVxuICAgIH0gd2hpbGUgKGFnYWluIHx8IHAgIT09IGVuZCk7XG5cbiAgICByZXR1cm4gZW5kO1xufVxuXG4vLyBtYWluIGVhciBzbGljaW5nIGxvb3Agd2hpY2ggdHJpYW5ndWxhdGVzIGEgcG9seWdvbiAoZ2l2ZW4gYXMgYSBsaW5rZWQgbGlzdClcbmZ1bmN0aW9uIGVhcmN1dExpbmtlZChlYXIsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplLCBwYXNzKSB7XG4gICAgaWYgKCFlYXIpIHJldHVybjtcblxuICAgIC8vIGludGVybGluayBwb2x5Z29uIG5vZGVzIGluIHotb3JkZXJcbiAgICBpZiAoIXBhc3MgJiYgaW52U2l6ZSkgaW5kZXhDdXJ2ZShlYXIsIG1pblgsIG1pblksIGludlNpemUpO1xuXG4gICAgdmFyIHN0b3AgPSBlYXIsXG4gICAgICAgIHByZXYsIG5leHQ7XG5cbiAgICAvLyBpdGVyYXRlIHRocm91Z2ggZWFycywgc2xpY2luZyB0aGVtIG9uZSBieSBvbmVcbiAgICB3aGlsZSAoZWFyLnByZXYgIT09IGVhci5uZXh0KSB7XG4gICAgICAgIHByZXYgPSBlYXIucHJldjtcbiAgICAgICAgbmV4dCA9IGVhci5uZXh0O1xuXG4gICAgICAgIGlmIChpbnZTaXplID8gaXNFYXJIYXNoZWQoZWFyLCBtaW5YLCBtaW5ZLCBpbnZTaXplKSA6IGlzRWFyKGVhcikpIHtcbiAgICAgICAgICAgIC8vIGN1dCBvZmYgdGhlIHRyaWFuZ2xlXG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChwcmV2LmkgLyBkaW0pO1xuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2goZWFyLmkgLyBkaW0pO1xuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2gobmV4dC5pIC8gZGltKTtcblxuICAgICAgICAgICAgcmVtb3ZlTm9kZShlYXIpO1xuXG4gICAgICAgICAgICAvLyBza2lwcGluZyB0aGUgbmV4dCB2ZXJ0ZXggbGVhZHMgdG8gbGVzcyBzbGl2ZXIgdHJpYW5nbGVzXG4gICAgICAgICAgICBlYXIgPSBuZXh0Lm5leHQ7XG4gICAgICAgICAgICBzdG9wID0gbmV4dC5uZXh0O1xuXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVhciA9IG5leHQ7XG5cbiAgICAgICAgLy8gaWYgd2UgbG9vcGVkIHRocm91Z2ggdGhlIHdob2xlIHJlbWFpbmluZyBwb2x5Z29uIGFuZCBjYW4ndCBmaW5kIGFueSBtb3JlIGVhcnNcbiAgICAgICAgaWYgKGVhciA9PT0gc3RvcCkge1xuICAgICAgICAgICAgLy8gdHJ5IGZpbHRlcmluZyBwb2ludHMgYW5kIHNsaWNpbmcgYWdhaW5cbiAgICAgICAgICAgIGlmICghcGFzcykge1xuICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChmaWx0ZXJQb2ludHMoZWFyKSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUsIDEpO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGlzIGRpZG4ndCB3b3JrLCB0cnkgY3VyaW5nIGFsbCBzbWFsbCBzZWxmLWludGVyc2VjdGlvbnMgbG9jYWxseVxuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXNzID09PSAxKSB7XG4gICAgICAgICAgICAgICAgZWFyID0gY3VyZUxvY2FsSW50ZXJzZWN0aW9ucyhlYXIsIHRyaWFuZ2xlcywgZGltKTtcbiAgICAgICAgICAgICAgICBlYXJjdXRMaW5rZWQoZWFyLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSwgMik7XG5cbiAgICAgICAgICAgIC8vIGFzIGEgbGFzdCByZXNvcnQsIHRyeSBzcGxpdHRpbmcgdGhlIHJlbWFpbmluZyBwb2x5Z29uIGludG8gdHdvXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhc3MgPT09IDIpIHtcbiAgICAgICAgICAgICAgICBzcGxpdEVhcmN1dChlYXIsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIGNoZWNrIHdoZXRoZXIgYSBwb2x5Z29uIG5vZGUgZm9ybXMgYSB2YWxpZCBlYXIgd2l0aCBhZGphY2VudCBub2Rlc1xuZnVuY3Rpb24gaXNFYXIoZWFyKSB7XG4gICAgdmFyIGEgPSBlYXIucHJldixcbiAgICAgICAgYiA9IGVhcixcbiAgICAgICAgYyA9IGVhci5uZXh0O1xuXG4gICAgaWYgKGFyZWEoYSwgYiwgYykgPj0gMCkgcmV0dXJuIGZhbHNlOyAvLyByZWZsZXgsIGNhbid0IGJlIGFuIGVhclxuXG4gICAgLy8gbm93IG1ha2Ugc3VyZSB3ZSBkb24ndCBoYXZlIG90aGVyIHBvaW50cyBpbnNpZGUgdGhlIHBvdGVudGlhbCBlYXJcbiAgICB2YXIgcCA9IGVhci5uZXh0Lm5leHQ7XG5cbiAgICB3aGlsZSAocCAhPT0gZWFyLnByZXYpIHtcbiAgICAgICAgaWYgKHBvaW50SW5UcmlhbmdsZShhLngsIGEueSwgYi54LCBiLnksIGMueCwgYy55LCBwLngsIHAueSkgJiZcbiAgICAgICAgICAgIGFyZWEocC5wcmV2LCBwLCBwLm5leHQpID49IDApIHJldHVybiBmYWxzZTtcbiAgICAgICAgcCA9IHAubmV4dDtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNFYXJIYXNoZWQoZWFyLCBtaW5YLCBtaW5ZLCBpbnZTaXplKSB7XG4gICAgdmFyIGEgPSBlYXIucHJldixcbiAgICAgICAgYiA9IGVhcixcbiAgICAgICAgYyA9IGVhci5uZXh0O1xuXG4gICAgaWYgKGFyZWEoYSwgYiwgYykgPj0gMCkgcmV0dXJuIGZhbHNlOyAvLyByZWZsZXgsIGNhbid0IGJlIGFuIGVhclxuXG4gICAgLy8gdHJpYW5nbGUgYmJveDsgbWluICYgbWF4IGFyZSBjYWxjdWxhdGVkIGxpa2UgdGhpcyBmb3Igc3BlZWRcbiAgICB2YXIgbWluVFggPSBhLnggPCBiLnggPyAoYS54IDwgYy54ID8gYS54IDogYy54KSA6IChiLnggPCBjLnggPyBiLnggOiBjLngpLFxuICAgICAgICBtaW5UWSA9IGEueSA8IGIueSA/IChhLnkgPCBjLnkgPyBhLnkgOiBjLnkpIDogKGIueSA8IGMueSA/IGIueSA6IGMueSksXG4gICAgICAgIG1heFRYID0gYS54ID4gYi54ID8gKGEueCA+IGMueCA/IGEueCA6IGMueCkgOiAoYi54ID4gYy54ID8gYi54IDogYy54KSxcbiAgICAgICAgbWF4VFkgPSBhLnkgPiBiLnkgPyAoYS55ID4gYy55ID8gYS55IDogYy55KSA6IChiLnkgPiBjLnkgPyBiLnkgOiBjLnkpO1xuXG4gICAgLy8gei1vcmRlciByYW5nZSBmb3IgdGhlIGN1cnJlbnQgdHJpYW5nbGUgYmJveDtcbiAgICB2YXIgbWluWiA9IHpPcmRlcihtaW5UWCwgbWluVFksIG1pblgsIG1pblksIGludlNpemUpLFxuICAgICAgICBtYXhaID0gek9yZGVyKG1heFRYLCBtYXhUWSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XG5cbiAgICB2YXIgcCA9IGVhci5wcmV2WixcbiAgICAgICAgbiA9IGVhci5uZXh0WjtcblxuICAgIC8vIGxvb2sgZm9yIHBvaW50cyBpbnNpZGUgdGhlIHRyaWFuZ2xlIGluIGJvdGggZGlyZWN0aW9uc1xuICAgIHdoaWxlIChwICYmIHAueiA+PSBtaW5aICYmIG4gJiYgbi56IDw9IG1heFopIHtcbiAgICAgICAgaWYgKHAgIT09IGVhci5wcmV2ICYmIHAgIT09IGVhci5uZXh0ICYmXG4gICAgICAgICAgICBwb2ludEluVHJpYW5nbGUoYS54LCBhLnksIGIueCwgYi55LCBjLngsIGMueSwgcC54LCBwLnkpICYmXG4gICAgICAgICAgICBhcmVhKHAucHJldiwgcCwgcC5uZXh0KSA+PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHAgPSBwLnByZXZaO1xuXG4gICAgICAgIGlmIChuICE9PSBlYXIucHJldiAmJiBuICE9PSBlYXIubmV4dCAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGEueCwgYS55LCBiLngsIGIueSwgYy54LCBjLnksIG4ueCwgbi55KSAmJlxuICAgICAgICAgICAgYXJlYShuLnByZXYsIG4sIG4ubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBuID0gbi5uZXh0WjtcbiAgICB9XG5cbiAgICAvLyBsb29rIGZvciByZW1haW5pbmcgcG9pbnRzIGluIGRlY3JlYXNpbmcgei1vcmRlclxuICAgIHdoaWxlIChwICYmIHAueiA+PSBtaW5aKSB7XG4gICAgICAgIGlmIChwICE9PSBlYXIucHJldiAmJiBwICE9PSBlYXIubmV4dCAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGEueCwgYS55LCBiLngsIGIueSwgYy54LCBjLnksIHAueCwgcC55KSAmJlxuICAgICAgICAgICAgYXJlYShwLnByZXYsIHAsIHAubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBwID0gcC5wcmV2WjtcbiAgICB9XG5cbiAgICAvLyBsb29rIGZvciByZW1haW5pbmcgcG9pbnRzIGluIGluY3JlYXNpbmcgei1vcmRlclxuICAgIHdoaWxlIChuICYmIG4ueiA8PSBtYXhaKSB7XG4gICAgICAgIGlmIChuICE9PSBlYXIucHJldiAmJiBuICE9PSBlYXIubmV4dCAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGEueCwgYS55LCBiLngsIGIueSwgYy54LCBjLnksIG4ueCwgbi55KSAmJlxuICAgICAgICAgICAgYXJlYShuLnByZXYsIG4sIG4ubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBuID0gbi5uZXh0WjtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gZ28gdGhyb3VnaCBhbGwgcG9seWdvbiBub2RlcyBhbmQgY3VyZSBzbWFsbCBsb2NhbCBzZWxmLWludGVyc2VjdGlvbnNcbmZ1bmN0aW9uIGN1cmVMb2NhbEludGVyc2VjdGlvbnMoc3RhcnQsIHRyaWFuZ2xlcywgZGltKSB7XG4gICAgdmFyIHAgPSBzdGFydDtcbiAgICBkbyB7XG4gICAgICAgIHZhciBhID0gcC5wcmV2LFxuICAgICAgICAgICAgYiA9IHAubmV4dC5uZXh0O1xuXG4gICAgICAgIGlmICghZXF1YWxzKGEsIGIpICYmIGludGVyc2VjdHMoYSwgcCwgcC5uZXh0LCBiKSAmJiBsb2NhbGx5SW5zaWRlKGEsIGIpICYmIGxvY2FsbHlJbnNpZGUoYiwgYSkpIHtcblxuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2goYS5pIC8gZGltKTtcbiAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKHAuaSAvIGRpbSk7XG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChiLmkgLyBkaW0pO1xuXG4gICAgICAgICAgICAvLyByZW1vdmUgdHdvIG5vZGVzIGludm9sdmVkXG4gICAgICAgICAgICByZW1vdmVOb2RlKHApO1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShwLm5leHQpO1xuXG4gICAgICAgICAgICBwID0gc3RhcnQgPSBiO1xuICAgICAgICB9XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gc3RhcnQpO1xuXG4gICAgcmV0dXJuIHA7XG59XG5cbi8vIHRyeSBzcGxpdHRpbmcgcG9seWdvbiBpbnRvIHR3byBhbmQgdHJpYW5ndWxhdGUgdGhlbSBpbmRlcGVuZGVudGx5XG5mdW5jdGlvbiBzcGxpdEVhcmN1dChzdGFydCwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUpIHtcbiAgICAvLyBsb29rIGZvciBhIHZhbGlkIGRpYWdvbmFsIHRoYXQgZGl2aWRlcyB0aGUgcG9seWdvbiBpbnRvIHR3b1xuICAgIHZhciBhID0gc3RhcnQ7XG4gICAgZG8ge1xuICAgICAgICB2YXIgYiA9IGEubmV4dC5uZXh0O1xuICAgICAgICB3aGlsZSAoYiAhPT0gYS5wcmV2KSB7XG4gICAgICAgICAgICBpZiAoYS5pICE9PSBiLmkgJiYgaXNWYWxpZERpYWdvbmFsKGEsIGIpKSB7XG4gICAgICAgICAgICAgICAgLy8gc3BsaXQgdGhlIHBvbHlnb24gaW4gdHdvIGJ5IHRoZSBkaWFnb25hbFxuICAgICAgICAgICAgICAgIHZhciBjID0gc3BsaXRQb2x5Z29uKGEsIGIpO1xuXG4gICAgICAgICAgICAgICAgLy8gZmlsdGVyIGNvbGluZWFyIHBvaW50cyBhcm91bmQgdGhlIGN1dHNcbiAgICAgICAgICAgICAgICBhID0gZmlsdGVyUG9pbnRzKGEsIGEubmV4dCk7XG4gICAgICAgICAgICAgICAgYyA9IGZpbHRlclBvaW50cyhjLCBjLm5leHQpO1xuXG4gICAgICAgICAgICAgICAgLy8gcnVuIGVhcmN1dCBvbiBlYWNoIGhhbGZcbiAgICAgICAgICAgICAgICBlYXJjdXRMaW5rZWQoYSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUpO1xuICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChjLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYiA9IGIubmV4dDtcbiAgICAgICAgfVxuICAgICAgICBhID0gYS5uZXh0O1xuICAgIH0gd2hpbGUgKGEgIT09IHN0YXJ0KTtcbn1cblxuLy8gbGluayBldmVyeSBob2xlIGludG8gdGhlIG91dGVyIGxvb3AsIHByb2R1Y2luZyBhIHNpbmdsZS1yaW5nIHBvbHlnb24gd2l0aG91dCBob2xlc1xuZnVuY3Rpb24gZWxpbWluYXRlSG9sZXMoZGF0YSwgaG9sZUluZGljZXMsIG91dGVyTm9kZSwgZGltKSB7XG4gICAgdmFyIHF1ZXVlID0gW10sXG4gICAgICAgIGksIGxlbiwgc3RhcnQsIGVuZCwgbGlzdDtcblxuICAgIGZvciAoaSA9IDAsIGxlbiA9IGhvbGVJbmRpY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHN0YXJ0ID0gaG9sZUluZGljZXNbaV0gKiBkaW07XG4gICAgICAgIGVuZCA9IGkgPCBsZW4gLSAxID8gaG9sZUluZGljZXNbaSArIDFdICogZGltIDogZGF0YS5sZW5ndGg7XG4gICAgICAgIGxpc3QgPSBsaW5rZWRMaXN0KGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSwgZmFsc2UpO1xuICAgICAgICBpZiAobGlzdCA9PT0gbGlzdC5uZXh0KSBsaXN0LnN0ZWluZXIgPSB0cnVlO1xuICAgICAgICBxdWV1ZS5wdXNoKGdldExlZnRtb3N0KGxpc3QpKTtcbiAgICB9XG5cbiAgICBxdWV1ZS5zb3J0KGNvbXBhcmVYKTtcblxuICAgIC8vIHByb2Nlc3MgaG9sZXMgZnJvbSBsZWZ0IHRvIHJpZ2h0XG4gICAgZm9yIChpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVsaW1pbmF0ZUhvbGUocXVldWVbaV0sIG91dGVyTm9kZSk7XG4gICAgICAgIG91dGVyTm9kZSA9IGZpbHRlclBvaW50cyhvdXRlck5vZGUsIG91dGVyTm9kZS5uZXh0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0ZXJOb2RlO1xufVxuXG5mdW5jdGlvbiBjb21wYXJlWChhLCBiKSB7XG4gICAgcmV0dXJuIGEueCAtIGIueDtcbn1cblxuLy8gZmluZCBhIGJyaWRnZSBiZXR3ZWVuIHZlcnRpY2VzIHRoYXQgY29ubmVjdHMgaG9sZSB3aXRoIGFuIG91dGVyIHJpbmcgYW5kIGFuZCBsaW5rIGl0XG5mdW5jdGlvbiBlbGltaW5hdGVIb2xlKGhvbGUsIG91dGVyTm9kZSkge1xuICAgIG91dGVyTm9kZSA9IGZpbmRIb2xlQnJpZGdlKGhvbGUsIG91dGVyTm9kZSk7XG4gICAgaWYgKG91dGVyTm9kZSkge1xuICAgICAgICB2YXIgYiA9IHNwbGl0UG9seWdvbihvdXRlck5vZGUsIGhvbGUpO1xuICAgICAgICBmaWx0ZXJQb2ludHMoYiwgYi5uZXh0KTtcbiAgICB9XG59XG5cbi8vIERhdmlkIEViZXJseSdzIGFsZ29yaXRobSBmb3IgZmluZGluZyBhIGJyaWRnZSBiZXR3ZWVuIGhvbGUgYW5kIG91dGVyIHBvbHlnb25cbmZ1bmN0aW9uIGZpbmRIb2xlQnJpZGdlKGhvbGUsIG91dGVyTm9kZSkge1xuICAgIHZhciBwID0gb3V0ZXJOb2RlLFxuICAgICAgICBoeCA9IGhvbGUueCxcbiAgICAgICAgaHkgPSBob2xlLnksXG4gICAgICAgIHF4ID0gLUluZmluaXR5LFxuICAgICAgICBtO1xuXG4gICAgLy8gZmluZCBhIHNlZ21lbnQgaW50ZXJzZWN0ZWQgYnkgYSByYXkgZnJvbSB0aGUgaG9sZSdzIGxlZnRtb3N0IHBvaW50IHRvIHRoZSBsZWZ0O1xuICAgIC8vIHNlZ21lbnQncyBlbmRwb2ludCB3aXRoIGxlc3NlciB4IHdpbGwgYmUgcG90ZW50aWFsIGNvbm5lY3Rpb24gcG9pbnRcbiAgICBkbyB7XG4gICAgICAgIGlmIChoeSA8PSBwLnkgJiYgaHkgPj0gcC5uZXh0LnkgJiYgcC5uZXh0LnkgIT09IHAueSkge1xuICAgICAgICAgICAgdmFyIHggPSBwLnggKyAoaHkgLSBwLnkpICogKHAubmV4dC54IC0gcC54KSAvIChwLm5leHQueSAtIHAueSk7XG4gICAgICAgICAgICBpZiAoeCA8PSBoeCAmJiB4ID4gcXgpIHtcbiAgICAgICAgICAgICAgICBxeCA9IHg7XG4gICAgICAgICAgICAgICAgaWYgKHggPT09IGh4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoeSA9PT0gcC55KSByZXR1cm4gcDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGh5ID09PSBwLm5leHQueSkgcmV0dXJuIHAubmV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbSA9IHAueCA8IHAubmV4dC54ID8gcCA6IHAubmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IG91dGVyTm9kZSk7XG5cbiAgICBpZiAoIW0pIHJldHVybiBudWxsO1xuXG4gICAgaWYgKGh4ID09PSBxeCkgcmV0dXJuIG0ucHJldjsgLy8gaG9sZSB0b3VjaGVzIG91dGVyIHNlZ21lbnQ7IHBpY2sgbG93ZXIgZW5kcG9pbnRcblxuICAgIC8vIGxvb2sgZm9yIHBvaW50cyBpbnNpZGUgdGhlIHRyaWFuZ2xlIG9mIGhvbGUgcG9pbnQsIHNlZ21lbnQgaW50ZXJzZWN0aW9uIGFuZCBlbmRwb2ludDtcbiAgICAvLyBpZiB0aGVyZSBhcmUgbm8gcG9pbnRzIGZvdW5kLCB3ZSBoYXZlIGEgdmFsaWQgY29ubmVjdGlvbjtcbiAgICAvLyBvdGhlcndpc2UgY2hvb3NlIHRoZSBwb2ludCBvZiB0aGUgbWluaW11bSBhbmdsZSB3aXRoIHRoZSByYXkgYXMgY29ubmVjdGlvbiBwb2ludFxuXG4gICAgdmFyIHN0b3AgPSBtLFxuICAgICAgICBteCA9IG0ueCxcbiAgICAgICAgbXkgPSBtLnksXG4gICAgICAgIHRhbk1pbiA9IEluZmluaXR5LFxuICAgICAgICB0YW47XG5cbiAgICBwID0gbS5uZXh0O1xuXG4gICAgd2hpbGUgKHAgIT09IHN0b3ApIHtcbiAgICAgICAgaWYgKGh4ID49IHAueCAmJiBwLnggPj0gbXggJiYgaHggIT09IHAueCAmJlxuICAgICAgICAgICAgICAgIHBvaW50SW5UcmlhbmdsZShoeSA8IG15ID8gaHggOiBxeCwgaHksIG14LCBteSwgaHkgPCBteSA/IHF4IDogaHgsIGh5LCBwLngsIHAueSkpIHtcblxuICAgICAgICAgICAgdGFuID0gTWF0aC5hYnMoaHkgLSBwLnkpIC8gKGh4IC0gcC54KTsgLy8gdGFuZ2VudGlhbFxuXG4gICAgICAgICAgICBpZiAoKHRhbiA8IHRhbk1pbiB8fCAodGFuID09PSB0YW5NaW4gJiYgcC54ID4gbS54KSkgJiYgbG9jYWxseUluc2lkZShwLCBob2xlKSkge1xuICAgICAgICAgICAgICAgIG0gPSBwO1xuICAgICAgICAgICAgICAgIHRhbk1pbiA9IHRhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG07XG59XG5cbi8vIGludGVybGluayBwb2x5Z29uIG5vZGVzIGluIHotb3JkZXJcbmZ1bmN0aW9uIGluZGV4Q3VydmUoc3RhcnQsIG1pblgsIG1pblksIGludlNpemUpIHtcbiAgICB2YXIgcCA9IHN0YXJ0O1xuICAgIGRvIHtcbiAgICAgICAgaWYgKHAueiA9PT0gbnVsbCkgcC56ID0gek9yZGVyKHAueCwgcC55LCBtaW5YLCBtaW5ZLCBpbnZTaXplKTtcbiAgICAgICAgcC5wcmV2WiA9IHAucHJldjtcbiAgICAgICAgcC5uZXh0WiA9IHAubmV4dDtcbiAgICAgICAgcCA9IHAubmV4dDtcbiAgICB9IHdoaWxlIChwICE9PSBzdGFydCk7XG5cbiAgICBwLnByZXZaLm5leHRaID0gbnVsbDtcbiAgICBwLnByZXZaID0gbnVsbDtcblxuICAgIHNvcnRMaW5rZWQocCk7XG59XG5cbi8vIFNpbW9uIFRhdGhhbSdzIGxpbmtlZCBsaXN0IG1lcmdlIHNvcnQgYWxnb3JpdGhtXG4vLyBodHRwOi8vd3d3LmNoaWFyay5ncmVlbmVuZC5vcmcudWsvfnNndGF0aGFtL2FsZ29yaXRobXMvbGlzdHNvcnQuaHRtbFxuZnVuY3Rpb24gc29ydExpbmtlZChsaXN0KSB7XG4gICAgdmFyIGksIHAsIHEsIGUsIHRhaWwsIG51bU1lcmdlcywgcFNpemUsIHFTaXplLFxuICAgICAgICBpblNpemUgPSAxO1xuXG4gICAgZG8ge1xuICAgICAgICBwID0gbGlzdDtcbiAgICAgICAgbGlzdCA9IG51bGw7XG4gICAgICAgIHRhaWwgPSBudWxsO1xuICAgICAgICBudW1NZXJnZXMgPSAwO1xuXG4gICAgICAgIHdoaWxlIChwKSB7XG4gICAgICAgICAgICBudW1NZXJnZXMrKztcbiAgICAgICAgICAgIHEgPSBwO1xuICAgICAgICAgICAgcFNpemUgPSAwO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGluU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcFNpemUrKztcbiAgICAgICAgICAgICAgICBxID0gcS5uZXh0WjtcbiAgICAgICAgICAgICAgICBpZiAoIXEpIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcVNpemUgPSBpblNpemU7XG5cbiAgICAgICAgICAgIHdoaWxlIChwU2l6ZSA+IDAgfHwgKHFTaXplID4gMCAmJiBxKSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKHBTaXplICE9PSAwICYmIChxU2l6ZSA9PT0gMCB8fCAhcSB8fCBwLnogPD0gcS56KSkge1xuICAgICAgICAgICAgICAgICAgICBlID0gcDtcbiAgICAgICAgICAgICAgICAgICAgcCA9IHAubmV4dFo7XG4gICAgICAgICAgICAgICAgICAgIHBTaXplLS07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZSA9IHE7XG4gICAgICAgICAgICAgICAgICAgIHEgPSBxLm5leHRaO1xuICAgICAgICAgICAgICAgICAgICBxU2l6ZS0tO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0YWlsKSB0YWlsLm5leHRaID0gZTtcbiAgICAgICAgICAgICAgICBlbHNlIGxpc3QgPSBlO1xuXG4gICAgICAgICAgICAgICAgZS5wcmV2WiA9IHRhaWw7XG4gICAgICAgICAgICAgICAgdGFpbCA9IGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHAgPSBxO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFpbC5uZXh0WiA9IG51bGw7XG4gICAgICAgIGluU2l6ZSAqPSAyO1xuXG4gICAgfSB3aGlsZSAobnVtTWVyZ2VzID4gMSk7XG5cbiAgICByZXR1cm4gbGlzdDtcbn1cblxuLy8gei1vcmRlciBvZiBhIHBvaW50IGdpdmVuIGNvb3JkcyBhbmQgaW52ZXJzZSBvZiB0aGUgbG9uZ2VyIHNpZGUgb2YgZGF0YSBiYm94XG5mdW5jdGlvbiB6T3JkZXIoeCwgeSwgbWluWCwgbWluWSwgaW52U2l6ZSkge1xuICAgIC8vIGNvb3JkcyBhcmUgdHJhbnNmb3JtZWQgaW50byBub24tbmVnYXRpdmUgMTUtYml0IGludGVnZXIgcmFuZ2VcbiAgICB4ID0gMzI3NjcgKiAoeCAtIG1pblgpICogaW52U2l6ZTtcbiAgICB5ID0gMzI3NjcgKiAoeSAtIG1pblkpICogaW52U2l6ZTtcblxuICAgIHggPSAoeCB8ICh4IDw8IDgpKSAmIDB4MDBGRjAwRkY7XG4gICAgeCA9ICh4IHwgKHggPDwgNCkpICYgMHgwRjBGMEYwRjtcbiAgICB4ID0gKHggfCAoeCA8PCAyKSkgJiAweDMzMzMzMzMzO1xuICAgIHggPSAoeCB8ICh4IDw8IDEpKSAmIDB4NTU1NTU1NTU7XG5cbiAgICB5ID0gKHkgfCAoeSA8PCA4KSkgJiAweDAwRkYwMEZGO1xuICAgIHkgPSAoeSB8ICh5IDw8IDQpKSAmIDB4MEYwRjBGMEY7XG4gICAgeSA9ICh5IHwgKHkgPDwgMikpICYgMHgzMzMzMzMzMztcbiAgICB5ID0gKHkgfCAoeSA8PCAxKSkgJiAweDU1NTU1NTU1O1xuXG4gICAgcmV0dXJuIHggfCAoeSA8PCAxKTtcbn1cblxuLy8gZmluZCB0aGUgbGVmdG1vc3Qgbm9kZSBvZiBhIHBvbHlnb24gcmluZ1xuZnVuY3Rpb24gZ2V0TGVmdG1vc3Qoc3RhcnQpIHtcbiAgICB2YXIgcCA9IHN0YXJ0LFxuICAgICAgICBsZWZ0bW9zdCA9IHN0YXJ0O1xuICAgIGRvIHtcbiAgICAgICAgaWYgKHAueCA8IGxlZnRtb3N0LnggfHwgKHAueCA9PT0gbGVmdG1vc3QueCAmJiBwLnkgPCBsZWZ0bW9zdC55KSkgbGVmdG1vc3QgPSBwO1xuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IHN0YXJ0KTtcblxuICAgIHJldHVybiBsZWZ0bW9zdDtcbn1cblxuLy8gY2hlY2sgaWYgYSBwb2ludCBsaWVzIHdpdGhpbiBhIGNvbnZleCB0cmlhbmdsZVxuZnVuY3Rpb24gcG9pbnRJblRyaWFuZ2xlKGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIHB4LCBweSkge1xuICAgIHJldHVybiAoY3ggLSBweCkgKiAoYXkgLSBweSkgLSAoYXggLSBweCkgKiAoY3kgLSBweSkgPj0gMCAmJlxuICAgICAgICAgICAoYXggLSBweCkgKiAoYnkgLSBweSkgLSAoYnggLSBweCkgKiAoYXkgLSBweSkgPj0gMCAmJlxuICAgICAgICAgICAoYnggLSBweCkgKiAoY3kgLSBweSkgLSAoY3ggLSBweCkgKiAoYnkgLSBweSkgPj0gMDtcbn1cblxuLy8gY2hlY2sgaWYgYSBkaWFnb25hbCBiZXR3ZWVuIHR3byBwb2x5Z29uIG5vZGVzIGlzIHZhbGlkIChsaWVzIGluIHBvbHlnb24gaW50ZXJpb3IpXG5mdW5jdGlvbiBpc1ZhbGlkRGlhZ29uYWwoYSwgYikge1xuICAgIHJldHVybiBhLm5leHQuaSAhPT0gYi5pICYmIGEucHJldi5pICE9PSBiLmkgJiYgIWludGVyc2VjdHNQb2x5Z29uKGEsIGIpICYmXG4gICAgICAgICAgIGxvY2FsbHlJbnNpZGUoYSwgYikgJiYgbG9jYWxseUluc2lkZShiLCBhKSAmJiBtaWRkbGVJbnNpZGUoYSwgYik7XG59XG5cbi8vIHNpZ25lZCBhcmVhIG9mIGEgdHJpYW5nbGVcbmZ1bmN0aW9uIGFyZWEocCwgcSwgcikge1xuICAgIHJldHVybiAocS55IC0gcC55KSAqIChyLnggLSBxLngpIC0gKHEueCAtIHAueCkgKiAoci55IC0gcS55KTtcbn1cblxuLy8gY2hlY2sgaWYgdHdvIHBvaW50cyBhcmUgZXF1YWxcbmZ1bmN0aW9uIGVxdWFscyhwMSwgcDIpIHtcbiAgICByZXR1cm4gcDEueCA9PT0gcDIueCAmJiBwMS55ID09PSBwMi55O1xufVxuXG4vLyBjaGVjayBpZiB0d28gc2VnbWVudHMgaW50ZXJzZWN0XG5mdW5jdGlvbiBpbnRlcnNlY3RzKHAxLCBxMSwgcDIsIHEyKSB7XG4gICAgaWYgKChlcXVhbHMocDEsIHExKSAmJiBlcXVhbHMocDIsIHEyKSkgfHxcbiAgICAgICAgKGVxdWFscyhwMSwgcTIpICYmIGVxdWFscyhwMiwgcTEpKSkgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGFyZWEocDEsIHExLCBwMikgPiAwICE9PSBhcmVhKHAxLCBxMSwgcTIpID4gMCAmJlxuICAgICAgICAgICBhcmVhKHAyLCBxMiwgcDEpID4gMCAhPT0gYXJlYShwMiwgcTIsIHExKSA+IDA7XG59XG5cbi8vIGNoZWNrIGlmIGEgcG9seWdvbiBkaWFnb25hbCBpbnRlcnNlY3RzIGFueSBwb2x5Z29uIHNlZ21lbnRzXG5mdW5jdGlvbiBpbnRlcnNlY3RzUG9seWdvbihhLCBiKSB7XG4gICAgdmFyIHAgPSBhO1xuICAgIGRvIHtcbiAgICAgICAgaWYgKHAuaSAhPT0gYS5pICYmIHAubmV4dC5pICE9PSBhLmkgJiYgcC5pICE9PSBiLmkgJiYgcC5uZXh0LmkgIT09IGIuaSAmJlxuICAgICAgICAgICAgICAgIGludGVyc2VjdHMocCwgcC5uZXh0LCBhLCBiKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gYSk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIGNoZWNrIGlmIGEgcG9seWdvbiBkaWFnb25hbCBpcyBsb2NhbGx5IGluc2lkZSB0aGUgcG9seWdvblxuZnVuY3Rpb24gbG9jYWxseUluc2lkZShhLCBiKSB7XG4gICAgcmV0dXJuIGFyZWEoYS5wcmV2LCBhLCBhLm5leHQpIDwgMCA/XG4gICAgICAgIGFyZWEoYSwgYiwgYS5uZXh0KSA+PSAwICYmIGFyZWEoYSwgYS5wcmV2LCBiKSA+PSAwIDpcbiAgICAgICAgYXJlYShhLCBiLCBhLnByZXYpIDwgMCB8fCBhcmVhKGEsIGEubmV4dCwgYikgPCAwO1xufVxuXG4vLyBjaGVjayBpZiB0aGUgbWlkZGxlIHBvaW50IG9mIGEgcG9seWdvbiBkaWFnb25hbCBpcyBpbnNpZGUgdGhlIHBvbHlnb25cbmZ1bmN0aW9uIG1pZGRsZUluc2lkZShhLCBiKSB7XG4gICAgdmFyIHAgPSBhLFxuICAgICAgICBpbnNpZGUgPSBmYWxzZSxcbiAgICAgICAgcHggPSAoYS54ICsgYi54KSAvIDIsXG4gICAgICAgIHB5ID0gKGEueSArIGIueSkgLyAyO1xuICAgIGRvIHtcbiAgICAgICAgaWYgKCgocC55ID4gcHkpICE9PSAocC5uZXh0LnkgPiBweSkpICYmIHAubmV4dC55ICE9PSBwLnkgJiZcbiAgICAgICAgICAgICAgICAocHggPCAocC5uZXh0LnggLSBwLngpICogKHB5IC0gcC55KSAvIChwLm5leHQueSAtIHAueSkgKyBwLngpKVxuICAgICAgICAgICAgaW5zaWRlID0gIWluc2lkZTtcbiAgICAgICAgcCA9IHAubmV4dDtcbiAgICB9IHdoaWxlIChwICE9PSBhKTtcblxuICAgIHJldHVybiBpbnNpZGU7XG59XG5cbi8vIGxpbmsgdHdvIHBvbHlnb24gdmVydGljZXMgd2l0aCBhIGJyaWRnZTsgaWYgdGhlIHZlcnRpY2VzIGJlbG9uZyB0byB0aGUgc2FtZSByaW5nLCBpdCBzcGxpdHMgcG9seWdvbiBpbnRvIHR3bztcbi8vIGlmIG9uZSBiZWxvbmdzIHRvIHRoZSBvdXRlciByaW5nIGFuZCBhbm90aGVyIHRvIGEgaG9sZSwgaXQgbWVyZ2VzIGl0IGludG8gYSBzaW5nbGUgcmluZ1xuZnVuY3Rpb24gc3BsaXRQb2x5Z29uKGEsIGIpIHtcbiAgICB2YXIgYTIgPSBuZXcgTm9kZShhLmksIGEueCwgYS55KSxcbiAgICAgICAgYjIgPSBuZXcgTm9kZShiLmksIGIueCwgYi55KSxcbiAgICAgICAgYW4gPSBhLm5leHQsXG4gICAgICAgIGJwID0gYi5wcmV2O1xuXG4gICAgYS5uZXh0ID0gYjtcbiAgICBiLnByZXYgPSBhO1xuXG4gICAgYTIubmV4dCA9IGFuO1xuICAgIGFuLnByZXYgPSBhMjtcblxuICAgIGIyLm5leHQgPSBhMjtcbiAgICBhMi5wcmV2ID0gYjI7XG5cbiAgICBicC5uZXh0ID0gYjI7XG4gICAgYjIucHJldiA9IGJwO1xuXG4gICAgcmV0dXJuIGIyO1xufVxuXG4vLyBjcmVhdGUgYSBub2RlIGFuZCBvcHRpb25hbGx5IGxpbmsgaXQgd2l0aCBwcmV2aW91cyBvbmUgKGluIGEgY2lyY3VsYXIgZG91Ymx5IGxpbmtlZCBsaXN0KVxuZnVuY3Rpb24gaW5zZXJ0Tm9kZShpLCB4LCB5LCBsYXN0KSB7XG4gICAgdmFyIHAgPSBuZXcgTm9kZShpLCB4LCB5KTtcblxuICAgIGlmICghbGFzdCkge1xuICAgICAgICBwLnByZXYgPSBwO1xuICAgICAgICBwLm5leHQgPSBwO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcC5uZXh0ID0gbGFzdC5uZXh0O1xuICAgICAgICBwLnByZXYgPSBsYXN0O1xuICAgICAgICBsYXN0Lm5leHQucHJldiA9IHA7XG4gICAgICAgIGxhc3QubmV4dCA9IHA7XG4gICAgfVxuICAgIHJldHVybiBwO1xufVxuXG5mdW5jdGlvbiByZW1vdmVOb2RlKHApIHtcbiAgICBwLm5leHQucHJldiA9IHAucHJldjtcbiAgICBwLnByZXYubmV4dCA9IHAubmV4dDtcblxuICAgIGlmIChwLnByZXZaKSBwLnByZXZaLm5leHRaID0gcC5uZXh0WjtcbiAgICBpZiAocC5uZXh0WikgcC5uZXh0Wi5wcmV2WiA9IHAucHJldlo7XG59XG5cbmZ1bmN0aW9uIE5vZGUoaSwgeCwgeSkge1xuICAgIC8vIHZlcnRleCBpbmRleCBpbiBjb29yZGluYXRlcyBhcnJheVxuICAgIHRoaXMuaSA9IGk7XG5cbiAgICAvLyB2ZXJ0ZXggY29vcmRpbmF0ZXNcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG5cbiAgICAvLyBwcmV2aW91cyBhbmQgbmV4dCB2ZXJ0ZXggbm9kZXMgaW4gYSBwb2x5Z29uIHJpbmdcbiAgICB0aGlzLnByZXYgPSBudWxsO1xuICAgIHRoaXMubmV4dCA9IG51bGw7XG5cbiAgICAvLyB6LW9yZGVyIGN1cnZlIHZhbHVlXG4gICAgdGhpcy56ID0gbnVsbDtcblxuICAgIC8vIHByZXZpb3VzIGFuZCBuZXh0IG5vZGVzIGluIHotb3JkZXJcbiAgICB0aGlzLnByZXZaID0gbnVsbDtcbiAgICB0aGlzLm5leHRaID0gbnVsbDtcblxuICAgIC8vIGluZGljYXRlcyB3aGV0aGVyIHRoaXMgaXMgYSBzdGVpbmVyIHBvaW50XG4gICAgdGhpcy5zdGVpbmVyID0gZmFsc2U7XG59XG5cbi8vIHJldHVybiBhIHBlcmNlbnRhZ2UgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBwb2x5Z29uIGFyZWEgYW5kIGl0cyB0cmlhbmd1bGF0aW9uIGFyZWE7XG4vLyB1c2VkIHRvIHZlcmlmeSBjb3JyZWN0bmVzcyBvZiB0cmlhbmd1bGF0aW9uXG5lYXJjdXQuZGV2aWF0aW9uID0gZnVuY3Rpb24gKGRhdGEsIGhvbGVJbmRpY2VzLCBkaW0sIHRyaWFuZ2xlcykge1xuICAgIHZhciBoYXNIb2xlcyA9IGhvbGVJbmRpY2VzICYmIGhvbGVJbmRpY2VzLmxlbmd0aDtcbiAgICB2YXIgb3V0ZXJMZW4gPSBoYXNIb2xlcyA/IGhvbGVJbmRpY2VzWzBdICogZGltIDogZGF0YS5sZW5ndGg7XG5cbiAgICB2YXIgcG9seWdvbkFyZWEgPSBNYXRoLmFicyhzaWduZWRBcmVhKGRhdGEsIDAsIG91dGVyTGVuLCBkaW0pKTtcbiAgICBpZiAoaGFzSG9sZXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGhvbGVJbmRpY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBob2xlSW5kaWNlc1tpXSAqIGRpbTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBpIDwgbGVuIC0gMSA/IGhvbGVJbmRpY2VzW2kgKyAxXSAqIGRpbSA6IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgcG9seWdvbkFyZWEgLT0gTWF0aC5hYnMoc2lnbmVkQXJlYShkYXRhLCBzdGFydCwgZW5kLCBkaW0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0cmlhbmdsZXNBcmVhID0gMDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgIHZhciBhID0gdHJpYW5nbGVzW2ldICogZGltO1xuICAgICAgICB2YXIgYiA9IHRyaWFuZ2xlc1tpICsgMV0gKiBkaW07XG4gICAgICAgIHZhciBjID0gdHJpYW5nbGVzW2kgKyAyXSAqIGRpbTtcbiAgICAgICAgdHJpYW5nbGVzQXJlYSArPSBNYXRoLmFicyhcbiAgICAgICAgICAgIChkYXRhW2FdIC0gZGF0YVtjXSkgKiAoZGF0YVtiICsgMV0gLSBkYXRhW2EgKyAxXSkgLVxuICAgICAgICAgICAgKGRhdGFbYV0gLSBkYXRhW2JdKSAqIChkYXRhW2MgKyAxXSAtIGRhdGFbYSArIDFdKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvbHlnb25BcmVhID09PSAwICYmIHRyaWFuZ2xlc0FyZWEgPT09IDAgPyAwIDpcbiAgICAgICAgTWF0aC5hYnMoKHRyaWFuZ2xlc0FyZWEgLSBwb2x5Z29uQXJlYSkgLyBwb2x5Z29uQXJlYSk7XG59O1xuXG5mdW5jdGlvbiBzaWduZWRBcmVhKGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSkge1xuICAgIHZhciBzdW0gPSAwO1xuICAgIGZvciAodmFyIGkgPSBzdGFydCwgaiA9IGVuZCAtIGRpbTsgaSA8IGVuZDsgaSArPSBkaW0pIHtcbiAgICAgICAgc3VtICs9IChkYXRhW2pdIC0gZGF0YVtpXSkgKiAoZGF0YVtpICsgMV0gKyBkYXRhW2ogKyAxXSk7XG4gICAgICAgIGogPSBpO1xuICAgIH1cbiAgICByZXR1cm4gc3VtO1xufVxuXG4vLyB0dXJuIGEgcG9seWdvbiBpbiBhIG11bHRpLWRpbWVuc2lvbmFsIGFycmF5IGZvcm0gKGUuZy4gYXMgaW4gR2VvSlNPTikgaW50byBhIGZvcm0gRWFyY3V0IGFjY2VwdHNcbmVhcmN1dC5mbGF0dGVuID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB2YXIgZGltID0gZGF0YVswXVswXS5sZW5ndGgsXG4gICAgICAgIHJlc3VsdCA9IHt2ZXJ0aWNlczogW10sIGhvbGVzOiBbXSwgZGltZW5zaW9uczogZGltfSxcbiAgICAgICAgaG9sZUluZGV4ID0gMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGltOyBkKyspIHJlc3VsdC52ZXJ0aWNlcy5wdXNoKGRhdGFbaV1bal1bZF0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgaG9sZUluZGV4ICs9IGRhdGFbaSAtIDFdLmxlbmd0aDtcbiAgICAgICAgICAgIHJlc3VsdC5ob2xlcy5wdXNoKGhvbGVJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9lYXJjdXQvc3JjL2VhcmN1dC5qc1xuLy8gbW9kdWxlIGlkID0gMjczXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///273\n");

/***/ }),
/* 274 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/*\n (c) 2017, Vladimir Agafonkin\n Simplify.js, a high-performance JS polyline simplification library\n mourner.github.io/simplify-js\n*/\n\n// to suit your point format, run search/replace for '.x' and '.y';\n// for 3D version, see 3d branch (configurability would draw significant performance overhead)\n\n// square distance between 2 points\nfunction getSqDist(p1, p2) {\n\n    var dx = p1[0] - p2[0],\n        dy = p1[1] - p2[1];\n\n    return dx * dx + dy * dy;\n}\n\n// square distance from a point to a segment\nfunction getSqSegDist(p, p1, p2) {\n\n    var x = p1[0],\n        y = p1[1],\n        dx = p2[0] - x,\n        dy = p2[1] - y;\n\n    if (dx !== 0 || dy !== 0) {\n\n        var t = ((p[0] - x) * dx + (p[1] - y) * dy) / (dx * dx + dy * dy);\n\n        if (t > 1) {\n            x = p2[0];\n            y = p2[1];\n\n        } else if (t > 0) {\n            x += dx * t;\n            y += dy * t;\n        }\n    }\n\n    dx = p[0] - x;\n    dy = p[1] - y;\n\n    return dx * dx + dy * dy;\n}\n// rest of the code doesn't care about point format\n\n// basic distance-based simplification\nfunction simplifyRadialDist(points, sqTolerance) {\n\n    var prevPoint = points[0],\n        newPoints = [prevPoint],\n        point;\n\n    for (var i = 1, len = points.length; i < len; i++) {\n        point = points[i];\n\n        if (getSqDist(point, prevPoint) > sqTolerance) {\n            newPoints.push(point);\n            prevPoint = point;\n        }\n    }\n\n    if (prevPoint !== point) newPoints.push(point);\n\n    return newPoints;\n}\n\nfunction simplifyDPStep(points, first, last, sqTolerance, simplified) {\n    var maxSqDist = sqTolerance,\n        index;\n\n    for (var i = first + 1; i < last; i++) {\n        var sqDist = getSqSegDist(points[i], points[first], points[last]);\n\n        if (sqDist > maxSqDist) {\n            index = i;\n            maxSqDist = sqDist;\n        }\n    }\n\n    if (maxSqDist > sqTolerance) {\n        if (index - first > 1) simplifyDPStep(points, first, index, sqTolerance, simplified);\n        simplified.push(points[index]);\n        if (last - index > 1) simplifyDPStep(points, index, last, sqTolerance, simplified);\n    }\n}\n\n// simplification using Ramer-Douglas-Peucker algorithm\nfunction simplifyDouglasPeucker(points, sqTolerance) {\n    var last = points.length - 1;\n\n    var simplified = [points[0]];\n    simplifyDPStep(points, 0, last, sqTolerance, simplified);\n    simplified.push(points[last]);\n\n    return simplified;\n}\n\n// both algorithms combined for awesome performance\nfunction simplify(points, tolerance, highestQuality) {\n\n    if (points.length <= 2) return points;\n\n    var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;\n\n    points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);\n    points = simplifyDouglasPeucker(points, sqTolerance);\n\n    return points;\n}\n/* harmony default export */ __webpack_exports__[\"a\"] = (simplify);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjc0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2dlb21ldHJ5LWV4dHJ1ZGUvc3JjL3NpbXBsaWZ5LmpzPzkwM2YiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAoYykgMjAxNywgVmxhZGltaXIgQWdhZm9ua2luXG4gU2ltcGxpZnkuanMsIGEgaGlnaC1wZXJmb3JtYW5jZSBKUyBwb2x5bGluZSBzaW1wbGlmaWNhdGlvbiBsaWJyYXJ5XG4gbW91cm5lci5naXRodWIuaW8vc2ltcGxpZnktanNcbiovXG5cbi8vIHRvIHN1aXQgeW91ciBwb2ludCBmb3JtYXQsIHJ1biBzZWFyY2gvcmVwbGFjZSBmb3IgJy54JyBhbmQgJy55Jztcbi8vIGZvciAzRCB2ZXJzaW9uLCBzZWUgM2QgYnJhbmNoIChjb25maWd1cmFiaWxpdHkgd291bGQgZHJhdyBzaWduaWZpY2FudCBwZXJmb3JtYW5jZSBvdmVyaGVhZClcblxuLy8gc3F1YXJlIGRpc3RhbmNlIGJldHdlZW4gMiBwb2ludHNcbmZ1bmN0aW9uIGdldFNxRGlzdChwMSwgcDIpIHtcblxuICAgIHZhciBkeCA9IHAxWzBdIC0gcDJbMF0sXG4gICAgICAgIGR5ID0gcDFbMV0gLSBwMlsxXTtcblxuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cblxuLy8gc3F1YXJlIGRpc3RhbmNlIGZyb20gYSBwb2ludCB0byBhIHNlZ21lbnRcbmZ1bmN0aW9uIGdldFNxU2VnRGlzdChwLCBwMSwgcDIpIHtcblxuICAgIHZhciB4ID0gcDFbMF0sXG4gICAgICAgIHkgPSBwMVsxXSxcbiAgICAgICAgZHggPSBwMlswXSAtIHgsXG4gICAgICAgIGR5ID0gcDJbMV0gLSB5O1xuXG4gICAgaWYgKGR4ICE9PSAwIHx8IGR5ICE9PSAwKSB7XG5cbiAgICAgICAgdmFyIHQgPSAoKHBbMF0gLSB4KSAqIGR4ICsgKHBbMV0gLSB5KSAqIGR5KSAvIChkeCAqIGR4ICsgZHkgKiBkeSk7XG5cbiAgICAgICAgaWYgKHQgPiAxKSB7XG4gICAgICAgICAgICB4ID0gcDJbMF07XG4gICAgICAgICAgICB5ID0gcDJbMV07XG5cbiAgICAgICAgfSBlbHNlIGlmICh0ID4gMCkge1xuICAgICAgICAgICAgeCArPSBkeCAqIHQ7XG4gICAgICAgICAgICB5ICs9IGR5ICogdDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGR4ID0gcFswXSAtIHg7XG4gICAgZHkgPSBwWzFdIC0geTtcblxuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cbi8vIHJlc3Qgb2YgdGhlIGNvZGUgZG9lc24ndCBjYXJlIGFib3V0IHBvaW50IGZvcm1hdFxuXG4vLyBiYXNpYyBkaXN0YW5jZS1iYXNlZCBzaW1wbGlmaWNhdGlvblxuZnVuY3Rpb24gc2ltcGxpZnlSYWRpYWxEaXN0KHBvaW50cywgc3FUb2xlcmFuY2UpIHtcblxuICAgIHZhciBwcmV2UG9pbnQgPSBwb2ludHNbMF0sXG4gICAgICAgIG5ld1BvaW50cyA9IFtwcmV2UG9pbnRdLFxuICAgICAgICBwb2ludDtcblxuICAgIGZvciAodmFyIGkgPSAxLCBsZW4gPSBwb2ludHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgcG9pbnQgPSBwb2ludHNbaV07XG5cbiAgICAgICAgaWYgKGdldFNxRGlzdChwb2ludCwgcHJldlBvaW50KSA+IHNxVG9sZXJhbmNlKSB7XG4gICAgICAgICAgICBuZXdQb2ludHMucHVzaChwb2ludCk7XG4gICAgICAgICAgICBwcmV2UG9pbnQgPSBwb2ludDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcmV2UG9pbnQgIT09IHBvaW50KSBuZXdQb2ludHMucHVzaChwb2ludCk7XG5cbiAgICByZXR1cm4gbmV3UG9pbnRzO1xufVxuXG5mdW5jdGlvbiBzaW1wbGlmeURQU3RlcChwb2ludHMsIGZpcnN0LCBsYXN0LCBzcVRvbGVyYW5jZSwgc2ltcGxpZmllZCkge1xuICAgIHZhciBtYXhTcURpc3QgPSBzcVRvbGVyYW5jZSxcbiAgICAgICAgaW5kZXg7XG5cbiAgICBmb3IgKHZhciBpID0gZmlyc3QgKyAxOyBpIDwgbGFzdDsgaSsrKSB7XG4gICAgICAgIHZhciBzcURpc3QgPSBnZXRTcVNlZ0Rpc3QocG9pbnRzW2ldLCBwb2ludHNbZmlyc3RdLCBwb2ludHNbbGFzdF0pO1xuXG4gICAgICAgIGlmIChzcURpc3QgPiBtYXhTcURpc3QpIHtcbiAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgIG1heFNxRGlzdCA9IHNxRGlzdDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtYXhTcURpc3QgPiBzcVRvbGVyYW5jZSkge1xuICAgICAgICBpZiAoaW5kZXggLSBmaXJzdCA+IDEpIHNpbXBsaWZ5RFBTdGVwKHBvaW50cywgZmlyc3QsIGluZGV4LCBzcVRvbGVyYW5jZSwgc2ltcGxpZmllZCk7XG4gICAgICAgIHNpbXBsaWZpZWQucHVzaChwb2ludHNbaW5kZXhdKTtcbiAgICAgICAgaWYgKGxhc3QgLSBpbmRleCA+IDEpIHNpbXBsaWZ5RFBTdGVwKHBvaW50cywgaW5kZXgsIGxhc3QsIHNxVG9sZXJhbmNlLCBzaW1wbGlmaWVkKTtcbiAgICB9XG59XG5cbi8vIHNpbXBsaWZpY2F0aW9uIHVzaW5nIFJhbWVyLURvdWdsYXMtUGV1Y2tlciBhbGdvcml0aG1cbmZ1bmN0aW9uIHNpbXBsaWZ5RG91Z2xhc1BldWNrZXIocG9pbnRzLCBzcVRvbGVyYW5jZSkge1xuICAgIHZhciBsYXN0ID0gcG9pbnRzLmxlbmd0aCAtIDE7XG5cbiAgICB2YXIgc2ltcGxpZmllZCA9IFtwb2ludHNbMF1dO1xuICAgIHNpbXBsaWZ5RFBTdGVwKHBvaW50cywgMCwgbGFzdCwgc3FUb2xlcmFuY2UsIHNpbXBsaWZpZWQpO1xuICAgIHNpbXBsaWZpZWQucHVzaChwb2ludHNbbGFzdF0pO1xuXG4gICAgcmV0dXJuIHNpbXBsaWZpZWQ7XG59XG5cbi8vIGJvdGggYWxnb3JpdGhtcyBjb21iaW5lZCBmb3IgYXdlc29tZSBwZXJmb3JtYW5jZVxuZnVuY3Rpb24gc2ltcGxpZnkocG9pbnRzLCB0b2xlcmFuY2UsIGhpZ2hlc3RRdWFsaXR5KSB7XG5cbiAgICBpZiAocG9pbnRzLmxlbmd0aCA8PSAyKSByZXR1cm4gcG9pbnRzO1xuXG4gICAgdmFyIHNxVG9sZXJhbmNlID0gdG9sZXJhbmNlICE9PSB1bmRlZmluZWQgPyB0b2xlcmFuY2UgKiB0b2xlcmFuY2UgOiAxO1xuXG4gICAgcG9pbnRzID0gaGlnaGVzdFF1YWxpdHkgPyBwb2ludHMgOiBzaW1wbGlmeVJhZGlhbERpc3QocG9pbnRzLCBzcVRvbGVyYW5jZSk7XG4gICAgcG9pbnRzID0gc2ltcGxpZnlEb3VnbGFzUGV1Y2tlcihwb2ludHMsIHNxVG9sZXJhbmNlKTtcblxuICAgIHJldHVybiBwb2ludHM7XG59XG5leHBvcnQgZGVmYXVsdCBzaW1wbGlmeTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9nZW9tZXRyeS1leHRydWRlL3NyYy9zaW1wbGlmeS5qc1xuLy8gbW9kdWxlIGlkID0gMjc0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///274\n");

/***/ }),
/* 275 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export dot */\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = v2Dot;\n/* unused harmony export normalize */\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = v2Normalize;\n/* unused harmony export scale */\n/* unused harmony export mul */\n/* unused harmony export scaleAndAdd */\n/* unused harmony export add */\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = v2Add;\n/* unused harmony export sub */\n/* unused harmony export v2Sub */\n/* harmony export (immutable) */ __webpack_exports__[\"h\"] = v3Sub;\n/* harmony export (immutable) */ __webpack_exports__[\"g\"] = v3Normalize;\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = v3Cross;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = slerp;\n/* unused harmony export lineIntersection */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = area;\n/* unused harmony export triangleArea */\nfunction dot(v1, v2) {\n    return v1[0] * v2[0] + v1[1] * v2[1] + v1[2] * v2[2];\n}\nfunction v2Dot(v1, v2) {\n    return v1[0] * v2[0] + v1[1] * v2[1];\n}\n\nfunction normalize(out, v) {\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    const d = Math.sqrt(x * x + y * y + z * z);\n    out[0] = x / d;\n    out[1] = y / d;\n    out[2] = z / d;\n    return out;\n}\n\nfunction v2Normalize(out, v) {\n    const x = v[0];\n    const y = v[1];\n    const d = Math.sqrt(x * x + y * y);\n    out[0] = x / d;\n    out[1] = y / d;\n    return out;\n}\n\nfunction scale(out, v, s) {\n    out[0] = v[0] * s;\n    out[1] = v[1] * s;\n    out[2] = v[2] * s;\n    return out;\n}\n\nfunction mul(out, v1, v2) {\n    out[0] = v1[0] * v2[0];\n    out[1] = v1[1] * v2[1];\n    out[2] = v1[2] * v2[2];\n    return out;\n}\n\nfunction scaleAndAdd(out, v1, v2, s) {\n    out[0] = v1[0] + v2[0] * s;\n    out[1] = v1[1] + v2[1] * s;\n    out[2] = v1[2] + v2[2] * s;\n    return out;\n}\n\nfunction add(out, v1, v2) {\n    out[0] = v1[0] + v2[0];\n    out[1] = v1[1] + v2[1];\n    out[2] = v1[2] + v2[2];\n    return out;\n}\n\nfunction v2Add(out, v1, v2) {\n    out[0] = v1[0] + v2[0];\n    out[1] = v1[1] + v2[1];\n    return out;\n}\n\nfunction sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    out[2] = v1[2] - v2[2];\n    return out;\n}\n\nfunction v2Sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    return out;\n}\n\nfunction v3Sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    out[2] = v1[2] - v2[2];\n    return out;\n}\n\nfunction v3Normalize(out, v) {\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    const d = Math.sqrt(x * x + y * y + z * z);\n    out[0] = x / d;\n    out[1] = y / d;\n    out[2] = z / d;\n    return out;\n}\n\nfunction v3Cross(out, v1, v2) {\n    var ax = v1[0], ay = v1[1], az = v1[2],\n        bx = v2[0], by = v2[1], bz = v2[2];\n\n    out[0] = ay * bz - az * by;\n    out[1] = az * bx - ax * bz;\n    out[2] = ax * by - ay * bx;\n    return out;\n}\n\nconst rel = [];\n// start and end must be normalized\nfunction slerp(out, start, end, t) {\n    // https://keithmaggio.wordpress.com/2011/02/15/math-magician-lerp-slerp-and-nlerp/\n    const cosT = dot(start, end);\n    const theta = Math.acos(cosT) * t;\n\n    scaleAndAdd(rel, end, start, -cosT);\n    normalize(rel, rel);// start and rel Orthonormal basis\n\n    scale(out, start, Math.cos(theta));\n    scaleAndAdd(out, out, rel, Math.sin(theta));\n\n    return out;\n}\n\nfunction lineIntersection(x1, y1, x2, y2, x3, y3, x4, y4, out, writeOffset) {\n    const dx1 = x2 - x1;\n    const dx2 = x4 - x3;\n    const dy1 = y2 - y1;\n    const dy2 = y4 - y3;\n\n    const cross = dy2 * dx1 - dx2 * dy1;\n    const tmp1 = y1 - y3;\n    const tmp2 = x1 - x3;\n    const t1 = (dx2 * tmp1 - dy2 * tmp2) / cross;\n    // const t2 = (dx1 * tmp1 - dy1 * tmp2) / cross;\n\n    out[writeOffset] = x1 + t1 * (x2 - x1);\n    out[writeOffset + 1] = y1 + t1 * (y2 - y1);\n\n    return t1;\n}\n\nfunction area(points, start, end) {\n    // Signed polygon area\n    const n = end - start;\n    if (n < 3) {\n        return 0;\n    }\n    let area = 0;\n    for (let i = (end - 1) * 2, j = start * 2; j < end * 2;) {\n        const x0 = points[i];\n        const y0 = points[i + 1];\n        const x1 = points[j];\n        const y1 = points[j + 1];\n        i = j;\n        j += 2;\n        area += x0 * y1 - x1 * y0;\n    }\n\n    return area;\n}\n\n\nfunction triangleArea(x0, y0, x1, y1, x2, y2) {\n    return (x1 - x0) * (y2 - y1) - (y1 - y0) * (x2 - x1);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjc1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2dlb21ldHJ5LWV4dHJ1ZGUvc3JjL21hdGguanM/OTg2ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZG90KHYxLCB2Mikge1xuICAgIHJldHVybiB2MVswXSAqIHYyWzBdICsgdjFbMV0gKiB2MlsxXSArIHYxWzJdICogdjJbMl07XG59XG5leHBvcnQgZnVuY3Rpb24gdjJEb3QodjEsIHYyKSB7XG4gICAgcmV0dXJuIHYxWzBdICogdjJbMF0gKyB2MVsxXSAqIHYyWzFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKG91dCwgdikge1xuICAgIGNvbnN0IHggPSB2WzBdO1xuICAgIGNvbnN0IHkgPSB2WzFdO1xuICAgIGNvbnN0IHogPSB2WzJdO1xuICAgIGNvbnN0IGQgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTtcbiAgICBvdXRbMF0gPSB4IC8gZDtcbiAgICBvdXRbMV0gPSB5IC8gZDtcbiAgICBvdXRbMl0gPSB6IC8gZDtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdjJOb3JtYWxpemUob3V0LCB2KSB7XG4gICAgY29uc3QgeCA9IHZbMF07XG4gICAgY29uc3QgeSA9IHZbMV07XG4gICAgY29uc3QgZCA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICBvdXRbMF0gPSB4IC8gZDtcbiAgICBvdXRbMV0gPSB5IC8gZDtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUob3V0LCB2LCBzKSB7XG4gICAgb3V0WzBdID0gdlswXSAqIHM7XG4gICAgb3V0WzFdID0gdlsxXSAqIHM7XG4gICAgb3V0WzJdID0gdlsyXSAqIHM7XG4gICAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG11bChvdXQsIHYxLCB2Mikge1xuICAgIG91dFswXSA9IHYxWzBdICogdjJbMF07XG4gICAgb3V0WzFdID0gdjFbMV0gKiB2MlsxXTtcbiAgICBvdXRbMl0gPSB2MVsyXSAqIHYyWzJdO1xuICAgIHJldHVybiBvdXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUFuZEFkZChvdXQsIHYxLCB2Miwgcykge1xuICAgIG91dFswXSA9IHYxWzBdICsgdjJbMF0gKiBzO1xuICAgIG91dFsxXSA9IHYxWzFdICsgdjJbMV0gKiBzO1xuICAgIG91dFsyXSA9IHYxWzJdICsgdjJbMl0gKiBzO1xuICAgIHJldHVybiBvdXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGQob3V0LCB2MSwgdjIpIHtcbiAgICBvdXRbMF0gPSB2MVswXSArIHYyWzBdO1xuICAgIG91dFsxXSA9IHYxWzFdICsgdjJbMV07XG4gICAgb3V0WzJdID0gdjFbMl0gKyB2MlsyXTtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdjJBZGQob3V0LCB2MSwgdjIpIHtcbiAgICBvdXRbMF0gPSB2MVswXSArIHYyWzBdO1xuICAgIG91dFsxXSA9IHYxWzFdICsgdjJbMV07XG4gICAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YihvdXQsIHYxLCB2Mikge1xuICAgIG91dFswXSA9IHYxWzBdIC0gdjJbMF07XG4gICAgb3V0WzFdID0gdjFbMV0gLSB2MlsxXTtcbiAgICBvdXRbMl0gPSB2MVsyXSAtIHYyWzJdO1xuICAgIHJldHVybiBvdXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2MlN1YihvdXQsIHYxLCB2Mikge1xuICAgIG91dFswXSA9IHYxWzBdIC0gdjJbMF07XG4gICAgb3V0WzFdID0gdjFbMV0gLSB2MlsxXTtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdjNTdWIob3V0LCB2MSwgdjIpIHtcbiAgICBvdXRbMF0gPSB2MVswXSAtIHYyWzBdO1xuICAgIG91dFsxXSA9IHYxWzFdIC0gdjJbMV07XG4gICAgb3V0WzJdID0gdjFbMl0gLSB2MlsyXTtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdjNOb3JtYWxpemUob3V0LCB2KSB7XG4gICAgY29uc3QgeCA9IHZbMF07XG4gICAgY29uc3QgeSA9IHZbMV07XG4gICAgY29uc3QgeiA9IHZbMl07XG4gICAgY29uc3QgZCA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICAgIG91dFswXSA9IHggLyBkO1xuICAgIG91dFsxXSA9IHkgLyBkO1xuICAgIG91dFsyXSA9IHogLyBkO1xuICAgIHJldHVybiBvdXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2M0Nyb3NzKG91dCwgdjEsIHYyKSB7XG4gICAgdmFyIGF4ID0gdjFbMF0sIGF5ID0gdjFbMV0sIGF6ID0gdjFbMl0sXG4gICAgICAgIGJ4ID0gdjJbMF0sIGJ5ID0gdjJbMV0sIGJ6ID0gdjJbMl07XG5cbiAgICBvdXRbMF0gPSBheSAqIGJ6IC0gYXogKiBieTtcbiAgICBvdXRbMV0gPSBheiAqIGJ4IC0gYXggKiBiejtcbiAgICBvdXRbMl0gPSBheCAqIGJ5IC0gYXkgKiBieDtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5jb25zdCByZWwgPSBbXTtcbi8vIHN0YXJ0IGFuZCBlbmQgbXVzdCBiZSBub3JtYWxpemVkXG5leHBvcnQgZnVuY3Rpb24gc2xlcnAob3V0LCBzdGFydCwgZW5kLCB0KSB7XG4gICAgLy8gaHR0cHM6Ly9rZWl0aG1hZ2dpby53b3JkcHJlc3MuY29tLzIwMTEvMDIvMTUvbWF0aC1tYWdpY2lhbi1sZXJwLXNsZXJwLWFuZC1ubGVycC9cbiAgICBjb25zdCBjb3NUID0gZG90KHN0YXJ0LCBlbmQpO1xuICAgIGNvbnN0IHRoZXRhID0gTWF0aC5hY29zKGNvc1QpICogdDtcblxuICAgIHNjYWxlQW5kQWRkKHJlbCwgZW5kLCBzdGFydCwgLWNvc1QpO1xuICAgIG5vcm1hbGl6ZShyZWwsIHJlbCk7Ly8gc3RhcnQgYW5kIHJlbCBPcnRob25vcm1hbCBiYXNpc1xuXG4gICAgc2NhbGUob3V0LCBzdGFydCwgTWF0aC5jb3ModGhldGEpKTtcbiAgICBzY2FsZUFuZEFkZChvdXQsIG91dCwgcmVsLCBNYXRoLnNpbih0aGV0YSkpO1xuXG4gICAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxpbmVJbnRlcnNlY3Rpb24oeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0LCBvdXQsIHdyaXRlT2Zmc2V0KSB7XG4gICAgY29uc3QgZHgxID0geDIgLSB4MTtcbiAgICBjb25zdCBkeDIgPSB4NCAtIHgzO1xuICAgIGNvbnN0IGR5MSA9IHkyIC0geTE7XG4gICAgY29uc3QgZHkyID0geTQgLSB5MztcblxuICAgIGNvbnN0IGNyb3NzID0gZHkyICogZHgxIC0gZHgyICogZHkxO1xuICAgIGNvbnN0IHRtcDEgPSB5MSAtIHkzO1xuICAgIGNvbnN0IHRtcDIgPSB4MSAtIHgzO1xuICAgIGNvbnN0IHQxID0gKGR4MiAqIHRtcDEgLSBkeTIgKiB0bXAyKSAvIGNyb3NzO1xuICAgIC8vIGNvbnN0IHQyID0gKGR4MSAqIHRtcDEgLSBkeTEgKiB0bXAyKSAvIGNyb3NzO1xuXG4gICAgb3V0W3dyaXRlT2Zmc2V0XSA9IHgxICsgdDEgKiAoeDIgLSB4MSk7XG4gICAgb3V0W3dyaXRlT2Zmc2V0ICsgMV0gPSB5MSArIHQxICogKHkyIC0geTEpO1xuXG4gICAgcmV0dXJuIHQxO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXJlYShwb2ludHMsIHN0YXJ0LCBlbmQpIHtcbiAgICAvLyBTaWduZWQgcG9seWdvbiBhcmVhXG4gICAgY29uc3QgbiA9IGVuZCAtIHN0YXJ0O1xuICAgIGlmIChuIDwgMykge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgbGV0IGFyZWEgPSAwO1xuICAgIGZvciAobGV0IGkgPSAoZW5kIC0gMSkgKiAyLCBqID0gc3RhcnQgKiAyOyBqIDwgZW5kICogMjspIHtcbiAgICAgICAgY29uc3QgeDAgPSBwb2ludHNbaV07XG4gICAgICAgIGNvbnN0IHkwID0gcG9pbnRzW2kgKyAxXTtcbiAgICAgICAgY29uc3QgeDEgPSBwb2ludHNbal07XG4gICAgICAgIGNvbnN0IHkxID0gcG9pbnRzW2ogKyAxXTtcbiAgICAgICAgaSA9IGo7XG4gICAgICAgIGogKz0gMjtcbiAgICAgICAgYXJlYSArPSB4MCAqIHkxIC0geDEgKiB5MDtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJlYTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gdHJpYW5nbGVBcmVhKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgICByZXR1cm4gKHgxIC0geDApICogKHkyIC0geTEpIC0gKHkxIC0geTApICogKHgyIC0geDEpO1xufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2dlb21ldHJ5LWV4dHJ1ZGUvc3JjL21hdGguanNcbi8vIG1vZHVsZSBpZCA9IDI3NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///275\n");

/***/ }),
/* 276 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export generateCircle */\nfunction generateCircle(center, innerRadius, outerRadius, gap) {\n    let polylines = [];\n    let cx = center[0];\n    let cy = center[1];\n    for (let r = innerRadius; r <= outerRadius; r += gap) {\n        let polyline = [];\n        for (let a = 0; a <= 360; a += 1) {\n            let x = cx + Math.cos(a / 180 * Math.PI) * r;\n            let y = cy + Math.sin(a / 180 * Math.PI) * r;\n            polyline.push([x, y]);\n        }\n\n        polylines.push(polyline);\n    }\n    return polylines;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjc2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRvci9jaXJjbGUuanM/Yzg5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVDaXJjbGUoY2VudGVyLCBpbm5lclJhZGl1cywgb3V0ZXJSYWRpdXMsIGdhcCkge1xuICAgIGxldCBwb2x5bGluZXMgPSBbXTtcbiAgICBsZXQgY3ggPSBjZW50ZXJbMF07XG4gICAgbGV0IGN5ID0gY2VudGVyWzFdO1xuICAgIGZvciAobGV0IHIgPSBpbm5lclJhZGl1czsgciA8PSBvdXRlclJhZGl1czsgciArPSBnYXApIHtcbiAgICAgICAgbGV0IHBvbHlsaW5lID0gW107XG4gICAgICAgIGZvciAobGV0IGEgPSAwOyBhIDw9IDM2MDsgYSArPSAxKSB7XG4gICAgICAgICAgICBsZXQgeCA9IGN4ICsgTWF0aC5jb3MoYSAvIDE4MCAqIE1hdGguUEkpICogcjtcbiAgICAgICAgICAgIGxldCB5ID0gY3kgKyBNYXRoLnNpbihhIC8gMTgwICogTWF0aC5QSSkgKiByO1xuICAgICAgICAgICAgcG9seWxpbmUucHVzaChbeCwgeV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcG9seWxpbmVzLnB1c2gocG9seWxpbmUpO1xuICAgIH1cbiAgICByZXR1cm4gcG9seWxpbmVzO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9nZW5lcmF0b3IvY2lyY2xlLmpzXG4vLyBtb2R1bGUgaWQgPSAyNzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///276\n");

/***/ }),
/* 277 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"a\"] = generatePerlin;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = perlinSeed;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__dep_noise2__ = __webpack_require__(278);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__dep_noise2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__dep_noise2__);\n// import {noise, noiseSeed} from '../dep/noise';\n\n\nfunction halton(index, base) {\n\n    var result = 0;\n    var f = 1 / base;\n    var i = index;\n    while (i > 0) {\n        result = result + f * (i % base);\n        i = Math.floor(i / base);\n        f = f / base;\n    }\n    return result;\n}\n\n\nfunction lineGenerator(x, y, min, max, trail, noiseScale) {\n    // let points = new Float32Array(20000);\n    // let off = 0;\n    // points[off++] = x;\n    // points[off++] = y;\n    let points = [[x, y]];\n    // https://github.com/wangyasai/Perlin-Noise/blob/gh-pages/js/sketch.js#L97\n    for (let i = 0; i < trail; i++) {\n        for (let k = 0; k < 10; k++) {\n            let angle = Object(__WEBPACK_IMPORTED_MODULE_0__dep_noise2__[\"perlin2\"])(x / noiseScale, y / noiseScale) * Math.PI * 2 * 40 * noiseScale;\n            let vx = Math.cos(angle) / 200;\n            let vy = Math.sin(angle) / 200;\n            x += vx;\n            y += vy;\n        }\n\n        if (x > max[0] || x < min[0] || y > max[1] || y < min[1]) {\n            break;\n        }\n\n        points.push([x, y]);\n        // points[off++] = x;\n        // points[off++] = y;\n    }\n    return points;\n    // return points.subarray(0, off);\n}\nfunction generatePerlin(min, max, number, trail, noiseScale) {\n    let polylines = [];\n    let width = max[0] - min[0];\n    let height = max[1] - min[1];\n    for (let i = 0; i < number; i++) {\n        let x = halton(i, 2) * width + min[0];\n        let y = halton(i, 3) * height + min[1];\n        // let x = Math.random() * width + min[0];\n        // let y = Math.random() * height + min[1];\n\n        let polyline = lineGenerator(x, y, min, max, trail, noiseScale);\n        if (polyline.length >= 10) {\n            polylines.push(polyline);\n        }\n    }\n\n    return polylines;\n}\nfunction perlinSeed(value) {\n    Object(__WEBPACK_IMPORTED_MODULE_0__dep_noise2__[\"seed\"])(value);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjc3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRvci9wZXJsaW4uanM/NTZjMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQge25vaXNlLCBub2lzZVNlZWR9IGZyb20gJy4uL2RlcC9ub2lzZSc7XG5pbXBvcnQge3BlcmxpbjIsIHNlZWR9IGZyb20gJy4uL2RlcC9ub2lzZTInO1xuXG5mdW5jdGlvbiBoYWx0b24oaW5kZXgsIGJhc2UpIHtcblxuICAgIHZhciByZXN1bHQgPSAwO1xuICAgIHZhciBmID0gMSAvIGJhc2U7XG4gICAgdmFyIGkgPSBpbmRleDtcbiAgICB3aGlsZSAoaSA+IDApIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgZiAqIChpICUgYmFzZSk7XG4gICAgICAgIGkgPSBNYXRoLmZsb29yKGkgLyBiYXNlKTtcbiAgICAgICAgZiA9IGYgLyBiYXNlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbmZ1bmN0aW9uIGxpbmVHZW5lcmF0b3IoeCwgeSwgbWluLCBtYXgsIHRyYWlsLCBub2lzZVNjYWxlKSB7XG4gICAgLy8gbGV0IHBvaW50cyA9IG5ldyBGbG9hdDMyQXJyYXkoMjAwMDApO1xuICAgIC8vIGxldCBvZmYgPSAwO1xuICAgIC8vIHBvaW50c1tvZmYrK10gPSB4O1xuICAgIC8vIHBvaW50c1tvZmYrK10gPSB5O1xuICAgIGxldCBwb2ludHMgPSBbW3gsIHldXTtcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2FuZ3lhc2FpL1Blcmxpbi1Ob2lzZS9ibG9iL2doLXBhZ2VzL2pzL3NrZXRjaC5qcyNMOTdcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYWlsOyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCAxMDsgaysrKSB7XG4gICAgICAgICAgICBsZXQgYW5nbGUgPSBwZXJsaW4yKHggLyBub2lzZVNjYWxlLCB5IC8gbm9pc2VTY2FsZSkgKiBNYXRoLlBJICogMiAqIDQwICogbm9pc2VTY2FsZTtcbiAgICAgICAgICAgIGxldCB2eCA9IE1hdGguY29zKGFuZ2xlKSAvIDIwMDtcbiAgICAgICAgICAgIGxldCB2eSA9IE1hdGguc2luKGFuZ2xlKSAvIDIwMDtcbiAgICAgICAgICAgIHggKz0gdng7XG4gICAgICAgICAgICB5ICs9IHZ5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHggPiBtYXhbMF0gfHwgeCA8IG1pblswXSB8fCB5ID4gbWF4WzFdIHx8IHkgPCBtaW5bMV0pIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgcG9pbnRzLnB1c2goW3gsIHldKTtcbiAgICAgICAgLy8gcG9pbnRzW29mZisrXSA9IHg7XG4gICAgICAgIC8vIHBvaW50c1tvZmYrK10gPSB5O1xuICAgIH1cbiAgICByZXR1cm4gcG9pbnRzO1xuICAgIC8vIHJldHVybiBwb2ludHMuc3ViYXJyYXkoMCwgb2ZmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVBlcmxpbihtaW4sIG1heCwgbnVtYmVyLCB0cmFpbCwgbm9pc2VTY2FsZSkge1xuICAgIGxldCBwb2x5bGluZXMgPSBbXTtcbiAgICBsZXQgd2lkdGggPSBtYXhbMF0gLSBtaW5bMF07XG4gICAgbGV0IGhlaWdodCA9IG1heFsxXSAtIG1pblsxXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlcjsgaSsrKSB7XG4gICAgICAgIGxldCB4ID0gaGFsdG9uKGksIDIpICogd2lkdGggKyBtaW5bMF07XG4gICAgICAgIGxldCB5ID0gaGFsdG9uKGksIDMpICogaGVpZ2h0ICsgbWluWzFdO1xuICAgICAgICAvLyBsZXQgeCA9IE1hdGgucmFuZG9tKCkgKiB3aWR0aCArIG1pblswXTtcbiAgICAgICAgLy8gbGV0IHkgPSBNYXRoLnJhbmRvbSgpICogaGVpZ2h0ICsgbWluWzFdO1xuXG4gICAgICAgIGxldCBwb2x5bGluZSA9IGxpbmVHZW5lcmF0b3IoeCwgeSwgbWluLCBtYXgsIHRyYWlsLCBub2lzZVNjYWxlKTtcbiAgICAgICAgaWYgKHBvbHlsaW5lLmxlbmd0aCA+PSAxMCkge1xuICAgICAgICAgICAgcG9seWxpbmVzLnB1c2gocG9seWxpbmUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvbHlsaW5lcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBwZXJsaW5TZWVkKHZhbHVlKSB7XG4gICAgc2VlZCh2YWx1ZSk7XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZ2VuZXJhdG9yL3Blcmxpbi5qc1xuLy8gbW9kdWxlIGlkID0gMjc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///277\n");

/***/ }),
/* 278 */
/***/ (function(module, exports) {

eval("/*\n * A speed-improved perlin and simplex noise algorithms for 2D.\n *\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n * Converted to Javascript by Joseph Gentle.\n *\n * Version 2012-03-09\n *\n * This code was placed in the public domain by its original author,\n * Stefan Gustavson. You may use it as you see fit, but\n * attribution is appreciated.\n *\n */\n\n\nfunction Grad(x, y, z) {\n    this.x = x; this.y = y; this.z = z;\n}\n\nGrad.prototype.dot2 = function(x, y) {\n    return this.x*x + this.y*y;\n};\n\nGrad.prototype.dot3 = function(x, y, z) {\n    return this.x*x + this.y*y + this.z*z;\n};\n\nvar grad3 = [new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),\n                new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),\n                new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)];\n\nvar p = [151,160,137,91,90,15,\n131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,\n190, 6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,\n88,237,149,56,87,174,20,125,136,171,168, 68,175,74,165,71,134,139,48,27,166,\n77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,\n102,143,54, 65,25,63,161, 1,216,80,73,209,76,132,187,208, 89,18,169,200,196,\n135,130,116,188,159,86,164,100,109,198,173,186, 3,64,52,217,226,250,124,123,\n5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,\n223,183,170,213,119,248,152, 2,44,154,163, 70,221,153,101,155,167, 43,172,9,\n129,22,39,253, 19,98,108,110,79,113,224,232,178,185, 112,104,218,246,97,228,\n251,34,242,193,238,210,144,12,191,179,162,241, 81,51,145,235,249,14,239,107,\n49,192,214, 31,181,199,106,157,184, 84,204,176,115,121,50,45,127, 4,150,254,\n138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];\n// To remove the need for index wrapping, double the permutation table length\nvar perm = new Array(512);\nvar gradP = new Array(512);\n\n// This isn't a very good seeding function, but it works ok. It supports 2^16\n// different seed values. Write something better if you need more seeds.\nmodule.exports.seed = function(seed) {\n    if(seed > 0 && seed < 1) {\n    // Scale the seed out\n    seed *= 65536;\n    }\n\n    seed = Math.floor(seed);\n    if(seed < 256) {\n    seed |= seed << 8;\n    }\n\n    for(var i = 0; i < 256; i++) {\n    var v;\n    if (i & 1) {\n        v = p[i] ^ (seed & 255);\n    } else {\n        v = p[i] ^ ((seed>>8) & 255);\n    }\n\n    perm[i] = perm[i + 256] = v;\n    gradP[i] = gradP[i + 256] = grad3[v % 12];\n    }\n};\n\nmodule.exports.seed(0);\n\n/*\nfor(var i=0; i<256; i++) {\n    perm[i] = perm[i + 256] = p[i];\n    gradP[i] = gradP[i + 256] = grad3[perm[i] % 12];\n}*/\n\n// Skewing and unskewing factors for 2, 3, and 4 dimensions\nvar F2 = 0.5*(Math.sqrt(3)-1);\nvar G2 = (3-Math.sqrt(3))/6;\n\nvar F3 = 1/3;\nvar G3 = 1/6;\n\n// 2D simplex noise\nmodule.exports.simplex2 = function(xin, yin) {\n    var n0, n1, n2; // Noise contributions from the three corners\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin+yin)*F2; // Hairy factor for 2D\n    var i = Math.floor(xin+s);\n    var j = Math.floor(yin+s);\n    var t = (i+j)*G2;\n    var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin-j+t;\n    // For the 2D case, the simplex shape is an equilateral triangle.\n    // Determine which simplex we are in.\n    var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n    if(x0>y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n    i1=1; j1=0;\n    } else {    // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n    i1=0; j1=1;\n    }\n    // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n    // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n    // c = (3-sqrt(3))/6\n    var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n    var y1 = y0 - j1 + G2;\n    var x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\n    var y2 = y0 - 1 + 2 * G2;\n    // Work out the hashed gradient indices of the three simplex corners\n    i &= 255;\n    j &= 255;\n    var gi0 = gradP[i+perm[j]];\n    var gi1 = gradP[i+i1+perm[j+j1]];\n    var gi2 = gradP[i+1+perm[j+1]];\n    // Calculate the contribution from the three corners\n    var t0 = 0.5 - x0*x0-y0*y0;\n    if(t0<0) {\n    n0 = 0;\n    } else {\n    t0 *= t0;\n    n0 = t0 * t0 * gi0.dot2(x0, y0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.5 - x1*x1-y1*y1;\n    if(t1<0) {\n    n1 = 0;\n    } else {\n    t1 *= t1;\n    n1 = t1 * t1 * gi1.dot2(x1, y1);\n    }\n    var t2 = 0.5 - x2*x2-y2*y2;\n    if(t2<0) {\n    n2 = 0;\n    } else {\n    t2 *= t2;\n    n2 = t2 * t2 * gi2.dot2(x2, y2);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 70 * (n0 + n1 + n2);\n};\n\n// 3D simplex noise\nmodule.exports.simplex3 = function(xin, yin, zin) {\n    var n0, n1, n2, n3; // Noise contributions from the four corners\n\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin+yin+zin)*F3; // Hairy factor for 2D\n    var i = Math.floor(xin+s);\n    var j = Math.floor(yin+s);\n    var k = Math.floor(zin+s);\n\n    var t = (i+j+k)*G3;\n    var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin-j+t;\n    var z0 = zin-k+t;\n\n    // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n    // Determine which simplex we are in.\n    var i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n    var i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n    if(x0 >= y0) {\n    if(y0 >= z0)      { i1=1; j1=0; k1=0; i2=1; j2=1; k2=0; }\n    else if(x0 >= z0) { i1=1; j1=0; k1=0; i2=1; j2=0; k2=1; }\n    else              { i1=0; j1=0; k1=1; i2=1; j2=0; k2=1; }\n    } else {\n    if(y0 < z0)      { i1=0; j1=0; k1=1; i2=0; j2=1; k2=1; }\n    else if(x0 < z0) { i1=0; j1=1; k1=0; i2=0; j2=1; k2=1; }\n    else             { i1=0; j1=1; k1=0; i2=1; j2=1; k2=0; }\n    }\n    // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n    // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n    // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n    // c = 1/6.\n    var x1 = x0 - i1 + G3; // Offsets for second corner\n    var y1 = y0 - j1 + G3;\n    var z1 = z0 - k1 + G3;\n\n    var x2 = x0 - i2 + 2 * G3; // Offsets for third corner\n    var y2 = y0 - j2 + 2 * G3;\n    var z2 = z0 - k2 + 2 * G3;\n\n    var x3 = x0 - 1 + 3 * G3; // Offsets for fourth corner\n    var y3 = y0 - 1 + 3 * G3;\n    var z3 = z0 - 1 + 3 * G3;\n\n    // Work out the hashed gradient indices of the four simplex corners\n    i &= 255;\n    j &= 255;\n    k &= 255;\n    var gi0 = gradP[i+   perm[j+   perm[k   ]]];\n    var gi1 = gradP[i+i1+perm[j+j1+perm[k+k1]]];\n    var gi2 = gradP[i+i2+perm[j+j2+perm[k+k2]]];\n    var gi3 = gradP[i+ 1+perm[j+ 1+perm[k+ 1]]];\n\n    // Calculate the contribution from the four corners\n    var t0 = 0.6 - x0*x0 - y0*y0 - z0*z0;\n    if(t0<0) {\n    n0 = 0;\n    } else {\n    t0 *= t0;\n    n0 = t0 * t0 * gi0.dot3(x0, y0, z0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.6 - x1*x1 - y1*y1 - z1*z1;\n    if(t1<0) {\n    n1 = 0;\n    } else {\n    t1 *= t1;\n    n1 = t1 * t1 * gi1.dot3(x1, y1, z1);\n    }\n    var t2 = 0.6 - x2*x2 - y2*y2 - z2*z2;\n    if(t2<0) {\n    n2 = 0;\n    } else {\n    t2 *= t2;\n    n2 = t2 * t2 * gi2.dot3(x2, y2, z2);\n    }\n    var t3 = 0.6 - x3*x3 - y3*y3 - z3*z3;\n    if(t3<0) {\n    n3 = 0;\n    } else {\n    t3 *= t3;\n    n3 = t3 * t3 * gi3.dot3(x3, y3, z3);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 32 * (n0 + n1 + n2 + n3);\n\n};\n\n// ##### Perlin noise stuff\n\nfunction fade(t) {\n    return t*t*t*(t*(t*6-15)+10);\n}\n\nfunction lerp(a, b, t) {\n    return (1-t)*a + t*b;\n}\n\n// 2D Perlin Noise\nmodule.exports.perlin2 = function(x, y) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y);\n    // Get relative xy coordinates of point within that cell\n    x = x - X; y = y - Y;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255;\n\n    // Calculate noise contributions from each of the four corners\n    var n00 = gradP[X+perm[Y]].dot2(x, y);\n    var n01 = gradP[X+perm[Y+1]].dot2(x, y-1);\n    var n10 = gradP[X+1+perm[Y]].dot2(x-1, y);\n    var n11 = gradP[X+1+perm[Y+1]].dot2(x-1, y-1);\n\n    // Compute the fade curve value for x\n    var u = fade(x);\n\n    // Interpolate the four results\n    return lerp(\n        lerp(n00, n10, u),\n        lerp(n01, n11, u),\n        fade(y));\n};\n\n// 3D Perlin Noise\nmodule.exports.perlin3 = function(x, y, z) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y), Z = Math.floor(z);\n    // Get relative xyz coordinates of point within that cell\n    x = x - X; y = y - Y; z = z - Z;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255; Z = Z & 255;\n\n    // Calculate noise contributions from each of the eight corners\n    var n000 = gradP[X+  perm[Y+  perm[Z  ]]].dot3(x,   y,     z);\n    var n001 = gradP[X+  perm[Y+  perm[Z+1]]].dot3(x,   y,   z-1);\n    var n010 = gradP[X+  perm[Y+1+perm[Z  ]]].dot3(x,   y-1,   z);\n    var n011 = gradP[X+  perm[Y+1+perm[Z+1]]].dot3(x,   y-1, z-1);\n    var n100 = gradP[X+1+perm[Y+  perm[Z  ]]].dot3(x-1,   y,   z);\n    var n101 = gradP[X+1+perm[Y+  perm[Z+1]]].dot3(x-1,   y, z-1);\n    var n110 = gradP[X+1+perm[Y+1+perm[Z  ]]].dot3(x-1, y-1,   z);\n    var n111 = gradP[X+1+perm[Y+1+perm[Z+1]]].dot3(x-1, y-1, z-1);\n\n    // Compute the fade curve value for x, y, z\n    var u = fade(x);\n    var v = fade(y);\n    var w = fade(z);\n\n    // Interpolate\n    return lerp(\n        lerp(\n        lerp(n000, n100, u),\n        lerp(n001, n101, u), w),\n        lerp(\n        lerp(n010, n110, u),\n        lerp(n011, n111, u), w),\n        v);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjc4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2RlcC9ub2lzZTIuanM/ZDhiOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQSBzcGVlZC1pbXByb3ZlZCBwZXJsaW4gYW5kIHNpbXBsZXggbm9pc2UgYWxnb3JpdGhtcyBmb3IgMkQuXG4gKlxuICogQmFzZWQgb24gZXhhbXBsZSBjb2RlIGJ5IFN0ZWZhbiBHdXN0YXZzb24gKHN0ZWd1QGl0bi5saXUuc2UpLlxuICogT3B0aW1pc2F0aW9ucyBieSBQZXRlciBFYXN0bWFuIChwZWFzdG1hbkBkcml6emxlLnN0YW5mb3JkLmVkdSkuXG4gKiBCZXR0ZXIgcmFuayBvcmRlcmluZyBtZXRob2QgYnkgU3RlZmFuIEd1c3RhdnNvbiBpbiAyMDEyLlxuICogQ29udmVydGVkIHRvIEphdmFzY3JpcHQgYnkgSm9zZXBoIEdlbnRsZS5cbiAqXG4gKiBWZXJzaW9uIDIwMTItMDMtMDlcbiAqXG4gKiBUaGlzIGNvZGUgd2FzIHBsYWNlZCBpbiB0aGUgcHVibGljIGRvbWFpbiBieSBpdHMgb3JpZ2luYWwgYXV0aG9yLFxuICogU3RlZmFuIEd1c3RhdnNvbi4gWW91IG1heSB1c2UgaXQgYXMgeW91IHNlZSBmaXQsIGJ1dFxuICogYXR0cmlidXRpb24gaXMgYXBwcmVjaWF0ZWQuXG4gKlxuICovXG5cblxuZnVuY3Rpb24gR3JhZCh4LCB5LCB6KSB7XG4gICAgdGhpcy54ID0geDsgdGhpcy55ID0geTsgdGhpcy56ID0gejtcbn1cblxuR3JhZC5wcm90b3R5cGUuZG90MiA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICByZXR1cm4gdGhpcy54KnggKyB0aGlzLnkqeTtcbn07XG5cbkdyYWQucHJvdG90eXBlLmRvdDMgPSBmdW5jdGlvbih4LCB5LCB6KSB7XG4gICAgcmV0dXJuIHRoaXMueCp4ICsgdGhpcy55KnkgKyB0aGlzLnoqejtcbn07XG5cbnZhciBncmFkMyA9IFtuZXcgR3JhZCgxLDEsMCksbmV3IEdyYWQoLTEsMSwwKSxuZXcgR3JhZCgxLC0xLDApLG5ldyBHcmFkKC0xLC0xLDApLFxuICAgICAgICAgICAgICAgIG5ldyBHcmFkKDEsMCwxKSxuZXcgR3JhZCgtMSwwLDEpLG5ldyBHcmFkKDEsMCwtMSksbmV3IEdyYWQoLTEsMCwtMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyYWQoMCwxLDEpLG5ldyBHcmFkKDAsLTEsMSksbmV3IEdyYWQoMCwxLC0xKSxuZXcgR3JhZCgwLC0xLC0xKV07XG5cbnZhciBwID0gWzE1MSwxNjAsMTM3LDkxLDkwLDE1LFxuMTMxLDEzLDIwMSw5NSw5Niw1MywxOTQsMjMzLDcsMjI1LDE0MCwzNiwxMDMsMzAsNjksMTQyLDgsOTksMzcsMjQwLDIxLDEwLDIzLFxuMTkwLCA2LDE0OCwyNDcsMTIwLDIzNCw3NSwwLDI2LDE5Nyw2Miw5NCwyNTIsMjE5LDIwMywxMTcsMzUsMTEsMzIsNTcsMTc3LDMzLFxuODgsMjM3LDE0OSw1Niw4NywxNzQsMjAsMTI1LDEzNiwxNzEsMTY4LCA2OCwxNzUsNzQsMTY1LDcxLDEzNCwxMzksNDgsMjcsMTY2LFxuNzcsMTQ2LDE1OCwyMzEsODMsMTExLDIyOSwxMjIsNjAsMjExLDEzMywyMzAsMjIwLDEwNSw5Miw0MSw1NSw0NiwyNDUsNDAsMjQ0LFxuMTAyLDE0Myw1NCwgNjUsMjUsNjMsMTYxLCAxLDIxNiw4MCw3MywyMDksNzYsMTMyLDE4NywyMDgsIDg5LDE4LDE2OSwyMDAsMTk2LFxuMTM1LDEzMCwxMTYsMTg4LDE1OSw4NiwxNjQsMTAwLDEwOSwxOTgsMTczLDE4NiwgMyw2NCw1MiwyMTcsMjI2LDI1MCwxMjQsMTIzLFxuNSwyMDIsMzgsMTQ3LDExOCwxMjYsMjU1LDgyLDg1LDIxMiwyMDcsMjA2LDU5LDIyNyw0NywxNiw1OCwxNywxODIsMTg5LDI4LDQyLFxuMjIzLDE4MywxNzAsMjEzLDExOSwyNDgsMTUyLCAyLDQ0LDE1NCwxNjMsIDcwLDIyMSwxNTMsMTAxLDE1NSwxNjcsIDQzLDE3Miw5LFxuMTI5LDIyLDM5LDI1MywgMTksOTgsMTA4LDExMCw3OSwxMTMsMjI0LDIzMiwxNzgsMTg1LCAxMTIsMTA0LDIxOCwyNDYsOTcsMjI4LFxuMjUxLDM0LDI0MiwxOTMsMjM4LDIxMCwxNDQsMTIsMTkxLDE3OSwxNjIsMjQxLCA4MSw1MSwxNDUsMjM1LDI0OSwxNCwyMzksMTA3LFxuNDksMTkyLDIxNCwgMzEsMTgxLDE5OSwxMDYsMTU3LDE4NCwgODQsMjA0LDE3NiwxMTUsMTIxLDUwLDQ1LDEyNywgNCwxNTAsMjU0LFxuMTM4LDIzNiwyMDUsOTMsMjIyLDExNCw2NywyOSwyNCw3MiwyNDMsMTQxLDEyOCwxOTUsNzgsNjYsMjE1LDYxLDE1NiwxODBdO1xuLy8gVG8gcmVtb3ZlIHRoZSBuZWVkIGZvciBpbmRleCB3cmFwcGluZywgZG91YmxlIHRoZSBwZXJtdXRhdGlvbiB0YWJsZSBsZW5ndGhcbnZhciBwZXJtID0gbmV3IEFycmF5KDUxMik7XG52YXIgZ3JhZFAgPSBuZXcgQXJyYXkoNTEyKTtcblxuLy8gVGhpcyBpc24ndCBhIHZlcnkgZ29vZCBzZWVkaW5nIGZ1bmN0aW9uLCBidXQgaXQgd29ya3Mgb2suIEl0IHN1cHBvcnRzIDJeMTZcbi8vIGRpZmZlcmVudCBzZWVkIHZhbHVlcy4gV3JpdGUgc29tZXRoaW5nIGJldHRlciBpZiB5b3UgbmVlZCBtb3JlIHNlZWRzLlxubW9kdWxlLmV4cG9ydHMuc2VlZCA9IGZ1bmN0aW9uKHNlZWQpIHtcbiAgICBpZihzZWVkID4gMCAmJiBzZWVkIDwgMSkge1xuICAgIC8vIFNjYWxlIHRoZSBzZWVkIG91dFxuICAgIHNlZWQgKj0gNjU1MzY7XG4gICAgfVxuXG4gICAgc2VlZCA9IE1hdGguZmxvb3Ioc2VlZCk7XG4gICAgaWYoc2VlZCA8IDI1Nikge1xuICAgIHNlZWQgfD0gc2VlZCA8PCA4O1xuICAgIH1cblxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgIHZhciB2O1xuICAgIGlmIChpICYgMSkge1xuICAgICAgICB2ID0gcFtpXSBeIChzZWVkICYgMjU1KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2ID0gcFtpXSBeICgoc2VlZD4+OCkgJiAyNTUpO1xuICAgIH1cblxuICAgIHBlcm1baV0gPSBwZXJtW2kgKyAyNTZdID0gdjtcbiAgICBncmFkUFtpXSA9IGdyYWRQW2kgKyAyNTZdID0gZ3JhZDNbdiAlIDEyXTtcbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cy5zZWVkKDApO1xuXG4vKlxuZm9yKHZhciBpPTA7IGk8MjU2OyBpKyspIHtcbiAgICBwZXJtW2ldID0gcGVybVtpICsgMjU2XSA9IHBbaV07XG4gICAgZ3JhZFBbaV0gPSBncmFkUFtpICsgMjU2XSA9IGdyYWQzW3Blcm1baV0gJSAxMl07XG59Ki9cblxuLy8gU2tld2luZyBhbmQgdW5za2V3aW5nIGZhY3RvcnMgZm9yIDIsIDMsIGFuZCA0IGRpbWVuc2lvbnNcbnZhciBGMiA9IDAuNSooTWF0aC5zcXJ0KDMpLTEpO1xudmFyIEcyID0gKDMtTWF0aC5zcXJ0KDMpKS82O1xuXG52YXIgRjMgPSAxLzM7XG52YXIgRzMgPSAxLzY7XG5cbi8vIDJEIHNpbXBsZXggbm9pc2Vcbm1vZHVsZS5leHBvcnRzLnNpbXBsZXgyID0gZnVuY3Rpb24oeGluLCB5aW4pIHtcbiAgICB2YXIgbjAsIG4xLCBuMjsgLy8gTm9pc2UgY29udHJpYnV0aW9ucyBmcm9tIHRoZSB0aHJlZSBjb3JuZXJzXG4gICAgLy8gU2tldyB0aGUgaW5wdXQgc3BhY2UgdG8gZGV0ZXJtaW5lIHdoaWNoIHNpbXBsZXggY2VsbCB3ZSdyZSBpblxuICAgIHZhciBzID0gKHhpbit5aW4pKkYyOyAvLyBIYWlyeSBmYWN0b3IgZm9yIDJEXG4gICAgdmFyIGkgPSBNYXRoLmZsb29yKHhpbitzKTtcbiAgICB2YXIgaiA9IE1hdGguZmxvb3IoeWluK3MpO1xuICAgIHZhciB0ID0gKGkraikqRzI7XG4gICAgdmFyIHgwID0geGluLWkrdDsgLy8gVGhlIHgseSBkaXN0YW5jZXMgZnJvbSB0aGUgY2VsbCBvcmlnaW4sIHVuc2tld2VkLlxuICAgIHZhciB5MCA9IHlpbi1qK3Q7XG4gICAgLy8gRm9yIHRoZSAyRCBjYXNlLCB0aGUgc2ltcGxleCBzaGFwZSBpcyBhbiBlcXVpbGF0ZXJhbCB0cmlhbmdsZS5cbiAgICAvLyBEZXRlcm1pbmUgd2hpY2ggc2ltcGxleCB3ZSBhcmUgaW4uXG4gICAgdmFyIGkxLCBqMTsgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIChtaWRkbGUpIGNvcm5lciBvZiBzaW1wbGV4IGluIChpLGopIGNvb3Jkc1xuICAgIGlmKHgwPnkwKSB7IC8vIGxvd2VyIHRyaWFuZ2xlLCBYWSBvcmRlcjogKDAsMCktPigxLDApLT4oMSwxKVxuICAgIGkxPTE7IGoxPTA7XG4gICAgfSBlbHNlIHsgICAgLy8gdXBwZXIgdHJpYW5nbGUsIFlYIG9yZGVyOiAoMCwwKS0+KDAsMSktPigxLDEpXG4gICAgaTE9MDsgajE9MTtcbiAgICB9XG4gICAgLy8gQSBzdGVwIG9mICgxLDApIGluIChpLGopIG1lYW5zIGEgc3RlcCBvZiAoMS1jLC1jKSBpbiAoeCx5KSwgYW5kXG4gICAgLy8gYSBzdGVwIG9mICgwLDEpIGluIChpLGopIG1lYW5zIGEgc3RlcCBvZiAoLWMsMS1jKSBpbiAoeCx5KSwgd2hlcmVcbiAgICAvLyBjID0gKDMtc3FydCgzKSkvNlxuICAgIHZhciB4MSA9IHgwIC0gaTEgKyBHMjsgLy8gT2Zmc2V0cyBmb3IgbWlkZGxlIGNvcm5lciBpbiAoeCx5KSB1bnNrZXdlZCBjb29yZHNcbiAgICB2YXIgeTEgPSB5MCAtIGoxICsgRzI7XG4gICAgdmFyIHgyID0geDAgLSAxICsgMiAqIEcyOyAvLyBPZmZzZXRzIGZvciBsYXN0IGNvcm5lciBpbiAoeCx5KSB1bnNrZXdlZCBjb29yZHNcbiAgICB2YXIgeTIgPSB5MCAtIDEgKyAyICogRzI7XG4gICAgLy8gV29yayBvdXQgdGhlIGhhc2hlZCBncmFkaWVudCBpbmRpY2VzIG9mIHRoZSB0aHJlZSBzaW1wbGV4IGNvcm5lcnNcbiAgICBpICY9IDI1NTtcbiAgICBqICY9IDI1NTtcbiAgICB2YXIgZ2kwID0gZ3JhZFBbaStwZXJtW2pdXTtcbiAgICB2YXIgZ2kxID0gZ3JhZFBbaStpMStwZXJtW2orajFdXTtcbiAgICB2YXIgZ2kyID0gZ3JhZFBbaSsxK3Blcm1baisxXV07XG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBjb250cmlidXRpb24gZnJvbSB0aGUgdGhyZWUgY29ybmVyc1xuICAgIHZhciB0MCA9IDAuNSAtIHgwKngwLXkwKnkwO1xuICAgIGlmKHQwPDApIHtcbiAgICBuMCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICB0MCAqPSB0MDtcbiAgICBuMCA9IHQwICogdDAgKiBnaTAuZG90Mih4MCwgeTApOyAgLy8gKHgseSkgb2YgZ3JhZDMgdXNlZCBmb3IgMkQgZ3JhZGllbnRcbiAgICB9XG4gICAgdmFyIHQxID0gMC41IC0geDEqeDEteTEqeTE7XG4gICAgaWYodDE8MCkge1xuICAgIG4xID0gMDtcbiAgICB9IGVsc2Uge1xuICAgIHQxICo9IHQxO1xuICAgIG4xID0gdDEgKiB0MSAqIGdpMS5kb3QyKHgxLCB5MSk7XG4gICAgfVxuICAgIHZhciB0MiA9IDAuNSAtIHgyKngyLXkyKnkyO1xuICAgIGlmKHQyPDApIHtcbiAgICBuMiA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICB0MiAqPSB0MjtcbiAgICBuMiA9IHQyICogdDIgKiBnaTIuZG90Mih4MiwgeTIpO1xuICAgIH1cbiAgICAvLyBBZGQgY29udHJpYnV0aW9ucyBmcm9tIGVhY2ggY29ybmVyIHRvIGdldCB0aGUgZmluYWwgbm9pc2UgdmFsdWUuXG4gICAgLy8gVGhlIHJlc3VsdCBpcyBzY2FsZWQgdG8gcmV0dXJuIHZhbHVlcyBpbiB0aGUgaW50ZXJ2YWwgWy0xLDFdLlxuICAgIHJldHVybiA3MCAqIChuMCArIG4xICsgbjIpO1xufTtcblxuLy8gM0Qgc2ltcGxleCBub2lzZVxubW9kdWxlLmV4cG9ydHMuc2ltcGxleDMgPSBmdW5jdGlvbih4aW4sIHlpbiwgemluKSB7XG4gICAgdmFyIG4wLCBuMSwgbjIsIG4zOyAvLyBOb2lzZSBjb250cmlidXRpb25zIGZyb20gdGhlIGZvdXIgY29ybmVyc1xuXG4gICAgLy8gU2tldyB0aGUgaW5wdXQgc3BhY2UgdG8gZGV0ZXJtaW5lIHdoaWNoIHNpbXBsZXggY2VsbCB3ZSdyZSBpblxuICAgIHZhciBzID0gKHhpbit5aW4remluKSpGMzsgLy8gSGFpcnkgZmFjdG9yIGZvciAyRFxuICAgIHZhciBpID0gTWF0aC5mbG9vcih4aW4rcyk7XG4gICAgdmFyIGogPSBNYXRoLmZsb29yKHlpbitzKTtcbiAgICB2YXIgayA9IE1hdGguZmxvb3IoemluK3MpO1xuXG4gICAgdmFyIHQgPSAoaStqK2spKkczO1xuICAgIHZhciB4MCA9IHhpbi1pK3Q7IC8vIFRoZSB4LHkgZGlzdGFuY2VzIGZyb20gdGhlIGNlbGwgb3JpZ2luLCB1bnNrZXdlZC5cbiAgICB2YXIgeTAgPSB5aW4tait0O1xuICAgIHZhciB6MCA9IHppbi1rK3Q7XG5cbiAgICAvLyBGb3IgdGhlIDNEIGNhc2UsIHRoZSBzaW1wbGV4IHNoYXBlIGlzIGEgc2xpZ2h0bHkgaXJyZWd1bGFyIHRldHJhaGVkcm9uLlxuICAgIC8vIERldGVybWluZSB3aGljaCBzaW1wbGV4IHdlIGFyZSBpbi5cbiAgICB2YXIgaTEsIGoxLCBrMTsgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIGNvcm5lciBvZiBzaW1wbGV4IGluIChpLGosaykgY29vcmRzXG4gICAgdmFyIGkyLCBqMiwgazI7IC8vIE9mZnNldHMgZm9yIHRoaXJkIGNvcm5lciBvZiBzaW1wbGV4IGluIChpLGosaykgY29vcmRzXG4gICAgaWYoeDAgPj0geTApIHtcbiAgICBpZih5MCA+PSB6MCkgICAgICB7IGkxPTE7IGoxPTA7IGsxPTA7IGkyPTE7IGoyPTE7IGsyPTA7IH1cbiAgICBlbHNlIGlmKHgwID49IHowKSB7IGkxPTE7IGoxPTA7IGsxPTA7IGkyPTE7IGoyPTA7IGsyPTE7IH1cbiAgICBlbHNlICAgICAgICAgICAgICB7IGkxPTA7IGoxPTA7IGsxPTE7IGkyPTE7IGoyPTA7IGsyPTE7IH1cbiAgICB9IGVsc2Uge1xuICAgIGlmKHkwIDwgejApICAgICAgeyBpMT0wOyBqMT0wOyBrMT0xOyBpMj0wOyBqMj0xOyBrMj0xOyB9XG4gICAgZWxzZSBpZih4MCA8IHowKSB7IGkxPTA7IGoxPTE7IGsxPTA7IGkyPTA7IGoyPTE7IGsyPTE7IH1cbiAgICBlbHNlICAgICAgICAgICAgIHsgaTE9MDsgajE9MTsgazE9MDsgaTI9MTsgajI9MTsgazI9MDsgfVxuICAgIH1cbiAgICAvLyBBIHN0ZXAgb2YgKDEsMCwwKSBpbiAoaSxqLGspIG1lYW5zIGEgc3RlcCBvZiAoMS1jLC1jLC1jKSBpbiAoeCx5LHopLFxuICAgIC8vIGEgc3RlcCBvZiAoMCwxLDApIGluIChpLGosaykgbWVhbnMgYSBzdGVwIG9mICgtYywxLWMsLWMpIGluICh4LHkseiksIGFuZFxuICAgIC8vIGEgc3RlcCBvZiAoMCwwLDEpIGluIChpLGosaykgbWVhbnMgYSBzdGVwIG9mICgtYywtYywxLWMpIGluICh4LHkseiksIHdoZXJlXG4gICAgLy8gYyA9IDEvNi5cbiAgICB2YXIgeDEgPSB4MCAtIGkxICsgRzM7IC8vIE9mZnNldHMgZm9yIHNlY29uZCBjb3JuZXJcbiAgICB2YXIgeTEgPSB5MCAtIGoxICsgRzM7XG4gICAgdmFyIHoxID0gejAgLSBrMSArIEczO1xuXG4gICAgdmFyIHgyID0geDAgLSBpMiArIDIgKiBHMzsgLy8gT2Zmc2V0cyBmb3IgdGhpcmQgY29ybmVyXG4gICAgdmFyIHkyID0geTAgLSBqMiArIDIgKiBHMztcbiAgICB2YXIgejIgPSB6MCAtIGsyICsgMiAqIEczO1xuXG4gICAgdmFyIHgzID0geDAgLSAxICsgMyAqIEczOyAvLyBPZmZzZXRzIGZvciBmb3VydGggY29ybmVyXG4gICAgdmFyIHkzID0geTAgLSAxICsgMyAqIEczO1xuICAgIHZhciB6MyA9IHowIC0gMSArIDMgKiBHMztcblxuICAgIC8vIFdvcmsgb3V0IHRoZSBoYXNoZWQgZ3JhZGllbnQgaW5kaWNlcyBvZiB0aGUgZm91ciBzaW1wbGV4IGNvcm5lcnNcbiAgICBpICY9IDI1NTtcbiAgICBqICY9IDI1NTtcbiAgICBrICY9IDI1NTtcbiAgICB2YXIgZ2kwID0gZ3JhZFBbaSsgICBwZXJtW2orICAgcGVybVtrICAgXV1dO1xuICAgIHZhciBnaTEgPSBncmFkUFtpK2kxK3Blcm1baitqMStwZXJtW2srazFdXV07XG4gICAgdmFyIGdpMiA9IGdyYWRQW2kraTIrcGVybVtqK2oyK3Blcm1baytrMl1dXTtcbiAgICB2YXIgZ2kzID0gZ3JhZFBbaSsgMStwZXJtW2orIDErcGVybVtrKyAxXV1dO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBjb250cmlidXRpb24gZnJvbSB0aGUgZm91ciBjb3JuZXJzXG4gICAgdmFyIHQwID0gMC42IC0geDAqeDAgLSB5MCp5MCAtIHowKnowO1xuICAgIGlmKHQwPDApIHtcbiAgICBuMCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICB0MCAqPSB0MDtcbiAgICBuMCA9IHQwICogdDAgKiBnaTAuZG90Myh4MCwgeTAsIHowKTsgIC8vICh4LHkpIG9mIGdyYWQzIHVzZWQgZm9yIDJEIGdyYWRpZW50XG4gICAgfVxuICAgIHZhciB0MSA9IDAuNiAtIHgxKngxIC0geTEqeTEgLSB6MSp6MTtcbiAgICBpZih0MTwwKSB7XG4gICAgbjEgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgdDEgKj0gdDE7XG4gICAgbjEgPSB0MSAqIHQxICogZ2kxLmRvdDMoeDEsIHkxLCB6MSk7XG4gICAgfVxuICAgIHZhciB0MiA9IDAuNiAtIHgyKngyIC0geTIqeTIgLSB6Mip6MjtcbiAgICBpZih0MjwwKSB7XG4gICAgbjIgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgdDIgKj0gdDI7XG4gICAgbjIgPSB0MiAqIHQyICogZ2kyLmRvdDMoeDIsIHkyLCB6Mik7XG4gICAgfVxuICAgIHZhciB0MyA9IDAuNiAtIHgzKngzIC0geTMqeTMgLSB6Myp6MztcbiAgICBpZih0MzwwKSB7XG4gICAgbjMgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgdDMgKj0gdDM7XG4gICAgbjMgPSB0MyAqIHQzICogZ2kzLmRvdDMoeDMsIHkzLCB6Myk7XG4gICAgfVxuICAgIC8vIEFkZCBjb250cmlidXRpb25zIGZyb20gZWFjaCBjb3JuZXIgdG8gZ2V0IHRoZSBmaW5hbCBub2lzZSB2YWx1ZS5cbiAgICAvLyBUaGUgcmVzdWx0IGlzIHNjYWxlZCB0byByZXR1cm4gdmFsdWVzIGluIHRoZSBpbnRlcnZhbCBbLTEsMV0uXG4gICAgcmV0dXJuIDMyICogKG4wICsgbjEgKyBuMiArIG4zKTtcblxufTtcblxuLy8gIyMjIyMgUGVybGluIG5vaXNlIHN0dWZmXG5cbmZ1bmN0aW9uIGZhZGUodCkge1xuICAgIHJldHVybiB0KnQqdCoodCoodCo2LTE1KSsxMCk7XG59XG5cbmZ1bmN0aW9uIGxlcnAoYSwgYiwgdCkge1xuICAgIHJldHVybiAoMS10KSphICsgdCpiO1xufVxuXG4vLyAyRCBQZXJsaW4gTm9pc2Vcbm1vZHVsZS5leHBvcnRzLnBlcmxpbjIgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgLy8gRmluZCB1bml0IGdyaWQgY2VsbCBjb250YWluaW5nIHBvaW50XG4gICAgdmFyIFggPSBNYXRoLmZsb29yKHgpLCBZID0gTWF0aC5mbG9vcih5KTtcbiAgICAvLyBHZXQgcmVsYXRpdmUgeHkgY29vcmRpbmF0ZXMgb2YgcG9pbnQgd2l0aGluIHRoYXQgY2VsbFxuICAgIHggPSB4IC0gWDsgeSA9IHkgLSBZO1xuICAgIC8vIFdyYXAgdGhlIGludGVnZXIgY2VsbHMgYXQgMjU1IChzbWFsbGVyIGludGVnZXIgcGVyaW9kIGNhbiBiZSBpbnRyb2R1Y2VkIGhlcmUpXG4gICAgWCA9IFggJiAyNTU7IFkgPSBZICYgMjU1O1xuXG4gICAgLy8gQ2FsY3VsYXRlIG5vaXNlIGNvbnRyaWJ1dGlvbnMgZnJvbSBlYWNoIG9mIHRoZSBmb3VyIGNvcm5lcnNcbiAgICB2YXIgbjAwID0gZ3JhZFBbWCtwZXJtW1ldXS5kb3QyKHgsIHkpO1xuICAgIHZhciBuMDEgPSBncmFkUFtYK3Blcm1bWSsxXV0uZG90Mih4LCB5LTEpO1xuICAgIHZhciBuMTAgPSBncmFkUFtYKzErcGVybVtZXV0uZG90Mih4LTEsIHkpO1xuICAgIHZhciBuMTEgPSBncmFkUFtYKzErcGVybVtZKzFdXS5kb3QyKHgtMSwgeS0xKTtcblxuICAgIC8vIENvbXB1dGUgdGhlIGZhZGUgY3VydmUgdmFsdWUgZm9yIHhcbiAgICB2YXIgdSA9IGZhZGUoeCk7XG5cbiAgICAvLyBJbnRlcnBvbGF0ZSB0aGUgZm91ciByZXN1bHRzXG4gICAgcmV0dXJuIGxlcnAoXG4gICAgICAgIGxlcnAobjAwLCBuMTAsIHUpLFxuICAgICAgICBsZXJwKG4wMSwgbjExLCB1KSxcbiAgICAgICAgZmFkZSh5KSk7XG59O1xuXG4vLyAzRCBQZXJsaW4gTm9pc2Vcbm1vZHVsZS5leHBvcnRzLnBlcmxpbjMgPSBmdW5jdGlvbih4LCB5LCB6KSB7XG4gICAgLy8gRmluZCB1bml0IGdyaWQgY2VsbCBjb250YWluaW5nIHBvaW50XG4gICAgdmFyIFggPSBNYXRoLmZsb29yKHgpLCBZID0gTWF0aC5mbG9vcih5KSwgWiA9IE1hdGguZmxvb3Ioeik7XG4gICAgLy8gR2V0IHJlbGF0aXZlIHh5eiBjb29yZGluYXRlcyBvZiBwb2ludCB3aXRoaW4gdGhhdCBjZWxsXG4gICAgeCA9IHggLSBYOyB5ID0geSAtIFk7IHogPSB6IC0gWjtcbiAgICAvLyBXcmFwIHRoZSBpbnRlZ2VyIGNlbGxzIGF0IDI1NSAoc21hbGxlciBpbnRlZ2VyIHBlcmlvZCBjYW4gYmUgaW50cm9kdWNlZCBoZXJlKVxuICAgIFggPSBYICYgMjU1OyBZID0gWSAmIDI1NTsgWiA9IFogJiAyNTU7XG5cbiAgICAvLyBDYWxjdWxhdGUgbm9pc2UgY29udHJpYnV0aW9ucyBmcm9tIGVhY2ggb2YgdGhlIGVpZ2h0IGNvcm5lcnNcbiAgICB2YXIgbjAwMCA9IGdyYWRQW1grICBwZXJtW1krICBwZXJtW1ogIF1dXS5kb3QzKHgsICAgeSwgICAgIHopO1xuICAgIHZhciBuMDAxID0gZ3JhZFBbWCsgIHBlcm1bWSsgIHBlcm1bWisxXV1dLmRvdDMoeCwgICB5LCAgIHotMSk7XG4gICAgdmFyIG4wMTAgPSBncmFkUFtYKyAgcGVybVtZKzErcGVybVtaICBdXV0uZG90Myh4LCAgIHktMSwgICB6KTtcbiAgICB2YXIgbjAxMSA9IGdyYWRQW1grICBwZXJtW1krMStwZXJtW1orMV1dXS5kb3QzKHgsICAgeS0xLCB6LTEpO1xuICAgIHZhciBuMTAwID0gZ3JhZFBbWCsxK3Blcm1bWSsgIHBlcm1bWiAgXV1dLmRvdDMoeC0xLCAgIHksICAgeik7XG4gICAgdmFyIG4xMDEgPSBncmFkUFtYKzErcGVybVtZKyAgcGVybVtaKzFdXV0uZG90Myh4LTEsICAgeSwgei0xKTtcbiAgICB2YXIgbjExMCA9IGdyYWRQW1grMStwZXJtW1krMStwZXJtW1ogIF1dXS5kb3QzKHgtMSwgeS0xLCAgIHopO1xuICAgIHZhciBuMTExID0gZ3JhZFBbWCsxK3Blcm1bWSsxK3Blcm1bWisxXV1dLmRvdDMoeC0xLCB5LTEsIHotMSk7XG5cbiAgICAvLyBDb21wdXRlIHRoZSBmYWRlIGN1cnZlIHZhbHVlIGZvciB4LCB5LCB6XG4gICAgdmFyIHUgPSBmYWRlKHgpO1xuICAgIHZhciB2ID0gZmFkZSh5KTtcbiAgICB2YXIgdyA9IGZhZGUoeik7XG5cbiAgICAvLyBJbnRlcnBvbGF0ZVxuICAgIHJldHVybiBsZXJwKFxuICAgICAgICBsZXJwKFxuICAgICAgICBsZXJwKG4wMDAsIG4xMDAsIHUpLFxuICAgICAgICBsZXJwKG4wMDEsIG4xMDEsIHUpLCB3KSxcbiAgICAgICAgbGVycChcbiAgICAgICAgbGVycChuMDEwLCBuMTEwLCB1KSxcbiAgICAgICAgbGVycChuMDExLCBuMTExLCB1KSwgdyksXG4gICAgICAgIHYpO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9kZXAvbm9pc2UyLmpzXG4vLyBtb2R1bGUgaWQgPSAyNzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///278\n");

/***/ }),
/* 279 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export extrude */\nfunction extrude(points, height) {\n    let vertexCount = points.length / 2;\n    let position = new Float32Array(vertexCount * 6);\n    let indices = new (vertexCount > 65536 ? Uint32Array : Uint16Array)((vertexCount - 1) * 6);\n    let normal = new Float32Array(vertexCount * 6);\n\n    let prevX = 0;\n    let prevY = 0;\n    let nx;\n    let ny;\n    let off = 0;\n    for(let i = 0; i < vertexCount; i++) {\n        let i2 = i * 2;\n        let i6 = i * 6;\n        let x = points[i2];\n        let y = points[i2 + 1];\n\n        // Position\n        position[i6] = x;\n        position[i6 + 1] = y;\n        position[i6 + 2] = 0;\n        position[i6 + 3] = x;\n        position[i6 + 4] = y;\n        position[i6 + 5] = height;\n\n        // Normal\n        if (i === vertexCount - 1) {\n            let dx = x - prevX;\n            let dy = y - prevY;\n            nx = -dy;\n            ny = dx;\n        }\n        else {\n            let nextX = points[(i + 1) * 2];\n            let nextY = points[(i + 1) * 2 + 1];\n            let dx2 = nextX - x;\n            let dy2 = nextY - y;\n            if (i === 0) {\n                nx = -dy2;\n                ny = dx2;\n            }\n            else {\n                let dx1 = prevX - x;\n                let dy1 = prevY - y;\n\n                nx = dx1 + dx2;\n                ny = dy1 + dy2;\n            }\n        }\n        let d = Math.sqrt(nx * nx + ny * ny);\n        nx /= d;\n        ny /= d;\n        normal[i6] = normal[i6 + 3] = nx;\n        normal[i6 + 1] = normal[i6 + 4] = ny;\n        normal[i6 + 2] = normal[i6 + 5] = 0;\n\n        // Indices\n        if (i > 0) {\n            indices[off++] = i2 - 2;\n            indices[off++] = i2;\n            indices[off++] = i2 - 1;\n\n            indices[off++] = i2;\n            indices[off++] = i2 + 1;\n            indices[off++] = i2 - 1;\n        }\n\n        prevX = x;\n        prevY = y;\n    }\n    return {position, indices, normal};\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjc5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2V4dHJ1ZGUuanM/OTUwMSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZXh0cnVkZShwb2ludHMsIGhlaWdodCkge1xuICAgIGxldCB2ZXJ0ZXhDb3VudCA9IHBvaW50cy5sZW5ndGggLyAyO1xuICAgIGxldCBwb3NpdGlvbiA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQgKiA2KTtcbiAgICBsZXQgaW5kaWNlcyA9IG5ldyAodmVydGV4Q291bnQgPiA2NTUzNiA/IFVpbnQzMkFycmF5IDogVWludDE2QXJyYXkpKCh2ZXJ0ZXhDb3VudCAtIDEpICogNik7XG4gICAgbGV0IG5vcm1hbCA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQgKiA2KTtcblxuICAgIGxldCBwcmV2WCA9IDA7XG4gICAgbGV0IHByZXZZID0gMDtcbiAgICBsZXQgbng7XG4gICAgbGV0IG55O1xuICAgIGxldCBvZmYgPSAwO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKSB7XG4gICAgICAgIGxldCBpMiA9IGkgKiAyO1xuICAgICAgICBsZXQgaTYgPSBpICogNjtcbiAgICAgICAgbGV0IHggPSBwb2ludHNbaTJdO1xuICAgICAgICBsZXQgeSA9IHBvaW50c1tpMiArIDFdO1xuXG4gICAgICAgIC8vIFBvc2l0aW9uXG4gICAgICAgIHBvc2l0aW9uW2k2XSA9IHg7XG4gICAgICAgIHBvc2l0aW9uW2k2ICsgMV0gPSB5O1xuICAgICAgICBwb3NpdGlvbltpNiArIDJdID0gMDtcbiAgICAgICAgcG9zaXRpb25baTYgKyAzXSA9IHg7XG4gICAgICAgIHBvc2l0aW9uW2k2ICsgNF0gPSB5O1xuICAgICAgICBwb3NpdGlvbltpNiArIDVdID0gaGVpZ2h0O1xuXG4gICAgICAgIC8vIE5vcm1hbFxuICAgICAgICBpZiAoaSA9PT0gdmVydGV4Q291bnQgLSAxKSB7XG4gICAgICAgICAgICBsZXQgZHggPSB4IC0gcHJldlg7XG4gICAgICAgICAgICBsZXQgZHkgPSB5IC0gcHJldlk7XG4gICAgICAgICAgICBueCA9IC1keTtcbiAgICAgICAgICAgIG55ID0gZHg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmV4dFggPSBwb2ludHNbKGkgKyAxKSAqIDJdO1xuICAgICAgICAgICAgbGV0IG5leHRZID0gcG9pbnRzWyhpICsgMSkgKiAyICsgMV07XG4gICAgICAgICAgICBsZXQgZHgyID0gbmV4dFggLSB4O1xuICAgICAgICAgICAgbGV0IGR5MiA9IG5leHRZIC0geTtcbiAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbnggPSAtZHkyO1xuICAgICAgICAgICAgICAgIG55ID0gZHgyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGR4MSA9IHByZXZYIC0geDtcbiAgICAgICAgICAgICAgICBsZXQgZHkxID0gcHJldlkgLSB5O1xuXG4gICAgICAgICAgICAgICAgbnggPSBkeDEgKyBkeDI7XG4gICAgICAgICAgICAgICAgbnkgPSBkeTEgKyBkeTI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGQgPSBNYXRoLnNxcnQobnggKiBueCArIG55ICogbnkpO1xuICAgICAgICBueCAvPSBkO1xuICAgICAgICBueSAvPSBkO1xuICAgICAgICBub3JtYWxbaTZdID0gbm9ybWFsW2k2ICsgM10gPSBueDtcbiAgICAgICAgbm9ybWFsW2k2ICsgMV0gPSBub3JtYWxbaTYgKyA0XSA9IG55O1xuICAgICAgICBub3JtYWxbaTYgKyAyXSA9IG5vcm1hbFtpNiArIDVdID0gMDtcblxuICAgICAgICAvLyBJbmRpY2VzXG4gICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgaW5kaWNlc1tvZmYrK10gPSBpMiAtIDI7XG4gICAgICAgICAgICBpbmRpY2VzW29mZisrXSA9IGkyO1xuICAgICAgICAgICAgaW5kaWNlc1tvZmYrK10gPSBpMiAtIDE7XG5cbiAgICAgICAgICAgIGluZGljZXNbb2ZmKytdID0gaTI7XG4gICAgICAgICAgICBpbmRpY2VzW29mZisrXSA9IGkyICsgMTtcbiAgICAgICAgICAgIGluZGljZXNbb2ZmKytdID0gaTIgLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJldlggPSB4O1xuICAgICAgICBwcmV2WSA9IHk7XG4gICAgfVxuICAgIHJldHVybiB7cG9zaXRpb24sIGluZGljZXMsIG5vcm1hbH07XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZXh0cnVkZS5qc1xuLy8gbW9kdWxlIGlkID0gMjc5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///279\n");

/***/ }),
/* 280 */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(74)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjgwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2xvZGFzaC5kZWJvdW5jZS9pbmRleC5qcz9jYjViIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTkFOID0gMCAvIDA7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cbnZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXG4vKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xudmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cbi8qKlxuICogR2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlXG4gKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDIuNC4wXG4gKiBAY2F0ZWdvcnkgRGF0ZVxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG4gKiAgIGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7XG4gKiB9LCBfLm5vdygpKTtcbiAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG4gKi9cbnZhciBub3cgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG4gKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcbiAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcbiAqIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLlxuICogUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlXG4gKiBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG4gKiB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50XG4gKiBjYWxscyB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYFxuICogaW52b2NhdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG4gKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuICogaXMgaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICpcbiAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuICogdW50aWwgdG8gdGhlIG5leHQgdGljaywgc2ltaWxhciB0byBgc2V0VGltZW91dGAgd2l0aCBhIHRpbWVvdXQgb2YgYDBgLlxuICpcbiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy5kZWJvdW5jZWAgYW5kIGBfLnRocm90dGxlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdXG4gKiAgVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZSBkZWxheWVkIGJlZm9yZSBpdCdzIGludm9rZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gQXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eC5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG4gKlxuICogLy8gSW52b2tlIGBzZW5kTWFpbGAgd2hlbiBjbGlja2VkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHMuXG4gKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG4gKiAgICdsZWFkaW5nJzogdHJ1ZSxcbiAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAqIH0pKTtcbiAqXG4gKiAvLyBFbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzLlxuICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG4gKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG4gKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIGRlYm91bmNlZCk7XG4gKlxuICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGRlYm91bmNlZC5jYW5jZWwpO1xuICovXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gIHZhciBsYXN0QXJncyxcbiAgICAgIGxhc3RUaGlzLFxuICAgICAgbWF4V2FpdCxcbiAgICAgIHJlc3VsdCxcbiAgICAgIHRpbWVySWQsXG4gICAgICBsYXN0Q2FsbFRpbWUsXG4gICAgICBsYXN0SW52b2tlVGltZSA9IDAsXG4gICAgICBsZWFkaW5nID0gZmFsc2UsXG4gICAgICBtYXhpbmcgPSBmYWxzZSxcbiAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcbiAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zO1xuICAgIG1heFdhaXQgPSBtYXhpbmcgPyBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLCB3YWl0KSA6IG1heFdhaXQ7XG4gICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG4gICAgICAgIHRoaXNBcmcgPSBsYXN0VGhpcztcblxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcbiAgICAvLyBSZXNldCBhbnkgYG1heFdhaXRgIHRpbWVyLlxuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG4gICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcbiAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsO1xuXG4gICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZTtcblxuICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlXG4gICAgLy8gdHJhaWxpbmcgZWRnZSwgdGhlIHN5c3RlbSB0aW1lIGhhcyBnb25lIGJhY2t3YXJkcyBhbmQgd2UncmUgdHJlYXRpbmdcbiAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG4gICAgcmV0dXJuIChsYXN0Q2FsbFRpbWUgPT09IHVuZGVmaW5lZCB8fCAodGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCkgfHxcbiAgICAgICh0aW1lU2luY2VMYXN0Q2FsbCA8IDApIHx8IChtYXhpbmcgJiYgdGltZVNpbmNlTGFzdEludm9rZSA+PSBtYXhXYWl0KSk7XG4gIH1cblxuICBmdW5jdGlvbiB0aW1lckV4cGlyZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKTtcbiAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG4gICAgICByZXR1cm4gdHJhaWxpbmdFZGdlKHRpbWUpO1xuICAgIH1cbiAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcbiAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXG4gICAgLy8gT25seSBpbnZva2UgaWYgd2UgaGF2ZSBgbGFzdEFyZ3NgIHdoaWNoIG1lYW5zIGBmdW5jYCBoYXMgYmVlblxuICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykge1xuICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG4gICAgfVxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICBpZiAodGltZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG4gICAgfVxuICAgIGxhc3RJbnZva2VUaW1lID0gMDtcbiAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCksXG4gICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cbiAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcbiAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgbGFzdENhbGxUaW1lID0gdGltZTtcblxuICAgIGlmIChpc0ludm9raW5nKSB7XG4gICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgICAgaWYgKG1heGluZykge1xuICAgICAgICAvLyBIYW5kbGUgaW52b2NhdGlvbnMgaW4gYSB0aWdodCBsb29wLlxuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuICByZXR1cm4gZGVib3VuY2VkO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b051bWJlcigzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuICogLy8gPT4gSW5maW5pdHlcbiAqXG4gKiBfLnRvTnVtYmVyKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gTkFOO1xuICB9XG4gIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyAob3RoZXIgKyAnJykgOiBvdGhlcjtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG4gIH1cbiAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICByZXR1cm4gKGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSlcbiAgICA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOClcbiAgICA6IChyZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkZWJvdW5jZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2xvZGFzaC5kZWJvdW5jZS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjgwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///280\n");

/***/ })
/******/ ]);